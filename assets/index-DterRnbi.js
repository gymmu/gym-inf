var Aq=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var Pwe=Aq((ts,QU)=>{function CB(s,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const n in i)if(n!=="default"&&!(n in s)){const r=Object.getOwnPropertyDescriptor(i,n);r&&Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:()=>i[n]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();function VD(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var qx={exports:{}},f0={},Kx={exports:{}},fi={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yI;function Pq(){if(yI)return fi;yI=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;function g(X){return X===null||typeof X!="object"?null:(X=d&&X[d]||X["@@iterator"],typeof X=="function"?X:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,v={};function w(X,me,ze){this.props=X,this.context=me,this.refs=v,this.updater=ze||m}w.prototype.isReactComponent={},w.prototype.setState=function(X,me){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,me,"setState")},w.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function y(){}y.prototype=w.prototype;function S(X,me,ze){this.props=X,this.context=me,this.refs=v,this.updater=ze||m}var k=S.prototype=new y;k.constructor=S,_(k,w.prototype),k.isPureReactComponent=!0;var L=Array.isArray,T=Object.prototype.hasOwnProperty,A={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function O(X,me,ze){var it,He={},st=null,gt=null;if(me!=null)for(it in me.ref!==void 0&&(gt=me.ref),me.key!==void 0&&(st=""+me.key),me)T.call(me,it)&&!I.hasOwnProperty(it)&&(He[it]=me[it]);var St=arguments.length-2;if(St===1)He.children=ze;else if(1<St){for(var Lt=Array(St),ci=0;ci<St;ci++)Lt[ci]=arguments[ci+2];He.children=Lt}if(X&&X.defaultProps)for(it in St=X.defaultProps,St)He[it]===void 0&&(He[it]=St[it]);return{$$typeof:s,type:X,key:st,ref:gt,props:He,_owner:A.current}}function F(X,me){return{$$typeof:s,type:X.type,key:me,ref:X.ref,props:X.props,_owner:X._owner}}function J(X){return typeof X=="object"&&X!==null&&X.$$typeof===s}function Y(X){var me={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(ze){return me[ze]})}var G=/\/+/g;function ie(X,me){return typeof X=="object"&&X!==null&&X.key!=null?Y(""+X.key):me.toString(36)}function Z(X,me,ze,it,He){var st=typeof X;(st==="undefined"||st==="boolean")&&(X=null);var gt=!1;if(X===null)gt=!0;else switch(st){case"string":case"number":gt=!0;break;case"object":switch(X.$$typeof){case s:case e:gt=!0}}if(gt)return gt=X,He=He(gt),X=it===""?"."+ie(gt,0):it,L(He)?(ze="",X!=null&&(ze=X.replace(G,"$&/")+"/"),Z(He,me,ze,"",function(ci){return ci})):He!=null&&(J(He)&&(He=F(He,ze+(!He.key||gt&&gt.key===He.key?"":(""+He.key).replace(G,"$&/")+"/")+X)),me.push(He)),1;if(gt=0,it=it===""?".":it+":",L(X))for(var St=0;St<X.length;St++){st=X[St];var Lt=it+ie(st,St);gt+=Z(st,me,ze,Lt,He)}else if(Lt=g(X),typeof Lt=="function")for(X=Lt.call(X),St=0;!(st=X.next()).done;)st=st.value,Lt=it+ie(st,St++),gt+=Z(st,me,ze,Lt,He);else if(st==="object")throw me=String(X),Error("Objects are not valid as a React child (found: "+(me==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":me)+"). If you meant to render a collection of children, use an array instead.");return gt}function ue(X,me,ze){if(X==null)return X;var it=[],He=0;return Z(X,it,"","",function(st){return me.call(ze,st,He++)}),it}function be(X){if(X._status===-1){var me=X._result;me=me(),me.then(function(ze){(X._status===0||X._status===-1)&&(X._status=1,X._result=ze)},function(ze){(X._status===0||X._status===-1)&&(X._status=2,X._result=ze)}),X._status===-1&&(X._status=0,X._result=me)}if(X._status===1)return X._result.default;throw X._result}var ye={current:null},ae={transition:null},xe={ReactCurrentDispatcher:ye,ReactCurrentBatchConfig:ae,ReactCurrentOwner:A};function fe(){throw Error("act(...) is not supported in production builds of React.")}return fi.Children={map:ue,forEach:function(X,me,ze){ue(X,function(){me.apply(this,arguments)},ze)},count:function(X){var me=0;return ue(X,function(){me++}),me},toArray:function(X){return ue(X,function(me){return me})||[]},only:function(X){if(!J(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},fi.Component=w,fi.Fragment=t,fi.Profiler=n,fi.PureComponent=S,fi.StrictMode=i,fi.Suspense=l,fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xe,fi.act=fe,fi.cloneElement=function(X,me,ze){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var it=_({},X.props),He=X.key,st=X.ref,gt=X._owner;if(me!=null){if(me.ref!==void 0&&(st=me.ref,gt=A.current),me.key!==void 0&&(He=""+me.key),X.type&&X.type.defaultProps)var St=X.type.defaultProps;for(Lt in me)T.call(me,Lt)&&!I.hasOwnProperty(Lt)&&(it[Lt]=me[Lt]===void 0&&St!==void 0?St[Lt]:me[Lt])}var Lt=arguments.length-2;if(Lt===1)it.children=ze;else if(1<Lt){St=Array(Lt);for(var ci=0;ci<Lt;ci++)St[ci]=arguments[ci+2];it.children=St}return{$$typeof:s,type:X.type,key:He,ref:st,props:it,_owner:gt}},fi.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:r,_context:X},X.Consumer=X},fi.createElement=O,fi.createFactory=function(X){var me=O.bind(null,X);return me.type=X,me},fi.createRef=function(){return{current:null}},fi.forwardRef=function(X){return{$$typeof:a,render:X}},fi.isValidElement=J,fi.lazy=function(X){return{$$typeof:u,_payload:{_status:-1,_result:X},_init:be}},fi.memo=function(X,me){return{$$typeof:c,type:X,compare:me===void 0?null:me}},fi.startTransition=function(X){var me=ae.transition;ae.transition={};try{X()}finally{ae.transition=me}},fi.unstable_act=fe,fi.useCallback=function(X,me){return ye.current.useCallback(X,me)},fi.useContext=function(X){return ye.current.useContext(X)},fi.useDebugValue=function(){},fi.useDeferredValue=function(X){return ye.current.useDeferredValue(X)},fi.useEffect=function(X,me){return ye.current.useEffect(X,me)},fi.useId=function(){return ye.current.useId()},fi.useImperativeHandle=function(X,me,ze){return ye.current.useImperativeHandle(X,me,ze)},fi.useInsertionEffect=function(X,me){return ye.current.useInsertionEffect(X,me)},fi.useLayoutEffect=function(X,me){return ye.current.useLayoutEffect(X,me)},fi.useMemo=function(X,me){return ye.current.useMemo(X,me)},fi.useReducer=function(X,me,ze){return ye.current.useReducer(X,me,ze)},fi.useRef=function(X){return ye.current.useRef(X)},fi.useState=function(X){return ye.current.useState(X)},fi.useSyncExternalStore=function(X,me,ze){return ye.current.useSyncExternalStore(X,me,ze)},fi.useTransition=function(){return ye.current.useTransition()},fi.version="18.3.1",fi}var SI;function zD(){return SI||(SI=1,Kx.exports=Pq()),Kx.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xI;function Oq(){if(xI)return f0;xI=1;var s=zD(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,n=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,d={},g=null,m=null;c!==void 0&&(g=""+c),l.key!==void 0&&(g=""+l.key),l.ref!==void 0&&(m=l.ref);for(u in l)i.call(l,u)&&!r.hasOwnProperty(u)&&(d[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)d[u]===void 0&&(d[u]=l[u]);return{$$typeof:e,type:a,key:g,ref:m,props:d,_owner:n.current}}return f0.Fragment=t,f0.jsx=o,f0.jsxs=o,f0}var kI;function Fq(){return kI||(kI=1,qx.exports=Oq()),qx.exports}var x=Fq(),Ee=zD();const Bq=VD(Ee),Wq=CB({__proto__:null,default:Bq},[Ee]);var xb={},Gx={exports:{}},oo={},Zx={exports:{}},Yx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LI;function Vq(){return LI||(LI=1,function(s){function e(ae,xe){var fe=ae.length;ae.push(xe);e:for(;0<fe;){var X=fe-1>>>1,me=ae[X];if(0<n(me,xe))ae[X]=xe,ae[fe]=me,fe=X;else break e}}function t(ae){return ae.length===0?null:ae[0]}function i(ae){if(ae.length===0)return null;var xe=ae[0],fe=ae.pop();if(fe!==xe){ae[0]=fe;e:for(var X=0,me=ae.length,ze=me>>>1;X<ze;){var it=2*(X+1)-1,He=ae[it],st=it+1,gt=ae[st];if(0>n(He,fe))st<me&&0>n(gt,He)?(ae[X]=gt,ae[st]=fe,X=st):(ae[X]=He,ae[it]=fe,X=it);else if(st<me&&0>n(gt,fe))ae[X]=gt,ae[st]=fe,X=st;else break e}}return xe}function n(ae,xe){var fe=ae.sortIndex-xe.sortIndex;return fe!==0?fe:ae.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;s.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();s.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,g=3,m=!1,_=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(ae){for(var xe=t(c);xe!==null;){if(xe.callback===null)i(c);else if(xe.startTime<=ae)i(c),xe.sortIndex=xe.expirationTime,e(l,xe);else break;xe=t(c)}}function L(ae){if(v=!1,k(ae),!_)if(t(l)!==null)_=!0,be(T);else{var xe=t(c);xe!==null&&ye(L,xe.startTime-ae)}}function T(ae,xe){_=!1,v&&(v=!1,y(O),O=-1),m=!0;var fe=g;try{for(k(xe),d=t(l);d!==null&&(!(d.expirationTime>xe)||ae&&!Y());){var X=d.callback;if(typeof X=="function"){d.callback=null,g=d.priorityLevel;var me=X(d.expirationTime<=xe);xe=s.unstable_now(),typeof me=="function"?d.callback=me:d===t(l)&&i(l),k(xe)}else i(l);d=t(l)}if(d!==null)var ze=!0;else{var it=t(c);it!==null&&ye(L,it.startTime-xe),ze=!1}return ze}finally{d=null,g=fe,m=!1}}var A=!1,I=null,O=-1,F=5,J=-1;function Y(){return!(s.unstable_now()-J<F)}function G(){if(I!==null){var ae=s.unstable_now();J=ae;var xe=!0;try{xe=I(!0,ae)}finally{xe?ie():(A=!1,I=null)}}else A=!1}var ie;if(typeof S=="function")ie=function(){S(G)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ue=Z.port2;Z.port1.onmessage=G,ie=function(){ue.postMessage(null)}}else ie=function(){w(G,0)};function be(ae){I=ae,A||(A=!0,ie())}function ye(ae,xe){O=w(function(){ae(s.unstable_now())},xe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ae){ae.callback=null},s.unstable_continueExecution=function(){_||m||(_=!0,be(T))},s.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<ae?Math.floor(1e3/ae):5},s.unstable_getCurrentPriorityLevel=function(){return g},s.unstable_getFirstCallbackNode=function(){return t(l)},s.unstable_next=function(ae){switch(g){case 1:case 2:case 3:var xe=3;break;default:xe=g}var fe=g;g=xe;try{return ae()}finally{g=fe}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ae,xe){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var fe=g;g=ae;try{return xe()}finally{g=fe}},s.unstable_scheduleCallback=function(ae,xe,fe){var X=s.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?X+fe:X):fe=X,ae){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=fe+me,ae={id:u++,callback:xe,priorityLevel:ae,startTime:fe,expirationTime:me,sortIndex:-1},fe>X?(ae.sortIndex=fe,e(c,ae),t(l)===null&&ae===t(c)&&(v?(y(O),O=-1):v=!0,ye(L,fe-X))):(ae.sortIndex=me,e(l,ae),_||m||(_=!0,be(T))),ae},s.unstable_shouldYield=Y,s.unstable_wrapCallback=function(ae){var xe=g;return function(){var fe=g;g=xe;try{return ae.apply(this,arguments)}finally{g=fe}}}}(Yx)),Yx}var DI;function zq(){return DI||(DI=1,Zx.exports=Vq()),Zx.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EI;function Hq(){if(EI)return oo;EI=1;var s=zD(),e=zq();function t(h){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+h,p=1;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,n={};function r(h,f){o(h,f),o(h+"Capture",f)}function o(h,f){for(n[h]=f,h=0;h<f.length;h++)i.add(f[h])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},d={};function g(h){return l.call(d,h)?!0:l.call(u,h)?!1:c.test(h)?d[h]=!0:(u[h]=!0,!1)}function m(h,f,p,C){if(p!==null&&p.type===0)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return C?!1:p!==null?!p.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function _(h,f,p,C){if(f===null||typeof f>"u"||m(h,f,p,C))return!0;if(C)return!1;if(p!==null)switch(p.type){case 3:return!f;case 4:return f===!1;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}function v(h,f,p,C,D,M,W){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=C,this.attributeNamespace=D,this.mustUseProperty=p,this.propertyName=h,this.type=f,this.sanitizeURL=M,this.removeEmptyString=W}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){w[h]=new v(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var f=h[0];w[f]=new v(f,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){w[h]=new v(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){w[h]=new v(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){w[h]=new v(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){w[h]=new v(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){w[h]=new v(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){w[h]=new v(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){w[h]=new v(h,5,!1,h.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function S(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var f=h.replace(y,S);w[f]=new v(f,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var f=h.replace(y,S);w[f]=new v(f,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var f=h.replace(y,S);w[f]=new v(f,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){w[h]=new v(h,1,!1,h.toLowerCase(),null,!1,!1)}),w.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){w[h]=new v(h,1,!1,h.toLowerCase(),null,!0,!0)});function k(h,f,p,C){var D=w.hasOwnProperty(f)?w[f]:null;(D!==null?D.type!==0:C||!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(_(f,p,D,C)&&(p=null),C||D===null?g(f)&&(p===null?h.removeAttribute(f):h.setAttribute(f,""+p)):D.mustUseProperty?h[D.propertyName]=p===null?D.type===3?!1:"":p:(f=D.attributeName,C=D.attributeNamespace,p===null?h.removeAttribute(f):(D=D.type,p=D===3||D===4&&p===!0?"":""+p,C?h.setAttributeNS(C,f,p):h.setAttribute(f,p))))}var L=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),A=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),J=Symbol.for("react.provider"),Y=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),be=Symbol.for("react.lazy"),ye=Symbol.for("react.offscreen"),ae=Symbol.iterator;function xe(h){return h===null||typeof h!="object"?null:(h=ae&&h[ae]||h["@@iterator"],typeof h=="function"?h:null)}var fe=Object.assign,X;function me(h){if(X===void 0)try{throw Error()}catch(p){var f=p.stack.trim().match(/\n( *(at )?)/);X=f&&f[1]||""}return`
`+X+h}var ze=!1;function it(h,f){if(!h||ze)return"";ze=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(ke){var C=ke}Reflect.construct(h,[],f)}else{try{f.call()}catch(ke){C=ke}h.call(f.prototype)}else{try{throw Error()}catch(ke){C=ke}h()}}catch(ke){if(ke&&C&&typeof ke.stack=="string"){for(var D=ke.stack.split(`
`),M=C.stack.split(`
`),W=D.length-1,ee=M.length-1;1<=W&&0<=ee&&D[W]!==M[ee];)ee--;for(;1<=W&&0<=ee;W--,ee--)if(D[W]!==M[ee]){if(W!==1||ee!==1)do if(W--,ee--,0>ee||D[W]!==M[ee]){var le=`
`+D[W].replace(" at new "," at ");return h.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",h.displayName)),le}while(1<=W&&0<=ee);break}}}finally{ze=!1,Error.prepareStackTrace=p}return(h=h?h.displayName||h.name:"")?me(h):""}function He(h){switch(h.tag){case 5:return me(h.type);case 16:return me("Lazy");case 13:return me("Suspense");case 19:return me("SuspenseList");case 0:case 2:case 15:return h=it(h.type,!1),h;case 11:return h=it(h.type.render,!1),h;case 1:return h=it(h.type,!0),h;default:return""}}function st(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case I:return"Fragment";case A:return"Portal";case F:return"Profiler";case O:return"StrictMode";case ie:return"Suspense";case Z:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case Y:return(h.displayName||"Context")+".Consumer";case J:return(h._context.displayName||"Context")+".Provider";case G:var f=h.render;return h=h.displayName,h||(h=f.displayName||f.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case ue:return f=h.displayName||null,f!==null?f:st(h.type)||"Memo";case be:f=h._payload,h=h._init;try{return st(h(f))}catch{}}return null}function gt(h){var f=h.type;switch(h.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=f.render,h=h.displayName||h.name||"",f.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return st(f);case 8:return f===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function St(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function Lt(h){var f=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function ci(h){var f=Lt(h)?"checked":"value",p=Object.getOwnPropertyDescriptor(h.constructor.prototype,f),C=""+h[f];if(!h.hasOwnProperty(f)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var D=p.get,M=p.set;return Object.defineProperty(h,f,{configurable:!0,get:function(){return D.call(this)},set:function(W){C=""+W,M.call(this,W)}}),Object.defineProperty(h,f,{enumerable:p.enumerable}),{getValue:function(){return C},setValue:function(W){C=""+W},stopTracking:function(){h._valueTracker=null,delete h[f]}}}}function qs(h){h._valueTracker||(h._valueTracker=ci(h))}function Wi(h){if(!h)return!1;var f=h._valueTracker;if(!f)return!0;var p=f.getValue(),C="";return h&&(C=Lt(h)?h.checked?"true":"false":h.value),h=C,h!==p?(f.setValue(h),!0):!1}function Sn(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function dn(h,f){var p=f.checked;return fe({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??h._wrapperState.initialChecked})}function Er(h,f){var p=f.defaultValue==null?"":f.defaultValue,C=f.checked!=null?f.checked:f.defaultChecked;p=St(f.value!=null?f.value:p),h._wrapperState={initialChecked:C,initialValue:p,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function Pn(h,f){f=f.checked,f!=null&&k(h,"checked",f,!1)}function Es(h,f){Pn(h,f);var p=St(f.value),C=f.type;if(p!=null)C==="number"?(p===0&&h.value===""||h.value!=p)&&(h.value=""+p):h.value!==""+p&&(h.value=""+p);else if(C==="submit"||C==="reset"){h.removeAttribute("value");return}f.hasOwnProperty("value")?Ts(h,f.type,p):f.hasOwnProperty("defaultValue")&&Ts(h,f.type,St(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(h.defaultChecked=!!f.defaultChecked)}function cr(h,f,p){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var C=f.type;if(!(C!=="submit"&&C!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+h._wrapperState.initialValue,p||f===h.value||(h.value=f),h.defaultValue=f}p=h.name,p!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,p!==""&&(h.name=p)}function Ts(h,f,p){(f!=="number"||Sn(h.ownerDocument)!==h)&&(p==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+p&&(h.defaultValue=""+p))}var Tr=Array.isArray;function Lo(h,f,p,C){if(h=h.options,f){f={};for(var D=0;D<p.length;D++)f["$"+p[D]]=!0;for(p=0;p<h.length;p++)D=f.hasOwnProperty("$"+h[p].value),h[p].selected!==D&&(h[p].selected=D),D&&C&&(h[p].defaultSelected=!0)}else{for(p=""+St(p),f=null,D=0;D<h.length;D++){if(h[D].value===p){h[D].selected=!0,C&&(h[D].defaultSelected=!0);return}f!==null||h[D].disabled||(f=h[D])}f!==null&&(f.selected=!0)}}function hl(h,f){if(f.dangerouslySetInnerHTML!=null)throw Error(t(91));return fe({},f,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function Ea(h,f){var p=f.value;if(p==null){if(p=f.children,f=f.defaultValue,p!=null){if(f!=null)throw Error(t(92));if(Tr(p)){if(1<p.length)throw Error(t(93));p=p[0]}f=p}f==null&&(f=""),p=f}h._wrapperState={initialValue:St(p)}}function Ns(h,f){var p=St(f.value),C=St(f.defaultValue);p!=null&&(p=""+p,p!==h.value&&(h.value=p),f.defaultValue==null&&h.defaultValue!==p&&(h.defaultValue=p)),C!=null&&(h.defaultValue=""+C)}function vs(h){var f=h.textContent;f===h._wrapperState.initialValue&&f!==""&&f!==null&&(h.value=f)}function Xr(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qr(h,f){return h==null||h==="http://www.w3.org/1999/xhtml"?Xr(f):h==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var Is,ns=function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,p,C,D){MSApp.execUnsafeLocalFunction(function(){return h(f,p,C,D)})}:h}(function(h,f){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=f;else{for(Is=Is||document.createElement("div"),Is.innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=Is.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;f.firstChild;)h.appendChild(f.firstChild)}});function Ms(h,f){if(f){var p=h.firstChild;if(p&&p===h.lastChild&&p.nodeType===3){p.nodeValue=f;return}}h.textContent=f}var fn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jr=["Webkit","ms","Moz","O"];Object.keys(fn).forEach(function(h){Jr.forEach(function(f){f=f+h.charAt(0).toUpperCase()+h.substring(1),fn[f]=fn[h]})});function qn(h,f,p){return f==null||typeof f=="boolean"||f===""?"":p||typeof f!="number"||f===0||fn.hasOwnProperty(h)&&fn[h]?(""+f).trim():f+"px"}function Ji(h,f){h=h.style;for(var p in f)if(f.hasOwnProperty(p)){var C=p.indexOf("--")===0,D=qn(p,f[p],C);p==="float"&&(p="cssFloat"),C?h.setProperty(p,D):h[p]=D}}var Ks=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Do(h,f){if(f){if(Ks[h]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(t(137,h));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(t(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(t(61))}if(f.style!=null&&typeof f.style!="object")throw Error(t(62))}}function Gs(h,f){if(h.indexOf("-")===-1)return typeof f.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ui=null;function ur(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var dl=null,eo=null,Vi=null;function Eo(h){if(h=Qp(h)){if(typeof dl!="function")throw Error(t(280));var f=h.stateNode;f&&(f=Wv(f),dl(h.stateNode,h.type,f))}}function nc(h){eo?Vi?Vi.push(h):Vi=[h]:eo=h}function sc(){if(eo){var h=eo,f=Vi;if(Vi=eo=null,Eo(h),f)for(h=0;h<f.length;h++)Eo(f[h])}}function Ta(h,f){return h(f)}function xt(){}var H=!1;function U(h,f,p){if(H)return h(f,p);H=!0;try{return Ta(h,f,p)}finally{H=!1,(eo!==null||Vi!==null)&&(xt(),sc())}}function K(h,f){var p=h.stateNode;if(p===null)return null;var C=Wv(p);if(C===null)return null;p=C[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(h=h.type,C=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!C;break e;default:h=!1}if(h)return null;if(p&&typeof p!="function")throw Error(t(231,f,typeof p));return p}var P=!1;if(a)try{var z={};Object.defineProperty(z,"passive",{get:function(){P=!0}}),window.addEventListener("test",z,z),window.removeEventListener("test",z,z)}catch{P=!1}function q(h,f,p,C,D,M,W,ee,le){var ke=Array.prototype.slice.call(arguments,3);try{f.apply(p,ke)}catch(Fe){this.onError(Fe)}}var se=!1,_e=null,De=!1,Re=null,Ae={onError:function(h){se=!0,_e=h}};function We(h,f,p,C,D,M,W,ee,le){se=!1,_e=null,q.apply(Ae,arguments)}function Ze(h,f,p,C,D,M,W,ee,le){if(We.apply(this,arguments),se){if(se){var ke=_e;se=!1,_e=null}else throw Error(t(198));De||(De=!0,Re=ke)}}function qe(h){var f=h,p=h;if(h.alternate)for(;f.return;)f=f.return;else{h=f;do f=h,(f.flags&4098)!==0&&(p=f.return),h=f.return;while(h)}return f.tag===3?p:null}function wt(h){if(h.tag===13){var f=h.memoizedState;if(f===null&&(h=h.alternate,h!==null&&(f=h.memoizedState)),f!==null)return f.dehydrated}return null}function Ft(h){if(qe(h)!==h)throw Error(t(188))}function gn(h){var f=h.alternate;if(!f){if(f=qe(h),f===null)throw Error(t(188));return f!==h?null:h}for(var p=h,C=f;;){var D=p.return;if(D===null)break;var M=D.alternate;if(M===null){if(C=D.return,C!==null){p=C;continue}break}if(D.child===M.child){for(M=D.child;M;){if(M===p)return Ft(D),h;if(M===C)return Ft(D),f;M=M.sibling}throw Error(t(188))}if(p.return!==C.return)p=D,C=M;else{for(var W=!1,ee=D.child;ee;){if(ee===p){W=!0,p=D,C=M;break}if(ee===C){W=!0,C=D,p=M;break}ee=ee.sibling}if(!W){for(ee=M.child;ee;){if(ee===p){W=!0,p=M,C=D;break}if(ee===C){W=!0,C=M,p=D;break}ee=ee.sibling}if(!W)throw Error(t(189))}}if(p.alternate!==C)throw Error(t(190))}if(p.tag!==3)throw Error(t(188));return p.stateNode.current===p?h:f}function Ye(h){return h=gn(h),h!==null?oe(h):null}function oe(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var f=oe(h);if(f!==null)return f;h=h.sibling}return null}var Me=e.unstable_scheduleCallback,rt=e.unstable_cancelCallback,Di=e.unstable_shouldYield,Ki=e.unstable_requestPaint,Wt=e.unstable_now,ss=e.unstable_getCurrentPriorityLevel,rs=e.unstable_ImmediatePriority,hr=e.unstable_UserBlockingPriority,mn=e.unstable_NormalPriority,rc=e.unstable_LowPriority,di=e.unstable_IdlePriority,en=null,Zs=null;function Xh(h){if(Zs&&typeof Zs.onCommitFiberRoot=="function")try{Zs.onCommitFiberRoot(en,h,void 0,(h.current.flags&128)===128)}catch{}}var Pi=Math.clz32?Math.clz32:d4,Su=Math.log,wv=Math.LN2;function d4(h){return h>>>=0,h===0?32:31-(Su(h)/wv|0)|0}var Cv=64,yv=4194304;function Ap(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Sv(h,f){var p=h.pendingLanes;if(p===0)return 0;var C=0,D=h.suspendedLanes,M=h.pingedLanes,W=p&268435455;if(W!==0){var ee=W&~D;ee!==0?C=Ap(ee):(M&=W,M!==0&&(C=Ap(M)))}else W=p&~D,W!==0?C=Ap(W):M!==0&&(C=Ap(M));if(C===0)return 0;if(f!==0&&f!==C&&(f&D)===0&&(D=C&-C,M=f&-f,D>=M||D===16&&(M&4194240)!==0))return f;if((C&4)!==0&&(C|=p&16),f=h.entangledLanes,f!==0)for(h=h.entanglements,f&=C;0<f;)p=31-Pi(f),D=1<<p,C|=h[p],f&=~D;return C}function JU(h,f){switch(h){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function e$(h,f){for(var p=h.suspendedLanes,C=h.pingedLanes,D=h.expirationTimes,M=h.pendingLanes;0<M;){var W=31-Pi(M),ee=1<<W,le=D[W];le===-1?((ee&p)===0||(ee&C)!==0)&&(D[W]=JU(ee,f)):le<=f&&(h.expiredLanes|=ee),M&=~ee}}function f4(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function J9(){var h=Cv;return Cv<<=1,(Cv&4194240)===0&&(Cv=64),h}function g4(h){for(var f=[],p=0;31>p;p++)f.push(h);return f}function Pp(h,f,p){h.pendingLanes|=f,f!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,f=31-Pi(f),h[f]=p}function t$(h,f){var p=h.pendingLanes&~f;h.pendingLanes=f,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=f,h.mutableReadLanes&=f,h.entangledLanes&=f,f=h.entanglements;var C=h.eventTimes;for(h=h.expirationTimes;0<p;){var D=31-Pi(p),M=1<<D;f[D]=0,C[D]=-1,h[D]=-1,p&=~M}}function m4(h,f){var p=h.entangledLanes|=f;for(h=h.entanglements;p;){var C=31-Pi(p),D=1<<C;D&f|h[C]&f&&(h[C]|=f),p&=~D}}var ji=0;function eT(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var tT,p4,iT,nT,sT,_4=!1,xv=[],xu=null,ku=null,Lu=null,Op=new Map,Fp=new Map,Du=[],i$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rT(h,f){switch(h){case"focusin":case"focusout":xu=null;break;case"dragenter":case"dragleave":ku=null;break;case"mouseover":case"mouseout":Lu=null;break;case"pointerover":case"pointerout":Op.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fp.delete(f.pointerId)}}function Bp(h,f,p,C,D,M){return h===null||h.nativeEvent!==M?(h={blockedOn:f,domEventName:p,eventSystemFlags:C,nativeEvent:M,targetContainers:[D]},f!==null&&(f=Qp(f),f!==null&&p4(f)),h):(h.eventSystemFlags|=C,f=h.targetContainers,D!==null&&f.indexOf(D)===-1&&f.push(D),h)}function n$(h,f,p,C,D){switch(f){case"focusin":return xu=Bp(xu,h,f,p,C,D),!0;case"dragenter":return ku=Bp(ku,h,f,p,C,D),!0;case"mouseover":return Lu=Bp(Lu,h,f,p,C,D),!0;case"pointerover":var M=D.pointerId;return Op.set(M,Bp(Op.get(M)||null,h,f,p,C,D)),!0;case"gotpointercapture":return M=D.pointerId,Fp.set(M,Bp(Fp.get(M)||null,h,f,p,C,D)),!0}return!1}function oT(h){var f=Qh(h.target);if(f!==null){var p=qe(f);if(p!==null){if(f=p.tag,f===13){if(f=wt(p),f!==null){h.blockedOn=f,sT(h.priority,function(){iT(p)});return}}else if(f===3&&p.stateNode.current.memoizedState.isDehydrated){h.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}h.blockedOn=null}function kv(h){if(h.blockedOn!==null)return!1;for(var f=h.targetContainers;0<f.length;){var p=b4(h.domEventName,h.eventSystemFlags,f[0],h.nativeEvent);if(p===null){p=h.nativeEvent;var C=new p.constructor(p.type,p);ui=C,p.target.dispatchEvent(C),ui=null}else return f=Qp(p),f!==null&&p4(f),h.blockedOn=p,!1;f.shift()}return!0}function aT(h,f,p){kv(h)&&p.delete(f)}function s$(){_4=!1,xu!==null&&kv(xu)&&(xu=null),ku!==null&&kv(ku)&&(ku=null),Lu!==null&&kv(Lu)&&(Lu=null),Op.forEach(aT),Fp.forEach(aT)}function Wp(h,f){h.blockedOn===f&&(h.blockedOn=null,_4||(_4=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,s$)))}function Vp(h){function f(D){return Wp(D,h)}if(0<xv.length){Wp(xv[0],h);for(var p=1;p<xv.length;p++){var C=xv[p];C.blockedOn===h&&(C.blockedOn=null)}}for(xu!==null&&Wp(xu,h),ku!==null&&Wp(ku,h),Lu!==null&&Wp(Lu,h),Op.forEach(f),Fp.forEach(f),p=0;p<Du.length;p++)C=Du[p],C.blockedOn===h&&(C.blockedOn=null);for(;0<Du.length&&(p=Du[0],p.blockedOn===null);)oT(p),p.blockedOn===null&&Du.shift()}var ig=L.ReactCurrentBatchConfig,Lv=!0;function r$(h,f,p,C){var D=ji,M=ig.transition;ig.transition=null;try{ji=1,v4(h,f,p,C)}finally{ji=D,ig.transition=M}}function o$(h,f,p,C){var D=ji,M=ig.transition;ig.transition=null;try{ji=4,v4(h,f,p,C)}finally{ji=D,ig.transition=M}}function v4(h,f,p,C){if(Lv){var D=b4(h,f,p,C);if(D===null)O4(h,f,C,Dv,p),rT(h,C);else if(n$(D,h,f,p,C))C.stopPropagation();else if(rT(h,C),f&4&&-1<i$.indexOf(h)){for(;D!==null;){var M=Qp(D);if(M!==null&&tT(M),M=b4(h,f,p,C),M===null&&O4(h,f,C,Dv,p),M===D)break;D=M}D!==null&&C.stopPropagation()}else O4(h,f,C,null,p)}}var Dv=null;function b4(h,f,p,C){if(Dv=null,h=ur(C),h=Qh(h),h!==null)if(f=qe(h),f===null)h=null;else if(p=f.tag,p===13){if(h=wt(f),h!==null)return h;h=null}else if(p===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;h=null}else f!==h&&(h=null);return Dv=h,null}function lT(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ss()){case rs:return 1;case hr:return 4;case mn:case rc:return 16;case di:return 536870912;default:return 16}default:return 16}}var Eu=null,w4=null,Ev=null;function cT(){if(Ev)return Ev;var h,f=w4,p=f.length,C,D="value"in Eu?Eu.value:Eu.textContent,M=D.length;for(h=0;h<p&&f[h]===D[h];h++);var W=p-h;for(C=1;C<=W&&f[p-C]===D[M-C];C++);return Ev=D.slice(h,1<C?1-C:void 0)}function Tv(h){var f=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&f===13&&(h=13)):h=f,h===10&&(h=13),32<=h||h===13?h:0}function Nv(){return!0}function uT(){return!1}function To(h){function f(p,C,D,M,W){this._reactName=p,this._targetInst=D,this.type=C,this.nativeEvent=M,this.target=W,this.currentTarget=null;for(var ee in h)h.hasOwnProperty(ee)&&(p=h[ee],this[ee]=p?p(M):M[ee]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?Nv:uT,this.isPropagationStopped=uT,this}return fe(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Nv)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Nv)},persist:function(){},isPersistent:Nv}),f}var ng={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},C4=To(ng),zp=fe({},ng,{view:0,detail:0}),a$=To(zp),y4,S4,Hp,Iv=fe({},zp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:k4,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Hp&&(Hp&&h.type==="mousemove"?(y4=h.screenX-Hp.screenX,S4=h.screenY-Hp.screenY):S4=y4=0,Hp=h),y4)},movementY:function(h){return"movementY"in h?h.movementY:S4}}),hT=To(Iv),l$=fe({},Iv,{dataTransfer:0}),c$=To(l$),u$=fe({},zp,{relatedTarget:0}),x4=To(u$),h$=fe({},ng,{animationName:0,elapsedTime:0,pseudoElement:0}),d$=To(h$),f$=fe({},ng,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),g$=To(f$),m$=fe({},ng,{data:0}),dT=To(m$),p$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},v$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b$(h){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(h):(h=v$[h])?!!f[h]:!1}function k4(){return b$}var w$=fe({},zp,{key:function(h){if(h.key){var f=p$[h.key]||h.key;if(f!=="Unidentified")return f}return h.type==="keypress"?(h=Tv(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?_$[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:k4,charCode:function(h){return h.type==="keypress"?Tv(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Tv(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),C$=To(w$),y$=fe({},Iv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fT=To(y$),S$=fe({},zp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:k4}),x$=To(S$),k$=fe({},ng,{propertyName:0,elapsedTime:0,pseudoElement:0}),L$=To(k$),D$=fe({},Iv,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),E$=To(D$),T$=[9,13,27,32],L4=a&&"CompositionEvent"in window,jp=null;a&&"documentMode"in document&&(jp=document.documentMode);var N$=a&&"TextEvent"in window&&!jp,gT=a&&(!L4||jp&&8<jp&&11>=jp),mT=" ",pT=!1;function _T(h,f){switch(h){case"keyup":return T$.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vT(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var sg=!1;function I$(h,f){switch(h){case"compositionend":return vT(f);case"keypress":return f.which!==32?null:(pT=!0,mT);case"textInput":return h=f.data,h===mT&&pT?null:h;default:return null}}function M$(h,f){if(sg)return h==="compositionend"||!L4&&_T(h,f)?(h=cT(),Ev=w4=Eu=null,sg=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return gT&&f.locale!=="ko"?null:f.data;default:return null}}var R$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bT(h){var f=h&&h.nodeName&&h.nodeName.toLowerCase();return f==="input"?!!R$[h.type]:f==="textarea"}function wT(h,f,p,C){nc(C),f=Ov(f,"onChange"),0<f.length&&(p=new C4("onChange","change",null,p,C),h.push({event:p,listeners:f}))}var Up=null,$p=null;function A$(h){BT(h,0)}function Mv(h){var f=cg(h);if(Wi(f))return h}function P$(h,f){if(h==="change")return f}var CT=!1;if(a){var D4;if(a){var E4="oninput"in document;if(!E4){var yT=document.createElement("div");yT.setAttribute("oninput","return;"),E4=typeof yT.oninput=="function"}D4=E4}else D4=!1;CT=D4&&(!document.documentMode||9<document.documentMode)}function ST(){Up&&(Up.detachEvent("onpropertychange",xT),$p=Up=null)}function xT(h){if(h.propertyName==="value"&&Mv($p)){var f=[];wT(f,$p,h,ur(h)),U(A$,f)}}function O$(h,f,p){h==="focusin"?(ST(),Up=f,$p=p,Up.attachEvent("onpropertychange",xT)):h==="focusout"&&ST()}function F$(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Mv($p)}function B$(h,f){if(h==="click")return Mv(f)}function W$(h,f){if(h==="input"||h==="change")return Mv(f)}function V$(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var Na=typeof Object.is=="function"?Object.is:V$;function qp(h,f){if(Na(h,f))return!0;if(typeof h!="object"||h===null||typeof f!="object"||f===null)return!1;var p=Object.keys(h),C=Object.keys(f);if(p.length!==C.length)return!1;for(C=0;C<p.length;C++){var D=p[C];if(!l.call(f,D)||!Na(h[D],f[D]))return!1}return!0}function kT(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function LT(h,f){var p=kT(h);h=0;for(var C;p;){if(p.nodeType===3){if(C=h+p.textContent.length,h<=f&&C>=f)return{node:p,offset:f-h};h=C}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=kT(p)}}function DT(h,f){return h&&f?h===f?!0:h&&h.nodeType===3?!1:f&&f.nodeType===3?DT(h,f.parentNode):"contains"in h?h.contains(f):h.compareDocumentPosition?!!(h.compareDocumentPosition(f)&16):!1:!1}function ET(){for(var h=window,f=Sn();f instanceof h.HTMLIFrameElement;){try{var p=typeof f.contentWindow.location.href=="string"}catch{p=!1}if(p)h=f.contentWindow;else break;f=Sn(h.document)}return f}function T4(h){var f=h&&h.nodeName&&h.nodeName.toLowerCase();return f&&(f==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||f==="textarea"||h.contentEditable==="true")}function z$(h){var f=ET(),p=h.focusedElem,C=h.selectionRange;if(f!==p&&p&&p.ownerDocument&&DT(p.ownerDocument.documentElement,p)){if(C!==null&&T4(p)){if(f=C.start,h=C.end,h===void 0&&(h=f),"selectionStart"in p)p.selectionStart=f,p.selectionEnd=Math.min(h,p.value.length);else if(h=(f=p.ownerDocument||document)&&f.defaultView||window,h.getSelection){h=h.getSelection();var D=p.textContent.length,M=Math.min(C.start,D);C=C.end===void 0?M:Math.min(C.end,D),!h.extend&&M>C&&(D=C,C=M,M=D),D=LT(p,M);var W=LT(p,C);D&&W&&(h.rangeCount!==1||h.anchorNode!==D.node||h.anchorOffset!==D.offset||h.focusNode!==W.node||h.focusOffset!==W.offset)&&(f=f.createRange(),f.setStart(D.node,D.offset),h.removeAllRanges(),M>C?(h.addRange(f),h.extend(W.node,W.offset)):(f.setEnd(W.node,W.offset),h.addRange(f)))}}for(f=[],h=p;h=h.parentNode;)h.nodeType===1&&f.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<f.length;p++)h=f[p],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var H$=a&&"documentMode"in document&&11>=document.documentMode,rg=null,N4=null,Kp=null,I4=!1;function TT(h,f,p){var C=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;I4||rg==null||rg!==Sn(C)||(C=rg,"selectionStart"in C&&T4(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),Kp&&qp(Kp,C)||(Kp=C,C=Ov(N4,"onSelect"),0<C.length&&(f=new C4("onSelect","select",null,f,p),h.push({event:f,listeners:C}),f.target=rg)))}function Rv(h,f){var p={};return p[h.toLowerCase()]=f.toLowerCase(),p["Webkit"+h]="webkit"+f,p["Moz"+h]="moz"+f,p}var og={animationend:Rv("Animation","AnimationEnd"),animationiteration:Rv("Animation","AnimationIteration"),animationstart:Rv("Animation","AnimationStart"),transitionend:Rv("Transition","TransitionEnd")},M4={},NT={};a&&(NT=document.createElement("div").style,"AnimationEvent"in window||(delete og.animationend.animation,delete og.animationiteration.animation,delete og.animationstart.animation),"TransitionEvent"in window||delete og.transitionend.transition);function Av(h){if(M4[h])return M4[h];if(!og[h])return h;var f=og[h],p;for(p in f)if(f.hasOwnProperty(p)&&p in NT)return M4[h]=f[p];return h}var IT=Av("animationend"),MT=Av("animationiteration"),RT=Av("animationstart"),AT=Av("transitionend"),PT=new Map,OT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tu(h,f){PT.set(h,f),r(f,[h])}for(var R4=0;R4<OT.length;R4++){var A4=OT[R4],j$=A4.toLowerCase(),U$=A4[0].toUpperCase()+A4.slice(1);Tu(j$,"on"+U$)}Tu(IT,"onAnimationEnd"),Tu(MT,"onAnimationIteration"),Tu(RT,"onAnimationStart"),Tu("dblclick","onDoubleClick"),Tu("focusin","onFocus"),Tu("focusout","onBlur"),Tu(AT,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),r("onBeforeInput",["compositionend","keypress","textInput","paste"]),r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$$=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gp));function FT(h,f,p){var C=h.type||"unknown-event";h.currentTarget=p,Ze(C,f,void 0,h),h.currentTarget=null}function BT(h,f){f=(f&4)!==0;for(var p=0;p<h.length;p++){var C=h[p],D=C.event;C=C.listeners;e:{var M=void 0;if(f)for(var W=C.length-1;0<=W;W--){var ee=C[W],le=ee.instance,ke=ee.currentTarget;if(ee=ee.listener,le!==M&&D.isPropagationStopped())break e;FT(D,ee,ke),M=le}else for(W=0;W<C.length;W++){if(ee=C[W],le=ee.instance,ke=ee.currentTarget,ee=ee.listener,le!==M&&D.isPropagationStopped())break e;FT(D,ee,ke),M=le}}}if(De)throw h=Re,De=!1,Re=null,h}function pn(h,f){var p=f[H4];p===void 0&&(p=f[H4]=new Set);var C=h+"__bubble";p.has(C)||(WT(f,h,2,!1),p.add(C))}function P4(h,f,p){var C=0;f&&(C|=4),WT(p,h,C,f)}var Pv="_reactListening"+Math.random().toString(36).slice(2);function Zp(h){if(!h[Pv]){h[Pv]=!0,i.forEach(function(p){p!=="selectionchange"&&($$.has(p)||P4(p,!1,h),P4(p,!0,h))});var f=h.nodeType===9?h:h.ownerDocument;f===null||f[Pv]||(f[Pv]=!0,P4("selectionchange",!1,f))}}function WT(h,f,p,C){switch(lT(f)){case 1:var D=r$;break;case 4:D=o$;break;default:D=v4}p=D.bind(null,f,p,h),D=void 0,!P||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(D=!0),C?D!==void 0?h.addEventListener(f,p,{capture:!0,passive:D}):h.addEventListener(f,p,!0):D!==void 0?h.addEventListener(f,p,{passive:D}):h.addEventListener(f,p,!1)}function O4(h,f,p,C,D){var M=C;if((f&1)===0&&(f&2)===0&&C!==null)e:for(;;){if(C===null)return;var W=C.tag;if(W===3||W===4){var ee=C.stateNode.containerInfo;if(ee===D||ee.nodeType===8&&ee.parentNode===D)break;if(W===4)for(W=C.return;W!==null;){var le=W.tag;if((le===3||le===4)&&(le=W.stateNode.containerInfo,le===D||le.nodeType===8&&le.parentNode===D))return;W=W.return}for(;ee!==null;){if(W=Qh(ee),W===null)return;if(le=W.tag,le===5||le===6){C=M=W;continue e}ee=ee.parentNode}}C=C.return}U(function(){var ke=M,Fe=ur(p),je=[];e:{var Pe=PT.get(h);if(Pe!==void 0){var lt=C4,ft=h;switch(h){case"keypress":if(Tv(p)===0)break e;case"keydown":case"keyup":lt=C$;break;case"focusin":ft="focus",lt=x4;break;case"focusout":ft="blur",lt=x4;break;case"beforeblur":case"afterblur":lt=x4;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=hT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=c$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=x$;break;case IT:case MT:case RT:lt=d$;break;case AT:lt=L$;break;case"scroll":lt=a$;break;case"wheel":lt=E$;break;case"copy":case"cut":case"paste":lt=g$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=fT}var mt=(f&4)!==0,Kn=!mt&&h==="scroll",pe=mt?Pe!==null?Pe+"Capture":null:Pe;mt=[];for(var de=ke,Ce;de!==null;){Ce=de;var Xe=Ce.stateNode;if(Ce.tag===5&&Xe!==null&&(Ce=Xe,pe!==null&&(Xe=K(de,pe),Xe!=null&&mt.push(Yp(de,Xe,Ce)))),Kn)break;de=de.return}0<mt.length&&(Pe=new lt(Pe,ft,null,p,Fe),je.push({event:Pe,listeners:mt}))}}if((f&7)===0){e:{if(Pe=h==="mouseover"||h==="pointerover",lt=h==="mouseout"||h==="pointerout",Pe&&p!==ui&&(ft=p.relatedTarget||p.fromElement)&&(Qh(ft)||ft[oc]))break e;if((lt||Pe)&&(Pe=Fe.window===Fe?Fe:(Pe=Fe.ownerDocument)?Pe.defaultView||Pe.parentWindow:window,lt?(ft=p.relatedTarget||p.toElement,lt=ke,ft=ft?Qh(ft):null,ft!==null&&(Kn=qe(ft),ft!==Kn||ft.tag!==5&&ft.tag!==6)&&(ft=null)):(lt=null,ft=ke),lt!==ft)){if(mt=hT,Xe="onMouseLeave",pe="onMouseEnter",de="mouse",(h==="pointerout"||h==="pointerover")&&(mt=fT,Xe="onPointerLeave",pe="onPointerEnter",de="pointer"),Kn=lt==null?Pe:cg(lt),Ce=ft==null?Pe:cg(ft),Pe=new mt(Xe,de+"leave",lt,p,Fe),Pe.target=Kn,Pe.relatedTarget=Ce,Xe=null,Qh(Fe)===ke&&(mt=new mt(pe,de+"enter",ft,p,Fe),mt.target=Ce,mt.relatedTarget=Kn,Xe=mt),Kn=Xe,lt&&ft)t:{for(mt=lt,pe=ft,de=0,Ce=mt;Ce;Ce=ag(Ce))de++;for(Ce=0,Xe=pe;Xe;Xe=ag(Xe))Ce++;for(;0<de-Ce;)mt=ag(mt),de--;for(;0<Ce-de;)pe=ag(pe),Ce--;for(;de--;){if(mt===pe||pe!==null&&mt===pe.alternate)break t;mt=ag(mt),pe=ag(pe)}mt=null}else mt=null;lt!==null&&VT(je,Pe,lt,mt,!1),ft!==null&&Kn!==null&&VT(je,Kn,ft,mt,!0)}}e:{if(Pe=ke?cg(ke):window,lt=Pe.nodeName&&Pe.nodeName.toLowerCase(),lt==="select"||lt==="input"&&Pe.type==="file")var Ct=P$;else if(bT(Pe))if(CT)Ct=W$;else{Ct=F$;var It=O$}else(lt=Pe.nodeName)&&lt.toLowerCase()==="input"&&(Pe.type==="checkbox"||Pe.type==="radio")&&(Ct=B$);if(Ct&&(Ct=Ct(h,ke))){wT(je,Ct,p,Fe);break e}It&&It(h,Pe,ke),h==="focusout"&&(It=Pe._wrapperState)&&It.controlled&&Pe.type==="number"&&Ts(Pe,"number",Pe.value)}switch(It=ke?cg(ke):window,h){case"focusin":(bT(It)||It.contentEditable==="true")&&(rg=It,N4=ke,Kp=null);break;case"focusout":Kp=N4=rg=null;break;case"mousedown":I4=!0;break;case"contextmenu":case"mouseup":case"dragend":I4=!1,TT(je,p,Fe);break;case"selectionchange":if(H$)break;case"keydown":case"keyup":TT(je,p,Fe)}var Mt;if(L4)e:{switch(h){case"compositionstart":var $t="onCompositionStart";break e;case"compositionend":$t="onCompositionEnd";break e;case"compositionupdate":$t="onCompositionUpdate";break e}$t=void 0}else sg?_T(h,p)&&($t="onCompositionEnd"):h==="keydown"&&p.keyCode===229&&($t="onCompositionStart");$t&&(gT&&p.locale!=="ko"&&(sg||$t!=="onCompositionStart"?$t==="onCompositionEnd"&&sg&&(Mt=cT()):(Eu=Fe,w4="value"in Eu?Eu.value:Eu.textContent,sg=!0)),It=Ov(ke,$t),0<It.length&&($t=new dT($t,h,null,p,Fe),je.push({event:$t,listeners:It}),Mt?$t.data=Mt:(Mt=vT(p),Mt!==null&&($t.data=Mt)))),(Mt=N$?I$(h,p):M$(h,p))&&(ke=Ov(ke,"onBeforeInput"),0<ke.length&&(Fe=new dT("onBeforeInput","beforeinput",null,p,Fe),je.push({event:Fe,listeners:ke}),Fe.data=Mt))}BT(je,f)})}function Yp(h,f,p){return{instance:h,listener:f,currentTarget:p}}function Ov(h,f){for(var p=f+"Capture",C=[];h!==null;){var D=h,M=D.stateNode;D.tag===5&&M!==null&&(D=M,M=K(h,p),M!=null&&C.unshift(Yp(h,M,D)),M=K(h,f),M!=null&&C.push(Yp(h,M,D))),h=h.return}return C}function ag(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function VT(h,f,p,C,D){for(var M=f._reactName,W=[];p!==null&&p!==C;){var ee=p,le=ee.alternate,ke=ee.stateNode;if(le!==null&&le===C)break;ee.tag===5&&ke!==null&&(ee=ke,D?(le=K(p,M),le!=null&&W.unshift(Yp(p,le,ee))):D||(le=K(p,M),le!=null&&W.push(Yp(p,le,ee)))),p=p.return}W.length!==0&&h.push({event:f,listeners:W})}var q$=/\r\n?/g,K$=/\u0000|\uFFFD/g;function zT(h){return(typeof h=="string"?h:""+h).replace(q$,`
`).replace(K$,"")}function Fv(h,f,p){if(f=zT(f),zT(h)!==f&&p)throw Error(t(425))}function Bv(){}var F4=null,B4=null;function W4(h,f){return h==="textarea"||h==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var V4=typeof setTimeout=="function"?setTimeout:void 0,G$=typeof clearTimeout=="function"?clearTimeout:void 0,HT=typeof Promise=="function"?Promise:void 0,Z$=typeof queueMicrotask=="function"?queueMicrotask:typeof HT<"u"?function(h){return HT.resolve(null).then(h).catch(Y$)}:V4;function Y$(h){setTimeout(function(){throw h})}function z4(h,f){var p=f,C=0;do{var D=p.nextSibling;if(h.removeChild(p),D&&D.nodeType===8)if(p=D.data,p==="/$"){if(C===0){h.removeChild(D),Vp(f);return}C--}else p!=="$"&&p!=="$?"&&p!=="$!"||C++;p=D}while(p);Vp(f)}function Nu(h){for(;h!=null;h=h.nextSibling){var f=h.nodeType;if(f===1||f===3)break;if(f===8){if(f=h.data,f==="$"||f==="$!"||f==="$?")break;if(f==="/$")return null}}return h}function jT(h){h=h.previousSibling;for(var f=0;h;){if(h.nodeType===8){var p=h.data;if(p==="$"||p==="$!"||p==="$?"){if(f===0)return h;f--}else p==="/$"&&f++}h=h.previousSibling}return null}var lg=Math.random().toString(36).slice(2),fl="__reactFiber$"+lg,Xp="__reactProps$"+lg,oc="__reactContainer$"+lg,H4="__reactEvents$"+lg,X$="__reactListeners$"+lg,Q$="__reactHandles$"+lg;function Qh(h){var f=h[fl];if(f)return f;for(var p=h.parentNode;p;){if(f=p[oc]||p[fl]){if(p=f.alternate,f.child!==null||p!==null&&p.child!==null)for(h=jT(h);h!==null;){if(p=h[fl])return p;h=jT(h)}return f}h=p,p=h.parentNode}return null}function Qp(h){return h=h[fl]||h[oc],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function cg(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(t(33))}function Wv(h){return h[Xp]||null}var j4=[],ug=-1;function Iu(h){return{current:h}}function _n(h){0>ug||(h.current=j4[ug],j4[ug]=null,ug--)}function cn(h,f){ug++,j4[ug]=h.current,h.current=f}var Mu={},dr=Iu(Mu),to=Iu(!1),Jh=Mu;function hg(h,f){var p=h.type.contextTypes;if(!p)return Mu;var C=h.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===f)return C.__reactInternalMemoizedMaskedChildContext;var D={},M;for(M in p)D[M]=f[M];return C&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=f,h.__reactInternalMemoizedMaskedChildContext=D),D}function io(h){return h=h.childContextTypes,h!=null}function Vv(){_n(to),_n(dr)}function UT(h,f,p){if(dr.current!==Mu)throw Error(t(168));cn(dr,f),cn(to,p)}function $T(h,f,p){var C=h.stateNode;if(f=f.childContextTypes,typeof C.getChildContext!="function")return p;C=C.getChildContext();for(var D in C)if(!(D in f))throw Error(t(108,gt(h)||"Unknown",D));return fe({},p,C)}function zv(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Mu,Jh=dr.current,cn(dr,h),cn(to,to.current),!0}function qT(h,f,p){var C=h.stateNode;if(!C)throw Error(t(169));p?(h=$T(h,f,Jh),C.__reactInternalMemoizedMergedChildContext=h,_n(to),_n(dr),cn(dr,h)):_n(to),cn(to,p)}var ac=null,Hv=!1,U4=!1;function KT(h){ac===null?ac=[h]:ac.push(h)}function J$(h){Hv=!0,KT(h)}function Ru(){if(!U4&&ac!==null){U4=!0;var h=0,f=ji;try{var p=ac;for(ji=1;h<p.length;h++){var C=p[h];do C=C(!0);while(C!==null)}ac=null,Hv=!1}catch(D){throw ac!==null&&(ac=ac.slice(h+1)),Me(rs,Ru),D}finally{ji=f,U4=!1}}return null}var dg=[],fg=0,jv=null,Uv=0,Jo=[],ea=0,ed=null,lc=1,cc="";function td(h,f){dg[fg++]=Uv,dg[fg++]=jv,jv=h,Uv=f}function GT(h,f,p){Jo[ea++]=lc,Jo[ea++]=cc,Jo[ea++]=ed,ed=h;var C=lc;h=cc;var D=32-Pi(C)-1;C&=~(1<<D),p+=1;var M=32-Pi(f)+D;if(30<M){var W=D-D%5;M=(C&(1<<W)-1).toString(32),C>>=W,D-=W,lc=1<<32-Pi(f)+D|p<<D|C,cc=M+h}else lc=1<<M|p<<D|C,cc=h}function $4(h){h.return!==null&&(td(h,1),GT(h,1,0))}function q4(h){for(;h===jv;)jv=dg[--fg],dg[fg]=null,Uv=dg[--fg],dg[fg]=null;for(;h===ed;)ed=Jo[--ea],Jo[ea]=null,cc=Jo[--ea],Jo[ea]=null,lc=Jo[--ea],Jo[ea]=null}var No=null,Io=null,bn=!1,Ia=null;function ZT(h,f){var p=sa(5,null,null,0);p.elementType="DELETED",p.stateNode=f,p.return=h,f=h.deletions,f===null?(h.deletions=[p],h.flags|=16):f.push(p)}function YT(h,f){switch(h.tag){case 5:var p=h.type;return f=f.nodeType!==1||p.toLowerCase()!==f.nodeName.toLowerCase()?null:f,f!==null?(h.stateNode=f,No=h,Io=Nu(f.firstChild),!0):!1;case 6:return f=h.pendingProps===""||f.nodeType!==3?null:f,f!==null?(h.stateNode=f,No=h,Io=null,!0):!1;case 13:return f=f.nodeType!==8?null:f,f!==null?(p=ed!==null?{id:lc,overflow:cc}:null,h.memoizedState={dehydrated:f,treeContext:p,retryLane:1073741824},p=sa(18,null,null,0),p.stateNode=f,p.return=h,h.child=p,No=h,Io=null,!0):!1;default:return!1}}function K4(h){return(h.mode&1)!==0&&(h.flags&128)===0}function G4(h){if(bn){var f=Io;if(f){var p=f;if(!YT(h,f)){if(K4(h))throw Error(t(418));f=Nu(p.nextSibling);var C=No;f&&YT(h,f)?ZT(C,p):(h.flags=h.flags&-4097|2,bn=!1,No=h)}}else{if(K4(h))throw Error(t(418));h.flags=h.flags&-4097|2,bn=!1,No=h}}}function XT(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;No=h}function $v(h){if(h!==No)return!1;if(!bn)return XT(h),bn=!0,!1;var f;if((f=h.tag!==3)&&!(f=h.tag!==5)&&(f=h.type,f=f!=="head"&&f!=="body"&&!W4(h.type,h.memoizedProps)),f&&(f=Io)){if(K4(h))throw QT(),Error(t(418));for(;f;)ZT(h,f),f=Nu(f.nextSibling)}if(XT(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(t(317));e:{for(h=h.nextSibling,f=0;h;){if(h.nodeType===8){var p=h.data;if(p==="/$"){if(f===0){Io=Nu(h.nextSibling);break e}f--}else p!=="$"&&p!=="$!"&&p!=="$?"||f++}h=h.nextSibling}Io=null}}else Io=No?Nu(h.stateNode.nextSibling):null;return!0}function QT(){for(var h=Io;h;)h=Nu(h.nextSibling)}function gg(){Io=No=null,bn=!1}function Z4(h){Ia===null?Ia=[h]:Ia.push(h)}var eq=L.ReactCurrentBatchConfig;function Jp(h,f,p){if(h=p.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(t(309));var C=p.stateNode}if(!C)throw Error(t(147,h));var D=C,M=""+h;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===M?f.ref:(f=function(W){var ee=D.refs;W===null?delete ee[M]:ee[M]=W},f._stringRef=M,f)}if(typeof h!="string")throw Error(t(284));if(!p._owner)throw Error(t(290,h))}return h}function qv(h,f){throw h=Object.prototype.toString.call(f),Error(t(31,h==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":h))}function JT(h){var f=h._init;return f(h._payload)}function eN(h){function f(pe,de){if(h){var Ce=pe.deletions;Ce===null?(pe.deletions=[de],pe.flags|=16):Ce.push(de)}}function p(pe,de){if(!h)return null;for(;de!==null;)f(pe,de),de=de.sibling;return null}function C(pe,de){for(pe=new Map;de!==null;)de.key!==null?pe.set(de.key,de):pe.set(de.index,de),de=de.sibling;return pe}function D(pe,de){return pe=zu(pe,de),pe.index=0,pe.sibling=null,pe}function M(pe,de,Ce){return pe.index=Ce,h?(Ce=pe.alternate,Ce!==null?(Ce=Ce.index,Ce<de?(pe.flags|=2,de):Ce):(pe.flags|=2,de)):(pe.flags|=1048576,de)}function W(pe){return h&&pe.alternate===null&&(pe.flags|=2),pe}function ee(pe,de,Ce,Xe){return de===null||de.tag!==6?(de=Vx(Ce,pe.mode,Xe),de.return=pe,de):(de=D(de,Ce),de.return=pe,de)}function le(pe,de,Ce,Xe){var Ct=Ce.type;return Ct===I?Fe(pe,de,Ce.props.children,Xe,Ce.key):de!==null&&(de.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===be&&JT(Ct)===de.type)?(Xe=D(de,Ce.props),Xe.ref=Jp(pe,de,Ce),Xe.return=pe,Xe):(Xe=pb(Ce.type,Ce.key,Ce.props,null,pe.mode,Xe),Xe.ref=Jp(pe,de,Ce),Xe.return=pe,Xe)}function ke(pe,de,Ce,Xe){return de===null||de.tag!==4||de.stateNode.containerInfo!==Ce.containerInfo||de.stateNode.implementation!==Ce.implementation?(de=zx(Ce,pe.mode,Xe),de.return=pe,de):(de=D(de,Ce.children||[]),de.return=pe,de)}function Fe(pe,de,Ce,Xe,Ct){return de===null||de.tag!==7?(de=cd(Ce,pe.mode,Xe,Ct),de.return=pe,de):(de=D(de,Ce),de.return=pe,de)}function je(pe,de,Ce){if(typeof de=="string"&&de!==""||typeof de=="number")return de=Vx(""+de,pe.mode,Ce),de.return=pe,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case T:return Ce=pb(de.type,de.key,de.props,null,pe.mode,Ce),Ce.ref=Jp(pe,null,de),Ce.return=pe,Ce;case A:return de=zx(de,pe.mode,Ce),de.return=pe,de;case be:var Xe=de._init;return je(pe,Xe(de._payload),Ce)}if(Tr(de)||xe(de))return de=cd(de,pe.mode,Ce,null),de.return=pe,de;qv(pe,de)}return null}function Pe(pe,de,Ce,Xe){var Ct=de!==null?de.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Ct!==null?null:ee(pe,de,""+Ce,Xe);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case T:return Ce.key===Ct?le(pe,de,Ce,Xe):null;case A:return Ce.key===Ct?ke(pe,de,Ce,Xe):null;case be:return Ct=Ce._init,Pe(pe,de,Ct(Ce._payload),Xe)}if(Tr(Ce)||xe(Ce))return Ct!==null?null:Fe(pe,de,Ce,Xe,null);qv(pe,Ce)}return null}function lt(pe,de,Ce,Xe,Ct){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return pe=pe.get(Ce)||null,ee(de,pe,""+Xe,Ct);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case T:return pe=pe.get(Xe.key===null?Ce:Xe.key)||null,le(de,pe,Xe,Ct);case A:return pe=pe.get(Xe.key===null?Ce:Xe.key)||null,ke(de,pe,Xe,Ct);case be:var It=Xe._init;return lt(pe,de,Ce,It(Xe._payload),Ct)}if(Tr(Xe)||xe(Xe))return pe=pe.get(Ce)||null,Fe(de,pe,Xe,Ct,null);qv(de,Xe)}return null}function ft(pe,de,Ce,Xe){for(var Ct=null,It=null,Mt=de,$t=de=0,Ps=null;Mt!==null&&$t<Ce.length;$t++){Mt.index>$t?(Ps=Mt,Mt=null):Ps=Mt.sibling;var Oi=Pe(pe,Mt,Ce[$t],Xe);if(Oi===null){Mt===null&&(Mt=Ps);break}h&&Mt&&Oi.alternate===null&&f(pe,Mt),de=M(Oi,de,$t),It===null?Ct=Oi:It.sibling=Oi,It=Oi,Mt=Ps}if($t===Ce.length)return p(pe,Mt),bn&&td(pe,$t),Ct;if(Mt===null){for(;$t<Ce.length;$t++)Mt=je(pe,Ce[$t],Xe),Mt!==null&&(de=M(Mt,de,$t),It===null?Ct=Mt:It.sibling=Mt,It=Mt);return bn&&td(pe,$t),Ct}for(Mt=C(pe,Mt);$t<Ce.length;$t++)Ps=lt(Mt,pe,$t,Ce[$t],Xe),Ps!==null&&(h&&Ps.alternate!==null&&Mt.delete(Ps.key===null?$t:Ps.key),de=M(Ps,de,$t),It===null?Ct=Ps:It.sibling=Ps,It=Ps);return h&&Mt.forEach(function(Hu){return f(pe,Hu)}),bn&&td(pe,$t),Ct}function mt(pe,de,Ce,Xe){var Ct=xe(Ce);if(typeof Ct!="function")throw Error(t(150));if(Ce=Ct.call(Ce),Ce==null)throw Error(t(151));for(var It=Ct=null,Mt=de,$t=de=0,Ps=null,Oi=Ce.next();Mt!==null&&!Oi.done;$t++,Oi=Ce.next()){Mt.index>$t?(Ps=Mt,Mt=null):Ps=Mt.sibling;var Hu=Pe(pe,Mt,Oi.value,Xe);if(Hu===null){Mt===null&&(Mt=Ps);break}h&&Mt&&Hu.alternate===null&&f(pe,Mt),de=M(Hu,de,$t),It===null?Ct=Hu:It.sibling=Hu,It=Hu,Mt=Ps}if(Oi.done)return p(pe,Mt),bn&&td(pe,$t),Ct;if(Mt===null){for(;!Oi.done;$t++,Oi=Ce.next())Oi=je(pe,Oi.value,Xe),Oi!==null&&(de=M(Oi,de,$t),It===null?Ct=Oi:It.sibling=Oi,It=Oi);return bn&&td(pe,$t),Ct}for(Mt=C(pe,Mt);!Oi.done;$t++,Oi=Ce.next())Oi=lt(Mt,pe,$t,Oi.value,Xe),Oi!==null&&(h&&Oi.alternate!==null&&Mt.delete(Oi.key===null?$t:Oi.key),de=M(Oi,de,$t),It===null?Ct=Oi:It.sibling=Oi,It=Oi);return h&&Mt.forEach(function(Rq){return f(pe,Rq)}),bn&&td(pe,$t),Ct}function Kn(pe,de,Ce,Xe){if(typeof Ce=="object"&&Ce!==null&&Ce.type===I&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case T:e:{for(var Ct=Ce.key,It=de;It!==null;){if(It.key===Ct){if(Ct=Ce.type,Ct===I){if(It.tag===7){p(pe,It.sibling),de=D(It,Ce.props.children),de.return=pe,pe=de;break e}}else if(It.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===be&&JT(Ct)===It.type){p(pe,It.sibling),de=D(It,Ce.props),de.ref=Jp(pe,It,Ce),de.return=pe,pe=de;break e}p(pe,It);break}else f(pe,It);It=It.sibling}Ce.type===I?(de=cd(Ce.props.children,pe.mode,Xe,Ce.key),de.return=pe,pe=de):(Xe=pb(Ce.type,Ce.key,Ce.props,null,pe.mode,Xe),Xe.ref=Jp(pe,de,Ce),Xe.return=pe,pe=Xe)}return W(pe);case A:e:{for(It=Ce.key;de!==null;){if(de.key===It)if(de.tag===4&&de.stateNode.containerInfo===Ce.containerInfo&&de.stateNode.implementation===Ce.implementation){p(pe,de.sibling),de=D(de,Ce.children||[]),de.return=pe,pe=de;break e}else{p(pe,de);break}else f(pe,de);de=de.sibling}de=zx(Ce,pe.mode,Xe),de.return=pe,pe=de}return W(pe);case be:return It=Ce._init,Kn(pe,de,It(Ce._payload),Xe)}if(Tr(Ce))return ft(pe,de,Ce,Xe);if(xe(Ce))return mt(pe,de,Ce,Xe);qv(pe,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"?(Ce=""+Ce,de!==null&&de.tag===6?(p(pe,de.sibling),de=D(de,Ce),de.return=pe,pe=de):(p(pe,de),de=Vx(Ce,pe.mode,Xe),de.return=pe,pe=de),W(pe)):p(pe,de)}return Kn}var mg=eN(!0),tN=eN(!1),Kv=Iu(null),Gv=null,pg=null,Y4=null;function X4(){Y4=pg=Gv=null}function Q4(h){var f=Kv.current;_n(Kv),h._currentValue=f}function J4(h,f,p){for(;h!==null;){var C=h.alternate;if((h.childLanes&f)!==f?(h.childLanes|=f,C!==null&&(C.childLanes|=f)):C!==null&&(C.childLanes&f)!==f&&(C.childLanes|=f),h===p)break;h=h.return}}function _g(h,f){Gv=h,Y4=pg=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&f)!==0&&(no=!0),h.firstContext=null)}function ta(h){var f=h._currentValue;if(Y4!==h)if(h={context:h,memoizedValue:f,next:null},pg===null){if(Gv===null)throw Error(t(308));pg=h,Gv.dependencies={lanes:0,firstContext:h}}else pg=pg.next=h;return f}var id=null;function ex(h){id===null?id=[h]:id.push(h)}function iN(h,f,p,C){var D=f.interleaved;return D===null?(p.next=p,ex(f)):(p.next=D.next,D.next=p),f.interleaved=p,uc(h,C)}function uc(h,f){h.lanes|=f;var p=h.alternate;for(p!==null&&(p.lanes|=f),p=h,h=h.return;h!==null;)h.childLanes|=f,p=h.alternate,p!==null&&(p.childLanes|=f),p=h,h=h.return;return p.tag===3?p.stateNode:null}var Au=!1;function tx(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nN(h,f){h=h.updateQueue,f.updateQueue===h&&(f.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function hc(h,f){return{eventTime:h,lane:f,tag:0,payload:null,callback:null,next:null}}function Pu(h,f,p){var C=h.updateQueue;if(C===null)return null;if(C=C.shared,(Mi&2)!==0){var D=C.pending;return D===null?f.next=f:(f.next=D.next,D.next=f),C.pending=f,uc(h,p)}return D=C.interleaved,D===null?(f.next=f,ex(C)):(f.next=D.next,D.next=f),C.interleaved=f,uc(h,p)}function Zv(h,f,p){if(f=f.updateQueue,f!==null&&(f=f.shared,(p&4194240)!==0)){var C=f.lanes;C&=h.pendingLanes,p|=C,f.lanes=p,m4(h,p)}}function sN(h,f){var p=h.updateQueue,C=h.alternate;if(C!==null&&(C=C.updateQueue,p===C)){var D=null,M=null;if(p=p.firstBaseUpdate,p!==null){do{var W={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};M===null?D=M=W:M=M.next=W,p=p.next}while(p!==null);M===null?D=M=f:M=M.next=f}else D=M=f;p={baseState:C.baseState,firstBaseUpdate:D,lastBaseUpdate:M,shared:C.shared,effects:C.effects},h.updateQueue=p;return}h=p.lastBaseUpdate,h===null?p.firstBaseUpdate=f:h.next=f,p.lastBaseUpdate=f}function Yv(h,f,p,C){var D=h.updateQueue;Au=!1;var M=D.firstBaseUpdate,W=D.lastBaseUpdate,ee=D.shared.pending;if(ee!==null){D.shared.pending=null;var le=ee,ke=le.next;le.next=null,W===null?M=ke:W.next=ke,W=le;var Fe=h.alternate;Fe!==null&&(Fe=Fe.updateQueue,ee=Fe.lastBaseUpdate,ee!==W&&(ee===null?Fe.firstBaseUpdate=ke:ee.next=ke,Fe.lastBaseUpdate=le))}if(M!==null){var je=D.baseState;W=0,Fe=ke=le=null,ee=M;do{var Pe=ee.lane,lt=ee.eventTime;if((C&Pe)===Pe){Fe!==null&&(Fe=Fe.next={eventTime:lt,lane:0,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null});e:{var ft=h,mt=ee;switch(Pe=f,lt=p,mt.tag){case 1:if(ft=mt.payload,typeof ft=="function"){je=ft.call(lt,je,Pe);break e}je=ft;break e;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=mt.payload,Pe=typeof ft=="function"?ft.call(lt,je,Pe):ft,Pe==null)break e;je=fe({},je,Pe);break e;case 2:Au=!0}}ee.callback!==null&&ee.lane!==0&&(h.flags|=64,Pe=D.effects,Pe===null?D.effects=[ee]:Pe.push(ee))}else lt={eventTime:lt,lane:Pe,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},Fe===null?(ke=Fe=lt,le=je):Fe=Fe.next=lt,W|=Pe;if(ee=ee.next,ee===null){if(ee=D.shared.pending,ee===null)break;Pe=ee,ee=Pe.next,Pe.next=null,D.lastBaseUpdate=Pe,D.shared.pending=null}}while(!0);if(Fe===null&&(le=je),D.baseState=le,D.firstBaseUpdate=ke,D.lastBaseUpdate=Fe,f=D.shared.interleaved,f!==null){D=f;do W|=D.lane,D=D.next;while(D!==f)}else M===null&&(D.shared.lanes=0);rd|=W,h.lanes=W,h.memoizedState=je}}function rN(h,f,p){if(h=f.effects,f.effects=null,h!==null)for(f=0;f<h.length;f++){var C=h[f],D=C.callback;if(D!==null){if(C.callback=null,C=p,typeof D!="function")throw Error(t(191,D));D.call(C)}}}var e0={},gl=Iu(e0),t0=Iu(e0),i0=Iu(e0);function nd(h){if(h===e0)throw Error(t(174));return h}function ix(h,f){switch(cn(i0,f),cn(t0,h),cn(gl,e0),h=f.nodeType,h){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:Qr(null,"");break;default:h=h===8?f.parentNode:f,f=h.namespaceURI||null,h=h.tagName,f=Qr(f,h)}_n(gl),cn(gl,f)}function vg(){_n(gl),_n(t0),_n(i0)}function oN(h){nd(i0.current);var f=nd(gl.current),p=Qr(f,h.type);f!==p&&(cn(t0,h),cn(gl,p))}function nx(h){t0.current===h&&(_n(gl),_n(t0))}var xn=Iu(0);function Xv(h){for(var f=h;f!==null;){if(f.tag===13){var p=f.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break;for(;f.sibling===null;){if(f.return===null||f.return===h)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var sx=[];function rx(){for(var h=0;h<sx.length;h++)sx[h]._workInProgressVersionPrimary=null;sx.length=0}var Qv=L.ReactCurrentDispatcher,ox=L.ReactCurrentBatchConfig,sd=0,kn=null,bs=null,Rs=null,Jv=!1,n0=!1,s0=0,tq=0;function fr(){throw Error(t(321))}function ax(h,f){if(f===null)return!1;for(var p=0;p<f.length&&p<h.length;p++)if(!Na(h[p],f[p]))return!1;return!0}function lx(h,f,p,C,D,M){if(sd=M,kn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Qv.current=h===null||h.memoizedState===null?rq:oq,h=p(C,D),n0){M=0;do{if(n0=!1,s0=0,25<=M)throw Error(t(301));M+=1,Rs=bs=null,f.updateQueue=null,Qv.current=aq,h=p(C,D)}while(n0)}if(Qv.current=ib,f=bs!==null&&bs.next!==null,sd=0,Rs=bs=kn=null,Jv=!1,f)throw Error(t(300));return h}function cx(){var h=s0!==0;return s0=0,h}function ml(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rs===null?kn.memoizedState=Rs=h:Rs=Rs.next=h,Rs}function ia(){if(bs===null){var h=kn.alternate;h=h!==null?h.memoizedState:null}else h=bs.next;var f=Rs===null?kn.memoizedState:Rs.next;if(f!==null)Rs=f,bs=h;else{if(h===null)throw Error(t(310));bs=h,h={memoizedState:bs.memoizedState,baseState:bs.baseState,baseQueue:bs.baseQueue,queue:bs.queue,next:null},Rs===null?kn.memoizedState=Rs=h:Rs=Rs.next=h}return Rs}function r0(h,f){return typeof f=="function"?f(h):f}function ux(h){var f=ia(),p=f.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=h;var C=bs,D=C.baseQueue,M=p.pending;if(M!==null){if(D!==null){var W=D.next;D.next=M.next,M.next=W}C.baseQueue=D=M,p.pending=null}if(D!==null){M=D.next,C=C.baseState;var ee=W=null,le=null,ke=M;do{var Fe=ke.lane;if((sd&Fe)===Fe)le!==null&&(le=le.next={lane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),C=ke.hasEagerState?ke.eagerState:h(C,ke.action);else{var je={lane:Fe,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null};le===null?(ee=le=je,W=C):le=le.next=je,kn.lanes|=Fe,rd|=Fe}ke=ke.next}while(ke!==null&&ke!==M);le===null?W=C:le.next=ee,Na(C,f.memoizedState)||(no=!0),f.memoizedState=C,f.baseState=W,f.baseQueue=le,p.lastRenderedState=C}if(h=p.interleaved,h!==null){D=h;do M=D.lane,kn.lanes|=M,rd|=M,D=D.next;while(D!==h)}else D===null&&(p.lanes=0);return[f.memoizedState,p.dispatch]}function hx(h){var f=ia(),p=f.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=h;var C=p.dispatch,D=p.pending,M=f.memoizedState;if(D!==null){p.pending=null;var W=D=D.next;do M=h(M,W.action),W=W.next;while(W!==D);Na(M,f.memoizedState)||(no=!0),f.memoizedState=M,f.baseQueue===null&&(f.baseState=M),p.lastRenderedState=M}return[M,C]}function aN(){}function lN(h,f){var p=kn,C=ia(),D=f(),M=!Na(C.memoizedState,D);if(M&&(C.memoizedState=D,no=!0),C=C.queue,dx(hN.bind(null,p,C,h),[h]),C.getSnapshot!==f||M||Rs!==null&&Rs.memoizedState.tag&1){if(p.flags|=2048,o0(9,uN.bind(null,p,C,D,f),void 0,null),As===null)throw Error(t(349));(sd&30)!==0||cN(p,f,D)}return D}function cN(h,f,p){h.flags|=16384,h={getSnapshot:f,value:p},f=kn.updateQueue,f===null?(f={lastEffect:null,stores:null},kn.updateQueue=f,f.stores=[h]):(p=f.stores,p===null?f.stores=[h]:p.push(h))}function uN(h,f,p,C){f.value=p,f.getSnapshot=C,dN(f)&&fN(h)}function hN(h,f,p){return p(function(){dN(f)&&fN(h)})}function dN(h){var f=h.getSnapshot;h=h.value;try{var p=f();return!Na(h,p)}catch{return!0}}function fN(h){var f=uc(h,1);f!==null&&Pa(f,h,1,-1)}function gN(h){var f=ml();return typeof h=="function"&&(h=h()),f.memoizedState=f.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r0,lastRenderedState:h},f.queue=h,h=h.dispatch=sq.bind(null,kn,h),[f.memoizedState,h]}function o0(h,f,p,C){return h={tag:h,create:f,destroy:p,deps:C,next:null},f=kn.updateQueue,f===null?(f={lastEffect:null,stores:null},kn.updateQueue=f,f.lastEffect=h.next=h):(p=f.lastEffect,p===null?f.lastEffect=h.next=h:(C=p.next,p.next=h,h.next=C,f.lastEffect=h)),h}function mN(){return ia().memoizedState}function eb(h,f,p,C){var D=ml();kn.flags|=h,D.memoizedState=o0(1|f,p,void 0,C===void 0?null:C)}function tb(h,f,p,C){var D=ia();C=C===void 0?null:C;var M=void 0;if(bs!==null){var W=bs.memoizedState;if(M=W.destroy,C!==null&&ax(C,W.deps)){D.memoizedState=o0(f,p,M,C);return}}kn.flags|=h,D.memoizedState=o0(1|f,p,M,C)}function pN(h,f){return eb(8390656,8,h,f)}function dx(h,f){return tb(2048,8,h,f)}function _N(h,f){return tb(4,2,h,f)}function vN(h,f){return tb(4,4,h,f)}function bN(h,f){if(typeof f=="function")return h=h(),f(h),function(){f(null)};if(f!=null)return h=h(),f.current=h,function(){f.current=null}}function wN(h,f,p){return p=p!=null?p.concat([h]):null,tb(4,4,bN.bind(null,f,h),p)}function fx(){}function CN(h,f){var p=ia();f=f===void 0?null:f;var C=p.memoizedState;return C!==null&&f!==null&&ax(f,C[1])?C[0]:(p.memoizedState=[h,f],h)}function yN(h,f){var p=ia();f=f===void 0?null:f;var C=p.memoizedState;return C!==null&&f!==null&&ax(f,C[1])?C[0]:(h=h(),p.memoizedState=[h,f],h)}function SN(h,f,p){return(sd&21)===0?(h.baseState&&(h.baseState=!1,no=!0),h.memoizedState=p):(Na(p,f)||(p=J9(),kn.lanes|=p,rd|=p,h.baseState=!0),f)}function iq(h,f){var p=ji;ji=p!==0&&4>p?p:4,h(!0);var C=ox.transition;ox.transition={};try{h(!1),f()}finally{ji=p,ox.transition=C}}function xN(){return ia().memoizedState}function nq(h,f,p){var C=Wu(h);if(p={lane:C,action:p,hasEagerState:!1,eagerState:null,next:null},kN(h))LN(f,p);else if(p=iN(h,f,p,C),p!==null){var D=Ir();Pa(p,h,C,D),DN(p,f,C)}}function sq(h,f,p){var C=Wu(h),D={lane:C,action:p,hasEagerState:!1,eagerState:null,next:null};if(kN(h))LN(f,D);else{var M=h.alternate;if(h.lanes===0&&(M===null||M.lanes===0)&&(M=f.lastRenderedReducer,M!==null))try{var W=f.lastRenderedState,ee=M(W,p);if(D.hasEagerState=!0,D.eagerState=ee,Na(ee,W)){var le=f.interleaved;le===null?(D.next=D,ex(f)):(D.next=le.next,le.next=D),f.interleaved=D;return}}catch{}finally{}p=iN(h,f,D,C),p!==null&&(D=Ir(),Pa(p,h,C,D),DN(p,f,C))}}function kN(h){var f=h.alternate;return h===kn||f!==null&&f===kn}function LN(h,f){n0=Jv=!0;var p=h.pending;p===null?f.next=f:(f.next=p.next,p.next=f),h.pending=f}function DN(h,f,p){if((p&4194240)!==0){var C=f.lanes;C&=h.pendingLanes,p|=C,f.lanes=p,m4(h,p)}}var ib={readContext:ta,useCallback:fr,useContext:fr,useEffect:fr,useImperativeHandle:fr,useInsertionEffect:fr,useLayoutEffect:fr,useMemo:fr,useReducer:fr,useRef:fr,useState:fr,useDebugValue:fr,useDeferredValue:fr,useTransition:fr,useMutableSource:fr,useSyncExternalStore:fr,useId:fr,unstable_isNewReconciler:!1},rq={readContext:ta,useCallback:function(h,f){return ml().memoizedState=[h,f===void 0?null:f],h},useContext:ta,useEffect:pN,useImperativeHandle:function(h,f,p){return p=p!=null?p.concat([h]):null,eb(4194308,4,bN.bind(null,f,h),p)},useLayoutEffect:function(h,f){return eb(4194308,4,h,f)},useInsertionEffect:function(h,f){return eb(4,2,h,f)},useMemo:function(h,f){var p=ml();return f=f===void 0?null:f,h=h(),p.memoizedState=[h,f],h},useReducer:function(h,f,p){var C=ml();return f=p!==void 0?p(f):f,C.memoizedState=C.baseState=f,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:f},C.queue=h,h=h.dispatch=nq.bind(null,kn,h),[C.memoizedState,h]},useRef:function(h){var f=ml();return h={current:h},f.memoizedState=h},useState:gN,useDebugValue:fx,useDeferredValue:function(h){return ml().memoizedState=h},useTransition:function(){var h=gN(!1),f=h[0];return h=iq.bind(null,h[1]),ml().memoizedState=h,[f,h]},useMutableSource:function(){},useSyncExternalStore:function(h,f,p){var C=kn,D=ml();if(bn){if(p===void 0)throw Error(t(407));p=p()}else{if(p=f(),As===null)throw Error(t(349));(sd&30)!==0||cN(C,f,p)}D.memoizedState=p;var M={value:p,getSnapshot:f};return D.queue=M,pN(hN.bind(null,C,M,h),[h]),C.flags|=2048,o0(9,uN.bind(null,C,M,p,f),void 0,null),p},useId:function(){var h=ml(),f=As.identifierPrefix;if(bn){var p=cc,C=lc;p=(C&~(1<<32-Pi(C)-1)).toString(32)+p,f=":"+f+"R"+p,p=s0++,0<p&&(f+="H"+p.toString(32)),f+=":"}else p=tq++,f=":"+f+"r"+p.toString(32)+":";return h.memoizedState=f},unstable_isNewReconciler:!1},oq={readContext:ta,useCallback:CN,useContext:ta,useEffect:dx,useImperativeHandle:wN,useInsertionEffect:_N,useLayoutEffect:vN,useMemo:yN,useReducer:ux,useRef:mN,useState:function(){return ux(r0)},useDebugValue:fx,useDeferredValue:function(h){var f=ia();return SN(f,bs.memoizedState,h)},useTransition:function(){var h=ux(r0)[0],f=ia().memoizedState;return[h,f]},useMutableSource:aN,useSyncExternalStore:lN,useId:xN,unstable_isNewReconciler:!1},aq={readContext:ta,useCallback:CN,useContext:ta,useEffect:dx,useImperativeHandle:wN,useInsertionEffect:_N,useLayoutEffect:vN,useMemo:yN,useReducer:hx,useRef:mN,useState:function(){return hx(r0)},useDebugValue:fx,useDeferredValue:function(h){var f=ia();return bs===null?f.memoizedState=h:SN(f,bs.memoizedState,h)},useTransition:function(){var h=hx(r0)[0],f=ia().memoizedState;return[h,f]},useMutableSource:aN,useSyncExternalStore:lN,useId:xN,unstable_isNewReconciler:!1};function Ma(h,f){if(h&&h.defaultProps){f=fe({},f),h=h.defaultProps;for(var p in h)f[p]===void 0&&(f[p]=h[p]);return f}return f}function gx(h,f,p,C){f=h.memoizedState,p=p(C,f),p=p==null?f:fe({},f,p),h.memoizedState=p,h.lanes===0&&(h.updateQueue.baseState=p)}var nb={isMounted:function(h){return(h=h._reactInternals)?qe(h)===h:!1},enqueueSetState:function(h,f,p){h=h._reactInternals;var C=Ir(),D=Wu(h),M=hc(C,D);M.payload=f,p!=null&&(M.callback=p),f=Pu(h,M,D),f!==null&&(Pa(f,h,D,C),Zv(f,h,D))},enqueueReplaceState:function(h,f,p){h=h._reactInternals;var C=Ir(),D=Wu(h),M=hc(C,D);M.tag=1,M.payload=f,p!=null&&(M.callback=p),f=Pu(h,M,D),f!==null&&(Pa(f,h,D,C),Zv(f,h,D))},enqueueForceUpdate:function(h,f){h=h._reactInternals;var p=Ir(),C=Wu(h),D=hc(p,C);D.tag=2,f!=null&&(D.callback=f),f=Pu(h,D,C),f!==null&&(Pa(f,h,C,p),Zv(f,h,C))}};function EN(h,f,p,C,D,M,W){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(C,M,W):f.prototype&&f.prototype.isPureReactComponent?!qp(p,C)||!qp(D,M):!0}function TN(h,f,p){var C=!1,D=Mu,M=f.contextType;return typeof M=="object"&&M!==null?M=ta(M):(D=io(f)?Jh:dr.current,C=f.contextTypes,M=(C=C!=null)?hg(h,D):Mu),f=new f(p,M),h.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=nb,h.stateNode=f,f._reactInternals=h,C&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=D,h.__reactInternalMemoizedMaskedChildContext=M),f}function NN(h,f,p,C){h=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(p,C),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(p,C),f.state!==h&&nb.enqueueReplaceState(f,f.state,null)}function mx(h,f,p,C){var D=h.stateNode;D.props=p,D.state=h.memoizedState,D.refs={},tx(h);var M=f.contextType;typeof M=="object"&&M!==null?D.context=ta(M):(M=io(f)?Jh:dr.current,D.context=hg(h,M)),D.state=h.memoizedState,M=f.getDerivedStateFromProps,typeof M=="function"&&(gx(h,f,M,p),D.state=h.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(f=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),f!==D.state&&nb.enqueueReplaceState(D,D.state,null),Yv(h,p,D,C),D.state=h.memoizedState),typeof D.componentDidMount=="function"&&(h.flags|=4194308)}function bg(h,f){try{var p="",C=f;do p+=He(C),C=C.return;while(C);var D=p}catch(M){D=`
Error generating stack: `+M.message+`
`+M.stack}return{value:h,source:f,stack:D,digest:null}}function px(h,f,p){return{value:h,source:null,stack:p??null,digest:f??null}}function _x(h,f){try{console.error(f.value)}catch(p){setTimeout(function(){throw p})}}var lq=typeof WeakMap=="function"?WeakMap:Map;function IN(h,f,p){p=hc(-1,p),p.tag=3,p.payload={element:null};var C=f.value;return p.callback=function(){ub||(ub=!0,Mx=C),_x(h,f)},p}function MN(h,f,p){p=hc(-1,p),p.tag=3;var C=h.type.getDerivedStateFromError;if(typeof C=="function"){var D=f.value;p.payload=function(){return C(D)},p.callback=function(){_x(h,f)}}var M=h.stateNode;return M!==null&&typeof M.componentDidCatch=="function"&&(p.callback=function(){_x(h,f),typeof C!="function"&&(Fu===null?Fu=new Set([this]):Fu.add(this));var W=f.stack;this.componentDidCatch(f.value,{componentStack:W!==null?W:""})}),p}function RN(h,f,p){var C=h.pingCache;if(C===null){C=h.pingCache=new lq;var D=new Set;C.set(f,D)}else D=C.get(f),D===void 0&&(D=new Set,C.set(f,D));D.has(p)||(D.add(p),h=yq.bind(null,h,f,p),f.then(h,h))}function AN(h){do{var f;if((f=h.tag===13)&&(f=h.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return h;h=h.return}while(h!==null);return null}function PN(h,f,p,C,D){return(h.mode&1)===0?(h===f?h.flags|=65536:(h.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(f=hc(-1,1),f.tag=2,Pu(p,f,1))),p.lanes|=1),h):(h.flags|=65536,h.lanes=D,h)}var cq=L.ReactCurrentOwner,no=!1;function Nr(h,f,p,C){f.child=h===null?tN(f,null,p,C):mg(f,h.child,p,C)}function ON(h,f,p,C,D){p=p.render;var M=f.ref;return _g(f,D),C=lx(h,f,p,C,M,D),p=cx(),h!==null&&!no?(f.updateQueue=h.updateQueue,f.flags&=-2053,h.lanes&=~D,dc(h,f,D)):(bn&&p&&$4(f),f.flags|=1,Nr(h,f,C,D),f.child)}function FN(h,f,p,C,D){if(h===null){var M=p.type;return typeof M=="function"&&!Wx(M)&&M.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(f.tag=15,f.type=M,BN(h,f,M,C,D)):(h=pb(p.type,null,C,f,f.mode,D),h.ref=f.ref,h.return=f,f.child=h)}if(M=h.child,(h.lanes&D)===0){var W=M.memoizedProps;if(p=p.compare,p=p!==null?p:qp,p(W,C)&&h.ref===f.ref)return dc(h,f,D)}return f.flags|=1,h=zu(M,C),h.ref=f.ref,h.return=f,f.child=h}function BN(h,f,p,C,D){if(h!==null){var M=h.memoizedProps;if(qp(M,C)&&h.ref===f.ref)if(no=!1,f.pendingProps=C=M,(h.lanes&D)!==0)(h.flags&131072)!==0&&(no=!0);else return f.lanes=h.lanes,dc(h,f,D)}return vx(h,f,p,C,D)}function WN(h,f,p){var C=f.pendingProps,D=C.children,M=h!==null?h.memoizedState:null;if(C.mode==="hidden")if((f.mode&1)===0)f.memoizedState={baseLanes:0,cachePool:null,transitions:null},cn(Cg,Mo),Mo|=p;else{if((p&1073741824)===0)return h=M!==null?M.baseLanes|p:p,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:h,cachePool:null,transitions:null},f.updateQueue=null,cn(Cg,Mo),Mo|=h,null;f.memoizedState={baseLanes:0,cachePool:null,transitions:null},C=M!==null?M.baseLanes:p,cn(Cg,Mo),Mo|=C}else M!==null?(C=M.baseLanes|p,f.memoizedState=null):C=p,cn(Cg,Mo),Mo|=C;return Nr(h,f,D,p),f.child}function VN(h,f){var p=f.ref;(h===null&&p!==null||h!==null&&h.ref!==p)&&(f.flags|=512,f.flags|=2097152)}function vx(h,f,p,C,D){var M=io(p)?Jh:dr.current;return M=hg(f,M),_g(f,D),p=lx(h,f,p,C,M,D),C=cx(),h!==null&&!no?(f.updateQueue=h.updateQueue,f.flags&=-2053,h.lanes&=~D,dc(h,f,D)):(bn&&C&&$4(f),f.flags|=1,Nr(h,f,p,D),f.child)}function zN(h,f,p,C,D){if(io(p)){var M=!0;zv(f)}else M=!1;if(_g(f,D),f.stateNode===null)rb(h,f),TN(f,p,C),mx(f,p,C,D),C=!0;else if(h===null){var W=f.stateNode,ee=f.memoizedProps;W.props=ee;var le=W.context,ke=p.contextType;typeof ke=="object"&&ke!==null?ke=ta(ke):(ke=io(p)?Jh:dr.current,ke=hg(f,ke));var Fe=p.getDerivedStateFromProps,je=typeof Fe=="function"||typeof W.getSnapshotBeforeUpdate=="function";je||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ee!==C||le!==ke)&&NN(f,W,C,ke),Au=!1;var Pe=f.memoizedState;W.state=Pe,Yv(f,C,W,D),le=f.memoizedState,ee!==C||Pe!==le||to.current||Au?(typeof Fe=="function"&&(gx(f,p,Fe,C),le=f.memoizedState),(ee=Au||EN(f,p,ee,C,Pe,le,ke))?(je||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(f.flags|=4194308)):(typeof W.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=C,f.memoizedState=le),W.props=C,W.state=le,W.context=ke,C=ee):(typeof W.componentDidMount=="function"&&(f.flags|=4194308),C=!1)}else{W=f.stateNode,nN(h,f),ee=f.memoizedProps,ke=f.type===f.elementType?ee:Ma(f.type,ee),W.props=ke,je=f.pendingProps,Pe=W.context,le=p.contextType,typeof le=="object"&&le!==null?le=ta(le):(le=io(p)?Jh:dr.current,le=hg(f,le));var lt=p.getDerivedStateFromProps;(Fe=typeof lt=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ee!==je||Pe!==le)&&NN(f,W,C,le),Au=!1,Pe=f.memoizedState,W.state=Pe,Yv(f,C,W,D);var ft=f.memoizedState;ee!==je||Pe!==ft||to.current||Au?(typeof lt=="function"&&(gx(f,p,lt,C),ft=f.memoizedState),(ke=Au||EN(f,p,ke,C,Pe,ft,le)||!1)?(Fe||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(C,ft,le),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(C,ft,le)),typeof W.componentDidUpdate=="function"&&(f.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof W.componentDidUpdate!="function"||ee===h.memoizedProps&&Pe===h.memoizedState||(f.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ee===h.memoizedProps&&Pe===h.memoizedState||(f.flags|=1024),f.memoizedProps=C,f.memoizedState=ft),W.props=C,W.state=ft,W.context=le,C=ke):(typeof W.componentDidUpdate!="function"||ee===h.memoizedProps&&Pe===h.memoizedState||(f.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ee===h.memoizedProps&&Pe===h.memoizedState||(f.flags|=1024),C=!1)}return bx(h,f,p,C,M,D)}function bx(h,f,p,C,D,M){VN(h,f);var W=(f.flags&128)!==0;if(!C&&!W)return D&&qT(f,p,!1),dc(h,f,M);C=f.stateNode,cq.current=f;var ee=W&&typeof p.getDerivedStateFromError!="function"?null:C.render();return f.flags|=1,h!==null&&W?(f.child=mg(f,h.child,null,M),f.child=mg(f,null,ee,M)):Nr(h,f,ee,M),f.memoizedState=C.state,D&&qT(f,p,!0),f.child}function HN(h){var f=h.stateNode;f.pendingContext?UT(h,f.pendingContext,f.pendingContext!==f.context):f.context&&UT(h,f.context,!1),ix(h,f.containerInfo)}function jN(h,f,p,C,D){return gg(),Z4(D),f.flags|=256,Nr(h,f,p,C),f.child}var wx={dehydrated:null,treeContext:null,retryLane:0};function Cx(h){return{baseLanes:h,cachePool:null,transitions:null}}function UN(h,f,p){var C=f.pendingProps,D=xn.current,M=!1,W=(f.flags&128)!==0,ee;if((ee=W)||(ee=h!==null&&h.memoizedState===null?!1:(D&2)!==0),ee?(M=!0,f.flags&=-129):(h===null||h.memoizedState!==null)&&(D|=1),cn(xn,D&1),h===null)return G4(f),h=f.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((f.mode&1)===0?f.lanes=1:h.data==="$!"?f.lanes=8:f.lanes=1073741824,null):(W=C.children,h=C.fallback,M?(C=f.mode,M=f.child,W={mode:"hidden",children:W},(C&1)===0&&M!==null?(M.childLanes=0,M.pendingProps=W):M=_b(W,C,0,null),h=cd(h,C,p,null),M.return=f,h.return=f,M.sibling=h,f.child=M,f.child.memoizedState=Cx(p),f.memoizedState=wx,h):yx(f,W));if(D=h.memoizedState,D!==null&&(ee=D.dehydrated,ee!==null))return uq(h,f,W,C,ee,D,p);if(M){M=C.fallback,W=f.mode,D=h.child,ee=D.sibling;var le={mode:"hidden",children:C.children};return(W&1)===0&&f.child!==D?(C=f.child,C.childLanes=0,C.pendingProps=le,f.deletions=null):(C=zu(D,le),C.subtreeFlags=D.subtreeFlags&14680064),ee!==null?M=zu(ee,M):(M=cd(M,W,p,null),M.flags|=2),M.return=f,C.return=f,C.sibling=M,f.child=C,C=M,M=f.child,W=h.child.memoizedState,W=W===null?Cx(p):{baseLanes:W.baseLanes|p,cachePool:null,transitions:W.transitions},M.memoizedState=W,M.childLanes=h.childLanes&~p,f.memoizedState=wx,C}return M=h.child,h=M.sibling,C=zu(M,{mode:"visible",children:C.children}),(f.mode&1)===0&&(C.lanes=p),C.return=f,C.sibling=null,h!==null&&(p=f.deletions,p===null?(f.deletions=[h],f.flags|=16):p.push(h)),f.child=C,f.memoizedState=null,C}function yx(h,f){return f=_b({mode:"visible",children:f},h.mode,0,null),f.return=h,h.child=f}function sb(h,f,p,C){return C!==null&&Z4(C),mg(f,h.child,null,p),h=yx(f,f.pendingProps.children),h.flags|=2,f.memoizedState=null,h}function uq(h,f,p,C,D,M,W){if(p)return f.flags&256?(f.flags&=-257,C=px(Error(t(422))),sb(h,f,W,C)):f.memoizedState!==null?(f.child=h.child,f.flags|=128,null):(M=C.fallback,D=f.mode,C=_b({mode:"visible",children:C.children},D,0,null),M=cd(M,D,W,null),M.flags|=2,C.return=f,M.return=f,C.sibling=M,f.child=C,(f.mode&1)!==0&&mg(f,h.child,null,W),f.child.memoizedState=Cx(W),f.memoizedState=wx,M);if((f.mode&1)===0)return sb(h,f,W,null);if(D.data==="$!"){if(C=D.nextSibling&&D.nextSibling.dataset,C)var ee=C.dgst;return C=ee,M=Error(t(419)),C=px(M,C,void 0),sb(h,f,W,C)}if(ee=(W&h.childLanes)!==0,no||ee){if(C=As,C!==null){switch(W&-W){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}D=(D&(C.suspendedLanes|W))!==0?0:D,D!==0&&D!==M.retryLane&&(M.retryLane=D,uc(h,D),Pa(C,h,D,-1))}return Bx(),C=px(Error(t(421))),sb(h,f,W,C)}return D.data==="$?"?(f.flags|=128,f.child=h.child,f=Sq.bind(null,h),D._reactRetry=f,null):(h=M.treeContext,Io=Nu(D.nextSibling),No=f,bn=!0,Ia=null,h!==null&&(Jo[ea++]=lc,Jo[ea++]=cc,Jo[ea++]=ed,lc=h.id,cc=h.overflow,ed=f),f=yx(f,C.children),f.flags|=4096,f)}function $N(h,f,p){h.lanes|=f;var C=h.alternate;C!==null&&(C.lanes|=f),J4(h.return,f,p)}function Sx(h,f,p,C,D){var M=h.memoizedState;M===null?h.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:C,tail:p,tailMode:D}:(M.isBackwards=f,M.rendering=null,M.renderingStartTime=0,M.last=C,M.tail=p,M.tailMode=D)}function qN(h,f,p){var C=f.pendingProps,D=C.revealOrder,M=C.tail;if(Nr(h,f,C.children,p),C=xn.current,(C&2)!==0)C=C&1|2,f.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=f.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&$N(h,p,f);else if(h.tag===19)$N(h,p,f);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===f)break e;for(;h.sibling===null;){if(h.return===null||h.return===f)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}C&=1}if(cn(xn,C),(f.mode&1)===0)f.memoizedState=null;else switch(D){case"forwards":for(p=f.child,D=null;p!==null;)h=p.alternate,h!==null&&Xv(h)===null&&(D=p),p=p.sibling;p=D,p===null?(D=f.child,f.child=null):(D=p.sibling,p.sibling=null),Sx(f,!1,D,p,M);break;case"backwards":for(p=null,D=f.child,f.child=null;D!==null;){if(h=D.alternate,h!==null&&Xv(h)===null){f.child=D;break}h=D.sibling,D.sibling=p,p=D,D=h}Sx(f,!0,p,null,M);break;case"together":Sx(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function rb(h,f){(f.mode&1)===0&&h!==null&&(h.alternate=null,f.alternate=null,f.flags|=2)}function dc(h,f,p){if(h!==null&&(f.dependencies=h.dependencies),rd|=f.lanes,(p&f.childLanes)===0)return null;if(h!==null&&f.child!==h.child)throw Error(t(153));if(f.child!==null){for(h=f.child,p=zu(h,h.pendingProps),f.child=p,p.return=f;h.sibling!==null;)h=h.sibling,p=p.sibling=zu(h,h.pendingProps),p.return=f;p.sibling=null}return f.child}function hq(h,f,p){switch(f.tag){case 3:HN(f),gg();break;case 5:oN(f);break;case 1:io(f.type)&&zv(f);break;case 4:ix(f,f.stateNode.containerInfo);break;case 10:var C=f.type._context,D=f.memoizedProps.value;cn(Kv,C._currentValue),C._currentValue=D;break;case 13:if(C=f.memoizedState,C!==null)return C.dehydrated!==null?(cn(xn,xn.current&1),f.flags|=128,null):(p&f.child.childLanes)!==0?UN(h,f,p):(cn(xn,xn.current&1),h=dc(h,f,p),h!==null?h.sibling:null);cn(xn,xn.current&1);break;case 19:if(C=(p&f.childLanes)!==0,(h.flags&128)!==0){if(C)return qN(h,f,p);f.flags|=128}if(D=f.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),cn(xn,xn.current),C)break;return null;case 22:case 23:return f.lanes=0,WN(h,f,p)}return dc(h,f,p)}var KN,xx,GN,ZN;KN=function(h,f){for(var p=f.child;p!==null;){if(p.tag===5||p.tag===6)h.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},xx=function(){},GN=function(h,f,p,C){var D=h.memoizedProps;if(D!==C){h=f.stateNode,nd(gl.current);var M=null;switch(p){case"input":D=dn(h,D),C=dn(h,C),M=[];break;case"select":D=fe({},D,{value:void 0}),C=fe({},C,{value:void 0}),M=[];break;case"textarea":D=hl(h,D),C=hl(h,C),M=[];break;default:typeof D.onClick!="function"&&typeof C.onClick=="function"&&(h.onclick=Bv)}Do(p,C);var W;p=null;for(ke in D)if(!C.hasOwnProperty(ke)&&D.hasOwnProperty(ke)&&D[ke]!=null)if(ke==="style"){var ee=D[ke];for(W in ee)ee.hasOwnProperty(W)&&(p||(p={}),p[W]="")}else ke!=="dangerouslySetInnerHTML"&&ke!=="children"&&ke!=="suppressContentEditableWarning"&&ke!=="suppressHydrationWarning"&&ke!=="autoFocus"&&(n.hasOwnProperty(ke)?M||(M=[]):(M=M||[]).push(ke,null));for(ke in C){var le=C[ke];if(ee=D?.[ke],C.hasOwnProperty(ke)&&le!==ee&&(le!=null||ee!=null))if(ke==="style")if(ee){for(W in ee)!ee.hasOwnProperty(W)||le&&le.hasOwnProperty(W)||(p||(p={}),p[W]="");for(W in le)le.hasOwnProperty(W)&&ee[W]!==le[W]&&(p||(p={}),p[W]=le[W])}else p||(M||(M=[]),M.push(ke,p)),p=le;else ke==="dangerouslySetInnerHTML"?(le=le?le.__html:void 0,ee=ee?ee.__html:void 0,le!=null&&ee!==le&&(M=M||[]).push(ke,le)):ke==="children"?typeof le!="string"&&typeof le!="number"||(M=M||[]).push(ke,""+le):ke!=="suppressContentEditableWarning"&&ke!=="suppressHydrationWarning"&&(n.hasOwnProperty(ke)?(le!=null&&ke==="onScroll"&&pn("scroll",h),M||ee===le||(M=[])):(M=M||[]).push(ke,le))}p&&(M=M||[]).push("style",p);var ke=M;(f.updateQueue=ke)&&(f.flags|=4)}},ZN=function(h,f,p,C){p!==C&&(f.flags|=4)};function a0(h,f){if(!bn)switch(h.tailMode){case"hidden":f=h.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?h.tail=null:p.sibling=null;break;case"collapsed":p=h.tail;for(var C=null;p!==null;)p.alternate!==null&&(C=p),p=p.sibling;C===null?f||h.tail===null?h.tail=null:h.tail.sibling=null:C.sibling=null}}function gr(h){var f=h.alternate!==null&&h.alternate.child===h.child,p=0,C=0;if(f)for(var D=h.child;D!==null;)p|=D.lanes|D.childLanes,C|=D.subtreeFlags&14680064,C|=D.flags&14680064,D.return=h,D=D.sibling;else for(D=h.child;D!==null;)p|=D.lanes|D.childLanes,C|=D.subtreeFlags,C|=D.flags,D.return=h,D=D.sibling;return h.subtreeFlags|=C,h.childLanes=p,f}function dq(h,f,p){var C=f.pendingProps;switch(q4(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gr(f),null;case 1:return io(f.type)&&Vv(),gr(f),null;case 3:return C=f.stateNode,vg(),_n(to),_n(dr),rx(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(h===null||h.child===null)&&($v(f)?f.flags|=4:h===null||h.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Ia!==null&&(Px(Ia),Ia=null))),xx(h,f),gr(f),null;case 5:nx(f);var D=nd(i0.current);if(p=f.type,h!==null&&f.stateNode!=null)GN(h,f,p,C,D),h.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!C){if(f.stateNode===null)throw Error(t(166));return gr(f),null}if(h=nd(gl.current),$v(f)){C=f.stateNode,p=f.type;var M=f.memoizedProps;switch(C[fl]=f,C[Xp]=M,h=(f.mode&1)!==0,p){case"dialog":pn("cancel",C),pn("close",C);break;case"iframe":case"object":case"embed":pn("load",C);break;case"video":case"audio":for(D=0;D<Gp.length;D++)pn(Gp[D],C);break;case"source":pn("error",C);break;case"img":case"image":case"link":pn("error",C),pn("load",C);break;case"details":pn("toggle",C);break;case"input":Er(C,M),pn("invalid",C);break;case"select":C._wrapperState={wasMultiple:!!M.multiple},pn("invalid",C);break;case"textarea":Ea(C,M),pn("invalid",C)}Do(p,M),D=null;for(var W in M)if(M.hasOwnProperty(W)){var ee=M[W];W==="children"?typeof ee=="string"?C.textContent!==ee&&(M.suppressHydrationWarning!==!0&&Fv(C.textContent,ee,h),D=["children",ee]):typeof ee=="number"&&C.textContent!==""+ee&&(M.suppressHydrationWarning!==!0&&Fv(C.textContent,ee,h),D=["children",""+ee]):n.hasOwnProperty(W)&&ee!=null&&W==="onScroll"&&pn("scroll",C)}switch(p){case"input":qs(C),cr(C,M,!0);break;case"textarea":qs(C),vs(C);break;case"select":case"option":break;default:typeof M.onClick=="function"&&(C.onclick=Bv)}C=D,f.updateQueue=C,C!==null&&(f.flags|=4)}else{W=D.nodeType===9?D:D.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=Xr(p)),h==="http://www.w3.org/1999/xhtml"?p==="script"?(h=W.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof C.is=="string"?h=W.createElement(p,{is:C.is}):(h=W.createElement(p),p==="select"&&(W=h,C.multiple?W.multiple=!0:C.size&&(W.size=C.size))):h=W.createElementNS(h,p),h[fl]=f,h[Xp]=C,KN(h,f,!1,!1),f.stateNode=h;e:{switch(W=Gs(p,C),p){case"dialog":pn("cancel",h),pn("close",h),D=C;break;case"iframe":case"object":case"embed":pn("load",h),D=C;break;case"video":case"audio":for(D=0;D<Gp.length;D++)pn(Gp[D],h);D=C;break;case"source":pn("error",h),D=C;break;case"img":case"image":case"link":pn("error",h),pn("load",h),D=C;break;case"details":pn("toggle",h),D=C;break;case"input":Er(h,C),D=dn(h,C),pn("invalid",h);break;case"option":D=C;break;case"select":h._wrapperState={wasMultiple:!!C.multiple},D=fe({},C,{value:void 0}),pn("invalid",h);break;case"textarea":Ea(h,C),D=hl(h,C),pn("invalid",h);break;default:D=C}Do(p,D),ee=D;for(M in ee)if(ee.hasOwnProperty(M)){var le=ee[M];M==="style"?Ji(h,le):M==="dangerouslySetInnerHTML"?(le=le?le.__html:void 0,le!=null&&ns(h,le)):M==="children"?typeof le=="string"?(p!=="textarea"||le!=="")&&Ms(h,le):typeof le=="number"&&Ms(h,""+le):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(n.hasOwnProperty(M)?le!=null&&M==="onScroll"&&pn("scroll",h):le!=null&&k(h,M,le,W))}switch(p){case"input":qs(h),cr(h,C,!1);break;case"textarea":qs(h),vs(h);break;case"option":C.value!=null&&h.setAttribute("value",""+St(C.value));break;case"select":h.multiple=!!C.multiple,M=C.value,M!=null?Lo(h,!!C.multiple,M,!1):C.defaultValue!=null&&Lo(h,!!C.multiple,C.defaultValue,!0);break;default:typeof D.onClick=="function"&&(h.onclick=Bv)}switch(p){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}}C&&(f.flags|=4)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return gr(f),null;case 6:if(h&&f.stateNode!=null)ZN(h,f,h.memoizedProps,C);else{if(typeof C!="string"&&f.stateNode===null)throw Error(t(166));if(p=nd(i0.current),nd(gl.current),$v(f)){if(C=f.stateNode,p=f.memoizedProps,C[fl]=f,(M=C.nodeValue!==p)&&(h=No,h!==null))switch(h.tag){case 3:Fv(C.nodeValue,p,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&Fv(C.nodeValue,p,(h.mode&1)!==0)}M&&(f.flags|=4)}else C=(p.nodeType===9?p:p.ownerDocument).createTextNode(C),C[fl]=f,f.stateNode=C}return gr(f),null;case 13:if(_n(xn),C=f.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(bn&&Io!==null&&(f.mode&1)!==0&&(f.flags&128)===0)QT(),gg(),f.flags|=98560,M=!1;else if(M=$v(f),C!==null&&C.dehydrated!==null){if(h===null){if(!M)throw Error(t(318));if(M=f.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(t(317));M[fl]=f}else gg(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;gr(f),M=!1}else Ia!==null&&(Px(Ia),Ia=null),M=!0;if(!M)return f.flags&65536?f:null}return(f.flags&128)!==0?(f.lanes=p,f):(C=C!==null,C!==(h!==null&&h.memoizedState!==null)&&C&&(f.child.flags|=8192,(f.mode&1)!==0&&(h===null||(xn.current&1)!==0?ws===0&&(ws=3):Bx())),f.updateQueue!==null&&(f.flags|=4),gr(f),null);case 4:return vg(),xx(h,f),h===null&&Zp(f.stateNode.containerInfo),gr(f),null;case 10:return Q4(f.type._context),gr(f),null;case 17:return io(f.type)&&Vv(),gr(f),null;case 19:if(_n(xn),M=f.memoizedState,M===null)return gr(f),null;if(C=(f.flags&128)!==0,W=M.rendering,W===null)if(C)a0(M,!1);else{if(ws!==0||h!==null&&(h.flags&128)!==0)for(h=f.child;h!==null;){if(W=Xv(h),W!==null){for(f.flags|=128,a0(M,!1),C=W.updateQueue,C!==null&&(f.updateQueue=C,f.flags|=4),f.subtreeFlags=0,C=p,p=f.child;p!==null;)M=p,h=C,M.flags&=14680066,W=M.alternate,W===null?(M.childLanes=0,M.lanes=h,M.child=null,M.subtreeFlags=0,M.memoizedProps=null,M.memoizedState=null,M.updateQueue=null,M.dependencies=null,M.stateNode=null):(M.childLanes=W.childLanes,M.lanes=W.lanes,M.child=W.child,M.subtreeFlags=0,M.deletions=null,M.memoizedProps=W.memoizedProps,M.memoizedState=W.memoizedState,M.updateQueue=W.updateQueue,M.type=W.type,h=W.dependencies,M.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),p=p.sibling;return cn(xn,xn.current&1|2),f.child}h=h.sibling}M.tail!==null&&Wt()>yg&&(f.flags|=128,C=!0,a0(M,!1),f.lanes=4194304)}else{if(!C)if(h=Xv(W),h!==null){if(f.flags|=128,C=!0,p=h.updateQueue,p!==null&&(f.updateQueue=p,f.flags|=4),a0(M,!0),M.tail===null&&M.tailMode==="hidden"&&!W.alternate&&!bn)return gr(f),null}else 2*Wt()-M.renderingStartTime>yg&&p!==1073741824&&(f.flags|=128,C=!0,a0(M,!1),f.lanes=4194304);M.isBackwards?(W.sibling=f.child,f.child=W):(p=M.last,p!==null?p.sibling=W:f.child=W,M.last=W)}return M.tail!==null?(f=M.tail,M.rendering=f,M.tail=f.sibling,M.renderingStartTime=Wt(),f.sibling=null,p=xn.current,cn(xn,C?p&1|2:p&1),f):(gr(f),null);case 22:case 23:return Fx(),C=f.memoizedState!==null,h!==null&&h.memoizedState!==null!==C&&(f.flags|=8192),C&&(f.mode&1)!==0?(Mo&1073741824)!==0&&(gr(f),f.subtreeFlags&6&&(f.flags|=8192)):gr(f),null;case 24:return null;case 25:return null}throw Error(t(156,f.tag))}function fq(h,f){switch(q4(f),f.tag){case 1:return io(f.type)&&Vv(),h=f.flags,h&65536?(f.flags=h&-65537|128,f):null;case 3:return vg(),_n(to),_n(dr),rx(),h=f.flags,(h&65536)!==0&&(h&128)===0?(f.flags=h&-65537|128,f):null;case 5:return nx(f),null;case 13:if(_n(xn),h=f.memoizedState,h!==null&&h.dehydrated!==null){if(f.alternate===null)throw Error(t(340));gg()}return h=f.flags,h&65536?(f.flags=h&-65537|128,f):null;case 19:return _n(xn),null;case 4:return vg(),null;case 10:return Q4(f.type._context),null;case 22:case 23:return Fx(),null;case 24:return null;default:return null}}var ob=!1,mr=!1,gq=typeof WeakSet=="function"?WeakSet:Set,ut=null;function wg(h,f){var p=h.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(C){On(h,f,C)}else p.current=null}function kx(h,f,p){try{p()}catch(C){On(h,f,C)}}var YN=!1;function mq(h,f){if(F4=Lv,h=ET(),T4(h)){if("selectionStart"in h)var p={start:h.selectionStart,end:h.selectionEnd};else e:{p=(p=h.ownerDocument)&&p.defaultView||window;var C=p.getSelection&&p.getSelection();if(C&&C.rangeCount!==0){p=C.anchorNode;var D=C.anchorOffset,M=C.focusNode;C=C.focusOffset;try{p.nodeType,M.nodeType}catch{p=null;break e}var W=0,ee=-1,le=-1,ke=0,Fe=0,je=h,Pe=null;t:for(;;){for(var lt;je!==p||D!==0&&je.nodeType!==3||(ee=W+D),je!==M||C!==0&&je.nodeType!==3||(le=W+C),je.nodeType===3&&(W+=je.nodeValue.length),(lt=je.firstChild)!==null;)Pe=je,je=lt;for(;;){if(je===h)break t;if(Pe===p&&++ke===D&&(ee=W),Pe===M&&++Fe===C&&(le=W),(lt=je.nextSibling)!==null)break;je=Pe,Pe=je.parentNode}je=lt}p=ee===-1||le===-1?null:{start:ee,end:le}}else p=null}p=p||{start:0,end:0}}else p=null;for(B4={focusedElem:h,selectionRange:p},Lv=!1,ut=f;ut!==null;)if(f=ut,h=f.child,(f.subtreeFlags&1028)!==0&&h!==null)h.return=f,ut=h;else for(;ut!==null;){f=ut;try{var ft=f.alternate;if((f.flags&1024)!==0)switch(f.tag){case 0:case 11:case 15:break;case 1:if(ft!==null){var mt=ft.memoizedProps,Kn=ft.memoizedState,pe=f.stateNode,de=pe.getSnapshotBeforeUpdate(f.elementType===f.type?mt:Ma(f.type,mt),Kn);pe.__reactInternalSnapshotBeforeUpdate=de}break;case 3:var Ce=f.stateNode.containerInfo;Ce.nodeType===1?Ce.textContent="":Ce.nodeType===9&&Ce.documentElement&&Ce.removeChild(Ce.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Xe){On(f,f.return,Xe)}if(h=f.sibling,h!==null){h.return=f.return,ut=h;break}ut=f.return}return ft=YN,YN=!1,ft}function l0(h,f,p){var C=f.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var D=C=C.next;do{if((D.tag&h)===h){var M=D.destroy;D.destroy=void 0,M!==void 0&&kx(f,p,M)}D=D.next}while(D!==C)}}function ab(h,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var p=f=f.next;do{if((p.tag&h)===h){var C=p.create;p.destroy=C()}p=p.next}while(p!==f)}}function Lx(h){var f=h.ref;if(f!==null){var p=h.stateNode;switch(h.tag){case 5:h=p;break;default:h=p}typeof f=="function"?f(h):f.current=h}}function XN(h){var f=h.alternate;f!==null&&(h.alternate=null,XN(f)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(f=h.stateNode,f!==null&&(delete f[fl],delete f[Xp],delete f[H4],delete f[X$],delete f[Q$])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function QN(h){return h.tag===5||h.tag===3||h.tag===4}function JN(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||QN(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Dx(h,f,p){var C=h.tag;if(C===5||C===6)h=h.stateNode,f?p.nodeType===8?p.parentNode.insertBefore(h,f):p.insertBefore(h,f):(p.nodeType===8?(f=p.parentNode,f.insertBefore(h,p)):(f=p,f.appendChild(h)),p=p._reactRootContainer,p!=null||f.onclick!==null||(f.onclick=Bv));else if(C!==4&&(h=h.child,h!==null))for(Dx(h,f,p),h=h.sibling;h!==null;)Dx(h,f,p),h=h.sibling}function Ex(h,f,p){var C=h.tag;if(C===5||C===6)h=h.stateNode,f?p.insertBefore(h,f):p.appendChild(h);else if(C!==4&&(h=h.child,h!==null))for(Ex(h,f,p),h=h.sibling;h!==null;)Ex(h,f,p),h=h.sibling}var Ys=null,Ra=!1;function Ou(h,f,p){for(p=p.child;p!==null;)eI(h,f,p),p=p.sibling}function eI(h,f,p){if(Zs&&typeof Zs.onCommitFiberUnmount=="function")try{Zs.onCommitFiberUnmount(en,p)}catch{}switch(p.tag){case 5:mr||wg(p,f);case 6:var C=Ys,D=Ra;Ys=null,Ou(h,f,p),Ys=C,Ra=D,Ys!==null&&(Ra?(h=Ys,p=p.stateNode,h.nodeType===8?h.parentNode.removeChild(p):h.removeChild(p)):Ys.removeChild(p.stateNode));break;case 18:Ys!==null&&(Ra?(h=Ys,p=p.stateNode,h.nodeType===8?z4(h.parentNode,p):h.nodeType===1&&z4(h,p),Vp(h)):z4(Ys,p.stateNode));break;case 4:C=Ys,D=Ra,Ys=p.stateNode.containerInfo,Ra=!0,Ou(h,f,p),Ys=C,Ra=D;break;case 0:case 11:case 14:case 15:if(!mr&&(C=p.updateQueue,C!==null&&(C=C.lastEffect,C!==null))){D=C=C.next;do{var M=D,W=M.destroy;M=M.tag,W!==void 0&&((M&2)!==0||(M&4)!==0)&&kx(p,f,W),D=D.next}while(D!==C)}Ou(h,f,p);break;case 1:if(!mr&&(wg(p,f),C=p.stateNode,typeof C.componentWillUnmount=="function"))try{C.props=p.memoizedProps,C.state=p.memoizedState,C.componentWillUnmount()}catch(ee){On(p,f,ee)}Ou(h,f,p);break;case 21:Ou(h,f,p);break;case 22:p.mode&1?(mr=(C=mr)||p.memoizedState!==null,Ou(h,f,p),mr=C):Ou(h,f,p);break;default:Ou(h,f,p)}}function tI(h){var f=h.updateQueue;if(f!==null){h.updateQueue=null;var p=h.stateNode;p===null&&(p=h.stateNode=new gq),f.forEach(function(C){var D=xq.bind(null,h,C);p.has(C)||(p.add(C),C.then(D,D))})}}function Aa(h,f){var p=f.deletions;if(p!==null)for(var C=0;C<p.length;C++){var D=p[C];try{var M=h,W=f,ee=W;e:for(;ee!==null;){switch(ee.tag){case 5:Ys=ee.stateNode,Ra=!1;break e;case 3:Ys=ee.stateNode.containerInfo,Ra=!0;break e;case 4:Ys=ee.stateNode.containerInfo,Ra=!0;break e}ee=ee.return}if(Ys===null)throw Error(t(160));eI(M,W,D),Ys=null,Ra=!1;var le=D.alternate;le!==null&&(le.return=null),D.return=null}catch(ke){On(D,f,ke)}}if(f.subtreeFlags&12854)for(f=f.child;f!==null;)iI(f,h),f=f.sibling}function iI(h,f){var p=h.alternate,C=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(Aa(f,h),pl(h),C&4){try{l0(3,h,h.return),ab(3,h)}catch(mt){On(h,h.return,mt)}try{l0(5,h,h.return)}catch(mt){On(h,h.return,mt)}}break;case 1:Aa(f,h),pl(h),C&512&&p!==null&&wg(p,p.return);break;case 5:if(Aa(f,h),pl(h),C&512&&p!==null&&wg(p,p.return),h.flags&32){var D=h.stateNode;try{Ms(D,"")}catch(mt){On(h,h.return,mt)}}if(C&4&&(D=h.stateNode,D!=null)){var M=h.memoizedProps,W=p!==null?p.memoizedProps:M,ee=h.type,le=h.updateQueue;if(h.updateQueue=null,le!==null)try{ee==="input"&&M.type==="radio"&&M.name!=null&&Pn(D,M),Gs(ee,W);var ke=Gs(ee,M);for(W=0;W<le.length;W+=2){var Fe=le[W],je=le[W+1];Fe==="style"?Ji(D,je):Fe==="dangerouslySetInnerHTML"?ns(D,je):Fe==="children"?Ms(D,je):k(D,Fe,je,ke)}switch(ee){case"input":Es(D,M);break;case"textarea":Ns(D,M);break;case"select":var Pe=D._wrapperState.wasMultiple;D._wrapperState.wasMultiple=!!M.multiple;var lt=M.value;lt!=null?Lo(D,!!M.multiple,lt,!1):Pe!==!!M.multiple&&(M.defaultValue!=null?Lo(D,!!M.multiple,M.defaultValue,!0):Lo(D,!!M.multiple,M.multiple?[]:"",!1))}D[Xp]=M}catch(mt){On(h,h.return,mt)}}break;case 6:if(Aa(f,h),pl(h),C&4){if(h.stateNode===null)throw Error(t(162));D=h.stateNode,M=h.memoizedProps;try{D.nodeValue=M}catch(mt){On(h,h.return,mt)}}break;case 3:if(Aa(f,h),pl(h),C&4&&p!==null&&p.memoizedState.isDehydrated)try{Vp(f.containerInfo)}catch(mt){On(h,h.return,mt)}break;case 4:Aa(f,h),pl(h);break;case 13:Aa(f,h),pl(h),D=h.child,D.flags&8192&&(M=D.memoizedState!==null,D.stateNode.isHidden=M,!M||D.alternate!==null&&D.alternate.memoizedState!==null||(Ix=Wt())),C&4&&tI(h);break;case 22:if(Fe=p!==null&&p.memoizedState!==null,h.mode&1?(mr=(ke=mr)||Fe,Aa(f,h),mr=ke):Aa(f,h),pl(h),C&8192){if(ke=h.memoizedState!==null,(h.stateNode.isHidden=ke)&&!Fe&&(h.mode&1)!==0)for(ut=h,Fe=h.child;Fe!==null;){for(je=ut=Fe;ut!==null;){switch(Pe=ut,lt=Pe.child,Pe.tag){case 0:case 11:case 14:case 15:l0(4,Pe,Pe.return);break;case 1:wg(Pe,Pe.return);var ft=Pe.stateNode;if(typeof ft.componentWillUnmount=="function"){C=Pe,p=Pe.return;try{f=C,ft.props=f.memoizedProps,ft.state=f.memoizedState,ft.componentWillUnmount()}catch(mt){On(C,p,mt)}}break;case 5:wg(Pe,Pe.return);break;case 22:if(Pe.memoizedState!==null){rI(je);continue}}lt!==null?(lt.return=Pe,ut=lt):rI(je)}Fe=Fe.sibling}e:for(Fe=null,je=h;;){if(je.tag===5){if(Fe===null){Fe=je;try{D=je.stateNode,ke?(M=D.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none"):(ee=je.stateNode,le=je.memoizedProps.style,W=le!=null&&le.hasOwnProperty("display")?le.display:null,ee.style.display=qn("display",W))}catch(mt){On(h,h.return,mt)}}}else if(je.tag===6){if(Fe===null)try{je.stateNode.nodeValue=ke?"":je.memoizedProps}catch(mt){On(h,h.return,mt)}}else if((je.tag!==22&&je.tag!==23||je.memoizedState===null||je===h)&&je.child!==null){je.child.return=je,je=je.child;continue}if(je===h)break e;for(;je.sibling===null;){if(je.return===null||je.return===h)break e;Fe===je&&(Fe=null),je=je.return}Fe===je&&(Fe=null),je.sibling.return=je.return,je=je.sibling}}break;case 19:Aa(f,h),pl(h),C&4&&tI(h);break;case 21:break;default:Aa(f,h),pl(h)}}function pl(h){var f=h.flags;if(f&2){try{e:{for(var p=h.return;p!==null;){if(QN(p)){var C=p;break e}p=p.return}throw Error(t(160))}switch(C.tag){case 5:var D=C.stateNode;C.flags&32&&(Ms(D,""),C.flags&=-33);var M=JN(h);Ex(h,M,D);break;case 3:case 4:var W=C.stateNode.containerInfo,ee=JN(h);Dx(h,ee,W);break;default:throw Error(t(161))}}catch(le){On(h,h.return,le)}h.flags&=-3}f&4096&&(h.flags&=-4097)}function pq(h,f,p){ut=h,nI(h)}function nI(h,f,p){for(var C=(h.mode&1)!==0;ut!==null;){var D=ut,M=D.child;if(D.tag===22&&C){var W=D.memoizedState!==null||ob;if(!W){var ee=D.alternate,le=ee!==null&&ee.memoizedState!==null||mr;ee=ob;var ke=mr;if(ob=W,(mr=le)&&!ke)for(ut=D;ut!==null;)W=ut,le=W.child,W.tag===22&&W.memoizedState!==null?oI(D):le!==null?(le.return=W,ut=le):oI(D);for(;M!==null;)ut=M,nI(M),M=M.sibling;ut=D,ob=ee,mr=ke}sI(h)}else(D.subtreeFlags&8772)!==0&&M!==null?(M.return=D,ut=M):sI(h)}}function sI(h){for(;ut!==null;){var f=ut;if((f.flags&8772)!==0){var p=f.alternate;try{if((f.flags&8772)!==0)switch(f.tag){case 0:case 11:case 15:mr||ab(5,f);break;case 1:var C=f.stateNode;if(f.flags&4&&!mr)if(p===null)C.componentDidMount();else{var D=f.elementType===f.type?p.memoizedProps:Ma(f.type,p.memoizedProps);C.componentDidUpdate(D,p.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var M=f.updateQueue;M!==null&&rN(f,M,C);break;case 3:var W=f.updateQueue;if(W!==null){if(p=null,f.child!==null)switch(f.child.tag){case 5:p=f.child.stateNode;break;case 1:p=f.child.stateNode}rN(f,W,p)}break;case 5:var ee=f.stateNode;if(p===null&&f.flags&4){p=ee;var le=f.memoizedProps;switch(f.type){case"button":case"input":case"select":case"textarea":le.autoFocus&&p.focus();break;case"img":le.src&&(p.src=le.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(f.memoizedState===null){var ke=f.alternate;if(ke!==null){var Fe=ke.memoizedState;if(Fe!==null){var je=Fe.dehydrated;je!==null&&Vp(je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}mr||f.flags&512&&Lx(f)}catch(Pe){On(f,f.return,Pe)}}if(f===h){ut=null;break}if(p=f.sibling,p!==null){p.return=f.return,ut=p;break}ut=f.return}}function rI(h){for(;ut!==null;){var f=ut;if(f===h){ut=null;break}var p=f.sibling;if(p!==null){p.return=f.return,ut=p;break}ut=f.return}}function oI(h){for(;ut!==null;){var f=ut;try{switch(f.tag){case 0:case 11:case 15:var p=f.return;try{ab(4,f)}catch(le){On(f,p,le)}break;case 1:var C=f.stateNode;if(typeof C.componentDidMount=="function"){var D=f.return;try{C.componentDidMount()}catch(le){On(f,D,le)}}var M=f.return;try{Lx(f)}catch(le){On(f,M,le)}break;case 5:var W=f.return;try{Lx(f)}catch(le){On(f,W,le)}}}catch(le){On(f,f.return,le)}if(f===h){ut=null;break}var ee=f.sibling;if(ee!==null){ee.return=f.return,ut=ee;break}ut=f.return}}var _q=Math.ceil,lb=L.ReactCurrentDispatcher,Tx=L.ReactCurrentOwner,na=L.ReactCurrentBatchConfig,Mi=0,As=null,os=null,Xs=0,Mo=0,Cg=Iu(0),ws=0,c0=null,rd=0,cb=0,Nx=0,u0=null,so=null,Ix=0,yg=1/0,fc=null,ub=!1,Mx=null,Fu=null,hb=!1,Bu=null,db=0,h0=0,Rx=null,fb=-1,gb=0;function Ir(){return(Mi&6)!==0?Wt():fb!==-1?fb:fb=Wt()}function Wu(h){return(h.mode&1)===0?1:(Mi&2)!==0&&Xs!==0?Xs&-Xs:eq.transition!==null?(gb===0&&(gb=J9()),gb):(h=ji,h!==0||(h=window.event,h=h===void 0?16:lT(h.type)),h)}function Pa(h,f,p,C){if(50<h0)throw h0=0,Rx=null,Error(t(185));Pp(h,p,C),((Mi&2)===0||h!==As)&&(h===As&&((Mi&2)===0&&(cb|=p),ws===4&&Vu(h,Xs)),ro(h,C),p===1&&Mi===0&&(f.mode&1)===0&&(yg=Wt()+500,Hv&&Ru()))}function ro(h,f){var p=h.callbackNode;e$(h,f);var C=Sv(h,h===As?Xs:0);if(C===0)p!==null&&rt(p),h.callbackNode=null,h.callbackPriority=0;else if(f=C&-C,h.callbackPriority!==f){if(p!=null&&rt(p),f===1)h.tag===0?J$(lI.bind(null,h)):KT(lI.bind(null,h)),Z$(function(){(Mi&6)===0&&Ru()}),p=null;else{switch(eT(C)){case 1:p=rs;break;case 4:p=hr;break;case 16:p=mn;break;case 536870912:p=di;break;default:p=mn}p=pI(p,aI.bind(null,h))}h.callbackPriority=f,h.callbackNode=p}}function aI(h,f){if(fb=-1,gb=0,(Mi&6)!==0)throw Error(t(327));var p=h.callbackNode;if(Sg()&&h.callbackNode!==p)return null;var C=Sv(h,h===As?Xs:0);if(C===0)return null;if((C&30)!==0||(C&h.expiredLanes)!==0||f)f=mb(h,C);else{f=C;var D=Mi;Mi|=2;var M=uI();(As!==h||Xs!==f)&&(fc=null,yg=Wt()+500,ad(h,f));do try{wq();break}catch(ee){cI(h,ee)}while(!0);X4(),lb.current=M,Mi=D,os!==null?f=0:(As=null,Xs=0,f=ws)}if(f!==0){if(f===2&&(D=f4(h),D!==0&&(C=D,f=Ax(h,D))),f===1)throw p=c0,ad(h,0),Vu(h,C),ro(h,Wt()),p;if(f===6)Vu(h,C);else{if(D=h.current.alternate,(C&30)===0&&!vq(D)&&(f=mb(h,C),f===2&&(M=f4(h),M!==0&&(C=M,f=Ax(h,M))),f===1))throw p=c0,ad(h,0),Vu(h,C),ro(h,Wt()),p;switch(h.finishedWork=D,h.finishedLanes=C,f){case 0:case 1:throw Error(t(345));case 2:ld(h,so,fc);break;case 3:if(Vu(h,C),(C&130023424)===C&&(f=Ix+500-Wt(),10<f)){if(Sv(h,0)!==0)break;if(D=h.suspendedLanes,(D&C)!==C){Ir(),h.pingedLanes|=h.suspendedLanes&D;break}h.timeoutHandle=V4(ld.bind(null,h,so,fc),f);break}ld(h,so,fc);break;case 4:if(Vu(h,C),(C&4194240)===C)break;for(f=h.eventTimes,D=-1;0<C;){var W=31-Pi(C);M=1<<W,W=f[W],W>D&&(D=W),C&=~M}if(C=D,C=Wt()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*_q(C/1960))-C,10<C){h.timeoutHandle=V4(ld.bind(null,h,so,fc),C);break}ld(h,so,fc);break;case 5:ld(h,so,fc);break;default:throw Error(t(329))}}}return ro(h,Wt()),h.callbackNode===p?aI.bind(null,h):null}function Ax(h,f){var p=u0;return h.current.memoizedState.isDehydrated&&(ad(h,f).flags|=256),h=mb(h,f),h!==2&&(f=so,so=p,f!==null&&Px(f)),h}function Px(h){so===null?so=h:so.push.apply(so,h)}function vq(h){for(var f=h;;){if(f.flags&16384){var p=f.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var C=0;C<p.length;C++){var D=p[C],M=D.getSnapshot;D=D.value;try{if(!Na(M(),D))return!1}catch{return!1}}}if(p=f.child,f.subtreeFlags&16384&&p!==null)p.return=f,f=p;else{if(f===h)break;for(;f.sibling===null;){if(f.return===null||f.return===h)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Vu(h,f){for(f&=~Nx,f&=~cb,h.suspendedLanes|=f,h.pingedLanes&=~f,h=h.expirationTimes;0<f;){var p=31-Pi(f),C=1<<p;h[p]=-1,f&=~C}}function lI(h){if((Mi&6)!==0)throw Error(t(327));Sg();var f=Sv(h,0);if((f&1)===0)return ro(h,Wt()),null;var p=mb(h,f);if(h.tag!==0&&p===2){var C=f4(h);C!==0&&(f=C,p=Ax(h,C))}if(p===1)throw p=c0,ad(h,0),Vu(h,f),ro(h,Wt()),p;if(p===6)throw Error(t(345));return h.finishedWork=h.current.alternate,h.finishedLanes=f,ld(h,so,fc),ro(h,Wt()),null}function Ox(h,f){var p=Mi;Mi|=1;try{return h(f)}finally{Mi=p,Mi===0&&(yg=Wt()+500,Hv&&Ru())}}function od(h){Bu!==null&&Bu.tag===0&&(Mi&6)===0&&Sg();var f=Mi;Mi|=1;var p=na.transition,C=ji;try{if(na.transition=null,ji=1,h)return h()}finally{ji=C,na.transition=p,Mi=f,(Mi&6)===0&&Ru()}}function Fx(){Mo=Cg.current,_n(Cg)}function ad(h,f){h.finishedWork=null,h.finishedLanes=0;var p=h.timeoutHandle;if(p!==-1&&(h.timeoutHandle=-1,G$(p)),os!==null)for(p=os.return;p!==null;){var C=p;switch(q4(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&Vv();break;case 3:vg(),_n(to),_n(dr),rx();break;case 5:nx(C);break;case 4:vg();break;case 13:_n(xn);break;case 19:_n(xn);break;case 10:Q4(C.type._context);break;case 22:case 23:Fx()}p=p.return}if(As=h,os=h=zu(h.current,null),Xs=Mo=f,ws=0,c0=null,Nx=cb=rd=0,so=u0=null,id!==null){for(f=0;f<id.length;f++)if(p=id[f],C=p.interleaved,C!==null){p.interleaved=null;var D=C.next,M=p.pending;if(M!==null){var W=M.next;M.next=D,C.next=W}p.pending=C}id=null}return h}function cI(h,f){do{var p=os;try{if(X4(),Qv.current=ib,Jv){for(var C=kn.memoizedState;C!==null;){var D=C.queue;D!==null&&(D.pending=null),C=C.next}Jv=!1}if(sd=0,Rs=bs=kn=null,n0=!1,s0=0,Tx.current=null,p===null||p.return===null){ws=1,c0=f,os=null;break}e:{var M=h,W=p.return,ee=p,le=f;if(f=Xs,ee.flags|=32768,le!==null&&typeof le=="object"&&typeof le.then=="function"){var ke=le,Fe=ee,je=Fe.tag;if((Fe.mode&1)===0&&(je===0||je===11||je===15)){var Pe=Fe.alternate;Pe?(Fe.updateQueue=Pe.updateQueue,Fe.memoizedState=Pe.memoizedState,Fe.lanes=Pe.lanes):(Fe.updateQueue=null,Fe.memoizedState=null)}var lt=AN(W);if(lt!==null){lt.flags&=-257,PN(lt,W,ee,M,f),lt.mode&1&&RN(M,ke,f),f=lt,le=ke;var ft=f.updateQueue;if(ft===null){var mt=new Set;mt.add(le),f.updateQueue=mt}else ft.add(le);break e}else{if((f&1)===0){RN(M,ke,f),Bx();break e}le=Error(t(426))}}else if(bn&&ee.mode&1){var Kn=AN(W);if(Kn!==null){(Kn.flags&65536)===0&&(Kn.flags|=256),PN(Kn,W,ee,M,f),Z4(bg(le,ee));break e}}M=le=bg(le,ee),ws!==4&&(ws=2),u0===null?u0=[M]:u0.push(M),M=W;do{switch(M.tag){case 3:M.flags|=65536,f&=-f,M.lanes|=f;var pe=IN(M,le,f);sN(M,pe);break e;case 1:ee=le;var de=M.type,Ce=M.stateNode;if((M.flags&128)===0&&(typeof de.getDerivedStateFromError=="function"||Ce!==null&&typeof Ce.componentDidCatch=="function"&&(Fu===null||!Fu.has(Ce)))){M.flags|=65536,f&=-f,M.lanes|=f;var Xe=MN(M,ee,f);sN(M,Xe);break e}}M=M.return}while(M!==null)}dI(p)}catch(Ct){f=Ct,os===p&&p!==null&&(os=p=p.return);continue}break}while(!0)}function uI(){var h=lb.current;return lb.current=ib,h===null?ib:h}function Bx(){(ws===0||ws===3||ws===2)&&(ws=4),As===null||(rd&268435455)===0&&(cb&268435455)===0||Vu(As,Xs)}function mb(h,f){var p=Mi;Mi|=2;var C=uI();(As!==h||Xs!==f)&&(fc=null,ad(h,f));do try{bq();break}catch(D){cI(h,D)}while(!0);if(X4(),Mi=p,lb.current=C,os!==null)throw Error(t(261));return As=null,Xs=0,ws}function bq(){for(;os!==null;)hI(os)}function wq(){for(;os!==null&&!Di();)hI(os)}function hI(h){var f=mI(h.alternate,h,Mo);h.memoizedProps=h.pendingProps,f===null?dI(h):os=f,Tx.current=null}function dI(h){var f=h;do{var p=f.alternate;if(h=f.return,(f.flags&32768)===0){if(p=dq(p,f,Mo),p!==null){os=p;return}}else{if(p=fq(p,f),p!==null){p.flags&=32767,os=p;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{ws=6,os=null;return}}if(f=f.sibling,f!==null){os=f;return}os=f=h}while(f!==null);ws===0&&(ws=5)}function ld(h,f,p){var C=ji,D=na.transition;try{na.transition=null,ji=1,Cq(h,f,p,C)}finally{na.transition=D,ji=C}return null}function Cq(h,f,p,C){do Sg();while(Bu!==null);if((Mi&6)!==0)throw Error(t(327));p=h.finishedWork;var D=h.finishedLanes;if(p===null)return null;if(h.finishedWork=null,h.finishedLanes=0,p===h.current)throw Error(t(177));h.callbackNode=null,h.callbackPriority=0;var M=p.lanes|p.childLanes;if(t$(h,M),h===As&&(os=As=null,Xs=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||hb||(hb=!0,pI(mn,function(){return Sg(),null})),M=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||M){M=na.transition,na.transition=null;var W=ji;ji=1;var ee=Mi;Mi|=4,Tx.current=null,mq(h,p),iI(p,h),z$(B4),Lv=!!F4,B4=F4=null,h.current=p,pq(p),Ki(),Mi=ee,ji=W,na.transition=M}else h.current=p;if(hb&&(hb=!1,Bu=h,db=D),M=h.pendingLanes,M===0&&(Fu=null),Xh(p.stateNode),ro(h,Wt()),f!==null)for(C=h.onRecoverableError,p=0;p<f.length;p++)D=f[p],C(D.value,{componentStack:D.stack,digest:D.digest});if(ub)throw ub=!1,h=Mx,Mx=null,h;return(db&1)!==0&&h.tag!==0&&Sg(),M=h.pendingLanes,(M&1)!==0?h===Rx?h0++:(h0=0,Rx=h):h0=0,Ru(),null}function Sg(){if(Bu!==null){var h=eT(db),f=na.transition,p=ji;try{if(na.transition=null,ji=16>h?16:h,Bu===null)var C=!1;else{if(h=Bu,Bu=null,db=0,(Mi&6)!==0)throw Error(t(331));var D=Mi;for(Mi|=4,ut=h.current;ut!==null;){var M=ut,W=M.child;if((ut.flags&16)!==0){var ee=M.deletions;if(ee!==null){for(var le=0;le<ee.length;le++){var ke=ee[le];for(ut=ke;ut!==null;){var Fe=ut;switch(Fe.tag){case 0:case 11:case 15:l0(8,Fe,M)}var je=Fe.child;if(je!==null)je.return=Fe,ut=je;else for(;ut!==null;){Fe=ut;var Pe=Fe.sibling,lt=Fe.return;if(XN(Fe),Fe===ke){ut=null;break}if(Pe!==null){Pe.return=lt,ut=Pe;break}ut=lt}}}var ft=M.alternate;if(ft!==null){var mt=ft.child;if(mt!==null){ft.child=null;do{var Kn=mt.sibling;mt.sibling=null,mt=Kn}while(mt!==null)}}ut=M}}if((M.subtreeFlags&2064)!==0&&W!==null)W.return=M,ut=W;else e:for(;ut!==null;){if(M=ut,(M.flags&2048)!==0)switch(M.tag){case 0:case 11:case 15:l0(9,M,M.return)}var pe=M.sibling;if(pe!==null){pe.return=M.return,ut=pe;break e}ut=M.return}}var de=h.current;for(ut=de;ut!==null;){W=ut;var Ce=W.child;if((W.subtreeFlags&2064)!==0&&Ce!==null)Ce.return=W,ut=Ce;else e:for(W=de;ut!==null;){if(ee=ut,(ee.flags&2048)!==0)try{switch(ee.tag){case 0:case 11:case 15:ab(9,ee)}}catch(Ct){On(ee,ee.return,Ct)}if(ee===W){ut=null;break e}var Xe=ee.sibling;if(Xe!==null){Xe.return=ee.return,ut=Xe;break e}ut=ee.return}}if(Mi=D,Ru(),Zs&&typeof Zs.onPostCommitFiberRoot=="function")try{Zs.onPostCommitFiberRoot(en,h)}catch{}C=!0}return C}finally{ji=p,na.transition=f}}return!1}function fI(h,f,p){f=bg(p,f),f=IN(h,f,1),h=Pu(h,f,1),f=Ir(),h!==null&&(Pp(h,1,f),ro(h,f))}function On(h,f,p){if(h.tag===3)fI(h,h,p);else for(;f!==null;){if(f.tag===3){fI(f,h,p);break}else if(f.tag===1){var C=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(Fu===null||!Fu.has(C))){h=bg(p,h),h=MN(f,h,1),f=Pu(f,h,1),h=Ir(),f!==null&&(Pp(f,1,h),ro(f,h));break}}f=f.return}}function yq(h,f,p){var C=h.pingCache;C!==null&&C.delete(f),f=Ir(),h.pingedLanes|=h.suspendedLanes&p,As===h&&(Xs&p)===p&&(ws===4||ws===3&&(Xs&130023424)===Xs&&500>Wt()-Ix?ad(h,0):Nx|=p),ro(h,f)}function gI(h,f){f===0&&((h.mode&1)===0?f=1:(f=yv,yv<<=1,(yv&130023424)===0&&(yv=4194304)));var p=Ir();h=uc(h,f),h!==null&&(Pp(h,f,p),ro(h,p))}function Sq(h){var f=h.memoizedState,p=0;f!==null&&(p=f.retryLane),gI(h,p)}function xq(h,f){var p=0;switch(h.tag){case 13:var C=h.stateNode,D=h.memoizedState;D!==null&&(p=D.retryLane);break;case 19:C=h.stateNode;break;default:throw Error(t(314))}C!==null&&C.delete(f),gI(h,p)}var mI;mI=function(h,f,p){if(h!==null)if(h.memoizedProps!==f.pendingProps||to.current)no=!0;else{if((h.lanes&p)===0&&(f.flags&128)===0)return no=!1,hq(h,f,p);no=(h.flags&131072)!==0}else no=!1,bn&&(f.flags&1048576)!==0&&GT(f,Uv,f.index);switch(f.lanes=0,f.tag){case 2:var C=f.type;rb(h,f),h=f.pendingProps;var D=hg(f,dr.current);_g(f,p),D=lx(null,f,C,h,D,p);var M=cx();return f.flags|=1,typeof D=="object"&&D!==null&&typeof D.render=="function"&&D.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,io(C)?(M=!0,zv(f)):M=!1,f.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,tx(f),D.updater=nb,f.stateNode=D,D._reactInternals=f,mx(f,C,h,p),f=bx(null,f,C,!0,M,p)):(f.tag=0,bn&&M&&$4(f),Nr(null,f,D,p),f=f.child),f;case 16:C=f.elementType;e:{switch(rb(h,f),h=f.pendingProps,D=C._init,C=D(C._payload),f.type=C,D=f.tag=Lq(C),h=Ma(C,h),D){case 0:f=vx(null,f,C,h,p);break e;case 1:f=zN(null,f,C,h,p);break e;case 11:f=ON(null,f,C,h,p);break e;case 14:f=FN(null,f,C,Ma(C.type,h),p);break e}throw Error(t(306,C,""))}return f;case 0:return C=f.type,D=f.pendingProps,D=f.elementType===C?D:Ma(C,D),vx(h,f,C,D,p);case 1:return C=f.type,D=f.pendingProps,D=f.elementType===C?D:Ma(C,D),zN(h,f,C,D,p);case 3:e:{if(HN(f),h===null)throw Error(t(387));C=f.pendingProps,M=f.memoizedState,D=M.element,nN(h,f),Yv(f,C,null,p);var W=f.memoizedState;if(C=W.element,M.isDehydrated)if(M={element:C,isDehydrated:!1,cache:W.cache,pendingSuspenseBoundaries:W.pendingSuspenseBoundaries,transitions:W.transitions},f.updateQueue.baseState=M,f.memoizedState=M,f.flags&256){D=bg(Error(t(423)),f),f=jN(h,f,C,p,D);break e}else if(C!==D){D=bg(Error(t(424)),f),f=jN(h,f,C,p,D);break e}else for(Io=Nu(f.stateNode.containerInfo.firstChild),No=f,bn=!0,Ia=null,p=tN(f,null,C,p),f.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(gg(),C===D){f=dc(h,f,p);break e}Nr(h,f,C,p)}f=f.child}return f;case 5:return oN(f),h===null&&G4(f),C=f.type,D=f.pendingProps,M=h!==null?h.memoizedProps:null,W=D.children,W4(C,D)?W=null:M!==null&&W4(C,M)&&(f.flags|=32),VN(h,f),Nr(h,f,W,p),f.child;case 6:return h===null&&G4(f),null;case 13:return UN(h,f,p);case 4:return ix(f,f.stateNode.containerInfo),C=f.pendingProps,h===null?f.child=mg(f,null,C,p):Nr(h,f,C,p),f.child;case 11:return C=f.type,D=f.pendingProps,D=f.elementType===C?D:Ma(C,D),ON(h,f,C,D,p);case 7:return Nr(h,f,f.pendingProps,p),f.child;case 8:return Nr(h,f,f.pendingProps.children,p),f.child;case 12:return Nr(h,f,f.pendingProps.children,p),f.child;case 10:e:{if(C=f.type._context,D=f.pendingProps,M=f.memoizedProps,W=D.value,cn(Kv,C._currentValue),C._currentValue=W,M!==null)if(Na(M.value,W)){if(M.children===D.children&&!to.current){f=dc(h,f,p);break e}}else for(M=f.child,M!==null&&(M.return=f);M!==null;){var ee=M.dependencies;if(ee!==null){W=M.child;for(var le=ee.firstContext;le!==null;){if(le.context===C){if(M.tag===1){le=hc(-1,p&-p),le.tag=2;var ke=M.updateQueue;if(ke!==null){ke=ke.shared;var Fe=ke.pending;Fe===null?le.next=le:(le.next=Fe.next,Fe.next=le),ke.pending=le}}M.lanes|=p,le=M.alternate,le!==null&&(le.lanes|=p),J4(M.return,p,f),ee.lanes|=p;break}le=le.next}}else if(M.tag===10)W=M.type===f.type?null:M.child;else if(M.tag===18){if(W=M.return,W===null)throw Error(t(341));W.lanes|=p,ee=W.alternate,ee!==null&&(ee.lanes|=p),J4(W,p,f),W=M.sibling}else W=M.child;if(W!==null)W.return=M;else for(W=M;W!==null;){if(W===f){W=null;break}if(M=W.sibling,M!==null){M.return=W.return,W=M;break}W=W.return}M=W}Nr(h,f,D.children,p),f=f.child}return f;case 9:return D=f.type,C=f.pendingProps.children,_g(f,p),D=ta(D),C=C(D),f.flags|=1,Nr(h,f,C,p),f.child;case 14:return C=f.type,D=Ma(C,f.pendingProps),D=Ma(C.type,D),FN(h,f,C,D,p);case 15:return BN(h,f,f.type,f.pendingProps,p);case 17:return C=f.type,D=f.pendingProps,D=f.elementType===C?D:Ma(C,D),rb(h,f),f.tag=1,io(C)?(h=!0,zv(f)):h=!1,_g(f,p),TN(f,C,D),mx(f,C,D,p),bx(null,f,C,!0,h,p);case 19:return qN(h,f,p);case 22:return WN(h,f,p)}throw Error(t(156,f.tag))};function pI(h,f){return Me(h,f)}function kq(h,f,p,C){this.tag=h,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sa(h,f,p,C){return new kq(h,f,p,C)}function Wx(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Lq(h){if(typeof h=="function")return Wx(h)?1:0;if(h!=null){if(h=h.$$typeof,h===G)return 11;if(h===ue)return 14}return 2}function zu(h,f){var p=h.alternate;return p===null?(p=sa(h.tag,f,h.key,h.mode),p.elementType=h.elementType,p.type=h.type,p.stateNode=h.stateNode,p.alternate=h,h.alternate=p):(p.pendingProps=f,p.type=h.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=h.flags&14680064,p.childLanes=h.childLanes,p.lanes=h.lanes,p.child=h.child,p.memoizedProps=h.memoizedProps,p.memoizedState=h.memoizedState,p.updateQueue=h.updateQueue,f=h.dependencies,p.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},p.sibling=h.sibling,p.index=h.index,p.ref=h.ref,p}function pb(h,f,p,C,D,M){var W=2;if(C=h,typeof h=="function")Wx(h)&&(W=1);else if(typeof h=="string")W=5;else e:switch(h){case I:return cd(p.children,D,M,f);case O:W=8,D|=8;break;case F:return h=sa(12,p,f,D|2),h.elementType=F,h.lanes=M,h;case ie:return h=sa(13,p,f,D),h.elementType=ie,h.lanes=M,h;case Z:return h=sa(19,p,f,D),h.elementType=Z,h.lanes=M,h;case ye:return _b(p,D,M,f);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case J:W=10;break e;case Y:W=9;break e;case G:W=11;break e;case ue:W=14;break e;case be:W=16,C=null;break e}throw Error(t(130,h==null?h:typeof h,""))}return f=sa(W,p,f,D),f.elementType=h,f.type=C,f.lanes=M,f}function cd(h,f,p,C){return h=sa(7,h,C,f),h.lanes=p,h}function _b(h,f,p,C){return h=sa(22,h,C,f),h.elementType=ye,h.lanes=p,h.stateNode={isHidden:!1},h}function Vx(h,f,p){return h=sa(6,h,null,f),h.lanes=p,h}function zx(h,f,p){return f=sa(4,h.children!==null?h.children:[],h.key,f),f.lanes=p,f.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},f}function Dq(h,f,p,C,D){this.tag=f,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=g4(0),this.expirationTimes=g4(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=g4(0),this.identifierPrefix=C,this.onRecoverableError=D,this.mutableSourceEagerHydrationData=null}function Hx(h,f,p,C,D,M,W,ee,le){return h=new Dq(h,f,p,ee,le),f===1?(f=1,M===!0&&(f|=8)):f=0,M=sa(3,null,null,f),h.current=M,M.stateNode=h,M.memoizedState={element:C,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},tx(M),h}function Eq(h,f,p){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:C==null?null:""+C,children:h,containerInfo:f,implementation:p}}function _I(h){if(!h)return Mu;h=h._reactInternals;e:{if(qe(h)!==h||h.tag!==1)throw Error(t(170));var f=h;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(io(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(t(171))}if(h.tag===1){var p=h.type;if(io(p))return $T(h,p,f)}return f}function vI(h,f,p,C,D,M,W,ee,le){return h=Hx(p,C,!0,h,D,M,W,ee,le),h.context=_I(null),p=h.current,C=Ir(),D=Wu(p),M=hc(C,D),M.callback=f??null,Pu(p,M,D),h.current.lanes=D,Pp(h,D,C),ro(h,C),h}function vb(h,f,p,C){var D=f.current,M=Ir(),W=Wu(D);return p=_I(p),f.context===null?f.context=p:f.pendingContext=p,f=hc(M,W),f.payload={element:h},C=C===void 0?null:C,C!==null&&(f.callback=C),h=Pu(D,f,W),h!==null&&(Pa(h,D,W,M),Zv(h,D,W)),W}function bb(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return h.child.stateNode;default:return h.child.stateNode}}function bI(h,f){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var p=h.retryLane;h.retryLane=p!==0&&p<f?p:f}}function jx(h,f){bI(h,f),(h=h.alternate)&&bI(h,f)}function Tq(){return null}var wI=typeof reportError=="function"?reportError:function(h){console.error(h)};function Ux(h){this._internalRoot=h}wb.prototype.render=Ux.prototype.render=function(h){var f=this._internalRoot;if(f===null)throw Error(t(409));vb(h,f,null,null)},wb.prototype.unmount=Ux.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var f=h.containerInfo;od(function(){vb(null,h,null,null)}),f[oc]=null}};function wb(h){this._internalRoot=h}wb.prototype.unstable_scheduleHydration=function(h){if(h){var f=nT();h={blockedOn:null,target:h,priority:f};for(var p=0;p<Du.length&&f!==0&&f<Du[p].priority;p++);Du.splice(p,0,h),p===0&&oT(h)}};function $x(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function Cb(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function CI(){}function Nq(h,f,p,C,D){if(D){if(typeof C=="function"){var M=C;C=function(){var ke=bb(W);M.call(ke)}}var W=vI(f,C,h,0,null,!1,!1,"",CI);return h._reactRootContainer=W,h[oc]=W.current,Zp(h.nodeType===8?h.parentNode:h),od(),W}for(;D=h.lastChild;)h.removeChild(D);if(typeof C=="function"){var ee=C;C=function(){var ke=bb(le);ee.call(ke)}}var le=Hx(h,0,!1,null,null,!1,!1,"",CI);return h._reactRootContainer=le,h[oc]=le.current,Zp(h.nodeType===8?h.parentNode:h),od(function(){vb(f,le,p,C)}),le}function yb(h,f,p,C,D){var M=p._reactRootContainer;if(M){var W=M;if(typeof D=="function"){var ee=D;D=function(){var le=bb(W);ee.call(le)}}vb(f,W,h,D)}else W=Nq(p,f,h,D,C);return bb(W)}tT=function(h){switch(h.tag){case 3:var f=h.stateNode;if(f.current.memoizedState.isDehydrated){var p=Ap(f.pendingLanes);p!==0&&(m4(f,p|1),ro(f,Wt()),(Mi&6)===0&&(yg=Wt()+500,Ru()))}break;case 13:od(function(){var C=uc(h,1);if(C!==null){var D=Ir();Pa(C,h,1,D)}}),jx(h,1)}},p4=function(h){if(h.tag===13){var f=uc(h,134217728);if(f!==null){var p=Ir();Pa(f,h,134217728,p)}jx(h,134217728)}},iT=function(h){if(h.tag===13){var f=Wu(h),p=uc(h,f);if(p!==null){var C=Ir();Pa(p,h,f,C)}jx(h,f)}},nT=function(){return ji},sT=function(h,f){var p=ji;try{return ji=h,f()}finally{ji=p}},dl=function(h,f,p){switch(f){case"input":if(Es(h,p),f=p.name,p.type==="radio"&&f!=null){for(p=h;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<p.length;f++){var C=p[f];if(C!==h&&C.form===h.form){var D=Wv(C);if(!D)throw Error(t(90));Wi(C),Es(C,D)}}}break;case"textarea":Ns(h,p);break;case"select":f=p.value,f!=null&&Lo(h,!!p.multiple,f,!1)}},Ta=Ox,xt=od;var Iq={usingClientEntryPoint:!1,Events:[Qp,cg,Wv,nc,sc,Ox]},d0={findFiberByHostInstance:Qh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mq={bundleType:d0.bundleType,version:d0.version,rendererPackageName:d0.rendererPackageName,rendererConfig:d0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=Ye(h),h===null?null:h.stateNode},findFiberByHostInstance:d0.findFiberByHostInstance||Tq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sb.isDisabled&&Sb.supportsFiber)try{en=Sb.inject(Mq),Zs=Sb}catch{}}return oo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Iq,oo.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$x(f))throw Error(t(200));return Eq(h,f,null,p)},oo.createRoot=function(h,f){if(!$x(h))throw Error(t(299));var p=!1,C="",D=wI;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(C=f.identifierPrefix),f.onRecoverableError!==void 0&&(D=f.onRecoverableError)),f=Hx(h,1,!1,null,null,p,!1,C,D),h[oc]=f.current,Zp(h.nodeType===8?h.parentNode:h),new Ux(f)},oo.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var f=h._reactInternals;if(f===void 0)throw typeof h.render=="function"?Error(t(188)):(h=Object.keys(h).join(","),Error(t(268,h)));return h=Ye(f),h=h===null?null:h.stateNode,h},oo.flushSync=function(h){return od(h)},oo.hydrate=function(h,f,p){if(!Cb(f))throw Error(t(200));return yb(null,h,f,!0,p)},oo.hydrateRoot=function(h,f,p){if(!$x(h))throw Error(t(405));var C=p!=null&&p.hydratedSources||null,D=!1,M="",W=wI;if(p!=null&&(p.unstable_strictMode===!0&&(D=!0),p.identifierPrefix!==void 0&&(M=p.identifierPrefix),p.onRecoverableError!==void 0&&(W=p.onRecoverableError)),f=vI(f,null,h,1,p??null,D,!1,M,W),h[oc]=f.current,Zp(h),C)for(h=0;h<C.length;h++)p=C[h],D=p._getVersion,D=D(p._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[p,D]:f.mutableSourceEagerHydrationData.push(p,D);return new wb(f)},oo.render=function(h,f,p){if(!Cb(f))throw Error(t(200));return yb(null,h,f,!1,p)},oo.unmountComponentAtNode=function(h){if(!Cb(h))throw Error(t(40));return h._reactRootContainer?(od(function(){yb(null,null,h,!1,function(){h._reactRootContainer=null,h[oc]=null})}),!0):!1},oo.unstable_batchedUpdates=Ox,oo.unstable_renderSubtreeIntoContainer=function(h,f,p,C){if(!Cb(p))throw Error(t(200));if(h==null||h._reactInternals===void 0)throw Error(t(38));return yb(h,f,p,!1,C)},oo.version="18.3.1-next-f1338f8080-20240426",oo}var TI;function yB(){if(TI)return Gx.exports;TI=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Gx.exports=Hq(),Gx.exports}var NI;function jq(){if(NI)return xb;NI=1;var s=yB();return xb.createRoot=s.createRoot,xb.hydrateRoot=s.hydrateRoot,xb}var Uq=jq();const $q=VD(Uq);var SB=yB();const qq=VD(SB),Kq=CB({__proto__:null,default:qq},[SB]);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wn(){return wn=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},wn.apply(this,arguments)}var hs;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(hs||(hs={}));const II="popstate";function Gq(s){s===void 0&&(s={});function e(i,n){let{pathname:r,search:o,hash:a}=i.location;return K1("",{pathname:r,search:o,hash:a},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function t(i,n){return typeof n=="string"?n:yf(n)}return Yq(e,t,null,s)}function vi(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Km(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Zq(){return Math.random().toString(36).substr(2,8)}function MI(s,e){return{usr:s.state,key:s.key,idx:e}}function K1(s,e,t,i){return t===void 0&&(t=null),wn({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof e=="string"?Uh(e):e,{state:t,key:e&&e.key||i||Zq()})}function yf(s){let{pathname:e="/",search:t="",hash:i=""}=s;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Uh(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substr(t),s=s.substr(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substr(i),s=s.substr(0,i)),s&&(e.pathname=s)}return e}function Yq(s,e,t,i){i===void 0&&(i={});let{window:n=document.defaultView,v5Compat:r=!1}=i,o=n.history,a=hs.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(wn({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=hs.Pop;let w=u(),y=w==null?null:w-c;c=w,l&&l({action:a,location:v.location,delta:y})}function g(w,y){a=hs.Push;let S=K1(v.location,w,y);c=u()+1;let k=MI(S,c),L=v.createHref(S);try{o.pushState(k,"",L)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;n.location.assign(L)}r&&l&&l({action:a,location:v.location,delta:1})}function m(w,y){a=hs.Replace;let S=K1(v.location,w,y);c=u();let k=MI(S,c),L=v.createHref(S);o.replaceState(k,"",L),r&&l&&l({action:a,location:v.location,delta:0})}function _(w){let y=n.location.origin!=="null"?n.location.origin:n.location.href,S=typeof w=="string"?w:yf(w);return S=S.replace(/ $/,"%20"),vi(y,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,y)}let v={get action(){return a},get location(){return s(n,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(II,d),l=w,()=>{n.removeEventListener(II,d),l=null}},createHref(w){return e(n,w)},createURL:_,encodeLocation(w){let y=_(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:g,replace:m,go(w){return o.go(w)}};return v}var qi;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(qi||(qi={}));const Xq=new Set(["lazy","caseSensitive","path","id","index","children"]);function Qq(s){return s.index===!0}function lC(s,e,t,i){return t===void 0&&(t=[]),i===void 0&&(i={}),s.map((n,r)=>{let o=[...t,String(r)],a=typeof n.id=="string"?n.id:o.join("-");if(vi(n.index!==!0||!n.children,"Cannot specify children on an index route"),vi(!i[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),Qq(n)){let l=wn({},n,e(n),{id:a});return i[a]=l,l}else{let l=wn({},n,e(n),{id:a,children:void 0});return i[a]=l,n.children&&(l.children=lC(n.children,e,o,i)),l}})}function Td(s,e,t){return t===void 0&&(t="/"),Iw(s,e,t,!1)}function Iw(s,e,t,i){let n=typeof e=="string"?Uh(e):e,r=_p(n.pathname||"/",t);if(r==null)return null;let o=xB(s);eK(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=hK(r);a=cK(o[l],c,i)}return a}function Jq(s,e){let{route:t,pathname:i,params:n}=s;return{id:t.id,pathname:i,params:n,data:e[t.id],handle:t.handle}}function xB(s,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let n=(r,o,a)=>{let l={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};l.relativePath.startsWith("/")&&(vi(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Qc([i,l.relativePath]),u=t.concat(l);r.children&&r.children.length>0&&(vi(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),xB(r.children,e,u,c)),!(r.path==null&&!r.index)&&e.push({path:c,score:aK(c,r.index),routesMeta:u})};return s.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))n(r,o);else for(let l of kB(r.path))n(r,o,l)}),e}function kB(s){let e=s.split("/");if(e.length===0)return[];let[t,...i]=e,n=t.endsWith("?"),r=t.replace(/\?$/,"");if(i.length===0)return n?[r,""]:[r];let o=kB(i.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),n&&a.push(...o),a.map(l=>s.startsWith("/")&&l===""?"/":l)}function eK(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:lK(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const tK=/^:[\w-]+$/,iK=3,nK=2,sK=1,rK=10,oK=-2,RI=s=>s==="*";function aK(s,e){let t=s.split("/"),i=t.length;return t.some(RI)&&(i+=oK),e&&(i+=nK),t.filter(n=>!RI(n)).reduce((n,r)=>n+(tK.test(r)?iK:r===""?sK:rK),i)}function lK(s,e){return s.length===e.length&&s.slice(0,-1).every((i,n)=>i===e[n])?s[s.length-1]-e[e.length-1]:0}function cK(s,e,t){t===void 0&&(t=!1);let{routesMeta:i}=s,n={},r="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,u=r==="/"?e:e.slice(r.length)||"/",d=AI({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),g=l.route;if(!d&&c&&t&&!i[i.length-1].route.index&&(d=AI({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(n,d.params),o.push({params:n,pathname:Qc([r,d.pathname]),pathnameBase:gK(Qc([r,d.pathnameBase])),route:g}),d.pathnameBase!=="/"&&(r=Qc([r,d.pathnameBase]))}return o}function AI(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=uK(s.path,s.caseSensitive,s.end),n=e.match(t);if(!n)return null;let r=n[0],o=r.replace(/(.)\/+$/,"$1"),a=n.slice(1);return{params:i.reduce((c,u,d)=>{let{paramName:g,isOptional:m}=u;if(g==="*"){let v=a[d]||"";o=r.slice(0,r.length-v.length).replace(/(.)\/+$/,"$1")}const _=a[d];return m&&!_?c[g]=void 0:c[g]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:o,pattern:s}}function uK(s,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Km(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let i=[],n="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(i.push({paramName:"*"}),n+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":s!==""&&s!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),i]}function hK(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Km(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),s}}function _p(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}function dK(s,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:n=""}=typeof s=="string"?Uh(s):s;return{pathname:t?t.startsWith("/")?t:fK(t,e):e,search:mK(i),hash:pK(n)}}function fK(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(n=>{n===".."?t.length>1&&t.pop():n!=="."&&t.push(n)}),t.length>1?t.join("/"):"/"}function Xx(s,e,t,i){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LB(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function HD(s,e){let t=LB(s);return e?t.map((i,n)=>n===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function jD(s,e,t,i){i===void 0&&(i=!1);let n;typeof s=="string"?n=Uh(s):(n=wn({},s),vi(!n.pathname||!n.pathname.includes("?"),Xx("?","pathname","search",n)),vi(!n.pathname||!n.pathname.includes("#"),Xx("#","pathname","hash",n)),vi(!n.search||!n.search.includes("#"),Xx("#","search","hash",n)));let r=s===""||n.pathname==="",o=r?"/":n.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!i&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),d-=1;n.pathname=g.join("/")}a=d>=0?e[d]:"/"}let l=dK(n,a),c=o&&o!=="/"&&o.endsWith("/"),u=(r||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Qc=s=>s.join("/").replace(/\/\/+/g,"/"),gK=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),mK=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,pK=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;class cC{constructor(e,t,i,n){n===void 0&&(n=!1),this.status=e,this.statusText=t||"",this.internal=n,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function G1(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const DB=["post","put","patch","delete"],_K=new Set(DB),vK=["get",...DB],bK=new Set(vK),wK=new Set([301,302,303,307,308]),CK=new Set([307,308]),Qx={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},yK={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},g0={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},UD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SK=s=>({hasErrorBoundary:!!s.hasErrorBoundary}),EB="remix-router-transitions";function xK(s){const e=s.window?s.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",i=!t;vi(s.routes.length>0,"You must provide a non-empty routes array to createRouter");let n;if(s.mapRouteProperties)n=s.mapRouteProperties;else if(s.detectErrorBoundary){let P=s.detectErrorBoundary;n=z=>({hasErrorBoundary:P(z)})}else n=SK;let r={},o=lC(s.routes,n,void 0,r),a,l=s.basename||"/",c=s.dataStrategy||EK,u=s.patchRoutesOnNavigation,d=wn({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},s.future),g=null,m=new Set,_=null,v=null,w=null,y=s.hydrationData!=null,S=Td(o,s.history.location,l),k=!1,L=null;if(S==null&&!u){let P=co(404,{pathname:s.history.location.pathname}),{matches:z,route:q}=$I(o);S=z,L={[q.id]:P}}S&&!s.hydrationData&&xt(S,o,s.history.location.pathname).active&&(S=null);let T;if(S)if(S.some(P=>P.route.lazy))T=!1;else if(!S.some(P=>P.route.loader))T=!0;else if(d.v7_partialHydration){let P=s.hydrationData?s.hydrationData.loaderData:null,z=s.hydrationData?s.hydrationData.errors:null;if(z){let q=S.findIndex(se=>z[se.route.id]!==void 0);T=S.slice(0,q+1).every(se=>!jL(se.route,P,z))}else T=S.every(q=>!jL(q.route,P,z))}else T=s.hydrationData!=null;else if(T=!1,S=[],d.v7_partialHydration){let P=xt(null,o,s.history.location.pathname);P.active&&P.matches&&(k=!0,S=P.matches)}let A,I={historyAction:s.history.action,location:s.history.location,matches:S,initialized:T,navigation:Qx,restoreScrollPosition:s.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:s.hydrationData&&s.hydrationData.loaderData||{},actionData:s.hydrationData&&s.hydrationData.actionData||null,errors:s.hydrationData&&s.hydrationData.errors||L,fetchers:new Map,blockers:new Map},O=hs.Pop,F=!1,J,Y=!1,G=new Map,ie=null,Z=!1,ue=!1,be=[],ye=new Set,ae=new Map,xe=0,fe=-1,X=new Map,me=new Set,ze=new Map,it=new Map,He=new Set,st=new Map,gt=new Map,St;function Lt(){if(g=s.history.listen(P=>{let{action:z,location:q,delta:se}=P;if(St){St(),St=void 0;return}Km(gt.size===0||se!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let _e=dl({currentLocation:I.location,nextLocation:q,historyAction:z});if(_e&&se!=null){let De=new Promise(Re=>{St=Re});s.history.go(se*-1),ur(_e,{state:"blocked",location:q,proceed(){ur(_e,{state:"proceeding",proceed:void 0,reset:void 0,location:q}),De.then(()=>s.history.go(se))},reset(){let Re=new Map(I.blockers);Re.set(_e,g0),Wi({blockers:Re})}});return}return Pn(z,q)}),t){HK(e,G);let P=()=>jK(e,G);e.addEventListener("pagehide",P),ie=()=>e.removeEventListener("pagehide",P)}return I.initialized||Pn(hs.Pop,I.location,{initialHydration:!0}),A}function ci(){g&&g(),ie&&ie(),m.clear(),J&&J.abort(),I.fetchers.forEach((P,z)=>fn(z)),I.blockers.forEach((P,z)=>ui(z))}function qs(P){return m.add(P),()=>m.delete(P)}function Wi(P,z){z===void 0&&(z={}),I=wn({},I,P);let q=[],se=[];d.v7_fetcherPersist&&I.fetchers.forEach((_e,De)=>{_e.state==="idle"&&(He.has(De)?se.push(De):q.push(De))}),He.forEach(_e=>{!I.fetchers.has(_e)&&!ae.has(_e)&&se.push(_e)}),[...m].forEach(_e=>_e(I,{deletedFetchers:se,viewTransitionOpts:z.viewTransitionOpts,flushSync:z.flushSync===!0})),d.v7_fetcherPersist?(q.forEach(_e=>I.fetchers.delete(_e)),se.forEach(_e=>fn(_e))):se.forEach(_e=>He.delete(_e))}function Sn(P,z,q){var se,_e;let{flushSync:De}=q===void 0?{}:q,Re=I.actionData!=null&&I.navigation.formMethod!=null&&Ua(I.navigation.formMethod)&&I.navigation.state==="loading"&&((se=P.state)==null?void 0:se._isRedirect)!==!0,Ae;z.actionData?Object.keys(z.actionData).length>0?Ae=z.actionData:Ae=null:Re?Ae=I.actionData:Ae=null;let We=z.loaderData?jI(I.loaderData,z.loaderData,z.matches||[],z.errors):I.loaderData,Ze=I.blockers;Ze.size>0&&(Ze=new Map(Ze),Ze.forEach((Ft,gn)=>Ze.set(gn,g0)));let qe=F===!0||I.navigation.formMethod!=null&&Ua(I.navigation.formMethod)&&((_e=P.state)==null?void 0:_e._isRedirect)!==!0;a&&(o=a,a=void 0),Z||O===hs.Pop||(O===hs.Push?s.history.push(P,P.state):O===hs.Replace&&s.history.replace(P,P.state));let wt;if(O===hs.Pop){let Ft=G.get(I.location.pathname);Ft&&Ft.has(P.pathname)?wt={currentLocation:I.location,nextLocation:P}:G.has(P.pathname)&&(wt={currentLocation:P,nextLocation:I.location})}else if(Y){let Ft=G.get(I.location.pathname);Ft?Ft.add(P.pathname):(Ft=new Set([P.pathname]),G.set(I.location.pathname,Ft)),wt={currentLocation:I.location,nextLocation:P}}Wi(wn({},z,{actionData:Ae,loaderData:We,historyAction:O,location:P,initialized:!0,navigation:Qx,revalidation:"idle",restoreScrollPosition:Ta(P,z.matches||I.matches),preventScrollReset:qe,blockers:Ze}),{viewTransitionOpts:wt,flushSync:De===!0}),O=hs.Pop,F=!1,Y=!1,Z=!1,ue=!1,be=[]}async function dn(P,z){if(typeof P=="number"){s.history.go(P);return}let q=HL(I.location,I.matches,l,d.v7_prependBasename,P,d.v7_relativeSplatPath,z?.fromRouteId,z?.relative),{path:se,submission:_e,error:De}=PI(d.v7_normalizeFormMethod,!1,q,z),Re=I.location,Ae=K1(I.location,se,z&&z.state);Ae=wn({},Ae,s.history.encodeLocation(Ae));let We=z&&z.replace!=null?z.replace:void 0,Ze=hs.Push;We===!0?Ze=hs.Replace:We===!1||_e!=null&&Ua(_e.formMethod)&&_e.formAction===I.location.pathname+I.location.search&&(Ze=hs.Replace);let qe=z&&"preventScrollReset"in z?z.preventScrollReset===!0:void 0,wt=(z&&z.flushSync)===!0,Ft=dl({currentLocation:Re,nextLocation:Ae,historyAction:Ze});if(Ft){ur(Ft,{state:"blocked",location:Ae,proceed(){ur(Ft,{state:"proceeding",proceed:void 0,reset:void 0,location:Ae}),dn(P,z)},reset(){let gn=new Map(I.blockers);gn.set(Ft,g0),Wi({blockers:gn})}});return}return await Pn(Ze,Ae,{submission:_e,pendingError:De,preventScrollReset:qe,replace:z&&z.replace,enableViewTransition:z&&z.viewTransition,flushSync:wt})}function Er(){if(Qr(),Wi({revalidation:"loading"}),I.navigation.state!=="submitting"){if(I.navigation.state==="idle"){Pn(I.historyAction,I.location,{startUninterruptedRevalidation:!0});return}Pn(O||I.historyAction,I.navigation.location,{overrideNavigation:I.navigation,enableViewTransition:Y===!0})}}async function Pn(P,z,q){J&&J.abort(),J=null,O=P,Z=(q&&q.startUninterruptedRevalidation)===!0,sc(I.location,I.matches),F=(q&&q.preventScrollReset)===!0,Y=(q&&q.enableViewTransition)===!0;let se=a||o,_e=q&&q.overrideNavigation,De=q!=null&&q.initialHydration&&I.matches&&I.matches.length>0&&!k?I.matches:Td(se,z,l),Re=(q&&q.flushSync)===!0;if(De&&I.initialized&&!ue&&AK(I.location,z)&&!(q&&q.submission&&Ua(q.submission.formMethod))){Sn(z,{matches:De},{flushSync:Re});return}let Ae=xt(De,se,z.pathname);if(Ae.active&&Ae.matches&&(De=Ae.matches),!De){let{error:Ye,notFoundMatches:oe,route:Me}=eo(z.pathname);Sn(z,{matches:oe,loaderData:{},errors:{[Me.id]:Ye}},{flushSync:Re});return}J=new AbortController;let We=xg(s.history,z,J.signal,q&&q.submission),Ze;if(q&&q.pendingError)Ze=[Nd(De).route.id,{type:qi.error,error:q.pendingError}];else if(q&&q.submission&&Ua(q.submission.formMethod)){let Ye=await Es(We,z,q.submission,De,Ae.active,{replace:q.replace,flushSync:Re});if(Ye.shortCircuited)return;if(Ye.pendingActionResult){let[oe,Me]=Ye.pendingActionResult;if(Bo(Me)&&G1(Me.error)&&Me.error.status===404){J=null,Sn(z,{matches:Ye.matches,loaderData:{},errors:{[oe]:Me.error}});return}}De=Ye.matches||De,Ze=Ye.pendingActionResult,_e=Jx(z,q.submission),Re=!1,Ae.active=!1,We=xg(s.history,We.url,We.signal)}let{shortCircuited:qe,matches:wt,loaderData:Ft,errors:gn}=await cr(We,z,De,Ae.active,_e,q&&q.submission,q&&q.fetcherSubmission,q&&q.replace,q&&q.initialHydration===!0,Re,Ze);qe||(J=null,Sn(z,wn({matches:wt||De},UI(Ze),{loaderData:Ft,errors:gn})))}async function Es(P,z,q,se,_e,De){De===void 0&&(De={}),Qr();let Re=VK(z,q);if(Wi({navigation:Re},{flushSync:De.flushSync===!0}),_e){let Ze=await H(se,z.pathname,P.signal);if(Ze.type==="aborted")return{shortCircuited:!0};if(Ze.type==="error"){let qe=Nd(Ze.partialMatches).route.id;return{matches:Ze.partialMatches,pendingActionResult:[qe,{type:qi.error,error:Ze.error}]}}else if(Ze.matches)se=Ze.matches;else{let{notFoundMatches:qe,error:wt,route:Ft}=eo(z.pathname);return{matches:qe,pendingActionResult:[Ft.id,{type:qi.error,error:wt}]}}}let Ae,We=V0(se,z);if(!We.route.action&&!We.route.lazy)Ae={type:qi.error,error:co(405,{method:P.method,pathname:z.pathname,routeId:We.route.id})};else if(Ae=(await vs("action",I,P,[We],se,null))[We.route.id],P.signal.aborted)return{shortCircuited:!0};if(Yd(Ae)){let Ze;return De&&De.replace!=null?Ze=De.replace:Ze=VI(Ae.response.headers.get("Location"),new URL(P.url),l)===I.location.pathname+I.location.search,await Ns(P,Ae,!0,{submission:q,replace:Ze}),{shortCircuited:!0}}if(fh(Ae))throw co(400,{type:"defer-action"});if(Bo(Ae)){let Ze=Nd(se,We.route.id);return(De&&De.replace)!==!0&&(O=hs.Push),{matches:se,pendingActionResult:[Ze.route.id,Ae]}}return{matches:se,pendingActionResult:[We.route.id,Ae]}}async function cr(P,z,q,se,_e,De,Re,Ae,We,Ze,qe){let wt=_e||Jx(z,De),Ft=De||Re||KI(wt),gn=!Z&&(!d.v7_partialHydration||!We);if(se){if(gn){let en=Ts(qe);Wi(wn({navigation:wt},en!==void 0?{actionData:en}:{}),{flushSync:Ze})}let di=await H(q,z.pathname,P.signal);if(di.type==="aborted")return{shortCircuited:!0};if(di.type==="error"){let en=Nd(di.partialMatches).route.id;return{matches:di.partialMatches,loaderData:{},errors:{[en]:di.error}}}else if(di.matches)q=di.matches;else{let{error:en,notFoundMatches:Zs,route:Xh}=eo(z.pathname);return{matches:Zs,loaderData:{},errors:{[Xh.id]:en}}}}let Ye=a||o,[oe,Me]=FI(s.history,I,q,Ft,z,d.v7_partialHydration&&We===!0,d.v7_skipActionErrorRevalidation,ue,be,ye,He,ze,me,Ye,l,qe);if(Vi(di=>!(q&&q.some(en=>en.route.id===di))||oe&&oe.some(en=>en.route.id===di)),fe=++xe,oe.length===0&&Me.length===0){let di=Ks();return Sn(z,wn({matches:q,loaderData:{},errors:qe&&Bo(qe[1])?{[qe[0]]:qe[1].error}:null},UI(qe),di?{fetchers:new Map(I.fetchers)}:{}),{flushSync:Ze}),{shortCircuited:!0}}if(gn){let di={};if(!se){di.navigation=wt;let en=Ts(qe);en!==void 0&&(di.actionData=en)}Me.length>0&&(di.fetchers=Tr(Me)),Wi(di,{flushSync:Ze})}Me.forEach(di=>{qn(di.key),di.controller&&ae.set(di.key,di.controller)});let rt=()=>Me.forEach(di=>qn(di.key));J&&J.signal.addEventListener("abort",rt);let{loaderResults:Di,fetcherResults:Ki}=await Xr(I,q,oe,Me,P);if(P.signal.aborted)return{shortCircuited:!0};J&&J.signal.removeEventListener("abort",rt),Me.forEach(di=>ae.delete(di.key));let Wt=kb(Di);if(Wt)return await Ns(P,Wt.result,!0,{replace:Ae}),{shortCircuited:!0};if(Wt=kb(Ki),Wt)return me.add(Wt.key),await Ns(P,Wt.result,!0,{replace:Ae}),{shortCircuited:!0};let{loaderData:ss,errors:rs}=HI(I,q,Di,qe,Me,Ki,st);st.forEach((di,en)=>{di.subscribe(Zs=>{(Zs||di.done)&&st.delete(en)})}),d.v7_partialHydration&&We&&I.errors&&(rs=wn({},I.errors,rs));let hr=Ks(),mn=Do(fe),rc=hr||mn||Me.length>0;return wn({matches:q,loaderData:ss,errors:rs},rc?{fetchers:new Map(I.fetchers)}:{})}function Ts(P){if(P&&!Bo(P[1]))return{[P[0]]:P[1].data};if(I.actionData)return Object.keys(I.actionData).length===0?null:I.actionData}function Tr(P){return P.forEach(z=>{let q=I.fetchers.get(z.key),se=m0(void 0,q?q.data:void 0);I.fetchers.set(z.key,se)}),new Map(I.fetchers)}function Lo(P,z,q,se){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");qn(P);let _e=(se&&se.flushSync)===!0,De=a||o,Re=HL(I.location,I.matches,l,d.v7_prependBasename,q,d.v7_relativeSplatPath,z,se?.relative),Ae=Td(De,Re,l),We=xt(Ae,De,Re);if(We.active&&We.matches&&(Ae=We.matches),!Ae){ns(P,z,co(404,{pathname:Re}),{flushSync:_e});return}let{path:Ze,submission:qe,error:wt}=PI(d.v7_normalizeFormMethod,!0,Re,se);if(wt){ns(P,z,wt,{flushSync:_e});return}let Ft=V0(Ae,Ze),gn=(se&&se.preventScrollReset)===!0;if(qe&&Ua(qe.formMethod)){hl(P,z,Ze,Ft,Ae,We.active,_e,gn,qe);return}ze.set(P,{routeId:z,path:Ze}),Ea(P,z,Ze,Ft,Ae,We.active,_e,gn,qe)}async function hl(P,z,q,se,_e,De,Re,Ae,We){Qr(),ze.delete(P);function Ze(Pi){if(!Pi.route.action&&!Pi.route.lazy){let Su=co(405,{method:We.formMethod,pathname:q,routeId:z});return ns(P,z,Su,{flushSync:Re}),!0}return!1}if(!De&&Ze(se))return;let qe=I.fetchers.get(P);Is(P,zK(We,qe),{flushSync:Re});let wt=new AbortController,Ft=xg(s.history,q,wt.signal,We);if(De){let Pi=await H(_e,new URL(Ft.url).pathname,Ft.signal,P);if(Pi.type==="aborted")return;if(Pi.type==="error"){ns(P,z,Pi.error,{flushSync:Re});return}else if(Pi.matches){if(_e=Pi.matches,se=V0(_e,q),Ze(se))return}else{ns(P,z,co(404,{pathname:q}),{flushSync:Re});return}}ae.set(P,wt);let gn=xe,oe=(await vs("action",I,Ft,[se],_e,P))[se.route.id];if(Ft.signal.aborted){ae.get(P)===wt&&ae.delete(P);return}if(d.v7_fetcherPersist&&He.has(P)){if(Yd(oe)||Bo(oe)){Is(P,Zu(void 0));return}}else{if(Yd(oe))if(ae.delete(P),fe>gn){Is(P,Zu(void 0));return}else return me.add(P),Is(P,m0(We)),Ns(Ft,oe,!1,{fetcherSubmission:We,preventScrollReset:Ae});if(Bo(oe)){ns(P,z,oe.error);return}}if(fh(oe))throw co(400,{type:"defer-action"});let Me=I.navigation.location||I.location,rt=xg(s.history,Me,wt.signal),Di=a||o,Ki=I.navigation.state!=="idle"?Td(Di,I.navigation.location,l):I.matches;vi(Ki,"Didn't find any matches after fetcher action");let Wt=++xe;X.set(P,Wt);let ss=m0(We,oe.data);I.fetchers.set(P,ss);let[rs,hr]=FI(s.history,I,Ki,We,Me,!1,d.v7_skipActionErrorRevalidation,ue,be,ye,He,ze,me,Di,l,[se.route.id,oe]);hr.filter(Pi=>Pi.key!==P).forEach(Pi=>{let Su=Pi.key,wv=I.fetchers.get(Su),d4=m0(void 0,wv?wv.data:void 0);I.fetchers.set(Su,d4),qn(Su),Pi.controller&&ae.set(Su,Pi.controller)}),Wi({fetchers:new Map(I.fetchers)});let mn=()=>hr.forEach(Pi=>qn(Pi.key));wt.signal.addEventListener("abort",mn);let{loaderResults:rc,fetcherResults:di}=await Xr(I,Ki,rs,hr,rt);if(wt.signal.aborted)return;wt.signal.removeEventListener("abort",mn),X.delete(P),ae.delete(P),hr.forEach(Pi=>ae.delete(Pi.key));let en=kb(rc);if(en)return Ns(rt,en.result,!1,{preventScrollReset:Ae});if(en=kb(di),en)return me.add(en.key),Ns(rt,en.result,!1,{preventScrollReset:Ae});let{loaderData:Zs,errors:Xh}=HI(I,Ki,rc,void 0,hr,di,st);if(I.fetchers.has(P)){let Pi=Zu(oe.data);I.fetchers.set(P,Pi)}Do(Wt),I.navigation.state==="loading"&&Wt>fe?(vi(O,"Expected pending action"),J&&J.abort(),Sn(I.navigation.location,{matches:Ki,loaderData:Zs,errors:Xh,fetchers:new Map(I.fetchers)})):(Wi({errors:Xh,loaderData:jI(I.loaderData,Zs,Ki,Xh),fetchers:new Map(I.fetchers)}),ue=!1)}async function Ea(P,z,q,se,_e,De,Re,Ae,We){let Ze=I.fetchers.get(P);Is(P,m0(We,Ze?Ze.data:void 0),{flushSync:Re});let qe=new AbortController,wt=xg(s.history,q,qe.signal);if(De){let oe=await H(_e,new URL(wt.url).pathname,wt.signal,P);if(oe.type==="aborted")return;if(oe.type==="error"){ns(P,z,oe.error,{flushSync:Re});return}else if(oe.matches)_e=oe.matches,se=V0(_e,q);else{ns(P,z,co(404,{pathname:q}),{flushSync:Re});return}}ae.set(P,qe);let Ft=xe,Ye=(await vs("loader",I,wt,[se],_e,P))[se.route.id];if(fh(Ye)&&(Ye=await $D(Ye,wt.signal,!0)||Ye),ae.get(P)===qe&&ae.delete(P),!wt.signal.aborted){if(He.has(P)){Is(P,Zu(void 0));return}if(Yd(Ye))if(fe>Ft){Is(P,Zu(void 0));return}else{me.add(P),await Ns(wt,Ye,!1,{preventScrollReset:Ae});return}if(Bo(Ye)){ns(P,z,Ye.error);return}vi(!fh(Ye),"Unhandled fetcher deferred data"),Is(P,Zu(Ye.data))}}async function Ns(P,z,q,se){let{submission:_e,fetcherSubmission:De,preventScrollReset:Re,replace:Ae}=se===void 0?{}:se;z.response.headers.has("X-Remix-Revalidate")&&(ue=!0);let We=z.response.headers.get("Location");vi(We,"Expected a Location header on the redirect Response"),We=VI(We,new URL(P.url),l);let Ze=K1(I.location,We,{_isRedirect:!0});if(t){let oe=!1;if(z.response.headers.has("X-Remix-Reload-Document"))oe=!0;else if(UD.test(We)){const Me=s.history.createURL(We);oe=Me.origin!==e.location.origin||_p(Me.pathname,l)==null}if(oe){Ae?e.location.replace(We):e.location.assign(We);return}}J=null;let qe=Ae===!0||z.response.headers.has("X-Remix-Replace")?hs.Replace:hs.Push,{formMethod:wt,formAction:Ft,formEncType:gn}=I.navigation;!_e&&!De&&wt&&Ft&&gn&&(_e=KI(I.navigation));let Ye=_e||De;if(CK.has(z.response.status)&&Ye&&Ua(Ye.formMethod))await Pn(qe,Ze,{submission:wn({},Ye,{formAction:We}),preventScrollReset:Re||F,enableViewTransition:q?Y:void 0});else{let oe=Jx(Ze,_e);await Pn(qe,Ze,{overrideNavigation:oe,fetcherSubmission:De,preventScrollReset:Re||F,enableViewTransition:q?Y:void 0})}}async function vs(P,z,q,se,_e,De){let Re,Ae={};try{Re=await TK(c,P,z,q,se,_e,De,r,n)}catch(We){return se.forEach(Ze=>{Ae[Ze.route.id]={type:qi.error,error:We}}),Ae}for(let[We,Ze]of Object.entries(Re))if(PK(Ze)){let qe=Ze.result;Ae[We]={type:qi.redirect,response:MK(qe,q,We,_e,l,d.v7_relativeSplatPath)}}else Ae[We]=await IK(Ze);return Ae}async function Xr(P,z,q,se,_e){let De=P.matches,Re=vs("loader",P,_e,q,z,null),Ae=Promise.all(se.map(async qe=>{if(qe.matches&&qe.match&&qe.controller){let Ft=(await vs("loader",P,xg(s.history,qe.path,qe.controller.signal),[qe.match],qe.matches,qe.key))[qe.match.route.id];return{[qe.key]:Ft}}else return Promise.resolve({[qe.key]:{type:qi.error,error:co(404,{pathname:qe.path})}})})),We=await Re,Ze=(await Ae).reduce((qe,wt)=>Object.assign(qe,wt),{});return await Promise.all([BK(z,We,_e.signal,De,P.loaderData),WK(z,Ze,se)]),{loaderResults:We,fetcherResults:Ze}}function Qr(){ue=!0,be.push(...Vi()),ze.forEach((P,z)=>{ae.has(z)&&ye.add(z),qn(z)})}function Is(P,z,q){q===void 0&&(q={}),I.fetchers.set(P,z),Wi({fetchers:new Map(I.fetchers)},{flushSync:(q&&q.flushSync)===!0})}function ns(P,z,q,se){se===void 0&&(se={});let _e=Nd(I.matches,z);fn(P),Wi({errors:{[_e.route.id]:q},fetchers:new Map(I.fetchers)},{flushSync:(se&&se.flushSync)===!0})}function Ms(P){return it.set(P,(it.get(P)||0)+1),He.has(P)&&He.delete(P),I.fetchers.get(P)||yK}function fn(P){let z=I.fetchers.get(P);ae.has(P)&&!(z&&z.state==="loading"&&X.has(P))&&qn(P),ze.delete(P),X.delete(P),me.delete(P),d.v7_fetcherPersist&&He.delete(P),ye.delete(P),I.fetchers.delete(P)}function Jr(P){let z=(it.get(P)||0)-1;z<=0?(it.delete(P),He.add(P),d.v7_fetcherPersist||fn(P)):it.set(P,z),Wi({fetchers:new Map(I.fetchers)})}function qn(P){let z=ae.get(P);z&&(z.abort(),ae.delete(P))}function Ji(P){for(let z of P){let q=Ms(z),se=Zu(q.data);I.fetchers.set(z,se)}}function Ks(){let P=[],z=!1;for(let q of me){let se=I.fetchers.get(q);vi(se,"Expected fetcher: "+q),se.state==="loading"&&(me.delete(q),P.push(q),z=!0)}return Ji(P),z}function Do(P){let z=[];for(let[q,se]of X)if(se<P){let _e=I.fetchers.get(q);vi(_e,"Expected fetcher: "+q),_e.state==="loading"&&(qn(q),X.delete(q),z.push(q))}return Ji(z),z.length>0}function Gs(P,z){let q=I.blockers.get(P)||g0;return gt.get(P)!==z&&gt.set(P,z),q}function ui(P){I.blockers.delete(P),gt.delete(P)}function ur(P,z){let q=I.blockers.get(P)||g0;vi(q.state==="unblocked"&&z.state==="blocked"||q.state==="blocked"&&z.state==="blocked"||q.state==="blocked"&&z.state==="proceeding"||q.state==="blocked"&&z.state==="unblocked"||q.state==="proceeding"&&z.state==="unblocked","Invalid blocker state transition: "+q.state+" -> "+z.state);let se=new Map(I.blockers);se.set(P,z),Wi({blockers:se})}function dl(P){let{currentLocation:z,nextLocation:q,historyAction:se}=P;if(gt.size===0)return;gt.size>1&&Km(!1,"A router only supports one blocker at a time");let _e=Array.from(gt.entries()),[De,Re]=_e[_e.length-1],Ae=I.blockers.get(De);if(!(Ae&&Ae.state==="proceeding")&&Re({currentLocation:z,nextLocation:q,historyAction:se}))return De}function eo(P){let z=co(404,{pathname:P}),q=a||o,{matches:se,route:_e}=$I(q);return Vi(),{notFoundMatches:se,route:_e,error:z}}function Vi(P){let z=[];return st.forEach((q,se)=>{(!P||P(se))&&(q.cancel(),z.push(se),st.delete(se))}),z}function Eo(P,z,q){if(_=P,w=z,v=q||null,!y&&I.navigation===Qx){y=!0;let se=Ta(I.location,I.matches);se!=null&&Wi({restoreScrollPosition:se})}return()=>{_=null,w=null,v=null}}function nc(P,z){return v&&v(P,z.map(se=>Jq(se,I.loaderData)))||P.key}function sc(P,z){if(_&&w){let q=nc(P,z);_[q]=w()}}function Ta(P,z){if(_){let q=nc(P,z),se=_[q];if(typeof se=="number")return se}return null}function xt(P,z,q){if(u)if(P){if(Object.keys(P[0].params).length>0)return{active:!0,matches:Iw(z,q,l,!0)}}else return{active:!0,matches:Iw(z,q,l,!0)||[]};return{active:!1,matches:null}}async function H(P,z,q,se){if(!u)return{type:"success",matches:P};let _e=P;for(;;){let De=a==null,Re=a||o,Ae=r;try{await u({signal:q,path:z,matches:_e,fetcherKey:se,patch:(qe,wt)=>{q.aborted||WI(qe,wt,Re,Ae,n)}})}catch(qe){return{type:"error",error:qe,partialMatches:_e}}finally{De&&!q.aborted&&(o=[...o])}if(q.aborted)return{type:"aborted"};let We=Td(Re,z,l);if(We)return{type:"success",matches:We};let Ze=Iw(Re,z,l,!0);if(!Ze||_e.length===Ze.length&&_e.every((qe,wt)=>qe.route.id===Ze[wt].route.id))return{type:"success",matches:null};_e=Ze}}function U(P){r={},a=lC(P,n,void 0,r)}function K(P,z){let q=a==null;WI(P,z,a||o,r,n),q&&(o=[...o],Wi({}))}return A={get basename(){return l},get future(){return d},get state(){return I},get routes(){return o},get window(){return e},initialize:Lt,subscribe:qs,enableScrollRestoration:Eo,navigate:dn,fetch:Lo,revalidate:Er,createHref:P=>s.history.createHref(P),encodeLocation:P=>s.history.encodeLocation(P),getFetcher:Ms,deleteFetcher:Jr,dispose:ci,getBlocker:Gs,deleteBlocker:ui,patchRoutes:K,_internalFetchControllers:ae,_internalActiveDeferreds:st,_internalSetRoutes:U},A}function kK(s){return s!=null&&("formData"in s&&s.formData!=null||"body"in s&&s.body!==void 0)}function HL(s,e,t,i,n,r,o,a){let l,c;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){c=d;break}}else l=e,c=e[e.length-1];let u=jD(n||".",HD(l,r),_p(s.pathname,t)||s.pathname,a==="path");if(n==null&&(u.search=s.search,u.hash=s.hash),(n==null||n===""||n===".")&&c){let d=qD(u.search);if(c.route.index&&!d)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&d){let g=new URLSearchParams(u.search),m=g.getAll("index");g.delete("index"),m.filter(v=>v).forEach(v=>g.append("index",v));let _=g.toString();u.search=_?"?"+_:""}}return i&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Qc([t,u.pathname])),yf(u)}function PI(s,e,t,i){if(!i||!kK(i))return{path:t};if(i.formMethod&&!FK(i.formMethod))return{path:t,error:co(405,{method:i.formMethod})};let n=()=>({path:t,error:co(400,{type:"invalid-body"})}),r=i.formMethod||"get",o=s?r.toUpperCase():r.toLowerCase(),a=IB(t);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!Ua(o))return n();let g=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((m,_)=>{let[v,w]=_;return""+m+v+"="+w+`
`},""):String(i.body);return{path:t,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:void 0,text:g}}}else if(i.formEncType==="application/json"){if(!Ua(o))return n();try{let g=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:t,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:g,text:void 0}}}catch{return n()}}}vi(typeof FormData=="function","FormData is not available in this environment");let l,c;if(i.formData)l=UL(i.formData),c=i.formData;else if(i.body instanceof FormData)l=UL(i.body),c=i.body;else if(i.body instanceof URLSearchParams)l=i.body,c=zI(l);else if(i.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(i.body),c=zI(l)}catch{return n()}let u={formMethod:o,formAction:a,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Ua(u.formMethod))return{path:t,submission:u};let d=Uh(t);return e&&d.search&&qD(d.search)&&l.append("index",""),d.search="?"+l,{path:yf(d),submission:u}}function OI(s,e,t){t===void 0&&(t=!1);let i=s.findIndex(n=>n.route.id===e);return i>=0?s.slice(0,t?i+1:i):s}function FI(s,e,t,i,n,r,o,a,l,c,u,d,g,m,_,v){let w=v?Bo(v[1])?v[1].error:v[1].data:void 0,y=s.createURL(e.location),S=s.createURL(n),k=t;r&&e.errors?k=OI(t,Object.keys(e.errors)[0],!0):v&&Bo(v[1])&&(k=OI(t,v[0]));let L=v?v[1].statusCode:void 0,T=o&&L&&L>=400,A=k.filter((O,F)=>{let{route:J}=O;if(J.lazy)return!0;if(J.loader==null)return!1;if(r)return jL(J,e.loaderData,e.errors);if(LK(e.loaderData,e.matches[F],O)||l.some(ie=>ie===O.route.id))return!0;let Y=e.matches[F],G=O;return BI(O,wn({currentUrl:y,currentParams:Y.params,nextUrl:S,nextParams:G.params},i,{actionResult:w,actionStatus:L,defaultShouldRevalidate:T?!1:a||y.pathname+y.search===S.pathname+S.search||y.search!==S.search||TB(Y,G)}))}),I=[];return d.forEach((O,F)=>{if(r||!t.some(Z=>Z.route.id===O.routeId)||u.has(F))return;let J=Td(m,O.path,_);if(!J){I.push({key:F,routeId:O.routeId,path:O.path,matches:null,match:null,controller:null});return}let Y=e.fetchers.get(F),G=V0(J,O.path),ie=!1;g.has(F)?ie=!1:c.has(F)?(c.delete(F),ie=!0):Y&&Y.state!=="idle"&&Y.data===void 0?ie=a:ie=BI(G,wn({currentUrl:y,currentParams:e.matches[e.matches.length-1].params,nextUrl:S,nextParams:t[t.length-1].params},i,{actionResult:w,actionStatus:L,defaultShouldRevalidate:T?!1:a})),ie&&I.push({key:F,routeId:O.routeId,path:O.path,matches:J,match:G,controller:new AbortController})}),[A,I]}function jL(s,e,t){if(s.lazy)return!0;if(!s.loader)return!1;let i=e!=null&&e[s.id]!==void 0,n=t!=null&&t[s.id]!==void 0;return!i&&n?!1:typeof s.loader=="function"&&s.loader.hydrate===!0?!0:!i&&!n}function LK(s,e,t){let i=!e||t.route.id!==e.route.id,n=s[t.route.id]===void 0;return i||n}function TB(s,e){let t=s.route.path;return s.pathname!==e.pathname||t!=null&&t.endsWith("*")&&s.params["*"]!==e.params["*"]}function BI(s,e){if(s.route.shouldRevalidate){let t=s.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function WI(s,e,t,i,n){var r;let o;if(s){let c=i[s];vi(c,"No route found to patch children into: routeId = "+s),c.children||(c.children=[]),o=c.children}else o=t;let a=e.filter(c=>!o.some(u=>NB(c,u))),l=lC(a,n,[s||"_","patch",String(((r=o)==null?void 0:r.length)||"0")],i);o.push(...l)}function NB(s,e){return"id"in s&&"id"in e&&s.id===e.id?!0:s.index===e.index&&s.path===e.path&&s.caseSensitive===e.caseSensitive?(!s.children||s.children.length===0)&&(!e.children||e.children.length===0)?!0:s.children.every((t,i)=>{var n;return(n=e.children)==null?void 0:n.some(r=>NB(t,r))}):!1}async function DK(s,e,t){if(!s.lazy)return;let i=await s.lazy();if(!s.lazy)return;let n=t[s.id];vi(n,"No route found in manifest");let r={};for(let o in i){let l=n[o]!==void 0&&o!=="hasErrorBoundary";Km(!l,'Route "'+n.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!Xq.has(o)&&(r[o]=i[o])}Object.assign(n,r),Object.assign(n,wn({},e(n),{lazy:void 0}))}async function EK(s){let{matches:e}=s,t=e.filter(n=>n.shouldLoad);return(await Promise.all(t.map(n=>n.resolve()))).reduce((n,r,o)=>Object.assign(n,{[t[o].route.id]:r}),{})}async function TK(s,e,t,i,n,r,o,a,l,c){let u=r.map(m=>m.route.lazy?DK(m.route,l,a):void 0),d=r.map((m,_)=>{let v=u[_],w=n.some(S=>S.route.id===m.route.id);return wn({},m,{shouldLoad:w,resolve:async S=>(S&&i.method==="GET"&&(m.route.lazy||m.route.loader)&&(w=!0),w?NK(e,i,m,v,S,c):Promise.resolve({type:qi.data,result:void 0}))})}),g=await s({matches:d,request:i,params:r[0].params,fetcherKey:o,context:c});try{await Promise.all(u)}catch{}return g}async function NK(s,e,t,i,n,r){let o,a,l=c=>{let u,d=new Promise((_,v)=>u=v);a=()=>u(),e.signal.addEventListener("abort",a);let g=_=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+s+'" [routeId: '+t.route.id+"]"))):c({request:e,params:t.params,context:r},..._!==void 0?[_]:[]),m=(async()=>{try{return{type:"data",result:await(n?n(v=>g(v)):g())}}catch(_){return{type:"error",result:_}}})();return Promise.race([m,d])};try{let c=t.route[s];if(i)if(c){let u,[d]=await Promise.all([l(c).catch(g=>{u=g}),i]);if(u!==void 0)throw u;o=d}else if(await i,c=t.route[s],c)o=await l(c);else if(s==="action"){let u=new URL(e.url),d=u.pathname+u.search;throw co(405,{method:e.method,pathname:d,routeId:t.route.id})}else return{type:qi.data,result:void 0};else if(c)o=await l(c);else{let u=new URL(e.url),d=u.pathname+u.search;throw co(404,{pathname:d})}vi(o.result!==void 0,"You defined "+(s==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+s+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:qi.error,result:c}}finally{a&&e.signal.removeEventListener("abort",a)}return o}async function IK(s){let{result:e,type:t}=s;if(MB(e)){let d;try{let g=e.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?e.body==null?d=null:d=await e.json():d=await e.text()}catch(g){return{type:qi.error,error:g}}return t===qi.error?{type:qi.error,error:new cC(e.status,e.statusText,d),statusCode:e.status,headers:e.headers}:{type:qi.data,data:d,statusCode:e.status,headers:e.headers}}if(t===qi.error){if(qI(e)){var i,n;if(e.data instanceof Error){var r,o;return{type:qi.error,error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:qi.error,error:new cC(((i=e.init)==null?void 0:i.status)||500,void 0,e.data),statusCode:G1(e)?e.status:void 0,headers:(n=e.init)!=null&&n.headers?new Headers(e.init.headers):void 0}}return{type:qi.error,error:e,statusCode:G1(e)?e.status:void 0}}if(OK(e)){var a,l;return{type:qi.deferred,deferredData:e,statusCode:(a=e.init)==null?void 0:a.status,headers:((l=e.init)==null?void 0:l.headers)&&new Headers(e.init.headers)}}if(qI(e)){var c,u;return{type:qi.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}}return{type:qi.data,data:e}}function MK(s,e,t,i,n,r){let o=s.headers.get("Location");if(vi(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!UD.test(o)){let a=i.slice(0,i.findIndex(l=>l.route.id===t)+1);o=HL(new URL(e.url),a,n,!0,o,r),s.headers.set("Location",o)}return s}function VI(s,e,t){if(UD.test(s)){let i=s,n=i.startsWith("//")?new URL(e.protocol+i):new URL(i),r=_p(n.pathname,t)!=null;if(n.origin===e.origin&&r)return n.pathname+n.search+n.hash}return s}function xg(s,e,t,i){let n=s.createURL(IB(e)).toString(),r={signal:t};if(i&&Ua(i.formMethod)){let{formMethod:o,formEncType:a}=i;r.method=o.toUpperCase(),a==="application/json"?(r.headers=new Headers({"Content-Type":a}),r.body=JSON.stringify(i.json)):a==="text/plain"?r.body=i.text:a==="application/x-www-form-urlencoded"&&i.formData?r.body=UL(i.formData):r.body=i.formData}return new Request(n,r)}function UL(s){let e=new URLSearchParams;for(let[t,i]of s.entries())e.append(t,typeof i=="string"?i:i.name);return e}function zI(s){let e=new FormData;for(let[t,i]of s.entries())e.append(t,i);return e}function RK(s,e,t,i,n){let r={},o=null,a,l=!1,c={},u=t&&Bo(t[1])?t[1].error:void 0;return s.forEach(d=>{if(!(d.route.id in e))return;let g=d.route.id,m=e[g];if(vi(!Yd(m),"Cannot handle redirect results in processLoaderData"),Bo(m)){let _=m.error;u!==void 0&&(_=u,u=void 0),o=o||{};{let v=Nd(s,g);o[v.route.id]==null&&(o[v.route.id]=_)}r[g]=void 0,l||(l=!0,a=G1(m.error)?m.error.status:500),m.headers&&(c[g]=m.headers)}else fh(m)?(i.set(g,m.deferredData),r[g]=m.deferredData.data,m.statusCode!=null&&m.statusCode!==200&&!l&&(a=m.statusCode),m.headers&&(c[g]=m.headers)):(r[g]=m.data,m.statusCode&&m.statusCode!==200&&!l&&(a=m.statusCode),m.headers&&(c[g]=m.headers))}),u!==void 0&&t&&(o={[t[0]]:u},r[t[0]]=void 0),{loaderData:r,errors:o,statusCode:a||200,loaderHeaders:c}}function HI(s,e,t,i,n,r,o){let{loaderData:a,errors:l}=RK(e,t,i,o);return n.forEach(c=>{let{key:u,match:d,controller:g}=c,m=r[u];if(vi(m,"Did not find corresponding fetcher result"),!(g&&g.signal.aborted))if(Bo(m)){let _=Nd(s.matches,d?.route.id);l&&l[_.route.id]||(l=wn({},l,{[_.route.id]:m.error})),s.fetchers.delete(u)}else if(Yd(m))vi(!1,"Unhandled fetcher revalidation redirect");else if(fh(m))vi(!1,"Unhandled fetcher deferred data");else{let _=Zu(m.data);s.fetchers.set(u,_)}}),{loaderData:a,errors:l}}function jI(s,e,t,i){let n=wn({},e);for(let r of t){let o=r.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(n[o]=e[o]):s[o]!==void 0&&r.route.loader&&(n[o]=s[o]),i&&i.hasOwnProperty(o))break}return n}function UI(s){return s?Bo(s[1])?{actionData:{}}:{actionData:{[s[0]]:s[1].data}}:{}}function Nd(s,e){return(e?s.slice(0,s.findIndex(i=>i.route.id===e)+1):[...s]).reverse().find(i=>i.route.hasErrorBoundary===!0)||s[0]}function $I(s){let e=s.length===1?s[0]:s.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function co(s,e){let{pathname:t,routeId:i,method:n,type:r,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return s===400?(a="Bad Request",n&&t&&i?l="You made a "+n+' request to "'+t+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":r==="defer-action"?l="defer() is not supported in actions":r==="invalid-body"&&(l="Unable to encode submission body")):s===403?(a="Forbidden",l='Route "'+i+'" does not match URL "'+t+'"'):s===404?(a="Not Found",l='No route matches URL "'+t+'"'):s===405&&(a="Method Not Allowed",n&&t&&i?l="You made a "+n.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":n&&(l='Invalid request method "'+n.toUpperCase()+'"')),new cC(s||500,a,new Error(l),!0)}function kb(s){let e=Object.entries(s);for(let t=e.length-1;t>=0;t--){let[i,n]=e[t];if(Yd(n))return{key:i,result:n}}}function IB(s){let e=typeof s=="string"?Uh(s):s;return yf(wn({},e,{hash:""}))}function AK(s,e){return s.pathname!==e.pathname||s.search!==e.search?!1:s.hash===""?e.hash!=="":s.hash===e.hash?!0:e.hash!==""}function PK(s){return MB(s.result)&&wK.has(s.result.status)}function fh(s){return s.type===qi.deferred}function Bo(s){return s.type===qi.error}function Yd(s){return(s&&s.type)===qi.redirect}function qI(s){return typeof s=="object"&&s!=null&&"type"in s&&"data"in s&&"init"in s&&s.type==="DataWithResponseInit"}function OK(s){let e=s;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function MB(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.headers=="object"&&typeof s.body<"u"}function FK(s){return bK.has(s.toLowerCase())}function Ua(s){return _K.has(s.toLowerCase())}async function BK(s,e,t,i,n){let r=Object.entries(e);for(let o=0;o<r.length;o++){let[a,l]=r[o],c=s.find(g=>g?.route.id===a);if(!c)continue;let u=i.find(g=>g.route.id===c.route.id),d=u!=null&&!TB(u,c)&&(n&&n[c.route.id])!==void 0;fh(l)&&d&&await $D(l,t,!1).then(g=>{g&&(e[a]=g)})}}async function WK(s,e,t){for(let i=0;i<t.length;i++){let{key:n,routeId:r,controller:o}=t[i],a=e[n];s.find(c=>c?.route.id===r)&&fh(a)&&(vi(o,"Expected an AbortController for revalidating fetcher deferred result"),await $D(a,o.signal,!0).then(c=>{c&&(e[n]=c)}))}}async function $D(s,e,t){if(t===void 0&&(t=!1),!await s.deferredData.resolveData(e)){if(t)try{return{type:qi.data,data:s.deferredData.unwrappedData}}catch(n){return{type:qi.error,error:n}}return{type:qi.data,data:s.deferredData.data}}}function qD(s){return new URLSearchParams(s).getAll("index").some(e=>e==="")}function V0(s,e){let t=typeof e=="string"?Uh(e).search:e.search;if(s[s.length-1].route.index&&qD(t||""))return s[s.length-1];let i=LB(s);return i[i.length-1]}function KI(s){let{formMethod:e,formAction:t,formEncType:i,text:n,formData:r,json:o}=s;if(!(!e||!t||!i)){if(n!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:n};if(r!=null)return{formMethod:e,formAction:t,formEncType:i,formData:r,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:o,text:void 0}}}function Jx(s,e){return e?{state:"loading",location:s,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:s,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function VK(s,e){return{state:"submitting",location:s,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function m0(s,e){return s?{state:"loading",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function zK(s,e){return{state:"submitting",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:e?e.data:void 0}}function Zu(s){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:s}}function HK(s,e){try{let t=s.sessionStorage.getItem(EB);if(t){let i=JSON.parse(t);for(let[n,r]of Object.entries(i||{}))r&&Array.isArray(r)&&e.set(n,new Set(r||[]))}}catch{}}function jK(s,e){if(e.size>0){let t={};for(let[i,n]of e)t[i]=[...n];try{s.sessionStorage.setItem(EB,JSON.stringify(t))}catch(i){Km(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uC(){return uC=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},uC.apply(this,arguments)}const XS=Ee.createContext(null),RB=Ee.createContext(null),Ff=Ee.createContext(null),KD=Ee.createContext(null),$h=Ee.createContext({outlet:null,matches:[],isDataRoute:!1}),AB=Ee.createContext(null);function UK(s,e){let{relative:t}=e===void 0?{}:e;H_()||vi(!1);let{basename:i,navigator:n}=Ee.useContext(Ff),{hash:r,pathname:o,search:a}=OB(s,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:Qc([i,o])),n.createHref({pathname:l,search:a,hash:r})}function H_(){return Ee.useContext(KD)!=null}function QS(){return H_()||vi(!1),Ee.useContext(KD).location}function PB(s){Ee.useContext(Ff).static||Ee.useLayoutEffect(s)}function $K(){let{isDataRoute:s}=Ee.useContext($h);return s?rG():qK()}function qK(){H_()||vi(!1);let s=Ee.useContext(XS),{basename:e,future:t,navigator:i}=Ee.useContext(Ff),{matches:n}=Ee.useContext($h),{pathname:r}=QS(),o=JSON.stringify(HD(n,t.v7_relativeSplatPath)),a=Ee.useRef(!1);return PB(()=>{a.current=!0}),Ee.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let d=jD(c,JSON.parse(o),r,u.relative==="path");s==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Qc([e,d.pathname])),(u.replace?i.replace:i.push)(d,u.state,u)},[e,i,o,r,s])}const KK=Ee.createContext(null);function GK(s){let e=Ee.useContext($h).outlet;return e&&Ee.createElement(KK.Provider,{value:s},e)}function OB(s,e){let{relative:t}=e===void 0?{}:e,{future:i}=Ee.useContext(Ff),{matches:n}=Ee.useContext($h),{pathname:r}=QS(),o=JSON.stringify(HD(n,i.v7_relativeSplatPath));return Ee.useMemo(()=>jD(s,JSON.parse(o),r,t==="path"),[s,o,r,t])}function ZK(s,e,t,i){H_()||vi(!1);let{navigator:n}=Ee.useContext(Ff),{matches:r}=Ee.useContext($h),o=r[r.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=QS(),u;u=c;let d=u.pathname||"/",g=d;if(l!=="/"){let v=l.replace(/^\//,"").split("/");g="/"+d.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=Td(s,{pathname:g});return eG(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:Qc([l,n.encodeLocation?n.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Qc([l,n.encodeLocation?n.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),r,t,i)}function YK(){let s=sG(),e=G1(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Ee.createElement(Ee.Fragment,null,Ee.createElement("h2",null,"Unexpected Application Error!"),Ee.createElement("h3",{style:{fontStyle:"italic"}},e),t?Ee.createElement("pre",{style:n},t):null,null)}const XK=Ee.createElement(YK,null);class QK extends Ee.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Ee.createElement($h.Provider,{value:this.props.routeContext},Ee.createElement(AB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function JK(s){let{routeContext:e,match:t,children:i}=s,n=Ee.useContext(XS);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),Ee.createElement($h.Provider,{value:e},i)}function eG(s,e,t,i){var n;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),s==null){var r;if(!t)return null;if(t.errors)s=t.matches;else if((r=i)!=null&&r.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let o=s,a=(n=t)==null?void 0:n.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&a?.[d.route.id]!==void 0);u>=0||vi(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:g,errors:m}=t,_=d.route.loader&&g[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||_){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,g)=>{let m,_=!1,v=null,w=null;t&&(m=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||XK,l&&(c<0&&g===0?(oG("route-fallback"),_=!0,w=null):c===g&&(_=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,g+1)),S=()=>{let k;return m?k=v:_?k=w:d.route.Component?k=Ee.createElement(d.route.Component,null):d.route.element?k=d.route.element:k=u,Ee.createElement(JK,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:t!=null},children:k})};return t&&(d.route.ErrorBoundary||d.route.errorElement||g===0)?Ee.createElement(QK,{location:t.location,revalidation:t.revalidation,component:v,error:m,children:S(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):S()},null)}var FB=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(FB||{}),BB=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(BB||{});function tG(s){let e=Ee.useContext(XS);return e||vi(!1),e}function iG(s){let e=Ee.useContext(RB);return e||vi(!1),e}function nG(s){let e=Ee.useContext($h);return e||vi(!1),e}function WB(s){let e=nG(),t=e.matches[e.matches.length-1];return t.route.id||vi(!1),t.route.id}function sG(){var s;let e=Ee.useContext(AB),t=iG(BB.UseRouteError),i=WB();return e!==void 0?e:(s=t.errors)==null?void 0:s[i]}function rG(){let{router:s}=tG(FB.UseNavigateStable),e=WB(),t=Ee.useRef(!1);return PB(()=>{t.current=!0}),Ee.useCallback(function(n,r){r===void 0&&(r={}),t.current&&(typeof n=="number"?s.navigate(n):s.navigate(n,uC({fromRouteId:e},r)))},[s,e])}const GI={};function oG(s,e,t){GI[s]||(GI[s]=!0)}function aG(s,e){s?.v7_startTransition,s?.v7_relativeSplatPath===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function lG(s){return GK(s.context)}function cG(s){let{basename:e="/",children:t=null,location:i,navigationType:n=hs.Pop,navigator:r,static:o=!1,future:a}=s;H_()&&vi(!1);let l=e.replace(/^\/*/,"/"),c=Ee.useMemo(()=>({basename:l,navigator:r,static:o,future:uC({v7_relativeSplatPath:!1},a)}),[l,a,r,o]);typeof i=="string"&&(i=Uh(i));let{pathname:u="/",search:d="",hash:g="",state:m=null,key:_="default"}=i,v=Ee.useMemo(()=>{let w=_p(u,l);return w==null?null:{location:{pathname:w,search:d,hash:g,state:m,key:_},navigationType:n}},[l,u,d,g,m,_,n]);return v==null?null:Ee.createElement(Ff.Provider,{value:c},Ee.createElement(KD.Provider,{children:t,value:v}))}new Promise(()=>{});function uG(s){let e={hasErrorBoundary:s.ErrorBoundary!=null||s.errorElement!=null};return s.Component&&Object.assign(e,{element:Ee.createElement(s.Component),Component:void 0}),s.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:Ee.createElement(s.HydrateFallback),HydrateFallback:void 0}),s.ErrorBoundary&&Object.assign(e,{errorElement:Ee.createElement(s.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Z1(){return Z1=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},Z1.apply(this,arguments)}function hG(s,e){if(s==null)return{};var t={},i=Object.keys(s),n,r;for(r=0;r<i.length;r++)n=i[r],!(e.indexOf(n)>=0)&&(t[n]=s[n]);return t}function dG(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function fG(s,e){return s.button===0&&(!e||e==="_self")&&!dG(s)}const gG=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],mG="6";try{window.__reactRouterVersion=mG}catch{}function pG(s,e){return xK({basename:e?.basename,future:Z1({},e?.future,{v7_prependBasename:!0}),history:Gq({window:e?.window}),hydrationData:e?.hydrationData||_G(),routes:s,mapRouteProperties:uG,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window}).initialize()}function _G(){var s;let e=(s=window)==null?void 0:s.__staticRouterHydrationData;return e&&e.errors&&(e=Z1({},e,{errors:vG(e.errors)})),e}function vG(s){if(!s)return null;let e=Object.entries(s),t={};for(let[i,n]of e)if(n&&n.__type==="RouteErrorResponse")t[i]=new cC(n.status,n.statusText,n.data,n.internal===!0);else if(n&&n.__type==="Error"){if(n.__subType){let r=window[n.__subType];if(typeof r=="function")try{let o=new r(n.message);o.stack="",t[i]=o}catch{}}if(t[i]==null){let r=new Error(n.message);r.stack="",t[i]=r}}else t[i]=n;return t}const bG=Ee.createContext({isTransitioning:!1}),wG=Ee.createContext(new Map),CG="startTransition",ZI=Wq[CG],yG="flushSync",YI=Kq[yG];function SG(s){ZI?ZI(s):s()}function p0(s){YI?YI(s):s()}class xG{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}}function kG(s){let{fallbackElement:e,router:t,future:i}=s,[n,r]=Ee.useState(t.state),[o,a]=Ee.useState(),[l,c]=Ee.useState({isTransitioning:!1}),[u,d]=Ee.useState(),[g,m]=Ee.useState(),[_,v]=Ee.useState(),w=Ee.useRef(new Map),{v7_startTransition:y}=i||{},S=Ee.useCallback(O=>{y?SG(O):O()},[y]),k=Ee.useCallback((O,F)=>{let{deletedFetchers:J,flushSync:Y,viewTransitionOpts:G}=F;O.fetchers.forEach((Z,ue)=>{Z.data!==void 0&&w.current.set(ue,Z.data)}),J.forEach(Z=>w.current.delete(Z));let ie=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!G||ie){Y?p0(()=>r(O)):S(()=>r(O));return}if(Y){p0(()=>{g&&(u&&u.resolve(),g.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:G.currentLocation,nextLocation:G.nextLocation})});let Z=t.window.document.startViewTransition(()=>{p0(()=>r(O))});Z.finished.finally(()=>{p0(()=>{d(void 0),m(void 0),a(void 0),c({isTransitioning:!1})})}),p0(()=>m(Z));return}g?(u&&u.resolve(),g.skipTransition(),v({state:O,currentLocation:G.currentLocation,nextLocation:G.nextLocation})):(a(O),c({isTransitioning:!0,flushSync:!1,currentLocation:G.currentLocation,nextLocation:G.nextLocation}))},[t.window,g,u,w,S]);Ee.useLayoutEffect(()=>t.subscribe(k),[t,k]),Ee.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new xG)},[l]),Ee.useEffect(()=>{if(u&&o&&t.window){let O=o,F=u.promise,J=t.window.document.startViewTransition(async()=>{S(()=>r(O)),await F});J.finished.finally(()=>{d(void 0),m(void 0),a(void 0),c({isTransitioning:!1})}),m(J)}},[S,o,u,t.window]),Ee.useEffect(()=>{u&&o&&n.location.key===o.location.key&&u.resolve()},[u,g,n.location,o]),Ee.useEffect(()=>{!l.isTransitioning&&_&&(a(_.state),c({isTransitioning:!0,flushSync:!1,currentLocation:_.currentLocation,nextLocation:_.nextLocation}),v(void 0))},[l.isTransitioning,_]),Ee.useEffect(()=>{},[]);let L=Ee.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:O=>t.navigate(O),push:(O,F,J)=>t.navigate(O,{state:F,preventScrollReset:J?.preventScrollReset}),replace:(O,F,J)=>t.navigate(O,{replace:!0,state:F,preventScrollReset:J?.preventScrollReset})}),[t]),T=t.basename||"/",A=Ee.useMemo(()=>({router:t,navigator:L,static:!1,basename:T}),[t,L,T]),I=Ee.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return Ee.useEffect(()=>aG(i,t.future),[i,t.future]),Ee.createElement(Ee.Fragment,null,Ee.createElement(XS.Provider,{value:A},Ee.createElement(RB.Provider,{value:n},Ee.createElement(wG.Provider,{value:w.current},Ee.createElement(bG.Provider,{value:l},Ee.createElement(cG,{basename:T,location:n.location,navigationType:n.historyAction,navigator:L,future:I},n.initialized||t.future.v7_partialHydration?Ee.createElement(LG,{routes:t.routes,future:t.future,state:n}):e))))),null)}const LG=Ee.memo(DG);function DG(s){let{routes:e,future:t,state:i}=s;return ZK(e,void 0,i,t)}const EG=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TG=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JS=Ee.forwardRef(function(e,t){let{onClick:i,relative:n,reloadDocument:r,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,g=hG(e,gG),{basename:m}=Ee.useContext(Ff),_,v=!1;if(typeof c=="string"&&TG.test(c)&&(_=c,EG))try{let k=new URL(window.location.href),L=c.startsWith("//")?new URL(k.protocol+c):new URL(c),T=_p(L.pathname,m);L.origin===k.origin&&T!=null?c=T+L.search+L.hash:v=!0}catch{}let w=UK(c,{relative:n}),y=NG(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:n,viewTransition:d});function S(k){i&&i(k),k.defaultPrevented||y(k)}return Ee.createElement("a",Z1({},g,{href:_||w,onClick:v||r?i:S,ref:t,target:l}))});var XI;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(XI||(XI={}));var QI;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(QI||(QI={}));function NG(s,e){let{target:t,replace:i,state:n,preventScrollReset:r,relative:o,viewTransition:a}=e===void 0?{}:e,l=$K(),c=QS(),u=OB(s,{relative:o});return Ee.useCallback(d=>{if(fG(d,t)){d.preventDefault();let g=i!==void 0?i:yf(c)===yf(u);l(s,{replace:g,state:n,preventScrollReset:r,relative:o,viewTransition:a})}},[c,l,u,i,n,t,s,r,o,a])}const j_=Ee.createContext({});function IG({children:s}){const[e,t]=Ee.useState(!1),[i,n]=Ee.useState(!1);return x.jsx(j_.Provider,{value:{visible:e,setVisible:t,fms:i,setFms:n},children:s})}function MG(s,e){if(s==null)return{};var t={};for(var i in s)if({}.hasOwnProperty.call(s,i)){if(e.indexOf(i)!==-1)continue;t[i]=s[i]}return t}function hC(){return hC=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},hC.apply(null,arguments)}function $L(s,e){return $L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},$L(s,e)}function RG(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,$L(s,e)}function ek(s,e,t){if(t||arguments.length===2)for(var i=0,n=e.length,r;i<n;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return s.concat(r||Array.prototype.slice.call(e))}var Lb={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var JI;function AG(){if(JI)return Lb;JI=1;var s=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,e=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,t=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,i=/\\([\u000b\u0020-\u00ff])/g,n=/([\\"])/g,r=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;Lb.format=o,Lb.parse=a;function o(d){if(!d||typeof d!="object")throw new TypeError("argument obj is required");var g=d.parameters,m=d.type;if(!m||!r.test(m))throw new TypeError("invalid type");var _=m;if(g&&typeof g=="object")for(var v,w=Object.keys(g).sort(),y=0;y<w.length;y++){if(v=w[y],!t.test(v))throw new TypeError("invalid parameter name");_+="; "+v+"="+c(g[v])}return _}function a(d){if(!d)throw new TypeError("argument string is required");var g=typeof d=="object"?l(d):d;if(typeof g!="string")throw new TypeError("argument string is required to be a string");var m=g.indexOf(";"),_=m!==-1?g.slice(0,m).trim():g.trim();if(!r.test(_))throw new TypeError("invalid media type");var v=new u(_.toLowerCase());if(m!==-1){var w,y,S;for(s.lastIndex=m;y=s.exec(g);){if(y.index!==m)throw new TypeError("invalid parameter format");m+=y[0].length,w=y[1].toLowerCase(),S=y[2],S.charCodeAt(0)===34&&(S=S.slice(1,-1),S.indexOf("\\")!==-1&&(S=S.replace(i,"$1"))),v.parameters[w]=S}if(m!==g.length)throw new TypeError("invalid parameter format")}return v}function l(d){var g;if(typeof d.getHeader=="function"?g=d.getHeader("content-type"):typeof d.headers=="object"&&(g=d.headers&&d.headers["content-type"]),typeof g!="string")throw new TypeError("content-type header is missing from object");return g}function c(d){var g=String(d);if(t.test(g))return g;if(g.length>0&&!e.test(g))throw new TypeError("invalid parameter value");return'"'+g.replace(n,"\\$1")+'"'}function u(d){this.parameters=Object.create(null),this.type=d}return Lb}var PG=AG(),Bg=new Map,VB=function(e){return e.cloneNode(!0)},eM=function(){return window.location.protocol==="file:"},zB=function(e,t,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){try{if(!/\.svg/i.test(e)&&n.readyState===2){var r=n.getResponseHeader("Content-Type");if(!r)throw new Error("Content type not found");var o=PG.parse(r).type;if(!(o==="image/svg+xml"||o==="text/plain"))throw new Error("Invalid content type: ".concat(o))}if(n.readyState===4){if(n.status===404||n.responseXML===null)throw new Error(eM()?"Note: SVG injection ajax calls do not work locally without adjusting security settings in your browser. Or consider using a local webserver.":"Unable to load SVG file: "+e);if(n.status===200||eM()&&n.status===0)i(null,n);else throw new Error("There was a problem injecting the SVG: "+n.status+" "+n.statusText)}}catch(a){if(n.abort(),a instanceof Error)i(a,n);else throw a}},n.open("GET",e),n.withCredentials=t,n.overrideMimeType&&n.overrideMimeType("text/xml"),n.send()},rh={},tM=function(e,t){rh[e]=rh[e]||[],rh[e].push(t)},OG=function(e){for(var t=function(o,a){setTimeout(function(){if(Array.isArray(rh[e])){var l=Bg.get(e),c=rh[e][o];l instanceof SVGSVGElement&&c(null,VB(l)),l instanceof Error&&c(l),o===rh[e].length-1&&delete rh[e]}},0)},i=0,n=rh[e].length;i<n;i++)t(i)},FG=function(e,t,i){if(Bg.has(e)){var n=Bg.get(e);if(n===void 0){tM(e,i);return}if(n instanceof SVGSVGElement){i(null,VB(n));return}}Bg.set(e,void 0),tM(e,i),zB(e,t,function(r,o){var a;r?Bg.set(e,r):((a=o.responseXML)===null||a===void 0?void 0:a.documentElement)instanceof SVGSVGElement&&Bg.set(e,o.responseXML.documentElement),OG(e)})},BG=function(e,t,i){zB(e,t,function(n,r){var o;n?i(n):((o=r.responseXML)===null||o===void 0?void 0:o.documentElement)instanceof SVGSVGElement&&i(null,r.responseXML.documentElement)})},WG=0,VG=function(){return++WG},_l=[],iM={},zG="http://www.w3.org/2000/svg",tk="http://www.w3.org/1999/xlink",nM=function(e,t,i,n,r,o,a){var l=e.getAttribute("data-src")||e.getAttribute("src");if(!l){a(new Error("Invalid data-src or src attribute"));return}if(_l.indexOf(e)!==-1){_l.splice(_l.indexOf(e),1),e=null;return}_l.push(e),e.setAttribute("src","");var c=n?FG:BG;c(l,r,function(u,d){if(!d){_l.splice(_l.indexOf(e),1),e=null,a(u);return}var g=e.getAttribute("id");g&&d.setAttribute("id",g);var m=e.getAttribute("title");m&&d.setAttribute("title",m);var _=e.getAttribute("width");_&&d.setAttribute("width",_);var v=e.getAttribute("height");v&&d.setAttribute("height",v);var w=Array.from(new Set(ek(ek(ek([],(d.getAttribute("class")||"").split(" "),!0),["injected-svg"],!1),(e.getAttribute("class")||"").split(" "),!0))).join(" ").trim();d.setAttribute("class",w);var y=e.getAttribute("style");y&&d.setAttribute("style",y),d.setAttribute("data-src",l);var S=[].filter.call(e.attributes,function(ae){return/^data-\w[\w-]*$/.test(ae.name)});if(Array.prototype.forEach.call(S,function(ae){ae.name&&ae.value&&d.setAttribute(ae.name,ae.value)}),i){var k={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],path:[],pattern:["fill","stroke"],radialGradient:["fill","stroke"]},L,T,A,I,O;Object.keys(k).forEach(function(ae){L=ae,A=k[ae],T=d.querySelectorAll(L+"[id]");for(var xe=function(ze,it){I=T[ze].id,O=I+"-"+VG();var He;Array.prototype.forEach.call(A,function(Sn){He=d.querySelectorAll("["+Sn+'*="'+I+'"]');for(var dn=0,Er=He.length;dn<Er;dn++){var Pn=He[dn].getAttribute(Sn);Pn&&!Pn.match(new RegExp('url\\("?#'+I+'"?\\)'))||He[dn].setAttribute(Sn,"url(#"+O+")")}});for(var st=d.querySelectorAll("[*|href]"),gt=[],St=0,Lt=st.length;St<Lt;St++){var ci=st[St].getAttributeNS(tk,"href");ci&&ci.toString()==="#"+T[ze].id&&gt.push(st[St])}for(var qs=0,Wi=gt.length;qs<Wi;qs++)gt[qs].setAttributeNS(tk,"href","#"+O);T[ze].id=O},fe=0,X=T.length;fe<X;fe++)xe(fe)})}d.removeAttribute("xmlns:a");for(var F=d.querySelectorAll("script"),J=[],Y,G,ie=0,Z=F.length;ie<Z;ie++)G=F[ie].getAttribute("type"),(!G||G==="application/ecmascript"||G==="application/javascript"||G==="text/javascript")&&(Y=F[ie].innerText||F[ie].textContent,Y&&J.push(Y),d.removeChild(F[ie]));if(J.length>0&&(t==="always"||t==="once"&&!iM[l])){for(var ue=0,be=J.length;ue<be;ue++)new Function(J[ue])(window);iM[l]=!0}var ye=d.querySelectorAll("style");if(Array.prototype.forEach.call(ye,function(ae){ae.textContent+=""}),d.setAttribute("xmlns",zG),d.setAttribute("xmlns:xlink",tk),o(d),!e.parentNode){_l.splice(_l.indexOf(e),1),e=null,a(new Error("Parent node is null"));return}e.parentNode.replaceChild(d,e),_l.splice(_l.indexOf(e),1),e=null,a(null,d)})},HG=function(e,t){var i=t===void 0?{}:t,n=i.afterAll,r=n===void 0?function(){}:n,o=i.afterEach,a=o===void 0?function(){}:o,l=i.beforeEach,c=l===void 0?function(){}:l,u=i.cacheRequests,d=u===void 0?!0:u,g=i.evalScripts,m=g===void 0?"never":g,_=i.httpRequestWithCredentials,v=_===void 0?!1:_,w=i.renumerateIRIElements,y=w===void 0?!0:w;if(e&&"length"in e)for(var S=0,k=0,L=e.length;k<L;k++)nM(e[k],m,y,d,v,c,function(T,A){a(T,A),e&&"length"in e&&e.length===++S&&r(S)});else e?nM(e,m,y,d,v,c,function(T,A){a(T,A),r(1),e=null}):r(0)},ik={exports:{}},nk,sM;function jG(){if(sM)return nk;sM=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return nk=s,nk}var sk,rM;function UG(){if(rM)return sk;rM=1;var s=jG();function e(){}function t(){}return t.resetWarningCache=e,sk=function(){function i(o,a,l,c,u,d){if(d!==s){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}i.isRequired=i;function n(){return i}var r={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:n,element:i,elementType:i,instanceOf:n,node:i,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:t,resetWarningCache:e};return r.PropTypes=r,r},sk}var oM;function $G(){return oM||(oM=1,ik.exports=UG()()),ik.exports}var Cs=$G(),qG=function(e){var t=e?.ownerDocument||document;return t.defaultView||window},KG=function(e,t){for(var i in e)if(!(i in t))return!0;for(var n in t)if(e[n]!==t[n])return!0;return!1},GG=["afterInjection","beforeInjection","desc","evalScripts","fallback","httpRequestWithCredentials","loading","renumerateIRIElements","src","title","useRequestCache","wrapper"],Db="http://www.w3.org/2000/svg",aM="http://www.w3.org/1999/xlink",GD=function(s){function e(){for(var i,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return i=s.call.apply(s,[this].concat(r))||this,i.initialState={hasError:!1,isLoading:!0},i.state=i.initialState,i._isMounted=!1,i.reactWrapper=void 0,i.nonReactWrapper=void 0,i.refCallback=function(a){i.reactWrapper=a},i}RG(e,s);var t=e.prototype;return t.renderSVG=function(){var n=this;if(this.reactWrapper instanceof qG(this.reactWrapper).Node){var r=this.props,o=r.desc,a=r.evalScripts,l=r.httpRequestWithCredentials,c=r.renumerateIRIElements,u=r.src,d=r.title,g=r.useRequestCache,m=this.props.onError,_=this.props.beforeInjection,v=this.props.afterInjection,w=this.props.wrapper,y,S;w==="svg"?(y=document.createElementNS(Db,w),y.setAttribute("xmlns",Db),y.setAttribute("xmlns:xlink",aM),S=document.createElementNS(Db,w)):(y=document.createElement(w),S=document.createElement(w)),y.appendChild(S),S.dataset.src=u,this.nonReactWrapper=this.reactWrapper.appendChild(y);var k=function(I){if(n.removeSVG(),!n._isMounted){m(I);return}n.setState(function(){return{hasError:!0,isLoading:!1}},function(){m(I)})},L=function(I,O){if(I){k(I);return}n._isMounted&&n.setState(function(){return{isLoading:!1}},function(){try{v(O)}catch(F){k(F)}})},T=function(I){if(I.setAttribute("role","img"),o){var O=I.querySelector(":scope > desc");O&&I.removeChild(O);var F=document.createElement("desc");F.innerHTML=o,I.prepend(F)}if(d){var J=I.querySelector(":scope > title");J&&I.removeChild(J);var Y=document.createElement("title");Y.innerHTML=d,I.prepend(Y)}try{_(I)}catch(G){k(G)}};HG(S,{afterEach:L,beforeEach:T,cacheRequests:g,evalScripts:a,httpRequestWithCredentials:l,renumerateIRIElements:c})}},t.removeSVG=function(){var n;(n=this.nonReactWrapper)!=null&&n.parentNode&&(this.nonReactWrapper.parentNode.removeChild(this.nonReactWrapper),this.nonReactWrapper=null)},t.componentDidMount=function(){this._isMounted=!0,this.renderSVG()},t.componentDidUpdate=function(n){var r=this;KG(hC({},n),this.props)&&this.setState(function(){return r.initialState},function(){r.removeSVG(),r.renderSVG()})},t.componentWillUnmount=function(){this._isMounted=!1,this.removeSVG()},t.render=function(){var n=this.props;n.afterInjection,n.beforeInjection,n.desc,n.evalScripts;var r=n.fallback;n.httpRequestWithCredentials;var o=n.loading;n.renumerateIRIElements,n.src,n.title,n.useRequestCache;var a=n.wrapper,l=MG(n,GG),c=a;return Ee.createElement(c,hC({},l,{ref:this.refCallback},a==="svg"?{xmlns:Db,xmlnsXlink:aM}:{}),this.state.isLoading&&o&&Ee.createElement(o,null),this.state.hasError&&r&&Ee.createElement(r,null))},e}(Ee.Component);GD.defaultProps={afterInjection:function(){},beforeInjection:function(){},desc:"",evalScripts:"never",fallback:null,httpRequestWithCredentials:!1,loading:null,onError:function(){},renumerateIRIElements:!0,title:"",useRequestCache:!0,wrapper:"div"};GD.propTypes={afterInjection:Cs.func,beforeInjection:Cs.func,desc:Cs.string,evalScripts:Cs.oneOf(["always","once","never"]),fallback:Cs.oneOfType([Cs.func,Cs.object,Cs.string]),httpRequestWithCredentials:Cs.bool,loading:Cs.oneOfType([Cs.func,Cs.object,Cs.string]),onError:Cs.func,renumerateIRIElements:Cs.bool,src:Cs.string.isRequired,title:Cs.string,useRequestCache:Cs.bool,wrapper:Cs.oneOf(["div","span","svg"])};const ZG="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='30'%20height='30'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xmlns:sketch='http://www.bohemiancoding.com/sketch/ns'%3e%3cpath%20d='M5%205%20h%2020%20M%205%2015%20h%2020%20M%205%2025%20h%2020'%20id='hamburger'%3e%3c/path%3e%3c/svg%3e";function YG(){const{setVisible:s}=Ee.useContext(j_),e=()=>{s(t=>!t)};return x.jsxs("header",{children:[x.jsx("span",{className:"icon",onClick:e,children:x.jsx(GD,{src:ZG})}),x.jsx("h1",{children:x.jsx(JS,{to:"/",children:"Informatik Skript"})})]})}const XG=()=>x.jsx("footer",{children:"Informatik Gymnasium Muttenz"}),QG="modulepreload",JG=function(s){return"/gym-inf/"+s},lM={},eZ=function(e,t,i){let n=Promise.resolve();if(t&&t.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};var o=c;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");n=c(t.map(u=>{if(u=JG(u),u in lM)return;lM[u]=!0;const d=u.endsWith(".css"),g=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${g}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":QG,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((_,v)=>{m.addEventListener("load",_),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return n.then(a=>{for(const l of a||[])l.status==="rejected"&&r(l.reason);return e().catch(r)})};function Fr({to:s,elem:e,children:t}){const{setVisible:i}=Ee.useContext(j_);Ee.useEffect(()=>{},[]);const n=()=>{i(!1)};return x.jsx("li",{children:x.jsx(JS,{onClick:n,to:s,children:t})})}function tZ(){const{fms:s,setFms:e}=Ee.useContext(j_),t=()=>{e(!1)},i=()=>{e(!0)};return x.jsxs(x.Fragment,{children:[x.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-evenly"},children:[x.jsx("h2",{style:{cursor:"pointer"},className:s?"":"active-school",onClick:t,children:"Gym"}),x.jsx("h2",{style:{cursor:"pointer"},className:s?"active-school":"",onClick:i,children:"FMS"})]}),s?x.jsx(iZ,{}):x.jsx(nZ,{})]})}function iZ(){return x.jsx(x.Fragment,{children:x.jsxs("div",{children:[x.jsx("h2",{children:"1. Klasse"}),x.jsxs("ol",{className:"nav",children:[x.jsxs("li",{children:["Obsidian",x.jsxs("ol",{children:[x.jsx(Fr,{to:"obsidian",children:"Einführung"}),x.jsx(Fr,{to:"obsidian-md",children:"Markdown in Obsidian"})]})]}),x.jsxs("li",{children:["Einführung",x.jsxs("ol",{children:[x.jsx(Fr,{to:"fms/hardware",children:"Computer Hardware"}),x.jsx(Fr,{to:"fms/binary",children:"Binärsystem"}),x.jsx(Fr,{to:"fms/Hex",children:"Hexadezimalsystem"})]})]})]}),x.jsx("h2",{children:"2. Klasse"}),x.jsx("ol",{className:"nav",children:x.jsxs("li",{children:["Tabellenkalkulation",x.jsxs("ol",{children:[x.jsx(Fr,{to:"fms/excel",children:"Einstieg in Excel"}),x.jsx(Fr,{to:"fms/excel-spielplan",children:"Zusammenarbeit in Excel"})]})]})})]})})}function nZ(){return x.jsx(x.Fragment,{children:x.jsxs("div",{children:[x.jsx("h2",{children:"Theorie"}),x.jsxs("ol",{className:"nav",children:[x.jsxs("li",{children:["Obsidian",x.jsxs("ol",{children:[x.jsx(Fr,{to:"obsidian",children:"Obsidian"}),x.jsx(Fr,{to:"obsidian-md",children:"Markdown in Obsidian"})]})]}),x.jsxs("li",{children:["Einführung",x.jsxs("ol",{children:[x.jsx(Fr,{to:"fms/hardware",children:"Computer Hardware"}),x.jsx(Fr,{to:"fms/binary",children:"Binärsystem"}),x.jsx(Fr,{to:"fms/Hex",children:"Hexadezimalsystem"}),x.jsx(Fr,{to:"information",children:"Daten und Informationen"}),x.jsx(Fr,{to:"colors",children:"Farben"})]})]})]}),x.jsx("h2",{children:"Praktikum"}),x.jsx("ol",{className:"nav",children:x.jsx("li",{children:x.jsx("ol",{children:x.jsx(Fr,{to:"praktikum/install",children:"Installation"})})})})]})})}function sZ(){const{visible:s}=Ee.useContext(j_);return x.jsx("aside",{className:s?"show sidenav":"sidenav",children:x.jsx(tZ,{})})}function rZ(){return x.jsxs(x.Fragment,{children:[x.jsxs(IG,{children:[x.jsx(YG,{}),x.jsx(sZ,{}),x.jsx("main",{children:x.jsx(lG,{})})]}),x.jsx(XG,{})]})}function cM(s){const e={h2:"h2",p:"p",...s.components};return x.jsxs(x.Fragment,{children:[x.jsx(e.h2,{children:"Unterlagen zum Fach Informatik"}),`
`,x.jsx(e.p,{children:`Auf dieser Webseite finden Sie alle Unterlagen die Sie für das Fach Informatik
brauchen. Schauen Sie sich in den verschiedenen Unterabschnitten um, Sie finden
da zu allen Themen die wir im Unterricht behandeln viele Code-Beispiele, und
auch Erklärungen dazu.`}),`
`,x.jsx(e.p,{children:`Wenn Sie keine Navigationsleiste auf der Seite sehen, klicken Sie auf das
Hamburger-Menu. Wenn Sie auf den Titel klicken, werden Sie auf diese Seite
zurück gebracht.`}),`
`,x.jsx(e.h2,{children:"Gym und FMS"}),`
`,x.jsxs(e.p,{children:[`Sie finden alle Unterlagen zu den verschiedenen Schulen in der Seitenleiste,
Sie müssen nur ganz oben die richtige Schule auswählen und dann zum jeweiligen
Schuljahr gehen. Über das Schuljahr werden neue Seiten dazu kommen, und einige
können sich auch noch ändern. Falls Sie also den Inhalt einer Seite unbedingt
brauchen, müssen Sie diesen zu sich kopieren (am besten in `,x.jsx(JS,{to:"/obsidian",children:"Obsidian"}),")."]})]})}function oZ(s={}){const{wrapper:e}=s.components||{};return e?x.jsx(e,{...s,children:x.jsx(cM,{...s})}):cM(s)}const aZ="_container_fr3gu_1",lZ="_colorinput_fr3gu_11",cZ="_inputgroup_fr3gu_20",uZ="_red_fr3gu_26",hZ="_green_fr3gu_29",dZ="_blue_fr3gu_32",fZ="_huge_fr3gu_36",gZ="_box_fr3gu_44",Ro={container:aZ,colorinput:lZ,inputgroup:cZ,red:uZ,green:hZ,blue:dZ,huge:fZ,box:gZ};function mZ(){const[s,e]=Ee.useState("#000000"),[t,i]=Ee.useState("00"),[n,r]=Ee.useState("00"),[o,a]=Ee.useState("00");Ee.useEffect(()=>{e(`#${l(t)}${l(n)}${l(o)}`)},[t,n,o]);const l=g=>{let m=`${g}`;for(;m.length<2;)m=`0${m}`,console.log(m);return m},c=g=>{i(g.target.value)},u=g=>{r(g.target.value)},d=g=>{a(g.target.value)};return x.jsxs("div",{className:Ro.container,children:[x.jsx("div",{className:Ro.huge,children:"#"}),x.jsxs("div",{className:Ro.inputgroup,children:[x.jsx("label",{className:Ro.red,htmlFor:"red",children:"Rot"}),x.jsx("input",{className:Ro.colorinput,id:"red",maxLength:"2",type:"text",name:"red",value:t,onChange:c})]}),x.jsxs("div",{className:Ro.inputgroup,children:[x.jsx("label",{className:Ro.green,htmlFor:"green",children:"Grün"}),x.jsx("input",{className:Ro.colorinput,id:"green",maxLength:"2",type:"text",name:"green",value:n,onChange:u})]}),x.jsxs("div",{className:Ro.inputgroup,children:[x.jsx("label",{className:Ro.blue,htmlFor:"blue",children:"Blau"}),x.jsx("input",{className:Ro.colorinput,id:"blue",maxLength:"2",type:"text",name:"blue",value:o,onChange:d})]}),x.jsx("div",{className:Ro.huge,children:"="}),x.jsx("div",{className:Ro.box,style:{backgroundColor:s},children:" "})]})}function _0({hex:s}){return x.jsx("div",{style:{backgroundColor:s,height:"1.5em",width:"1.5em"}})}function Ko({children:s,title:e="Beispiel",classes:t="",id:i=""}){return x.jsxs("div",{className:`highlight ${t}`,children:[x.jsx("h3",{id:i,children:`${e}`}),s]})}function Ao(s,e=0){return s[s.length-(1+e)]}function pZ(s){if(s.length===0)throw new Error("Invalid tail call");return[s.slice(0,s.length-1),s[s.length-1]]}function Rn(s,e,t=(i,n)=>i===n){if(s===e)return!0;if(!s||!e||s.length!==e.length)return!1;for(let i=0,n=s.length;i<n;i++)if(!t(s[i],e[i]))return!1;return!0}function _Z(s,e){const t=s.length-1;e<t&&(s[e]=s[t]),s.pop()}function vZ(s,e,t){return bZ(s.length,i=>t(s[i],e))}function bZ(s,e){let t=0,i=s-1;for(;t<=i;){const n=(t+i)/2|0,r=e(n);if(r<0)t=n+1;else if(r>0)i=n-1;else return n}return-(t+1)}function*ZD(s,e){let t,i;for(const n of s)i!==void 0&&e(i,n)?t.push(n):(t&&(yield t),t=[n]),i=n;t&&(yield t)}function HB(s,e){for(let t=0;t<=s.length;t++)e(t===0?void 0:s[t-1],t===s.length?void 0:s[t])}function wZ(s,e){for(let t=0;t<s.length;t++)e(t===0?void 0:s[t-1],s[t],t+1===s.length?void 0:s[t+1])}function YD(s){return s.filter(e=>!!e)}function uM(s){let e=0;for(let t=0;t<s.length;t++)s[t]&&(s[e]=s[t],e+=1);s.length=e}function CZ(s){return!Array.isArray(s)||s.length===0}function e2(s){return Array.isArray(s)&&s.length>0}function Sf(s,e=t=>t){const t=new Set;return s.filter(i=>{const n=e(i);return t.has(n)?!1:(t.add(n),!0)})}function XD(s,e){return s.length>0?s[0]:e}function _r(s,e){let t=typeof e=="number"?s:0;typeof e=="number"?t=s:(t=0,e=s);const i=[];if(t<=e)for(let n=t;n<e;n++)i.push(n);else for(let n=t;n>e;n--)i.push(n);return i}function t2(s,e,t){const i=s.slice(0,e),n=s.slice(e);return i.concat(t,n)}function rk(s,e){const t=s.indexOf(e);t>-1&&(s.splice(t,1),s.unshift(e))}function Eb(s,e){const t=s.indexOf(e);t>-1&&(s.splice(t,1),s.push(e))}function qL(s,e){for(const t of e)s.push(t)}function yZ(s,e,t){const i=jB(s,e),n=s.length,r=t.length;s.length=n+r;for(let o=n-1;o>=i;o--)s[o+r]=s[o];for(let o=0;o<r;o++)s[o+i]=t[o]}function hM(s,e,t,i){const n=jB(s,e);let r=s.splice(n,t);return r===void 0&&(r=[]),yZ(s,n,i),r}function jB(s,e){return e<0?Math.max(e+s.length,0):Math.min(e,s.length)}var Y1;(function(s){function e(r){return r<0}s.isLessThan=e;function t(r){return r<=0}s.isLessThanOrEqual=t;function i(r){return r>0}s.isGreaterThan=i;function n(r){return r===0}s.isNeitherLessOrGreaterThan=n,s.greaterThan=1,s.lessThan=-1,s.neitherLessOrGreaterThan=0})(Y1||(Y1={}));function ma(s,e){return(t,i)=>e(s(t),s(i))}function SZ(...s){return(e,t)=>{for(const i of s){const n=i(e,t);if(!Y1.isNeitherLessOrGreaterThan(n))return n}return Y1.neitherLessOrGreaterThan}}const Sh=(s,e)=>s-e,xZ=(s,e)=>Sh(s?1:0,e?1:0);function kZ(s){return(e,t)=>-s(e,t)}class cu{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const i=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,i}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const i=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,i}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}const lm=class lm{constructor(e){this.iterate=e}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new lm(t=>this.iterate(i=>e(i)?t(i):!0))}map(e){return new lm(t=>this.iterate(i=>t(e(i))))}findLast(e){let t;return this.iterate(i=>(e(i)&&(t=i),!0)),t}findLastMaxBy(e){let t,i=!0;return this.iterate(n=>((i||Y1.isGreaterThan(e(n,t)))&&(i=!1,t=n),!0)),t}};lm.empty=new lm(e=>{});let sf=lm;function bo(s){return typeof s=="string"}function Cr(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)&&!(s instanceof RegExp)&&!(s instanceof Date)}function LZ(s){const e=Object.getPrototypeOf(Uint8Array);return typeof s=="object"&&s instanceof e}function vp(s){return typeof s=="number"&&!isNaN(s)}function dM(s){return!!s&&typeof s[Symbol.iterator]=="function"}function UB(s){return s===!0||s===!1}function Uo(s){return typeof s>"u"}function Gm(s){return!mo(s)}function mo(s){return Uo(s)||s===null}function xh(s,e){if(!s)throw new Error("Unexpected type")}function $B(s){if(mo(s))throw new Error("Assertion Failed: argument is undefined or null");return s}function dC(s){return typeof s=="function"}function DZ(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++)EZ(s[i],e[i])}function EZ(s,e){if(bo(e)){if(typeof s!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(dC(e)){try{if(s instanceof e)return}catch{}if(!mo(s)&&s.constructor===e||e.length===1&&e.call(void 0,s)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function Ju(s){if(!s||typeof s!="object"||s instanceof RegExp)return s;const e=Array.isArray(s)?[]:{};return Object.entries(s).forEach(([t,i])=>{e[t]=i&&typeof i=="object"?Ju(i):i}),e}function TZ(s){if(!s||typeof s!="object")return s;const e=[s];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const i in t)if(qB.call(t,i)){const n=t[i];typeof n=="object"&&!Object.isFrozen(n)&&!LZ(n)&&e.push(n)}}return s}const qB=Object.prototype.hasOwnProperty;function KB(s,e){return KL(s,e,new Set)}function KL(s,e,t){if(mo(s))return s;const i=e(s);if(typeof i<"u")return i;if(Array.isArray(s)){const n=[];for(const r of s)n.push(KL(r,e,t));return n}if(Cr(s)){if(t.has(s))throw new Error("Cannot clone recursive data-structure");t.add(s);const n={};for(const r in s)qB.call(s,r)&&(n[r]=KL(s[r],e,t));return t.delete(s),n}return s}function jr(s,e){if(s===e)return!0;if(s==null||e===null||e===void 0||typeof s!=typeof e||typeof s!="object"||Array.isArray(s)!==Array.isArray(e))return!1;let t,i;if(Array.isArray(s)){if(s.length!==e.length)return!1;for(t=0;t<s.length;t++)if(!jr(s[t],e[t]))return!1}else{const n=[];for(i in s)n.push(i);n.sort();const r=[];for(i in e)r.push(i);if(r.sort(),!jr(n,r))return!1;for(t=0;t<n.length;t++)if(!jr(s[n[t]],e[n[t]]))return!1}return!0}function NZ(s){let e=[];for(;Object.prototype!==s;)e=e.concat(Object.getOwnPropertyNames(s)),s=Object.getPrototypeOf(s);return e}function GL(s){const e=[];for(const t of NZ(s))typeof s[t]=="function"&&e.push(t);return e}function IZ(s,e){const t=n=>function(){const r=Array.prototype.slice.call(arguments,0);return e(n,r)},i={};for(const n of s)i[n]=t(n);return i}function GB(){return globalThis._VSCODE_NLS_MESSAGES}function QD(){return globalThis._VSCODE_NLS_LANGUAGE}const MZ=QD()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function fM(s,e){let t;return e.length===0?t=s:t=s.replace(/\{(\d+)\}/g,(i,n)=>{const r=n[0],o=e[r];let a=i;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),MZ&&(t="［"+t.replace(/[aouei]/g,"$&$&")+"］"),t}function b(s,e,...t){return fM(typeof s=="number"?RZ(s,e):e,t)}function RZ(s,e){const t=GB()?.[s];if(typeof t!="string"){if(typeof e=="string")return e;throw new Error(`!!! NLS MISSING: ${s} !!!`)}return t}const zg="en";let fC=!1,gC=!1,Mw=!1,ZB=!1,JD=!1,e8=!1,YB=!1,Tb,ok=zg,gM=zg,AZ,wc;const Jc=globalThis;let Oo;typeof Jc.vscode<"u"&&typeof Jc.vscode.process<"u"?Oo=Jc.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Oo=process);const PZ=typeof Oo?.versions?.electron=="string",OZ=PZ&&Oo?.type==="renderer";if(typeof Oo=="object"){fC=Oo.platform==="win32",gC=Oo.platform==="darwin",Mw=Oo.platform==="linux",Mw&&Oo.env.SNAP&&Oo.env.SNAP_REVISION,Oo.env.CI||Oo.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Tb=zg,ok=zg;const s=Oo.env.VSCODE_NLS_CONFIG;if(s)try{const e=JSON.parse(s);Tb=e.userLocale,gM=e.osLocale,ok=e.resolvedLanguage||zg,AZ=e.languagePack?.translationsConfigFile}catch{}ZB=!0}else typeof navigator=="object"&&!OZ?(wc=navigator.userAgent,fC=wc.indexOf("Windows")>=0,gC=wc.indexOf("Macintosh")>=0,e8=(wc.indexOf("Macintosh")>=0||wc.indexOf("iPad")>=0||wc.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Mw=wc.indexOf("Linux")>=0,YB=wc?.indexOf("Mobi")>=0,JD=!0,ok=QD()||zg,Tb=navigator.language.toLowerCase(),gM=Tb):console.error("Unable to resolve platform.");const $r=fC,qt=gC,xr=Mw,mC=ZB,bp=JD,FZ=JD&&typeof Jc.importScripts=="function",BZ=FZ?Jc.origin:void 0,xf=e8,XB=YB,jl=wc,WZ=typeof Jc.postMessage=="function"&&!Jc.importScripts,QB=(()=>{if(WZ){const s=[];Jc.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,n=s.length;i<n;i++){const r=s[i];if(r.id===t.data.vscodeScheduleAsyncWork){s.splice(i,1),r.callback();return}}});let e=0;return t=>{const i=++e;s.push({id:i,callback:t}),Jc.postMessage({vscodeScheduleAsyncWork:i},"*")}}return s=>setTimeout(s)})(),ha=gC||e8?2:fC?1:3;let mM=!0,pM=!1;function VZ(){if(!pM){pM=!0;const s=new Uint8Array(2);s[0]=1,s[1]=2,mM=new Uint16Array(s.buffer)[0]===513}return mM}const JB=!!(jl&&jl.indexOf("Chrome")>=0),zZ=!!(jl&&jl.indexOf("Firefox")>=0),HZ=!!(!JB&&jl&&jl.indexOf("Safari")>=0),jZ=!!(jl&&jl.indexOf("Edg/")>=0),UZ=!!(jl&&jl.indexOf("Android")>=0),Ss={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var ei;(function(s){function e(L){return L&&typeof L=="object"&&typeof L[Symbol.iterator]=="function"}s.is=e;const t=Object.freeze([]);function i(){return t}s.empty=i;function*n(L){yield L}s.single=n;function r(L){return e(L)?L:n(L)}s.wrap=r;function o(L){return L||t}s.from=o;function*a(L){for(let T=L.length-1;T>=0;T--)yield L[T]}s.reverse=a;function l(L){return!L||L[Symbol.iterator]().next().done===!0}s.isEmpty=l;function c(L){return L[Symbol.iterator]().next().value}s.first=c;function u(L,T){let A=0;for(const I of L)if(T(I,A++))return!0;return!1}s.some=u;function d(L,T){for(const A of L)if(T(A))return A}s.find=d;function*g(L,T){for(const A of L)T(A)&&(yield A)}s.filter=g;function*m(L,T){let A=0;for(const I of L)yield T(I,A++)}s.map=m;function*_(L,T){let A=0;for(const I of L)yield*T(I,A++)}s.flatMap=_;function*v(...L){for(const T of L)yield*T}s.concat=v;function w(L,T,A){let I=A;for(const O of L)I=T(I,O);return I}s.reduce=w;function*y(L,T,A=L.length){for(T<0&&(T+=L.length),A<0?A+=L.length:A>L.length&&(A=L.length);T<A;T++)yield L[T]}s.slice=y;function S(L,T=Number.POSITIVE_INFINITY){const A=[];if(T===0)return[A,L];const I=L[Symbol.iterator]();for(let O=0;O<T;O++){const F=I.next();if(F.done)return[A,s.empty()];A.push(F.value)}return[A,{[Symbol.iterator](){return I}}]}s.consume=S;async function k(L){const T=[];for await(const A of L)T.push(A);return Promise.resolve(T)}s.asyncToArray=k})(ei||(ei={}));var Zc;let Ln=(Zc=class{constructor(e){this.element=e,this.next=Zc.Undefined,this.prev=Zc.Undefined}},Zc.Undefined=new Zc(void 0),Zc);class zr{constructor(){this._first=Ln.Undefined,this._last=Ln.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Ln.Undefined}clear(){let e=this._first;for(;e!==Ln.Undefined;){const t=e.next;e.prev=Ln.Undefined,e.next=Ln.Undefined,e=t}this._first=Ln.Undefined,this._last=Ln.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new Ln(e);if(this._first===Ln.Undefined)this._first=i,this._last=i;else if(t){const r=this._last;this._last=i,i.prev=r,r.next=i}else{const r=this._first;this._first=i,i.next=r,r.prev=i}this._size+=1;let n=!1;return()=>{n||(n=!0,this._remove(i))}}shift(){if(this._first!==Ln.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Ln.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Ln.Undefined&&e.next!==Ln.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Ln.Undefined&&e.next===Ln.Undefined?(this._first=Ln.Undefined,this._last=Ln.Undefined):e.next===Ln.Undefined?(this._last=this._last.prev,this._last.next=Ln.Undefined):e.prev===Ln.Undefined&&(this._first=this._first.next,this._first.prev=Ln.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Ln.Undefined;)yield e.element,e=e.next}}const eW="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function $Z(s=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of eW)s.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const t8=$Z();function i8(s){let e=t8;if(s&&s instanceof RegExp)if(s.global)e=s;else{let t="g";s.ignoreCase&&(t+="i"),s.multiline&&(t+="m"),s.unicode&&(t+="u"),e=new RegExp(s.source,t)}return e.lastIndex=0,e}const tW=new zr;tW.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function X1(s,e,t,i,n){if(e=i8(e),n||(n=ei.first(tW)),t.length>n.maxLen){let c=s-n.maxLen/2;return c<0?c=0:i+=c,t=t.substring(c,s+n.maxLen/2),X1(s,e,t,i,n)}const r=Date.now(),o=s-1-i;let a=-1,l=null;for(let c=1;!(Date.now()-r>=n.timeBudget);c++){const u=o-n.windowSize*c;e.lastIndex=Math.max(0,u);const d=qZ(e,t,o,a);if(!d&&l||(l=d,u<=0))break;a=u}if(l){const c={word:l[0],startColumn:i+1+l.index,endColumn:i+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function qZ(s,e,t,i){let n;for(;n=s.exec(e);){const r=n.index||0;if(r<=t&&s.lastIndex>=t)return n;if(i>0&&r>i)return null}return null}const Cl=8;class iW{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class nW{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class Ii{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}applyUpdate(e,t){return i2(e,t)}compute(e,t,i){return i}}class e1{constructor(e,t){this.newValue=e,this.didChange=t}}function i2(s,e){if(typeof s!="object"||typeof e!="object"||!s||!e)return new e1(e,s!==e);if(Array.isArray(s)||Array.isArray(e)){const i=Array.isArray(s)&&Array.isArray(e)&&Rn(s,e);return new e1(e,!i)}let t=!1;for(const i in e)if(e.hasOwnProperty(i)){const n=i2(s[i],e[i]);n.didChange&&(s[i]=n.newValue,t=!0)}return new e1(s,t)}class U_{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return i2(e,t)}validate(e){return this.defaultValue}}class wp{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}applyUpdate(e,t){return i2(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}}function Ve(s,e){return typeof s>"u"?e:s==="false"?!1:!!s}class Vt extends wp{constructor(e,t,i,n=void 0){typeof n<"u"&&(n.type="boolean",n.default=i),super(e,t,i,n)}validate(e){return Ve(e,this.defaultValue)}}function wd(s,e,t,i){if(typeof s>"u")return e;let n=parseInt(s,10);return isNaN(n)?e:(n=Math.max(t,n),n=Math.min(i,n),n|0)}class mi extends wp{static clampedInt(e,t,i,n){return wd(e,t,i,n)}constructor(e,t,i,n,r,o=void 0){typeof o<"u"&&(o.type="integer",o.default=i,o.minimum=n,o.maximum=r),super(e,t,i,o),this.minimum=n,this.maximum=r}validate(e){return mi.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}function KZ(s,e,t,i){if(typeof s>"u")return e;const n=_o.float(s,e);return _o.clamp(n,t,i)}class _o extends wp{static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const i=parseFloat(e);return isNaN(i)?t:i}constructor(e,t,i,n,r){typeof r<"u"&&(r.type="number",r.default=i),super(e,t,i,r),this.validationFn=n}validate(e){return this.validationFn(_o.float(e,this.defaultValue))}}class Hs extends wp{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,i,n=void 0){typeof n<"u"&&(n.type="string",n.default=i),super(e,t,i,n)}validate(e){return Hs.string(e,this.defaultValue)}}function Hi(s,e,t,i){return typeof s!="string"?e:i&&s in i?i[s]:t.indexOf(s)===-1?e:s}class zi extends wp{constructor(e,t,i,n,r=void 0){typeof r<"u"&&(r.type="string",r.enum=n,r.default=i),super(e,t,i,r),this._allowedValues=n}validate(e){return Hi(e,this.defaultValue,this._allowedValues)}}class Nb extends Ii{constructor(e,t,i,n,r,o,a=void 0){typeof a<"u"&&(a.type="string",a.enum=r,a.default=n),super(e,t,i,a),this._allowedValues=r,this._convert=o}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function GZ(s){switch(s){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class ZZ extends Ii{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[b("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),b("accessibilitySupport.on","Optimize for usage with a Screen Reader."),b("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:b("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}}class YZ extends Ii{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:b("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:b("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Ve(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Ve(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function XZ(s){switch(s){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var Yn;(function(s){s[s.Line=1]="Line",s[s.Block=2]="Block",s[s.Underline=3]="Underline",s[s.LineThin=4]="LineThin",s[s.BlockOutline=5]="BlockOutline",s[s.UnderlineThin=6]="UnderlineThin"})(Yn||(Yn={}));function QZ(s){switch(s){case"line":return Yn.Line;case"block":return Yn.Block;case"underline":return Yn.Underline;case"line-thin":return Yn.LineThin;case"block-outline":return Yn.BlockOutline;case"underline-thin":return Yn.UnderlineThin}}class JZ extends U_{constructor(){super(143)}compute(e,t,i){const n=["monaco-editor"];return t.get(39)&&n.push(t.get(39)),e.extraEditorClassName&&n.push(e.extraEditorClassName),t.get(74)==="default"?n.push("mouse-default"):t.get(74)==="copy"&&n.push("mouse-copy"),t.get(112)&&n.push("showUnused"),t.get(141)&&n.push("showDeprecated"),n.join(" ")}}class eY extends Vt{constructor(){super(37,"emptySelectionClipboard",!0,{description:b("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}}class tY extends Ii{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:b("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[b("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),b("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),b("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:b("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[b("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),b("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),b("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:b("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:b("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:qt},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:b("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:b("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Ve(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Hi(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Hi(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Ve(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Ve(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Ve(t.loop,this.defaultValue.loop)}}}const Ec=class Ec extends Ii{constructor(){super(51,"fontLigatures",Ec.OFF,{anyOf:[{type:"boolean",description:b("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:b("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:b("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?Ec.OFF:e==="true"?Ec.ON:e:e?Ec.ON:Ec.OFF}};Ec.OFF='"liga" off, "calt" off',Ec.ON='"liga" on, "calt" on';let kf=Ec;const Tc=class Tc extends Ii{constructor(){super(54,"fontVariations",Tc.OFF,{anyOf:[{type:"boolean",description:b("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:b("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:b("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Tc.OFF:e==="true"?Tc.TRANSLATE:e:e?Tc.TRANSLATE:Tc.OFF}compute(e,t,i){return e.fontInfo.fontVariationSettings}};Tc.OFF="normal",Tc.TRANSLATE="translate";let Q1=Tc;class iY extends U_{constructor(){super(50)}compute(e,t,i){return e.fontInfo}}class nY extends wp{constructor(){super(52,"fontSize",wo.fontSize,{type:"number",minimum:6,maximum:100,default:wo.fontSize,description:b("fontSize","Controls the font size in pixels.")})}validate(e){const t=_o.float(e,this.defaultValue);return t===0?wo.fontSize:_o.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}}const kl=class kl extends Ii{constructor(){super(53,"fontWeight",wo.fontWeight,{anyOf:[{type:"number",minimum:kl.MINIMUM_VALUE,maximum:kl.MAXIMUM_VALUE,errorMessage:b("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:kl.SUGGESTION_VALUES}],default:wo.fontWeight,description:b("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(mi.clampedInt(e,wo.fontWeight,kl.MINIMUM_VALUE,kl.MAXIMUM_VALUE))}};kl.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],kl.MINIMUM_VALUE=1,kl.MAXIMUM_VALUE=1e3;let ZL=kl;class sY extends Ii{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[b("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),b("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),b("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:b("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:b("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:b("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:b("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:b("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:b("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:b("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:b("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:b("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:b("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:b("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:Hi(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??Hi(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??Hi(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??Hi(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??Hi(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??Hi(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??Hi(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:Hs.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:Hs.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:Hs.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:Hs.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:Hs.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:Hs.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}}class rY extends Ii{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:b("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:b("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:b("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:b("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:b("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ve(t.enabled,this.defaultValue.enabled),delay:mi.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Ve(t.sticky,this.defaultValue.sticky),hidingDelay:mi.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:Ve(t.above,this.defaultValue.above)}}}class wm extends U_{constructor(){super(146)}compute(e,t,i){return wm.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,i=Math.floor(e.paddingTop/e.lineHeight);let n=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(n=Math.max(n,t-1));const r=(i+e.viewLineCount+n)/(e.pixelRatio*e.height),o=Math.floor(e.viewLineCount/r);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:n,desiredRatio:r,minimapLineCount:o}}static _computeMinimapLayout(e,t){const i=e.outerWidth,n=e.outerHeight,r=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(r*n),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:n};const o=t.stableMinimapLayoutInput,a=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.paddingTop===o.paddingTop&&e.paddingBottom===o.paddingBottom&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,u=e.scrollBeyondLastLine,d=e.minimap.renderCharacters;let g=r>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const m=e.minimap.maxColumn,_=e.minimap.size,v=e.minimap.side,w=e.verticalScrollbarWidth,y=e.viewLineCount,S=e.remainingWidth,k=e.isViewportWrapping,L=d?2:3;let T=Math.floor(r*n);const A=T/r;let I=!1,O=!1,F=L*g,J=g/r,Y=1;if(_==="fill"||_==="fit"){const{typicalViewportLineCount:ae,extraLinesBeforeFirstLine:xe,extraLinesBeyondLastLine:fe,desiredRatio:X,minimapLineCount:me}=wm.computeContainedMinimapLineCount({viewLineCount:y,scrollBeyondLastLine:u,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:n,lineHeight:l,pixelRatio:r});if(y/me>1)I=!0,O=!0,g=1,F=1,J=g/r;else{let it=!1,He=g+1;if(_==="fit"){const st=Math.ceil((xe+y+fe)*F);k&&a&&S<=t.stableFitRemainingWidth?(it=!0,He=t.stableFitMaxMinimapScale):it=st>T}if(_==="fill"||it){I=!0;const st=g;F=Math.min(l*r,Math.max(1,Math.floor(1/X))),k&&a&&S<=t.stableFitRemainingWidth&&(He=t.stableFitMaxMinimapScale),g=Math.min(He,Math.max(1,Math.floor(F/L))),g>st&&(Y=Math.min(2,g/st)),J=g/r/Y,T=Math.ceil(Math.max(ae,xe+y+fe)*F),k?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=S,t.stableFitMaxMinimapScale=g):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const G=Math.floor(m*J),ie=Math.min(G,Math.max(0,Math.floor((S-w-2)*J/(c+J)))+Cl);let Z=Math.floor(r*ie);const ue=Z/r;Z=Math.floor(Z*Y);const be=d?1:2,ye=v==="left"?0:i-ie-w;return{renderMinimap:be,minimapLeft:ye,minimapWidth:ie,minimapHeightIsEditorHeight:I,minimapIsSampling:O,minimapScale:g,minimapLineHeight:F,minimapCanvasInnerWidth:Z,minimapCanvasInnerHeight:T,minimapCanvasOuterWidth:ue,minimapCanvasOuterHeight:A}}static computeLayout(e,t){const i=t.outerWidth|0,n=t.outerHeight|0,r=t.lineHeight|0,o=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,u=t.viewLineCount,d=e.get(138),g=d==="inherit"?e.get(137):d,m=g==="inherit"?e.get(133):g,_=e.get(136),v=t.isDominatedByLongLines,w=e.get(57),y=e.get(68).renderType!==0,S=e.get(69),k=e.get(106),L=e.get(84),T=e.get(73),A=e.get(104),I=A.verticalScrollbarSize,O=A.verticalHasArrows,F=A.arrowSize,J=A.horizontalScrollbarSize,Y=e.get(43),G=e.get(111)!=="never";let ie=e.get(66);Y&&G&&(ie+=16);let Z=0;if(y){const St=Math.max(o,S);Z=Math.round(St*l)}let ue=0;w&&(ue=r*t.glyphMarginDecorationLaneCount);let be=0,ye=be+ue,ae=ye+Z,xe=ae+ie;const fe=i-ue-Z-ie;let X=!1,me=!1,ze=-1;g==="inherit"&&v?(X=!0,me=!0):m==="on"||m==="bounded"?me=!0:m==="wordWrapColumn"&&(ze=_);const it=wm._computeMinimapLayout({outerWidth:i,outerHeight:n,lineHeight:r,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:k,paddingTop:L.top,paddingBottom:L.bottom,minimap:T,verticalScrollbarWidth:I,viewLineCount:u,remainingWidth:fe,isViewportWrapping:me},t.memory||new nW);it.renderMinimap!==0&&it.minimapLeft===0&&(be+=it.minimapWidth,ye+=it.minimapWidth,ae+=it.minimapWidth,xe+=it.minimapWidth);const He=fe-it.minimapWidth,st=Math.max(1,Math.floor((He-I-2)/a)),gt=O?F:0;return me&&(ze=Math.max(1,st),m==="bounded"&&(ze=Math.min(ze,_))),{width:i,height:n,glyphMarginLeft:be,glyphMarginWidth:ue,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:ye,lineNumbersWidth:Z,decorationsLeft:ae,decorationsWidth:ie,contentLeft:xe,contentWidth:He,minimap:it,viewportColumn:st,isWordWrapMinified:X,isViewportWrapping:me,wrappingColumn:ze,verticalScrollbarWidth:I,horizontalScrollbarHeight:J,overviewRuler:{top:gt,width:I,height:n-2*gt,right:0}}}}class oY extends Ii{constructor(){super(140,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[b("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),b("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:b("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return Hi(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(2)===2?"advanced":i}}var Sc;(function(s){s.Off="off",s.OnCode="onCode",s.On="on"})(Sc||(Sc={}));class aY extends Ii{constructor(){const e={enabled:Sc.OnCode};super(65,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[Sc.Off,Sc.OnCode,Sc.On],default:e.enabled,enumDescriptions:[b("editor.lightbulb.enabled.off","Disable the code action menu."),b("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),b("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:b("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Hi(e.enabled,this.defaultValue.enabled,[Sc.Off,Sc.OnCode,Sc.On])}}}class lY extends Ii{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(116,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:b("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:b("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:b("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:b("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ve(t.enabled,this.defaultValue.enabled),maxLineCount:mi.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:Hi(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:Ve(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class cY extends Ii{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(142,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:b("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[b("editor.inlayHints.on","Inlay hints are enabled"),b("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",qt?"Ctrl+Option":"Ctrl+Alt"),b("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",qt?"Ctrl+Option":"Ctrl+Alt"),b("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:b("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:b("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:b("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:Hi(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:mi.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:Hs.string(t.fontFamily,this.defaultValue.fontFamily),padding:Ve(t.padding,this.defaultValue.padding)}}}class uY extends Ii{constructor(){super(66,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):mi.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?mi.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}}class hY extends _o{constructor(){super(67,"lineHeight",wo.lineHeight,e=>_o.clamp(e,0,150),{markdownDescription:b("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,i){return e.fontInfo.lineHeight}}class dY extends Ii{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(73,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:b("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:b("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[b("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),b("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),b("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:b("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:b("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:b("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:b("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:b("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:b("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:b("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:b("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:b("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:b("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ve(t.enabled,this.defaultValue.enabled),autohide:Ve(t.autohide,this.defaultValue.autohide),size:Hi(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Hi(t.side,this.defaultValue.side,["right","left"]),showSlider:Hi(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Ve(t.renderCharacters,this.defaultValue.renderCharacters),scale:mi.clampedInt(t.scale,1,1,3),maxColumn:mi.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:Ve(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:Ve(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:_o.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:_o.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}}function fY(s){return s==="ctrlCmd"?qt?"metaKey":"ctrlKey":"altKey"}class gY extends Ii{constructor(){super(84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:b("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:b("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:mi.clampedInt(t.top,0,0,1e3),bottom:mi.clampedInt(t.bottom,0,0,1e3)}}}class mY extends Ii{constructor(){const e={enabled:!0,cycle:!0};super(86,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:b("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:b("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ve(t.enabled,this.defaultValue.enabled),cycle:Ve(t.cycle,this.defaultValue.cycle)}}}class pY extends U_{constructor(){super(144)}compute(e,t,i){return e.pixelRatio}}class _Y extends Ii{constructor(){super(88,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}}class vY extends Ii{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[b("on","Quick suggestions show inside the suggest widget"),b("inline","Quick suggestions show as ghost text"),b("off","Quick suggestions are disabled")]}];super(90,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:b("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:b("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:b("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:b("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:n}=e,r=["on","inline","off"];let o,a,l;return typeof t=="boolean"?o=t?"on":"off":o=Hi(t,this.defaultValue.other,r),typeof i=="boolean"?a=i?"on":"off":a=Hi(i,this.defaultValue.comments,r),typeof n=="boolean"?l=n?"on":"off":l=Hi(n,this.defaultValue.strings,r),{other:o,comments:a,strings:l}}}class bY extends Ii{constructor(){super(68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[b("lineNumbers.off","Line numbers are not rendered."),b("lineNumbers.on","Line numbers are rendered as absolute number."),b("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),b("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:b("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}}function pC(s){const e=s.get(99);return e==="editable"?s.get(92):e!=="on"}class wY extends Ii{constructor(){const e=[],t={type:"number",description:b("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(103,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:b("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:b("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:mi.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const n=i;t.push({column:mi.clampedInt(n.column,0,0,1e4),color:n.color})}return t.sort((i,n)=>i.column-n.column),t}return this.defaultValue}}class CY extends Ii{constructor(){super(93,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}}function _M(s,e){if(typeof s!="string")return e;switch(s){case"hidden":return 2;case"visible":return 3;default:return 1}}let yY=class extends Ii{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(104,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[b("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),b("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),b("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:b("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[b("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),b("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),b("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:b("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:b("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:b("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:b("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:b("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=mi.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),n=mi.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:mi.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:_M(t.vertical,this.defaultValue.vertical),horizontal:_M(t.horizontal,this.defaultValue.horizontal),useShadows:Ve(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Ve(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Ve(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Ve(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Ve(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:mi.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:n,verticalSliderSize:mi.clampedInt(t.verticalSliderSize,n,0,1e3),scrollByPage:Ve(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:Ve(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}};const Oa="inUntrustedWorkspace",ud={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class SY extends Ii{constructor(){const e={nonBasicASCII:Oa,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Oa,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(126,"unicodeHighlight",e,{[ud.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Oa],default:e.nonBasicASCII,description:b("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[ud.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:b("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[ud.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:b("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[ud.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Oa],default:e.includeComments,description:b("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[ud.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Oa],default:e.includeStrings,description:b("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[ud.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:b("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[ud.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:b("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(jr(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(jr(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const n=super.applyUpdate(e,t);return i?new e1(n.newValue,!0):n}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:Cm(t.nonBasicASCII,Oa,[!0,!1,Oa]),invisibleCharacters:Ve(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Ve(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Cm(t.includeComments,Oa,[!0,!1,Oa]),includeStrings:Cm(t.includeStrings,Oa,[!0,!1,Oa]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[n,r]of Object.entries(e))r===!0&&(i[n]=!0);return i}}class xY extends Ii{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:b("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[b("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),b("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),b("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:b("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:b("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:b("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ve(t.enabled,this.defaultValue.enabled),mode:Hi(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:Hi(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:Ve(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:Ve(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:Hs.string(t.fontFamily,this.defaultValue.fontFamily)}}}class kY extends Ii{constructor(){const e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(63,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:b("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[b("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),b("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),b("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:b("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:b("inlineEdit.fontFamily","Controls the font family of the inline edit.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ve(t.enabled,this.defaultValue.enabled),showToolbar:Hi(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:Hs.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:Ve(t.keepOnBlur,this.defaultValue.keepOnBlur)}}}class LY extends Ii{constructor(){const e={enabled:Ss.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Ss.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:b("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:b("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ve(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:Ve(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class DY extends Ii{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[b("editor.guides.bracketPairs.true","Enables bracket pair guides."),b("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),b("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:b("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[b("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),b("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),b("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:b("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:b("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:b("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[b("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),b("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),b("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:b("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:Cm(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Cm(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Ve(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Ve(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Cm(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function Cm(s,e,t){const i=t.indexOf(s);return i===-1?e:t[i]}class EY extends Ii{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(119,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[b("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),b("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:b("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:b("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:b("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:b("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[b("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),b("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),b("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),b("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:b("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:b("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:b("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:b("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:b("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:b("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:b("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:b("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:b("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Hi(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Ve(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Ve(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Ve(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Ve(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:Hi(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:Ve(t.showIcons,this.defaultValue.showIcons),showStatusBar:Ve(t.showStatusBar,this.defaultValue.showStatusBar),preview:Ve(t.preview,this.defaultValue.preview),previewMode:Hi(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Ve(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Ve(t.showMethods,this.defaultValue.showMethods),showFunctions:Ve(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Ve(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Ve(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:Ve(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:Ve(t.showFields,this.defaultValue.showFields),showVariables:Ve(t.showVariables,this.defaultValue.showVariables),showClasses:Ve(t.showClasses,this.defaultValue.showClasses),showStructs:Ve(t.showStructs,this.defaultValue.showStructs),showInterfaces:Ve(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Ve(t.showModules,this.defaultValue.showModules),showProperties:Ve(t.showProperties,this.defaultValue.showProperties),showEvents:Ve(t.showEvents,this.defaultValue.showEvents),showOperators:Ve(t.showOperators,this.defaultValue.showOperators),showUnits:Ve(t.showUnits,this.defaultValue.showUnits),showValues:Ve(t.showValues,this.defaultValue.showValues),showConstants:Ve(t.showConstants,this.defaultValue.showConstants),showEnums:Ve(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Ve(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Ve(t.showKeywords,this.defaultValue.showKeywords),showWords:Ve(t.showWords,this.defaultValue.showWords),showColors:Ve(t.showColors,this.defaultValue.showColors),showFiles:Ve(t.showFiles,this.defaultValue.showFiles),showReferences:Ve(t.showReferences,this.defaultValue.showReferences),showFolders:Ve(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Ve(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Ve(t.showSnippets,this.defaultValue.showSnippets),showUsers:Ve(t.showUsers,this.defaultValue.showUsers),showIssues:Ve(t.showIssues,this.defaultValue.showIssues)}}}class TY extends Ii{constructor(){super(114,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:b("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:b("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Ve(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:Ve(e.selectSubwords,this.defaultValue.selectSubwords)}}}class NY extends Ii{constructor(){const e=[];super(131,"wordSegmenterLocales",e,{anyOf:[{description:b("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:b("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="string")try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}}class IY extends Ii{constructor(){super(139,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[b("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),b("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),b("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),b("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:b("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return t.get(2)===2?0:i}}class MY extends U_{constructor(){super(147)}compute(e,t,i){const n=t.get(146);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:n.isWordWrapMinified,isViewportWrapping:n.isViewportWrapping,wrappingColumn:n.wrappingColumn}}}class RY extends Ii{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:b("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:b("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[b("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),b("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ve(t.enabled,this.defaultValue.enabled),showDropSelector:Hi(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class AY extends Ii{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(85,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:b("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:b("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[b("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),b("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ve(t.enabled,this.defaultValue.enabled),showPasteSelector:Hi(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const PY="Consolas, 'Courier New', monospace",OY="Menlo, Monaco, 'Courier New', monospace",FY="'Droid Sans Mono', 'monospace', monospace",wo={fontFamily:qt?OY:xr?FY:PY,fontWeight:"normal",fontSize:qt?12:14,lineHeight:0,letterSpacing:0},Hg=[];function Se(s){return Hg[s.id]=s,s}const Bf={acceptSuggestionOnCommitCharacter:Se(new Vt(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:b("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:Se(new zi(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",b("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:b("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:Se(new ZZ),accessibilityPageSize:Se(new mi(3,"accessibilityPageSize",10,1,1073741824,{description:b("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:Se(new Hs(4,"ariaLabel",b("editorViewAccessibleLabel","Editor content"))),ariaRequired:Se(new Vt(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:Se(new Vt(8,"screenReaderAnnounceInlineSuggestion",!0,{description:b("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:Se(new zi(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",b("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),b("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:b("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:Se(new zi(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",b("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),b("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:b("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:Se(new zi(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",b("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:b("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:Se(new zi(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",b("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:b("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:Se(new zi(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",b("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),b("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:b("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:Se(new Nb(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],GZ,{enumDescriptions:[b("editor.autoIndent.none","The editor will not insert indentation automatically."),b("editor.autoIndent.keep","The editor will keep the current line's indentation."),b("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),b("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),b("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:b("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:Se(new Vt(13,"automaticLayout",!1)),autoSurround:Se(new zi(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[b("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),b("editor.autoSurround.quotes","Surround with quotes but not brackets."),b("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:b("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:Se(new LY),bracketPairGuides:Se(new DY),stickyTabStops:Se(new Vt(117,"stickyTabStops",!1,{description:b("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:Se(new Vt(17,"codeLens",!0,{description:b("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:Se(new Hs(18,"codeLensFontFamily","",{description:b("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:Se(new mi(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:b("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:Se(new Vt(20,"colorDecorators",!0,{description:b("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:Se(new zi(149,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[b("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),b("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),b("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:b("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:Se(new mi(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:b("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:Se(new Vt(22,"columnSelection",!1,{description:b("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:Se(new YZ),contextmenu:Se(new Vt(24,"contextmenu",!0)),copyWithSyntaxHighlighting:Se(new Vt(25,"copyWithSyntaxHighlighting",!0,{description:b("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:Se(new Nb(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],XZ,{description:b("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:Se(new zi(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[b("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),b("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),b("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:b("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:Se(new Nb(28,"cursorStyle",Yn.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],QZ,{description:b("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:Se(new mi(29,"cursorSurroundingLines",0,0,1073741824,{description:b("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:Se(new zi(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[b("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),b("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:b("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:Se(new mi(31,"cursorWidth",0,0,1073741824,{markdownDescription:b("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:Se(new Vt(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:Se(new Vt(33,"disableMonospaceOptimizations",!1)),domReadOnly:Se(new Vt(34,"domReadOnly",!1)),dragAndDrop:Se(new Vt(35,"dragAndDrop",!0,{description:b("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:Se(new eY),dropIntoEditor:Se(new RY),stickyScroll:Se(new lY),experimentalWhitespaceRendering:Se(new zi(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[b("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),b("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),b("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:b("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:Se(new Hs(39,"extraEditorClassName","")),fastScrollSensitivity:Se(new _o(40,"fastScrollSensitivity",5,s=>s<=0?5:s,{markdownDescription:b("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:Se(new tY),fixedOverflowWidgets:Se(new Vt(42,"fixedOverflowWidgets",!1)),folding:Se(new Vt(43,"folding",!0,{description:b("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:Se(new zi(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[b("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),b("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:b("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:Se(new Vt(45,"foldingHighlight",!0,{description:b("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:Se(new Vt(46,"foldingImportsByDefault",!1,{description:b("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:Se(new mi(47,"foldingMaximumRegions",5e3,10,65e3,{description:b("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:Se(new Vt(48,"unfoldOnClickAfterEndOfLine",!1,{description:b("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:Se(new Hs(49,"fontFamily",wo.fontFamily,{description:b("fontFamily","Controls the font family.")})),fontInfo:Se(new iY),fontLigatures2:Se(new kf),fontSize:Se(new nY),fontWeight:Se(new ZL),fontVariations:Se(new Q1),formatOnPaste:Se(new Vt(55,"formatOnPaste",!1,{description:b("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:Se(new Vt(56,"formatOnType",!1,{description:b("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:Se(new Vt(57,"glyphMargin",!0,{description:b("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:Se(new sY),hideCursorInOverviewRuler:Se(new Vt(59,"hideCursorInOverviewRuler",!1,{description:b("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:Se(new rY),inDiffEditor:Se(new Vt(61,"inDiffEditor",!1)),letterSpacing:Se(new _o(64,"letterSpacing",wo.letterSpacing,s=>_o.clamp(s,-5,20),{description:b("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:Se(new aY),lineDecorationsWidth:Se(new uY),lineHeight:Se(new hY),lineNumbers:Se(new bY),lineNumbersMinChars:Se(new mi(69,"lineNumbersMinChars",5,1,300)),linkedEditing:Se(new Vt(70,"linkedEditing",!1,{description:b("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:Se(new Vt(71,"links",!0,{description:b("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:Se(new zi(72,"matchBrackets","always",["always","near","never"],{description:b("matchBrackets","Highlight matching brackets.")})),minimap:Se(new dY),mouseStyle:Se(new zi(74,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:Se(new _o(75,"mouseWheelScrollSensitivity",1,s=>s===0?1:s,{markdownDescription:b("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:Se(new Vt(76,"mouseWheelZoom",!1,{markdownDescription:qt?b("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):b("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:Se(new Vt(77,"multiCursorMergeOverlapping",!0,{description:b("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:Se(new Nb(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],fY,{markdownEnumDescriptions:[b("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),b("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:b({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:Se(new zi(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[b("multiCursorPaste.spread","Each cursor pastes a single line of the text."),b("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:b("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:Se(new mi(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:b("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:Se(new zi(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[b("occurrencesHighlight.off","Does not highlight occurrences."),b("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),b("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:b("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:Se(new Vt(82,"overviewRulerBorder",!0,{description:b("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:Se(new mi(83,"overviewRulerLanes",3,0,3)),padding:Se(new gY),pasteAs:Se(new AY),parameterHints:Se(new mY),peekWidgetDefaultFocus:Se(new zi(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[b("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),b("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:b("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:Se(new _Y),definitionLinkOpensInPeek:Se(new Vt(89,"definitionLinkOpensInPeek",!1,{description:b("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:Se(new vY),quickSuggestionsDelay:Se(new mi(91,"quickSuggestionsDelay",10,0,1073741824,{description:b("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:Se(new Vt(92,"readOnly",!1)),readOnlyMessage:Se(new CY),renameOnType:Se(new Vt(94,"renameOnType",!1,{description:b("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:b("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:Se(new Vt(95,"renderControlCharacters",!0,{description:b("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:Se(new zi(96,"renderFinalNewline",xr?"dimmed":"on",["off","on","dimmed"],{description:b("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:Se(new zi(97,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",b("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:b("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:Se(new Vt(98,"renderLineHighlightOnlyWhenFocus",!1,{description:b("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:Se(new zi(99,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:Se(new zi(100,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",b("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),b("renderWhitespace.selection","Render whitespace characters only on selected text."),b("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:b("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:Se(new mi(101,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:Se(new Vt(102,"roundedSelection",!0,{description:b("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:Se(new wY),scrollbar:Se(new yY),scrollBeyondLastColumn:Se(new mi(105,"scrollBeyondLastColumn",4,0,1073741824,{description:b("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:Se(new Vt(106,"scrollBeyondLastLine",!0,{description:b("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:Se(new Vt(107,"scrollPredominantAxis",!0,{description:b("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:Se(new Vt(108,"selectionClipboard",!0,{description:b("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:xr})),selectionHighlight:Se(new Vt(109,"selectionHighlight",!0,{description:b("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:Se(new Vt(110,"selectOnLineNumbers",!0)),showFoldingControls:Se(new zi(111,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[b("showFoldingControls.always","Always show the folding controls."),b("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),b("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:b("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:Se(new Vt(112,"showUnused",!0,{description:b("showUnused","Controls fading out of unused code.")})),showDeprecated:Se(new Vt(141,"showDeprecated",!0,{description:b("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:Se(new cY),snippetSuggestions:Se(new zi(113,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[b("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),b("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),b("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),b("snippetSuggestions.none","Do not show snippet suggestions.")],description:b("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:Se(new TY),smoothScrolling:Se(new Vt(115,"smoothScrolling",!1,{description:b("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:Se(new mi(118,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:Se(new EY),inlineSuggest:Se(new xY),inlineEdit:Se(new kY),inlineCompletionsAccessibilityVerbose:Se(new Vt(150,"inlineCompletionsAccessibilityVerbose",!1,{description:b("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:Se(new mi(120,"suggestFontSize",0,0,1e3,{markdownDescription:b("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:Se(new mi(121,"suggestLineHeight",0,0,1e3,{markdownDescription:b("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:Se(new Vt(122,"suggestOnTriggerCharacters",!0,{description:b("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:Se(new zi(123,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[b("suggestSelection.first","Always select the first suggestion."),b("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),b("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:b("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:Se(new zi(124,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[b("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),b("tabCompletion.off","Disable tab completions."),b("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:b("tabCompletion","Enables tab completions.")})),tabIndex:Se(new mi(125,"tabIndex",0,-1,1073741824)),unicodeHighlight:Se(new SY),unusualLineTerminators:Se(new zi(127,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[b("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),b("unusualLineTerminators.off","Unusual line terminators are ignored."),b("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:b("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:Se(new Vt(128,"useShadowDOM",!0)),useTabStops:Se(new Vt(129,"useTabStops",!0,{description:b("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:Se(new zi(130,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[b("wordBreak.normal","Use the default line break rule."),b("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:b("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:Se(new NY),wordSeparators:Se(new Hs(132,"wordSeparators",eW,{description:b("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:Se(new zi(133,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[b("wordWrap.off","Lines will never wrap."),b("wordWrap.on","Lines will wrap at the viewport width."),b({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),b({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:b({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:Se(new Hs(134,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:Se(new Hs(135,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:Se(new mi(136,"wordWrapColumn",80,1,1073741824,{markdownDescription:b({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:Se(new zi(137,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:Se(new zi(138,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:Se(new JZ),defaultColorDecorators:Se(new Vt(148,"defaultColorDecorators",!1,{markdownDescription:b("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:Se(new pY),tabFocusMode:Se(new Vt(145,"tabFocusMode",!1,{markdownDescription:b("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:Se(new wm),wrappingInfo:Se(new MY),wrappingIndent:Se(new IY),wrappingStrategy:Se(new oY)};class BY{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?Zm.isErrorNoTelemetry(e)?new Zm(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const sW=new BY;function _i(s){$_(s)||sW.onUnexpectedError(s)}function n8(s){$_(s)||sW.onUnexpectedExternalError(s)}function vM(s){if(s instanceof Error){const{name:e,message:t}=s,i=s.stacktrace||s.stack;return{$isError:!0,name:e,message:t,stack:i,noTelemetry:Zm.isErrorNoTelemetry(s)}}return s}const _C="Canceled";function $_(s){return s instanceof q_?!0:s instanceof Error&&s.name===_C&&s.message===_C}class q_ extends Error{constructor(){super(_C),this.name=this.message}}function WY(){const s=new Error(_C);return s.name=s.message,s}function n2(s){return s?new Error(`Illegal argument: ${s}`):new Error("Illegal argument")}function s8(s){return s?new Error(`Illegal state: ${s}`):new Error("Illegal state")}class VY extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class Zm extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof Zm)return e;const t=new Zm;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}}class ri extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,ri.prototype)}}function Ym(s,e){const t=this;let i=!1,n;return function(){return i||(i=!0,n=s.apply(t,arguments)),n}}function rW(s){return typeof s=="object"&&s!==null&&typeof s.dispose=="function"&&s.dispose.length===0}function ms(s){if(ei.is(s)){const e=[];for(const t of s)if(t)try{t.dispose()}catch(i){e.push(i)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(s)?[]:s}else if(s)return s.dispose(),s}function Vl(...s){return bt(()=>ms(s))}function bt(s){return{dispose:Ym(()=>{s()})}}const rS=class rS{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{ms(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?rS.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}deleteAndLeak(e){e&&this._toDispose.has(e)&&this._toDispose.delete(e)}};rS.DISABLE_DISPOSED_WARNING=!1;let Qe=rS;const Y9=class Y9{constructor(){this._store=new Qe,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};Y9.None=Object.freeze({dispose(){}});let ve=Y9;class uu{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}}class zY{constructor(e){this.object=e}dispose(){}}class r8{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{ms(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t,i=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||this._store.get(e)?.dispose(),this._store.set(e,t)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}const HY=globalThis.performance&&typeof globalThis.performance.now=="function";class Wf{static create(e){return new Wf(e)}constructor(e){this._now=HY&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}var Te;(function(s){s.None=()=>ve.None;function e(ie,Z){return g(ie,()=>{},0,void 0,!0,void 0,Z)}s.defer=e;function t(ie){return(Z,ue=null,be)=>{let ye=!1,ae;return ae=ie(xe=>{if(!ye)return ae?ae.dispose():ye=!0,Z.call(ue,xe)},null,be),ye&&ae.dispose(),ae}}s.once=t;function i(ie,Z){return s.once(s.filter(ie,Z))}s.onceIf=i;function n(ie,Z,ue){return u((be,ye=null,ae)=>ie(xe=>be.call(ye,Z(xe)),null,ae),ue)}s.map=n;function r(ie,Z,ue){return u((be,ye=null,ae)=>ie(xe=>{Z(xe),be.call(ye,xe)},null,ae),ue)}s.forEach=r;function o(ie,Z,ue){return u((be,ye=null,ae)=>ie(xe=>Z(xe)&&be.call(ye,xe),null,ae),ue)}s.filter=o;function a(ie){return ie}s.signal=a;function l(...ie){return(Z,ue=null,be)=>{const ye=Vl(...ie.map(ae=>ae(xe=>Z.call(ue,xe))));return d(ye,be)}}s.any=l;function c(ie,Z,ue,be){let ye=ue;return n(ie,ae=>(ye=Z(ye,ae),ye),be)}s.reduce=c;function u(ie,Z){let ue;const be={onWillAddFirstListener(){ue=ie(ye.fire,ye)},onDidRemoveLastListener(){ue?.dispose()}},ye=new re(be);return Z?.add(ye),ye.event}function d(ie,Z){return Z instanceof Array?Z.push(ie):Z&&Z.add(ie),ie}function g(ie,Z,ue=100,be=!1,ye=!1,ae,xe){let fe,X,me,ze=0,it;const He={leakWarningThreshold:ae,onWillAddFirstListener(){fe=ie(gt=>{ze++,X=Z(X,gt),be&&!me&&(st.fire(X),X=void 0),it=()=>{const St=X;X=void 0,me=void 0,(!be||ze>1)&&st.fire(St),ze=0},typeof ue=="number"?(clearTimeout(me),me=setTimeout(it,ue)):me===void 0&&(me=0,queueMicrotask(it))})},onWillRemoveListener(){ye&&ze>0&&it?.()},onDidRemoveLastListener(){it=void 0,fe.dispose()}},st=new re(He);return xe?.add(st),st.event}s.debounce=g;function m(ie,Z=0,ue){return s.debounce(ie,(be,ye)=>be?(be.push(ye),be):[ye],Z,void 0,!0,void 0,ue)}s.accumulate=m;function _(ie,Z=(be,ye)=>be===ye,ue){let be=!0,ye;return o(ie,ae=>{const xe=be||!Z(ae,ye);return be=!1,ye=ae,xe},ue)}s.latch=_;function v(ie,Z,ue){return[s.filter(ie,Z,ue),s.filter(ie,be=>!Z(be),ue)]}s.split=v;function w(ie,Z=!1,ue=[],be){let ye=ue.slice(),ae=ie(X=>{ye?ye.push(X):fe.fire(X)});be&&be.add(ae);const xe=()=>{ye?.forEach(X=>fe.fire(X)),ye=null},fe=new re({onWillAddFirstListener(){ae||(ae=ie(X=>fe.fire(X)),be&&be.add(ae))},onDidAddFirstListener(){ye&&(Z?setTimeout(xe):xe())},onDidRemoveLastListener(){ae&&ae.dispose(),ae=null}});return be&&be.add(fe),fe.event}s.buffer=w;function y(ie,Z){return(be,ye,ae)=>{const xe=Z(new k);return ie(function(fe){const X=xe.evaluate(fe);X!==S&&be.call(ye,X)},void 0,ae)}}s.chain=y;const S=Symbol("HaltChainable");class k{constructor(){this.steps=[]}map(Z){return this.steps.push(Z),this}forEach(Z){return this.steps.push(ue=>(Z(ue),ue)),this}filter(Z){return this.steps.push(ue=>Z(ue)?ue:S),this}reduce(Z,ue){let be=ue;return this.steps.push(ye=>(be=Z(be,ye),be)),this}latch(Z=(ue,be)=>ue===be){let ue=!0,be;return this.steps.push(ye=>{const ae=ue||!Z(ye,be);return ue=!1,be=ye,ae?ye:S}),this}evaluate(Z){for(const ue of this.steps)if(Z=ue(Z),Z===S)break;return Z}}function L(ie,Z,ue=be=>be){const be=(...fe)=>xe.fire(ue(...fe)),ye=()=>ie.on(Z,be),ae=()=>ie.removeListener(Z,be),xe=new re({onWillAddFirstListener:ye,onDidRemoveLastListener:ae});return xe.event}s.fromNodeEventEmitter=L;function T(ie,Z,ue=be=>be){const be=(...fe)=>xe.fire(ue(...fe)),ye=()=>ie.addEventListener(Z,be),ae=()=>ie.removeEventListener(Z,be),xe=new re({onWillAddFirstListener:ye,onDidRemoveLastListener:ae});return xe.event}s.fromDOMEventEmitter=T;function A(ie){return new Promise(Z=>t(ie)(Z))}s.toPromise=A;function I(ie){const Z=new re;return ie.then(ue=>{Z.fire(ue)},()=>{Z.fire(void 0)}).finally(()=>{Z.dispose()}),Z.event}s.fromPromise=I;function O(ie,Z){return ie(ue=>Z.fire(ue))}s.forward=O;function F(ie,Z,ue){return Z(ue),ie(be=>Z(be))}s.runAndSubscribe=F;class J{constructor(Z,ue){this._observable=Z,this._counter=0,this._hasChanged=!1;const be={onWillAddFirstListener:()=>{Z.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{Z.removeObserver(this)}};this.emitter=new re(be),ue&&ue.add(this.emitter)}beginUpdate(Z){this._counter++}handlePossibleChange(Z){}handleChange(Z,ue){this._hasChanged=!0}endUpdate(Z){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function Y(ie,Z){return new J(ie,Z).emitter.event}s.fromObservable=Y;function G(ie){return(Z,ue,be)=>{let ye=0,ae=!1;const xe={beginUpdate(){ye++},endUpdate(){ye--,ye===0&&(ie.reportChanges(),ae&&(ae=!1,Z.call(ue)))},handlePossibleChange(){},handleChange(){ae=!0}};ie.addObserver(xe),ie.reportChanges();const fe={dispose(){ie.removeObserver(xe)}};return be instanceof Qe?be.add(fe):Array.isArray(be)&&be.push(fe),fe}}s.fromObservableLight=G})(Te||(Te={}));const cm=class cm{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${cm._idPool++}`,cm.all.add(this)}start(e){this._stopWatch=new Wf,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};cm.all=new Set,cm._idPool=0;let YL=cm,jY=-1;const oS=class oS{constructor(e,t,i=(oS._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=t,this.name=i,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,t){const i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);const n=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,n+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=i*.5;const[r,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(r);const l=new UY(a,r);this._errorHandler(l)}return()=>{const r=this._stacks.get(e.value)||0;this._stacks.set(e.value,r-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(const[i,n]of this._stacks)(!e||t<n)&&(e=[i,n],t=n);return e}};oS._idPool=1;let XL=oS;class o8{static create(){const e=new Error;return new o8(e.stack??"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class UY extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}}class $Y extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}}class ak{constructor(e){this.value=e}}const qY=2;let re=class{constructor(e){this._size=0,this._options=e,this._leakageMon=this._options?.leakWarningThreshold?new XL(e?.onListenerError??_i,this._options?.leakWarningThreshold??jY):void 0,this._perfMon=this._options?._profName?new YL(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(e,t,i)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){const a=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(a);const l=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],c=new $Y(`${a}. HINT: Stack shows most frequent listener (${l[1]}-times)`,l[0]);return(this._options?.onListenerError||_i)(c),ve.None}if(this._disposed)return ve.None;t&&(e=e.bind(t));const n=new ak(e);let r;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(n.stack=o8.create(),r=this._leakageMon.check(n.stack,this._size+1)),this._listeners?this._listeners instanceof ak?(this._deliveryQueue??=new oW,this._listeners=[this._listeners,n]):this._listeners.push(n):(this._options?.onWillAddFirstListener?.(this),this._listeners=n,this._options?.onDidAddFirstListener?.(this)),this._size++;const o=bt(()=>{r?.(),this._removeListener(n)});return i instanceof Qe?i.add(o):Array.isArray(i)&&i.push(o),o},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}const t=this._listeners,i=t.indexOf(e);if(i===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[i]=void 0;const n=this._deliveryQueue.current===this;if(this._size*qY<=t.length){let r=0;for(let o=0;o<t.length;o++)t[o]?t[r++]=t[o]:n&&(this._deliveryQueue.end--,r<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=r}}_deliver(e,t){if(!e)return;const i=this._options?.onListenerError||_i;if(!i){e.value(t);return}try{e.value(t)}catch(n){i(n)}}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof ak)this._deliver(this._listeners,e);else{const t=this._deliveryQueue;t.enqueue(this,e,this._listeners.length),this._deliverQueue(t)}this._perfMon?.stop()}hasListeners(){return this._size>0}};const KY=()=>new oW;class oW{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class J1 extends re{constructor(e){super(e),this._isPaused=0,this._eventQueue=new zr,this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class aW extends J1{constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class GY extends re{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e?.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}}class ZY{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new re({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),bt(Ym(()=>{this.hasListeners&&this.unhook(t);const n=this.events.indexOf(t);this.events.splice(n,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){e.listener?.dispose(),e.listener=null}dispose(){this.emitter.dispose();for(const e of this.events)e.listener?.dispose();this.events=[]}}class K_{constructor(){this.data=[]}wrapEvent(e,t,i){return(n,r,o)=>e(a=>{const l=this.data[this.data.length-1];if(!t){l?l.buffers.push(()=>n.call(r,a)):n.call(r,a);return}const c=l;if(!c){n.call(r,t(i,a));return}c.items??=[],c.items.push(a),c.buffers.length===0&&l.buffers.push(()=>{c.reducedResult??=i?c.items.reduce(t,i):c.items.reduce(t),n.call(r,c.reducedResult)})},void 0,o)}bufferEvents(e){const t={buffers:new Array};this.data.push(t);const i=e();return this.data.pop(),t.buffers.forEach(n=>n()),i}}class bM{constructor(){this.listening=!1,this.inputEvent=Te.None,this.inputEventListener=ve.None,this.emitter=new re({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const lW=Object.freeze(function(s,e){const t=setTimeout(s.bind(e),0);return{dispose(){clearTimeout(t)}}});var va;(function(s){function e(t){return t===s.None||t===s.Cancelled||t instanceof Rw?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}s.isCancellationToken=e,s.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Te.None}),s.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:lW})})(va||(va={}));class Rw{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?lW:(this._emitter||(this._emitter=new re),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let Cp=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Rw),this._token}cancel(){this._token?this._token instanceof Rw&&this._token.cancel():this._token=va.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof Rw&&this._token.dispose():this._token=va.None}};class a8{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const Aw=new a8,QL=new a8,JL=new a8,cW=new Array(230),YY=Object.create(null),XY=Object.create(null),l8=[];for(let s=0;s<=193;s++)l8[s]=-1;(function(){const s="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",s,s],[1,1,"Hyper",0,s,0,s,s,s],[1,2,"Super",0,s,0,s,s,s],[1,3,"Fn",0,s,0,s,s,s],[1,4,"FnLock",0,s,0,s,s,s],[1,5,"Suspend",0,s,0,s,s,s],[1,6,"Resume",0,s,0,s,s,s],[1,7,"Turbo",0,s,0,s,s,s],[1,8,"Sleep",0,s,0,"VK_SLEEP",s,s],[1,9,"WakeUp",0,s,0,s,s,s],[0,10,"KeyA",31,"A",65,"VK_A",s,s],[0,11,"KeyB",32,"B",66,"VK_B",s,s],[0,12,"KeyC",33,"C",67,"VK_C",s,s],[0,13,"KeyD",34,"D",68,"VK_D",s,s],[0,14,"KeyE",35,"E",69,"VK_E",s,s],[0,15,"KeyF",36,"F",70,"VK_F",s,s],[0,16,"KeyG",37,"G",71,"VK_G",s,s],[0,17,"KeyH",38,"H",72,"VK_H",s,s],[0,18,"KeyI",39,"I",73,"VK_I",s,s],[0,19,"KeyJ",40,"J",74,"VK_J",s,s],[0,20,"KeyK",41,"K",75,"VK_K",s,s],[0,21,"KeyL",42,"L",76,"VK_L",s,s],[0,22,"KeyM",43,"M",77,"VK_M",s,s],[0,23,"KeyN",44,"N",78,"VK_N",s,s],[0,24,"KeyO",45,"O",79,"VK_O",s,s],[0,25,"KeyP",46,"P",80,"VK_P",s,s],[0,26,"KeyQ",47,"Q",81,"VK_Q",s,s],[0,27,"KeyR",48,"R",82,"VK_R",s,s],[0,28,"KeyS",49,"S",83,"VK_S",s,s],[0,29,"KeyT",50,"T",84,"VK_T",s,s],[0,30,"KeyU",51,"U",85,"VK_U",s,s],[0,31,"KeyV",52,"V",86,"VK_V",s,s],[0,32,"KeyW",53,"W",87,"VK_W",s,s],[0,33,"KeyX",54,"X",88,"VK_X",s,s],[0,34,"KeyY",55,"Y",89,"VK_Y",s,s],[0,35,"KeyZ",56,"Z",90,"VK_Z",s,s],[0,36,"Digit1",22,"1",49,"VK_1",s,s],[0,37,"Digit2",23,"2",50,"VK_2",s,s],[0,38,"Digit3",24,"3",51,"VK_3",s,s],[0,39,"Digit4",25,"4",52,"VK_4",s,s],[0,40,"Digit5",26,"5",53,"VK_5",s,s],[0,41,"Digit6",27,"6",54,"VK_6",s,s],[0,42,"Digit7",28,"7",55,"VK_7",s,s],[0,43,"Digit8",29,"8",56,"VK_8",s,s],[0,44,"Digit9",30,"9",57,"VK_9",s,s],[0,45,"Digit0",21,"0",48,"VK_0",s,s],[1,46,"Enter",3,"Enter",13,"VK_RETURN",s,s],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",s,s],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",s,s],[1,49,"Tab",2,"Tab",9,"VK_TAB",s,s],[1,50,"Space",10,"Space",32,"VK_SPACE",s,s],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,s,0,s,s,s],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",s,s],[1,64,"F1",59,"F1",112,"VK_F1",s,s],[1,65,"F2",60,"F2",113,"VK_F2",s,s],[1,66,"F3",61,"F3",114,"VK_F3",s,s],[1,67,"F4",62,"F4",115,"VK_F4",s,s],[1,68,"F5",63,"F5",116,"VK_F5",s,s],[1,69,"F6",64,"F6",117,"VK_F6",s,s],[1,70,"F7",65,"F7",118,"VK_F7",s,s],[1,71,"F8",66,"F8",119,"VK_F8",s,s],[1,72,"F9",67,"F9",120,"VK_F9",s,s],[1,73,"F10",68,"F10",121,"VK_F10",s,s],[1,74,"F11",69,"F11",122,"VK_F11",s,s],[1,75,"F12",70,"F12",123,"VK_F12",s,s],[1,76,"PrintScreen",0,s,0,s,s,s],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",s,s],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",s,s],[1,79,"Insert",19,"Insert",45,"VK_INSERT",s,s],[1,80,"Home",14,"Home",36,"VK_HOME",s,s],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",s,s],[1,82,"Delete",20,"Delete",46,"VK_DELETE",s,s],[1,83,"End",13,"End",35,"VK_END",s,s],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",s,s],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",s],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",s],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",s],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",s],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",s,s],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",s,s],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",s,s],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",s,s],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",s,s],[1,94,"NumpadEnter",3,s,0,s,s,s],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",s,s],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",s,s],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",s,s],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",s,s],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",s,s],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",s,s],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",s,s],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",s,s],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",s,s],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",s,s],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",s,s],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",s,s],[1,107,"ContextMenu",58,"ContextMenu",93,s,s,s],[1,108,"Power",0,s,0,s,s,s],[1,109,"NumpadEqual",0,s,0,s,s,s],[1,110,"F13",71,"F13",124,"VK_F13",s,s],[1,111,"F14",72,"F14",125,"VK_F14",s,s],[1,112,"F15",73,"F15",126,"VK_F15",s,s],[1,113,"F16",74,"F16",127,"VK_F16",s,s],[1,114,"F17",75,"F17",128,"VK_F17",s,s],[1,115,"F18",76,"F18",129,"VK_F18",s,s],[1,116,"F19",77,"F19",130,"VK_F19",s,s],[1,117,"F20",78,"F20",131,"VK_F20",s,s],[1,118,"F21",79,"F21",132,"VK_F21",s,s],[1,119,"F22",80,"F22",133,"VK_F22",s,s],[1,120,"F23",81,"F23",134,"VK_F23",s,s],[1,121,"F24",82,"F24",135,"VK_F24",s,s],[1,122,"Open",0,s,0,s,s,s],[1,123,"Help",0,s,0,s,s,s],[1,124,"Select",0,s,0,s,s,s],[1,125,"Again",0,s,0,s,s,s],[1,126,"Undo",0,s,0,s,s,s],[1,127,"Cut",0,s,0,s,s,s],[1,128,"Copy",0,s,0,s,s,s],[1,129,"Paste",0,s,0,s,s,s],[1,130,"Find",0,s,0,s,s,s],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",s,s],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",s,s],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",s,s],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",s,s],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",s,s],[1,136,"KanaMode",0,s,0,s,s,s],[0,137,"IntlYen",0,s,0,s,s,s],[1,138,"Convert",0,s,0,s,s,s],[1,139,"NonConvert",0,s,0,s,s,s],[1,140,"Lang1",0,s,0,s,s,s],[1,141,"Lang2",0,s,0,s,s,s],[1,142,"Lang3",0,s,0,s,s,s],[1,143,"Lang4",0,s,0,s,s,s],[1,144,"Lang5",0,s,0,s,s,s],[1,145,"Abort",0,s,0,s,s,s],[1,146,"Props",0,s,0,s,s,s],[1,147,"NumpadParenLeft",0,s,0,s,s,s],[1,148,"NumpadParenRight",0,s,0,s,s,s],[1,149,"NumpadBackspace",0,s,0,s,s,s],[1,150,"NumpadMemoryStore",0,s,0,s,s,s],[1,151,"NumpadMemoryRecall",0,s,0,s,s,s],[1,152,"NumpadMemoryClear",0,s,0,s,s,s],[1,153,"NumpadMemoryAdd",0,s,0,s,s,s],[1,154,"NumpadMemorySubtract",0,s,0,s,s,s],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",s,s],[1,156,"NumpadClearEntry",0,s,0,s,s,s],[1,0,s,5,"Ctrl",17,"VK_CONTROL",s,s],[1,0,s,4,"Shift",16,"VK_SHIFT",s,s],[1,0,s,6,"Alt",18,"VK_MENU",s,s],[1,0,s,57,"Meta",91,"VK_COMMAND",s,s],[1,157,"ControlLeft",5,s,0,"VK_LCONTROL",s,s],[1,158,"ShiftLeft",4,s,0,"VK_LSHIFT",s,s],[1,159,"AltLeft",6,s,0,"VK_LMENU",s,s],[1,160,"MetaLeft",57,s,0,"VK_LWIN",s,s],[1,161,"ControlRight",5,s,0,"VK_RCONTROL",s,s],[1,162,"ShiftRight",4,s,0,"VK_RSHIFT",s,s],[1,163,"AltRight",6,s,0,"VK_RMENU",s,s],[1,164,"MetaRight",57,s,0,"VK_RWIN",s,s],[1,165,"BrightnessUp",0,s,0,s,s,s],[1,166,"BrightnessDown",0,s,0,s,s,s],[1,167,"MediaPlay",0,s,0,s,s,s],[1,168,"MediaRecord",0,s,0,s,s,s],[1,169,"MediaFastForward",0,s,0,s,s,s],[1,170,"MediaRewind",0,s,0,s,s,s],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",s,s],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",s,s],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",s,s],[1,174,"Eject",0,s,0,s,s,s],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",s,s],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",s,s],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",s,s],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",s,s],[1,179,"LaunchApp1",0,s,0,"VK_MEDIA_LAUNCH_APP1",s,s],[1,180,"SelectTask",0,s,0,s,s,s],[1,181,"LaunchScreenSaver",0,s,0,s,s,s],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",s,s],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",s,s],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",s,s],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",s,s],[1,186,"BrowserStop",0,s,0,"VK_BROWSER_STOP",s,s],[1,187,"BrowserRefresh",0,s,0,"VK_BROWSER_REFRESH",s,s],[1,188,"BrowserFavorites",0,s,0,"VK_BROWSER_FAVORITES",s,s],[1,189,"ZoomToggle",0,s,0,s,s,s],[1,190,"MailReply",0,s,0,s,s,s],[1,191,"MailForward",0,s,0,s,s,s],[1,192,"MailSend",0,s,0,s,s,s],[1,0,s,114,"KeyInComposition",229,s,s,s],[1,0,s,116,"ABNT_C2",194,"VK_ABNT_C2",s,s],[1,0,s,96,"OEM_8",223,"VK_OEM_8",s,s],[1,0,s,0,s,0,"VK_KANA",s,s],[1,0,s,0,s,0,"VK_HANGUL",s,s],[1,0,s,0,s,0,"VK_JUNJA",s,s],[1,0,s,0,s,0,"VK_FINAL",s,s],[1,0,s,0,s,0,"VK_HANJA",s,s],[1,0,s,0,s,0,"VK_KANJI",s,s],[1,0,s,0,s,0,"VK_CONVERT",s,s],[1,0,s,0,s,0,"VK_NONCONVERT",s,s],[1,0,s,0,s,0,"VK_ACCEPT",s,s],[1,0,s,0,s,0,"VK_MODECHANGE",s,s],[1,0,s,0,s,0,"VK_SELECT",s,s],[1,0,s,0,s,0,"VK_PRINT",s,s],[1,0,s,0,s,0,"VK_EXECUTE",s,s],[1,0,s,0,s,0,"VK_SNAPSHOT",s,s],[1,0,s,0,s,0,"VK_HELP",s,s],[1,0,s,0,s,0,"VK_APPS",s,s],[1,0,s,0,s,0,"VK_PROCESSKEY",s,s],[1,0,s,0,s,0,"VK_PACKET",s,s],[1,0,s,0,s,0,"VK_DBE_SBCSCHAR",s,s],[1,0,s,0,s,0,"VK_DBE_DBCSCHAR",s,s],[1,0,s,0,s,0,"VK_ATTN",s,s],[1,0,s,0,s,0,"VK_CRSEL",s,s],[1,0,s,0,s,0,"VK_EXSEL",s,s],[1,0,s,0,s,0,"VK_EREOF",s,s],[1,0,s,0,s,0,"VK_PLAY",s,s],[1,0,s,0,s,0,"VK_ZOOM",s,s],[1,0,s,0,s,0,"VK_NONAME",s,s],[1,0,s,0,s,0,"VK_PA1",s,s],[1,0,s,0,s,0,"VK_OEM_CLEAR",s,s]],t=[],i=[];for(const n of e){const[r,o,a,l,c,u,d,g,m]=n;if(i[o]||(i[o]=!0,YY[a]=o,XY[a.toLowerCase()]=o,r&&(l8[o]=l)),!t[l]){if(t[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);Aw.define(l,c),QL.define(l,g||c),JL.define(l,m||g||c)}u&&(cW[u]=l)}})();var Fc;(function(s){function e(a){return Aw.keyCodeToStr(a)}s.toString=e;function t(a){return Aw.strToKeyCode(a)}s.fromString=t;function i(a){return QL.keyCodeToStr(a)}s.toUserSettingsUS=i;function n(a){return JL.keyCodeToStr(a)}s.toUserSettingsGeneral=n;function r(a){return QL.strToKeyCode(a)||JL.strToKeyCode(a)}s.fromUserSettings=r;function o(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return Aw.keyCodeToStr(a)}s.toElectronAccelerator=o})(Fc||(Fc={}));function QY(s,e){const t=(e&65535)<<16>>>0;return(s|t)>>>0}var wM={};let ym;const lk=globalThis.vscode;if(typeof lk<"u"&&typeof lk.process<"u"){const s=lk.process;ym={get platform(){return s.platform},get arch(){return s.arch},get env(){return s.env},cwd(){return s.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?ym={get platform(){return process.platform},get arch(){return process.arch},get env(){return wM},cwd(){return wM.VSCODE_CWD||process.cwd()}}:ym={get platform(){return $r?"win32":qt?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const vC=ym.cwd,e5=ym.env,JY=ym.platform,eX=65,tX=97,iX=90,nX=122,kh=46,Bs=47,ao=92,ju=58,sX=63;class uW extends Error{constructor(e,t,i){let n;typeof t=="string"&&t.indexOf("not ")===0?(n="must not be",t=t.replace(/^not /,"")):n="must be";const r=e.indexOf(".")!==-1?"property":"argument";let o=`The "${e}" ${r} ${n} of type ${t}`;o+=`. Received type ${typeof i}`,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function rX(s,e){if(s===null||typeof s!="object")throw new uW(e,"Object",s)}function Vn(s,e){if(typeof s!="string")throw new uW(e,"string",s)}const pu=JY==="win32";function si(s){return s===Bs||s===ao}function t5(s){return s===Bs}function Uu(s){return s>=eX&&s<=iX||s>=tX&&s<=nX}function bC(s,e,t,i){let n="",r=0,o=-1,a=0,l=0;for(let c=0;c<=s.length;++c){if(c<s.length)l=s.charCodeAt(c);else{if(i(l))break;l=Bs}if(i(l)){if(!(o===c-1||a===1))if(a===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==kh||n.charCodeAt(n.length-2)!==kh){if(n.length>2){const u=n.lastIndexOf(t);u===-1?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf(t)),o=c,a=0;continue}else if(n.length!==0){n="",r=0,o=c,a=0;continue}}e&&(n+=n.length>0?`${t}..`:"..",r=2)}else n.length>0?n+=`${t}${s.slice(o+1,c)}`:n=s.slice(o+1,c),r=c-o-1;o=c,a=0}else l===kh&&a!==-1?++a:a=-1}return n}function oX(s){return s?`${s[0]==="."?"":"."}${s}`:""}function hW(s,e){rX(e,"pathObject");const t=e.dir||e.root,i=e.base||`${e.name||""}${oX(e.ext)}`;return t?t===e.root?`${t}${i}`:`${t}${s}${i}`:i}const yr={resolve(...s){let e="",t="",i=!1;for(let n=s.length-1;n>=-1;n--){let r;if(n>=0){if(r=s[n],Vn(r,`paths[${n}]`),r.length===0)continue}else e.length===0?r=vC():(r=e5[`=${e}`]||vC(),(r===void 0||r.slice(0,2).toLowerCase()!==e.toLowerCase()&&r.charCodeAt(2)===ao)&&(r=`${e}\\`));const o=r.length;let a=0,l="",c=!1;const u=r.charCodeAt(0);if(o===1)si(u)&&(a=1,c=!0);else if(si(u))if(c=!0,si(r.charCodeAt(1))){let d=2,g=d;for(;d<o&&!si(r.charCodeAt(d));)d++;if(d<o&&d!==g){const m=r.slice(g,d);for(g=d;d<o&&si(r.charCodeAt(d));)d++;if(d<o&&d!==g){for(g=d;d<o&&!si(r.charCodeAt(d));)d++;(d===o||d!==g)&&(l=`\\\\${m}\\${r.slice(g,d)}`,a=d)}}}else a=1;else Uu(u)&&r.charCodeAt(1)===ju&&(l=r.slice(0,2),a=2,o>2&&si(r.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(i){if(e.length>0)break}else if(t=`${r.slice(a)}\\${t}`,i=c,c&&e.length>0)break}return t=bC(t,!i,"\\",si),i?`${e}\\${t}`:`${e}${t}`||"."},normalize(s){Vn(s,"path");const e=s.length;if(e===0)return".";let t=0,i,n=!1;const r=s.charCodeAt(0);if(e===1)return t5(r)?"\\":s;if(si(r))if(n=!0,si(s.charCodeAt(1))){let a=2,l=a;for(;a<e&&!si(s.charCodeAt(a));)a++;if(a<e&&a!==l){const c=s.slice(l,a);for(l=a;a<e&&si(s.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!si(s.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${s.slice(l)}\\`;a!==l&&(i=`\\\\${c}\\${s.slice(l,a)}`,t=a)}}}else t=1;else Uu(r)&&s.charCodeAt(1)===ju&&(i=s.slice(0,2),t=2,e>2&&si(s.charCodeAt(2))&&(n=!0,t=3));let o=t<e?bC(s.slice(t),!n,"\\",si):"";return o.length===0&&!n&&(o="."),o.length>0&&si(s.charCodeAt(e-1))&&(o+="\\"),i===void 0?n?`\\${o}`:o:n?`${i}\\${o}`:`${i}${o}`},isAbsolute(s){Vn(s,"path");const e=s.length;if(e===0)return!1;const t=s.charCodeAt(0);return si(t)||e>2&&Uu(t)&&s.charCodeAt(1)===ju&&si(s.charCodeAt(2))},join(...s){if(s.length===0)return".";let e,t;for(let r=0;r<s.length;++r){const o=s[r];Vn(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let i=!0,n=0;if(typeof t=="string"&&si(t.charCodeAt(0))){++n;const r=t.length;r>1&&si(t.charCodeAt(1))&&(++n,r>2&&(si(t.charCodeAt(2))?++n:i=!1))}if(i){for(;n<e.length&&si(e.charCodeAt(n));)n++;n>=2&&(e=`\\${e.slice(n)}`)}return yr.normalize(e)},relative(s,e){if(Vn(s,"from"),Vn(e,"to"),s===e)return"";const t=yr.resolve(s),i=yr.resolve(e);if(t===i||(s=t.toLowerCase(),e=i.toLowerCase(),s===e))return"";let n=0;for(;n<s.length&&s.charCodeAt(n)===ao;)n++;let r=s.length;for(;r-1>n&&s.charCodeAt(r-1)===ao;)r--;const o=r-n;let a=0;for(;a<e.length&&e.charCodeAt(a)===ao;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===ao;)l--;const c=l-a,u=o<c?o:c;let d=-1,g=0;for(;g<u;g++){const _=s.charCodeAt(n+g);if(_!==e.charCodeAt(a+g))break;_===ao&&(d=g)}if(g!==u){if(d===-1)return i}else{if(c>u){if(e.charCodeAt(a+g)===ao)return i.slice(a+g+1);if(g===2)return i.slice(a+g)}o>u&&(s.charCodeAt(n+g)===ao?d=g:g===2&&(d=3)),d===-1&&(d=0)}let m="";for(g=n+d+1;g<=r;++g)(g===r||s.charCodeAt(g)===ao)&&(m+=m.length===0?"..":"\\..");return a+=d,m.length>0?`${m}${i.slice(a,l)}`:(i.charCodeAt(a)===ao&&++a,i.slice(a,l))},toNamespacedPath(s){if(typeof s!="string"||s.length===0)return s;const e=yr.resolve(s);if(e.length<=2)return s;if(e.charCodeAt(0)===ao){if(e.charCodeAt(1)===ao){const t=e.charCodeAt(2);if(t!==sX&&t!==kh)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Uu(e.charCodeAt(0))&&e.charCodeAt(1)===ju&&e.charCodeAt(2)===ao)return`\\\\?\\${e}`;return s},dirname(s){Vn(s,"path");const e=s.length;if(e===0)return".";let t=-1,i=0;const n=s.charCodeAt(0);if(e===1)return si(n)?s:".";if(si(n)){if(t=i=1,si(s.charCodeAt(1))){let a=2,l=a;for(;a<e&&!si(s.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&si(s.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!si(s.charCodeAt(a));)a++;if(a===e)return s;a!==l&&(t=i=a+1)}}}}else Uu(n)&&s.charCodeAt(1)===ju&&(t=e>2&&si(s.charCodeAt(2))?3:2,i=t);let r=-1,o=!0;for(let a=e-1;a>=i;--a)if(si(s.charCodeAt(a))){if(!o){r=a;break}}else o=!1;if(r===-1){if(t===-1)return".";r=t}return s.slice(0,r)},basename(s,e){e!==void 0&&Vn(e,"suffix"),Vn(s,"path");let t=0,i=-1,n=!0,r;if(s.length>=2&&Uu(s.charCodeAt(0))&&s.charCodeAt(1)===ju&&(t=2),e!==void 0&&e.length>0&&e.length<=s.length){if(e===s)return"";let o=e.length-1,a=-1;for(r=s.length-1;r>=t;--r){const l=s.charCodeAt(r);if(si(l)){if(!n){t=r+1;break}}else a===-1&&(n=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=r):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=s.length),s.slice(t,i)}for(r=s.length-1;r>=t;--r)if(si(s.charCodeAt(r))){if(!n){t=r+1;break}}else i===-1&&(n=!1,i=r+1);return i===-1?"":s.slice(t,i)},extname(s){Vn(s,"path");let e=0,t=-1,i=0,n=-1,r=!0,o=0;s.length>=2&&s.charCodeAt(1)===ju&&Uu(s.charCodeAt(0))&&(e=i=2);for(let a=s.length-1;a>=e;--a){const l=s.charCodeAt(a);if(si(l)){if(!r){i=a+1;break}continue}n===-1&&(r=!1,n=a+1),l===kh?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||n===-1||o===0||o===1&&t===n-1&&t===i+1?"":s.slice(t,n)},format:hW.bind(null,"\\"),parse(s){Vn(s,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return e;const t=s.length;let i=0,n=s.charCodeAt(0);if(t===1)return si(n)?(e.root=e.dir=s,e):(e.base=e.name=s,e);if(si(n)){if(i=1,si(s.charCodeAt(1))){let d=2,g=d;for(;d<t&&!si(s.charCodeAt(d));)d++;if(d<t&&d!==g){for(g=d;d<t&&si(s.charCodeAt(d));)d++;if(d<t&&d!==g){for(g=d;d<t&&!si(s.charCodeAt(d));)d++;d===t?i=d:d!==g&&(i=d+1)}}}}else if(Uu(n)&&s.charCodeAt(1)===ju){if(t<=2)return e.root=e.dir=s,e;if(i=2,si(s.charCodeAt(2))){if(t===3)return e.root=e.dir=s,e;i=3}}i>0&&(e.root=s.slice(0,i));let r=-1,o=i,a=-1,l=!0,c=s.length-1,u=0;for(;c>=i;--c){if(n=s.charCodeAt(c),si(n)){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),n===kh?r===-1?r=c:u!==1&&(u=1):r!==-1&&(u=-1)}return a!==-1&&(r===-1||u===0||u===1&&r===a-1&&r===o+1?e.base=e.name=s.slice(o,a):(e.name=s.slice(o,r),e.base=s.slice(o,a),e.ext=s.slice(r,a))),o>0&&o!==i?e.dir=s.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},aX=(()=>{if(pu){const s=/\\/g;return()=>{const e=vC().replace(s,"/");return e.slice(e.indexOf("/"))}}return()=>vC()})(),rn={resolve(...s){let e="",t=!1;for(let i=s.length-1;i>=-1&&!t;i--){const n=i>=0?s[i]:aX();Vn(n,`paths[${i}]`),n.length!==0&&(e=`${n}/${e}`,t=n.charCodeAt(0)===Bs)}return e=bC(e,!t,"/",t5),t?`/${e}`:e.length>0?e:"."},normalize(s){if(Vn(s,"path"),s.length===0)return".";const e=s.charCodeAt(0)===Bs,t=s.charCodeAt(s.length-1)===Bs;return s=bC(s,!e,"/",t5),s.length===0?e?"/":t?"./":".":(t&&(s+="/"),e?`/${s}`:s)},isAbsolute(s){return Vn(s,"path"),s.length>0&&s.charCodeAt(0)===Bs},join(...s){if(s.length===0)return".";let e;for(let t=0;t<s.length;++t){const i=s[t];Vn(i,"path"),i.length>0&&(e===void 0?e=i:e+=`/${i}`)}return e===void 0?".":rn.normalize(e)},relative(s,e){if(Vn(s,"from"),Vn(e,"to"),s===e||(s=rn.resolve(s),e=rn.resolve(e),s===e))return"";const t=1,i=s.length,n=i-t,r=1,o=e.length-r,a=n<o?n:o;let l=-1,c=0;for(;c<a;c++){const d=s.charCodeAt(t+c);if(d!==e.charCodeAt(r+c))break;d===Bs&&(l=c)}if(c===a)if(o>a){if(e.charCodeAt(r+c)===Bs)return e.slice(r+c+1);if(c===0)return e.slice(r+c)}else n>a&&(s.charCodeAt(t+c)===Bs?l=c:c===0&&(l=0));let u="";for(c=t+l+1;c<=i;++c)(c===i||s.charCodeAt(c)===Bs)&&(u+=u.length===0?"..":"/..");return`${u}${e.slice(r+l)}`},toNamespacedPath(s){return s},dirname(s){if(Vn(s,"path"),s.length===0)return".";const e=s.charCodeAt(0)===Bs;let t=-1,i=!0;for(let n=s.length-1;n>=1;--n)if(s.charCodeAt(n)===Bs){if(!i){t=n;break}}else i=!1;return t===-1?e?"/":".":e&&t===1?"//":s.slice(0,t)},basename(s,e){e!==void 0&&Vn(e,"ext"),Vn(s,"path");let t=0,i=-1,n=!0,r;if(e!==void 0&&e.length>0&&e.length<=s.length){if(e===s)return"";let o=e.length-1,a=-1;for(r=s.length-1;r>=0;--r){const l=s.charCodeAt(r);if(l===Bs){if(!n){t=r+1;break}}else a===-1&&(n=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=r):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=s.length),s.slice(t,i)}for(r=s.length-1;r>=0;--r)if(s.charCodeAt(r)===Bs){if(!n){t=r+1;break}}else i===-1&&(n=!1,i=r+1);return i===-1?"":s.slice(t,i)},extname(s){Vn(s,"path");let e=-1,t=0,i=-1,n=!0,r=0;for(let o=s.length-1;o>=0;--o){const a=s.charCodeAt(o);if(a===Bs){if(!n){t=o+1;break}continue}i===-1&&(n=!1,i=o+1),a===kh?e===-1?e=o:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||i===-1||r===0||r===1&&e===i-1&&e===t+1?"":s.slice(e,i)},format:hW.bind(null,"/"),parse(s){Vn(s,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return e;const t=s.charCodeAt(0)===Bs;let i;t?(e.root="/",i=1):i=0;let n=-1,r=0,o=-1,a=!0,l=s.length-1,c=0;for(;l>=i;--l){const u=s.charCodeAt(l);if(u===Bs){if(!a){r=l+1;break}continue}o===-1&&(a=!1,o=l+1),u===kh?n===-1?n=l:c!==1&&(c=1):n!==-1&&(c=-1)}if(o!==-1){const u=r===0&&t?1:r;n===-1||c===0||c===1&&n===o-1&&n===r+1?e.base=e.name=s.slice(u,o):(e.name=s.slice(u,n),e.base=s.slice(u,o),e.ext=s.slice(n,o))}return r>0?e.dir=s.slice(0,r-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};rn.win32=yr.win32=yr;rn.posix=yr.posix=rn;const dW=pu?yr.normalize:rn.normalize,lX=pu?yr.join:rn.join,cX=pu?yr.resolve:rn.resolve,uX=pu?yr.relative:rn.relative,hX=pu?yr.dirname:rn.dirname,fW=pu?yr.basename:rn.basename,dX=pu?yr.extname:rn.extname,Lh=pu?yr.sep:rn.sep,fX=/^\w[\w\d+.-]*$/,gX=/^\//,mX=/^\/\//;function pX(s,e){if(!s.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${s.authority}", path: "${s.path}", query: "${s.query}", fragment: "${s.fragment}"}`);if(s.scheme&&!fX.test(s.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(s.path){if(s.authority){if(!gX.test(s.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(mX.test(s.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function _X(s,e){return!s&&!e?"file":s}function vX(s,e){switch(s){case"https":case"http":case"file":e?e[0]!==qa&&(e=qa+e):e=qa;break}return e}const tn="",qa="/",bX=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Et{static isUri(e){return e instanceof Et?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,t,i,n,r,o=!1){typeof e=="object"?(this.scheme=e.scheme||tn,this.authority=e.authority||tn,this.path=e.path||tn,this.query=e.query||tn,this.fragment=e.fragment||tn):(this.scheme=_X(e,o),this.authority=t||tn,this.path=vX(this.scheme,i||tn),this.query=n||tn,this.fragment=r||tn,pX(this,o))}get fsPath(){return wC(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:n,query:r,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=tn),i===void 0?i=this.authority:i===null&&(i=tn),n===void 0?n=this.path:n===null&&(n=tn),r===void 0?r=this.query:r===null&&(r=tn),o===void 0?o=this.fragment:o===null&&(o=tn),t===this.scheme&&i===this.authority&&n===this.path&&r===this.query&&o===this.fragment?this:new kg(t,i,n,r,o)}static parse(e,t=!1){const i=bX.exec(e);return i?new kg(i[2]||tn,Ib(i[4]||tn),Ib(i[5]||tn),Ib(i[7]||tn),Ib(i[9]||tn),t):new kg(tn,tn,tn,tn,tn)}static file(e){let t=tn;if($r&&(e=e.replace(/\\/g,qa)),e[0]===qa&&e[1]===qa){const i=e.indexOf(qa,2);i===-1?(t=e.substring(2),e=qa):(t=e.substring(2,i),e=e.substring(i)||qa)}return new kg("file",t,e,tn,tn)}static from(e,t){return new kg(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return $r&&e.scheme==="file"?i=Et.file(yr.join(wC(e,!0),...t)).path:i=rn.join(e.path,...t),e.with({path:i})}toString(e=!1){return i5(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof Et)return e;{const t=new kg(e);return t._formatted=e.external??null,t._fsPath=e._sep===gW?e.fsPath??null:null,t}}else return e}}const gW=$r?1:void 0;let kg=class extends Et{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=wC(this,!1)),this._fsPath}toString(e=!1){return e?i5(this,!0):(this._formatted||(this._formatted=i5(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=gW),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}};const mW={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function CM(s,e,t){let i,n=-1;for(let r=0;r<s.length;r++){const o=s.charCodeAt(r);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||e&&o===47||t&&o===91||t&&o===93||t&&o===58)n!==-1&&(i+=encodeURIComponent(s.substring(n,r)),n=-1),i!==void 0&&(i+=s.charAt(r));else{i===void 0&&(i=s.substr(0,r));const a=mW[o];a!==void 0?(n!==-1&&(i+=encodeURIComponent(s.substring(n,r)),n=-1),i+=a):n===-1&&(n=r)}}return n!==-1&&(i+=encodeURIComponent(s.substring(n))),i!==void 0?i:s}function wX(s){let e;for(let t=0;t<s.length;t++){const i=s.charCodeAt(t);i===35||i===63?(e===void 0&&(e=s.substr(0,t)),e+=mW[i]):e!==void 0&&(e+=s[t])}return e!==void 0?e:s}function wC(s,e){let t;return s.authority&&s.path.length>1&&s.scheme==="file"?t=`//${s.authority}${s.path}`:s.path.charCodeAt(0)===47&&(s.path.charCodeAt(1)>=65&&s.path.charCodeAt(1)<=90||s.path.charCodeAt(1)>=97&&s.path.charCodeAt(1)<=122)&&s.path.charCodeAt(2)===58?e?t=s.path.substr(1):t=s.path[1].toLowerCase()+s.path.substr(2):t=s.path,$r&&(t=t.replace(/\//g,"\\")),t}function i5(s,e){const t=e?wX:CM;let i="",{scheme:n,authority:r,path:o,query:a,fragment:l}=s;if(n&&(i+=n,i+=":"),(r||n==="file")&&(i+=qa,i+=qa),r){let c=r.indexOf("@");if(c!==-1){const u=r.substr(0,c);r=r.substr(c+1),c=u.lastIndexOf(":"),c===-1?i+=t(u,!1,!1):(i+=t(u.substr(0,c),!1,!1),i+=":",i+=t(u.substr(c+1),!1,!0)),i+="@"}r=r.toLowerCase(),c=r.lastIndexOf(":"),c===-1?i+=t(r,!1,!0):(i+=t(r.substr(0,c),!1,!0),i+=r.substr(c))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const c=o.charCodeAt(1);c>=65&&c<=90&&(o=`/${String.fromCharCode(c+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const c=o.charCodeAt(0);c>=65&&c<=90&&(o=`${String.fromCharCode(c+32)}:${o.substr(2)}`)}i+=t(o,!0,!1)}return a&&(i+="?",i+=t(a,!1,!1)),l&&(i+="#",i+=e?l:CM(l,!1,!1)),i}function pW(s){try{return decodeURIComponent(s)}catch{return s.length>3?s.substr(0,3)+pW(s.substr(3)):s}}const yM=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Ib(s){return s.match(yM)?s.replace(yM,e=>pW(e)):s}let ce=class Cd{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new Cd(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return Cd.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return Cd.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return Cd.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const i=e.lineNumber|0,n=t.lineNumber|0;if(i===n){const r=e.column|0,o=t.column|0;return r-o}return i-n}clone(){return new Cd(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new Cd(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},Q=class Gn{constructor(e,t,i,n){e>i||e===i&&t>n?(this.startLineNumber=i,this.startColumn=n,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=n)}isEmpty(){return Gn.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Gn.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return Gn.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return Gn.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return Gn.plusRange(this,e)}static plusRange(e,t){let i,n,r,o;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,n=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,n=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,n=e.startColumn),t.endLineNumber>e.endLineNumber?(r=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(r=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(r=e.endLineNumber,o=e.endColumn),new Gn(i,n,r,o)}intersectRanges(e){return Gn.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,n=e.startColumn,r=e.endLineNumber,o=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,u=t.endColumn;return i<a?(i=a,n=l):i===a&&(n=Math.max(n,l)),r>c?(r=c,o=u):r===c&&(o=Math.min(o,u)),i>r||i===r&&n>o?null:new Gn(i,n,r,o)}equalsRange(e){return Gn.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return Gn.getEndPosition(this)}static getEndPosition(e){return new ce(e.endLineNumber,e.endColumn)}getStartPosition(){return Gn.getStartPosition(this)}static getStartPosition(e){return new ce(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new Gn(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new Gn(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return Gn.collapseToStart(this)}static collapseToStart(e){return new Gn(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return Gn.collapseToEnd(this)}static collapseToEnd(e){return new Gn(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new Gn(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new Gn(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new Gn(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const r=e.startLineNumber|0,o=t.startLineNumber|0;if(r===o){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,u=t.endLineNumber|0;if(c===u){const d=e.endColumn|0,g=t.endColumn|0;return d-g}return c-u}return a-l}return r-o}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}},wi=class ra extends Q{constructor(e,t,i,n){super(e,t,i,n),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=n}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return ra.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new ra(this.startLineNumber,this.startColumn,e,t):new ra(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new ce(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new ce(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new ra(e,t,this.endLineNumber,this.endColumn):new ra(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new ra(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new ra(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new ra(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new ra(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,i,n,r){return r===0?new ra(e,t,i,n):new ra(i,n,e,t)}};const n5=Object.create(null);function N(s,e){if(bo(e)){const t=n5[e];if(t===void 0)throw new Error(`${s} references an unknown codicon: ${e}`);e=t}return n5[s]=e,{id:s}}function _W(){return n5}const CX={add:N("add",6e4),plus:N("plus",6e4),gistNew:N("gist-new",6e4),repoCreate:N("repo-create",6e4),lightbulb:N("lightbulb",60001),lightBulb:N("light-bulb",60001),repo:N("repo",60002),repoDelete:N("repo-delete",60002),gistFork:N("gist-fork",60003),repoForked:N("repo-forked",60003),gitPullRequest:N("git-pull-request",60004),gitPullRequestAbandoned:N("git-pull-request-abandoned",60004),recordKeys:N("record-keys",60005),keyboard:N("keyboard",60005),tag:N("tag",60006),gitPullRequestLabel:N("git-pull-request-label",60006),tagAdd:N("tag-add",60006),tagRemove:N("tag-remove",60006),person:N("person",60007),personFollow:N("person-follow",60007),personOutline:N("person-outline",60007),personFilled:N("person-filled",60007),gitBranch:N("git-branch",60008),gitBranchCreate:N("git-branch-create",60008),gitBranchDelete:N("git-branch-delete",60008),sourceControl:N("source-control",60008),mirror:N("mirror",60009),mirrorPublic:N("mirror-public",60009),star:N("star",60010),starAdd:N("star-add",60010),starDelete:N("star-delete",60010),starEmpty:N("star-empty",60010),comment:N("comment",60011),commentAdd:N("comment-add",60011),alert:N("alert",60012),warning:N("warning",60012),search:N("search",60013),searchSave:N("search-save",60013),logOut:N("log-out",60014),signOut:N("sign-out",60014),logIn:N("log-in",60015),signIn:N("sign-in",60015),eye:N("eye",60016),eyeUnwatch:N("eye-unwatch",60016),eyeWatch:N("eye-watch",60016),circleFilled:N("circle-filled",60017),primitiveDot:N("primitive-dot",60017),closeDirty:N("close-dirty",60017),debugBreakpoint:N("debug-breakpoint",60017),debugBreakpointDisabled:N("debug-breakpoint-disabled",60017),debugHint:N("debug-hint",60017),terminalDecorationSuccess:N("terminal-decoration-success",60017),primitiveSquare:N("primitive-square",60018),edit:N("edit",60019),pencil:N("pencil",60019),info:N("info",60020),issueOpened:N("issue-opened",60020),gistPrivate:N("gist-private",60021),gitForkPrivate:N("git-fork-private",60021),lock:N("lock",60021),mirrorPrivate:N("mirror-private",60021),close:N("close",60022),removeClose:N("remove-close",60022),x:N("x",60022),repoSync:N("repo-sync",60023),sync:N("sync",60023),clone:N("clone",60024),desktopDownload:N("desktop-download",60024),beaker:N("beaker",60025),microscope:N("microscope",60025),vm:N("vm",60026),deviceDesktop:N("device-desktop",60026),file:N("file",60027),fileText:N("file-text",60027),more:N("more",60028),ellipsis:N("ellipsis",60028),kebabHorizontal:N("kebab-horizontal",60028),mailReply:N("mail-reply",60029),reply:N("reply",60029),organization:N("organization",60030),organizationFilled:N("organization-filled",60030),organizationOutline:N("organization-outline",60030),newFile:N("new-file",60031),fileAdd:N("file-add",60031),newFolder:N("new-folder",60032),fileDirectoryCreate:N("file-directory-create",60032),trash:N("trash",60033),trashcan:N("trashcan",60033),history:N("history",60034),clock:N("clock",60034),folder:N("folder",60035),fileDirectory:N("file-directory",60035),symbolFolder:N("symbol-folder",60035),logoGithub:N("logo-github",60036),markGithub:N("mark-github",60036),github:N("github",60036),terminal:N("terminal",60037),console:N("console",60037),repl:N("repl",60037),zap:N("zap",60038),symbolEvent:N("symbol-event",60038),error:N("error",60039),stop:N("stop",60039),variable:N("variable",60040),symbolVariable:N("symbol-variable",60040),array:N("array",60042),symbolArray:N("symbol-array",60042),symbolModule:N("symbol-module",60043),symbolPackage:N("symbol-package",60043),symbolNamespace:N("symbol-namespace",60043),symbolObject:N("symbol-object",60043),symbolMethod:N("symbol-method",60044),symbolFunction:N("symbol-function",60044),symbolConstructor:N("symbol-constructor",60044),symbolBoolean:N("symbol-boolean",60047),symbolNull:N("symbol-null",60047),symbolNumeric:N("symbol-numeric",60048),symbolNumber:N("symbol-number",60048),symbolStructure:N("symbol-structure",60049),symbolStruct:N("symbol-struct",60049),symbolParameter:N("symbol-parameter",60050),symbolTypeParameter:N("symbol-type-parameter",60050),symbolKey:N("symbol-key",60051),symbolText:N("symbol-text",60051),symbolReference:N("symbol-reference",60052),goToFile:N("go-to-file",60052),symbolEnum:N("symbol-enum",60053),symbolValue:N("symbol-value",60053),symbolRuler:N("symbol-ruler",60054),symbolUnit:N("symbol-unit",60054),activateBreakpoints:N("activate-breakpoints",60055),archive:N("archive",60056),arrowBoth:N("arrow-both",60057),arrowDown:N("arrow-down",60058),arrowLeft:N("arrow-left",60059),arrowRight:N("arrow-right",60060),arrowSmallDown:N("arrow-small-down",60061),arrowSmallLeft:N("arrow-small-left",60062),arrowSmallRight:N("arrow-small-right",60063),arrowSmallUp:N("arrow-small-up",60064),arrowUp:N("arrow-up",60065),bell:N("bell",60066),bold:N("bold",60067),book:N("book",60068),bookmark:N("bookmark",60069),debugBreakpointConditionalUnverified:N("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:N("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:N("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:N("debug-breakpoint-data-unverified",60072),debugBreakpointData:N("debug-breakpoint-data",60073),debugBreakpointDataDisabled:N("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:N("debug-breakpoint-log-unverified",60074),debugBreakpointLog:N("debug-breakpoint-log",60075),debugBreakpointLogDisabled:N("debug-breakpoint-log-disabled",60075),briefcase:N("briefcase",60076),broadcast:N("broadcast",60077),browser:N("browser",60078),bug:N("bug",60079),calendar:N("calendar",60080),caseSensitive:N("case-sensitive",60081),check:N("check",60082),checklist:N("checklist",60083),chevronDown:N("chevron-down",60084),chevronLeft:N("chevron-left",60085),chevronRight:N("chevron-right",60086),chevronUp:N("chevron-up",60087),chromeClose:N("chrome-close",60088),chromeMaximize:N("chrome-maximize",60089),chromeMinimize:N("chrome-minimize",60090),chromeRestore:N("chrome-restore",60091),circleOutline:N("circle-outline",60092),circle:N("circle",60092),debugBreakpointUnverified:N("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:N("terminal-decoration-incomplete",60092),circleSlash:N("circle-slash",60093),circuitBoard:N("circuit-board",60094),clearAll:N("clear-all",60095),clippy:N("clippy",60096),closeAll:N("close-all",60097),cloudDownload:N("cloud-download",60098),cloudUpload:N("cloud-upload",60099),code:N("code",60100),collapseAll:N("collapse-all",60101),colorMode:N("color-mode",60102),commentDiscussion:N("comment-discussion",60103),creditCard:N("credit-card",60105),dash:N("dash",60108),dashboard:N("dashboard",60109),database:N("database",60110),debugContinue:N("debug-continue",60111),debugDisconnect:N("debug-disconnect",60112),debugPause:N("debug-pause",60113),debugRestart:N("debug-restart",60114),debugStart:N("debug-start",60115),debugStepInto:N("debug-step-into",60116),debugStepOut:N("debug-step-out",60117),debugStepOver:N("debug-step-over",60118),debugStop:N("debug-stop",60119),debug:N("debug",60120),deviceCameraVideo:N("device-camera-video",60121),deviceCamera:N("device-camera",60122),deviceMobile:N("device-mobile",60123),diffAdded:N("diff-added",60124),diffIgnored:N("diff-ignored",60125),diffModified:N("diff-modified",60126),diffRemoved:N("diff-removed",60127),diffRenamed:N("diff-renamed",60128),diff:N("diff",60129),diffSidebyside:N("diff-sidebyside",60129),discard:N("discard",60130),editorLayout:N("editor-layout",60131),emptyWindow:N("empty-window",60132),exclude:N("exclude",60133),extensions:N("extensions",60134),eyeClosed:N("eye-closed",60135),fileBinary:N("file-binary",60136),fileCode:N("file-code",60137),fileMedia:N("file-media",60138),filePdf:N("file-pdf",60139),fileSubmodule:N("file-submodule",60140),fileSymlinkDirectory:N("file-symlink-directory",60141),fileSymlinkFile:N("file-symlink-file",60142),fileZip:N("file-zip",60143),files:N("files",60144),filter:N("filter",60145),flame:N("flame",60146),foldDown:N("fold-down",60147),foldUp:N("fold-up",60148),fold:N("fold",60149),folderActive:N("folder-active",60150),folderOpened:N("folder-opened",60151),gear:N("gear",60152),gift:N("gift",60153),gistSecret:N("gist-secret",60154),gist:N("gist",60155),gitCommit:N("git-commit",60156),gitCompare:N("git-compare",60157),compareChanges:N("compare-changes",60157),gitMerge:N("git-merge",60158),githubAction:N("github-action",60159),githubAlt:N("github-alt",60160),globe:N("globe",60161),grabber:N("grabber",60162),graph:N("graph",60163),gripper:N("gripper",60164),heart:N("heart",60165),home:N("home",60166),horizontalRule:N("horizontal-rule",60167),hubot:N("hubot",60168),inbox:N("inbox",60169),issueReopened:N("issue-reopened",60171),issues:N("issues",60172),italic:N("italic",60173),jersey:N("jersey",60174),json:N("json",60175),kebabVertical:N("kebab-vertical",60176),key:N("key",60177),law:N("law",60178),lightbulbAutofix:N("lightbulb-autofix",60179),linkExternal:N("link-external",60180),link:N("link",60181),listOrdered:N("list-ordered",60182),listUnordered:N("list-unordered",60183),liveShare:N("live-share",60184),loading:N("loading",60185),location:N("location",60186),mailRead:N("mail-read",60187),mail:N("mail",60188),markdown:N("markdown",60189),megaphone:N("megaphone",60190),mention:N("mention",60191),milestone:N("milestone",60192),gitPullRequestMilestone:N("git-pull-request-milestone",60192),mortarBoard:N("mortar-board",60193),move:N("move",60194),multipleWindows:N("multiple-windows",60195),mute:N("mute",60196),noNewline:N("no-newline",60197),note:N("note",60198),octoface:N("octoface",60199),openPreview:N("open-preview",60200),package:N("package",60201),paintcan:N("paintcan",60202),pin:N("pin",60203),play:N("play",60204),run:N("run",60204),plug:N("plug",60205),preserveCase:N("preserve-case",60206),preview:N("preview",60207),project:N("project",60208),pulse:N("pulse",60209),question:N("question",60210),quote:N("quote",60211),radioTower:N("radio-tower",60212),reactions:N("reactions",60213),references:N("references",60214),refresh:N("refresh",60215),regex:N("regex",60216),remoteExplorer:N("remote-explorer",60217),remote:N("remote",60218),remove:N("remove",60219),replaceAll:N("replace-all",60220),replace:N("replace",60221),repoClone:N("repo-clone",60222),repoForcePush:N("repo-force-push",60223),repoPull:N("repo-pull",60224),repoPush:N("repo-push",60225),report:N("report",60226),requestChanges:N("request-changes",60227),rocket:N("rocket",60228),rootFolderOpened:N("root-folder-opened",60229),rootFolder:N("root-folder",60230),rss:N("rss",60231),ruby:N("ruby",60232),saveAll:N("save-all",60233),saveAs:N("save-as",60234),save:N("save",60235),screenFull:N("screen-full",60236),screenNormal:N("screen-normal",60237),searchStop:N("search-stop",60238),server:N("server",60240),settingsGear:N("settings-gear",60241),settings:N("settings",60242),shield:N("shield",60243),smiley:N("smiley",60244),sortPrecedence:N("sort-precedence",60245),splitHorizontal:N("split-horizontal",60246),splitVertical:N("split-vertical",60247),squirrel:N("squirrel",60248),starFull:N("star-full",60249),starHalf:N("star-half",60250),symbolClass:N("symbol-class",60251),symbolColor:N("symbol-color",60252),symbolConstant:N("symbol-constant",60253),symbolEnumMember:N("symbol-enum-member",60254),symbolField:N("symbol-field",60255),symbolFile:N("symbol-file",60256),symbolInterface:N("symbol-interface",60257),symbolKeyword:N("symbol-keyword",60258),symbolMisc:N("symbol-misc",60259),symbolOperator:N("symbol-operator",60260),symbolProperty:N("symbol-property",60261),wrench:N("wrench",60261),wrenchSubaction:N("wrench-subaction",60261),symbolSnippet:N("symbol-snippet",60262),tasklist:N("tasklist",60263),telescope:N("telescope",60264),textSize:N("text-size",60265),threeBars:N("three-bars",60266),thumbsdown:N("thumbsdown",60267),thumbsup:N("thumbsup",60268),tools:N("tools",60269),triangleDown:N("triangle-down",60270),triangleLeft:N("triangle-left",60271),triangleRight:N("triangle-right",60272),triangleUp:N("triangle-up",60273),twitter:N("twitter",60274),unfold:N("unfold",60275),unlock:N("unlock",60276),unmute:N("unmute",60277),unverified:N("unverified",60278),verified:N("verified",60279),versions:N("versions",60280),vmActive:N("vm-active",60281),vmOutline:N("vm-outline",60282),vmRunning:N("vm-running",60283),watch:N("watch",60284),whitespace:N("whitespace",60285),wholeWord:N("whole-word",60286),window:N("window",60287),wordWrap:N("word-wrap",60288),zoomIn:N("zoom-in",60289),zoomOut:N("zoom-out",60290),listFilter:N("list-filter",60291),listFlat:N("list-flat",60292),listSelection:N("list-selection",60293),selection:N("selection",60293),listTree:N("list-tree",60294),debugBreakpointFunctionUnverified:N("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:N("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:N("debug-breakpoint-function-disabled",60296),debugStackframeActive:N("debug-stackframe-active",60297),circleSmallFilled:N("circle-small-filled",60298),debugStackframeDot:N("debug-stackframe-dot",60298),terminalDecorationMark:N("terminal-decoration-mark",60298),debugStackframe:N("debug-stackframe",60299),debugStackframeFocused:N("debug-stackframe-focused",60299),debugBreakpointUnsupported:N("debug-breakpoint-unsupported",60300),symbolString:N("symbol-string",60301),debugReverseContinue:N("debug-reverse-continue",60302),debugStepBack:N("debug-step-back",60303),debugRestartFrame:N("debug-restart-frame",60304),debugAlt:N("debug-alt",60305),callIncoming:N("call-incoming",60306),callOutgoing:N("call-outgoing",60307),menu:N("menu",60308),expandAll:N("expand-all",60309),feedback:N("feedback",60310),gitPullRequestReviewer:N("git-pull-request-reviewer",60310),groupByRefType:N("group-by-ref-type",60311),ungroupByRefType:N("ungroup-by-ref-type",60312),account:N("account",60313),gitPullRequestAssignee:N("git-pull-request-assignee",60313),bellDot:N("bell-dot",60314),debugConsole:N("debug-console",60315),library:N("library",60316),output:N("output",60317),runAll:N("run-all",60318),syncIgnored:N("sync-ignored",60319),pinned:N("pinned",60320),githubInverted:N("github-inverted",60321),serverProcess:N("server-process",60322),serverEnvironment:N("server-environment",60323),pass:N("pass",60324),issueClosed:N("issue-closed",60324),stopCircle:N("stop-circle",60325),playCircle:N("play-circle",60326),record:N("record",60327),debugAltSmall:N("debug-alt-small",60328),vmConnect:N("vm-connect",60329),cloud:N("cloud",60330),merge:N("merge",60331),export:N("export",60332),graphLeft:N("graph-left",60333),magnet:N("magnet",60334),notebook:N("notebook",60335),redo:N("redo",60336),checkAll:N("check-all",60337),pinnedDirty:N("pinned-dirty",60338),passFilled:N("pass-filled",60339),circleLargeFilled:N("circle-large-filled",60340),circleLarge:N("circle-large",60341),circleLargeOutline:N("circle-large-outline",60341),combine:N("combine",60342),gather:N("gather",60342),table:N("table",60343),variableGroup:N("variable-group",60344),typeHierarchy:N("type-hierarchy",60345),typeHierarchySub:N("type-hierarchy-sub",60346),typeHierarchySuper:N("type-hierarchy-super",60347),gitPullRequestCreate:N("git-pull-request-create",60348),runAbove:N("run-above",60349),runBelow:N("run-below",60350),notebookTemplate:N("notebook-template",60351),debugRerun:N("debug-rerun",60352),workspaceTrusted:N("workspace-trusted",60353),workspaceUntrusted:N("workspace-untrusted",60354),workspaceUnknown:N("workspace-unknown",60355),terminalCmd:N("terminal-cmd",60356),terminalDebian:N("terminal-debian",60357),terminalLinux:N("terminal-linux",60358),terminalPowershell:N("terminal-powershell",60359),terminalTmux:N("terminal-tmux",60360),terminalUbuntu:N("terminal-ubuntu",60361),terminalBash:N("terminal-bash",60362),arrowSwap:N("arrow-swap",60363),copy:N("copy",60364),personAdd:N("person-add",60365),filterFilled:N("filter-filled",60366),wand:N("wand",60367),debugLineByLine:N("debug-line-by-line",60368),inspect:N("inspect",60369),layers:N("layers",60370),layersDot:N("layers-dot",60371),layersActive:N("layers-active",60372),compass:N("compass",60373),compassDot:N("compass-dot",60374),compassActive:N("compass-active",60375),azure:N("azure",60376),issueDraft:N("issue-draft",60377),gitPullRequestClosed:N("git-pull-request-closed",60378),gitPullRequestDraft:N("git-pull-request-draft",60379),debugAll:N("debug-all",60380),debugCoverage:N("debug-coverage",60381),runErrors:N("run-errors",60382),folderLibrary:N("folder-library",60383),debugContinueSmall:N("debug-continue-small",60384),beakerStop:N("beaker-stop",60385),graphLine:N("graph-line",60386),graphScatter:N("graph-scatter",60387),pieChart:N("pie-chart",60388),bracket:N("bracket",60175),bracketDot:N("bracket-dot",60389),bracketError:N("bracket-error",60390),lockSmall:N("lock-small",60391),azureDevops:N("azure-devops",60392),verifiedFilled:N("verified-filled",60393),newline:N("newline",60394),layout:N("layout",60395),layoutActivitybarLeft:N("layout-activitybar-left",60396),layoutActivitybarRight:N("layout-activitybar-right",60397),layoutPanelLeft:N("layout-panel-left",60398),layoutPanelCenter:N("layout-panel-center",60399),layoutPanelJustify:N("layout-panel-justify",60400),layoutPanelRight:N("layout-panel-right",60401),layoutPanel:N("layout-panel",60402),layoutSidebarLeft:N("layout-sidebar-left",60403),layoutSidebarRight:N("layout-sidebar-right",60404),layoutStatusbar:N("layout-statusbar",60405),layoutMenubar:N("layout-menubar",60406),layoutCentered:N("layout-centered",60407),target:N("target",60408),indent:N("indent",60409),recordSmall:N("record-small",60410),errorSmall:N("error-small",60411),terminalDecorationError:N("terminal-decoration-error",60411),arrowCircleDown:N("arrow-circle-down",60412),arrowCircleLeft:N("arrow-circle-left",60413),arrowCircleRight:N("arrow-circle-right",60414),arrowCircleUp:N("arrow-circle-up",60415),layoutSidebarRightOff:N("layout-sidebar-right-off",60416),layoutPanelOff:N("layout-panel-off",60417),layoutSidebarLeftOff:N("layout-sidebar-left-off",60418),blank:N("blank",60419),heartFilled:N("heart-filled",60420),map:N("map",60421),mapHorizontal:N("map-horizontal",60421),foldHorizontal:N("fold-horizontal",60421),mapFilled:N("map-filled",60422),mapHorizontalFilled:N("map-horizontal-filled",60422),foldHorizontalFilled:N("fold-horizontal-filled",60422),circleSmall:N("circle-small",60423),bellSlash:N("bell-slash",60424),bellSlashDot:N("bell-slash-dot",60425),commentUnresolved:N("comment-unresolved",60426),gitPullRequestGoToChanges:N("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:N("git-pull-request-new-changes",60428),searchFuzzy:N("search-fuzzy",60429),commentDraft:N("comment-draft",60430),send:N("send",60431),sparkle:N("sparkle",60432),insert:N("insert",60433),mic:N("mic",60434),thumbsdownFilled:N("thumbsdown-filled",60435),thumbsupFilled:N("thumbsup-filled",60436),coffee:N("coffee",60437),snake:N("snake",60438),game:N("game",60439),vr:N("vr",60440),chip:N("chip",60441),piano:N("piano",60442),music:N("music",60443),micFilled:N("mic-filled",60444),repoFetch:N("repo-fetch",60445),copilot:N("copilot",60446),lightbulbSparkle:N("lightbulb-sparkle",60447),robot:N("robot",60448),sparkleFilled:N("sparkle-filled",60449),diffSingle:N("diff-single",60450),diffMultiple:N("diff-multiple",60451),surroundWith:N("surround-with",60452),share:N("share",60453),gitStash:N("git-stash",60454),gitStashApply:N("git-stash-apply",60455),gitStashPop:N("git-stash-pop",60456),vscode:N("vscode",60457),vscodeInsiders:N("vscode-insiders",60458),codeOss:N("code-oss",60459),runCoverage:N("run-coverage",60460),runAllCoverage:N("run-all-coverage",60461),coverage:N("coverage",60462),githubProject:N("github-project",60463),mapVertical:N("map-vertical",60464),foldVertical:N("fold-vertical",60464),mapVerticalFilled:N("map-vertical-filled",60465),foldVerticalFilled:N("fold-vertical-filled",60465),goToSearch:N("go-to-search",60466),percentage:N("percentage",60467),sortPercentage:N("sort-percentage",60467),attach:N("attach",60468)},yX={dialogError:N("dialog-error","error"),dialogWarning:N("dialog-warning","warning"),dialogInfo:N("dialog-info","info"),dialogClose:N("dialog-close","close"),treeItemExpanded:N("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:N("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:N("tree-filter-on-type-off","list-selection"),treeFilterClear:N("tree-filter-clear","close"),treeItemLoading:N("tree-item-loading","loading"),menuSelection:N("menu-selection","check"),menuSubmenu:N("menu-submenu","chevron-right"),menuBarMore:N("menubar-more","more"),scrollbarButtonLeft:N("scrollbar-button-left","triangle-left"),scrollbarButtonRight:N("scrollbar-button-right","triangle-right"),scrollbarButtonUp:N("scrollbar-button-up","triangle-up"),scrollbarButtonDown:N("scrollbar-button-down","triangle-down"),toolBarMore:N("toolbar-more","more"),quickInputBack:N("quick-input-back","arrow-left"),dropDownButton:N("drop-down-button",60084),symbolCustomColor:N("symbol-customcolor",60252),exportIcon:N("export",60332),workspaceUnspecified:N("workspace-unspecified",60355),newLine:N("newline",60394),thumbsDownFilled:N("thumbsdown-filled",60435),thumbsUpFilled:N("thumbsup-filled",60436),gitFetch:N("git-fetch",60445),lightbulbSparkleAutofix:N("lightbulb-sparkle-autofix",60447),debugBreakpointPending:N("debug-breakpoint-pending",60377)},$e={...CX,...yX};let vW=class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new re,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),bt(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){this._factories.get(e)?.dispose();const i=new SX(this,e,t);return this._factories.set(e,i),bt(()=>{const n=this._factories.get(e);!n||n!==i||(this._factories.delete(e),n.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this._factories.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const i=this._factories.get(e);return!!(!i||i.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};class SX extends ve{get isResolved(){return this._isResolved}constructor(e,t,i){super(),this._registry=e,this._languageId=t,this._factory=i,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}let e_=class{constructor(e,t,i){this.offset=e,this.type=t,this.language=i,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}};class c8{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}}class s2{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}var SM;(function(s){s[s.Increase=0]="Increase",s[s.Decrease=1]="Decrease"})(SM||(SM={}));var xM;(function(s){const e=new Map;e.set(0,$e.symbolMethod),e.set(1,$e.symbolFunction),e.set(2,$e.symbolConstructor),e.set(3,$e.symbolField),e.set(4,$e.symbolVariable),e.set(5,$e.symbolClass),e.set(6,$e.symbolStruct),e.set(7,$e.symbolInterface),e.set(8,$e.symbolModule),e.set(9,$e.symbolProperty),e.set(10,$e.symbolEvent),e.set(11,$e.symbolOperator),e.set(12,$e.symbolUnit),e.set(13,$e.symbolValue),e.set(15,$e.symbolEnum),e.set(14,$e.symbolConstant),e.set(15,$e.symbolEnum),e.set(16,$e.symbolEnumMember),e.set(17,$e.symbolKeyword),e.set(27,$e.symbolSnippet),e.set(18,$e.symbolText),e.set(19,$e.symbolColor),e.set(20,$e.symbolFile),e.set(21,$e.symbolReference),e.set(22,$e.symbolCustomColor),e.set(23,$e.symbolFolder),e.set(24,$e.symbolTypeParameter),e.set(25,$e.account),e.set(26,$e.issues);function t(r){let o=e.get(r);return o||(console.info("No codicon found for CompletionItemKind "+r),o=$e.symbolProperty),o}s.toIcon=t;const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26);function n(r,o){let a=i.get(r);return typeof a>"u"&&!o&&(a=9),a}s.fromString=n})(xM||(xM={}));var kM;(function(s){s[s.Automatic=0]="Automatic",s[s.Explicit=1]="Explicit"})(kM||(kM={}));class xX{constructor(e,t,i,n){this.range=e,this.text=t,this.completionKind=i,this.isSnippetText=n}equals(e){return Q.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}var LM;(function(s){s[s.Automatic=0]="Automatic",s[s.PasteAs=1]="PasteAs"})(LM||(LM={}));var DM;(function(s){s[s.Invoke=1]="Invoke",s[s.TriggerCharacter=2]="TriggerCharacter",s[s.ContentChange=3]="ContentChange"})(DM||(DM={}));var EM;(function(s){s[s.Text=0]="Text",s[s.Read=1]="Read",s[s.Write=2]="Write"})(EM||(EM={}));b("Array","array"),b("Boolean","boolean"),b("Class","class"),b("Constant","constant"),b("Constructor","constructor"),b("Enum","enumeration"),b("EnumMember","enumeration member"),b("Event","event"),b("Field","field"),b("File","file"),b("Function","function"),b("Interface","interface"),b("Key","key"),b("Method","method"),b("Module","module"),b("Namespace","namespace"),b("Null","null"),b("Number","number"),b("Object","object"),b("Operator","operator"),b("Package","package"),b("Property","property"),b("String","string"),b("Struct","struct"),b("TypeParameter","type parameter"),b("Variable","variable");var s5;(function(s){const e=new Map;e.set(0,$e.symbolFile),e.set(1,$e.symbolModule),e.set(2,$e.symbolNamespace),e.set(3,$e.symbolPackage),e.set(4,$e.symbolClass),e.set(5,$e.symbolMethod),e.set(6,$e.symbolProperty),e.set(7,$e.symbolField),e.set(8,$e.symbolConstructor),e.set(9,$e.symbolEnum),e.set(10,$e.symbolInterface),e.set(11,$e.symbolFunction),e.set(12,$e.symbolVariable),e.set(13,$e.symbolConstant),e.set(14,$e.symbolString),e.set(15,$e.symbolNumber),e.set(16,$e.symbolBoolean),e.set(17,$e.symbolArray),e.set(18,$e.symbolObject),e.set(19,$e.symbolKey),e.set(20,$e.symbolNull),e.set(21,$e.symbolEnumMember),e.set(22,$e.symbolStruct),e.set(23,$e.symbolEvent),e.set(24,$e.symbolOperator),e.set(25,$e.symbolTypeParameter);function t(i){let n=e.get(i);return n||(console.info("No codicon found for SymbolKind "+i),n=$e.symbolProperty),n}s.toIcon=t})(s5||(s5={}));const aa=class aa{static fromValue(e){switch(e){case"comment":return aa.Comment;case"imports":return aa.Imports;case"region":return aa.Region}return new aa(e)}constructor(e){this.value=e}};aa.Comment=new aa("comment"),aa.Imports=new aa("imports"),aa.Region=new aa("region");let r5=aa;var TM;(function(s){s[s.AIGenerated=1]="AIGenerated"})(TM||(TM={}));var NM;(function(s){s[s.Invoke=0]="Invoke",s[s.Automatic=1]="Automatic"})(NM||(NM={}));var IM;(function(s){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}s.is=e})(IM||(IM={}));var MM;(function(s){s[s.Type=1]="Type",s[s.Parameter=2]="Parameter"})(MM||(MM={}));class kX{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const un=new vW,o5=new vW;var RM;(function(s){s[s.Invoke=0]="Invoke",s[s.Automatic=1]="Automatic"})(RM||(RM={}));var a5;(function(s){s[s.Unknown=0]="Unknown",s[s.Disabled=1]="Disabled",s[s.Enabled=2]="Enabled"})(a5||(a5={}));var l5;(function(s){s[s.Invoke=1]="Invoke",s[s.Auto=2]="Auto"})(l5||(l5={}));var c5;(function(s){s[s.None=0]="None",s[s.KeepWhitespace=1]="KeepWhitespace",s[s.InsertAsSnippet=4]="InsertAsSnippet"})(c5||(c5={}));var u5;(function(s){s[s.Method=0]="Method",s[s.Function=1]="Function",s[s.Constructor=2]="Constructor",s[s.Field=3]="Field",s[s.Variable=4]="Variable",s[s.Class=5]="Class",s[s.Struct=6]="Struct",s[s.Interface=7]="Interface",s[s.Module=8]="Module",s[s.Property=9]="Property",s[s.Event=10]="Event",s[s.Operator=11]="Operator",s[s.Unit=12]="Unit",s[s.Value=13]="Value",s[s.Constant=14]="Constant",s[s.Enum=15]="Enum",s[s.EnumMember=16]="EnumMember",s[s.Keyword=17]="Keyword",s[s.Text=18]="Text",s[s.Color=19]="Color",s[s.File=20]="File",s[s.Reference=21]="Reference",s[s.Customcolor=22]="Customcolor",s[s.Folder=23]="Folder",s[s.TypeParameter=24]="TypeParameter",s[s.User=25]="User",s[s.Issue=26]="Issue",s[s.Snippet=27]="Snippet"})(u5||(u5={}));var h5;(function(s){s[s.Deprecated=1]="Deprecated"})(h5||(h5={}));var d5;(function(s){s[s.Invoke=0]="Invoke",s[s.TriggerCharacter=1]="TriggerCharacter",s[s.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(d5||(d5={}));var f5;(function(s){s[s.EXACT=0]="EXACT",s[s.ABOVE=1]="ABOVE",s[s.BELOW=2]="BELOW"})(f5||(f5={}));var g5;(function(s){s[s.NotSet=0]="NotSet",s[s.ContentFlush=1]="ContentFlush",s[s.RecoverFromMarkers=2]="RecoverFromMarkers",s[s.Explicit=3]="Explicit",s[s.Paste=4]="Paste",s[s.Undo=5]="Undo",s[s.Redo=6]="Redo"})(g5||(g5={}));var m5;(function(s){s[s.LF=1]="LF",s[s.CRLF=2]="CRLF"})(m5||(m5={}));var p5;(function(s){s[s.Text=0]="Text",s[s.Read=1]="Read",s[s.Write=2]="Write"})(p5||(p5={}));var _5;(function(s){s[s.None=0]="None",s[s.Keep=1]="Keep",s[s.Brackets=2]="Brackets",s[s.Advanced=3]="Advanced",s[s.Full=4]="Full"})(_5||(_5={}));var v5;(function(s){s[s.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",s[s.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",s[s.accessibilitySupport=2]="accessibilitySupport",s[s.accessibilityPageSize=3]="accessibilityPageSize",s[s.ariaLabel=4]="ariaLabel",s[s.ariaRequired=5]="ariaRequired",s[s.autoClosingBrackets=6]="autoClosingBrackets",s[s.autoClosingComments=7]="autoClosingComments",s[s.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",s[s.autoClosingDelete=9]="autoClosingDelete",s[s.autoClosingOvertype=10]="autoClosingOvertype",s[s.autoClosingQuotes=11]="autoClosingQuotes",s[s.autoIndent=12]="autoIndent",s[s.automaticLayout=13]="automaticLayout",s[s.autoSurround=14]="autoSurround",s[s.bracketPairColorization=15]="bracketPairColorization",s[s.guides=16]="guides",s[s.codeLens=17]="codeLens",s[s.codeLensFontFamily=18]="codeLensFontFamily",s[s.codeLensFontSize=19]="codeLensFontSize",s[s.colorDecorators=20]="colorDecorators",s[s.colorDecoratorsLimit=21]="colorDecoratorsLimit",s[s.columnSelection=22]="columnSelection",s[s.comments=23]="comments",s[s.contextmenu=24]="contextmenu",s[s.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",s[s.cursorBlinking=26]="cursorBlinking",s[s.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",s[s.cursorStyle=28]="cursorStyle",s[s.cursorSurroundingLines=29]="cursorSurroundingLines",s[s.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",s[s.cursorWidth=31]="cursorWidth",s[s.disableLayerHinting=32]="disableLayerHinting",s[s.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",s[s.domReadOnly=34]="domReadOnly",s[s.dragAndDrop=35]="dragAndDrop",s[s.dropIntoEditor=36]="dropIntoEditor",s[s.emptySelectionClipboard=37]="emptySelectionClipboard",s[s.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",s[s.extraEditorClassName=39]="extraEditorClassName",s[s.fastScrollSensitivity=40]="fastScrollSensitivity",s[s.find=41]="find",s[s.fixedOverflowWidgets=42]="fixedOverflowWidgets",s[s.folding=43]="folding",s[s.foldingStrategy=44]="foldingStrategy",s[s.foldingHighlight=45]="foldingHighlight",s[s.foldingImportsByDefault=46]="foldingImportsByDefault",s[s.foldingMaximumRegions=47]="foldingMaximumRegions",s[s.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",s[s.fontFamily=49]="fontFamily",s[s.fontInfo=50]="fontInfo",s[s.fontLigatures=51]="fontLigatures",s[s.fontSize=52]="fontSize",s[s.fontWeight=53]="fontWeight",s[s.fontVariations=54]="fontVariations",s[s.formatOnPaste=55]="formatOnPaste",s[s.formatOnType=56]="formatOnType",s[s.glyphMargin=57]="glyphMargin",s[s.gotoLocation=58]="gotoLocation",s[s.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",s[s.hover=60]="hover",s[s.inDiffEditor=61]="inDiffEditor",s[s.inlineSuggest=62]="inlineSuggest",s[s.inlineEdit=63]="inlineEdit",s[s.letterSpacing=64]="letterSpacing",s[s.lightbulb=65]="lightbulb",s[s.lineDecorationsWidth=66]="lineDecorationsWidth",s[s.lineHeight=67]="lineHeight",s[s.lineNumbers=68]="lineNumbers",s[s.lineNumbersMinChars=69]="lineNumbersMinChars",s[s.linkedEditing=70]="linkedEditing",s[s.links=71]="links",s[s.matchBrackets=72]="matchBrackets",s[s.minimap=73]="minimap",s[s.mouseStyle=74]="mouseStyle",s[s.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",s[s.mouseWheelZoom=76]="mouseWheelZoom",s[s.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",s[s.multiCursorModifier=78]="multiCursorModifier",s[s.multiCursorPaste=79]="multiCursorPaste",s[s.multiCursorLimit=80]="multiCursorLimit",s[s.occurrencesHighlight=81]="occurrencesHighlight",s[s.overviewRulerBorder=82]="overviewRulerBorder",s[s.overviewRulerLanes=83]="overviewRulerLanes",s[s.padding=84]="padding",s[s.pasteAs=85]="pasteAs",s[s.parameterHints=86]="parameterHints",s[s.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",s[s.placeholder=88]="placeholder",s[s.definitionLinkOpensInPeek=89]="definitionLinkOpensInPeek",s[s.quickSuggestions=90]="quickSuggestions",s[s.quickSuggestionsDelay=91]="quickSuggestionsDelay",s[s.readOnly=92]="readOnly",s[s.readOnlyMessage=93]="readOnlyMessage",s[s.renameOnType=94]="renameOnType",s[s.renderControlCharacters=95]="renderControlCharacters",s[s.renderFinalNewline=96]="renderFinalNewline",s[s.renderLineHighlight=97]="renderLineHighlight",s[s.renderLineHighlightOnlyWhenFocus=98]="renderLineHighlightOnlyWhenFocus",s[s.renderValidationDecorations=99]="renderValidationDecorations",s[s.renderWhitespace=100]="renderWhitespace",s[s.revealHorizontalRightPadding=101]="revealHorizontalRightPadding",s[s.roundedSelection=102]="roundedSelection",s[s.rulers=103]="rulers",s[s.scrollbar=104]="scrollbar",s[s.scrollBeyondLastColumn=105]="scrollBeyondLastColumn",s[s.scrollBeyondLastLine=106]="scrollBeyondLastLine",s[s.scrollPredominantAxis=107]="scrollPredominantAxis",s[s.selectionClipboard=108]="selectionClipboard",s[s.selectionHighlight=109]="selectionHighlight",s[s.selectOnLineNumbers=110]="selectOnLineNumbers",s[s.showFoldingControls=111]="showFoldingControls",s[s.showUnused=112]="showUnused",s[s.snippetSuggestions=113]="snippetSuggestions",s[s.smartSelect=114]="smartSelect",s[s.smoothScrolling=115]="smoothScrolling",s[s.stickyScroll=116]="stickyScroll",s[s.stickyTabStops=117]="stickyTabStops",s[s.stopRenderingLineAfter=118]="stopRenderingLineAfter",s[s.suggest=119]="suggest",s[s.suggestFontSize=120]="suggestFontSize",s[s.suggestLineHeight=121]="suggestLineHeight",s[s.suggestOnTriggerCharacters=122]="suggestOnTriggerCharacters",s[s.suggestSelection=123]="suggestSelection",s[s.tabCompletion=124]="tabCompletion",s[s.tabIndex=125]="tabIndex",s[s.unicodeHighlighting=126]="unicodeHighlighting",s[s.unusualLineTerminators=127]="unusualLineTerminators",s[s.useShadowDOM=128]="useShadowDOM",s[s.useTabStops=129]="useTabStops",s[s.wordBreak=130]="wordBreak",s[s.wordSegmenterLocales=131]="wordSegmenterLocales",s[s.wordSeparators=132]="wordSeparators",s[s.wordWrap=133]="wordWrap",s[s.wordWrapBreakAfterCharacters=134]="wordWrapBreakAfterCharacters",s[s.wordWrapBreakBeforeCharacters=135]="wordWrapBreakBeforeCharacters",s[s.wordWrapColumn=136]="wordWrapColumn",s[s.wordWrapOverride1=137]="wordWrapOverride1",s[s.wordWrapOverride2=138]="wordWrapOverride2",s[s.wrappingIndent=139]="wrappingIndent",s[s.wrappingStrategy=140]="wrappingStrategy",s[s.showDeprecated=141]="showDeprecated",s[s.inlayHints=142]="inlayHints",s[s.editorClassName=143]="editorClassName",s[s.pixelRatio=144]="pixelRatio",s[s.tabFocusMode=145]="tabFocusMode",s[s.layoutInfo=146]="layoutInfo",s[s.wrappingInfo=147]="wrappingInfo",s[s.defaultColorDecorators=148]="defaultColorDecorators",s[s.colorDecoratorsActivatedOn=149]="colorDecoratorsActivatedOn",s[s.inlineCompletionsAccessibilityVerbose=150]="inlineCompletionsAccessibilityVerbose"})(v5||(v5={}));var b5;(function(s){s[s.TextDefined=0]="TextDefined",s[s.LF=1]="LF",s[s.CRLF=2]="CRLF"})(b5||(b5={}));var w5;(function(s){s[s.LF=0]="LF",s[s.CRLF=1]="CRLF"})(w5||(w5={}));var C5;(function(s){s[s.Left=1]="Left",s[s.Center=2]="Center",s[s.Right=3]="Right"})(C5||(C5={}));var y5;(function(s){s[s.Increase=0]="Increase",s[s.Decrease=1]="Decrease"})(y5||(y5={}));var S5;(function(s){s[s.None=0]="None",s[s.Indent=1]="Indent",s[s.IndentOutdent=2]="IndentOutdent",s[s.Outdent=3]="Outdent"})(S5||(S5={}));var x5;(function(s){s[s.Both=0]="Both",s[s.Right=1]="Right",s[s.Left=2]="Left",s[s.None=3]="None"})(x5||(x5={}));var k5;(function(s){s[s.Type=1]="Type",s[s.Parameter=2]="Parameter"})(k5||(k5={}));var L5;(function(s){s[s.Automatic=0]="Automatic",s[s.Explicit=1]="Explicit"})(L5||(L5={}));var D5;(function(s){s[s.Invoke=0]="Invoke",s[s.Automatic=1]="Automatic"})(D5||(D5={}));var E5;(function(s){s[s.DependsOnKbLayout=-1]="DependsOnKbLayout",s[s.Unknown=0]="Unknown",s[s.Backspace=1]="Backspace",s[s.Tab=2]="Tab",s[s.Enter=3]="Enter",s[s.Shift=4]="Shift",s[s.Ctrl=5]="Ctrl",s[s.Alt=6]="Alt",s[s.PauseBreak=7]="PauseBreak",s[s.CapsLock=8]="CapsLock",s[s.Escape=9]="Escape",s[s.Space=10]="Space",s[s.PageUp=11]="PageUp",s[s.PageDown=12]="PageDown",s[s.End=13]="End",s[s.Home=14]="Home",s[s.LeftArrow=15]="LeftArrow",s[s.UpArrow=16]="UpArrow",s[s.RightArrow=17]="RightArrow",s[s.DownArrow=18]="DownArrow",s[s.Insert=19]="Insert",s[s.Delete=20]="Delete",s[s.Digit0=21]="Digit0",s[s.Digit1=22]="Digit1",s[s.Digit2=23]="Digit2",s[s.Digit3=24]="Digit3",s[s.Digit4=25]="Digit4",s[s.Digit5=26]="Digit5",s[s.Digit6=27]="Digit6",s[s.Digit7=28]="Digit7",s[s.Digit8=29]="Digit8",s[s.Digit9=30]="Digit9",s[s.KeyA=31]="KeyA",s[s.KeyB=32]="KeyB",s[s.KeyC=33]="KeyC",s[s.KeyD=34]="KeyD",s[s.KeyE=35]="KeyE",s[s.KeyF=36]="KeyF",s[s.KeyG=37]="KeyG",s[s.KeyH=38]="KeyH",s[s.KeyI=39]="KeyI",s[s.KeyJ=40]="KeyJ",s[s.KeyK=41]="KeyK",s[s.KeyL=42]="KeyL",s[s.KeyM=43]="KeyM",s[s.KeyN=44]="KeyN",s[s.KeyO=45]="KeyO",s[s.KeyP=46]="KeyP",s[s.KeyQ=47]="KeyQ",s[s.KeyR=48]="KeyR",s[s.KeyS=49]="KeyS",s[s.KeyT=50]="KeyT",s[s.KeyU=51]="KeyU",s[s.KeyV=52]="KeyV",s[s.KeyW=53]="KeyW",s[s.KeyX=54]="KeyX",s[s.KeyY=55]="KeyY",s[s.KeyZ=56]="KeyZ",s[s.Meta=57]="Meta",s[s.ContextMenu=58]="ContextMenu",s[s.F1=59]="F1",s[s.F2=60]="F2",s[s.F3=61]="F3",s[s.F4=62]="F4",s[s.F5=63]="F5",s[s.F6=64]="F6",s[s.F7=65]="F7",s[s.F8=66]="F8",s[s.F9=67]="F9",s[s.F10=68]="F10",s[s.F11=69]="F11",s[s.F12=70]="F12",s[s.F13=71]="F13",s[s.F14=72]="F14",s[s.F15=73]="F15",s[s.F16=74]="F16",s[s.F17=75]="F17",s[s.F18=76]="F18",s[s.F19=77]="F19",s[s.F20=78]="F20",s[s.F21=79]="F21",s[s.F22=80]="F22",s[s.F23=81]="F23",s[s.F24=82]="F24",s[s.NumLock=83]="NumLock",s[s.ScrollLock=84]="ScrollLock",s[s.Semicolon=85]="Semicolon",s[s.Equal=86]="Equal",s[s.Comma=87]="Comma",s[s.Minus=88]="Minus",s[s.Period=89]="Period",s[s.Slash=90]="Slash",s[s.Backquote=91]="Backquote",s[s.BracketLeft=92]="BracketLeft",s[s.Backslash=93]="Backslash",s[s.BracketRight=94]="BracketRight",s[s.Quote=95]="Quote",s[s.OEM_8=96]="OEM_8",s[s.IntlBackslash=97]="IntlBackslash",s[s.Numpad0=98]="Numpad0",s[s.Numpad1=99]="Numpad1",s[s.Numpad2=100]="Numpad2",s[s.Numpad3=101]="Numpad3",s[s.Numpad4=102]="Numpad4",s[s.Numpad5=103]="Numpad5",s[s.Numpad6=104]="Numpad6",s[s.Numpad7=105]="Numpad7",s[s.Numpad8=106]="Numpad8",s[s.Numpad9=107]="Numpad9",s[s.NumpadMultiply=108]="NumpadMultiply",s[s.NumpadAdd=109]="NumpadAdd",s[s.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",s[s.NumpadSubtract=111]="NumpadSubtract",s[s.NumpadDecimal=112]="NumpadDecimal",s[s.NumpadDivide=113]="NumpadDivide",s[s.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",s[s.ABNT_C1=115]="ABNT_C1",s[s.ABNT_C2=116]="ABNT_C2",s[s.AudioVolumeMute=117]="AudioVolumeMute",s[s.AudioVolumeUp=118]="AudioVolumeUp",s[s.AudioVolumeDown=119]="AudioVolumeDown",s[s.BrowserSearch=120]="BrowserSearch",s[s.BrowserHome=121]="BrowserHome",s[s.BrowserBack=122]="BrowserBack",s[s.BrowserForward=123]="BrowserForward",s[s.MediaTrackNext=124]="MediaTrackNext",s[s.MediaTrackPrevious=125]="MediaTrackPrevious",s[s.MediaStop=126]="MediaStop",s[s.MediaPlayPause=127]="MediaPlayPause",s[s.LaunchMediaPlayer=128]="LaunchMediaPlayer",s[s.LaunchMail=129]="LaunchMail",s[s.LaunchApp2=130]="LaunchApp2",s[s.Clear=131]="Clear",s[s.MAX_VALUE=132]="MAX_VALUE"})(E5||(E5={}));var T5;(function(s){s[s.Hint=1]="Hint",s[s.Info=2]="Info",s[s.Warning=4]="Warning",s[s.Error=8]="Error"})(T5||(T5={}));var N5;(function(s){s[s.Unnecessary=1]="Unnecessary",s[s.Deprecated=2]="Deprecated"})(N5||(N5={}));var I5;(function(s){s[s.Inline=1]="Inline",s[s.Gutter=2]="Gutter"})(I5||(I5={}));var M5;(function(s){s[s.Normal=1]="Normal",s[s.Underlined=2]="Underlined"})(M5||(M5={}));var R5;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.TEXTAREA=1]="TEXTAREA",s[s.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",s[s.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",s[s.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",s[s.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",s[s.CONTENT_TEXT=6]="CONTENT_TEXT",s[s.CONTENT_EMPTY=7]="CONTENT_EMPTY",s[s.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",s[s.CONTENT_WIDGET=9]="CONTENT_WIDGET",s[s.OVERVIEW_RULER=10]="OVERVIEW_RULER",s[s.SCROLLBAR=11]="SCROLLBAR",s[s.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",s[s.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(R5||(R5={}));var A5;(function(s){s[s.AIGenerated=1]="AIGenerated"})(A5||(A5={}));var P5;(function(s){s[s.Invoke=0]="Invoke",s[s.Automatic=1]="Automatic"})(P5||(P5={}));var O5;(function(s){s[s.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",s[s.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",s[s.TOP_CENTER=2]="TOP_CENTER"})(O5||(O5={}));var F5;(function(s){s[s.Left=1]="Left",s[s.Center=2]="Center",s[s.Right=4]="Right",s[s.Full=7]="Full"})(F5||(F5={}));var B5;(function(s){s[s.Word=0]="Word",s[s.Line=1]="Line",s[s.Suggest=2]="Suggest"})(B5||(B5={}));var W5;(function(s){s[s.Left=0]="Left",s[s.Right=1]="Right",s[s.None=2]="None",s[s.LeftOfInjectedText=3]="LeftOfInjectedText",s[s.RightOfInjectedText=4]="RightOfInjectedText"})(W5||(W5={}));var V5;(function(s){s[s.Off=0]="Off",s[s.On=1]="On",s[s.Relative=2]="Relative",s[s.Interval=3]="Interval",s[s.Custom=4]="Custom"})(V5||(V5={}));var z5;(function(s){s[s.None=0]="None",s[s.Text=1]="Text",s[s.Blocks=2]="Blocks"})(z5||(z5={}));var H5;(function(s){s[s.Smooth=0]="Smooth",s[s.Immediate=1]="Immediate"})(H5||(H5={}));var j5;(function(s){s[s.Auto=1]="Auto",s[s.Hidden=2]="Hidden",s[s.Visible=3]="Visible"})(j5||(j5={}));var U5;(function(s){s[s.LTR=0]="LTR",s[s.RTL=1]="RTL"})(U5||(U5={}));var $5;(function(s){s.Off="off",s.OnCode="onCode",s.On="on"})($5||($5={}));var q5;(function(s){s[s.Invoke=1]="Invoke",s[s.TriggerCharacter=2]="TriggerCharacter",s[s.ContentChange=3]="ContentChange"})(q5||(q5={}));var K5;(function(s){s[s.File=0]="File",s[s.Module=1]="Module",s[s.Namespace=2]="Namespace",s[s.Package=3]="Package",s[s.Class=4]="Class",s[s.Method=5]="Method",s[s.Property=6]="Property",s[s.Field=7]="Field",s[s.Constructor=8]="Constructor",s[s.Enum=9]="Enum",s[s.Interface=10]="Interface",s[s.Function=11]="Function",s[s.Variable=12]="Variable",s[s.Constant=13]="Constant",s[s.String=14]="String",s[s.Number=15]="Number",s[s.Boolean=16]="Boolean",s[s.Array=17]="Array",s[s.Object=18]="Object",s[s.Key=19]="Key",s[s.Null=20]="Null",s[s.EnumMember=21]="EnumMember",s[s.Struct=22]="Struct",s[s.Event=23]="Event",s[s.Operator=24]="Operator",s[s.TypeParameter=25]="TypeParameter"})(K5||(K5={}));var G5;(function(s){s[s.Deprecated=1]="Deprecated"})(G5||(G5={}));var Z5;(function(s){s[s.Hidden=0]="Hidden",s[s.Blink=1]="Blink",s[s.Smooth=2]="Smooth",s[s.Phase=3]="Phase",s[s.Expand=4]="Expand",s[s.Solid=5]="Solid"})(Z5||(Z5={}));var Y5;(function(s){s[s.Line=1]="Line",s[s.Block=2]="Block",s[s.Underline=3]="Underline",s[s.LineThin=4]="LineThin",s[s.BlockOutline=5]="BlockOutline",s[s.UnderlineThin=6]="UnderlineThin"})(Y5||(Y5={}));var X5;(function(s){s[s.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",s[s.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",s[s.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",s[s.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(X5||(X5={}));var Q5;(function(s){s[s.None=0]="None",s[s.Same=1]="Same",s[s.Indent=2]="Indent",s[s.DeepIndent=3]="DeepIndent"})(Q5||(Q5={}));var Yc;let LX=(Yc=class{static chord(e,t){return QY(e,t)}},Yc.CtrlCmd=2048,Yc.Shift=1024,Yc.Alt=512,Yc.WinCtrl=256,Yc);function bW(){return{editor:void 0,languages:void 0,CancellationTokenSource:Cp,Emitter:re,KeyCode:E5,KeyMod:LX,Position:ce,Range:Q,Selection:wi,SelectionDirection:U5,MarkerSeverity:T5,MarkerTag:N5,Uri:Et,Token:e_}}function DX(s,e){const t=s;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:()=>e})}const bi=window;function wW(s){return s}class EX{constructor(e,t){this.lastCache=void 0,this.lastArgKey=void 0,typeof e=="function"?(this._fn=e,this._computeKey=wW):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}}class AM{get cachedValues(){return this._map}constructor(e,t){this._map=new Map,this._map2=new Map,typeof e=="function"?(this._fn=e,this._computeKey=wW):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);const i=this._fn(e);return this._map.set(e,i),this._map2.set(t,i),i}}class Nh{constructor(e){this.executor=e,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}function TX(s){return!s||typeof s!="string"?!0:s.trim().length===0}const NX=/{(\d+)}/g;function J5(s,...e){return e.length===0?s:s.replace(NX,function(t,i){const n=parseInt(i,10);return isNaN(n)||n<0||n>=e.length?t:e[n]})}function IX(s){return s.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function t1(s){return s.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function hu(s){return s.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function r2(s,e){if(!s||!e)return s;const t=e.length;if(t===0||s.length===0)return s;let i=0;for(;s.indexOf(e,i)===i;)i=i+t;return s.substring(i)}function MX(s,e){if(!s||!e)return s;const t=e.length,i=s.length;if(t===0||i===0)return s;let n=i,r=-1;for(;r=s.lastIndexOf(e,n-1),!(r===-1||r+t!==n);){if(r===0)return"";n=r}return s.substring(0,n)}function RX(s){return s.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function CW(s,e,t={}){if(!s)throw new Error("Cannot create regex from empty string");e||(s=hu(s)),t.wholeWord&&(/\B/.test(s.charAt(0))||(s="\\b"+s),/\B/.test(s.charAt(s.length-1))||(s=s+"\\b"));let i="";return t.global&&(i+="g"),t.matchCase||(i+="i"),t.multiline&&(i+="m"),t.unicode&&(i+="u"),new RegExp(s,i)}function AX(s){return s.source==="^"||s.source==="^$"||s.source==="$"||s.source==="^\\s*$"?!1:!!(s.exec("")&&s.lastIndex===0)}function yp(s){return s.split(/\r\n|\r|\n/)}function Ur(s){for(let e=0,t=s.length;e<t;e++){const i=s.charCodeAt(e);if(i!==32&&i!==9)return e}return-1}function Js(s,e=0,t=s.length){for(let i=e;i<t;i++){const n=s.charCodeAt(i);if(n!==32&&n!==9)return s.substring(e,i)}return s.substring(e,t)}function Vf(s,e=s.length-1){for(let t=e;t>=0;t--){const i=s.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function e3(s,e){return s<e?-1:s>e?1:0}function u8(s,e,t=0,i=s.length,n=0,r=e.length){for(;t<i&&n<r;t++,n++){const l=s.charCodeAt(t),c=e.charCodeAt(n);if(l<c)return-1;if(l>c)return 1}const o=i-t,a=r-n;return o<a?-1:o>a?1:0}function PM(s,e){return G_(s,e,0,s.length,0,e.length)}function G_(s,e,t=0,i=s.length,n=0,r=e.length){for(;t<i&&n<r;t++,n++){let l=s.charCodeAt(t),c=e.charCodeAt(n);if(l===c)continue;if(l>=128||c>=128)return u8(s.toLowerCase(),e.toLowerCase(),t,i,n,r);jg(l)&&(l-=32),jg(c)&&(c-=32);const u=l-c;if(u!==0)return u}const o=i-t,a=r-n;return o<a?-1:o>a?1:0}function Mb(s){return s>=48&&s<=57}function jg(s){return s>=97&&s<=122}function eh(s){return s>=65&&s<=90}function Ug(s,e){return s.length===e.length&&G_(s,e)===0}function h8(s,e){const t=e.length;return e.length>s.length?!1:G_(s,e,0,t)===0}function t3(s,e){const t=Math.min(s.length,e.length);let i;for(i=0;i<t;i++)if(s.charCodeAt(i)!==e.charCodeAt(i))return i;return t}function i3(s,e){const t=Math.min(s.length,e.length);let i;const n=s.length-1,r=e.length-1;for(i=0;i<t;i++)if(s.charCodeAt(n-i)!==e.charCodeAt(r-i))return i;return t}function zn(s){return 55296<=s&&s<=56319}function Xm(s){return 56320<=s&&s<=57343}function d8(s,e){return(s-55296<<10)+(e-56320)+65536}function CC(s,e,t){const i=s.charCodeAt(t);if(zn(i)&&t+1<e){const n=s.charCodeAt(t+1);if(Xm(n))return d8(i,n)}return i}function PX(s,e){const t=s.charCodeAt(e-1);if(Xm(t)&&e>1){const i=s.charCodeAt(e-2);if(zn(i))return d8(i,t)}return t}class f8{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=PX(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=CC(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class yC{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new f8(e,t)}nextGraphemeLength(){const e=SC.getInstance(),t=this._iterator,i=t.offset;let n=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const r=t.offset,o=e.getGraphemeBreakType(t.nextCodePoint());if(OM(n,o)){t.setOffset(r);break}n=o}return t.offset-i}prevGraphemeLength(){const e=SC.getInstance(),t=this._iterator,i=t.offset;let n=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const r=t.offset,o=e.getGraphemeBreakType(t.prevCodePoint());if(OM(o,n)){t.setOffset(r);break}n=o}return i-t.offset}eol(){return this._iterator.eol()}}function g8(s,e){return new yC(s,e).nextGraphemeLength()}function yW(s,e){return new yC(s,e).prevGraphemeLength()}function OX(s,e){e>0&&Xm(s.charCodeAt(e))&&e--;const t=e+g8(s,e);return[t-yW(s,t),t]}let ck;function FX(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function t_(s){return ck||(ck=FX()),ck.test(s)}const BX=/^[\t\n\r\x20-\x7E]*$/;function m8(s){return BX.test(s)}const SW=/[\u2028\u2029]/;function xW(s){return SW.test(s)}function Ih(s){return s>=11904&&s<=55215||s>=63744&&s<=64255||s>=65281&&s<=65374}function p8(s){return s>=127462&&s<=127487||s===8986||s===8987||s===9200||s===9203||s>=9728&&s<=10175||s===11088||s===11093||s>=127744&&s<=128591||s>=128640&&s<=128764||s>=128992&&s<=129008||s>=129280&&s<=129535||s>=129648&&s<=129782}const WX="\uFEFF";function _8(s){return!!(s&&s.length>0&&s.charCodeAt(0)===65279)}function kW(s){return s=s%(2*26),s<26?String.fromCharCode(97+s):String.fromCharCode(65+s-26)}function OM(s,e){return s===0?e!==5&&e!==7:s===2&&e===3?!1:s===4||s===2||s===3||e===4||e===2||e===3?!0:!(s===8&&(e===8||e===9||e===11||e===12)||(s===11||s===9)&&(e===9||e===10)||(s===12||s===10)&&e===10||e===5||e===13||e===7||s===1||s===13&&e===14||s===6&&e===6)}const $d=class $d{static getInstance(){return $d._INSTANCE||($d._INSTANCE=new $d),$d._INSTANCE}constructor(){this._data=VX()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,i=t.length/3;let n=1;for(;n<=i;)if(e<t[3*n])n=2*n;else if(e>t[3*n+1])n=2*n+1;else return t[3*n+2];return 0}};$d._INSTANCE=null;let SC=$d;function VX(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function zX(s,e){if(s===0)return 0;const t=HX(s,e);if(t!==void 0)return t;const i=new f8(e,s);return i.prevCodePoint(),i.offset}function HX(s,e){const t=new f8(e,s);let i=t.prevCodePoint();for(;jX(i)||i===65039||i===8419;){if(t.offset===0)return;i=t.prevCodePoint()}if(!p8(i))return;let n=t.offset;return n>0&&t.prevCodePoint()===8205&&(n=t.offset),n}function jX(s){return 127995<=s&&s<=127999}const Ll=class Ll{static getInstance(e){return Ll.cache.get(Array.from(e))}static getLocales(){return Ll._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};Ll.ambiguousCharacterData=new Nh(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')),Ll.cache=new EX({getCacheKey:JSON.stringify},e=>{function t(u){const d=new Map;for(let g=0;g<u.length;g+=2)d.set(u[g],u[g+1]);return d}function i(u,d){const g=new Map(u);for(const[m,_]of d)g.set(m,_);return g}function n(u,d){if(!u)return d;const g=new Map;for(const[m,_]of u)d.has(m)&&g.set(m,_);return g}const r=Ll.ambiguousCharacterData.value;let o=e.filter(u=>!u.startsWith("_")&&u in r);o.length===0&&(o=["_default"]);let a;for(const u of o){const d=t(r[u]);a=n(a,d)}const l=t(r._common),c=i(l,a);return new Ll(c)}),Ll._locales=new Nh(()=>Object.keys(Ll.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")));let i_=Ll;const um=class um{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(um.getRawData())),this._data}static isInvisibleCharacter(e){return um.getData().has(e)}static get codePoints(){return um.getData()}};um._data=void 0;let i1=um;const aS=class aS{constructor(){this.mapWindowIdToZoomFactor=new Map}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}getWindowId(e){return e.vscodeWindowId}};aS.INSTANCE=new aS;let n3=aS;function LW(s,e,t){typeof e=="string"&&(e=s.matchMedia(e)),e.addEventListener("change",t)}function UX(s){return n3.INSTANCE.getZoomFactor(s)}const Sp=navigator.userAgent,ba=Sp.indexOf("Firefox")>=0,o2=Sp.indexOf("AppleWebKit")>=0,Z_=Sp.indexOf("Chrome")>=0,Mh=!Z_&&Sp.indexOf("Safari")>=0,DW=!Z_&&!Mh&&o2;Sp.indexOf("Electron/")>=0;const FM=Sp.indexOf("Android")>=0;let uk=!1;if(typeof bi.matchMedia=="function"){const s=bi.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=bi.matchMedia("(display-mode: fullscreen)");uk=s.matches,LW(bi,s,({matches:t})=>{uk&&e.matches||(uk=t)})}const EW={clipboard:{writeText:mC||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:mC||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},pointerEvents:bi.PointerEvent&&("ontouchstart"in bi||navigator.maxTouchPoints>0)};function s3(s,e){if(typeof s=="number"){if(s===0)return null;const t=(s&65535)>>>0,i=(s&4294901760)>>>16;return i!==0?new hk([Rb(t,e),Rb(i,e)]):new hk([Rb(t,e)])}else{const t=[];for(let i=0;i<s.length;i++)t.push(Rb(s[i],e));return new hk(t)}}function Rb(s,e){const t=!!(s&2048),i=!!(s&256),n=e===2?i:t,r=!!(s&1024),o=!!(s&512),a=e===2?t:i,l=s&255;return new Lf(n,r,o,a,l)}class Lf{constructor(e,t,i,n,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyCode=r}equals(e){return e instanceof Lf&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class hk{constructor(e){if(e.length===0)throw n2("chords");this.chords=e}}class $X{constructor(e,t,i,n,r,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyLabel=r,this.keyAriaLabel=o}}class qX{}function KX(s){if(s.charCode){const t=String.fromCharCode(s.charCode).toUpperCase();return Fc.fromString(t)}const e=s.keyCode;if(e===3)return 7;if(ba)switch(e){case 59:return 85;case 60:if(xr)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(qt)return 57;break}else if(o2){if(qt&&e===93)return 57;if(!qt&&e===92)return 57}return cW[e]||0}const GX=qt?256:2048,ZX=512,YX=1024,XX=qt?2048:256;class Ni{constructor(e){this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState?.("AltGraph"),this.keyCode=KX(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=GX),this.altKey&&(t|=ZX),this.shiftKey&&(t|=YX),this.metaKey&&(t|=XX),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Lf(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}const BM=new WeakMap;function QX(s){if(!s.parent||s.parent===s)return null;try{const e=s.location,t=s.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return s.parent}class JX{static getSameOriginWindowChain(e){let t=BM.get(e);if(!t){t=[],BM.set(e,t);let i=e,n;do n=QX(i),n?t.push({window:new WeakRef(i),iframeElement:i.frameElement||null}):t.push({window:new WeakRef(i),iframeElement:null}),i=n;while(i)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,n=0;const r=this.getSameOriginWindowChain(e);for(const o of r){const a=o.window.deref();if(i+=a?.scrollY??0,n+=a?.scrollX??0,a===t||!o.iframeElement)break;const l=o.iframeElement.getBoundingClientRect();i+=l.top,n+=l.left}return{top:i,left:n}}}class Ya{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const i=JX.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=i.left,this.posy-=i.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class Df{constructor(e,t=0,i=0){this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t;let n=!1;if(Z_){const r=navigator.userAgent.match(/Chrome\/(\d+)/);n=(r?parseInt(r[1]):123)<=122}if(e){const r=e,o=e,a=e.view?.devicePixelRatio||1;if(typeof r.wheelDeltaY<"u")n?this.deltaY=r.wheelDeltaY/(120*a):this.deltaY=r.wheelDeltaY/120;else if(typeof o.VERTICAL_AXIS<"u"&&o.axis===o.VERTICAL_AXIS)this.deltaY=-o.detail/3;else if(e.type==="wheel"){const l=e;l.deltaMode===l.DOM_DELTA_LINE?ba&&!qt?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof r.wheelDeltaX<"u")Mh&&$r?this.deltaX=-(r.wheelDeltaX/120):n?this.deltaX=r.wheelDeltaX/(120*a):this.deltaX=r.wheelDeltaX/120;else if(typeof o.HORIZONTAL_AXIS<"u"&&o.axis===o.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const l=e;l.deltaMode===l.DOM_DELTA_LINE?ba&&!qt?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(n?this.deltaY=e.wheelDelta/(120*a):this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}}const TW=Symbol("MicrotaskDelay");function r3(s){return!!s&&typeof s.then=="function"}function NW(s){const e=new Cp,t=s(e.token),i=new Promise((n,r)=>{const o=e.token.onCancellationRequested(()=>{o.dispose(),r(new q_)});Promise.resolve(t).then(a=>{o.dispose(),e.dispose(),n(a)},a=>{o.dispose(),e.dispose(),r(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(n,r){return i.then(n,r)}catch(n){return this.then(void 0,n)}finally(n){return i.finally(n)}}}class eQ{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{if(this.queuedPromise=null,this.isDisposed)return;const i=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,i};this.queuedPromise=new Promise(i=>{this.activePromise.then(t,t).then(i)})}return new Promise((t,i)=>{this.queuedPromise.then(t,i)})}return this.activePromise=e(),new Promise((t,i)=>{this.activePromise.then(n=>{this.activePromise=null,t(n)},n=>{this.activePromise=null,i(n)})})}dispose(){this.isDisposed=!0}}const tQ=(s,e)=>{let t=!0;const i=setTimeout(()=>{t=!1,e()},s);return{isTriggered:()=>t,dispose:()=>{clearTimeout(i),t=!1}}},iQ=s=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,s())}),{isTriggered:()=>e,dispose:()=>{e=!1}}};class Y_{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((n,r)=>{this.doResolve=n,this.doReject=r}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const n=this.task;return this.task=null,n()}}));const i=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=t===TW?iQ(i):tQ(t,i),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new q_),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}class IW{constructor(e){this.delayer=new Y_(e),this.throttler=new eQ}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function n_(s,e){return e?new Promise((t,i)=>{const n=setTimeout(()=>{r.dispose(),t()},s),r=e.onCancellationRequested(()=>{clearTimeout(n),r.dispose(),i(new q_)})}):NW(t=>n_(s,t))}function o3(s,e=0,t){const i=setTimeout(()=>{s(),t&&n.dispose()},e),n=bt(()=>{clearTimeout(i),t?.deleteAndLeak(n)});return t?.add(n),n}class zf{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new ri("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new ri("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class v8{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,t,i=globalThis){if(this.isDisposed)throw new ri("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const n=i.setInterval(()=>{e()},t);this.disposable=bt(()=>{i.clearInterval(n),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}}class ir{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}}let MW,n1;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?n1=(s,e)=>{QB(()=>{if(t)return;const i=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:n1=(s,e,t)=>{const i=s.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0);let n=!1;return{dispose(){n||(n=!0,s.cancelIdleCallback(i))}}},MW=s=>n1(globalThis,s)})();class nQ{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(i){this._error=i}finally{this._didRun=!0}},this._handle=n1(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class sQ extends nQ{constructor(e){super(globalThis,e)}}class RW{get isRejected(){return this.outcome?.outcome===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new q_)}}var a3;(function(s){async function e(i){let n;const r=await Promise.all(i.map(o=>o.then(a=>a,a=>{n||(n=a)})));if(typeof n<"u")throw n;return r}s.settled=e;function t(i){return new Promise(async(n,r)=>{try{await i(n,r)}catch(o){r(o)}})}s.withAsyncBody=t})(a3||(a3={}));const Or=class Or{static fromArray(e){return new Or(t=>{t.emitMany(e)})}static fromPromise(e){return new Or(async t=>{t.emitMany(await e)})}static fromPromises(e){return new Or(async t=>{await Promise.all(e.map(async i=>t.emitOne(await i)))})}static merge(e){return new Or(async t=>{await Promise.all(e.map(async i=>{for await(const n of i)t.emitOne(n)}))})}constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new re,queueMicrotask(async()=>{const i={emitOne:n=>this.emitOne(n),emitMany:n=>this.emitMany(n),reject:n=>this.reject(n)};try{await Promise.resolve(e(i)),this.resolve()}catch(n){this.reject(n)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await Te.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(e,t){return new Or(async i=>{for await(const n of e)i.emitOne(t(n))})}map(e){return Or.map(this,e)}static filter(e,t){return new Or(async i=>{for await(const n of e)t(n)&&i.emitOne(n)})}filter(e){return Or.filter(this,e)}static coalesce(e){return Or.filter(e,t=>!!t)}coalesce(){return Or.coalesce(this)}static async toPromise(e){const t=[];for await(const i of e)t.push(i);return t}toPromise(){return Or.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};Or.EMPTY=Or.fromArray([]);let WM=Or;/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:AW,setPrototypeOf:VM,isFrozen:rQ,getPrototypeOf:oQ,getOwnPropertyDescriptor:aQ}=Object;let{freeze:qr,seal:wa,create:PW}=Object,{apply:l3,construct:c3}=typeof Reflect<"u"&&Reflect;qr||(qr=function(e){return e});wa||(wa=function(e){return e});l3||(l3=function(e,t,i){return e.apply(t,i)});c3||(c3=function(e,t){return new e(...t)});const Ab=Yo(Array.prototype.forEach),zM=Yo(Array.prototype.pop),v0=Yo(Array.prototype.push),Pw=Yo(String.prototype.toLowerCase),dk=Yo(String.prototype.toString),HM=Yo(String.prototype.match),b0=Yo(String.prototype.replace),lQ=Yo(String.prototype.indexOf),cQ=Yo(String.prototype.trim),za=Yo(Object.prototype.hasOwnProperty),Mr=Yo(RegExp.prototype.test),w0=uQ(TypeError);function Yo(s){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return l3(s,e,i)}}function uQ(s){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return c3(s,t)}}function gi(s,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pw;VM&&VM(s,null);let i=e.length;for(;i--;){let n=e[i];if(typeof n=="string"){const r=t(n);r!==n&&(rQ(e)||(e[i]=r),n=r)}s[n]=!0}return s}function hQ(s){for(let e=0;e<s.length;e++)za(s,e)||(s[e]=null);return s}function yd(s){const e=PW(null);for(const[t,i]of AW(s))za(s,t)&&(Array.isArray(i)?e[t]=hQ(i):i&&typeof i=="object"&&i.constructor===Object?e[t]=yd(i):e[t]=i);return e}function C0(s,e){for(;s!==null;){const i=aQ(s,e);if(i){if(i.get)return Yo(i.get);if(typeof i.value=="function")return Yo(i.value)}s=oQ(s)}function t(){return null}return t}const jM=qr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),fk=qr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),gk=qr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),dQ=qr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mk=qr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),fQ=qr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),UM=qr(["#text"]),$M=qr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),pk=qr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),qM=qr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Pb=qr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),gQ=wa(/\{\{[\w\W]*|[\w\W]*\}\}/gm),mQ=wa(/<%[\w\W]*|[\w\W]*%>/gm),pQ=wa(/\${[\w\W]*}/gm),_Q=wa(/^data-[\-\w.\u00B7-\uFFFF]/),vQ=wa(/^aria-[\-\w]+$/),OW=wa(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),bQ=wa(/^(?:\w+script|data):/i),wQ=wa(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),FW=wa(/^html$/i),CQ=wa(/^[a-z][.\w]*(-[.\w]+)+$/i);var KM=Object.freeze({__proto__:null,MUSTACHE_EXPR:gQ,ERB_EXPR:mQ,TMPLIT_EXPR:pQ,DATA_ATTR:_Q,ARIA_ATTR:vQ,IS_ALLOWED_URI:OW,IS_SCRIPT_OR_DATA:bQ,ATTR_WHITESPACE:wQ,DOCTYPE_NAME:FW,CUSTOM_ELEMENT:CQ});const y0={element:1,text:3,progressingInstruction:7,comment:8,document:9},yQ=function(){return typeof window>"u"?null:window},SQ=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const n="data-tt-policy-suffix";t&&t.hasAttribute(n)&&(i=t.getAttribute(n));const r="dompurify"+(i?"#"+i:"");try{return e.createPolicy(r,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function BW(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yQ();const e=Ye=>BW(Ye);if(e.version="3.1.7",e.removed=[],!s||!s.document||s.document.nodeType!==y0.document)return e.isSupported=!1,e;let{document:t}=s;const i=t,n=i.currentScript,{DocumentFragment:r,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=s.NamedNodeMap||s.MozNamedAttrMap,HTMLFormElement:d,DOMParser:g,trustedTypes:m}=s,_=l.prototype,v=C0(_,"cloneNode"),w=C0(_,"remove"),y=C0(_,"nextSibling"),S=C0(_,"childNodes"),k=C0(_,"parentNode");if(typeof o=="function"){const Ye=t.createElement("template");Ye.content&&Ye.content.ownerDocument&&(t=Ye.content.ownerDocument)}let L,T="";const{implementation:A,createNodeIterator:I,createDocumentFragment:O,getElementsByTagName:F}=t,{importNode:J}=i;let Y={};e.isSupported=typeof AW=="function"&&typeof k=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:G,ERB_EXPR:ie,TMPLIT_EXPR:Z,DATA_ATTR:ue,ARIA_ATTR:be,IS_SCRIPT_OR_DATA:ye,ATTR_WHITESPACE:ae,CUSTOM_ELEMENT:xe}=KM;let{IS_ALLOWED_URI:fe}=KM,X=null;const me=gi({},[...jM,...fk,...gk,...mk,...UM]);let ze=null;const it=gi({},[...$M,...pk,...qM,...Pb]);let He=Object.seal(PW(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),st=null,gt=null,St=!0,Lt=!0,ci=!1,qs=!0,Wi=!1,Sn=!0,dn=!1,Er=!1,Pn=!1,Es=!1,cr=!1,Ts=!1,Tr=!0,Lo=!1;const hl="user-content-";let Ea=!0,Ns=!1,vs={},Xr=null;const Qr=gi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Is=null;const ns=gi({},["audio","video","img","source","image","track"]);let Ms=null;const fn=gi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Jr="http://www.w3.org/1998/Math/MathML",qn="http://www.w3.org/2000/svg",Ji="http://www.w3.org/1999/xhtml";let Ks=Ji,Do=!1,Gs=null;const ui=gi({},[Jr,qn,Ji],dk);let ur=null;const dl=["application/xhtml+xml","text/html"],eo="text/html";let Vi=null,Eo=null;const nc=t.createElement("form"),sc=function(oe){return oe instanceof RegExp||oe instanceof Function},Ta=function(){let oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Eo&&Eo===oe)){if((!oe||typeof oe!="object")&&(oe={}),oe=yd(oe),ur=dl.indexOf(oe.PARSER_MEDIA_TYPE)===-1?eo:oe.PARSER_MEDIA_TYPE,Vi=ur==="application/xhtml+xml"?dk:Pw,X=za(oe,"ALLOWED_TAGS")?gi({},oe.ALLOWED_TAGS,Vi):me,ze=za(oe,"ALLOWED_ATTR")?gi({},oe.ALLOWED_ATTR,Vi):it,Gs=za(oe,"ALLOWED_NAMESPACES")?gi({},oe.ALLOWED_NAMESPACES,dk):ui,Ms=za(oe,"ADD_URI_SAFE_ATTR")?gi(yd(fn),oe.ADD_URI_SAFE_ATTR,Vi):fn,Is=za(oe,"ADD_DATA_URI_TAGS")?gi(yd(ns),oe.ADD_DATA_URI_TAGS,Vi):ns,Xr=za(oe,"FORBID_CONTENTS")?gi({},oe.FORBID_CONTENTS,Vi):Qr,st=za(oe,"FORBID_TAGS")?gi({},oe.FORBID_TAGS,Vi):{},gt=za(oe,"FORBID_ATTR")?gi({},oe.FORBID_ATTR,Vi):{},vs=za(oe,"USE_PROFILES")?oe.USE_PROFILES:!1,St=oe.ALLOW_ARIA_ATTR!==!1,Lt=oe.ALLOW_DATA_ATTR!==!1,ci=oe.ALLOW_UNKNOWN_PROTOCOLS||!1,qs=oe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Wi=oe.SAFE_FOR_TEMPLATES||!1,Sn=oe.SAFE_FOR_XML!==!1,dn=oe.WHOLE_DOCUMENT||!1,Es=oe.RETURN_DOM||!1,cr=oe.RETURN_DOM_FRAGMENT||!1,Ts=oe.RETURN_TRUSTED_TYPE||!1,Pn=oe.FORCE_BODY||!1,Tr=oe.SANITIZE_DOM!==!1,Lo=oe.SANITIZE_NAMED_PROPS||!1,Ea=oe.KEEP_CONTENT!==!1,Ns=oe.IN_PLACE||!1,fe=oe.ALLOWED_URI_REGEXP||OW,Ks=oe.NAMESPACE||Ji,He=oe.CUSTOM_ELEMENT_HANDLING||{},oe.CUSTOM_ELEMENT_HANDLING&&sc(oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(He.tagNameCheck=oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),oe.CUSTOM_ELEMENT_HANDLING&&sc(oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(He.attributeNameCheck=oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),oe.CUSTOM_ELEMENT_HANDLING&&typeof oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(He.allowCustomizedBuiltInElements=oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Wi&&(Lt=!1),cr&&(Es=!0),vs&&(X=gi({},UM),ze=[],vs.html===!0&&(gi(X,jM),gi(ze,$M)),vs.svg===!0&&(gi(X,fk),gi(ze,pk),gi(ze,Pb)),vs.svgFilters===!0&&(gi(X,gk),gi(ze,pk),gi(ze,Pb)),vs.mathMl===!0&&(gi(X,mk),gi(ze,qM),gi(ze,Pb))),oe.ADD_TAGS&&(X===me&&(X=yd(X)),gi(X,oe.ADD_TAGS,Vi)),oe.ADD_ATTR&&(ze===it&&(ze=yd(ze)),gi(ze,oe.ADD_ATTR,Vi)),oe.ADD_URI_SAFE_ATTR&&gi(Ms,oe.ADD_URI_SAFE_ATTR,Vi),oe.FORBID_CONTENTS&&(Xr===Qr&&(Xr=yd(Xr)),gi(Xr,oe.FORBID_CONTENTS,Vi)),Ea&&(X["#text"]=!0),dn&&gi(X,["html","head","body"]),X.table&&(gi(X,["tbody"]),delete st.tbody),oe.TRUSTED_TYPES_POLICY){if(typeof oe.TRUSTED_TYPES_POLICY.createHTML!="function")throw w0('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof oe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw w0('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');L=oe.TRUSTED_TYPES_POLICY,T=L.createHTML("")}else L===void 0&&(L=SQ(m,n)),L!==null&&typeof T=="string"&&(T=L.createHTML(""));qr&&qr(oe),Eo=oe}},xt=gi({},["mi","mo","mn","ms","mtext"]),H=gi({},["annotation-xml"]),U=gi({},["title","style","font","a","script"]),K=gi({},[...fk,...gk,...dQ]),P=gi({},[...mk,...fQ]),z=function(oe){let Me=k(oe);(!Me||!Me.tagName)&&(Me={namespaceURI:Ks,tagName:"template"});const rt=Pw(oe.tagName),Di=Pw(Me.tagName);return Gs[oe.namespaceURI]?oe.namespaceURI===qn?Me.namespaceURI===Ji?rt==="svg":Me.namespaceURI===Jr?rt==="svg"&&(Di==="annotation-xml"||xt[Di]):!!K[rt]:oe.namespaceURI===Jr?Me.namespaceURI===Ji?rt==="math":Me.namespaceURI===qn?rt==="math"&&H[Di]:!!P[rt]:oe.namespaceURI===Ji?Me.namespaceURI===qn&&!H[Di]||Me.namespaceURI===Jr&&!xt[Di]?!1:!P[rt]&&(U[rt]||!K[rt]):!!(ur==="application/xhtml+xml"&&Gs[oe.namespaceURI]):!1},q=function(oe){v0(e.removed,{element:oe});try{k(oe).removeChild(oe)}catch{w(oe)}},se=function(oe,Me){try{v0(e.removed,{attribute:Me.getAttributeNode(oe),from:Me})}catch{v0(e.removed,{attribute:null,from:Me})}if(Me.removeAttribute(oe),oe==="is"&&!ze[oe])if(Es||cr)try{q(Me)}catch{}else try{Me.setAttribute(oe,"")}catch{}},_e=function(oe){let Me=null,rt=null;if(Pn)oe="<remove></remove>"+oe;else{const Wt=HM(oe,/^[\r\n\t ]+/);rt=Wt&&Wt[0]}ur==="application/xhtml+xml"&&Ks===Ji&&(oe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+oe+"</body></html>");const Di=L?L.createHTML(oe):oe;if(Ks===Ji)try{Me=new g().parseFromString(Di,ur)}catch{}if(!Me||!Me.documentElement){Me=A.createDocument(Ks,"template",null);try{Me.documentElement.innerHTML=Do?T:Di}catch{}}const Ki=Me.body||Me.documentElement;return oe&&rt&&Ki.insertBefore(t.createTextNode(rt),Ki.childNodes[0]||null),Ks===Ji?F.call(Me,dn?"html":"body")[0]:dn?Me.documentElement:Ki},De=function(oe){return I.call(oe.ownerDocument||oe,oe,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Re=function(oe){return oe instanceof d&&(typeof oe.nodeName!="string"||typeof oe.textContent!="string"||typeof oe.removeChild!="function"||!(oe.attributes instanceof u)||typeof oe.removeAttribute!="function"||typeof oe.setAttribute!="function"||typeof oe.namespaceURI!="string"||typeof oe.insertBefore!="function"||typeof oe.hasChildNodes!="function")},Ae=function(oe){return typeof a=="function"&&oe instanceof a},We=function(oe,Me,rt){Y[oe]&&Ab(Y[oe],Di=>{Di.call(e,Me,rt,Eo)})},Ze=function(oe){let Me=null;if(We("beforeSanitizeElements",oe,null),Re(oe))return q(oe),!0;const rt=Vi(oe.nodeName);if(We("uponSanitizeElement",oe,{tagName:rt,allowedTags:X}),oe.hasChildNodes()&&!Ae(oe.firstElementChild)&&Mr(/<[/\w]/g,oe.innerHTML)&&Mr(/<[/\w]/g,oe.textContent)||oe.nodeType===y0.progressingInstruction||Sn&&oe.nodeType===y0.comment&&Mr(/<[/\w]/g,oe.data))return q(oe),!0;if(!X[rt]||st[rt]){if(!st[rt]&&wt(rt)&&(He.tagNameCheck instanceof RegExp&&Mr(He.tagNameCheck,rt)||He.tagNameCheck instanceof Function&&He.tagNameCheck(rt)))return!1;if(Ea&&!Xr[rt]){const Di=k(oe)||oe.parentNode,Ki=S(oe)||oe.childNodes;if(Ki&&Di){const Wt=Ki.length;for(let ss=Wt-1;ss>=0;--ss){const rs=v(Ki[ss],!0);rs.__removalCount=(oe.__removalCount||0)+1,Di.insertBefore(rs,y(oe))}}}return q(oe),!0}return oe instanceof l&&!z(oe)||(rt==="noscript"||rt==="noembed"||rt==="noframes")&&Mr(/<\/no(script|embed|frames)/i,oe.innerHTML)?(q(oe),!0):(Wi&&oe.nodeType===y0.text&&(Me=oe.textContent,Ab([G,ie,Z],Di=>{Me=b0(Me,Di," ")}),oe.textContent!==Me&&(v0(e.removed,{element:oe.cloneNode()}),oe.textContent=Me)),We("afterSanitizeElements",oe,null),!1)},qe=function(oe,Me,rt){if(Tr&&(Me==="id"||Me==="name")&&(rt in t||rt in nc))return!1;if(!(Lt&&!gt[Me]&&Mr(ue,Me))){if(!(St&&Mr(be,Me))){if(!ze[Me]||gt[Me]){if(!(wt(oe)&&(He.tagNameCheck instanceof RegExp&&Mr(He.tagNameCheck,oe)||He.tagNameCheck instanceof Function&&He.tagNameCheck(oe))&&(He.attributeNameCheck instanceof RegExp&&Mr(He.attributeNameCheck,Me)||He.attributeNameCheck instanceof Function&&He.attributeNameCheck(Me))||Me==="is"&&He.allowCustomizedBuiltInElements&&(He.tagNameCheck instanceof RegExp&&Mr(He.tagNameCheck,rt)||He.tagNameCheck instanceof Function&&He.tagNameCheck(rt))))return!1}else if(!Ms[Me]){if(!Mr(fe,b0(rt,ae,""))){if(!((Me==="src"||Me==="xlink:href"||Me==="href")&&oe!=="script"&&lQ(rt,"data:")===0&&Is[oe])){if(!(ci&&!Mr(ye,b0(rt,ae,"")))){if(rt)return!1}}}}}}return!0},wt=function(oe){return oe!=="annotation-xml"&&HM(oe,xe)},Ft=function(oe){We("beforeSanitizeAttributes",oe,null);const{attributes:Me}=oe;if(!Me)return;const rt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ze};let Di=Me.length;for(;Di--;){const Ki=Me[Di],{name:Wt,namespaceURI:ss,value:rs}=Ki,hr=Vi(Wt);let mn=Wt==="value"?rs:cQ(rs);if(rt.attrName=hr,rt.attrValue=mn,rt.keepAttr=!0,rt.forceKeepAttr=void 0,We("uponSanitizeAttribute",oe,rt),mn=rt.attrValue,rt.forceKeepAttr||(se(Wt,oe),!rt.keepAttr))continue;if(!qs&&Mr(/\/>/i,mn)){se(Wt,oe);continue}Wi&&Ab([G,ie,Z],di=>{mn=b0(mn,di," ")});const rc=Vi(oe.nodeName);if(qe(rc,hr,mn)){if(Lo&&(hr==="id"||hr==="name")&&(se(Wt,oe),mn=hl+mn),Sn&&Mr(/((--!?|])>)|<\/(style|title)/i,mn)){se(Wt,oe);continue}if(L&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!ss)switch(m.getAttributeType(rc,hr)){case"TrustedHTML":{mn=L.createHTML(mn);break}case"TrustedScriptURL":{mn=L.createScriptURL(mn);break}}try{ss?oe.setAttributeNS(ss,Wt,mn):oe.setAttribute(Wt,mn),Re(oe)?q(oe):zM(e.removed)}catch{}}}We("afterSanitizeAttributes",oe,null)},gn=function Ye(oe){let Me=null;const rt=De(oe);for(We("beforeSanitizeShadowDOM",oe,null);Me=rt.nextNode();)We("uponSanitizeShadowNode",Me,null),!Ze(Me)&&(Me.content instanceof r&&Ye(Me.content),Ft(Me));We("afterSanitizeShadowDOM",oe,null)};return e.sanitize=function(Ye){let oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Me=null,rt=null,Di=null,Ki=null;if(Do=!Ye,Do&&(Ye="<!-->"),typeof Ye!="string"&&!Ae(Ye))if(typeof Ye.toString=="function"){if(Ye=Ye.toString(),typeof Ye!="string")throw w0("dirty is not a string, aborting")}else throw w0("toString is not a function");if(!e.isSupported)return Ye;if(Er||Ta(oe),e.removed=[],typeof Ye=="string"&&(Ns=!1),Ns){if(Ye.nodeName){const rs=Vi(Ye.nodeName);if(!X[rs]||st[rs])throw w0("root node is forbidden and cannot be sanitized in-place")}}else if(Ye instanceof a)Me=_e("<!---->"),rt=Me.ownerDocument.importNode(Ye,!0),rt.nodeType===y0.element&&rt.nodeName==="BODY"||rt.nodeName==="HTML"?Me=rt:Me.appendChild(rt);else{if(!Es&&!Wi&&!dn&&Ye.indexOf("<")===-1)return L&&Ts?L.createHTML(Ye):Ye;if(Me=_e(Ye),!Me)return Es?null:Ts?T:""}Me&&Pn&&q(Me.firstChild);const Wt=De(Ns?Ye:Me);for(;Di=Wt.nextNode();)Ze(Di)||(Di.content instanceof r&&gn(Di.content),Ft(Di));if(Ns)return Ye;if(Es){if(cr)for(Ki=O.call(Me.ownerDocument);Me.firstChild;)Ki.appendChild(Me.firstChild);else Ki=Me;return(ze.shadowroot||ze.shadowrootmode)&&(Ki=J.call(i,Ki,!0)),Ki}let ss=dn?Me.outerHTML:Me.innerHTML;return dn&&X["!doctype"]&&Me.ownerDocument&&Me.ownerDocument.doctype&&Me.ownerDocument.doctype.name&&Mr(FW,Me.ownerDocument.doctype.name)&&(ss="<!DOCTYPE "+Me.ownerDocument.doctype.name+`>
`+ss),Wi&&Ab([G,ie,Z],rs=>{ss=b0(ss,rs," ")}),L&&Ts?L.createHTML(ss):ss},e.setConfig=function(){let Ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ta(Ye),Er=!0},e.clearConfig=function(){Eo=null,Er=!1},e.isValidAttribute=function(Ye,oe,Me){Eo||Ta({});const rt=Vi(Ye),Di=Vi(oe);return qe(rt,Di,Me)},e.addHook=function(Ye,oe){typeof oe=="function"&&(Y[Ye]=Y[Ye]||[],v0(Y[Ye],oe))},e.removeHook=function(Ye){if(Y[Ye])return zM(Y[Ye])},e.removeHooks=function(Ye){Y[Ye]&&(Y[Ye]=[])},e.removeAllHooks=function(){Y={}},e}var Zl=BW();Zl.version;Zl.isSupported;const WW=Zl.sanitize;Zl.setConfig;Zl.clearConfig;Zl.isValidAttribute;const VW=Zl.addHook,zW=Zl.removeHook;Zl.removeHooks;Zl.removeAllHooks;var Dt;(function(s){s.inMemory="inmemory",s.vscode="vscode",s.internal="private",s.walkThrough="walkThrough",s.walkThroughSnippet="walkThroughSnippet",s.http="http",s.https="https",s.file="file",s.mailto="mailto",s.untitled="untitled",s.data="data",s.command="command",s.vscodeRemote="vscode-remote",s.vscodeRemoteResource="vscode-remote-resource",s.vscodeManagedRemoteResource="vscode-managed-remote-resource",s.vscodeUserData="vscode-userdata",s.vscodeCustomEditor="vscode-custom-editor",s.vscodeNotebookCell="vscode-notebook-cell",s.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",s.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",s.vscodeNotebookCellOutput="vscode-notebook-cell-output",s.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",s.vscodeNotebookMetadata="vscode-notebook-metadata",s.vscodeInteractiveInput="vscode-interactive-input",s.vscodeSettings="vscode-settings",s.vscodeWorkspaceTrust="vscode-workspace-trust",s.vscodeTerminal="vscode-terminal",s.vscodeChatCodeBlock="vscode-chat-code-block",s.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",s.vscodeChatSesssion="vscode-chat-editor",s.webviewPanel="webview-panel",s.vscodeWebview="vscode-webview",s.extension="extension",s.vscodeFileResource="vscode-file",s.tmp="tmp",s.vsls="vsls",s.vscodeSourceControl="vscode-scm",s.commentsInput="comment",s.codeSetting="code-setting",s.outputChannel="output"})(Dt||(Dt={}));function b8(s,e){return Et.isUri(s)?Ug(s.scheme,e):h8(s,e+":")}function GM(s,...e){return e.some(t=>b8(s,t))}const xQ="tkn";class kQ{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}get _remoteResourcesPath(){return rn.join(this._serverRootPath,Dt.vscodeRemoteResource)}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return _i(a),e}const t=e.authority;let i=this._hosts[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const n=this._ports[t],r=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return typeof r=="string"&&(o+=`&${xQ}=${encodeURIComponent(r)}`),Et.from({scheme:bp?this._preferredWebSchema:Dt.vscodeRemoteResource,authority:`${i}:${n}`,path:this._remoteResourcesPath,query:o})}}const HW=new kQ,LQ="vscode-app",R1=class R1{asBrowserUri(e){const t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===Dt.vscodeRemote?HW.rewrite(e):e.scheme===Dt.file&&(mC||BZ===`${Dt.vscodeFileResource}://${R1.FALLBACK_AUTHORITY}`)?e.with({scheme:Dt.vscodeFileResource,authority:e.authority||R1.FALLBACK_AUTHORITY,query:null,fragment:null}):e}toUri(e,t){if(Et.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){const i=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(i))return Et.joinPath(Et.parse(i,!0),e);const n=lX(i,e);return Et.file(n)}return Et.parse(t.toUrl(e))}};R1.FALLBACK_AUTHORITY=LQ;let u3=R1;const a2=new u3;var h3;(function(s){const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);s.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function i(r){let o;typeof r=="string"?o=new URL(r).searchParams:r instanceof URL?o=r.searchParams:Et.isUri(r)&&(o=new URL(r.toString(!0)).searchParams);const a=o?.get(t);if(a)return e.get(a)}s.getHeadersFromQuery=i;function n(r,o,a){if(!globalThis.crossOriginIsolated)return;const l=o&&a?"3":a?"2":"1";r instanceof URLSearchParams?r.set(t,l):r[t]=l}s.addSearchParam=n})(h3||(h3={}));function jW(s){return l2(s,0)}function l2(s,e){switch(typeof s){case"object":return s===null?Uc(349,e):Array.isArray(s)?EQ(s,e):TQ(s,e);case"string":return w8(s,e);case"boolean":return DQ(s,e);case"number":return Uc(s,e);case"undefined":return Uc(937,e);default:return Uc(617,e)}}function Uc(s,e){return(e<<5)-e+s|0}function DQ(s,e){return Uc(s?433:863,e)}function w8(s,e){e=Uc(149417,e);for(let t=0,i=s.length;t<i;t++)e=Uc(s.charCodeAt(t),e);return e}function EQ(s,e){return e=Uc(104579,e),s.reduce((t,i)=>l2(i,t),e)}function TQ(s,e){return e=Uc(181387,e),Object.keys(s).sort().reduce((t,i)=>(t=w8(i,t),l2(s[i],t)),e)}function _k(s,e,t=32){const i=t-e,n=~((1<<i)-1);return(s<<e|(n&s)>>>i)>>>0}function ZM(s,e=0,t=s.byteLength,i=0){for(let n=0;n<t;n++)s[e+n]=i}function NQ(s,e,t="0"){for(;s.length<e;)s=t+s;return s}function S0(s,e=32){return s instanceof ArrayBuffer?Array.from(new Uint8Array(s)).map(t=>t.toString(16).padStart(2,"0")).join(""):NQ((s>>>0).toString(16),e/4)}const lS=class lS{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const i=this._buff;let n=this._buffLen,r=this._leftoverHighSurrogate,o,a;for(r!==0?(o=r,a=-1,r=0):(o=e.charCodeAt(0),a=0);;){let l=o;if(zn(o))if(a+1<t){const c=e.charCodeAt(a+1);Xm(c)?(a++,l=d8(o,c)):l=65533}else{r=o;break}else Xm(o)&&(l=65533);if(n=this._push(i,n,l),a++,a<t)o=e.charCodeAt(a);else break}this._buffLen=n,this._leftoverHighSurrogate=r}_push(e,t,i){return i<128?e[t++]=i:i<2048?(e[t++]=192|(i&1984)>>>6,e[t++]=128|(i&63)>>>0):i<65536?(e[t++]=224|(i&61440)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0):(e[t++]=240|(i&1835008)>>>18,e[t++]=128|(i&258048)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),S0(this._h0)+S0(this._h1)+S0(this._h2)+S0(this._h3)+S0(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,ZM(this._buff,this._buffLen),this._buffLen>56&&(this._step(),ZM(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=lS._bigBlock32,t=this._buffDV;for(let d=0;d<64;d+=4)e.setUint32(d,t.getUint32(d,!1),!1);for(let d=64;d<320;d+=4)e.setUint32(d,_k(e.getUint32(d-12,!1)^e.getUint32(d-32,!1)^e.getUint32(d-56,!1)^e.getUint32(d-64,!1),1),!1);let i=this._h0,n=this._h1,r=this._h2,o=this._h3,a=this._h4,l,c,u;for(let d=0;d<80;d++)d<20?(l=n&r|~n&o,c=1518500249):d<40?(l=n^r^o,c=1859775393):d<60?(l=n&r|n&o|r&o,c=2400959708):(l=n^r^o,c=3395469782),u=_k(i,5)+l+a+c+e.getUint32(d*4,!1)&4294967295,a=o,o=r,r=_k(n,30),n=i,i=u;this._h0=this._h0+i&4294967295,this._h1=this._h1+n&4294967295,this._h2=this._h2+r&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}};lS._bigBlock32=new DataView(new ArrayBuffer(320));let d3=lS;const{getWindow:tt,getWindows:UW,getWindowsCount:IQ,getWindowId:xC,getWindowById:YM,onDidRegisterWindow:c2,onWillUnregisterWindow:MQ,onDidUnregisterWindow:RQ}=function(){const s=new Map;DX(bi,1);const e={window:bi,disposables:new Qe};s.set(bi.vscodeWindowId,e);const t=new re,i=new re,n=new re;function r(o,a){return(typeof o=="number"?s.get(o):void 0)??(a?e:void 0)}return{onDidRegisterWindow:t.event,onWillUnregisterWindow:n.event,onDidUnregisterWindow:i.event,registerWindow(o){if(s.has(o.vscodeWindowId))return ve.None;const a=new Qe,l={window:o,disposables:a.add(new Qe)};return s.set(o.vscodeWindowId,l),a.add(bt(()=>{s.delete(o.vscodeWindowId),i.fire(o)})),a.add(ge(o,Ne.BEFORE_UNLOAD,()=>{n.fire(o)})),t.fire(l),a},getWindows(){return s.values()},getWindowsCount(){return s.size},getWindowId(o){return o.vscodeWindowId},hasWindow(o){return s.has(o)},getWindowById:r,getWindow(o){const a=o;if(a?.ownerDocument?.defaultView)return a.ownerDocument.defaultView.window;const l=o;return l?.view?l.view.window:bi},getDocument(o){return tt(o).document}}}();function el(s){for(;s.firstChild;)s.firstChild.remove()}class AQ{constructor(e,t,i,n){this._node=e,this._type=t,this._handler=i,this._options=n||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function ge(s,e,t,i){return new AQ(s,e,t,i)}function PQ(s,e){return function(t){return e(new Ya(s,t))}}function OQ(s){return function(e){return s(new Ni(e))}}const Un=function(e,t,i,n){let r=i;return t==="click"||t==="mousedown"||t==="contextmenu"?r=PQ(tt(e),i):(t==="keydown"||t==="keypress"||t==="keyup")&&(r=OQ(i)),ge(e,t,r,n)};function Ob(s,e,t){return n1(s,e,t)}let $W,Kr;class C8 extends v8{constructor(e){super(),this.defaultTarget=e&&tt(e)}cancelAndSet(e,t,i){return super.cancelAndSet(e,t,i??this.defaultTarget)}}class vk{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){_i(e)}}static sort(e,t){return t.priority-e.priority}}(function(){const s=new Map,e=new Map,t=new Map,i=new Map,n=r=>{t.set(r,!1);const o=s.get(r)??[];for(e.set(r,o),s.set(r,[]),i.set(r,!0);o.length>0;)o.sort(vk.sort),o.shift().execute();i.set(r,!1)};Kr=(r,o,a=0)=>{const l=xC(r),c=new vk(o,a);let u=s.get(l);return u||(u=[],s.set(l,u)),u.push(c),t.get(l)||(t.set(l,!0),r.requestAnimationFrame(()=>n(l))),c},$W=(r,o,a)=>{const l=xC(r);if(i.get(l)){const c=new vk(o,a);let u=e.get(l);return u||(u=[],e.set(l,u)),u.push(c),c}else return Kr(r,o,a)}})();function y8(s){return tt(s).getComputedStyle(s,null)}function f3(s,e){const t=tt(s),i=t.document;if(s!==i.body)return new Bc(s.clientWidth,s.clientHeight);if(xf&&t?.visualViewport)return new Bc(t.visualViewport.width,t.visualViewport.height);if(t?.innerWidth&&t.innerHeight)return new Bc(t.innerWidth,t.innerHeight);if(i.body&&i.body.clientWidth&&i.body.clientHeight)return new Bc(i.body.clientWidth,i.body.clientHeight);if(i.documentElement&&i.documentElement.clientWidth&&i.documentElement.clientHeight)return new Bc(i.documentElement.clientWidth,i.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class Zi{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,i){const n=y8(e),r=n?n.getPropertyValue(t):"0";return Zi.convertToPixels(e,r)}static getBorderLeftWidth(e){return Zi.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return Zi.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return Zi.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return Zi.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return Zi.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return Zi.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return Zi.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return Zi.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return Zi.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return Zi.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return Zi.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return Zi.getDimension(e,"margin-bottom","marginBottom")}}const qd=class qd{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new qd(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof qd?e:new qd(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};qd.None=new qd(0,0);let Bc=qd;function FQ(s){let e=s.offsetParent,t=s.offsetTop,i=s.offsetLeft;for(;(s=s.parentNode)!==null&&s!==s.ownerDocument.body&&s!==s.ownerDocument.documentElement;){t-=s.scrollTop;const n=KW(s)?null:y8(s);n&&(i-=n.direction!=="rtl"?s.scrollLeft:-s.scrollLeft),s===e&&(i+=Zi.getBorderLeftWidth(s),t+=Zi.getBorderTopWidth(s),t+=s.offsetTop,i+=s.offsetLeft,e=s.offsetParent)}return{left:i,top:t}}function $o(s){const e=s.getBoundingClientRect(),t=tt(s);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}function qW(s){let e=s,t=1;do{const i=y8(e).zoom;i!=null&&i!=="1"&&(t*=i),e=e.parentElement}while(e!==null&&e!==e.ownerDocument.documentElement);return t}function S8(s){const e=Zi.getMarginLeft(s)+Zi.getMarginRight(s);return s.offsetWidth+e}function bk(s){const e=Zi.getBorderLeftWidth(s)+Zi.getBorderRightWidth(s),t=Zi.getPaddingLeft(s)+Zi.getPaddingRight(s);return s.offsetWidth-e-t}function BQ(s){const e=Zi.getBorderTopWidth(s)+Zi.getBorderBottomWidth(s),t=Zi.getPaddingTop(s)+Zi.getPaddingBottom(s);return s.offsetHeight-e-t}function g3(s){const e=Zi.getMarginTop(s)+Zi.getMarginBottom(s);return s.offsetHeight+e}function jn(s,e){return!!e?.contains(s)}function WQ(s,e,t){for(;s&&s.nodeType===s.ELEMENT_NODE;){if(s.classList.contains(e))return s;if(t){if(typeof t=="string"){if(s.classList.contains(t))return null}else if(s===t)return null}s=s.parentNode}return null}function wk(s,e,t){return!!WQ(s,e,t)}function KW(s){return s&&!!s.host&&!!s.mode}function m3(s){return!!Qm(s)}function Qm(s){for(;s.parentNode;){if(s===s.ownerDocument?.body)return null;s=s.parentNode}return KW(s)?s:null}function Us(){let s=k8().activeElement;for(;s?.shadowRoot;)s=s.shadowRoot.activeElement;return s}function x8(s){return Us()===s}function GW(s){return jn(Us(),s)}function k8(){return IQ()<=1?bi.document:Array.from(UW()).map(({window:e})=>e.document).find(e=>e.hasFocus())??bi.document}function z0(){return k8().defaultView?.window??bi}const ZW=new Map;function Ca(s=bi.document.head,e,t){const i=document.createElement("style");if(i.type="text/css",i.media="screen",e?.(i),s.appendChild(i),s===bi.document.head){const n=new Set;ZW.set(i,n);for(const{window:r,disposables:o}of UW())r!==bi&&o.add(VQ(i,n,r))}return i}function VQ(s,e,t){const i=new Qe,n=s.cloneNode(!0);t.document.head.appendChild(n),i.add(bt(()=>n.remove()));for(const r of jQ(s))n.sheet?.insertRule(r.cssText,n.sheet?.cssRules.length);return i.add(zQ.observe(s,i,{childList:!0})(()=>{n.textContent=s.textContent})),e.add(n),i.add(bt(()=>e.delete(n))),i}const zQ=new class{constructor(){this.mutationObservers=new Map}observe(s,e,t){let i=this.mutationObservers.get(s);i||(i=new Map,this.mutationObservers.set(s,i));const n=jW(t);let r=i.get(n);if(r)r.users+=1;else{const o=new re,a=new MutationObserver(c=>o.fire(c));a.observe(s,t);const l=r={users:1,observer:a,onDidMutate:o.event};e.add(bt(()=>{l.users-=1,l.users===0&&(o.dispose(),a.disconnect(),i?.delete(n),i?.size===0&&this.mutationObservers.delete(s))})),i.set(n,r)}return r.onDidMutate}};let Ck=null;function HQ(){return Ck||(Ck=Ca()),Ck}function jQ(s){return s?.sheet?.rules?s.sheet.rules:s?.sheet?.cssRules?s.sheet.cssRules:[]}function p3(s,e,t=HQ()){if(!(!t||!e)){t.sheet?.insertRule(`${s} {${e}}`,0);for(const i of ZW.get(t)??[])p3(s,e,i)}}function Jn(s){return s instanceof HTMLElement||s instanceof tt(s).HTMLElement}function XM(s){return s instanceof HTMLAnchorElement||s instanceof tt(s).HTMLAnchorElement}function UQ(s){return s instanceof SVGElement||s instanceof tt(s).SVGElement}function L8(s){return s instanceof MouseEvent||s instanceof tt(s).MouseEvent}function Rc(s){return s instanceof KeyboardEvent||s instanceof tt(s).KeyboardEvent}const Ne={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend"};function $Q(s){const e=s;return!!(e&&typeof e.preventDefault=="function"&&typeof e.stopPropagation=="function")}const zt={stop:(s,e)=>(s.preventDefault(),e&&s.stopPropagation(),s)};function qQ(s){const e=[];for(let t=0;s&&s.nodeType===s.ELEMENT_NODE;t++)e[t]=s.scrollTop,s=s.parentNode;return e}function KQ(s,e){for(let t=0;s&&s.nodeType===s.ELEMENT_NODE;t++)s.scrollTop!==e[t]&&(s.scrollTop=e[t]),s=s.parentNode}class kC extends ve{static hasFocusWithin(e){if(Jn(e)){const t=Qm(e),i=t?t.activeElement:e.ownerDocument.activeElement;return jn(i,e)}else{const t=e;return jn(t.document.activeElement,t.document)}}constructor(e){super(),this._onDidFocus=this._register(new re),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new re),this.onDidBlur=this._onDidBlur.event;let t=kC.hasFocusWithin(e),i=!1;const n=()=>{i=!1,t||(t=!0,this._onDidFocus.fire())},r=()=>{t&&(i=!0,(Jn(e)?tt(e):e).setTimeout(()=>{i&&(i=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{kC.hasFocusWithin(e)!==t&&(t?r():n())},this._register(ge(e,Ne.FOCUS,n,!0)),this._register(ge(e,Ne.BLUR,r,!0)),Jn(e)&&(this._register(ge(e,Ne.FOCUS_IN,()=>this._refreshStateHandler())),this._register(ge(e,Ne.FOCUS_OUT,()=>this._refreshStateHandler())))}}function s_(s){return new kC(s)}function GQ(s,e){return s.after(e),e}function Ge(s,...e){if(s.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function D8(s,e){return s.insertBefore(e,s.firstChild),e}function nr(s,...e){s.innerText="",Ge(s,...e)}const ZQ=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var r_;(function(s){s.HTML="http://www.w3.org/1999/xhtml",s.SVG="http://www.w3.org/2000/svg"})(r_||(r_={}));function YW(s,e,t,...i){const n=ZQ.exec(e);if(!n)throw new Error("Bad use of emmet");const r=n[1]||"div";let o;return s!==r_.HTML?o=document.createElementNS(s,r):o=document.createElement(r),n[3]&&(o.id=n[3]),n[4]&&(o.className=n[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?o[a]=l:a==="selected"?l&&o.setAttribute(a,"true"):o.setAttribute(a,l))}),o.append(...i),o}function at(s,e,...t){return YW(r_.HTML,s,e,...t)}at.SVG=function(s,e,...t){return YW(r_.SVG,s,e,...t)};function XW(...s){for(const e of s)e.style.display="",e.removeAttribute("aria-hidden")}function QM(...s){for(const e of s)e.style.display="none",e.setAttribute("aria-hidden","true")}function JM(s,e){const t=s.devicePixelRatio*e;return Math.max(1,Math.floor(t))/s.devicePixelRatio}function QW(s){bi.open(s,"_blank","noopener")}function YQ(s,e){const t=()=>{e(),i=Kr(s,t)};let i=Kr(s,t);return bt(()=>i.dispose())}HW.setPreferredWebSchema(/^https:/.test(bi.location.href)?"https":"http");function du(s){return s?`url('${a2.uriToBrowserUri(s).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function yk(s){return`'${s.replace(/'/g,"%27")}'`}function eu(s,e){if(s!==void 0){const t=s.match(/^\s*var\((.+)\)$/);if(t){const i=t[1].split(",",2);return i.length===2&&(e=eu(i[1].trim(),e)),`var(${i[0]}, ${e})`}return s}return e}function XQ(s,e=!1){const t=document.createElement("a");return VW("afterSanitizeAttributes",i=>{for(const n of["href","src"])if(i.hasAttribute(n)){const r=i.getAttribute(n);if(n==="href"&&r.startsWith("#"))continue;if(t.href=r,!s.includes(t.protocol.replace(/:$/,""))){if(e&&n==="src"&&t.href.startsWith("data:"))continue;i.removeAttribute(n)}}}),bt(()=>{zW("afterSanitizeAttributes")})}const QQ=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);class gh extends re{constructor(){super(),this._subscriptions=new Qe,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(Te.runAndSubscribe(c2,({window:e,disposables:t})=>this.registerListeners(e,t),{window:bi,disposables:this._subscriptions}))}registerListeners(e,t){t.add(ge(e,"keydown",i=>{if(i.defaultPrevented)return;const n=new Ni(i);if(!(n.keyCode===6&&i.repeat)){if(i.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(i.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(i.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(i.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(n.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=i,this.fire(this._keyStatus))}},!0)),t.add(ge(e,"keyup",i=>{i.defaultPrevented||(!i.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!i.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!i.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!i.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=i,this.fire(this._keyStatus)))},!0)),t.add(ge(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(ge(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(ge(e.document.body,"mousemove",i=>{i.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(ge(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return gh.instance||(gh.instance=new gh),gh.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class JQ extends ve{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(ge(this.element,Ne.DRAG_START,e=>{this.callbacks.onDragStart?.(e)})),this.callbacks.onDrag&&this._register(ge(this.element,Ne.DRAG,e=>{this.callbacks.onDrag?.(e)})),this._register(ge(this.element,Ne.DRAG_ENTER,e=>{this.counter++,this.dragStartTime=e.timeStamp,this.callbacks.onDragEnter?.(e)})),this._register(ge(this.element,Ne.DRAG_OVER,e=>{e.preventDefault(),this.callbacks.onDragOver?.(e,e.timeStamp-this.dragStartTime)})),this._register(ge(this.element,Ne.DRAG_LEAVE,e=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave?.(e))})),this._register(ge(this.element,Ne.DRAG_END,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd?.(e)})),this._register(ge(this.element,Ne.DROP,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop?.(e)}))}}const eJ=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function Gt(s,...e){let t,i;Array.isArray(e[0])?(t={},i=e[0]):(t=e[0]||{},i=e[1]);const n=eJ.exec(s);if(!n||!n.groups)throw new Error("Bad use of h");const r=n.groups.tag||"div",o=document.createElement(r);n.groups.id&&(o.id=n.groups.id);const a=[];if(n.groups.class)for(const c of n.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(o.className=a.join(" "));const l={};if(n.groups.name&&(l[n.groups.name]=o),i)for(const c of i)Jn(c)?o.appendChild(c):typeof c=="string"?o.append(c):"root"in c&&(Object.assign(l,c),o.appendChild(c.root));for(const[c,u]of Object.entries(t))if(c!=="className")if(c==="style")for(const[d,g]of Object.entries(u))o.style.setProperty(eR(d),typeof g=="number"?g+"px":""+g);else c==="tabIndex"?o.tabIndex=u:o.setAttribute(eR(c),u.toString());return l.root=o,l}function eR(s){return s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class tJ extends ve{constructor(e){super(),this._onDidChange=this._register(new re),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){this._mediaQueryList?.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}}class iJ extends ve{get value(){return this._value}constructor(e){super(),this._onDidChange=this._register(new re),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio(e);const t=this._register(new tJ(e));this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)}))}_getPixelRatio(e){const t=document.createElement("canvas").getContext("2d"),i=e.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/n}}class nJ{constructor(){this.mapWindowIdToPixelRatioMonitor=new Map}_getOrCreatePixelRatioMonitor(e){const t=xC(e);let i=this.mapWindowIdToPixelRatioMonitor.get(t);return i||(i=new iJ(e),this.mapWindowIdToPixelRatioMonitor.set(t,i),Te.once(RQ)(({vscodeWindowId:n})=>{n===t&&(i?.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))})),i}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}}const LC=new nJ;class JW{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=Fa(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=Fa(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=Fa(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=Fa(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=Fa(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=Fa(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=Fa(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){const t=Fa(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=Fa(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=Fa(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=Fa(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function Fa(s){return typeof s=="number"?`${s}px`:s}function Qt(s){return new JW(s)}function xs(s,e){s instanceof JW?(s.setFontFamily(e.getMassagedFontFamily()),s.setFontWeight(e.fontWeight),s.setFontSize(e.fontSize),s.setFontFeatureSettings(e.fontFeatureSettings),s.setFontVariationSettings(e.fontVariationSettings),s.setLineHeight(e.lineHeight),s.setLetterSpacing(e.letterSpacing)):(s.style.fontFamily=e.getMassagedFontFamily(),s.style.fontWeight=e.fontWeight,s.style.fontSize=e.fontSize+"px",s.style.fontFeatureSettings=e.fontFeatureSettings,s.style.fontVariationSettings=e.fontVariationSettings,s.style.lineHeight=e.lineHeight+"px",s.style.letterSpacing=e.letterSpacing+"px")}class sJ{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class E8{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),this._container?.remove(),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");xs(t,this._bareFontInfo),e.appendChild(t);const i=document.createElement("div");xs(i,this._bareFontInfo),i.style.fontWeight="bold",e.appendChild(i);const n=document.createElement("div");xs(n,this._bareFontInfo),n.style.fontStyle="italic",e.appendChild(n);const r=[];for(const o of this._requests){let a;o.type===0&&(a=t),o.type===2&&(a=i),o.type===1&&(a=n),a.appendChild(document.createElement("br"));const l=document.createElement("span");E8._render(l,o),a.appendChild(l),r.push(l)}this._container=e,this._testElements=r}static _render(e,t){if(t.chr===" "){let i=" ";for(let n=0;n<8;n++)i+=i;e.innerText=i}else{let i=t.chr;for(let n=0;n<8;n++)i+=i;e.textContent=i}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const i=this._requests[e],n=this._testElements[e];i.fulfill(n.offsetWidth/256)}}}function rJ(s,e,t){new E8(e,t).read(s)}const oh=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new re,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(s){s=Math.min(Math.max(-5,s),20),this._zoomLevel!==s&&(this._zoomLevel=s,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},oJ=qt?1.5:1.35,Sk=8;class rf{static createFromValidatedSettings(e,t,i){const n=e.get(49),r=e.get(53),o=e.get(52),a=e.get(51),l=e.get(54),c=e.get(67),u=e.get(64);return rf._create(n,r,o,a,l,c,u,t,i)}static _create(e,t,i,n,r,o,a,l,c){o===0?o=oJ*i:o<Sk&&(o=o*i),o=Math.round(o),o<Sk&&(o=Sk);const u=1+(c?0:oh.getZoomLevel()*.1);return i*=u,o*=u,r===Q1.TRANSLATE&&(t==="normal"||t==="bold"?r=Q1.OFF:(r=`'wght' ${parseInt(t,10)}`,t="normal")),new rf({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:i,fontFeatureSettings:n,fontVariationSettings:r,lineHeight:o,letterSpacing:a})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=wo.fontFamily,t=rf._wrapInQuotes(this.fontFamily);return this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const aJ=2;class _3 extends rf{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=aJ,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class lJ extends ve{constructor(){super(...arguments),this._cache=new Map,this._evictUntrustedReadingsTimeout=-1,this._onDidChange=this._register(new re),this.onDidChange=this._onDidChange.event}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){const t=xC(e);let i=this._cache.get(t);return i||(i=new cJ,this._cache.set(t,i)),i}_writeToCache(e,t,i){this._ensureCache(e).put(t,i),!i.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=e.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)},5e3))}_evictUntrustedReadings(e){const t=this._ensureCache(e),i=t.getValues();let n=!1;for(const r of i)r.isTrusted||(n=!0,t.remove(r));n&&this._onDidChange.fire()}readFontInfo(e,t){const i=this._ensureCache(e);if(!i.has(t)){let n=this._actualReadFontInfo(e,t);(n.typicalHalfwidthCharacterWidth<=2||n.typicalFullwidthCharacterWidth<=2||n.spaceWidth<=2||n.maxDigitWidth<=2)&&(n=new _3({pixelRatio:LC.getInstance(e).value,fontFamily:n.fontFamily,fontWeight:n.fontWeight,fontSize:n.fontSize,fontFeatureSettings:n.fontFeatureSettings,fontVariationSettings:n.fontVariationSettings,lineHeight:n.lineHeight,letterSpacing:n.letterSpacing,isMonospace:n.isMonospace,typicalHalfwidthCharacterWidth:Math.max(n.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(n.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:n.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(n.spaceWidth,5),middotWidth:Math.max(n.middotWidth,5),wsmiddotWidth:Math.max(n.wsmiddotWidth,5),maxDigitWidth:Math.max(n.maxDigitWidth,5)},!1)),this._writeToCache(e,t,n)}return i.get(t)}_createRequest(e,t,i,n){const r=new sJ(e,t);return i.push(r),n?.push(r),r}_actualReadFontInfo(e,t){const i=[],n=[],r=this._createRequest("n",0,i,n),o=this._createRequest("ｍ",0,i,null),a=this._createRequest(" ",0,i,n),l=this._createRequest("0",0,i,n),c=this._createRequest("1",0,i,n),u=this._createRequest("2",0,i,n),d=this._createRequest("3",0,i,n),g=this._createRequest("4",0,i,n),m=this._createRequest("5",0,i,n),_=this._createRequest("6",0,i,n),v=this._createRequest("7",0,i,n),w=this._createRequest("8",0,i,n),y=this._createRequest("9",0,i,n),S=this._createRequest("→",0,i,n),k=this._createRequest("￫",0,i,null),L=this._createRequest("·",0,i,n),T=this._createRequest("⸱",0,i,null),A="|/-_ilm%";for(let Y=0,G=A.length;Y<G;Y++)this._createRequest(A.charAt(Y),0,i,n),this._createRequest(A.charAt(Y),1,i,n),this._createRequest(A.charAt(Y),2,i,n);rJ(e,t,i);const I=Math.max(l.width,c.width,u.width,d.width,g.width,m.width,_.width,v.width,w.width,y.width);let O=t.fontFeatureSettings===kf.OFF;const F=n[0].width;for(let Y=1,G=n.length;O&&Y<G;Y++){const ie=F-n[Y].width;if(ie<-.001||ie>.001){O=!1;break}}let J=!0;return O&&k.width!==F&&(J=!1),k.width>S.width&&(J=!1),new _3({pixelRatio:LC.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:O,typicalHalfwidthCharacterWidth:r.width,typicalFullwidthCharacterWidth:o.width,canUseHalfwidthRightwardsArrow:J,spaceWidth:a.width,middotWidth:L.width,wsmiddotWidth:T.width,maxDigitWidth:I},!0)}}class cJ{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const i=e.getId();this._keys[i]=e,this._values[i]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}const v3=new lJ;var Xa;(function(s){s.serviceIds=new Map,s.DI_TARGET="$di$target",s.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[s.DI_DEPENDENCIES]||[]}s.getServiceDependencies=e})(Xa||(Xa={}));const hi=Ut("instantiationService");function uJ(s,e,t){e[Xa.DI_TARGET]===e?e[Xa.DI_DEPENDENCIES].push({id:s,index:t}):(e[Xa.DI_DEPENDENCIES]=[{id:s,index:t}],e[Xa.DI_TARGET]=e)}function Ut(s){if(Xa.serviceIds.has(s))return Xa.serviceIds.get(s);const e=function(t,i,n){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");uJ(e,t,n)};return e.toString=()=>s,Xa.serviceIds.set(s,e),e}const An=Ut("codeEditorService"),ar=Ut("modelService"),u2=Ut("textModelService");class tu extends ve{constructor(e,t="",i="",n=!0,r){super(),this._onDidChange=this._register(new re),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=n,this._actionCallback=r}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}}class Ef extends ve{constructor(){super(...arguments),this._onWillRun=this._register(new re),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new re),this.onDidRun=this._onDidRun.event}async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let i;try{await this.runAction(e,t)}catch(n){i=n}this._onDidRun.fire({action:e,error:i})}async runAction(e,t){await e.run(t)}}const A1=class A1{constructor(){this.id=A1.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const i of e)i.length&&(t.length?t=[...t,new A1,...i]:t=i);return t}async run(){}};A1.ID="vs.actions.separator";let $s=A1;class h2{get actions(){return this._actions}constructor(e,t,i,n){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=n,this._actions=i}async run(){}}const cS=class cS extends tu{constructor(){super(cS.ID,b("submenu.empty","(empty)"),void 0,!1)}};cS.ID="vs.actions.empty";let b3=cS;function Sm(s){return{id:s.id,label:s.label,tooltip:s.tooltip??s.label,class:s.class,enabled:s.enabled??!0,checked:s.checked,run:async(...e)=>s.run(...e)}}var w3;(function(s){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}s.isThemeColor=e})(w3||(w3={}));var Yt;(function(s){s.iconNameSegment="[A-Za-z0-9]+",s.iconNameExpression="[A-Za-z0-9-]+",s.iconModifierExpression="~[A-Za-z]+",s.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${s.iconNameExpression})(${s.iconModifierExpression})?$`);function t(g){const m=e.exec(g.id);if(!m)return t($e.error);const[,_,v]=m,w=["codicon","codicon-"+_];return v&&w.push("codicon-modifier-"+v.substring(1)),w}s.asClassNameArray=t;function i(g){return t(g).join(" ")}s.asClassName=i;function n(g){return"."+t(g).join(".")}s.asCSSSelector=n;function r(g){return g&&typeof g=="object"&&typeof g.id=="string"&&(typeof g.color>"u"||w3.isThemeColor(g.color))}s.isThemeIcon=r;const o=new RegExp(`^\\$\\((${s.iconNameExpression}(?:${s.iconModifierExpression})?)\\)$`);function a(g){const m=o.exec(g);if(!m)return;const[,_]=m;return{id:_}}s.fromString=a;function l(g){return{id:g}}s.fromId=l;function c(g,m){let _=g.id;const v=_.lastIndexOf("~");return v!==-1&&(_=_.substring(0,v)),m&&(_=`${_}~${m}`),{id:_}}s.modify=c;function u(g){const m=g.id.lastIndexOf("~");if(m!==-1)return g.id.substring(m+1)}s.getModifier=u;function d(g,m){return g.id===m.id&&g.color?.id===m.color?.id}s.isEqual=d})(Yt||(Yt={}));const xo=Ut("commandService"),Dr=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new re,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(s,e){if(!s)throw new Error("invalid command");if(typeof s=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:s,handler:e})}if(s.metadata&&Array.isArray(s.metadata.args)){const o=[];for(const l of s.metadata.args)o.push(l.constraint);const a=s.handler;s.handler=function(l,...c){return DZ(c,o),a(l,...c)}}const{id:t}=s;let i=this._commands.get(t);i||(i=new zr,this._commands.set(t,i));const n=i.unshift(s),r=bt(()=>{n(),this._commands.get(t)?.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),r}registerCommandAlias(s,e){return Dr.registerCommand(s,(t,...i)=>t.get(xo).executeCommand(e,...i))}getCommand(s){const e=this._commands.get(s);if(!(!e||e.isEmpty()))return ei.first(e)}getCommands(){const s=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&s.set(e,t)}return s}};Dr.registerCommand("noop",()=>{});function xk(...s){switch(s.length){case 1:return b("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",s[0]);case 2:return b("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",s[0],s[1]);case 3:return b("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",s[0],s[1],s[2]);default:return}}const hJ=b("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),dJ=b("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'."),hm=class hm{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw s8(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(xk("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(xk("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(xk("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,i=this._input.substring(this._start,this._current),n={type:19,offset:this._start,lexeme:i};this._errors.push({offset:t,lexeme:i,additionalInfo:e}),this._tokens.push(n)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),i=hm._keywords.get(t);i?this._addToken(i):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(hJ);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,i=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(dJ);return}const r=this._input.charCodeAt(e);if(t)t=!1;else if(r===47&&!i){e++;break}else r===91?i=!0:r===92?t=!0:r===93&&(i=!1);e++}for(;e<this._input.length&&hm._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const n=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:n,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}};hm._regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0))),hm._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);let Id=hm;const ks=new Map;ks.set("false",!1);ks.set("true",!0);ks.set("isMac",qt);ks.set("isLinux",xr);ks.set("isWindows",$r);ks.set("isWeb",bp);ks.set("isMacNative",qt&&!bp);ks.set("isEdge",jZ);ks.set("isFirefox",zZ);ks.set("isChrome",JB);ks.set("isSafari",HZ);const fJ=Object.prototype.hasOwnProperty,gJ={regexParsingWithErrorRecovery:!0},mJ=b("contextkey.parser.error.emptyString","Empty context key expression"),pJ=b("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),_J=b("contextkey.parser.error.noInAfterNot","'in' after 'not'."),tR=b("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),vJ=b("contextkey.parser.error.unexpectedToken","Unexpected token"),bJ=b("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),wJ=b("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),CJ=b("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");var Fl;let yJ=(Fl=class{constructor(e=gJ){this._config=e,this._scanner=new Id,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(e===""){this._parsingErrors.push({message:mJ,offset:0,lexeme:"",additionalInfo:pJ});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const i=this._peek(),n=i.type===17?bJ:void 0;throw this._parsingErrors.push({message:vJ,offset:i.offset,lexeme:Id.getLexeme(i),additionalInfo:n}),Fl._parseError}return t}catch(t){if(t!==Fl._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return e.length===1?e[0]:ni.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return e.length===1?e[0]:ni.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),sr.INSTANCE;case 12:return this._advance(),kr.INSTANCE;case 0:{this._advance();const t=this._expr();return this._consume(1,tR),t?.negate()}case 17:return this._advance(),jf.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),ni.true();case 12:return this._advance(),ni.false();case 0:{this._advance();const t=this._expr();return this._consume(1,tR),t}case 17:{const t=e.lexeme;if(this._advance(),this._matchOne(9)){const n=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),n.type!==10)throw this._errExpectedButGot("REGEX",n);const r=n.lexeme,o=r.lastIndexOf("/"),a=o===r.length-1?void 0:this._removeFlagsGY(r.substring(o+1));let l;try{l=new RegExp(r.substring(1,o),a)}catch{throw this._errExpectedButGot("REGEX",n)}return o_.create(t,l)}switch(n.type){case 10:case 19:{const r=[n.lexeme];this._advance();let o=this._peek(),a=0;for(let g=0;g<n.lexeme.length;g++)n.lexeme.charCodeAt(g)===40?a++:n.lexeme.charCodeAt(g)===41&&a--;for(;!this._isAtEnd()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let g=0;g<o.lexeme.length;g++)o.lexeme.charCodeAt(g)===40?a++:n.lexeme.charCodeAt(g)===41&&a--}if(a<0)break;r.push(Id.getLexeme(o)),this._advance(),o=this._peek()}const l=r.join(""),c=l.lastIndexOf("/"),u=c===l.length-1?void 0:this._removeFlagsGY(l.substring(c+1));let d;try{d=new RegExp(l.substring(1,c),u)}catch{throw this._errExpectedButGot("REGEX",n)}return ni.regex(t,d)}case 18:{const r=n.lexeme;this._advance();let o=null;if(!TX(r)){const a=r.indexOf("/"),l=r.lastIndexOf("/");if(a!==l&&a>=0){const c=r.slice(a+1,l),u=r[l+1]==="i"?"i":"";try{o=new RegExp(c,u)}catch{throw this._errExpectedButGot("REGEX",n)}}}if(o===null)throw this._errExpectedButGot("REGEX",n);return o_.create(t,o)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,_J);const n=this._value();return ni.notIn(t,n)}switch(this._peek().type){case 3:{this._advance();const n=this._value();if(this._previous().type===18)return ni.equals(t,n);switch(n){case"true":return ni.has(t);case"false":return ni.not(t);default:return ni.equals(t,n)}}case 4:{this._advance();const n=this._value();if(this._previous().type===18)return ni.notEquals(t,n);switch(n){case"true":return ni.not(t);case"false":return ni.has(t);default:return ni.notEquals(t,n)}}case 5:return this._advance(),v2.create(t,this._value());case 6:return this._advance(),b2.create(t,this._value());case 7:return this._advance(),p2.create(t,this._value());case 8:return this._advance(),_2.create(t,this._value());case 13:return this._advance(),ni.in(t,this._value());default:return ni.has(t)}}case 20:throw this._parsingErrors.push({message:wJ,offset:e.offset,lexeme:"",additionalInfo:CJ}),Fl._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,i){const n=b("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,Id.getLexeme(t)),r=t.offset,o=Id.getLexeme(t);return this._parsingErrors.push({message:n,offset:r,lexeme:o,additionalInfo:i}),Fl._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}},Fl._parseError=new Error,Fl);const X9=class X9{static false(){return sr.INSTANCE}static true(){return kr.INSTANCE}static has(e){return Hf.create(e)}static equals(e,t){return X_.create(e,t)}static notEquals(e,t){return g2.create(e,t)}static regex(e,t){return o_.create(e,t)}static in(e,t){return d2.create(e,t)}static notIn(e,t){return f2.create(e,t)}static not(e){return jf.create(e)}static and(...e){return Xd.create(e,null,!0)}static or(...e){return Wc.create(e,null,!0)}static deserialize(e){return e==null?void 0:this._parser.parse(e)}};X9._parser=new yJ({regexParsingWithErrorRecovery:!1});let ni=X9;function SJ(s,e){const t=s?s.substituteConstants():void 0,i=e?e.substituteConstants():void 0;return!t&&!i?!0:!t||!i?!1:t.equals(i)}function s1(s,e){return s.cmp(e)}const uS=class uS{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return kr.INSTANCE}};uS.INSTANCE=new uS;let sr=uS;const hS=class hS{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return sr.INSTANCE}};hS.INSTANCE=new hS;let kr=hS;class Hf{static create(e,t=null){const i=ks.get(e);return typeof i=="boolean"?i?kr.INSTANCE:sr.INSTANCE:new Hf(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:tV(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=ks.get(this.key);return typeof e=="boolean"?e?kr.INSTANCE:sr.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=jf.create(this.key,this)),this.negated}}class X_{static create(e,t,i=null){if(typeof t=="boolean")return t?Hf.create(e,i):jf.create(e,i);const n=ks.get(e);return typeof n=="boolean"?t===(n?"true":"false")?kr.INSTANCE:sr.INSTANCE:new X_(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:Uf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=ks.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?kr.INSTANCE:sr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=g2.create(this.key,this.value,this)),this.negated}}class d2{static create(e,t){return new d2(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:Uf(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.includes(i):typeof i=="string"&&typeof t=="object"&&t!==null?fJ.call(t,i):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=f2.create(this.key,this.valueKey)),this.negated}}class f2{static create(e,t){return new f2(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=d2.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class g2{static create(e,t,i=null){if(typeof t=="boolean")return t?jf.create(e,i):Hf.create(e,i);const n=ks.get(e);return typeof n=="boolean"?t===(n?"true":"false")?sr.INSTANCE:kr.INSTANCE:new g2(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:Uf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=ks.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?sr.INSTANCE:kr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=X_.create(this.key,this.value,this)),this.negated}}class jf{static create(e,t=null){const i=ks.get(e);return typeof i=="boolean"?i?sr.INSTANCE:kr.INSTANCE:new jf(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:tV(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=ks.get(this.key);return typeof e=="boolean"?e?sr.INSTANCE:kr.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Hf.create(this.key,this)),this.negated}}function m2(s,e){if(typeof s=="string"){const t=parseFloat(s);isNaN(t)||(s=t)}return typeof s=="string"||typeof s=="number"?e(s):sr.INSTANCE}class p2{static create(e,t,i=null){return m2(t,n=>new p2(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:Uf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=b2.create(this.key,this.value,this)),this.negated}}class _2{static create(e,t,i=null){return m2(t,n=>new _2(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:Uf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=v2.create(this.key,this.value,this)),this.negated}}class v2{static create(e,t,i=null){return m2(t,n=>new v2(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:Uf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=_2.create(this.key,this.value,this)),this.negated}}class b2{static create(e,t,i=null){return m2(t,n=>new b2(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:Uf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=p2.create(this.key,this.value,this)),this.negated}}class o_{static create(e,t){return new o_(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=T8.create(this)),this.negated}}class T8{static create(e){return new T8(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function eV(s){let e=null;for(let t=0,i=s.length;t<i;t++){const n=s[t].substituteConstants();if(s[t]!==n&&e===null){e=[];for(let r=0;r<t;r++)e[r]=s[r]}e!==null&&(e[t]=n)}return e===null?s:e}class Xd{static create(e,t,i){return Xd._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const n=s1(this.expr[t],e.expr[t]);if(n!==0)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=eV(this.expr);return e===this.expr?this:Xd.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,i){const n=[];let r=!1;for(const o of e)if(o){if(o.type===1){r=!0;continue}if(o.type===0)return sr.INSTANCE;if(o.type===6){n.push(...o.expr);continue}n.push(o)}if(n.length===0&&r)return kr.INSTANCE;if(n.length!==0){if(n.length===1)return n[0];n.sort(s1);for(let o=1;o<n.length;o++)n[o-1].equals(n[o])&&(n.splice(o,1),o--);if(n.length===1)return n[0];for(;n.length>1;){const o=n[n.length-1];if(o.type!==9)break;n.pop();const a=n.pop(),l=n.length===0,c=Wc.create(o.expr.map(u=>Xd.create([u,a],null,i)),null,l);c&&(n.push(c),n.sort(s1))}if(n.length===1)return n[0];if(i){for(let o=0;o<n.length;o++)for(let a=o+1;a<n.length;a++)if(n[o].negate().equals(n[a]))return sr.INSTANCE;if(n.length===1)return n[0]}return new Xd(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=Wc.create(e,this,!0)}return this.negated}}class Wc{static create(e,t,i){return Wc._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const n=s1(this.expr[t],e.expr[t]);if(n!==0)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=eV(this.expr);return e===this.expr?this:Wc.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,i){let n=[],r=!1;if(e){for(let o=0,a=e.length;o<a;o++){const l=e[o];if(l){if(l.type===0){r=!0;continue}if(l.type===1)return kr.INSTANCE;if(l.type===9){n=n.concat(l.expr);continue}n.push(l)}}if(n.length===0&&r)return sr.INSTANCE;n.sort(s1)}if(n.length!==0){if(n.length===1)return n[0];for(let o=1;o<n.length;o++)n[o-1].equals(n[o])&&(n.splice(o,1),o--);if(n.length===1)return n[0];if(i){for(let o=0;o<n.length;o++)for(let a=o+1;a<n.length;a++)if(n[o].negate().equals(n[a]))return kr.INSTANCE;if(n.length===1)return n[0]}return new Wc(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),i=e.shift(),n=[];for(const r of nR(t))for(const o of nR(i))n.push(Xd.create([r,o],null,!1));e.unshift(Wc.create(n,null,!1))}this.negated=Wc.create(e,this,!0)}return this.negated}}const dm=class dm extends Hf{static all(){return dm._info.values()}constructor(e,t,i){super(e,null),this._defaultValue=t,typeof i=="object"?dm._info.push({...i,key:e}):i!==!0&&dm._info.push({key:e,description:i,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return X_.create(this.key,e)}};dm._info=[];let Je=dm;const ai=Ut("contextKeyService");function tV(s,e){return s<e?-1:s>e?1:0}function Uf(s,e,t,i){return s<t?-1:s>t?1:e<i?-1:e>i?1:0}function C3(s,e){if(s.type===0||e.type===1)return!0;if(s.type===9)return e.type===9?iR(s.expr,e.expr):!1;if(e.type===9){for(const t of e.expr)if(C3(s,t))return!0;return!1}if(s.type===6){if(e.type===6)return iR(e.expr,s.expr);for(const t of s.expr)if(C3(t,e))return!0;return!1}return s.equals(e)}function iR(s,e){let t=0,i=0;for(;t<s.length&&i<e.length;){const n=s[t].cmp(e[i]);if(n<0)return!1;n===0&&t++,i++}return t===s.length}function nR(s){return s.type===9?s.expr:[s]}function kk(s,e){if(!s)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function N8(s,e="Unreachable"){throw new Error(e)}function sR(s){s||_i(new ri("Soft Assertion Failed"))}function Tf(s){if(!s()){debugger;s(),_i(new ri("Assertion Failed"))}}function I8(s,e){let t=0;for(;t<s.length-1;){const i=s[t],n=s[t+1];if(!e(i,n))return!1;t++}return!0}class xJ{constructor(){this.data=new Map}add(e,t){kk(bo(e)),kk(Cr(t)),kk(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const is=new xJ;class M8{constructor(){this._coreKeybindings=new zr,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(ha===1){if(e&&e.win)return e.win}else if(ha===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=M8.bindToCurrentPlatform(e),i=new Qe;if(t&&t.primary){const n=s3(t.primary,ha);n&&i.add(this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let n=0,r=t.secondary.length;n<r;n++){const o=t.secondary[n],a=s3(o,ha);a&&i.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-n-1,e.when))}return i}registerCommandAndKeybindingRule(e){return Vl(this.registerKeybindingRule(e),Dr.registerCommand(e))}_registerDefaultKeybinding(e,t,i,n,r,o){const a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:i,when:o,weight1:n,weight2:r,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,bt(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(LJ)),this._cachedMergedKeybindings.slice(0)}}const Q_=new M8,kJ={EditorModes:"platform.keybindingsRegistry"};is.add(kJ.EditorModes,Q_);function LJ(s,e){if(s.weight1!==e.weight1)return s.weight1-e.weight1;if(s.command&&e.command){if(s.command<e.command)return-1;if(s.command>e.command)return 1}return s.weight2-e.weight2}var DJ=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},rR=function(s,e){return function(t,i){e(t,i,s)}},Ow;function r1(s){return s.command!==void 0}function EJ(s){return s.submenu!==void 0}const V=class V{constructor(e){if(V._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);V._instances.set(e,this),this.id=e}};V._instances=new Map,V.CommandPalette=new V("CommandPalette"),V.DebugBreakpointsContext=new V("DebugBreakpointsContext"),V.DebugCallStackContext=new V("DebugCallStackContext"),V.DebugConsoleContext=new V("DebugConsoleContext"),V.DebugVariablesContext=new V("DebugVariablesContext"),V.NotebookVariablesContext=new V("NotebookVariablesContext"),V.DebugHoverContext=new V("DebugHoverContext"),V.DebugWatchContext=new V("DebugWatchContext"),V.DebugToolBar=new V("DebugToolBar"),V.DebugToolBarStop=new V("DebugToolBarStop"),V.DebugCallStackToolbar=new V("DebugCallStackToolbar"),V.DebugCreateConfiguration=new V("DebugCreateConfiguration"),V.EditorContext=new V("EditorContext"),V.SimpleEditorContext=new V("SimpleEditorContext"),V.EditorContent=new V("EditorContent"),V.EditorLineNumberContext=new V("EditorLineNumberContext"),V.EditorContextCopy=new V("EditorContextCopy"),V.EditorContextPeek=new V("EditorContextPeek"),V.EditorContextShare=new V("EditorContextShare"),V.EditorTitle=new V("EditorTitle"),V.EditorTitleRun=new V("EditorTitleRun"),V.EditorTitleContext=new V("EditorTitleContext"),V.EditorTitleContextShare=new V("EditorTitleContextShare"),V.EmptyEditorGroup=new V("EmptyEditorGroup"),V.EmptyEditorGroupContext=new V("EmptyEditorGroupContext"),V.EditorTabsBarContext=new V("EditorTabsBarContext"),V.EditorTabsBarShowTabsSubmenu=new V("EditorTabsBarShowTabsSubmenu"),V.EditorTabsBarShowTabsZenModeSubmenu=new V("EditorTabsBarShowTabsZenModeSubmenu"),V.EditorActionsPositionSubmenu=new V("EditorActionsPositionSubmenu"),V.ExplorerContext=new V("ExplorerContext"),V.ExplorerContextShare=new V("ExplorerContextShare"),V.ExtensionContext=new V("ExtensionContext"),V.GlobalActivity=new V("GlobalActivity"),V.CommandCenter=new V("CommandCenter"),V.CommandCenterCenter=new V("CommandCenterCenter"),V.LayoutControlMenuSubmenu=new V("LayoutControlMenuSubmenu"),V.LayoutControlMenu=new V("LayoutControlMenu"),V.MenubarMainMenu=new V("MenubarMainMenu"),V.MenubarAppearanceMenu=new V("MenubarAppearanceMenu"),V.MenubarDebugMenu=new V("MenubarDebugMenu"),V.MenubarEditMenu=new V("MenubarEditMenu"),V.MenubarCopy=new V("MenubarCopy"),V.MenubarFileMenu=new V("MenubarFileMenu"),V.MenubarGoMenu=new V("MenubarGoMenu"),V.MenubarHelpMenu=new V("MenubarHelpMenu"),V.MenubarLayoutMenu=new V("MenubarLayoutMenu"),V.MenubarNewBreakpointMenu=new V("MenubarNewBreakpointMenu"),V.PanelAlignmentMenu=new V("PanelAlignmentMenu"),V.PanelPositionMenu=new V("PanelPositionMenu"),V.ActivityBarPositionMenu=new V("ActivityBarPositionMenu"),V.MenubarPreferencesMenu=new V("MenubarPreferencesMenu"),V.MenubarRecentMenu=new V("MenubarRecentMenu"),V.MenubarSelectionMenu=new V("MenubarSelectionMenu"),V.MenubarShare=new V("MenubarShare"),V.MenubarSwitchEditorMenu=new V("MenubarSwitchEditorMenu"),V.MenubarSwitchGroupMenu=new V("MenubarSwitchGroupMenu"),V.MenubarTerminalMenu=new V("MenubarTerminalMenu"),V.MenubarViewMenu=new V("MenubarViewMenu"),V.MenubarHomeMenu=new V("MenubarHomeMenu"),V.OpenEditorsContext=new V("OpenEditorsContext"),V.OpenEditorsContextShare=new V("OpenEditorsContextShare"),V.ProblemsPanelContext=new V("ProblemsPanelContext"),V.SCMInputBox=new V("SCMInputBox"),V.SCMChangesSeparator=new V("SCMChangesSeparator"),V.SCMChangesContext=new V("SCMChangesContext"),V.SCMIncomingChanges=new V("SCMIncomingChanges"),V.SCMIncomingChangesContext=new V("SCMIncomingChangesContext"),V.SCMIncomingChangesSetting=new V("SCMIncomingChangesSetting"),V.SCMOutgoingChanges=new V("SCMOutgoingChanges"),V.SCMOutgoingChangesContext=new V("SCMOutgoingChangesContext"),V.SCMOutgoingChangesSetting=new V("SCMOutgoingChangesSetting"),V.SCMIncomingChangesAllChangesContext=new V("SCMIncomingChangesAllChangesContext"),V.SCMIncomingChangesHistoryItemContext=new V("SCMIncomingChangesHistoryItemContext"),V.SCMOutgoingChangesAllChangesContext=new V("SCMOutgoingChangesAllChangesContext"),V.SCMOutgoingChangesHistoryItemContext=new V("SCMOutgoingChangesHistoryItemContext"),V.SCMChangeContext=new V("SCMChangeContext"),V.SCMResourceContext=new V("SCMResourceContext"),V.SCMResourceContextShare=new V("SCMResourceContextShare"),V.SCMResourceFolderContext=new V("SCMResourceFolderContext"),V.SCMResourceGroupContext=new V("SCMResourceGroupContext"),V.SCMSourceControl=new V("SCMSourceControl"),V.SCMSourceControlInline=new V("SCMSourceControlInline"),V.SCMSourceControlTitle=new V("SCMSourceControlTitle"),V.SCMHistoryTitle=new V("SCMHistoryTitle"),V.SCMTitle=new V("SCMTitle"),V.SearchContext=new V("SearchContext"),V.SearchActionMenu=new V("SearchActionContext"),V.StatusBarWindowIndicatorMenu=new V("StatusBarWindowIndicatorMenu"),V.StatusBarRemoteIndicatorMenu=new V("StatusBarRemoteIndicatorMenu"),V.StickyScrollContext=new V("StickyScrollContext"),V.TestItem=new V("TestItem"),V.TestItemGutter=new V("TestItemGutter"),V.TestProfilesContext=new V("TestProfilesContext"),V.TestMessageContext=new V("TestMessageContext"),V.TestMessageContent=new V("TestMessageContent"),V.TestPeekElement=new V("TestPeekElement"),V.TestPeekTitle=new V("TestPeekTitle"),V.TestCallStack=new V("TestCallStack"),V.TouchBarContext=new V("TouchBarContext"),V.TitleBarContext=new V("TitleBarContext"),V.TitleBarTitleContext=new V("TitleBarTitleContext"),V.TunnelContext=new V("TunnelContext"),V.TunnelPrivacy=new V("TunnelPrivacy"),V.TunnelProtocol=new V("TunnelProtocol"),V.TunnelPortInline=new V("TunnelInline"),V.TunnelTitle=new V("TunnelTitle"),V.TunnelLocalAddressInline=new V("TunnelLocalAddressInline"),V.TunnelOriginInline=new V("TunnelOriginInline"),V.ViewItemContext=new V("ViewItemContext"),V.ViewContainerTitle=new V("ViewContainerTitle"),V.ViewContainerTitleContext=new V("ViewContainerTitleContext"),V.ViewTitle=new V("ViewTitle"),V.ViewTitleContext=new V("ViewTitleContext"),V.CommentEditorActions=new V("CommentEditorActions"),V.CommentThreadTitle=new V("CommentThreadTitle"),V.CommentThreadActions=new V("CommentThreadActions"),V.CommentThreadAdditionalActions=new V("CommentThreadAdditionalActions"),V.CommentThreadTitleContext=new V("CommentThreadTitleContext"),V.CommentThreadCommentContext=new V("CommentThreadCommentContext"),V.CommentTitle=new V("CommentTitle"),V.CommentActions=new V("CommentActions"),V.CommentsViewThreadActions=new V("CommentsViewThreadActions"),V.InteractiveToolbar=new V("InteractiveToolbar"),V.InteractiveCellTitle=new V("InteractiveCellTitle"),V.InteractiveCellDelete=new V("InteractiveCellDelete"),V.InteractiveCellExecute=new V("InteractiveCellExecute"),V.InteractiveInputExecute=new V("InteractiveInputExecute"),V.InteractiveInputConfig=new V("InteractiveInputConfig"),V.ReplInputExecute=new V("ReplInputExecute"),V.IssueReporter=new V("IssueReporter"),V.NotebookToolbar=new V("NotebookToolbar"),V.NotebookStickyScrollContext=new V("NotebookStickyScrollContext"),V.NotebookCellTitle=new V("NotebookCellTitle"),V.NotebookCellDelete=new V("NotebookCellDelete"),V.NotebookCellInsert=new V("NotebookCellInsert"),V.NotebookCellBetween=new V("NotebookCellBetween"),V.NotebookCellListTop=new V("NotebookCellTop"),V.NotebookCellExecute=new V("NotebookCellExecute"),V.NotebookCellExecuteGoTo=new V("NotebookCellExecuteGoTo"),V.NotebookCellExecutePrimary=new V("NotebookCellExecutePrimary"),V.NotebookDiffCellInputTitle=new V("NotebookDiffCellInputTitle"),V.NotebookDiffCellMetadataTitle=new V("NotebookDiffCellMetadataTitle"),V.NotebookDiffCellOutputsTitle=new V("NotebookDiffCellOutputsTitle"),V.NotebookOutputToolbar=new V("NotebookOutputToolbar"),V.NotebookOutlineFilter=new V("NotebookOutlineFilter"),V.NotebookOutlineActionMenu=new V("NotebookOutlineActionMenu"),V.NotebookEditorLayoutConfigure=new V("NotebookEditorLayoutConfigure"),V.NotebookKernelSource=new V("NotebookKernelSource"),V.BulkEditTitle=new V("BulkEditTitle"),V.BulkEditContext=new V("BulkEditContext"),V.TimelineItemContext=new V("TimelineItemContext"),V.TimelineTitle=new V("TimelineTitle"),V.TimelineTitleContext=new V("TimelineTitleContext"),V.TimelineFilterSubMenu=new V("TimelineFilterSubMenu"),V.AccountsContext=new V("AccountsContext"),V.SidebarTitle=new V("SidebarTitle"),V.PanelTitle=new V("PanelTitle"),V.AuxiliaryBarTitle=new V("AuxiliaryBarTitle"),V.AuxiliaryBarHeader=new V("AuxiliaryBarHeader"),V.TerminalInstanceContext=new V("TerminalInstanceContext"),V.TerminalEditorInstanceContext=new V("TerminalEditorInstanceContext"),V.TerminalNewDropdownContext=new V("TerminalNewDropdownContext"),V.TerminalTabContext=new V("TerminalTabContext"),V.TerminalTabEmptyAreaContext=new V("TerminalTabEmptyAreaContext"),V.TerminalStickyScrollContext=new V("TerminalStickyScrollContext"),V.WebviewContext=new V("WebviewContext"),V.InlineCompletionsActions=new V("InlineCompletionsActions"),V.InlineEditsActions=new V("InlineEditsActions"),V.InlineEditActions=new V("InlineEditActions"),V.NewFile=new V("NewFile"),V.MergeInput1Toolbar=new V("MergeToolbar1Toolbar"),V.MergeInput2Toolbar=new V("MergeToolbar2Toolbar"),V.MergeBaseToolbar=new V("MergeBaseToolbar"),V.MergeInputResultToolbar=new V("MergeToolbarResultToolbar"),V.InlineSuggestionToolbar=new V("InlineSuggestionToolbar"),V.InlineEditToolbar=new V("InlineEditToolbar"),V.ChatContext=new V("ChatContext"),V.ChatCodeBlock=new V("ChatCodeblock"),V.ChatCompareBlock=new V("ChatCompareBlock"),V.ChatMessageTitle=new V("ChatMessageTitle"),V.ChatExecute=new V("ChatExecute"),V.ChatExecuteSecondary=new V("ChatExecuteSecondary"),V.ChatInputSide=new V("ChatInputSide"),V.AccessibleView=new V("AccessibleView"),V.MultiDiffEditorFileToolbar=new V("MultiDiffEditorFileToolbar"),V.DiffEditorHunkToolbar=new V("DiffEditorHunkToolbar"),V.DiffEditorSelectionToolbar=new V("DiffEditorSelectionToolbar");let fs=V;const $f=Ut("menuService"),P1=class P1{static for(e){let t=this._all.get(e);return t||(t=new P1(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const i of e)i instanceof P1&&t.add(i.id);return t}constructor(e){this.id=e,this.has=t=>t===e}};P1._all=new Map;let Md=P1;const Jm=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new GY({merge:Md.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(s){return this._commands.set(s.id,s),this._onDidChangeMenu.fire(Md.for(fs.CommandPalette)),bt(()=>{this._commands.delete(s.id)&&this._onDidChangeMenu.fire(Md.for(fs.CommandPalette))})}getCommand(s){return this._commands.get(s)}getCommands(){const s=new Map;return this._commands.forEach((e,t)=>s.set(t,e)),s}appendMenuItem(s,e){let t=this._menuItems.get(s);t||(t=new zr,this._menuItems.set(s,t));const i=t.push(e);return this._onDidChangeMenu.fire(Md.for(s)),bt(()=>{i(),this._onDidChangeMenu.fire(Md.for(s))})}appendMenuItems(s){const e=new Qe;for(const{id:t,item:i}of s)e.add(this.appendMenuItem(t,i));return e}getMenuItems(s){let e;return this._menuItems.has(s)?e=[...this._menuItems.get(s)]:e=[],s===fs.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(s){const e=new Set;for(const t of s)r1(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,i)=>{e.has(i)||s.push({command:t})})}};class o1 extends h2{constructor(e,t,i){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,i,"submenu"),this.item=e,this.hideActions=t}}let iu=Ow=class{static label(e,t){return t?.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}constructor(e,t,i,n,r,o,a){this.hideActions=n,this.menuKeybinding=r,this._commandService=a,this.id=e.id,this.label=Ow.label(e,i),this.tooltip=(typeof e.tooltip=="string"?e.tooltip:e.tooltip?.value)??"",this.enabled=!e.precondition||o.contextMatchesRules(e.precondition),this.checked=void 0;let l;if(e.toggled){const c=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=o.contextMatchesRules(c.condition),this.checked&&c.tooltip&&(this.tooltip=typeof c.tooltip=="string"?c.tooltip:c.tooltip.value),this.checked&&Yt.isThemeIcon(c.icon)&&(l=c.icon),this.checked&&c.title&&(this.label=typeof c.title=="string"?c.title:c.title.value)}l||(l=Yt.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new Ow(t,void 0,i,n,void 0,o,a):void 0,this._options=i,this.class=l&&Yt.asClassName(l)}run(...e){let t=[];return this._options?.arg&&(t=[...t,this._options.arg]),this._options?.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};iu=Ow=DJ([rR(5,ai),rR(6,xo)],iu);const qf=Ut("telemetryService"),ol=Ut("logService");var br;(function(s){s[s.Off=0]="Off",s[s.Trace=1]="Trace",s[s.Debug=2]="Debug",s[s.Info=3]="Info",s[s.Warning=4]="Warning",s[s.Error=5]="Error"})(br||(br={}));const iV=br.Info;class nV extends ve{constructor(){super(...arguments),this.level=iV,this._onDidChangeLogLevel=this._register(new re),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==br.Off&&this.level<=e}}class TJ extends nV{constructor(e=iV,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.checkLogLevel(br.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(br.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(br.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.checkLogLevel(br.Warning)&&(this.useColors?console.log("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(br.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}}class NJ extends nV{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.loggers)i.trace(e,...t)}debug(e,...t){for(const i of this.loggers)i.debug(e,...t)}info(e,...t){for(const i of this.loggers)i.info(e,...t)}warn(e,...t){for(const i of this.loggers)i.warn(e,...t)}error(e,...t){for(const i of this.loggers)i.error(e,...t)}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}function IJ(s){switch(s){case br.Trace:return"trace";case br.Debug:return"debug";case br.Info:return"info";case br.Warning:return"warn";case br.Error:return"error";case br.Off:return"off"}}new Je("logLevel",IJ(br.Info));class w2{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let i=t.kbExpr;this.precondition&&(i?i=ni.and(i,this.precondition):i=this.precondition);const n={id:this.id,weight:t.weight,args:t.args,when:i,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Q_.registerKeybindingRule(n)}}Dr.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){Jm.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class R8 extends w2{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i,n){return this._implementations.push({priority:e,name:t,implementation:i,when:n}),this._implementations.sort((r,o)=>o.priority-r.priority),{dispose:()=>{for(let r=0;r<this._implementations.length;r++)if(this._implementations[r].implementation===i){this._implementations.splice(r,1);return}}}}runCommand(e,t){const i=e.get(ol),n=e.get(ai);i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const r of this._implementations){if(r.when){const a=n.getContext(Us());if(!r.when.evaluate(a))continue}const o=r.implementation(e,t);if(o)return i.trace(`Command '${this.id}' was handled by '${r.name}'.`),typeof o=="boolean"?void 0:o}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class sV extends w2{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Nf extends w2{static bindToContribution(e){return class extends Nf{constructor(i){super(i),this._callback=i.handler}runEditorCommand(i,n,r){const o=e(n);o&&this._callback(o,r)}}}static runEditorCommand(e,t,i,n){const r=e.get(An),o=r.getFocusedCodeEditor()||r.getActiveCodeEditor();if(o)return o.invokeWithinContext(a=>{if(a.get(ai).contextMatchesRules(i??void 0))return n(a,o,t)})}runCommand(e,t){return Nf.runEditorCommand(e,t,this.precondition,(i,n,r)=>this.runEditorCommand(i,n,r))}}function pt(s){return Pl.INSTANCE.registerEditorCommand(s),s}function rV(s,e,t){Pl.INSTANCE.registerEditorContribution(s,e,t)}var xm;(function(s){function e(o){return Pl.INSTANCE.getEditorCommand(o)}s.getEditorCommand=e;function t(){return Pl.INSTANCE.getEditorActions()}s.getEditorActions=t;function i(){return Pl.INSTANCE.getEditorContributions()}s.getEditorContributions=i;function n(o){return Pl.INSTANCE.getEditorContributions().filter(a=>o.indexOf(a.id)>=0)}s.getSomeEditorContributions=n;function r(){return Pl.INSTANCE.getDiffEditorContributions()}s.getDiffEditorContributions=r})(xm||(xm={}));const MJ={EditorCommonContributions:"editor.contributions"},dS=class dS{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,i){this.editorContributions.push({id:e,ctor:t,instantiation:i})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};dS.INSTANCE=new dS;let Pl=dS;is.add(MJ.EditorCommonContributions,Pl.INSTANCE);function J_(s){return s.register(),s}const oV=J_(new R8({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:fs.MenubarEditMenu,group:"1_do",title:b({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:fs.CommandPalette,group:"",title:b("undo","Undo"),order:1}]}));J_(new sV(oV,{id:"default:undo",precondition:void 0}));const aV=J_(new R8({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:fs.MenubarEditMenu,group:"1_do",title:b({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:fs.CommandPalette,group:"",title:b("redo","Redo"),order:1}]}));J_(new sV(aV,{id:"default:redo",precondition:void 0}));const RJ=J_(new R8({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:fs.MenubarSelectionMenu,group:"1_basic",title:b({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:fs.CommandPalette,group:"",title:b("selectAll","Select All"),order:1}]})),oR="default",AJ="$initialize";let aR=!1;function y3(s){bp&&(aR||(aR=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(s.message))}class PJ{constructor(e,t,i,n,r){this.vsWorker=e,this.req=t,this.channel=i,this.method=n,this.args=r,this.type=0}}class lR{constructor(e,t,i,n){this.vsWorker=e,this.seq=t,this.res=i,this.err=n,this.type=1}}class OJ{constructor(e,t,i,n,r){this.vsWorker=e,this.req=t,this.channel=i,this.eventName=n,this.arg=r,this.type=2}}class FJ{constructor(e,t,i){this.vsWorker=e,this.req=t,this.event=i,this.type=3}}class BJ{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class WJ{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t,i){const n=String(++this._lastSentReq);return new Promise((r,o)=>{this._pendingReplies[n]={resolve:r,reject:o},this._send(new PJ(this._workerId,n,e,t,i))})}listen(e,t,i){let n=null;const r=new re({onWillAddFirstListener:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,r),this._send(new OJ(this._workerId,n,e,t,i))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(n),this._send(new BJ(this._workerId,n)),n=null}});return r.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}createProxyToRemoteChannel(e,t){const i={get:(n,r)=>(typeof r=="string"&&!n[r]&&(cV(r)?n[r]=o=>this.listen(e,r,o):lV(r)?n[r]=this.listen(e,r,void 0):r.charCodeAt(0)===36&&(n[r]=async(...o)=>(await t?.(),this.sendMessage(e,r,o)))),n[r])};return new Proxy(Object.create(null),i)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let i=e.err;e.err.$isError&&(i=new Error,i.name=e.err.name,i.message=e.err.message,i.stack=e.err.stack),t.reject(i);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.channel,e.method,e.args).then(n=>{this._send(new lR(this._workerId,t,n,void 0))},n=>{n.detail instanceof Error&&(n.detail=vM(n.detail)),this._send(new lR(this._workerId,t,void 0,vM(n)))})}_handleSubscribeEventMessage(e){const t=e.req,i=this._handler.handleEvent(e.channel,e.eventName,e.arg)(n=>{this._send(new FJ(this._workerId,t,n))});this._pendingEvents.set(t,i)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let i=0;i<e.args.length;i++)e.args[i]instanceof ArrayBuffer&&t.push(e.args[i]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class VJ extends ve{constructor(e,t){super(),this._localChannels=new Map,this._worker=this._register(e.create({amdModuleId:"vs/base/common/worker/simpleWorker",esmModuleLocation:t.esmModuleLocation,label:t.label},r=>{this._protocol.handleMessage(r)},r=>{_i(r)})),this._protocol=new WJ({sendMessage:(r,o)=>{this._worker.postMessage(r,o)},handleMessage:(r,o,a)=>this._handleMessage(r,o,a),handleEvent:(r,o,a)=>this._handleEvent(r,o,a)}),this._protocol.setWorkerId(this._worker.getId());let i=null;const n=globalThis.require;typeof n<"u"&&typeof n.getConfig=="function"?i=n.getConfig():typeof globalThis.requirejs<"u"&&(i=globalThis.requirejs.s.contexts._.config),this._onModuleLoaded=this._protocol.sendMessage(oR,AJ,[this._worker.getId(),JSON.parse(JSON.stringify(i)),t.amdModuleId]),this.proxy=this._protocol.createProxyToRemoteChannel(oR,async()=>{await this._onModuleLoaded}),this._onModuleLoaded.catch(r=>{this._onError("Worker failed to load "+t.amdModuleId,r)})}_handleMessage(e,t,i){const n=this._localChannels.get(e);if(!n)return Promise.reject(new Error(`Missing channel ${e} on main thread`));if(typeof n[t]!="function")return Promise.reject(new Error(`Missing method ${t} on main thread channel ${e}`));try{return Promise.resolve(n[t].apply(n,i))}catch(r){return Promise.reject(r)}}_handleEvent(e,t,i){const n=this._localChannels.get(e);if(!n)throw new Error(`Missing channel ${e} on main thread`);if(cV(t)){const r=n[t].call(n,i);if(typeof r!="function")throw new Error(`Missing dynamic event ${t} on main thread channel ${e}.`);return r}if(lV(t)){const r=n[t];if(typeof r!="function")throw new Error(`Missing event ${t} on main thread channel ${e}.`);return r}throw new Error(`Malformed event name ${t}`)}setChannel(e,t){this._localChannels.set(e,t)}_onError(e,t){console.error(e),console.info(t)}}function lV(s){return s[0]==="o"&&s[1]==="n"&&eh(s.charCodeAt(2))}function cV(s){return/^onDynamic/.test(s)&&eh(s.charCodeAt(9))}function Kf(s,e){const t=globalThis.MonacoEnvironment;if(t?.createTrustedTypesPolicy)try{return t.createTrustedTypesPolicy(s,e)}catch(i){_i(i);return}try{return globalThis.trustedTypes?.createPolicy(s,e)}catch(i){_i(i);return}}let $g;typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope"&&globalThis.workerttPolicy!==void 0?$g=globalThis.workerttPolicy:$g=Kf("defaultWorkerFactory",{createScriptURL:s=>s});function zJ(s,e){const t=globalThis.MonacoEnvironment;if(t){if(typeof t.getWorker=="function")return t.getWorker("workerMain.js",e);if(typeof t.getWorkerUrl=="function"){const i=t.getWorkerUrl("workerMain.js",e);return new Worker($g?$g.createScriptURL(i):i,{name:e,type:"module"})}}if(s){const i=HJ(e,s.toString(!0)),n=new Worker($g?$g.createScriptURL(i):i,{name:e,type:"module"});return jJ(n)}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function HJ(s,e,t){if(!(/^((http:)|(https:)|(file:)|(vscode-file:))/.test(e)&&e.substring(0,globalThis.origin.length)!==globalThis.origin)){const r=e.lastIndexOf("?"),o=e.lastIndexOf("#",r),a=r>0?new URLSearchParams(e.substring(r+1,~o?o:void 0)):new URLSearchParams;h3.addSearchParam(a,!0,!0),a.toString()?e=`${e}?${a.toString()}#${s}`:e=`${e}#${s}`}const n=new Blob([YD([`/*${s}*/`,void 0,`globalThis._VSCODE_NLS_MESSAGES = ${JSON.stringify(GB())};`,`globalThis._VSCODE_NLS_LANGUAGE = ${JSON.stringify(QD())};`,`globalThis._VSCODE_FILE_ROOT = '${globalThis._VSCODE_FILE_ROOT}';`,"const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });","globalThis.workerttPolicy = ttPolicy;",`await import(ttPolicy?.createScriptURL('${e}') ?? '${e}');`,"globalThis.postMessage({ type: 'vscode-worker-ready' });",`/*${s}*/`]).join("")],{type:"application/javascript"});return URL.createObjectURL(n)}function jJ(s){return new Promise((e,t)=>{s.onmessage=function(i){i.data.type==="vscode-worker-ready"&&(s.onmessage=null,e(s))},s.onerror=t})}function UJ(s){return typeof s.then=="function"}class $J extends ve{constructor(e,t,i,n,r,o){super(),this.id=i,this.label=n;const a=zJ(e,n);UJ(a)?this.worker=a:this.worker=Promise.resolve(a),this.postMessage(t,[]),this.worker.then(l=>{l.onmessage=function(c){r(c.data)},l.onmessageerror=o,typeof l.addEventListener=="function"&&l.addEventListener("error",o)}),this._register(bt(()=>{this.worker?.then(l=>{l.onmessage=null,l.onmessageerror=null,l.removeEventListener("error",o),l.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(e,t){this.worker?.then(i=>{try{i.postMessage(e,t)}catch(n){_i(n),_i(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:n}))}})}}class qJ{constructor(e,t){this.amdModuleId=e,this.label=t,this.esmModuleLocation=a2.asBrowserUri(`${e}.esm.js`)}}const fS=class fS{constructor(){this._webWorkerFailedBeforeError=!1}create(e,t,i){const n=++fS.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new $J(e.esmModuleLocation,e.amdModuleId,n,e.label||"anonymous"+n,t,r=>{y3(r),this._webWorkerFailedBeforeError=r,i(r)})}};fS.LAST_WORKER_ID=0;let S3=fS;function KJ(s,e){const t=typeof s=="string"?new qJ(s,e):s;return new VJ(new S3,t)}var tr;(function(s){s[s.None=0]="None",s[s.Indent=1]="Indent",s[s.IndentOutdent=2]="IndentOutdent",s[s.Outdent=3]="Outdent"})(tr||(tr={}));class Lk{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,i=e.notIn.length;t<i;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const i=e.findTokenIndexAtOffset(t-2),n=e.getStandardTokenType(i);return this.isOK(n)}_findNeutralCharacterInRange(e,t){for(let i=e;i<=t;i++){const n=String.fromCharCode(i);if(!this.open.includes(n)&&!this.close.includes(n))return n}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class GJ{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)x0(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),x0(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),x0(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),x0(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&x0(this.autoClosingPairsCloseSingleChar,t.close,t)}}function x0(s,e,t){s.has(e)?s.get(e).push(t):s.set(e,[t])}const fm=class fm{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new Lk(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new Lk({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new Lk({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:fm.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:fm.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}};fm.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`,fm.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;let x3=fm;function Qd(s,e){const t=s.getCount(),i=s.findTokenIndexAtOffset(e),n=s.getLanguageId(i);let r=i;for(;r+1<t&&s.getLanguageId(r+1)===n;)r++;let o=i;for(;o>0&&s.getLanguageId(o-1)===n;)o--;return new ZJ(s,n,o,r+1,s.getStartOffset(o),s.getEndOffset(r))}class ZJ{constructor(e,t,i,n,r,o){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=i,this._lastTokenIndex=n,this.firstCharOffset=r,this._lastCharOffset=o,this.languageIdCodec=e.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}}function yl(s){return(s&3)!==0}const cR=typeof Buffer<"u";let Dk;class A8{static wrap(e){return cR&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new A8(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return cR?this.buffer.toString():(Dk||(Dk=new TextDecoder),Dk.decode(this.buffer))}}function YJ(s,e){return s[e+0]<<0>>>0|s[e+1]<<8>>>0}function XJ(s,e,t){s[t+0]=e&255,e=e>>>8,s[t+1]=e&255}function Ha(s,e){return s[e]*2**24+s[e+1]*2**16+s[e+2]*2**8+s[e+3]}function ja(s,e,t){s[t+3]=e,e=e>>>8,s[t+2]=e,e=e>>>8,s[t+1]=e,e=e>>>8,s[t]=e}function uR(s,e){return s[e]}function hR(s,e,t){s[t]=e}let Ek;function uV(){return Ek||(Ek=new TextDecoder("UTF-16LE")),Ek}let Tk;function QJ(){return Tk||(Tk=new TextDecoder("UTF-16BE")),Tk}let Nk;function hV(){return Nk||(Nk=VZ()?uV():QJ()),Nk}function JJ(s,e,t){const i=new Uint16Array(s.buffer,e,t);return t>0&&(i[0]===65279||i[0]===65534)?eee(s,e,t):uV().decode(i)}function eee(s,e,t){const i=[];let n=0;for(let r=0;r<t;r++){const o=YJ(s,e);e+=2,i[n++]=String.fromCharCode(o)}return i.join("")}class C2{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return hV().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||zn(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let i=0;i<t;i++)this._buffer[this._bufferLength++]=e.charCodeAt(i)}}class DC{constructor(e,t,i,n,r,o){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=i,this.close=n,this.forwardRegex=r,this.reversedRegex=o,this._openSet=DC._toSet(this.open),this._closeSet=DC._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const i of e)t.add(i);return t}}function tee(s){const e=s.length;s=s.map(o=>[o[0].toLowerCase(),o[1].toLowerCase()]);const t=[];for(let o=0;o<e;o++)t[o]=o;const i=(o,a)=>{const[l,c]=o,[u,d]=a;return l===u||l===d||c===u||c===d},n=(o,a)=>{const l=Math.min(o,a),c=Math.max(o,a);for(let u=0;u<e;u++)t[u]===c&&(t[u]=l)};for(let o=0;o<e;o++){const a=s[o];for(let l=o+1;l<e;l++){const c=s[l];i(a,c)&&n(t[o],t[l])}}const r=[];for(let o=0;o<e;o++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===o){const[u,d]=s[c];a.push(u),l.push(d)}a.length>0&&r.push({open:a,close:l})}return r}class iee{constructor(e,t){this._richEditBracketsBrand=void 0;const i=tee(t);this.brackets=i.map((n,r)=>new DC(e,r,n.open,n.close,nee(n.open,n.close,i,r),see(n.open,n.close,i,r))),this.forwardRegex=ree(this.brackets),this.reversedRegex=oee(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const n of this.brackets){for(const r of n.open)this.textIsBracket[r]=n,this.textIsOpenBracket[r]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,r.length);for(const r of n.close)this.textIsBracket[r]=n,this.textIsOpenBracket[r]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,r.length)}}}function dV(s,e,t,i){for(let n=0,r=e.length;n<r;n++){if(n===t)continue;const o=e[n];for(const a of o.open)a.indexOf(s)>=0&&i.push(a);for(const a of o.close)a.indexOf(s)>=0&&i.push(a)}}function fV(s,e){return s.length-e.length}function y2(s){if(s.length<=1)return s;const e=[],t=new Set;for(const i of s)t.has(i)||(e.push(i),t.add(i));return e}function nee(s,e,t,i){let n=[];n=n.concat(s),n=n.concat(e);for(let r=0,o=n.length;r<o;r++)dV(n[r],t,i,n);return n=y2(n),n.sort(fV),n.reverse(),ev(n)}function see(s,e,t,i){let n=[];n=n.concat(s),n=n.concat(e);for(let r=0,o=n.length;r<o;r++)dV(n[r],t,i,n);return n=y2(n),n.sort(fV),n.reverse(),ev(n.map(P8))}function ree(s){let e=[];for(const t of s){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=y2(e),ev(e)}function oee(s){let e=[];for(const t of s){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=y2(e),ev(e.map(P8))}function aee(s){const e=/^[\w ]+$/.test(s);return s=hu(s),e?`\\b${s}\\b`:s}function ev(s,e){const t=`(${s.map(aee).join(")|(")})`;return CW(t,!0,e)}const P8=function(){function s(i){const n=new Uint16Array(i.length);let r=0;for(let o=i.length-1;o>=0;o--)n[r++]=i.charCodeAt(o);return hV().decode(n)}let e=null,t=null;return function(n){return e!==n&&(e=n,t=s(e)),t}}();class oa{static _findPrevBracketInText(e,t,i,n){const r=i.match(e);if(!r)return null;const o=i.length-(r.index||0),a=r[0].length,l=n+o;return new Q(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,i,n,r){const a=P8(i).substring(i.length-r,i.length-n);return this._findPrevBracketInText(e,t,a,n)}static findNextBracketInText(e,t,i,n){const r=i.match(e);if(!r)return null;const o=r.index||0,a=r[0].length;if(a===0)return null;const l=n+o;return new Q(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,i,n,r){const o=i.substring(n,r);return this.findNextBracketInText(e,t,o,n)}}class lee{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const i of t.close){const n=i.charAt(i.length-1);e.push(n)}return Sf(e)}onElectricCharacter(e,t,i){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const n=t.findTokenIndexAtOffset(i-1);if(yl(t.getStandardTokenType(n)))return null;const r=this._richEditBrackets.reversedRegex,o=t.getLineContent().substring(0,i-1)+e,a=oa.findPrevBracketInRange(r,1,o,0,o.length);if(!a)return null;const l=o.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const u=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(u)?{matchOpenBracket:l}:null}}function Fb(s){return s.global&&(s.lastIndex=0),!0}class cee{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&Fb(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&Fb(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&Fb(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&Fb(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class qg{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const i=qg._createOpenBracketRegExp(t[0]),n=qg._createCloseBracketRegExp(t[1]);i&&n&&this._brackets.push({open:t[0],openRegExp:i,close:t[1],closeRegExp:n})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,i,n){if(e>=3)for(let r=0,o=this._regExpRules.length;r<o;r++){const a=this._regExpRules[r];if([{reg:a.beforeText,text:i},{reg:a.afterText,text:n},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&i.length>0&&n.length>0)for(let r=0,o=this._brackets.length;r<o;r++){const a=this._brackets[r];if(a.openRegExp.test(i)&&a.closeRegExp.test(n))return{indentAction:tr.IndentOutdent}}if(e>=2&&i.length>0){for(let r=0,o=this._brackets.length;r<o;r++)if(this._brackets[r].openRegExp.test(i))return{indentAction:tr.Indent}}return null}static _createOpenBracketRegExp(e){let t=hu(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",qg._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=hu(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,qg._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return _i(t),null}}}const Xi=Ut("configurationService");function k3(s,e){const t=Object.create(null);for(const i in s)gV(t,i,s[i],e);return t}function gV(s,e,t,i){const n=e.split("."),r=n.pop();let o=s;for(let a=0;a<n.length;a++){const l=n[a];let c=o[l];switch(typeof c){case"undefined":c=o[l]=Object.create(null);break;case"object":if(c===null){i(`Ignoring ${e} as ${n.slice(0,a+1).join(".")} is null`);return}break;default:i(`Ignoring ${e} as ${n.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}o=c}if(typeof o=="object"&&o!==null)try{o[r]=t}catch{i(`Ignoring ${e} as ${n.join(".")} is ${JSON.stringify(o)}`)}else i(`Ignoring ${e} as ${n.join(".")} is ${JSON.stringify(o)}`)}function uee(s,e){const t=e.split(".");mV(s,t)}function mV(s,e){const t=e.shift();if(e.length===0){delete s[t];return}if(Object.keys(s).indexOf(t)!==-1){const i=s[t];typeof i=="object"&&!Array.isArray(i)&&(mV(i,e),Object.keys(i).length===0&&delete s[t])}}function dR(s,e,t){function i(o,a){let l=o;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const n=e.split("."),r=i(s,n);return typeof r>"u"?t:r}function hee(s){return s.replace(/[\[\]]/g,"")}const $n=Ut("languageService");class Il{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}const pV=[];function Jt(s,e,t){e instanceof Il||(e=new Il(e,[],!!t)),pV.push([s,e])}function fR(){return pV}const Vc=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),S2={JSONContribution:"base.contributions.json"};function dee(s){return s.length>0&&s.charAt(s.length-1)==="#"?s.substring(0,s.length-1):s}class fee{constructor(){this._onDidChangeSchema=new re,this.schemasById={}}registerSchema(e,t){this.schemasById[dee(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const gee=new fee;is.add(S2.JSONContribution,gee);const Gf={Configuration:"base.contributions.configuration"},Bb="vscode://schemas/settings/resourceLanguage",gR=is.as(S2.JSONContribution);class mee{constructor(){this.registeredConfigurationDefaults=[],this.overrideIdentifiers=new Set,this._onDidSchemaChange=new re,this._onDidUpdateConfiguration=new re,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:b("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},gR.registerSchema(Bb,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=new Set;this.doRegisterConfigurations(e,t,i),gR.registerSchema(Bb,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);const i=[];for(const{overrides:n,source:r}of e)for(const o in n){t.add(o);const a=this.configurationDefaultsOverrides.get(o)??this.configurationDefaultsOverrides.set(o,{configurationDefaultOverrides:[]}).get(o),l=n[o];if(a.configurationDefaultOverrides.push({value:l,source:r}),Rh.test(o)){const c=this.mergeDefaultConfigurationsForOverrideIdentifier(o,l,r,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c,this.updateDefaultOverrideProperty(o,c,r),i.push(...EC(o))}else{const c=this.mergeDefaultConfigurationsForConfigurationProperty(o,l,r,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c;const u=this.configurationProperties[o];u&&(this.updatePropertyDefaultValue(o,u),this.updateSchema(o,u))}}this.doRegisterOverrideIdentifiers(i)}updateDefaultOverrideProperty(e,t,i){const n={type:"object",default:t.value,description:b("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",hee(e)),$ref:Bb,defaultDefaultValue:t.value,source:i,defaultValueSource:i};this.configurationProperties[e]=n,this.defaultLanguageConfigurationOverridesNode.properties[e]=n}mergeDefaultConfigurationsForOverrideIdentifier(e,t,i,n){const r=n?.value||{},o=n?.source??new Map;if(!(o instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const a of Object.keys(t)){const l=t[a];if(Cr(l)&&(Uo(r[a])||Cr(r[a]))){if(r[a]={...r[a]??{},...l},i)for(const u in l)o.set(`${a}.${u}`,i)}else r[a]=l,i?o.set(a,i):o.delete(a)}return{value:r,source:o}}mergeDefaultConfigurationsForConfigurationProperty(e,t,i,n){const r=this.configurationProperties[e],o=n?.value??r?.defaultDefaultValue;let a=i;if(Cr(t)&&(r!==void 0&&r.type==="object"||r===void 0&&(Uo(o)||Cr(o)))){if(a=n?.source??new Map,!(a instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)i&&a.set(`${e}.${c}`,i);t={...Cr(o)?o:{},...t}}return{value:t,source:a}}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,i){e.forEach(n=>{this.validateAndRegisterProperties(n,t,n.extensionInfo,n.restrictedProperties,void 0,i),this.configurationContributors.push(n),this.registerJSONConfiguration(n)})}validateAndRegisterProperties(e,t=!0,i,n,r=3,o){r=mo(e.scope)?r:e.scope;const a=e.properties;if(a)for(const c in a){const u=a[c];if(t&&vee(c,u)){delete a[c];continue}if(u.source=i,u.defaultDefaultValue=a[c].default,this.updatePropertyDefaultValue(c,u),Rh.test(c)?u.scope=void 0:(u.scope=mo(u.scope)?r:u.scope,u.restricted=mo(u.restricted)?!!n?.includes(c):u.restricted),a[c].hasOwnProperty("included")&&!a[c].included){this.excludedConfigurationProperties[c]=a[c],delete a[c];continue}else this.configurationProperties[c]=a[c],a[c].policy?.name&&this.policyConfigurations.set(a[c].policy.name,c);!a[c].deprecationMessage&&a[c].markdownDeprecationMessage&&(a[c].deprecationMessage=a[c].markdownDeprecationMessage),o.add(c)}const l=e.allOf;if(l)for(const c of l)this.validateAndRegisterProperties(c,t,i,n,r,o)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=i=>{const n=i.properties;if(n)for(const o in n)this.updateSchema(o,n[o]);i.allOf?.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,i={type:"object",description:b("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:b("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Bb};this.updatePropertyDefaultValue(t,i)}}registerOverridePropertyPatternKey(){b("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),b("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const i=this.configurationDefaultsOverrides.get(e)?.configurationDefaultOverrideValue;let n,r;i&&(!t.disallowConfigurationDefault||!i.source)&&(n=i.value,r=i.source),Uo(n)&&(n=t.defaultDefaultValue,r=void 0),Uo(n)&&(n=_ee(t.type)),t.default=n,t.defaultValueSource=r}}const _V="\\[([^\\]]+)\\]",mR=new RegExp(_V,"g"),pee=`^(${_V})+$`,Rh=new RegExp(pee);function EC(s){const e=[];if(Rh.test(s)){let t=mR.exec(s);for(;t?.length;){const i=t[1].trim();i&&e.push(i),t=mR.exec(s)}}return Sf(e)}function _ee(s){switch(Array.isArray(s)?s[0]:s){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const Fw=new mee;is.add(Gf.Configuration,Fw);function vee(s,e){return s.trim()?Rh.test(s)?b("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",s):Fw.getConfigurationProperties()[s]!==void 0?b("config.property.duplicate","Cannot register '{0}'. This property is already registered.",s):e.policy?.name&&Fw.getPolicyConfigurations().get(e.policy?.name)!==void 0?b("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",s,e.policy?.name,Fw.getPolicyConfigurations().get(e.policy?.name)):null:b("config.property.empty","Cannot register an empty property")}const bee={ModesRegistry:"editor.modesRegistry"};class wee{constructor(){this._onDidChangeLanguages=new re,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,i=this._languages.length;t<i;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}const ep=new wee;is.add(bee.ModesRegistry,ep);const pa="plaintext",Cee=".txt";ep.registerLanguage({id:pa,extensions:[Cee],aliases:[b("plainText.alias","Plain Text"),"text"],mimetypes:[Vc.text]});is.as(Gf.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class yee{constructor(e,t){this.languageId=e;const i=t.brackets?pR(t.brackets):[],n=new AM(a=>{const l=new Set;return{info:new See(this,a,l),closing:l}}),r=new AM(a=>{const l=new Set,c=new Set;return{info:new xee(this,a,l,c),opening:l,openingColorized:c}});for(const[a,l]of i){const c=n.get(a),u=r.get(l);c.closing.add(u.info),u.opening.add(c.info)}const o=t.colorizedBracketPairs?pR(t.colorizedBracketPairs):i.filter(a=>!(a[0]==="<"&&a[1]===">"));for(const[a,l]of o){const c=n.get(a),u=r.get(l);c.closing.add(u.info),u.openingColorized.add(c.info),u.opening.add(c.info)}this._openingBrackets=new Map([...n.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...r.cachedValues].map(([a,l])=>[a,l.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){const t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return ev(t,e)}}function pR(s){return s.filter(([e,t])=>e!==""&&t!=="")}class vV{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class See extends vV{constructor(e,t,i){super(e,t),this.openedBrackets=i,this.isOpeningBracket=!0}}class xee extends vV{constructor(e,t,i,n){super(e,t),this.openingBrackets=i,this.openingColorizedBrackets=n,this.isOpeningBracket=!1}closes(e){return e.config!==this.config?!1:this.openingBrackets.has(e)}closesColorized(e){return e.config!==this.config?!1:this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}var kee=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},_R=function(s,e){return function(t,i){e(t,i,s)}};class Ik{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const Yl=Ut("languageConfigurationService");let L3=class extends ve{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new Tee),this.onDidChangeEmitter=this._register(new re),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const i=new Set(Object.values(D3));this._register(this.configurationService.onDidChangeConfiguration(n=>{const r=n.change.keys.some(a=>i.has(a)),o=n.change.overrides.filter(([a,l])=>l.some(c=>i.has(c))).map(([a])=>a);if(r)this.configurations.clear(),this.onDidChangeEmitter.fire(new Ik(void 0));else for(const a of o)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new Ik(a)))})),this._register(this._registry.onDidChange(n=>{this.configurations.delete(n.languageId),this.onDidChangeEmitter.fire(new Ik(n.languageId))}))}register(e,t,i){return this._registry.register(e,t,i)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=Lee(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};L3=kee([_R(0,Xi),_R(1,$n)],L3);function Lee(s,e,t,i){let n=e.getLanguageConfiguration(s);if(!n){if(!i.isRegisteredLanguageId(s))return new km(s,{});n=new km(s,{})}const r=Dee(n.languageId,t),o=wV([n.underlyingConfig,r]);return new km(n.languageId,o)}const D3={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function Dee(s,e){const t=e.getValue(D3.brackets,{overrideIdentifier:s}),i=e.getValue(D3.colorizedBracketPairs,{overrideIdentifier:s});return{brackets:vR(t),colorizedBracketPairs:vR(i)}}function vR(s){if(Array.isArray(s))return s.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function bV(s,e,t){const i=s.getLineContent(e);let n=Js(i);return n.length>t-1&&(n=n.substring(0,t-1)),n}class Eee{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const i=new bR(e,t,++this._order);return this._entries.push(i),this._resolved=null,bt(()=>{for(let n=0;n<this._entries.length;n++)if(this._entries[n]===i){this._entries.splice(n,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new km(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(bR.cmp),wV(this._entries.map(e=>e.configuration)))}}function wV(s){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of s)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class bR{constructor(e,t,i){this.configuration=e,this.priority=t,this.order=i}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class wR{constructor(e){this.languageId=e}}class Tee extends ve{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new re),this.onDidChange=this._onDidChange.event,this._register(this.register(pa,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,i=0){let n=this._entries.get(e);n||(n=new Eee(e),this._entries.set(e,n));const r=n.register(t,i);return this._onDidChange.fire(new wR(e)),bt(()=>{r.dispose(),this._onDidChange.fire(new wR(e))})}getLanguageConfiguration(e){return this._entries.get(e)?.getResolvedConfiguration()||null}}class km{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new qg(this.underlyingConfig):null,this.comments=km._handleComments(this.underlyingConfig),this.characterPair=new x3(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||t8,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new cee(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new yee(e,this.underlyingConfig)}getWordDefinition(){return i8(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new iee(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new lee(this.brackets)),this._electricCharacter}onEnter(e,t,i,n){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,i,n):null}getAutoClosingPairs(){return new GJ(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const i={};if(t.lineComment&&(i.lineCommentToken=t.lineComment),t.blockComment){const[n,r]=t.blockComment;i.blockCommentStartToken=n,i.blockCommentEndToken=r}return i}}Jt(Yl,L3,1);class Yu{constructor(e,t,i,n){this.originalStart=e,this.originalLength=t,this.modifiedStart=i,this.modifiedLength=n}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class CR{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let i=0,n=e.length;i<n;i++)t[i]=e.charCodeAt(i);return t}}function Nee(s,e,t){return new zc(new CR(s),new CR(e)).ComputeDiff(t).changes}class Lg{static Assert(e,t){if(!e)throw new Error(t)}}class Dg{static Copy(e,t,i,n,r){for(let o=0;o<r;o++)i[n+o]=e[t+o]}static Copy2(e,t,i,n,r){for(let o=0;o<r;o++)i[n+o]=e[t+o]}}class yR{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Yu(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class zc{constructor(e,t,i=null){this.ContinueProcessingPredicate=i,this._originalSequence=e,this._modifiedSequence=t;const[n,r,o]=zc._getElements(e),[a,l,c]=zc._getElements(t);this._hasStrings=o&&c,this._originalStringElements=n,this._originalElementsOrHash=r,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(zc._isStringArray(t)){const i=new Int32Array(t.length);for(let n=0,r=t.length;n<r;n++)i[n]=w8(t[n],0);return[t,i,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const i=zc._getStrictElement(this._originalSequence,e),n=zc._getStrictElement(this._modifiedSequence,t);return i===n}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,i,n,r){const o=[!1];let a=this.ComputeDiffRecursive(e,t,i,n,o);return r&&(a=this.PrettifyChanges(a)),{quitEarly:o[0],changes:a}}ComputeDiffRecursive(e,t,i,n,r){for(r[0]=!1;e<=t&&i<=n&&this.ElementsAreEqual(e,i);)e++,i++;for(;t>=e&&n>=i&&this.ElementsAreEqual(t,n);)t--,n--;if(e>t||i>n){let d;return i<=n?(Lg.Assert(e===t+1,"originalStart should only be one more than originalEnd"),d=[new Yu(e,0,i,n-i+1)]):e<=t?(Lg.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),d=[new Yu(e,t-e+1,i,0)]):(Lg.Assert(e===t+1,"originalStart should only be one more than originalEnd"),Lg.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),d=[]),d}const o=[0],a=[0],l=this.ComputeRecursionPoint(e,t,i,n,o,a,r),c=o[0],u=a[0];if(l!==null)return l;if(!r[0]){const d=this.ComputeDiffRecursive(e,c,i,u,r);let g=[];return r[0]?g=[new Yu(c+1,t-(c+1)+1,u+1,n-(u+1)+1)]:g=this.ComputeDiffRecursive(c+1,t,u+1,n,r),this.ConcatenateChanges(d,g)}return[new Yu(e,t-e+1,i,n-i+1)]}WALKTRACE(e,t,i,n,r,o,a,l,c,u,d,g,m,_,v,w,y,S){let k=null,L=null,T=new yR,A=t,I=i,O=m[0]-w[0]-n,F=-1073741824,J=this.m_forwardHistory.length-1;do{const Y=O+e;Y===A||Y<I&&c[Y-1]<c[Y+1]?(d=c[Y+1],_=d-O-n,d<F&&T.MarkNextChange(),F=d,T.AddModifiedElement(d+1,_),O=Y+1-e):(d=c[Y-1]+1,_=d-O-n,d<F&&T.MarkNextChange(),F=d-1,T.AddOriginalElement(d,_+1),O=Y-1-e),J>=0&&(c=this.m_forwardHistory[J],e=c[0],A=1,I=c.length-1)}while(--J>=-1);if(k=T.getReverseChanges(),S[0]){let Y=m[0]+1,G=w[0]+1;if(k!==null&&k.length>0){const ie=k[k.length-1];Y=Math.max(Y,ie.getOriginalEnd()),G=Math.max(G,ie.getModifiedEnd())}L=[new Yu(Y,g-Y+1,G,v-G+1)]}else{T=new yR,A=o,I=a,O=m[0]-w[0]-l,F=1073741824,J=y?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const Y=O+r;Y===A||Y<I&&u[Y-1]>=u[Y+1]?(d=u[Y+1]-1,_=d-O-l,d>F&&T.MarkNextChange(),F=d+1,T.AddOriginalElement(d+1,_+1),O=Y+1-r):(d=u[Y-1],_=d-O-l,d>F&&T.MarkNextChange(),F=d,T.AddModifiedElement(d+1,_+1),O=Y-1-r),J>=0&&(u=this.m_reverseHistory[J],r=u[0],A=1,I=u.length-1)}while(--J>=-1);L=T.getChanges()}return this.ConcatenateChanges(k,L)}ComputeRecursionPoint(e,t,i,n,r,o,a){let l=0,c=0,u=0,d=0,g=0,m=0;e--,i--,r[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const _=t-e+(n-i),v=_+1,w=new Int32Array(v),y=new Int32Array(v),S=n-i,k=t-e,L=e-i,T=t-n,I=(k-S)%2===0;w[S]=e,y[k]=t,a[0]=!1;for(let O=1;O<=_/2+1;O++){let F=0,J=0;u=this.ClipDiagonalBound(S-O,O,S,v),d=this.ClipDiagonalBound(S+O,O,S,v);for(let G=u;G<=d;G+=2){G===u||G<d&&w[G-1]<w[G+1]?l=w[G+1]:l=w[G-1]+1,c=l-(G-S)-L;const ie=l;for(;l<t&&c<n&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(w[G]=l,l+c>F+J&&(F=l,J=c),!I&&Math.abs(G-k)<=O-1&&l>=y[G])return r[0]=l,o[0]=c,ie<=y[G]&&O<=1448?this.WALKTRACE(S,u,d,L,k,g,m,T,w,y,l,t,r,c,n,o,I,a):null}const Y=(F-e+(J-i)-O)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(F,Y))return a[0]=!0,r[0]=F,o[0]=J,Y>0&&O<=1448?this.WALKTRACE(S,u,d,L,k,g,m,T,w,y,l,t,r,c,n,o,I,a):(e++,i++,[new Yu(e,t-e+1,i,n-i+1)]);g=this.ClipDiagonalBound(k-O,O,k,v),m=this.ClipDiagonalBound(k+O,O,k,v);for(let G=g;G<=m;G+=2){G===g||G<m&&y[G-1]>=y[G+1]?l=y[G+1]-1:l=y[G-1],c=l-(G-k)-T;const ie=l;for(;l>e&&c>i&&this.ElementsAreEqual(l,c);)l--,c--;if(y[G]=l,I&&Math.abs(G-S)<=O&&l<=w[G])return r[0]=l,o[0]=c,ie>=w[G]&&O<=1448?this.WALKTRACE(S,u,d,L,k,g,m,T,w,y,l,t,r,c,n,o,I,a):null}if(O<=1447){let G=new Int32Array(d-u+2);G[0]=S-u+1,Dg.Copy2(w,u,G,1,d-u+1),this.m_forwardHistory.push(G),G=new Int32Array(m-g+2),G[0]=k-g+1,Dg.Copy2(y,g,G,1,m-g+1),this.m_reverseHistory.push(G)}}return this.WALKTRACE(S,u,d,L,k,g,m,T,w,y,l,t,r,c,n,o,I,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const i=e[t],n=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,r=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=i.originalLength>0,a=i.modifiedLength>0;for(;i.originalStart+i.originalLength<n&&i.modifiedStart+i.modifiedLength<r&&(!o||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!a||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){const c=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!c)break;i.originalStart++,i.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const i=e[t];let n=0,r=0;if(t>0){const d=e[t-1];n=d.originalStart+d.originalLength,r=d.modifiedStart+d.modifiedLength}const o=i.originalLength>0,a=i.modifiedLength>0;let l=0,c=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let d=1;;d++){const g=i.originalStart-d,m=i.modifiedStart-d;if(g<n||m<r||o&&!this.OriginalElementsAreEqual(g,g+i.originalLength)||a&&!this.ModifiedElementsAreEqual(m,m+i.modifiedLength))break;const v=(g===n&&m===r?5:0)+this._boundaryScore(g,i.originalLength,m,i.modifiedLength);v>c&&(c=v,l=d)}i.originalStart-=l,i.modifiedStart-=l;const u=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],u)){e[t-1]=u[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,i=e.length;t<i;t++){const n=e[t-1],r=e[t],o=r.originalStart-n.originalStart-n.originalLength,a=n.originalStart,l=r.originalStart+r.originalLength,c=l-a,u=n.modifiedStart,d=r.modifiedStart+r.modifiedLength,g=d-u;if(o<5&&c<20&&g<20){const m=this._findBetterContiguousSequence(a,c,u,g,o);if(m){const[_,v]=m;(_!==n.originalStart+n.originalLength||v!==n.modifiedStart+n.modifiedLength)&&(n.originalLength=_-n.originalStart,n.modifiedLength=v-n.modifiedStart,r.originalStart=_+o,r.modifiedStart=v+o,r.originalLength=l-r.originalStart,r.modifiedLength=d-r.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,i,n,r){if(t<r||n<r)return null;const o=e+t-r+1,a=i+n-r+1;let l=0,c=0,u=0;for(let d=e;d<o;d++)for(let g=i;g<a;g++){const m=this._contiguousSequenceScore(d,g,r);m>0&&m>l&&(l=m,c=d,u=g)}return l>0?[c,u]:null}_contiguousSequenceScore(e,t,i){let n=0;for(let r=0;r<i;r++){if(!this.ElementsAreEqual(e+r,t+r))return 0;n+=this._originalStringElements[e+r].length}return n}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,t,i,n){const r=this._OriginalRegionIsBoundary(e,t)?1:0,o=this._ModifiedRegionIsBoundary(i,n)?1:0;return r+o}ConcatenateChanges(e,t){const i=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],i)){const n=new Array(e.length+t.length-1);return Dg.Copy(e,0,n,0,e.length-1),n[e.length-1]=i[0],Dg.Copy(t,1,n,e.length,t.length-1),n}else{const n=new Array(e.length+t.length);return Dg.Copy(e,0,n,0,e.length),Dg.Copy(t,0,n,e.length,t.length),n}}ChangesOverlap(e,t,i){if(Lg.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),Lg.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const n=e.originalStart;let r=e.originalLength;const o=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(r=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),i[0]=new Yu(n,r,o,a),!0}else return i[0]=null,!1}ClipDiagonalBound(e,t,i,n){if(e>=0&&e<n)return e;const r=i,o=n-i-1,a=t%2===0;if(e<0){const l=r%2===0;return a===l?0:1}else{const l=o%2===0;return a===l?n-1:n-2}}}function TC(s){return s<0?0:s>255?255:s|0}function Eg(s){return s<0?0:s>4294967295?4294967295:s|0}class tv{constructor(e){const t=TC(e);this._defaultValue=t,this._asciiMap=tv._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const i=TC(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class Iee{constructor(e,t,i){const n=new Uint8Array(e*t);for(let r=0,o=e*t;r<o;r++)n[r]=i;this._data=n,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}}class Mee{constructor(e){let t=0,i=0;for(let r=0,o=e.length;r<o;r++){const[a,l,c]=e[r];l>t&&(t=l),a>i&&(i=a),c>i&&(i=c)}t++,i++;const n=new Iee(i,t,0);for(let r=0,o=e.length;r<o;r++){const[a,l,c]=e[r];n.set(a,l,c)}this._states=n,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let Mk=null;function Ree(){return Mk===null&&(Mk=new Mee([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),Mk}let k0=null;function Aee(){if(k0===null){k0=new tv(0);const s=` 	<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…`;for(let t=0;t<s.length;t++)k0.set(s.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)k0.set(e.charCodeAt(t),2)}return k0}class NC{static _createLink(e,t,i,n,r){let o=r-1;do{const a=t.charCodeAt(o);if(e.get(a)!==2)break;o--}while(o>n);if(n>0){const a=t.charCodeAt(n-1),l=t.charCodeAt(o);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&o--}return{range:{startLineNumber:i,startColumn:n+1,endLineNumber:i,endColumn:o+2},url:t.substring(n,o+1)}}static computeLinks(e,t=Ree()){const i=Aee(),n=[];for(let r=1,o=e.getLineCount();r<=o;r++){const a=e.getLineContent(r),l=a.length;let c=0,u=0,d=0,g=1,m=!1,_=!1,v=!1,w=!1;for(;c<l;){let y=!1;const S=a.charCodeAt(c);if(g===13){let k;switch(S){case 40:m=!0,k=0;break;case 41:k=m?0:1;break;case 91:v=!0,_=!0,k=0;break;case 93:v=!1,k=_?0:1;break;case 123:w=!0,k=0;break;case 125:k=w?0:1;break;case 39:case 34:case 96:d===S?k=1:d===39||d===34||d===96?k=0:k=1;break;case 42:k=d===42?1:0;break;case 124:k=d===124?1:0;break;case 32:k=v?0:1;break;default:k=i.get(S)}k===1&&(n.push(NC._createLink(i,a,r,u,c)),y=!0)}else if(g===12){let k;S===91?(_=!0,k=0):k=i.get(S),k===1?y=!0:g=13}else g=t.nextState(g,S),g===0&&(y=!0);y&&(g=1,m=!1,_=!1,w=!1,u=c+1,d=S),c++}g===13&&n.push(NC._createLink(i,a,r,u,l))}return n}}function Pee(s){return!s||typeof s.getLineCount!="function"||typeof s.getLineContent!="function"?[]:NC.computeLinks(s)}const gS=class gS{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,i,n,r){if(e&&t){const o=this.doNavigateValueSet(t,r);if(o)return{range:e,value:o}}if(i&&n){const o=this.doNavigateValueSet(n,r);if(o)return{range:i,value:o}}return null}doNavigateValueSet(e,t){const i=this.numberReplace(e,t);return i!==null?i:this.textReplace(e,t)}numberReplace(e,t){const i=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let n=Number(e);const r=parseFloat(e);return!isNaN(n)&&!isNaN(r)&&n===r?n===0&&!t?null:(n=Math.floor(n*i),n+=t?i:-i,String(n/i)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,i){let n=null;for(let r=0,o=e.length;n===null&&r<o;r++)n=this.valueSetReplace(e[r],t,i);return n}valueSetReplace(e,t,i){let n=e.indexOf(t);return n>=0?(n+=i?1:-1,n<0?n=e.length-1:n%=e.length,e[n]):null}};gS.INSTANCE=new gS;let E3=gS;const O1=class O1{static getChannel(e){return e.getChannel(O1.CHANNEL_NAME)}static setChannel(e,t){e.setChannel(O1.CHANNEL_NAME,t)}};O1.CHANNEL_NAME="editorWorkerHost";let T3=O1;var SR,xR;class Oee{constructor(e,t){this.uri=e,this.value=t}}function Fee(s){return Array.isArray(s)}const Kd=class Kd{constructor(e,t){if(this[SR]="ResourceMap",e instanceof Kd)this.map=new Map(e.map),this.toKey=t??Kd.defaultToKey;else if(Fee(e)){this.map=new Map,this.toKey=t??Kd.defaultToKey;for(const[i,n]of e)this.set(i,n)}else this.map=new Map,this.toKey=e??Kd.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new Oee(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[i,n]of this.map)e(n.value,n.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(SR=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}};Kd.defaultToKey=e=>e.toString();let Co=Kd;class Bee{constructor(){this[xR]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=0){const i=this._map.get(e);if(i)return t!==0&&this.touch(i,t),i.value}set(e,t,i=0){let n=this._map.get(e);if(n)n.value=t,i!==0&&this.touch(n,i);else{switch(n={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.addItemLast(n);break;case 1:this.addItemFirst(n);break;case 2:this.addItemLast(n);break;default:this.addItemLast(n);break}this._map.set(e,n),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const i=this._state;let n=this._head;for(;n;){if(t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");n=n.next}}keys(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const r={value:i.key,done:!1};return i=i.next,r}else return{value:void 0,done:!0}}};return n}values(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const r={value:i.value,done:!1};return i=i.next,r}else return{value:void 0,done:!0}}};return n}entries(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const r={value:[i.key,i.value],done:!1};return i=i.next,r}else return{value:void 0,done:!0}}};return n}[(xR=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.previous,i--;this._tail=t,this._size=i,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const i=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(i.previous=n,n.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const i=e.next,n=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=n,n.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}class Wee extends Bee{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}}class iv extends Wee{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}}class Vee{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(const[t,i]of e)this.set(t,i)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){const t=this._m1.get(e);return t===void 0?!1:(this._m1.delete(e),this._m2.delete(t),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}}class CV{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);i&&(i.delete(t),i.size===0&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);i&&i.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}class zee extends tv{constructor(e,t){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let i=0,n=e.length;i<n;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const n of this._getIntlSegmenterWordsOnLine(e)){if(n.index>t)break;i=n}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this._getIntlSegmenterWordsOnLine(e))if(!(i.index<t))return i;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){const t=[];for(const i of e)this._isWordLike(i)&&t.push(i);return t}_isWordLike(e){return!!e.isWordLike}}const kR=new iv(10);function tp(s,e){const t=`${s}/${e.join(",")}`;let i=kR.get(t);return i||(i=new zee(s,e),kR.set(t,i)),i}var IC;(function(s){s[s.Left=1]="Left",s[s.Center=2]="Center",s[s.Right=4]="Right",s[s.Full=7]="Full"})(IC||(IC={}));var Ah;(function(s){s[s.Left=1]="Left",s[s.Center=2]="Center",s[s.Right=3]="Right"})(Ah||(Ah={}));var ip;(function(s){s[s.Both=0]="Both",s[s.Right=1]="Right",s[s.Left=2]="Left",s[s.None=3]="None"})(ip||(ip={}));class Bw{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&jr(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class a_{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}function Hee(s){return s&&typeof s.read=="function"}class Rk{constructor(e,t,i,n,r,o){this.identifier=e,this.range=t,this.text=i,this.forceMoveMarkers=n,this.isAutoWhitespaceEdit=r,this._isTracked=o}}class jee{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}}class Uee{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}}function $ee(s){return!s.isTooLargeForSyncing()&&!s.isForSimpleWidget}const qee=999;class Tg{constructor(e,t,i,n){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=n}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=Kee(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=CW(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new jee(t,this.wordSeparators?tp(this.wordSeparators,[]):null,i?this.searchString:null)}}function Kee(s){if(!s||s.length===0)return!1;for(let e=0,t=s.length;e<t;e++){const i=s.charCodeAt(e);if(i===10)return!0;if(i===92){if(e++,e>=t)break;const n=s.charCodeAt(e);if(n===110||n===114||n===87)return!0}}return!1}function Rd(s,e,t){if(!t)return new a_(s,null);const i=[];for(let n=0,r=e.length;n<r;n++)i[n]=e[n];return new a_(s,i)}class LR{constructor(e){const t=[];let i=0;for(let n=0,r=e.length;n<r;n++)e.charCodeAt(n)===10&&(t[i++]=n);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let i=0,n=t.length-1;if(n===-1||e<=t[0])return 0;for(;i<n;){const r=i+((n-i)/2>>0);t[r]>=e?n=r-1:t[r+1]>=e?(i=r,n=r):i=r+1}return i+1}}class Wb{static findMatches(e,t,i,n,r){const o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,i,new Kg(o.wordSeparators,o.regex),n,r):this._doFindMatchesLineByLine(e,i,o,n,r):[]}static _getMultilineMatchRange(e,t,i,n,r,o){let a,l=0;n?(l=n.findLineFeedCountBeforeOffset(r),a=t+r+l):a=t+r;let c;if(n){const m=n.findLineFeedCountBeforeOffset(r+o.length)-l;c=a+o.length+m}else c=a+o.length;const u=e.getPositionAt(a),d=e.getPositionAt(c);return new Q(u.lineNumber,u.column,d.lineNumber,d.column)}static _doFindMatchesMultiline(e,t,i,n,r){const o=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new LR(a):null,c=[];let u=0,d;for(i.reset(0);d=i.next(a);)if(c[u++]=Rd(this._getMultilineMatchRange(e,o,a,l,d.index,d[0]),d,n),u>=r)return c;return c}static _doFindMatchesLineByLine(e,t,i,n,r){const o=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(i,c,t.startLineNumber,t.startColumn-1,a,o,n,r),o}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(i,l,t.startLineNumber,t.startColumn-1,a,o,n,r);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<r;c++)a=this._findMatchesInLine(i,e.getLineContent(c),c,0,a,o,n,r);if(a<r){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(i,c,t.endLineNumber,0,a,o,n,r)}return o}static _findMatchesInLine(e,t,i,n,r,o,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const g=e.simpleSearch,m=g.length,_=t.length;let v=-m;for(;(v=t.indexOf(g,v+m))!==-1;)if((!c||O8(c,t,_,v,m))&&(o[r++]=new a_(new Q(i,v+1+n,i,v+1+m+n),null),r>=l))return r;return r}const u=new Kg(e.wordSeparators,e.regex);let d;u.reset(0);do if(d=u.next(t),d&&(o[r++]=Rd(new Q(i,d.index+1+n,i,d.index+1+d[0].length+n),d,a),r>=l))return r;while(d);return r}static findNextMatch(e,t,i,n){const r=t.parseSearchRequest();if(!r)return null;const o=new Kg(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindNextMatchMultiline(e,i,o,n):this._doFindNextMatchLineByLine(e,i,o,n)}static _doFindNextMatchMultiline(e,t,i,n){const r=new ce(t.lineNumber,1),o=e.getOffsetAt(r),a=e.getLineCount(),l=e.getValueInRange(new Q(r.lineNumber,r.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new LR(l):null;i.reset(t.column-1);const u=i.next(l);return u?Rd(this._getMultilineMatchRange(e,o,l,c,u.index,u[0]),u,n):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new ce(1,1),i,n):null}static _doFindNextMatchLineByLine(e,t,i,n){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o),l=this._findFirstMatchInLine(i,a,o,t.column,n);if(l)return l;for(let c=1;c<=r;c++){const u=(o+c-1)%r,d=e.getLineContent(u+1),g=this._findFirstMatchInLine(i,d,u+1,1,n);if(g)return g}return null}static _findFirstMatchInLine(e,t,i,n,r){e.reset(n-1);const o=e.next(t);return o?Rd(new Q(i,o.index+1,i,o.index+1+o[0].length),o,r):null}static findPreviousMatch(e,t,i,n){const r=t.parseSearchRequest();if(!r)return null;const o=new Kg(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindPreviousMatchMultiline(e,i,o,n):this._doFindPreviousMatchLineByLine(e,i,o,n)}static _doFindPreviousMatchMultiline(e,t,i,n){const r=this._doFindMatchesMultiline(e,new Q(1,1,t.lineNumber,t.column),i,n,10*qee);if(r.length>0)return r[r.length-1];const o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new ce(o,e.getLineMaxColumn(o)),i,n):null}static _doFindPreviousMatchLineByLine(e,t,i,n){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o).substring(0,t.column-1),l=this._findLastMatchInLine(i,a,o,n);if(l)return l;for(let c=1;c<=r;c++){const u=(r+o-c-1)%r,d=e.getLineContent(u+1),g=this._findLastMatchInLine(i,d,u+1,n);if(g)return g}return null}static _findLastMatchInLine(e,t,i,n){let r=null,o;for(e.reset(0);o=e.next(t);)r=Rd(new Q(i,o.index+1,i,o.index+1+o[0].length),o,n);return r}}function Gee(s,e,t,i,n){if(i===0)return!0;const r=e.charCodeAt(i-1);if(s.get(r)!==0||r===13||r===10)return!0;if(n>0){const o=e.charCodeAt(i);if(s.get(o)!==0)return!0}return!1}function Zee(s,e,t,i,n){if(i+n===t)return!0;const r=e.charCodeAt(i+n);if(s.get(r)!==0||r===13||r===10)return!0;if(n>0){const o=e.charCodeAt(i+n-1);if(s.get(o)!==0)return!0}return!1}function O8(s,e,t,i,n){return Gee(s,e,t,i,n)&&Zee(s,e,t,i,n)}class Kg{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let i;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(i=this._searchRegex.exec(e),!i))return null;const n=i.index,r=i[0].length;if(n===this._prevMatchStartIndex&&r===this._prevMatchLength){if(r===0){CC(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=n,this._prevMatchLength=r,!this._wordSeparators||O8(this._wordSeparators,e,t,n,r))return i}while(i);return null}}class Yee{static computeUnicodeHighlights(e,t,i){const n=i?i.startLineNumber:1,r=i?i.endLineNumber:e.getLineCount(),o=new DR(t),a=o.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${Xee(Array.from(a))}`,"g");const c=new Kg(null,l),u=[];let d=!1,g,m=0,_=0,v=0;e:for(let w=n,y=r;w<=y;w++){const S=e.getLineContent(w),k=S.length;c.reset(0);do if(g=c.next(S),g){let L=g.index,T=g.index+g[0].length;if(L>0){const F=S.charCodeAt(L-1);zn(F)&&L--}if(T+1<k){const F=S.charCodeAt(T-1);zn(F)&&T++}const A=S.substring(L,T);let I=X1(L+1,t8,S,0);I&&I.endColumn<=L+1&&(I=null);const O=o.shouldHighlightNonBasicASCII(A,I?I.word:null);if(O!==0){if(O===3?m++:O===2?_++:O===1?v++:N8(),u.length>=1e3){d=!0;break e}u.push(new Q(w,L+1,w,T+1))}}while(g)}return{ranges:u,hasMore:d,ambiguousCharacterCount:m,invisibleCharacterCount:_,nonBasicAsciiCharacterCount:v}}static computeUnicodeHighlightReason(e,t){const i=new DR(t);switch(i.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const r=e.codePointAt(0),o=i.ambiguousCharacters.getPrimaryConfusable(r),a=i_.getLocales().filter(l=>!i_.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(r));return{kind:0,confusableWith:String.fromCodePoint(o),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}function Xee(s,e){return`[${hu(s.map(i=>String.fromCodePoint(i)).join(""))}]`}class DR{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=i_.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of i1.codePoints)ER(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const i=e.codePointAt(0);if(this.allowedCodePoints.has(i))return 0;if(this.options.nonBasicASCII)return 1;let n=!1,r=!1;if(t)for(const o of t){const a=o.codePointAt(0),l=m8(o);n=n||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!i1.isInvisibleCharacter(a)&&(r=!0)}return!n&&r?0:this.options.invisibleCharacters&&!ER(e)&&i1.isInvisibleCharacter(i)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(i)?3:0}}function ER(s){return s===" "||s===`
`||s==="	"}class Ww{constructor(e,t,i){this.changes=e,this.moves=t,this.hitTimeout=i}}class yV{constructor(e,t){this.lineRangeMapping=e,this.changes=t}}class yt{static addRange(e,t){let i=0;for(;i<t.length&&t[i].endExclusive<e.start;)i++;let n=i;for(;n<t.length&&t[n].start<=e.endExclusive;)n++;if(i===n)t.splice(i,0,e);else{const r=Math.min(e.start,t[i].start),o=Math.max(e.endExclusive,t[n-1].endExclusive);t.splice(i,n-i,new yt(r,o))}}static tryCreate(e,t){if(!(e>t))return new yt(e,t)}static ofLength(e){return new yt(0,e)}static ofStartAndLength(e,t){return new yt(e,e+t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new ri(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new yt(this.start+e,this.endExclusive+e)}deltaStart(e){return new yt(this.start+e,this.endExclusive)}deltaEnd(e){return new yt(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new yt(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);if(t<=i)return new yt(t,i)}intersects(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);return t<i}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new ri(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new ri(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}}class F8{constructor(){this._sortedRanges=[]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let i=t;for(;i<this._sortedRanges.length&&this._sortedRanges[i].start<=e.endExclusive;)i++;if(t===i)this._sortedRanges.splice(t,0,e);else{const n=Math.min(e.start,this._sortedRanges[t].start),r=Math.max(e.endExclusive,this._sortedRanges[i-1].endExclusive);this._sortedRanges.splice(t,i-t,new yt(n,r))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new F8;for(const i of this._sortedRanges){const n=i.intersect(e);n&&t.addRange(n)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}}function MC(s,e){const t=Qee(s,e);if(t!==-1)return s[t]}function Qee(s,e,t=s.length-1){for(let i=t;i>=0;i--){const n=s[i];if(e(n))return i}return-1}function np(s,e){const t=l_(s,e);return t===-1?void 0:s[t]}function l_(s,e,t=0,i=s.length){let n=t,r=i;for(;n<r;){const o=Math.floor((n+r)/2);e(s[o])?n=o+1:r=o}return n-1}function Jee(s,e){const t=N3(s,e);return t===s.length?void 0:s[t]}function N3(s,e,t=0,i=s.length){let n=t,r=i;for(;n<r;){const o=Math.floor((n+r)/2);e(s[o])?r=o:n=o+1}return n}const mS=class mS{constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(mS.assertInvariants){if(this._prevFindLastPredicate){for(const i of this._array)if(this._prevFindLastPredicate(i)&&!e(i))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}const t=l_(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,t===-1?void 0:this._array[t]}};mS.assertInvariants=!1;let RC=mS;function SV(s,e){if(s.length===0)return;let t=s[0];for(let i=1;i<s.length;i++){const n=s[i];e(n,t)>0&&(t=n)}return t}function ete(s,e){if(s.length===0)return;let t=s[0];for(let i=1;i<s.length;i++){const n=s[i];e(n,t)>=0&&(t=n)}return t}function tte(s,e){return SV(s,(t,i)=>-e(t,i))}function ite(s,e){if(s.length===0)return-1;let t=0;for(let i=1;i<s.length;i++){const n=s[i];e(n,s[t])>0&&(t=i)}return t}let dt=class Cc{static fromRangeInclusive(e){return new Cc(e.startLineNumber,e.endLineNumber+1)}static joinMany(e){if(e.length===0)return[];let t=new Vo(e[0].slice());for(let i=1;i<e.length;i++)t=t.getUnion(new Vo(e[i].slice()));return t.ranges}static join(e){if(e.length===0)throw new ri("lineRanges cannot be empty");let t=e[0].startLineNumber,i=e[0].endLineNumberExclusive;for(let n=1;n<e.length;n++)t=Math.min(t,e[n].startLineNumber),i=Math.max(i,e[n].endLineNumberExclusive);return new Cc(t,i)}static ofLength(e,t){return new Cc(e,e+t)}static deserialize(e){return new Cc(e[0],e[1])}constructor(e,t){if(e>t)throw new ri(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new Cc(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new Cc(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new Cc(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=i)return new Cc(t,i)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new Q(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new Q(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let i=this.startLineNumber;i<this.endLineNumberExclusive;i++)t.push(e(i));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new yt(this.startLineNumber-1,this.endLineNumberExclusive-1)}};class Vo{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;const t=N3(this._normalizedRanges,n=>n.endLineNumberExclusive>=e.startLineNumber),i=l_(this._normalizedRanges,n=>n.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)this._normalizedRanges.splice(t,0,e);else if(t===i-1){const n=this._normalizedRanges[t];this._normalizedRanges[t]=n.join(e)}else{const n=this._normalizedRanges[t].join(this._normalizedRanges[i-1]).join(e);this._normalizedRanges.splice(t,i-t,n)}}contains(e){const t=np(this._normalizedRanges,i=>i.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){const t=np(this._normalizedRanges,i=>i.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;const t=[];let i=0,n=0,r=null;for(;i<this._normalizedRanges.length||n<e._normalizedRanges.length;){let o=null;if(i<this._normalizedRanges.length&&n<e._normalizedRanges.length){const a=this._normalizedRanges[i],l=e._normalizedRanges[n];a.startLineNumber<l.startLineNumber?(o=a,i++):(o=l,n++)}else i<this._normalizedRanges.length?(o=this._normalizedRanges[i],i++):(o=e._normalizedRanges[n],n++);r===null?r=o:r.endLineNumberExclusive>=o.startLineNumber?r=new dt(r.startLineNumber,Math.max(r.endLineNumberExclusive,o.endLineNumberExclusive)):(t.push(r),r=o)}return r!==null&&t.push(r),new Vo(t)}subtractFrom(e){const t=N3(this._normalizedRanges,o=>o.endLineNumberExclusive>=e.startLineNumber),i=l_(this._normalizedRanges,o=>o.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)return new Vo([e]);const n=[];let r=e.startLineNumber;for(let o=t;o<i;o++){const a=this._normalizedRanges[o];a.startLineNumber>r&&n.push(new dt(r,a.startLineNumber)),r=a.endLineNumberExclusive}return r<e.endLineNumberExclusive&&n.push(new dt(r,e.endLineNumberExclusive)),new Vo(n)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){const t=[];let i=0,n=0;for(;i<this._normalizedRanges.length&&n<e._normalizedRanges.length;){const r=this._normalizedRanges[i],o=e._normalizedRanges[n],a=r.intersect(o);a&&!a.isEmpty&&t.push(a),r.endLineNumberExclusive<o.endLineNumberExclusive?i++:n++}return new Vo(t)}getWithDelta(e){return new Vo(this._normalizedRanges.map(t=>t.delta(e)))}}const ih=class ih{static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new ih(0,t.column-e.column):new ih(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return ih.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,i=0;for(const n of e)n===`
`?(t++,i=0):i++;return new ih(t,i)}constructor(e,t){this.lineCount=e,this.columnCount=t}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}createRange(e){return this.lineCount===0?new Q(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new Q(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}addToPosition(e){return this.lineCount===0?new ce(e.lineNumber,e.column+this.columnCount):new ce(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}};ih.zero=new ih(0,0);let Ph=ih;class nte{constructor(e){this.text=e,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new yt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}get textLength(){const e=this.lineStartOffsetByLineIdx.length-1;return new Ph(e,this.text.length-this.lineStartOffsetByLineIdx[e])}}class ste{constructor(e){this.edits=e,Tf(()=>I8(e,(t,i)=>t.range.getEndPosition().isBeforeOrEqual(i.range.getStartPosition())))}apply(e){let t="",i=new ce(1,1);for(const r of this.edits){const o=r.range,a=o.getStartPosition(),l=o.getEndPosition(),c=TR(i,a);c.isEmpty()||(t+=e.getValueOfRange(c)),t+=r.text,i=l}const n=TR(i,e.endPositionExclusive);return n.isEmpty()||(t+=e.getValueOfRange(n)),t}applyToString(e){const t=new ote(e);return this.apply(t)}getNewRanges(){const e=[];let t=0,i=0,n=0;for(const r of this.edits){const o=Ph.ofText(r.text),a=ce.lift({lineNumber:r.range.startLineNumber+i,column:r.range.startColumn+(r.range.startLineNumber===t?n:0)}),l=o.createRange(a);e.push(l),i=l.endLineNumber-r.range.endLineNumber,n=l.endColumn-r.range.endColumn,t=r.range.endLineNumber}return e}}class rte{constructor(e,t){this.range=e,this.text=t}toSingleEditOperation(){return{range:this.range,text:this.text}}}function TR(s,e){if(s.lineNumber===e.lineNumber&&s.column===Number.MAX_SAFE_INTEGER)return Q.fromPositions(e,e);if(!s.isBeforeOrEqual(e))throw new ri("start must be before end");return new Q(s.lineNumber,s.column,e.lineNumber,e.column)}class xV{get endPositionExclusive(){return this.length.addToPosition(new ce(1,1))}}class ote extends xV{constructor(e){super(),this.value=e,this._t=new nte(this.value)}getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}}class js{static inverse(e,t,i){const n=[];let r=1,o=1;for(const l of e){const c=new js(new dt(r,l.original.startLineNumber),new dt(o,l.modified.startLineNumber));c.modified.isEmpty||n.push(c),r=l.original.endLineNumberExclusive,o=l.modified.endLineNumberExclusive}const a=new js(new dt(r,t+1),new dt(o,i+1));return a.modified.isEmpty||n.push(a),n}static clip(e,t,i){const n=[];for(const r of e){const o=r.original.intersect(t),a=r.modified.intersect(i);o&&!o.isEmpty&&a&&!a.isEmpty&&n.push(new js(o,a))}return n}constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new js(this.modified,this.original)}join(e){return new js(this.original.join(e.original),this.modified.join(e.modified))}toRangeMapping(){const e=this.original.toInclusiveRange(),t=this.modified.toInclusiveRange();if(e&&t)return new go(e,t);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new ri("not a valid diff");return new go(new Q(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new Q(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new go(new Q(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new Q(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,t){if(NR(this.original.endLineNumberExclusive,e)&&NR(this.modified.endLineNumberExclusive,t))return new go(new Q(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new Q(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new go(Q.fromPositions(new ce(this.original.startLineNumber,1),Ng(new ce(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),Q.fromPositions(new ce(this.modified.startLineNumber,1),Ng(new ce(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new go(Q.fromPositions(Ng(new ce(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),Ng(new ce(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),Q.fromPositions(Ng(new ce(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),t),Ng(new ce(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));throw new ri}}function Ng(s,e){if(s.lineNumber<1)return new ce(1,1);if(s.lineNumber>e.length)return new ce(e.length,e[e.length-1].length+1);const t=e[s.lineNumber-1];return s.column>t.length+1?new ce(s.lineNumber,t.length+1):s}function NR(s,e){return s>=1&&s<=e.length}class yo extends js{static fromRangeMappings(e){const t=dt.join(e.map(n=>dt.fromRangeInclusive(n.originalRange))),i=dt.join(e.map(n=>dt.fromRangeInclusive(n.modifiedRange)));return new yo(t,i,e)}constructor(e,t,i){super(e,t),this.innerChanges=i}flip(){return new yo(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new yo(this.original,this.modified,[this.toRangeMapping()])}}class go{static assertSorted(e){for(let t=1;t<e.length;t++){const i=e[t-1],n=e[t];if(!(i.originalRange.getEndPosition().isBeforeOrEqual(n.originalRange.getStartPosition())&&i.modifiedRange.getEndPosition().isBeforeOrEqual(n.modifiedRange.getStartPosition())))throw new ri("Range mappings must be sorted")}}constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new go(this.modifiedRange,this.originalRange)}toTextEdit(e){const t=e.getValueOfRange(this.modifiedRange);return new rte(this.originalRange,t)}}const ate=3;class lte{computeDiff(e,t,i){const r=new hte(e,t,{maxComputationTime:i.maxComputationTimeMs,shouldIgnoreTrimWhitespace:i.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),o=[];let a=null;for(const l of r.changes){let c;l.originalEndLineNumber===0?c=new dt(l.originalStartLineNumber+1,l.originalStartLineNumber+1):c=new dt(l.originalStartLineNumber,l.originalEndLineNumber+1);let u;l.modifiedEndLineNumber===0?u=new dt(l.modifiedStartLineNumber+1,l.modifiedStartLineNumber+1):u=new dt(l.modifiedStartLineNumber,l.modifiedEndLineNumber+1);let d=new yo(c,u,l.charChanges?.map(g=>new go(new Q(g.originalStartLineNumber,g.originalStartColumn,g.originalEndLineNumber,g.originalEndColumn),new Q(g.modifiedStartLineNumber,g.modifiedStartColumn,g.modifiedEndLineNumber,g.modifiedEndColumn))));a&&(a.modified.endLineNumberExclusive===d.modified.startLineNumber||a.original.endLineNumberExclusive===d.original.startLineNumber)&&(d=new yo(a.original.join(d.original),a.modified.join(d.modified),a.innerChanges&&d.innerChanges?a.innerChanges.concat(d.innerChanges):void 0),o.pop()),o.push(d),a=d}return Tf(()=>I8(o,(l,c)=>c.original.startLineNumber-l.original.endLineNumberExclusive===c.modified.startLineNumber-l.modified.endLineNumberExclusive&&l.original.endLineNumberExclusive<c.original.startLineNumber&&l.modified.endLineNumberExclusive<c.modified.startLineNumber)),new Ww(o,[],r.quitEarly)}}function kV(s,e,t,i){return new zc(s,e,t).ComputeDiff(i)}let IR=class{constructor(e){const t=[],i=[];for(let n=0,r=e.length;n<r;n++)t[n]=I3(e[n],1),i[n]=M3(e[n],1);this.lines=e,this._startColumns=t,this._endColumns=i}getElements(){const e=[];for(let t=0,i=this.lines.length;t<i;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,i){const n=[],r=[],o=[];let a=0;for(let l=t;l<=i;l++){const c=this.lines[l],u=e?this._startColumns[l]:1,d=e?this._endColumns[l]:c.length+1;for(let g=u;g<d;g++)n[a]=c.charCodeAt(g-1),r[a]=l+1,o[a]=g,a++;!e&&l<i&&(n[a]=10,r[a]=l+1,o[a]=c.length+1,a++)}return new cte(n,r,o)}};class cte{constructor(e,t,i){this._charCodes=e,this._lineNumbers=t,this._columns=i}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}class Lm{constructor(e,t,i,n,r,o,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=i,this.originalEndColumn=n,this.modifiedStartLineNumber=r,this.modifiedStartColumn=o,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,i){const n=t.getStartLineNumber(e.originalStart),r=t.getStartColumn(e.originalStart),o=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=i.getStartLineNumber(e.modifiedStart),c=i.getStartColumn(e.modifiedStart),u=i.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),d=i.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new Lm(n,r,o,a,l,c,u,d)}}function ute(s){if(s.length<=1)return s;const e=[s[0]];let t=e[0];for(let i=1,n=s.length;i<n;i++){const r=s[i],o=r.originalStart-(t.originalStart+t.originalLength),a=r.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(o,a)<ate?(t.originalLength=r.originalStart+r.originalLength-t.originalStart,t.modifiedLength=r.modifiedStart+r.modifiedLength-t.modifiedStart):(e.push(r),t=r)}return e}class a1{constructor(e,t,i,n,r){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=n,this.charChanges=r}static createFromDiffResult(e,t,i,n,r,o,a){let l,c,u,d,g;if(t.originalLength===0?(l=i.getStartLineNumber(t.originalStart)-1,c=0):(l=i.getStartLineNumber(t.originalStart),c=i.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(u=n.getStartLineNumber(t.modifiedStart)-1,d=0):(u=n.getStartLineNumber(t.modifiedStart),d=n.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),o&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&r()){const m=i.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),_=n.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(m.getElements().length>0&&_.getElements().length>0){let v=kV(m,_,r,!0).changes;a&&(v=ute(v)),g=[];for(let w=0,y=v.length;w<y;w++)g.push(Lm.createFromDiffChange(v[w],m,_))}}return new a1(l,c,u,d,g)}}class hte{constructor(e,t,i){this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new IR(e),this.modified=new IR(t),this.continueLineDiff=MR(i.maxComputationTime),this.continueCharDiff=MR(i.maxComputationTime===0?0:Math.min(i.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=kV(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,i=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(a1.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:i,changes:a}}const n=[];let r=0,o=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,u=c?c.originalStart:this.originalLines.length,d=c?c.modifiedStart:this.modifiedLines.length;for(;r<u&&o<d;){const g=this.originalLines[r],m=this.modifiedLines[o];if(g!==m){{let _=I3(g,1),v=I3(m,1);for(;_>1&&v>1;){const w=g.charCodeAt(_-2),y=m.charCodeAt(v-2);if(w!==y)break;_--,v--}(_>1||v>1)&&this._pushTrimWhitespaceCharChange(n,r+1,1,_,o+1,1,v)}{let _=M3(g,1),v=M3(m,1);const w=g.length+1,y=m.length+1;for(;_<w&&v<y;){const S=g.charCodeAt(_-1),k=g.charCodeAt(v-1);if(S!==k)break;_++,v++}(_<w||v<y)&&this._pushTrimWhitespaceCharChange(n,r+1,_,w,o+1,v,y)}}r++,o++}c&&(n.push(a1.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),r+=c.originalLength,o+=c.modifiedLength)}return{quitEarly:i,changes:n}}_pushTrimWhitespaceCharChange(e,t,i,n,r,o,a){if(this._mergeTrimWhitespaceCharChange(e,t,i,n,r,o,a))return;let l;this.shouldComputeCharChanges&&(l=[new Lm(t,i,t,n,r,o,r,a)]),e.push(new a1(t,t,r,r,l))}_mergeTrimWhitespaceCharChange(e,t,i,n,r,o,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber===t&&c.modifiedEndLineNumber===r?(this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new Lm(t,i,t,n,r,o,r,a)),!0):c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===r?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=r,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new Lm(t,i,t,n,r,o,r,a)),!0):!1}}function I3(s,e){const t=Ur(s);return t===-1?e:t+1}function M3(s,e){const t=Vf(s);return t===-1?e:t+2}function MR(s){if(s===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<s}class nu{static trivial(e,t){return new nu([new En(yt.ofLength(e.length),yt.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new nu([new En(yt.ofLength(e.length),yt.ofLength(t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class En{static invert(e,t){const i=[];return HB(e,(n,r)=>{i.push(En.fromOffsetPairs(n?n.getEndExclusives():$c.zero,r?r.getStarts():new $c(t,(n?n.seq2Range.endExclusive-n.seq1Range.endExclusive:0)+t)))}),i}static fromOffsetPairs(e,t){return new En(new yt(e.offset1,t.offset1),new yt(e.offset2,t.offset2))}static assertSorted(e){let t;for(const i of e){if(t&&!(t.seq1Range.endExclusive<=i.seq1Range.start&&t.seq2Range.endExclusive<=i.seq2Range.start))throw new ri("Sequence diffs must be sorted");t=i}}constructor(e,t){this.seq1Range=e,this.seq2Range=t}swap(){return new En(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new En(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new En(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new En(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new En(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersect(e){const t=this.seq1Range.intersect(e.seq1Range),i=this.seq2Range.intersect(e.seq2Range);if(!(!t||!i))return new En(t,i)}getStarts(){return new $c(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new $c(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}const Gd=class Gd{constructor(e,t){this.offset1=e,this.offset2=t}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new Gd(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}};Gd.zero=new Gd(0,0),Gd.max=new Gd(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);let $c=Gd;const pS=class pS{isValid(){return!0}};pS.instance=new pS;let c_=pS;class dte{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new ri("timeout must be positive")}isValid(){if(!(Date.now()-this.startTime<this.timeout)&&this.valid){this.valid=!1;debugger}return this.valid}}class Ak{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,i){this.array[e+t*this.width]=i}}function R3(s){return s===32||s===9}const F1=class F1{static getKey(e){let t=this.chrKeys.get(e);return t===void 0&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}constructor(e,t,i){this.range=e,this.lines=t,this.source=i,this.histogram=[];let n=0;for(let r=e.startLineNumber-1;r<e.endLineNumberExclusive-1;r++){const o=t[r];for(let l=0;l<o.length;l++){n++;const c=o[l],u=F1.getKey(c);this.histogram[u]=(this.histogram[u]||0)+1}n++;const a=F1.getKey(`
`);this.histogram[a]=(this.histogram[a]||0)+1}this.totalCount=n}computeSimilarity(e){let t=0;const i=Math.max(this.histogram.length,e.histogram.length);for(let n=0;n<i;n++)t+=Math.abs((this.histogram[n]??0)-(e.histogram[n]??0));return 1-t/(this.totalCount+e.totalCount)}};F1.chrKeys=new Map;let AC=F1;class fte{compute(e,t,i=c_.instance,n){if(e.length===0||t.length===0)return nu.trivial(e,t);const r=new Ak(e.length,t.length),o=new Ak(e.length,t.length),a=new Ak(e.length,t.length);for(let _=0;_<e.length;_++)for(let v=0;v<t.length;v++){if(!i.isValid())return nu.trivialTimedOut(e,t);const w=_===0?0:r.get(_-1,v),y=v===0?0:r.get(_,v-1);let S;e.getElement(_)===t.getElement(v)?(_===0||v===0?S=0:S=r.get(_-1,v-1),_>0&&v>0&&o.get(_-1,v-1)===3&&(S+=a.get(_-1,v-1)),S+=n?n(_,v):1):S=-1;const k=Math.max(w,y,S);if(k===S){const L=_>0&&v>0?a.get(_-1,v-1):0;a.set(_,v,L+1),o.set(_,v,3)}else k===w?(a.set(_,v,0),o.set(_,v,1)):k===y&&(a.set(_,v,0),o.set(_,v,2));r.set(_,v,k)}const l=[];let c=e.length,u=t.length;function d(_,v){(_+1!==c||v+1!==u)&&l.push(new En(new yt(_+1,c),new yt(v+1,u))),c=_,u=v}let g=e.length-1,m=t.length-1;for(;g>=0&&m>=0;)o.get(g,m)===3?(d(g,m),g--,m--):o.get(g,m)===1?g--:m--;return d(-1,-1),l.reverse(),new nu(l,!1)}}class LV{compute(e,t,i=c_.instance){if(e.length===0||t.length===0)return nu.trivial(e,t);const n=e,r=t;function o(v,w){for(;v<n.length&&w<r.length&&n.getElement(v)===r.getElement(w);)v++,w++;return v}let a=0;const l=new gte;l.set(0,o(0,0));const c=new mte;c.set(0,l.get(0)===0?null:new RR(null,0,0,l.get(0)));let u=0;e:for(;;){if(a++,!i.isValid())return nu.trivialTimedOut(n,r);const v=-Math.min(a,r.length+a%2),w=Math.min(a,n.length+a%2);for(u=v;u<=w;u+=2){const y=u===w?-1:l.get(u+1),S=u===v?-1:l.get(u-1)+1,k=Math.min(Math.max(y,S),n.length),L=k-u;if(k>n.length||L>r.length)continue;const T=o(k,L);l.set(u,T);const A=k===y?c.get(u+1):c.get(u-1);if(c.set(u,T!==k?new RR(A,k,L,T-k):A),l.get(u)===n.length&&l.get(u)-u===r.length)break e}}let d=c.get(u);const g=[];let m=n.length,_=r.length;for(;;){const v=d?d.x+d.length:0,w=d?d.y+d.length:0;if((v!==m||w!==_)&&g.push(new En(new yt(v,m),new yt(w,_))),!d)break;m=d.x,_=d.y,d=d.prev}return g.reverse(),new nu(g,!1)}}class RR{constructor(e,t,i,n){this.prev=e,this.x=t,this.y=i,this.length=n}}class gte{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const i=this.negativeArr;this.negativeArr=new Int32Array(i.length*2),this.negativeArr.set(i)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const i=this.positiveArr;this.positiveArr=new Int32Array(i.length*2),this.positiveArr.set(i)}this.positiveArr[e]=t}}}class mte{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}class PC{constructor(e,t,i){this.lines=e,this.range=t,this.considerWhitespaceChanges=i,this.elements=[],this.firstElementOffsetByLineIdx=[],this.lineStartOffsets=[],this.trimmedWsLengthsByLineIdx=[],this.firstElementOffsetByLineIdx.push(0);for(let n=this.range.startLineNumber;n<=this.range.endLineNumber;n++){let r=e[n-1],o=0;n===this.range.startLineNumber&&this.range.startColumn>1&&(o=this.range.startColumn-1,r=r.substring(o)),this.lineStartOffsets.push(o);let a=0;if(!i){const c=r.trimStart();a=r.length-c.length,r=c.trimEnd()}this.trimmedWsLengthsByLineIdx.push(a);const l=n===this.range.endLineNumber?Math.min(this.range.endColumn-1-o-a,r.length):r.length;for(let c=0;c<l;c++)this.elements.push(r.charCodeAt(c));n<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new yt(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(t=>String.fromCharCode(t)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=PR(e>0?this.elements[e-1]:-1),i=PR(e<this.elements.length?this.elements[e]:-1);if(t===7&&i===8)return 0;if(t===8)return 150;let n=0;return t!==i&&(n+=10,t===0&&i===1&&(n+=1)),n+=AR(t),n+=AR(i),n}translateOffset(e,t="right"){const i=l_(this.firstElementOffsetByLineIdx,r=>r<=e),n=e-this.firstElementOffsetByLineIdx[i];return new ce(this.range.startLineNumber+i,1+this.lineStartOffsets[i]+n+(n===0&&t==="left"?0:this.trimmedWsLengthsByLineIdx[i]))}translateRange(e){const t=this.translateOffset(e.start,"right"),i=this.translateOffset(e.endExclusive,"left");return i.isBefore(t)?Q.fromPositions(i,i):Q.fromPositions(t,i)}findWordContaining(e){if(e<0||e>=this.elements.length||!Pk(this.elements[e]))return;let t=e;for(;t>0&&Pk(this.elements[t-1]);)t--;let i=e;for(;i<this.elements.length&&Pk(this.elements[i]);)i++;return new yt(t,i)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){const t=np(this.firstElementOffsetByLineIdx,n=>n<=e.start)??0,i=Jee(this.firstElementOffsetByLineIdx,n=>e.endExclusive<=n)??this.elements.length;return new yt(t,i)}}function Pk(s){return s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57}const pte={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function AR(s){return pte[s]}function PR(s){return s===10?8:s===13?7:R3(s)?6:s>=97&&s<=122?0:s>=65&&s<=90?1:s>=48&&s<=57?2:s===-1?3:s===44||s===59?5:4}function _te(s,e,t,i,n,r){let{moves:o,excludedChanges:a}=bte(s,e,t,r);if(!r.isValid())return[];const l=s.filter(u=>!a.has(u)),c=wte(l,i,n,e,t,r);return qL(o,c),o=Cte(o),o=o.filter(u=>{const d=u.original.toOffsetRange().slice(e).map(m=>m.trim());return d.join(`
`).length>=15&&vte(d,m=>m.length>=2)>=2}),o=yte(s,o),o}function vte(s,e){let t=0;for(const i of s)e(i)&&t++;return t}function bte(s,e,t,i){const n=[],r=s.filter(l=>l.modified.isEmpty&&l.original.length>=3).map(l=>new AC(l.original,e,l)),o=new Set(s.filter(l=>l.original.isEmpty&&l.modified.length>=3).map(l=>new AC(l.modified,t,l))),a=new Set;for(const l of r){let c=-1,u;for(const d of o){const g=l.computeSimilarity(d);g>c&&(c=g,u=d)}if(c>.9&&u&&(o.delete(u),n.push(new js(l.range,u.range)),a.add(l.source),a.add(u.source)),!i.isValid())return{moves:n,excludedChanges:a}}return{moves:n,excludedChanges:a}}function wte(s,e,t,i,n,r){const o=[],a=new CV;for(const g of s)for(let m=g.original.startLineNumber;m<g.original.endLineNumberExclusive-2;m++){const _=`${e[m-1]}:${e[m+1-1]}:${e[m+2-1]}`;a.add(_,{range:new dt(m,m+3)})}const l=[];s.sort(ma(g=>g.modified.startLineNumber,Sh));for(const g of s){let m=[];for(let _=g.modified.startLineNumber;_<g.modified.endLineNumberExclusive-2;_++){const v=`${t[_-1]}:${t[_+1-1]}:${t[_+2-1]}`,w=new dt(_,_+3),y=[];a.forEach(v,({range:S})=>{for(const L of m)if(L.originalLineRange.endLineNumberExclusive+1===S.endLineNumberExclusive&&L.modifiedLineRange.endLineNumberExclusive+1===w.endLineNumberExclusive){L.originalLineRange=new dt(L.originalLineRange.startLineNumber,S.endLineNumberExclusive),L.modifiedLineRange=new dt(L.modifiedLineRange.startLineNumber,w.endLineNumberExclusive),y.push(L);return}const k={modifiedLineRange:w,originalLineRange:S};l.push(k),y.push(k)}),m=y}if(!r.isValid())return[]}l.sort(kZ(ma(g=>g.modifiedLineRange.length,Sh)));const c=new Vo,u=new Vo;for(const g of l){const m=g.modifiedLineRange.startLineNumber-g.originalLineRange.startLineNumber,_=c.subtractFrom(g.modifiedLineRange),v=u.subtractFrom(g.originalLineRange).getWithDelta(m),w=_.getIntersection(v);for(const y of w.ranges){if(y.length<3)continue;const S=y,k=y.delta(-m);o.push(new js(k,S)),c.addRange(S),u.addRange(k)}}o.sort(ma(g=>g.original.startLineNumber,Sh));const d=new RC(s);for(let g=0;g<o.length;g++){const m=o[g],_=d.findLastMonotonous(A=>A.original.startLineNumber<=m.original.startLineNumber),v=np(s,A=>A.modified.startLineNumber<=m.modified.startLineNumber),w=Math.max(m.original.startLineNumber-_.original.startLineNumber,m.modified.startLineNumber-v.modified.startLineNumber),y=d.findLastMonotonous(A=>A.original.startLineNumber<m.original.endLineNumberExclusive),S=np(s,A=>A.modified.startLineNumber<m.modified.endLineNumberExclusive),k=Math.max(y.original.endLineNumberExclusive-m.original.endLineNumberExclusive,S.modified.endLineNumberExclusive-m.modified.endLineNumberExclusive);let L;for(L=0;L<w;L++){const A=m.original.startLineNumber-L-1,I=m.modified.startLineNumber-L-1;if(A>i.length||I>n.length||c.contains(I)||u.contains(A)||!OR(i[A-1],n[I-1],r))break}L>0&&(u.addRange(new dt(m.original.startLineNumber-L,m.original.startLineNumber)),c.addRange(new dt(m.modified.startLineNumber-L,m.modified.startLineNumber)));let T;for(T=0;T<k;T++){const A=m.original.endLineNumberExclusive+T,I=m.modified.endLineNumberExclusive+T;if(A>i.length||I>n.length||c.contains(I)||u.contains(A)||!OR(i[A-1],n[I-1],r))break}T>0&&(u.addRange(new dt(m.original.endLineNumberExclusive,m.original.endLineNumberExclusive+T)),c.addRange(new dt(m.modified.endLineNumberExclusive,m.modified.endLineNumberExclusive+T))),(L>0||T>0)&&(o[g]=new js(new dt(m.original.startLineNumber-L,m.original.endLineNumberExclusive+T),new dt(m.modified.startLineNumber-L,m.modified.endLineNumberExclusive+T)))}return o}function OR(s,e,t){if(s.trim()===e.trim())return!0;if(s.length>300&&e.length>300)return!1;const n=new LV().compute(new PC([s],new Q(1,1,1,s.length),!1),new PC([e],new Q(1,1,1,e.length),!1),t);let r=0;const o=En.invert(n.diffs,s.length);for(const u of o)u.seq1Range.forEach(d=>{R3(s.charCodeAt(d))||r++});function a(u){let d=0;for(let g=0;g<s.length;g++)R3(u.charCodeAt(g))||d++;return d}const l=a(s.length>e.length?s:e);return r/l>.6&&l>10}function Cte(s){if(s.length===0)return s;s.sort(ma(t=>t.original.startLineNumber,Sh));const e=[s[0]];for(let t=1;t<s.length;t++){const i=e[e.length-1],n=s[t],r=n.original.startLineNumber-i.original.endLineNumberExclusive,o=n.modified.startLineNumber-i.modified.endLineNumberExclusive;if(r>=0&&o>=0&&r+o<=2){e[e.length-1]=i.join(n);continue}e.push(n)}return e}function yte(s,e){const t=new RC(s);return e=e.filter(i=>{const n=t.findLastMonotonous(a=>a.original.startLineNumber<i.original.endLineNumberExclusive)||new js(new dt(1,1),new dt(1,1)),r=np(s,a=>a.modified.startLineNumber<i.modified.endLineNumberExclusive);return n!==r}),e}function A3(s,e,t){let i=t;return i=FR(s,e,i),i=FR(s,e,i),i=Ste(s,e,i),i}function FR(s,e,t){if(t.length===0)return t;const i=[];i.push(t[0]);for(let r=1;r<t.length;r++){const o=i[i.length-1];let a=t[r];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=a.seq1Range.start-o.seq1Range.endExclusive;let c;for(c=1;c<=l&&!(s.getElement(a.seq1Range.start-c)!==s.getElement(a.seq1Range.endExclusive-c)||e.getElement(a.seq2Range.start-c)!==e.getElement(a.seq2Range.endExclusive-c));c++);if(c--,c===l){i[i.length-1]=new En(new yt(o.seq1Range.start,a.seq1Range.endExclusive-l),new yt(o.seq2Range.start,a.seq2Range.endExclusive-l));continue}a=a.delta(-c)}i.push(a)}const n=[];for(let r=0;r<i.length-1;r++){const o=i[r+1];let a=i[r];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=o.seq1Range.start-a.seq1Range.endExclusive;let c;for(c=0;c<l&&!(!s.isStronglyEqual(a.seq1Range.start+c,a.seq1Range.endExclusive+c)||!e.isStronglyEqual(a.seq2Range.start+c,a.seq2Range.endExclusive+c));c++);if(c===l){i[r+1]=new En(new yt(a.seq1Range.start+l,o.seq1Range.endExclusive),new yt(a.seq2Range.start+l,o.seq2Range.endExclusive));continue}c>0&&(a=a.delta(c))}n.push(a)}return i.length>0&&n.push(i[i.length-1]),n}function Ste(s,e,t){if(!s.getBoundaryScore||!e.getBoundaryScore)return t;for(let i=0;i<t.length;i++){const n=i>0?t[i-1]:void 0,r=t[i],o=i+1<t.length?t[i+1]:void 0,a=new yt(n?n.seq1Range.endExclusive+1:0,o?o.seq1Range.start-1:s.length),l=new yt(n?n.seq2Range.endExclusive+1:0,o?o.seq2Range.start-1:e.length);r.seq1Range.isEmpty?t[i]=BR(r,s,e,a,l):r.seq2Range.isEmpty&&(t[i]=BR(r.swap(),e,s,l,a).swap())}return t}function BR(s,e,t,i,n){let o=1;for(;s.seq1Range.start-o>=i.start&&s.seq2Range.start-o>=n.start&&t.isStronglyEqual(s.seq2Range.start-o,s.seq2Range.endExclusive-o)&&o<100;)o++;o--;let a=0;for(;s.seq1Range.start+a<i.endExclusive&&s.seq2Range.endExclusive+a<n.endExclusive&&t.isStronglyEqual(s.seq2Range.start+a,s.seq2Range.endExclusive+a)&&a<100;)a++;if(o===0&&a===0)return s;let l=0,c=-1;for(let u=-o;u<=a;u++){const d=s.seq2Range.start+u,g=s.seq2Range.endExclusive+u,m=s.seq1Range.start+u,_=e.getBoundaryScore(m)+t.getBoundaryScore(d)+t.getBoundaryScore(g);_>c&&(c=_,l=u)}return s.delta(l)}function xte(s,e,t){const i=[];for(const n of t){const r=i[i.length-1];if(!r){i.push(n);continue}n.seq1Range.start-r.seq1Range.endExclusive<=2||n.seq2Range.start-r.seq2Range.endExclusive<=2?i[i.length-1]=new En(r.seq1Range.join(n.seq1Range),r.seq2Range.join(n.seq2Range)):i.push(n)}return i}function kte(s,e,t){const i=En.invert(t,s.length),n=[];let r=new $c(0,0);function o(l,c){if(l.offset1<r.offset1||l.offset2<r.offset2)return;const u=s.findWordContaining(l.offset1),d=e.findWordContaining(l.offset2);if(!u||!d)return;let g=new En(u,d);const m=g.intersect(c);let _=m.seq1Range.length,v=m.seq2Range.length;for(;i.length>0;){const w=i[0];if(!(w.seq1Range.intersects(g.seq1Range)||w.seq2Range.intersects(g.seq2Range)))break;const S=s.findWordContaining(w.seq1Range.start),k=e.findWordContaining(w.seq2Range.start),L=new En(S,k),T=L.intersect(w);if(_+=T.seq1Range.length,v+=T.seq2Range.length,g=g.join(L),g.seq1Range.endExclusive>=w.seq1Range.endExclusive)i.shift();else break}_+v<(g.seq1Range.length+g.seq2Range.length)*2/3&&n.push(g),r=g.getEndExclusives()}for(;i.length>0;){const l=i.shift();l.seq1Range.isEmpty||(o(l.getStarts(),l),o(l.getEndExclusives().delta(-1),l))}return Lte(t,n)}function Lte(s,e){const t=[];for(;s.length>0||e.length>0;){const i=s[0],n=e[0];let r;i&&(!n||i.seq1Range.start<n.seq1Range.start)?r=s.shift():r=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=r.seq1Range.start?t[t.length-1]=t[t.length-1].join(r):t.push(r)}return t}function Dte(s,e,t){let i=t;if(i.length===0)return i;let n=0,r;do{r=!1;const a=[i[0]];for(let l=1;l<i.length;l++){let d=function(m,_){const v=new yt(u.seq1Range.endExclusive,c.seq1Range.start);return s.getText(v).replace(/\s/g,"").length<=4&&(m.seq1Range.length+m.seq2Range.length>5||_.seq1Range.length+_.seq2Range.length>5)};var o=d;const c=i[l],u=a[a.length-1];d(u,c)?(r=!0,a[a.length-1]=a[a.length-1].join(c)):a.push(c)}i=a}while(n++<10&&r);return i}function Ete(s,e,t){let i=t;if(i.length===0)return i;let n=0,r;do{r=!1;const l=[i[0]];for(let c=1;c<i.length;c++){let g=function(_,v){const w=new yt(d.seq1Range.endExclusive,u.seq1Range.start);if(s.countLinesIn(w)>5||w.length>500)return!1;const S=s.getText(w).trim();if(S.length>20||S.split(/\r\n|\r|\n/).length>1)return!1;const k=s.countLinesIn(_.seq1Range),L=_.seq1Range.length,T=e.countLinesIn(_.seq2Range),A=_.seq2Range.length,I=s.countLinesIn(v.seq1Range),O=v.seq1Range.length,F=e.countLinesIn(v.seq2Range),J=v.seq2Range.length,Y=2*40+50;function G(ie){return Math.min(ie,Y)}return Math.pow(Math.pow(G(k*40+L),1.5)+Math.pow(G(T*40+A),1.5),1.5)+Math.pow(Math.pow(G(I*40+O),1.5)+Math.pow(G(F*40+J),1.5),1.5)>(Y**1.5)**1.5*1.3};var a=g;const u=i[c],d=l[l.length-1];g(d,u)?(r=!0,l[l.length-1]=l[l.length-1].join(u)):l.push(u)}i=l}while(n++<10&&r);const o=[];return wZ(i,(l,c,u)=>{let d=c;function g(S){return S.length>0&&S.trim().length<=3&&c.seq1Range.length+c.seq2Range.length>100}const m=s.extendToFullLines(c.seq1Range),_=s.getText(new yt(m.start,c.seq1Range.start));g(_)&&(d=d.deltaStart(-_.length));const v=s.getText(new yt(c.seq1Range.endExclusive,m.endExclusive));g(v)&&(d=d.deltaEnd(v.length));const w=En.fromOffsetPairs(l?l.getEndExclusives():$c.zero,u?u.getStarts():$c.max),y=d.intersect(w);o.length>0&&y.getStarts().equals(o[o.length-1].getEndExclusives())?o[o.length-1]=o[o.length-1].join(y):o.push(y)}),o}class WR{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=e===0?0:VR(this.lines[e-1]),i=e===this.lines.length?0:VR(this.lines[e]);return 1e3-(t+i)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function VR(s){let e=0;for(;e<s.length&&(s.charCodeAt(e)===32||s.charCodeAt(e)===9);)e++;return e}class DV{constructor(){this.dynamicProgrammingDiffing=new fte,this.myersDiffingAlgorithm=new LV}computeDiff(e,t,i){if(e.length<=1&&Rn(e,t,(T,A)=>T===A))return new Ww([],[],!1);if(e.length===1&&e[0].length===0||t.length===1&&t[0].length===0)return new Ww([new yo(new dt(1,e.length+1),new dt(1,t.length+1),[new go(new Q(1,1,e.length,e[e.length-1].length+1),new Q(1,1,t.length,t[t.length-1].length+1))])],[],!1);const n=i.maxComputationTimeMs===0?c_.instance:new dte(i.maxComputationTimeMs),r=!i.ignoreTrimWhitespace,o=new Map;function a(T){let A=o.get(T);return A===void 0&&(A=o.size,o.set(T,A)),A}const l=e.map(T=>a(T.trim())),c=t.map(T=>a(T.trim())),u=new WR(l,e),d=new WR(c,t),g=u.length+d.length<1700?this.dynamicProgrammingDiffing.compute(u,d,n,(T,A)=>e[T]===t[A]?t[A].length===0?.1:1+Math.log(1+t[A].length):.99):this.myersDiffingAlgorithm.compute(u,d,n);let m=g.diffs,_=g.hitTimeout;m=A3(u,d,m),m=Dte(u,d,m);const v=[],w=T=>{if(r)for(let A=0;A<T;A++){const I=y+A,O=S+A;if(e[I]!==t[O]){const F=this.refineDiff(e,t,new En(new yt(I,I+1),new yt(O,O+1)),n,r);for(const J of F.mappings)v.push(J);F.hitTimeout&&(_=!0)}}};let y=0,S=0;for(const T of m){Tf(()=>T.seq1Range.start-y===T.seq2Range.start-S);const A=T.seq1Range.start-y;w(A),y=T.seq1Range.endExclusive,S=T.seq2Range.endExclusive;const I=this.refineDiff(e,t,T,n,r);I.hitTimeout&&(_=!0);for(const O of I.mappings)v.push(O)}w(e.length-y);const k=zR(v,e,t);let L=[];return i.computeMoves&&(L=this.computeMoves(k,e,t,l,c,n,r)),Tf(()=>{function T(I,O){if(I.lineNumber<1||I.lineNumber>O.length)return!1;const F=O[I.lineNumber-1];return!(I.column<1||I.column>F.length+1)}function A(I,O){return!(I.startLineNumber<1||I.startLineNumber>O.length+1||I.endLineNumberExclusive<1||I.endLineNumberExclusive>O.length+1)}for(const I of k){if(!I.innerChanges)return!1;for(const O of I.innerChanges)if(!(T(O.modifiedRange.getStartPosition(),t)&&T(O.modifiedRange.getEndPosition(),t)&&T(O.originalRange.getStartPosition(),e)&&T(O.originalRange.getEndPosition(),e)))return!1;if(!A(I.modified,t)||!A(I.original,e))return!1}return!0}),new Ww(k,L,_)}computeMoves(e,t,i,n,r,o,a){return _te(e,t,i,n,r,o).map(u=>{const d=this.refineDiff(t,i,new En(u.original.toOffsetRange(),u.modified.toOffsetRange()),o,a),g=zR(d.mappings,t,i,!0);return new yV(u,g)})}refineDiff(e,t,i,n,r){const a=Nte(i).toRangeMapping2(e,t),l=new PC(e,a.originalRange,r),c=new PC(t,a.modifiedRange,r),u=l.length+c.length<500?this.dynamicProgrammingDiffing.compute(l,c,n):this.myersDiffingAlgorithm.compute(l,c,n);let d=u.diffs;return d=A3(l,c,d),d=kte(l,c,d),d=xte(l,c,d),d=Ete(l,c,d),{mappings:d.map(m=>new go(l.translateRange(m.seq1Range),c.translateRange(m.seq2Range))),hitTimeout:u.hitTimeout}}}function zR(s,e,t,i=!1){const n=[];for(const r of ZD(s.map(o=>Tte(o,e,t)),(o,a)=>o.original.overlapOrTouch(a.original)||o.modified.overlapOrTouch(a.modified))){const o=r[0],a=r[r.length-1];n.push(new yo(o.original.join(a.original),o.modified.join(a.modified),r.map(l=>l.innerChanges[0])))}return Tf(()=>!i&&n.length>0&&(n[0].modified.startLineNumber!==n[0].original.startLineNumber||t.length-n[n.length-1].modified.endLineNumberExclusive!==e.length-n[n.length-1].original.endLineNumberExclusive)?!1:I8(n,(r,o)=>o.original.startLineNumber-r.original.endLineNumberExclusive===o.modified.startLineNumber-r.modified.endLineNumberExclusive&&r.original.endLineNumberExclusive<o.original.startLineNumber&&r.modified.endLineNumberExclusive<o.modified.startLineNumber)),n}function Tte(s,e,t){let i=0,n=0;s.modifiedRange.endColumn===1&&s.originalRange.endColumn===1&&s.originalRange.startLineNumber+i<=s.originalRange.endLineNumber&&s.modifiedRange.startLineNumber+i<=s.modifiedRange.endLineNumber&&(n=-1),s.modifiedRange.startColumn-1>=t[s.modifiedRange.startLineNumber-1].length&&s.originalRange.startColumn-1>=e[s.originalRange.startLineNumber-1].length&&s.originalRange.startLineNumber<=s.originalRange.endLineNumber+n&&s.modifiedRange.startLineNumber<=s.modifiedRange.endLineNumber+n&&(i=1);const r=new dt(s.originalRange.startLineNumber+i,s.originalRange.endLineNumber+1+n),o=new dt(s.modifiedRange.startLineNumber+i,s.modifiedRange.endLineNumber+1+n);return new yo(r,o,[s])}function Nte(s){return new js(new dt(s.seq1Range.start+1,s.seq1Range.endExclusive+1),new dt(s.seq2Range.start+1,s.seq2Range.endExclusive+1))}const HR={getLegacy:()=>new lte,getDefault:()=>new DV};function Dh(s,e){const t=Math.pow(10,e);return Math.round(s*t)/t}class Xt{constructor(e,t,i,n=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,i))|0,this.a=Dh(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class ca{constructor(e,t,i,n){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Dh(Math.max(Math.min(1,t),0),3),this.l=Dh(Math.max(Math.min(1,i),0),3),this.a=Dh(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,n=e.b/255,r=e.a,o=Math.max(t,i,n),a=Math.min(t,i,n);let l=0,c=0;const u=(a+o)/2,d=o-a;if(d>0){switch(c=Math.min(u<=.5?d/(2*u):d/(2-2*u),1),o){case t:l=(i-n)/d+(i<n?6:0);break;case i:l=(n-t)/d+2;break;case n:l=(t-i)/d+4;break}l*=60,l=Math.round(l)}return new ca(l,c,u,r)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:n,a:r}=e;let o,a,l;if(i===0)o=a=l=n;else{const c=n<.5?n*(1+i):n+i-n*i,u=2*n-c;o=ca._hue2rgb(u,c,t+1/3),a=ca._hue2rgb(u,c,t),l=ca._hue2rgb(u,c,t-1/3)}return new Xt(Math.round(o*255),Math.round(a*255),Math.round(l*255),r)}}class Gg{constructor(e,t,i,n){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Dh(Math.max(Math.min(1,t),0),3),this.v=Dh(Math.max(Math.min(1,i),0),3),this.a=Dh(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,n=e.b/255,r=Math.max(t,i,n),o=Math.min(t,i,n),a=r-o,l=r===0?0:a/r;let c;return a===0?c=0:r===t?c=((i-n)/a%6+6)%6:r===i?c=(n-t)/a+2:c=(t-i)/a+4,new Gg(Math.round(c*60),l,r,e.a)}static toRGBA(e){const{h:t,s:i,v:n,a:r}=e,o=n*i,a=o*(1-Math.abs(t/60%2-1)),l=n-o;let[c,u,d]=[0,0,0];return t<60?(c=o,u=a):t<120?(c=a,u=o):t<180?(u=o,d=a):t<240?(u=a,d=o):t<300?(c=a,d=o):t<=360&&(c=o,d=a),c=Math.round((c+l)*255),u=Math.round((u+l)*255),d=Math.round((d+l)*255),new Xt(c,u,d,r)}}const $i=class $i{static fromHex(e){return $i.Format.CSS.parseHex(e)||$i.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}get hsla(){return this._hsla?this._hsla:ca.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Gg.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof Xt)this.rgba=e;else if(e instanceof ca)this._hsla=e,this.rgba=ca.toRGBA(e);else if(e instanceof Gg)this._hsva=e,this.rgba=Gg.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&Xt.equals(this.rgba,e.rgba)&&ca.equals(this.hsla,e.hsla)&&Gg.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=$i._relativeLuminanceForComponent(this.rgba.r),t=$i._relativeLuminanceForComponent(this.rgba.g),i=$i._relativeLuminanceForComponent(this.rgba.b),n=.2126*e+.7152*t+.0722*i;return Dh(n,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i}isDarkerThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t<i}lighten(e){return new $i(new ca(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new $i(new ca(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:n,a:r}=this.rgba;return new $i(new Xt(t,i,n,r*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new $i(new Xt(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:i,b:n,a:r}=this.rgba;return new $i(new Xt(e.rgba.r-r*(e.rgba.r-t),e.rgba.g-r*(e.rgba.g-i),e.rgba.b-r*(e.rgba.b-n),1))}toString(){return this._toString||(this._toString=$i.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const n=e.getRelativeLuminance(),r=t.getRelativeLuminance();return i=i*(r-n)/r,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const n=e.getRelativeLuminance(),r=t.getRelativeLuminance();return i=i*(n-r)/n,e.darken(i)}};$i.white=new $i(new Xt(255,255,255,1)),$i.black=new $i(new Xt(0,0,0,1)),$i.red=new $i(new Xt(255,0,0,1)),$i.blue=new $i(new Xt(0,0,255,1)),$i.green=new $i(new Xt(0,255,0,1)),$i.cyan=new $i(new Xt(0,255,255,1)),$i.lightgrey=new $i(new Xt(211,211,211,1)),$i.transparent=new $i(new Xt(0,0,0,0));let Le=$i;(function(s){(function(e){(function(t){function i(m){return m.rgba.a===1?`rgb(${m.rgba.r}, ${m.rgba.g}, ${m.rgba.b})`:s.Format.CSS.formatRGBA(m)}t.formatRGB=i;function n(m){return`rgba(${m.rgba.r}, ${m.rgba.g}, ${m.rgba.b}, ${+m.rgba.a.toFixed(2)})`}t.formatRGBA=n;function r(m){return m.hsla.a===1?`hsl(${m.hsla.h}, ${(m.hsla.s*100).toFixed(2)}%, ${(m.hsla.l*100).toFixed(2)}%)`:s.Format.CSS.formatHSLA(m)}t.formatHSL=r;function o(m){return`hsla(${m.hsla.h}, ${(m.hsla.s*100).toFixed(2)}%, ${(m.hsla.l*100).toFixed(2)}%, ${m.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(m){const _=m.toString(16);return _.length!==2?"0"+_:_}function l(m){return`#${a(m.rgba.r)}${a(m.rgba.g)}${a(m.rgba.b)}`}t.formatHex=l;function c(m,_=!1){return _&&m.rgba.a===1?s.Format.CSS.formatHex(m):`#${a(m.rgba.r)}${a(m.rgba.g)}${a(m.rgba.b)}${a(Math.round(m.rgba.a*255))}`}t.formatHexA=c;function u(m){return m.isOpaque()?s.Format.CSS.formatHex(m):s.Format.CSS.formatRGBA(m)}t.format=u;function d(m){const _=m.length;if(_===0||m.charCodeAt(0)!==35)return null;if(_===7){const v=16*g(m.charCodeAt(1))+g(m.charCodeAt(2)),w=16*g(m.charCodeAt(3))+g(m.charCodeAt(4)),y=16*g(m.charCodeAt(5))+g(m.charCodeAt(6));return new s(new Xt(v,w,y,1))}if(_===9){const v=16*g(m.charCodeAt(1))+g(m.charCodeAt(2)),w=16*g(m.charCodeAt(3))+g(m.charCodeAt(4)),y=16*g(m.charCodeAt(5))+g(m.charCodeAt(6)),S=16*g(m.charCodeAt(7))+g(m.charCodeAt(8));return new s(new Xt(v,w,y,S/255))}if(_===4){const v=g(m.charCodeAt(1)),w=g(m.charCodeAt(2)),y=g(m.charCodeAt(3));return new s(new Xt(16*v+v,16*w+w,16*y+y))}if(_===5){const v=g(m.charCodeAt(1)),w=g(m.charCodeAt(2)),y=g(m.charCodeAt(3)),S=g(m.charCodeAt(4));return new s(new Xt(16*v+v,16*w+w,16*y+y,(16*S+S)/255))}return null}t.parseHex=d;function g(m){switch(m){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(s.Format||(s.Format={}))})(Le||(Le={}));function EV(s){const e=[];for(const t of s){const i=Number(t);(i||i===0&&t.replace(/\s/g,"")!=="")&&e.push(i)}return e}function B8(s,e,t,i){return{red:s/255,blue:t/255,green:e/255,alpha:i}}function L0(s,e){const t=e.index,i=e[0].length;if(!t)return;const n=s.positionAt(t);return{startLineNumber:n.lineNumber,startColumn:n.column,endLineNumber:n.lineNumber,endColumn:n.column+i}}function Ite(s,e){if(!s)return;const t=Le.Format.CSS.parseHex(e);if(t)return{range:s,color:B8(t.rgba.r,t.rgba.g,t.rgba.b,t.rgba.a)}}function jR(s,e,t){if(!s||e.length!==1)return;const n=e[0].values(),r=EV(n);return{range:s,color:B8(r[0],r[1],r[2],t?r[3]:1)}}function UR(s,e,t){if(!s||e.length!==1)return;const n=e[0].values(),r=EV(n),o=new Le(new ca(r[0],r[1]/100,r[2]/100,t?r[3]:1));return{range:s,color:B8(o.rgba.r,o.rgba.g,o.rgba.b,o.rgba.a)}}function D0(s,e){return typeof s=="string"?[...s.matchAll(e)]:s.findMatches(e)}function Mte(s){const e=[],i=D0(s,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(i.length>0)for(const n of i){const r=n.filter(c=>c!==void 0),o=r[1],a=r[2];if(!a)continue;let l;if(o==="rgb"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;l=jR(L0(s,n),D0(a,c),!1)}else if(o==="rgba"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=jR(L0(s,n),D0(a,c),!0)}else if(o==="hsl"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;l=UR(L0(s,n),D0(a,c),!1)}else if(o==="hsla"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=UR(L0(s,n),D0(a,c),!0)}else o==="#"&&(l=Ite(L0(s,n),o+a));l&&e.push(l)}return e}function Rte(s){return!s||typeof s.getValue!="function"||typeof s.positionAt!="function"?[]:Mte(s)}const $R=new RegExp("\\bMARK:\\s*(.*)$","d"),Ate=/^-+|-+$/g;function Pte(s,e){let t=[];if(e.findRegionSectionHeaders&&e.foldingRules?.markers){const i=Ote(s,e);t=t.concat(i)}if(e.findMarkSectionHeaders){const i=Fte(s);t=t.concat(i)}return t}function Ote(s,e){const t=[],i=s.getLineCount();for(let n=1;n<=i;n++){const r=s.getLineContent(n),o=r.match(e.foldingRules.markers.start);if(o){const a={startLineNumber:n,startColumn:o[0].length+1,endLineNumber:n,endColumn:r.length+1};if(a.endColumn>a.startColumn){const l={range:a,...TV(r.substring(o[0].length)),shouldBeInComments:!1};(l.text||l.hasSeparatorLine)&&t.push(l)}}}return t}function Fte(s){const e=[],t=s.getLineCount();for(let i=1;i<=t;i++){const n=s.getLineContent(i);Bte(n,i,e)}return e}function Bte(s,e,t){$R.lastIndex=0;const i=$R.exec(s);if(i){const n=i.indices[1][0]+1,r=i.indices[1][1]+1,o={startLineNumber:e,startColumn:n,endLineNumber:e,endColumn:r};if(o.endColumn>o.startColumn){const a={range:o,...TV(i[1]),shouldBeInComments:!0};(a.text||a.hasSeparatorLine)&&t.push(a)}}}function TV(s){s=s.trim();const e=s.startsWith("-");return s=s.replace(Ate,""),{text:s,hasSeparatorLine:e}}class Wte{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=Eg(e);const i=this.values,n=this.prefixSum,r=t.length;return r===0?!1:(this.values=new Uint32Array(i.length+r),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+r),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=Eg(e),t=Eg(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=Eg(e),t=Eg(t);const i=this.values,n=this.prefixSum;if(e>=i.length)return!1;const r=i.length-e;return t>=r&&(t=r),t===0?!1:(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=Eg(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.values.length-1,n=0,r=0,o=0;for(;t<=i;)if(n=t+(i-t)/2|0,r=this.prefixSum[n],o=r-this.values[n],e<o)i=n-1;else if(e>=r)t=n+1;else break;return new NV(n,e-o)}}class Vte{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],i=t>0?this._prefixSum[t-1]:0;return new NV(t,e-i)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=t2(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const i=this._values[e],n=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=n+i;for(let r=0;r<i;r++)this._indexBySum[n+r]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class NV{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class zte{constructor(e,t,i,n){this._uri=e,this._lines=t,this._eol=i,this._versionId=n,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const i of t)this._acceptDeleteRange(i.range),this._acceptInsertText(new ce(i.range.startLineNumber,i.range.startColumn),i.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let n=0;n<t;n++)i[n]=this._lines[n].length+e;this._lineStarts=new Wte(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const i=yp(t);if(i.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);const n=new Uint32Array(i.length-1);for(let r=1;r<i.length;r++)this._lines.splice(e.lineNumber+r-1,0,i[r]),n[r-1]=i[r].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,n)}}const qR=60*1e3;class Hte extends ve{constructor(e,t,i=!1){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!i){const n=new v8;n.cancelAndSet(()=>this._checkStopModelSync(),Math.round(qR/2)),this._register(n)}}dispose(){for(const e in this._syncedModels)ms(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t=!1){for(const i of e){const n=i.toString();this._syncedModels[n]||this._beginModelSync(i,t),this._syncedModels[n]&&(this._syncedModelsLastUsedTime[n]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const i in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[i]>qR&&t.push(i);for(const i of t)this._stopModelSync(i)}_beginModelSync(e,t){const i=this._modelService.getModel(e);if(!i||!t&&i.isTooLargeForSyncing())return;const n=e.toString();this._proxy.$acceptNewModel({url:i.uri.toString(),lines:i.getLinesContent(),EOL:i.getEOL(),versionId:i.getVersionId()});const r=new Qe;r.add(i.onDidChangeContent(o=>{this._proxy.$acceptModelChanged(n.toString(),o)})),r.add(i.onWillDispose(()=>{this._stopModelSync(n)})),r.add(bt(()=>{this._proxy.$acceptRemovedModel(n)})),this._syncedModels[n]=r}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],ms(t)}}class jte{constructor(){this._models=Object.create(null)}getModel(e){return this._models[e]}getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}$acceptNewModel(e){this._models[e.url]=new Ute(Et.parse(e.url),e.lines,e.EOL,e.versionId)}$acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}$acceptRemovedModel(e){this._models[e]&&delete this._models[e]}}class Ute extends zte{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let i=0;i<this._lines.length;i++){const n=this._lines[i],r=this.offsetAt(new ce(i+1,1)),o=n.matchAll(e);for(const a of o)(a.index||a.index===0)&&(a.index=a.index+r),t.push(a)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const i=X1(e.column,i8(t),this._lines[e.lineNumber-1],0);return i?new Q(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn):null}words(e){const t=this._lines,i=this._wordenize.bind(this);let n=0,r="",o=0,a=[];return{*[Symbol.iterator](){for(;;)if(o<a.length){const l=r.substring(a[o].start,a[o].end);o+=1,yield l}else if(n<t.length)r=t[n],a=i(r,e),o=0,n+=1;else break}}}getLineWords(e,t){const i=this._lines[e-1],n=this._wordenize(i,t),r=[];for(const o of n)r.push({word:i.substring(o.start,o.end),startColumn:o.start+1,endColumn:o.end+1});return r}_wordenize(e,t){const i=[];let n;for(t.lastIndex=0;(n=t.exec(e))&&n[0].length!==0;)i.push({start:n.index,end:n.index+n[0].length});return i}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,i=e.startLineNumber-1,n=e.endLineNumber-1,r=[];r.push(this._lines[i].substring(e.startColumn-1));for(let o=i+1;o<n;o++)r.push(this._lines[o]);return r.push(this._lines[n].substring(0,e.endColumn-1)),r.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,i)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),i=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||i.lineNumber!==e.endLineNumber||i.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}:e}_validatePosition(e){if(!ce.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:i}=e,n=!1;if(t<1)t=1,i=1,n=!0;else if(t>this._lines.length)t=this._lines.length,i=this._lines[t-1].length+1,n=!0;else{const r=this._lines[t-1].length+1;i<1?(i=1,n=!0):i>r&&(i=r,n=!0)}return n?{lineNumber:t,column:i}:e}}const _S=class _S{constructor(){this._workerTextModelSyncServer=new jte}dispose(){}_getModel(e){return this._workerTextModelSyncServer.getModel(e)}_getModels(){return this._workerTextModelSyncServer.getModels()}$acceptNewModel(e){this._workerTextModelSyncServer.$acceptNewModel(e)}$acceptModelChanged(e,t){this._workerTextModelSyncServer.$acceptModelChanged(e,t)}$acceptRemovedModel(e){this._workerTextModelSyncServer.$acceptRemovedModel(e)}async $computeUnicodeHighlights(e,t,i){const n=this._getModel(e);return n?Yee.computeUnicodeHighlights(n,t,i):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async $findSectionHeaders(e,t){const i=this._getModel(e);return i?Pte(i,t):[]}async $computeDiff(e,t,i,n){const r=this._getModel(e),o=this._getModel(t);return!r||!o?null:Vw.computeDiff(r,o,i,n)}static computeDiff(e,t,i,n){const r=n==="advanced"?HR.getDefault():HR.getLegacy(),o=e.getLinesContent(),a=t.getLinesContent(),l=r.computeDiff(o,a,i),c=l.changes.length>0?!1:this._modelsAreIdentical(e,t);function u(d){return d.map(g=>[g.original.startLineNumber,g.original.endLineNumberExclusive,g.modified.startLineNumber,g.modified.endLineNumberExclusive,g.innerChanges?.map(m=>[m.originalRange.startLineNumber,m.originalRange.startColumn,m.originalRange.endLineNumber,m.originalRange.endColumn,m.modifiedRange.startLineNumber,m.modifiedRange.startColumn,m.modifiedRange.endLineNumber,m.modifiedRange.endColumn])])}return{identical:c,quitEarly:l.hitTimeout,changes:u(l.changes),moves:l.moves.map(d=>[d.lineRangeMapping.original.startLineNumber,d.lineRangeMapping.original.endLineNumberExclusive,d.lineRangeMapping.modified.startLineNumber,d.lineRangeMapping.modified.endLineNumberExclusive,u(d.changes)])}}static _modelsAreIdentical(e,t){const i=e.getLineCount(),n=t.getLineCount();if(i!==n)return!1;for(let r=1;r<=i;r++){const o=e.getLineContent(r),a=t.getLineContent(r);if(o!==a)return!1}return!0}async $computeMoreMinimalEdits(e,t,i){const n=this._getModel(e);if(!n)return t;const r=[];let o;t=t.slice(0).sort((l,c)=>{if(l.range&&c.range)return Q.compareRangesUsingStarts(l.range,c.range);const u=l.range?0:1,d=c.range?0:1;return u-d});let a=0;for(let l=1;l<t.length;l++)Q.getEndPosition(t[a].range).equals(Q.getStartPosition(t[l].range))?(t[a].range=Q.fromPositions(Q.getStartPosition(t[a].range),Q.getEndPosition(t[l].range)),t[a].text+=t[l].text):(a++,t[a]=t[l]);t.length=a+1;for(let{range:l,text:c,eol:u}of t){if(typeof u=="number"&&(o=u),Q.isEmpty(l)&&!c)continue;const d=n.getValueInRange(l);if(c=c.replace(/\r\n|\n|\r/g,n.eol),d===c)continue;if(Math.max(c.length,d.length)>Vw._diffLimit){r.push({range:l,text:c});continue}const g=Nee(d,c,i),m=n.offsetAt(Q.lift(l).getStartPosition());for(const _ of g){const v=n.positionAt(m+_.originalStart),w=n.positionAt(m+_.originalStart+_.originalLength),y={text:c.substr(_.modifiedStart,_.modifiedLength),range:{startLineNumber:v.lineNumber,startColumn:v.column,endLineNumber:w.lineNumber,endColumn:w.column}};n.getValueInRange(y.range)!==y.text&&r.push(y)}}return typeof o=="number"&&r.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),r}async $computeLinks(e){const t=this._getModel(e);return t?Pee(t):null}async $computeDefaultDocumentColors(e){const t=this._getModel(e);return t?Rte(t):null}async $textualSuggest(e,t,i,n){const r=new Wf,o=new RegExp(i,n),a=new Set;e:for(const l of e){const c=this._getModel(l);if(c){for(const u of c.words(o))if(!(u===t||!isNaN(Number(u)))&&(a.add(u),a.size>Vw._suggestionsLimit))break e}}return{words:Array.from(a),duration:r.elapsed()}}async $computeWordRanges(e,t,i,n){const r=this._getModel(e);if(!r)return Object.create(null);const o=new RegExp(i,n),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=r.getLineWords(l,o);for(const u of c){if(!isNaN(Number(u.word)))continue;let d=a[u.word];d||(d=[],a[u.word]=d),d.push({startLineNumber:l,startColumn:u.startColumn,endLineNumber:l,endColumn:u.endColumn})}}return a}async $navigateValueSet(e,t,i,n,r){const o=this._getModel(e);if(!o)return null;const a=new RegExp(n,r);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=o.getValueInRange(t),c=o.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const u=o.getValueInRange(c);return E3.INSTANCE.navigateValueSet(t,l,c,u,i)}};_S._diffLimit=1e5,_S._suggestionsLimit=1e4;let P3=_S;class Vw extends P3{constructor(e,t){super(),this._host=e,this._foreignModuleFactory=t,this._foreignModule=null}async $ping(){return"pong"}$loadForeignModule(e,t,i){const o={host:IZ(i,(a,l)=>this._host.$fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(o,t),Promise.resolve(GL(this._foreignModule))):new Promise((a,l)=>{const c=u=>{this._foreignModule=u.create(o,t),a(GL(this._foreignModule))};{const u=a2.asBrowserUri(`${e}.js`).toString(!0);eZ(()=>import(`${u}`),[]).then(c).catch(l)}})}$fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(i){return Promise.reject(i)}}}typeof importScripts=="function"&&(globalThis.monaco=bW());const W8=Ut("textResourceConfigurationService"),IV=Ut("textResourcePropertiesService"),Ci=Ut("ILanguageFeaturesService");var V8=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Ad=function(s,e){return function(t,i){e(t,i,s)}};const KR=5*60*1e3;function Pd(s,e){const t=s.getModel(e);return!(!t||t.isTooLargeForSyncing())}let O3=class extends ve{constructor(e,t,i,n,r,o){super(),this._languageConfigurationService=r,this._modelService=t,this._workerManager=this._register(new F3(e,this._modelService)),this._logService=n,this._register(o.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:async(a,l)=>{if(!Pd(this._modelService,a.uri))return Promise.resolve({links:[]});const u=await(await this._workerWithResources([a.uri])).$computeLinks(a.uri.toString());return u&&{links:u}}})),this._register(o.completionProvider.register("*",new $te(this._workerManager,i,this._modelService,this._languageConfigurationService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return Pd(this._modelService,e)}async computedUnicodeHighlights(e,t,i){return(await this._workerWithResources([e])).$computeUnicodeHighlights(e.toString(),t,i)}async computeDiff(e,t,i,n){const o=await(await this._workerWithResources([e,t],!0)).$computeDiff(e.toString(),t.toString(),i,n);if(!o)return null;return{identical:o.identical,quitEarly:o.quitEarly,changes:l(o.changes),moves:o.moves.map(c=>new yV(new js(new dt(c[0],c[1]),new dt(c[2],c[3])),l(c[4])))};function l(c){return c.map(u=>new yo(new dt(u[0],u[1]),new dt(u[2],u[3]),u[4]?.map(d=>new go(new Q(d[0],d[1],d[2],d[3]),new Q(d[4],d[5],d[6],d[7])))))}}async computeMoreMinimalEdits(e,t,i=!1){if(e2(t)){if(!Pd(this._modelService,e))return Promise.resolve(t);const n=Wf.create(),r=this._workerWithResources([e]).then(o=>o.$computeMoreMinimalEdits(e.toString(),t,i));return r.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),n.elapsed())),Promise.race([r,n_(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return Pd(this._modelService,e)}async navigateValueSet(e,t,i){const n=this._modelService.getModel(e);if(!n)return null;const r=this._languageConfigurationService.getLanguageConfiguration(n.getLanguageId()).getWordDefinition(),o=r.source,a=r.flags;return(await this._workerWithResources([e])).$navigateValueSet(e.toString(),t,i,o,a)}canComputeWordRanges(e){return Pd(this._modelService,e)}async computeWordRanges(e,t){const i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);const n=this._languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition(),r=n.source,o=n.flags;return(await this._workerWithResources([e])).$computeWordRanges(e.toString(),t,r,o)}async findSectionHeaders(e,t){return(await this._workerWithResources([e])).$findSectionHeaders(e.toString(),t)}async computeDefaultDocumentColors(e){return(await this._workerWithResources([e])).$computeDefaultDocumentColors(e.toString())}async _workerWithResources(e,t=!1){return await(await this._workerManager.withWorker()).workerWithSyncedResources(e,t)}};O3=V8([Ad(1,ar),Ad(2,W8),Ad(3,ol),Ad(4,Yl),Ad(5,Ci)],O3);class $te{constructor(e,t,i,n){this.languageConfigurationService=n,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}async provideCompletionItems(e,t){const i=this._configurationService.getValue(e.uri,t,"editor");if(i.wordBasedSuggestions==="off")return;const n=[];if(i.wordBasedSuggestions==="currentDocument")Pd(this._modelService,e.uri)&&n.push(e.uri);else for(const d of this._modelService.getModels())Pd(this._modelService,d.uri)&&(d===e?n.unshift(d.uri):(i.wordBasedSuggestions==="allDocuments"||d.getLanguageId()===e.getLanguageId())&&n.push(d.uri));if(n.length===0)return;const r=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),o=e.getWordAtPosition(t),a=o?new Q(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn):Q.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),u=await(await this._workerManager.withWorker()).textualSuggest(n,o?.word,r);if(u)return{duration:u.duration,suggestions:u.words.map(d=>({kind:18,label:d,insertText:d,range:{insert:l,replace:a}}))}}}let F3=class extends ve{constructor(e,t){super(),this._workerDescriptor=e,this._modelService=t,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new C8).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(KR/2),bi),this._register(this._modelService.onModelRemoved(n=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>KR&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new OC(this._workerDescriptor,!1,this._modelService)),Promise.resolve(this._editorWorkerClient)}};F3=V8([Ad(1,ar)],F3);class qte{constructor(e){this._instance=e,this.proxy=this._instance}dispose(){this._instance.dispose()}setChannel(e,t){throw new Error("Not supported")}}let OC=class extends ve{constructor(e,t,i){super(),this._workerDescriptor=e,this._disposed=!1,this._modelService=i,this._keepIdleModels=t,this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(KJ(this._workerDescriptor)),T3.setChannel(this._worker,this._createEditorWorkerHost())}catch(e){y3(e),this._worker=this._createFallbackLocalWorker()}return this._worker}async _getProxy(){try{const e=this._getOrCreateWorker().proxy;return await e.$ping(),e}catch(e){return y3(e),this._worker=this._createFallbackLocalWorker(),this._worker.proxy}}_createFallbackLocalWorker(){return new qte(new Vw(this._createEditorWorkerHost(),null))}_createEditorWorkerHost(){return{$fhr:(e,t)=>this.fhr(e,t)}}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new Hte(e,this._modelService,this._keepIdleModels))),this._modelManager}async workerWithSyncedResources(e,t=!1){if(this._disposed)return Promise.reject(WY());const i=await this._getProxy();return this._getOrCreateModelManager(i).ensureSyncedResources(e,t),i}async textualSuggest(e,t,i){const n=await this.workerWithSyncedResources(e),r=i.source,o=i.flags;return n.$textualSuggest(e.map(a=>a.toString()),t,r,o)}dispose(){super.dispose(),this._disposed=!0}};OC=V8([Ad(2,ar)],OC);var qo;(function(s){s.DARK="dark",s.LIGHT="light",s.HIGH_CONTRAST_DARK="hcDark",s.HIGH_CONTRAST_LIGHT="hcLight"})(qo||(qo={}));function Dm(s){return s===qo.HIGH_CONTRAST_DARK||s===qo.HIGH_CONTRAST_LIGHT}function x2(s){return s===qo.DARK||s===qo.HIGH_CONTRAST_DARK}const La=Ut("themeService");function Ig(s){return{id:s}}function B3(s){switch(s){case qo.DARK:return"vs-dark";case qo.HIGH_CONTRAST_DARK:return"hc-black";case qo.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const MV={ThemingContribution:"base.contributions.theming"};class Kte{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new re}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),bt(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}const RV=new Kte;is.add(MV.ThemingContribution,RV);function _u(s){return RV.onColorThemeChange(s)}class Gte extends ve{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var Zte=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Yte=function(s,e){return function(t,i){e(t,i,s)}};let W3=class extends ve{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new re),this._onCodeEditorAdd=this._register(new re),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new re),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new re),this._onDiffEditorAdd=this._register(new re),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new re),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new zr,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(i=>i.removeDecorationsByType(e))))}setModelProperty(e,t,i){const n=e.toString();let r;this._modelProperties.has(n)?r=this._modelProperties.get(n):(r=new Map,this._modelProperties.set(n,r)),r.set(t,i)}getModelProperty(e,t){const i=e.toString();if(this._modelProperties.has(i))return this._modelProperties.get(i).get(t)}async openCodeEditor(e,t,i){for(const n of this._codeEditorOpenHandlers){const r=await n(e,t,i);if(r!==null)return r}return null}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return bt(t)}};W3=Zte([Yte(0,La)],W3);var Xte=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},GR=function(s,e){return function(t,i){e(t,i,s)}};let FC=class extends W3{constructor(e,t){super(t),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(i,n,r)=>n?this.doOpenEditor(n,i):null))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const r=t.resource.scheme;if(r===Dt.http||r===Dt.https)return QW(t.resource.toString()),e}return null}const n=t.options?t.options.selection:null;if(n)if(typeof n.endLineNumber=="number"&&typeof n.endColumn=="number")e.setSelection(n),e.revealRangeInCenter(n,1);else{const r={lineNumber:n.startLineNumber,column:n.startColumn};e.setPosition(r),e.revealPositionInCenter(r,1)}return e}findModel(e,t){const i=e.getModel();return i&&i.uri.toString()!==t.toString()?null:i}};FC=Xte([GR(0,ai),GR(1,La)],FC);Jt(An,FC,0);const qh=Ut("layoutService");var AV=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},PV=function(s,e){return function(t,i){e(t,i,s)}};let BC=class{get mainContainer(){return XD(this._codeEditorService.listCodeEditors())?.getContainerDomNode()??bi.document.body}get activeContainer(){return(this._codeEditorService.getFocusedCodeEditor()??this._codeEditorService.getActiveCodeEditor())?.getContainerDomNode()??this.mainContainer}get mainContainerDimension(){return f3(this.mainContainer)}get activeContainerDimension(){return f3(this.activeContainer)}get containers(){return YD(this._codeEditorService.listCodeEditors().map(e=>e.getContainerDomNode()))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){this._codeEditorService.getFocusedCodeEditor()?.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=Te.None,this.onDidLayoutActiveContainer=Te.None,this.onDidLayoutContainer=Te.None,this.onDidChangeActiveContainer=Te.None,this.onDidAddContainer=Te.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};BC=AV([PV(0,An)],BC);let V3=class extends BC{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};V3=AV([PV(1,An)],V3);Jt(qh,BC,1);var u_;(function(s){s[s.Ignore=0]="Ignore",s[s.Info=1]="Info",s[s.Warning=2]="Warning",s[s.Error=3]="Error"})(u_||(u_={}));(function(s){const e="error",t="warning",i="warn",n="info",r="ignore";function o(l){return l?Ug(e,l)?s.Error:Ug(t,l)||Ug(i,l)?s.Warning:Ug(n,l)?s.Info:s.Ignore:s.Ignore}s.fromValue=o;function a(l){switch(l){case s.Error:return e;case s.Warning:return t;case s.Info:return n;default:return r}}s.toString=a})(u_||(u_={}));const Cn=u_,OV=Ut("dialogService");var Qte=Cn;const al=Ut("notificationService");class Jte{}const z8=Ut("undoRedoService");class FV{constructor(e,t){this.resource=e,this.elements=t}}const gm=class gm{constructor(){this.id=gm._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};gm._ID=0,gm.None=new gm;let z3=gm;const mm=class mm{constructor(){this.id=mm._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};mm._ID=0,mm.None=new mm;let Od=mm;var eie=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},ZR=function(s,e){return function(t,i){e(t,i,s)}};function Vb(s){return s.scheme===Dt.file?s.fsPath:s.path}let BV=0;class zb{constructor(e,t,i,n,r,o,a){this.id=++BV,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=n,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class YR{constructor(e,t){this.resourceLabel=e,this.reason=t}}class XR{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,n]of this.elements)(n.reason===0?e:t).push(n.resourceLabel);const i=[];return e.length>0&&i.push(b({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&i.push(b({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),i.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class tie{constructor(e,t,i,n,r,o,a){this.id=++BV,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=i,this.groupId=n,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,i){this.removedResources||(this.removedResources=new XR),this.removedResources.has(t)||this.removedResources.set(t,new YR(e,i))}setValid(e,t,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new XR),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new YR(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class WV{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const i of this._past)t(i.actual)&&this._setElementValidFlag(i,e);for(const i of this._future)t(i.actual)&&this._setElementValidFlag(i,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let i=0,n=this._past.length;i<n;i++)t.push(this._past[i].id);for(let i=this._future.length-1;i>=0;i--)t.push(this._future[i].id);return new FV(e,t)}restoreSnapshot(e){const t=e.elements.length;let i=!0,n=0,r=-1;for(let a=0,l=this._past.length;a<l;a++,n++){const c=this._past[a];i&&(n>=t||c.id!==e.elements[n])&&(i=!1,r=0),!i&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let o=-1;for(let a=this._future.length-1;a>=0;a--,n++){const l=this._future[a];i&&(n>=t||l.id!==e.elements[n])&&(i=!1,o=a),!i&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}r!==-1&&(this._past=this._past.slice(0,r)),o!==-1&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const e=[],t=[];for(const i of this._past)e.push(i.actual);for(const i of this._future)t.push(i.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let i=this._past.length-1;i>=0;i--)if(this._past[i]===e){t.has(this.strResource)?this._past[i]=t.get(this.strResource):this._past.splice(i,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let i=this._future.length-1;i>=0;i--)if(this._future[i]===e){t.has(this.strResource)?this._future[i]=t.get(this.strResource):this._future.splice(i,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class Ok{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,i=this.editStacks.length;t<i;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const VV=new WV("","");VV.locked=!0;let H3=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const i of this._editStacks)t.push(i[1].toString());console.log(t.join(`
`))}pushElement(e,t=z3.None,i=Od.None){if(e.type===0){const n=Vb(e.resource),r=this.getUriComparisonKey(e.resource);this._pushElement(new zb(e,n,r,t.id,t.nextOrder(),i.id,i.nextOrder()))}else{const n=new Set,r=[],o=[];for(const a of e.resources){const l=Vb(a),c=this.getUriComparisonKey(a);n.has(c)||(n.add(c),r.push(l),o.push(c))}r.length===1?this._pushElement(new zb(e,r[0],o[0],t.id,t.nextOrder(),i.id,i.nextOrder())):this._pushElement(new tie(e,r,o,t.id,t.nextOrder(),i.id,i.nextOrder()))}}_pushElement(e){for(let t=0,i=e.strResources.length;t<i;t++){const n=e.resourceLabels[t],r=e.strResources[t];let o;this._editStacks.has(r)?o=this._editStacks.get(r):(o=new WV(n,r),this._editStacks.set(r,o)),o.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const i=this._editStacks.get(t);if(i.hasFutureElements())return null;const n=i.getClosestPastElement();return n?n.actual:null}return null}_splitPastWorkspaceElement(e,t){const i=e.actual.split(),n=new Map;for(const r of i){const o=Vb(r.resource),a=this.getUriComparisonKey(r.resource),l=new zb(r,o,a,0,0,0,0);n.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitPastWorkspaceElement(e,n)}}_splitFutureWorkspaceElement(e,t){const i=e.actual.split(),n=new Map;for(const r of i){const o=Vb(r.resource),a=this.getUriComparisonKey(r.resource),l=new zb(r,o,a,0,0,0,0);n.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitFutureWorkspaceElement(e,n)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,i){const n=this.getUriComparisonKey(e);this._editStacks.has(n)&&this._editStacks.get(n).setElementsValidFlag(t,i)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new FV(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const i=this._editStacks.get(t);i.restoreSnapshot(e),!i.hasPastElements()&&!i.hasFutureElements()&&(i.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[n,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.sourceId===e&&(!t||o.sourceOrder>t.sourceOrder)&&(t=o,i=n)}return[t,i]}canUndo(e){if(e instanceof Od){const[,i]=this._findClosestUndoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){_i(e);for(const i of t.strResources)this.removeElements(i);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,i,n,r){const o=this._acquireLocks(i);let a;try{a=t()}catch(l){return o(),n.dispose(),this._onError(l,e)}return a?a.then(()=>(o(),n.dispose(),r()),l=>(o(),n.dispose(),this._onError(l,e))):(o(),n.dispose(),r())}async _invokeWorkspacePrepare(e){if(typeof e.actual.prepareUndoRedo>"u")return ve.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?ve.None:t}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(ve.None);const i=e.actual.prepareUndoRedo();return i?rW(i)?t(i):i.then(n=>t(n)):t(ve.None)}_getAffectedEditStacks(e){const t=[];for(const i of e.strResources)t.push(this._editStacks.get(i)||VV);return new Ok(t)}_tryToSplitAndUndo(e,t,i,n){if(t.canSplit())return this._splitPastWorkspaceElement(t,i),this._notificationService.warn(n),new Hb(this._undo(e,0,!0));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(n),new Hb}_checkWorkspaceUndo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,b({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,b({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of i.editStacks)a.getClosestPastElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndUndo(e,t,null,b({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of i.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,t,null,b({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(e,t,null,b({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,i){const n=this._getAffectedEditStacks(t),r=this._checkWorkspaceUndo(e,t,n,!1);return r?r.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,n,i)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const i=t.getClosestPastElement();if(i){if(i===e){const n=t.getSecondClosestPastElement();if(n&&n.groupId===e.groupId)return!0}if(i.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,i,n){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let a;(function(u){u[u.All=0]="All",u[u.This=1]="This",u[u.Cancel=2]="Cancel"})(a||(a={}));const{result:l}=await this._dialogService.prompt({type:Cn.Info,message:b("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:b({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",i.editStacks.length),run:()=>a.All},{label:b({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>a.This}],cancelButton:{run:()=>a.Cancel}});if(l===a.Cancel)return;if(l===a.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const c=this._checkWorkspaceUndo(e,t,i,!1);if(c)return c.returnValue;n=!0}let r;try{r=await this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const o=this._checkWorkspaceUndo(e,t,i,!0);if(o)return r.dispose(),o.returnValue;for(const a of i.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),i,r,()=>this._continueUndoInGroup(t.groupId,n))}_resourceUndo(e,t,i){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=b({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new Ok([e]),n,()=>this._continueUndoInGroup(t.groupId,i))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[n,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.groupId===e&&(!t||o.groupOrder>t.groupOrder)&&(t=o,i=n)}return[t,i]}_continueUndoInGroup(e,t){if(!e)return;const[,i]=this._findClosestUndoElementInGroup(e);if(i)return this._undo(i,0,t)}undo(e){if(e instanceof Od){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,i){if(!this._editStacks.has(e))return;const n=this._editStacks.get(e),r=n.getClosestPastElement();if(!r)return;if(r.groupId){const[a,l]=this._findClosestUndoElementInGroup(r.groupId);if(r!==a&&l)return this._undo(l,t,i)}if((r.sourceId!==t||r.confirmBeforeUndo)&&!i)return this._confirmAndContinueUndo(e,t,r);try{return r.type===1?this._workspaceUndo(e,r,i):this._resourceUndo(n,r,i)}finally{}}async _confirmAndContinueUndo(e,t,i){if((await this._dialogService.confirm({message:b("confirmDifferentSource","Would you like to undo '{0}'?",i.label),primaryButton:b({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:b("confirmDifferentSource.no","No")})).confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[n,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.sourceId===e&&(!t||o.sourceOrder<t.sourceOrder)&&(t=o,i=n)}return[t,i]}canRedo(e){if(e instanceof Od){const[,i]=this._findClosestRedoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,i,n){if(t.canSplit())return this._splitFutureWorkspaceElement(t,i),this._notificationService.warn(n),new Hb(this._redo(e));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(n),new Hb}_checkWorkspaceRedo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,b({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,b({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of i.editStacks)a.getClosestFutureElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndRedo(e,t,null,b({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of i.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,t,null,b({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(e,t,null,b({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const i=this._getAffectedEditStacks(t),n=this._checkWorkspaceRedo(e,t,i,!1);return n?n.returnValue:this._executeWorkspaceRedo(e,t,i)}async _executeWorkspaceRedo(e,t,i){let n;try{n=await this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const r=this._checkWorkspaceRedo(e,t,i,!0);if(r)return n.dispose(),r.returnValue;for(const o of i.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),i,n,()=>this._continueRedoInGroup(t.groupId))}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=b({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new Ok([e]),i,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[n,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.groupId===e&&(!t||o.groupOrder<t.groupOrder)&&(t=o,i=n)}return[t,i]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof Od){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),i=t.getClosestFutureElement();if(i){if(i.groupId){const[n,r]=this._findClosestRedoElementInGroup(i.groupId);if(i!==n&&r)return this._redo(r)}try{return i.type===1?this._workspaceRedo(e,i):this._resourceRedo(t,i)}finally{}}}};H3=eie([ZR(0,OV),ZR(1,al)],H3);class Hb{constructor(e){this.returnValue=e}}Jt(z8,H3,1);function vr(s,e,t){return Math.min(Math.max(s,e),t)}class zV{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class iie{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}const HV=Ut("environmentService");var nie=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},QR=function(s,e){return function(t,i){e(t,i,s)}};const sie=Ut("ILanguageFeatureDebounceService");var WC;(function(s){const e=new WeakMap;let t=0;function i(n){let r=e.get(n);return r===void 0&&(r=++t,e.set(n,r)),r}s.of=i})(WC||(WC={}));class rie{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class oie{constructor(e,t,i,n,r,o){this._logService=e,this._name=t,this._registry=i,this._default=n,this._min=r,this._max=o,this._cache=new iv(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,i)=>l2(WC.of(i),t),0)}get(e){const t=this._key(e),i=this._cache.get(t);return i?vr(i.value,this._min,this._max):this.default()}update(e,t){const i=this._key(e);let n=this._cache.get(i);n||(n=new iie(6),this._cache.set(i,n));const r=vr(n.update(t),this._min,this._max);return b8(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${r}ms`),r}_overall(){const e=new zV;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return vr(e,this._min,this._max)}}let j3=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,i){const n=i?.min??50,r=i?.max??n**2,o=i?.key??void 0,a=`${WC.of(e)},${n}${o?","+o:""}`;let l=this._data.get(a);return l||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),l=new rie(n*1.5)):l=new oie(this._logService,t,e,this._overallAverage()|0||n*1.5,n,r),this._data.set(a,l)),l}_overallAverage(){const e=new zV;for(const t of this._data.values())e.update(t.default());return e.value}};j3=nie([QR(0,ol),QR(1,HV)],j3);Jt(sie,j3,1);class Ka{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let i="mtk"+this.getForeground(e);const n=this.getFontStyle(e);return n&1&&(i+=" mtki"),n&2&&(i+=" mtkb"),n&4&&(i+=" mtku"),n&8&&(i+=" mtks"),i}static getInlineStyleFromMetadata(e,t){const i=this.getForeground(e),n=this.getFontStyle(e);let r=`color: ${t[i]};`;n&1&&(r+="font-style: italic;"),n&2&&(r+="font-weight: bold;");let o="";return n&4&&(o+=" underline"),n&8&&(o+=" line-through"),o&&(r+=`text-decoration:${o};`),r}static getPresentationFromMetadata(e){const t=this.getForeground(e),i=this.getFontStyle(e);return{foreground:t,italic:!!(i&1),bold:!!(i&2),underline:!!(i&4),strikethrough:!!(i&8)}}}function sp(s){let e=0,t=0,i=0,n=0;for(let r=0,o=s.length;r<o;r++){const a=s.charCodeAt(r);a===13?(e===0&&(t=r),e++,r+1<o&&s.charCodeAt(r+1)===10?(n|=2,r++):n|=3,i=r+1):a===10&&(n|=1,e===0&&(t=r),e++,i=r+1)}return e===0&&(t=s.length),[e,t,s.length-i,n]}var aie=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Fk=function(s,e){return function(t,i){e(t,i,s)}};let U3=class{constructor(e,t,i,n){this._legend=e,this._themeService=t,this._languageService=i,this._logService=n,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new $3}getMetadata(e,t,i){const n=this._languageService.languageIdCodec.encodeLanguageId(i),r=this._hashTable.get(e,t,n);let o;if(r)o=r.metadata;else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let d=0;c>0&&d<this._legend.tokenModifiers.length;d++)c&1&&l.push(this._legend.tokenModifiers[d]),c=c>>1;const u=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,i);if(typeof u>"u")o=2147483647;else{if(o=0,typeof u.italic<"u"){const d=(u.italic?1:0)<<11;o|=d|1}if(typeof u.bold<"u"){const d=(u.bold?2:0)<<11;o|=d|2}if(typeof u.underline<"u"){const d=(u.underline?4:0)<<11;o|=d|4}if(typeof u.strikethrough<"u"){const d=(u.strikethrough?8:0)<<11;o|=d|8}if(u.foreground){const d=u.foreground<<15;o|=d|16}o===0&&(o=2147483647)}}else o=2147483647,a="not-in-legend";this._hashTable.add(e,t,n,o)}return o}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,i,n,r){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${i}: The provided start offset ${n} is outside the previous data (length ${r}).`))}};U3=aie([Fk(1,La),Fk(2,$n),Fk(3,ol)],U3);class lie{constructor(e,t,i,n){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=i,this.metadata=n,this.next=null}}const Nc=class Nc{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Nc._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Nc._SIZES.length?2/3*this._currentLength:0),this._elements=[],Nc._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let i=0;i<t;i++)e[i]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,i){return this._hash2(this._hash2(e,t),i)%this._currentLength}get(e,t,i){const n=this._hashFunc(e,t,i);let r=this._elements[n];for(;r;){if(r.tokenTypeIndex===e&&r.tokenModifierSet===t&&r.languageId===i)return r;r=r.next}return null}add(e,t,i,n){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const r=this._elements;this._currentLengthIndex++,this._currentLength=Nc._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Nc._SIZES.length?2/3*this._currentLength:0),this._elements=[],Nc._nullOutEntries(this._elements,this._currentLength);for(const o of r){let a=o;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new lie(e,t,i,n))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}};Nc._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];let $3=Nc;const cie=Ut("semanticTokensStylingService");var uie=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Bk=function(s,e){return function(t,i){e(t,i,s)}};let q3=class extends ve{constructor(e,t,i){super(),this._themeService=e,this._logService=t,this._languageService=i,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new U3(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};q3=uie([Bk(0,La),Bk(1,ol),Bk(2,$n)],q3);Jt(cie,q3,1);function $u(s){return s===47||s===92}function jV(s){return s.replace(/[\\/]/g,rn.sep)}function hie(s){return s.indexOf("/")===-1&&(s=jV(s)),/^[a-zA-Z]:(\/|$)/.test(s)&&(s="/"+s),s}function JR(s,e=rn.sep){if(!s)return"";const t=s.length,i=s.charCodeAt(0);if($u(i)){if($u(s.charCodeAt(1))&&!$u(s.charCodeAt(2))){let r=3;const o=r;for(;r<t&&!$u(s.charCodeAt(r));r++);if(o!==r&&!$u(s.charCodeAt(r+1))){for(r+=1;r<t;r++)if($u(s.charCodeAt(r)))return s.slice(0,r+1).replace(/[\\/]/g,e)}}return e}else if(die(i)&&s.charCodeAt(1)===58)return $u(s.charCodeAt(2))?s.slice(0,2)+e:s.slice(0,2);let n=s.indexOf("://");if(n!==-1){for(n+=3;n<t;n++)if($u(s.charCodeAt(n)))return s.slice(0,n+1)}return""}function K3(s,e,t,i=Lh){if(s===e)return!0;if(!s||!e||e.length>s.length)return!1;if(t){if(!h8(s,e))return!1;if(e.length===s.length)return!0;let r=e.length;return e.charAt(e.length-1)===i&&r--,s.charAt(r)===i}return e.charAt(e.length-1)!==i&&(e+=i),s.indexOf(e)===0}function die(s){return s>=65&&s<=90||s>=97&&s<=122}const jb="**",eA="/",zw="[/\\\\]",Hw="[^/\\\\]",fie=/\//g;function tA(s,e){switch(s){case 0:return"";case 1:return`${Hw}*?`;default:return`(?:${zw}|${Hw}+${zw}${e?`|${zw}${Hw}+`:""})*?`}}function iA(s,e){if(!s)return[];const t=[];let i=!1,n=!1,r="";for(const o of s){switch(o){case e:if(!i&&!n){t.push(r),r="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":n=!0;break;case"]":n=!1;break}r+=o}return r&&t.push(r),t}function UV(s){if(!s)return"";let e="";const t=iA(s,eA);if(t.every(i=>i===jb))e=".*";else{let i=!1;t.forEach((n,r)=>{if(n===jb){if(i)return;e+=tA(2,r===t.length-1)}else{let o=!1,a="",l=!1,c="";for(const u of n){if(u!=="}"&&o){a+=u;continue}if(l&&(u!=="]"||!c)){let d;u==="-"?d=u:(u==="^"||u==="!")&&!c?d="^":u===eA?d="":d=hu(u),c+=d;continue}switch(u){case"{":o=!0;continue;case"[":l=!0;continue;case"}":{const g=`(?:${iA(a,",").map(m=>UV(m)).join("|")})`;e+=g,o=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=Hw;continue;case"*":e+=tA(1);continue;default:e+=hu(u)}}r<t.length-1&&(t[r+1]!==jb||r+2<t.length)&&(e+=zw)}i=n===jb})}return e}const gie=/^\*\*\/\*\.[\w\.-]+$/,mie=/^\*\*\/([\w\.-]+)\/?$/,pie=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,_ie=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,vie=/^\*\*((\/[\w\.-]+)+)\/?$/,bie=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,nA=new iv(1e4),sA=function(){return!1},zl=function(){return null};function H8(s,e){if(!s)return zl;let t;typeof s!="string"?t=s.pattern:t=s,t=t.trim();const i=`${t}_${!!e.trimForExclusions}`;let n=nA.get(i);if(n)return rA(n,s);let r;return gie.test(t)?n=wie(t.substr(4),t):(r=mie.exec(Wk(t,e)))?n=Cie(r[1],t):(e.trimForExclusions?_ie:pie).test(t)?n=yie(t,e):(r=vie.exec(Wk(t,e)))?n=oA(r[1].substr(1),t,!0):(r=bie.exec(Wk(t,e)))?n=oA(r[1],t,!1):n=Sie(t),nA.set(i,n),rA(n,s)}function rA(s,e){if(typeof e=="string")return s;const t=function(i,n){return K3(i,e.base,!xr)?s(r2(i.substr(e.base.length),Lh),n):null};return t.allBasenames=s.allBasenames,t.allPaths=s.allPaths,t.basenames=s.basenames,t.patterns=s.patterns,t}function Wk(s,e){return e.trimForExclusions&&s.endsWith("/**")?s.substr(0,s.length-2):s}function wie(s,e){return function(t,i){return typeof t=="string"&&t.endsWith(s)?e:null}}function Cie(s,e){const t=`/${s}`,i=`\\${s}`,n=function(o,a){return typeof o!="string"?null:a?a===s?e:null:o===s||o.endsWith(t)||o.endsWith(i)?e:null},r=[s];return n.basenames=r,n.patterns=[e],n.allBasenames=r,n}function yie(s,e){const t=qV(s.slice(1,-1).split(",").map(a=>H8(a,e)).filter(a=>a!==zl),s),i=t.length;if(!i)return zl;if(i===1)return t[0];const n=function(a,l){for(let c=0,u=t.length;c<u;c++)if(t[c](a,l))return s;return null},r=t.find(a=>!!a.allBasenames);r&&(n.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(n.allPaths=o),n}function oA(s,e,t){const i=Lh===rn.sep,n=i?s:s.replace(fie,Lh),r=Lh+n,o=rn.sep+s;let a;return t?a=function(l,c){return typeof l=="string"&&(l===n||l.endsWith(r)||!i&&(l===s||l.endsWith(o)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===n||!i&&l===s)?e:null},a.allPaths=[(t?"*/":"./")+s],a}function Sie(s){try{const e=new RegExp(`^${UV(s)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?s:null}}catch{return zl}}function xie(s,e,t){return!s||typeof e!="string"?!1:$V(s)(e,void 0,t)}function $V(s,e={}){if(!s)return sA;if(typeof s=="string"||kie(s)){const t=H8(s,e);if(t===zl)return sA;const i=function(n,r){return!!t(n,r)};return t.allBasenames&&(i.allBasenames=t.allBasenames),t.allPaths&&(i.allPaths=t.allPaths),i}return Lie(s,e)}function kie(s){const e=s;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function Lie(s,e){const t=qV(Object.getOwnPropertyNames(s).map(a=>Die(a,s[a],e)).filter(a=>a!==zl)),i=t.length;if(!i)return zl;if(!t.some(a=>!!a.requiresSiblings)){if(i===1)return t[0];const a=function(u,d){let g;for(let m=0,_=t.length;m<_;m++){const v=t[m](u,d);if(typeof v=="string")return v;r3(v)&&(g||(g=[]),g.push(v))}return g?(async()=>{for(const m of g){const _=await m;if(typeof _=="string")return _}return null})():null},l=t.find(u=>!!u.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((u,d)=>d.allPaths?u.concat(d.allPaths):u,[]);return c.length&&(a.allPaths=c),a}const n=function(a,l,c){let u,d;for(let g=0,m=t.length;g<m;g++){const _=t[g];_.requiresSiblings&&c&&(l||(l=fW(a)),u||(u=l.substr(0,l.length-dX(a).length)));const v=_(a,l,u,c);if(typeof v=="string")return v;r3(v)&&(d||(d=[]),d.push(v))}return d?(async()=>{for(const g of d){const m=await g;if(typeof m=="string")return m}return null})():null},r=t.find(a=>!!a.allBasenames);r&&(n.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(n.allPaths=o),n}function Die(s,e,t){if(e===!1)return zl;const i=H8(s,t);if(i===zl)return zl;if(typeof e=="boolean")return i;if(e){const n=e.when;if(typeof n=="string"){const r=(o,a,l,c)=>{if(!c||!i(o,a))return null;const u=n.replace("$(basename)",()=>l),d=c(u);return r3(d)?d.then(g=>g?s:null):d?s:null};return r.requiresSiblings=!0,r}}return i}function qV(s,e){const t=s.filter(a=>!!a.basenames);if(t.length<2)return s;const i=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let n;if(e){n=[];for(let a=0,l=i.length;a<l;a++)n.push(e)}else n=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const r=function(a,l){if(typeof a!="string")return null;if(!l){let u;for(u=a.length;u>0;u--){const d=a.charCodeAt(u-1);if(d===47||d===92)break}l=a.substr(u)}const c=i.indexOf(l);return c!==-1?n[c]:null};r.basenames=i,r.patterns=n,r.allBasenames=i;const o=s.filter(a=>!a.basenames);return o.push(r),o}function KV(s,e,t,i,n,r){if(Array.isArray(s)){let o=0;for(const a of s){const l=KV(a,e,t,i,n,r);if(l===10)return l;l>o&&(o=l)}return o}else{if(typeof s=="string")return i?s==="*"?5:s===t?10:0:0;if(s){const{language:o,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:u}=s;if(!i&&!c)return 0;u&&n&&(e=n);let d=0;if(l)if(l===e.scheme)d=10;else if(l==="*")d=5;else return 0;if(o)if(o===t)d=10;else if(o==="*")d=Math.max(d,5);else return 0;if(u)if(u===r)d=10;else if(u==="*"&&r!==void 0)d=Math.max(d,5);else return 0;if(a){let g;if(typeof a=="string"?g=a:g={...a,base:dW(a.base)},g===e.fsPath||xie(g,e.fsPath))d=10;else return 0}return d}else return 0}}function GV(s){return typeof s=="string"?!1:Array.isArray(s)?s.every(GV):!!s.exclusive}class aA{constructor(e,t,i,n,r){this.uri=e,this.languageId=t,this.notebookUri=i,this.notebookType=n,this.recursive=r}equals(e){return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&this.notebookUri?.toString()===e.notebookUri?.toString()&&this.recursive===e.recursive}}class Fi{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new re,this.onDidChange=this._onDidChange.event}register(e,t){let i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),bt(()=>{if(i){const n=this._entries.indexOf(i);n>=0&&(this._entries.splice(n,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),i=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e,!1);const t=[];for(const i of this._entries)i._score>0&&t.push(i.provider);return t}ordered(e,t=!1){const i=[];return this._orderedForEach(e,t,n=>i.push(n.provider)),i}orderedGroups(e){const t=[];let i,n;return this._orderedForEach(e,!1,r=>{i&&n===r._score?i.push(r.provider):(n=r._score,i=[r.provider],t.push(i))}),t}_orderedForEach(e,t,i){this._updateScores(e,t);for(const n of this._entries)n._score>0&&i(n)}_updateScores(e,t){const i=this._notebookInfoResolver?.(e.uri),n=i?new aA(e.uri,e.getLanguageId(),i.uri,i.type,t):new aA(e.uri,e.getLanguageId(),void 0,void 0,t);if(!this._lastCandidate?.equals(n)){this._lastCandidate=n;for(const r of this._entries)if(r._score=KV(r.selector,n.uri,n.languageId,$ee(e),n.notebookUri,n.notebookType),GV(r.selector)&&r._score>0)if(t)r._score=0;else{for(const o of this._entries)o._score=0;r._score=1e3;break}this._entries.sort(Fi._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:H0(e.selector)&&!H0(t.selector)?1:!H0(e.selector)&&H0(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function H0(s){return typeof s=="string"?!1:Array.isArray(s)?s.some(H0):!!s.isBuiltin}class Eie{constructor(){this.referenceProvider=new Fi(this._score.bind(this)),this.renameProvider=new Fi(this._score.bind(this)),this.newSymbolNamesProvider=new Fi(this._score.bind(this)),this.codeActionProvider=new Fi(this._score.bind(this)),this.definitionProvider=new Fi(this._score.bind(this)),this.typeDefinitionProvider=new Fi(this._score.bind(this)),this.declarationProvider=new Fi(this._score.bind(this)),this.implementationProvider=new Fi(this._score.bind(this)),this.documentSymbolProvider=new Fi(this._score.bind(this)),this.inlayHintsProvider=new Fi(this._score.bind(this)),this.colorProvider=new Fi(this._score.bind(this)),this.codeLensProvider=new Fi(this._score.bind(this)),this.documentFormattingEditProvider=new Fi(this._score.bind(this)),this.documentRangeFormattingEditProvider=new Fi(this._score.bind(this)),this.onTypeFormattingEditProvider=new Fi(this._score.bind(this)),this.signatureHelpProvider=new Fi(this._score.bind(this)),this.hoverProvider=new Fi(this._score.bind(this)),this.documentHighlightProvider=new Fi(this._score.bind(this)),this.multiDocumentHighlightProvider=new Fi(this._score.bind(this)),this.selectionRangeProvider=new Fi(this._score.bind(this)),this.foldingRangeProvider=new Fi(this._score.bind(this)),this.linkProvider=new Fi(this._score.bind(this)),this.inlineCompletionsProvider=new Fi(this._score.bind(this)),this.inlineEditProvider=new Fi(this._score.bind(this)),this.completionProvider=new Fi(this._score.bind(this)),this.linkedEditingRangeProvider=new Fi(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new Fi(this._score.bind(this)),this.documentSemanticTokensProvider=new Fi(this._score.bind(this)),this.documentDropEditProvider=new Fi(this._score.bind(this)),this.documentPasteEditProvider=new Fi(this._score.bind(this))}_score(e){return this._notebookTypeResolver?.(e)}}Jt(Ci,Eie,1);function j8(s){return`--vscode-${s.replace(/\./g,"-")}`}function Ie(s){return`var(${j8(s)})`}function Tie(s,e){return`var(${j8(s)}, ${e})`}function Nie(s){return s!==null&&typeof s=="object"&&"light"in s&&"dark"in s}const ZV={ColorContribution:"base.contributions.colors"},Iie="default";class Mie{constructor(){this._onDidChangeSchema=new re,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,i,n=!1,r){const o={id:e,description:i,defaults:t,needsTransparency:n,deprecationMessage:r};this.colorsById[e]=o;const a={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return r&&(a.deprecationMessage=r),n&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage=b("transparecyRequired","This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:i,oneOf:[a,{type:"string",const:Iie,description:b("useDefault","Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const i=this.colorsById[e];if(i?.defaults){const n=Nie(i.defaults)?i.defaults[t.type]:i.defaults;return Ba(n,t)}}getColorSchema(){return this.colorSchema}toString(){const e=(t,i)=>{const n=t.indexOf(".")===-1?0:1,r=i.indexOf(".")===-1?0:1;return n!==r?n-r:t.localeCompare(i)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const k2=new Mie;is.add(ZV.ColorContribution,k2);function $(s,e,t,i,n){return k2.registerColor(s,e,t,i,n)}function Rie(s,e){switch(s.op){case 0:return Ba(s.value,e)?.darken(s.factor);case 1:return Ba(s.value,e)?.lighten(s.factor);case 2:return Ba(s.value,e)?.transparent(s.factor);case 3:{const t=Ba(s.background,e);return t?Ba(s.value,e)?.makeOpaque(t):Ba(s.value,e)}case 4:for(const t of s.values){const i=Ba(t,e);if(i)return i}return;case 6:return Ba(e.defines(s.if)?s.then:s.else,e);case 5:{const t=Ba(s.value,e);if(!t)return;const i=Ba(s.background,e);return i?t.isDarkerThan(i)?Le.getLighterColor(t,i,s.factor).transparent(s.transparency):Le.getDarkerColor(t,i,s.factor).transparent(s.transparency):t.transparent(s.factor*s.transparency)}default:throw N8()}}function Zf(s,e){return{op:0,value:s,factor:e}}function Qa(s,e){return{op:1,value:s,factor:e}}function Ot(s,e){return{op:2,value:s,factor:e}}function lA(...s){return{op:4,values:s}}function Aie(s,e,t){return{op:6,if:s,then:e,else:t}}function cA(s,e,t,i){return{op:5,value:s,background:e,factor:t,transparency:i}}function Ba(s,e){if(s!==null){if(typeof s=="string")return s[0]==="#"?Le.fromHex(s):e.getColor(s);if(s instanceof Le)return s;if(typeof s=="object")return Rie(s,e)}}const YV="vscode://schemas/workbench-colors",XV=is.as(S2.JSONContribution);XV.registerSchema(YV,k2.getColorSchema());const uA=new ir(()=>XV.notifySchemaChanged(YV),200);k2.onDidChangeSchema(()=>{uA.isScheduled()||uA.schedule()});const pi=$("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},b("foreground","Overall foreground color. This color is only used if not overridden by a component."));$("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},b("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));$("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},b("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));$("descriptionForeground",{light:"#717171",dark:Ot(pi,.7),hcDark:Ot(pi,.7),hcLight:Ot(pi,.7)},b("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const G3=$("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},b("iconForeground","The default color for icons in the workbench.")),Ul=$("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},b("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),ii=$("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},b("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),ln=$("contrastActiveBorder",{light:null,dark:null,hcDark:Ul,hcLight:Ul},b("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));$("selection.background",null,b("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));const Pie=$("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},b("textLinkForeground","Foreground color for links in text."));$("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},b("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));$("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:Le.black,hcLight:"#292929"},b("textSeparatorForeground","Color for text separators."));$("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},b("textPreformatForeground","Foreground color for preformatted text segments."));$("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},b("textPreformatBackground","Background color for preformatted text segments."));$("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},b("textBlockQuoteBackground","Background color for block quotes in text."));$("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:Le.white,hcLight:"#292929"},b("textBlockQuoteBorder","Border color for block quotes in text."));$("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:Le.black,hcLight:"#F2F2F2"},b("textCodeBlockBackground","Background color for code blocks in text."));$("sash.hoverBorder",Ul,b("sashActiveBorder","Border color of active sashes."));const jw=$("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:Le.black,hcLight:"#0F4A85"},b("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),Oie=$("badge.foreground",{dark:Le.white,light:"#333",hcDark:Le.white,hcLight:Le.white},b("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),U8=$("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},b("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),QV=$("scrollbarSlider.background",{dark:Le.fromHex("#797979").transparent(.4),light:Le.fromHex("#646464").transparent(.4),hcDark:Ot(ii,.6),hcLight:Ot(ii,.4)},b("scrollbarSliderBackground","Scrollbar slider background color.")),JV=$("scrollbarSlider.hoverBackground",{dark:Le.fromHex("#646464").transparent(.7),light:Le.fromHex("#646464").transparent(.7),hcDark:Ot(ii,.8),hcLight:Ot(ii,.8)},b("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),ez=$("scrollbarSlider.activeBackground",{dark:Le.fromHex("#BFBFBF").transparent(.4),light:Le.fromHex("#000000").transparent(.6),hcDark:ii,hcLight:ii},b("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),Fie=$("progressBar.background",{dark:Le.fromHex("#0E70C0"),light:Le.fromHex("#0E70C0"),hcDark:ii,hcLight:ii},b("progressBarBackground","Background color of the progress bar that can show for long running operations.")),tl=$("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:Le.black,hcLight:Le.white},b("editorBackground","Editor background color.")),nv=$("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:Le.white,hcLight:pi},b("editorForeground","Editor default foreground color."));$("editorStickyScroll.background",tl,b("editorStickyScrollBackground","Background color of sticky scroll in the editor"));$("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:Le.fromHex("#0F4A85").transparent(.1)},b("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor"));$("editorStickyScroll.border",{dark:null,light:null,hcDark:ii,hcLight:ii},b("editorStickyScrollBorder","Border color of sticky scroll in the editor"));$("editorStickyScroll.shadow",U8,b("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor"));const da=$("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:Le.white},b("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),L2=$("editorWidget.foreground",pi,b("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),tz=$("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:ii,hcLight:ii},b("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));$("editorWidget.resizeBorder",null,b("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget."));$("editorError.background",null,b("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const $8=$("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},b("editorError.foreground","Foreground color of error squigglies in the editor."));$("editorError.border",{dark:null,light:null,hcDark:Le.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},b("errorBorder","If set, color of double underlines for errors in the editor."));const Bie=$("editorWarning.background",null,b("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Oh=$("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},b("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),VC=$("editorWarning.border",{dark:null,light:null,hcDark:Le.fromHex("#FFCC00").transparent(.8),hcLight:Le.fromHex("#FFCC00").transparent(.8)},b("warningBorder","If set, color of double underlines for warnings in the editor."));$("editorInfo.background",null,b("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const If=$("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},b("editorInfo.foreground","Foreground color of info squigglies in the editor.")),zC=$("editorInfo.border",{dark:null,light:null,hcDark:Le.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},b("infoBorder","If set, color of double underlines for infos in the editor.")),Wie=$("editorHint.foreground",{dark:Le.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},b("editorHint.foreground","Foreground color of hint squigglies in the editor."));$("editorHint.border",{dark:null,light:null,hcDark:Le.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},b("hintBorder","If set, color of double underlines for hints in the editor."));$("editorLink.activeForeground",{dark:"#4E94CE",light:Le.blue,hcDark:Le.cyan,hcLight:"#292929"},b("activeLinkForeground","Color of active links."));const Zg=$("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},b("editorSelectionBackground","Color of the editor selection.")),Vie=$("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:Le.white},b("editorSelectionForeground","Color of the selected text for high contrast.")),iz=$("editor.inactiveSelectionBackground",{light:Ot(Zg,.5),dark:Ot(Zg,.5),hcDark:Ot(Zg,.7),hcLight:Ot(Zg,.5)},b("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),nz=$("editor.selectionHighlightBackground",{light:cA(Zg,tl,.3,.6),dark:cA(Zg,tl,.3,.6),hcDark:null,hcLight:null},b("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);$("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:ln,hcLight:ln},b("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));$("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},b("editorFindMatch","Color of the current search match."));$("editor.findMatchForeground",null,b("editorFindMatchForeground","Text color of the current search match."));const mh=$("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},b("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0);$("editor.findMatchHighlightForeground",null,b("findMatchHighlightForeground","Foreground color of the other search matches."),!0);$("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},b("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);$("editor.findMatchBorder",{light:null,dark:null,hcDark:ln,hcLight:ln},b("editorFindMatchBorder","Border color of the current search match."));const Yg=$("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:ln,hcLight:ln},b("findMatchHighlightBorder","Border color of the other search matches."));$("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:Ot(ln,.4),hcLight:Ot(ln,.4)},b("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);$("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},b("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const hA=$("editorHoverWidget.background",da,b("hoverBackground","Background color of the editor hover."));$("editorHoverWidget.foreground",L2,b("hoverForeground","Foreground color of the editor hover."));const zie=$("editorHoverWidget.border",tz,b("hoverBorder","Border color of the editor hover."));$("editorHoverWidget.statusBarBackground",{dark:Qa(hA,.2),light:Zf(hA,.05),hcDark:da,hcLight:da},b("statusBarBackground","Background color of the editor hover status bar."));const sz=$("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:Le.white,hcLight:Le.black},b("editorInlayHintForeground","Foreground color of inline hints")),rz=$("editorInlayHint.background",{dark:Ot(jw,.1),light:Ot(jw,.1),hcDark:Ot(Le.white,.1),hcLight:Ot(jw,.1)},b("editorInlayHintBackground","Background color of inline hints"));$("editorInlayHint.typeForeground",sz,b("editorInlayHintForegroundTypes","Foreground color of inline hints for types"));$("editorInlayHint.typeBackground",rz,b("editorInlayHintBackgroundTypes","Background color of inline hints for types"));$("editorInlayHint.parameterForeground",sz,b("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters"));$("editorInlayHint.parameterBackground",rz,b("editorInlayHintBackgroundParameter","Background color of inline hints for parameters"));const Hie=$("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},b("editorLightBulbForeground","The color used for the lightbulb actions icon."));$("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},b("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon."));$("editorLightBulbAi.foreground",Hie,b("editorLightBulbAiForeground","The color used for the lightbulb AI icon."));$("editor.snippetTabstopHighlightBackground",{dark:new Le(new Xt(124,124,124,.3)),light:new Le(new Xt(10,50,100,.2)),hcDark:new Le(new Xt(124,124,124,.3)),hcLight:new Le(new Xt(10,50,100,.2))},b("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));$("editor.snippetTabstopHighlightBorder",null,b("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));$("editor.snippetFinalTabstopHighlightBackground",null,b("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));$("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new Le(new Xt(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},b("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));const Z3=new Le(new Xt(155,185,85,.2)),Y3=new Le(new Xt(255,0,0,.2)),jie=$("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},b("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Uie=$("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},b("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);$("diffEditor.insertedLineBackground",{dark:Z3,light:Z3,hcDark:null,hcLight:null},b("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);$("diffEditor.removedLineBackground",{dark:Y3,light:Y3,hcDark:null,hcLight:null},b("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);$("diffEditorGutter.insertedLineBackground",null,b("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted."));$("diffEditorGutter.removedLineBackground",null,b("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));const $ie=$("diffEditorOverview.insertedForeground",null,b("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),qie=$("diffEditorOverview.removedForeground",null,b("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));$("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},b("diffEditorInsertedOutline","Outline color for the text that got inserted."));$("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},b("diffEditorRemovedOutline","Outline color for text that got removed."));$("diffEditor.border",{dark:null,light:null,hcDark:ii,hcLight:ii},b("diffEditorBorder","Border color between the two text editors."));$("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},b("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));$("diffEditor.unchangedRegionBackground","sideBar.background",b("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor."));$("diffEditor.unchangedRegionForeground","foreground",b("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor."));$("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},b("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor."));const sv=$("widget.shadow",{dark:Ot(Le.black,.36),light:Ot(Le.black,.16),hcDark:null,hcLight:null},b("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),Kie=$("widget.border",{dark:null,light:null,hcDark:ii,hcLight:ii},b("widgetBorder","Border color of widgets such as find/replace inside the editor.")),dA=$("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},b("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));$("toolbar.hoverOutline",{dark:null,light:null,hcDark:ln,hcLight:ln},b("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));$("toolbar.activeBackground",{dark:Qa(dA,.1),light:Zf(dA,.1),hcDark:null,hcLight:null},b("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));const Gie=$("breadcrumb.foreground",Ot(pi,.8),b("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),Zie=$("breadcrumb.background",tl,b("breadcrumbsBackground","Background color of breadcrumb items.")),fA=$("breadcrumb.focusForeground",{light:Zf(pi,.2),dark:Qa(pi,.1),hcDark:Qa(pi,.1),hcLight:Qa(pi,.1)},b("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),Yie=$("breadcrumb.activeSelectionForeground",{light:Zf(pi,.2),dark:Qa(pi,.1),hcDark:Qa(pi,.1),hcLight:Qa(pi,.1)},b("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));$("breadcrumbPicker.background",da,b("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const oz=.5,gA=Le.fromHex("#40C8AE").transparent(oz),mA=Le.fromHex("#40A6FF").transparent(oz),pA=Le.fromHex("#606060").transparent(.4),q8=.4,rp=1,X3=$("merge.currentHeaderBackground",{dark:gA,light:gA,hcDark:null,hcLight:null},b("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);$("merge.currentContentBackground",Ot(X3,q8),b("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const Q3=$("merge.incomingHeaderBackground",{dark:mA,light:mA,hcDark:null,hcLight:null},b("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);$("merge.incomingContentBackground",Ot(Q3,q8),b("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const J3=$("merge.commonHeaderBackground",{dark:pA,light:pA,hcDark:null,hcLight:null},b("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);$("merge.commonContentBackground",Ot(J3,q8),b("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const op=$("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},b("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));$("editorOverviewRuler.currentContentForeground",{dark:Ot(X3,rp),light:Ot(X3,rp),hcDark:op,hcLight:op},b("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));$("editorOverviewRuler.incomingContentForeground",{dark:Ot(Q3,rp),light:Ot(Q3,rp),hcDark:op,hcLight:op},b("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));$("editorOverviewRuler.commonContentForeground",{dark:Ot(J3,rp),light:Ot(J3,rp),hcDark:op,hcLight:op},b("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));$("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},b("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0);$("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",b("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const Xie=$("problemsErrorIcon.foreground",$8,b("problemsErrorIconForeground","The color used for the problems error icon.")),Qie=$("problemsWarningIcon.foreground",Oh,b("problemsWarningIconForeground","The color used for the problems warning icon.")),Jie=$("problemsInfoIcon.foreground",If,b("problemsInfoIconForeground","The color used for the problems info icon.")),ene=$("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},b("minimapFindMatchHighlight","Minimap marker color for find matches."),!0);$("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},b("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0);const _A=$("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},b("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),tne=$("minimap.infoHighlight",{dark:If,light:If,hcDark:zC,hcLight:zC},b("minimapInfo","Minimap marker color for infos.")),ine=$("minimap.warningHighlight",{dark:Oh,light:Oh,hcDark:VC,hcLight:VC},b("overviewRuleWarning","Minimap marker color for warnings.")),nne=$("minimap.errorHighlight",{dark:new Le(new Xt(255,18,18,.7)),light:new Le(new Xt(255,18,18,.7)),hcDark:new Le(new Xt(255,50,50,1)),hcLight:"#B5200D"},b("minimapError","Minimap marker color for errors.")),sne=$("minimap.background",null,b("minimapBackground","Minimap background color.")),rne=$("minimap.foregroundOpacity",Le.fromHex("#000f"),b("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));$("minimapSlider.background",Ot(QV,.5),b("minimapSliderBackground","Minimap slider background color."));$("minimapSlider.hoverBackground",Ot(JV,.5),b("minimapSliderHoverBackground","Minimap slider background color when hovering."));$("minimapSlider.activeBackground",Ot(ez,.5),b("minimapSliderActiveBackground","Minimap slider background color when clicked on."));$("charts.foreground",pi,b("chartsForeground","The foreground color used in charts."));$("charts.lines",Ot(pi,.5),b("chartsLines","The color used for horizontal lines in charts."));$("charts.red",$8,b("chartsRed","The red color used in chart visualizations."));$("charts.blue",If,b("chartsBlue","The blue color used in chart visualizations."));$("charts.yellow",Oh,b("chartsYellow","The yellow color used in chart visualizations."));$("charts.orange",ene,b("chartsOrange","The orange color used in chart visualizations."));$("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},b("chartsGreen","The green color used in chart visualizations."));$("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},b("chartsPurple","The purple color used in chart visualizations."));const one=$("input.background",{dark:"#3C3C3C",light:Le.white,hcDark:Le.black,hcLight:Le.white},b("inputBoxBackground","Input box background.")),ane=$("input.foreground",pi,b("inputBoxForeground","Input box foreground.")),lne=$("input.border",{dark:null,light:null,hcDark:ii,hcLight:ii},b("inputBoxBorder","Input box border.")),az=$("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:ii,hcLight:ii},b("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),cne=$("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},b("inputOption.hoverBackground","Background color of activated options in input fields.")),lz=$("inputOption.activeBackground",{dark:Ot(Ul,.4),light:Ot(Ul,.2),hcDark:Le.transparent,hcLight:Le.transparent},b("inputOption.activeBackground","Background hover color of options in input fields.")),cz=$("inputOption.activeForeground",{dark:Le.white,light:Le.black,hcDark:pi,hcLight:pi},b("inputOption.activeForeground","Foreground color of activated options in input fields."));$("input.placeholderForeground",{light:Ot(pi,.5),dark:Ot(pi,.5),hcDark:Ot(pi,.7),hcLight:Ot(pi,.7)},b("inputPlaceholderForeground","Input box foreground color for placeholder text."));const une=$("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:Le.black,hcLight:Le.white},b("inputValidationInfoBackground","Input validation background color for information severity.")),hne=$("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:pi},b("inputValidationInfoForeground","Input validation foreground color for information severity.")),dne=$("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:ii,hcLight:ii},b("inputValidationInfoBorder","Input validation border color for information severity.")),fne=$("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:Le.black,hcLight:Le.white},b("inputValidationWarningBackground","Input validation background color for warning severity.")),gne=$("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:pi},b("inputValidationWarningForeground","Input validation foreground color for warning severity.")),mne=$("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:ii,hcLight:ii},b("inputValidationWarningBorder","Input validation border color for warning severity.")),pne=$("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:Le.black,hcLight:Le.white},b("inputValidationErrorBackground","Input validation background color for error severity.")),_ne=$("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:pi},b("inputValidationErrorForeground","Input validation foreground color for error severity.")),vne=$("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:ii,hcLight:ii},b("inputValidationErrorBorder","Input validation border color for error severity.")),D2=$("dropdown.background",{dark:"#3C3C3C",light:Le.white,hcDark:Le.black,hcLight:Le.white},b("dropdownBackground","Dropdown background.")),bne=$("dropdown.listBackground",{dark:null,light:null,hcDark:Le.black,hcLight:Le.white},b("dropdownListBackground","Dropdown list background.")),K8=$("dropdown.foreground",{dark:"#F0F0F0",light:pi,hcDark:Le.white,hcLight:pi},b("dropdownForeground","Dropdown foreground.")),G8=$("dropdown.border",{dark:D2,light:"#CECECE",hcDark:ii,hcLight:ii},b("dropdownBorder","Dropdown border.")),uz=$("button.foreground",Le.white,b("buttonForeground","Button foreground color.")),wne=$("button.separator",Ot(uz,.4),b("buttonSeparator","Button separator color.")),j0=$("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},b("buttonBackground","Button background color.")),Cne=$("button.hoverBackground",{dark:Qa(j0,.2),light:Zf(j0,.2),hcDark:j0,hcLight:j0},b("buttonHoverBackground","Button background color when hovering.")),yne=$("button.border",ii,b("buttonBorder","Button border color.")),Sne=$("button.secondaryForeground",{dark:Le.white,light:Le.white,hcDark:Le.white,hcLight:pi},b("buttonSecondaryForeground","Secondary button foreground color.")),e7=$("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:Le.white},b("buttonSecondaryBackground","Secondary button background color.")),xne=$("button.secondaryHoverBackground",{dark:Qa(e7,.2),light:Zf(e7,.2),hcDark:null,hcLight:null},b("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),U0=$("radio.activeForeground",cz,b("radioActiveForeground","Foreground color of active radio option.")),kne=$("radio.activeBackground",lz,b("radioBackground","Background color of active radio option.")),Lne=$("radio.activeBorder",az,b("radioActiveBorder","Border color of the active radio option.")),Dne=$("radio.inactiveForeground",null,b("radioInactiveForeground","Foreground color of inactive radio option.")),Ene=$("radio.inactiveBackground",null,b("radioInactiveBackground","Background color of inactive radio option.")),Tne=$("radio.inactiveBorder",{light:Ot(U0,.2),dark:Ot(U0,.2),hcDark:Ot(U0,.4),hcLight:Ot(U0,.2)},b("radioInactiveBorder","Border color of the inactive radio option.")),Nne=$("radio.inactiveHoverBackground",cne,b("radioHoverBackground","Background color of inactive active radio option when hovering.")),Ine=$("checkbox.background",D2,b("checkbox.background","Background color of checkbox widget."));$("checkbox.selectBackground",da,b("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));const Mne=$("checkbox.foreground",K8,b("checkbox.foreground","Foreground color of checkbox widget.")),Rne=$("checkbox.border",G8,b("checkbox.border","Border color of checkbox widget."));$("checkbox.selectBorder",G3,b("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));const Ane=$("keybindingLabel.background",{dark:new Le(new Xt(128,128,128,.17)),light:new Le(new Xt(221,221,221,.4)),hcDark:Le.transparent,hcLight:Le.transparent},b("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),Pne=$("keybindingLabel.foreground",{dark:Le.fromHex("#CCCCCC"),light:Le.fromHex("#555555"),hcDark:Le.white,hcLight:pi},b("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),One=$("keybindingLabel.border",{dark:new Le(new Xt(51,51,51,.6)),light:new Le(new Xt(204,204,204,.4)),hcDark:new Le(new Xt(111,195,223)),hcLight:ii},b("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),Fne=$("keybindingLabel.bottomBorder",{dark:new Le(new Xt(68,68,68,.6)),light:new Le(new Xt(187,187,187,.4)),hcDark:new Le(new Xt(111,195,223)),hcLight:pi},b("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),Bne=$("list.focusBackground",null,b("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Wne=$("list.focusForeground",null,b("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Vne=$("list.focusOutline",{dark:Ul,light:Ul,hcDark:ln,hcLight:ln},b("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),zne=$("list.focusAndSelectionOutline",null,b("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),Mf=$("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:Le.fromHex("#0F4A85").transparent(.1)},b("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),h_=$("list.activeSelectionForeground",{dark:Le.white,light:Le.white,hcDark:null,hcLight:null},b("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),hz=$("list.activeSelectionIconForeground",null,b("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Hne=$("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:Le.fromHex("#0F4A85").transparent(.1)},b("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),jne=$("list.inactiveSelectionForeground",null,b("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Une=$("list.inactiveSelectionIconForeground",null,b("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),$ne=$("list.inactiveFocusBackground",null,b("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),qne=$("list.inactiveFocusOutline",null,b("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),dz=$("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:Le.white.transparent(.1),hcLight:Le.fromHex("#0F4A85").transparent(.1)},b("listHoverBackground","List/Tree background when hovering over items using the mouse.")),fz=$("list.hoverForeground",null,b("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),Kne=$("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},b("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),Gne=$("list.dropBetweenBackground",{dark:G3,light:G3,hcDark:null,hcLight:null},b("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),Ub=$("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Ul,hcLight:Ul},b("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree."));$("list.focusHighlightForeground",{dark:Ub,light:Aie(Mf,Ub,"#BBE7FF"),hcDark:Ub,hcLight:Ub},b("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));$("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},b("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));$("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},b("listErrorForeground","Foreground color of list items containing errors."));$("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},b("listWarningForeground","Foreground color of list items containing warnings."));const Zne=$("listFilterWidget.background",{light:Zf(da,0),dark:Qa(da,0),hcDark:da,hcLight:da},b("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),Yne=$("listFilterWidget.outline",{dark:Le.transparent,light:Le.transparent,hcDark:"#f38518",hcLight:"#007ACC"},b("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),Xne=$("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:ii,hcLight:ii},b("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),Qne=$("listFilterWidget.shadow",sv,b("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees."));$("list.filterMatchBackground",{dark:mh,light:mh,hcDark:null,hcLight:null},b("listFilterMatchHighlight","Background color of the filtered match."));$("list.filterMatchBorder",{dark:Yg,light:Yg,hcDark:ii,hcLight:ln},b("listFilterMatchHighlightBorder","Border color of the filtered match."));$("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},b("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized."));const gz=$("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},b("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),Jne=$("tree.inactiveIndentGuidesStroke",Ot(gz,.4),b("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),ese=$("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},b("tableColumnsBorder","Table border color between columns.")),tse=$("tree.tableOddRowsBackground",{dark:Ot(pi,.04),light:Ot(pi,.04),hcDark:null,hcLight:null},b("tableOddRowsBackgroundColor","Background color for odd table rows."));$("editorActionList.background",da,b("editorActionListBackground","Action List background color."));$("editorActionList.foreground",L2,b("editorActionListForeground","Action List foreground color."));$("editorActionList.focusForeground",h_,b("editorActionListFocusForeground","Action List foreground color for the focused item."));$("editorActionList.focusBackground",Mf,b("editorActionListFocusBackground","Action List background color for the focused item."));const ise=$("menu.border",{dark:null,light:null,hcDark:ii,hcLight:ii},b("menuBorder","Border color of menus.")),nse=$("menu.foreground",K8,b("menuForeground","Foreground color of menu items.")),sse=$("menu.background",D2,b("menuBackground","Background color of menu items.")),rse=$("menu.selectionForeground",h_,b("menuSelectionForeground","Foreground color of the selected menu item in menus.")),ose=$("menu.selectionBackground",Mf,b("menuSelectionBackground","Background color of the selected menu item in menus.")),ase=$("menu.selectionBorder",{dark:null,light:null,hcDark:ln,hcLight:ln},b("menuSelectionBorder","Border color of the selected menu item in menus.")),lse=$("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:ii,hcLight:ii},b("menuSeparatorBackground","Color of a separator menu item in menus.")),vA=$("quickInput.background",da,b("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),cse=$("quickInput.foreground",L2,b("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),use=$("quickInputTitle.background",{dark:new Le(new Xt(255,255,255,.105)),light:new Le(new Xt(0,0,0,.06)),hcDark:"#000000",hcLight:Le.white},b("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),mz=$("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:Le.white,hcLight:"#0F4A85"},b("pickerGroupForeground","Quick picker color for grouping labels.")),hse=$("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:Le.white,hcLight:"#0F4A85"},b("pickerGroupBorder","Quick picker color for grouping borders.")),bA=$("quickInput.list.focusBackground",null,"",void 0,b("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),t7=$("quickInputList.focusForeground",h_,b("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),pz=$("quickInputList.focusIconForeground",hz,b("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),i7=$("quickInputList.focusBackground",{dark:lA(bA,Mf),light:lA(bA,Mf),hcDark:null,hcLight:null},b("quickInput.listFocusBackground","Quick picker background color for the focused item."));$("search.resultsInfoForeground",{light:pi,dark:Ot(pi,.65),hcDark:pi,hcLight:pi},b("search.resultsInfoForeground","Color of the text in the search viewlet's completion message."));$("searchEditor.findMatchBackground",{light:Ot(mh,.66),dark:Ot(mh,.66),hcDark:mh,hcLight:mh},b("searchEditor.queryMatch","Color of the Search Editor query matches."));$("searchEditor.findMatchBorder",{light:Ot(Yg,.66),dark:Ot(Yg,.66),hcDark:Yg,hcLight:Yg},b("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));var dse=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},wA=function(s,e){return function(t,i){e(t,i,s)}};const rv=Ut("hoverService");let d_=class extends ve{get delay(){return this.isInstantlyHovering()?0:this._delay}constructor(e,t,i={},n,r){super(),this.placement=e,this.instantHover=t,this.overrideOptions=i,this.configurationService=n,this.hoverService=r,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new Qe),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}showHover(e,t){const i=typeof this.overrideOptions=="function"?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();const n=Jn(e.target)?[e.target]:e.target.targetElements;for(const o of n)this.hoverDisposables.add(Un(o,"keydown",a=>{a.equals(9)&&this.hoverService.hideHover()}));const r=Jn(e.content)?void 0:e.content.toString();return this.hoverService.showHover({...e,...i,persistence:{hideOnKeyDown:!0,...i.persistence},id:r,appearance:{...e.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...i.appearance}},t)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};d_=dse([wA(3,Xi),wA(4,rv)],d_);const ov=Ut("contextViewService"),vu=Ut("contextMenuService"),ps=Ut("keybindingService");class E2{constructor(){this._hooks=new Qe,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,n,r){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=n,this._onStopCallback=r;let o=e;try{e.setPointerCapture(t),this._hooks.add(bt(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{o=tt(e)}this._hooks.add(ge(o,Ne.POINTER_MOVE,a=>{if(a.buttons!==i){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(ge(o,Ne.POINTER_UP,a=>this.stopMonitoring(!0)))}}function Qi(s,e,t){let i=null,n=null;if(typeof t.value=="function"?(i="value",n=t.value,n.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(i="get",n=t.get),!n)throw new Error("not supported");const r=`$memoize$${e}`;t[i]=function(...o){return this.hasOwnProperty(r)||Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:n.apply(this,o)}),this[r]}}var fse=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},xi;(function(s){s.Tap="-monaco-gesturetap",s.Change="-monaco-gesturechange",s.Start="-monaco-gesturestart",s.End="-monaco-gesturesend",s.Contextmenu="-monaco-gesturecontextmenu"})(xi||(xi={}));const us=class us extends ve{constructor(){super(),this.dispatched=!1,this.targets=new zr,this.ignoreTargets=new zr,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Te.runAndSubscribe(c2,({window:e,disposables:t})=>{t.add(ge(e.document,"touchstart",i=>this.onTouchStart(i),{passive:!1})),t.add(ge(e.document,"touchend",i=>this.onTouchEnd(e,i))),t.add(ge(e.document,"touchmove",i=>this.onTouchMove(i),{passive:!1}))},{window:bi,disposables:this._store}))}static addTarget(e){if(!us.isTouchDevice())return ve.None;us.INSTANCE||(us.INSTANCE=new us);const t=us.INSTANCE.targets.push(e);return bt(t)}static ignoreTarget(e){if(!us.isTouchDevice())return ve.None;us.INSTANCE||(us.INSTANCE=new us);const t=us.INSTANCE.ignoreTargets.push(e);return bt(t)}static isTouchDevice(){return"ontouchstart"in bi||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,n=e.targetTouches.length;i<n;i++){const r=e.targetTouches.item(i);this.activeTouches[r.identifier]={id:r.identifier,initialTarget:r.target,initialTimeStamp:t,initialPageX:r.pageX,initialPageY:r.pageY,rollingTimestamps:[t],rollingPageX:[r.pageX],rollingPageY:[r.pageY]};const o=this.newGestureEvent(xi.Start,r.target);o.pageX=r.pageX,o.pageY=r.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){const i=Date.now(),n=Object.keys(this.activeTouches).length;for(let r=0,o=t.changedTouches.length;r<o;r++){const a=t.changedTouches.item(r);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}const l=this.activeTouches[a.identifier],c=Date.now()-l.initialTimeStamp;if(c<us.HOLD_DELAY&&Math.abs(l.initialPageX-Ao(l.rollingPageX))<30&&Math.abs(l.initialPageY-Ao(l.rollingPageY))<30){const u=this.newGestureEvent(xi.Tap,l.initialTarget);u.pageX=Ao(l.rollingPageX),u.pageY=Ao(l.rollingPageY),this.dispatchEvent(u)}else if(c>=us.HOLD_DELAY&&Math.abs(l.initialPageX-Ao(l.rollingPageX))<30&&Math.abs(l.initialPageY-Ao(l.rollingPageY))<30){const u=this.newGestureEvent(xi.Contextmenu,l.initialTarget);u.pageX=Ao(l.rollingPageX),u.pageY=Ao(l.rollingPageY),this.dispatchEvent(u)}else if(n===1){const u=Ao(l.rollingPageX),d=Ao(l.rollingPageY),g=Ao(l.rollingTimestamps)-l.rollingTimestamps[0],m=u-l.rollingPageX[0],_=d-l.rollingPageY[0],v=[...this.targets].filter(w=>l.initialTarget instanceof Node&&w.contains(l.initialTarget));this.inertia(e,v,i,Math.abs(m)/g,m>0?1:-1,u,Math.abs(_)/g,_>0?1:-1,d)}this.dispatchEvent(this.newGestureEvent(xi.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(e){if(e.type===xi.Tap){const t=new Date().getTime();let i=0;t-this._lastSetTapCountTime>us.CLEAR_TAP_COUNT_TIME?i=1:i=2,this._lastSetTapCountTime=t,e.tapCount=i}else(e.type===xi.Change||e.type===xi.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const i of this.ignoreTargets)if(i.contains(e.initialTarget))return;const t=[];for(const i of this.targets)if(i.contains(e.initialTarget)){let n=0,r=e.initialTarget;for(;r&&r!==i;)n++,r=r.parentElement;t.push([n,i])}t.sort((i,n)=>i[0]-n[0]);for(const[i,n]of t)n.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,i,n,r,o,a,l,c){this.handle=Kr(e,()=>{const u=Date.now(),d=u-i;let g=0,m=0,_=!0;n+=us.SCROLL_FRICTION*d,a+=us.SCROLL_FRICTION*d,n>0&&(_=!1,g=r*n*d),a>0&&(_=!1,m=l*a*d);const v=this.newGestureEvent(xi.Change);v.translationX=g,v.translationY=m,t.forEach(w=>w.dispatchEvent(v)),_||this.inertia(e,t,u,n,r,o+g,a,l,c+m)})}onTouchMove(e){const t=Date.now();for(let i=0,n=e.changedTouches.length;i<n;i++){const r=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("end of an UNKNOWN touch",r);continue}const o=this.activeTouches[r.identifier],a=this.newGestureEvent(xi.Change,o.initialTarget);a.translationX=r.pageX-Ao(o.rollingPageX),a.translationY=r.pageY-Ao(o.rollingPageY),a.pageX=r.pageX,a.pageY=r.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(r.pageX),o.rollingPageY.push(r.pageY),o.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};us.SCROLL_FRICTION=-.005,us.HOLD_DELAY=700,us.CLEAR_TAP_COUNT_TIME=400;let rr=us;fse([Qi],rr,"isTouchDevice",null);let bu=class extends ve{onclick(e,t){this._register(ge(e,Ne.CLICK,i=>t(new Ya(tt(e),i))))}onmousedown(e,t){this._register(ge(e,Ne.MOUSE_DOWN,i=>t(new Ya(tt(e),i))))}onmouseover(e,t){this._register(ge(e,Ne.MOUSE_OVER,i=>t(new Ya(tt(e),i))))}onmouseleave(e,t){this._register(ge(e,Ne.MOUSE_LEAVE,i=>t(new Ya(tt(e),i))))}onkeydown(e,t){this._register(ge(e,Ne.KEY_DOWN,i=>t(new Ni(i))))}onkeyup(e,t){this._register(ge(e,Ne.KEY_UP,i=>t(new Ni(i))))}oninput(e,t){this._register(ge(e,Ne.INPUT,t))}onblur(e,t){this._register(ge(e,Ne.BLUR,t))}onfocus(e,t){this._register(ge(e,Ne.FOCUS,t))}ignoreGesture(e){return rr.ignoreTarget(e)}};const ap=11;class gse extends bu{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...Yt.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=ap+"px",this.domNode.style.height=ap+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new E2),this._register(Un(this.bgDomNode,Ne.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(Un(this.domNode,Ne.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new C8),this._pointerdownScheduleRepeatTimer=this._register(new zf)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,tt(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class mse extends ve{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new zf)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(e?" fade":"")))}}const pse=140;class _z extends bu{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new mse(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new E2),this._shouldRender=!0,this.domNode=Qt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(ge(this.domNode.domNode,Ne.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new gse(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,n){this.slider=Qt(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof i=="number"&&this.slider.setWidth(i),typeof n=="number"&&this.slider.setHeight(n),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(ge(this.slider.domNode,Ne.POINTER_DOWN,r=>{r.button===0&&(r.preventDefault(),this._sliderPointerDown(r))})),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),n=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderPointerPosition(e);i<=r&&r<=n?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,i=e.offsetY;else{const r=$o(this.domNode.domNode);t=e.pageX-r.left,i=e.pageY-r.top}const n=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(n):this._scrollbarState.getDesiredScrollPositionFromOffset(n)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),n=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>{const o=this._sliderOrthogonalPointerPosition(r),a=Math.abs(o-i);if($r&&a>pse){this._setDesiredScrollPositionNow(n.getScrollPosition());return}const c=this._sliderPointerPosition(r)-t;this._setDesiredScrollPositionNow(n.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const _se=20;class lp{constructor(e,t,i,n,r,o){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=n,this._scrollSize=r,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new lp(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,i,n,r){const o=Math.max(0,i-e),a=Math.max(0,o-2*t),l=n>0&&n>i;if(!l)return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(_se,Math.floor(i*a/n))),u=(a-c)/(n-i),d=r*u;return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:u,computedSliderPosition:Math.round(d)}}_refreshComputedValues(){const e=lp._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let i=this._scrollPosition;return t<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class vse extends _z{constructor(e,t,i){const n=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new lp(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,n.width,n.scrollWidth,r.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const o=(t.arrowSize-ap)/2,a=(t.horizontalScrollbarSize-ap)/2;this._createArrow({className:"scra",icon:$e.scrollbarButtonLeft,top:a,left:o,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Df(null,1,0))}),this._createArrow({className:"scra",icon:$e.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:o,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Df(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class bse extends _z{constructor(e,t,i){const n=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new lp(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,n.height,n.scrollHeight,r.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const o=(t.arrowSize-ap)/2,a=(t.verticalScrollbarSize-ap)/2;this._createArrow({className:"scra",icon:$e.scrollbarButtonUp,top:o,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Df(null,0,1))}),this._createArrow({className:"scra",icon:$e.scrollbarButtonDown,top:void 0,left:a,bottom:o,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Df(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class HC{constructor(e,t,i,n,r,o,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,i=i|0,n=n|0,r=r|0,o=o|0,a=a|0),this.rawScrollLeft=n,this.rawScrollTop=a,t<0&&(t=0),n+t>i&&(n=i-t),n<0&&(n=0),r<0&&(r=0),a+r>o&&(a=o-r),a<0&&(a=0),this.width=t,this.scrollWidth=i,this.scrollLeft=n,this.height=r,this.scrollHeight=o,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new HC(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new HC(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const i=this.width!==e.width,n=this.scrollWidth!==e.scrollWidth,r=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:n,scrollLeftChanged:r,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:l}}}class xp extends ve{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new re),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new HC(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const i=this._state.withScrollDimensions(e,t);this._setState(i,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let n;t?n=new f_(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):n=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=n}else{const i=this._state.withScrollPosition(e);this._smoothScrolling=f_.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}}class CA{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}}function Vk(s,e){const t=e-s;return function(i){return s+t*yse(i)}}function wse(s,e,t){return function(i){return i<t?s(i/t):e((i-t)/(1-t))}}class f_{constructor(e,t,i,n){this.from=e,this.to=t,this.duration=n,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,i){if(Math.abs(e-t)>2.5*i){let r,o;return e<t?(r=e+.75*i,o=t-.75*i):(r=e-.75*i,o=t+.75*i),wse(Vk(e,r),Vk(o,t),.33)}return Vk(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const i=this.scrollLeft(t),n=this.scrollTop(t);return new CA(i,n,!1)}return new CA(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,i){return f_.start(e,t,i)}static start(e,t,i){i=i+10;const n=Date.now()-10;return new f_(e,t,n,i)}}function Cse(s){return Math.pow(s,3)}function yse(s){return 1-Cse(1-s)}const Sse=500,yA=50;class xse{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}}const vS=class vS{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,i=1,n=this._rear;do{const r=n===this._front?e:Math.pow(2,-i);if(e-=r,t+=this._memory[n].score*r,n===this._front)break;n=(this._capacity+n-1)%this._capacity,i++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(Z_){const t=tt(e.browserEvent),i=UX(t);this.accept(Date.now(),e.deltaX*i,e.deltaY*i)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,i){let n=null;const r=new xse(e,t,i);this._front===-1&&this._rear===-1?(this._memory[0]=r,this._front=0,this._rear=0):(n=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=r),r.score=this._computeScore(r,n)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let i=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(i+=.25),t){const n=Math.abs(e.deltaX),r=Math.abs(e.deltaY),o=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(n,o),1),c=Math.max(Math.min(r,a),1),u=Math.max(n,o),d=Math.max(r,a);u%l===0&&d%c===0&&(i-=.5)}return Math.min(Math.max(i,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};vS.INSTANCE=new vS;let jC=vS;class Z8 extends bu{get options(){return this._options}constructor(e,t,i){super(),this._onScroll=this._register(new re),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new re),e.style.overflow="hidden",this._options=Lse(t),this._scrollable=i,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));const n={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new bse(this._scrollable,this._options,n)),this._horizontalScrollbar=this._register(new vse(this._scrollable,this._options,n)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Qt(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Qt(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Qt(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onmouseleave(this._listenOnDomNode,r=>this._onMouseLeave(r)),this._hideTimeout=this._register(new zf),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=ms(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,qt&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new Df(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=ms(this._mouseWheelToDispose),e)){const i=n=>{this._onMouseWheel(new Df(n))};this._mouseWheelToDispose.push(ge(this._listenOnDomNode,Ne.MOUSE_WHEEL,i,{passive:!1}))}}_onMouseWheel(e){if(e.browserEvent?.defaultPrevented)return;const t=jC.INSTANCE;t.acceptStandardWheelEvent(e);let i=!1;if(e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,o=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&o+r===0?o=r=0:Math.abs(r)>=Math.abs(o)?o=0:r=0),this._options.flipAxes&&([r,o]=[o,r]);const a=!qt&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!o&&(o=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(o=o*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);const l=this._scrollable.getFutureScrollPosition();let c={};if(r){const u=yA*r,d=l.scrollTop-(u<0?Math.floor(u):Math.ceil(u));this._verticalScrollbar.writeScrollPosition(c,d)}if(o){const u=yA*o,d=l.scrollLeft-(u<0?Math.floor(u):Math.ceil(u));this._horizontalScrollbar.writeScrollPosition(c,d)}c=this._scrollable.validateScrollPosition(c),(l.scrollLeft!==c.scrollLeft||l.scrollTop!==c.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(c):this._scrollable.setScrollPositionNow(c),i=!0)}let n=i;!n&&this._options.alwaysConsumeMouseWheel&&(n=!0),!n&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(n=!0),n&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,n=i?" left":"",r=t?" top":"",o=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${n}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${r}${n}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),Sse)}}class kse extends Z8{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new xp({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:n=>Kr(tt(e),n)});super(e,t,i),this._register(i)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class T2 extends Z8{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class Y8 extends Z8{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new xp({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:n=>Kr(tt(e),n)});super(e,t,i),this._register(i),this._element=e,this._register(this.onScroll(n=>{n.scrollTopChanged&&(this._element.scrollTop=n.scrollTop),n.scrollLeftChanged&&(this._element.scrollLeft=n.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function Lse(s){const e={lazyRender:typeof s.lazyRender<"u"?s.lazyRender:!1,className:typeof s.className<"u"?s.className:"",useShadows:typeof s.useShadows<"u"?s.useShadows:!0,handleMouseWheel:typeof s.handleMouseWheel<"u"?s.handleMouseWheel:!0,flipAxes:typeof s.flipAxes<"u"?s.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof s.consumeMouseWheelIfScrollbarIsNeeded<"u"?s.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof s.alwaysConsumeMouseWheel<"u"?s.alwaysConsumeMouseWheel:!1,scrollYToX:typeof s.scrollYToX<"u"?s.scrollYToX:!1,mouseWheelScrollSensitivity:typeof s.mouseWheelScrollSensitivity<"u"?s.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof s.fastScrollSensitivity<"u"?s.fastScrollSensitivity:5,scrollPredominantAxis:typeof s.scrollPredominantAxis<"u"?s.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof s.mouseWheelSmoothScroll<"u"?s.mouseWheelSmoothScroll:!0,arrowSize:typeof s.arrowSize<"u"?s.arrowSize:11,listenOnDomNode:typeof s.listenOnDomNode<"u"?s.listenOnDomNode:null,horizontal:typeof s.horizontal<"u"?s.horizontal:1,horizontalScrollbarSize:typeof s.horizontalScrollbarSize<"u"?s.horizontalScrollbarSize:10,horizontalSliderSize:typeof s.horizontalSliderSize<"u"?s.horizontalSliderSize:0,horizontalHasArrows:typeof s.horizontalHasArrows<"u"?s.horizontalHasArrows:!1,vertical:typeof s.vertical<"u"?s.vertical:1,verticalScrollbarSize:typeof s.verticalScrollbarSize<"u"?s.verticalScrollbarSize:10,verticalHasArrows:typeof s.verticalHasArrows<"u"?s.verticalHasArrows:!1,verticalSliderSize:typeof s.verticalSliderSize<"u"?s.verticalSliderSize:0,scrollByPage:typeof s.scrollByPage<"u"?s.scrollByPage:!1};return e.horizontalSliderSize=typeof s.horizontalSliderSize<"u"?s.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof s.verticalSliderSize<"u"?s.verticalSliderSize:e.verticalScrollbarSize,qt&&(e.className+=" mac"),e}const $b=at;let Dse=class extends ve{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new Y8(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}};class X8 extends ve{static render(e,t,i){return new X8(e,t,i)}constructor(e,t,i){super(),this.actionLabel=t.label,this.actionKeybindingLabel=i,this.actionContainer=Ge(e,$b("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=Ge(this.actionContainer,$b("a.action")),this.action.setAttribute("role","button"),t.iconClass&&Ge(this.action,$b(`span.icon.${t.iconClass}`));const n=Ge(this.action,$b("span"));n.textContent=i?`${t.label} (${i})`:t.label,this._store.add(new Tse(this.actionContainer,t.run)),this._store.add(new Nse(this.actionContainer,t.run,[3,10])),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function Ese(s,e){return s&&e?b("acessibleViewHint","Inspect this in the accessible view with {0}.",e):s?b("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}class Tse extends ve{constructor(e,t){super(),this._register(ge(e,Ne.CLICK,i=>{i.stopPropagation(),i.preventDefault(),t(e)}))}}class Nse extends ve{constructor(e,t,i){super(),this._register(ge(e,Ne.KEY_DOWN,n=>{const r=new Ni(n);i.some(o=>r.equals(o))&&(n.stopPropagation(),n.preventDefault(),t(e))}))}}const av=Ut("openerService");function Ise(s){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(s.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},s=s.with({fragment:""})),{selection:e,uri:s}}class Rt{get event(){return this.emitter.event}constructor(e,t,i){const n=r=>this.emitter.fire(r);this.emitter=new re({onWillAddFirstListener:()=>e.addEventListener(t,n,i),onDidRemoveLastListener:()=>e.removeEventListener(t,n,i)})}dispose(){this.emitter.dispose()}}function Mse(s,e={}){const t=Q8(e);return t.textContent=s,t}function Rse(s,e={}){const t=Q8(e);return vz(t,Pse(s,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function Q8(s){const e=s.inline?"span":"div",t=document.createElement(e);return s.className&&(t.className=s.className),t}class Ase{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function vz(s,e,t,i){let n;if(e.type===2)n=document.createTextNode(e.content||"");else if(e.type===3)n=document.createElement("b");else if(e.type===4)n=document.createElement("i");else if(e.type===7&&i)n=document.createElement("code");else if(e.type===5&&t){const r=document.createElement("a");t.disposables.add(Un(r,"click",o=>{t.callback(String(e.index),o)})),n=r}else e.type===8?n=document.createElement("br"):e.type===1&&(n=s);n&&s!==n&&s.appendChild(n),n&&Array.isArray(e.children)&&e.children.forEach(r=>{vz(n,r,t,i)})}function Pse(s,e){const t={type:1,children:[]};let i=0,n=t;const r=[],o=new Ase(s);for(;!o.eos();){let a=o.next();const l=a==="\\"&&n7(o.peek(),e)!==0;if(l&&(a=o.next()),!l&&Ose(a,e)&&a===o.peek()){o.advance(),n.type===2&&(n=r.pop());const c=n7(a,e);if(n.type===c||n.type===5&&c===6)n=r.pop();else{const u={type:c,children:[]};c===5&&(u.index=i,i++),n.children.push(u),r.push(n),n=u}}else if(a===`
`)n.type===2&&(n=r.pop()),n.children.push({type:8});else if(n.type!==2){const c={type:2,content:a};n.children.push(c),r.push(n),n=c}else n.content+=a}return n.type===2&&(n=r.pop()),t}function Ose(s,e){return n7(s,e)!==0}function n7(s,e){switch(s){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}const Fse=new RegExp(`(\\\\)?\\$\\((${Yt.iconNameExpression}(?:${Yt.iconModifierExpression})?)\\)`,"g");function of(s){const e=new Array;let t,i=0,n=0;for(;(t=Fse.exec(s))!==null;){n=t.index||0,i<n&&e.push(s.substring(i,n)),i=(t.index||0)+t[0].length;const[,r,o]=t;e.push(r?`$(${o})`:UC({id:o}))}return i<s.length&&e.push(s.substring(i)),e}function UC(s){const e=at("span");return e.classList.add(...Yt.asClassNameArray(s)),e}function bz(...s){return function(e,t){for(let i=0,n=s.length;i<n;i++){const r=s[i](e,t);if(r)return r}return null}}wz.bind(void 0,!1);const $C=wz.bind(void 0,!0);function wz(s,e,t){if(!t||t.length<e.length)return null;let i;return s?i=h8(t,e):i=t.indexOf(e)===0,i?e.length>0?[{start:0,end:e.length}]:[]:null}function Bse(s,e){const t=e.toLowerCase().indexOf(s.toLowerCase());return t===-1?null:[{start:t,end:t+s.length}]}function Wse(s,e){return s7(s.toLowerCase(),e.toLowerCase(),0,0)}function s7(s,e,t,i){if(t===s.length)return[];if(i===e.length)return null;if(s[t]===e[i]){let n=null;return(n=s7(s,e,t+1,i+1))?yz({start:i,end:i+1},n):null}return s7(s,e,t,i+1)}function J8(s){return 97<=s&&s<=122}function N2(s){return 65<=s&&s<=90}function eE(s){return 48<=s&&s<=57}function Vse(s){return s===32||s===9||s===10||s===13}const zse=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(s=>zse.add(s.charCodeAt(0)));function Cz(s){return J8(s)||N2(s)||eE(s)}function yz(s,e){return e.length===0?e=[s]:s.end===e[0].start?e[0].start=s.start:e.unshift(s),e}function Sz(s,e){for(let t=e;t<s.length;t++){const i=s.charCodeAt(t);if(N2(i)||eE(i)||t>0&&!Cz(s.charCodeAt(t-1)))return t}return s.length}function r7(s,e,t,i){if(t===s.length)return[];if(i===e.length)return null;if(s[t]!==e[i].toLowerCase())return null;{let n=null,r=i+1;for(n=r7(s,e,t+1,i+1);!n&&(r=Sz(e,r))<e.length;)n=r7(s,e,t+1,r),r++;return n===null?null:yz({start:i,end:i+1},n)}}function Hse(s){let e=0,t=0,i=0,n=0,r=0;for(let u=0;u<s.length;u++)r=s.charCodeAt(u),N2(r)&&e++,J8(r)&&t++,Cz(r)&&i++,eE(r)&&n++;const o=e/s.length,a=t/s.length,l=i/s.length,c=n/s.length;return{upperPercent:o,lowerPercent:a,alphaPercent:l,numericPercent:c}}function jse(s){const{upperPercent:e,lowerPercent:t}=s;return t===0&&e>.6}function Use(s){const{upperPercent:e,lowerPercent:t,alphaPercent:i,numericPercent:n}=s;return t>.2&&e<.8&&i>.6&&n<.2}function $se(s){let e=0,t=0,i=0,n=0;for(let r=0;r<s.length;r++)i=s.charCodeAt(r),N2(i)&&e++,J8(i)&&t++,Vse(i)&&n++;return(e===0||t===0)&&n===0?s.length<=30:e<=5}function xz(s,e){if(!e||(e=e.trim(),e.length===0)||!$se(s))return null;e.length>60&&(e=e.substring(0,60));const t=Hse(e);if(!Use(t)){if(!jse(t))return null;e=e.toLowerCase()}let i=null,n=0;for(s=s.toLowerCase();n<e.length&&(i=r7(s,e,0,n))===null;)n=Sz(e,n+1);return i}const qse=bz($C,xz,Bse),Kse=bz($C,xz,Wse),SA=new iv(1e4);function xA(s,e,t=!1){if(typeof s!="string"||typeof e!="string")return null;let i=SA.get(s);i||(i=new RegExp(RX(s),"i"),SA.set(s,i));const n=i.exec(e);return n?[{start:n.index,end:n.index+n[0].length}]:t?Kse(s,e):qse(s,e)}function Gse(s,e){const t=Dz(s,s.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?Zse(t):null}function Zse(s){if(typeof s>"u")return[];const e=[],t=s[1];for(let i=s.length-1;i>1;i--){const n=s[i]+t,r=e[e.length-1];r&&r.end===n?r.end=n+1:e.push({start:n,end:n+1})}return e}const ph=128;function tE(){const s=[],e=[];for(let t=0;t<=ph;t++)e[t]=0;for(let t=0;t<=ph;t++)s.push(e.slice(0));return s}function kz(s){const e=[];for(let t=0;t<=s;t++)e[t]=0;return e}const Lz=kz(2*ph),o7=kz(2*ph),gc=tE(),hd=tE(),qb=tE();function Kb(s,e){if(e<0||e>=s.length)return!1;const t=s.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!p8(t)}}function kA(s,e){if(e<0||e>=s.length)return!1;switch(s.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function Uw(s,e,t){return e[s]!==t[s]}function Yse(s,e,t,i,n,r,o=!1){for(;e<t&&n<r;)s[e]===i[n]&&(o&&(Lz[e]=n),e+=1),n+=1;return e===t}var Em;(function(s){s.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}s.isDefault=e})(Em||(Em={}));const Q9=class Q9{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}};Q9.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};let a7=Q9;function Dz(s,e,t,i,n,r,o=a7.default){const a=s.length>ph?ph:s.length,l=i.length>ph?ph:i.length;if(t>=a||r>=l||a-t>l-r||!Yse(e,t,a,n,r,l,!0))return;Xse(a,l,t,r,e,n);let c=1,u=1,d=t,g=r;const m=[!1];for(c=1,d=t;d<a;c++,d++){const S=Lz[d],k=o7[d],L=d+1<a?o7[d+1]:l;for(u=S-r+1,g=S;g<L;u++,g++){let T=Number.MIN_SAFE_INTEGER,A=!1;g<=k&&(T=Qse(s,e,d,t,i,n,g,l,r,gc[c-1][u-1]===0,m));let I=0;T!==Number.MAX_SAFE_INTEGER&&(A=!0,I=T+hd[c-1][u-1]);const O=g>S,F=O?hd[c][u-1]+(gc[c][u-1]>0?-5:0):0,J=g>S+1&&gc[c][u-1]>0,Y=J?hd[c][u-2]+(gc[c][u-2]>0?-5:0):0;if(J&&(!O||Y>=F)&&(!A||Y>=I))hd[c][u]=Y,qb[c][u]=3,gc[c][u]=0;else if(O&&(!A||F>=I))hd[c][u]=F,qb[c][u]=2,gc[c][u]=0;else if(A)hd[c][u]=I,qb[c][u]=1,gc[c][u]=gc[c-1][u-1]+1;else throw new Error("not possible")}}if(!m[0]&&!o.firstMatchCanBeWeak)return;c--,u--;const _=[hd[c][u],r];let v=0,w=0;for(;c>=1;){let S=u;do{const k=qb[c][S];if(k===3)S=S-2;else if(k===2)S=S-1;else break}while(S>=1);v>1&&e[t+c-1]===n[r+u-1]&&!Uw(S+r-1,i,n)&&v+1>gc[c][S]&&(S=u),S===u?v++:v=1,w||(w=S),c--,u=S-1,_.push(u)}l-r===a&&o.boostFullMatch&&(_[0]+=2);const y=w-a;return _[0]-=y,_}function Xse(s,e,t,i,n,r){let o=s-1,a=e-1;for(;o>=t&&a>=i;)n[o]===r[a]&&(o7[o]=a,o--),a--}function Qse(s,e,t,i,n,r,o,a,l,c,u){if(e[t]!==r[o])return Number.MIN_SAFE_INTEGER;let d=1,g=!1;return o===t-i?d=s[t]===n[o]?7:5:Uw(o,n,r)&&(o===0||!Uw(o-1,n,r))?(d=s[t]===n[o]?7:5,g=!0):Kb(r,o)&&(o===0||!Kb(r,o-1))?d=5:(Kb(r,o-1)||kA(r,o-1))&&(d=5,g=!0),d>1&&t===i&&(u[0]=!0),g||(g=Uw(o,n,r)||Kb(r,o-1)||kA(r,o-1)),t===i?o>l&&(d-=g?3:5):c?d+=g?2:0:d+=g?0:1,o+1===a&&(d-=g?3:5),d}const Jse="$(",iE=new RegExp(`\\$\\(${Yt.iconNameExpression}(?:${Yt.iconModifierExpression})?\\)`,"g"),ere=new RegExp(`(\\\\)?${iE.source}`,"g");function tre(s){return s.replace(ere,(e,t)=>t?e:`\\${e}`)}const ire=new RegExp(`\\\\${iE.source}`,"g");function nre(s){return s.replace(ire,e=>`\\${e}`)}const sre=new RegExp(`(\\s)?(\\\\)?${iE.source}(\\s)?`,"g");function Ez(s){return s.indexOf(Jse)===-1?s:s.replace(sre,(e,t,i,n)=>i?e:t||n||"")}function rre(s){return s?s.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}const zk=new RegExp(`\\$\\(${Yt.iconNameCharacter}+\\)`,"g");function $0(s){zk.lastIndex=0;let e="";const t=[];let i=0;for(;;){const n=zk.lastIndex,r=zk.exec(s),o=s.substring(n,r?.index);if(o.length>0){e+=o;for(let a=0;a<o.length;a++)t.push(i)}if(!r)break;i+=r[0].length}return{text:e,iconOffsets:t}}function Hk(s,e,t=!1){const{text:i,iconOffsets:n}=e;if(!n||n.length===0)return xA(s,i,t);const r=r2(i," "),o=i.length-r.length,a=xA(s,r,t);if(a)for(const l of a){const c=n[l.start+o]+o;l.start+=c,l.end+=c}return a}function mc(s){return wC(s,!0)}class ore{constructor(e){this._ignorePathCasing=e}compare(e,t,i=!1){return e===t?0:e3(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===Dt.file)return K3(mc(e),mc(t),this._ignorePathCasing(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(DA(e.authority,t.authority))return K3(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return Et.joinPath(e,...t)}basenameOrAuthority(e){return nE(e)||e.authority}basename(e){return rn.basename(e.path)}extname(e){return rn.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Dt.file?t=Et.file(hX(mc(e))).path:(t=rn.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Dt.file?t=Et.file(dW(mc(e))).path:t=rn.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!DA(e.authority,t.authority))return;if(e.scheme===Dt.file){const r=uX(mc(e),mc(t));return $r?jV(r):r}let i=e.path||"/";const n=t.path||"/";if(this._ignorePathCasing(e)){let r=0;for(const o=Math.min(i.length,n.length);r<o&&!(i.charCodeAt(r)!==n.charCodeAt(r)&&i.charAt(r).toLowerCase()!==n.charAt(r).toLowerCase());r++);i=n.substr(0,r)+i.substr(r)}return rn.relative(i,n)}resolvePath(e,t){if(e.scheme===Dt.file){const i=Et.file(cX(mc(e),t));return e.with({authority:i.authority,path:i.path})}return t=hie(t),e.with({path:rn.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&Ug(e,t)}hasTrailingPathSeparator(e,t=Lh){if(e.scheme===Dt.file){const i=mc(e);return i.length>JR(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Lh){return EA(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Lh){let i=!1;if(e.scheme===Dt.file){const n=mc(e);i=n!==void 0&&n.length===JR(n).length&&n[n.length-1]===t}else{t="/";const n=e.path;i=n.length===1&&n.charCodeAt(n.length-1)===47}return!i&&!EA(e,t)?e.with({path:e.path+"/"}):e}}const Bi=new ore(()=>!1),are=Bi.isEqual.bind(Bi);Bi.isEqualOrParent.bind(Bi);Bi.getComparisonKey.bind(Bi);Bi.basenameOrAuthority.bind(Bi);const nE=Bi.basename.bind(Bi);Bi.extname.bind(Bi);const lre=Bi.dirname.bind(Bi);Bi.joinPath.bind(Bi);const cre=Bi.normalizePath.bind(Bi);Bi.relativePath.bind(Bi);const LA=Bi.resolvePath.bind(Bi);Bi.isAbsolutePath.bind(Bi);const DA=Bi.isEqualAuthority.bind(Bi),EA=Bi.hasTrailingPathSeparator.bind(Bi);Bi.removeTrailingPathSeparator.bind(Bi);Bi.addTrailingPathSeparator.bind(Bi);var qC;(function(s){s.META_DATA_LABEL="label",s.META_DATA_DESCRIPTION="description",s.META_DATA_SIZE="size",s.META_DATA_MIME="mime";function e(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,l]=o.split(":");a&&l&&i.set(a,l)});const r=t.path.substring(0,t.path.indexOf(";"));return r&&i.set(s.META_DATA_MIME,r),i}s.parseMetaData=e})(qC||(qC={}));class Tz{constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw n2("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=hre(this.supportThemeIcons?tre(e):e).replace(/([ \t]+)/g,(i,n)=>"&nbsp;".repeat(n.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${dre(t,e)}
`,this}appendLink(e,t,i){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),i&&(this.value+=` "${this._escape(this._escape(i,'"'),")")}"`),this.value+=")",this}_escape(e,t){const i=new RegExp(hu(t),"g");return e.replace(i,(n,r)=>e.charAt(r-1)!=="\\"?`\\${n}`:n)}}function Tm(s){return s instanceof Tz?!0:s&&typeof s=="object"?typeof s.value=="string"&&(typeof s.isTrusted=="boolean"||typeof s.isTrusted=="object"||s.isTrusted===void 0)&&(typeof s.supportThemeIcons=="boolean"||s.supportThemeIcons===void 0):!1}function ure(s,e){return s===e?!0:!s||!e?!1:s.value===e.value&&s.isTrusted===e.isTrusted&&s.supportThemeIcons===e.supportThemeIcons&&s.supportHtml===e.supportHtml&&(s.baseUri===e.baseUri||!!s.baseUri&&!!e.baseUri&&are(Et.from(s.baseUri),Et.from(e.baseUri)))}function hre(s){return s.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function dre(s,e){const t=s.match(/^`+/gm)?.reduce((n,r)=>n.length>r.length?n:r).length??0,i=t>=3?t+1:3;return[`${"`".repeat(i)}${e}`,s,`${"`".repeat(i)}`].join(`
`)}function Gb(s){return s.replace(/"/g,"&quot;")}function jk(s){return s&&s.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function fre(s){const e=[],t=s.split("|").map(n=>n.trim());s=t[0];const i=t[1];if(i){const n=/height=(\d+)/.exec(i),r=/width=(\d+)/.exec(i),o=n?n[1]:"",a=r?r[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(o));l&&e.push(`width="${a}"`),c&&e.push(`height="${o}"`)}return{href:s,dimensions:e}}class Nz{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const TA=new Nz("id#");let Ds={};(function(){function s(e,t){t(Ds)}s.amd=!0,function(e,t){typeof s=="function"&&s.amd?s(["exports"],t):typeof ts=="object"&&typeof QU<"u"?t(ts):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}e.defaults=t();function i(xt){e.defaults=xt}const n=/[&<>"']/,r=new RegExp(n.source,"g"),o=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(o.source,"g"),l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=xt=>l[xt];function u(xt,H){if(H){if(n.test(xt))return xt.replace(r,c)}else if(o.test(xt))return xt.replace(a,c);return xt}const d=/(^|[^\[])\^/g;function g(xt,H){let U=typeof xt=="string"?xt:xt.source;H=H||"";const K={replace:(P,z)=>{let q=typeof z=="string"?z:z.source;return q=q.replace(d,"$1"),U=U.replace(P,q),K},getRegex:()=>new RegExp(U,H)};return K}function m(xt){try{xt=encodeURI(xt).replace(/%25/g,"%")}catch{return null}return xt}const _={exec:()=>null};function v(xt,H){const U=xt.replace(/\|/g,(z,q,se)=>{let _e=!1,De=q;for(;--De>=0&&se[De]==="\\";)_e=!_e;return _e?"|":" |"}),K=U.split(/ \|/);let P=0;if(K[0].trim()||K.shift(),K.length>0&&!K[K.length-1].trim()&&K.pop(),H)if(K.length>H)K.splice(H);else for(;K.length<H;)K.push("");for(;P<K.length;P++)K[P]=K[P].trim().replace(/\\\|/g,"|");return K}function w(xt,H,U){const K=xt.length;if(K===0)return"";let P=0;for(;P<K&&xt.charAt(K-P-1)===H;)P++;return xt.slice(0,K-P)}function y(xt,H){if(xt.indexOf(H[1])===-1)return-1;let U=0;for(let K=0;K<xt.length;K++)if(xt[K]==="\\")K++;else if(xt[K]===H[0])U++;else if(xt[K]===H[1]&&(U--,U<0))return K;return-1}function S(xt,H,U,K){const P=H.href,z=H.title?u(H.title):null,q=xt[1].replace(/\\([\[\]])/g,"$1");if(xt[0].charAt(0)!=="!"){K.state.inLink=!0;const se={type:"link",raw:U,href:P,title:z,text:q,tokens:K.inlineTokens(q)};return K.state.inLink=!1,se}return{type:"image",raw:U,href:P,title:z,text:u(q)}}function k(xt,H){const U=xt.match(/^(\s+)(?:```)/);if(U===null)return H;const K=U[1];return H.split(`
`).map(P=>{const z=P.match(/^\s+/);if(z===null)return P;const[q]=z;return q.length>=K.length?P.slice(K.length):P}).join(`
`)}class L{options;rules;lexer;constructor(H){this.options=H||e.defaults}space(H){const U=this.rules.block.newline.exec(H);if(U&&U[0].length>0)return{type:"space",raw:U[0]}}code(H){const U=this.rules.block.code.exec(H);if(U){const K=U[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:U[0],codeBlockStyle:"indented",text:this.options.pedantic?K:w(K,`
`)}}}fences(H){const U=this.rules.block.fences.exec(H);if(U){const K=U[0],P=k(K,U[3]||"");return{type:"code",raw:K,lang:U[2]?U[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):U[2],text:P}}}heading(H){const U=this.rules.block.heading.exec(H);if(U){let K=U[2].trim();if(/#$/.test(K)){const P=w(K,"#");(this.options.pedantic||!P||/ $/.test(P))&&(K=P.trim())}return{type:"heading",raw:U[0],depth:U[1].length,text:K,tokens:this.lexer.inline(K)}}}hr(H){const U=this.rules.block.hr.exec(H);if(U)return{type:"hr",raw:w(U[0],`
`)}}blockquote(H){const U=this.rules.block.blockquote.exec(H);if(U){let K=w(U[0],`
`).split(`
`),P="",z="";const q=[];for(;K.length>0;){let se=!1;const _e=[];let De;for(De=0;De<K.length;De++)if(/^ {0,3}>/.test(K[De]))_e.push(K[De]),se=!0;else if(!se)_e.push(K[De]);else break;K=K.slice(De);const Re=_e.join(`
`),Ae=Re.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");P=P?`${P}
${Re}`:Re,z=z?`${z}
${Ae}`:Ae;const We=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(Ae,q,!0),this.lexer.state.top=We,K.length===0)break;const Ze=q[q.length-1];if(Ze?.type==="code")break;if(Ze?.type==="blockquote"){const qe=Ze,wt=qe.raw+`
`+K.join(`
`),Ft=this.blockquote(wt);q[q.length-1]=Ft,P=P.substring(0,P.length-qe.raw.length)+Ft.raw,z=z.substring(0,z.length-qe.text.length)+Ft.text;break}else if(Ze?.type==="list"){const qe=Ze,wt=qe.raw+`
`+K.join(`
`),Ft=this.list(wt);q[q.length-1]=Ft,P=P.substring(0,P.length-Ze.raw.length)+Ft.raw,z=z.substring(0,z.length-qe.raw.length)+Ft.raw,K=wt.substring(q[q.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:P,tokens:q,text:z}}}list(H){let U=this.rules.block.list.exec(H);if(U){let K=U[1].trim();const P=K.length>1,z={type:"list",raw:"",ordered:P,start:P?+K.slice(0,-1):"",loose:!1,items:[]};K=P?`\\d{1,9}\\${K.slice(-1)}`:`\\${K}`,this.options.pedantic&&(K=P?K:"[*+-]");const q=new RegExp(`^( {0,3}${K})((?:[	 ][^\\n]*)?(?:\\n|$))`);let se=!1;for(;H;){let _e=!1,De="",Re="";if(!(U=q.exec(H))||this.rules.block.hr.test(H))break;De=U[0],H=H.substring(De.length);let Ae=U[2].split(`
`,1)[0].replace(/^\t+/,gn=>" ".repeat(3*gn.length)),We=H.split(`
`,1)[0],Ze=!Ae.trim(),qe=0;if(this.options.pedantic?(qe=2,Re=Ae.trimStart()):Ze?qe=U[1].length+1:(qe=U[2].search(/[^ ]/),qe=qe>4?1:qe,Re=Ae.slice(qe),qe+=U[1].length),Ze&&/^ *$/.test(We)&&(De+=We+`
`,H=H.substring(We.length+1),_e=!0),!_e){const gn=new RegExp(`^ {0,${Math.min(3,qe-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),Ye=new RegExp(`^ {0,${Math.min(3,qe-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),oe=new RegExp(`^ {0,${Math.min(3,qe-1)}}(?:\`\`\`|~~~)`),Me=new RegExp(`^ {0,${Math.min(3,qe-1)}}#`);for(;H;){const rt=H.split(`
`,1)[0];if(We=rt,this.options.pedantic&&(We=We.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),oe.test(We)||Me.test(We)||gn.test(We)||Ye.test(H))break;if(We.search(/[^ ]/)>=qe||!We.trim())Re+=`
`+We.slice(qe);else{if(Ze||Ae.search(/[^ ]/)>=4||oe.test(Ae)||Me.test(Ae)||Ye.test(Ae))break;Re+=`
`+We}!Ze&&!We.trim()&&(Ze=!0),De+=rt+`
`,H=H.substring(rt.length+1),Ae=We.slice(qe)}}z.loose||(se?z.loose=!0:/\n *\n *$/.test(De)&&(se=!0));let wt=null,Ft;this.options.gfm&&(wt=/^\[[ xX]\] /.exec(Re),wt&&(Ft=wt[0]!=="[ ] ",Re=Re.replace(/^\[[ xX]\] +/,""))),z.items.push({type:"list_item",raw:De,task:!!wt,checked:Ft,loose:!1,text:Re,tokens:[]}),z.raw+=De}z.items[z.items.length-1].raw=z.items[z.items.length-1].raw.trimEnd(),z.items[z.items.length-1].text=z.items[z.items.length-1].text.trimEnd(),z.raw=z.raw.trimEnd();for(let _e=0;_e<z.items.length;_e++)if(this.lexer.state.top=!1,z.items[_e].tokens=this.lexer.blockTokens(z.items[_e].text,[]),!z.loose){const De=z.items[_e].tokens.filter(Ae=>Ae.type==="space"),Re=De.length>0&&De.some(Ae=>/\n.*\n/.test(Ae.raw));z.loose=Re}if(z.loose)for(let _e=0;_e<z.items.length;_e++)z.items[_e].loose=!0;return z}}html(H){const U=this.rules.block.html.exec(H);if(U)return{type:"html",block:!0,raw:U[0],pre:U[1]==="pre"||U[1]==="script"||U[1]==="style",text:U[0]}}def(H){const U=this.rules.block.def.exec(H);if(U){const K=U[1].toLowerCase().replace(/\s+/g," "),P=U[2]?U[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",z=U[3]?U[3].substring(1,U[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):U[3];return{type:"def",tag:K,raw:U[0],href:P,title:z}}}table(H){const U=this.rules.block.table.exec(H);if(!U||!/[:|]/.test(U[2]))return;const K=v(U[1]),P=U[2].replace(/^\||\| *$/g,"").split("|"),z=U[3]&&U[3].trim()?U[3].replace(/\n[ \t]*$/,"").split(`
`):[],q={type:"table",raw:U[0],header:[],align:[],rows:[]};if(K.length===P.length){for(const se of P)/^ *-+: *$/.test(se)?q.align.push("right"):/^ *:-+: *$/.test(se)?q.align.push("center"):/^ *:-+ *$/.test(se)?q.align.push("left"):q.align.push(null);for(let se=0;se<K.length;se++)q.header.push({text:K[se],tokens:this.lexer.inline(K[se]),header:!0,align:q.align[se]});for(const se of z)q.rows.push(v(se,q.header.length).map((_e,De)=>({text:_e,tokens:this.lexer.inline(_e),header:!1,align:q.align[De]})));return q}}lheading(H){const U=this.rules.block.lheading.exec(H);if(U)return{type:"heading",raw:U[0],depth:U[2].charAt(0)==="="?1:2,text:U[1],tokens:this.lexer.inline(U[1])}}paragraph(H){const U=this.rules.block.paragraph.exec(H);if(U){const K=U[1].charAt(U[1].length-1)===`
`?U[1].slice(0,-1):U[1];return{type:"paragraph",raw:U[0],text:K,tokens:this.lexer.inline(K)}}}text(H){const U=this.rules.block.text.exec(H);if(U)return{type:"text",raw:U[0],text:U[0],tokens:this.lexer.inline(U[0])}}escape(H){const U=this.rules.inline.escape.exec(H);if(U)return{type:"escape",raw:U[0],text:u(U[1])}}tag(H){const U=this.rules.inline.tag.exec(H);if(U)return!this.lexer.state.inLink&&/^<a /i.test(U[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(U[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(U[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(U[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:U[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:U[0]}}link(H){const U=this.rules.inline.link.exec(H);if(U){const K=U[2].trim();if(!this.options.pedantic&&/^</.test(K)){if(!/>$/.test(K))return;const q=w(K.slice(0,-1),"\\");if((K.length-q.length)%2===0)return}else{const q=y(U[2],"()");if(q>-1){const _e=(U[0].indexOf("!")===0?5:4)+U[1].length+q;U[2]=U[2].substring(0,q),U[0]=U[0].substring(0,_e).trim(),U[3]=""}}let P=U[2],z="";if(this.options.pedantic){const q=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(P);q&&(P=q[1],z=q[3])}else z=U[3]?U[3].slice(1,-1):"";return P=P.trim(),/^</.test(P)&&(this.options.pedantic&&!/>$/.test(K)?P=P.slice(1):P=P.slice(1,-1)),S(U,{href:P&&P.replace(this.rules.inline.anyPunctuation,"$1"),title:z&&z.replace(this.rules.inline.anyPunctuation,"$1")},U[0],this.lexer)}}reflink(H,U){let K;if((K=this.rules.inline.reflink.exec(H))||(K=this.rules.inline.nolink.exec(H))){const P=(K[2]||K[1]).replace(/\s+/g," "),z=U[P.toLowerCase()];if(!z){const q=K[0].charAt(0);return{type:"text",raw:q,text:q}}return S(K,z,K[0],this.lexer)}}emStrong(H,U,K=""){let P=this.rules.inline.emStrongLDelim.exec(H);if(!P||P[3]&&K.match(/[\p{L}\p{N}]/u))return;if(!(P[1]||P[2]||"")||!K||this.rules.inline.punctuation.exec(K)){const q=[...P[0]].length-1;let se,_e,De=q,Re=0;const Ae=P[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(Ae.lastIndex=0,U=U.slice(-1*H.length+q);(P=Ae.exec(U))!=null;){if(se=P[1]||P[2]||P[3]||P[4]||P[5]||P[6],!se)continue;if(_e=[...se].length,P[3]||P[4]){De+=_e;continue}else if((P[5]||P[6])&&q%3&&!((q+_e)%3)){Re+=_e;continue}if(De-=_e,De>0)continue;_e=Math.min(_e,_e+De+Re);const We=[...P[0]][0].length,Ze=H.slice(0,q+P.index+We+_e);if(Math.min(q,_e)%2){const wt=Ze.slice(1,-1);return{type:"em",raw:Ze,text:wt,tokens:this.lexer.inlineTokens(wt)}}const qe=Ze.slice(2,-2);return{type:"strong",raw:Ze,text:qe,tokens:this.lexer.inlineTokens(qe)}}}}codespan(H){const U=this.rules.inline.code.exec(H);if(U){let K=U[2].replace(/\n/g," ");const P=/[^ ]/.test(K),z=/^ /.test(K)&&/ $/.test(K);return P&&z&&(K=K.substring(1,K.length-1)),K=u(K,!0),{type:"codespan",raw:U[0],text:K}}}br(H){const U=this.rules.inline.br.exec(H);if(U)return{type:"br",raw:U[0]}}del(H){const U=this.rules.inline.del.exec(H);if(U)return{type:"del",raw:U[0],text:U[2],tokens:this.lexer.inlineTokens(U[2])}}autolink(H){const U=this.rules.inline.autolink.exec(H);if(U){let K,P;return U[2]==="@"?(K=u(U[1]),P="mailto:"+K):(K=u(U[1]),P=K),{type:"link",raw:U[0],text:K,href:P,tokens:[{type:"text",raw:K,text:K}]}}}url(H){let U;if(U=this.rules.inline.url.exec(H)){let K,P;if(U[2]==="@")K=u(U[0]),P="mailto:"+K;else{let z;do z=U[0],U[0]=this.rules.inline._backpedal.exec(U[0])?.[0]??"";while(z!==U[0]);K=u(U[0]),U[1]==="www."?P="http://"+U[0]:P=U[0]}return{type:"link",raw:U[0],text:K,href:P,tokens:[{type:"text",raw:K,text:K}]}}}inlineText(H){const U=this.rules.inline.text.exec(H);if(U){let K;return this.lexer.state.inRawBlock?K=U[0]:K=u(U[0]),{type:"text",raw:U[0],text:K}}}}const T=/^(?: *(?:\n|$))+/,A=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,I=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,O=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,F=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,J=/(?:[*+-]|\d{1,9}[.)])/,Y=g(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,J).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),G=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,ie=/^[^\n]+/,Z=/(?!\s*\])(?:\\.|[^\[\]\\])+/,ue=g(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Z).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),be=g(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,J).getRegex(),ye="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ae=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,xe=g("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",ae).replace("tag",ye).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),fe=g(G).replace("hr",O).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ye).getRegex(),me={blockquote:g(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",fe).getRegex(),code:A,def:ue,fences:I,heading:F,hr:O,html:xe,lheading:Y,list:be,newline:T,paragraph:fe,table:_,text:ie},ze=g("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",O).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ye).getRegex(),it={...me,table:ze,paragraph:g(G).replace("hr",O).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ze).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ye).getRegex()},He={...me,html:g(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ae).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:_,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:g(G).replace("hr",O).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Y).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},st=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,gt=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,St=/^( {2,}|\\)\n(?!\s*$)/,Lt=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ci="\\p{P}\\p{S}",qs=g(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,ci).getRegex(),Wi=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Sn=g(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,ci).getRegex(),dn=g("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,ci).getRegex(),Er=g("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,ci).getRegex(),Pn=g(/\\([punct])/,"gu").replace(/punct/g,ci).getRegex(),Es=g(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),cr=g(ae).replace("(?:-->|$)","-->").getRegex(),Ts=g("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",cr).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Tr=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Lo=g(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Tr).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),hl=g(/^!?\[(label)\]\[(ref)\]/).replace("label",Tr).replace("ref",Z).getRegex(),Ea=g(/^!?\[(ref)\](?:\[\])?/).replace("ref",Z).getRegex(),Ns=g("reflink|nolink(?!\\()","g").replace("reflink",hl).replace("nolink",Ea).getRegex(),vs={_backpedal:_,anyPunctuation:Pn,autolink:Es,blockSkip:Wi,br:St,code:gt,del:_,emStrongLDelim:Sn,emStrongRDelimAst:dn,emStrongRDelimUnd:Er,escape:st,link:Lo,nolink:Ea,punctuation:qs,reflink:hl,reflinkSearch:Ns,tag:Ts,text:Lt,url:_},Xr={...vs,link:g(/^!?\[(label)\]\((.*?)\)/).replace("label",Tr).getRegex(),reflink:g(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Tr).getRegex()},Qr={...vs,escape:g(st).replace("])","~|])").getRegex(),url:g(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Is={...Qr,br:g(St).replace("{2,}","*").getRegex(),text:g(Qr.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ns={normal:me,gfm:it,pedantic:He},Ms={normal:vs,gfm:Qr,breaks:Is,pedantic:Xr};class fn{tokens;options;state;tokenizer;inlineQueue;constructor(H){this.tokens=[],this.tokens.links=Object.create(null),this.options=H||e.defaults,this.options.tokenizer=this.options.tokenizer||new L,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const U={block:ns.normal,inline:Ms.normal};this.options.pedantic?(U.block=ns.pedantic,U.inline=Ms.pedantic):this.options.gfm&&(U.block=ns.gfm,this.options.breaks?U.inline=Ms.breaks:U.inline=Ms.gfm),this.tokenizer.rules=U}static get rules(){return{block:ns,inline:Ms}}static lex(H,U){return new fn(U).lex(H)}static lexInline(H,U){return new fn(U).inlineTokens(H)}lex(H){H=H.replace(/\r\n|\r/g,`
`),this.blockTokens(H,this.tokens);for(let U=0;U<this.inlineQueue.length;U++){const K=this.inlineQueue[U];this.inlineTokens(K.src,K.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(H,U=[],K=!1){this.options.pedantic?H=H.replace(/\t/g,"    ").replace(/^ +$/gm,""):H=H.replace(/^( *)(\t+)/gm,(se,_e,De)=>_e+"    ".repeat(De.length));let P,z,q;for(;H;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(se=>(P=se.call({lexer:this},H,U))?(H=H.substring(P.raw.length),U.push(P),!0):!1))){if(P=this.tokenizer.space(H)){H=H.substring(P.raw.length),P.raw.length===1&&U.length>0?U[U.length-1].raw+=`
`:U.push(P);continue}if(P=this.tokenizer.code(H)){H=H.substring(P.raw.length),z=U[U.length-1],z&&(z.type==="paragraph"||z.type==="text")?(z.raw+=`
`+P.raw,z.text+=`
`+P.text,this.inlineQueue[this.inlineQueue.length-1].src=z.text):U.push(P);continue}if(P=this.tokenizer.fences(H)){H=H.substring(P.raw.length),U.push(P);continue}if(P=this.tokenizer.heading(H)){H=H.substring(P.raw.length),U.push(P);continue}if(P=this.tokenizer.hr(H)){H=H.substring(P.raw.length),U.push(P);continue}if(P=this.tokenizer.blockquote(H)){H=H.substring(P.raw.length),U.push(P);continue}if(P=this.tokenizer.list(H)){H=H.substring(P.raw.length),U.push(P);continue}if(P=this.tokenizer.html(H)){H=H.substring(P.raw.length),U.push(P);continue}if(P=this.tokenizer.def(H)){H=H.substring(P.raw.length),z=U[U.length-1],z&&(z.type==="paragraph"||z.type==="text")?(z.raw+=`
`+P.raw,z.text+=`
`+P.raw,this.inlineQueue[this.inlineQueue.length-1].src=z.text):this.tokens.links[P.tag]||(this.tokens.links[P.tag]={href:P.href,title:P.title});continue}if(P=this.tokenizer.table(H)){H=H.substring(P.raw.length),U.push(P);continue}if(P=this.tokenizer.lheading(H)){H=H.substring(P.raw.length),U.push(P);continue}if(q=H,this.options.extensions&&this.options.extensions.startBlock){let se=1/0;const _e=H.slice(1);let De;this.options.extensions.startBlock.forEach(Re=>{De=Re.call({lexer:this},_e),typeof De=="number"&&De>=0&&(se=Math.min(se,De))}),se<1/0&&se>=0&&(q=H.substring(0,se+1))}if(this.state.top&&(P=this.tokenizer.paragraph(q))){z=U[U.length-1],K&&z?.type==="paragraph"?(z.raw+=`
`+P.raw,z.text+=`
`+P.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=z.text):U.push(P),K=q.length!==H.length,H=H.substring(P.raw.length);continue}if(P=this.tokenizer.text(H)){H=H.substring(P.raw.length),z=U[U.length-1],z&&z.type==="text"?(z.raw+=`
`+P.raw,z.text+=`
`+P.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=z.text):U.push(P);continue}if(H){const se="Infinite loop on byte: "+H.charCodeAt(0);if(this.options.silent){console.error(se);break}else throw new Error(se)}}return this.state.top=!0,U}inline(H,U=[]){return this.inlineQueue.push({src:H,tokens:U}),U}inlineTokens(H,U=[]){let K,P,z,q=H,se,_e,De;if(this.tokens.links){const Re=Object.keys(this.tokens.links);if(Re.length>0)for(;(se=this.tokenizer.rules.inline.reflinkSearch.exec(q))!=null;)Re.includes(se[0].slice(se[0].lastIndexOf("[")+1,-1))&&(q=q.slice(0,se.index)+"["+"a".repeat(se[0].length-2)+"]"+q.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(se=this.tokenizer.rules.inline.blockSkip.exec(q))!=null;)q=q.slice(0,se.index)+"["+"a".repeat(se[0].length-2)+"]"+q.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(se=this.tokenizer.rules.inline.anyPunctuation.exec(q))!=null;)q=q.slice(0,se.index)+"++"+q.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;H;)if(_e||(De=""),_e=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(Re=>(K=Re.call({lexer:this},H,U))?(H=H.substring(K.raw.length),U.push(K),!0):!1))){if(K=this.tokenizer.escape(H)){H=H.substring(K.raw.length),U.push(K);continue}if(K=this.tokenizer.tag(H)){H=H.substring(K.raw.length),P=U[U.length-1],P&&K.type==="text"&&P.type==="text"?(P.raw+=K.raw,P.text+=K.text):U.push(K);continue}if(K=this.tokenizer.link(H)){H=H.substring(K.raw.length),U.push(K);continue}if(K=this.tokenizer.reflink(H,this.tokens.links)){H=H.substring(K.raw.length),P=U[U.length-1],P&&K.type==="text"&&P.type==="text"?(P.raw+=K.raw,P.text+=K.text):U.push(K);continue}if(K=this.tokenizer.emStrong(H,q,De)){H=H.substring(K.raw.length),U.push(K);continue}if(K=this.tokenizer.codespan(H)){H=H.substring(K.raw.length),U.push(K);continue}if(K=this.tokenizer.br(H)){H=H.substring(K.raw.length),U.push(K);continue}if(K=this.tokenizer.del(H)){H=H.substring(K.raw.length),U.push(K);continue}if(K=this.tokenizer.autolink(H)){H=H.substring(K.raw.length),U.push(K);continue}if(!this.state.inLink&&(K=this.tokenizer.url(H))){H=H.substring(K.raw.length),U.push(K);continue}if(z=H,this.options.extensions&&this.options.extensions.startInline){let Re=1/0;const Ae=H.slice(1);let We;this.options.extensions.startInline.forEach(Ze=>{We=Ze.call({lexer:this},Ae),typeof We=="number"&&We>=0&&(Re=Math.min(Re,We))}),Re<1/0&&Re>=0&&(z=H.substring(0,Re+1))}if(K=this.tokenizer.inlineText(z)){H=H.substring(K.raw.length),K.raw.slice(-1)!=="_"&&(De=K.raw.slice(-1)),_e=!0,P=U[U.length-1],P&&P.type==="text"?(P.raw+=K.raw,P.text+=K.text):U.push(K);continue}if(H){const Re="Infinite loop on byte: "+H.charCodeAt(0);if(this.options.silent){console.error(Re);break}else throw new Error(Re)}}return U}}class Jr{options;parser;constructor(H){this.options=H||e.defaults}space(H){return""}code({text:H,lang:U,escaped:K}){const P=(U||"").match(/^\S*/)?.[0],z=H.replace(/\n$/,"")+`
`;return P?'<pre><code class="language-'+u(P)+'">'+(K?z:u(z,!0))+`</code></pre>
`:"<pre><code>"+(K?z:u(z,!0))+`</code></pre>
`}blockquote({tokens:H}){return`<blockquote>
${this.parser.parse(H)}</blockquote>
`}html({text:H}){return H}heading({tokens:H,depth:U}){return`<h${U}>${this.parser.parseInline(H)}</h${U}>
`}hr(H){return`<hr>
`}list(H){const U=H.ordered,K=H.start;let P="";for(let se=0;se<H.items.length;se++){const _e=H.items[se];P+=this.listitem(_e)}const z=U?"ol":"ul",q=U&&K!==1?' start="'+K+'"':"";return"<"+z+q+`>
`+P+"</"+z+`>
`}listitem(H){let U="";if(H.task){const K=this.checkbox({checked:!!H.checked});H.loose?H.tokens.length>0&&H.tokens[0].type==="paragraph"?(H.tokens[0].text=K+" "+H.tokens[0].text,H.tokens[0].tokens&&H.tokens[0].tokens.length>0&&H.tokens[0].tokens[0].type==="text"&&(H.tokens[0].tokens[0].text=K+" "+H.tokens[0].tokens[0].text)):H.tokens.unshift({type:"text",raw:K+" ",text:K+" "}):U+=K+" "}return U+=this.parser.parse(H.tokens,!!H.loose),`<li>${U}</li>
`}checkbox({checked:H}){return"<input "+(H?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:H}){return`<p>${this.parser.parseInline(H)}</p>
`}table(H){let U="",K="";for(let z=0;z<H.header.length;z++)K+=this.tablecell(H.header[z]);U+=this.tablerow({text:K});let P="";for(let z=0;z<H.rows.length;z++){const q=H.rows[z];K="";for(let se=0;se<q.length;se++)K+=this.tablecell(q[se]);P+=this.tablerow({text:K})}return P&&(P=`<tbody>${P}</tbody>`),`<table>
<thead>
`+U+`</thead>
`+P+`</table>
`}tablerow({text:H}){return`<tr>
${H}</tr>
`}tablecell(H){const U=this.parser.parseInline(H.tokens),K=H.header?"th":"td";return(H.align?`<${K} align="${H.align}">`:`<${K}>`)+U+`</${K}>
`}strong({tokens:H}){return`<strong>${this.parser.parseInline(H)}</strong>`}em({tokens:H}){return`<em>${this.parser.parseInline(H)}</em>`}codespan({text:H}){return`<code>${H}</code>`}br(H){return"<br>"}del({tokens:H}){return`<del>${this.parser.parseInline(H)}</del>`}link({href:H,title:U,tokens:K}){const P=this.parser.parseInline(K),z=m(H);if(z===null)return P;H=z;let q='<a href="'+H+'"';return U&&(q+=' title="'+U+'"'),q+=">"+P+"</a>",q}image({href:H,title:U,text:K}){const P=m(H);if(P===null)return K;H=P;let z=`<img src="${H}" alt="${K}"`;return U&&(z+=` title="${U}"`),z+=">",z}text(H){return"tokens"in H&&H.tokens?this.parser.parseInline(H.tokens):H.text}}class qn{strong({text:H}){return H}em({text:H}){return H}codespan({text:H}){return H}del({text:H}){return H}html({text:H}){return H}text({text:H}){return H}link({text:H}){return""+H}image({text:H}){return""+H}br(){return""}}class Ji{options;renderer;textRenderer;constructor(H){this.options=H||e.defaults,this.options.renderer=this.options.renderer||new Jr,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new qn}static parse(H,U){return new Ji(U).parse(H)}static parseInline(H,U){return new Ji(U).parseInline(H)}parse(H,U=!0){let K="";for(let P=0;P<H.length;P++){const z=H[P];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[z.type]){const se=z,_e=this.options.extensions.renderers[se.type].call({parser:this},se);if(_e!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(se.type)){K+=_e||"";continue}}const q=z;switch(q.type){case"space":{K+=this.renderer.space(q);continue}case"hr":{K+=this.renderer.hr(q);continue}case"heading":{K+=this.renderer.heading(q);continue}case"code":{K+=this.renderer.code(q);continue}case"table":{K+=this.renderer.table(q);continue}case"blockquote":{K+=this.renderer.blockquote(q);continue}case"list":{K+=this.renderer.list(q);continue}case"html":{K+=this.renderer.html(q);continue}case"paragraph":{K+=this.renderer.paragraph(q);continue}case"text":{let se=q,_e=this.renderer.text(se);for(;P+1<H.length&&H[P+1].type==="text";)se=H[++P],_e+=`
`+this.renderer.text(se);U?K+=this.renderer.paragraph({type:"paragraph",raw:_e,text:_e,tokens:[{type:"text",raw:_e,text:_e}]}):K+=_e;continue}default:{const se='Token with "'+q.type+'" type was not found.';if(this.options.silent)return console.error(se),"";throw new Error(se)}}}return K}parseInline(H,U){U=U||this.renderer;let K="";for(let P=0;P<H.length;P++){const z=H[P];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[z.type]){const se=this.options.extensions.renderers[z.type].call({parser:this},z);if(se!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(z.type)){K+=se||"";continue}}const q=z;switch(q.type){case"escape":{K+=U.text(q);break}case"html":{K+=U.html(q);break}case"link":{K+=U.link(q);break}case"image":{K+=U.image(q);break}case"strong":{K+=U.strong(q);break}case"em":{K+=U.em(q);break}case"codespan":{K+=U.codespan(q);break}case"br":{K+=U.br(q);break}case"del":{K+=U.del(q);break}case"text":{K+=U.text(q);break}default:{const se='Token with "'+q.type+'" type was not found.';if(this.options.silent)return console.error(se),"";throw new Error(se)}}}return K}}class Ks{options;constructor(H){this.options=H||e.defaults}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(H){return H}postprocess(H){return H}processAllTokens(H){return H}}class Do{defaults=t();options=this.setOptions;parse=this.parseMarkdown(fn.lex,Ji.parse);parseInline=this.parseMarkdown(fn.lexInline,Ji.parseInline);Parser=Ji;Renderer=Jr;TextRenderer=qn;Lexer=fn;Tokenizer=L;Hooks=Ks;constructor(...H){this.use(...H)}walkTokens(H,U){let K=[];for(const P of H)switch(K=K.concat(U.call(this,P)),P.type){case"table":{const z=P;for(const q of z.header)K=K.concat(this.walkTokens(q.tokens,U));for(const q of z.rows)for(const se of q)K=K.concat(this.walkTokens(se.tokens,U));break}case"list":{const z=P;K=K.concat(this.walkTokens(z.items,U));break}default:{const z=P;this.defaults.extensions?.childTokens?.[z.type]?this.defaults.extensions.childTokens[z.type].forEach(q=>{const se=z[q].flat(1/0);K=K.concat(this.walkTokens(se,U))}):z.tokens&&(K=K.concat(this.walkTokens(z.tokens,U)))}}return K}use(...H){const U=this.defaults.extensions||{renderers:{},childTokens:{}};return H.forEach(K=>{const P={...K};if(P.async=this.defaults.async||P.async||!1,K.extensions&&(K.extensions.forEach(z=>{if(!z.name)throw new Error("extension name required");if("renderer"in z){const q=U.renderers[z.name];q?U.renderers[z.name]=function(...se){let _e=z.renderer.apply(this,se);return _e===!1&&(_e=q.apply(this,se)),_e}:U.renderers[z.name]=z.renderer}if("tokenizer"in z){if(!z.level||z.level!=="block"&&z.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const q=U[z.level];q?q.unshift(z.tokenizer):U[z.level]=[z.tokenizer],z.start&&(z.level==="block"?U.startBlock?U.startBlock.push(z.start):U.startBlock=[z.start]:z.level==="inline"&&(U.startInline?U.startInline.push(z.start):U.startInline=[z.start]))}"childTokens"in z&&z.childTokens&&(U.childTokens[z.name]=z.childTokens)}),P.extensions=U),K.renderer){const z=this.defaults.renderer||new Jr(this.defaults);for(const q in K.renderer){if(!(q in z))throw new Error(`renderer '${q}' does not exist`);if(["options","parser"].includes(q))continue;const se=q,_e=K.renderer[se],De=z[se];z[se]=(...Re)=>{let Ae=_e.apply(z,Re);return Ae===!1&&(Ae=De.apply(z,Re)),Ae||""}}P.renderer=z}if(K.tokenizer){const z=this.defaults.tokenizer||new L(this.defaults);for(const q in K.tokenizer){if(!(q in z))throw new Error(`tokenizer '${q}' does not exist`);if(["options","rules","lexer"].includes(q))continue;const se=q,_e=K.tokenizer[se],De=z[se];z[se]=(...Re)=>{let Ae=_e.apply(z,Re);return Ae===!1&&(Ae=De.apply(z,Re)),Ae}}P.tokenizer=z}if(K.hooks){const z=this.defaults.hooks||new Ks;for(const q in K.hooks){if(!(q in z))throw new Error(`hook '${q}' does not exist`);if(q==="options")continue;const se=q,_e=K.hooks[se],De=z[se];Ks.passThroughHooks.has(q)?z[se]=Re=>{if(this.defaults.async)return Promise.resolve(_e.call(z,Re)).then(We=>De.call(z,We));const Ae=_e.call(z,Re);return De.call(z,Ae)}:z[se]=(...Re)=>{let Ae=_e.apply(z,Re);return Ae===!1&&(Ae=De.apply(z,Re)),Ae}}P.hooks=z}if(K.walkTokens){const z=this.defaults.walkTokens,q=K.walkTokens;P.walkTokens=function(se){let _e=[];return _e.push(q.call(this,se)),z&&(_e=_e.concat(z.call(this,se))),_e}}this.defaults={...this.defaults,...P}}),this}setOptions(H){return this.defaults={...this.defaults,...H},this}lexer(H,U){return fn.lex(H,U??this.defaults)}parser(H,U){return Ji.parse(H,U??this.defaults)}parseMarkdown(H,U){return(P,z)=>{const q={...z},se={...this.defaults,...q},_e=this.onError(!!se.silent,!!se.async);if(this.defaults.async===!0&&q.async===!1)return _e(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof P>"u"||P===null)return _e(new Error("marked(): input parameter is undefined or null"));if(typeof P!="string")return _e(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(P)+", string expected"));if(se.hooks&&(se.hooks.options=se),se.async)return Promise.resolve(se.hooks?se.hooks.preprocess(P):P).then(De=>H(De,se)).then(De=>se.hooks?se.hooks.processAllTokens(De):De).then(De=>se.walkTokens?Promise.all(this.walkTokens(De,se.walkTokens)).then(()=>De):De).then(De=>U(De,se)).then(De=>se.hooks?se.hooks.postprocess(De):De).catch(_e);try{se.hooks&&(P=se.hooks.preprocess(P));let De=H(P,se);se.hooks&&(De=se.hooks.processAllTokens(De)),se.walkTokens&&this.walkTokens(De,se.walkTokens);let Re=U(De,se);return se.hooks&&(Re=se.hooks.postprocess(Re)),Re}catch(De){return _e(De)}}}onError(H,U){return K=>{if(K.message+=`
Please report this to https://github.com/markedjs/marked.`,H){const P="<p>An error occurred:</p><pre>"+u(K.message+"",!0)+"</pre>";return U?Promise.resolve(P):P}if(U)return Promise.reject(K);throw K}}}const Gs=new Do;function ui(xt,H){return Gs.parse(xt,H)}ui.options=ui.setOptions=function(xt){return Gs.setOptions(xt),ui.defaults=Gs.defaults,i(ui.defaults),ui},ui.getDefaults=t,ui.defaults=e.defaults,ui.use=function(...xt){return Gs.use(...xt),ui.defaults=Gs.defaults,i(ui.defaults),ui},ui.walkTokens=function(xt,H){return Gs.walkTokens(xt,H)},ui.parseInline=Gs.parseInline,ui.Parser=Ji,ui.parser=Ji.parse,ui.Renderer=Jr,ui.TextRenderer=qn,ui.Lexer=fn,ui.lexer=fn.lex,ui.Tokenizer=L,ui.Hooks=Ks,ui.parse=ui;const ur=ui.options,dl=ui.setOptions,eo=ui.use,Vi=ui.walkTokens,Eo=ui.parseInline,nc=ui,sc=Ji.parse,Ta=fn.lex;e.Hooks=Ks,e.Lexer=fn,e.Marked=Do,e.Parser=Ji,e.Renderer=Jr,e.TextRenderer=qn,e.Tokenizer=L,e.getDefaults=t,e.lexer=Ta,e.marked=ui,e.options=ur,e.parse=nc,e.parseInline=Eo,e.parser=sc,e.setOptions=dl,e.use=eo,e.walkTokens=Vi})})();Ds.Hooks||ts.Hooks;Ds.Lexer||ts.Lexer;Ds.Marked||ts.Marked;Ds.Parser||ts.Parser;var Iz=Ds.Renderer||ts.Renderer;Ds.TextRenderer||ts.TextRenderer;Ds.Tokenizer||ts.Tokenizer;var gre=Ds.defaults||ts.defaults;Ds.getDefaults||ts.getDefaults;var I2=Ds.lexer||ts.lexer;Ds.marked||ts.marked;Ds.options||ts.options;var Mz=Ds.parse||ts.parse;Ds.parseInline||ts.parseInline;var mre=Ds.parser||ts.parser;Ds.setOptions||ts.setOptions;Ds.use||ts.use;Ds.walkTokens||ts.walkTokens;function pre(s){return JSON.stringify(s,_re)}function l7(s){let e=JSON.parse(s);return e=c7(e),e}function _re(s,e){return e instanceof RegExp?{$mid:2,source:e.source,flags:e.flags}:e}function c7(s,e=0){if(!s||e>200)return s;if(typeof s=="object"){switch(s.$mid){case 1:return Et.revive(s);case 2:return new RegExp(s.source,s.flags);case 17:return new Date(s.source)}if(s instanceof A8||s instanceof Uint8Array)return s;if(Array.isArray(s))for(let t=0;t<s.length;++t)s[t]=c7(s[t],e+1);else for(const t in s)Object.hasOwnProperty.call(s,t)&&(s[t]=c7(s[t],e+1))}return s}const Uk=Object.freeze({image:({href:s,title:e,text:t})=>{let i=[],n=[];return s&&({href:s,dimensions:i}=fre(s),n.push(`src="${Gb(s)}"`)),t&&n.push(`alt="${Gb(t)}"`),e&&n.push(`title="${Gb(e)}"`),i.length&&(n=n.concat(i)),"<img "+n.join(" ")+">"},paragraph({tokens:s}){return`<p>${this.parser.parseInline(s)}</p>`},link({href:s,title:e,tokens:t}){let i=this.parser.parseInline(t);return typeof s!="string"?"":(s===i&&(i=jk(i)),e=typeof e=="string"?Gb(jk(e)):"",s=jk(s),s=s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${s}" title="${e||s}" draggable="false">${i}</a>`)}});function sE(s,e={},t={}){const i=new Qe;let n=!1;const r=Q8(e),o=function(v){let w;try{w=l7(decodeURIComponent(v))}catch{}return w?(w=KB(w,y=>{if(s.uris&&s.uris[y])return Et.revive(s.uris[y])}),encodeURIComponent(JSON.stringify(w))):v},a=function(v,w){const y=s.uris&&s.uris[v];let S=Et.revive(y);return w?v.startsWith(Dt.data+":")?v:(S||(S=Et.parse(v)),a2.uriToBrowserUri(S).toString(!0)):!S||Et.parse(v).toString()===S.toString()?v:(S.query&&(S=S.with({query:o(S.query)})),S.toString())},l=new Iz;l.image=Uk.image,l.link=Uk.link,l.paragraph=Uk.paragraph;const c=[],u=[];if(e.codeBlockRendererSync?l.code=({text:v,lang:w})=>{const y=TA.nextId(),S=e.codeBlockRendererSync(NA(w),v);return u.push([y,S]),`<div class="code" data-code="${y}">${t1(v)}</div>`}:e.codeBlockRenderer&&(l.code=({text:v,lang:w})=>{const y=TA.nextId(),S=e.codeBlockRenderer(NA(w),v);return c.push(S.then(k=>[y,k])),`<div class="code" data-code="${y}">${t1(v)}</div>`}),e.actionHandler){const v=function(S){let k=S.target;if(!(k.tagName!=="A"&&(k=k.parentElement,!k||k.tagName!=="A")))try{let L=k.dataset.href;L&&(s.baseUri&&(L=$k(Et.from(s.baseUri),L)),e.actionHandler.callback(L,S))}catch(L){_i(L)}finally{S.preventDefault()}},w=e.actionHandler.disposables.add(new Rt(r,"click")),y=e.actionHandler.disposables.add(new Rt(r,"auxclick"));e.actionHandler.disposables.add(Te.any(w.event,y.event)(S=>{const k=new Ya(tt(r),S);!k.leftButton&&!k.middleButton||v(k)})),e.actionHandler.disposables.add(ge(r,"keydown",S=>{const k=new Ni(S);!k.equals(10)&&!k.equals(3)||v(k)}))}s.supportHtml||(l.html=({text:v})=>e.sanitizerOptions?.replaceWithPlaintext?t1(v):(s.isTrusted?v.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?v:""),t.renderer=l;let d=s.value??"";d.length>1e5&&(d=`${d.substr(0,1e5)}…`),s.supportThemeIcons&&(d=nre(d));let g;if(e.fillInIncompleteTokens){const v={...gre,...t},w=I2(d,v),y=Nre(w);g=mre(y,v)}else g=Mz(d,{...t,async:!1});s.supportThemeIcons&&(g=of(g).map(w=>typeof w=="string"?w:w.outerHTML).join(""));const _=new DOMParser().parseFromString(u7({isTrusted:s.isTrusted,...e.sanitizerOptions},g),"text/html");if(_.body.querySelectorAll("img, audio, video, source").forEach(v=>{const w=v.getAttribute("src");if(w){let y=w;try{s.baseUri&&(y=$k(Et.from(s.baseUri),y))}catch{}if(v.setAttribute("src",a(y,!0)),e.remoteImageIsAllowed){const S=Et.parse(y);S.scheme!==Dt.file&&S.scheme!==Dt.data&&!e.remoteImageIsAllowed(S)&&v.replaceWith(at("",void 0,v.outerHTML))}}}),_.body.querySelectorAll("a").forEach(v=>{const w=v.getAttribute("href");if(v.setAttribute("href",""),!w||/^data:|javascript:/i.test(w)||/^command:/i.test(w)&&!s.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(w))v.replaceWith(...v.childNodes);else{let y=a(w,!1);s.baseUri&&(y=$k(Et.from(s.baseUri),w)),v.dataset.href=y}}),r.innerHTML=u7({isTrusted:s.isTrusted,...e.sanitizerOptions},_.body.innerHTML),c.length>0)Promise.all(c).then(v=>{if(n)return;const w=new Map(v),y=r.querySelectorAll("div[data-code]");for(const S of y){const k=w.get(S.dataset.code??"");k&&nr(S,k)}e.asyncRenderCallback?.()});else if(u.length>0){const v=new Map(u),w=r.querySelectorAll("div[data-code]");for(const y of w){const S=v.get(y.dataset.code??"");S&&nr(y,S)}}if(e.asyncRenderCallback)for(const v of r.getElementsByTagName("img")){const w=i.add(ge(v,"load",()=>{w.dispose(),e.asyncRenderCallback()}))}return{element:r,dispose:()=>{n=!0,i.dispose()}}}function NA(s){if(!s)return"";const e=s.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:s}function $k(s,e){return/^\w[\w\d+.-]*:/.test(e)?e:s.path.endsWith("/")?LA(s,e).toString():LA(lre(s),e).toString()}const vre=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function u7(s,e){const{config:t,allowedSchemes:i}=wre(s),n=new Qe;n.add(IA("uponSanitizeAttribute",(r,o)=>{if(o.attrName==="style"||o.attrName==="class"){if(r.tagName==="SPAN"){if(o.attrName==="style"){o.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(border-radius:[0-9]+px;)?$/.test(o.attrValue);return}else if(o.attrName==="class"){o.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(o.attrValue);return}}o.keepAttr=!1;return}else if(r.tagName==="INPUT"&&r.attributes.getNamedItem("type")?.value==="checkbox"){if(o.attrName==="type"&&o.attrValue==="checkbox"||o.attrName==="disabled"||o.attrName==="checked"){o.keepAttr=!0;return}o.keepAttr=!1}})),n.add(IA("uponSanitizeElement",(r,o)=>{if(o.tagName==="input"&&(r.attributes.getNamedItem("type")?.value==="checkbox"?r.setAttribute("disabled",""):s.replaceWithPlaintext||r.remove()),s.replaceWithPlaintext&&!o.allowedTags[o.tagName]&&o.tagName!=="body"&&r.parentElement){let a,l;if(o.tagName==="#comment")a=`<!--${r.textContent}-->`;else{const g=vre.includes(o.tagName),m=r.attributes.length?" "+Array.from(r.attributes).map(_=>`${_.name}="${_.value}"`).join(" "):"";a=`<${o.tagName}${m}>`,g||(l=`</${o.tagName}>`)}const c=document.createDocumentFragment(),u=r.parentElement.ownerDocument.createTextNode(a);c.appendChild(u);const d=l?r.parentElement.ownerDocument.createTextNode(l):void 0;for(;r.firstChild;)c.appendChild(r.firstChild);d&&c.appendChild(d),r.nodeType===Node.COMMENT_NODE?r.parentElement.insertBefore(c,r):r.parentElement.replaceChild(c,r)}})),n.add(XQ(i));try{return WW(e,{...t,RETURN_TRUSTED_TYPE:!0})}finally{n.dispose()}}const bre=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function wre(s){const e=[Dt.http,Dt.https,Dt.mailto,Dt.data,Dt.file,Dt.vscodeFileResource,Dt.vscodeRemote,Dt.vscodeRemoteResource];return s.isTrusted&&e.push(Dt.command),{config:{ALLOWED_TAGS:s.allowedTags??[...QQ],ALLOWED_ATTR:bre,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}function Cre(s){return typeof s=="string"?s:yre(s)}function yre(s,e){let t=s.value??"";t.length>1e5&&(t=`${t.substr(0,1e5)}…`);const i=Mz(t,{async:!1,renderer:kre.value}).replace(/&(#\d+|[a-zA-Z]+);/g,n=>Sre.get(n)??n);return u7({isTrusted:!1},i).toString()}const Sre=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function xre(){const s=new Iz;return s.code=({text:e})=>e,s.blockquote=({text:e})=>e+`
`,s.html=e=>"",s.heading=function({tokens:e}){return this.parser.parseInline(e)+`
`},s.hr=()=>"",s.list=function({items:e}){return e.map(t=>this.listitem(t)).join(`
`)+`
`},s.listitem=({text:e})=>e+`
`,s.paragraph=function({tokens:e}){return this.parser.parseInline(e)+`
`},s.table=function({header:e,rows:t}){return e.map(i=>this.tablecell(i)).join(" ")+`
`+t.map(i=>i.map(n=>this.tablecell(n)).join(" ")).join(`
`)+`
`},s.tablerow=({text:e})=>e,s.tablecell=function({tokens:e}){return this.parser.parseInline(e)},s.strong=({text:e})=>e,s.em=({text:e})=>e,s.codespan=({text:e})=>e,s.br=e=>`
`,s.del=({text:e})=>e,s.image=e=>"",s.text=({text:e})=>e,s.link=({text:e})=>e,s}const kre=new Nh(s=>xre());function KC(s){let e="";return s.forEach(t=>{e+=t.raw}),e}function Rz(s){if(s.tokens)for(let e=s.tokens.length-1;e>=0;e--){const t=s.tokens[e];if(t.type==="text"){const i=t.raw.split(`
`),n=i[i.length-1];if(n.includes("`"))return Mre(s);if(n.includes("**"))return Bre(s);if(n.match(/\*\w/))return Rre(s);if(n.match(/(^|\s)__\w/))return Wre(s);if(n.match(/(^|\s)_\w/))return Are(s);if(Lre(n)||Dre(n)&&s.tokens.slice(0,e).some(r=>r.type==="text"&&r.raw.match(/\[[^\]]*$/))){const r=s.tokens.slice(e+1);return r[0]?.type==="link"&&r[1]?.type==="text"&&r[1].raw.match(/^ *"[^"]*$/)||n.match(/^[^"]* +"[^"]*$/)?Ore(s):Pre(s)}else if(n.match(/(^|\s)\[\w*/))return Fre(s)}}}function Lre(s){return!!s.match(/(^|\s)\[.*\]\(\w*/)}function Dre(s){return!!s.match(/^[^\[]*\]\([^\)]*$/)}function Ere(s){const e=s.items[s.items.length-1],t=e.tokens?e.tokens[e.tokens.length-1]:void 0;let i;if(t?.type==="text"&&!("inRawBlock"in e)&&(i=Rz(t)),!i||i.type!=="paragraph")return;const n=KC(s.items.slice(0,-1)),r=e.raw.match(/^(\s*(-|\d+\.|\*) +)/)?.[0];if(!r)return;const o=r+KC(e.tokens.slice(0,-1))+i.raw,a=I2(n+o)[0];if(a.type==="list")return a}const Tre=3;function Nre(s){for(let e=0;e<Tre;e++){const t=Ire(s);if(t)s=t;else break}return s}function Ire(s){let e,t;for(e=0;e<s.length;e++){const i=s[e];if(i.type==="paragraph"&&i.raw.match(/(\n|^)\|/)){t=Vre(s.slice(e));break}if(e===s.length-1&&i.type==="list"){const n=Ere(i);if(n){t=[n];break}}if(e===s.length-1&&i.type==="paragraph"){const n=Rz(i);if(n){t=[n];break}}}if(t){const i=[...s.slice(0,e),...t];return i.links=s.links,i}return null}function Mre(s){return Kh(s,"`")}function Rre(s){return Kh(s,"*")}function Are(s){return Kh(s,"_")}function Pre(s){return Kh(s,")")}function Ore(s){return Kh(s,'")')}function Fre(s){return Kh(s,"](https://microsoft.com)")}function Bre(s){return Kh(s,"**")}function Wre(s){return Kh(s,"__")}function Kh(s,e){const t=KC(Array.isArray(s)?s:[s]);return I2(t+e)[0]}function Vre(s){const e=KC(s),t=e.split(`
`);let i,n=!1;for(let r=0;r<t.length;r++){const o=t[r].trim();if(typeof i>"u"&&o.match(/^\s*\|/)){const a=o.match(/(\|[^\|]+)(?=\||$)/g);a&&(i=a.length)}else if(typeof i=="number")if(o.match(/^\s*\|/)){if(r!==t.length-1)return;n=!0}else return}if(typeof i=="number"&&i>0){const r=n?t.slice(0,-1).join(`
`):e,o=!!r.match(/\|\s*$/),a=r+(o?"":"|")+`
|${" --- |".repeat(i)}`;return I2(a)}}function IA(s,e){return VW(s,e),bt(()=>zW(s))}const Ic=class Ic{static createEmpty(e,t){const i=Ic.defaultTokenMetadata,n=new Uint32Array(2);return n[0]=e.length,n[1]=i,new Ic(n,e,t)}static createFromTextAndMetadata(e,t){let i=0,n="";const r=new Array;for(const{text:o,metadata:a}of e)r.push(i+o.length,a),i+=o.length,n+=o;return new Ic(new Uint32Array(r),n,t)}constructor(e,t,i){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=i}equals(e){return e instanceof Ic?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,i){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const n=t<<1,r=n+(i<<1);for(let o=n;o<r;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],i=Ka.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(i)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return Ka.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return Ka.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return Ka.getClassNameFromMetadata(t)}getInlineStyle(e,t){const i=this._tokens[(e<<1)+1];return Ka.getInlineStyleFromMetadata(i,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return Ka.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return Ic.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,i){return new rE(this,e,t,i)}static convertToEndOffset(e,t){const n=(e.length>>>1)-1;for(let r=0;r<n;r++)e[r<<1]=e[r+1<<1];e[n<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let i=0,n=(e.length>>>1)-1;for(;i<n;){const r=i+Math.floor((n-i)/2),o=e[r<<1];if(o===t)return r+1;o<t?i=r+1:o>t&&(n=r)}return i}withInserted(e){if(e.length===0)return this;let t=0,i=0,n="";const r=new Array;let o=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=i<e.length?e[i]:null;if(a!==-1&&(l===null||a<=l.offset)){n+=this._text.substring(o,a);const c=this._tokens[(t<<1)+1];r.push(n.length,c),t++,o=a}else if(l){if(l.offset>o){n+=this._text.substring(o,l.offset);const c=this._tokens[(t<<1)+1];r.push(n.length,c),o=l.offset}n+=l.text,r.push(n.length,l.tokenMetadata),i++}else break}return new Ic(new Uint32Array(r),n,this.languageIdCodec)}getTokenText(e){const t=this.getStartOffset(e),i=this.getEndOffset(e);return this._text.substring(t,i)}forEach(e){const t=this.getCount();for(let i=0;i<t;i++)e(i)}};Ic.defaultTokenMetadata=(32768|2<<24)>>>0;let es=Ic;class rE{constructor(e,t,i,n){this._source=e,this._startOffset=t,this._endOffset=i,this._deltaOffset=n,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let r=this._firstTokenIndex,o=e.getCount();r<o&&!(e.getStartOffset(r)>=i);r++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof rE?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){const t=this._firstTokenIndex+e,i=this._source.getStartOffset(t),n=this._source.getEndOffset(t);let r=this._source.getTokenText(t);return i<this._startOffset&&(r=r.substring(this._startOffset-i)),n>this._endOffset&&(r=r.substring(0,r.length-(n-this._endOffset))),r}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}}const g_=new class{clone(){return this}equals(s){return this===s}};function Az(s,e){return new c8([new e_(0,"",s)],e)}function oE(s,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(s<<0|0|0|32768|2<<24)>>>0,new s2(t,e===null?g_:e)}const MA={getInitialState:()=>g_,tokenizeEncoded:(s,e,t)=>oE(0,t)};async function zre(s,e,t){if(!t)return RA(e,s.languageIdCodec,MA);const i=await un.getOrCreate(t);return RA(e,s.languageIdCodec,i||MA)}function Hre(s,e,t,i,n,r,o){let a="<div>",l=i,c=0,u=!0;for(let d=0,g=e.getCount();d<g;d++){const m=e.getEndOffset(d);if(m<=i)continue;let _="";for(;l<m&&l<n;l++){const v=s.charCodeAt(l);switch(v){case 9:{let w=r-(l+c)%r;for(c+=w-1;w>0;)o&&u?(_+="&#160;",u=!1):(_+=" ",u=!0),w--;break}case 60:_+="&lt;",u=!1;break;case 62:_+="&gt;",u=!1;break;case 38:_+="&amp;",u=!1;break;case 0:_+="&#00;",u=!1;break;case 65279:case 8232:case 8233:case 133:_+="�",u=!1;break;case 13:_+="&#8203",u=!1;break;case 32:o&&u?(_+="&#160;",u=!1):(_+=" ",u=!0);break;default:_+=String.fromCharCode(v),u=!1}}if(a+=`<span style="${e.getInlineStyle(d,t)}">${_}</span>`,m>n||l>=n)break}return a+="</div>",a}function RA(s,e,t){let i='<div class="monaco-tokenized-source">';const n=yp(s);let r=t.getInitialState();for(let o=0,a=n.length;o<a;o++){const l=n[o];o>0&&(i+="<br/>");const c=t.tokenizeEncoded(l,!0,r);es.convertToEndOffset(c.tokens,l.length);const d=new es(c.tokens,l,e).inflate();let g=0;for(let m=0,_=d.getCount();m<_;m++){const v=d.getClassName(m),w=d.getEndOffset(m);i+=`<span class="${v}">${t1(l.substring(g,w))}</span>`,g=w}r=c.endState}return i+="</div>",i}var jre=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},AA=function(s,e){return function(t,i){e(t,i,s)}},h7,ff;let d7=(ff=class{constructor(e,t,i){this._options=e,this._languageService=t,this._openerService=i,this._onDidRenderAsync=new re,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const n=new Qe,r=n.add(sE(e,{...this._getRenderOptions(e,n),...t},i));return r.element.classList.add("rendered-markdown"),{element:r.element,dispose:()=>n.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(i,n)=>{let r;i?r=this._languageService.getLanguageIdByLanguageName(i):this._options.editor&&(r=this._options.editor.getModel()?.getLanguageId()),r||(r=pa);const o=await zre(this._languageService,n,r),a=document.createElement("span");if(a.innerHTML=h7._ttpTokenizer?.createHTML(o)??o,this._options.editor){const l=this._options.editor.getOption(50);xs(a,l)}else this._options.codeBlockFontFamily&&(a.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(a.style.fontSize=this._options.codeBlockFontSize),a},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:i=>Pz(this._openerService,i,e.isTrusted),disposables:t}}}},h7=ff,ff._ttpTokenizer=Kf("tokenizeToString",{createHTML(e){return e}}),ff);d7=h7=jre([AA(1,$n),AA(2,av)],d7);async function Pz(s,e,t){try{return await s.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:Ure(t)})}catch(i){return _i(i),!1}}function Ure(s){return s===!0?!0:s&&Array.isArray(s.enabledCommands)?s.enabledCommands:!1}const ll=Ut("accessibilityService"),$re=new Je("accessibilityModeEnabled",!1),PA=2e4;let Fd,$w,f7,qw,g7;function qre(s){Fd=document.createElement("div"),Fd.className="monaco-aria-container";const e=()=>{const i=document.createElement("div");return i.className="monaco-alert",i.setAttribute("role","alert"),i.setAttribute("aria-atomic","true"),Fd.appendChild(i),i};$w=e(),f7=e();const t=()=>{const i=document.createElement("div");return i.className="monaco-status",i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),Fd.appendChild(i),i};qw=t(),g7=t(),s.appendChild(Fd)}function m_(s){Fd&&($w.textContent!==s?(el(f7),ZC($w,s)):(el($w),ZC(f7,s)))}function GC(s){Fd&&(qw.textContent!==s?(el(g7),ZC(qw,s)):(el(qw),ZC(g7,s)))}function ZC(s,e){el(s),e.length>PA&&(e=e.substr(0,PA)),s.textContent=e,s.style.visibility="hidden",s.style.visibility="visible"}var Kre=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},E0=function(s,e){return function(t,i){e(t,i,s)}};const vl=at;let m7=class extends bu{get _targetWindow(){return tt(this._target.targetElements[0])}get _targetDocumentElement(){return tt(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===2?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,i,n,r,o){super(),this._keybindingService=t,this._configurationService=i,this._openerService=n,this._instantiationService=r,this._accessibilityService=o,this._messageListeners=new Qe,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new re),this._onRequestLayout=this._register(new re),this._linkHandler=e.linkHandler||(g=>Pz(this._openerService,g,Tm(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new Gre(e.target),this._hoverPointer=e.appearance?.showPointer?vl("div.workbench-hover-pointer"):void 0,this._hover=this._register(new Dse),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),e.appearance?.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),e.appearance?.skipFadeInAnimation&&this._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),e.position?.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=e.position?.hoverPosition??3,this.onmousedown(this._hover.containerDomNode,g=>g.stopPropagation()),this.onkeydown(this._hover.containerDomNode,g=>{g.equals(9)&&this.dispose()}),this._register(ge(this._targetWindow,"blur",()=>this.dispose()));const a=vl("div.hover-row.markdown-hover"),l=vl("div.hover-contents");if(typeof e.content=="string")l.textContent=e.content,l.style.whiteSpace="pre-wrap";else if(Jn(e.content))l.appendChild(e.content),l.classList.add("html-hover-contents");else{const g=e.content,m=this._instantiationService.createInstance(d7,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||wo.fontFamily}),{element:_}=m.render(g,{actionHandler:{callback:v=>this._linkHandler(v),disposables:this._messageListeners},asyncRenderCallback:()=>{l.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});l.appendChild(_)}if(a.appendChild(l),this._hover.contentsDomNode.appendChild(a),e.actions&&e.actions.length>0){const g=vl("div.hover-row.status-bar"),m=vl("div.actions");e.actions.forEach(_=>{const v=this._keybindingService.lookupKeybinding(_.commandId),w=v?v.getLabel():null;X8.render(m,{label:_.label,commandId:_.commandId,run:y=>{_.run(y),this.dispose()},iconClass:_.iconClass},w)}),g.appendChild(m),this._hover.containerDomNode.appendChild(g)}this._hoverContainer=vl("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode);let c;if(e.actions&&e.actions.length>0?c=!1:e.persistence?.hideOnHover===void 0?c=typeof e.content=="string"||Tm(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):c=e.persistence.hideOnHover,e.appearance?.showHoverHint){const g=vl("div.hover-row.status-bar"),m=vl("div.info");m.textContent=b("hoverhint","Hold {0} key to mouse over",qt?"Option":"Alt"),g.appendChild(m),this._hover.containerDomNode.appendChild(g)}const u=[...this._target.targetElements];c||u.push(this._hoverContainer);const d=this._register(new OA(u));if(this._register(d.onMouseOut(()=>{this._isLocked||this.dispose()})),c){const g=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new OA(g)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=d}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){const i=D8(this._hoverContainer,vl("div")),n=Ge(this._hoverContainer,vl("div"));i.tabIndex=0,n.tabIndex=0,this._register(ge(n,"focus",r=>{e.focus(),r.preventDefault()})),this._register(ge(i,"focus",r=>{t.focus(),r.preventDefault()}))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){const i=e.childNodes.item(e.childNodes.length-t-1);if(i.nodeType===i.ELEMENT_NODE){const r=i;if(typeof r.tabIndex=="number"&&r.tabIndex>=0)return r}const n=this.findLastFocusableChild(i);if(n)return n}}render(e){e.appendChild(this._hoverContainer);const i=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&Ese(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),this._keybindingService.lookupKeybinding("editor.action.accessibleView")?.getAriaLabel());i&&GC(i),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const e=u=>{const d=qW(u),g=u.getBoundingClientRect();return{top:g.top*d,bottom:g.bottom*d,right:g.right*d,left:g.left*d}},t=this._target.targetElements.map(u=>e(u)),{top:i,right:n,bottom:r,left:o}=t[0],a=n-o,l=r-i,c={top:i,right:n,bottom:r,left:o,width:a,height:l,center:{x:o+a/2,y:i+l/2}};if(this.adjustHorizontalHoverPosition(c),this.adjustVerticalHoverPosition(c),this.adjustHoverMaxHeight(c),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:c.left+=3,c.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:c.left-=3,c.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:c.top+=3,c.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:c.top-=3,c.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px";break}c.center.x=c.left+a/2,c.center.y=c.top+l/2}this.computeXCordinate(c),this.computeYCordinate(c),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(c)),this._hover.onContentsChanged()}computeXCordinate(e){const t=this._hover.containerDomNode.clientWidth+2;this._target.x!==void 0?this._x=this._target.x:this._hoverPosition===1?this._x=e.right:this._hoverPosition===0?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){this._target.y!==void 0?this._y=this._target.y:this._hoverPosition===3?this._y=e.top:this._hoverPosition===2?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(this._target.x!==void 0)return;const t=this._hoverPointer?3:0;if(this._forcePosition){const i=t+2;this._hoverPosition===1?this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-e.right-i}px`:this._hoverPosition===0&&(this._hover.containerDomNode.style.maxWidth=`${e.left-i}px`);return}this._hoverPosition===1?this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t&&(e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=0:this._hoverPosition=2):this._hoverPosition===0&&(e.left<this._hover.containerDomNode.clientWidth+t&&(this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=1:this._hoverPosition=2),e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1))}adjustVerticalHoverPosition(e){if(this._target.y!==void 0||this._forcePosition)return;const t=this._hoverPointer?3:0;this._hoverPosition===3?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=2):this._hoverPosition===2&&e.bottom+this._hover.containerDomNode.clientHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight/2;if(this._forcePosition){const i=(this._hoverPointer?3:0)+2;this._hoverPosition===3?t=Math.min(t,e.top-i):this._hoverPosition===2&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-i))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const i=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==i&&(this._hover.contentsDomNode.style.paddingRight=i)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(this._hoverPosition===0?"right":"left");const t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=`${e.center.y-(this._y-t)-3}px`:this._hoverPointer.style.top=`${Math.round(t/2)-3}px`;break}case 3:case 2:{this._hoverPointer.classList.add(this._hoverPosition===3?"bottom":"top");const t=this._hover.containerDomNode.clientWidth;let i=Math.round(t/2)-3;const n=this._x+i;(n<e.left||n>e.right)&&(i=e.center.x-this._x-3),this._hoverPointer.style.left=`${i}px`;break}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};m7=Kre([E0(1,ps),E0(2,Xi),E0(3,av),E0(4,hi),E0(5,ll)],m7);class OA extends bu{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e){super(),this._elements=e,this._isMouseIn=!0,this._onMouseOut=this._register(new re),this._elements.forEach(t=>this.onmouseover(t,()=>this._onTargetMouseOver(t))),this._elements.forEach(t=>this.onmouseleave(t,()=>this._onTargetMouseLeave(t)))}_onTargetMouseOver(e){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(e)}_onTargetMouseLeave(e){this._isMouseIn=!1,this._evaluateMouseState(e)}_evaluateMouseState(e){this._clearEvaluateMouseStateTimeout(e),this._mouseTimeout=tt(e).setTimeout(()=>this._fireIfMouseOutside(),0)}_clearEvaluateMouseStateTimeout(e){this._mouseTimeout&&(tt(e).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class Gre{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}}var ys;(function(s){function e(r,o){if(r.start>=o.end||o.start>=r.end)return{start:0,end:0};const a=Math.max(r.start,o.start),l=Math.min(r.end,o.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}s.intersect=e;function t(r){return r.end-r.start<=0}s.isEmpty=t;function i(r,o){return!t(e(r,o))}s.intersects=i;function n(r,o){const a=[],l={start:r.start,end:Math.min(o.start,r.end)},c={start:Math.max(o.end,r.start),end:r.end};return t(l)||a.push(l),t(c)||a.push(c),a}s.relativeComplement=n})(ys||(ys={}));function Zre(s){const e=s;return!!e&&typeof e.x=="number"&&typeof e.y=="number"}var _h;(function(s){s[s.AVOID=0]="AVOID",s[s.ALIGN=1]="ALIGN"})(_h||(_h={}));function Xg(s,e,t){const i=t.mode===_h.ALIGN?t.offset:t.offset+t.size,n=t.mode===_h.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=s-i?i:e<=n?n-e:Math.max(s-e,0):e<=n?n-e:e<=s-i?i:0}const pm=class pm extends ve{constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=ve.None,this.toDisposeOnSetContainer=ve.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=at(".context-view"),QM(this.view),this.setContainer(e,t),this._register(bt(()=>this.setContainer(null,1)))}setContainer(e,t){this.useFixedPosition=t!==1;const i=this.useShadowDOM;if(this.useShadowDOM=t===3,!(e===this.container&&i===this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.view.remove(),this.shadowRoot&&(this.shadowRoot=null,this.shadowRootHostElement?.remove(),this.shadowRootHostElement=null),this.container=null),e)){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=at(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const r=document.createElement("style");r.textContent=Yre,this.shadowRoot.appendChild(r),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(at("slot"))}else this.container.appendChild(this.view);const n=new Qe;pm.BUBBLE_UP_EVENTS.forEach(r=>{n.add(Un(this.container,r,o=>{this.onDOMEvent(o,!1)}))}),pm.BUBBLE_DOWN_EVENTS.forEach(r=>{n.add(Un(this.container,r,o=>{this.onDOMEvent(o,!0)},!0))}),this.toDisposeOnSetContainer=n}}show(e){this.isVisible()&&this.hide(),el(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+(e.layer??0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",XW(this.view),this.toDisposeOnClean=e.render(this.view)||ve.None,this.delegate=e,this.doLayout(),this.delegate.focus?.()}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(xf&&EW.pointerEvents)){this.hide();return}this.delegate?.layout?.(),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(Jn(e)){const g=$o(e),m=qW(e);t={top:g.top*m,left:g.left*m,width:g.width*m,height:g.height*m}}else Zre(e)?t={top:e.y,left:e.x,width:e.width||1,height:e.height||2}:t={top:e.posy,left:e.posx,width:2,height:2};const i=S8(this.view),n=g3(this.view),r=this.delegate.anchorPosition||0,o=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;const u=z0();if(a===0){const g={offset:t.top-u.pageYOffset,size:t.height,position:r===0?0:1},m={offset:t.left,size:t.width,position:o===0?0:1,mode:_h.ALIGN};l=Xg(u.innerHeight,n,g)+u.pageYOffset,ys.intersects({start:l,end:l+n},{start:g.offset,end:g.offset+g.size})&&(m.mode=_h.AVOID),c=Xg(u.innerWidth,i,m)}else{const g={offset:t.left,size:t.width,position:o===0?0:1},m={offset:t.top,size:t.height,position:r===0?0:1,mode:_h.ALIGN};c=Xg(u.innerWidth,i,g),ys.intersects({start:c,end:c+i},{start:g.offset,end:g.offset+g.size})&&(m.mode=_h.AVOID),l=Xg(u.innerHeight,n,m)+u.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(r===0?"bottom":"top"),this.view.classList.add(o===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const d=$o(this.container);this.view.style.top=`${l-(this.useFixedPosition?$o(this.view).top:d.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?$o(this.view).left:d.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t?.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),QM(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,tt(e).document.activeElement):t&&!jn(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}};pm.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],pm.BUBBLE_DOWN_EVENTS=["click"];let p7=pm;const Yre=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var Xre=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Qre=function(s,e){return function(t,i){e(t,i,s)}};let YC=class extends ve{constructor(e){super(),this.layoutService=e,this.contextView=this._register(new p7(this.layoutService.mainContainer,1)),this.layout(),this._register(e.onDidLayoutContainer(()=>this.layout()))}showContextView(e,t,i){let n;t?t===this.layoutService.getContainer(tt(t))?n=1:i?n=3:n=2:n=1,this.contextView.setContainer(t??this.layoutService.activeContainer,n),this.contextView.show(e);const r={close:()=>{this.openContextView===r&&this.hideContextView()}};return this.openContextView=r,r}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e),this.openContextView=void 0}};YC=Xre([Qre(0,qh)],YC);class Jre extends YC{getContextViewElement(){return this.contextView.getViewElement()}}class eoe{constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}async update(e,t,i){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let n;if(e===void 0||bo(e)||Jn(e))n=e;else if(!dC(e.markdown))n=e.markdown??e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(b("iconLabel.loading","Loading..."),t,i),this._cancellationTokenSource=new Cp;const r=this._cancellationTokenSource.token;if(n=await e.markdown(r),n===void 0&&(n=e.markdownNotSupportedFallback),this.isDisposed||r.isCancellationRequested)return}this.show(n,t,i)}show(e,t,i){const n=this._hoverWidget;if(this.hasContent(e)){const r={content:e,target:this.target,actions:i?.actions,linkHandler:i?.linkHandler,trapFocus:i?.trapFocus,appearance:{showPointer:this.hoverDelegate.placement==="element",skipFadeInAnimation:!this.fadeInAnimation||!!n,showHoverHint:i?.appearance?.showHoverHint},position:{hoverPosition:2}};this._hoverWidget=this.hoverDelegate.showHover(r,t)}n?.dispose()}hasContent(e){return e?Tm(e)?!!e.value:!0:!1}get isDisposed(){return this._hoverWidget?.isDisposed}dispose(){this._hoverWidget?.dispose(),this._cancellationTokenSource?.dispose(!0),this._cancellationTokenSource=void 0}}var toe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},T0=function(s,e){return function(t,i){e(t,i,s)}};let _7=class extends ve{constructor(e,t,i,n,r){super(),this._instantiationService=e,this._keybindingService=i,this._layoutService=n,this._accessibilityService=r,this._managedHovers=new Map,t.onDidShowContextMenu(()=>this.hideHover()),this._contextViewHandler=this._register(new YC(this._layoutService))}showHover(e,t,i){if(FA(this._currentHoverOptions)===FA(e)||this._currentHover&&this._currentHoverOptions?.persistence?.sticky)return;this._currentHoverOptions=e,this._lastHoverOptions=e;const n=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),r=Us();i||(n&&r?r.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=r):this._lastFocusedElementBeforeOpen=void 0);const o=new Qe,a=this._instantiationService.createInstance(m7,e);if(e.persistence?.sticky&&(a.isLocked=!0),a.onDispose(()=>{this._currentHover?.domNode&&GW(this._currentHover.domNode)&&this._lastFocusedElementBeforeOpen?.focus(),this._currentHoverOptions===e&&(this._currentHoverOptions=void 0),o.dispose()},void 0,o),!e.container){const l=Jn(e.target)?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(tt(l))}if(this._contextViewHandler.showContextView(new ioe(a,t),e.container),a.onRequestLayout(()=>this._contextViewHandler.layout(),void 0,o),e.persistence?.sticky)o.add(ge(tt(e.container).document,Ne.MOUSE_DOWN,l=>{jn(l.target,a.domNode)||this.doHideHover()}));else{if("targetElements"in e.target)for(const c of e.target.targetElements)o.add(ge(c,Ne.CLICK,()=>this.hideHover()));else o.add(ge(e.target,Ne.CLICK,()=>this.hideHover()));const l=Us();if(l){const c=tt(l).document;o.add(ge(l,Ne.KEY_DOWN,u=>this._keyDown(u,a,!!e.persistence?.hideOnKeyDown))),o.add(ge(c,Ne.KEY_DOWN,u=>this._keyDown(u,a,!!e.persistence?.hideOnKeyDown))),o.add(ge(l,Ne.KEY_UP,u=>this._keyUp(u,a))),o.add(ge(c,Ne.KEY_UP,u=>this._keyUp(u,a)))}}if("IntersectionObserver"in bi){const l=new IntersectionObserver(u=>this._intersectionChange(u,a),{threshold:0}),c="targetElements"in e.target?e.target.targetElements[0]:e.target;l.observe(c),o.add(bt(()=>l.disconnect()))}return this._currentHover=a,a}hideHover(){this._currentHover?.isLocked||!this._currentHoverOptions||this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showHover(this._lastHoverOptions,!0,!0)}_keyDown(e,t,i){if(e.key==="Alt"){t.isLocked=!0;return}const n=new Ni(e);this._keybindingService.resolveKeyboardEvent(n).getSingleModifierDispatchChords().some(o=>!!o)||this._keybindingService.softDispatch(n,n.target).kind!==0||i&&(!this._currentHoverOptions?.trapFocus||e.key!=="Tab")&&(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus())}_keyUp(e,t){e.key==="Alt"&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus()))}setupManagedHover(e,t,i,n){t.setAttribute("custom-hover","true"),t.title!==""&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",t.title),t.title="");let r,o;const a=(k,L)=>{const T=o!==void 0;k&&(o?.dispose(),o=void 0),L&&(r?.dispose(),r=void 0),T&&(e.onDidHideHover?.(),o=void 0)},l=(k,L,T,A)=>new zf(async()=>{(!o||o.isDisposed)&&(o=new eoe(e,T||t,k>0),await o.update(typeof i=="function"?i():i,L,{...n,trapFocus:A}))},k);let c=!1;const u=ge(t,Ne.MOUSE_DOWN,()=>{c=!0,a(!0,!0)},!0),d=ge(t,Ne.MOUSE_UP,()=>{c=!1},!0),g=ge(t,Ne.MOUSE_LEAVE,k=>{c=!1,a(!1,k.fromElement===t)},!0),m=k=>{if(r)return;const L=new Qe,T={targetElements:[t],dispose:()=>{}};if(e.placement===void 0||e.placement==="mouse"){const A=I=>{T.x=I.x+10,Jn(I.target)&&BA(I.target,t)!==t&&a(!0,!0)};L.add(ge(t,Ne.MOUSE_MOVE,A,!0))}r=L,!(Jn(k.target)&&BA(k.target,t)!==t)&&L.add(l(e.delay,!1,T))},_=ge(t,Ne.MOUSE_OVER,m,!0),v=()=>{if(c||r)return;const k={targetElements:[t],dispose:()=>{}},L=new Qe,T=()=>a(!0,!0);L.add(ge(t,Ne.BLUR,T,!0)),L.add(l(e.delay,!1,k)),r=L};let w;const y=t.tagName.toLowerCase();y!=="input"&&y!=="textarea"&&(w=ge(t,Ne.FOCUS,v,!0));const S={show:k=>{a(!1,!0),l(0,k,void 0,k)},hide:()=>{a(!0,!0)},update:async(k,L)=>{i=k,await o?.update(i,void 0,L)},dispose:()=>{this._managedHovers.delete(t),_.dispose(),g.dispose(),u.dispose(),d.dispose(),w?.dispose(),a(!0,!0)}};return this._managedHovers.set(t,S),S}showManagedHover(e){const t=this._managedHovers.get(e);t&&t.show(!0)}dispose(){this._managedHovers.forEach(e=>e.dispose()),super.dispose()}};_7=toe([T0(0,hi),T0(1,vu),T0(2,ps),T0(3,qh),T0(4,ll)],_7);function FA(s){if(s!==void 0)return s?.id??s}class ioe{get anchorPosition(){return this._hover.anchor}constructor(e,t=!1){this._hover=e,this._focus=t,this.layer=1}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}function BA(s,e){for(e=e??tt(s).document.body;!s.hasAttribute("custom-hover")&&s!==e;)s=s.parentElement;return s}Jt(rv,_7,1);_u((s,e)=>{const t=s.getColor(zie);t&&(e.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`))});const noe=Ut("IWorkspaceEditService");class aE{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(af.is(t))return af.lift(t);if(Nm.is(t))return Nm.lift(t);throw new Error("Unsupported edit")})}}class af extends aE{static is(e){return e instanceof af?!0:Cr(e)&&Et.isUri(e.resource)&&Cr(e.textEdit)}static lift(e){return e instanceof af?e:new af(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,i=void 0,n){super(n),this.resource=e,this.textEdit=t,this.versionId=i}}class Nm extends aE{static is(e){return e instanceof Nm?!0:Cr(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof Nm?e:new Nm(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,i={},n){super(n),this.oldResource=e,this.newResource=t,this.options=i}}const as={enableSplitViewResizing:!0,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0,compactMode:!1},soe=Object.freeze({id:"editor",order:5,type:"object",title:b("editorConfigurationTitle","Editor"),scope:5}),XC={...soe,properties:{"editor.tabSize":{type:"number",default:Ss.tabSize,minimum:1,markdownDescription:b("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:b("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:Ss.insertSpaces,markdownDescription:b("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:Ss.detectIndentation,markdownDescription:b("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:Ss.trimAutoWhitespace,description:b("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Ss.largeFileOptimizations,description:b("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[b("wordBasedSuggestions.off","Turn off Word Based Suggestions."),b("wordBasedSuggestions.currentDocument","Only suggest words from the active document."),b("wordBasedSuggestions.matchingDocuments","Suggest words from all open documents of the same language."),b("wordBasedSuggestions.allDocuments","Suggest words from all open documents.")],description:b("wordBasedSuggestions","Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[b("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),b("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),b("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:b("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:b("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:b("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!0,description:b("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:b("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:b("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.experimental.treeSitterTelemetry":{type:"boolean",default:!1,markdownDescription:b("editor.experimental.treeSitterTelemetry","Controls whether tree sitter parsing should be turned on and telemetry collected. Setting `editor.experimental.preferTreeSitter` for specific languages will take precedence."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:b("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:b("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:b("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:b("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:b("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:b("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:as.maxComputationTime,description:b("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:as.maxFileSize,description:b("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:as.renderSideBySide,description:b("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:as.renderSideBySideInlineBreakpoint,description:b("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:as.useInlineViewWhenSpaceIsLimited,description:b("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:as.renderMarginRevertIcon,description:b("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:as.renderGutterMenu,description:b("renderGutterMenu","When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:as.ignoreTrimWhitespace,description:b("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:as.renderIndicators,description:b("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:as.diffCodeLens,description:b("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:as.diffWordWrap,markdownEnumDescriptions:[b("wordWrap.off","Lines will never wrap."),b("wordWrap.on","Lines will wrap at the viewport width."),b("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:as.diffAlgorithm,markdownEnumDescriptions:[b("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),b("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:as.hideUnchangedRegions.enabled,markdownDescription:b("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:as.hideUnchangedRegions.revealLineCount,markdownDescription:b("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:as.hideUnchangedRegions.minimumLineCount,markdownDescription:b("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:as.hideUnchangedRegions.contextLineCount,markdownDescription:b("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:as.experimental.showMoves,markdownDescription:b("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:as.experimental.showEmptyDecorations,description:b("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")},"diffEditor.experimental.useTrueInlineView":{type:"boolean",default:as.experimental.useTrueInlineView,description:b("useTrueInlineView","If enabled and the editor uses the inline view, word changes are rendered inline.")}}};function roe(s){return typeof s.type<"u"||typeof s.anyOf<"u"}for(const s of Hg){const e=s.schema;if(typeof e<"u")if(roe(e))XC.properties[`editor.${s.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(XC.properties[t]=e[t])}let Zb=null;function Oz(){return Zb===null&&(Zb=Object.create(null),Object.keys(XC.properties).forEach(s=>{Zb[s]=!0})),Zb}function ooe(s){return Oz()[`editor.${s}`]||!1}function aoe(s){return Oz()[`diffEditor.${s}`]||!1}const loe=is.as(Gf.Configuration);loe.registerConfiguration(XC);class coe{static insert(e,t){return{range:new Q(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}function Yb(s){return Object.isFrozen(s)?s:TZ(s)}class Xn{static createEmptyModel(e){return new Xn({},[],[],void 0,e)}constructor(e,t,i,n,r){this._contents=e,this._keys=t,this._overrides=i,this.raw=n,this.logService=r,this.overrideConfigurations=new Map}get rawConfiguration(){if(!this._rawConfiguration)if(this.raw?.length){const e=this.raw.map(t=>{if(t instanceof Xn)return t;const i=new uoe("",this.logService);return i.parseRaw(t),i.configurationModel});this._rawConfiguration=e.reduce((t,i)=>i===t?i:t.merge(i),e[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?dR(this.contents,e):this.contents}inspect(e,t){const i=this;return{get value(){return Yb(i.rawConfiguration.getValue(e))},get override(){return t?Yb(i.rawConfiguration.getOverrideValue(e,t)):void 0},get merged(){return Yb(t?i.rawConfiguration.override(t).getValue(e):i.rawConfiguration.getValue(e))},get overrides(){const n=[];for(const{contents:r,identifiers:o,keys:a}of i.rawConfiguration.overrides){const l=new Xn(r,a,[],void 0,i.logService).getValue(e);l!==void 0&&n.push({identifiers:o,value:l})}return n.length?Yb(n):void 0}}}getOverrideValue(e,t){const i=this.getContentsForOverrideIdentifer(t);return i?e?dR(i,e):i:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){const t=Ju(this.contents),i=Ju(this.overrides),n=[...this.keys],r=this.raw?.length?[...this.raw]:[this];for(const o of e)if(r.push(...o.raw?.length?o.raw:[o]),!o.isEmpty()){this.mergeContents(t,o.contents);for(const a of o.overrides){const[l]=i.filter(c=>Rn(c.identifiers,a.identifiers));l?(this.mergeContents(l.contents,a.contents),l.keys.push(...a.keys),l.keys=Sf(l.keys)):i.push(Ju(a))}for(const a of o.keys)n.indexOf(a)===-1&&n.push(a)}return new Xn(t,n,i,r.every(o=>o instanceof Xn)?void 0:r,this.logService)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const i={};for(const n of Sf([...Object.keys(this.contents),...Object.keys(t)])){let r=this.contents[n];const o=t[n];o&&(typeof r=="object"&&typeof o=="object"?(r=Ju(r),this.mergeContents(r,o)):r=o),i[n]=r}return new Xn(i,this.keys,this.overrides,void 0,this.logService)}mergeContents(e,t){for(const i of Object.keys(t)){if(i in e&&Cr(e[i])&&Cr(t[i])){this.mergeContents(e[i],t[i]);continue}e[i]=Ju(t[i])}}getContentsForOverrideIdentifer(e){let t=null,i=null;const n=r=>{r&&(i?this.mergeContents(i,r):i=Ju(r))};for(const r of this.overrides)r.identifiers.length===1&&r.identifiers[0]===e?t=r.contents:r.identifiers.includes(e)&&n(r.contents);return n(t),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),uee(this.contents,e),Rh.test(e)&&this.overrides.splice(this.overrides.findIndex(i=>Rn(i.identifiers,EC(e))),1))}updateValue(e,t,i){if(gV(this.contents,e,t,n=>this.logService.error(n)),i=i||this.keys.indexOf(e)===-1,i&&this.keys.push(e),Rh.test(e)){const n=EC(e),r={identifiers:n,keys:Object.keys(this.contents[e]),contents:k3(this.contents[e],a=>this.logService.error(a))},o=this.overrides.findIndex(a=>Rn(a.identifiers,n));o!==-1?this.overrides[o]=r:this.overrides.push(r)}}}class uoe{constructor(e,t){this._name=e,this.logService=t,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||Xn.createEmptyModel(this.logService)}parseRaw(e,t){this._raw=e;const{contents:i,keys:n,overrides:r,restricted:o,hasExcludedProperties:a}=this.doParseRaw(e,t);this._configurationModel=new Xn(i,n,r,a?[e]:void 0,this.logService),this._restrictedConfigurations=o||[]}doParseRaw(e,t){const i=is.as(Gf.Configuration).getConfigurationProperties(),n=this.filter(e,i,!0,t);e=n.raw;const r=k3(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`)),o=Object.keys(e),a=this.toOverrides(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`));return{contents:r,keys:o,overrides:a,restricted:n.restricted,hasExcludedProperties:n.hasExcludedProperties}}filter(e,t,i,n){let r=!1;if(!n?.scopes&&!n?.skipRestricted&&!n?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:r};const o={},a=[];for(const l in e)if(Rh.test(l)&&i){const c=this.filter(e[l],t,!1,n);o[l]=c.raw,r=r||c.hasExcludedProperties,a.push(...c.restricted)}else{const c=t[l],u=c?typeof c.scope<"u"?c.scope:3:void 0;c?.restricted&&a.push(l),!n.exclude?.includes(l)&&(n.include?.includes(l)||(u===void 0||n.scopes===void 0||n.scopes.includes(u))&&!(n.skipRestricted&&c?.restricted))?o[l]=e[l]:r=!0}return{raw:o,restricted:a,hasExcludedProperties:r}}toOverrides(e,t){const i=[];for(const n of Object.keys(e))if(Rh.test(n)){const r={};for(const o in e[n])r[o]=e[n][o];i.push({identifiers:EC(n),keys:Object.keys(r),contents:k3(r,t)})}return i}}class hoe{constructor(e,t,i,n,r,o,a,l,c,u,d,g,m){this.key=e,this.overrides=t,this._value=i,this.overrideIdentifiers=n,this.defaultConfiguration=r,this.policyConfiguration=o,this.applicationConfiguration=a,this.userConfiguration=l,this.localUserConfiguration=c,this.remoteUserConfiguration=u,this.workspaceConfiguration=d,this.folderConfigurationModel=g,this.memoryConfigurationModel=m}toInspectValue(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.toInspectValue(this.userInspectValue)}}class M2{constructor(e,t,i,n,r,o,a,l,c,u){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=i,this._localUserConfiguration=n,this._remoteUserConfiguration=r,this._workspaceConfiguration=o,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this.logService=u,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new Co,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidatedConfigurationModel(e,t,i).getValue(e)}updateValue(e,t,i={}){let n;i.resource?(n=this._memoryConfigurationByResource.get(i.resource),n||(n=Xn.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(i.resource,n))):n=this._memoryConfiguration,t===void 0?n.removeValue(e):n.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){const n=this.getConsolidatedConfigurationModel(e,t,i),r=this.getFolderConfigurationModelForResource(t.resource,i),o=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=new Set;for(const l of n.overrides)for(const c of l.identifiers)n.getOverrideValue(e,c)!==void 0&&a.add(c);return new hoe(e,t,n.getValue(e),a.size?[...a]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this._workspaceConfiguration:void 0,r||void 0,o)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,i){let n=this.getConsolidatedConfigurationModelForResource(t,i);return t.overrideIdentifier&&(n=n.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(n=n.merge(this._policyConfiguration)),n}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const n=t.getFolder(e);n&&(i=this.getFolderConsolidatedConfiguration(n.uri)||i);const r=this._memoryConfigurationByResource.get(e);r&&(i=i.merge(r))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),n=this._folderConfigurations.get(e);n?(t=i.merge(n),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const i=t.getFolder(e);if(i)return this._folderConfigurations.get(i.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:i,overrides:n,keys:r}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:n,keys:r}]),e},[])}}static parse(e,t){const i=this.parseConfigurationModel(e.defaults,t),n=this.parseConfigurationModel(e.policy,t),r=this.parseConfigurationModel(e.application,t),o=this.parseConfigurationModel(e.user,t),a=this.parseConfigurationModel(e.workspace,t),l=e.folders.reduce((c,u)=>(c.set(Et.revive(u[0]),this.parseConfigurationModel(u[1],t)),c),new Co);return new M2(i,n,r,o,Xn.createEmptyModel(t),a,l,Xn.createEmptyModel(t),new Co,t)}static parseConfigurationModel(e,t){return new Xn(e.contents,e.keys,e.overrides,void 0,t)}}class doe{constructor(e,t,i,n,r){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=n,this.logService=r,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const o of e.keys)this.affectedKeys.add(o);for(const[,o]of e.overrides)for(const a of o)this.affectedKeys.add(a);this._affectsConfigStr=this._marker;for(const o of this.affectedKeys)this._affectsConfigStr+=o+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=M2.parse(this.previous.data,this.logService)),this._previousConfiguration}affectsConfiguration(e,t){const i=this._marker+e,n=this._affectsConfigStr.indexOf(i);if(n<0)return!1;const r=n+i.length;if(r>=this._affectsConfigStr.length)return!1;const o=this._affectsConfigStr.charCodeAt(r);if(o!==this._markerCode1&&o!==this._markerCode2)return!1;if(t){const a=this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.previous?.workspace):void 0,l=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!jr(a,l)}return!0}}class foe{constructor(){this._onDidChange=new re,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}const l1=new foe,QC={kind:0},goe={kind:1};function moe(s,e,t){return{kind:2,commandId:s,commandArgs:e,isBubble:t}}class c1{constructor(e,t,i){this._log=i,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const n of e){const r=n.command;r&&r.charAt(0)!=="-"&&this._defaultBoundCommands.set(r,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=c1.handleRemovals([].concat(e).concat(t));for(let n=0,r=this._keybindings.length;n<r;n++){const o=this._keybindings[n];if(o.chords.length===0)continue;const a=o.when?.substituteConstants();a&&a.type===0||this._addKeyPress(o.chords[0],o)}}static _isTargetedForRemoval(e,t,i){if(t){for(let n=0;n<t.length;n++)if(t[n]!==e.chords[n])return!1}return!(i&&i.type!==1&&(!e.when||!SJ(i,e.when)))}static handleRemovals(e){const t=new Map;for(let n=0,r=e.length;n<r;n++){const o=e[n];if(o.command&&o.command.charAt(0)==="-"){const a=o.command.substring(1);t.has(a)?t.get(a).push(o):t.set(a,[o])}}if(t.size===0)return e;const i=[];for(let n=0,r=e.length;n<r;n++){const o=e[n];if(!o.command||o.command.length===0){i.push(o);continue}if(o.command.charAt(0)==="-")continue;const a=t.get(o.command);if(!a||!o.isDefault){i.push(o);continue}let l=!1;for(const c of a){const u=c.when;if(this._isTargetedForRemoval(o,c.chords,u)){l=!0;break}}if(!l){i.push(o);continue}}return i}_addKeyPress(e,t){const i=this._map.get(e);if(typeof i>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let n=i.length-1;n>=0;n--){const r=i[n];if(r.command===t.command)continue;let o=!0;for(let a=1;a<r.chords.length&&a<t.chords.length;a++)if(r.chords[a]!==t.chords[a]){o=!1;break}o&&c1.whenIsEntirelyIncluded(r.when,t.when)&&this._removeFromLookupMap(r)}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let i=0,n=t.length;i<n;i++)if(t[i]===e){t.splice(i,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:C3(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const i=this._lookupMap.get(e);if(typeof i>"u"||i.length===0)return null;if(i.length===1)return i[0];for(let n=i.length-1;n>=0;n--){const r=i[n];if(t.contextMatchesRules(r.when))return r}return i[i.length-1]}resolve(e,t,i){const n=[...t,i];this._log(`| Resolving ${n}`);const r=this._map.get(n[0]);if(r===void 0)return this._log("\\ No keybinding entries."),QC;let o=null;if(n.length<2)o=r;else{o=[];for(let l=0,c=r.length;l<c;l++){const u=r[l];if(n.length>u.chords.length)continue;let d=!0;for(let g=1;g<n.length;g++)if(u.chords[g]!==n[g]){d=!1;break}d&&o.push(u)}}const a=this._findCommand(e,o);return a?n.length<a.chords.length?(this._log(`\\ From ${o.length} keybinding entries, awaiting ${a.chords.length-n.length} more chord(s), when: ${WA(a.when)}, source: ${VA(a)}.`),goe):(this._log(`\\ From ${o.length} keybinding entries, matched ${a.command}, when: ${WA(a.when)}, source: ${VA(a)}.`),moe(a.command,a.commandArgs,a.bubble)):(this._log(`\\ From ${o.length} keybinding entries, no when clauses matched the context.`),QC)}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){const n=t[i];if(c1._contextMatchesRules(e,n.when))return n}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function WA(s){return s?`${s.serialize()}`:"no when condition"}function VA(s){return s.extensionId?s.isBuiltinExtension?`built-in extension ${s.extensionId}`:`user extension ${s.extensionId}`:s.isDefault?"built-in":"user"}const poe=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class _oe extends ve{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Te.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,i,n,r){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=i,this._notificationService=n,this._logService=r,this._onDidUpdateKeybindings=this._register(new re),this._currentChords=[],this._currentChordChecker=new v8,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=Qg.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new zf,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const i=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(i)return i.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const i=this.resolveKeyboardEvent(e);if(i.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),QC;const[n]=i.getDispatchChords();if(n===null)return this._log("\\ Keyboard event cannot be dispatched"),QC;const r=this._contextKeyService.getContext(t),o=this._currentChords.map(({keypress:a})=>a);return this._getResolver().resolve(r,o,n)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw s8("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(b("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:{const i=this._currentChords.map(({label:n})=>n).join(", ");this._currentChordStatusMessage=this._notificationService.status(b("next.chord","({0}) was pressed. Waiting for next key of chord...",i))}}this._scheduleLeaveChordMode(),l1.enabled&&l1.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],l1.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const i=this.resolveKeyboardEvent(e),[n]=i.getSingleModifierDispatchChords();if(n)return this._ignoreSingleModifiers.has(n)?(this._log(`+ Ignoring single modifier ${n} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=Qg.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=Qg.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${n}.`),this._currentSingleModifier=n,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):n===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${n} ${n}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${n}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[r]=i.getChords();return this._ignoreSingleModifiers=new Qg(r),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,i=!1){let n=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let r=null,o=null;if(i){const[u]=e.getSingleModifierDispatchChords();r=u,o=u?[u]:[]}else[r]=e.getDispatchChords(),o=this._currentChords.map(({keypress:u})=>u);if(r===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),n;const a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,o,r);switch(c.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",l,"[ No matching keybinding ]"),this.inChordMode){const u=this._currentChords.map(({label:d})=>d).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${u}, ${l}".`),this._notificationService.status(b("missing.chord","The key combination ({0}, {1}) is not a command.",u,l),{hideAfter:10*1e3}),this._leaveChordMode(),n=!0}return n}case 1:return this._logService.trace("KeybindingService#dispatch",l,"[ Several keybindings match - more chords needed ]"),n=!0,this._expectAnotherChord(r,l),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),n;case 2:{if(this._logService.trace("KeybindingService#dispatch",l,`[ Will dispatch command ${c.commandId} ]`),c.commandId===null||c.commandId===""){if(this.inChordMode){const u=this._currentChords.map(({label:d})=>d).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${u}, ${l}".`),this._notificationService.status(b("missing.chord","The key combination ({0}, {1}) is not a command.",u,l),{hideAfter:10*1e3}),this._leaveChordMode(),n=!0}}else{this.inChordMode&&this._leaveChordMode(),c.isBubble||(n=!0),this._log(`+ Invoking command ${c.commandId}.`),this._currentlyDispatchingCommandId=c.commandId;try{typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,u=>this._notificationService.warn(u)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,u=>this._notificationService.warn(u))}finally{this._currentlyDispatchingCommandId=null}poe.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding",detail:e.getUserSettingsLabel()??void 0})}return n}}}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}const bS=class bS{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}};bS.EMPTY=new bS(null);let Qg=bS;class zA{constructor(e,t,i,n,r,o,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?v7(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=v7(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=n,this.isDefault=r,this.extensionId=o,this.isBuiltinExtension=a}}function v7(s){const e=[];for(let t=0,i=s.length;t<i;t++){const n=s[t];if(!n)return[];e.push(n)}return e}class R2{constructor(e,t,i=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}toLabel(e,t,i){if(t.length===0)return null;const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=i(a);if(l===null)return null;n[r]=Coe(a,l,this.modifierLabels[e])}return n.join(" ")}}const lE=new R2({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:b({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:b({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:b({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:b({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:b({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:b({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:b({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:b({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),voe=new R2({ctrlKey:b({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:b({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:b({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:b({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:b({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:b({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:b({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:b({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:b({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:b({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:b({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:b({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),boe=new R2({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),woe=new R2({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function Coe(s,e,t){if(e===null)return"";const i=[];return s.ctrlKey&&i.push(t.ctrlKey),s.shiftKey&&i.push(t.shiftKey),s.altKey&&i.push(t.altKey),s.metaKey&&i.push(t.metaKey),e!==""&&i.push(e),i.join(t.separator)}class yoe extends qX{constructor(e,t){if(super(),t.length===0)throw n2("chords");this._os=e,this._chords=t}getLabel(){return lE.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return voe.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:boe.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return woe.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new $X(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}}class p_ extends yoe{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return Fc.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":Fc.toString(e.keyCode)}_getElectronAccelerator(e){return Fc.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=Fc.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_getChordDispatch(e){return p_.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Fc.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=l8[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof Lf)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new Lf(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const i=v7(e.chords.map(n=>this._toKeyCodeChord(n)));return i.length>0?[new p_(i,t)]:[]}}const Soe=Ut("labelService"),xoe=Ut("progressService"),cE=Ut("editorProgressService");class koe{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),i=this._value.charCodeAt(this._pos);return t-i}value(){return this._value[this._pos]}}class Loe{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?u8(e,this._value,0,e.length,this._from,this._to):G_(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Doe{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const i=this._value.charCodeAt(t);if(!(i===47||this._splitOnBackslash&&i===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?u8(e,this._value,0,e.length,this._from,this._to):G_(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Eoe{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new Doe(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return PM(e,this._value.scheme);if(this._states[this._stateIdx]===2)return PM(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return e3(e,this._value.query);if(this._states[this._stateIdx]===5)return e3(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class Xb{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}class u1{static forUris(e=()=>!1,t=()=>!1){return new u1(new Eoe(e,t))}static forStrings(){return new u1(new koe)}static forConfigKeys(){return new u1(new Loe)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){const i=this._iter.reset(e);let n;this._root||(this._root=new Xb,this._root.segment=i.value());const r=[];for(n=this._root;;){const a=i.cmp(n.segment);if(a>0)n.left||(n.left=new Xb,n.left.segment=i.value()),r.push([-1,n]),n=n.left;else if(a<0)n.right||(n.right=new Xb,n.right.segment=i.value()),r.push([1,n]),n=n.right;else if(i.hasNext())i.next(),n.mid||(n.mid=new Xb,n.mid.segment=i.value()),r.push([0,n]),n=n.mid;else break}const o=n.value;n.value=t,n.key=e;for(let a=r.length-1;a>=0;a--){const l=r[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const u=r[a][0],d=r[a+1][0];if(u===1&&d===1)r[a][1]=l.rotateLeft();else if(u===-1&&d===-1)r[a][1]=l.rotateRight();else if(u===1&&d===-1)l.right=r[a+1][1]=r[a+1][1].rotateRight(),r[a][1]=l.rotateLeft();else if(u===-1&&d===1)l.left=r[a+1][1]=r[a+1][1].rotateLeft(),r[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(r[a-1][0]){case-1:r[a-1][1].left=r[a][1];break;case 1:r[a-1][1].right=r[a][1];break;case 0:r[a-1][1].mid=r[a][1];break}else this._root=r[0][1]}}return o}get(e){return this._getNode(e)?.value}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const n=t.cmp(i.segment);if(n>0)i=i.left;else if(n<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else break}return i}has(e){const t=this._getNode(e);return!(t?.value===void 0&&t?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const i=this._iter.reset(e),n=[];let r=this._root;for(;r;){const o=i.cmp(r.segment);if(o>0)n.push([-1,r]),r=r.left;else if(o<0)n.push([1,r]),r=r.right;else if(i.hasNext())i.next(),n.push([0,r]),r=r.mid;else break}if(r){if(t?(r.left=void 0,r.mid=void 0,r.right=void 0,r.height=1):(r.key=void 0,r.value=void 0),!r.mid&&!r.value)if(r.left&&r.right){const o=this._min(r.right);if(o.key){const{key:a,value:l,segment:c}=o;this._delete(o.key,!1),r.key=a,r.value=l,r.segment=c}}else{const o=r.left??r.right;if(n.length>0){const[a,l]=n[n.length-1];switch(a){case-1:l.left=o;break;case 0:l.mid=o;break;case 1:l.right=o;break}}else this._root=o}for(let o=n.length-1;o>=0;o--){const a=n[o][1];a.updateHeight();const l=a.balanceFactor();if(l>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),n[o][1]=a.rotateLeft()):l<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),n[o][1]=a.rotateRight()),o>0)switch(n[o-1][0]){case-1:n[o-1][1].left=n[o][1];break;case 1:n[o-1][1].right=n[o][1];break;case 0:n[o-1][1].mid=n[o][1];break}else this._root=n[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let i=this._root,n;for(;i;){const r=t.cmp(i.segment);if(r>0)i=i.left;else if(r<0)i=i.right;else if(t.hasNext())t.next(),n=i.value||n,i=i.mid;else break}return i&&i.value||n}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const i=this._iter.reset(e);let n=this._root;for(;n;){const r=i.cmp(n.segment);if(r>0)n=n.left;else if(r<0)n=n.right;else if(i.hasNext())i.next(),n=n.mid;else return n.mid?this._entries(n.mid):t?n.value:void 0}}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}const Toe=Ut("contextService");class Noe{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const Ioe="code-workspace";b("codeWorkspace","Code Workspace");const Moe="4064f6ec-cb38-4ad0-af64-ee6467e63c82";var HA;(function(s){s.inspectTokensAction=b("inspectTokens","Developer: Inspect Tokens")})(HA||(HA={}));var jA;(function(s){s.gotoLineActionLabel=b("gotoLineActionLabel","Go to Line/Column...")})(jA||(jA={}));var UA;(function(s){s.helpQuickAccessActionLabel=b("helpQuickAccess","Show all Quick Access Providers")})(UA||(UA={}));var $A;(function(s){s.quickCommandActionLabel=b("quickCommandActionLabel","Command Palette"),s.quickCommandHelp=b("quickCommandActionHelp","Show And Run Commands")})($A||($A={}));var qA;(function(s){s.quickOutlineActionLabel=b("quickOutlineActionLabel","Go to Symbol..."),s.quickOutlineByCategoryActionLabel=b("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(qA||(qA={}));var b7;(function(s){s.editorViewAccessibleLabel=b("editorViewAccessibleLabel","Editor content")})(b7||(b7={}));var KA;(function(s){s.toggleHighContrast=b("toggleHighContrast","Toggle High Contrast Theme")})(KA||(KA={}));var w7;(function(s){s.bulkEditServiceSummary=b("bulkEditServiceSummary","Made {0} edits in {1} files")})(w7||(w7={}));const Roe=Ut("workspaceTrustManagementService");let cp=[],uE=[],Fz=[];function Qb(s,e=!1){Aoe(s,!1,e)}function Aoe(s,e,t){const i=Poe(s,e);cp.push(i),i.userConfigured?Fz.push(i):uE.push(i),t&&!i.userConfigured&&cp.forEach(n=>{n.mime===i.mime||n.userConfigured||(i.extension&&n.extension===i.extension&&console.warn(`Overwriting extension <<${i.extension}>> to now point to mime <<${i.mime}>>`),i.filename&&n.filename===i.filename&&console.warn(`Overwriting filename <<${i.filename}>> to now point to mime <<${i.mime}>>`),i.filepattern&&n.filepattern===i.filepattern&&console.warn(`Overwriting filepattern <<${i.filepattern}>> to now point to mime <<${i.mime}>>`),i.firstline&&n.firstline===i.firstline&&console.warn(`Overwriting firstline <<${i.firstline}>> to now point to mime <<${i.mime}>>`))})}function Poe(s,e){return{id:s.id,mime:s.mime,filename:s.filename,extension:s.extension,filepattern:s.filepattern,firstline:s.firstline,userConfigured:e,filenameLowercase:s.filename?s.filename.toLowerCase():void 0,extensionLowercase:s.extension?s.extension.toLowerCase():void 0,filepatternLowercase:s.filepattern?$V(s.filepattern.toLowerCase()):void 0,filepatternOnPath:s.filepattern?s.filepattern.indexOf(rn.sep)>=0:!1}}function Ooe(){cp=cp.filter(s=>s.userConfigured),uE=[]}function Foe(s,e){return Boe(s,e).map(t=>t.id)}function Boe(s,e){let t;if(s)switch(s.scheme){case Dt.file:t=s.fsPath;break;case Dt.data:{t=qC.parseMetaData(s).get(qC.META_DATA_LABEL);break}case Dt.vscodeNotebookCell:t=void 0;break;default:t=s.path}if(!t)return[{id:"unknown",mime:Vc.unknown}];t=t.toLowerCase();const i=fW(t),n=GA(t,i,Fz);if(n)return[n,{id:pa,mime:Vc.text}];const r=GA(t,i,uE);if(r)return[r,{id:pa,mime:Vc.text}];if(e){const o=Woe(e);if(o)return[o,{id:pa,mime:Vc.text}]}return[{id:"unknown",mime:Vc.unknown}]}function GA(s,e,t){let i,n,r;for(let o=t.length-1;o>=0;o--){const a=t[o];if(e===a.filenameLowercase){i=a;break}if(a.filepattern&&(!n||a.filepattern.length>n.filepattern.length)){const l=a.filepatternOnPath?s:e;a.filepatternLowercase?.(l)&&(n=a)}a.extension&&(!r||a.extension.length>r.extension.length)&&e.endsWith(a.extensionLowercase)&&(r=a)}if(i)return i;if(n)return n;if(r)return r}function Woe(s){if(_8(s)&&(s=s.substr(1)),s.length>0)for(let e=cp.length-1;e>=0;e--){const t=cp[e];if(!t.firstline)continue;const i=s.match(t.firstline);if(i&&i.length>0)return t}}const Jb=Object.prototype.hasOwnProperty,ZA="vs.editor.nullLanguage";class Voe{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(ZA,0),this._register(pa,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||ZA}}const B1=class B1 extends ve{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new re),this.onDidChange=this._onDidChange.event,B1.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new Voe,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(ep.onDidChangeLanguages(i=>{this._initializeFromRegistry()})))}dispose(){B1.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Ooe();const e=[].concat(ep.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const i=this._languages[t];i.name&&(this._nameMap[i.name]=i.identifier),i.aliases.forEach(n=>{this._lowercaseNameMap[n.toLowerCase()]=i.identifier}),i.mimetypes.forEach(n=>{this._mimeTypesMap[n]=i.identifier})}),is.as(Gf.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let i;Jb.call(this._languages,t)?i=this._languages[t]:(this.languageIdCodec.register(t),i={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=i),this._mergeLanguage(i,e)}_mergeLanguage(e,t){const i=t.id;let n=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),n=t.mimetypes[0]),n||(n=`text/x-${i}`,e.mimetypes.push(n)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)Qb({id:i,mime:n,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)Qb({id:i,mime:n,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)Qb({id:i,mime:n,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);AX(l)||Qb({id:i,mime:n,firstline:l},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${a}\`: `,l)}}e.aliases.push(i);let r=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?r=[null]:r=t.aliases),r!==null)for(const a of r)!a||a.length===0||e.aliases.push(a);const o=r!==null&&r.length>0;if(!(o&&r[0]===null)){const a=(o?r[0]:null)||i;(o||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?Jb.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return Jb.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&Jb.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:Foe(e,t)}};B1.instanceCount=0;let C7=B1;const ya=(s,e)=>s===e;function zoe(s=ya){return(e,t)=>Rn(e,t,s)}function YA(s,e,t){{const i=s;return(n,r)=>n==null||r===void 0||r===null?r===n:i(n,r)}}class or{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return Hoe(e,this)}}const XA=new Map,y7=new WeakMap;function Hoe(s,e){const t=y7.get(s);if(t)return t;const i=joe(s,e);if(i){let n=XA.get(i)??0;n++,XA.set(i,n);const r=n===1?i:`${i}#${n}`;return y7.set(s,r),r}}function joe(s,e){const t=y7.get(s);if(t)return t;const i=e.owner?$oe(e.owner)+".":"";let n;const r=e.debugNameSource;if(r!==void 0)if(typeof r=="function"){if(n=r(),n!==void 0)return i+n}else return i+r;const o=e.referenceFn;if(o!==void 0&&(n=hE(o),n!==void 0))return i+n;if(e.owner!==void 0){const a=Uoe(e.owner,s);if(a!==void 0)return i+a}}function Uoe(s,e){for(const t in s)if(s[t]===e)return t}const QA=new Map,JA=new WeakMap;function $oe(s){const e=JA.get(s);if(e)return e;const t=qoe(s);let i=QA.get(t)??0;i++,QA.set(t,i);const n=i===1?t:`${t}#${i}`;return JA.set(s,n),n}function qoe(s){const e=s.constructor;return e?e.name:"Object"}function hE(s){const e=s.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(i?i[1]:void 0)?.trim()}let Koe;function Bz(){return Koe}let Wz;function Goe(s){Wz=s}let Vz;function Zoe(s){Vz=s}let S7;function Yoe(s){S7=s}class zz{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const i=t===void 0?void 0:e,n=t===void 0?e:t;return S7({owner:i,debugName:()=>{const r=hE(n);if(r!==void 0)return r;const a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(n.toString());if(a)return`${this.debugName}.${a[2]}`;if(!i)return`${this.debugName} (mapped)`},debugReferenceFn:n},r=>n(this.read(r),r))}flatten(){return S7({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(Wz(this,t)),this}keepObserved(e){return e.add(Vz(this)),this}}class kp extends zz{constructor(){super(...arguments),this.observers=new Set}addObserver(e){const t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function In(s,e){const t=new lv(s,e);try{s(t)}finally{t.finish()}}let ew;function q0(s){if(ew)s(ew);else{const e=new lv(s,void 0);ew=e;try{s(e)}finally{e.finish(),ew=void 0}}}function dE(s,e,t){s?e(s):In(e,t)}class lv{constructor(e,t){this._fn=e,this._getDebugName=t,this.updatingObservers=[]}getDebugName(){return this._getDebugName?this._getDebugName():hE(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.updatingObservers;for(let t=0;t<e.length;t++){const{observer:i,observable:n}=e[t];i.endUpdate(n)}this.updatingObservers=null}}function Zt(s,e){let t;return typeof s=="string"?t=new or(void 0,s,void 0):t=new or(s,void 0,void 0),new fE(t,e,ya)}class fE extends kp{get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}constructor(e,t,i){super(),this._debugNameData=e,this._equalityComparator=i,this._value=t}get(){return this._value}set(e,t,i){if(i===void 0&&this._equalityComparator(this._value,e))return;let n;t||(t=n=new lv(()=>{},()=>`Setting ${this.debugName}`));try{const r=this._value;this._setValue(e),Bz()?.handleObservableChanged(this,{oldValue:r,newValue:e,change:i,didChange:!0,hadValue:!0});for(const o of this.observers)t.updateObserver(o,this),o.handleChange(this,i)}finally{n&&n.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function Hz(s,e){let t;return typeof s=="string"?t=new or(void 0,s,void 0):t=new or(s,void 0,void 0),new Xoe(t,e,ya)}class Xoe extends fE{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){this._value?.dispose()}}function _t(s,e){return e!==void 0?new up(new or(s,void 0,e),e,void 0,void 0,void 0,ya):new up(new or(void 0,void 0,s),s,void 0,void 0,void 0,ya)}function gE(s,e,t){return new Qoe(new or(s,void 0,e),e,void 0,void 0,void 0,ya,t)}function A2(s,e){return new up(new or(s.owner,s.debugName,s.debugReferenceFn),e,void 0,void 0,s.onLastObserverRemoved,s.equalsFn??ya)}Yoe(A2);function Lp(s,e){let t,i;e===void 0?(t=s,i=void 0):(i=s,t=e);const n=new Qe;return new up(new or(i,void 0,t),r=>(n.clear(),t(r,n)),void 0,void 0,()=>n.dispose(),ya)}function Sl(s,e){let t,i;e===void 0?(t=s,i=void 0):(i=s,t=e);let n;return new up(new or(i,void 0,t),r=>{n?n.clear():n=new Qe;const o=t(r);return o&&n.add(o),o},void 0,void 0,()=>{n&&(n.dispose(),n=void 0)},ya)}class up extends kp{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,n,r=void 0,o){super(),this._debugNameData=e,this._computeFn=t,this.createChangeSummary=i,this._handleChange=n,this._handleLastObserverRemoved=r,this._equalityComparator=o,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=this.createChangeSummary?.()}onLastObserverRemoved(){this.state=0,this.value=void 0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this.observers.size===0){const e=this._computeFn(this,this.createChangeSummary?.());return this.onLastObserverRemoved(),e}else{do{if(this.state===1){for(const e of this.dependencies)if(e.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e;const t=this.state!==0,i=this.value;this.state=3;const n=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this.value=this._computeFn(this,n)}finally{for(const o of this.dependenciesToBeRemoved)o.removeObserver(this);this.dependenciesToBeRemoved.clear()}if(t&&!this._equalityComparator(i,this.value))for(const o of this.observers)o.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;const t=this.updateCount===1;if(this.state===3&&(this.state=1,!t))for(const i of this.observers)i.handlePossibleChange(this);if(t)for(const i of this.observers)i.beginUpdate(this)}endUpdate(e){if(this.updateCount--,this.updateCount===0){const t=[...this.observers];for(const i of t)i.endUpdate(this)}Tf(()=>this.updateCount>=0)}handlePossibleChange(e){if(this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const t of this.observers)t.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){const i=this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:r=>r===e},this.changeSummary):!0,n=this.state===3;if(i&&(this.state===1||n)&&(this.state=2,n))for(const r of this.observers)r.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}class Qoe extends up{constructor(e,t,i,n,r=void 0,o,a){super(e,t,i,n,r,o),this.set=a}}function ti(s){return new F2(new or(void 0,void 0,s),s,void 0,void 0)}function P2(s,e){return new F2(new or(s.owner,s.debugName,s.debugReferenceFn??e),e,void 0,void 0)}function O2(s,e){return new F2(new or(s.owner,s.debugName,s.debugReferenceFn??e),e,s.createEmptyChangeSummary,s.handleChange)}function Ja(s){const e=new Qe,t=P2({owner:void 0,debugName:void 0,debugReferenceFn:s},i=>{e.clear(),s(i,e)});return bt(()=>{t.dispose(),e.dispose()})}class F2{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,n){this._debugNameData=e,this._runFn=t,this.createChangeSummary=i,this._handleChange=n,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=this.createChangeSummary?.(),this._runIfNeeded()}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear()}_runIfNeeded(){if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;const t=this.disposed;try{if(!t){Bz()?.handleAutorunTriggered(this);const i=this.changeSummary;this.changeSummary=this.createChangeSummary?.(),this._runFn(this,i)}}finally{for(const i of this.dependenciesToBeRemoved)i.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,Tf(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:n=>n===e},this.changeSummary))&&(this.state=2)}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}(function(s){s.Observer=F2})(ti||(ti={}));function JC(s){return new Joe(s)}class Joe extends zz{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}}function Yi(...s){let e,t,i;return s.length===3?[e,t,i]=s:[t,i]=s,new Jg(new or(e,void 0,i),t,i,()=>Jg.globalTransaction,ya)}class Jg extends kp{constructor(e,t,i,n,r){super(),this._debugNameData=e,this.event=t,this._getValue=i,this._getTransaction=n,this._equalityComparator=r,this.hasValue=!1,this.handleEvent=o=>{const a=this._getValue(o),l=this.value;(!this.hasValue||!this._equalityComparator(l,a))&&(this.value=a,this.hasValue&&dE(this._getTransaction(),u=>{for(const d of this.observers)u.updateObserver(d,this),d.handleChange(this,void 0)},()=>{const u=this.getDebugName();return"Event fired"+(u?`: ${u}`:"")}),this.hasValue=!0)}}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}}(function(s){s.Observer=Jg;function e(t,i){let n=!1;Jg.globalTransaction===void 0&&(Jg.globalTransaction=t,n=!0);try{i()}finally{n&&(Jg.globalTransaction=void 0)}}s.batchEventsGlobally=e})(Yi||(Yi={}));function zo(s,e){return new eae(s,e)}class eae extends kp{constructor(e,t){super(),this.debugName=e,this.event=t,this.handleEvent=()=>{In(i=>{for(const n of this.observers)i.updateObserver(n,this),n.handleChange(this,void 0)},()=>this.debugName)}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function mE(s){return typeof s=="string"?new eP(s):new eP(void 0,s)}class eP extends kp{get debugName(){return new or(this._owner,this._debugName,void 0).getDebugName(this)??"Observable Signal"}toString(){return this.debugName}constructor(e,t){super(),this._debugName=e,this._owner=t}trigger(e,t){if(!e){In(i=>{this.trigger(i,t)},()=>`Trigger signal ${this.debugName}`);return}for(const i of this.observers)e.updateObserver(i,this),i.handleChange(this,t)}get(){}}function tae(s){const e=new jz(!1,void 0);return s.addObserver(e),bt(()=>{s.removeObserver(e)})}Zoe(tae);function B2(s,e){const t=new jz(!0,e);return s.addObserver(t),e?e(s.get()):s.reportChanges(),bt(()=>{s.removeObserver(t)})}Goe(B2);class jz{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}}function iae(s,e){let t;return A2({owner:s,debugReferenceFn:e},n=>(t=e(n,t),t))}function nae(s,e){return iae(s,(t,i)=>i??e(t))}function sae(s,e,t,i){return e||(e=n=>n!=null),new Promise((n,r)=>{let o=!0,a=!1;const l=s.map(u=>({isFinished:e(u),error:!1,state:u})),c=ti(u=>{const{isFinished:d,error:g,state:m}=l.read(u);(d||g)&&(o?a=!0:c.dispose(),g?r(g===!0?m:g):n(m))});o=!1,a&&c.dispose()})}class rae extends kp{get debugName(){return this._debugNameData.getDebugName(this)??"LazyObservableValue"}constructor(e,t,i){super(),this._debugNameData=e,this._equalityComparator=i,this._isUpToDate=!0,this._deltas=[],this._updateCounter=0,this._value=t}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(const e of this.observers)for(const t of this._deltas)e.handleChange(this,t);this._deltas.length=0}else for(const e of this.observers)e.handleChange(this,void 0)}_beginUpdate(){if(this._updateCounter++,this._updateCounter===1)for(const e of this.observers)e.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){this._update();const e=[...this.observers];for(const t of e)t.endUpdate(this)}}addObserver(e){const t=!this.observers.has(e)&&this._updateCounter>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this._updateCounter>0;super.removeObserver(e),t&&e.endUpdate(this)}set(e,t,i){if(i===void 0&&this._equalityComparator(this._value,e))return;let n;t||(t=n=new lv(()=>{},()=>`Setting ${this.debugName}`));try{if(this._isUpToDate=!1,this._setValue(e),i!==void 0&&this._deltas.push(i),t.updateObserver({beginUpdate:()=>this._beginUpdate(),endUpdate:()=>this._endUpdate(),handleChange:(r,o)=>{},handlePossibleChange:r=>{}},this),this._updateCounter>1)for(const r of this.observers)r.handlePossibleChange(this)}finally{n&&n.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function x7(s,e){return s.lazy?new rae(new or(s.owner,s.debugName,void 0),e,s.equalsFn??ya):new fE(new or(s.owner,s.debugName,void 0),e,s.equalsFn??ya)}const W1=class W1 extends ve{constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new re),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new re),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new re({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,W1.instanceCount++,this._registry=this._register(new C7(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){W1.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const i=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return XD(i,null)}createById(e){return new tP(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new tP(this.onDidChange,()=>{const i=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(i)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=pa),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),un.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}};W1.instanceCount=0;let k7=W1;class tP{constructor(e,t){this._value=Yi(this,e,()=>t()),this.onDidChange=Te.fromObservable(this._value)}get languageId(){return this._value.get()}}const Uz={TEXT:Vc.text},oae=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}});let W2=oae;const aae=new Nh(()=>W2("mouse",!1)),lae=new Nh(()=>W2("element",!1));function cae(s){W2=s}function Xo(s){return s==="element"?lae.value:aae.value}function pE(){return W2("element",!0)}let $z={showHover:()=>{},hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>null,showManagedHover:()=>{}};function uae(s){$z=s}function Xl(){return $z}class hae{constructor(e){this.spliceables=e}splice(e,t,i){this.spliceables.forEach(n=>n.splice(e,t,i))}}class dd extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function iP(s,e){const t=[];for(const i of e){if(s.start>=i.range.end)continue;if(s.end<i.range.start)break;const n=ys.intersect(s,i.range);ys.isEmpty(n)||t.push({range:n,size:i.size})}return t}function L7({start:s,end:e},t){return{start:s+t,end:e+t}}function dae(s){const e=[];let t=null;for(const i of s){const n=i.range.start,r=i.range.end,o=i.size;if(t&&o===t.size){t.range.end=r;continue}t={range:{start:n,end:r},size:o},e.push(t)}return e}function fae(...s){return dae(s.reduce((e,t)=>e.concat(t),[]))}class gae{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,i=[]){const n=i.length-t,r=iP({start:0,end:e},this.groups),o=iP({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:L7(l.range,n),size:l.size})),a=i.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=fae(r,a,o),this._size=this._paddingTop+this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,i=this._paddingTop;for(const n of this.groups){const r=n.range.end-n.range.start,o=i+r*n.size;if(e<o)return t+Math.floor((e-i)/n.size);t+=r,i=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,i=0;for(const n of this.groups){const r=n.range.end-n.range.start,o=i+r;if(e<o)return this._paddingTop+t+(e-i)*n.size;t+=r*n.size,i=o}return-1}}class mae{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),i=!1;if(t)i=this.transactionNodesPendingRemoval.has(t.domNode),i&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const n=at(".monaco-list-row"),o=this.getRenderer(e).renderTemplate(n);t={domNode:n,templateId:e,templateData:o}}return{row:t,isReusingConnectedDomNode:i}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:i}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(i).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const i of e)this.getRenderer(t).disposeTemplate(i.templateData),i.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var wu=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r};const fd={CurrentDragAndDropData:void 0},bl={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(s){return[s]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class cv{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class pae{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class _ae{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const i=e.files.item(t);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}}function vae(s,e){return Array.isArray(s)&&Array.isArray(e)?Rn(s,e):s===e}class bae{constructor(e){e?.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,i,n)=>n,e?.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,i)=>i+1,e?.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e?.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}const wS=class wS{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:bk(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,i,n=bl){if(this.virtualDelegate=t,this.domId=`list_id_${++wS.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Y_(50),this.splicing=!1,this.dragOverAnimationStopDisposable=ve.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=ve.None,this.onDragLeaveTimeout=ve.None,this.disposables=new Qe,this._onDidChangeContentHeight=new re,this._onDidChangeContentWidth=new re,this.onDidChangeContentHeight=Te.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,n.horizontalScrolling&&n.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(n.paddingTop??0);for(const o of i)this.renderers.set(o.templateId,o);this.cache=this.disposables.add(new mae(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof n.mouseSupport=="boolean"?n.mouseSupport:!0),this._horizontalScrolling=n.horizontalScrolling??bl.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof n.paddingBottom>"u"?0:n.paddingBottom,this.accessibilityProvider=new bae(n.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(n.transformOptimization??bl.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(rr.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new xp({forceIntegerValues:!0,smoothScrollDuration:n.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:o=>Kr(tt(this.domNode),o)})),this.scrollableElement=this.disposables.add(new T2(this.rowsContainer,{alwaysConsumeMouseWheel:n.alwaysConsumeMouseWheel??bl.alwaysConsumeMouseWheel,horizontal:1,vertical:n.verticalScrollMode??bl.verticalScrollMode,useShadows:n.useShadows??bl.useShadows,mouseWheelScrollSensitivity:n.mouseWheelScrollSensitivity,fastScrollSensitivity:n.fastScrollSensitivity,scrollByPage:n.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(ge(this.rowsContainer,xi.Change,o=>this.onTouchChange(o))),this.disposables.add(ge(this.scrollableElement.getDomNode(),"scroll",o=>o.target.scrollTop=0)),this.disposables.add(ge(this.domNode,"dragover",o=>this.onDragOver(this.toDragEvent(o)))),this.disposables.add(ge(this.domNode,"drop",o=>this.onDrop(this.toDragEvent(o)))),this.disposables.add(ge(this.domNode,"dragleave",o=>this.onDragLeave(this.toDragEvent(o)))),this.disposables.add(ge(this.domNode,"dragend",o=>this.onDragEnd(o))),this.setRowLineHeight=n.setRowLineHeight??bl.setRowLineHeight,this.setRowHeight=n.setRowHeight??bl.setRowHeight,this.supportDynamicHeights=n.supportDynamicHeights??bl.supportDynamicHeights,this.dnd=n.dnd??this.disposables.add(bl.dnd),this.layout(n.initialSize?.height,n.initialSize?.width)}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),n=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(i,Math.max(0,this.lastRenderTop+n),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}createRangeMap(e){return new gae(e)}splice(e,t,i=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,i=[]){const n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r={start:e,end:e+t},o=ys.intersect(n,r),a=new Map;for(let T=o.end-1;T>=o.start;T--){const A=this.items[T];if(A.dragStartDisposable.dispose(),A.checkedDisposable.dispose(),A.row){let I=a.get(A.templateId);I||(I=[],a.set(A.templateId,I));const O=this.renderers.get(A.templateId);O&&O.disposeElement&&O.disposeElement(A.element,T,A.row.templateData,A.size),I.unshift(A.row)}A.row=null,A.stale=!0}const l={start:e+t,end:this.items.length},c=ys.intersect(l,n),u=ys.relativeComplement(l,n),d=i.map(T=>({id:String(this.itemId++),element:T,templateId:this.virtualDelegate.getTemplateId(T),size:this.virtualDelegate.getHeight(T),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(T),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:ve.None,checkedDisposable:ve.None,stale:!1}));let g;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,d),g=this.items,this.items=d):(this.rangeMap.splice(e,t,d),g=this.items.splice(e,t,...d));const m=i.length-t,_=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),v=L7(c,m),w=ys.intersect(_,v);for(let T=w.start;T<w.end;T++)this.updateItemInDOM(this.items[T],T);const y=ys.relativeComplement(v,_);for(const T of y)for(let A=T.start;A<T.end;A++)this.removeItemFromDOM(A);const S=u.map(T=>L7(T,m)),L=[{start:e,end:e+i.length},...S].map(T=>ys.intersect(_,T)).reverse();for(const T of L)for(let A=T.end-1;A>=T.start;A--){const I=this.items[A],F=a.get(I.templateId)?.pop();this.insertItemInDOM(A,F)}for(const T of a.values())for(const A of T)this.cache.release(A);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),g.map(T=>T.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=Kr(tt(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const i={height:typeof e=="number"?e:BQ(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:bk(this.domNode)})}render(e,t,i,n,r,o=!1){const a=this.getRenderRange(t,i),l=ys.relativeComplement(a,e).reverse(),c=ys.relativeComplement(e,a);if(o){const u=ys.intersect(e,a);for(let d=u.start;d<u.end;d++)this.updateItemInDOM(this.items[d],d)}this.cache.transact(()=>{for(const u of c)for(let d=u.start;d<u.end;d++)this.removeItemFromDOM(d);for(const u of l)for(let d=u.end-1;d>=u.start;d--)this.insertItemInDOM(d)}),n!==void 0&&(this.rowsContainer.style.left=`-${n}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&r!==void 0&&(this.rowsContainer.style.width=`${Math.max(r,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=i}insertItemInDOM(e,t){const i=this.items[e];if(!i.row)if(t)i.row=t,i.stale=!0;else{const l=this.cache.alloc(i.templateId);i.row=l.row,i.stale||=l.isReusingConnectedDomNode}const n=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",n);const r=this.accessibilityProvider.isChecked(i.element);if(typeof r=="boolean")i.row.domNode.setAttribute("aria-checked",String(!!r));else if(r){const l=c=>i.row.domNode.setAttribute("aria-checked",String(!!c));l(r.value),i.checkedDisposable=r.onDidChange(()=>l(r.value))}if(i.stale||!i.row.domNode.parentElement){const l=this.items.at(e+1)?.row?.domNode??null;(i.row.domNode.parentElement!==this.rowsContainer||i.row.domNode.nextElementSibling!==l)&&this.rowsContainer.insertBefore(i.row.domNode,l),i.stale=!1}this.updateItemInDOM(i,e);const o=this.renderers.get(i.templateId);if(!o)throw new Error(`No renderer found for template id ${i.templateId}`);o?.renderElement(i.element,e,i.row.templateData,i.size);const a=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!a,a&&(i.dragStartDisposable=ge(i.row.domNode,"dragstart",l=>this.onDragStart(i.element,a,l))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=bk(e.row.domNode);const t=tt(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const i=this.renderers.get(t.templateId);i&&i.disposeElement&&i.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return Te.map(this.disposables.add(new Rt(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return Te.map(this.disposables.add(new Rt(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return Te.filter(Te.map(this.disposables.add(new Rt(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return Te.map(this.disposables.add(new Rt(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return Te.map(this.disposables.add(new Rt(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return Te.map(this.disposables.add(new Rt(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return Te.any(Te.map(this.disposables.add(new Rt(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),Te.map(this.disposables.add(new Rt(this.domNode,xi.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return Te.map(this.disposables.add(new Rt(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return Te.map(this.disposables.add(new Rt(this.rowsContainer,xi.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element,r=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:n,sector:r}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,i){if(!i.dataTransfer)return;const n=this.dnd.getDragElements(e);if(i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(Uz.TEXT,t),i.dataTransfer.setDragImage){let r;this.dnd.getDragLabel&&(r=this.dnd.getDragLabel(n,i)),typeof r>"u"&&(r=String(n.length));const o=at(".monaco-drag-image");o.textContent=r,(c=>{for(;c&&!c.classList.contains("monaco-workbench");)c=c.parentElement;return c||this.domNode.ownerDocument})(this.domNode).appendChild(o),i.dataTransfer.setDragImage(o,-10,-10),setTimeout(()=>o.remove(),0)}this.domNode.classList.add("dragging"),this.currentDragData=new cv(n),fd.CurrentDragAndDropData=new pae(n),this.dnd.onDragStart?.(this.currentDragData,i)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),fd.CurrentDragAndDropData&&fd.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(fd.CurrentDragAndDropData)this.currentDragData=fd.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new _ae}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect?.type===0?"copy":"move";let i;typeof t!="boolean"&&t.feedback?i=t.feedback:typeof e.index>"u"?i=[-1]:i=[e.index],i=Sf(i).filter(r=>r>=-1&&r<this.length).sort((r,o)=>r-o),i=i[0]===-1?[-1]:i;let n=typeof t!="boolean"&&t.effect&&t.effect.position?t.effect.position:"drop-target";if(vae(this.currentDragFeedback,i)&&this.currentDragFeedbackPosition===n)return!0;if(this.currentDragFeedback=i,this.currentDragFeedbackPosition=n,this.currentDragFeedbackDisposable.dispose(),i[0]===-1)this.domNode.classList.add(n),this.rowsContainer.classList.add(n),this.currentDragFeedbackDisposable=bt(()=>{this.domNode.classList.remove(n),this.rowsContainer.classList.remove(n)});else{if(i.length>1&&n!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");n==="drop-target-after"&&i[0]<this.length-1&&(i[0]+=1,n="drop-target-before");for(const r of i){const o=this.items[r];o.dropTarget=!0,o.row?.domNode.classList.add(n)}this.currentDragFeedbackDisposable=bt(()=>{for(const r of i){const o=this.items[r];o.dropTarget=!1,o.row?.domNode.classList.remove(n)}})}return!0}onDragLeave(e){this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=o3(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&this.dnd.onDragLeave?.(this.currentDragData,e.element,e.index,e.browserEvent)}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,fd.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,fd.CurrentDragAndDropData=void 0,this.dnd.onDragEnd?.(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=ve.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=FQ(this.domNode).top;this.dragOverAnimationDisposable=YQ(tt(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=o3(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,i=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;const i=e.offsetY/this.items[t].size,n=Math.floor(i/.25);return vr(n,0,3)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let i=e;for(;(Jn(i)||UQ(i))&&i!==this.rowsContainer&&t.contains(i);){const n=i.getAttribute("data-index");if(n){const r=Number(n);if(!isNaN(r))return r}i=i.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,i){const n=this.getRenderRange(e,t);let r,o;e===this.elementTop(n.start)?(r=n.start,o=0):n.end-n.start>1&&(r=n.start+1,o=this.elementTop(r)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let u=l.start;u<l.end;u++){const d=this.probeDynamicHeight(u);d!==0&&this.rangeMap.splice(u,1,[this.items[u]]),a+=d,c=c||d!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const u=ys.relativeComplement(n,l);for(const g of u)for(let m=g.start;m<g.end;m++)this.items[m].row&&this.removeItemFromDOM(m);const d=ys.relativeComplement(l,n).reverse();for(const g of d)for(let m=g.end-1;m>=g.start;m--)this.insertItemInDOM(m);for(let g=l.start;g<l.end;g++)this.items[g].row&&this.updateItemInDOM(this.items[g],g);if(typeof r=="number"){const g=this.scrollable.getFutureScrollPosition().scrollTop-e,m=this.elementTop(r)-o+g;this.setScrollTop(m,i)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const o=this.virtualDelegate.getDynamicHeight(t.element);if(o!==null){const a=t.size;return t.size=o,t.lastDynamicHeightWidth=this.renderWidth,o-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const i=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,t.size===0&&!jn(t.row.domNode,tt(t.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",new Error().stack),t.lastDynamicHeightWidth=this.renderWidth,t.size-i;const{row:n}=this.cache.alloc(t.templateId);n.domNode.style.height="",this.rowsContainer.appendChild(n.domNode);const r=this.renderers.get(t.templateId);if(!r)throw new ri("Missing renderer for templateId: "+t.templateId);return r.renderElement(t.element,e,n.templateData,void 0),t.size=n.domNode.offsetHeight,r.disposeElement?.(t.element,e,n.templateData,void 0),this.virtualDelegate.setDynamicHeight?.(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,n.domNode.remove(),this.cache.release(n),t.size-i}getElementDomId(e){return`${this.domId}_${e}`}dispose(){for(const e of this.items)if(e.dragStartDisposable.dispose(),e.checkedDisposable.dispose(),e.row){const t=this.renderers.get(e.row.templateId);t&&(t.disposeElement?.(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[],this.domNode?.remove(),this.dragOverAnimationDisposable?.dispose(),this.disposables.dispose()}};wS.InstanceCount=0;let Sa=wS;wu([Qi],Sa.prototype,"onMouseClick",null);wu([Qi],Sa.prototype,"onMouseDblClick",null);wu([Qi],Sa.prototype,"onMouseMiddleClick",null);wu([Qi],Sa.prototype,"onMouseDown",null);wu([Qi],Sa.prototype,"onMouseOver",null);wu([Qi],Sa.prototype,"onMouseOut",null);wu([Qi],Sa.prototype,"onContextMenu",null);wu([Qi],Sa.prototype,"onTouchStart",null);wu([Qi],Sa.prototype,"onTap",null);var Gh=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r};class wae{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,i){const n=this.renderedElements.findIndex(r=>r.templateData===i);if(n>=0){const r=this.renderedElements[n];this.trait.unrender(i),r.index=t}else{const r={index:t,templateData:i};this.renderedElements.push(r)}this.trait.renderIndex(t,i)}splice(e,t,i){const n=[];for(const r of this.renderedElements)r.index<e?n.push(r):r.index>=e+t&&n.push({index:r.index+i-t,templateData:r.templateData});this.renderedElements=n}renderIndexes(e){for(const{index:t,templateData:i}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,i)}disposeTemplate(e){const t=this.renderedElements.findIndex(i=>i.templateData===e);t<0||this.renderedElements.splice(t,1)}}let ey=class{get name(){return this._trait}get renderer(){return new wae(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new re,this.onChange=this._onChange.event}splice(e,t,i){const n=i.length-t,r=e+t,o=[];let a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)o.push(this.sortedIndexes[a++]);for(let l=0;l<i.length;l++)i[l]&&o.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=r;)o.push(this.sortedIndexes[a++]+n);this.renderer.splice(e,t,i.length),this._set(o,o)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(sP),t)}_set(e,t,i){const n=this.indexes,r=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=D7(r,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:i}),n}get(){return this.indexes}contains(e){return vZ(this.sortedIndexes,e,sP)>=0}dispose(){ms(this._onChange)}};Gh([Qi],ey.prototype,"renderer",null);class Cae extends ey{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class qk{constructor(e,t,i){this.trait=e,this.view=t,this.identityProvider=i}splice(e,t,i){if(!this.identityProvider)return this.trait.splice(e,t,new Array(i.length).fill(!1));const n=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(n.length===0)return this.trait.splice(e,t,new Array(i.length).fill(!1));const r=new Set(n),o=i.map(a=>r.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,o)}}function Eh(s){return s.tagName==="INPUT"||s.tagName==="TEXTAREA"}function uv(s,e){return s.classList.contains(e)?!0:s.classList.contains("monaco-list")||!s.parentElement?!1:uv(s.parentElement,e)}function K0(s){return uv(s,"monaco-editor")}function yae(s){return uv(s,"monaco-custom-toggle")}function Sae(s){return uv(s,"action-item")}function h1(s){return uv(s,"monaco-tree-sticky-row")}function __(s){return s.classList.contains("monaco-tree-sticky-container")}function qz(s){return s.tagName==="A"&&s.classList.contains("monaco-button")||s.tagName==="DIV"&&s.classList.contains("monaco-button-dropdown")?!0:s.classList.contains("monaco-list")||!s.parentElement?!1:qz(s.parentElement)}class Kz{get onKeyDown(){return Te.chain(this.disposables.add(new Rt(this.view.domNode,"keydown")).event,e=>e.filter(t=>!Eh(t.target)).map(t=>new Ni(t)))}constructor(e,t,i){this.list=e,this.view=t,this.disposables=new Qe,this.multipleSelectionDisposables=new Qe,this.multipleSelectionSupport=i.multipleSelectionSupport,this.disposables.add(this.onKeyDown(n=>{switch(n.keyCode){case 3:return this.onEnter(n);case 16:return this.onUpArrow(n);case 18:return this.onDownArrow(n);case 11:return this.onPageUpArrow(n);case 12:return this.onPageDownArrow(n);case 9:return this.onEscape(n);case 31:this.multipleSelectionSupport&&(qt?n.metaKey:n.ctrlKey)&&this.onCtrlA(n)}}))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(_r(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}Gh([Qi],Kz.prototype,"onKeyDown",null);var Ol;(function(s){s[s.Automatic=0]="Automatic",s[s.Trigger=1]="Trigger"})(Ol||(Ol={}));var em;(function(s){s[s.Idle=0]="Idle",s[s.Typing=1]="Typing"})(em||(em={}));const xae=new class{mightProducePrintableCharacter(s){return s.ctrlKey||s.metaKey||s.altKey?!1:s.keyCode>=31&&s.keyCode<=56||s.keyCode>=21&&s.keyCode<=30||s.keyCode>=98&&s.keyCode<=107||s.keyCode>=85&&s.keyCode<=95}};class kae{constructor(e,t,i,n,r){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=i,this.keyboardNavigationEventFilter=n,this.delegate=r,this.enabled=!1,this.state=em.Idle,this.mode=Ol.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new Qe,this.disposables=new Qe,this.updateOptions(e.options)}updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??Ol.Automatic}enable(){if(this.enabled)return;let e=!1;const t=Te.chain(this.enabledDisposables.add(new Rt(this.view.domNode,"keydown")).event,r=>r.filter(o=>!Eh(o.target)).filter(()=>this.mode===Ol.Automatic||this.triggered).map(o=>new Ni(o)).filter(o=>e||this.keyboardNavigationEventFilter(o)).filter(o=>this.delegate.mightProducePrintableCharacter(o)).forEach(o=>zt.stop(o,!0)).map(o=>o.browserEvent.key)),i=Te.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);Te.reduce(Te.any(t,i),(r,o)=>o===null?null:(r||"")+o,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),i(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),i(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){const e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){const t=this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(e[0]));typeof t=="string"?m_(t):t&&m_(t.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=em.Idle,this.triggered=!1;return}const t=this.list.getFocus(),i=t.length>0?t[0]:0,n=this.state===em.Idle?1:0;this.state=em.Typing;for(let r=0;r<this.list.length;r++){const o=(i+r+n)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if($C(e,l)){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}const c=Gse(e,l);if(c&&c[0].end-c[0].start>1&&c.length===1){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}}}else if(typeof l>"u"||$C(e,l)){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class Lae{constructor(e,t){this.list=e,this.view=t,this.disposables=new Qe;const i=Te.chain(this.disposables.add(new Rt(t.domNode,"keydown")).event,r=>r.filter(o=>!Eh(o.target)).map(o=>new Ni(o)));Te.chain(i,r=>r.filter(o=>o.keyCode===2&&!o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey))(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const i=this.view.domElement(t[0]);if(!i)return;const n=i.querySelector("[tabIndex]");if(!n||!Jn(n)||n.tabIndex===-1)return;const r=tt(n).getComputedStyle(n);r.visibility==="hidden"||r.display==="none"||(e.preventDefault(),e.stopPropagation(),n.focus())}dispose(){this.disposables.dispose()}}function Gz(s){return qt?s.browserEvent.metaKey:s.browserEvent.ctrlKey}function Zz(s){return s.browserEvent.shiftKey}function Dae(s){return L8(s)&&s.button===2}const nP={isSelectionSingleChangeEvent:Gz,isSelectionRangeChangeEvent:Zz};class Yz{constructor(e){this.list=e,this.disposables=new Qe,this._onPointer=new re,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||nP),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(rr.addTarget(e.getHTMLElement()))),Te.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||nP))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){K0(e.browserEvent.target)||Us()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(Eh(e.browserEvent.target)||K0(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||Eh(e.browserEvent.target)||K0(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),Dae(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(Eh(e.browserEvent.target)||K0(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof i>"u"&&(i=this.list.getFocus()[0]??t,this.list.setAnchor(i));const n=Math.min(i,t),r=Math.max(i,t),o=_r(n,r+1),a=this.list.getSelection(),l=Nae(D7(a,[i]),i);if(l.length===0)return;const c=D7(o,Iae(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const n=this.list.getSelection(),r=n.filter(o=>o!==t);this.list.setFocus([t]),this.list.setAnchor(t),n.length===r.length?this.list.setSelection([...r,t],e.browserEvent):this.list.setSelection(r,e.browserEvent)}}dispose(){this.disposables.dispose()}}class Xz{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,i=[];e.listBackground&&i.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&i.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(i.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&i.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const n=eu(e.listFocusAndSelectionOutline,eu(e.listSelectionOutline,e.listFocusOutline??""));n&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${n}; outline-offset: -1px;}`),e.listFocusOutline&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);const r=eu(e.listSelectionOutline,e.listInactiveFocusOutline??"");r&&i.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${r}; outline-offset: -1px; }`),e.listSelectionOutline&&i.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&i.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&i.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&i.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(i.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${t} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),i.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${t} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&i.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&i.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=i.join(`
`)}}const Eae={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:Le.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:Le.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:Le.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},Tae={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function Nae(s,e){const t=s.indexOf(e);if(t===-1)return[];const i=[];let n=t-1;for(;n>=0&&s[n]===e-(t-n);)i.push(s[n--]);for(i.reverse(),n=t;n<s.length&&s[n]===e+(n-t);)i.push(s[n++]);return i}function D7(s,e){const t=[];let i=0,n=0;for(;i<s.length||n<e.length;)if(i>=s.length)t.push(e[n++]);else if(n>=e.length)t.push(s[i++]);else if(s[i]===e[n]){t.push(s[i]),i++,n++;continue}else s[i]<e[n]?t.push(s[i++]):t.push(e[n++]);return t}function Iae(s,e){const t=[];let i=0,n=0;for(;i<s.length||n<e.length;)if(i>=s.length)t.push(e[n++]);else if(n>=e.length)t.push(s[i++]);else if(s[i]===e[n]){i++,n++;continue}else s[i]<e[n]?t.push(s[i++]):n++;return t}const sP=(s,e)=>s-e;class Mae{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,i,n){let r=0;for(const o of this.renderers)o.renderElement(e,t,i[r++],n)}disposeElement(e,t,i,n){let r=0;for(const o of this.renderers)o.disposeElement?.(e,t,i[r],n),r+=1}disposeTemplate(e){let t=0;for(const i of this.renderers)i.disposeTemplate(e[t++])}}class Rae{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return{container:e,disposables:new Qe}}renderElement(e,t,i){const n=this.accessibilityProvider.getAriaLabel(e),r=n&&typeof n!="string"?n:JC(n);i.disposables.add(ti(a=>{this.setAriaLabel(a.readObservable(r),i.container)}));const o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof o=="number"?i.container.setAttribute("aria-level",`${o}`):i.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,i,n){i.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}}class Aae{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart?.(e,t)}onDragOver(e,t,i,n,r){return this.dnd.onDragOver(e,t,i,n,r)}onDragLeave(e,t,i,n){this.dnd.onDragLeave?.(e,t,i,n)}onDragEnd(e){this.dnd.onDragEnd?.(e)}drop(e,t,i,n,r){this.dnd.drop(e,t,i,n,r)}dispose(){this.dnd.dispose()}}class cl{get onDidChangeFocus(){return Te.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return Te.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=Te.chain(this.disposables.add(new Rt(this.view.domNode,"keydown")).event,r=>r.map(o=>new Ni(o)).filter(o=>e=o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>zt.stop(o,!0)).filter(()=>!1)),i=Te.chain(this.disposables.add(new Rt(this.view.domNode,"keyup")).event,r=>r.forEach(()=>e=!1).map(o=>new Ni(o)).filter(o=>o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>zt.stop(o,!0)).map(({browserEvent:o})=>{const a=this.getFocus(),l=a.length?a[0]:void 0,c=typeof l<"u"?this.view.element(l):void 0,u=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:c,anchor:u,browserEvent:o}})),n=Te.chain(this.view.onContextMenu,r=>r.filter(o=>!e).map(({element:o,index:a,browserEvent:l})=>({element:o,index:a,anchor:new Ya(tt(this.view.domNode),l),browserEvent:l})));return Te.any(t,i,n)}get onKeyDown(){return this.disposables.add(new Rt(this.view.domNode,"keydown")).event}get onDidFocus(){return Te.signal(this.disposables.add(new Rt(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return Te.signal(this.disposables.add(new Rt(this.view.domNode,"blur",!0)).event)}constructor(e,t,i,n,r=Tae){this.user=e,this._options=r,this.focus=new ey("focused"),this.anchor=new ey("anchor"),this.eventBufferer=new K_,this._ariaLabel="",this.disposables=new Qe,this._onDidDispose=new re,this.onDidDispose=this._onDidDispose.event;const o=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?this._options.accessibilityProvider?.getWidgetRole():"list";this.selection=new Cae(o!=="listbox");const a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=r.accessibilityProvider,this.accessibilityProvider&&(a.push(new Rae(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant?.(this.onDidChangeActiveDescendant,this,this.disposables)),n=n.map(c=>new Mae(c.templateId,[...a,c]));const l={...r,dnd:r.dnd&&new Aae(this,r.dnd)};if(this.view=this.createListView(t,i,n,l),this.view.domNode.setAttribute("role",o),r.styleController)this.styleController=r.styleController(this.view.domId);else{const c=Ca(this.view.domNode);this.styleController=new Xz(c,this.view.domId)}if(this.spliceable=new hae([new qk(this.focus,this.view,r.identityProvider),new qk(this.selection,this.view,r.identityProvider),new qk(this.anchor,this.view,r.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new Lae(this,this.view)),(typeof r.keyboardSupport!="boolean"||r.keyboardSupport)&&(this.keyboardController=new Kz(this,this.view,r),this.disposables.add(this.keyboardController)),r.keyboardNavigationLabelProvider){const c=r.keyboardNavigationDelegate||xae;this.typeNavigationController=new kae(this,this.view,r.keyboardNavigationLabelProvider,r.keyboardNavigationEventFilter??(()=>!0),c),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(r),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,i,n){return new Sa(e,t,i,n)}createMouseController(e){return new Yz(this)}updateOptions(e={}){this._options={...this._options,...e},this.typeNavigationController?.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),this.keyboardController?.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,i=[]){if(e<0||e>this.view.length)throw new dd(this.user,`Invalid start index: ${e}`);if(t<0)throw new dd(this.user,`Invalid delete count: ${t}`);t===0&&i.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,i))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const i of e)if(i<0||i>=this.length)throw new dd(this.user,`Invalid index ${i}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new dd(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return XD(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const i of e)if(i<0||i>=this.length)throw new dd(this.user,`Invalid index ${i}`);this.focus.set(e,t)}focusNext(e=1,t=!1,i,n){if(this.length===0)return;const r=this.focus.get(),o=this.findNextIndex(r.length>0?r[0]+e:0,t,n);o>-1&&this.setFocus([o],i)}focusPrevious(e=1,t=!1,i,n){if(this.length===0)return;const r=this.focus.get(),o=this.findPreviousIndex(r.length>0?r[0]-e:0,t,n);o>-1&&this.setFocus([o],i)}async focusNextPage(e,t){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=i===0?0:i-1;const n=this.getFocus()[0];if(n!==i&&(n===void 0||i>n)){const r=this.findPreviousIndex(i,!1,t);r>-1&&n!==r?this.setFocus([r],e):this.setFocus([i],e)}else{const r=this.view.getScrollTop();let o=r+this.view.renderHeight;i>n&&(o-=this.view.elementHeight(i)),this.view.setScrollTop(o),this.view.getScrollTop()!==r&&(this.setFocus([]),await n_(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,i=()=>0){let n;const r=i(),o=this.view.getScrollTop()+r;o===0?n=this.view.indexAt(o):n=this.view.indexAfter(o-1);const a=this.getFocus()[0];if(a!==n&&(a===void 0||a>=n)){const l=this.findNextIndex(n,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([n],e)}else{const l=o;this.view.setScrollTop(o-this.view.renderHeight-r),this.view.getScrollTop()+i()!==l&&(this.setFocus([]),await n_(0),await this.focusPreviousPage(e,t,i))}}focusLast(e,t){if(this.length===0)return;const i=this.findPreviousIndex(this.length-1,!1,t);i>-1&&this.setFocus([i],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,i){if(this.length===0)return;const n=this.findNextIndex(e,!1,i);n>-1&&this.setFocus([n],t)}findNextIndex(e,t=!1,i){for(let n=0;n<this.length;n++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!i||i(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,i){for(let n=0;n<this.length;n++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!i||i(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,i=0){if(e<0||e>=this.length)throw new dd(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),r=this.view.elementTop(e),o=this.view.elementHeight(e);if(vp(t)){const a=o-this.view.renderHeight+i;this.view.setScrollTop(a*vr(t,0,1)+r-i)}else{const a=r+o,l=n+this.view.renderHeight;r<n+i&&a>=l||(r<n+i||a>=l&&o>=this.view.renderHeight?this.view.setScrollTop(r-i):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new dd(this.user,`Invalid index ${e}`);const i=this.view.getScrollTop(),n=this.view.elementTop(e),r=this.view.elementHeight(e);if(n<i+t||n+r>i+this.view.renderHeight)return null;const o=r-this.view.renderHeight+t;return Math.abs((i+t-n)/o)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(i=>this.view.element(i)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){const e=this.focus.get();if(e.length>0){let t;this.accessibilityProvider?.getActiveDescendantId&&(t=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",t||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}Gh([Qi],cl.prototype,"onDidChangeFocus",null);Gh([Qi],cl.prototype,"onDidChangeSelection",null);Gh([Qi],cl.prototype,"onContextMenu",null);Gh([Qi],cl.prototype,"onKeyDown",null);Gh([Qi],cl.prototype,"onDidFocus",null);Gh([Qi],cl.prototype,"onDidBlur",null);const Jd=at,Qz="selectOption.entry.template";class Pae{get templateId(){return Qz}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=Ge(e,Jd(".option-text")),t.detail=Ge(e,Jd(".option-detail")),t.decoratorRight=Ge(e,Jd(".option-decorator-right")),t}renderElement(e,t,i){const n=i,r=e.text,o=e.detail,a=e.decoratorRight,l=e.isDisabled;n.text.textContent=r,n.detail.textContent=o||"",n.decoratorRight.innerText=a||"",l?n.root.classList.add("option-disabled"):n.root.classList.remove("option-disabled")}disposeTemplate(e){}}const Dl=class Dl extends ve{constructor(e,t,i,n,r){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=n,this.selectBoxOptions=r||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=Dl.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new re,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(i),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(Xl().setupManagedHover(Xo("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return Qz}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=at(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=Ge(this.selectDropDownContainer,Jd(".select-box-details-pane"));const t=Ge(this.selectDropDownContainer,Jd(".select-box-dropdown-container-width-control")),i=Ge(t,Jd(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",Ge(i,this.widthControlElement),this._dropDownPosition=0,this.styleElement=Ca(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(ge(this.selectDropDownContainer,Ne.DRAG_START,n=>{zt.stop(n,!0)}))}registerListeners(){this._register(Un(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(ge(this.selectElement,Ne.CLICK,t=>{zt.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(ge(this.selectElement,Ne.MOUSE_DOWN,t=>{zt.stop(t)}));let e;this._register(ge(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(ge(this.selectElement,"touchend",t=>{zt.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(ge(this.selectElement,Ne.KEY_DOWN,t=>{const i=new Ni(t);let n=!1;qt?(i.keyCode===18||i.keyCode===16||i.keyCode===10||i.keyCode===3)&&(n=!0):(i.keyCode===18&&i.altKey||i.keyCode===16&&i.altKey||i.keyCode===10||i.keyCode===3)&&(n=!0),n&&(this.showSelectDropDown(),zt.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){Rn(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((i,n)=>{this.selectElement.add(this.createOption(i.text,n,i.isDisabled)),typeof i.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){this.selectList?.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){const e=this.styles.selectBackground??"",t=this.styles.selectForeground??"",i=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=e,this.selectElement.style.color=t,this.selectElement.style.borderColor=i}styleList(){const e=this.styles.selectBackground??"",t=eu(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=t,this.selectionDetailsPane.style.backgroundColor=t;const i=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=i,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,i){const n=document.createElement("option");return n.value=e,n.text=e,n.disabled=!!i,n}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,i)=>{this.updateDetail(i),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=tt(this.selectElement),i=$o(this.selectElement),n=tt(this.selectElement).getComputedStyle(this.selectElement),r=parseFloat(n.getPropertyValue("--dropdown-padding-top"))+parseFloat(n.getPropertyValue("--dropdown-padding-bottom")),o=t.innerHeight-i.top-i.height-(this.selectBoxOptions.minBottomMargin||0),a=i.top-Dl.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,l=this.selectElement.offsetWidth,c=this.setWidthControlElement(this.widthControlElement),u=Math.max(c,Math.round(l)).toString()+"px";this.selectDropDownContainer.style.width=u,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let d=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const g=this._hasDetails?this._cachedMaxDetailsHeight:0,m=d+r+g,_=Math.floor((o-r-g)/this.getHeight()),v=Math.floor((a-r-g)/this.getHeight());if(e)return i.top+i.height>t.innerHeight-22||i.top<Dl.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||_<1&&v<1?!1:(_<Dl.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&v>_&&this.options.length>_?(this._dropDownPosition=1,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(i.top+i.height>t.innerHeight-22||i.top<Dl.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&_<1||this._dropDownPosition===1&&v<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&_+v<1)return this.hideSelectDropDown(!0),!1;m>o&&(d=_*this.getHeight())}else m>a&&(d=v*this.getHeight());return this.selectList.layout(d),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=d+r+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=d+r+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=u,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let i=0,n=0;this.options.forEach((r,o)=>{const a=r.detail?r.detail.length:0,l=r.decoratorRight?r.decoratorRight.length:0,c=r.text.length+a+l;c>n&&(i=o,n=c)}),e.textContent=this.options[i].text+(this.options[i].decoratorRight?this.options[i].decoratorRight+" ":""),t=S8(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=Ge(e,Jd(".select-box-dropdown-list-container")),this.listRenderer=new Pae,this.selectList=this._register(new cl("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:n=>{let r=n.text;return n.detail&&(r+=`. ${n.detail}`),n.decoratorRight&&(r+=`. ${n.decoratorRight}`),n.description&&(r+=`. ${n.description}`),r},getWidgetAriaLabel:()=>b({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>qt?"":"option",getWidgetRole:()=>"listbox"}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new Rt(this.selectDropDownListContainer,"keydown")),i=Te.chain(t.event,n=>n.filter(()=>this.selectList.length>0).map(r=>new Ni(r)));this._register(Te.chain(i,n=>n.filter(r=>r.keyCode===3))(this.onEnter,this)),this._register(Te.chain(i,n=>n.filter(r=>r.keyCode===2))(this.onEnter,this)),this._register(Te.chain(i,n=>n.filter(r=>r.keyCode===9))(this.onEscape,this)),this._register(Te.chain(i,n=>n.filter(r=>r.keyCode===16))(this.onUpArrow,this)),this._register(Te.chain(i,n=>n.filter(r=>r.keyCode===18))(this.onDownArrow,this)),this._register(Te.chain(i,n=>n.filter(r=>r.keyCode===12))(this.onPageDown,this)),this._register(Te.chain(i,n=>n.filter(r=>r.keyCode===11))(this.onPageUp,this)),this._register(Te.chain(i,n=>n.filter(r=>r.keyCode===14))(this.onHome,this)),this._register(Te.chain(i,n=>n.filter(r=>r.keyCode===13))(this.onEnd,this)),this._register(Te.chain(i,n=>n.filter(r=>r.keyCode>=21&&r.keyCode<=56||r.keyCode>=85&&r.keyCode<=113))(this.onCharacter,this)),this._register(ge(this.selectList.getHTMLElement(),Ne.POINTER_UP,n=>this.onPointerUp(n))),this._register(this.selectList.onMouseOver(n=>typeof n.index<"u"&&this.selectList.setFocus([n.index]))),this._register(this.selectList.onDidChangeFocus(n=>this.onListFocus(n))),this._register(ge(this.selectDropDownContainer,Ne.FOCUS_OUT,n=>{!this._isVisible||jn(n.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;zt.stop(e);const t=e.target;if(!t||t.classList.contains("slider"))return;const i=t.closest(".monaco-list-row");if(!i)return;const n=Number(i.getAttribute("data-index")),r=i.classList.contains("option-disabled");n>=0&&n<this.options.length&&!r&&(this.selected=n,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const i=r=>{for(let o=0;o<r.childNodes.length;o++){const a=r.childNodes.item(o);(a.tagName&&a.tagName.toLowerCase())==="img"?a.remove():i(a)}},n=sE({value:e,supportThemeIcons:!0},{actionHandler:t});return n.element.classList.add("select-box-description-markdown"),i(n.element),n.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){this.selectionDetailsPane.innerText="";const t=this.options[e],i=t?.description??"",n=t?.descriptionIsMarkdown??!1;if(i){if(n){const r=t.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(i,r))}else this.selectionDetailsPane.innerText=i;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){zt.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){zt.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){zt.stop(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(zt.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){zt.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){zt.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){zt.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){zt.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=Fc.toString(e.keyCode);let i=-1;for(let n=0;n<this.options.length-1;n++)if(i=(n+this.selected+1)%this.options.length,this.options[i].text.charAt(0).toUpperCase()===t&&!this.options[i].isDisabled){this.select(i),this.selectList.setFocus([i]),this.selectList.reveal(this.selectList.getFocus()[0]),zt.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}};Dl.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32,Dl.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2,Dl.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;let E7=Dl;class Oae extends ve{constructor(e,t,i,n){super(),this.selected=0,this.selectBoxOptions=n||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new re),this.styles=i,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(rr.addTarget(this.selectElement)),[xi.Tap].forEach(e=>{this._register(ge(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(Un(this.selectElement,"click",e=>{zt.stop(e,!0)})),this._register(Un(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(Un(this.selectElement,"keydown",e=>{let t=!1;qt?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!Rn(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((i,n)=>{this.selectElement.add(this.createOption(i.text,n,i.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(e,t,i){const n=document.createElement("option");return n.value=e,n.text=e,n.disabled=!!i,n}}class Fae extends bu{constructor(e,t,i,n,r){super(),qt&&!r?.useCustomDrawn?this.selectBoxDelegate=new Oae(e,t,n,r):this.selectBoxDelegate=new E7(e,t,i,n,r),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}}class Ga extends ve{get action(){return this._action}constructor(e,t,i={}){super(),this.options=i,this._context=e||this,this._action=t,t instanceof tu&&this._register(t.onDidChange(n=>{this.element&&this.handleActionChangeEvent(n)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Ef)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(rr.addTarget(e));const i=this.options&&this.options.draggable;i&&(e.draggable=!0,ba&&this._register(ge(e,Ne.DRAG_START,n=>n.dataTransfer?.setData(Uz.TEXT,this._action.label)))),this._register(ge(t,xi.Tap,n=>this.onClick(n,!0))),this._register(ge(t,Ne.MOUSE_DOWN,n=>{i||zt.stop(n,!0),this._action.enabled&&n.button===0&&t.classList.add("active")})),qt&&this._register(ge(t,Ne.CONTEXT_MENU,n=>{n.button===0&&n.ctrlKey===!0&&this.onClick(n)})),this._register(ge(t,Ne.CLICK,n=>{zt.stop(n,!0),this.options&&this.options.isMenu||this.onClick(n)})),this._register(ge(t,Ne.DBLCLICK,n=>{zt.stop(n,!0)})),[Ne.MOUSE_UP,Ne.MOUSE_OUT].forEach(n=>{this._register(ge(t,n,r=>{zt.stop(r),t.classList.remove("active")}))})}onClick(e,t=!1){zt.stop(e,!0);const i=mo(this._context)?this.options?.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){if(!this.element)return;const e=this.getTooltip()??"";if(this.updateAriaLabel(),this.options.hoverDelegate?.showNativeHover)this.element.title=e;else if(!this.customHover&&e!==""){const t=this.options.hoverDelegate??Xo("element");this.customHover=this._store.add(Xl().setupManagedHover(t,this.element,e))}else this.customHover&&this.customHover.update(e)}updateAriaLabel(){if(this.element){const e=this.getTooltip()??"";this.element.setAttribute("aria-label",e)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class _E extends Ga{constructor(e,t,i){super(e,t,i),this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass=""}render(e){super.render(e),xh(this.element);const t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){const i=document.createElement("span");i.classList.add("keybinding"),i.textContent=this.options.keybinding,this.element.appendChild(i)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===$s.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=b({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label?.classList.remove("codicon")}updateEnabled(){this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element?.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element?.classList.add("disabled"))}updateAriaLabel(){if(this.label){const e=this.getTooltip()??"";this.label.setAttribute("aria-label",e)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class Bae extends Ga{constructor(e,t,i,n,r,o,a){super(e,t),this.selectBox=new Fae(i,n,r,o,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){this.selectBox?.focus()}blur(){this.selectBox?.blur()}render(e){this.selectBox.render(e)}}class Wae extends Ef{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new re),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=Ge(e,at(".monaco-dropdown")),this._label=Ge(this._element,at(".dropdown-label"));let i=t.labelRenderer;i||(i=r=>(r.textContent=t.label||"",null));for(const r of[Ne.CLICK,Ne.MOUSE_DOWN,xi.Tap])this._register(ge(this.element,r,o=>zt.stop(o,!0)));for(const r of[Ne.MOUSE_DOWN,xi.Tap])this._register(ge(this._label,r,o=>{L8(o)&&(o.detail>1||o.button!==0)||(this.visible?this.hide():this.show())}));this._register(ge(this._label,Ne.KEY_UP,r=>{const o=new Ni(r);(o.equals(3)||o.equals(10))&&(zt.stop(r,!0),this.visible?this.hide():this.show())}));const n=i(this._label);n&&this._register(n),this._register(rr.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class Vae extends Wae{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class ty extends Ga{constructor(e,t,i,n=Object.create(null)){super(null,e,n),this.actionItem=null,this._onDidChangeVisibility=this._register(new re),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=i,this.options=n,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=r=>{this.element=Ge(r,at("a.action-label"));let o=[];return typeof this.options.classNames=="string"?o=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(o=this.options.classNames),o.find(a=>a==="icon")||o.push("codicon"),this.element.classList.add(...o),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register(Xl().setupManagedHover(this.options.hoverDelegate??Xo("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},i=Array.isArray(this.menuActionsOrProvider),n={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:i?this.menuActionsOrProvider:void 0,actionProvider:i?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new Vae(e,n)),this._register(this.dropdownMenu.onDidChangeVisibility(r=>{this.element?.setAttribute("aria-expanded",`${r}`),this._onDidChangeVisibility.fire(r)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const r=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return r.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){this.dropdownMenu?.show()}updateEnabled(){const e=!this.action.enabled;this.actionItem?.classList.toggle("disabled",e),this.element?.classList.toggle("disabled",e)}}function zae(s){return s?s.condition!==void 0:!1}var Im;(function(s){s[s.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",s[s.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(Im||(Im={}));var tm;(function(s){s[s.None=0]="None",s[s.Initialized=1]="Initialized",s[s.Closed=2]="Closed"})(tm||(tm={}));const CS=class CS extends ve{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new J1),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=tm.None,this.cache=new Map,this.flushDelayer=this._register(new IW(CS.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){this._onDidChangeStorage.pause();try{e.changed?.forEach((t,i)=>this.acceptExternal(i,t)),e.deleted?.forEach(t=>this.acceptExternal(t,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===tm.Closed)return;let i=!1;mo(t)?i=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0),i&&this._onDidChangeStorage.fire({key:e,external:!0})}get(e,t){const i=this.cache.get(e);return mo(i)?t:i}getBoolean(e,t){const i=this.get(e);return mo(i)?t:i==="true"}getNumber(e,t){const i=this.get(e);return mo(i)?t:parseInt(i,10)}async set(e,t,i=!1){if(this.state===tm.Closed)return;if(mo(t))return this.delete(e,i);const n=Cr(t)||Array.isArray(t)?pre(t):String(t);if(this.cache.get(e)!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:i}),this.doFlush()}async delete(e,t=!1){if(!(this.state===tm.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)this.whenFlushedCallbacks.pop()?.()})}async doFlush(e){return this.options.hint===Im.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),e)}};CS.DEFAULT_FLUSH_DELAY=100;let d1=CS;class Kk{constructor(){this.onDidChangeItemsExternal=Te.None,this.items=new Map}async updateItems(e){e.insert?.forEach((t,i)=>this.items.set(i,t)),e.delete?.forEach(t=>this.items.delete(t))}}const Kw="__$__targetStorageMarker",V2=Ut("storageService");var rP;(function(s){s[s.NONE=0]="NONE",s[s.SHUTDOWN=1]="SHUTDOWN"})(rP||(rP={}));function Hae(s){const e=s.get(Kw);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}const yS=class yS extends ve{constructor(e={flushInterval:yS.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new J1),this._onDidChangeTarget=this._register(new J1),this._onWillSaveState=this._register(new re),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,i){return Te.filter(this._onDidChangeValue.event,n=>n.scope===e&&(t===void 0||n.key===t),i)}emitDidChangeValue(e,t){const{key:i,external:n}=t;if(i===Kw){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:i,target:this.getKeyTargets(e)[i],external:n})}get(e,t,i){return this.getStorage(t)?.get(e,i)}getBoolean(e,t,i){return this.getStorage(t)?.getBoolean(e,i)}getNumber(e,t,i){return this.getStorage(t)?.getNumber(e,i)}store(e,t,i,n,r=!1){if(mo(t)){this.remove(e,i,r);return}this.withPausedEmitters(()=>{this.updateKeyTarget(e,i,n),this.getStorage(i)?.set(e,t,r)})}remove(e,t,i=!1){this.withPausedEmitters(()=>{this.updateKeyTarget(e,t,void 0),this.getStorage(t)?.delete(e,i)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,i,n=!1){const r=this.getKeyTargets(t);typeof i=="number"?r[e]!==i&&(r[e]=i,this.getStorage(t)?.set(Kw,JSON.stringify(r),n)):typeof r[e]=="number"&&(delete r[e],this.getStorage(t)?.set(Kw,JSON.stringify(r),n))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?Hae(t):Object.create(null)}};yS.DEFAULT_FLUSH_INTERVAL=60*1e3;let T7=yS;class jae extends T7{constructor(){super(),this.applicationStorage=this._register(new d1(new Kk,{hint:Im.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new d1(new Kk,{hint:Im.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new d1(new Kk,{hint:Im.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}function Uae(s,e){const t={...e};for(const i in s){const n=s[i];t[i]=n!==void 0?Ie(n):void 0}return t}const $ae={keybindingLabelBackground:Ie(Ane),keybindingLabelForeground:Ie(Pne),keybindingLabelBorder:Ie(One),keybindingLabelBottomBorder:Ie(Fne),keybindingLabelShadow:Ie(sv)},qae={buttonForeground:Ie(uz),buttonSeparator:Ie(wne),buttonBackground:Ie(j0),buttonHoverBackground:Ie(Cne),buttonSecondaryForeground:Ie(Sne),buttonSecondaryBackground:Ie(e7),buttonSecondaryHoverBackground:Ie(xne),buttonBorder:Ie(yne)},Kae={progressBarBackground:Ie(Fie)},Jz={inputActiveOptionBorder:Ie(az),inputActiveOptionForeground:Ie(cz),inputActiveOptionBackground:Ie(lz)};Ie(U0),Ie(kne),Ie(Lne),Ie(Dne),Ie(Ene),Ie(Tne),Ie(Nne);Ie(Ine),Ie(Rne),Ie(Mne);Ie(da),Ie(L2),Ie(sv),Ie(ii),Ie(Xie),Ie(Qie),Ie(Jie),Ie(Pie);const eH={inputBackground:Ie(one),inputForeground:Ie(ane),inputBorder:Ie(lne),inputValidationInfoBorder:Ie(dne),inputValidationInfoBackground:Ie(une),inputValidationInfoForeground:Ie(hne),inputValidationWarningBorder:Ie(mne),inputValidationWarningBackground:Ie(fne),inputValidationWarningForeground:Ie(gne),inputValidationErrorBorder:Ie(vne),inputValidationErrorBackground:Ie(pne),inputValidationErrorForeground:Ie(_ne)},Gae={listFilterWidgetBackground:Ie(Zne),listFilterWidgetOutline:Ie(Yne),listFilterWidgetNoMatchesOutline:Ie(Xne),listFilterWidgetShadow:Ie(Qne),inputBoxStyles:eH,toggleStyles:Jz},Zae={badgeBackground:Ie(jw),badgeForeground:Ie(Oie),badgeBorder:Ie(ii)};Ie(Zie),Ie(Gie),Ie(fA),Ie(fA),Ie(Yie);const Dp={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:Ie(Bne),listFocusForeground:Ie(Wne),listFocusOutline:Ie(Vne),listActiveSelectionBackground:Ie(Mf),listActiveSelectionForeground:Ie(h_),listActiveSelectionIconForeground:Ie(hz),listFocusAndSelectionOutline:Ie(zne),listFocusAndSelectionBackground:Ie(Mf),listFocusAndSelectionForeground:Ie(h_),listInactiveSelectionBackground:Ie(Hne),listInactiveSelectionIconForeground:Ie(Une),listInactiveSelectionForeground:Ie(jne),listInactiveFocusBackground:Ie($ne),listInactiveFocusOutline:Ie(qne),listHoverBackground:Ie(dz),listHoverForeground:Ie(fz),listDropOverBackground:Ie(Kne),listDropBetweenBackground:Ie(Gne),listSelectionOutline:Ie(ln),listHoverOutline:Ie(ln),treeIndentGuidesStroke:Ie(gz),treeInactiveIndentGuidesStroke:Ie(Jne),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:Ie(U8),tableColumnsBorder:Ie(ese),tableOddRowsBackgroundColor:Ie(tse)};function hv(s){return Uae(s,Dp)}const Yae={selectBackground:Ie(D2),selectListBackground:Ie(bne),selectForeground:Ie(K8),decoratorRightForeground:Ie(mz),selectBorder:Ie(G8),focusBorder:Ie(Ul),listFocusBackground:Ie(i7),listInactiveSelectionIconForeground:Ie(pz),listFocusForeground:Ie(t7),listFocusOutline:Tie(ln,Le.transparent.toString()),listHoverBackground:Ie(dz),listHoverForeground:Ie(fz),listHoverOutline:Ie(ln),selectListBorder:Ie(tz),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},Xae={shadowColor:Ie(sv),borderColor:Ie(ise),foregroundColor:Ie(nse),backgroundColor:Ie(sse),selectionForegroundColor:Ie(rse),selectionBackgroundColor:Ie(ose),selectionBorderColor:Ie(ase),separatorColor:Ie(lse),scrollbarShadow:Ie(U8),scrollbarSliderBackground:Ie(QV),scrollbarSliderHoverBackground:Ie(JV),scrollbarSliderActiveBackground:Ie(ez)};var z2=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},wr=function(s,e){return function(t,i){e(t,i,s)}};function Qae(s,e,t,i){let n,r,o;if(Array.isArray(s))o=s,n=e,r=t;else{const c=e;o=s.getActions(c),n=t,r=i}const a=gh.getInstance(),l=a.keyStatus.altKey||($r||xr)&&a.keyStatus.shiftKey;tH(o,n,l,r?c=>c===r:c=>c==="navigation")}function Jae(s,e,t,i,n,r){let o,a,l,c,u;if(Array.isArray(s))u=s,o=e,a=t,l=i,c=n;else{const g=e;u=s.getActions(g),o=t,a=i,l=n,c=r}tH(u,o,!1,typeof a=="string"?g=>g===a:a,l,c)}function tH(s,e,t,i=o=>o==="navigation",n=()=>!1,r=!1){let o,a;Array.isArray(e)?(o=e,a=e):(o=e.primary,a=e.secondary);const l=new Set;for(const[c,u]of s){let d;i(c)?(d=o,d.length>0&&r&&d.push(new $s)):(d=a,d.length>0&&d.push(new $s));for(let g of u){t&&(g=g instanceof iu&&g.alt?g.alt:g);const m=d.push(g);g instanceof h2&&l.add({group:c,action:g,index:m-1})}}for(const{group:c,action:u,index:d}of l){const g=i(c)?o:a,m=u.actions;n(u,c,g.length)&&g.splice(d,1,...m)}}let v_=class extends _E{constructor(e,t,i,n,r,o,a,l){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t?.draggable,keybinding:t?.keybinding,hoverDelegate:t?.hoverDelegate}),this._options=t,this._keybindingService=i,this._notificationService=n,this._contextKeyService=r,this._themeService=o,this._contextMenuService=a,this._accessibilityService=l,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new uu),this._altKey=gh.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const i=()=>{const n=!!this._menuItemAction.alt?.enabled&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);n!==this._wantsAltCommand&&(this._wantsAltCommand=n,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(i)),this._register(ge(e,"mouseleave",n=>{t=!1,i()})),this._register(ge(e,"mouseenter",n=>{t=!0,i()})),i()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),i=this._commandAction.tooltip||this._commandAction.label;let n=t?b("titleAndKb","{0} ({1})",i,t):i;if(!this._wantsAltCommand&&this._menuItemAction.alt?.enabled){const r=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,o=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),a=o&&o.getLabel(),l=a?b("titleAndKb","{0} ({1})",r,a):r;n=b("titleAndKbAndAlt",`{0}
[{1}] {2}`,n,lE.modifierLabels[ha].altKey,l)}return n}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:i}=this;if(!t||!i)return;const n=this._commandAction.checked&&zae(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(n)if(Yt.isThemeIcon(n)){const r=Yt.asClassNameArray(n);i.classList.add(...r),this._itemClassDispose.value=bt(()=>{i.classList.remove(...r)})}else i.style.backgroundImage=x2(this._themeService.getColorTheme().type)?du(n.dark):du(n.light),i.classList.add("icon"),this._itemClassDispose.value=Vl(bt(()=>{i.style.backgroundImage="",i.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};v_=z2([wr(2,ps),wr(3,al),wr(4,ai),wr(5,La),wr(6,vu),wr(7,ll)],v_);let N7=class extends ty{constructor(e,t,i,n,r){const o={...t,menuAsChild:t?.menuAsChild??!1,classNames:t?.classNames??(Yt.isThemeIcon(e.item.icon)?Yt.asClassName(e.item.icon):void 0),keybindingProvider:t?.keybindingProvider??(a=>i.lookupKeybinding(a.id))};super(e,{getActions:()=>e.actions},n,o),this._keybindingService=i,this._contextMenuService=n,this._themeService=r}render(e){super.render(e),xh(this.element),e.classList.add("menu-entry");const t=this._action,{icon:i}=t.item;if(i&&!Yt.isThemeIcon(i)){this.element.classList.add("icon");const n=()=>{this.element&&(this.element.style.backgroundImage=x2(this._themeService.getColorTheme().type)?du(i.dark):du(i.light))};n(),this._register(this._themeService.onDidColorThemeChange(()=>{n()}))}}};N7=z2([wr(2,ps),wr(3,vu),wr(4,La)],N7);let I7=class extends Ga{constructor(e,t,i,n,r,o,a,l){super(null,e),this._keybindingService=i,this._notificationService=n,this._contextMenuService=r,this._menuService=o,this._instaService=a,this._storageService=l,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let c;const u=t?.persistLastActionId?l.get(this._storageKey,1):void 0;u&&(c=e.actions.find(g=>u===g.id)),c||(c=e.actions[0]),this._defaultAction=this._instaService.createInstance(v_,c,{keybinding:this._getDefaultActionKeybindingLabel(c)});const d={keybindingProvider:g=>this._keybindingService.lookupKeybinding(g.id),...t,menuAsChild:t?.menuAsChild??!0,classNames:t?.classNames??["codicon","codicon-chevron-down"],actionRunner:t?.actionRunner??new Ef};this._dropdown=new ty(e,e.actions,this._contextMenuService,d),this._register(this._dropdown.actionRunner.onDidRun(g=>{g.action instanceof iu&&this.update(g.action)}))}update(e){this._options?.persistLastActionId&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(v_,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends Ef{async runAction(t,i){await t.run(void 0)}},this._container&&this._defaultAction.render(D8(this._container,at(".action-container")))}_getDefaultActionKeybindingLabel(e){let t;if(this._options?.renderKeybindingWithDefaultActionLabel){const i=this._keybindingService.lookupKeybinding(e.id);i&&(t=`(${i.getLabel()})`)}return t}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=at(".action-container");this._defaultAction.render(Ge(this._container,t)),this._register(ge(t,Ne.KEY_DOWN,n=>{const r=new Ni(n);r.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),r.stopPropagation())}));const i=at(".dropdown-action-container");this._dropdown.render(Ge(this._container,i)),this._register(ge(i,Ne.KEY_DOWN,n=>{const r=new Ni(n);r.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),this._defaultAction.element?.focus(),r.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};I7=z2([wr(2,ps),wr(3,al),wr(4,vu),wr(5,$f),wr(6,hi),wr(7,V2)],I7);let M7=class extends Bae{constructor(e,t){super(null,e,e.actions.map(i=>({text:i.id===$s.ID?"─────────":i.label,isDisabled:!i.enabled})),0,t,Yae,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(i=>i.checked)))}render(e){super.render(e),e.style.borderColor=Ie(G8)}runAction(e,t){const i=this.action.actions[t];i&&this.actionRunner.run(i)}};M7=z2([wr(1,ov)],M7);function ele(s,e,t){return e instanceof iu?s.createInstance(v_,e,t):e instanceof o1?e.item.isSelection?s.createInstance(M7,e):e.item.rememberDefaultAction?s.createInstance(I7,e,{...t,persistLastActionId:!0}):s.createInstance(N7,e,t):void 0}class su extends ve{constructor(e,t={}){super(),this._actionRunnerDisposables=this._register(new Qe),this.viewItemDisposables=this._register(new r8),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new re),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new re({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new re),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new re),this.onWillRun=this._onWillRun.event,this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:this.options.triggerKeys?.keyDown??!1,keys:this.options.triggerKeys?.keys??[3,10]},this._hoverDelegate=t.hoverDelegate??this._register(pE()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Ef,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(r=>this._onDidRun.fire(r))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(r=>this._onWillRun.fire(r))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let i,n;switch(this._orientation){case 0:i=[15],n=[17];break;case 1:i=[16],n=[18],this.domNode.className+=" vertical";break}this._register(ge(this.domNode,Ne.KEY_DOWN,r=>{const o=new Ni(r);let a=!0;const l=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;i&&(o.equals(i[0])||o.equals(i[1]))?a=this.focusPrevious():n&&(o.equals(n[0])||o.equals(n[1]))?a=this.focusNext():o.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():o.equals(14)?a=this.focusFirst():o.equals(13)?a=this.focusLast():o.equals(2)&&l instanceof Ga&&l.trapsArrowNavigation?a=this.focusNext(void 0,!0):this.isTriggerKeyEvent(o)?this._triggerKeys.keyDown?this.doTrigger(o):this.triggerKeyDown=!0:a=!1,a&&(o.preventDefault(),o.stopPropagation())})),this._register(ge(this.domNode,Ne.KEY_UP,r=>{const o=new Ni(r);this.isTriggerKeyEvent(o)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(o)),o.preventDefault(),o.stopPropagation()):(o.equals(2)||o.equals(1026)||o.equals(16)||o.equals(18)||o.equals(15)||o.equals(17))&&this.updateFocusedItem()})),this.focusTracker=this._register(s_(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(Us()===this.domNode||!jn(Us(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(i=>i instanceof Ga&&i.isEnabled());t instanceof Ga&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof Ga&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(i=>{t=t||e.equals(i)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(jn(Us(),t)){this.focusedItem=e,this.viewItems[this.focusedItem]?.showHover?.();break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}getAction(e){if(typeof e=="number")return this.viewItems[e]?.action;if(Jn(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let t=0;t<this.actionsList.childNodes.length;t++)if(this.actionsList.childNodes[t]===e)return this.viewItems[t].action}}push(e,t={}){const i=Array.isArray(e)?e:[e];let n=vp(t.index)?t.index:null;i.forEach(r=>{const o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation");let a;const l={hoverDelegate:this._hoverDelegate,...t,isTabList:this.options.ariaRole==="tablist"};this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(r,l)),a||(a=new _E(this.context,r,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,ge(o,Ne.CONTEXT_MENU,c=>{zt.stop(c,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(o),this.focusable&&a instanceof Ga&&this.viewItems.length===0&&a.setFocusable(!0),n===null||n<0||n>=this.actionsList.children.length?(this.actionsList.appendChild(o),this.viewItems.push(a)):(this.actionsList.insertBefore(o,this.actionsList.children[n]),this.viewItems.splice(n,0,a),n++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=ms(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),el(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,i;if(e===void 0?t=!0:typeof e=="number"?i=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const n=this.viewItems.findIndex(r=>r.isEnabled());this.focusedItem=n===-1?void 0:n,this.updateFocus(void 0,void 0,!0)}else i!==void 0&&(this.focusedItem=i),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e,t){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const i=this.focusedItem;let n;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=i,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,n=this.viewItems[this.focusedItem]}while(this.focusedItem!==i&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===$s.ID));return this.updateFocus(void 0,void 0,t),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===$s.ID));return this.updateFocus(!0),!0}updateFocus(e,t,i=!1){typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&this.viewItems[this.previouslyFocusedItem]?.blur();const n=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(n){let r=!0;dC(n.focus)||(r=!1),this.options.focusOnlyEnabledItems&&dC(n.isEnabled)&&!n.isEnabled()&&(r=!1),n.action.id===$s.ID&&(r=!1),r?(i||this.previouslyFocusedItem!==this.focusedItem)&&(n.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),r&&n.showHover?.()}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof Ga){const i=t._context===null||t._context===void 0?e:t._context;this.run(t._action,i)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=ms(this.viewItems),this.getContainer().remove(),super.dispose()}}const R7=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,Gk=/(&amp;)?(&amp;)([^\s&])/g;var iy;(function(s){s[s.Right=0]="Right",s[s.Left=1]="Left"})(iy||(iy={}));var A7;(function(s){s[s.Above=0]="Above",s[s.Below=1]="Below"})(A7||(A7={}));class Mm extends su{constructor(e,t,i,n){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const r=document.createElement("div");r.classList.add("monaco-menu"),r.setAttribute("role","presentation"),super(r,{orientation:1,actionViewItemProvider:c=>this.doGetActionViewItem(c,i,o),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...qt||xr?[10]:[]],keyDown:!0}}),this.menuStyles=n,this.menuElement=r,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,n),this._register(rr.addTarget(r)),this._register(ge(r,Ne.KEY_DOWN,c=>{new Ni(c).equals(2)&&c.preventDefault()})),i.enableMnemonics&&this._register(ge(r,Ne.KEY_DOWN,c=>{const u=c.key.toLocaleLowerCase();if(this.mnemonics.has(u)){zt.stop(c,!0);const d=this.mnemonics.get(u);if(d.length===1&&(d[0]instanceof oP&&d[0].container&&this.focusItemByElement(d[0].container),d[0].onClick(c)),d.length>1){const g=d.shift();g&&g.container&&(this.focusItemByElement(g.container),d.push(g)),this.mnemonics.set(u,d)}}})),xr&&this._register(ge(r,Ne.KEY_DOWN,c=>{const u=new Ni(c);u.equals(14)||u.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),zt.stop(c,!0)):(u.equals(13)||u.equals(12))&&(this.focusedItem=0,this.focusPrevious(),zt.stop(c,!0))})),this._register(ge(this.domNode,Ne.MOUSE_OUT,c=>{const u=c.relatedTarget;jn(u,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),c.stopPropagation())})),this._register(ge(this.actionsList,Ne.MOUSE_OVER,c=>{let u=c.target;if(!(!u||!jn(u,this.actionsList)||u===this.actionsList)){for(;u.parentElement!==this.actionsList&&u.parentElement!==null;)u=u.parentElement;if(u.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(u),d!==this.focusedItem&&this.updateFocus()}}})),this._register(rr.addTarget(this.actionsList)),this._register(ge(this.actionsList,xi.Tap,c=>{let u=c.initialTarget;if(!(!u||!jn(u,this.actionsList)||u===this.actionsList)){for(;u.parentElement!==this.actionsList&&u.parentElement!==null;)u=u.parentElement;if(u.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(u),d!==this.focusedItem&&this.updateFocus()}}}));const o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new Y8(r,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position="",this.styleScrollElement(a,n),this._register(ge(r,xi.Change,c=>{zt.stop(c,!0);const u=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:u-c.translationY})})),this._register(ge(a,Ne.MOUSE_UP,c=>{c.preventDefault()}));const l=tt(e);r.style.maxHeight=`${Math.max(10,l.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter((c,u)=>i.submenuIds?.has(c.id)?(console.warn(`Found submenu cycle: ${c.id}`),!1):!(c instanceof $s&&(u===t.length-1||u===0||t[u-1]instanceof $s))),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(c=>!(c instanceof aP)).forEach((c,u,d)=>{c.updatePositionInSet(u+1,d.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(m3(e)?this.styleSheet=Ca(e):(Mm.globalStyleSheet||(Mm.globalStyleSheet=Ca()),this.styleSheet=Mm.globalStyleSheet)),this.styleSheet.textContent=ile(t,m3(e))}styleScrollElement(e,t){const i=t.foregroundColor??"",n=t.backgroundColor??"",r=t.borderColor?`1px solid ${t.borderColor}`:"",o="5px",a=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=r,e.style.borderRadius=o,e.style.color=i,e.style.backgroundColor=n,e.style.boxShadow=a}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const i=this.actionsList.children[t];if(e===i){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,i){if(e instanceof $s)return new aP(t.context,e,{icon:!0},this.menuStyles);if(e instanceof h2){const n=new oP(e,e.actions,i,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){const r=n.getMnemonic();if(r&&n.isEnabled()){let o=[];this.mnemonics.has(r)&&(o=this.mnemonics.get(r)),o.push(n),this.mnemonics.set(r,o)}}return n}else{const n={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const o=t.getKeyBinding(e);if(o){const a=o.getLabel();a&&(n.keybinding=a)}}const r=new iH(t.context,e,n,this.menuStyles);if(t.enableMnemonics){const o=r.getMnemonic();if(o&&r.isEnabled()){let a=[];this.mnemonics.has(o)&&(a=this.mnemonics.get(o)),a.push(r),this.mnemonics.set(o,a)}}return r}}}class iH extends Ga{constructor(e,t,i,n){if(i.isMenu=!0,super(t,t,i),this.menuStyle=n,this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass="",this.options.label&&i.enableMnemonics){const r=this.action.label;if(r){const o=R7.exec(r);o&&(this.mnemonic=(o[1]?o[1]:o[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new ir(()=>{this.element&&(this._register(ge(this.element,Ne.MOUSE_UP,r=>{if(zt.stop(r,!0),ba){if(new Ya(tt(this.element),r).rightButton)return;this.onClick(r)}else setTimeout(()=>{this.onClick(r)},0)})),this._register(ge(this.element,Ne.CONTEXT_MENU,r=>{zt.stop(r,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=Ge(this.element,at("a.action-menu-item")),this._action.id===$s.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=Ge(this.item,at("span.menu-item-check"+Yt.asCSSSelector($e.menuSelection))),this.check.setAttribute("role","none"),this.label=Ge(this.item,at("span.action-label")),this.options.label&&this.options.keybinding&&(Ge(this.item,at("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item?.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){if(this.label&&this.options.label){el(this.label);let e=Ez(this.action.label);if(e){const t=tle(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));const i=R7.exec(e);if(i){e=t1(e),Gk.lastIndex=0;let n=Gk.exec(e);for(;n&&n[1];)n=Gk.exec(e);const r=o=>o.replace(/&amp;&amp;/g,"&amp;");n?this.label.append(r2(r(e.substr(0,n.index))," "),at("u",{"aria-hidden":"true"},n[3]),MX(r(e.substr(n.index+n[0].length))," ")):this.label.innerText=r(e).trim(),this.item?.setAttribute("aria-keyshortcuts",(i[1]?i[1]:i[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,n=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",r=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=i??"",this.item.style.outline=n,this.item.style.outlineOffset=r),this.check&&(this.check.style.color=t??"")}}class oP extends iH{constructor(e,t,i,n,r){super(e,e,n,r),this.submenuActions=t,this.parentData=i,this.submenuOptions=n,this.mysubmenu=null,this.submenuDisposables=this._register(new Qe),this.mouseOver=!1,this.expandDirection=n&&n.expandDirection!==void 0?n.expandDirection:{horizontal:iy.Right,vertical:A7.Below},this.showScheduler=new ir(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new ir(()=>{this.element&&!jn(Us(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=Ge(this.item,at("span.submenu-indicator"+Yt.asCSSSelector($e.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(ge(this.element,Ne.KEY_UP,t=>{const i=new Ni(t);(i.equals(17)||i.equals(3))&&(zt.stop(t,!0),this.createSubmenu(!0))})),this._register(ge(this.element,Ne.KEY_DOWN,t=>{const i=new Ni(t);Us()===this.item&&(i.equals(17)||i.equals(3))&&zt.stop(t,!0)})),this._register(ge(this.element,Ne.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(ge(this.element,Ne.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(ge(this.element,Ne.FOCUS_OUT,t=>{this.element&&!jn(Us(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){zt.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,i,n){const r={top:0,left:0};return r.left=Xg(e.width,t.width,{position:n.horizontal===iy.Right?0:1,offset:i.left,size:i.width}),r.left>=i.left&&r.left<i.left+i.width&&(i.left+10+t.width<=e.width&&(r.left=i.left+10),i.top+=10,i.height=0),r.top=Xg(e.height,t.height,{position:0,offset:i.top,size:0}),r.top+t.height===i.top&&r.top+i.height+t.height<=e.height&&(r.top+=i.height),r}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=Ge(this.element,at("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=tt(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),i=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new Mm(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new b3],this.submenuOptions,this.menuStyle);const n=this.element.getBoundingClientRect(),r={top:n.top-i,left:n.left,height:n.height+2*i,width:n.width},o=this.submenuContainer.getBoundingClientRect(),a=tt(this.element),{top:l,left:c}=this.calculateSubmenuMenuLayout(new Bc(a.innerWidth,a.innerHeight),Bc.lift(o),r,this.expandDirection);this.submenuContainer.style.left=`${c-o.left}px`,this.submenuContainer.style.top=`${l-o.top}px`,this.submenuDisposables.add(ge(this.submenuContainer,Ne.KEY_UP,u=>{new Ni(u).equals(15)&&(zt.stop(u,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(ge(this.submenuContainer,Ne.KEY_DOWN,u=>{new Ni(u).equals(15)&&zt.stop(u,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){this.item&&this.item?.setAttribute("aria-expanded",e)}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class aP extends _E{constructor(e,t,i,n){super(e,t,i),this.menuStyles=n}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function tle(s){const e=R7,t=e.exec(s);if(!t)return s;const i=!t[1];return s.replace(e,i?"$2$3":"").trim()}function lP(s){const e=_W()[s.id];return`.codicon-${s.id}:before { content: '\\${e.toString(16)}'; }`}function ile(s,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${lP($e.menuSelection)}
${lP($e.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
	max-height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const i=s.scrollbarShadow;i&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${i} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${i} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${i} 6px 6px 6px -6px inset;
				}
			`);const n=s.scrollbarSliderBackground;n&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${n};
				}
			`);const r=s.scrollbarSliderHoverBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${r};
				}
			`);const o=s.scrollbarSliderActiveBackground;o&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${o};
				}
			`)}return t}class nle{constructor(e,t,i,n){this.contextViewService=e,this.telemetryService=t,this.notificationService=i,this.keybindingService=n,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=Us();let i;const n=Jn(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:r=>{this.lastContainer=r;const o=e.getMenuClassName?e.getMenuClassName():"";o&&(r.className+=" "+o),this.options.blockMouse&&(this.block=r.appendChild(at(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",this.blockDisposable?.dispose(),this.blockDisposable=ge(this.block,Ne.MOUSE_DOWN,u=>u.stopPropagation()));const a=new Qe,l=e.actionRunner||new Ef;l.onWillRun(u=>this.onActionRun(u,!e.skipTelemetry),this,a),l.onDidRun(this.onDidActionRun,this,a),i=new Mm(r,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:u=>this.keybindingService.lookupKeybinding(u.id)},Xae),i.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),i.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a);const c=tt(r);return a.add(ge(c,Ne.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(ge(c,Ne.MOUSE_DOWN,u=>{if(u.defaultPrevented)return;const d=new Ya(c,u);let g=d.target;if(!d.rightButton){for(;g;){if(g===r)return;g=g.parentElement}this.contextViewService.hideContextView(!0)}})),Vl(a,i)},focus:()=>{i?.focus(!!e.autoSelectFirstItem)},onHide:r=>{e.onHide?.(!!r),this.block&&(this.block.remove(),this.block=null),this.blockDisposable?.dispose(),this.blockDisposable=null,this.lastContainer&&(Us()===this.lastContainer||jn(Us(),this.lastContainer))&&this.focusToReturn?.focus(),this.lastContainer=null}},n,!!n)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!$_(e.error)&&this.notificationService.error(e.error)}}var sle=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Mg=function(s,e){return function(t,i){e(t,i,s)}};let P7=class extends ve{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new nle(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,i,n,r,o){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=i,this.keybindingService=n,this.menuService=r,this.contextKeyService=o,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new re),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new re)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=O7.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...e,onHide:t=>{e.onHide?.(t),this._onDidHideContextMenu.fire()}}),gh.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};P7=sle([Mg(0,qf),Mg(1,al),Mg(2,ov),Mg(3,ps),Mg(4,$f),Mg(5,ai)],P7);var O7;(function(s){function e(i){return i&&i.menuId instanceof fs}function t(i,n,r){if(!e(i))return i;const{menuId:o,menuActionOptions:a,contextKeyService:l}=i;return{...i,getActions:()=>{const c=[];if(o){const u=n.getMenuActions(o,l??r,a);Qae(u,c)}return i.getActions?$s.join(i.getActions(),c):c}}}s.transform=t})(O7||(O7={}));var ny;(function(s){s[s.API=0]="API",s[s.USER=1]="USER"})(ny||(ny={}));var vE=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},sy=function(s,e){return function(t,i){e(t,i,s)}};let F7=class{constructor(e){this._commandService=e}async open(e,t){if(!b8(e,Dt.command))return!1;if(!t?.allowCommands||(typeof e=="string"&&(e=Et.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let i=[];try{i=l7(decodeURIComponent(e.query))}catch{try{i=l7(e.query)}catch{}}return Array.isArray(i)||(i=[i]),await this._commandService.executeCommand(e.path,...i),!0}};F7=vE([sy(0,xo)],F7);let B7=class{constructor(e){this._editorService=e}async open(e,t){typeof e=="string"&&(e=Et.parse(e));const{selection:i,uri:n}=Ise(e);return e=n,e.scheme===Dt.file&&(e=cre(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:i,source:t?.fromUserGesture?ny.USER:ny.API,...t?.editorOptions}},this._editorService.getFocusedCodeEditor(),t?.openToSide),!0}};B7=vE([sy(0,An)],B7);let W7=class{constructor(e,t){this._openers=new zr,this._validators=new zr,this._resolvers=new zr,this._resolvedUriTargets=new Co(i=>i.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new zr,this._defaultExternalOpener={openExternal:async i=>(GM(i,Dt.http,Dt.https)?QW(i):bi.location.href=i,!0)},this._openers.push({open:async(i,n)=>n?.openExternal||GM(i,Dt.mailto,Dt.http,Dt.https,Dt.vsls)?(await this._doOpenExternal(i,n),!0):!1}),this._openers.push(new F7(t)),this._openers.push(new B7(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}async open(e,t){const i=typeof e=="string"?Et.parse(e):e,n=this._resolvedUriTargets.get(i)??e;for(const r of this._validators)if(!await r.shouldOpen(n,t))return!1;for(const r of this._openers)if(await r.open(e,t))return!0;return!1}async resolveExternalUri(e,t){for(const i of this._resolvers)try{const n=await i.resolveExternalUri(e,t);if(n)return this._resolvedUriTargets.has(n.resolved)||this._resolvedUriTargets.set(n.resolved,e),n}catch{}throw new Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){const i=typeof e=="string"?Et.parse(e):e;let n;try{n=(await this.resolveExternalUri(i,t)).resolved}catch{n=i}let r;if(typeof e=="string"&&i.toString()===n.toString()?r=e:r=encodeURI(n.toString(!0)),t?.allowContributedOpeners){const o=typeof t?.allowContributedOpeners=="string"?t?.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(await a.openExternal(r,{sourceUri:i,preferredOpenerId:o},va.None))return!0}return this._defaultExternalOpener.openExternal(r,{sourceUri:i},va.None)}dispose(){this._validators.clear()}};W7=vE([sy(0,An),sy(1,xo)],W7);const dv=Ut("editorWorkerService");var Ho;(function(s){s[s.Hint=1]="Hint",s[s.Info=2]="Info",s[s.Warning=4]="Warning",s[s.Error=8]="Error"})(Ho||(Ho={}));(function(s){function e(o,a){return a-o}s.compare=e;const t=Object.create(null);t[s.Error]=b("sev.error","Error"),t[s.Warning]=b("sev.warning","Warning"),t[s.Info]=b("sev.info","Info");function i(o){return t[o]||""}s.toString=i;function n(o){switch(o){case Cn.Error:return s.Error;case Cn.Warning:return s.Warning;case Cn.Info:return s.Info;case Cn.Ignore:return s.Hint}}s.fromSeverity=n;function r(o){switch(o){case s.Error:return Cn.Error;case s.Warning:return Cn.Warning;case s.Info:return Cn.Info;case s.Hint:return Cn.Ignore}}s.toSeverity=r})(Ho||(Ho={}));var cP;(function(s){const e="";function t(n){return i(n,!0)}s.makeKey=t;function i(n,r){const o=[e];return n.source?o.push(n.source.replace("¦","\\¦")):o.push(e),n.code?typeof n.code=="string"?o.push(n.code.replace("¦","\\¦")):o.push(n.code.value.replace("¦","\\¦")):o.push(e),n.severity!==void 0&&n.severity!==null?o.push(Ho.toString(n.severity)):o.push(e),n.message&&r?o.push(n.message.replace("¦","\\¦")):o.push(e),n.startLineNumber!==void 0&&n.startLineNumber!==null?o.push(n.startLineNumber.toString()):o.push(e),n.startColumn!==void 0&&n.startColumn!==null?o.push(n.startColumn.toString()):o.push(e),n.endLineNumber!==void 0&&n.endLineNumber!==null?o.push(n.endLineNumber.toString()):o.push(e),n.endColumn!==void 0&&n.endColumn!==null?o.push(n.endColumn.toString()):o.push(e),o.push(e),o.join("¦")}s.makeKeyOptionalMessage=i})(cP||(cP={}));const Yf=Ut("markerService"),nH=$("editor.lineHighlightBackground",null,b("lineHighlight","Background color for the highlight of line at the cursor position.")),uP=$("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:ii},b("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));$("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},b("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);$("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:ln,hcLight:ln},b("rangeHighlightBorder","Background color of the border around highlighted ranges."));$("editor.symbolHighlightBackground",{dark:mh,light:mh,hcDark:null,hcLight:null},b("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);$("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:ln,hcLight:ln},b("symbolHighlightBorder","Background color of the border around highlighted symbols."));const H2=$("editorCursor.foreground",{dark:"#AEAFAD",light:Le.black,hcDark:Le.white,hcLight:"#0F4A85"},b("caret","Color of the editor cursor.")),bE=$("editorCursor.background",null,b("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),sH=$("editorMultiCursor.primary.foreground",H2,b("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),rle=$("editorMultiCursor.primary.background",bE,b("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),rH=$("editorMultiCursor.secondary.foreground",H2,b("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),ole=$("editorMultiCursor.secondary.background",bE,b("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),wE=$("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},b("editorWhitespaces","Color of whitespace characters in the editor.")),ale=$("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:Le.white,hcLight:"#292929"},b("editorLineNumbers","Color of editor line numbers.")),lle=$("editorIndentGuide.background",wE,b("editorIndentGuides","Color of the editor indentation guides."),!1,b("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),cle=$("editorIndentGuide.activeBackground",wE,b("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,b("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),fv=$("editorIndentGuide.background1",lle,b("editorIndentGuides1","Color of the editor indentation guides (1).")),ule=$("editorIndentGuide.background2","#00000000",b("editorIndentGuides2","Color of the editor indentation guides (2).")),hle=$("editorIndentGuide.background3","#00000000",b("editorIndentGuides3","Color of the editor indentation guides (3).")),dle=$("editorIndentGuide.background4","#00000000",b("editorIndentGuides4","Color of the editor indentation guides (4).")),fle=$("editorIndentGuide.background5","#00000000",b("editorIndentGuides5","Color of the editor indentation guides (5).")),gle=$("editorIndentGuide.background6","#00000000",b("editorIndentGuides6","Color of the editor indentation guides (6).")),gv=$("editorIndentGuide.activeBackground1",cle,b("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),mle=$("editorIndentGuide.activeBackground2","#00000000",b("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),ple=$("editorIndentGuide.activeBackground3","#00000000",b("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),_le=$("editorIndentGuide.activeBackground4","#00000000",b("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),vle=$("editorIndentGuide.activeBackground5","#00000000",b("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),ble=$("editorIndentGuide.activeBackground6","#00000000",b("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),wle=$("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:ln,hcLight:ln},b("editorActiveLineNumber","Color of editor active line number"),!1,b("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));$("editorLineNumber.activeForeground",wle,b("editorActiveLineNumber","Color of editor active line number"));const Cle=$("editorLineNumber.dimmedForeground",null,b("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));$("editorRuler.foreground",{dark:"#5A5A5A",light:Le.lightgrey,hcDark:Le.white,hcLight:"#292929"},b("editorRuler","Color of the editor rulers."));$("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},b("editorCodeLensForeground","Foreground color of editor CodeLens"));$("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},b("editorBracketMatchBackground","Background color behind matching brackets"));$("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:ii,hcLight:ii},b("editorBracketMatchBorder","Color for matching brackets boxes"));const yle=$("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},b("editorOverviewRulerBorder","Color of the overview ruler border.")),Sle=$("editorOverviewRuler.background",null,b("editorOverviewRulerBackground","Background color of the editor overview ruler."));$("editorGutter.background",tl,b("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));$("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:Le.fromHex("#fff").transparent(.8),hcLight:ii},b("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));const xle=$("editorUnnecessaryCode.opacity",{dark:Le.fromHex("#000a"),light:Le.fromHex("#0007"),hcDark:null,hcLight:null},b("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));$("editorGhostText.border",{dark:null,light:null,hcDark:Le.fromHex("#fff").transparent(.8),hcLight:Le.fromHex("#292929").transparent(.8)},b("editorGhostTextBorder","Border color of ghost text in the editor."));$("editorGhostText.foreground",{dark:Le.fromHex("#ffffff56"),light:Le.fromHex("#0007"),hcDark:null,hcLight:null},b("editorGhostTextForeground","Foreground color of the ghost text in the editor."));$("editorGhostText.background",null,b("editorGhostTextBackground","Background color of the ghost text in the editor."));const kle=new Le(new Xt(0,122,204,.6));$("editorOverviewRuler.rangeHighlightForeground",kle,b("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const Lle=$("editorOverviewRuler.errorForeground",{dark:new Le(new Xt(255,18,18,.7)),light:new Le(new Xt(255,18,18,.7)),hcDark:new Le(new Xt(255,50,50,1)),hcLight:"#B5200D"},b("overviewRuleError","Overview ruler marker color for errors.")),Dle=$("editorOverviewRuler.warningForeground",{dark:Oh,light:Oh,hcDark:VC,hcLight:VC},b("overviewRuleWarning","Overview ruler marker color for warnings.")),Ele=$("editorOverviewRuler.infoForeground",{dark:If,light:If,hcDark:zC,hcLight:zC},b("overviewRuleInfo","Overview ruler marker color for infos.")),oH=$("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},b("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),aH=$("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},b("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),lH=$("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},b("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),cH=$("editorBracketHighlight.foreground4","#00000000",b("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),uH=$("editorBracketHighlight.foreground5","#00000000",b("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),hH=$("editorBracketHighlight.foreground6","#00000000",b("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),Tle=$("editorBracketHighlight.unexpectedBracket.foreground",{dark:new Le(new Xt(255,18,18,.8)),light:new Le(new Xt(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},b("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),Nle=$("editorBracketPairGuide.background1","#00000000",b("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),Ile=$("editorBracketPairGuide.background2","#00000000",b("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),Mle=$("editorBracketPairGuide.background3","#00000000",b("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),Rle=$("editorBracketPairGuide.background4","#00000000",b("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),Ale=$("editorBracketPairGuide.background5","#00000000",b("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),Ple=$("editorBracketPairGuide.background6","#00000000",b("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),Ole=$("editorBracketPairGuide.activeBackground1","#00000000",b("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),Fle=$("editorBracketPairGuide.activeBackground2","#00000000",b("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),Ble=$("editorBracketPairGuide.activeBackground3","#00000000",b("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),Wle=$("editorBracketPairGuide.activeBackground4","#00000000",b("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),Vle=$("editorBracketPairGuide.activeBackground5","#00000000",b("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),zle=$("editorBracketPairGuide.activeBackground6","#00000000",b("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));$("editorUnicodeHighlight.border",Oh,b("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));$("editorUnicodeHighlight.background",Bie,b("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));_u((s,e)=>{const t=s.getColor(tl),i=s.getColor(nH),n=i&&!i.isTransparent()?i:t;n&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${n}; }`)});function Hle(s,e){const t=[],i=[];for(const n of s)e.has(n)||t.push(n);for(const n of e)s.has(n)||i.push(n);return{removed:t,added:i}}function jle(s,e){const t=new Set;for(const i of e)s.has(i)&&t.add(i);return t}var Ule=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},hP=function(s,e){return function(t,i){e(t,i,s)}};let V7=class extends ve{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new re),this._markerDecorations=new Co,e.getModels().forEach(i=>this._onModelAdded(i)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const i=this._markerDecorations.get(e);return i&&i.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const i=this._markerDecorations.get(t);i&&this._updateDecorations(i)})}_onModelAdded(e){const t=new $le(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===Dt.inMemory||e.uri.scheme===Dt.internal||e.uri.scheme===Dt.vscode)&&this._markerService?.read({resource:e.uri}).map(i=>i.owner).forEach(i=>this._markerService.remove(i,[e.uri]))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model)}};V7=Ule([hP(0,ar),hP(1,Yf)],V7);class $le extends ve{constructor(e){super(),this.model=e,this._map=new Vee,this._register(bt(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(e){const{added:t,removed:i}=Hle(new Set(this._map.keys()),new Set(e));if(t.length===0&&i.length===0)return!1;const n=i.map(a=>this._map.get(a)),r=t.map(a=>({range:this._createDecorationRange(this.model,a),options:this._createDecorationOption(a)})),o=this.model.deltaDecorations(n,r);for(const a of i)this._map.delete(a);for(let a=0;a<o.length;a++)this._map.set(t[a],o[a]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,t){let i=Q.lift(t);if(t.severity===Ho.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),i=e.validateRange(i),i.isEmpty()){const n=e.getLineLastNonWhitespaceColumn(i.startLineNumber)||e.getLineMaxColumn(i.startLineNumber);if(n===1||i.endColumn>=n)return i;const r=e.getWordAtPosition(i.getStartPosition());r&&(i=new Q(i.startLineNumber,r.startColumn,i.endLineNumber,r.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&i.startLineNumber===i.endLineNumber){const n=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);n<i.endColumn&&(i=new Q(i.startLineNumber,n,i.endLineNumber,i.endColumn),t.startColumn=n)}return i}_createDecorationOption(e){let t,i,n,r,o;switch(e.severity){case Ho.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",n=0;break;case Ho.Info:t="squiggly-info",i=Ig(Ele),n=10,o={color:Ig(tne),position:1};break;case Ho.Warning:t="squiggly-warning",i=Ig(Dle),n=20,o={color:Ig(ine),position:1};break;case Ho.Error:default:t="squiggly-error",i=Ig(Lle),n=30,o={color:Ig(nne),position:1};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(r="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(r="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:i,position:IC.Right},minimap:o,zIndex:n,inlineClassName:r}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}}const dH=Ut("markerDecorationsService");class Tn{static _nextVisibleColumn(e,t,i){return e===9?Tn.nextRenderTabStop(t,i):Ih(e)||p8(e)?t+2:t+1}static visibleColumnFromColumn(e,t,i){const n=Math.min(t-1,e.length),r=e.substring(0,n),o=new yC(r);let a=0;for(;!o.eol();){const l=CC(r,n,o.offset);o.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,i)}return a}static columnFromVisibleColumn(e,t,i){if(t<=0)return 1;const n=e.length,r=new yC(e);let o=0,a=1;for(;!r.eol();){const l=CC(e,n,r.offset);r.nextGraphemeLength();const c=this._nextVisibleColumn(l,o,i),u=r.offset+1;if(c>=t){const d=t-o;return c-t<d?u:a}o=c,a=u}return n+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}function qle(s,e,t){let i=0;for(let r=0;r<s.length;r++)s.charAt(r)==="	"?i=Tn.nextIndentTabStop(i,e):i++;let n="";if(!t){const r=Math.floor(i/e);i=i%e;for(let o=0;o<r;o++)n+="	"}for(let r=0;r<i;r++)n+=" ";return n}function fH(s,e,t){let i=Ur(s);return i===-1&&(i=s.length),qle(s.substring(0,i),e,t)+s.substring(i)}class dP{constructor(e,t,i,n){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=i,this.isInvalid=n}}class Kle{constructor(e,t,i,n,r,o){this.range=e,this.openingBracketRange=t,this.closingBracketRange=i,this.nestingLevel=n,this.nestingLevelOfEqualBracketType=r,this.bracketPairNode=o}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class Gle extends Kle{constructor(e,t,i,n,r,o,a){super(e,t,i,n,r,o),this.minVisibleColumnIndentation=a}}function Zle(s,e,t,i){return s!==t?sn(t-s,i):sn(0,i-e)}const Sr=0;function ry(s){return s===0}const vo=2**26;function sn(s,e){return s*vo+e}function Go(s){const e=s,t=Math.floor(e/vo),i=e-t*vo;return new Ph(t,i)}function Yle(s){return Math.floor(s/vo)}function vn(s,e){let t=s+e;return e>=vo&&(t=t-s%vo),t}function Xle(s,e){return s.reduce((t,i)=>vn(t,e(i)),Sr)}function gH(s,e){return s===e}function b_(s,e){const t=s,i=e;if(i-t<=0)return Sr;const r=Math.floor(t/vo),o=Math.floor(i/vo),a=i-o*vo;if(r===o){const l=t-r*vo;return sn(0,a-l)}else return sn(o-r,a)}function Rm(s,e){return s<e}function Am(s,e){return s<=e}function G0(s,e){return s>=e}function im(s){return sn(s.lineNumber-1,s.column-1)}function lf(s,e){const t=s,i=Math.floor(t/vo),n=t-i*vo,r=e,o=Math.floor(r/vo),a=r-o*vo;return new Q(i+1,n+1,o+1,a+1)}function Qle(s){const e=yp(s);return sn(e.length-1,e[e.length-1].length)}class qc{static fromModelContentChanges(e){return e.map(i=>{const n=Q.lift(i.range);return new qc(im(n.getStartPosition()),im(n.getEndPosition()),Qle(i.text))}).reverse()}constructor(e,t,i){this.startOffset=e,this.endOffset=t,this.newLength=i}toString(){return`[${Go(this.startOffset)}...${Go(this.endOffset)}) -> ${Go(this.newLength)}`}}class Jle{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(t=>CE.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],i=t?this.translateOldToCur(t.offsetObj):null;return i===null?null:b_(e,i)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?sn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):sn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=Go(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?sn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):sn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],i=this.translateOldToCur(t.endOffsetAfterObj);if(Am(i,e)){this.nextEditIdx++;const n=Go(i),r=Go(this.translateOldToCur(t.endOffsetBeforeObj)),o=n.lineCount-r.lineCount;this.deltaOldToNewLineCount+=o;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=n.columnCount-r.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class CE{static from(e){return new CE(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,i){this.endOffsetBeforeObj=Go(t),this.endOffsetAfterObj=Go(vn(e,i)),this.offsetObj=Go(e)}}const tw=[],Po=class Po{static create(e,t){if(e<=128&&t.length===0){let i=Po.cache[e];return i||(i=new Po(e,t),Po.cache[e]=i),i}return new Po(e,t)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const i=t.getKey(e);let n=i>>5;if(n===0){const o=1<<i|this.items;return o===this.items?this:Po.create(o,this.additionalItems)}n--;const r=this.additionalItems.slice(0);for(;r.length<n;)r.push(0);return r[n]|=1<<(i&31),Po.create(this.items,r)}merge(e){const t=this.items|e.items;if(this.additionalItems===tw&&e.additionalItems===tw)return t===this.items?this:t===e.items?e:Po.create(t,tw);const i=[];for(let n=0;n<Math.max(this.additionalItems.length,e.additionalItems.length);n++){const r=this.additionalItems[n]||0,o=e.additionalItems[n]||0;i.push(r|o)}return Po.create(t,i)}intersects(e){if((this.items&e.items)!==0)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if((this.additionalItems[t]&e.additionalItems[t])!==0)return!0;return!1}};Po.cache=new Array(129),Po.empty=Po.create(0,tw);let Wr=Po;const fP={getKey(s){return s}};class ece{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class yE{get length(){return this._length}constructor(e){this._length=e}}class w_ extends yE{static create(e,t,i){let n=e.length;return t&&(n=vn(n,t.length)),i&&(n=vn(n,i.length)),new w_(n,e,t,i,t?t.missingOpeningBracketIds:Wr.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,i,n,r){super(e),this.openingBracket=t,this.child=i,this.closingBracket=n,this.missingOpeningBracketIds=r}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new w_(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(vn(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class $l extends yE{static create23(e,t,i,n=!1){let r=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(r=vn(r,t.length),o=o.merge(t.missingOpeningBracketIds),i){if(e.listHeight!==i.listHeight)throw new Error("Invalid list heights");r=vn(r,i.length),o=o.merge(i.missingOpeningBracketIds)}return n?new tce(r,e.listHeight+1,e,t,i,o):new C_(r,e.listHeight+1,e,t,i,o)}static getEmpty(){return new ice(Sr,0,[],Wr.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,i){super(e),this.listHeight=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(e-1,i),i}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(0,i),i}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===4;){const i=t.childrenLength;if(i===0)throw new ri;t=t.getChild(i-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let n=1;n<e;n++){const r=this.getChild(n);t=vn(t,r.length),i=i.merge(r.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,n=e;for(let r=0;r<this.childrenLength;r++){const o=this.getChild(r);o&&(i=Math.min(i,o.computeMinIndentation(n,t)),n=vn(n,o.length))}return this.cachedMinIndentation=i,i}}class C_ extends $l{get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,i,n,r,o){super(e,t,o),this._item1=i,this._item2=n,this._item3=r}deepClone(){return new C_(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class tce extends C_{toMutable(){return new C_(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class oy extends $l{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,i,n){super(e,t,n),this._children=i}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new oy(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class ice extends oy{toMutable(){return new oy(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const nce=[];class SE extends yE{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return nce}deepClone(){return this}}class Bd extends SE{get kind(){return 0}get missingOpeningBracketIds(){return Wr.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const i=Go(e),n=(i.columnCount===0?i.lineCount:i.lineCount+1)+1,r=Yle(vn(e,this.length))+1;let o=Number.MAX_SAFE_INTEGER;for(let a=n;a<=r;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const u=Tn.visibleColumnFromColumn(c,l,t.getOptions().tabSize);o=Math.min(o,u)}return o}}class ay extends SE{static create(e,t,i){return new ay(e,t,i)}get kind(){return 1}get missingOpeningBracketIds(){return Wr.getEmpty()}constructor(e,t,i){super(e),this.bracketInfo=t,this.bracketIds=i}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class sce extends SE{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}let ah=class{constructor(e,t,i,n,r){this.length=e,this.kind=t,this.bracketId=i,this.bracketIds=n,this.astNode=r}};class rce{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new oce(this.textModel,this.bracketTokens),this._offset=Sr,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return sn(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=vn(this._offset,e);const t=Go(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=vn(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class oce{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const r=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=r.length,r}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let i=0;for(;;){const r=this.lineTokens,o=r.getCount();let a=null;if(this.lineTokenOffset<o){const l=r.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<o&&l===r.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=Ka.getTokenType(l)===0,u=Ka.containsBalancedBrackets(l),d=r.getEndOffset(this.lineTokenOffset);if(u&&c&&this.lineCharOffset<d){const g=r.getLanguageId(this.lineTokenOffset),m=this.line.substring(this.lineCharOffset,d),_=this.bracketTokens.getSingleLanguageBracketTokens(g),v=_.regExpGlobal;if(v){v.lastIndex=0;const w=v.exec(m);w&&(a=_.getToken(w[0]),a&&(this.lineCharOffset+=w.index))}}if(i+=d-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=d}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,i+=33,i>1e3))break;if(i>1500)break}const n=Zle(e,t,this.lineIdx,this.lineCharOffset);return new ah(n,0,-1,Wr.getEmpty(),new Bd(n))}}class ace{constructor(e,t){this.text=e,this._offset=Sr,this.idx=0;const i=t.getRegExpStr(),n=i?new RegExp(i+`|
`,"gi"):null,r=[];let o,a=0,l=0,c=0,u=0;const d=[];for(let _=0;_<60;_++)d.push(new ah(sn(0,_),0,-1,Wr.getEmpty(),new Bd(sn(0,_))));const g=[];for(let _=0;_<60;_++)g.push(new ah(sn(1,_),0,-1,Wr.getEmpty(),new Bd(sn(1,_))));if(n)for(n.lastIndex=0;(o=n.exec(e))!==null;){const _=o.index,v=o[0];if(v===`
`)a++,l=_+1;else{if(c!==_){let w;if(u===a){const y=_-c;if(y<d.length)w=d[y];else{const S=sn(0,y);w=new ah(S,0,-1,Wr.getEmpty(),new Bd(S))}}else{const y=a-u,S=_-l;if(y===1&&S<g.length)w=g[S];else{const k=sn(y,S);w=new ah(k,0,-1,Wr.getEmpty(),new Bd(k))}}r.push(w)}r.push(t.getToken(v)),c=_+v.length,u=a}}const m=e.length;if(c!==m){const _=u===a?sn(0,m-c):sn(a-u,m-l);r.push(new ah(_,0,-1,Wr.getEmpty(),new Bd(_)))}this.length=sn(a,m-l),this.tokens=r}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new VY}}class xE{static createFromLanguage(e,t){function i(r){return t.getKey(`${r.languageId}:::${r.bracketText}`)}const n=new Map;for(const r of e.bracketsNew.openingBrackets){const o=sn(0,r.bracketText.length),a=i(r),l=Wr.getEmpty().add(a,fP);n.set(r.bracketText,new ah(o,1,a,l,ay.create(o,r,l)))}for(const r of e.bracketsNew.closingBrackets){const o=sn(0,r.bracketText.length);let a=Wr.getEmpty();const l=r.getOpeningBrackets();for(const c of l)a=a.add(i(c),fP);n.set(r.bracketText,new ah(o,2,i(l[0]),a,ay.create(o,r,a)))}return new xE(n)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>lce(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,i]of this.map)if(i.kind===2&&i.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}function lce(s){let e=hu(s);return/^[\w ]+/.test(s)&&(e=`\\b${e}`),/[\w ]+$/.test(s)&&(e=`${e}\\b`),e}class cce{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=xE.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function uce(s){if(s.length===0)return null;if(s.length===1)return s[0];let e=0;function t(){if(e>=s.length)return null;const o=e,a=s[o].listHeight;for(e++;e<s.length&&s[e].listHeight===a;)e++;return e-o>=2?mH(o===0&&e===s.length?s:s.slice(o,e),!1):s[o]}let i=t(),n=t();if(!n)return i;for(let o=t();o;o=t())gP(i,n)<=gP(n,o)?(i=Zk(i,n),n=o):n=Zk(n,o);return Zk(i,n)}function mH(s,e=!1){if(s.length===0)return null;if(s.length===1)return s[0];let t=s.length;for(;t>3;){const i=t>>1;for(let n=0;n<i;n++){const r=n<<1;s[n]=$l.create23(s[r],s[r+1],r+3===t?s[r+2]:null,e)}t=i}return $l.create23(s[0],s[1],t>=3?s[2]:null,e)}function gP(s,e){return Math.abs(s.listHeight-e.listHeight)}function Zk(s,e){return s.listHeight===e.listHeight?$l.create23(s,e,null,!1):s.listHeight>e.listHeight?hce(s,e):dce(e,s)}function hce(s,e){s=s.toMutable();let t=s;const i=[];let n;for(;;){if(e.listHeight===t.listHeight){n=e;break}if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeLastElementMutable()}for(let r=i.length-1;r>=0;r--){const o=i[r];n?o.childrenLength>=3?n=$l.create23(o.unappendChild(),n,null,!1):(o.appendChildOfSameHeight(n),n=void 0):o.handleChildrenChanged()}return n?$l.create23(s,n,null,!1):s}function dce(s,e){s=s.toMutable();let t=s;const i=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeFirstElementMutable()}let n=e;for(let r=i.length-1;r>=0;r--){const o=i[r];n?o.childrenLength>=3?n=$l.create23(n,o.unprependChild(),null,!1):(o.prependChildOfSameHeight(n),n=void 0):o.handleChildrenChanged()}return n?$l.create23(n,s,null,!1):s}class fce{constructor(e){this.lastOffset=Sr,this.nextNodes=[e],this.offsets=[Sr],this.idxs=[]}readLongestNodeAt(e,t){if(Rm(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const i=N0(this.nextNodes);if(!i)return;const n=N0(this.offsets);if(Rm(e,n))return;if(Rm(n,e))if(vn(n,i.length)<=e)this.nextNodeAfterCurrent();else{const r=Yk(i);r!==-1?(this.nextNodes.push(i.getChild(r)),this.offsets.push(n),this.idxs.push(r)):this.nextNodeAfterCurrent()}else{if(t(i))return this.nextNodeAfterCurrent(),i;{const r=Yk(i);if(r===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(i.getChild(r)),this.offsets.push(n),this.idxs.push(r)}}}}nextNodeAfterCurrent(){for(;;){const e=N0(this.offsets),t=N0(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const i=N0(this.nextNodes),n=Yk(i,this.idxs[this.idxs.length-1]);if(n!==-1){this.nextNodes.push(i.getChild(n)),this.offsets.push(vn(e,t.length)),this.idxs[this.idxs.length-1]=n;break}else this.idxs.pop()}}}function Yk(s,e=-1){for(;;){if(e++,e>=s.childrenLength)return-1;if(s.getChild(e))return e}}function N0(s){return s.length>0?s[s.length-1]:void 0}function mP(s,e,t,i){return new gce(s,e,t,i).parseDocument()}let gce=class{constructor(e,t,i,n){if(this.tokenizer=e,this.createImmutableLists=n,this._itemsConstructed=0,this._itemsFromCache=0,i&&n)throw new Error("Not supported");this.oldNodeReader=i?new fce(i):void 0,this.positionMapper=new Jle(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Wr.getEmpty(),0);return e||(e=$l.getEmpty()),e}parseList(e,t){const i=[];for(;;){let r=this.tryReadChildFromCache(e);if(!r){const o=this.tokenizer.peek();if(!o||o.kind===2&&o.bracketIds.intersects(e))break;r=this.parseChild(e,t+1)}r.kind===4&&r.childrenLength===0||i.push(r)}return this.oldNodeReader?uce(i):mH(i,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!ry(t)){const i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),n=>t!==null&&!Rm(n.length,t)?!1:n.canBeReused(e));if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}}parseChild(e,t){this._itemsConstructed++;const i=this.tokenizer.read();switch(i.kind){case 2:return new sce(i.bracketIds,i.length);case 0:return i.astNode;case 1:{if(t>300)return new Bd(i.length);const n=e.merge(i.bracketIds),r=this.parseList(n,t+1),o=this.tokenizer.peek();return o&&o.kind===2&&(o.bracketId===i.bracketId||o.bracketIds.intersects(i.bracketIds))?(this.tokenizer.read(),w_.create(i.astNode,r,o.astNode)):w_.create(i.astNode,r,null)}default:throw new Error("unexpected")}}};function ly(s,e){if(s.length===0)return e;if(e.length===0)return s;const t=new cu(pP(s)),i=pP(e);i.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let n=t.dequeue();function r(c){if(c===void 0){const d=t.takeWhile(g=>!0)||[];return n&&d.unshift(n),d}const u=[];for(;n&&!ry(c);){const[d,g]=n.splitAt(c);u.push(d),c=b_(d.lengthAfter,c),n=g??t.dequeue()}return ry(c)||u.push(new vh(!1,c,c)),u}const o=[];function a(c,u,d){if(o.length>0&&gH(o[o.length-1].endOffset,c)){const g=o[o.length-1];o[o.length-1]=new qc(g.startOffset,u,vn(g.newLength,d))}else o.push({startOffset:c,endOffset:u,newLength:d})}let l=Sr;for(const c of i){const u=r(c.lengthBefore);if(c.modified){const d=Xle(u,m=>m.lengthBefore),g=vn(l,d);a(l,g,c.lengthAfter),l=g}else for(const d of u){const g=l;l=vn(l,d.lengthBefore),d.modified&&a(g,l,d.lengthAfter)}}return o}class vh{constructor(e,t,i){this.modified=e,this.lengthBefore=t,this.lengthAfter=i}splitAt(e){const t=b_(e,this.lengthAfter);return gH(t,Sr)?[this,void 0]:this.modified?[new vh(this.modified,this.lengthBefore,e),new vh(this.modified,Sr,t)]:[new vh(this.modified,e,e),new vh(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${Go(this.lengthBefore)} -> ${Go(this.lengthAfter)}`}}function pP(s){const e=[];let t=Sr;for(const i of s){const n=b_(t,i.startOffset);ry(n)||e.push(new vh(!1,n,n));const r=b_(i.startOffset,i.endOffset);e.push(new vh(!0,r,i.newLength)),t=i.endOffset}return e}class mce extends ve{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new re,this.denseKeyProvider=new ece,this.brackets=new cce(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const i=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),n=new ace(this.textModel.getValue(),i);this.initialAstWithoutTokens=mP(n,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(i=>new qc(sn(i.fromLineNumber-1,0),sn(i.toLineNumber,0),sn(i.toLineNumber-i.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=qc.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const i=ly(this.queuedTextEdits,e);this.queuedTextEdits=i,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=ly(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,i){const n=t,r=new rce(this.textModel,this.brackets);return mP(r,e,n,i)}getBracketsInRange(e,t){this.flushQueue();const i=sn(e.startLineNumber-1,e.startColumn-1),n=sn(e.endLineNumber-1,e.endColumn-1);return new sf(r=>{const o=this.initialAstWithoutTokens||this.astWithTokens;z7(o,Sr,o.length,i,n,r,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();const i=im(e.getStartPosition()),n=im(e.getEndPosition());return new sf(r=>{const o=this.initialAstWithoutTokens||this.astWithTokens,a=new pce(r,t,this.textModel);H7(o,Sr,o.length,i,n,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return _H(t,Sr,t.length,im(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return pH(t,Sr,t.length,im(e))}}function pH(s,e,t,i){if(s.kind===4||s.kind===2){const n=[];for(const r of s.children)t=vn(e,r.length),n.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let r=n.length-1;r>=0;r--){const{nodeOffsetStart:o,nodeOffsetEnd:a}=n[r];if(Rm(o,i)){const l=pH(s.children[r],o,a,i);if(l)return l}}return null}else{if(s.kind===3)return null;if(s.kind===1){const n=lf(e,t);return{bracketInfo:s.bracketInfo,range:n}}}return null}function _H(s,e,t,i){if(s.kind===4||s.kind===2){for(const n of s.children){if(t=vn(e,n.length),Rm(i,t)){const r=_H(n,e,t,i);if(r)return r}e=t}return null}else{if(s.kind===3)return null;if(s.kind===1){const n=lf(e,t);return{bracketInfo:s.bracketInfo,range:n}}}return null}function z7(s,e,t,i,n,r,o,a,l,c,u=!1){if(o>200)return!0;e:for(;;)switch(s.kind){case 4:{const d=s.childrenLength;for(let g=0;g<d;g++){const m=s.getChild(g);if(m){if(t=vn(e,m.length),Am(e,n)&&G0(t,i)){if(G0(t,n)){s=m;continue e}if(!z7(m,e,t,i,n,r,o,0,l,c))return!1}e=t}}return!0}case 2:{const d=!c||!s.closingBracket||s.closingBracket.bracketInfo.closesColorized(s.openingBracket.bracketInfo);let g=0;if(l){let _=l.get(s.openingBracket.text);_===void 0&&(_=0),g=_,d&&(_++,l.set(s.openingBracket.text,_))}const m=s.childrenLength;for(let _=0;_<m;_++){const v=s.getChild(_);if(v){if(t=vn(e,v.length),Am(e,n)&&G0(t,i)){if(G0(t,n)&&v.kind!==1){s=v,d?(o++,a=g+1):a=g;continue e}if((d||v.kind!==1||!s.closingBracket)&&!z7(v,e,t,i,n,r,d?o+1:o,d?g+1:g,l,c,!s.closingBracket))return!1}e=t}}return l?.set(s.openingBracket.text,g),!0}case 3:{const d=lf(e,t);return r(new dP(d,o-1,0,!0))}case 1:{const d=lf(e,t);return r(new dP(d,o-1,a-1,u))}case 0:return!0}}class pce{constructor(e,t,i){this.push=e,this.includeMinIndentation=t,this.textModel=i}}function H7(s,e,t,i,n,r,o,a){if(o>200)return!0;let l=!0;if(s.kind===2){let c=0;if(a){let g=a.get(s.openingBracket.text);g===void 0&&(g=0),c=g,g++,a.set(s.openingBracket.text,g)}const u=vn(e,s.openingBracket.length);let d=-1;if(r.includeMinIndentation&&(d=s.computeMinIndentation(e,r.textModel)),l=r.push(new Gle(lf(e,t),lf(e,u),s.closingBracket?lf(vn(u,s.child?.length||Sr),t):void 0,o,c,s,d)),e=u,l&&s.child){const g=s.child;if(t=vn(e,g.length),Am(e,n)&&G0(t,i)&&(l=H7(g,e,t,i,n,r,o+1,a),!l))return!1}a?.set(s.openingBracket.text,c)}else{let c=e;for(const u of s.children){const d=c;if(c=vn(c,u.length),Am(d,n)&&Am(i,c)&&(l=H7(u,d,c,i,n,r,o,a),!l))return!1}}return l}class _ce extends ve{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new uu),this.onDidChangeEmitter=new re,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1}handleLanguageConfigurationServiceChange(e){(!e.languageId||this.bracketPairsTree.value?.object.didLanguageChange(e.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){this.bracketPairsTree.value?.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){this.bracketPairsTree.value?.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){this.bracketPairsTree.value?.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new Qe;this.bracketPairsTree.value=vce(e.add(new mce(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(e,!1)||sf.empty}getBracketPairsInRangeWithMinIndentation(e){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(e,!0)||sf.empty}getBracketsInRange(e,t=!1){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketsInRange(e,t)||sf.empty}findMatchingBracketUp(e,t,i){const n=this.textModel.validatePosition(t),r=this.textModel.getLanguageIdAtPosition(n.lineNumber,n.column);if(this.canBuildAST){const o=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew.getClosingBracketInfo(e);if(!o)return null;const a=this.getBracketPairsInRange(Q.fromPositions(t,t)).findLast(l=>o.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const o=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(r).brackets;if(!a)return null;const l=a.textIsBracket[o];return l?iw(this._findMatchingBracketUp(l,n,Xk(i))):null}}matchBracket(e,t){if(this.canBuildAST){const i=this.getBracketPairsInRange(Q.fromPositions(e,e)).filter(n=>n.closingBracketRange!==void 0&&(n.openingBracketRange.containsPosition(e)||n.closingBracketRange.containsPosition(e))).findLastMaxBy(ma(n=>n.openingBracketRange.containsPosition(e)?n.openingBracketRange:n.closingBracketRange,Q.compareRangesUsingStarts));return i?[i.openingBracketRange,i.closingBracketRange]:null}else{const i=Xk(t);return this._matchBracket(this.textModel.validatePosition(e),i)}}_establishBracketSearchOffsets(e,t,i,n){const r=t.getCount(),o=t.getLanguageId(n);let a=Math.max(0,e.column-1-i.maxBracketLength);for(let c=n-1;c>=0;c--){const u=t.getEndOffset(c);if(u<=a)break;if(yl(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){a=u;break}}let l=Math.min(t.getLineContent().length,e.column-1+i.maxBracketLength);for(let c=n+1;c<r;c++){const u=t.getStartOffset(c);if(u>=l)break;if(yl(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){l=u;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const i=e.lineNumber,n=this.textModel.tokenization.getLineTokens(i),r=this.textModel.getLineContent(i),o=n.findTokenIndexAtOffset(e.column-1);if(o<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(o)).brackets;if(a&&!yl(n.getStandardTokenType(o))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,n,a,o),u=null;for(;;){const d=oa.findNextBracketInRange(a.forwardRegex,i,r,l,c);if(!d)break;if(d.startColumn<=e.column&&e.column<=d.endColumn){const g=r.substring(d.startColumn-1,d.endColumn-1).toLowerCase(),m=this._matchFoundBracket(d,a.textIsBracket[g],a.textIsOpenBracket[g],t);if(m){if(m instanceof Ac)return null;u=m}}l=d.endColumn-1}if(u)return u}if(o>0&&n.getStartOffset(o)===e.column-1){const l=o-1,c=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(l)).brackets;if(c&&!yl(n.getStandardTokenType(l))){const{searchStartOffset:u,searchEndOffset:d}=this._establishBracketSearchOffsets(e,n,c,l),g=oa.findPrevBracketInRange(c.reversedRegex,i,r,u,d);if(g&&g.startColumn<=e.column&&e.column<=g.endColumn){const m=r.substring(g.startColumn-1,g.endColumn-1).toLowerCase(),_=this._matchFoundBracket(g,c.textIsBracket[m],c.textIsOpenBracket[m],t);if(_)return _ instanceof Ac?null:_}}}return null}_matchFoundBracket(e,t,i,n){if(!t)return null;const r=i?this._findMatchingBracketDown(t,e.getEndPosition(),n):this._findMatchingBracketUp(t,e.getStartPosition(),n);return r?r instanceof Ac?r:[e,r]:null}_findMatchingBracketUp(e,t,i){const n=e.languageId,r=e.reversedRegex;let o=-1,a=0;const l=(c,u,d,g)=>{for(;;){if(i&&++a%100===0&&!i())return Ac.INSTANCE;const m=oa.findPrevBracketInRange(r,c,u,d,g);if(!m)break;const _=u.substring(m.startColumn-1,m.endColumn-1).toLowerCase();if(e.isOpen(_)?o++:e.isClose(_)&&o--,o===0)return m;g=m.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const u=this.textModel.tokenization.getLineTokens(c),d=u.getCount(),g=this.textModel.getLineContent(c);let m=d-1,_=g.length,v=g.length;c===t.lineNumber&&(m=u.findTokenIndexAtOffset(t.column-1),_=t.column-1,v=t.column-1);let w=!0;for(;m>=0;m--){const y=u.getLanguageId(m)===n&&!yl(u.getStandardTokenType(m));if(y)w?_=u.getStartOffset(m):(_=u.getStartOffset(m),v=u.getEndOffset(m));else if(w&&_!==v){const S=l(c,g,_,v);if(S)return S}w=y}if(w&&_!==v){const y=l(c,g,_,v);if(y)return y}}return null}_findMatchingBracketDown(e,t,i){const n=e.languageId,r=e.forwardRegex;let o=1,a=0;const l=(u,d,g,m)=>{for(;;){if(i&&++a%100===0&&!i())return Ac.INSTANCE;const _=oa.findNextBracketInRange(r,u,d,g,m);if(!_)break;const v=d.substring(_.startColumn-1,_.endColumn-1).toLowerCase();if(e.isOpen(v)?o++:e.isClose(v)&&o--,o===0)return _;g=_.endColumn-1}return null},c=this.textModel.getLineCount();for(let u=t.lineNumber;u<=c;u++){const d=this.textModel.tokenization.getLineTokens(u),g=d.getCount(),m=this.textModel.getLineContent(u);let _=0,v=0,w=0;u===t.lineNumber&&(_=d.findTokenIndexAtOffset(t.column-1),v=t.column-1,w=t.column-1);let y=!0;for(;_<g;_++){const S=d.getLanguageId(_)===n&&!yl(d.getStandardTokenType(_));if(S)y||(v=d.getStartOffset(_)),w=d.getEndOffset(_);else if(y&&v!==w){const k=l(u,m,v,w);if(k)return k}y=S}if(y&&v!==w){const S=l(u,m,v,w);if(S)return S}}return null}findPrevBracket(e){const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketBefore(t)||null;let i=null,n=null,r=null;for(let o=t.lineNumber;o>=1;o--){const a=this.textModel.tokenization.getLineTokens(o),l=a.getCount(),c=this.textModel.getLineContent(o);let u=l-1,d=c.length,g=c.length;if(o===t.lineNumber){u=a.findTokenIndexAtOffset(t.column-1),d=t.column-1,g=t.column-1;const _=a.getLanguageId(u);i!==_&&(i=_,n=this.languageConfigurationService.getLanguageConfiguration(i).brackets,r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let m=!0;for(;u>=0;u--){const _=a.getLanguageId(u);if(i!==_){if(n&&r&&m&&d!==g){const w=oa.findPrevBracketInRange(n.reversedRegex,o,c,d,g);if(w)return this._toFoundBracket(r,w);m=!1}i=_,n=this.languageConfigurationService.getLanguageConfiguration(i).brackets,r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}const v=!!n&&!yl(a.getStandardTokenType(u));if(v)m?d=a.getStartOffset(u):(d=a.getStartOffset(u),g=a.getEndOffset(u));else if(r&&n&&m&&d!==g){const w=oa.findPrevBracketInRange(n.reversedRegex,o,c,d,g);if(w)return this._toFoundBracket(r,w)}m=v}if(r&&n&&m&&d!==g){const _=oa.findPrevBracketInRange(n.reversedRegex,o,c,d,g);if(_)return this._toFoundBracket(r,_)}}return null}findNextBracket(e){const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketAfter(t)||null;const i=this.textModel.getLineCount();let n=null,r=null,o=null;for(let a=t.lineNumber;a<=i;a++){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),u=this.textModel.getLineContent(a);let d=0,g=0,m=0;if(a===t.lineNumber){d=l.findTokenIndexAtOffset(t.column-1),g=t.column-1,m=t.column-1;const v=l.getLanguageId(d);n!==v&&(n=v,r=this.languageConfigurationService.getLanguageConfiguration(n).brackets,o=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew)}let _=!0;for(;d<c;d++){const v=l.getLanguageId(d);if(n!==v){if(o&&r&&_&&g!==m){const y=oa.findNextBracketInRange(r.forwardRegex,a,u,g,m);if(y)return this._toFoundBracket(o,y);_=!1}n=v,r=this.languageConfigurationService.getLanguageConfiguration(n).brackets,o=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew}const w=!!r&&!yl(l.getStandardTokenType(d));if(w)_||(g=l.getStartOffset(d)),m=l.getEndOffset(d);else if(o&&r&&_&&g!==m){const y=oa.findNextBracketInRange(r.forwardRegex,a,u,g,m);if(y)return this._toFoundBracket(o,y)}_=w}if(o&&r&&_&&g!==m){const v=oa.findNextBracketInRange(r.forwardRegex,a,u,g,m);if(v)return this._toFoundBracket(o,v)}}return null}findEnclosingBrackets(e,t){const i=this.textModel.validatePosition(e);if(this.canBuildAST){const m=Q.fromPositions(i),_=this.getBracketPairsInRange(Q.fromPositions(i,i)).findLast(v=>v.closingBracketRange!==void 0&&v.range.strictContainsRange(m));return _?[_.openingBracketRange,_.closingBracketRange]:null}const n=Xk(t),r=this.textModel.getLineCount(),o=new Map;let a=[];const l=(m,_)=>{if(!o.has(m)){const v=[];for(let w=0,y=_?_.brackets.length:0;w<y;w++)v[w]=0;o.set(m,v)}a=o.get(m)};let c=0;const u=(m,_,v,w,y)=>{for(;;){if(n&&++c%100===0&&!n())return Ac.INSTANCE;const S=oa.findNextBracketInRange(m.forwardRegex,_,v,w,y);if(!S)break;const k=v.substring(S.startColumn-1,S.endColumn-1).toLowerCase(),L=m.textIsBracket[k];if(L&&(L.isOpen(k)?a[L.index]++:L.isClose(k)&&a[L.index]--,a[L.index]===-1))return this._matchFoundBracket(S,L,!1,n);w=S.endColumn-1}return null};let d=null,g=null;for(let m=i.lineNumber;m<=r;m++){const _=this.textModel.tokenization.getLineTokens(m),v=_.getCount(),w=this.textModel.getLineContent(m);let y=0,S=0,k=0;if(m===i.lineNumber){y=_.findTokenIndexAtOffset(i.column-1),S=i.column-1,k=i.column-1;const T=_.getLanguageId(y);d!==T&&(d=T,g=this.languageConfigurationService.getLanguageConfiguration(d).brackets,l(d,g))}let L=!0;for(;y<v;y++){const T=_.getLanguageId(y);if(d!==T){if(g&&L&&S!==k){const I=u(g,m,w,S,k);if(I)return iw(I);L=!1}d=T,g=this.languageConfigurationService.getLanguageConfiguration(d).brackets,l(d,g)}const A=!!g&&!yl(_.getStandardTokenType(y));if(A)L||(S=_.getStartOffset(y)),k=_.getEndOffset(y);else if(g&&L&&S!==k){const I=u(g,m,w,S,k);if(I)return iw(I)}L=A}if(g&&L&&S!==k){const T=u(g,m,w,S,k);if(T)return iw(T)}}return null}_toFoundBracket(e,t){if(!t)return null;let i=this.textModel.getValueInRange(t);i=i.toLowerCase();const n=e.getBracketInfo(i);return n?{range:t,bracketInfo:n}:null}}function vce(s,e){return{object:s,dispose:()=>e?.dispose()}}function Xk(s){if(typeof s>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=s}}const SS=class SS{constructor(){this._searchCanceledBrand=void 0}};SS.INSTANCE=new SS;let Ac=SS;function iw(s){return s instanceof Ac?null:s}class bce extends ve{constructor(e){super(),this.textModel=e,this.colorProvider=new vH,this.onDidChangeEmitter=new re,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,i,n){return n?[]:t===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(e,!0).map(o=>({id:`bracket${o.range.toString()}-${o.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(o,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:o.range})).toArray():[]}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new Q(1,1,this.textModel.getLineCount(),1),e,t):[]}}class vH{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}_u((s,e)=>{const t=[oH,aH,lH,cH,uH,hH],i=new vH;e.addRule(`.monaco-editor .${i.unexpectedClosingBracketClassName} { color: ${s.getColor(Tle)}; }`);const n=t.map(r=>s.getColor(r)).filter(r=>!!r).filter(r=>!r.isTransparent());for(let r=0;r<30;r++){const o=n[r%n.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(r)} { color: ${o}; }`)}});function nw(s){return s.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class ds{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,i,n){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=n}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${nw(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${nw(this.oldText)}")`:`(replace@${this.oldPosition} "${nw(this.oldText)}" with "${nw(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){const n=t.length;ja(e,n,i),i+=4;for(let r=0;r<n;r++)XJ(e,t.charCodeAt(r),i),i+=2;return i}static _readString(e,t){const i=Ha(e,t);return t+=4,JJ(e,t,i)}writeSize(){return 8+ds._writeStringSize(this.oldText)+ds._writeStringSize(this.newText)}write(e,t){return ja(e,this.oldPosition,t),t+=4,ja(e,this.newPosition,t),t+=4,t=ds._writeString(e,this.oldText,t),t=ds._writeString(e,this.newText,t),t}static read(e,t,i){const n=Ha(e,t);t+=4;const r=Ha(e,t);t+=4;const o=ds._readString(e,t);t+=ds._writeStringSize(o);const a=ds._readString(e,t);return t+=ds._writeStringSize(a),i.push(new ds(n,o,r,a)),t}}function wce(s,e){return s===null||s.length===0?e:new xl(s,e).compress()}class xl{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,i=this._getPrev(e),n=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(i===null){this._acceptCurr(n),n=this._getCurr(++t);continue}if(n===null){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldEnd<=i.newPosition){this._acceptCurr(n),n=this._getCurr(++t);continue}if(i.newEnd<=n.oldPosition){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldPosition<i.newPosition){const[c,u]=xl._splitCurr(n,i.newPosition-n.oldPosition);this._acceptCurr(c),n=u;continue}if(i.newPosition<n.oldPosition){const[c,u]=xl._splitPrev(i,n.oldPosition-i.newPosition);this._acceptPrev(c),i=u;continue}let a,l;if(n.oldEnd===i.newEnd)a=i,l=n,i=this._getPrev(++e),n=this._getCurr(++t);else if(n.oldEnd<i.newEnd){const[c,u]=xl._splitPrev(i,n.oldLength);a=c,l=n,i=u,n=this._getCurr(++t)}else{const[c,u]=xl._splitCurr(n,i.newLength);a=i,l=c,i=this._getPrev(++e),n=u}this._result[this._resultLen++]=new ds(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const r=xl._merge(this._result);return xl._removeNoOps(r)}_acceptCurr(e){this._result[this._resultLen++]=xl._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=xl._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new ds(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new ds(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const i=e.newText.substr(0,t),n=e.newText.substr(t);return[new ds(e.oldPosition,e.oldText,e.newPosition,i),new ds(e.oldEnd,"",e.newPosition+t,n)]}static _splitCurr(e,t){const i=e.oldText.substr(0,t),n=e.oldText.substr(t);return[new ds(e.oldPosition,i,e.newPosition,e.newText),new ds(e.oldPosition+t,n,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let i=0,n=e[0];for(let r=1;r<e.length;r++){const o=e[r];n.oldEnd===o.oldPosition?n=new ds(n.oldPosition,n.oldText+o.oldText,n.newPosition,n.newText+o.newText):(t[i++]=n,n=o)}return t[i++]=n,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let i=0;for(let n=0;n<e.length;n++){const r=e[n];r.oldText!==r.newText&&(t[i++]=r)}return t}}function Rg(s){return s.toString()}class Wn{static create(e,t){const i=e.getAlternativeVersionId(),n=j7(e);return new Wn(i,i,n,n,t,t,[])}constructor(e,t,i,n,r,o,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=i,this.afterEOL=n,this.beforeCursorState=r,this.afterCursorState=o,this.changes=a}append(e,t,i,n,r){t.length>0&&(this.changes=wce(this.changes,t)),this.afterEOL=i,this.afterVersionId=n,this.afterCursorState=r}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,i){if(ja(e,t?t.length:0,i),i+=4,t)for(const n of t)ja(e,n.selectionStartLineNumber,i),i+=4,ja(e,n.selectionStartColumn,i),i+=4,ja(e,n.positionLineNumber,i),i+=4,ja(e,n.positionColumn,i),i+=4;return i}static _readSelections(e,t,i){const n=Ha(e,t);t+=4;for(let r=0;r<n;r++){const o=Ha(e,t);t+=4;const a=Ha(e,t);t+=4;const l=Ha(e,t);t+=4;const c=Ha(e,t);t+=4,i.push(new wi(o,a,l,c))}return t}serialize(){let e=10+Wn._writeSelectionsSize(this.beforeCursorState)+Wn._writeSelectionsSize(this.afterCursorState)+4;for(const n of this.changes)e+=n.writeSize();const t=new Uint8Array(e);let i=0;ja(t,this.beforeVersionId,i),i+=4,ja(t,this.afterVersionId,i),i+=4,hR(t,this.beforeEOL,i),i+=1,hR(t,this.afterEOL,i),i+=1,i=Wn._writeSelections(t,this.beforeCursorState,i),i=Wn._writeSelections(t,this.afterCursorState,i),ja(t,this.changes.length,i),i+=4;for(const n of this.changes)i=n.write(t,i);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let i=0;const n=Ha(t,i);i+=4;const r=Ha(t,i);i+=4;const o=uR(t,i);i+=1;const a=uR(t,i);i+=1;const l=[];i=Wn._readSelections(t,i,l);const c=[];i=Wn._readSelections(t,i,c);const u=Ha(t,i);i+=4;const d=[];for(let g=0;g<u;g++)i=ds.read(t,i,d);return new Wn(n,r,o,a,l,c,d)}}class bH{get type(){return 0}get resource(){return Et.isUri(this.model)?this.model:this.model.uri}constructor(e,t,i,n){this.label=e,this.code=t,this.model=i,this._data=Wn.create(i,n)}toString(){return(this._data instanceof Wn?this._data:Wn.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(Et.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof Wn}append(e,t,i,n,r){this._data instanceof Wn&&this._data.append(e,t,i,n,r)}close(){this._data instanceof Wn&&(this._data=this._data.serialize())}open(){this._data instanceof Wn||(this._data=Wn.deserialize(this._data))}undo(){if(Et.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Wn&&(this._data=this._data.serialize());const e=Wn.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(Et.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Wn&&(this._data=this._data.serialize());const e=Wn.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof Wn&&(this._data=this._data.serialize()),this._data.byteLength+168}}class Cce{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,i){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=i.slice(0),this._editStackElementsMap=new Map;for(const n of this._editStackElementsArr){const r=Rg(n.resource);this._editStackElementsMap.set(r,n)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=Rg(e);return this._editStackElementsMap.has(t)}setModel(e){const t=Rg(Et.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=Rg(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,i,n,r){const o=Rg(e.uri);this._editStackElementsMap.get(o).append(e,t,i,n,r)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=Rg(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${nE(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function j7(s){return s.getEOL()===`
`?0:1}function Pc(s){return s?s instanceof bH||s instanceof Cce:!1}class kE{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Pc(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Pc(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const i=this._undoRedoService.getLastElement(this._model.uri);if(Pc(i)&&i.canAppend(this._model))return i;const n=new bH(b("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(n,t),n}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],j7(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,i,n){const r=this._getOrCreateEditStackElement(e,n),o=this._model.applyEdits(t,!0),a=kE._computeCursorState(i,o),l=o.map((c,u)=>({index:u,textChange:c.textChange}));return l.sort((c,u)=>c.textChange.oldPosition===u.textChange.oldPosition?c.index-u.index:c.textChange.oldPosition-u.textChange.oldPosition),r.append(this._model,l.map(c=>c.textChange),j7(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(i){return _i(i),null}}}class wH extends ve{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function yce(s,e){let t=0,i=0;const n=s.length;for(;i<n;){const r=s.charCodeAt(i);if(r===32)t++;else if(r===9)t=t-t%e+e;else break;i++}return i===n?-1:t}var cf;(function(s){s[s.Disabled=0]="Disabled",s[s.EnabledForActive=1]="EnabledForActive",s[s.Enabled=2]="Enabled"})(cf||(cf={}));class ef{constructor(e,t,i,n,r,o){if(this.visibleColumn=e,this.column=t,this.className=i,this.horizontalLine=n,this.forWrappedLinesAfterColumn=r,this.forWrappedLinesBeforeOrAtColumn=o,e!==-1==(t!==-1))throw new Error}}class f1{constructor(e,t){this.top=e,this.endColumn=t}}class Sce extends wH{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return yce(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,i){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new ri("Illegal value for lineNumber");const r=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(r&&r.offSide);let a=-2,l=-1,c=-2,u=-1;const d=I=>{if(a!==-1&&(a===-2||a>I-1)){a=-1,l=-1;for(let O=I-2;O>=0;O--){const F=this._computeIndentLevel(O);if(F>=0){a=O,l=F;break}}}if(c===-2){c=-1,u=-1;for(let O=I;O<n;O++){const F=this._computeIndentLevel(O);if(F>=0){c=O,u=F;break}}}};let g=-2,m=-1,_=-2,v=-1;const w=I=>{if(g===-2){g=-1,m=-1;for(let O=I-2;O>=0;O--){const F=this._computeIndentLevel(O);if(F>=0){g=O,m=F;break}}}if(_!==-1&&(_===-2||_<I-1)){_=-1,v=-1;for(let O=I;O<n;O++){const F=this._computeIndentLevel(O);if(F>=0){_=O,v=F;break}}}};let y=0,S=!0,k=0,L=!0,T=0,A=0;for(let I=0;S||L;I++){const O=e-I,F=e+I;I>1&&(O<1||O<t)&&(S=!1),I>1&&(F>n||F>i)&&(L=!1),I>5e4&&(S=!1,L=!1);let J=-1;if(S&&O>=1){const G=this._computeIndentLevel(O-1);G>=0?(c=O-1,u=G,J=Math.ceil(G/this.textModel.getOptions().indentSize)):(d(O),J=this._getIndentLevelForWhitespaceLine(o,l,u))}let Y=-1;if(L&&F<=n){const G=this._computeIndentLevel(F-1);G>=0?(g=F-1,m=G,Y=Math.ceil(G/this.textModel.getOptions().indentSize)):(w(F),Y=this._getIndentLevelForWhitespaceLine(o,m,v))}if(I===0){A=J;continue}if(I===1){if(F<=n&&Y>=0&&A+1===Y){S=!1,y=F,k=F,T=Y;continue}if(O>=1&&J>=0&&J-1===A){L=!1,y=O,k=O,T=J;continue}if(y=e,k=e,T=A,T===0)return{startLineNumber:y,endLineNumber:k,indent:T}}S&&(J>=T?y=O:S=!1),L&&(Y>=T?k=F:L=!1)}return{startLineNumber:y,endLineNumber:k,indent:T}}getLinesBracketGuides(e,t,i,n){const r=[];for(let d=e;d<=t;d++)r.push([]);const o=!0,a=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new Q(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let l;if(i&&a.length>0){const d=(e<=i.lineNumber&&i.lineNumber<=t?a:this.textModel.bracketPairs.getBracketPairsInRange(Q.fromPositions(i)).toArray()).filter(g=>Q.strictContainsPosition(g.range,i));l=MC(d,g=>o)?.range}const c=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,u=new CH;for(const d of a){if(!d.closingBracketRange)continue;const g=l&&d.range.equalsRange(l);if(!g&&!n.includeInactive)continue;const m=u.getInlineClassName(d.nestingLevel,d.nestingLevelOfEqualBracketType,c)+(n.highlightActive&&g?" "+u.activeClassName:""),_=d.openingBracketRange.getStartPosition(),v=d.closingBracketRange.getStartPosition(),w=n.horizontalGuides===cf.Enabled||n.horizontalGuides===cf.EnabledForActive&&g;if(d.range.startLineNumber===d.range.endLineNumber){w&&r[d.range.startLineNumber-e].push(new ef(-1,d.openingBracketRange.getEndPosition().column,m,new f1(!1,v.column),-1,-1));continue}const y=this.getVisibleColumnFromPosition(v),S=this.getVisibleColumnFromPosition(d.openingBracketRange.getStartPosition()),k=Math.min(S,y,d.minVisibleColumnIndentation+1);let L=!1;Ur(this.textModel.getLineContent(d.closingBracketRange.startLineNumber))<d.closingBracketRange.startColumn-1&&(L=!0);const I=Math.max(_.lineNumber,e),O=Math.min(v.lineNumber,t),F=L?1:0;for(let J=I;J<O+F;J++)r[J-e].push(new ef(k,-1,m,null,J===_.lineNumber?_.column:-1,J===v.lineNumber?v.column:-1));w&&(_.lineNumber>=e&&S>k&&r[_.lineNumber-e].push(new ef(k,-1,m,new f1(!1,_.column),-1,-1)),v.lineNumber<=t&&y>k&&r[v.lineNumber-e].push(new ef(k,-1,m,new f1(!L,v.column),-1,-1)))}for(const d of r)d.sort((g,m)=>g.visibleColumn-m.visibleColumn);return r}getVisibleColumnFromPosition(e){return Tn.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Error("Illegal value for startLineNumber");if(t<1||t>i)throw new Error("Illegal value for endLineNumber");const n=this.textModel.getOptions(),r=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(r&&r.offSide),a=new Array(t-e+1);let l=-2,c=-1,u=-2,d=-1;for(let g=e;g<=t;g++){const m=g-e,_=this._computeIndentLevel(g-1);if(_>=0){l=g-1,c=_,a[m]=Math.ceil(_/n.indentSize);continue}if(l===-2){l=-1,c=-1;for(let v=g-2;v>=0;v--){const w=this._computeIndentLevel(v);if(w>=0){l=v,c=w;break}}}if(u!==-1&&(u===-2||u<g-1)){u=-1,d=-1;for(let v=g;v<i;v++){const w=this._computeIndentLevel(v);if(w>=0){u=v,d=w;break}}}a[m]=this._getIndentLevelForWhitespaceLine(o,c,d)}return a}_getIndentLevelForWhitespaceLine(e,t,i){const n=this.textModel.getOptions();return t===-1||i===-1?0:t<i?1+Math.floor(t/n.indentSize):t===i||e?Math.ceil(i/n.indentSize):1+Math.floor(i/n.indentSize)}}class CH{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,i){return this.getInlineClassNameOfLevel(i?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}class xce{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function kce(s,e,t,i,n){n.spacesDiff=0,n.looksLikeAlignment=!1;let r;for(r=0;r<e&&r<i;r++){const g=s.charCodeAt(r),m=t.charCodeAt(r);if(g!==m)break}let o=0,a=0;for(let g=r;g<e;g++)s.charCodeAt(g)===32?o++:a++;let l=0,c=0;for(let g=r;g<i;g++)t.charCodeAt(g)===32?l++:c++;if(o>0&&a>0||l>0&&c>0)return;const u=Math.abs(a-c),d=Math.abs(o-l);if(u===0){n.spacesDiff=d,d>0&&0<=l-1&&l-1<s.length&&l<t.length&&t.charCodeAt(l)!==32&&s.charCodeAt(l-1)===32&&s.charCodeAt(s.length-1)===44&&(n.looksLikeAlignment=!0);return}if(d%u===0){n.spacesDiff=d/u;return}}function _P(s,e,t){const i=Math.min(s.getLineCount(),1e4);let n=0,r=0,o="",a=0;const l=[2,4,6,8,3,5,7],c=8,u=[0,0,0,0,0,0,0,0,0],d=new xce;for(let _=1;_<=i;_++){const v=s.getLineLength(_),w=s.getLineContent(_),y=v<=65536;let S=!1,k=0,L=0,T=0;for(let I=0,O=v;I<O;I++){const F=y?w.charCodeAt(I):s.getLineCharCode(_,I);if(F===9)T++;else if(F===32)L++;else{S=!0,k=I;break}}if(!S||(T>0?n++:L>1&&r++,kce(o,a,w,k,d),d.looksLikeAlignment&&!(t&&e===d.spacesDiff)))continue;const A=d.spacesDiff;A<=c&&u[A]++,o=w,a=k}let g=t;n!==r&&(g=n<r);let m=e;if(g){let _=g?0:.1*i;l.forEach(v=>{const w=u[v];w>_&&(_=w,m=v)}),m===4&&u[4]>0&&u[2]>0&&u[2]>=u[4]/2&&(m=2)}return{insertSpaces:g,tabSize:m}}function pr(s){return(s.metadata&1)>>>0}function Ei(s,e){s.metadata=s.metadata&254|e<<0}function gs(s){return(s.metadata&2)>>>1===1}function ki(s,e){s.metadata=s.metadata&253|(e?1:0)<<1}function yH(s){return(s.metadata&4)>>>2===1}function vP(s,e){s.metadata=s.metadata&251|(e?1:0)<<2}function SH(s){return(s.metadata&64)>>>6===1}function bP(s,e){s.metadata=s.metadata&191|(e?1:0)<<6}function Lce(s){return(s.metadata&24)>>>3}function wP(s,e){s.metadata=s.metadata&231|e<<3}function Dce(s){return(s.metadata&32)>>>5===1}function CP(s,e){s.metadata=s.metadata&223|(e?1:0)<<5}class xH{constructor(e,t,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,Ei(this,1),this.start=t,this.end=i,this.delta=0,this.maxEnd=i,this.id=e,this.ownerId=0,this.options=null,vP(this,!1),bP(this,!1),wP(this,1),CP(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=null,ki(this,!1)}reset(e,t,i,n){this.start=t,this.end=i,this.maxEnd=i,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=n}setOptions(e){this.options=e;const t=this.options.className;vP(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),bP(this,this.options.glyphMarginClassName!==null),wP(this,this.options.stickiness),CP(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const kt=new xH(null,0,0);kt.parent=kt;kt.left=kt;kt.right=kt;Ei(kt,0);class Qk{constructor(){this.root=kt,this.requestNormalizeDelta=!1}intervalSearch(e,t,i,n,r,o){return this.root===kt?[]:Pce(this,e,t,i,n,r,o)}search(e,t,i,n){return this.root===kt?[]:Ace(this,e,t,i,n)}collectNodesFromOwner(e){return Mce(this,e)}collectNodesPostOrder(){return Rce(this)}insert(e){yP(this,e),this._normalizeDeltaIfNecessary()}delete(e){SP(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const i=e;let n=0;for(;e!==this.root;)e===e.parent.right&&(n+=e.parent.delta),e=e.parent;const r=i.start+n,o=i.end+n;i.setCachedOffsets(r,o,t)}acceptReplace(e,t,i,n){const r=Nce(this,e,e+t);for(let o=0,a=r.length;o<a;o++){const l=r[o];SP(this,l)}this._normalizeDeltaIfNecessary(),Ice(this,e,e+t,i),this._normalizeDeltaIfNecessary();for(let o=0,a=r.length;o<a;o++){const l=r[o];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,Tce(l,e,e+t,i,n),l.maxEnd=l.end,yP(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,Ece(this))}}function Ece(s){let e=s.root,t=0;for(;e!==kt;){if(e.left!==kt&&!gs(e.left)){e=e.left;continue}if(e.right!==kt&&!gs(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Fh(e),ki(e,!0),ki(e.left,!1),ki(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}ki(s.root,!1)}function Ag(s,e,t,i){return s<t?!0:s>t||i===1?!1:i===2?!0:e}function Tce(s,e,t,i,n){const r=Lce(s),o=r===0||r===2,a=r===1||r===2,l=t-e,c=i,u=Math.min(l,c),d=s.start;let g=!1;const m=s.end;let _=!1;e<=d&&m<=t&&Dce(s)&&(s.start=e,g=!0,s.end=e,_=!0);{const w=n?1:l>0?2:0;!g&&Ag(d,o,e,w)&&(g=!0),!_&&Ag(m,a,e,w)&&(_=!0)}if(u>0&&!n){const w=l>c?2:0;!g&&Ag(d,o,e+u,w)&&(g=!0),!_&&Ag(m,a,e+u,w)&&(_=!0)}{const w=n?1:0;!g&&Ag(d,o,t,w)&&(s.start=e+c,g=!0),!_&&Ag(m,a,t,w)&&(s.end=e+c,_=!0)}const v=c-l;g||(s.start=Math.max(0,d+v)),_||(s.end=Math.max(0,m+v)),s.start>s.end&&(s.end=s.start)}function Nce(s,e,t){let i=s.root,n=0,r=0,o=0,a=0;const l=[];let c=0;for(;i!==kt;){if(gs(i)){ki(i.left,!1),ki(i.right,!1),i===i.parent.right&&(n-=i.parent.delta),i=i.parent;continue}if(!gs(i.left)){if(r=n+i.maxEnd,r<e){ki(i,!0);continue}if(i.left!==kt){i=i.left;continue}}if(o=n+i.start,o>t){ki(i,!0);continue}if(a=n+i.end,a>=e&&(i.setCachedOffsets(o,a,0),l[c++]=i),ki(i,!0),i.right!==kt&&!gs(i.right)){n+=i.delta,i=i.right;continue}}return ki(s.root,!1),l}function Ice(s,e,t,i){let n=s.root,r=0,o=0,a=0;const l=i-(t-e);for(;n!==kt;){if(gs(n)){ki(n.left,!1),ki(n.right,!1),n===n.parent.right&&(r-=n.parent.delta),Fh(n),n=n.parent;continue}if(!gs(n.left)){if(o=r+n.maxEnd,o<e){ki(n,!0);continue}if(n.left!==kt){n=n.left;continue}}if(a=r+n.start,a>t){n.start+=l,n.end+=l,n.delta+=l,(n.delta<-1073741824||n.delta>1073741824)&&(s.requestNormalizeDelta=!0),ki(n,!0);continue}if(ki(n,!0),n.right!==kt&&!gs(n.right)){r+=n.delta,n=n.right;continue}}ki(s.root,!1)}function Mce(s,e){let t=s.root;const i=[];let n=0;for(;t!==kt;){if(gs(t)){ki(t.left,!1),ki(t.right,!1),t=t.parent;continue}if(t.left!==kt&&!gs(t.left)){t=t.left;continue}if(t.ownerId===e&&(i[n++]=t),ki(t,!0),t.right!==kt&&!gs(t.right)){t=t.right;continue}}return ki(s.root,!1),i}function Rce(s){let e=s.root;const t=[];let i=0;for(;e!==kt;){if(gs(e)){ki(e.left,!1),ki(e.right,!1),e=e.parent;continue}if(e.left!==kt&&!gs(e.left)){e=e.left;continue}if(e.right!==kt&&!gs(e.right)){e=e.right;continue}t[i++]=e,ki(e,!0)}return ki(s.root,!1),t}function Ace(s,e,t,i,n){let r=s.root,o=0,a=0,l=0;const c=[];let u=0;for(;r!==kt;){if(gs(r)){ki(r.left,!1),ki(r.right,!1),r===r.parent.right&&(o-=r.parent.delta),r=r.parent;continue}if(r.left!==kt&&!gs(r.left)){r=r.left;continue}a=o+r.start,l=o+r.end,r.setCachedOffsets(a,l,i);let d=!0;if(e&&r.ownerId&&r.ownerId!==e&&(d=!1),t&&yH(r)&&(d=!1),n&&!SH(r)&&(d=!1),d&&(c[u++]=r),ki(r,!0),r.right!==kt&&!gs(r.right)){o+=r.delta,r=r.right;continue}}return ki(s.root,!1),c}function Pce(s,e,t,i,n,r,o){let a=s.root,l=0,c=0,u=0,d=0;const g=[];let m=0;for(;a!==kt;){if(gs(a)){ki(a.left,!1),ki(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!gs(a.left)){if(c=l+a.maxEnd,c<e){ki(a,!0);continue}if(a.left!==kt){a=a.left;continue}}if(u=l+a.start,u>t){ki(a,!0);continue}if(d=l+a.end,d>=e){a.setCachedOffsets(u,d,r);let _=!0;i&&a.ownerId&&a.ownerId!==i&&(_=!1),n&&yH(a)&&(_=!1),o&&!SH(a)&&(_=!1),_&&(g[m++]=a)}if(ki(a,!0),a.right!==kt&&!gs(a.right)){l+=a.delta,a=a.right;continue}}return ki(s.root,!1),g}function yP(s,e){if(s.root===kt)return e.parent=kt,e.left=kt,e.right=kt,Ei(e,0),s.root=e,s.root;Oce(s,e),Xu(e.parent);let t=e;for(;t!==s.root&&pr(t.parent)===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;pr(i)===1?(Ei(t.parent,0),Ei(i,0),Ei(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,g1(s,t)),Ei(t.parent,0),Ei(t.parent.parent,1),m1(s,t.parent.parent))}else{const i=t.parent.parent.left;pr(i)===1?(Ei(t.parent,0),Ei(i,0),Ei(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,m1(s,t)),Ei(t.parent,0),Ei(t.parent.parent,1),g1(s,t.parent.parent))}return Ei(s.root,0),e}function Oce(s,e){let t=0,i=s.root;const n=e.start,r=e.end;for(;;)if(Bce(n,r,i.start+t,i.end+t)<0)if(i.left===kt){e.start-=t,e.end-=t,e.maxEnd-=t,i.left=e;break}else i=i.left;else if(i.right===kt){e.start-=t+i.delta,e.end-=t+i.delta,e.maxEnd-=t+i.delta,i.right=e;break}else t+=i.delta,i=i.right;e.parent=i,e.left=kt,e.right=kt,Ei(e,1)}function SP(s,e){let t,i;if(e.left===kt?(t=e.right,i=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(s.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===kt?(t=e.left,i=e):(i=Fce(e.right),t=i.right,t.start+=i.delta,t.end+=i.delta,t.delta+=i.delta,(t.delta<-1073741824||t.delta>1073741824)&&(s.requestNormalizeDelta=!0),i.start+=e.delta,i.end+=e.delta,i.delta=e.delta,(i.delta<-1073741824||i.delta>1073741824)&&(s.requestNormalizeDelta=!0)),i===s.root){s.root=t,Ei(t,0),e.detach(),Jk(),Fh(t),s.root.parent=kt;return}const n=pr(i)===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?t.parent=i.parent:(i.parent===e?t.parent=i:t.parent=i.parent,i.left=e.left,i.right=e.right,i.parent=e.parent,Ei(i,pr(e)),e===s.root?s.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==kt&&(i.left.parent=i),i.right!==kt&&(i.right.parent=i)),e.detach(),n){Xu(t.parent),i!==e&&(Xu(i),Xu(i.parent)),Jk();return}Xu(t),Xu(t.parent),i!==e&&(Xu(i),Xu(i.parent));let r;for(;t!==s.root&&pr(t)===0;)t===t.parent.left?(r=t.parent.right,pr(r)===1&&(Ei(r,0),Ei(t.parent,1),g1(s,t.parent),r=t.parent.right),pr(r.left)===0&&pr(r.right)===0?(Ei(r,1),t=t.parent):(pr(r.right)===0&&(Ei(r.left,0),Ei(r,1),m1(s,r),r=t.parent.right),Ei(r,pr(t.parent)),Ei(t.parent,0),Ei(r.right,0),g1(s,t.parent),t=s.root)):(r=t.parent.left,pr(r)===1&&(Ei(r,0),Ei(t.parent,1),m1(s,t.parent),r=t.parent.left),pr(r.left)===0&&pr(r.right)===0?(Ei(r,1),t=t.parent):(pr(r.left)===0&&(Ei(r.right,0),Ei(r,1),g1(s,r),r=t.parent.left),Ei(r,pr(t.parent)),Ei(t.parent,0),Ei(r.left,0),m1(s,t.parent),t=s.root));Ei(t,0),Jk()}function Fce(s){for(;s.left!==kt;)s=s.left;return s}function Jk(){kt.parent=kt,kt.delta=0,kt.start=0,kt.end=0}function g1(s,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(s.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==kt&&(t.left.parent=e),t.parent=e.parent,e.parent===kt?s.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Fh(e),Fh(t)}function m1(s,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(s.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==kt&&(t.right.parent=e),t.parent=e.parent,e.parent===kt?s.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Fh(e),Fh(t)}function kH(s){let e=s.end;if(s.left!==kt){const t=s.left.maxEnd;t>e&&(e=t)}if(s.right!==kt){const t=s.right.maxEnd+s.delta;t>e&&(e=t)}return e}function Fh(s){s.maxEnd=kH(s)}function Xu(s){for(;s!==kt;){const e=kH(s);if(s.maxEnd===e)return;s.maxEnd=e,s=s.parent}}function Bce(s,e,t,i){return s===t?e-i:s-t}class U7{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==ht)return LE(this.right);let e=this;for(;e.parent!==ht&&e.parent.left!==e;)e=e.parent;return e.parent===ht?ht:e.parent}prev(){if(this.left!==ht)return LH(this.left);let e=this;for(;e.parent!==ht&&e.parent.right!==e;)e=e.parent;return e.parent===ht?ht:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const ht=new U7(null,0);ht.parent=ht;ht.left=ht;ht.right=ht;ht.color=0;function LE(s){for(;s.left!==ht;)s=s.left;return s}function LH(s){for(;s.right!==ht;)s=s.right;return s}function DE(s){return s===ht?0:s.size_left+s.piece.length+DE(s.right)}function EE(s){return s===ht?0:s.lf_left+s.piece.lineFeedCnt+EE(s.right)}function eL(){ht.parent=ht}function p1(s,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==ht&&(t.left.parent=e),t.parent=e.parent,e.parent===ht?s.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function _1(s,e){const t=e.left;e.left=t.right,t.right!==ht&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===ht?s.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function sw(s,e){let t,i;if(e.left===ht?(i=e,t=i.right):e.right===ht?(i=e,t=i.left):(i=LE(e.right),t=i.right),i===s.root){s.root=t,t.color=0,e.detach(),eL(),s.root.parent=ht;return}const n=i.color===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?(t.parent=i.parent,Z0(s,t)):(i.parent===e?t.parent=i:t.parent=i.parent,Z0(s,t),i.left=e.left,i.right=e.right,i.parent=e.parent,i.color=e.color,e===s.root?s.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==ht&&(i.left.parent=i),i.right!==ht&&(i.right.parent=i),i.size_left=e.size_left,i.lf_left=e.lf_left,Z0(s,i)),e.detach(),t.parent.left===t){const o=DE(t),a=EE(t);if(o!==t.parent.size_left||a!==t.parent.lf_left){const l=o-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=a,yc(s,t.parent,l,c)}}if(Z0(s,t.parent),n){eL();return}let r;for(;t!==s.root&&t.color===0;)t===t.parent.left?(r=t.parent.right,r.color===1&&(r.color=0,t.parent.color=1,p1(s,t.parent),r=t.parent.right),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.right.color===0&&(r.left.color=0,r.color=1,_1(s,r),r=t.parent.right),r.color=t.parent.color,t.parent.color=0,r.right.color=0,p1(s,t.parent),t=s.root)):(r=t.parent.left,r.color===1&&(r.color=0,t.parent.color=1,_1(s,t.parent),r=t.parent.left),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.left.color===0&&(r.right.color=0,r.color=1,p1(s,r),r=t.parent.left),r.color=t.parent.color,t.parent.color=0,r.left.color=0,_1(s,t.parent),t=s.root));t.color=0,eL()}function xP(s,e){for(Z0(s,e);e!==s.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,p1(s,e)),e.parent.color=0,e.parent.parent.color=1,_1(s,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,_1(s,e)),e.parent.color=0,e.parent.parent.color=1,p1(s,e.parent.parent))}s.root.color=0}function yc(s,e,t,i){for(;e!==s.root&&e!==ht;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}function Z0(s,e){let t=0,i=0;if(e!==s.root){for(;e!==s.root&&e===e.parent.right;)e=e.parent;if(e!==s.root)for(e=e.parent,t=DE(e.left)-e.size_left,i=EE(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=i;e!==s.root&&(t!==0||i!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}}const pc=65535;function DH(s){let e;return s[s.length-1]<65536?e=new Uint16Array(s.length):e=new Uint32Array(s.length),e.set(s,0),e}class Wce{constructor(e,t,i,n,r){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=n,this.isBasicASCII=r}}function xc(s,e=!0){const t=[0];let i=1;for(let n=0,r=s.length;n<r;n++){const o=s.charCodeAt(n);o===13?n+1<r&&s.charCodeAt(n+1)===10?(t[i++]=n+2,n++):t[i++]=n+1:o===10&&(t[i++]=n+1)}return e?DH(t):t}function Vce(s,e){s.length=0,s[0]=0;let t=1,i=0,n=0,r=0,o=!0;for(let l=0,c=e.length;l<c;l++){const u=e.charCodeAt(l);u===13?l+1<c&&e.charCodeAt(l+1)===10?(r++,s[t++]=l+2,l++):(i++,s[t++]=l+1):u===10?(n++,s[t++]=l+1):o&&u!==9&&(u<32||u>126)&&(o=!1)}const a=new Wce(DH(s),i,n,r,o);return s.length=0,a}class Rr{constructor(e,t,i,n,r){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=n,this.length=r}}class Wd{constructor(e,t){this.buffer=e,this.lineStarts=t}}class zce{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==ht&&e.iterate(e.root,i=>(i!==ht&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class Hce{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const i=this._cache;for(let n=0;n<i.length;n++){const r=i[n];if(r.node.parent===null||r.nodeStartOffset>=e){i[n]=null,t=!0;continue}}if(t){const n=[];for(const r of i)r!==null&&n.push(r);this._cache=n}}}class jce{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new Wd("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=ht,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let n=null;for(let r=0,o=e.length;r<o;r++)if(e[r].buffer.length>0){e[r].lineStarts||(e[r].lineStarts=xc(e[r].buffer));const a=new Rr(r+1,{line:0,column:0},{line:e[r].lineStarts.length-1,column:e[r].buffer.length-e[r].lineStarts[e[r].lineStarts.length-1]},e[r].lineStarts.length-1,e[r].buffer.length);this._buffers.push(e[r]),n=this.rbInsertRight(n,a)}this._searchCache=new Hce(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=pc,i=t-Math.floor(t/3),n=i*2;let r="",o=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),u=c.length;if(o<=i||o+u<n)return r+=c,o+=u,!0;const d=r.replace(/\r\n|\r|\n/g,e);return a.push(new Wd(d,xc(d))),r=c,o=u,!0}),o>0){const l=r.replace(/\r\n|\r|\n/g,e);a.push(new Wd(l,xc(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new zce(this,e)}getOffsetAt(e,t){let i=0,n=this.root;for(;n!==ht;)if(n.left!==ht&&n.lf_left+1>=e)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt+1>=e){i+=n.size_left;const r=this.getAccumulatedValue(n,e-n.lf_left-2);return i+=r+t-1}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const n=e;for(;t!==ht;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const r=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+r.index,r.index===0){const o=this.getOffsetAt(i+1,1),a=n-o;return new ce(i+1,a+1)}return new ce(i+1,r.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===ht){const r=this.getOffsetAt(i+1,1),o=n-e-r;return new ce(i+1,o+1)}else t=t.right;return new ce(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.nodeAt2(e.startLineNumber,e.startColumn),n=this.nodeAt2(e.endLineNumber,e.endColumn),r=this.getValueInRange2(i,n);return t?t!==this._EOL||!this._EOLNormalized?r.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?r:r.replace(/\r\n|\r|\n/g,t):r}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let i=e.node;const n=this._buffers[i.piece.bufferIndex].buffer,r=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let o=n.substring(r+e.remainder,r+i.piece.length);for(i=i.next();i!==ht;){const a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){o+=a.substring(l,l+t.remainder);break}else o+=a.substr(l,i.piece.length);i=i.next()}return o}getLinesContent(){const e=[];let t=0,i="",n=!1;return this.iterate(this.root,r=>{if(r===ht)return!0;const o=r.piece;let a=o.length;if(a===0)return!0;const l=this._buffers[o.bufferIndex].buffer,c=this._buffers[o.bufferIndex].lineStarts,u=o.start.line,d=o.end.line;let g=c[u]+o.start.column;if(n&&(l.charCodeAt(g)===10&&(g++,a--),e[t++]=i,i="",n=!1,a===0))return!0;if(u===d)return!this._EOLNormalized&&l.charCodeAt(g+a-1)===13?(n=!0,i+=l.substr(g,a-1)):i+=l.substr(g,a),!0;i+=this._EOLNormalized?l.substring(g,Math.max(g,c[u+1]-this._EOLLength)):l.substring(g,c[u+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let m=u+1;m<d;m++)i=this._EOLNormalized?l.substring(c[m],c[m+1]-this._EOLLength):l.substring(c[m],c[m+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this._EOLNormalized&&l.charCodeAt(c[d]+o.end.column-1)===13?(n=!0,o.end.column===0?t--:i=l.substr(c[d],o.end.column-1)):i=l.substr(c[d],o.end.column),!0}),n&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this._buffers[t.piece.bufferIndex],n=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(n)}else{const t=this._buffers[e.node.piece.bufferIndex],n=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(n)}}getLineCharCode(e,t){const i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,i,n,r,o,a,l,c,u,d){const g=this._buffers[e.piece.bufferIndex],m=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),_=this.offsetInBuffer(e.piece.bufferIndex,r),v=this.offsetInBuffer(e.piece.bufferIndex,o);let w;const y={line:0,column:0};let S,k;t._wordSeparators?(S=g.buffer.substring(_,v),k=L=>L+_,t.reset(0)):(S=g.buffer,k=L=>L,t.reset(_));do if(w=t.next(S),w){if(k(w.index)>=v)return u;this.positionInBuffer(e,k(w.index)-m,y);const L=this.getLineFeedCnt(e.piece.bufferIndex,r,y),T=y.line===r.line?y.column-r.column+n:y.column+1,A=T+w[0].length;if(d[u++]=Rd(new Q(i+L,T,i+L,A),w,l),k(w.index)+w[0].length>=v||u>=c)return u}while(w);return u}findMatchesLineByLine(e,t,i,n){const r=[];let o=0;const a=new Kg(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let u=this.positionInBuffer(l.node,l.remainder);const d=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,u,d,t,i,n,o,r),r;let g=e.startLineNumber,m=l.node;for(;m!==c.node;){const v=this.getLineFeedCnt(m.piece.bufferIndex,u,m.piece.end);if(v>=1){const y=this._buffers[m.piece.bufferIndex].lineStarts,S=this.offsetInBuffer(m.piece.bufferIndex,m.piece.start),k=y[u.line+v],L=g===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(m,a,g,L,u,this.positionInBuffer(m,k-S),t,i,n,o,r),o>=n)return r;g+=v}const w=g===e.startLineNumber?e.startColumn-1:0;if(g===e.endLineNumber){const y=this.getLineContent(g).substring(w,e.endColumn-1);return o=this._findMatchesInLine(t,a,y,e.endLineNumber,w,o,r,i,n),r}if(o=this._findMatchesInLine(t,a,this.getLineContent(g).substr(w),g,w,o,r,i,n),o>=n)return r;g++,l=this.nodeAt2(g,1),m=l.node,u=this.positionInBuffer(l.node,l.remainder)}if(g===e.endLineNumber){const v=g===e.startLineNumber?e.startColumn-1:0,w=this.getLineContent(g).substring(v,e.endColumn-1);return o=this._findMatchesInLine(t,a,w,e.endLineNumber,v,o,r,i,n),r}const _=g===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(c.node,a,g,_,u,d,t,i,n,o,r),r}_findMatchesInLine(e,t,i,n,r,o,a,l,c){const u=e.wordSeparators;if(!l&&e.simpleSearch){const g=e.simpleSearch,m=g.length,_=i.length;let v=-m;for(;(v=i.indexOf(g,v+m))!==-1;)if((!u||O8(u,i,_,v,m))&&(a[o++]=new a_(new Q(n,v+1+r,n,v+1+m+r),null),o>=c))return o;return o}let d;t.reset(0);do if(d=t.next(i),d&&(a[o++]=Rd(new Q(n,d.index+1+r,n,d.index+1+d[0].length+r),d,l),o>=c))return o;while(d);return o}insert(e,t,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==ht){const{node:n,remainder:r,nodeStartOffset:o}=this.nodeAt(e),a=n.piece,l=a.bufferIndex,c=this.positionInBuffer(n,r);if(n.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&o+a.length===e&&t.length<pc){this.appendToNode(n,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,n),this._searchCache.validate(e);else if(o+n.piece.length>e){const u=[];let d=new Rr(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(n,r)===10){const v={line:d.start.line+1,column:0};d=new Rr(d.bufferIndex,v,d.end,this.getLineFeedCnt(d.bufferIndex,v,d.end),d.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(n,r-1)===13){const v=this.positionInBuffer(n,r-1);this.deleteNodeTail(n,v),t="\r"+t,n.piece.length===0&&u.push(n)}else this.deleteNodeTail(n,c);else this.deleteNodeTail(n,c);const g=this.createNewPieces(t);d.length>0&&this.rbInsertRight(n,d);let m=n;for(let _=0;_<g.length;_++)m=this.rbInsertRight(m,g[_]);this.deleteNodes(u)}else this.insertContentToNodeRight(t,n)}else{const n=this.createNewPieces(t);let r=this.rbInsertLeft(null,n[0]);for(let o=1;o<n.length;o++)r=this.rbInsertRight(r,n[o])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===ht)return;const i=this.nodeAt(e),n=this.nodeAt(e+t),r=i.node,o=n.node;if(r===o){const g=this.positionInBuffer(r,i.remainder),m=this.positionInBuffer(r,n.remainder);if(i.nodeStartOffset===e){if(t===r.piece.length){const _=r.next();sw(this,r),this.validateCRLFWithPrevNode(_),this.computeBufferMetadata();return}this.deleteNodeHead(r,m),this._searchCache.validate(e),this.validateCRLFWithPrevNode(r),this.computeBufferMetadata();return}if(i.nodeStartOffset+r.piece.length===e+t){this.deleteNodeTail(r,g),this.validateCRLFWithNextNode(r),this.computeBufferMetadata();return}this.shrinkNode(r,g,m),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(r,i.remainder);this.deleteNodeTail(r,l),this._searchCache.validate(e),r.piece.length===0&&a.push(r);const c=this.positionInBuffer(o,n.remainder);this.deleteNodeHead(o,c),o.piece.length===0&&a.push(o);const u=r.next();for(let g=u;g!==ht&&g!==o;g=g.next())a.push(g);const d=r.piece.length===0?r.prev():r;this.deleteNodes(a),this.validateCRLFWithNextNode(d),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const o=t.piece,a={line:o.start.line+1,column:0},l=new Rr(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),o.length-1);t.piece=l,e+=`
`,yc(this,t,-1,-1),t.piece.length===0&&i.push(t)}const n=this.createNewPieces(e);let r=this.rbInsertLeft(t,n[n.length-1]);for(let o=n.length-2;o>=0;o--)r=this.rbInsertLeft(r,n[o]);this.validateCRLFWithPrevNode(r),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const i=this.createNewPieces(e),n=this.rbInsertRight(t,i[0]);let r=n;for(let o=1;o<i.length;o++)r=this.rbInsertRight(r,i[o]);this.validateCRLFWithPrevNode(n)}positionInBuffer(e,t,i){const n=e.piece,r=e.piece.bufferIndex,o=this._buffers[r].lineStarts,l=o[n.start.line]+n.start.column+t;let c=n.start.line,u=n.end.line,d=0,g=0,m=0;for(;c<=u&&(d=c+(u-c)/2|0,m=o[d],d!==u);)if(g=o[d+1],l<m)u=d-1;else if(l>=g)c=d+1;else break;return i?(i.line=d,i.column=l-m,null):{line:d,column:l-m}}getLineFeedCnt(e,t,i){if(i.column===0)return i.line-t.line;const n=this._buffers[e].lineStarts;if(i.line===n.length-1)return i.line-t.line;const r=n[i.line+1],o=n[i.line]+i.column;if(r>o+1)return i.line-t.line;const a=o-1;return this._buffers[e].buffer.charCodeAt(a)===13?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)sw(this,e[t])}createNewPieces(e){if(e.length>pc){const u=[];for(;e.length>pc;){const g=e.charCodeAt(pc-1);let m;g===13||g>=55296&&g<=56319?(m=e.substring(0,pc-1),e=e.substring(pc-1)):(m=e.substring(0,pc),e=e.substring(pc));const _=xc(m);u.push(new Rr(this._buffers.length,{line:0,column:0},{line:_.length-1,column:m.length-_[_.length-1]},_.length-1,m.length)),this._buffers.push(new Wd(m,_))}const d=xc(e);return u.push(new Rr(this._buffers.length,{line:0,column:0},{line:d.length-1,column:e.length-d[d.length-1]},d.length-1,e.length)),this._buffers.push(new Wd(e,d)),u}let t=this._buffers[0].buffer.length;const i=xc(e,!1);let n=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},n=this._lastChangeBufferPos;for(let u=0;u<i.length;u++)i[u]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let u=0;u<i.length;u++)i[u]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}const r=this._buffers[0].buffer.length,o=this._buffers[0].lineStarts.length-1,a=r-this._buffers[0].lineStarts[o],l={line:o,column:a},c=new Rr(0,n,l,this.getLineFeedCnt(0,n,l),r-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let i=this.root,n="";const r=this._searchCache.get2(e);if(r){i=r.node;const o=this.getAccumulatedValue(i,e-r.nodeStartLineNumber-1),a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(r.nodeStartLineNumber+i.piece.lineFeedCnt===e)n=a.substring(l+o,l+i.piece.length);else{const c=this.getAccumulatedValue(i,e-r.nodeStartLineNumber);return a.substring(l+o,l+c-t)}}else{let o=0;const a=e;for(;i!==ht;)if(i.left!==ht&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this.getAccumulatedValue(i,e-i.lf_left-1),u=this._buffers[i.piece.bufferIndex].buffer,d=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return o+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:o,nodeStartLineNumber:a-(e-1-i.lf_left)}),u.substring(d+l,d+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this._buffers[i.piece.bufferIndex].buffer,u=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n=c.substring(u+l,u+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,o+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==ht;){const o=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(i,0),l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return n+=o.substring(l,l+a-t),n}else{const a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n+=o.substr(a,i.piece.length)}i=i.next()}return n}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==ht;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){const i=e.piece,n=this.positionInBuffer(e,t),r=n.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){const o=this.getLineFeedCnt(e.piece.bufferIndex,i.start,n);if(o!==r)return{index:o,remainder:0}}return{index:r,remainder:n.column}}getAccumulatedValue(e,t){if(t<0)return 0;const i=e.piece,n=this._buffers[i.bufferIndex].lineStarts,r=i.start.line+t+1;return r>i.end.line?n[i.end.line]+i.end.column-n[i.start.line]-i.start.column:n[r]-n[i.start.line]-i.start.column}deleteNodeTail(e,t){const i=e.piece,n=i.lineFeedCnt,r=this.offsetInBuffer(i.bufferIndex,i.end),o=t,a=this.offsetInBuffer(i.bufferIndex,o),l=this.getLineFeedCnt(i.bufferIndex,i.start,o),c=l-n,u=a-r,d=i.length+u;e.piece=new Rr(i.bufferIndex,i.start,o,l,d),yc(this,e,u,c)}deleteNodeHead(e,t){const i=e.piece,n=i.lineFeedCnt,r=this.offsetInBuffer(i.bufferIndex,i.start),o=t,a=this.getLineFeedCnt(i.bufferIndex,o,i.end),l=this.offsetInBuffer(i.bufferIndex,o),c=a-n,u=r-l,d=i.length+u;e.piece=new Rr(i.bufferIndex,o,i.end,a,d),yc(this,e,u,c)}shrinkNode(e,t,i){const n=e.piece,r=n.start,o=n.end,a=n.length,l=n.lineFeedCnt,c=t,u=this.getLineFeedCnt(n.bufferIndex,n.start,c),d=this.offsetInBuffer(n.bufferIndex,t)-this.offsetInBuffer(n.bufferIndex,r);e.piece=new Rr(n.bufferIndex,n.start,c,u,d),yc(this,e,d-a,u-l);const g=new Rr(n.bufferIndex,i,o,this.getLineFeedCnt(n.bufferIndex,i,o),this.offsetInBuffer(n.bufferIndex,o)-this.offsetInBuffer(n.bufferIndex,i)),m=this.rbInsertRight(e,g);this.validateCRLFWithPrevNode(m)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),n=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const r=xc(t,!1);for(let m=0;m<r.length;m++)r[m]+=n;if(i){const m=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:n-m}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1));const o=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[o],l={line:o,column:a},c=e.piece.length+t.length,u=e.piece.lineFeedCnt,d=this.getLineFeedCnt(0,e.piece.start,l),g=d-u;e.piece=new Rr(e.piece.bufferIndex,e.piece.start,l,d,c),this._lastChangeBufferPos=l,yc(this,e,t.length,g)}nodeAt(e){let t=this.root;const i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let n=0;for(;t!==ht;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){n+=t.size_left;const r={node:t,remainder:e-t.size_left,nodeStartOffset:n};return this._searchCache.set(r),r}else e-=t.size_left+t.piece.length,n+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let i=this.root,n=0;for(;i!==ht;)if(i.left!==ht&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const r=this.getAccumulatedValue(i,e-i.lf_left-2),o=this.getAccumulatedValue(i,e-i.lf_left-1);return n+=i.size_left,{node:i,remainder:Math.min(r+t-1,o),nodeStartOffset:n}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const r=this.getAccumulatedValue(i,e-i.lf_left-2);if(r+t-1<=i.piece.length)return{node:i,remainder:r+t-1,nodeStartOffset:n};t-=i.piece.length-r;break}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==ht;){if(i.piece.lineFeedCnt>0){const r=this.getAccumulatedValue(i,0),o=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,r),nodeStartOffset:o}}else if(i.piece.length>=t-1){const r=this.offsetOfNode(i);return{node:i,remainder:t-1,nodeStartOffset:r}}else t-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this._buffers[e.piece.bufferIndex],n=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(n)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===ht||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,n=t.start.line,r=i[n]+t.start.column;return n===i.length-1||i[n+1]>r+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(r)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===ht||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const i=[],n=this._buffers[e.piece.bufferIndex].lineStarts;let r;e.piece.end.column===0?r={line:e.piece.end.line-1,column:n[e.piece.end.line]-n[e.piece.end.line-1]-1}:r={line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Rr(e.piece.bufferIndex,e.piece.start,r,a,o),yc(this,e,-1,-1),e.piece.length===0&&i.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,u=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Rr(t.piece.bufferIndex,l,t.piece.end,u,c),yc(this,t,-1,-1),t.piece.length===0&&i.push(t);const d=this.createNewPieces(`\r
`);this.rbInsertRight(e,d[0]);for(let g=0;g<i.length;g++)sw(this,i[g])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const i=t.next();if(this.startWithLF(i)){if(e+=`
`,i.piece.length===1)sw(this,i);else{const n=i.piece,r={line:n.start.line+1,column:0},o=n.length-1,a=this.getLineFeedCnt(n.bufferIndex,r,n.end);i.piece=new Rr(n.bufferIndex,r,n.end,a,o),yc(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===ht)return t(ht);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===ht)return"";const t=this._buffers[e.piece.bufferIndex],i=e.piece,n=this.offsetInBuffer(i.bufferIndex,i.start),r=this.offsetInBuffer(i.bufferIndex,i.end);return t.buffer.substring(n,r)}getPieceContent(e){const t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),n=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,n)}rbInsertRight(e,t){const i=new U7(t,1);if(i.left=ht,i.right=ht,i.parent=ht,i.size_left=0,i.lf_left=0,this.root===ht)this.root=i,i.color=0;else if(e.right===ht)e.right=i,i.parent=e;else{const r=LE(e.right);r.left=i,i.parent=r}return xP(this,i),i}rbInsertLeft(e,t){const i=new U7(t,1);if(i.left=ht,i.right=ht,i.parent=ht,i.size_left=0,i.lf_left=0,this.root===ht)this.root=i,i.color=0;else if(e.left===ht)e.left=i,i.parent=e;else{const n=LH(e.left);n.right=i,i.parent=n}return xP(this,i),i}}class Pm extends ve{constructor(e,t,i,n,r,o,a){super(),this._onDidChangeContent=this._register(new re),this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=n,this._mightContainUnusualLineTerminators=r,this._pieceTree=new jce(e,i,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const i=e+t,n=this.getPositionAt(e),r=this.getPositionAt(i);return new Q(n.lineNumber,n.column,r.lineNumber,r.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const i=this.getOffsetAt(e.startLineNumber,e.startColumn),n=this.getOffsetAt(e.endLineNumber,e.endColumn);let r=0;const o=this._getEndOfLine(t),a=this.getEOL();if(o.length!==a.length){const l=o.length-a.length,c=e.endLineNumber-e.startLineNumber;r=l*c}return n-i+r}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let i=0;const n=e.startLineNumber,r=e.endLineNumber;for(let o=n;o<=r;o++){const a=this.getLineContent(o),l=o===n?e.startColumn-1:0,c=o===r?e.endColumn-1:a.length;for(let u=l;u<c;u++)zn(a.charCodeAt(u))?(i=i+1,u=u+1):i=i+1}return i+=this._getEndOfLine(t).length*(r-n),i}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=Ur(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Vf(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let n=this._mightContainRTL,r=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,l=[];for(let v=0;v<e.length;v++){const w=e[v];a&&w._isTracked&&(a=!1);const y=w.range;if(w.text){let A=!0;o||(A=!m8(w.text),o=A),!n&&A&&(n=t_(w.text)),!r&&A&&(r=xW(w.text))}let S="",k=0,L=0,T=0;if(w.text){let A;[k,L,T,A]=sp(w.text);const I=this.getEOL();A===0||A===(I===`\r
`?2:1)?S=w.text:S=w.text.replace(/\r\n|\r|\n/g,I)}l[v]={sortIndex:v,identifier:w.identifier||null,range:y,rangeOffset:this.getOffsetAt(y.startLineNumber,y.startColumn),rangeLength:this.getValueLengthInRange(y),text:S,eolCount:k,firstLineLength:L,lastLineLength:T,forceMoveMarkers:!!w.forceMoveMarkers,isAutoWhitespaceEdit:w.isAutoWhitespaceEdit||!1}}l.sort(Pm._sortOpsAscending);let c=!1;for(let v=0,w=l.length-1;v<w;v++){const y=l[v].range.getEndPosition(),S=l[v+1].range.getStartPosition();if(S.isBeforeOrEqual(y)){if(S.isBefore(y))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const u=i||t?Pm._getInverseEditRanges(l):[],d=[];if(t)for(let v=0;v<l.length;v++){const w=l[v],y=u[v];if(w.isAutoWhitespaceEdit&&w.range.isEmpty())for(let S=y.startLineNumber;S<=y.endLineNumber;S++){let k="";S===y.startLineNumber&&(k=this.getLineContent(w.range.startLineNumber),Ur(k)!==-1)||d.push({lineNumber:S,oldContent:k})}}let g=null;if(i){let v=0;g=[];for(let w=0;w<l.length;w++){const y=l[w],S=u[w],k=this.getValueInRange(y.range),L=y.rangeOffset+v;v+=y.text.length-k.length,g[w]={sortIndex:y.sortIndex,identifier:y.identifier,range:S,text:k,textChange:new ds(y.rangeOffset,k,L,y.text)}}c||g.sort((w,y)=>w.sortIndex-y.sortIndex)}this._mightContainRTL=n,this._mightContainUnusualLineTerminators=r,this._mightContainNonBasicASCII=o;const m=this._doApplyEdits(l);let _=null;if(t&&d.length>0){d.sort((v,w)=>w.lineNumber-v.lineNumber),_=[];for(let v=0,w=d.length;v<w;v++){const y=d[v].lineNumber;if(v>0&&d[v-1].lineNumber===y)continue;const S=d[v].oldContent,k=this.getLineContent(y);k.length===0||k===S||Ur(k)!==-1||_.push(y)}}return this._onDidChangeContent.fire(),new Uee(g,m,_)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const i=e[0].range,n=e[e.length-1].range,r=new Q(i.startLineNumber,i.startColumn,n.endLineNumber,n.endColumn);let o=i.startLineNumber,a=i.startColumn;const l=[];for(let m=0,_=e.length;m<_;m++){const v=e[m],w=v.range;t=t||v.forceMoveMarkers,l.push(this.getValueInRange(new Q(o,a,w.startLineNumber,w.startColumn))),v.text.length>0&&l.push(v.text),o=w.endLineNumber,a=w.endColumn}const c=l.join(""),[u,d,g]=sp(c);return{sortIndex:0,identifier:e[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,0),text:c,eolCount:u,firstLineLength:d,lastLineLength:g,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(Pm._sortOpsDescending);const t=[];for(let i=0;i<e.length;i++){const n=e[i],r=n.range.startLineNumber,o=n.range.startColumn,a=n.range.endLineNumber,l=n.range.endColumn;if(r===a&&o===l&&n.text.length===0)continue;n.text?(this._pieceTree.delete(n.rangeOffset,n.rangeLength),this._pieceTree.insert(n.rangeOffset,n.text,!0)):this._pieceTree.delete(n.rangeOffset,n.rangeLength);const c=new Q(r,o,a,l);t.push({range:c,rangeLength:n.rangeLength,text:n.text,rangeOffset:n.rangeOffset,forceMoveMarkers:n.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,n){return this._pieceTree.findMatchesLineByLine(e,t,i,n)}static _getInverseEditRanges(e){const t=[];let i=0,n=0,r=null;for(let o=0,a=e.length;o<a;o++){const l=e[o];let c,u;r?r.range.endLineNumber===l.range.startLineNumber?(c=i,u=n+(l.range.startColumn-r.range.endColumn)):(c=i+(l.range.startLineNumber-r.range.endLineNumber),u=l.range.startColumn):(c=l.range.startLineNumber,u=l.range.startColumn);let d;if(l.text.length>0){const g=l.eolCount+1;g===1?d=new Q(c,u,c,u+l.firstLineLength):d=new Q(c,u,c+g-1,l.lastLineLength+1)}else d=new Q(c,u,c,u);i=d.endLineNumber,n=d.endColumn,t.push(d),r=l}return t}static _sortOpsAscending(e,t){const i=Q.compareRangesUsingEnds(e.range,t.range);return i===0?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){const i=Q.compareRangesUsingEnds(e.range,t.range);return i===0?t.sortIndex-e.sortIndex:-i}}class Uce{constructor(e,t,i,n,r,o,a,l,c){this._chunks=e,this._bom=t,this._cr=i,this._lf=n,this._crlf=r,this._containsRTL=o,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),i=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let r=0,o=i.length;r<o;r++){const a=i[r].buffer.replace(/\r\n|\r|\n/g,t),l=xc(a);i[r]=new Wd(a,l)}const n=new Pm(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:n,disposable:n}}}class EH{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&_8(e)&&(this.BOM=WX,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=Vce(this._tmpLineStarts,e);this.chunks.push(new Wd(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=t_(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=xW(e)))}finish(e=!0){return this._finish(),new Uce(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=xc(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class $ce{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,i){if(e>=this._store.length)return;if(t===0){this.insert(e,i);return}else if(i===0){this.delete(e,t);return}const n=this._store.slice(0,e),r=this._store.slice(e+t),o=qce(i,this._default);this._store=n.concat(o,r)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const i=[];for(let n=0;n<t;n++)i[n]=this._default;this._store=t2(this._store,e,i)}}function qce(s,e){const t=[];for(let i=0;i<s;i++)t[i]=e;return t}class Kce{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class $7{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const i=this._tokens[this._tokens.length-1];if(i.endLineNumber+1===e){i.appendLineTokens(t);return}}this._tokens.push(new Kce(e,[t]))}finalize(){return this._tokens}}class Gce{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new q7(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class Zce extends Gce{constructor(e,t,i,n){super(e,t),this._textModel=i,this._languageIdCodec=n}updateTokensUntilLine(e,t){const i=this._textModel.getLanguageId();for(;;){const n=this.getFirstInvalidLine();if(!n||n.lineNumber>t)break;const r=this._textModel.getLineContent(n.lineNumber),o=I0(this._languageIdCodec,i,this.tokenizationSupport,r,!0,n.startState);e.add(n.lineNumber,o.tokens),this.store.setEndState(n.lineNumber,o.endState)}}getTokenTypeIfInsertingCharacter(e,t){const i=this.getStartState(e.lineNumber);if(!i)return 0;const n=this._textModel.getLanguageId(),r=this._textModel.getLineContent(e.lineNumber),o=r.substring(0,e.column-1)+t+r.substring(e.column-1),a=I0(this._languageIdCodec,n,this.tokenizationSupport,o,!0,i),l=new es(a.tokens,o,this._languageIdCodec);if(l.getCount()===0)return 0;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t,i){const n=e.lineNumber,r=e.column,o=this.getStartState(n);if(!o)return null;const a=this._textModel.getLineContent(n),l=a.substring(0,r-1)+i+a.substring(r-1+t),c=this._textModel.getLanguageIdAtPosition(n,0),u=I0(this._languageIdCodec,c,this.tokenizationSupport,l,!0,o);return new es(u.tokens,l,this._languageIdCodec)}hasAccurateTokensForLine(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,i),{heuristicTokens:!1};let n=this.guessStartState(t);const r=this._textModel.getLanguageId();for(let o=t;o<=i;o++){const a=this._textModel.getLineContent(o),l=I0(this._languageIdCodec,r,this.tokenizationSupport,a,!0,n);e.add(o,l.tokens),n=l.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const i=[];let n=null;for(let a=e-1;t>1&&a>=1;a--){const l=this._textModel.getLineFirstNonWhitespaceColumn(a);if(l!==0&&l<t&&(i.push(this._textModel.getLineContent(a)),t=l,n=this.getStartState(a),n))break}n||(n=this.tokenizationSupport.getInitialState()),i.reverse();const r=this._textModel.getLanguageId();let o=n;for(const a of i)o=I0(this._languageIdCodec,r,this.tokenizationSupport,a,!1,o).endState;return o}}class q7{constructor(e){this.lineCount=e,this._tokenizationStateStore=new Yce,this._invalidEndStatesLineNumbers=new Xce,this._invalidEndStatesLineNumbers.addRange(new yt(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new ri("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const i=this._tokenizationStateStore.setEndState(e,t);return i&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new yt(e+1,e+2)),i}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new yt(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[i]=sp(t.text);this.acceptChange(new dt(t.range.startLineNumber,t.range.endLineNumber+1),i+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new yt(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;const i=this.getStartState(t,e);if(!i)throw new ri("Start state must be defined");return{lineNumber:t,startState:i}}}class Yce{constructor(){this._lineEndStates=new $ce(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const i=this._lineEndStates.get(e);return i&&i.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let i=e.length;t>0&&i>0&&(i--,t--),this._lineEndStates.replace(e.startLineNumber,i,t)}}class Xce{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}delete(e){const t=this._ranges.findIndex(i=>i.contains(e));if(t!==-1){const i=this._ranges[t];i.start===e?i.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new yt(e+1,i.endExclusive):i.endExclusive===e+1?this._ranges[t]=new yt(i.start,e):this._ranges.splice(t,1,new yt(i.start,e),new yt(e+1,i.endExclusive))}}addRange(e){yt.addRange(e,this._ranges)}addRangeAndResize(e,t){let i=0;for(;!(i>=this._ranges.length||e.start<=this._ranges[i].endExclusive);)i++;let n=i;for(;!(n>=this._ranges.length||e.endExclusive<this._ranges[n].start);)n++;const r=t-e.length;for(let o=n;o<this._ranges.length;o++)this._ranges[o]=this._ranges[o].delta(r);if(i===n){const o=new yt(e.start,e.start+t);o.isEmpty||this._ranges.splice(i,0,o)}else{const o=Math.min(e.start,this._ranges[i].start),a=Math.max(e.endExclusive,this._ranges[n-1].endExclusive),l=new yt(o,a+r);l.isEmpty?this._ranges.splice(i,n-i):this._ranges.splice(i,n-i,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}}function I0(s,e,t,i,n,r){let o=null;if(t)try{o=t.tokenizeEncoded(i,n,r.clone())}catch(a){_i(a)}return o||(o=oE(s.encodeLanguageId(e),r)),es.convertToEndOffset(o.tokens,i.length),o}class Qce{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,MW(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),i=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?QB(i):this._beginBackgroundTokenization())};i()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new $7,i=Wf.create(!1);do if(i.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){const t=this._tokenizerWithStateStore?.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new dt(e,t))}}class Jce{constructor(){this._onDidChangeVisibleRanges=new re,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new eue(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}class eue{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const i=e.map(n=>new dt(n.startLineNumber,n.endLineNumber+1));this.handleStateChange({visibleLineRanges:i,stabilized:t})}}class tue extends ve{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new ir(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){Rn(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}class TH extends ve{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,i){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=i,this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new re),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new re),this.onDidChangeTokens=this._onDidChangeTokens.event}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}}class kP extends TH{constructor(e,t,i,n){super(t,i,n),this._treeSitterService=e,this._tokenizationSupport=null,this._initialize()}_initialize(){const e=this.getLanguageId();(!this._tokenizationSupport||this._lastLanguageId!==e)&&(this._lastLanguageId=e,this._tokenizationSupport=o5.get(e))}getLineTokens(e){const t=this._textModel.getLineContent(e);if(this._tokenizationSupport){const i=this._tokenizationSupport.tokenizeEncoded(e,this._textModel);if(i)return new es(i,t,this._languageIdCodec)}return es.createEmpty(t,this._languageIdCodec)}resetTokenization(e=!0){e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]}),this._initialize()}handleDidChangeAttached(){}handleDidChangeContent(e){e.isFlush&&this.resetTokenization(!1)}forceTokenization(e){}hasAccurateTokensForLine(e){return!0}isCheapToTokenize(e){return!0}getTokenTypeIfInsertingCharacter(e,t,i){return 0}tokenizeLineWithEdit(e,t,i){return null}get hasTokens(){return this._treeSitterService.getParseResult(this._textModel)!==void 0}}const NH=Ut("treeSitterParserService"),kc=new Uint32Array(0).buffer;class El{static deleteBeginning(e,t){return e===null||e===kc?e:El.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===kc)return e;const i=Hc(e),n=i[i.length-2];return El.delete(e,t,n)}static delete(e,t,i){if(e===null||e===kc||t===i)return e;const n=Hc(e),r=n.length>>>1;if(t===0&&n[n.length-2]===i)return kc;const o=es.findIndexInTokensArray(n,t),a=o>0?n[o-1<<1]:0,l=n[o<<1];if(i<l){const m=i-t;for(let _=o;_<r;_++)n[_<<1]-=m;return e}let c,u;a!==t?(n[o<<1]=t,c=o+1<<1,u=t):(c=o<<1,u=a);const d=i-t;for(let m=o+1;m<r;m++){const _=n[m<<1]-d;_>u&&(n[c++]=_,n[c++]=n[(m<<1)+1],u=_)}if(c===n.length)return e;const g=new Uint32Array(c);return g.set(n.subarray(0,c),0),g.buffer}static append(e,t){if(t===kc)return e;if(e===kc)return t;if(e===null)return e;if(t===null)return null;const i=Hc(e),n=Hc(t),r=n.length>>>1,o=new Uint32Array(i.length+n.length);o.set(i,0);let a=i.length;const l=i[i.length-2];for(let c=0;c<r;c++)o[a++]=n[c<<1]+l,o[a++]=n[(c<<1)+1];return o.buffer}static insert(e,t,i){if(e===null||e===kc)return e;const n=Hc(e),r=n.length>>>1;let o=es.findIndexInTokensArray(n,t);o>0&&n[o-1<<1]===t&&o--;for(let a=o;a<r;a++)n[a<<1]+=i;return e}}function Hc(s){return s instanceof Uint32Array?s:new Uint32Array(s)}class y_{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,i){let n=null;if(t<this._len&&(n=this._lineTokens[t]),n!==null&&n!==kc)return new es(Hc(n),i,this._languageIdCodec);const r=new Uint32Array(2);return r[0]=i.length,r[1]=LP(this._languageIdCodec.encodeLanguageId(e)),new es(r,i,this._languageIdCodec)}static _massageTokens(e,t,i){const n=i?Hc(i):null;if(t===0){let r=!1;if(n&&n.length>1&&(r=Ka.getLanguageId(n[1])!==e),!r)return kc}if(!n||n.length===0){const r=new Uint32Array(2);return r[0]=t,r[1]=LP(e),r.buffer}return n[n.length-2]=t,n.byteOffset===0&&n.byteLength===n.buffer.byteLength?n.buffer:n}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const i=[];for(let n=0;n<t;n++)i[n]=null;this._lineTokens=t2(this._lineTokens,e,i),this._len+=t}setTokens(e,t,i,n,r){const o=y_._massageTokens(this._languageIdCodec.encodeLanguageId(e),i,n);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=o,r?!y_._equals(a,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const i=Hc(e),n=Hc(t);if(i.length!==n.length)return!1;for(let r=0,o=i.length;r<o;r++)if(i[r]!==n[r])return!1;return!0}acceptEdit(e,t,i){this._acceptDeleteRange(e),this._acceptInsertText(new ce(e.startLineNumber,e.startColumn),t,i)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=El.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=El.deleteEnding(this._lineTokens[t],e.startColumn-1);const i=e.endLineNumber-1;let n=null;i<this._len&&(n=El.deleteBeginning(this._lineTokens[i],e.endColumn-1)),this._lineTokens[t]=El.append(this._lineTokens[t],n),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,i){if(t===0&&i===0)return;const n=e.lineNumber-1;if(!(n>=this._len)){if(t===0){this._lineTokens[n]=El.insert(this._lineTokens[n],e.column-1,i);return}this._lineTokens[n]=El.deleteEnding(this._lineTokens[n],e.column-1),this._lineTokens[n]=El.insert(this._lineTokens[n],e.column-1,i),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};const i=[];for(let n=0,r=e.length;n<r;n++){const o=e[n];let a=0,l=0,c=!1;for(let u=o.startLineNumber;u<=o.endLineNumber;u++)c?(this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),o.getLineTokens(u),!1),l=u):this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),o.getLineTokens(u),!0)&&(c=!0,a=u,l=u);c&&i.push({fromLineNumber:a,toLineNumber:l})}return{changes:i}}}function LP(s){return(s<<0|0|0|32768|2<<24|1024)>>>0}class TE{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let i=e;if(t.length>0){const r=t[0].getRange(),o=t[t.length-1].getRange();if(!r||!o)return e;i=e.plusRange(r).plusRange(o)}let n=null;for(let r=0,o=this._pieces.length;r<o;r++){const a=this._pieces[r];if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){n=n||{index:r};break}if(a.removeTokens(i),a.isEmpty()){this._pieces.splice(r,1),r--,o--;continue}if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){n=n||{index:r};continue}const[l,c]=a.split(i);if(l.isEmpty()){n=n||{index:r};continue}c.isEmpty()||(this._pieces.splice(r,1,l,c),r++,o++,n=n||{index:r})}return n=n||{index:this._pieces.length},t.length>0&&(this._pieces=t2(this._pieces,n.index,t)),i}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const i=this._pieces;if(i.length===0)return t;const n=TE._findFirstPieceWithLine(i,e),r=i[n].getLineTokens(e);if(!r)return t;const o=t.getCount(),a=r.getCount();let l=0;const c=[];let u=0,d=0;const g=(m,_)=>{m!==d&&(d=m,c[u++]=m,c[u++]=_)};for(let m=0;m<a;m++){const _=r.getStartCharacter(m),v=r.getEndCharacter(m),w=r.getMetadata(m),y=((w&1?2048:0)|(w&2?4096:0)|(w&4?8192:0)|(w&8?16384:0)|(w&16?16744448:0)|(w&32?4278190080:0))>>>0,S=~y>>>0;for(;l<o&&t.getEndOffset(l)<=_;)g(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<o&&t.getStartOffset(l)<_&&g(_,t.getMetadata(l));l<o&&t.getEndOffset(l)<v;)g(t.getEndOffset(l),t.getMetadata(l)&S|w&y),l++;if(l<o)g(v,t.getMetadata(l)&S|w&y),t.getEndOffset(l)===v&&l++;else{const k=Math.min(Math.max(0,l-1),o-1);g(v,t.getMetadata(k)&S|w&y)}}for(;l<o;)g(t.getEndOffset(l),t.getMetadata(l)),l++;return new es(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let i=0,n=e.length-1;for(;i<n;){let r=i+Math.floor((n-i)/2);if(e[r].endLineNumber<t)i=r+1;else if(e[r].startLineNumber>t)n=r-1;else{for(;r>i&&e[r-1].startLineNumber<=t&&t<=e[r-1].endLineNumber;)r--;return r}}return i}acceptEdit(e,t,i,n,r){for(const o of this._pieces)o.acceptEdit(e,t,i,n,r)}}var iue=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},tL=function(s,e){return function(t,i){e(t,i,s)}},Gw;let K7=Gw=class extends wH{constructor(e,t,i,n,r,o,a){super(),this._textModel=e,this._bracketPairsTextModelPart=t,this._languageId=i,this._attachedViews=n,this._languageService=r,this._languageConfigurationService=o,this._treeSitterService=a,this._semanticTokens=new TE(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new re),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new re),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new re),this.onDidChangeTokens=this._onDidChangeTokens.event,this._tokensDisposables=this._register(new Qe),this._register(this._languageConfigurationService.onDidChange(l=>{l.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(Te.filter(o5.onDidChange,l=>l.changedLanguages.includes(this._languageId))(()=>{this.createPreferredTokenProvider()})),this.createPreferredTokenProvider()}createGrammarTokens(){return this._register(new DP(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews))}createTreeSitterTokens(){return this._register(new kP(this._treeSitterService,this._languageService.languageIdCodec,this._textModel,()=>this._languageId))}createTokens(e){const t=this._tokens!==void 0;this._tokens?.dispose(),this._tokens=e?this.createTreeSitterTokens():this.createGrammarTokens(),this._tokensDisposables.clear(),this._tokensDisposables.add(this._tokens.onDidChangeTokens(i=>{this._emitModelTokensChangedEvent(i)})),this._tokensDisposables.add(this._tokens.onDidChangeBackgroundTokenizationState(i=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),t&&this._tokens.resetTokenization()}createPreferredTokenProvider(){o5.get(this._languageId)?this._tokens instanceof kP||this.createTokens(!0):this._tokens instanceof DP||this.createTokens(!1)}handleLanguageConfigurationServiceChange(e){e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[i,n,r]=sp(t.text);this._semanticTokens.acceptEdit(t.range,i,n,r,t.text.length>0?t.text.charCodeAt(0):0)}this._tokens.handleDidChangeContent(e)}handleDidChangeAttached(){this._tokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this._tokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new ri("Illegal value for lineNumber")}get hasTokens(){return this._tokens.hasTokens}resetTokenization(){this._tokens.resetTokenization()}get backgroundTokenizationState(){return this._tokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this._tokens.forceTokenization(e)}hasAccurateTokensForLine(e){return this.validateLineNumber(e),this._tokens.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this._tokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this._tokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,i){return this._tokens.getTokenTypeIfInsertingCharacter(e,t,i)}tokenizeLineWithEdit(e,t,i){return this._tokens.tokenizeLineWithEdit(e,t,i)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const i=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),i=this._textModel.getLineContent(t.lineNumber),n=this.getLineTokens(t.lineNumber),r=n.findTokenIndexAtOffset(t.column-1),[o,a]=Gw._findLanguageBoundaries(n,r),l=X1(t.column,this.getLanguageConfiguration(n.getLanguageId(r)).getWordDefinition(),i.substring(o,a),o);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(r>0&&o===t.column-1){const[c,u]=Gw._findLanguageBoundaries(n,r-1),d=X1(t.column,this.getLanguageConfiguration(n.getLanguageId(r-1)).getWordDefinition(),i.substring(c,u),c);if(d&&d.startColumn<=e.column&&e.column<=d.endColumn)return d}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const i=e.getLanguageId(t);let n=0;for(let o=t;o>=0&&e.getLanguageId(o)===i;o--)n=e.getStartOffset(o);let r=e.getLineContent().length;for(let o=t,a=e.getCount();o<a&&e.getLanguageId(o)===i;o++)r=e.getEndOffset(o);return[n,r]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const i=this._textModel.validatePosition(new ce(e,t)),n=this.getLineTokens(i.lineNumber);return n.getLanguageId(n.findTokenIndexAtOffset(i.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const i={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this._tokens.resetTokenization(),this.createPreferredTokenProvider(),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}};K7=Gw=iue([tL(4,$n),tL(5,Yl),tL(6,NH)],K7);class DP extends TH{constructor(e,t,i,n){super(e,t,i),this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new uu),this._tokens=new y_(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new uu),this._attachedViewStates=this._register(new r8),this._register(un.onDidChange(r=>{const o=this.getLanguageId();r.changedLanguages.indexOf(o)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(n.onDidChangeVisibleRanges(({view:r,state:o})=>{if(o){let a=this._attachedViewStates.get(r);a||(a=new tue(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(r,a)),a.handleStateChange(o)}else this._attachedViewStates.deleteAndDispose(r)}))}resetTokenization(e=!0){this._tokens.flush(),this._debugBackgroundTokens?.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new q7(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const t=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const r=un.get(this.getLanguageId());if(!r)return[null,null];let o;try{o=r.getInitialState()}catch(a){return _i(a),[null,null]}return[r,o]},[i,n]=t();if(i&&n?this._tokenizer=new Zce(this._textModel.getLineCount(),i,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const r={setTokens:o=>{this.setTokens(o)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;const o=2;this._backgroundTokenizationState=o,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(o,a)=>{if(!this._tokenizer)return;const l=this._tokenizer.store.getFirstInvalidEndStateLineNumber();l!==null&&o>=l&&this._tokenizer?.store.setEndState(o,a)}};i&&i.createBackgroundTokenizer&&!i.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,r)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new Qce(this._tokenizer,r),this._defaultBackgroundTokenizer.handleChanges()),i?.backgroundTokenizerShouldOnlyVerifyTokens&&i.createBackgroundTokenizer?(this._debugBackgroundTokens=new y_(this._languageIdCodec),this._debugBackgroundStates=new q7(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,{setTokens:o=>{this._debugBackgroundTokens?.setMultilineTokens(o,this._textModel)},backgroundTokenizationFinished(){},setEndState:(o,a)=>{this._debugBackgroundStates?.setEndState(o,a)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){this._defaultBackgroundTokenizer?.handleChanges()}handleDidChangeContent(e){if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const t of e.changes){const[i,n]=sp(t.text);this._tokens.acceptEdit(t.range,i,n),this._debugBackgroundTokens?.acceptEdit(t.range,i,n)}this._debugBackgroundStates?.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),this._defaultBackgroundTokenizer?.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=dt.joinMany([...this._attachedViewStates].map(([t,i])=>i.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const i=new $7,{heuristicTokens:n}=this._tokenizer.tokenizeHeuristically(i,e,t),r=this.setTokens(i.finalize());if(n)for(const o of r.changes)this._backgroundTokenizer.value?.requestTokens(o.fromLineNumber,o.toLineNumber+1);this._defaultBackgroundTokenizer?.checkFinished()}forceTokenization(e){const t=new $7;this._tokenizer?.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),this._defaultBackgroundTokenizer?.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}getLineTokens(e){const t=this._textModel.getLineContent(e),i=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const n=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!i.equals(n)&&this._debugBackgroundTokenizer.value?.reportMismatchingTokens&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return i}getTokenTypeIfInsertingCharacter(e,t,i){if(!this._tokenizer)return 0;const n=this._textModel.validatePosition(new ce(e,t));return this.forceTokenization(n.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(n,i)}tokenizeLineWithEdit(e,t,i){if(!this._tokenizer)return null;const n=this._textModel.validatePosition(e);return this.forceTokenization(n.lineNumber),this._tokenizer.tokenizeLineWithEdit(n,t,i)}get hasTokens(){return this._tokens.hasTokens}}class nue{constructor(){this.changeType=1}}class il{static applyInjectedText(e,t){if(!t||t.length===0)return e;let i="",n=0;for(const r of t)i+=e.substring(n,r.column-1),n=r.column-1,i+=r.options.content;return i+=e.substring(n),i}static fromDecorations(e){const t=[];for(const i of e)i.options.before&&i.options.before.content.length>0&&t.push(new il(i.ownerId,i.range.startLineNumber,i.range.startColumn,i.options.before,0)),i.options.after&&i.options.after.content.length>0&&t.push(new il(i.ownerId,i.range.endLineNumber,i.range.endColumn,i.options.after,1));return t.sort((i,n)=>i.lineNumber===n.lineNumber?i.column===n.column?i.order-n.order:i.column-n.column:i.lineNumber-n.lineNumber),t}constructor(e,t,i,n,r){this.ownerId=e,this.lineNumber=t,this.column=i,this.options=n,this.order=r}}class EP{constructor(e,t,i){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=i}}class sue{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class rue{constructor(e,t,i,n){this.changeType=4,this.injectedTexts=n,this.fromLineNumber=e,this.toLineNumber=t,this.detail=i}}class oue{constructor(){this.changeType=5}}class Om{constructor(e,t,i,n){this.changes=e,this.versionId=t,this.isUndoing=i,this.isRedoing=n,this.resultingSelection=null}containsEvent(e){for(let t=0,i=this.changes.length;t<i;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const i=[].concat(e.changes).concat(t.changes),n=t.versionId,r=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new Om(i,n,r,o)}}class IH{constructor(e){this.changes=e}}class uf{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=Om.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),i=uf._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new uf(t,i)}static _mergeChangeEvents(e,t){const i=[].concat(e.changes).concat(t.changes),n=t.eol,r=t.versionId,o=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,c=e.isEolChange&&t.isEolChange;return{changes:i,eol:n,isEolChange:c,versionId:r,isUndoing:o,isRedoing:a,isFlush:l}}}var aue=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},rw=function(s,e){return function(t,i){e(t,i,s)}},Sd;function lue(s){const e=new EH;return e.acceptChunk(s),e.finish()}function cue(s){const e=new EH;let t;for(;typeof(t=s.read())=="string";)e.acceptChunk(t);return e.finish()}function TP(s,e){let t;return typeof s=="string"?t=lue(s):Hee(s)?t=cue(s):t=s,t.create(e)}let ow=0;const uue=999,hue=1e4;class due{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,i=0;do{const n=this._source.read();if(n===null)return this._eos=!0,t===0?null:e.join("");if(n.length>0&&(e[t++]=n,i+=n.length),i>=64*1024)return e.join("")}while(!0)}}const M0=()=>{throw new Error("Invalid change accessor")};var Za;let G7=(Za=class extends ve{static resolveOptions(e,t){if(t.detectIndentation){const i=_P(e,t.tabSize,t.insertSpaces);return new Bw({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new Bw(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return Vl(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,i,n=null,r,o,a,l){super(),this._undoRedoService=r,this._languageService=o,this._languageConfigurationService=a,this.instantiationService=l,this._onWillDispose=this._register(new re),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new vue(_=>this.handleBeforeFireDecorationsChangedEvent(_))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new re),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new re),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new re),this._eventEmitter=this._register(new bue),this._languageSelectionListener=this._register(new uu),this._deltaDecorationCallCnt=0,this._attachedViews=new Jce,ow++,this.id="$model"+ow,this.isForSimpleWidget=i.isForSimpleWidget,typeof n>"u"||n===null?this._associatedResource=Et.parse("inmemory://model/"+ow):this._associatedResource=n,this._attachedEditorCount=0;const{textBuffer:c,disposable:u}=TP(e,i.defaultEOL);this._buffer=c,this._bufferDisposable=u,this._options=Sd.resolveOptions(this._buffer,i);const d=typeof t=="string"?t:t.languageId;typeof t!="string"&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new _ce(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new Sce(this,this._languageConfigurationService)),this._decorationProvider=this._register(new bce(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(K7,this,this._bracketPairs,d,this._attachedViews);const g=this._buffer.getLineCount(),m=this._buffer.getValueLengthInRange(new Q(1,1,g,this._buffer.getLineLength(g)+1),0);i.largeFileOptimizations?(this._isTooLargeForTokenization=m>Sd.LARGE_FILE_SIZE_THRESHOLD||g>Sd.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=m>Sd.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=m>Sd._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=kW(ow),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new NP,this._commandManager=new kE(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(d),this._register(this._languageConfigurationService.onDidChange(_=>{this._bracketPairs.handleLanguageConfigurationServiceChange(_),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(_)}))}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new Pm([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=ve.None}_assertNotDisposed(){if(this._isDisposed)throw new ri("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new uf(e,t)))}setValue(e){if(this._assertNotDisposed(),e==null)throw n2();const{textBuffer:t,disposable:i}=TP(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,i)}_createContentChanged2(e,t,i,n,r,o,a,l){return{changes:[{range:e,rangeOffset:t,rangeLength:i,text:n}],eol:this._buffer.getEOL(),isEolChange:l,versionId:this.getVersionId(),isUndoing:r,isRedoing:o,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const i=this.getFullModelRange(),n=this.getValueLengthInRange(i),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new NP,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Om([new nue],this._versionId,!1,!1),this._createContentChanged2(new Q(1,1,r,o),0,n,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const i=this.getFullModelRange(),n=this.getValueLengthInRange(i),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Om([new oue],this._versionId,!1,!1),this._createContentChanged2(new Q(1,1,r,o),0,n,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let i=0,n=t.length;i<n;i++){const r=t[i],o=r.range,a=r.cachedAbsoluteStart-r.start,l=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),c=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);r.cachedAbsoluteStart=l,r.cachedAbsoluteEnd=c,r.cachedVersionId=e,r.start=l-a,r.end=c-a,Fh(r)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const i=this._buffer.getLineCount();for(let n=1;n<=i;n++){const r=this._buffer.getLineLength(n);r>=hue?t+=r:e+=r}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,i=typeof e.indentSize<"u"?e.indentSize:this._options.originalIndentSize,n=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,r=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new Bw({tabSize:t,indentSize:i,insertSpaces:n,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:r,bracketPairColorizationOptions:o});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const i=_P(this._buffer,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),fH(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(SW.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(i=>({range:i.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new ri("Operation would exceed heap memory limits");const i=this.getFullModelRange(),n=this.getValueInRange(i,e);return t?this._buffer.getBOM()+n:n}createSnapshot(e=!1){return new due(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const i=this.getFullModelRange(),n=this.getValueLengthInRange(i,e);return t?this._buffer.getBOM().length+n:n}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new ri("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new ri("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new ri("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new ri("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new ri("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new ri("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),i=e.startLineNumber,n=e.startColumn;let r=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),o=Math.floor(typeof n=="number"&&!isNaN(n)?n:1);if(r<1)r=1,o=1;else if(r>t)r=t,o=this.getLineMaxColumn(r);else if(o<=1)o=1;else{const d=this.getLineMaxColumn(r);o>=d&&(o=d)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),u=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,u=1;else if(c>t)c=t,u=this.getLineMaxColumn(c);else if(u<=1)u=1;else{const d=this.getLineMaxColumn(c);u>=d&&(u=d)}return i===r&&n===o&&a===c&&l===u&&e instanceof Q&&!(e instanceof wi)?e:new Q(r,o,c,u)}_isValidPosition(e,t,i){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const n=this._buffer.getLineCount();if(e>n)return!1;if(t===1)return!0;const r=this.getLineMaxColumn(e);if(t>r)return!1;if(i===1){const o=this._buffer.getLineCharCode(e,t-2);if(zn(o))return!1}return!0}_validatePosition(e,t,i){const n=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),r=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),o=this._buffer.getLineCount();if(n<1)return new ce(1,1);if(n>o)return new ce(o,this.getLineMaxColumn(o));if(r<=1)return new ce(n,1);const a=this.getLineMaxColumn(n);if(r>=a)return new ce(n,a);if(i===1){const l=this._buffer.getLineCharCode(n,r-2);if(zn(l))return new ce(n,r-1)}return new ce(n,r)}validatePosition(e){return this._assertNotDisposed(),e instanceof ce&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const i=e.startLineNumber,n=e.startColumn,r=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(i,n,0)||!this._isValidPosition(r,o,0))return!1;if(t===1){const a=n>1?this._buffer.getLineCharCode(i,n-2):0,l=o>1&&o<=this._buffer.getLineLength(r)?this._buffer.getLineCharCode(r,o-2):0,c=zn(a),u=zn(l);return!c&&!u}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof Q&&!(e instanceof wi)&&this._isValidRange(e,1))return e;const i=this._validatePosition(e.startLineNumber,e.startColumn,0),n=this._validatePosition(e.endLineNumber,e.endColumn,0),r=i.lineNumber,o=i.column,a=n.lineNumber,l=n.column;{const c=o>1?this._buffer.getLineCharCode(r,o-2):0,u=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,d=zn(c),g=zn(u);return!d&&!g?new Q(r,o,a,l):r===a&&o===l?new Q(r,o-1,a,l-1):d&&g?new Q(r,o-1,a,l+1):d?new Q(r,o-1,a,l):new Q(r,o,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const i=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new Q(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,i,n){return this._buffer.findMatchesLineByLine(e,t,i,n)}findMatches(e,t,i,n,r,o,a=uue){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(d=>Q.isIRange(d))&&(l=t.map(d=>this.validateRange(d)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((d,g)=>d.startLineNumber-g.startLineNumber||d.startColumn-g.startColumn);const c=[];c.push(l.reduce((d,g)=>Q.areIntersecting(d,g)?d.plusRange(g):(c.push(d),g)));let u;if(!i&&e.indexOf(`
`)<0){const g=new Tg(e,i,n,r).parseSearchRequest();if(!g)return[];u=m=>this.findMatchesLineByLine(m,g,o,a)}else u=d=>Wb.findMatches(this,new Tg(e,i,n,r),d,o,a);return c.map(u).reduce((d,g)=>d.concat(g),[])}findNextMatch(e,t,i,n,r,o){this._assertNotDisposed();const a=this.validatePosition(t);if(!i&&e.indexOf(`
`)<0){const c=new Tg(e,i,n,r).parseSearchRequest();if(!c)return null;const u=this.getLineCount();let d=new Q(a.lineNumber,a.column,u,this.getLineMaxColumn(u)),g=this.findMatchesLineByLine(d,c,o,1);return Wb.findNextMatch(this,new Tg(e,i,n,r),a,o),g.length>0||(d=new Q(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),g=this.findMatchesLineByLine(d,c,o,1),g.length>0)?g[0]:null}return Wb.findNextMatch(this,new Tg(e,i,n,r),a,o)}findPreviousMatch(e,t,i,n,r,o){this._assertNotDisposed();const a=this.validatePosition(t);return Wb.findPreviousMatch(this,new Tg(e,i,n,r),a,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof Rk?e:new Rk(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this._validateEditOperation(e[i]);return t}pushEditOperations(e,t,i,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),i,n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,i,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const r=t.map(a=>({range:this.validateRange(a.range),text:a.text}));let o=!0;if(e)for(let a=0,l=e.length;a<l;a++){const c=e[a];let u=!1;for(let d=0,g=r.length;d<g;d++){const m=r[d].range,_=m.startLineNumber>c.endLineNumber,v=c.startLineNumber>m.endLineNumber;if(!_&&!v){u=!0;break}}if(!u){o=!1;break}}if(o)for(let a=0,l=this._trimAutoWhitespaceLines.length;a<l;a++){const c=this._trimAutoWhitespaceLines[a],u=this.getLineMaxColumn(c);let d=!0;for(let g=0,m=r.length;g<m;g++){const _=r[g].range,v=r[g].text;if(!(c<_.startLineNumber||c>_.endLineNumber)&&!(c===_.startLineNumber&&_.startColumn===u&&_.isEmpty()&&v&&v.length>0&&v.charAt(0)===`
`)&&!(c===_.startLineNumber&&_.startColumn===1&&_.isEmpty()&&v&&v.length>0&&v.charAt(v.length-1)===`
`)){d=!1;break}}if(d){const g=new Q(c,1,c,u);t.push(new Rk(null,g,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,i,n)}_applyUndo(e,t,i,n){const r=e.map(o=>{const a=this.getPositionAt(o.newPosition),l=this.getPositionAt(o.newEnd);return{range:new Q(a.lineNumber,a.column,l.lineNumber,l.column),text:o.oldText}});this._applyUndoRedoEdits(r,t,!0,!1,i,n)}_applyRedo(e,t,i,n){const r=e.map(o=>{const a=this.getPositionAt(o.oldPosition),l=this.getPositionAt(o.oldEnd);return{range:new Q(a.lineNumber,a.column,l.lineNumber,l.column),text:o.newText}});this._applyUndoRedoEdits(r,t,!1,!0,i,n)}_applyUndoRedoEdits(e,t,i,n,r,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=n,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(r)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const i=this._validateEditOperations(e);return this._doApplyEdits(i,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const i=this._buffer.getLineCount(),n=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),r=this._buffer.getLineCount(),o=n.changes;if(this._trimAutoWhitespaceLines=n.trimAutoWhitespaceLineNumbers,o.length!==0){for(let c=0,u=o.length;c<u;c++){const d=o[c];this._decorationsTree.acceptReplace(d.rangeOffset,d.rangeLength,d.text.length,d.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=i;for(let c=0,u=o.length;c<u;c++){const d=o[c],[g]=sp(d.text);this._onDidChangeDecorations.fire();const m=d.range.startLineNumber,_=d.range.endLineNumber,v=_-m,w=g,y=Math.min(v,w),S=w-v,k=r-l-S+m,L=k,T=k+w,A=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new ce(L,1)),this.getOffsetAt(new ce(T,this.getLineMaxColumn(T))),0),I=il.fromDecorations(A),O=new cu(I);for(let F=y;F>=0;F--){const J=m+F,Y=k+F;O.takeFromEndWhile(ie=>ie.lineNumber>Y);const G=O.takeFromEndWhile(ie=>ie.lineNumber===Y);a.push(new EP(J,this.getLineContent(Y),G))}if(y<v){const F=m+y;a.push(new sue(F+1,_))}if(y<w){const F=new cu(I),J=m+y,Y=w-y,G=r-l-Y+J+1,ie=[],Z=[];for(let ue=0;ue<Y;ue++){const be=G+ue;Z[ue]=this.getLineContent(be),F.takeWhile(ye=>ye.lineNumber<be),ie[ue]=F.takeWhile(ye=>ye.lineNumber===be)}a.push(new rue(J+1,m+w,Z,ie))}l+=S}this._emitContentChangedEvent(new Om(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return n.reverseEdits===null?void 0:n.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const i=Array.from(e).map(n=>new EP(n,this.getLineContent(n),this._getInjectedTextInLine(n)));this._onDidChangeInjectedText.fire(new IH(i))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const i={addDecoration:(r,o)=>this._deltaDecorationsImpl(e,[],[{range:r,options:o}])[0],changeDecoration:(r,o)=>{this._changeDecorationImpl(r,o)},changeDecorationOptions:(r,o)=>{this._changeDecorationOptionsImpl(r,MP(o))},removeDecoration:r=>{this._deltaDecorationsImpl(e,[r],[])},deltaDecorations:(r,o)=>r.length===0&&o.length===0?[]:this._deltaDecorationsImpl(e,r,o)};let n=null;try{n=t(i)}catch(r){_i(r)}return i.addDecoration=M0,i.changeDecoration=M0,i.changeDecorationOptions=M0,i.removeDecoration=M0,i.deltaDecorations=M0,n}deltaDecorations(e,t,i=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),_i(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,i){const n=e?this._decorations[e]:null;if(!n)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:IP[i]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(n),delete this._decorations[n.id],null;const r=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),a=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);return this._decorationsTree.delete(n),n.reset(this.getVersionId(),o,a,r),n.setOptions(IP[i]),this._decorationsTree.insert(n),n.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let i=0,n=t.length;i<n;i++){const r=t[i];this._decorationsTree.delete(r),delete this._decorations[r.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,i=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,i)}getLinesDecorations(e,t,i=0,n=!1,r=!1){const o=this.getLineCount(),a=Math.min(o,Math.max(1,e)),l=Math.min(o,Math.max(1,t)),c=this.getLineMaxColumn(l),u=new Q(a,1,l,c),d=this._getDecorationsInRange(u,i,n,r);return qL(d,this._decorationProvider.getDecorationsInRange(u,i,n)),d}getDecorationsInRange(e,t=0,i=!1,n=!1,r=!1){const o=this.validateRange(e),a=this._getDecorationsInRange(o,t,i,r);return qL(a,this._decorationProvider.getDecorationsInRange(o,t,i,n)),a}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),i=t+this._buffer.getLineLength(e),n=this._decorationsTree.getInjectedTextInInterval(this,t,i,0);return il.fromDecorations(n).filter(r=>r.lineNumber===e)}getAllDecorations(e=0,t=!1){let i=this._decorationsTree.getAll(this,e,t,!1,!1);return i=i.concat(this._decorationProvider.getAllDecorations(e,t)),i}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,i,n){const r=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),o=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,r,o,t,i,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const i=this._decorations[e];if(!i)return;if(i.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(i.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const n=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(n.startLineNumber,n.startColumn),o=this._buffer.getOffsetAt(n.endLineNumber,n.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),r,o,n),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.startLineNumber)}_changeDecorationOptionsImpl(e,t){const i=this._decorations[e];if(!i)return;const n=!!(i.options.overviewRuler&&i.options.overviewRuler.color),r=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(t),i.options.after||t.after){const l=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber)}if(i.options.before||t.before){const l=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}const o=n!==r,a=gue(t)!==Zw(i);o||a?(this._decorationsTree.delete(i),i.setOptions(t),this._decorationsTree.insert(i)):i.setOptions(t)}_deltaDecorationsImpl(e,t,i,n=!1){const r=this.getVersionId(),o=t.length;let a=0;const l=i.length;let c=0;this._onDidChangeDecorations.beginDeferredEmit();try{const u=new Array(l);for(;a<o||c<l;){let d=null;if(a<o){do d=this._decorations[t[a++]];while(!d&&a<o);if(d){if(d.options.after){const g=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.endLineNumber)}if(d.options.before){const g=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.startLineNumber)}this._decorationsTree.delete(d),n||this._onDidChangeDecorations.checkAffectedAndFire(d.options)}}if(c<l){if(!d){const y=++this._lastDecorationId,S=`${this._instanceId};${y}`;d=new xH(S,0,0),this._decorations[S]=d}const g=i[c],m=this._validateRangeRelaxedNoAllocations(g.range),_=MP(g.options),v=this._buffer.getOffsetAt(m.startLineNumber,m.startColumn),w=this._buffer.getOffsetAt(m.endLineNumber,m.endColumn);d.ownerId=e,d.reset(r,v,w,m),d.setOptions(_),d.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(m.endLineNumber),d.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(m.startLineNumber),n||this._onDidChangeDecorations.checkAffectedAndFire(_),this._decorationsTree.insert(d),u[c]=d.id,c++}else d&&delete this._decorations[d.id]}return u}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){typeof e=="string"?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return fue(this.getLineContent(e))+1}},Sd=Za,Za._MODEL_SYNC_LIMIT=50*1024*1024,Za.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024,Za.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3,Za.LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024,Za.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Ss.tabSize,indentSize:Ss.indentSize,insertSpaces:Ss.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Ss.trimAutoWhitespace,largeFileOptimizations:Ss.largeFileOptimizations,bracketPairColorizationOptions:Ss.bracketPairColorizationOptions},Za);G7=Sd=aue([rw(4,z8),rw(5,$n),rw(6,Yl),rw(7,hi)],G7);function fue(s){let e=0;for(const t of s)if(t===" "||t==="	")e++;else break;return e}function iL(s){return!!(s.options.overviewRuler&&s.options.overviewRuler.color)}function gue(s){return!!s.after||!!s.before}function Zw(s){return!!s.options.after||!!s.options.before}class NP{constructor(){this._decorationsTree0=new Qk,this._decorationsTree1=new Qk,this._injectedTextDecorationsTree=new Qk}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const i of t)i.range===null&&(i.range=e.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd));return t}getAllInInterval(e,t,i,n,r,o){const a=e.getVersionId(),l=this._intervalSearch(t,i,n,r,a,o);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,i,n,r,o){const a=this._decorationsTree0.intervalSearch(e,t,i,n,r,o),l=this._decorationsTree1.intervalSearch(e,t,i,n,r,o),c=this._injectedTextDecorationsTree.intervalSearch(e,t,i,n,r,o);return a.concat(l).concat(c)}getInjectedTextInInterval(e,t,i,n){const r=e.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(t,i,n,!1,r,!1);return this._ensureNodesHaveRanges(e,o).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const i=e.getVersionId(),n=this._injectedTextDecorationsTree.search(t,!1,i,!1);return this._ensureNodesHaveRanges(e,n).filter(r=>r.options.showIfCollapsed||!r.range.isEmpty())}getAll(e,t,i,n,r){const o=e.getVersionId(),a=this._search(t,i,n,o,r);return this._ensureNodesHaveRanges(e,a)}_search(e,t,i,n,r){if(i)return this._decorationsTree1.search(e,t,n,r);{const o=this._decorationsTree0.search(e,t,n,r),a=this._decorationsTree1.search(e,t,n,r),l=this._injectedTextDecorationsTree.search(e,t,n,r);return o.concat(a).concat(l)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),i=this._decorationsTree1.collectNodesFromOwner(e),n=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(i).concat(n)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),i=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(i)}insert(e){Zw(e)?this._injectedTextDecorationsTree.insert(e):iL(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){Zw(e)?this._injectedTextDecorationsTree.delete(e):iL(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const i=e.getVersionId();return t.cachedVersionId!==i&&this._resolveNode(t,i),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){Zw(e)?this._injectedTextDecorationsTree.resolveNode(e,t):iL(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,i,n){this._decorationsTree0.acceptReplace(e,t,i,n),this._decorationsTree1.acceptReplace(e,t,i,n),this._injectedTextDecorationsTree.acceptReplace(e,t,i,n)}}function wl(s){return s.replace(/[^a-z0-9\-_]/gi," ")}class MH{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class mue extends MH{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:IC.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const i=e?t.getColor(e.id):null;return i?i.toString():""}}class pue{constructor(e){this.position=e?.position??Ah.Center,this.persistLane=e?.persistLane}}class _ue extends MH{constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?Le.fromHex(e):t.getColor(e.id)}}class S_{static from(e){return e instanceof S_?e:new S_(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class Mn{static register(e){return new Mn(e)}static createDynamic(e){return new Mn(e)}constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?wl(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?wl(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new mue(e.overviewRuler):null,this.minimap=e.minimap?new _ue(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new pue(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?wl(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?wl(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?wl(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?IX(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?wl(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?wl(e.marginClassName):null,this.inlineClassName=e.inlineClassName?wl(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?wl(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?wl(e.afterContentClassName):null,this.after=e.after?S_.from(e.after):null,this.before=e.before?S_.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}}Mn.EMPTY=Mn.register({description:"empty"});const IP=[Mn.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Mn.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Mn.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Mn.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function MP(s){return s instanceof Mn?s:Mn.createDynamic(s)}class vue extends ve{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new re),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),this._affectedInjectedTextLines?.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||=!!e.minimap?.position,this._affectsOverviewRuler||=!!e.overviewRuler?.color,this._affectsGlyphMargin||=!!e.glyphMarginClassName,this._affectsLineNumber||=!!e.lineNumberClassName,this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class bue extends ve{constructor(){super(),this._fastEmitter=this._register(new re),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new re),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}var wue=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},aw=function(s,e){return function(t,i){e(t,i,s)}},Wg;function gd(s){return s.toString()}let Cue=class{constructor(e,t,i){this.model=e,this._modelEventListeners=new Qe,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(n=>i(e,n)))}dispose(){this._modelEventListeners.dispose()}};const yue=xr||qt?1:2;class Sue{constructor(e,t,i,n,r,o,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=i,this.sharesUndoRedoStack=n,this.heapSize=r,this.sha1=o,this.versionId=a,this.alternativeVersionId=l}}var gf;let Z7=(gf=class extends ve{constructor(e,t,i,n){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=i,this._instantiationService=n,this._onModelAdded=this._register(new re),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new re),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new re),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(r=>this._updateModelOptions(r))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){let i=Ss.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const g=parseInt(e.editor.tabSize,10);isNaN(g)||(i=g),i<1&&(i=1)}let n="tabSize";if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const g=parseInt(e.editor.indentSize,10);isNaN(g)||(n=Math.max(g,1))}let r=Ss.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(r=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let o=yue;const a=e.eol;a===`\r
`?o=2:a===`
`&&(o=1);let l=Ss.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(l=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let c=Ss.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(c=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let u=Ss.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(u=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let d=Ss.bracketPairColorizationOptions;return e.editor?.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(d={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:i,indentSize:n,insertSpaces:r,detectIndentation:c,defaultEOL:o,trimAutoWhitespace:l,largeFileOptimizations:u,bracketPairColorizationOptions:d}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const i=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return i&&typeof i=="string"&&i!=="auto"?i:ha===3||ha===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,i){const n=typeof e=="string"?e:e.languageId;let r=this._modelCreationOptionsByLanguageAndResource[n+t];if(!r){const o=this._configurationService.getValue("editor",{overrideIdentifier:n,resource:t}),a=this._getEOL(t,n);r=Wg._readModelOptions({editor:o,eol:a},i),this._modelCreationOptionsByLanguageAndResource[n+t]=r}return r}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const i=Object.keys(this._models);for(let n=0,r=i.length;n<r;n++){const o=i[n],a=this._models[o],l=a.model.getLanguageId(),c=a.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:l,resource:c})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:l,resource:c}))continue;const u=t[l+c],d=this.getCreationOptions(l,c,a.model.isForSimpleWidget);Wg._setModelOptionsForModel(a.model,d,u)}}static _setModelOptionsForModel(e,t,i){i&&i.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(i&&i.detectIndentation===t.detectIndentation&&i.insertSpaces===t.insertSpaces&&i.tabSize===t.tabSize&&i.indentSize===t.indentSize&&i.trimAutoWhitespace===t.trimAutoWhitespace&&jr(i.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(gd(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(gd(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(gd(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(i=>{i.sharesUndoRedoStack||t.push(i)}),t.sort((i,n)=>i.time-n.time);t.length>0&&this._disposedModelsHeapSize>e;){const i=t.shift();this._removeDisposedModel(i.uri),i.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(i.initialUndoRedoSnapshot)}}}_createModelData(e,t,i,n){const r=this.getCreationOptions(t,i,n),o=this._instantiationService.createInstance(G7,e,t,r,i);if(i&&this._disposedModels.has(gd(i))){const c=this._removeDisposedModel(i),u=this._undoRedoService.getElements(i),d=this._getSHA1Computer(),g=d.canComputeSHA1(o)?d.computeSHA1(o)===c.sha1:!1;if(g||c.sharesUndoRedoStack){for(const m of u.past)Pc(m)&&m.matchesResource(i)&&m.setModel(o);for(const m of u.future)Pc(m)&&m.matchesResource(i)&&m.setModel(o);this._undoRedoService.setElementsValidFlag(i,!0,m=>Pc(m)&&m.matchesResource(i)),g&&(o._overwriteVersionId(c.versionId),o._overwriteAlternativeVersionId(c.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=gd(o.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new Cue(o,c=>this._onWillDispose(c),(c,u)=>this._onDidChangeLanguage(c,u));return this._models[a]=l,l}createModel(e,t,i,n=!1){let r;return t?r=this._createModelData(e,t,i,n):r=this._createModelData(e,pa,i,n),this._onModelAdded.fire(r.model),r.model}getModels(){const e=[],t=Object.keys(this._models);for(let i=0,n=t.length;i<n;i++){const r=t[i];e.push(this._models[r].model)}return e}getModel(e){const t=gd(e),i=this._models[t];return i?i.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Dt.file||e.scheme===Dt.vscodeRemote||e.scheme===Dt.vscodeUserData||e.scheme===Dt.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=gd(e.uri),i=this._models[t],n=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let r=!1,o=0;if(n||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const c=this._undoRedoService.getElements(e.uri);if(c.past.length>0||c.future.length>0){for(const u of c.past)Pc(u)&&u.matchesResource(e.uri)&&(r=!0,o+=u.heapSize(e.uri),u.setModel(e.uri));for(const u of c.future)Pc(u)&&u.matchesResource(e.uri)&&(r=!0,o+=u.heapSize(e.uri),u.setModel(e.uri))}}const a=Wg.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,l=this._getSHA1Computer();if(r)if(!n&&(o>a||!l.canComputeSHA1(e))){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}else this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,c=>Pc(c)&&c.matchesResource(e.uri)),this._insertDisposedModel(new Sue(e.uri,i.model.getInitialUndoRedoSnapshot(),Date.now(),n,o,l.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!n){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}delete this._models[t],i.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const i=t.oldLanguage,n=e.getLanguageId(),r=this.getCreationOptions(i,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(n,e.uri,e.isForSimpleWidget);Wg._setModelOptionsForModel(e,o,r),this._onModelModeChanged.fire({model:e,oldLanguageId:i})}_getSHA1Computer(){return new Y7}},Wg=gf,gf.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024,gf);Z7=Wg=wue([aw(0,Xi),aw(1,IV),aw(2,z8),aw(3,hi)],Z7);const xS=class xS{canComputeSHA1(e){return e.getValueLength()<=xS.MAX_MODEL_SIZE}computeSHA1(e){const t=new d3,i=e.createSnapshot();let n;for(;n=i.read();)t.update(n);return t.digest()}};xS.MAX_MODEL_SIZE=10*1024*1024;let Y7=xS;var X7;(function(s){s[s.PRESERVE=0]="PRESERVE",s[s.LAST=1]="LAST"})(X7||(X7={}));const RH={Quickaccess:"workbench.contributions.quickaccess"};class xue{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,i)=>i.prefix.length-t.prefix.length),bt(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return YD([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(i=>e.startsWith(i.prefix))||void 0||this.defaultProvider}}is.add(RH.Quickaccess,new xue);const kue={ctrlCmd:!1,alt:!1};var hp;(function(s){s[s.Blur=1]="Blur",s[s.Gesture=2]="Gesture",s[s.Other=3]="Other"})(hp||(hp={}));var Tl;(function(s){s[s.NONE=0]="NONE",s[s.FIRST=1]="FIRST",s[s.SECOND=2]="SECOND",s[s.LAST=3]="LAST"})(Tl||(Tl={}));var Si;(function(s){s[s.First=1]="First",s[s.Second=2]="Second",s[s.Last=3]="Last",s[s.Next=4]="Next",s[s.Previous=5]="Previous",s[s.NextPage=6]="NextPage",s[s.PreviousPage=7]="PreviousPage",s[s.NextSeparator=8]="NextSeparator",s[s.PreviousSeparator=9]="PreviousSeparator"})(Si||(Si={}));var cy;(function(s){s[s.Title=1]="Title",s[s.Inline=2]="Inline"})(cy||(cy={}));const j2=Ut("quickInputService");var Lue=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},RP=function(s,e){return function(t,i){e(t,i,s)}};let Q7=class extends ve{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=is.as(RH.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){const[n,r]=this.getOrInstantiateProvider(e,i?.enabledProviderPrefixes),o=this.visibleQuickAccess,a=o?.descriptor;if(o&&r&&a===r){e!==r.prefix&&!i?.preserveValue&&(o.picker.value=e),this.adjustValueSelection(o.picker,r,i);return}if(r&&!i?.preserveValue){let _;if(o&&a&&a!==r){const v=o.value.substr(a.prefix.length);v&&(_=`${r.prefix}${v}`)}if(!_){const v=n?.defaultFilterValue;v===X7.LAST?_=this.lastAcceptedPickerValues.get(r):typeof v=="string"&&(_=`${r.prefix}${v}`)}typeof _=="string"&&(e=_)}const l=o?.picker?.valueSelection,c=o?.picker?.value,u=new Qe,d=u.add(this.quickInputService.createQuickPick({useSeparators:!0}));d.value=e,this.adjustValueSelection(d,r,i),d.placeholder=i?.placeholder??r?.placeholder,d.quickNavigate=i?.quickNavigateConfiguration,d.hideInput=!!d.quickNavigate&&!o,(typeof i?.itemActivation=="number"||i?.quickNavigateConfiguration)&&(d.itemActivation=i?.itemActivation??Tl.SECOND),d.contextKey=r?.contextKey,d.filterValue=_=>_.substring(r?r.prefix.length:0);let g;t&&(g=new RW,u.add(Te.once(d.onWillAccept)(_=>{_.veto(),d.hide()}))),u.add(this.registerPickerListeners(d,n,r,e,i));const m=u.add(new Cp);if(n&&u.add(n.provide(d,m.token,i?.providerOptions)),Te.once(d.onDidHide)(()=>{d.selectedItems.length===0&&m.cancel(),u.dispose(),g?.complete(d.selectedItems.slice(0))}),d.show(),l&&c===e&&(d.valueSelection=l),t)return g?.p}adjustValueSelection(e,t,i){let n;i?.preserveValue?n=[e.value.length,e.value.length]:n=[t?.prefix.length??0,e.value.length],e.valueSelection=n}registerPickerListeners(e,t,i,n,r){const o=new Qe,a=this.visibleQuickAccess={picker:e,descriptor:i,value:n};return o.add(bt(()=>{a===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),o.add(e.onDidChangeValue(l=>{const[c]=this.getOrInstantiateProvider(l,r?.enabledProviderPrefixes);c!==t?this.show(l,{enabledProviderPrefixes:r?.enabledProviderPrefixes,preserveValue:!0,providerOptions:r?.providerOptions}):a.value=l})),i&&o.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(i,e.value)})),o}getOrInstantiateProvider(e,t){const i=this.registry.getQuickAccessProvider(e);if(!i||t&&!t?.includes(i.prefix))return[void 0,void 0];let n=this.mapProviderToDescriptor.get(i);return n||(n=this.instantiationService.createInstance(i.ctor),this.mapProviderToDescriptor.set(i,n)),[n,i]}};Q7=Lue([RP(0,j2),RP(1,hi)],Q7);class U2 extends bu{constructor(e){super(),this._onChange=this._register(new re),this.onChange=this._onChange.event,this._onKeyDown=this._register(new re),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...Yt.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(Xl().setupManagedHover(e.hoverDelegate??Xo("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,i=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),i.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,i=>{if(i.keyCode===10||i.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),i.preventDefault(),i.stopPropagation();return}this._onKeyDown.fire(i)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}var Due=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r};class AH{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}}Due([Qi],AH.prototype,"toString",null);const Eue=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function Tue(s){const e=[];let t=0,i;for(;i=Eue.exec(s);){i.index-t>0&&e.push(s.substring(t,i.index));const[,n,r,,o]=i;o?e.push({label:n,href:r,title:o}):e.push({label:n,href:r}),t=i.index+i[0].length}return t<s.length&&e.push(s.substring(t)),new AH(e)}const nL={},Nue=new Nz("quick-input-button-icon-");function Iue(s){if(!s)return;let e;const t=s.dark.toString();return nL[t]?e=nL[t]:(e=Nue.nextId(),p3(`.${e}, .hc-light .${e}`,`background-image: ${du(s.light||s.dark)}`),p3(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${du(s.dark)}`),nL[t]=e),e}function v1(s,e,t){let i=s.iconClass||Iue(s.iconPath);return s.alwaysVisible&&(i=i?`${i} always-visible`:"always-visible"),{id:e,label:"",tooltip:s.tooltip||"",class:i,enabled:!0,run:t}}function Mue(s,e,t){nr(e);const i=Tue(s);let n=0;for(const r of i.nodes)if(typeof r=="string")e.append(...of(r));else{let o=r.title;!o&&r.href.startsWith("command:")?o=b("executeCommand","Click to execute command '{0}'",r.href.substring(8)):o||(o=r.href);const a=at("a",{href:r.href,title:o,tabIndex:n++},r.label);a.style.textDecoration="underline";const l=m=>{$Q(m)&&zt.stop(m,!0),t.callback(r.href)},c=t.disposables.add(new Rt(a,Ne.CLICK)).event,u=t.disposables.add(new Rt(a,Ne.KEY_DOWN)).event,d=Te.chain(u,m=>m.filter(_=>{const v=new Ni(_);return v.equals(10)||v.equals(3)}));t.disposables.add(rr.addTarget(a));const g=t.disposables.add(new Rt(a,xi.Tap)).event;Te.any(c,g,d)(l,null,t.disposables),e.appendChild(a)}}var Rue=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},AP=function(s,e){return function(t,i){e(t,i,s)}};const PH="inQuickInput",Aue=new Je(PH,!1,b("inQuickInput","Whether keyboard focus is inside the quick input control")),Pue=ni.has(PH),OH="quickInputType",Oue=new Je(OH,void 0,b("quickInputType","The type of the currently visible quick input")),FH="cursorAtEndOfQuickInputBox",Fue=new Je(FH,!1,b("cursorAtEndOfQuickInputBox","Whether the cursor in the quick input is at the end of the input box")),Bue=ni.has(FH),J7={iconClass:Yt.asClassName($e.quickInputBack),tooltip:b("quickInput.back","Back")},kS=class kS extends ve{constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._leftButtons=[],this._rightButtons=[],this._inlineButtons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=kS.noPromptMessage,this._severity=Cn.Ignore,this.onDidTriggerButtonEmitter=this._register(new re),this.onDidHideEmitter=this._register(new re),this.onWillHideEmitter=this._register(new re),this.onDisposeEmitter=this._register(new re),this.visibleDisposables=this._register(new Qe),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!xf;this._ignoreFocusOut=e&&!xf,t&&this.update()}get titleButtons(){return this._leftButtons.length?[...this._leftButtons,this._rightButtons]:this._rightButtons}get buttons(){return[...this._leftButtons,...this._rightButtons,...this._inlineButtons]}set buttons(e){this._leftButtons=e.filter(t=>t===J7),this._rightButtons=e.filter(t=>t!==J7&&t.location!==cy.Inline),this._inlineButtons=e.filter(t=>t.location===cy.Inline),this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=hp.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}willHide(e=hp.Other){this.onWillHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText=" ");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?nr(this.ui.widget,this._widget):nr(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new zf,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const n=this._leftButtons.map((a,l)=>v1(a,`id-${l}`,async()=>this.onDidTriggerButtonEmitter.fire(a)));this.ui.leftActionBar.push(n,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const r=this._rightButtons.map((a,l)=>v1(a,`id-${l}`,async()=>this.onDidTriggerButtonEmitter.fire(a)));this.ui.rightActionBar.push(r,{icon:!0,label:!1}),this.ui.inlineActionBar.clear();const o=this._inlineButtons.map((a,l)=>v1(a,`id-${l}`,async()=>this.onDidTriggerButtonEmitter.fire(a)));this.ui.inlineActionBar.push(o,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const n=this.toggles?.filter(r=>r instanceof U2)??[];this.ui.inputBox.toggles=n}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const i=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==i&&(this._lastValidationMessage=i,nr(this.ui.message),Mue(i,this.ui.message,{callback:n=>{this.ui.linkOpenerDelegate(n)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?b("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Cn.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}};kS.noPromptMessage=b("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");let uy=kS;const LS=class LS extends uy{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new re),this.onWillAcceptEmitter=this._register(new re),this.onDidAcceptEmitter=this._register(new re),this.onDidCustomEmitter=this._register(new re),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=Tl.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new re),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new re),this.onDidTriggerItemButtonEmitter=this._register(new re),this.onDidTriggerSeparatorButtonEmitter=this._register(new re),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this._focusEventBufferer=new K_,this.type="quickPick",this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?kue:this.ui.keyMods}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(Si.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,(e,t)=>t)(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&Rn(e,this._activeItems,(t,i)=>t===i)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&Rn(e,this._selectedItems,(i,n)=>i===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(L8(t)&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||!this.visible||this.selectedItemsToConfirm!==this._selectedItems&&Rn(e,this._selectedItems,(t,i)=>t===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return ge(this.ui.container,Ne.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new Ni(e),i=t.keyCode;this._quickNavigate.keybindings.some(o=>{const a=o.getChords();return a.length>1?!1:a[0].shiftKey&&i===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a[0].altKey&&i===6||a[0].ctrlKey&&i===5||a[0].metaKey&&i===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,i={title:!!this.title||!!this.step||!!this.titleButtons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(i),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let n=this.ariaLabel;!n&&i.inputBox&&(n=this.placeholder||LS.DEFAULT_ARIA_LABEL,this.title&&(n+=` - ${this.title}`)),this.ui.list.ariaLabel!==n&&(this.ui.list.ariaLabel=n??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents(()=>{switch(this.ui.list.setElements(this.items),this.ui.list.shouldLoop=!this.canSelectMany,this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this._itemActivation){case Tl.NONE:this._itemActivation=Tl.FIRST;break;case Tl.SECOND:this.ui.list.focus(Si.Second),this._itemActivation=Tl.FIRST;break;case Tl.LAST:this.ui.list.focus(Si.Last),this._itemActivation=Tl.FIRST;break;default:this.trySelectFirst();break}})),this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",i.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(Si.First)),this.keepScrollPosition&&(this.scrollTop=e)}focus(e){this.ui.list.focus(e),this.canSelectMany&&this.ui.list.domFocus()}accept(e){e&&!this._canAcceptInBackground||this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(e??!1))}};LS.DEFAULT_ARIA_LABEL=b("quickInputBox.ariaLabel","Type to narrow down results.");let hy=LS,Wue=class extends uy{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new re),this.onDidAcceptEmitter=this._register(new re),this.type="inputBox",this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}},e6=class extends d_{constructor(e,t){super("element",!1,i=>this.getOverrideOptions(i),e,t)}getOverrideOptions(e){const t=(Jn(e.content)?e.content.textContent??"":typeof e.content=="string"?e.content:e.content.value).includes(`
`);return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:t,skipFadeInAnimation:!0}}}};e6=Rue([AP(0,Xi),AP(1,rv)],e6);Le.white.toString(),Le.white.toString();class t6 extends ve{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new re),this._onDidEscape=this._register(new re),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const i=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,n=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=n||"",this._element.style.backgroundColor=i||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof t.title=="string"&&this.setTitle(t.title),typeof t.ariaLabel=="string"&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(rr.addTarget(this._element)),[Ne.CLICK,xi.Tap].forEach(r=>{this._register(ge(this._element,r,o=>{if(!this.enabled){zt.stop(o);return}this._onDidClick.fire(o)}))}),this._register(ge(this._element,Ne.KEY_DOWN,r=>{const o=new Ni(r);let a=!1;this.enabled&&(o.equals(3)||o.equals(10))?(this._onDidClick.fire(r),a=!0):o.equals(9)&&(this._onDidEscape.fire(r),this._element.blur(),a=!0),a&&zt.stop(o,!0)})),this._register(ge(this._element,Ne.MOUSE_OVER,r=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(ge(this._element,Ne.MOUSE_OUT,r=>{this.updateBackground(!1)})),this.focusTracker=this._register(s_(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let i of of(e))if(typeof i=="string"){if(i=i.trim(),i==="")continue;const n=document.createElement("span");n.textContent=i,t.push(n)}else t.push(i);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){if(this._label===e||Tm(this._label)&&Tm(e)&&ure(this._label,e))return;this._element.classList.add("monaco-text-button");const t=this.options.supportShortLabel?this._labelElement:this._element;if(Tm(e)){const n=sE(e,{inline:!0});n.dispose();const r=n.element.querySelector("p")?.innerHTML;if(r){const o=WW(r,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});t.innerHTML=o}else nr(t)}else this.options.supportIcons?nr(t,...this.getContentElements(e)):t.textContent=e;let i="";typeof this.options.title=="string"?i=this.options.title:this.options.title&&(i=Cre(e)),this.setTitle(i),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",i),this._label=e}get label(){return this._label}set icon(e){this._element.classList.add(...Yt.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}setTitle(e){!this._hover&&e!==""?this._hover=this._register(Xl().setupManagedHover(this.options.hoverDelegate??Xo("mouse"),this._element,e)):this._hover&&this._hover.update(e)}}class PP{constructor(e,t,i){this.options=t,this.styles=i,this.count=0,this.element=Ge(e,at(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=J5(this.countFormat,this.count),this.element.title=J5(this.titleFormat,this.count),this.element.style.backgroundColor=this.styles.badgeBackground??"",this.element.style.color=this.styles.badgeForeground??"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}const OP="done",FP="active",sL="infinite",rL="infinite-long-running",BP="discrete",DS=class DS extends ve{constructor(e,t){super(),this.progressSignal=this._register(new uu),this.workedVal=0,this.showDelayedScheduler=this._register(new ir(()=>XW(this.element),0)),this.longRunningScheduler=this._register(new ir(()=>this.infiniteLongRunning(),DS.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=t?.progressBarBackground||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(FP,sL,rL,BP),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(OP),this.element.classList.contains(sL)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(BP,OP,rL),this.element.classList.add(FP,sL),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(rL)}getContainer(){return this.element}};DS.LONG_RUNNING_INFINITE_THRESHOLD=1e4;let i6=DS;const Vue=b("caseDescription","Match Case"),zue=b("wordsDescription","Match Whole Word"),Hue=b("regexDescription","Use Regular Expression");class jue extends U2{constructor(e){super({icon:$e.caseSensitive,title:Vue+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Xo("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Uue extends U2{constructor(e){super({icon:$e.wholeWord,title:zue+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Xo("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class $ue extends U2{constructor(e){super({icon:$e.regex,title:Hue+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Xo("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class que{constructor(e,t=0,i=e.length,n=t-1){this.items=e,this.start=t,this.end=i,this.index=n}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class Kue{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new que(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const R0=at;class Gue extends bu{constructor(e,t,i){super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new re),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new re),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=i,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=Ge(e,R0(".monaco-inputbox.idle"));const n=this.options.flexibleHeight?"textarea":"input",r=Ge(this.element,R0(".ibwrapper"));if(this.input=Ge(r,R0(n+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=Ge(r,R0("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new kse(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),Ge(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(l=>this.input.scrollTop=l.scrollTop));const o=this._register(new Rt(e.ownerDocument,"selectionchange")),a=Te.filter(o.event,()=>e.ownerDocument.getSelection()?.anchorNode===r);this._register(a(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new su(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover?this.hover.update(e):this.hover=this._register(Xl().setupManagedHover(Xo("mouse"),this.input,e))}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:g3(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return x8(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){const e=this.input.selectionStart;if(e===null)return null;const t=this.input.selectionEnd??e;return{start:e,end:t}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:i})}showMessage(e,t){if(this.state==="open"&&jr(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const i=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${eu(i.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e?.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=S8(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:n=>{if(!this.message)return null;e=Ge(n,R0(".monaco-inputbox-container")),t();const r={inline:!0,className:"monaco-inputbox-message"},o=this.message.formatContent?Rse(this.message.content,r):Mse(this.message.content,r);o.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return o.style.backgroundColor=a.background??"",o.style.color=a.foreground??"",o.style.border=a.border?`1px solid ${a.border}`:"",Ge(e,o),null},onHide:()=>{this.state="closed"},layout:t});let i;this.message.type===3?i=b("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?i=b("alertWarningMessage","Warning: {0}",this.message.content):i=b("alertInfoMessage","Info: {0}",this.message.content),m_(i),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,i=e.charCodeAt(e.length-1)===10?" ":"";(e+i).replace(/\u000c/g,"")?this.mirror.textContent=e+i:this.mirror.innerText=" ",this.layout()}applyStyles(){const e=this.options.inputBoxStyles,t=e.inputBackground??"",i=e.inputForeground??"",n=e.inputBorder??"";this.element.style.backgroundColor=t,this.element.style.color=i,this.input.style.backgroundColor="inherit",this.input.style.color=i,this.element.style.border=`1px solid ${eu(n,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=g3(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,i=t.selectionStart,n=t.selectionEnd,r=t.value;i!==null&&n!==null&&(this.value=r.substr(0,i)+e+r.substr(n),t.setSelectionRange(i+1,i+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar?.dispose(),super.dispose()}}class Zue extends Gue{constructor(e,t,i){const n=b({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is ⇅ to represent the up and down arrow keys.']}," or {0} for history","⇅"),r=b({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is ⇅ to represent the up and down arrow keys.']}," ({0} for history)","⇅");super(e,t,i),this._onDidFocus=this._register(new re),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new re),this.onDidBlur=this._onDidBlur.event,this.history=new Kue(i.history,100);const o=()=>{if(i.showHistoryHint&&i.showHistoryHint()&&!this.placeholder.endsWith(n)&&!this.placeholder.endsWith(r)&&this.history.getHistory().length){const a=this.placeholder.endsWith(")")?n:r,l=this.placeholder+a;i.showPlaceholderOnFocus&&!x8(this.input)?this.placeholder=l:this.setPlaceHolder(l)}};this.observer=new MutationObserver((a,l)=>{a.forEach(c=>{c.target.textContent||o()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>o()),this.onblur(this.input,()=>{const a=l=>{if(this.placeholder.endsWith(l)){const c=this.placeholder.slice(0,this.placeholder.length-l.length);return i.showPlaceholderOnFocus?this.placeholder=c:this.setPlaceHolder(c),!0}else return!1};a(r)||a(n)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",GC(this.value?this.value:b("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,GC(this.value))}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}const Yue=b("defaultLabel","input");class Xue extends bu{constructor(e,t,i){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new uu),this.additionalToggles=[],this._onDidOptionChange=this._register(new re),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new re),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new re),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new re),this._onKeyUp=this._register(new re),this._onCaseSensitiveKeyDown=this._register(new re),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new re),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||Yue,this.showCommonFindToggles=!!i.showCommonFindToggles;const n=i.appendCaseSensitiveLabel||"",r=i.appendWholeWordsLabel||"",o=i.appendRegexLabel||"",a=i.history||[],l=!!i.flexibleHeight,c=!!i.flexibleWidth,u=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new Zue(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:i.showHistoryHint,flexibleHeight:l,flexibleWidth:c,flexibleMaxHeight:u,inputBoxStyles:i.inputBoxStyles}));const d=this._register(pE());if(this.showCommonFindToggles){this.regex=this._register(new $ue({appendTitle:o,isChecked:!1,hoverDelegate:d,...i.toggleStyles})),this._register(this.regex.onChange(m=>{this._onDidOptionChange.fire(m),!m&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(m=>{this._onRegexKeyDown.fire(m)})),this.wholeWords=this._register(new Uue({appendTitle:r,isChecked:!1,hoverDelegate:d,...i.toggleStyles})),this._register(this.wholeWords.onChange(m=>{this._onDidOptionChange.fire(m),!m&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new jue({appendTitle:n,isChecked:!1,hoverDelegate:d,...i.toggleStyles})),this._register(this.caseSensitive.onChange(m=>{this._onDidOptionChange.fire(m),!m&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(m=>{this._onCaseSensitiveKeyDown.fire(m)}));const g=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,m=>{if(m.equals(15)||m.equals(17)||m.equals(9)){const _=g.indexOf(this.domNode.ownerDocument.activeElement);if(_>=0){let v=-1;m.equals(17)?v=(_+1)%g.length:m.equals(15)&&(_===0?v=g.length-1:v=_-1),m.equals(9)?(g[_].blur(),this.inputBox.focus()):v>=0&&g[v].focus(),zt.stop(m,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(i?.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e?.appendChild(this.domNode),this._register(ge(this.inputBox.inputElement,"compositionstart",g=>{this.imeSessionInProgress=!0})),this._register(ge(this.inputBox.inputElement,"compositionend",g=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,g=>this._onKeyDown.fire(g)),this.onkeyup(this.inputBox.inputElement,g=>this._onKeyUp.fire(g)),this.oninput(this.inputBox.inputElement,g=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,g=>this._onMouseDown.fire(g))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex?.enable(),this.wholeWords?.enable(),this.caseSensitive?.enable();for(const e of this.additionalToggles)e.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex?.disable(),this.wholeWords?.disable(),this.caseSensitive?.disable();for(const e of this.additionalToggles)e.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new Qe;for(const t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(i=>{this._onDidOptionChange.fire(i),!i&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(this.caseSensitive?.width()??0)+(this.wholeWords?.width()??0)+(this.regex?.width()??0)+this.additionalToggles.reduce((t,i)=>t+i.width(),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive?.checked??!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){return this.wholeWords?.checked??!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){return this.regex?.checked??!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){this.caseSensitive?.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}const Que=at;class Jue extends ve{constructor(e,t,i){super(),this.parent=e,this.onKeyDown=r=>Un(this.findInput.inputBox.inputElement,Ne.KEY_DOWN,r),this.onDidChange=r=>this.findInput.onDidChange(r),this.container=Ge(this.parent,Que(".quick-input-box")),this.findInput=this._register(new Xue(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:i}));const n=this.findInput.inputBox.inputElement;n.role="combobox",n.ariaHasPopup="menu",n.ariaAutoComplete="list",n.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===Cn.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===Cn.Info?1:e===Cn.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===Cn.Info?1:e===Cn.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}class ehe{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:ve.None}}renderElement(e,t,i,n){if(i.disposable?.dispose(),!i.data)return;const r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,i.data,n);const o=new Cp,a=r.resolve(e,o.token);i.disposable={dispose:()=>o.cancel()},this.renderer.renderPlaceholder(e,i.data),a.then(l=>this.renderer.renderElement(l,e,i.data,n))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class the{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function ihe(s,e){return{...e,accessibilityProvider:e.accessibilityProvider&&new the(s,e.accessibilityProvider)}}class nhe{constructor(e,t,i,n,r={}){const o=()=>this.model,a=n.map(l=>new ehe(l,o));this.list=new cl(e,t,i,a,ihe(o,r))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Te.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onPointer(){return Te.map(this.list.onPointer,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onDidChangeSelection(){return Te.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:i})=>({elements:e.map(n=>this._model.get(n)),indexes:t,browserEvent:i}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,_r(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}var Ep=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r};const she=!1;var WP;(function(s){s.North="north",s.South="south",s.East="east",s.West="west"})(WP||(WP={}));let rhe=4;const ohe=new re;let ahe=300;const lhe=new re;class NE{constructor(e){this.el=e,this.disposables=new Qe}get onPointerMove(){return this.disposables.add(new Rt(tt(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new Rt(tt(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}Ep([Qi],NE.prototype,"onPointerMove",null);Ep([Qi],NE.prototype,"onPointerUp",null);class IE{get onPointerMove(){return this.disposables.add(new Rt(this.el,xi.Change)).event}get onPointerUp(){return this.disposables.add(new Rt(this.el,xi.End)).event}constructor(e){this.el=e,this.disposables=new Qe}dispose(){this.disposables.dispose()}}Ep([Qi],IE.prototype,"onPointerMove",null);Ep([Qi],IE.prototype,"onPointerUp",null);class dy{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}Ep([Qi],dy.prototype,"onPointerMove",null);Ep([Qi],dy.prototype,"onPointerUp",null);const VP="pointer-events-disabled";class Fo extends ve{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=i=>{this.orthogonalStartDragHandleDisposables.clear(),i!==0&&(this._orthogonalStartDragHandle=Ge(this.el,at(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(bt(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Rt(this._orthogonalStartDragHandle,"mouseenter")).event(()=>Fo.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Rt(this._orthogonalStartDragHandle,"mouseleave")).event(()=>Fo.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=i=>{this.orthogonalEndDragHandleDisposables.clear(),i!==0&&(this._orthogonalEndDragHandle=Ge(this.el,at(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(bt(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Rt(this._orthogonalEndDragHandle,"mouseenter")).event(()=>Fo.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Rt(this._orthogonalEndDragHandle,"mouseleave")).event(()=>Fo.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,i){super(),this.hoverDelay=ahe,this.hoverDelayer=this._register(new Y_(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new re),this._onDidStart=this._register(new re),this._onDidChange=this._register(new re),this._onDidReset=this._register(new re),this._onDidEnd=this._register(new re),this.orthogonalStartSashDisposables=this._register(new Qe),this.orthogonalStartDragHandleDisposables=this._register(new Qe),this.orthogonalEndSashDisposables=this._register(new Qe),this.orthogonalEndDragHandleDisposables=this._register(new Qe),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=Ge(e,at(".monaco-sash")),i.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${i.orthogonalEdge}`),qt&&this.el.classList.add("mac");const n=this._register(new Rt(this.el,"mousedown")).event;this._register(n(d=>this.onPointerStart(d,new NE(e)),this));const r=this._register(new Rt(this.el,"dblclick")).event;this._register(r(this.onPointerDoublePress,this));const o=this._register(new Rt(this.el,"mouseenter")).event;this._register(o(()=>Fo.onMouseEnter(this)));const a=this._register(new Rt(this.el,"mouseleave")).event;this._register(a(()=>Fo.onMouseLeave(this))),this._register(rr.addTarget(this.el));const l=this._register(new Rt(this.el,xi.Start)).event;this._register(l(d=>this.onPointerStart(d,new IE(this.el)),this));const c=this._register(new Rt(this.el,xi.Tap)).event;let u;this._register(c(d=>{if(u){clearTimeout(u),u=void 0,this.onPointerDoublePress(d);return}clearTimeout(u),u=setTimeout(()=>u=void 0,250)},this)),typeof i.size=="number"?(this.size=i.size,i.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=rhe,this._register(ohe.event(d=>{this.size=d,this.layout()}))),this._register(lhe.event(d=>this.hoverDelay=d)),this.layoutProvider=t,this.orthogonalStartSash=i.orthogonalStartSash,this.orthogonalEndSash=i.orthogonalEndSash,this.orientation=i.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",she),this.layout()}onPointerStart(e,t){zt.stop(e);let i=!1;if(!e.__orthogonalSashEvent){const _=this.getOrthogonalSash(e);_&&(i=!0,e.__orthogonalSashEvent=!0,_.onPointerStart(e,new dy(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new dy(t))),!this.state)return;const n=this.el.ownerDocument.getElementsByTagName("iframe");for(const _ of n)_.classList.add(VP);const r=e.pageX,o=e.pageY,a=e.altKey,l={startX:r,currentX:r,startY:o,currentY:o,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=Ca(this.el),u=()=>{let _="";i?_="all-scroll":this.orientation===1?this.state===1?_="s-resize":this.state===2?_="n-resize":_=qt?"row-resize":"ns-resize":this.state===1?_="e-resize":this.state===2?_="w-resize":_=qt?"col-resize":"ew-resize",c.textContent=`* { cursor: ${_} !important; }`},d=new Qe;u(),i||this.onDidEnablementChange.event(u,null,d);const g=_=>{zt.stop(_,!1);const v={startX:r,currentX:_.pageX,startY:o,currentY:_.pageY,altKey:a};this._onDidChange.fire(v)},m=_=>{zt.stop(_,!1),c.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),d.dispose();for(const v of n)v.classList.remove(VP)};t.onPointerMove(g,null,d),t.onPointerUp(m,null,d),d.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&Fo.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&Fo.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Fo.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){const t=e.initialTarget??e.target;if(!(!t||!Jn(t))&&t.classList.contains("orthogonal-drag-handle"))return t.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const che={separatorBorder:Le.transparent};class BH{set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){if(e!==this.visible){e?(this.size=vr(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{this.view.setVisible?.(e)}catch(i){console.error("Splitview: Failed to set visible view"),console.error(i)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,i,n){this.container=e,this.view=t,this.disposable=n,this._cachedVisibleSize=void 0,typeof i=="number"?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(i){console.error("Splitview: Failed to layout view"),console.error(i)}}dispose(){this.disposable.dispose()}}class uhe extends BH{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class hhe extends BH{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var Lc;(function(s){s[s.Idle=0]="Idle",s[s.Busy=1]="Busy"})(Lc||(Lc={}));var zP;(function(s){s.Distribute={type:"distribute"};function e(n){return{type:"split",index:n}}s.Split=e;function t(n){return{type:"auto",index:n}}s.Auto=t;function i(n){return{type:"invisible",cachedVisibleSize:n}}s.Invisible=i})(zP||(zP={}));class dhe extends ve{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=Lc.Idle,this._onDidSashChange=this._register(new re),this._onDidSashReset=this._register(new re),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=t.orientation??0,this.inverseAltBehavior=t.inverseAltBehavior??!1,this.proportionalLayout=t.proportionalLayout??!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=Ge(this.el,at(".sash-container")),this.viewContainer=at(".split-view-container"),this.scrollable=this._register(new xp({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:n=>Kr(tt(this.el),n)})),this.scrollableElement=this._register(new T2(this.viewContainer,{vertical:this.orientation===0?t.scrollbarVisibility??1:2,horizontal:this.orientation===1?t.scrollbarVisibility??1:2},this.scrollable));const i=this._register(new Rt(this.viewContainer,"scroll")).event;this._register(i(n=>{const r=this.scrollableElement.getScrollPosition(),o=Math.abs(this.viewContainer.scrollLeft-r.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,a=Math.abs(this.viewContainer.scrollTop-r.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(o!==void 0||a!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:o,scrollTop:a})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(n=>{n.scrollTopChanged&&(this.viewContainer.scrollTop=n.scrollTop),n.scrollLeftChanged&&(this.viewContainer.scrollLeft=n.scrollLeft)})),Ge(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||che),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((n,r)=>{const o=Uo(n.visible)||n.visible?n.size:{type:"invisible",cachedVisibleSize:n.size},a=n.view;this.doAddView(a,o,r,!0)}),this._contentSize=this.viewItems.reduce((n,r)=>n+r.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,i=this.viewItems.length,n){this.doAddView(e,t,i,n)}layout(e,t){const i=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let n=0;for(let r=0;r<this.viewItems.length;r++){const o=this.viewItems[r],a=this.proportions[r];typeof a=="number"?n+=a:e-=o.size}for(let r=0;r<this.viewItems.length;r++){const o=this.viewItems[r],a=this.proportions[r];typeof a=="number"&&n>0&&(o.size=vr(Math.round(a*e/n),o.minimumSize,o.maximumSize))}}else{const n=_r(this.viewItems.length),r=n.filter(a=>this.viewItems[a].priority===1),o=n.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-i,void 0,r,o)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:i}){for(const a of this.viewItems)a.enabled=!1;const n=this.sashItems.findIndex(a=>a.sash===e),r=Vl(ge(this.el.ownerDocument.body,"keydown",a=>o(this.sashDragState.current,a.altKey)),ge(this.el.ownerDocument.body,"keyup",()=>o(this.sashDragState.current,!1))),o=(a,l)=>{const c=this.viewItems.map(_=>_.size);let u=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(n===this.sashItems.length-1){const v=this.viewItems[n];u=(v.minimumSize-v.size)/2,d=(v.maximumSize-v.size)/2}else{const v=this.viewItems[n+1];u=(v.size-v.maximumSize)/2,d=(v.size-v.minimumSize)/2}let g,m;if(!l){const _=_r(n,-1),v=_r(n+1,this.viewItems.length),w=_.reduce((O,F)=>O+(this.viewItems[F].minimumSize-c[F]),0),y=_.reduce((O,F)=>O+(this.viewItems[F].viewMaximumSize-c[F]),0),S=v.length===0?Number.POSITIVE_INFINITY:v.reduce((O,F)=>O+(c[F]-this.viewItems[F].minimumSize),0),k=v.length===0?Number.NEGATIVE_INFINITY:v.reduce((O,F)=>O+(c[F]-this.viewItems[F].viewMaximumSize),0),L=Math.max(w,k),T=Math.min(S,y),A=this.findFirstSnapIndex(_),I=this.findFirstSnapIndex(v);if(typeof A=="number"){const O=this.viewItems[A],F=Math.floor(O.viewMinimumSize/2);g={index:A,limitDelta:O.visible?L-F:L+F,size:O.size}}if(typeof I=="number"){const O=this.viewItems[I],F=Math.floor(O.viewMinimumSize/2);m={index:I,limitDelta:O.visible?T+F:T-F,size:O.size}}}this.sashDragState={start:a,current:a,index:n,sizes:c,minDelta:u,maxDelta:d,alt:l,snapBefore:g,snapAfter:m,disposable:r}};o(t,i)}onSashChange({current:e}){const{index:t,start:i,sizes:n,alt:r,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const u=e-i,d=this.resize(t,u,n,void 0,void 0,o,a,l,c);if(r){const g=t===this.sashItems.length-1,m=this.viewItems.map(k=>k.size),_=g?t:t+1,v=this.viewItems[_],w=v.size-v.maximumSize,y=v.size-v.minimumSize,S=g?t-1:t+1;this.resize(S,-d,m,void 0,void 0,w,y)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const i=this.viewItems.indexOf(e);i<0||i>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=vr(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([i],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==Lc.Idle)throw new Error("Cant modify splitview");this.state=Lc.Busy;try{const i=_r(this.viewItems.length).filter(a=>a!==e),n=[...i.filter(a=>this.viewItems[a].priority===1),e],r=i.filter(a=>this.viewItems[a].priority===2),o=this.viewItems[e];t=Math.round(t),t=vr(t,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=t,this.relayout(n,r)}finally{this.state=Lc.Idle}}}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const i=Math.floor(t/e.length);for(const a of e)a.size=vr(i,a.minimumSize,a.maximumSize);const n=_r(this.viewItems.length),r=n.filter(a=>this.viewItems[a].priority===1),o=n.filter(a=>this.viewItems[a].priority===2);this.relayout(r,o)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,i=this.viewItems.length,n){if(this.state!==Lc.Idle)throw new Error("Cant modify splitview");this.state=Lc.Busy;try{const r=at(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(r):this.viewContainer.insertBefore(r,this.viewContainer.children.item(i));const o=e.onDidChange(g=>this.onViewChange(u,g)),a=bt(()=>r.remove()),l=Vl(o,a);let c;typeof t=="number"?c=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize);const u=this.orientation===0?new uhe(r,e,c,l):new hhe(r,e,c,l);if(this.viewItems.splice(i,0,u),this.viewItems.length>1){const g={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},m=this.orientation===0?new Fo(this.sashContainer,{getHorizontalSashTop:O=>this.getSashPosition(O),getHorizontalSashWidth:this.getSashOrthogonalSize},{...g,orientation:1}):new Fo(this.sashContainer,{getVerticalSashLeft:O=>this.getSashPosition(O),getVerticalSashHeight:this.getSashOrthogonalSize},{...g,orientation:0}),_=this.orientation===0?O=>({sash:m,start:O.startY,current:O.currentY,alt:O.altKey}):O=>({sash:m,start:O.startX,current:O.currentX,alt:O.altKey}),w=Te.map(m.onDidStart,_)(this.onSashStart,this),S=Te.map(m.onDidChange,_)(this.onSashChange,this),L=Te.map(m.onDidEnd,()=>this.sashItems.findIndex(O=>O.sash===m))(this.onSashEnd,this),T=m.onDidReset(()=>{const O=this.sashItems.findIndex(ie=>ie.sash===m),F=_r(O,-1),J=_r(O+1,this.viewItems.length),Y=this.findFirstSnapIndex(F),G=this.findFirstSnapIndex(J);typeof Y=="number"&&!this.viewItems[Y].visible||typeof G=="number"&&!this.viewItems[G].visible||this._onDidSashReset.fire(O)}),A=Vl(w,S,L,T,m),I={sash:m,disposable:A};this.sashItems.splice(i-1,0,I)}r.appendChild(e.element);let d;typeof t!="number"&&t.type==="split"&&(d=[t.index]),n||this.relayout([i],d),!n&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}finally{this.state=Lc.Idle}}relayout(e,t){const i=this.viewItems.reduce((n,r)=>n+r.size,0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,i=this.viewItems.map(u=>u.size),n,r,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const u=_r(e,-1),d=_r(e+1,this.viewItems.length);if(r)for(const I of r)rk(u,I),rk(d,I);if(n)for(const I of n)Eb(u,I),Eb(d,I);const g=u.map(I=>this.viewItems[I]),m=u.map(I=>i[I]),_=d.map(I=>this.viewItems[I]),v=d.map(I=>i[I]),w=u.reduce((I,O)=>I+(this.viewItems[O].minimumSize-i[O]),0),y=u.reduce((I,O)=>I+(this.viewItems[O].maximumSize-i[O]),0),S=d.length===0?Number.POSITIVE_INFINITY:d.reduce((I,O)=>I+(i[O]-this.viewItems[O].minimumSize),0),k=d.length===0?Number.NEGATIVE_INFINITY:d.reduce((I,O)=>I+(i[O]-this.viewItems[O].maximumSize),0),L=Math.max(w,k,o),T=Math.min(S,y,a);let A=!1;if(l){const I=this.viewItems[l.index],O=t>=l.limitDelta;A=O!==I.visible,I.setVisible(O,l.size)}if(!A&&c){const I=this.viewItems[c.index],O=t<c.limitDelta;A=O!==I.visible,I.setVisible(O,c.size)}if(A)return this.resize(e,t,i,n,r,o,a);t=vr(t,L,T);for(let I=0,O=t;I<g.length;I++){const F=g[I],J=vr(m[I]+O,F.minimumSize,F.maximumSize),Y=J-m[I];O-=Y,F.size=J}for(let I=0,O=t;I<_.length;I++){const F=_[I],J=vr(v[I]-O,F.minimumSize,F.maximumSize),Y=J-v[I];O+=Y,F.size=J}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let i=this.size-t;const n=_r(this.viewItems.length-1,-1),r=n.filter(a=>this.viewItems[a].priority===1),o=n.filter(a=>this.viewItems[a].priority===2);for(const a of o)rk(n,a);for(const a of r)Eb(n,a);typeof e=="number"&&Eb(n,e);for(let a=0;i!==0&&a<n.length;a++){const l=this.viewItems[n[a]],c=vr(l.size+i,l.minimumSize,l.maximumSize),u=c-l.size;i-=u,l.size=c}}layoutViews(){this._contentSize=this.viewItems.reduce((t,i)=>t+i.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const i=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),n=[...this.viewItems].reverse();e=!1;const r=n.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const o=n.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],u=this.viewItems[l];a+=u.size;const d=!(t[l]&&o[l+1]),g=!(i[l]&&r[l+1]);if(d&&g){const m=_r(l,-1),_=_r(l+1,this.viewItems.length),v=this.findFirstSnapIndex(m),w=this.findFirstSnapIndex(_),y=typeof v=="number"&&!this.viewItems[v].visible,S=typeof w=="number"&&!this.viewItems[w].visible;y&&r[l]&&(a>0||this.startSnappingEnabled)?c.state=1:S&&t[l]&&(a<this._contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else d&&!g?c.state=1:!d&&g?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const i=this.viewItems[t];if(i.visible&&i.snap)return t}for(const t of e){const i=this.viewItems[t];if(i.visible&&i.maximumSize-i.minimumSize>0)return;if(!i.visible&&i.snap)return t}}areViewsDistributed(){let e,t;for(const i of this.viewItems)if(e=e===void 0?i.size:Math.min(e,i.size),t=t===void 0?i.size:Math.max(t,i.size),t-e>2)return!1;return!0}dispose(){this.sashDragState?.disposable.dispose(),ms(this.viewItems),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[],super.dispose()}}const ES=class ES{constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=ES.TemplateId,this.renderedTemplates=new Set;const n=new Map(t.map(r=>[r.templateId,r]));this.renderers=[];for(const r of e){const o=n.get(r.templateId);if(!o)throw new Error(`Table cell renderer for template id ${r.templateId} not found.`);this.renderers.push(o)}}renderTemplate(e){const t=Ge(e,at(".monaco-table-tr")),i=[],n=[];for(let o=0;o<this.columns.length;o++){const a=this.renderers[o],l=Ge(t,at(".monaco-table-td",{"data-col-index":o}));l.style.width=`${this.getColumnSize(o)}px`,i.push(l),n.push(a.renderTemplate(l))}const r={container:e,cellContainers:i,cellTemplateData:n};return this.renderedTemplates.add(r),r}renderElement(e,t,i,n){for(let r=0;r<this.columns.length;r++){const a=this.columns[r].project(e);this.renderers[r].renderElement(a,t,i.cellTemplateData[r],n)}}disposeElement(e,t,i,n){for(let r=0;r<this.columns.length;r++){const o=this.renderers[r];if(o.disposeElement){const l=this.columns[r].project(e);o.disposeElement(l,t,i.cellTemplateData[r],n)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);el(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}};ES.TemplateId="row";let fy=ES;function fhe(s){return{getHeight(e){return s.getHeight(e)},getTemplateId(){return fy.TemplateId}}}class ghe extends ve{get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??Number.POSITIVE_INFINITY}get onDidChange(){return this.column.onDidChangeWidthConstraints??Te.None}constructor(e,t){super(),this.column=e,this.index=t,this._onDidLayout=new re,this.onDidLayout=this._onDidLayout.event,this.element=at(".monaco-table-th",{"data-col-index":t},e.label),e.tooltip&&this._register(Xl().setupManagedHover(Xo("mouse"),this.element,e.tooltip))}layout(e){this._onDidLayout.fire([this.index,e])}}const TS=class TS{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,i,n,r,o){this.virtualDelegate=i,this.columns=n,this.domId=`table_id_${++TS.InstanceCount}`,this.disposables=new Qe,this.cachedWidth=0,this.cachedHeight=0,this.domNode=Ge(t,at(`.monaco-table.${this.domId}`));const a=n.map((u,d)=>this.disposables.add(new ghe(u,d))),l={size:a.reduce((u,d)=>u+d.column.weight,0),views:a.map(u=>({size:u.column.weight,view:u}))};this.splitview=this.disposables.add(new dhe(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;const c=new fy(n,r,u=>this.splitview.getViewSize(u));this.list=this.disposables.add(new cl(e,this.domNode,fhe(i),[c],o)),Te.any(...a.map(u=>u.onDidLayout))(([u,d])=>c.layoutColumn(u,d),null,this.disposables),this.splitview.onDidSashReset(u=>{const d=n.reduce((m,_)=>m+_.weight,0),g=n[u].weight/d*this.cachedWidth;this.splitview.resizeView(u,g)},null,this.disposables),this.styleElement=Ca(this.domNode),this.style(Eae)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,i=[]){this.list.splice(e,t,i)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}};TS.InstanceCount=0;let n6=TS;var ho;(function(s){s[s.Expanded=0]="Expanded",s[s.Collapsed=1]="Collapsed",s[s.PreserveOrExpanded=2]="PreserveOrExpanded",s[s.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(ho||(ho={}));var tf;(function(s){s[s.Unknown=0]="Unknown",s[s.Twistie=1]="Twistie",s[s.Element=2]="Element",s[s.Filter=3]="Filter"})(tf||(tf={}));class po extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class ME{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function RE(s){return typeof s=="object"&&"visibility"in s&&"data"in s}function x_(s){switch(s){case!0:return 1;case!1:return 0;default:return s}}function oL(s){return typeof s.collapsible=="boolean"}class mhe{constructor(e,t,i,n={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new K_,this._onDidChangeCollapseState=new re,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new re,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new re,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new Y_(TW),this.collapseByDefault=typeof n.collapseByDefault>"u"?!1:n.collapseByDefault,this.allowNonCollapsibleParents=n.allowNonCollapsibleParents??!1,this.filter=n.filter,this.autoExpandSingleChildren=typeof n.autoExpandSingleChildren>"u"?!1:n.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,i=ei.empty(),n={}){if(e.length===0)throw new po(this.user,"Invalid tree location");n.diffIdentityProvider?this.spliceSmart(n.diffIdentityProvider,e,t,i,n):this.spliceSimple(e,t,i,n)}spliceSmart(e,t,i,n=ei.empty(),r,o=r.diffDepth??0){const{parentNode:a}=this.getParentNodeWithListIndex(t);if(!a.lastDiffIds)return this.spliceSimple(t,i,n,r);const l=[...n],c=t[t.length-1],u=new zc({getElements:()=>a.lastDiffIds},{getElements:()=>[...a.children.slice(0,c),...l,...a.children.slice(c+i)].map(v=>e.getId(v.element).toString())}).ComputeDiff(!1);if(u.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(t,i,l,r);const d=t.slice(0,-1),g=(v,w,y)=>{if(o>0)for(let S=0;S<y;S++)v--,w--,this.spliceSmart(e,[...d,v,0],Number.MAX_SAFE_INTEGER,l[w].children,r,o-1)};let m=Math.min(a.children.length,c+i),_=l.length;for(const v of u.changes.sort((w,y)=>y.originalStart-w.originalStart))g(m,_,m-(v.originalStart+v.originalLength)),m=v.originalStart,_=v.modifiedStart-c,this.spliceSimple([...d,m],v.originalLength,ei.slice(l,_,_+v.modifiedLength),r);g(m,_,m)}spliceSimple(e,t,i=ei.empty(),{onDidCreateNode:n,onDidDeleteNode:r,diffIdentityProvider:o}){const{parentNode:a,listIndex:l,revealed:c,visible:u}=this.getParentNodeWithListIndex(e),d=[],g=ei.map(i,T=>this.createTreeNode(T,a,a.visible?1:0,c,d,n)),m=e[e.length-1];let _=0;for(let T=m;T>=0&&T<a.children.length;T--){const A=a.children[T];if(A.visible){_=A.visibleChildIndex;break}}const v=[];let w=0,y=0;for(const T of g)v.push(T),y+=T.renderNodeCount,T.visible&&(T.visibleChildIndex=_+w++);const S=hM(a.children,m,t,v);o?a.lastDiffIds?hM(a.lastDiffIds,m,t,v.map(T=>o.getId(T.element).toString())):a.lastDiffIds=a.children.map(T=>o.getId(T.element).toString()):a.lastDiffIds=void 0;let k=0;for(const T of S)T.visible&&k++;if(k!==0)for(let T=m+v.length;T<a.children.length;T++){const A=a.children[T];A.visible&&(A.visibleChildIndex-=k)}if(a.visibleChildrenCount+=w-k,c&&u){const T=S.reduce((A,I)=>A+(I.visible?I.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,y-T),this.list.splice(l,T,d)}if(S.length>0&&r){const T=A=>{r(A),A.children.forEach(T)};S.forEach(T)}this._onDidSplice.fire({insertedNodes:v,deletedNodes:S});let L=a;for(;L;){if(L.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}L=L.parent}}rerender(e){if(e.length===0)throw new po(this.user,"Invalid tree location");const{node:t,listIndex:i,revealed:n}=this.getTreeNodeWithListIndex(e);t.visible&&n&&this.list.splice(i,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:i,revealed:n}=this.getTreeNodeWithListIndex(e);return i&&n?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsible);const n={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,n))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsed);const r={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}_setCollapseState(e,t){const{node:i,listIndex:n,revealed:r}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(i,n,r,t);if(i!==this.root&&this.autoExpandSingleChildren&&o&&!oL(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let a=-1;for(let l=0;l<i.children.length;l++)if(i.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return o}_setListNodeCollapseState(e,t,i,n){const r=this._setNodeCollapseState(e,n,!1);if(!i||!e.visible||!r)return r;const o=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=o-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),r}_setNodeCollapseState(e,t,i){let n;if(e===this.root?n=!1:(oL(t)?(n=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(n=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):n=!1,n&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!oL(t)&&t.recursive)for(const r of e.children)n=this._setNodeCollapseState(r,t,!0)||n;return n}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,i,n,r,o){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,i);a.visibility=l,n&&r.push(a);const c=e.children||ei.empty(),u=n&&l!==0&&!a.collapsed;let d=0,g=1;for(const m of c){const _=this.createTreeNode(m,a,l,u,r,o);a.children.push(_),g+=_.renderNodeCount,_.visible&&(_.visibleChildIndex=d++)}return this.allowNonCollapsibleParents||(a.collapsible=a.collapsible||a.children.length>0),a.visibleChildrenCount=d,a.visible=l===2?d>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=g):(a.renderNodeCount=0,n&&r.pop()),o?.(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i,n=!0){let r;if(e!==this.root){if(r=this._filterNode(e,t),r===0)return e.visible=!1,e.renderNodeCount=0,!1;n&&i.push(e)}const o=i.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||r!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,r,i,n&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=r===2?a:r===1,e.visibility=r),e.visible?e.collapsed||(e.renderNodeCount+=i.length-o):(e.renderNodeCount=0,n&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const i=this.filter?this.filter.filter(e.element,t):1;return typeof i=="boolean"?(e.filterData=void 0,i?1:0):RE(i)?(e.filterData=i.data,x_(i.visibility)):(e.filterData=void 0,x_(i))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[i,...n]=e;return i<0||i>t.children.length?!1:this.hasTreeNode(n,t.children[i])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[i,...n]=e;if(i<0||i>t.children.length)throw new po(this.user,"Invalid tree location");return this.getTreeNode(n,t.children[i])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:i,revealed:n,visible:r}=this.getParentNodeWithListIndex(e),o=e[e.length-1];if(o<0||o>t.children.length)throw new po(this.user,"Invalid tree location");const a=t.children[o];return{node:a,listIndex:i,revealed:n,visible:r&&a.visible}}getParentNodeWithListIndex(e,t=this.root,i=0,n=!0,r=!0){const[o,...a]=e;if(o<0||o>t.children.length)throw new po(this.user,"Invalid tree location");for(let l=0;l<o;l++)i+=t.children[l].renderNodeCount;return n=n&&!t.collapsed,r=r&&t.visible,a.length===0?{parentNode:t,listIndex:i,revealed:n,visible:r}:this.getParentNodeWithListIndex(a,t.children[o],i+1,n,r)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:pZ(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class phe extends cv{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function aL(s){return s instanceof cv?new phe(s):s}class _he{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=ve.None,this.disposables=new Qe}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){this.dnd.onDragStart?.(aL(e),t)}onDragOver(e,t,i,n,r,o=!0){const a=this.dnd.onDragOver(aL(e),t&&t.element,i,n,r),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return a;if(l&&typeof a!="boolean"&&a.autoExpand&&(this.autoExpandDisposable=o3(()=>{const m=this.modelProvider(),_=m.getNodeLocation(t);m.isCollapsed(_)&&m.setCollapsed(_,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof a=="boolean"||!a.accept||typeof a.bubble>"u"||a.feedback){if(!o){const m=typeof a=="boolean"?a:a.accept,_=typeof a=="boolean"?void 0:a.effect;return{accept:m,effect:_,feedback:[i]}}return a}if(a.bubble===1){const m=this.modelProvider(),_=m.getNodeLocation(t),v=m.getParentNodeLocation(_),w=m.getNode(v),y=v&&m.getListIndex(v);return this.onDragOver(e,w,y,n,r,!1)}const c=this.modelProvider(),u=c.getNodeLocation(t),d=c.getListIndex(u),g=c.getListRenderCount(u);return{...a,feedback:_r(d,d+g)}}drop(e,t,i,n,r){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(aL(e),t&&t.element,i,n,r)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function vhe(s,e){return e&&{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new _he(s,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element})},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})}},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getSetSize(t){const i=s(),n=i.getNodeLocation(t),r=i.getParentNodeLocation(n);return i.getNode(r).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}}}class AE{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight?.(e.element,t)}}var dp;(function(s){s.None="none",s.OnHover="onHover",s.Always="always"})(dp||(dp={}));class bhe{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new Qe,this.onDidChange=Te.forEach(e,i=>this._elements=i,this.disposables)}dispose(){this.disposables.dispose()}}const V1=class V1{constructor(e,t,i,n,r,o={}){this.renderer=e,this.modelProvider=t,this.activeNodes=n,this.renderedIndentGuides=r,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=V1.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=ve.None,this.disposables=new Qe,this.templateId=e.templateId,this.updateOptions(o),Te.map(i,a=>a.node)(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState?.(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"){const t=vr(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[i,n]of this.renderedNodes)this.renderTreeElement(i,n)}}if(typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==dp.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[i,n]of this.renderedNodes)this._renderIndentGuides(i,n);if(this.indentGuidesDisposable.dispose(),t){const i=new Qe;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,i),this.indentGuidesDisposable=i,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=Ge(e,at(".monaco-tl-row")),i=Ge(t,at(".monaco-tl-indent")),n=Ge(t,at(".monaco-tl-twistie")),r=Ge(t,at(".monaco-tl-contents")),o=this.renderer.renderTemplate(r);return{container:e,indent:i,twistie:n,indentGuidesDisposable:ve.None,templateData:o}}renderElement(e,t,i,n){this.renderedNodes.set(e,i),this.renderedElements.set(e.element,e),this.renderTreeElement(e,i),this.renderer.renderElement(e,t,i.templateData,n)}disposeElement(e,t,i,n){i.indentGuidesDisposable.dispose(),this.renderer.disposeElement?.(e,t,i.templateData,n),typeof n=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const i=V1.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${i}px`,t.indent.style.width=`${i+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...Yt.asClassNameArray($e.treeItemExpanded));let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(...Yt.asClassNameArray($e.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(el(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const i=new Qe,n=this.modelProvider();for(;;){const r=n.getNodeLocation(e),o=n.getParentNodeLocation(r);if(!o)break;const a=n.getNode(o),l=at(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(a)&&l.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(l):t.indent.insertBefore(l,t.indent.firstElementChild),this.renderedIndentGuides.add(a,l),i.add(bt(()=>this.renderedIndentGuides.delete(a,l))),e=a}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,i=this.modelProvider();e.forEach(n=>{const r=i.getNodeLocation(n);try{const o=i.getParentNodeLocation(r);n.collapsible&&n.children.length>0&&!n.collapsed?t.add(n):o&&t.add(i.getNode(o))}catch{}}),this.activeIndentNodes.forEach(n=>{t.has(n)||this.renderedIndentGuides.forEach(n,r=>r.classList.remove("active"))}),t.forEach(n=>{this.activeIndentNodes.has(n)||this.renderedIndentGuides.forEach(n,r=>r.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),ms(this.disposables)}};V1.DefaultIndent=8;let s6=V1;class whe{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(e,t,i){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new Qe,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let i=1;if(this._filter){const o=this._filter.filter(e,t);if(typeof o=="boolean"?i=o?1:0:RE(o)?i=x_(o.visibility):i=o,i===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:Em.Default,visibility:i};const n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),r=Array.isArray(n)?n:[n];for(const o of r){const a=o&&o.toString();if(typeof a>"u")return{data:Em.Default,visibility:i};let l;if(this.tree.findMatchType===Rf.Contiguous){const c=a.toLowerCase().indexOf(this._lowercasePattern);if(c>-1){l=[Number.MAX_SAFE_INTEGER,0];for(let u=this._lowercasePattern.length;u>0;u--)l.push(c+u-1)}}else l=Dz(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,r.length===1?{data:l,visibility:i}:{data:{label:a,score:l},visibility:i}}return this.tree.findMode===Kc.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:Em.Default,visibility:i}}reset(){this._totalCount=0,this._matchCount=0}dispose(){ms(this.disposables)}}var Kc;(function(s){s[s.Highlight=0]="Highlight",s[s.Filter=1]="Filter"})(Kc||(Kc={}));var Rf;(function(s){s[s.Fuzzy=0]="Fuzzy",s[s.Contiguous=1]="Contiguous"})(Rf||(Rf={}));class Che{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,i,n,r,o={}){this.tree=e,this.view=i,this.filter=n,this.contextViewProvider=r,this.options=o,this._pattern="",this.width=0,this._onDidChangeMode=new re,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new re,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new re,this._onDidChangeOpenState=new re,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new Qe,this.disposables=new Qe,this._mode=e.options.defaultFindMode??Kc.Highlight,this._matchType=e.options.defaultFindMatchType??Rf.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&e?(m_(b("replFindNoResults","No results")),this.tree.options.showNotFoundMessage??!0?this.widget?.showMessage({type:2,content:b("not found","No elements found.")}):this.widget?.showMessage({type:2})):(this.widget?.clearMessage(),this.pattern&&m_(b("replFindResults","{0} results",this.filter.matchCount)))}shouldAllowFocus(e){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!Em.isDefault(e.filterData)}layout(e){this.width=e,this.widget?.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}function yhe(s,e){return s.position===e.position&&WH(s,e)}function WH(s,e){return s.node.element===e.node.element&&s.startIndex===e.startIndex&&s.height===e.height&&s.endIndex===e.endIndex}class She{constructor(e=[]){this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return Rn(this.stickyNodes,e.stickyNodes,yhe)}lastNodePartiallyVisible(){if(this.count===0)return!1;const e=this.stickyNodes[this.count-1];if(this.count===1)return e.position!==0;const t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!Rn(this.stickyNodes,e.stickyNodes,WH)||this.count===0)return!1;const t=this.stickyNodes[this.count-1],i=e.stickyNodes[e.count-1];return t.position!==i.position}}class xhe{constrainStickyScrollNodes(e,t,i){for(let n=0;n<e.length;n++){const r=e[n];if(r.position+r.height>i||n>=t)return e.slice(0,n)}return e}}class HP extends ve{constructor(e,t,i,n,r,o={}){super(),this.tree=e,this.model=t,this.view=i,this.treeDelegate=r,this.maxWidgetViewRatio=.4;const a=this.validateStickySettings(o);this.stickyScrollMaxItemCount=a.stickyScrollMaxItemCount,this.stickyScrollDelegate=o.stickyScrollDelegate??new xhe,this._widget=this._register(new khe(i.getScrollableElement(),i,e,n,r,o.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(i.onDidScroll(()=>this.update())),this._register(i.onDidChangeContentHeight(()=>this.update())),this._register(e.onDidChangeCollapseState(()=>this.update())),this.update()}get height(){return this._widget.height}getNodeAtHeight(e){let t;if(e===0?t=this.view.firstVisibleIndex:t=this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){const e=this.getNodeAtHeight(0);if(!e||this.tree.scrollTop===0){this._widget.setState(void 0);return}const t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){const t=[];let i=e,n=0,r=this.getNextStickyNode(i,void 0,n);for(;r&&(t.push(r),n+=r.height,!(t.length<=this.stickyScrollMaxItemCount&&(i=this.getNextVisibleNode(r),!i)));)r=this.getNextStickyNode(i,r.node,n);const o=this.constrainStickyNodes(t);return o.length?new She(o):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,i){const n=this.getAncestorUnderPrevious(e,t);if(n&&!(n===e&&(!this.nodeIsUncollapsedParent(e)||this.nodeTopAlignsWithStickyNodesBottom(e,i))))return this.createStickyScrollNode(n,i)}nodeTopAlignsWithStickyNodesBottom(e,t){const i=this.getNodeIndex(e),n=this.view.getElementTop(i),r=t;return this.view.scrollTop===n-r}createStickyScrollNode(e,t){const i=this.treeDelegate.getHeight(e),{startIndex:n,endIndex:r}=this.getNodeRange(e),o=this.calculateStickyNodePosition(r,t,i);return{node:e,position:o,height:i,startIndex:n,endIndex:r}}getAncestorUnderPrevious(e,t=void 0){let i=e,n=this.getParentNode(i);for(;n;){if(n===t)return i;i=n,n=this.getParentNode(i)}if(t===void 0)return i}calculateStickyNodePosition(e,t,i){let n=this.view.getRelativeTop(e);if(n===null&&this.view.firstVisibleIndex===e&&e+1<this.view.length){const c=this.treeDelegate.getHeight(this.view.element(e)),u=this.view.getRelativeTop(e+1);n=u?u-c/this.view.renderHeight:null}if(n===null)return t;const r=this.view.element(e),o=this.treeDelegate.getHeight(r),l=n*this.view.renderHeight+o;return t+i>l&&t<=l?l-i:t}constrainStickyNodes(e){if(e.length===0)return[];const t=this.view.renderHeight*this.maxWidgetViewRatio,i=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&i.position+i.height<=t)return e;const n=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!n.length)return[];const r=n[n.length-1];if(n.length>this.stickyScrollMaxItemCount||r.position+r.height>t)throw new Error("stickyScrollDelegate violates constraints");return n}getParentNode(e){const t=this.model.getNodeLocation(e),i=this.model.getParentNodeLocation(t);return i?this.model.getNode(i):void 0}nodeIsUncollapsedParent(e){const t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){const t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){const t=this.model.getNodeLocation(e),i=this.model.getListIndex(t);if(i<0)throw new Error("Node not found in tree");const n=this.model.getListRenderCount(t),r=i+n-1;return{startIndex:i,endIndex:r}}nodePositionTopBelowWidget(e){const t=[];let i=this.getParentNode(e);for(;i;)t.push(i),i=this.getParentNode(i);let n=0;for(let r=0;r<t.length&&r<this.stickyScrollMaxItemCount;r++)n+=this.treeDelegate.getHeight(t[r]);return n}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(e={}){if(!e.stickyScrollMaxItemCount)return;const t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}validateStickySettings(e){let t=7;return typeof e.stickyScrollMaxItemCount=="number"&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}}class khe{constructor(e,t,i,n,r,o){this.view=t,this.tree=i,this.treeRenderers=n,this.treeDelegate=r,this.accessibilityProvider=o,this._previousElements=[],this._previousStateDisposables=new Qe,this._rootDomNode=at(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);const a=at(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(a),this.stickyScrollFocus=new Lhe(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;const e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}setState(e){const t=!!this._previousState&&this._previousState.count>0,i=!!e&&e.count>0;if(!t&&!i||t&&i&&this._previousState.equal(e))return;if(t!==i&&this.setVisible(i),!i){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}const n=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${n.position}px`;else{this._previousStateDisposables.clear();const r=Array(e.count);for(let o=e.count-1;o>=0;o--){const a=e.stickyNodes[o],{element:l,disposable:c}=this.createElement(a,o,e.count);r[o]=l,this._rootDomNode.appendChild(l),this._previousStateDisposables.add(c)}this.stickyScrollFocus.updateElements(r,e),this._previousElements=r}this._previousState=e,this._rootDomNode.style.height=`${n.position+n.height}px`}createElement(e,t,i){const n=e.startIndex,r=document.createElement("div");r.style.top=`${e.position}px`,this.tree.options.setRowHeight!==!1&&(r.style.height=`${e.height}px`),this.tree.options.setRowLineHeight!==!1&&(r.style.lineHeight=`${e.height}px`),r.classList.add("monaco-tree-sticky-row"),r.classList.add("monaco-list-row"),r.setAttribute("data-index",`${n}`),r.setAttribute("data-parity",n%2===0?"even":"odd"),r.setAttribute("id",this.view.getElementID(n));const o=this.setAccessibilityAttributes(r,e.node.element,t,i),a=this.treeDelegate.getTemplateId(e.node),l=this.treeRenderers.find(g=>g.templateId===a);if(!l)throw new Error(`No renderer found for template id ${a}`);let c=e.node;c===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(c=new Proxy(e.node,{}));const u=l.renderTemplate(r);l.renderElement(c,e.startIndex,u,e.height);const d=bt(()=>{o.dispose(),l.disposeElement(c,e.startIndex,u,e.height),l.disposeTemplate(u),r.remove()});return{element:r,disposable:d}}setAccessibilityAttributes(e,t,i,n){if(!this.accessibilityProvider)return ve.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,i,n))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,i))),this.accessibilityProvider.getRole&&e.setAttribute("role",this.accessibilityProvider.getRole(t)??"treeitem");const r=this.accessibilityProvider.getAriaLabel(t),o=r&&typeof r!="string"?r:JC(r),a=ti(c=>{const u=c.readObservable(o);u?e.setAttribute("aria-label",u):e.removeAttribute("aria-label")});typeof r=="string"||r&&e.setAttribute("aria-label",r.get());const l=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return typeof l=="number"&&e.setAttribute("aria-level",`${l}`),e.setAttribute("aria-selected",String(!1)),a}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}}class Lhe extends ve{get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new re,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new re,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this._register(ge(this.container,"focus",()=>this.onFocus())),this._register(ge(this.container,"blur",()=>this.onBlur())),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(i=>this.onKeyDown(i))),this._register(this.view.onMouseDown(i=>this.onMouseDown(i))),this._register(this.view.onContextMenu(i=>this.handleContextMenu(i)))}handleContextMenu(e){const t=e.browserEvent.target;if(!__(t)&&!h1(t)){this.focusedLast()&&this.view.domFocus();return}if(!Rc(e.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const o=this.state.stickyNodes.findIndex(a=>a.node.element===e.element?.element);if(o===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(o);return}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const n=this.state.stickyNodes[this.focusedIndex].node.element,r=this.elements[this.focusedIndex];this._onContextMenu.fire({element:n,anchor:r,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state){if(e.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if(e.key==="ArrowDown"||e.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){const t=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([t]),this.scrollNodeUnderWidget(t,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}}onMouseDown(e){const t=e.browserEvent.target;!__(t)&&!h1(t)||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&t.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw new Error("Sticky scroll focus received illigel state");const i=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){const n=vr(i,0,t.count-1);this.setFocus(n)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){const t=this.state;if(!t)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){const i=t.stickyNodes[e];this.scrollNodeUnderWidget(i.endIndex+1,t)}}scrollNodeUnderWidget(e,t){const i=t.stickyNodes[t.count-1],n=t.count>1?t.stickyNodes[t.count-2]:void 0,r=this.view.getElementTop(e),o=n?n.position+n.height+i.height:i.height;this.view.scrollTop=r-o}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains("sticky-scroll-focused"):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw new Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}toggleCurrentElementActiveFocus(e){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}toggleElementActiveFocus(e,t){e.classList.toggle("focused",t)}toggleElementPassiveFocus(e,t){e.classList.toggle("passive-focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function lw(s){let e=tf.Unknown;return wk(s.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=tf.Twistie:wk(s.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=tf.Element:wk(s.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=tf.Filter),{browserEvent:s.browserEvent,element:s.element?s.element.element:null,target:e}}function Dhe(s){const e=__(s.browserEvent.target);return{element:s.element?s.element.element:null,browserEvent:s.browserEvent,anchor:s.anchor,isStickyScroll:e}}function Yw(s,e){e(s),s.children.forEach(t=>Yw(t,e))}class lL{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new re,this.onDidChange=this._onDidChange.event}set(e,t){!t?.__forceEvent&&Rn(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const n=this;this._onDidChange.fire({get elements(){return n.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=u=>l.delete(u);t.forEach(u=>Yw(u,c)),this.set([...l.values()]);return}const i=new Set,n=l=>i.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>Yw(l,n));const r=new Map,o=l=>r.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>Yw(l,o));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!i.has(c))a.push(l);else{const d=r.get(c);d&&d.visible&&a.push(d)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class Ehe extends Yz{constructor(e,t,i){super(e),this.tree=t,this.stickyScrollProvider=i}onViewPointer(e){if(qz(e.browserEvent.target)||Eh(e.browserEvent.target)||K0(e.browserEvent.target)||e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const i=e.browserEvent.target,n=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,r=h1(e.browserEvent.target);let o=!1;if(r?o=!0:typeof this.tree.expandOnlyOnTwistieClick=="function"?o=this.tree.expandOnlyOnTwistieClick(t.element):o=!!this.tree.expandOnlyOnTwistieClick,r)this.handleStickyScrollMouseEvent(e,t);else{if(o&&!n&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e)}if(t.collapsible&&(!r||n)){const a=this.tree.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),this.tree.toggleCollapsed(a,l),n){e.browserEvent.isHandledByList=!0;return}}r||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(yae(e.browserEvent.target)||Sae(e.browserEvent.target))return;const i=this.stickyScrollProvider();if(!i)throw new Error("Sticky scroll controller not found");const n=this.list.indexOf(t),r=this.list.getElementTop(n),o=i.nodePositionTopBelowWidget(t);this.tree.scrollTop=r-o,this.list.domFocus(),this.list.setFocus([n]),this.list.setSelection([n])}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}onMouseDown(e){const t=e.browserEvent.target;if(!__(t)&&!h1(t)){super.onMouseDown(e);return}}onContextMenu(e){const t=e.browserEvent.target;if(!__(t)&&!h1(t)){super.onContextMenu(e);return}}}class The extends cl{constructor(e,t,i,n,r,o,a,l){super(e,t,i,n,l),this.focusTrait=r,this.selectionTrait=o,this.anchorTrait=a}createMouseController(e){return new Ehe(this,e.tree,e.stickyScrollProvider)}splice(e,t,i=[]){if(super.splice(e,t,i),i.length===0)return;const n=[],r=[];let o;i.forEach((a,l)=>{this.focusTrait.has(a)&&n.push(e+l),this.selectionTrait.has(a)&&r.push(e+l),this.anchorTrait.has(a)&&(o=e+l)}),n.length>0&&super.setFocus(Sf([...super.getFocus(),...n])),r.length>0&&super.setSelection(Sf([...super.getSelection(),...r])),typeof o=="number"&&super.setAnchor(o)}setFocus(e,t,i=!1){super.setFocus(e,t),i||this.focusTrait.set(e.map(n=>this.element(n)),t)}setSelection(e,t,i=!1){super.setSelection(e,t),i||this.selectionTrait.set(e.map(n=>this.element(n)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class VH{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Te.filter(Te.map(this.view.onMouseDblClick,lw),e=>e.target!==tf.Filter)}get onMouseOver(){return Te.map(this.view.onMouseOver,lw)}get onMouseOut(){return Te.map(this.view.onMouseOut,lw)}get onContextMenu(){return Te.any(Te.filter(Te.map(this.view.onContextMenu,Dhe),e=>!e.isStickyScroll),this.stickyScrollController?.onContextMenu??Te.None)}get onPointer(){return Te.map(this.view.onPointer,lw)}get onKeyDown(){return this.view.onKeyDown}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return Te.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){return this.findController?.mode??Kc.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){return this.findController?.matchType??Rf.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,i,n,r={}){this._user=e,this._options=r,this.eventBufferer=new K_,this.onDidChangeFindOpenState=Te.None,this.onDidChangeStickyScrollFocused=Te.None,this.disposables=new Qe,this._onWillRefilter=new re,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new re,this.treeDelegate=new AE(i);const o=new bM,a=new bM,l=this.disposables.add(new bhe(a.event)),c=new CV;this.renderers=n.map(_=>new s6(_,()=>this.model,o.event,l,c,r));for(const _ of this.renderers)this.disposables.add(_);let u;r.keyboardNavigationLabelProvider&&(u=new whe(this,r.keyboardNavigationLabelProvider,r.filter),r={...r,filter:u},this.disposables.add(u)),this.focus=new lL(()=>this.view.getFocusedElements()[0],r.identityProvider),this.selection=new lL(()=>this.view.getSelectedElements()[0],r.identityProvider),this.anchor=new lL(()=>this.view.getAnchorElement(),r.identityProvider),this.view=new The(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...vhe(()=>this.model,r),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(e,this.view,r),o.input=this.model.onDidChangeCollapseState;const d=Te.forEach(this.model.onDidSplice,_=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(_),this.selection.onDidModelSplice(_)})},this.disposables);d(()=>null,null,this.disposables);const g=this.disposables.add(new re),m=this.disposables.add(new Y_(0));if(this.disposables.add(Te.any(d,this.focus.onDidChange,this.selection.onDidChange)(()=>{m.trigger(()=>{const _=new Set;for(const v of this.focus.getNodes())_.add(v);for(const v of this.selection.getNodes())_.add(v);g.fire([..._.values()])})})),a.input=g.event,r.keyboardSupport!==!1){const _=Te.chain(this.view.onKeyDown,v=>v.filter(w=>!Eh(w.target)).map(w=>new Ni(w)));Te.chain(_,v=>v.filter(w=>w.keyCode===15))(this.onLeftArrow,this,this.disposables),Te.chain(_,v=>v.filter(w=>w.keyCode===17))(this.onRightArrow,this,this.disposables),Te.chain(_,v=>v.filter(w=>w.keyCode===10))(this.onSpace,this,this.disposables)}if((r.findWidgetEnabled??!0)&&r.keyboardNavigationLabelProvider&&r.contextViewProvider){const _=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new Che(this,this.model,this.view,u,r.contextViewProvider,_),this.focusNavigationFilter=v=>this.findController.shouldAllowFocus(v),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=Te.None,this.onDidChangeFindMatchType=Te.None;r.enableStickyScroll&&(this.stickyScrollController=new HP(this,this.model,this.view,this.renderers,this.treeDelegate,r),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=Ca(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===dp.Always)}updateOptions(e={}){this._options={...this._options,...e};for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(this._options),this.findController?.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===dp.Always)}get options(){return this._options}updateStickyScroll(e){!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new HP(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=Te.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),this.stickyScrollController?.updateOptions(e)}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}domFocus(){this.stickyScrollController?.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}layout(e,t){this.view.layout(e,t),vp(t)&&this.findController?.layout(t)}style(e){const t=`.${this.view.domId}`,i=[];e.treeIndentGuidesStroke&&(i.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),i.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`));const n=e.treeStickyScrollBackground??e.listBackground;n&&(i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${n}; }`),i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${n}; }`)),e.treeStickyScrollBorder&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${e.treeStickyScrollBorder}; }`),e.treeStickyScrollShadow&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${e.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),e.listFocusForeground&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const r=eu(e.listFocusAndSelectionOutline,eu(e.listSelectionOutline,e.listFocusOutline??""));r&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${r}; outline-offset: -1px;}`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=i.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(r=>this.model.getNode(r));this.selection.set(i,t);const n=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setSelection(n,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(r=>this.model.getNode(r));this.focus.set(i,t);const n=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setFocus(n,t,!0)})}focusNext(e=1,t=!1,i,n=Rc(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(e,t,i,n)}focusPrevious(e=1,t=!1,i,n=Rc(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(e,t,i,n)}focusNextPage(e,t=Rc(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(e,t)}focusPreviousPage(e,t=Rc(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(e,t,()=>this.stickyScrollController?.height??0)}focusLast(e,t=Rc(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusLast(e,t)}focusFirst(e,t=Rc(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const i=this.model.getListIndex(e);if(i!==-1)if(!this.stickyScrollController)this.view.reveal(i,t);else{const n=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(i,t,n)}}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!0)){const o=this.model.getParentNodeLocation(n);if(!o)return;const a=this.model.getListIndex(o);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!1)){if(!i.children.some(l=>l.visible))return;const[o]=this.view.getFocus(),a=o+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],n=this.model.getNodeLocation(i),r=e.browserEvent.altKey;this.model.setCollapsed(n,void 0,r)}dispose(){ms(this.disposables),this.stickyScrollController?.dispose(),this.view.dispose()}}class PE{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new mhe(e,t,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare(n,r){return i.sorter.compare(n.element,r.element)}}),this.identityProvider=i.identityProvider}setChildren(e,t=ei.empty(),i={}){const n=this.getElementLocation(e);this._setChildren(n,this.preserveCollapseState(t),i)}_setChildren(e,t=ei.empty(),i){const n=new Set,r=new Set,o=l=>{if(l.element===null)return;const c=l;if(n.add(c.element),this.nodes.set(c.element,c),this.identityProvider){const u=this.identityProvider.getId(c.element).toString();r.add(u),this.nodesByIdentity.set(u,c)}i.onDidCreateNode?.(c)},a=l=>{if(l.element===null)return;const c=l;if(n.has(c.element)||this.nodes.delete(c.element),this.identityProvider){const u=this.identityProvider.getId(c.element).toString();r.has(u)||this.nodesByIdentity.delete(u)}i.onDidDeleteNode?.(c)};this.model.splice([...e,0],Number.MAX_VALUE,t,{...i,onDidCreateNode:o,onDidDeleteNode:a})}preserveCollapseState(e=ei.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),ei.map(e,t=>{let i=this.nodes.get(t.element);if(!i&&this.identityProvider){const o=this.identityProvider.getId(t.element).toString();i=this.nodesByIdentity.get(o)}if(!i){let o;return typeof t.collapsed>"u"?o=void 0:t.collapsed===ho.Collapsed||t.collapsed===ho.PreserveOrCollapsed?o=!0:t.collapsed===ho.Expanded||t.collapsed===ho.PreserveOrExpanded?o=!1:o=!!t.collapsed,{...t,children:this.preserveCollapseState(t.children),collapsed:o}}const n=typeof t.collapsible=="boolean"?t.collapsible:i.collapsible;let r;return typeof t.collapsed>"u"||t.collapsed===ho.PreserveOrCollapsed||t.collapsed===ho.PreserveOrExpanded?r=i.collapsed:t.collapsed===ho.Collapsed?r=!0:t.collapsed===ho.Expanded?r=!1:r=!!t.collapsed,{...t,collapsible:n,collapsed:r,children:this.preserveCollapseState(t.children)}})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const n=this.getElementLocation(e);return this.model.setCollapsed(n,t,i)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new po(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new po(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new po(this.user,`Tree element not found: ${e}`);const i=this.model.getNodeLocation(t),n=this.model.getParentNodeLocation(i);return this.model.getNode(n).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new po(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function Xw(s){const e=[s.element],t=s.incompressible||!1;return{element:{elements:e,incompressible:t},children:ei.map(ei.from(s.children),Xw),collapsible:s.collapsible,collapsed:s.collapsed}}function Qw(s){const e=[s.element],t=s.incompressible||!1;let i,n;for(;[n,i]=ei.consume(ei.from(s.children),2),!(n.length!==1||n[0].incompressible);)s=n[0],e.push(s.element);return{element:{elements:e,incompressible:t},children:ei.map(ei.concat(n,i),Qw),collapsible:s.collapsible,collapsed:s.collapsed}}function r6(s,e=0){let t;return e<s.element.elements.length-1?t=[r6(s,e+1)]:t=ei.map(ei.from(s.children),i=>r6(i,0)),e===0&&s.element.incompressible?{element:s.element.elements[e],children:t,incompressible:!0,collapsible:s.collapsible,collapsed:s.collapsed}:{element:s.element.elements[e],children:t,collapsible:s.collapsible,collapsed:s.collapsed}}function jP(s){return r6(s,0)}function zH(s,e,t){return s.element===e?{...s,children:t}:{...s,children:ei.map(ei.from(s.children),i=>zH(i,e,t))}}const Nhe=s=>({getId(e){return e.elements.map(t=>s.getId(t).toString()).join("\0")}});class Ihe{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new PE(e,t,i),this.enabled=typeof i.compressionEnabled>"u"?!0:i.compressionEnabled,this.identityProvider=i.identityProvider}setChildren(e,t=ei.empty(),i){const n=i.diffIdentityProvider&&Nhe(i.diffIdentityProvider);if(e===null){const _=ei.map(t,this.enabled?Qw:Xw);this._setChildren(null,_,{diffIdentityProvider:n,diffDepth:1/0});return}const r=this.nodes.get(e);if(!r)throw new po(this.user,"Unknown compressed tree node");const o=this.model.getNode(r),a=this.model.getParentNodeLocation(r),l=this.model.getNode(a),c=jP(o),u=zH(c,e,t),d=(this.enabled?Qw:Xw)(u),g=i.diffIdentityProvider?(_,v)=>i.diffIdentityProvider.getId(_)===i.diffIdentityProvider.getId(v):void 0;if(Rn(d.element.elements,o.element.elements,g)){this._setChildren(r,d.children||ei.empty(),{diffIdentityProvider:n,diffDepth:1});return}const m=l.children.map(_=>_===o?d:_);this._setChildren(l.element,m,{diffIdentityProvider:n,diffDepth:o.depth-l.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const i=this.model.getNode().children,n=ei.map(i,jP),r=ei.map(n,e?Qw:Xw);this._setChildren(null,r,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){const n=new Set,r=a=>{for(const l of a.element.elements)n.add(l),this.nodes.set(l,a.element)},o=a=>{for(const l of a.element.elements)n.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,{...i,onDidCreateNode:r,onDidDeleteNode:o})}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return i===null?null:i.elements[i.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const n=this.getCompressedNode(e);return this.model.setCollapsed(n,t,i)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new po(this.user,`Tree element not found: ${e}`);return t}}const Mhe=s=>s[s.length-1];class OE{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new OE(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}function Rhe(s,e){return{splice(t,i,n){e.splice(t,i,n.map(r=>s.map(r)))},updateElementHeight(t,i){e.updateElementHeight(t,i)}}}function Ahe(s,e){return{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(s(t))}},sorter:e.sorter&&{compare(t,i){return e.sorter.compare(t.elements[0],i.elements[0])}},filter:e.filter&&{filter(t,i){return e.filter.filter(s(t),i)}}}}class Phe{get onDidSplice(){return Te.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(i=>this.nodeMapper.map(i)),deletedNodes:t.map(i=>this.nodeMapper.map(i))}))}get onDidChangeCollapseState(){return Te.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return Te.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t,i={}){this.rootRef=null,this.elementMapper=i.elementMapper||Mhe;const n=r=>this.elementMapper(r.elements);this.nodeMapper=new ME(r=>new OE(n,r)),this.model=new Ihe(e,Rhe(this.nodeMapper,t),Ahe(n,i))}setChildren(e,t=ei.empty(),i={}){this.model.setChildren(e,t,i)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var Ohe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r};class FE extends VH{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,i,n,r={}){super(e,t,i,n,r),this.user=e}setChildren(e,t=ei.empty(),i){this.model.setChildren(e,t,i)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,i){return new PE(e,t,i)}}class HH{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,i){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=i,this.templateId=i.templateId,i.onDidChangeTwistieState&&(this.onDidChangeTwistieState=i.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){let r=this.stickyScrollDelegate.getCompressedNode(e);r||(r=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),r.element.elements.length===1?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,n)):(i.compressedTreeNode=r,this.renderer.renderCompressedElements(r,t,i.data,n))}disposeElement(e,t,i,n){i.compressedTreeNode?this.renderer.disposeCompressedElements?.(i.compressedTreeNode,t,i.data,n):this.renderer.disposeElement?.(e,t,i.data,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}Ohe([Qi],HH.prototype,"compressedTreeNodeProvider",null);class Fhe{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,i){if(this.compressedStickyNodes.clear(),e.length===0)return[];for(let n=0;n<e.length;n++){const r=e[n],o=r.position+r.height;if(n+1<e.length&&o+e[n+1].height>i||n>=t-1&&t<e.length){const l=e.slice(0,n),c=e.slice(n),u=this.compressStickyNodes(c);return[...l,u]}}return e}compressStickyNodes(e){if(e.length===0)throw new Error("Can't compress empty sticky nodes");const t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];const i=[];for(let c=0;c<e.length;c++){const u=e[c],d=t.getCompressedTreeNode(u.node.element);if(d.element){if(c!==0&&d.element.incompressible)break;i.push(...d.element.elements)}}if(i.length<2)return e[0];const n=e[e.length-1],r={elements:i,incompressible:!1},o={...n.node,children:[],element:r},a=new Proxy(e[0].node,{}),l={node:a,startIndex:e[0].startIndex,endIndex:n.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(a,o),l}}function Bhe(s,e){return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let i;try{i=s().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return i.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(i.element.elements)}}}}class jH extends FE{constructor(e,t,i,n,r={}){const o=()=>this,a=new Fhe(()=>this.model),l=n.map(c=>new HH(o,a,c));super(e,t,i,l,{...Bhe(o,r),stickyScrollDelegate:a})}setChildren(e,t=ei.empty(),i){this.model.setChildren(e,t,i)}createModel(e,t,i){return new Phe(e,t,i)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}function cL(s){return{...s,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function o6(s,e){return e.parent?e.parent===s?!0:o6(s,e.parent):!1}function Whe(s,e){return s===e||o6(s,e)||o6(e,s)}class BE{get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new BE(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class Vhe{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...Yt.asClassNameArray($e.treeItemLoading)),!0):(t.classList.remove(...Yt.asClassNameArray($e.treeItemLoading)),!1)}disposeElement(e,t,i,n){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function UP(s){return{browserEvent:s.browserEvent,elements:s.elements.map(e=>e.element)}}function $P(s){return{browserEvent:s.browserEvent,element:s.element&&s.element.element,target:s.target}}class zhe extends cv{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function uL(s){return s instanceof cv?new zhe(s):s}class Hhe{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){this.dnd.onDragStart?.(uL(e),t)}onDragOver(e,t,i,n,r,o=!0){return this.dnd.onDragOver(uL(e),t&&t.element,i,n,r)}drop(e,t,i,n,r){this.dnd.drop(uL(e),t&&t.element,i,n,r)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.dnd.dispose()}}function UH(s){return s&&{...s,collapseByDefault:!0,identityProvider:s.identityProvider&&{getId(e){return s.identityProvider.getId(e.element)}},dnd:s.dnd&&new Hhe(s.dnd),multipleSelectionController:s.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return s.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element})},isSelectionRangeChangeEvent(e){return s.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})}},accessibilityProvider:s.accessibilityProvider&&{...s.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:s.accessibilityProvider.getRole?e=>s.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:s.accessibilityProvider.isChecked?e=>!!s.accessibilityProvider?.isChecked(e.element):void 0,getAriaLabel(e){return s.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return s.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:s.accessibilityProvider.getWidgetRole?()=>s.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:s.accessibilityProvider.getAriaLevel&&(e=>s.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:s.accessibilityProvider.getActiveDescendantId&&(e=>s.accessibilityProvider.getActiveDescendantId(e.element))},filter:s.filter&&{filter(e,t){return s.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:s.keyboardNavigationLabelProvider&&{...s.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(e){return s.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof s.expandOnlyOnTwistieClick>"u"?void 0:typeof s.expandOnlyOnTwistieClick!="function"?s.expandOnlyOnTwistieClick:e=>s.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:e=>e.hasChildren&&e.stale?1:typeof s.defaultFindVisibility=="number"?s.defaultFindVisibility:typeof s.defaultFindVisibility>"u"?2:s.defaultFindVisibility(e.element)}}function a6(s,e){e(s),s.children.forEach(t=>a6(t,e))}class $H{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return Te.map(this.tree.onDidChangeFocus,UP)}get onDidChangeSelection(){return Te.map(this.tree.onDidChangeSelection,UP)}get onMouseDblClick(){return Te.map(this.tree.onMouseDblClick,$P)}get onPointer(){return Te.map(this.tree.onPointer,$P)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,i,n,r,o={}){this.user=e,this.dataSource=r,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new re,this._onDidChangeNodeSlowState=new re,this.nodeMapper=new ME(a=>new BE(a)),this.disposables=new Qe,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren>"u"?!1:o.autoExpandSingleChildren,this.sorter=o.sorter,this.getDefaultCollapseState=a=>o.collapseByDefault?o.collapseByDefault(a)?ho.PreserveOrCollapsed:ho.PreserveOrExpanded:void 0,this.tree=this.createTree(e,t,i,n,o),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=cL({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,i,n,r){const o=new AE(i),a=n.map(c=>new Vhe(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=UH(r)||{};return new FE(e,t,o,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach(n=>n.cancel()),this.refreshPromises.clear(),this.root.element=e;const i=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)}async _updateChildren(e=this.root.element,t=!0,i=!1,n,r){if(typeof this.root.element>"u")throw new po(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Te.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(await this.refreshAndRenderNode(o,t,n,r),i)try{this.tree.rerender(o)}catch{}}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(i)}collapse(e,t=!1){const i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}async expand(e,t=!1){if(typeof this.root.element>"u")throw new po(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Te.toPromise(this._onDidRender.event));const i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i)||(i.refreshPromise&&(await this.root.refreshPromise,await Te.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i)))return!1;const n=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(await this.root.refreshPromise,await Te.toPromise(this._onDidRender.event)),n}setSelection(e,t){const i=e.map(n=>this.getDataNode(n));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const i=e.map(n=>this.getDataNode(n));this.tree.setFocus(i,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getFirstElementChild(t===this.root?null:t);return i&&i.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new po(this.user,`Data tree node not found: ${e}`);return t}async refreshAndRenderNode(e,t,i,n){await this.refreshNode(e,t,i),!this.disposables.isDisposed&&this.render(e,i,n)}async refreshNode(e,t,i){let n;if(this.subTreeRefreshPromises.forEach((r,o)=>{!n&&Whe(o,e)&&(n=r.then(()=>this.refreshNode(e,t,i)))}),n)return n;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,this.setChildren(e,[],t,i);return}return this.doRefreshSubTree(e,t,i)}async doRefreshSubTree(e,t,i){let n;e.refreshPromise=new Promise(r=>n=r),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const r=await this.doRefreshNode(e,t,i);e.stale=!1,await a3.settled(r.map(o=>this.doRefreshSubTree(o,t,i)))}finally{n()}}async doRefreshNode(e,t,i){e.hasChildren=!!this.dataSource.hasChildren(e.element);let n;if(!e.hasChildren)n=Promise.resolve(ei.empty());else{const r=this.doGetChildren(e);if(dM(r))n=Promise.resolve(r);else{const o=n_(800);o.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),n=r.finally(()=>o.cancel())}}try{const r=await n;return this.setChildren(e,r,t,i)}catch(r){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),$_(r))return[];throw r}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const i=this.dataSource.getChildren(e.element);return dM(i)?this.processChildren(i):(t=NW(async()=>this.processChildren(await i)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(_i))}setChildren(e,t,i,n){const r=[...t];if(e.children.length===0&&r.length===0)return[];const o=new Map,a=new Map;for(const u of e.children)o.set(u.element,u),this.identityProvider&&a.set(u.id,{node:u,collapsed:this.tree.hasElement(u)&&this.tree.isCollapsed(u)});const l=[],c=r.map(u=>{const d=!!this.dataSource.hasChildren(u);if(!this.identityProvider){const v=cL({element:u,parent:e,hasChildren:d,defaultCollapseState:this.getDefaultCollapseState(u)});return d&&v.defaultCollapseState===ho.PreserveOrExpanded&&l.push(v),v}const g=this.identityProvider.getId(u).toString(),m=a.get(g);if(m){const v=m.node;return o.delete(v.element),this.nodes.delete(v.element),this.nodes.set(u,v),v.element=u,v.hasChildren=d,i?m.collapsed?(v.children.forEach(w=>a6(w,y=>this.nodes.delete(y.element))),v.children.splice(0,v.children.length),v.stale=!0):l.push(v):d&&!m.collapsed&&l.push(v),v}const _=cL({element:u,parent:e,id:g,hasChildren:d,defaultCollapseState:this.getDefaultCollapseState(u)});return n&&n.viewState.focus&&n.viewState.focus.indexOf(g)>-1&&n.focus.push(_),n&&n.viewState.selection&&n.viewState.selection.indexOf(g)>-1&&n.selection.push(_),(n&&n.viewState.expanded&&n.viewState.expanded.indexOf(g)>-1||d&&_.defaultCollapseState===ho.PreserveOrExpanded)&&l.push(_),_});for(const u of o.values())a6(u,d=>this.nodes.delete(d.element));for(const u of c)this.nodes.set(u.element,u);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].forceExpanded=!0,l.push(c[0])),l}render(e,t,i){const n=e.children.map(o=>this.asTreeElement(o,t)),r=i&&{...i,diffIdentityProvider:i.diffIdentityProvider&&{getId(o){return i.diffIdentityProvider.getId(o.element)}}};this.tree.setChildren(e===this.root?null:e,n,r),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?i=!1:e.forceExpanded?(i=!1,e.forceExpanded=!1):i=e.defaultCollapseState,{element:e,children:e.hasChildren?ei.map(e.children,n=>this.asTreeElement(n,t)):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose(),this.tree.dispose()}}class WE{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new WE(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class jhe{constructor(e,t,i,n){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderCompressedElements(e,t,i,n){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...Yt.asClassNameArray($e.treeItemLoading)),!0):(t.classList.remove(...Yt.asClassNameArray($e.treeItemLoading)),!1)}disposeElement(e,t,i,n){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,i.templateData,n)}disposeCompressedElements(e,t,i,n){this.renderer.disposeCompressedElements?.(this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=ms(this.disposables)}}function Uhe(s){const e=s&&UH(s);return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(t){return s.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(i=>i.element))}}}}class $he extends $H{constructor(e,t,i,n,r,o,a={}){super(e,t,i,r,o,a),this.compressionDelegate=n,this.compressibleNodeMapper=new ME(l=>new WE(l)),this.filter=a.filter}createTree(e,t,i,n,r){const o=new AE(i),a=n.map(c=>new jhe(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=Uhe(r)||{};return new jH(e,t,o,a,l)}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t,i){if(!this.identityProvider)return super.render(e,t);const n=m=>this.identityProvider.getId(m).toString(),r=m=>{const _=new Set;for(const v of m){const w=this.tree.getCompressedTreeNode(v===this.root?null:v);if(w.element)for(const y of w.element.elements)_.add(n(y.element))}return _},o=r(this.tree.getSelection()),a=r(this.tree.getFocus());super.render(e,t,i);const l=this.getSelection();let c=!1;const u=this.getFocus();let d=!1;const g=m=>{const _=m.element;if(_)for(let v=0;v<_.elements.length;v++){const w=n(_.elements[v].element),y=_.elements[_.elements.length-1].element;o.has(w)&&l.indexOf(y)===-1&&(l.push(y),c=!0),a.has(w)&&u.indexOf(y)===-1&&(u.push(y),d=!0)}m.children.forEach(g)};g(this.tree.getCompressedTreeNode(e===this.root?null:e)),c&&this.setSelection(l),d&&this.setFocus(u)}processChildren(e){return this.filter&&(e=ei.filter(e,t=>{const i=this.filter.filter(t,1),n=qhe(i);if(n===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return n===1})),super.processChildren(e)}}function qhe(s){return typeof s=="boolean"?s?1:0:RE(s)?x_(s.visibility):x_(s)}class Khe extends VH{constructor(e,t,i,n,r,o={}){super(e,t,i,n,o),this.user=e,this.dataSource=r,this.identityProvider=o.identityProvider}createModel(e,t,i){return new PE(e,t,i)}}new Je("isMac",qt,b("isMac","Whether the operating system is macOS"));new Je("isLinux",xr,b("isLinux","Whether the operating system is Linux"));new Je("isWindows",$r,b("isWindows","Whether the operating system is Windows"));new Je("isWeb",bp,b("isWeb","Whether the platform is a web browser"));new Je("isMacNative",qt&&!bp,b("isMacNative","Whether the operating system is macOS on a non-browser platform"));new Je("isIOS",xf,b("isIOS","Whether the operating system is iOS"));new Je("isMobile",XB,b("isMobile","Whether the platform is a mobile web browser"));new Je("isDevelopment",!1,!0);new Je("productQualityType","",b("productQualityType","Quality type of VS Code"));const qH="inputFocus",Ghe=new Je(qH,!1,b("inputFocus","Whether keyboard focus is inside an input box"));var Cu=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Li=function(s,e){return function(t,i){e(t,i,s)}};const Ql=Ut("listService");class Zhe{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new Qe,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){e!==this._lastFocusedWidget&&(this._lastFocusedWidget?.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,this._lastFocusedWidget?.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new Xz(Ca(),"").style(Dp)),this.lists.some(n=>n.widget===e))throw new Error("Cannot register the same widget multiple times");const i={widget:e,extraContextKeys:t};return this.lists.push(i),x8(e.getHTMLElement())&&this.setLastFocusedList(e),Vl(e.onDidFocus(()=>this.setLastFocusedList(e)),bt(()=>this.lists.splice(this.lists.indexOf(i),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(n=>n!==i),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}const k_=new Je("listScrollAtBoundary","none");ni.or(k_.isEqualTo("top"),k_.isEqualTo("both"));ni.or(k_.isEqualTo("bottom"),k_.isEqualTo("both"));const KH=new Je("listFocus",!0),GH=new Je("treestickyScrollFocused",!1),$2=new Je("listSupportsMultiselect",!0);ni.and(KH,ni.not(qH),GH.negate());const VE=new Je("listHasSelectionOrFocus",!1),zE=new Je("listDoubleSelection",!1),HE=new Je("listMultiSelection",!1),q2=new Je("listSelectionNavigation",!1),Yhe=new Je("listSupportsFind",!0),Xhe=new Je("treeElementCanCollapse",!1),Qhe=new Je("treeElementHasParent",!1),Jhe=new Je("treeElementCanExpand",!1),ede=new Je("treeElementHasChild",!1),tde=new Je("treeFindOpen",!1),ZH="listTypeNavigationMode",YH="listAutomaticKeyboardNavigation";function K2(s,e){const t=s.createScoped(e.getHTMLElement());return KH.bindTo(t),t}function G2(s,e){const t=k_.bindTo(s),i=()=>{const n=e.scrollTop===0,r=e.scrollHeight-e.renderHeight-e.scrollTop<1;n&&r?t.set("both"):n?t.set("top"):r?t.set("bottom"):t.set("none")};return i(),e.onDidScroll(i)}const Xf="workbench.list.multiSelectModifier",Jw="workbench.list.openMode",Zo="workbench.list.horizontalScrolling",jE="workbench.list.defaultFindMode",UE="workbench.list.typeNavigationMode",gy="workbench.list.keyboardNavigation",nl="workbench.list.scrollByPage",$E="workbench.list.defaultFindMatchType",L_="workbench.tree.indent",my="workbench.tree.renderIndentGuides",sl="workbench.list.smoothScrolling",ql="workbench.list.mouseWheelScrollSensitivity",Kl="workbench.list.fastScrollSensitivity",py="workbench.tree.expandMode",_y="workbench.tree.enableStickyScroll",vy="workbench.tree.stickyScrollMaxItemCount";function Gl(s){return s.getValue(Xf)==="alt"}class ide extends ve{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=Gl(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(Xf)&&(this.useAltAsMultipleSelectionModifier=Gl(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:Gz(e)}isSelectionRangeChangeEvent(e){return Zz(e)}}function Z2(s,e){const t=s.get(Xi),i=s.get(ps),n=new Qe;return[{...e,keyboardNavigationDelegate:{mightProducePrintableCharacter(o){return i.mightProducePrintableCharacter(o)}},smoothScrolling:!!t.getValue(sl),mouseWheelScrollSensitivity:t.getValue(ql),fastScrollSensitivity:t.getValue(Kl),multipleSelectionController:e.multipleSelectionController??n.add(new ide(t)),keyboardNavigationEventFilter:rde(i),scrollByPage:!!t.getValue(nl)},n]}let qP=class extends cl{constructor(e,t,i,n,r,o,a,l,c){const u=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!l.getValue(Zo),[d,g]=c.invokeFunction(Z2,r);super(e,t,i,n,{keyboardSupport:!1,...d,horizontalScrolling:u}),this.disposables.add(g),this.contextKeyService=K2(o,this),this.disposables.add(G2(this.contextKeyService,this)),this.listSupportsMultiSelect=$2.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),q2.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this.listHasSelectionOrFocus=VE.bindTo(this.contextKeyService),this.listDoubleSelection=zE.bindTo(this.contextKeyService),this.listMultiSelection=HE.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Gl(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const _=this.getSelection(),v=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(_.length>0||v.length>0),this.listMultiSelection.set(_.length>1),this.listDoubleSelection.set(_.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const _=this.getSelection(),v=this.getFocus();this.listHasSelectionOrFocus.set(_.length>0||v.length>0)})),this.disposables.add(l.onDidChangeConfiguration(_=>{_.affectsConfiguration(Xf)&&(this._useAltAsMultipleSelectionModifier=Gl(l));let v={};if(_.affectsConfiguration(Zo)&&this.horizontalScrolling===void 0){const w=!!l.getValue(Zo);v={...v,horizontalScrolling:w}}if(_.affectsConfiguration(nl)){const w=!!l.getValue(nl);v={...v,scrollByPage:w}}if(_.affectsConfiguration(sl)){const w=!!l.getValue(sl);v={...v,smoothScrolling:w}}if(_.affectsConfiguration(ql)){const w=l.getValue(ql);v={...v,mouseWheelScrollSensitivity:w}}if(_.affectsConfiguration(Kl)){const w=l.getValue(Kl);v={...v,fastScrollSensitivity:w}}Object.keys(v).length>0&&this.updateOptions(v)})),this.navigator=new XH(this,{configurationService:l,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?hv(e):Dp)}};qP=Cu([Li(5,ai),Li(6,Ql),Li(7,Xi),Li(8,hi)],qP);let KP=class extends nhe{constructor(e,t,i,n,r,o,a,l,c){const u=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!l.getValue(Zo),[d,g]=c.invokeFunction(Z2,r);super(e,t,i,n,{keyboardSupport:!1,...d,horizontalScrolling:u}),this.disposables=new Qe,this.disposables.add(g),this.contextKeyService=K2(o,this),this.disposables.add(G2(this.contextKeyService,this.widget)),this.horizontalScrolling=r.horizontalScrolling,this.listSupportsMultiSelect=$2.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),q2.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this._useAltAsMultipleSelectionModifier=Gl(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(_=>{_.affectsConfiguration(Xf)&&(this._useAltAsMultipleSelectionModifier=Gl(l));let v={};if(_.affectsConfiguration(Zo)&&this.horizontalScrolling===void 0){const w=!!l.getValue(Zo);v={...v,horizontalScrolling:w}}if(_.affectsConfiguration(nl)){const w=!!l.getValue(nl);v={...v,scrollByPage:w}}if(_.affectsConfiguration(sl)){const w=!!l.getValue(sl);v={...v,smoothScrolling:w}}if(_.affectsConfiguration(ql)){const w=l.getValue(ql);v={...v,mouseWheelScrollSensitivity:w}}if(_.affectsConfiguration(Kl)){const w=l.getValue(Kl);v={...v,fastScrollSensitivity:w}}Object.keys(v).length>0&&this.updateOptions(v)})),this.navigator=new XH(this,{configurationService:l,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?hv(e):Dp)}dispose(){this.disposables.dispose(),super.dispose()}};KP=Cu([Li(5,ai),Li(6,Ql),Li(7,Xi),Li(8,hi)],KP);let GP=class extends n6{constructor(e,t,i,n,r,o,a,l,c,u){const d=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!c.getValue(Zo),[g,m]=u.invokeFunction(Z2,o);super(e,t,i,n,r,{keyboardSupport:!1,...g,horizontalScrolling:d}),this.disposables.add(m),this.contextKeyService=K2(a,this),this.disposables.add(G2(this.contextKeyService,this)),this.listSupportsMultiSelect=$2.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),q2.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=VE.bindTo(this.contextKeyService),this.listDoubleSelection=zE.bindTo(this.contextKeyService),this.listMultiSelection=HE.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Gl(c),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const v=this.getSelection(),w=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(v.length>0||w.length>0),this.listMultiSelection.set(v.length>1),this.listDoubleSelection.set(v.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const v=this.getSelection(),w=this.getFocus();this.listHasSelectionOrFocus.set(v.length>0||w.length>0)})),this.disposables.add(c.onDidChangeConfiguration(v=>{v.affectsConfiguration(Xf)&&(this._useAltAsMultipleSelectionModifier=Gl(c));let w={};if(v.affectsConfiguration(Zo)&&this.horizontalScrolling===void 0){const y=!!c.getValue(Zo);w={...w,horizontalScrolling:y}}if(v.affectsConfiguration(nl)){const y=!!c.getValue(nl);w={...w,scrollByPage:y}}if(v.affectsConfiguration(sl)){const y=!!c.getValue(sl);w={...w,smoothScrolling:y}}if(v.affectsConfiguration(ql)){const y=c.getValue(ql);w={...w,mouseWheelScrollSensitivity:y}}if(v.affectsConfiguration(Kl)){const y=c.getValue(Kl);w={...w,fastScrollSensitivity:y}}Object.keys(w).length>0&&this.updateOptions(w)})),this.navigator=new nde(this,{configurationService:c,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?hv(e):Dp)}dispose(){this.disposables.dispose(),super.dispose()}};GP=Cu([Li(6,ai),Li(7,Ql),Li(8,Xi),Li(9,hi)],GP);class qE extends ve{constructor(e,t){super(),this.widget=e,this._onDidOpen=this._register(new re),this.onDidOpen=this._onDidOpen.event,this._register(Te.filter(this.widget.onDidChangeSelection,i=>Rc(i.browserEvent))(i=>this.onSelectionFromKeyboard(i))),this._register(this.widget.onPointer(i=>this.onPointer(i.element,i.browserEvent))),this._register(this.widget.onMouseDblClick(i=>this.onMouseDblClick(i.element,i.browserEvent))),typeof t?.openOnSingleClick!="boolean"&&t?.configurationService?(this.openOnSingleClick=t?.configurationService.getValue(Jw)!=="doubleClick",this._register(t?.configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration(Jw)&&(this.openOnSingleClick=t?.configurationService.getValue(Jw)!=="doubleClick")}))):this.openOnSingleClick=t?.openOnSingleClick??!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,i=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,n=typeof t.pinned=="boolean"?t.pinned:!i;this._open(this.getSelectedElement(),i,n,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const n=t.button===1,r=!0,o=n,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}onMouseDblClick(e,t){if(!t)return;const i=t.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.offsetX<16)return;const r=!1,o=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}_open(e,t,i,n,r){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:i,revealIfVisible:!0},sideBySide:n,element:e,browserEvent:r})}}class XH extends qE{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class nde extends qE{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class sde extends qE{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}}function rde(s){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;const i=s.softDispatch(t,t.target);return i.kind===1?(e=!0,!1):(e=!1,i.kind===0)}}let l6=class extends FE{constructor(e,t,i,n,r,o,a,l,c){const{options:u,getTypeNavigationMode:d,disposable:g}=o.invokeFunction(mv,r);super(e,t,i,n,u),this.disposables.add(g),this.internals=new Af(this,r,d,r.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};l6=Cu([Li(5,hi),Li(6,ai),Li(7,Ql),Li(8,Xi)],l6);let ZP=class extends jH{constructor(e,t,i,n,r,o,a,l,c){const{options:u,getTypeNavigationMode:d,disposable:g}=o.invokeFunction(mv,r);super(e,t,i,n,u),this.disposables.add(g),this.internals=new Af(this,r,d,r.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};ZP=Cu([Li(5,hi),Li(6,ai),Li(7,Ql),Li(8,Xi)],ZP);let YP=class extends Khe{constructor(e,t,i,n,r,o,a,l,c,u){const{options:d,getTypeNavigationMode:g,disposable:m}=a.invokeFunction(mv,o);super(e,t,i,n,r,d),this.disposables.add(m),this.internals=new Af(this,o,g,o.overrideStyles,l,c,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};YP=Cu([Li(6,hi),Li(7,ai),Li(8,Ql),Li(9,Xi)],YP);let XP=class extends $H{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,n,r,o,a,l,c,u){const{options:d,getTypeNavigationMode:g,disposable:m}=a.invokeFunction(mv,o);super(e,t,i,n,r,d),this.disposables.add(m),this.internals=new Af(this,o,g,o.overrideStyles,l,c,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};XP=Cu([Li(6,hi),Li(7,ai),Li(8,Ql),Li(9,Xi)],XP);let QP=class extends $he{constructor(e,t,i,n,r,o,a,l,c,u,d){const{options:g,getTypeNavigationMode:m,disposable:_}=l.invokeFunction(mv,a);super(e,t,i,n,r,o,g),this.disposables.add(_),this.internals=new Af(this,a,m,a.overrideStyles,c,u,d),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};QP=Cu([Li(7,hi),Li(8,ai),Li(9,Ql),Li(10,Xi)],QP);function QH(s){const e=s.getValue(jE);if(e==="highlight")return Kc.Highlight;if(e==="filter")return Kc.Filter;const t=s.getValue(gy);if(t==="simple"||t==="highlight")return Kc.Highlight;if(t==="filter")return Kc.Filter}function JH(s){const e=s.getValue($E);if(e==="fuzzy")return Rf.Fuzzy;if(e==="contiguous")return Rf.Contiguous}function mv(s,e){const t=s.get(Xi),i=s.get(ov),n=s.get(ai),r=s.get(hi),o=()=>{const g=n.getContextKeyValue(ZH);if(g==="automatic")return Ol.Automatic;if(g==="trigger"||n.getContextKeyValue(YH)===!1)return Ol.Trigger;const _=t.getValue(UE);if(_==="automatic")return Ol.Automatic;if(_==="trigger")return Ol.Trigger},a=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!t.getValue(Zo),[l,c]=r.invokeFunction(Z2,e),u=e.paddingBottom,d=e.renderIndentGuides!==void 0?e.renderIndentGuides:t.getValue(my);return{getTypeNavigationMode:o,disposable:c,options:{keyboardSupport:!1,...l,indent:typeof t.getValue(L_)=="number"?t.getValue(L_):void 0,renderIndentGuides:d,smoothScrolling:!!t.getValue(sl),defaultFindMode:QH(t),defaultFindMatchType:JH(t),horizontalScrolling:a,scrollByPage:!!t.getValue(nl),paddingBottom:u,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:e.expandOnlyOnTwistieClick??t.getValue(py)==="doubleClick",contextViewProvider:i,findWidgetStyles:Gae,enableStickyScroll:!!t.getValue(_y),stickyScrollMaxItemCount:Number(t.getValue(vy))}}}let Af=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,n,r,o,a){this.tree=e,this.disposables=[],this.contextKeyService=K2(r,e),this.disposables.push(G2(this.contextKeyService,e)),this.listSupportsMultiSelect=$2.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),q2.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=Yhe.bindTo(this.contextKeyService),this.listSupportFindWidget.set(t.findWidgetEnabled??!0),this.hasSelectionOrFocus=VE.bindTo(this.contextKeyService),this.hasDoubleSelection=zE.bindTo(this.contextKeyService),this.hasMultiSelection=HE.bindTo(this.contextKeyService),this.treeElementCanCollapse=Xhe.bindTo(this.contextKeyService),this.treeElementHasParent=Qhe.bindTo(this.contextKeyService),this.treeElementCanExpand=Jhe.bindTo(this.contextKeyService),this.treeElementHasChild=ede.bindTo(this.contextKeyService),this.treeFindOpen=tde.bindTo(this.contextKeyService),this.treeStickyScrollFocused=GH.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Gl(a),this.updateStyleOverrides(n);const c=()=>{const d=e.getFocus()[0];if(!d)return;const g=e.getNode(d);this.treeElementCanCollapse.set(g.collapsible&&!g.collapsed),this.treeElementHasParent.set(!!e.getParentElement(d)),this.treeElementCanExpand.set(g.collapsible&&g.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(d))},u=new Set;u.add(ZH),u.add(YH),this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection(()=>{const d=e.getSelection(),g=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(d.length>0||g.length>0),this.hasMultiSelection.set(d.length>1),this.hasDoubleSelection.set(d.length===2)})}),e.onDidChangeFocus(()=>{const d=e.getSelection(),g=e.getFocus();this.hasSelectionOrFocus.set(d.length>0||g.length>0),c()}),e.onDidChangeCollapseState(c),e.onDidChangeModel(c),e.onDidChangeFindOpenState(d=>this.treeFindOpen.set(d)),e.onDidChangeStickyScrollFocused(d=>this.treeStickyScrollFocused.set(d)),a.onDidChangeConfiguration(d=>{let g={};if(d.affectsConfiguration(Xf)&&(this._useAltAsMultipleSelectionModifier=Gl(a)),d.affectsConfiguration(L_)){const m=a.getValue(L_);g={...g,indent:m}}if(d.affectsConfiguration(my)&&t.renderIndentGuides===void 0){const m=a.getValue(my);g={...g,renderIndentGuides:m}}if(d.affectsConfiguration(sl)){const m=!!a.getValue(sl);g={...g,smoothScrolling:m}}if(d.affectsConfiguration(jE)||d.affectsConfiguration(gy)){const m=QH(a);g={...g,defaultFindMode:m}}if(d.affectsConfiguration(UE)||d.affectsConfiguration(gy)){const m=i();g={...g,typeNavigationMode:m}}if(d.affectsConfiguration($E)){const m=JH(a);g={...g,defaultFindMatchType:m}}if(d.affectsConfiguration(Zo)&&t.horizontalScrolling===void 0){const m=!!a.getValue(Zo);g={...g,horizontalScrolling:m}}if(d.affectsConfiguration(nl)){const m=!!a.getValue(nl);g={...g,scrollByPage:m}}if(d.affectsConfiguration(py)&&t.expandOnlyOnTwistieClick===void 0&&(g={...g,expandOnlyOnTwistieClick:a.getValue(py)==="doubleClick"}),d.affectsConfiguration(_y)){const m=a.getValue(_y);g={...g,enableStickyScroll:m}}if(d.affectsConfiguration(vy)){const m=Math.max(1,a.getValue(vy));g={...g,stickyScrollMaxItemCount:m}}if(d.affectsConfiguration(ql)){const m=a.getValue(ql);g={...g,mouseWheelScrollSensitivity:m}}if(d.affectsConfiguration(Kl)){const m=a.getValue(Kl);g={...g,fastScrollSensitivity:m}}Object.keys(g).length>0&&e.updateOptions(g)}),this.contextKeyService.onDidChangeContext(d=>{d.affectsSome(u)&&e.updateOptions({typeNavigationMode:i()})})),this.navigator=new sde(e,{configurationService:a,...t}),this.disposables.push(this.navigator)}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?hv(e):Dp)}dispose(){this.disposables=ms(this.disposables)}};Af=Cu([Li(4,ai),Li(5,Ql),Li(6,Xi)],Af);const ode=is.as(Gf.Configuration);ode.registerConfiguration({id:"workbench",order:7,title:b("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[Xf]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[b("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),b("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:b({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[Jw]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:b({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Zo]:{type:"boolean",default:!1,description:b("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[nl]:{type:"boolean",default:!1,description:b("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[L_]:{type:"number",default:8,minimum:4,maximum:40,description:b("tree indent setting","Controls tree indentation in pixels.")},[my]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:b("render tree indent guides","Controls whether the tree should render indent guides.")},[sl]:{type:"boolean",default:!1,description:b("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[ql]:{type:"number",default:1,markdownDescription:b("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[Kl]:{type:"number",default:5,markdownDescription:b("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[jE]:{type:"string",enum:["highlight","filter"],enumDescriptions:[b("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),b("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:b("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[gy]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[b("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),b("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),b("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:b("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:b("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[$E]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[b("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),b("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:b("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[py]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:b("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[_y]:{type:"boolean",default:!0,description:b("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[vy]:{type:"number",minimum:1,default:7,markdownDescription:b("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")},[UE]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:b("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});class hf extends ve{constructor(e,t){super(),this.options=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=t?.supportIcons??!1,this.domNode=Ge(e,at("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],i="",n){e||(e=""),n&&(e=hf.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===i&&jr(this.highlights,t))&&(this.text=e,this.title=i,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const i of this.highlights){if(i.end===i.start)continue;if(t<i.start){const o=this.text.substring(t,i.start);this.supportIcons?e.push(...of(o)):e.push(o),t=i.start}const n=this.text.substring(t,i.end),r=at("span.highlight",void 0,...this.supportIcons?of(n):[n]);i.extraClasses&&r.classList.add(...i.extraClasses),e.push(r),t=i.end}if(t<this.text.length){const i=this.text.substring(t);this.supportIcons?e.push(...of(i)):e.push(i)}if(nr(this.domNode,...e),this.options?.hoverDelegate?.showNativeHover)this.domNode.title=this.title;else if(!this.customHover&&this.title!==""){const i=this.options?.hoverDelegate??Xo("mouse");this.customHover=this._register(Xl().setupManagedHover(i,this.domNode,this.title))}else this.customHover&&this.customHover.update(this.title);this.didEverRender=!0}static escapeNewLines(e,t){let i=0,n=0;return e.replace(/\r\n|\r|\n/g,(r,o)=>{n=r===`\r
`?-1:0,o+=i;for(const a of t)a.end<=o||(a.start>=o&&(a.start+=n),a.end>=o&&(a.end+=n));return i+=n,"⏎"})}}class A0{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set classNames(e){this.disposed||jr(e,this._classNames)||(this._classNames=e,this._element.classList.value="",this._element.classList.add(...e))}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class JP extends ve{constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new A0(Ge(e,at(".monaco-icon-label")))),this.labelContainer=Ge(this.domNode.element,at(".monaco-icon-label-container")),this.nameContainer=Ge(this.labelContainer,at("span.monaco-icon-name-container")),t?.supportHighlights||t?.supportIcons?this.nameNode=this._register(new cde(this.nameContainer,!!t.supportIcons)):this.nameNode=new ade(this.nameContainer),this.hoverDelegate=t?.hoverDelegate??Xo("mouse")}get element(){return this.domNode.element}setLabel(e,t,i){const n=["monaco-icon-label"],r=["monaco-icon-label-container"];let o="";i&&(i.extraClasses&&n.push(...i.extraClasses),i.italic&&n.push("italic"),i.strikethrough&&n.push("strikethrough"),i.disabledCommand&&r.push("disabled"),i.title&&(typeof i.title=="string"?o+=i.title:o+=e));const a=this.domNode.element.querySelector(".monaco-icon-label-iconpath");if(i?.iconPath){let l;!a||!Jn(a)?(l=at(".monaco-icon-label-iconpath"),this.domNode.element.prepend(l)):l=a,l.style.backgroundImage=du(i?.iconPath)}else a&&a.remove();if(this.domNode.classNames=n,this.domNode.element.setAttribute("aria-label",o),this.labelContainer.classList.value="",this.labelContainer.classList.add(...r),this.setupHover(i?.descriptionTitle?this.labelContainer:this.element,i?.title),this.nameNode.setLabel(e,i),t||this.descriptionNode){const l=this.getOrCreateDescriptionNode();l instanceof hf?(l.set(t||"",i?i.descriptionMatches:void 0,void 0,i?.labelEscapeNewLines),this.setupHover(l.element,i?.descriptionTitle)):(l.textContent=t&&i?.labelEscapeNewLines?hf.escapeNewLines(t,[]):t||"",this.setupHover(l.element,i?.descriptionTitle||""),l.empty=!t)}if(i?.suffix||this.suffixNode){const l=this.getOrCreateSuffixNode();l.textContent=i?.suffix??""}}setupHover(e,t){const i=this.customHovers.get(e);if(i&&(i.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(this.hoverDelegate.showNativeHover){let r=function(o,a){bo(a)?o.title=Ez(a):a?.markdownNotSupportedFallback?o.title=a.markdownNotSupportedFallback:o.removeAttribute("title")};var n=r;r(e,t)}else{const r=Xl().setupManagedHover(this.hoverDelegate,e,t);r&&this.customHovers.set(e,r)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const e=this._register(new A0(GQ(this.nameContainer,at("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new A0(Ge(e.element,at("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){if(!this.descriptionNode){const e=this._register(new A0(Ge(this.labelContainer,at("span.monaco-icon-description-container"))));this.creationOptions?.supportDescriptionHighlights?this.descriptionNode=this._register(new hf(Ge(e.element,at("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new A0(Ge(e.element,at("span.label-description"))))}return this.descriptionNode}}class ade{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&jr(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=Ge(this.container,at("a.label-name",{id:t?.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<e.length;i++){const n=e[i],r=t?.domId&&`${t?.domId}_${i}`;Ge(this.container,at("a.label-name",{id:r,"data-icon-label-count":e.length,"data-icon-label-index":i,role:"treeitem"},n)),i<e.length-1&&Ge(this.container,at("span.label-separator",void 0,t?.separator||"/"))}}}}function lde(s,e,t){if(!t)return;let i=0;return s.map(n=>{const r={start:i,end:i+n.length},o=t.map(a=>ys.intersect(r,a)).filter(a=>!ys.isEmpty(a)).map(({start:a,end:l})=>({start:a-i,end:l-i}));return i=r.end+e.length,o})}class cde extends ve{constructor(e,t){super(),this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&jr(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new hf(Ge(this.container,at("a.label-name",{id:t?.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(e,t?.matches,void 0,t?.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const i=t?.separator||"/",n=lde(e,i,t?.matches);for(let r=0;r<e.length;r++){const o=e[r],a=n?n[r]:void 0,l=t?.domId&&`${t?.domId}_${r}`,c=at("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":r,role:"treeitem"});this._register(new hf(Ge(this.container,c),{supportIcons:this.supportIcons})).set(o,a,void 0,t?.labelEscapeNewLines),r<e.length-1&&Ge(c,at("span.label-separator",void 0,i))}}}}const cw=at;class KE extends ve{constructor(e,t,i){super(),this.os=t,this.keyElements=new Set,this.options=i||Object.create(null);const n=this.options.keybindingLabelForeground;this.domNode=Ge(e,cw(".monaco-keybinding")),n&&(this.domNode.style.color=n),this.hover=this._register(Xl().setupManagedHover(Xo("mouse"),this.domNode,"")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&KE.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const e=this.keybinding.getChords();e[0]&&this.renderChord(this.domNode,e[0],this.matches?this.matches.firstPart:null);for(let i=1;i<e.length;i++)Ge(this.domNode,cw("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,e[i],this.matches?this.matches.chordPart:null);const t=this.options.disableTitle??!1?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(t),this.domNode.setAttribute("aria-label",t||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){el(this.domNode),this.keyElements.clear()}renderChord(e,t,i){const n=lE.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,n.ctrlKey,!!i?.ctrlKey,n.separator),t.shiftKey&&this.renderKey(e,n.shiftKey,!!i?.shiftKey,n.separator),t.altKey&&this.renderKey(e,n.altKey,!!i?.altKey,n.separator),t.metaKey&&this.renderKey(e,n.metaKey,!!i?.metaKey,n.separator);const r=t.keyLabel;r&&this.renderKey(e,r,!!i?.keyCode,"")}renderKey(e,t,i,n){Ge(e,this.createKeyElement(t,i?".highlight":"")),n&&Ge(e,cw("span.monaco-keybinding-key-separator",void 0,n))}renderUnbound(e){Ge(e,this.createKeyElement(b("unbound","Unbound")))}createKeyElement(e,t=""){const i=cw("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(i),this.options.keybindingLabelBackground&&(i.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(i.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(i.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(i.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),i}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&jr(e.firstPart,t.firstPart)&&jr(e.chordPart,t.chordPart)}}const eO=new Nh(()=>{const s=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:s,collatorIsNumeric:s.resolvedOptions().numeric}});function ude(s,e,t=!1){const i=s||"",n=e||"",r=eO.value.collator.compare(i,n);return eO.value.collatorIsNumeric&&r===0&&i!==n?i<n?-1:1:r}function hde(s,e,t){const i=s.toLowerCase(),n=e.toLowerCase(),r=dde(s,e,t);if(r)return r;const o=i.endsWith(t),a=n.endsWith(t);if(o!==a)return o?-1:1;const l=ude(i,n);return l!==0?l:i.localeCompare(n)}function dde(s,e,t){const i=s.toLowerCase(),n=e.toLowerCase(),r=i.startsWith(t),o=n.startsWith(t);if(r!==o)return r?-1:1;if(r&&o){if(i.length<n.length)return-1;if(i.length>n.length)return 1}return 0}var Y2=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},c6=function(s,e){return function(t,i){e(t,i,s)}},u6;const Wa=at;class ej{constructor(e,t,i){this.index=e,this.hasCheckbox=t,this._hidden=!1,this._init=new Nh(()=>{const n=i.label??"",r=$0(n).text.trim(),o=i.ariaLabel||[n,this.saneDescription,this.saneDetail].map(a=>rre(a)).filter(a=>!!a).join(", ");return{saneLabel:n,saneSortLabel:r,saneAriaLabel:o}}),this._saneDescription=i.description,this._saneTooltip=i.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get saneDescription(){return this._saneDescription}set saneDescription(e){this._saneDescription=e}get saneDetail(){return this._saneDetail}set saneDetail(e){this._saneDetail=e}get saneTooltip(){return this._saneTooltip}set saneTooltip(e){this._saneTooltip=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class ls extends ej{constructor(e,t,i,n,r,o){super(e,t,r),this.fireButtonTriggered=i,this._onChecked=n,this.item=r,this._separator=o,this._checked=!1,this.onChecked=t?Te.map(Te.filter(this._onChecked.event,a=>a.element===this),a=>a.checked):Te.None,this._saneDetail=r.detail,this._labelHighlights=r.highlights?.label,this._descriptionHighlights=r.highlights?.description,this._detailHighlights=r.highlights?.detail}get separator(){return this._separator}set separator(e){this._separator=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}get checkboxDisabled(){return!!this.item.disabled}}var Nl;(function(s){s[s.NONE=0]="NONE",s[s.MOUSE_HOVER=1]="MOUSE_HOVER",s[s.ACTIVE_ITEM=2]="ACTIVE_ITEM"})(Nl||(Nl={}));class xd extends ej{constructor(e,t,i){super(e,!1,i),this.fireSeparatorButtonTriggered=t,this.separator=i,this.children=new Array,this.focusInsideSeparator=Nl.NONE}}class fde{getHeight(e){return e instanceof xd?30:e.saneDetail?44:22}getTemplateId(e){return e instanceof ls?by.ID:wy.ID}}class gde{getWidgetAriaLabel(){return b("quickInput","Quick Input")}getAriaLabel(e){return e.separator?.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(!(!e.hasCheckbox||!(e instanceof ls)))return{get value(){return e.checked},onDidChange:t=>e.onChecked(()=>t())}}}class tj{constructor(e){this.hoverDelegate=e}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=new Qe,t.toDisposeTemplate=new Qe,t.entry=Ge(e,Wa(".quick-input-list-entry"));const i=Ge(t.entry,Wa("label.quick-input-list-label"));t.toDisposeTemplate.add(Un(i,Ne.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=Ge(i,Wa("input.quick-input-list-checkbox")),t.checkbox.type="checkbox";const n=Ge(i,Wa(".quick-input-list-rows")),r=Ge(n,Wa(".quick-input-list-row")),o=Ge(n,Wa(".quick-input-list-row"));t.label=new JP(r,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=D8(t.label.element,Wa(".quick-input-list-icon"));const a=Ge(r,Wa(".quick-input-list-entry-keybinding"));t.keybinding=new KE(a,ha),t.toDisposeTemplate.add(t.keybinding);const l=Ge(o,Wa(".quick-input-list-label-meta"));return t.detail=new JP(l,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=Ge(t.entry,Wa(".quick-input-list-separator")),t.actionBar=new su(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.add(t.actionBar),t}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}disposeElement(e,t,i){i.toDisposeElement.clear(),i.actionBar.clear()}}var mf;let by=(mf=class extends tj{constructor(e,t){super(e),this.themeService=t,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return u6.ID}renderTemplate(e){const t=super.renderTemplate(e);return t.toDisposeTemplate.add(Un(t.checkbox,Ne.CHANGE,i=>{t.element.checked=t.checkbox.checked})),t}renderElement(e,t,i){const n=e.element;i.element=n,n.element=i.entry??void 0;const r=n.item;i.checkbox.checked=n.checked,i.toDisposeElement.add(n.onChecked(g=>i.checkbox.checked=g)),i.checkbox.disabled=n.checkboxDisabled;const{labelHighlights:o,descriptionHighlights:a,detailHighlights:l}=n;if(r.iconPath){const g=x2(this.themeService.getColorTheme().type)?r.iconPath.dark:r.iconPath.light??r.iconPath.dark,m=Et.revive(g);i.icon.className="quick-input-list-icon",i.icon.style.backgroundImage=du(m)}else i.icon.style.backgroundImage="",i.icon.className=r.iconClass?`quick-input-list-icon ${r.iconClass}`:"";let c;!n.saneTooltip&&n.saneDescription&&(c={markdown:{value:n.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDescription});const u={matches:o||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(u.extraClasses=r.iconClasses,u.italic=r.italic,u.strikethrough=r.strikethrough,i.entry.classList.remove("quick-input-list-separator-as-item"),i.label.setLabel(n.saneLabel,n.saneDescription,u),i.keybinding.set(r.keybinding),n.saneDetail){let g;n.saneTooltip||(g={markdown:{value:n.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(n.saneDetail,void 0,{matches:l,title:g,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";n.separator?.label?(i.separator.textContent=n.separator.label,i.separator.style.display="",this.addItemWithSeparator(n)):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!n.separator);const d=r.buttons;d&&d.length?(i.actionBar.push(d.map((g,m)=>v1(g,`id-${m}`,()=>n.fireButtonTriggered({button:g,item:n.item}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){this.removeItemWithSeparator(e.element),super.disposeElement(e,t,i)}isItemWithSeparatorVisible(e){return this._itemsWithSeparatorsFrequency.has(e)}addItemWithSeparator(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}removeItemWithSeparator(e){const t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}},u6=mf,mf.ID="quickpickitem",mf);by=u6=Y2([c6(1,La)],by);const NS=class NS extends tj{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}get templateId(){return NS.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(e){return this._visibleSeparatorsFrequency.has(e)}renderTemplate(e){const t=super.renderTemplate(e);return t.checkbox.style.display="none",t}renderElement(e,t,i){const n=e.element;i.element=n,n.element=i.entry??void 0,n.element.classList.toggle("focus-inside",!!n.focusInsideSeparator);const r=n.separator,{labelHighlights:o,descriptionHighlights:a,detailHighlights:l}=n;i.icon.style.backgroundImage="",i.icon.className="";let c;!n.saneTooltip&&n.saneDescription&&(c={markdown:{value:n.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDescription});const u={matches:o||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(i.entry.classList.add("quick-input-list-separator-as-item"),i.label.setLabel(n.saneLabel,n.saneDescription,u),n.saneDetail){let g;n.saneTooltip||(g={markdown:{value:n.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(n.saneDetail,void 0,{matches:l,title:g,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";i.separator.style.display="none",i.entry.classList.add("quick-input-list-separator-border");const d=r.buttons;d&&d.length?(i.actionBar.push(d.map((g,m)=>v1(g,`id-${m}`,()=>n.fireSeparatorButtonTriggered({button:g,separator:n.separator}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions"),this.addSeparator(n)}disposeElement(e,t,i){this.removeSeparator(e.element),this.isSeparatorVisible(e.element)||e.element.element?.classList.remove("focus-inside"),super.disposeElement(e,t,i)}addSeparator(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}removeSeparator(e){const t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}};NS.ID="quickpickseparator";let wy=NS,D_=class extends ve{constructor(e,t,i,n,r,o){super(),this.parent=e,this.hoverDelegate=t,this.linkOpenerDelegate=i,this.accessibilityService=o,this._onKeyDown=new re,this._onLeave=new re,this.onLeave=this._onLeave.event,this._visibleCountObservable=Zt("VisibleCount",0),this.onChangedVisibleCount=Te.fromObservable(this._visibleCountObservable,this._store),this._allVisibleCheckedObservable=Zt("AllVisibleChecked",!1),this.onChangedAllVisibleChecked=Te.fromObservable(this._allVisibleCheckedObservable,this._store),this._checkedCountObservable=Zt("CheckedCount",0),this.onChangedCheckedCount=Te.fromObservable(this._checkedCountObservable,this._store),this._checkedElementsObservable=x7({equalsFn:Rn},new Array),this.onChangedCheckedElements=Te.fromObservable(this._checkedElementsObservable,this._store),this._onButtonTriggered=new re,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new re,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._elementChecked=new re,this._elementCheckedEventBufferer=new K_,this._hasCheckboxes=!1,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new Qe),this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._shouldLoop=!0,this._container=Ge(this.parent,Wa(".quick-input-list")),this._separatorRenderer=new wy(t),this._itemRenderer=r.createInstance(by,t),this._tree=this._register(r.createInstance(l6,"QuickInput",this._container,new fde,[this._itemRenderer,this._separatorRenderer],{filter:{filter(a){return a.hidden?0:a instanceof xd?2:1}},sorter:{compare:(a,l)=>{if(!this.sortByLabel||!this._lastQueryString)return 0;const c=this._lastQueryString.toLowerCase();return pde(a,l,c)}},accessibilityProvider:new gde,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:dp.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=n,this._registerListeners()}get onDidChangeFocus(){return Te.map(this._tree.onDidChangeFocus,e=>e.elements.filter(t=>t instanceof ls).map(t=>t.item),this._store)}get onDidChangeSelection(){return Te.map(this._tree.onDidChangeSelection,e=>({items:e.elements.filter(t=>t instanceof ls).map(t=>t.item),event:e.browserEvent}),this._store)}get displayed(){return this._container.style.display!=="none"}set displayed(e){this._container.style.display=e?"":"none"}get scrollTop(){return this._tree.scrollTop}set scrollTop(e){this._tree.scrollTop=e}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(e){this._tree.ariaLabel=e??""}set enabled(e){this._tree.getHTMLElement().style.pointerEvents=e?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}get shouldLoop(){return this._shouldLoop}set shouldLoop(e){this._shouldLoop=e}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnTreeModelChanged(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown(e=>{const t=new Ni(e);switch(t.keyCode){case 10:this.toggleCheckbox();break}this._onKeyDown.fire(t)}))}_registerOnContainerClick(){this._register(ge(this._container,Ne.CLICK,e=>{(e.x||e.y)&&this._onLeave.fire()}))}_registerOnMouseMiddleClick(){this._register(ge(this._container,Ne.AUXCLICK,e=>{e.button===1&&this._onLeave.fire()}))}_registerOnTreeModelChanged(){this._register(this._tree.onDidChangeModel(()=>{const e=this._itemElements.filter(t=>!t.hidden).length;this._visibleCountObservable.set(e,void 0),this._hasCheckboxes&&this._updateCheckedObservables()}))}_registerOnElementChecked(){this._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event,(e,t)=>t)(e=>this._updateCheckedObservables()))}_registerOnContextMenu(){this._register(this._tree.onContextMenu(e=>{e.element&&(e.browserEvent.preventDefault(),this._tree.setSelection([e.element]))}))}_registerHoverListeners(){const e=this._register(new IW(this.hoverDelegate.delay));this._register(this._tree.onMouseOver(async t=>{if(XM(t.browserEvent.target)){e.cancel();return}if(!(!XM(t.browserEvent.relatedTarget)&&jn(t.browserEvent.relatedTarget,t.element?.element)))try{await e.trigger(async()=>{t.element instanceof ls&&this.showHover(t.element)})}catch(i){if(!$_(i))throw i}})),this._register(this._tree.onMouseOut(t=>{jn(t.browserEvent.relatedTarget,t.element?.element)||e.cancel()}))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus(e=>{const t=e.elements[0]?this._tree.getParentElement(e.elements[0]):null;for(const i of this._separatorRenderer.visibleSeparators){const n=i===t;!!(i.focusInsideSeparator&Nl.ACTIVE_ITEM)!==n&&(n?i.focusInsideSeparator|=Nl.ACTIVE_ITEM:i.focusInsideSeparator&=~Nl.ACTIVE_ITEM,this._tree.rerender(i))}})),this._register(this._tree.onMouseOver(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&Nl.MOUSE_HOVER)||(i.focusInsideSeparator|=Nl.MOUSE_HOVER,this._tree.rerender(i))}})),this._register(this._tree.onMouseOut(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&Nl.MOUSE_HOVER)&&(i.focusInsideSeparator&=~Nl.MOUSE_HOVER,this._tree.rerender(i))}}))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection(e=>{const t=e.elements.filter(i=>i instanceof ls);t.length!==e.elements.length&&(e.elements.length===1&&e.elements[0]instanceof xd&&(this._tree.setFocus([e.elements[0].children[0]]),this._tree.reveal(e.elements[0],0)),this._tree.setSelection(t))}))}setAllVisibleChecked(e){this._elementCheckedEventBufferer.bufferEvents(()=>{this._itemElements.forEach(t=>{!t.hidden&&!t.checkboxDisabled&&(t.checked=e)})})}setElements(e){this._elementDisposable.clear(),this._lastQueryString=void 0,this._inputElements=e,this._hasCheckboxes=this.parent.classList.contains("show-checkboxes");let t;this._itemElements=new Array,this._elementTree=e.reduce((i,n,r)=>{let o;if(n.type==="separator"){if(!n.buttons)return i;t=new xd(r,a=>this._onSeparatorButtonTriggered.fire(a),n),o=t}else{const a=r>0?e[r-1]:void 0;let l;a&&a.type==="separator"&&!a.buttons&&(t=void 0,l=a);const c=new ls(r,this._hasCheckboxes,u=>this._onButtonTriggered.fire(u),this._elementChecked,n,l);if(this._itemElements.push(c),t)return t.children.push(c),i;o=c}return i.push(o),i},new Array),this._setElementsToTree(this._elementTree),this.accessibilityService.isScreenReaderOptimized()&&setTimeout(()=>{const i=this._tree.getHTMLElement().querySelector(".monaco-list-row.focused"),n=i?.parentNode;if(i&&n){const r=i.nextSibling;i.remove(),n.insertBefore(i,r)}},0)}setFocusedElements(e){const t=e.map(i=>this._itemElements.find(n=>n.item===i)).filter(i=>!!i).filter(i=>!i.hidden);if(this._tree.setFocus(t),e.length>0){const i=this._tree.getFocus()[0];i&&this._tree.reveal(i)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){const t=e.map(i=>this._itemElements.find(n=>n.item===i)).filter(i=>!!i);this._tree.setSelection(t)}getCheckedElements(){return this._itemElements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){this._elementCheckedEventBufferer.bufferEvents(()=>{const t=new Set;for(const i of e)t.add(i);for(const i of this._itemElements)i.checked=t.has(i.item)})}focus(e){if(this._itemElements.length)switch(e===Si.Second&&this._itemElements.length<2&&(e=Si.First),e){case Si.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,t=>t.element instanceof ls);break;case Si.Second:{this._tree.scrollTop=0;let t=!1;this._tree.focusFirst(void 0,i=>i.element instanceof ls?t?!0:(t=!t,!1):!1);break}case Si.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,t=>t.element instanceof ls);break;case Si.Next:{const t=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,n=>n.element instanceof ls?(this._tree.reveal(n.element),!0):!1);const i=this._tree.getFocus();t.length&&t[0]===i[0]&&t[0]===this._itemElements[this._itemElements.length-1]&&this._onLeave.fire();break}case Si.Previous:{const t=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,n=>{if(!(n.element instanceof ls))return!1;const r=this._tree.getParentElement(n.element);return r===null||r.children[0]!==n.element?this._tree.reveal(n.element):this._tree.reveal(r),!0});const i=this._tree.getFocus();t.length&&t[0]===i[0]&&t[0]===this._itemElements[0]&&this._onLeave.fire();break}case Si.NextPage:this._tree.focusNextPage(void 0,t=>t.element instanceof ls?(this._tree.reveal(t.element),!0):!1);break;case Si.PreviousPage:this._tree.focusPreviousPage(void 0,t=>{if(!(t.element instanceof ls))return!1;const i=this._tree.getParentElement(t.element);return i===null||i.children[0]!==t.element?this._tree.reveal(t.element):this._tree.reveal(i),!0});break;case Si.NextSeparator:{let t=!1;const i=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,r=>{if(t)return!0;if(r.element instanceof xd)t=!0,this._separatorRenderer.isSeparatorVisible(r.element)?this._tree.reveal(r.element.children[0]):this._tree.reveal(r.element,0);else if(r.element instanceof ls){if(r.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(r.element)?this._tree.reveal(r.element):this._tree.reveal(r.element,0),!0;if(r.element===this._elementTree[0])return this._tree.reveal(r.element,0),!0}return!1});const n=this._tree.getFocus()[0];i===n&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,r=>r.element instanceof ls));break}case Si.PreviousSeparator:{let t,i=!!this._tree.getFocus()[0]?.separator;this._tree.focusPrevious(void 0,!0,void 0,n=>{if(n.element instanceof xd)i?t||(this._separatorRenderer.isSeparatorVisible(n.element)?this._tree.reveal(n.element):this._tree.reveal(n.element,0),t=n.element.children[0]):i=!0;else if(n.element instanceof ls&&!t){if(n.element.separator)this._itemRenderer.isItemWithSeparatorVisible(n.element)?this._tree.reveal(n.element):this._tree.reveal(n.element,0),t=n.element;else if(n.element===this._elementTree[0])return this._tree.reveal(n.element,0),!0}return!1}),t&&this._tree.setFocus([t]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(e){this._tree.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:"",this._tree.layout()}filter(e){if(this._lastQueryString=e,!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this._itemElements.forEach(i=>{i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!1;const n=i.index&&this._inputElements[i.index-1];i.item&&(i.separator=n&&n.type==="separator"&&!n.buttons?n:void 0)});else{let i;this._itemElements.forEach(n=>{let r;this.matchOnLabelMode==="fuzzy"?r=this.matchOnLabel?Hk(e,$0(n.saneLabel))??void 0:void 0:r=this.matchOnLabel?mde(t,$0(n.saneLabel))??void 0:void 0;const o=this.matchOnDescription?Hk(e,$0(n.saneDescription||""))??void 0:void 0,a=this.matchOnDetail?Hk(e,$0(n.saneDetail||""))??void 0:void 0;if(r||o||a?(n.labelHighlights=r,n.descriptionHighlights=o,n.detailHighlights=a,n.hidden=!1):(n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=n.item?!n.item.alwaysShow:!0),n.item?n.separator=void 0:n.separator&&(n.hidden=!0),!this.sortByLabel){const l=n.index&&this._inputElements[n.index-1]||void 0;l?.type==="separator"&&!l.buttons&&(i=l),i&&!n.hidden&&(n.separator=i,i=void 0)}})}return this._setElementsToTree(this._sortByLabel&&e?this._itemElements:this._elementTree),this._tree.layout(),!0}toggleCheckbox(){this._elementCheckedEventBufferer.bufferEvents(()=>{const e=this._tree.getFocus().filter(i=>i instanceof ls),t=this._allVisibleChecked(e);for(const i of e)i.checkboxDisabled||(i.checked=!t)})}style(e){this._tree.style(e)}toggleHover(){const e=this._tree.getFocus()[0];if(!e?.saneTooltip||!(e instanceof ls))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}this.showHover(e);const t=new Qe;t.add(this._tree.onDidChangeFocus(i=>{i.elements[0]instanceof ls&&this.showHover(i.elements[0])})),this._lastHover&&t.add(this._lastHover),this._elementDisposable.add(t)}_setElementsToTree(e){const t=new Array;for(const i of e)i instanceof xd?t.push({element:i,collapsible:!1,collapsed:!1,children:i.children.map(n=>({element:n,collapsible:!1,collapsed:!1}))}):t.push({element:i,collapsible:!1,collapsed:!1});this._tree.setChildren(null,t)}_allVisibleChecked(e,t=!0){for(let i=0,n=e.length;i<n;i++){const r=e[i];if(!r.hidden)if(r.checked)t=!0;else return!1}return t}_updateCheckedObservables(){In(e=>{this._allVisibleCheckedObservable.set(this._allVisibleChecked(this._itemElements,!1),e);const t=this._itemElements.filter(i=>i.checked).length;this._checkedCountObservable.set(t,e),this._checkedElementsObservable.set(this.getCheckedElements(),e)})}showHover(e){this._lastHover&&!this._lastHover.isDisposed&&(this.hoverDelegate.onDidHideHover?.(),this._lastHover?.dispose()),!(!e.element||!e.saneTooltip)&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:t=>{this.linkOpenerDelegate(t)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}};Y2([Qi],D_.prototype,"onDidChangeFocus",null);Y2([Qi],D_.prototype,"onDidChangeSelection",null);D_=Y2([c6(4,hi),c6(5,ll)],D_);function mde(s,e){const{text:t,iconOffsets:i}=e;if(!i||i.length===0)return tO(s,t);const n=r2(t," "),r=t.length-n.length,o=tO(s,n);if(o)for(const a of o){const l=i[a.start+r]+r;a.start+=l,a.end+=l}return o}function tO(s,e){const t=e.toLowerCase().indexOf(s.toLowerCase());return t!==-1?[{start:t,end:t+s.length}]:null}function pde(s,e,t){const i=s.labelHighlights||[],n=e.labelHighlights||[];return i.length&&!n.length?-1:!i.length&&n.length?1:i.length===0&&n.length===0?0:hde(s.saneSortLabel,e.saneSortLabel,t)}const ij={weight:200,when:ni.and(ni.equals(OH,"quickPick"),Pue),metadata:{description:b("quickPick","Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")}};function Br(s,e={}){Q_.registerCommandAndKeybindingRule({...ij,...s,secondary:_de(s.primary,s.secondary??[],e)})}const Cy=qt?256:2048;function _de(s,e,t={}){return t.withAltMod&&e.push(512+s),t.withCtrlMod&&(e.push(Cy+s),t.withAltMod&&e.push(512+Cy+s)),t.withCmdMod&&qt&&(e.push(2048+s),t.withCtrlMod&&e.push(2304+s),t.withAltMod&&(e.push(2560+s),t.withCtrlMod&&e.push(2816+s))),e}function fo(s,e){return t=>{const i=t.get(j2).currentQuickInput;if(i)return e&&i.quickNavigate?i.focus(e):i.focus(s)}}Br({id:"quickInput.pageNext",primary:12,handler:fo(Si.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});Br({id:"quickInput.pagePrevious",primary:11,handler:fo(Si.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});Br({id:"quickInput.first",primary:Cy+14,handler:fo(Si.First)},{withAltMod:!0,withCmdMod:!0});Br({id:"quickInput.last",primary:Cy+13,handler:fo(Si.Last)},{withAltMod:!0,withCmdMod:!0});Br({id:"quickInput.next",primary:18,handler:fo(Si.Next)},{withCtrlMod:!0});Br({id:"quickInput.previous",primary:16,handler:fo(Si.Previous)},{withCtrlMod:!0});const iO=b("quickInput.nextSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator."),nO=b("quickInput.previousSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.");qt?(Br({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:2066,handler:fo(Si.NextSeparator,Si.Next),metadata:{description:iO}}),Br({id:"quickInput.nextSeparator",primary:2578,secondary:[2322],handler:fo(Si.NextSeparator)},{withCtrlMod:!0}),Br({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:2064,handler:fo(Si.PreviousSeparator,Si.Previous),metadata:{description:nO}}),Br({id:"quickInput.previousSeparator",primary:2576,secondary:[2320],handler:fo(Si.PreviousSeparator)},{withCtrlMod:!0})):(Br({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:530,handler:fo(Si.NextSeparator,Si.Next),metadata:{description:iO}}),Br({id:"quickInput.nextSeparator",primary:2578,handler:fo(Si.NextSeparator)}),Br({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:528,handler:fo(Si.PreviousSeparator,Si.Previous),metadata:{description:nO}}),Br({id:"quickInput.previousSeparator",primary:2576,handler:fo(Si.PreviousSeparator)}));Br({id:"quickInput.acceptInBackground",when:ni.and(ij.when,ni.or(Ghe.negate(),Bue)),primary:17,weight:250,handler:s=>{s.get(j2).currentQuickInput?.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});var vde=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},hL=function(s,e){return function(t,i){e(t,i,s)}},h6;const Ar=at;var pf;let d6=(pf=class extends ve{get currentQuickInput(){return this.controller??void 0}get container(){return this._container}constructor(e,t,i,n){super(),this.options=e,this.layoutService=t,this.instantiationService=i,this.contextKeyService=n,this.enabled=!0,this.onDidAcceptEmitter=this._register(new re),this.onDidCustomEmitter=this._register(new re),this.onDidTriggerButtonEmitter=this._register(new re),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new re),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new re),this.onHide=this.onHideEmitter.event,this.inQuickInputContext=Aue.bindTo(this.contextKeyService),this.quickInputTypeContext=Oue.bindTo(this.contextKeyService),this.endOfQuickInputBoxContext=Fue.bindTo(this.contextKeyService),this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(Te.runAndSubscribe(c2,({window:r,disposables:o})=>this.registerKeyModsListeners(r,o),{window:bi,disposables:this._store})),this._register(MQ(r=>{this.ui&&tt(this.ui.container)===r&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))}))}registerKeyModsListeners(e,t){const i=n=>{this.keyMods.ctrlCmd=n.ctrlKey||n.metaKey,this.keyMods.alt=n.altKey};for(const n of[Ne.KEY_DOWN,Ne.KEY_UP,Ne.MOUSE_DOWN])t.add(ge(e,n,i,!0))}getUI(e){if(this.ui)return e&&tt(this._container)!==tt(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const t=Ge(this._container,Ar(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";const i=Ca(t),n=Ge(t,Ar(".quick-input-titlebar")),r=this._register(new su(n,{hoverDelegate:this.options.hoverDelegate}));r.domNode.classList.add("quick-input-left-action-bar");const o=Ge(n,Ar(".quick-input-title")),a=this._register(new su(n,{hoverDelegate:this.options.hoverDelegate}));a.domNode.classList.add("quick-input-right-action-bar");const l=Ge(t,Ar(".quick-input-header")),c=Ge(l,Ar("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",b("quickInput.checkAll","Toggle all checkboxes")),this._register(Un(c,Ne.CHANGE,Z=>{const ue=c.checked;G.setAllVisibleChecked(ue)})),this._register(ge(c,Ne.CLICK,Z=>{(Z.x||Z.y)&&m.setFocus()}));const u=Ge(l,Ar(".quick-input-description")),d=Ge(l,Ar(".quick-input-and-message")),g=Ge(d,Ar(".quick-input-filter")),m=this._register(new Jue(g,this.styles.inputBox,this.styles.toggle));m.setAttribute("aria-describedby",`${this.idPrefix}message`);const _=Ge(g,Ar(".quick-input-visible-count"));_.setAttribute("aria-live","polite"),_.setAttribute("aria-atomic","true");const v=new PP(_,{countFormat:b({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),w=Ge(g,Ar(".quick-input-count"));w.setAttribute("aria-live","polite");const y=new PP(w,{countFormat:b({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),S=this._register(new su(l,{hoverDelegate:this.options.hoverDelegate}));S.domNode.classList.add("quick-input-inline-action-bar");const k=Ge(l,Ar(".quick-input-action")),L=this._register(new t6(k,this.styles.button));L.label=b("ok","OK"),this._register(L.onDidClick(Z=>{this.onDidAcceptEmitter.fire()}));const T=Ge(l,Ar(".quick-input-action")),A=this._register(new t6(T,{...this.styles.button,supportIcons:!0}));A.label=b("custom","Custom"),this._register(A.onDidClick(Z=>{this.onDidCustomEmitter.fire()}));const I=Ge(d,Ar(`#${this.idPrefix}message.quick-input-message`)),O=this._register(new i6(t,this.styles.progressBar));O.getContainer().classList.add("quick-input-progress");const F=Ge(t,Ar(".quick-input-html-widget"));F.tabIndex=-1;const J=Ge(t,Ar(".quick-input-description")),Y=this.idPrefix+"list",G=this._register(this.instantiationService.createInstance(D_,t,this.options.hoverDelegate,this.options.linkOpenerDelegate,Y));m.setAttribute("aria-controls",Y),this._register(G.onDidChangeFocus(()=>{m.setAttribute("aria-activedescendant",G.getActiveDescendant()??"")})),this._register(G.onChangedAllVisibleChecked(Z=>{c.checked=Z})),this._register(G.onChangedVisibleCount(Z=>{v.setCount(Z)})),this._register(G.onChangedCheckedCount(Z=>{y.setCount(Z)})),this._register(G.onLeave(()=>{setTimeout(()=>{this.controller&&(m.setFocus(),this.controller instanceof hy&&this.controller.canSelectMany&&G.clearFocus())},0)}));const ie=s_(t);return this._register(ie),this._register(ge(t,Ne.FOCUS,Z=>{const ue=this.getUI();if(jn(Z.relatedTarget,ue.inputContainer)){const be=ue.inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==be&&this.endOfQuickInputBoxContext.set(be)}jn(Z.relatedTarget,ue.container)||(this.inQuickInputContext.set(!0),this.previousFocusElement=Jn(Z.relatedTarget)?Z.relatedTarget:void 0)},!0)),this._register(ie.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(hp.Blur),this.inQuickInputContext.set(!1),this.endOfQuickInputBoxContext.set(!1),this.previousFocusElement=void 0})),this._register(m.onKeyDown(Z=>{const ue=this.getUI().inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==ue&&this.endOfQuickInputBoxContext.set(ue)})),this._register(ge(t,Ne.FOCUS,Z=>{m.setFocus()})),this._register(Un(t,Ne.KEY_DOWN,Z=>{if(!jn(Z.target,F))switch(Z.keyCode){case 3:zt.stop(Z,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:zt.stop(Z,!0),this.hide(hp.Gesture);break;case 2:if(!Z.altKey&&!Z.ctrlKey&&!Z.metaKey){const ue=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(t.classList.contains("show-checkboxes")?ue.push("input"):ue.push("input[type=text]"),this.getUI().list.displayed&&ue.push(".monaco-list"),this.getUI().message&&ue.push(".quick-input-message a"),this.getUI().widget){if(jn(Z.target,this.getUI().widget))break;ue.push(".quick-input-html-widget")}const be=t.querySelectorAll(ue.join(", "));Z.shiftKey&&Z.target===be[0]?(zt.stop(Z,!0),G.clearFocus()):!Z.shiftKey&&jn(Z.target,be[be.length-1])&&(zt.stop(Z,!0),be[0].focus())}break;case 10:Z.ctrlKey&&(zt.stop(Z,!0),this.getUI().list.toggleHover());break}})),this.ui={container:t,styleSheet:i,leftActionBar:r,titleBar:n,title:o,description1:J,description2:u,widget:F,rightActionBar:a,inlineActionBar:S,checkAll:c,inputContainer:d,filterContainer:g,inputBox:m,visibleCountContainer:_,visibleCount:v,countContainer:w,count:y,okContainer:k,ok:L,message:I,customButtonContainer:T,customButton:A,list:G,progressBar:O,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:Z=>this.show(Z),hide:()=>this.hide(),setVisibilities:Z=>this.setVisibilities(Z),setEnabled:Z=>this.setEnabled(Z),setContextKey:Z=>this.options.setContextKey(Z),linkOpenerDelegate:Z=>this.options.linkOpenerDelegate(Z)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this._container=e,Ge(this._container,this.ui.container))}pick(e,t={},i=va.None){return new Promise((n,r)=>{let o=u=>{o=n,t.onKeyMods?.(a.keyMods),n(u)};if(i.isCancellationRequested){o(void 0);return}const a=this.createQuickPick({useSeparators:!0});let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)o(a.selectedItems.slice()),a.hide();else{const u=a.activeItems[0];u&&(o(u),a.hide())}}),a.onDidChangeActive(u=>{const d=u[0];d&&t.onDidFocus&&t.onDidFocus(d)}),a.onDidChangeSelection(u=>{if(!a.canSelectMany){const d=u[0];d&&(o(d),a.hide())}}),a.onDidTriggerItemButton(u=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...u,removeItem:()=>{const d=a.items.indexOf(u.item);if(d!==-1){const g=a.items.slice(),m=g.splice(d,1),_=a.activeItems.filter(w=>w!==m[0]),v=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=g,_&&(a.activeItems=_),a.keepScrollPosition=v}}})),a.onDidTriggerSeparatorButton(u=>t.onDidTriggerSeparatorButton?.(u)),a.onDidChangeValue(u=>{l&&!u&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),i.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{ms(c),o(void 0)})];a.title=t.title,t.value&&(a.value=t.value),a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([u,d])=>{l=d,a.busy=!1,a.items=u,a.canSelectMany&&(a.selectedItems=u.filter(g=>g.type!=="separator"&&g.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,u=>{r(u),a.hide()})})}createQuickPick(e={useSeparators:!1}){const t=this.getUI(!0);return new hy(t)}createInputBox(){const e=this.getUI(!0);return new Wue(e)}show(e){const t=this.getUI(!0);this.onShowEmitter.fire();const i=this.controller;this.controller=e,i?.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",nr(t.widget),t.rightActionBar.clear(),t.inlineActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(Cn.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),nr(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const n=this.options.backKeybindingLabel();J7.tooltip=n?b("quickInput.backWithKeybinding","Back ({0})",n):b("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus(),this.quickInputTypeContext.set(e.type)}isVisible(){return!!this.ui&&this.ui.container.style.display!=="none"}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.displayed=!!e.list,t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){const t=this.controller;if(!t)return;t.willHide(e);const i=this.ui?.container,n=i&&!GW(i);if(this.controller=null,this.onHideEmitter.fire(),i&&(i.style.display="none"),!n){let r=this.previousFocusElement;for(;r&&!r.offsetParent;)r=r.parentElement??void 0;r?.offsetParent?(r.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}t.didHide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,h6.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,widgetBorder:n,widgetShadow:r}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=i??"",this.ui.container.style.border=n?`1px solid ${n}`:"",this.ui.container.style.boxShadow=r?`0 0 8px 2px ${r}`:"",this.ui.list.style(this.styles.list);const o=[];this.styles.pickerGroup.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const a=o.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}},h6=pf,pf.MAX_WIDTH=600,pf);d6=h6=vde([hL(1,qh),hL(2,hi),hL(3,ai)],d6);var bde=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},P0=function(s,e){return function(t,i){e(t,i,s)}};let f6=class extends Gte{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get currentQuickInput(){return this.controller.currentQuickInput}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(Q7))),this._quickAccess}constructor(e,t,i,n,r){super(i),this.instantiationService=e,this.contextKeyService=t,this.layoutService=n,this.configurationService=r,this._onShow=this._register(new re),this._onHide=this._register(new re),this.contexts=new Map}createController(e=this.layoutService,t){const i={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:r=>this.setContextKey(r),linkOpenerDelegate:r=>{this.instantiationService.invokeFunction(o=>{o.get(av).open(r,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(e6))},n=this._register(this.instantiationService.createInstance(d6,{...i,...t}));return n.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer(r=>{tt(e.activeContainer)===tt(n.container)&&n.layout(r,e.activeContainerOffset.quickPickTop)})),this._register(e.onDidChangeActiveContainer(()=>{n.isVisible()||n.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)})),this._register(n.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(n.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),n}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new Je(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t?.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t,i=va.None){return this.controller.pick(e,t,i)}createQuickPick(e={useSeparators:!1}){return this.controller.createQuickPick(e)}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:Ie(vA),quickInputForeground:Ie(cse),quickInputTitleBackground:Ie(use),widgetBorder:Ie(Kie),widgetShadow:Ie(sv)},inputBox:eH,toggle:Jz,countBadge:Zae,button:qae,progressBar:Kae,keybindingLabel:$ae,list:hv({listBackground:vA,listFocusBackground:i7,listFocusForeground:t7,listInactiveFocusForeground:t7,listInactiveSelectionIconForeground:pz,listInactiveFocusBackground:i7,listFocusOutline:ln,listInactiveFocusOutline:ln}),pickerGroup:{pickerGroupBorder:Ie(hse),pickerGroupForeground:Ie(mz)}}}};f6=bde([P0(0,hi),P0(1,ai),P0(2,La),P0(3,qh),P0(4,Xi)],f6);var nj=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Vd=function(s,e){return function(t,i){e(t,i,s)}};let g6=class extends f6{constructor(e,t,i,n,r,o){super(t,i,n,new V3(e.getContainerDomNode(),r),o),this.host=void 0;const a=E_.get(e);if(a){const l=a.widget;this.host={_serviceBrand:void 0,get mainContainer(){return l.getDomNode()},getContainer(){return l.getDomNode()},whenContainerStylesLoaded(){},get containers(){return[l.getDomNode()]},get activeContainer(){return l.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return Te.map(e.onDidLayoutChange,c=>({container:l.getDomNode(),dimension:c}))},get onDidChangeActiveContainer(){return Te.None},get onDidAddContainer(){return Te.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};g6=nj([Vd(1,hi),Vd(2,ai),Vd(3,La),Vd(4,An),Vd(5,Xi)],g6);let m6=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const i=t=this.instantiationService.createInstance(g6,e);this.mapEditorToService.set(e,t),Ym(e.onDidDispose)(()=>{i.dispose(),this.mapEditorToService.delete(e)})}return t}get currentQuickInput(){return this.activeService.currentQuickInput}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t,i=va.None){return this.activeService.pick(e,t,i)}createQuickPick(e={useSeparators:!1}){return this.activeService.createQuickPick(e)}createInputBox(){return this.activeService.createInputBox()}};m6=nj([Vd(0,hi),Vd(1,An)],m6);const IS=class IS{static get(e){return e.getContribution(IS.ID)}constructor(e){this.editor=e,this.widget=new p6(this.editor)}dispose(){this.widget.dispose()}};IS.ID="editor.controller.quickInput";let E_=IS;const MS=class MS{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return MS.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}};MS.ID="editor.contrib.quickInputWidget";let p6=MS;rV(E_.ID,E_,4);class wde{constructor(e,t,i,n,r){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=i,this.foreground=n,this.background=r}}function Cde(s){if(!s||!Array.isArray(s))return[];const e=[];let t=0;for(let i=0,n=s.length;i<n;i++){const r=s[i];let o=-1;if(typeof r.fontStyle=="string"){o=0;const c=r.fontStyle.split(" ");for(let u=0,d=c.length;u<d;u++)switch(c[u]){case"italic":o=o|1;break;case"bold":o=o|2;break;case"underline":o=o|4;break;case"strikethrough":o=o|8;break}}let a=null;typeof r.foreground=="string"&&(a=r.foreground);let l=null;typeof r.background=="string"&&(l=r.background),e[t++]=new wde(r.token||"",i,o,a,l)}return e}function yde(s,e){s.sort((u,d)=>{const g=Dde(u.token,d.token);return g!==0?g:u.index-d.index});let t=0,i="000000",n="ffffff";for(;s.length>=1&&s[0].token==="";){const u=s.shift();u.fontStyle!==-1&&(t=u.fontStyle),u.foreground!==null&&(i=u.foreground),u.background!==null&&(n=u.background)}const r=new xde;for(const u of e)r.getId(u);const o=r.getId(i),a=r.getId(n),l=new GE(t,o,a),c=new ZE(l);for(let u=0,d=s.length;u<d;u++){const g=s[u];c.insert(g.token,g.fontStyle,r.getId(g.foreground),r.getId(g.background))}return new sj(r,c)}const Sde=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class xde{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(Sde);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let i=this._color2id.get(e);return i||(i=++this._lastColorId,this._color2id.set(e,i),this._id2color[i]=Le.fromHex("#"+e),i)}getColorMap(){return this._id2color.slice(0)}}class sj{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(Cde(e),t)}static createFromParsedTokenTheme(e,t){return yde(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let i=this._cache.get(t);if(typeof i>"u"){const n=this._match(t),r=Lde(t);i=(n.metadata|r<<8)>>>0,this._cache.set(t,i)}return(i|e<<0)>>>0}}const kde=/\b(comment|string|regex|regexp)\b/;function Lde(s){const e=s.match(kde);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function Dde(s,e){return s<e?-1:s>e?1:0}class GE{constructor(e,t,i){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new GE(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,i){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),i!==0&&(this._background=i),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class ZE{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let i,n;t===-1?(i=e,n=""):(i=e.substring(0,t),n=e.substring(t+1));const r=this._children.get(i);return typeof r<"u"?r.match(n):this._mainRule}insert(e,t,i,n){if(e===""){this._mainRule.acceptOverwrite(t,i,n);return}const r=e.indexOf(".");let o,a;r===-1?(o=e,a=""):(o=e.substring(0,r),a=e.substring(r+1));let l=this._children.get(o);typeof l>"u"&&(l=new ZE(this._mainRule.clone()),this._children.set(o,l)),l.insert(a,t,i,n)}}function Ede(s){const e=[];for(let t=1,i=s.length;t<i;t++){const n=s[t];e[t]=`.mtk${t} { color: ${n}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}const Tde={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[tl]:"#FFFFFE",[nv]:"#000000",[iz]:"#E5EBF1",[fv]:"#D3D3D3",[gv]:"#939393",[nz]:"#ADD6FF4D"}},Nde={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[tl]:"#1E1E1E",[nv]:"#D4D4D4",[iz]:"#3A3D41",[fv]:"#404040",[gv]:"#707070",[nz]:"#ADD6FF26"}},Ide={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[tl]:"#000000",[nv]:"#FFFFFF",[fv]:"#FFFFFF",[gv]:"#FFFFFF"}},Mde={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[tl]:"#FFFFFF",[nv]:"#292929",[fv]:"#292929",[gv]:"#292929"}},Rde={IconContribution:"base.contributions.icons"};var sO;(function(s){function e(t,i){let n=t.defaults;for(;Yt.isThemeIcon(n);){const r=Qf.getIcon(n.id);if(!r)return;n=r.defaults}return n}s.getDefinition=e})(sO||(sO={}));var rO;(function(s){function e(i){return{weight:i.weight,style:i.style,src:i.src.map(n=>({format:n.format,location:n.location.toString()}))}}s.toJSONObject=e;function t(i){const n=r=>bo(r)?r:void 0;if(i&&Array.isArray(i.src)&&i.src.every(r=>bo(r.format)&&bo(r.location)))return{weight:n(i.weight),style:n(i.style),src:i.src.map(r=>({format:r.format,location:Et.parse(r.location)}))}}s.fromJSONObject=t})(rO||(rO={}));class Ade{constructor(){this._onDidChange=new re,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:b("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:b("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Yt.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,n){const r=this.iconsById[e];if(r){if(i&&!r.description){r.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=i),this._onDidChange.fire()}return r}const o={id:e,description:i,defaults:t,deprecationMessage:n};this.iconsById[e]=o;const a={$ref:"#/definitions/icons"};return n&&(a.deprecationMessage=n),i&&(a.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(r,o)=>r.id.localeCompare(o.id),t=r=>{for(;Yt.isThemeIcon(r.defaults);)r=this.iconsById[r.defaults.id];return`codicon codicon-${r?r.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const n=Object.keys(this.iconsById).map(r=>this.iconsById[r]);for(const r of n.filter(o=>!!o.description).sort(e))i.push(`|<i class="${t(r)}"></i>|${r.id}|${Yt.isThemeIcon(r.defaults)?r.defaults.id:r.id}|${r.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const r of n.filter(o=>!Yt.isThemeIcon(o.defaults)).sort(e))i.push(`|<i class="${t(r)}"></i>|${r.id}|`);return i.join(`
`)}}const Qf=new Ade;is.add(Rde.IconContribution,Qf);function Zh(s,e,t,i){return Qf.registerIcon(s,e,t,i)}function rj(){return Qf}function Pde(){const s=_W();for(const e in s){const t="\\"+s[e].toString(16);Qf.registerIcon(e,{fontCharacter:t})}}Pde();const oj="vscode://schemas/icons",aj=is.as(S2.JSONContribution);aj.registerSchema(oj,Qf.getIconSchema());const oO=new ir(()=>aj.notifySchemaChanged(oj),200);Qf.onDidChange(()=>{oO.isScheduled()||oO.schedule()});Zh("widget-close",$e.close,b("widgetClose","Icon for the close action in widgets."));Zh("goto-previous-location",$e.arrowUp,b("previousChangeIcon","Icon for goto previous editor location."));Zh("goto-next-location",$e.arrowDown,b("nextChangeIcon","Icon for goto next editor location."));Yt.modify($e.sync,"spin");Yt.modify($e.loading,"spin");function Ode(s){const e=new Qe,t=e.add(new re),i=rj();return e.add(i.onDidChange(()=>t.fire())),s&&e.add(s.onDidProductIconThemeChange(()=>t.fire())),{dispose:()=>e.dispose(),onDidChange:t.event,getCSS(){const n=s?s.getProductIconTheme():new lj,r={},o=[],a=[];for(const l of i.getIcons()){const c=n.getIcon(l);if(!c)continue;const u=c.font,d=`--vscode-icon-${l.id}-font-family`,g=`--vscode-icon-${l.id}-content`;u?(r[u.id]=u.definition,a.push(`${d}: ${yk(u.id)};`,`${g}: '${c.fontCharacter}';`),o.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; font-family: ${yk(u.id)}; }`)):(a.push(`${g}: '${c.fontCharacter}'; ${d}: 'codicon';`),o.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; }`))}for(const l in r){const c=r[l],u=c.weight?`font-weight: ${c.weight};`:"",d=c.style?`font-style: ${c.style};`:"",g=c.src.map(m=>`${du(m.location)} format('${m.format}')`).join(", ");o.push(`@font-face { src: ${g}; font-family: ${yk(l)};${u}${d} font-display: block; }`)}return o.push(`:root { ${a.join(" ")} }`),o.join(`
`)}}}class lj{getIcon(e){const t=rj();let i=e.defaults;for(;Yt.isThemeIcon(i);){const n=t.getIcon(i.id);if(!n)return;i=n.defaults}return i}}const lh="vs",b1="vs-dark",Fm="hc-black",Bm="hc-light",cj=is.as(ZV.ColorContribution),Fde=is.as(MV.ThemingContribution);class uj{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const i=t.base;e.length>0?(eC(e)?this.id=e:this.id=i+" "+e,this.themeName=e):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,Le.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=_6(this.themeData.base);for(const i in t.colors)e.has(i)||e.set(i,Le.fromHex(t.colors[i]))}this.colors=e}return this.colors}getColor(e,t){const i=this.getColors().get(e);if(i)return i;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=cj.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case lh:return qo.LIGHT;case Fm:return qo.HIGH_CONTRAST_DARK;case Bm:return qo.HIGH_CONTRAST_LIGHT;default:return qo.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const r=_6(this.themeData.base);e=r.rules,r.encodedTokensColors&&(t=r.encodedTokensColors)}const i=this.themeData.colors["editor.foreground"],n=this.themeData.colors["editor.background"];if(i||n){const r={token:""};i&&(r.foreground=i),n&&(r.background=n),e.push(r)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=sj.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,i){const r=this.tokenTheme._match([e].concat(t).join(".")).metadata,o=Ka.getForeground(r),a=Ka.getFontStyle(r);return{foreground:o,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4),strikethrough:!!(a&8)}}}function eC(s){return s===lh||s===b1||s===Fm||s===Bm}function _6(s){switch(s){case lh:return Tde;case b1:return Nde;case Fm:return Ide;case Bm:return Mde}}function uw(s){const e=_6(s);return new uj(s,e)}class Bde extends ve{constructor(){super(),this._onColorThemeChange=this._register(new re),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new re),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new lj,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(lh,uw(lh)),this._knownThemes.set(b1,uw(b1)),this._knownThemes.set(Fm,uw(Fm)),this._knownThemes.set(Bm,uw(Bm));const e=this._register(Ode(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(lh),this._onOSSchemeChanged(),this._register(e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),LW(bi,"(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return m3(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=Ca(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),ve.None}_registerShadowDomContainer(e){const t=Ca(e,i=>{i.className="monaco-colors",i.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let i=0;i<this._styleElements.length;i++)if(this._styleElements[i]===t){this._styleElements.splice(i,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!eC(t.base)&&!eC(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new uj(e,t)),eC(e)&&this._knownThemes.forEach(i=>{i.base===e&&i.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(lh),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=bi.matchMedia("(forced-colors: active)").matches;if(e!==Dm(this._theme.type)){let t;x2(this._theme.type)?t=e?Fm:b1:t=e?Bm:lh,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},i={addRule:o=>{t[o]||(e.push(o),t[o]=!0)}};Fde.getThemingParticipants().forEach(o=>o(this._theme,i,this._environment));const n=[];for(const o of cj.getColors()){const a=this._theme.getColor(o.id,!0);a&&n.push(`${j8(o.id)}: ${a.toString()};`)}i.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${n.join(`
`)} }`);const r=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(Ede(r)),this._themeCSS=e.join(`
`),this._updateCSS(),un.setColorMap(r),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const Da=Ut("themeService");var Wde=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},dL=function(s,e){return function(t,i){e(t,i,s)}};let v6=class extends ve{constructor(e,t,i){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=i,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new re,this._onDidChangeReducedMotion=new re,this._onDidChangeLinkUnderline=new re,this._accessibilityModeEnabledContext=$re.bindTo(this._contextKeyService);const n=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("editor.accessibilitySupport")&&(n(),this._onDidChangeScreenReaderOptimized.fire()),o.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),n(),this._register(this.onDidChangeScreenReaderOptimized(()=>n()));const r=bi.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=r.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._linkUnderlinesEnabled=this._configurationService.getValue("accessibility.underlineLinks"),this.initReducedMotionListeners(r),this.initLinkUnderlineListeners()}initReducedMotionListeners(e){this._register(ge(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=()=>{const i=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",i),this._layoutService.mainContainer.classList.toggle("enable-motion",!i)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}initLinkUnderlineListeners(){this._register(this._configurationService.onDidChangeConfiguration(t=>{if(t.affectsConfiguration("accessibility.underlineLinks")){const i=this._configurationService.getValue("accessibility.underlineLinks");this._linkUnderlinesEnabled=i,this._onDidChangeLinkUnderline.fire()}}));const e=()=>{const t=this._linkUnderlinesEnabled;this._layoutService.mainContainer.classList.toggle("underline-links",t)};e(),this._register(this.onDidChangeLinkUnderlines(()=>e()))}onDidChangeLinkUnderlines(e){return this._onDidChangeLinkUnderline.event(e)}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};v6=Wde([dL(0,ai),dL(1,qh),dL(2,Xi)],v6);var X2=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Hl=function(s,e){return function(t,i){e(t,i,s)}},Vg,Y0;let b6=class{constructor(e,t,i){this._commandService=e,this._keybindingService=t,this._hiddenStates=new w6(i)}createMenu(e,t,i){return new yy(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t)}getMenuActions(e,t,i){const n=new yy(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t),r=n.getActions(i);return n.dispose(),r}resetHiddenStates(e){this._hiddenStates.reset(e)}};b6=X2([Hl(0,xo),Hl(1,ps),Hl(2,V2)],b6);var _f;let w6=(_f=class{constructor(e){this._storageService=e,this._disposables=new Qe,this._onDidChange=new re,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(Vg._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,Vg._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const t=e.get(Vg._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){return this._hiddenByDefaultCache.get(`${e.id}/${t}`)??!1}setDefaultState(e,t,i){this._hiddenByDefaultCache.set(`${e.id}/${t}`,i)}isHidden(e,t){const i=this._isHiddenByDefault(e,t),n=this._data[e.id]?.includes(t)??!1;return i?!n:n}updateHidden(e,t,i){this._isHiddenByDefault(e,t)&&(i=!i);const r=this._data[e.id];if(i)r?r.indexOf(t)<0&&r.push(t):this._data[e.id]=[t];else if(r){const o=r.indexOf(t);o>=0&&_Z(r,o),r.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(Vg._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}},Vg=_f,_f._key="menu.hiddenCommands",_f);w6=Vg=X2([Hl(0,V2)],w6);class w1{constructor(e,t){this._id=e,this._collectContextKeysForSubmenus=t,this._menuGroups=[],this._allMenuIds=new Set,this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get allMenuIds(){return this._allMenuIds}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=this._sort(Jm.getMenuItems(this._id));let t;for(const i of e){const n=i.group||"";(!t||t[0]!==n)&&(t=[n,[]],this._menuGroups.push(t)),t[1].push(i),this._collectContextKeysAndSubmenuIds(i)}this._allMenuIds.add(this._id)}_sort(e){return e}_collectContextKeysAndSubmenuIds(e){if(w1._fillInKbExprKeys(e.when,this._structureContextKeys),r1(e)){if(e.command.precondition&&w1._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;w1._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(Jm.getMenuItems(e.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(e.submenu))}static _fillInKbExprKeys(e,t){if(e)for(const i of e.keys())t.add(i)}}let C6=Y0=class extends w1{constructor(e,t,i,n,r,o){super(e,i),this._hiddenStates=t,this._commandService=n,this._keybindingService=r,this._contextKeyService=o,this.refresh()}createActionGroups(e){const t=[];for(const i of this._menuGroups){const[n,r]=i;let o;for(const a of r)if(this._contextKeyService.contextMatchesRules(a.when)){const l=r1(a);l&&this._hiddenStates.setDefaultState(this._id,a.command.id,!!a.isHiddenByDefault);const c=Vde(this._id,l?a.command:a,this._hiddenStates);if(l){const u=hj(this._commandService,this._keybindingService,a.command.id,a.when);(o??=[]).push(new iu(a.command,a.alt,e,c,u,this._contextKeyService,this._commandService))}else{const u=new Y0(a.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(e),d=$s.join(...u.map(g=>g[1]));d.length>0&&(o??=[]).push(new o1(a,c,d))}}o&&o.length>0&&t.push([n,o])}return t}_sort(e){return e.sort(Y0._compareMenuItems)}static _compareMenuItems(e,t){const i=e.group,n=t.group;if(i!==n){if(i){if(!n)return-1}else return 1;if(i==="navigation")return-1;if(n==="navigation")return 1;const a=i.localeCompare(n);if(a!==0)return a}const r=e.order||0,o=t.order||0;return r<o?-1:r>o?1:Y0._compareTitles(r1(e)?e.command.title:e.title,r1(t)?t.command.title:t.title)}static _compareTitles(e,t){const i=typeof e=="string"?e:e.original,n=typeof t=="string"?t:t.original;return i.localeCompare(n)}};C6=Y0=X2([Hl(3,xo),Hl(4,ps),Hl(5,ai)],C6);let yy=class{constructor(e,t,i,n,r,o){this._disposables=new Qe,this._menuInfo=new C6(e,t,i.emitEventsForSubmenuChanges,n,r,o);const a=new ir(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},i.eventDebounceDelay);this._disposables.add(a),this._disposables.add(Jm.onDidChangeMenu(d=>{for(const g of this._menuInfo.allMenuIds)if(d.has(g)){a.schedule();break}}));const l=this._disposables.add(new Qe),c=d=>{let g=!1,m=!1,_=!1;for(const v of d)if(g=g||v.isStructuralChange,m=m||v.isEnablementChange,_=_||v.isToggleChange,g&&m&&_)break;return{menu:this,isStructuralChange:g,isEnablementChange:m,isToggleChange:_}},u=()=>{l.add(o.onDidChangeContext(d=>{const g=d.affectsSome(this._menuInfo.structureContextKeys),m=d.affectsSome(this._menuInfo.preconditionContextKeys),_=d.affectsSome(this._menuInfo.toggledContextKeys);(g||m||_)&&this._onDidChange.fire({menu:this,isStructuralChange:g,isEnablementChange:m,isToggleChange:_})})),l.add(t.onDidChange(d=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new aW({onWillAddFirstListener:u,onDidRemoveLastListener:l.clear.bind(l),delay:i.eventDebounceDelay,merge:c}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};yy=X2([Hl(3,xo),Hl(4,ps),Hl(5,ai)],yy);function Vde(s,e,t){const i=EJ(e)?e.submenu.id:e.id,n=typeof e.title=="string"?e.title:e.title.value,r=Sm({id:`hide/${s.id}/${i}`,label:b("hide.label","Hide '{0}'",n),run(){t.updateHidden(s,i,!0)}}),o=Sm({id:`toggle/${s.id}/${i}`,label:n,get checked(){return!t.isHidden(s,i)},run(){t.updateHidden(s,i,!!this.checked)}});return{hide:r,toggle:o,get isHidden(){return!o.checked}}}function hj(s,e,t,i=void 0,n=!0){return Sm({id:`configureKeybinding/${t}`,label:b("configure keybinding","Configure Keybinding"),enabled:n,run(){const o=!!!e.lookupKeybinding(t)&&i?i.serialize():void 0;s.executeCommand("workbench.action.openGlobalKeybindings",`@command:${t}`+(o?` +when:${o}`:""))}})}var zde=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},aO=function(s,e){return function(t,i){e(t,i,s)}},y6;const lO="application/vnd.code.resources";var vf;let S6=(vf=class extends ve{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(Mh||DW)&&this.installWebKitWriteTextWorkaround(),this._register(Te.runAndSubscribe(c2,({window:i,disposables:n})=>{n.add(ge(i.document,"copy",()=>this.clearResourcesState()))},{window:bi,disposables:this._store}))}installWebKitWriteTextWorkaround(){const e=()=>{const t=new RW;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,z0().navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(async i=>{(!(i instanceof Error)||i.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(i)})};this._register(Te.runAndSubscribe(this.layoutService.onDidAddContainer,({container:t,disposables:i})=>{i.add(ge(t,"click",e)),i.add(ge(t,"keydown",e))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.clearResourcesState(),t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return await z0().navigator.clipboard.writeText(e)}catch(i){console.error(i)}this.fallbackWriteText(e)}fallbackWriteText(e){const t=k8(),i=t.activeElement,n=t.body.appendChild(at("textarea",{"aria-hidden":!0}));n.style.height="1px",n.style.width="1px",n.style.position="absolute",n.value=e,n.focus(),n.select(),t.execCommand("copy"),Jn(i)&&i.focus(),n.remove()}async readText(e){if(e)return this.mapTextToType.get(e)||"";try{return await z0().navigator.clipboard.readText()}catch(t){console.error(t)}return""}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}async readResources(){try{const t=await z0().navigator.clipboard.read();for(const i of t)if(i.types.includes(`web ${lO}`)){const n=await i.getType(`web ${lO}`);return JSON.parse(await n.text()).map(o=>Et.from(o))}}catch{}const e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResourcesState(),this.resources}async computeResourcesStateHash(){if(this.resources.length===0)return;const e=await this.readText();return jW(e.substring(0,y6.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearInternalState(){this.clearResourcesState()}clearResourcesState(){this.resources=[],this.resourcesStateHash=void 0}},y6=vf,vf.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3,vf);S6=y6=zde([aO(0,qh),aO(1,ol)],S6);const YE=Ut("clipboardService");var Hde=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},jde=function(s,e){return function(t,i){e(t,i,s)}};const C1="data-keybinding-context";class XE{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return{...this._value}}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}}const RS=class RS extends XE{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}};RS.INSTANCE=new RS;let fp=RS;const z1=class z1 extends XE{constructor(e,t,i){super(e,null),this._configurationService=t,this._values=u1.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(n=>{if(n.source===7){const r=Array.from(this._values,([o])=>o);this._values.clear(),i.fire(new uO(r))}else{const r=[];for(const o of n.affectedKeys){const a=`config.${o}`,l=this._values.findSuperstr(a);l!==void 0&&(r.push(...ei.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(r.push(a),this._values.delete(a))}i.fire(new uO(r))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(z1._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(z1._keyPrefix.length),i=this._configurationService.getValue(t);let n;switch(typeof i){case"number":case"boolean":case"string":n=i;break;default:Array.isArray(i)?n=JSON.stringify(i):n=i}return this._values.set(e,n),n}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}};z1._keyPrefix="config.";let x6=z1;class Ude{constructor(e,t,i){this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class cO{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class uO{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}class $de{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}function qde(s,e){return s.allKeysContainedIn(new Set(Object.keys(e)))}class dj extends ve{constructor(e){super(),this._onDidChangeContext=this._register(new J1({merge:t=>new $de(t)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Ude(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Kde(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const i=this.getContextValuesContainer(this._myContextId);i&&i.setValue(e,t)&&this._onDidChangeContext.fire(new cO(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new cO(e))}getContext(e){return this._isDisposed?fp.INSTANCE:this.getContextValuesContainer(Gde(e))}dispose(){super.dispose(),this._isDisposed=!0}}let k6=class extends dj{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0;const t=this._register(new x6(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t)}getContextValuesContainer(e){return this._isDisposed?fp.INSTANCE:this._contexts.get(e)||fp.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new XE(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};k6=Hde([jde(0,Xi)],k6);class Kde extends dj{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new uu),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(C1)){let i="";this._domNode.classList&&(i=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${i?": "+i:""}`)}this._domNode.setAttribute(C1,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const i=this._parent.getContextValuesContainer(this._myContextId).value;qde(e,i)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(C1),super.dispose())}getContextValuesContainer(e){return this._isDisposed?fp.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function Gde(s){for(;s;){if(s.hasAttribute(C1)){const e=s.getAttribute(C1);return e?parseInt(e,10):NaN}s=s.parentElement}return 0}function Zde(s,e,t){s.get(ai).createKey(String(e),Yde(t))}function Yde(s){return KB(s,e=>{if(typeof e=="object"&&e.$mid===1)return Et.revive(e).toString();if(e instanceof Et)return e.toString()})}Dr.registerCommand("_setContext",Zde);Dr.registerCommand({id:"getContextKeyInfo",handler(){return[...Je.all()].sort((s,e)=>s.key.localeCompare(e.key))},metadata:{description:b("getContextKeyInfo","A command that returns information about context keys"),args:[]}});Dr.registerCommand("_generateContextKeyInfo",function(){const s=[],e=new Set;for(const t of Je.all())e.has(t.key)||(e.add(t.key),s.push(t));s.sort((t,i)=>t.key.localeCompare(i.key)),console.log(JSON.stringify(s,void 0,2))});let Xde=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}};class hO{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),n=this.lookupOrInsertNode(t);i.outgoing.set(n.key,n),n.incoming.set(i.key,i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new Xde(t,e),this._nodes.set(t,i)),i}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,i]of this._nodes)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const i=new Set([e]),n=this._findCycle(t,i);if(n)return n}}_findCycle(e,t){for(const[i,n]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const r=this._findCycle(n,t);if(r)return r;t.delete(i)}}}class Tp{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}get(e){return this._entries.get(e)}}const Qde=!1;class dO extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class Sy{constructor(e=new Tp,t=!1,i,n=Qde){this._services=e,this._strict=t,this._parent=i,this._enableTracing=n,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(hi,this),this._globalGraph=n?i?._globalGraph??new hO(r=>r):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,ms(this._children),this._children.clear();for(const e of this._servicesToMaybeDispose)rW(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,t){this._throwIfDisposed();const i=this,n=new class extends Sy{dispose(){i._children.delete(n),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(n),t?.add(n),n}invokeFunction(e,...t){this._throwIfDisposed();const i=y1.traceInvocation(this._enableTracing,e);let n=!1;try{return e({get:o=>{if(n)throw s8("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(o,i);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...t)}finally{n=!0,i.stop()}}createInstance(e,...t){this._throwIfDisposed();let i,n;return e instanceof Il?(i=y1.traceCreation(this._enableTracing,e.ctor),n=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=y1.traceCreation(this._enableTracing,e),n=this._createInstance(e,t,i)),i.stop(),n}_createInstance(e,t=[],i){const n=Xa.getServiceDependencies(e).sort((a,l)=>a.index-l.index),r=[];for(const a of n){const l=this._getOrCreateServiceInstance(a.id,i);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),r.push(l)}const o=n.length>0?n[0].index:t.length;if(t.length!==o){console.trace(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);const a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return Reflect.construct(e,t.concat(r))}_setCreatedServiceInstance(e,t){if(this._services.get(e)instanceof Il)this._services.set(e,t);else if(this._parent)this._parent._setCreatedServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const i=this._getServiceInstanceOrDescriptor(e);return i instanceof Il?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){const n=new hO(l=>l.id.toString());let r=0;const o=[{id:e,desc:t,_trace:i}],a=new Set;for(;o.length;){const l=o.pop();if(!a.has(String(l.id))){if(a.add(String(l.id)),n.lookupOrInsertNode(l),r++>1e3)throw new dO(n);for(const c of Xa.getServiceDependencies(l.desc.ctor)){const u=this._getServiceInstanceOrDescriptor(c.id);if(u||this._throwIfStrict(`[createInstance] ${e} depends on ${c.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(l.id),String(c.id)),u instanceof Il){const d={id:c.id,desc:u,_trace:l._trace.branch(c.id,!0)};n.insertEdge(l,d),o.push(d)}}}}for(;;){const l=n.roots();if(l.length===0){if(!n.isEmpty())throw new dO(n);break}for(const{data:c}of l){if(this._getServiceInstanceOrDescriptor(c.id)instanceof Il){const d=this._createServiceInstanceWithOwner(c.id,c.desc.ctor,c.desc.staticArguments,c.desc.supportsDelayedInstantiation,c._trace);this._setCreatedServiceInstance(c.id,d)}n.removeNode(c)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],n,r){if(this._services.get(e)instanceof Il)return this._createServiceInstance(e,t,i,n,r,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,n,r);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,i=[],n,r,o){if(n){const a=new Sy(void 0,this._strict,this,this._enableTracing);a._globalGraphImplicitDependency=String(e);const l=new Map,c=new sQ(()=>{const u=a._createInstance(t,i,r);for(const[d,g]of l){const m=u[d];if(typeof m=="function")for(const _ of g)_.disposable=m.apply(u,_.listener)}return l.clear(),o.add(u),u});return new Proxy(Object.create(null),{get(u,d){if(!c.isInitialized&&typeof d=="string"&&(d.startsWith("onDid")||d.startsWith("onWill"))){let _=l.get(d);return _||(_=new zr,l.set(d,_)),(w,y,S)=>{if(c.isInitialized)return c.value[d](w,y,S);{const k={listener:[w,y,S],disposable:void 0},L=_.push(k);return bt(()=>{L(),k.disposable?.dispose()})}}}if(d in u)return u[d];const g=c.value;let m=g[d];return typeof m!="function"||(m=m.bind(g),u[d]=m),m},set(u,d,g){return c.value[d]=g,!0},getPrototypeOf(u){return t.prototype}})}else{const a=this._createInstance(t,i,r);return o.add(a),a}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}const lo=class lo{static traceInvocation(e,t){return e?new lo(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):lo._None}static traceCreation(e,t){return e?new lo(1,t.name):lo._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const i=new lo(3,e.toString());return this._dep.push([e,t,i]),i}stop(){const e=Date.now()-this._start;lo._totals+=e;let t=!1;function i(r,o){const a=[],l=new Array(r+1).join("	");for(const[c,u,d]of o._dep)if(u&&d){t=!0,a.push(`${l}CREATES -> ${c}`);const g=i(r+1,d);g&&a.push(g)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}const n=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${lo._totals.toFixed(2)}ms)`];(e>2||t)&&lo.all.add(n.join(`
`))}};lo.all=new Set,lo._None=new class extends lo{constructor(){super(0,null)}stop(){}branch(){return this}},lo._totals=0;let y1=lo;const Jde=new Set([Dt.inMemory,Dt.vscodeSourceControl,Dt.walkThrough,Dt.walkThroughSnippet,Dt.vscodeChatCodeBlock]);class efe{constructor(){this._byResource=new Co,this._byOwner=new Map}set(e,t,i){let n=this._byResource.get(e);n||(n=new Map,this._byResource.set(e,n)),n.set(t,i);let r=this._byOwner.get(t);r||(r=new Co,this._byOwner.set(t,r)),r.set(e,i)}get(e,t){return this._byResource.get(e)?.get(t)}delete(e,t){let i=!1,n=!1;const r=this._byResource.get(e);r&&(i=r.delete(t));const o=this._byOwner.get(t);if(o&&(n=o.delete(e)),i!==n)throw new Error("illegal state");return i&&n}values(e){return typeof e=="string"?this._byOwner.get(e)?.values()??ei.empty():Et.isUri(e)?this._byResource.get(e)?.values()??ei.empty():ei.map(ei.concat(...this._byOwner.values()),t=>t[1])}}class tfe{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new Co,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const i=this._data.get(t);i&&this._substract(i);const n=this._resourceStats(t);this._add(n),this._data.set(t,n)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(Jde.has(e.scheme))return t;for(const{severity:i}of this._service.read({resource:e}))i===Ho.Error?t.errors+=1:i===Ho.Warning?t.warnings+=1:i===Ho.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class th{constructor(){this._onMarkerChanged=new aW({delay:0,merge:th._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new efe,this._stats=new tfe(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const i of t||[])this.changeOne(e,i,[])}changeOne(e,t,i){if(CZ(i))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const n=[];for(const r of i){const o=th._toMarker(e,t,r);o&&n.push(o)}this._data.set(t,e,n),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,i){let{code:n,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:u,endColumn:d,relatedInformation:g,tags:m}=i;if(o)return l=l>0?l:1,c=c>0?c:1,u=u>=l?u:l,d=d>0?d:c,{resource:t,owner:e,code:n,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:u,endColumn:d,relatedInformation:g,tags:m}}changeAll(e,t){const i=[],n=this._data.values(e);if(n)for(const r of n){const o=ei.first(r);o&&(i.push(o.resource),this._data.delete(o.resource,e))}if(e2(t)){const r=new Co;for(const{resource:o,marker:a}of t){const l=th._toMarker(e,o,a);if(!l)continue;const c=r.get(o);c?c.push(l):(r.set(o,[l]),i.push(o))}for(const[o,a]of r)this._data.set(o,e,a)}i.length>0&&this._onMarkerChanged.fire(i)}read(e=Object.create(null)){let{owner:t,resource:i,severities:n,take:r}=e;if((!r||r<0)&&(r=-1),t&&i){const o=this._data.get(i,t);if(o){const a=[];for(const l of o)if(th._accept(l,n)){const c=a.push(l);if(r>0&&c===r)break}return a}else return[]}else if(!t&&!i){const o=[];for(const a of this._data.values())for(const l of a)if(th._accept(l,n)){const c=o.push(l);if(r>0&&c===r)return o}return o}else{const o=this._data.values(i??t),a=[];for(const l of o)for(const c of l)if(th._accept(c,n)){const u=a.push(c);if(r>0&&u===r)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new Co;for(const i of e)for(const n of i)t.set(n,!0);return Array.from(t.keys())}}class ife extends ve{get configurationModel(){return this._configurationModel}constructor(e){super(),this.logService=e,this._configurationModel=Xn.createEmptyModel(this.logService)}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=Xn.createEmptyModel(this.logService);const e=is.as(Gf.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const i=this.getConfigurationDefaultOverrides();for(const n of e){const r=i[n],o=t[n];r!==void 0?this._configurationModel.setValue(n,r):o?this._configurationModel.setValue(n,o.default):this._configurationModel.removeValue(n)}}}const Q2=Ut("accessibilitySignalService"),Ht=class Ht{static register(e){return new Ht(e.fileName)}constructor(e){this.fileName=e}};Ht.error=Ht.register({fileName:"error.mp3"}),Ht.warning=Ht.register({fileName:"warning.mp3"}),Ht.success=Ht.register({fileName:"success.mp3"}),Ht.foldedArea=Ht.register({fileName:"foldedAreas.mp3"}),Ht.break=Ht.register({fileName:"break.mp3"}),Ht.quickFixes=Ht.register({fileName:"quickFixes.mp3"}),Ht.taskCompleted=Ht.register({fileName:"taskCompleted.mp3"}),Ht.taskFailed=Ht.register({fileName:"taskFailed.mp3"}),Ht.terminalBell=Ht.register({fileName:"terminalBell.mp3"}),Ht.diffLineInserted=Ht.register({fileName:"diffLineInserted.mp3"}),Ht.diffLineDeleted=Ht.register({fileName:"diffLineDeleted.mp3"}),Ht.diffLineModified=Ht.register({fileName:"diffLineModified.mp3"}),Ht.chatRequestSent=Ht.register({fileName:"chatRequestSent.mp3"}),Ht.chatResponseReceived1=Ht.register({fileName:"chatResponseReceived1.mp3"}),Ht.chatResponseReceived2=Ht.register({fileName:"chatResponseReceived2.mp3"}),Ht.chatResponseReceived3=Ht.register({fileName:"chatResponseReceived3.mp3"}),Ht.chatResponseReceived4=Ht.register({fileName:"chatResponseReceived4.mp3"}),Ht.clear=Ht.register({fileName:"clear.mp3"}),Ht.save=Ht.register({fileName:"save.mp3"}),Ht.format=Ht.register({fileName:"format.mp3"}),Ht.voiceRecordingStarted=Ht.register({fileName:"voiceRecordingStarted.mp3"}),Ht.voiceRecordingStopped=Ht.register({fileName:"voiceRecordingStopped.mp3"}),Ht.progress=Ht.register({fileName:"progress.mp3"});let Ri=Ht;class nfe{constructor(e){this.randomOneOf=e}}const vt=class vt{constructor(e,t,i,n,r,o){this.sound=e,this.name=t,this.legacySoundSettingsKey=i,this.settingsKey=n,this.legacyAnnouncementSettingsKey=r,this.announcementMessage=o}static register(e){const t=new nfe("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),i=new vt(t,e.name,e.legacySoundSettingsKey,e.settingsKey,e.legacyAnnouncementSettingsKey,e.announcementMessage);return vt._signals.add(i),i}};vt._signals=new Set,vt.errorAtPosition=vt.register({name:b("accessibilitySignals.positionHasError.name","Error at Position"),sound:Ri.error,announcementMessage:b("accessibility.signals.positionHasError","Error"),settingsKey:"accessibility.signals.positionHasError",delaySettingsKey:"accessibility.signalOptions.delays.errorAtPosition"}),vt.warningAtPosition=vt.register({name:b("accessibilitySignals.positionHasWarning.name","Warning at Position"),sound:Ri.warning,announcementMessage:b("accessibility.signals.positionHasWarning","Warning"),settingsKey:"accessibility.signals.positionHasWarning",delaySettingsKey:"accessibility.signalOptions.delays.warningAtPosition"}),vt.errorOnLine=vt.register({name:b("accessibilitySignals.lineHasError.name","Error on Line"),sound:Ri.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:b("accessibility.signals.lineHasError","Error on Line"),settingsKey:"accessibility.signals.lineHasError"}),vt.warningOnLine=vt.register({name:b("accessibilitySignals.lineHasWarning.name","Warning on Line"),sound:Ri.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:b("accessibility.signals.lineHasWarning","Warning on Line"),settingsKey:"accessibility.signals.lineHasWarning"}),vt.foldedArea=vt.register({name:b("accessibilitySignals.lineHasFoldedArea.name","Folded Area on Line"),sound:Ri.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:b("accessibility.signals.lineHasFoldedArea","Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"}),vt.break=vt.register({name:b("accessibilitySignals.lineHasBreakpoint.name","Breakpoint on Line"),sound:Ri.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:b("accessibility.signals.lineHasBreakpoint","Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"}),vt.inlineSuggestion=vt.register({name:b("accessibilitySignals.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:Ri.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"}),vt.terminalQuickFix=vt.register({name:b("accessibilitySignals.terminalQuickFix.name","Terminal Quick Fix"),sound:Ri.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:b("accessibility.signals.terminalQuickFix","Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"}),vt.onDebugBreak=vt.register({name:b("accessibilitySignals.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:Ri.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:b("accessibility.signals.onDebugBreak","Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"}),vt.noInlayHints=vt.register({name:b("accessibilitySignals.noInlayHints","No Inlay Hints on Line"),sound:Ri.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:b("accessibility.signals.noInlayHints","No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"}),vt.taskCompleted=vt.register({name:b("accessibilitySignals.taskCompleted","Task Completed"),sound:Ri.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:b("accessibility.signals.taskCompleted","Task Completed"),settingsKey:"accessibility.signals.taskCompleted"}),vt.taskFailed=vt.register({name:b("accessibilitySignals.taskFailed","Task Failed"),sound:Ri.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:b("accessibility.signals.taskFailed","Task Failed"),settingsKey:"accessibility.signals.taskFailed"}),vt.terminalCommandFailed=vt.register({name:b("accessibilitySignals.terminalCommandFailed","Terminal Command Failed"),sound:Ri.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:b("accessibility.signals.terminalCommandFailed","Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"}),vt.terminalCommandSucceeded=vt.register({name:b("accessibilitySignals.terminalCommandSucceeded","Terminal Command Succeeded"),sound:Ri.success,announcementMessage:b("accessibility.signals.terminalCommandSucceeded","Command Succeeded"),settingsKey:"accessibility.signals.terminalCommandSucceeded"}),vt.terminalBell=vt.register({name:b("accessibilitySignals.terminalBell","Terminal Bell"),sound:Ri.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:b("accessibility.signals.terminalBell","Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"}),vt.notebookCellCompleted=vt.register({name:b("accessibilitySignals.notebookCellCompleted","Notebook Cell Completed"),sound:Ri.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:b("accessibility.signals.notebookCellCompleted","Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"}),vt.notebookCellFailed=vt.register({name:b("accessibilitySignals.notebookCellFailed","Notebook Cell Failed"),sound:Ri.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:b("accessibility.signals.notebookCellFailed","Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"}),vt.diffLineInserted=vt.register({name:b("accessibilitySignals.diffLineInserted","Diff Line Inserted"),sound:Ri.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"}),vt.diffLineDeleted=vt.register({name:b("accessibilitySignals.diffLineDeleted","Diff Line Deleted"),sound:Ri.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"}),vt.diffLineModified=vt.register({name:b("accessibilitySignals.diffLineModified","Diff Line Modified"),sound:Ri.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"}),vt.chatRequestSent=vt.register({name:b("accessibilitySignals.chatRequestSent","Chat Request Sent"),sound:Ri.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:b("accessibility.signals.chatRequestSent","Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"}),vt.chatResponseReceived=vt.register({name:b("accessibilitySignals.chatResponseReceived","Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[Ri.chatResponseReceived1,Ri.chatResponseReceived2,Ri.chatResponseReceived3,Ri.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"}),vt.progress=vt.register({name:b("accessibilitySignals.progress","Progress"),sound:Ri.progress,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.progress",announcementMessage:b("accessibility.signals.progress","Progress"),settingsKey:"accessibility.signals.progress"}),vt.clear=vt.register({name:b("accessibilitySignals.clear","Clear"),sound:Ri.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:b("accessibility.signals.clear","Clear"),settingsKey:"accessibility.signals.clear"}),vt.save=vt.register({name:b("accessibilitySignals.save","Save"),sound:Ri.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:b("accessibility.signals.save","Save"),settingsKey:"accessibility.signals.save"}),vt.format=vt.register({name:b("accessibilitySignals.format","Format"),sound:Ri.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:b("accessibility.signals.format","Format"),settingsKey:"accessibility.signals.format"}),vt.voiceRecordingStarted=vt.register({name:b("accessibilitySignals.voiceRecordingStarted","Voice Recording Started"),sound:Ri.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"}),vt.voiceRecordingStopped=vt.register({name:b("accessibilitySignals.voiceRecordingStopped","Voice Recording Stopped"),sound:Ri.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"});let Ml=vt;class sfe extends ve{constructor(e,t=[]){super(),this.logger=new NJ([e,...t]),this._register(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}}const rfe=[];function ofe(){return rfe.slice(0)}class afe{getParseResult(e){}}var Jl=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},on=function(s,e){return function(t,i){e(t,i,s)}};class lfe{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new re}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let L6=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new zY(new lfe(t))):Promise.reject(new Error("Model not found"))}};L6=Jl([on(0,ar)],L6);const AS=class AS{show(){return AS.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}};AS.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};let D6=AS;class cfe{withProgress(e,t,i){return t({report:()=>{}})}}class ufe{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}}class hfe{async confirm(e){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}}doConfirm(e,t){let i=e;return t&&(i=i+`

`+t),bi.confirm(i)}async prompt(e){let t;if(this.doConfirm(e.message,e.detail)){const n=[...e.buttons??[]];e.cancelButton&&typeof e.cancelButton!="string"&&typeof e.cancelButton!="boolean"&&n.push(e.cancelButton),t=await n[0]?.run({checkboxChecked:!1})}return{result:t}}async error(e,t){await this.prompt({type:Cn.Error,message:e,detail:t})}}const H1=class H1{info(e){return this.notify({severity:Cn.Info,message:e})}warn(e){return this.notify({severity:Cn.Warning,message:e})}error(e){return this.notify({severity:Cn.Error,message:e})}notify(e){switch(e.severity){case Cn.Error:console.error(e.message);break;case Cn.Warning:console.warn(e.message);break;default:console.log(e.message);break}return H1.NO_OP}prompt(e,t,i,n){return H1.NO_OP}status(e,t){return ve.None}};H1.NO_OP=new Jte;let E6=H1,T6=class{constructor(e){this._onWillExecuteCommand=new re,this._onDidExecuteCommand=new re,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const i=Dr.getCommand(e);if(!i)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const n=this._instantiationService.invokeFunction.apply(this._instantiationService,[i.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(n)}catch(n){return Promise.reject(n)}}};T6=Jl([on(0,hi)],T6);let gp=class extends _oe{constructor(e,t,i,n,r,o){super(e,t,i,n,r),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=m=>{const _=new Qe;_.add(ge(m,Ne.KEY_DOWN,v=>{const w=new Ni(v);this._dispatch(w,w.target)&&(w.preventDefault(),w.stopPropagation())})),_.add(ge(m,Ne.KEY_UP,v=>{const w=new Ni(v);this._singleModifierDispatch(w,w.target)&&w.preventDefault()})),this._domNodeListeners.push(new dfe(m,_))},l=m=>{for(let _=0;_<this._domNodeListeners.length;_++){const v=this._domNodeListeners[_];v.domNode===m&&(this._domNodeListeners.splice(_,1),v.dispose())}},c=m=>{m.getOption(61)||a(m.getContainerDomNode())},u=m=>{m.getOption(61)||l(m.getContainerDomNode())};this._register(o.onCodeEditorAdd(c)),this._register(o.onCodeEditorRemove(u)),o.listCodeEditors().forEach(c);const d=m=>{a(m.getContainerDomNode())},g=m=>{l(m.getContainerDomNode())};this._register(o.onDiffEditorAdd(d)),this._register(o.onDiffEditorRemove(g)),o.listDiffEditors().forEach(d)}addDynamicKeybinding(e,t,i,n){return Vl(Dr.registerCommand(e,i),this.addDynamicKeybindings([{keybinding:t,command:e,when:n}]))}addDynamicKeybindings(e){const t=e.map(i=>({keybinding:s3(i.keybinding,ha),command:i.command??null,commandArgs:i.commandArgs,when:i.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}));return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),bt(()=>{for(let i=0;i<this._dynamicKeybindings.length;i++)if(this._dynamicKeybindings[i]===t[0]){this._dynamicKeybindings.splice(i,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(Q_.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new c1(e,t,i=>this._log(i))}return this._cachedResolver}_documentHasFocus(){return bi.document.hasFocus()}_toNormalizedKeybindingItems(e,t){const i=[];let n=0;for(const r of e){const o=r.when||void 0,a=r.keybinding;if(!a)i[n++]=new zA(void 0,r.command,r.commandArgs,o,t,null,!1);else{const l=p_.resolveKeybinding(a,ha);for(const c of l)i[n++]=new zA(c,r.command,r.commandArgs,o,t,null,!1)}}return i}resolveKeyboardEvent(e){const t=new Lf(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new p_([t],ha)}};gp=Jl([on(0,ai),on(1,xo),on(2,qf),on(3,al),on(4,ol),on(5,An)],gp);class dfe extends ve{constructor(e,t){super(),this.domNode=e,this._register(t)}}function fO(s){return s&&typeof s=="object"&&(!s.overrideIdentifier||typeof s.overrideIdentifier=="string")&&(!s.resource||s.resource instanceof Et)}let xy=class{constructor(e){this.logService=e,this._onDidChangeConfiguration=new re,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const t=new ife(e);this._configuration=new M2(t.reload(),Xn.createEmptyModel(e),Xn.createEmptyModel(e),Xn.createEmptyModel(e),Xn.createEmptyModel(e),Xn.createEmptyModel(e),new Co,Xn.createEmptyModel(e),new Co,e),t.dispose()}getValue(e,t){const i=typeof e=="string"?e:void 0,n=fO(e)?e:fO(t)?t:{};return this._configuration.getValue(i,n,void 0)}updateValues(e){const t={data:this._configuration.toData()},i=[];for(const n of e){const[r,o]=n;this.getValue(r)!==o&&(this._configuration.updateValue(r,o),i.push(r))}if(i.length>0){const n=new doe({keys:i,overrides:[]},t,this._configuration,void 0,this.logService);n.source=8,this._onDidChangeConfiguration.fire(n)}return Promise.resolve()}updateValue(e,t,i,n){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}};xy=Jl([on(0,ol)],xy);let N6=class{constructor(e,t,i){this.configurationService=e,this.modelService=t,this.languageService=i,this._onDidChangeConfiguration=new re,this.configurationService.onDidChangeConfiguration(n=>{this._onDidChangeConfiguration.fire({affectedKeys:n.affectedKeys,affectsConfiguration:(r,o)=>n.affectsConfiguration(o)})})}getValue(e,t,i){const n=ce.isIPosition(t)?t:null,r=n?typeof i=="string"?i:void 0:typeof t=="string"?t:void 0,o=e?this.getLanguage(e,n):void 0;return typeof r>"u"?this.configurationService.getValue({resource:e,overrideIdentifier:o}):this.configurationService.getValue(r,{resource:e,overrideIdentifier:o})}getLanguage(e,t){const i=this.modelService.getModel(e);return i?t?i.getLanguageIdAtPosition(t.lineNumber,t.column):i.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}};N6=Jl([on(0,Xi),on(1,ar),on(2,$n)],N6);let I6=class{constructor(e){this.configurationService=e}getEOL(e,t){const i=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return i&&typeof i=="string"&&i!=="auto"?i:xr||qt?`
`:`\r
`}};I6=Jl([on(0,Xi)],I6);class ffe{publicLog2(){}}const j1=class j1{constructor(){const e=Et.from({scheme:j1.SCHEME,authority:"model",path:"/"});this.workspace={id:Moe,folders:[new Noe({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===j1.SCHEME?this.workspace.folders[0]:null}};j1.SCHEME="inmemory";let M6=j1;function ky(s,e,t){if(!e||!(s instanceof xy))return;const i=[];Object.keys(e).forEach(n=>{ooe(n)&&i.push([`editor.${n}`,e[n]]),t&&aoe(n)&&i.push([`diffEditor.${n}`,e[n]])}),i.length>0&&s.updateValues(i)}let R6=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}async apply(e,t){const i=Array.isArray(e)?e:aE.convert(e),n=new Map;for(const a of i){if(!(a instanceof af))throw new Error("bad edit - only text edits are supported");const l=this._modelService.getModel(a.resource);if(!l)throw new Error("bad edit - model not found");if(typeof a.versionId=="number"&&l.getVersionId()!==a.versionId)throw new Error("bad state - model changed in the meantime");let c=n.get(l);c||(c=[],n.set(l,c)),c.push(coe.replaceMove(Q.lift(a.textEdit.range),a.textEdit.text))}let r=0,o=0;for(const[a,l]of n)a.pushStackElement(),a.pushEditOperations([],l,()=>[]),a.pushStackElement(),o+=1,r+=l.length;return{ariaSummary:J5(w7.bulkEditServiceSummary,r,o),isApplied:r>0}}};R6=Jl([on(0,ar)],R6);class gfe{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return nE(e)}}let A6=class extends Jre{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,i){if(!t){const n=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();n&&(t=n.getContainerDomNode())}return super.showContextView(e,t,i)}};A6=Jl([on(0,qh),on(1,An)],A6);class mfe{constructor(){this._neverEmitter=new re,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class pfe extends k7{constructor(){super()}}class _fe extends sfe{constructor(){super(new TJ)}}let P6=class extends P7{constructor(e,t,i,n,r,o){super(e,t,i,n,r,o),this.configure({blockMouse:!1})}};P6=Jl([on(0,qf),on(1,al),on(2,ov),on(3,ps),on(4,$f),on(5,ai)],P6);const O6={amdModuleId:"vs/editor/common/services/editorSimpleWorker",esmModuleLocation:void 0,label:"editorWorkerService"};let F6=class extends O3{constructor(e,t,i,n,r){super(O6,e,t,i,n,r)}};F6=Jl([on(0,ar),on(1,W8),on(2,ol),on(3,Yl),on(4,Ci)],F6);class vfe{async playSignal(e,t){}}Jt(ol,_fe,0);Jt(Xi,xy,0);Jt(W8,N6,0);Jt(IV,I6,0);Jt(Toe,M6,0);Jt(Soe,gfe,0);Jt(qf,ffe,0);Jt(OV,hfe,0);Jt(HV,ufe,0);Jt(al,E6,0);Jt(Yf,th,0);Jt($n,pfe,0);Jt(Da,Bde,0);Jt(ar,Z7,0);Jt(dH,V7,0);Jt(ai,k6,0);Jt(xoe,cfe,0);Jt(cE,D6,0);Jt(V2,jae,0);Jt(dv,F6,0);Jt(noe,R6,0);Jt(Roe,mfe,0);Jt(u2,L6,0);Jt(ll,v6,0);Jt(Ql,Zhe,0);Jt(xo,T6,0);Jt(ps,gp,0);Jt(j2,m6,0);Jt(ov,A6,0);Jt(av,W7,0);Jt(YE,S6,0);Jt(vu,P6,0);Jt($f,b6,0);Jt(Q2,vfe,0);Jt(NH,afe,0);var nt;(function(s){const e=new Tp;for(const[l,c]of fR())e.set(l,c);const t=new Sy(e,!0);e.set(hi,t);function i(l){n||o({});const c=e.get(l);if(!c)throw new Error("Missing service "+l);return c instanceof Il?t.invokeFunction(u=>u.get(l)):c}s.get=i;let n=!1;const r=new re;function o(l){if(n)return t;n=!0;for(const[u,d]of fR())e.get(u)||e.set(u,d);for(const u in l)if(l.hasOwnProperty(u)){const d=Ut(u);e.get(d)instanceof Il&&e.set(d,l[u])}const c=ofe();for(const u of c)try{t.createInstance(u)}catch(d){_i(d)}return r.fire(),t}s.initialize=o;function a(l){if(n)return l();const c=new Qe,u=c.add(r.event(()=>{u.dispose(),c.add(l())}));return c}s.withServices=a})(nt||(nt={}));function bfe(s,e){return new wfe(s,e)}class wfe extends OC{constructor(e,t){const i={amdModuleId:O6.amdModuleId,esmModuleLocation:O6.esmModuleLocation,label:t.label};super(i,t.keepIdleModels||!1,e),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(i){return Promise.reject(i)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?GL(this._foreignModuleHost):[];return e.$loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(i=>{this._foreignModuleCreateData=null;const n=(a,l)=>e.$fmr(a,l),r=(a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)},o={};for(const a of i)o[a]=r(a,n);return o})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this.workerWithSyncedResources(e).then(t=>this.getProxy())}}const QE={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};class fa{constructor(e,t,i,n){this.startColumn=e,this.endColumn=t,this.className=i,this.type=n,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const i=e.length,n=t.length;if(i!==n)return!1;for(let r=0;r<i;r++)if(!fa._equals(e[r],t[r]))return!1;return!0}static extractWrapped(e,t,i){if(e.length===0)return e;const n=t+1,r=i+1,o=i-t,a=[];let l=0;for(const c of e)c.endColumn<=n||c.startColumn>=r||(a[l++]=new fa(Math.max(1,c.startColumn-n+1),Math.min(o+1,c.endColumn-n+1),c.className,c.type));return a}static filter(e,t,i,n){if(e.length===0)return[];const r=[];let o=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.range;if(u.endLineNumber<t||u.startLineNumber>t||u.isEmpty()&&(c.type===0||c.type===3))continue;const d=u.startLineNumber===t?u.startColumn:i,g=u.endLineNumber===t?u.endColumn:n;r[o++]=new fa(d,g,c.inlineClassName,c.type)}return r}static _typeCompare(e,t){const i=[2,0,1,3];return i[e]-i[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const i=fa._typeCompare(e.type,t.type);return i!==0?i:e.className!==t.className?e.className<t.className?-1:1:0}}class gO{constructor(e,t,i,n){this.startOffset=e,this.endOffset=t,this.className=i,this.metadata=n}}class Ly{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let i=0,n=e.length;i<n;i++)t|=e[i];return t}consumeLowerThan(e,t,i){for(;this.count>0&&this.stopOffsets[0]<e;){let n=0;for(;n+1<this.count&&this.stopOffsets[n]===this.stopOffsets[n+1];)n++;i.push(new gO(t,this.stopOffsets[n],this.classNames.join(" "),Ly._metadata(this.metadata))),t=this.stopOffsets[n]+1,this.stopOffsets.splice(0,n+1),this.classNames.splice(0,n+1),this.metadata.splice(0,n+1),this.count-=n+1}return this.count>0&&t<e&&(i.push(new gO(t,e-1,this.classNames.join(" "),Ly._metadata(this.metadata))),t=e),t}insert(e,t,i){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(i);else for(let n=0;n<this.count;n++)if(this.stopOffsets[n]>=e){this.stopOffsets.splice(n,0,e),this.classNames.splice(n,0,t),this.metadata.splice(n,0,i);break}this.count++}}class Cfe{static normalize(e,t){if(t.length===0)return[];const i=[],n=new Ly;let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];let c=l.startColumn,u=l.endColumn;const d=l.className,g=l.type===1?2:l.type===2?4:0;if(c>1){const v=e.charCodeAt(c-2);zn(v)&&c--}if(u>1){const v=e.charCodeAt(u-2);zn(v)&&u--}const m=c-1,_=u-2;r=n.consumeLowerThan(m,r,i),n.count===0&&(r=m),n.insert(_,d,g)}return n.consumeLowerThan(1073741824,r,i),i}}class Hn{constructor(e,t,i,n){this.endIndex=e,this.type=t,this.metadata=i,this.containsRTL=n,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class fj{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class Np{constructor(e,t,i,n,r,o,a,l,c,u,d,g,m,_,v,w,y,S,k){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.continuesWithWrappedLine=n,this.isBasicASCII=r,this.containsRTL=o,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(fa.compare),this.tabSize=u,this.startVisibleColumn=d,this.spaceWidth=g,this.stopRenderingLineAfter=v,this.renderWhitespace=w==="all"?4:w==="boundary"?1:w==="selection"?2:w==="trailing"?3:0,this.renderControlCharacters=y,this.fontLigatures=S,this.selectionsOnLine=k&&k.sort((A,I)=>A.startOffset<I.startOffset?-1:1);const L=Math.abs(_-g),T=Math.abs(m-g);L<T?(this.renderSpaceWidth=_,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=m,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&fa.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class gj{constructor(e,t){this.partIndex=e,this.charIndex=t}}class Rl{static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,i,n){const r=(t<<16|i<<0)>>>0;this._data[e-1]=r,this._horizontalOffset[e-1]=n}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),i=Rl.getPartIndex(t),n=Rl.getCharIndex(t);return new gj(i,n)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,i){if(this.length===0)return 0;const n=(e<<16|i<<0)>>>0;let r=0,o=this.length-1;for(;r+1<o;){const v=r+o>>>1,w=this._data[v];if(w===n)return v;w>n?o=v:r=v}if(r===o)return r;const a=this._data[r],l=this._data[o];if(a===n)return r;if(l===n)return o;const c=Rl.getPartIndex(a),u=Rl.getCharIndex(a),d=Rl.getPartIndex(l);let g;c!==d?g=t:g=Rl.getCharIndex(l);const m=i-u,_=g-i;return m<=_?r:o}}class B6{constructor(e,t,i){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=i}}function JE(s,e){if(s.lineContent.length===0){if(s.lineDecorations.length>0){e.appendString("<span>");let t=0,i=0,n=0;for(const o of s.lineDecorations)(o.type===1||o.type===2)&&(e.appendString('<span class="'),e.appendString(o.className),e.appendString('"></span>'),o.type===1&&(n|=1,t++),o.type===2&&(n|=2,i++));e.appendString("</span>");const r=new Rl(1,t+i);return r.setColumnInfo(1,t,0,0),new B6(r,!1,n)}return e.appendString("<span><span></span></span>"),new B6(new Rl(0,0),!1,0)}return Nfe(xfe(s),e)}class yfe{constructor(e,t,i,n){this.characterMapping=e,this.html=t,this.containsRTL=i,this.containsForeignElements=n}}function J2(s){const e=new C2(1e4),t=JE(s,e);return new yfe(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class Sfe{constructor(e,t,i,n,r,o,a,l,c,u,d,g,m,_,v,w){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.len=n,this.isOverflowing=r,this.overflowingCharCount=o,this.parts=a,this.containsForeignElements=l,this.fauxIndentLength=c,this.tabSize=u,this.startVisibleColumn=d,this.containsRTL=g,this.spaceWidth=m,this.renderSpaceCharCode=_,this.renderWhitespace=v,this.renderControlCharacters=w}}function xfe(s){const e=s.lineContent;let t,i,n;s.stopRenderingLineAfter!==-1&&s.stopRenderingLineAfter<e.length?(t=!0,i=e.length-s.stopRenderingLineAfter,n=s.stopRenderingLineAfter):(t=!1,i=0,n=e.length);let r=kfe(e,s.containsRTL,s.lineTokens,s.fauxIndentLength,n);s.renderControlCharacters&&!s.isBasicASCII&&(r=Dfe(e,r)),(s.renderWhitespace===4||s.renderWhitespace===1||s.renderWhitespace===2&&s.selectionsOnLine||s.renderWhitespace===3&&!s.continuesWithWrappedLine)&&(r=Efe(s,e,n,r));let o=0;if(s.lineDecorations.length>0){for(let a=0,l=s.lineDecorations.length;a<l;a++){const c=s.lineDecorations[a];c.type===3||c.type===1?o|=1:c.type===2&&(o|=2)}r=Tfe(e,n,r,s.lineDecorations)}return s.containsRTL||(r=Lfe(e,r,!s.isBasicASCII||s.fontLigatures)),new Sfe(s.useMonospaceOptimizations,s.canUseHalfwidthRightwardsArrow,e,n,t,i,r,o,s.fauxIndentLength,s.tabSize,s.startVisibleColumn,s.containsRTL,s.spaceWidth,s.renderSpaceCharCode,s.renderWhitespace,s.renderControlCharacters)}function kfe(s,e,t,i,n){const r=[];let o=0;i>0&&(r[o++]=new Hn(i,"",0,!1));let a=i;for(let l=0,c=t.getCount();l<c;l++){const u=t.getEndOffset(l);if(u<=i)continue;const d=t.getClassName(l);if(u>=n){const m=e?t_(s.substring(a,n)):!1;r[o++]=new Hn(n,d,0,m);break}const g=e?t_(s.substring(a,u)):!1;r[o++]=new Hn(u,d,0,g),a=u}return r}function Lfe(s,e,t){let i=0;const n=[];let r=0;if(t)for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex;if(i+50<c){const u=l.type,d=l.metadata,g=l.containsRTL;let m=-1,_=i;for(let v=i;v<c;v++)s.charCodeAt(v)===32&&(m=v),m!==-1&&v-_>=50&&(n[r++]=new Hn(m+1,u,d,g),_=m+1,m=-1);_!==c&&(n[r++]=new Hn(c,u,d,g))}else n[r++]=l;i=c}else for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex,u=c-i;if(u>50){const d=l.type,g=l.metadata,m=l.containsRTL,_=Math.ceil(u/50);for(let v=1;v<_;v++){const w=i+v*50;n[r++]=new Hn(w,d,g,m)}n[r++]=new Hn(c,d,g,m)}else n[r++]=l;i=c}return n}function mj(s){return s<32?s!==9:s===127||s>=8234&&s<=8238||s>=8294&&s<=8297||s>=8206&&s<=8207||s===1564}function Dfe(s,e){const t=[];let i=new Hn(0,"",0,!1),n=0;for(const r of e){const o=r.endIndex;for(;n<o;n++){const a=s.charCodeAt(n);mj(a)&&(n>i.endIndex&&(i=new Hn(n,r.type,r.metadata,r.containsRTL),t.push(i)),i=new Hn(n+1,"mtkcontrol",r.metadata,!1),t.push(i))}n>i.endIndex&&(i=new Hn(o,r.type,r.metadata,r.containsRTL),t.push(i))}return t}function Efe(s,e,t,i){const n=s.continuesWithWrappedLine,r=s.fauxIndentLength,o=s.tabSize,a=s.startVisibleColumn,l=s.useMonospaceOptimizations,c=s.selectionsOnLine,u=s.renderWhitespace===1,d=s.renderWhitespace===3,g=s.renderSpaceWidth!==s.spaceWidth,m=[];let _=0,v=0,w=i[v].type,y=i[v].containsRTL,S=i[v].endIndex;const k=i.length;let L=!1,T=Ur(e),A;T===-1?(L=!0,T=t,A=t):A=Vf(e);let I=!1,O=0,F=c&&c[O],J=a%o;for(let G=r;G<t;G++){const ie=e.charCodeAt(G);F&&G>=F.endOffset&&(O++,F=c&&c[O]);let Z;if(G<T||G>A)Z=!0;else if(ie===9)Z=!0;else if(ie===32)if(u)if(I)Z=!0;else{const ue=G+1<t?e.charCodeAt(G+1):0;Z=ue===32||ue===9}else Z=!0;else Z=!1;if(Z&&c&&(Z=!!F&&F.startOffset<=G&&F.endOffset>G),Z&&d&&(Z=L||G>A),Z&&y&&G>=T&&G<=A&&(Z=!1),I){if(!Z||!l&&J>=o){if(g){const ue=_>0?m[_-1].endIndex:r;for(let be=ue+1;be<=G;be++)m[_++]=new Hn(be,"mtkw",1,!1)}else m[_++]=new Hn(G,"mtkw",1,!1);J=J%o}}else(G===S||Z&&G>r)&&(m[_++]=new Hn(G,w,0,y),J=J%o);for(ie===9?J=o:Ih(ie)?J+=2:J++,I=Z;G===S&&(v++,v<k);)w=i[v].type,y=i[v].containsRTL,S=i[v].endIndex}let Y=!1;if(I)if(n&&u){const G=t>0?e.charCodeAt(t-1):0,ie=t>1?e.charCodeAt(t-2):0;G===32&&ie!==32&&ie!==9||(Y=!0)}else Y=!0;if(Y)if(g){const G=_>0?m[_-1].endIndex:r;for(let ie=G+1;ie<=t;ie++)m[_++]=new Hn(ie,"mtkw",1,!1)}else m[_++]=new Hn(t,"mtkw",1,!1);else m[_++]=new Hn(t,w,0,y);return m}function Tfe(s,e,t,i){i.sort(fa.compare);const n=Cfe.normalize(s,i),r=n.length;let o=0;const a=[];let l=0,c=0;for(let d=0,g=t.length;d<g;d++){const m=t[d],_=m.endIndex,v=m.type,w=m.metadata,y=m.containsRTL;for(;o<r&&n[o].startOffset<_;){const S=n[o];if(S.startOffset>c&&(c=S.startOffset,a[l++]=new Hn(c,v,w,y)),S.endOffset+1<=_)c=S.endOffset+1,a[l++]=new Hn(c,v+" "+S.className,w|S.metadata,y),o++;else{c=_,a[l++]=new Hn(c,v+" "+S.className,w|S.metadata,y);break}}_>c&&(c=_,a[l++]=new Hn(c,v,w,y))}const u=t[t.length-1].endIndex;if(o<r&&n[o].startOffset===u)for(;o<r&&n[o].startOffset===u;){const d=n[o];a[l++]=new Hn(c,d.className,d.metadata,!1),o++}return a}function Nfe(s,e){const t=s.fontIsMonospace,i=s.canUseHalfwidthRightwardsArrow,n=s.containsForeignElements,r=s.lineContent,o=s.len,a=s.isOverflowing,l=s.overflowingCharCount,c=s.parts,u=s.fauxIndentLength,d=s.tabSize,g=s.startVisibleColumn,m=s.containsRTL,_=s.spaceWidth,v=s.renderSpaceCharCode,w=s.renderWhitespace,y=s.renderControlCharacters,S=new Rl(o+1,c.length);let k=!1,L=0,T=g,A=0,I=0,O=0;m?e.appendString('<span dir="ltr">'):e.appendString("<span>");for(let F=0,J=c.length;F<J;F++){const Y=c[F],G=Y.endIndex,ie=Y.type,Z=Y.containsRTL,ue=w!==0&&Y.isWhitespace(),be=ue&&!t&&(ie==="mtkw"||!n),ye=L===G&&Y.isPseudoAfter();if(A=0,e.appendString("<span "),Z&&e.appendString('style="unicode-bidi:isolate" '),e.appendString('class="'),e.appendString(be?"mtkz":ie),e.appendASCIICharCode(34),ue){let ae=0;{let xe=L,fe=T;for(;xe<G;xe++){const me=(r.charCodeAt(xe)===9?d-fe%d:1)|0;ae+=me,xe>=u&&(fe+=me)}}for(be&&(e.appendString(' style="width:'),e.appendString(String(_*ae)),e.appendString('px"')),e.appendASCIICharCode(62);L<G;L++){S.setColumnInfo(L+1,F-O,A,I),O=0;const xe=r.charCodeAt(L);let fe,X;if(xe===9){fe=d-T%d|0,X=fe,!i||X>1?e.appendCharCode(8594):e.appendCharCode(65515);for(let me=2;me<=X;me++)e.appendCharCode(160)}else fe=2,X=1,e.appendCharCode(v),e.appendCharCode(8204);A+=fe,I+=X,L>=u&&(T+=X)}}else for(e.appendASCIICharCode(62);L<G;L++){S.setColumnInfo(L+1,F-O,A,I),O=0;const ae=r.charCodeAt(L);let xe=1,fe=1;switch(ae){case 9:xe=d-T%d,fe=xe;for(let X=1;X<=xe;X++)e.appendCharCode(160);break;case 32:e.appendCharCode(160);break;case 60:e.appendString("&lt;");break;case 62:e.appendString("&gt;");break;case 38:e.appendString("&amp;");break;case 0:y?e.appendCharCode(9216):e.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.appendCharCode(65533);break;default:Ih(ae)&&fe++,y&&ae<32?e.appendCharCode(9216+ae):y&&ae===127?e.appendCharCode(9249):y&&mj(ae)?(e.appendString("[U+"),e.appendString(Ife(ae)),e.appendString("]"),xe=8,fe=xe):e.appendCharCode(ae)}A+=xe,I+=fe,L>=u&&(T+=fe)}ye?O++:O=0,L>=o&&!k&&Y.isPseudoAfter()&&(k=!0,S.setColumnInfo(L+1,F,A,I)),e.appendString("</span>")}return k||S.setColumnInfo(o+1,c.length-1,A,I),a&&(e.appendString('<span class="mtkoverflow">'),e.appendString(b("showMore","Show more ({0})",Mfe(l))),e.appendString("</span>")),e.appendString("</span>"),new B6(S,m,n)}function Ife(s){return s.toString(16).toUpperCase().padStart(4,"0")}function Mfe(s){return s<1024?b("overflow.chars","{0} chars",s):s<1024*1024?`${(s/1024).toFixed(1)} KB`:`${(s/1024/1024).toFixed(1)} MB`}class mO{constructor(e,t,i,n){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=i|0,this.height=n|0}}class Rfe{constructor(e,t){this.tabSize=e,this.data=t}}class e9{constructor(e,t,i,n,r,o,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=i,this.maxColumn=n,this.startVisibleColumn=r,this.tokens=o,this.inlineDecorations=a}}class So{constructor(e,t,i,n,r,o,a,l,c,u){this.minColumn=e,this.maxColumn=t,this.content=i,this.continuesWithWrappedLine=n,this.isBasicASCII=So.isBasicASCII(i,o),this.containsRTL=So.containsRTL(i,this.isBasicASCII,r),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=u}static isBasicASCII(e,t){return t?m8(e):!0}static containsRTL(e,t,i){return!t&&i?t_(e):!1}}class S1{constructor(e,t,i){this.range=e,this.inlineClassName=t,this.type=i}}class Afe{constructor(e,t,i,n){this.startOffset=e,this.endOffset=t,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=n}toInlineDecoration(e){return new S1(new Q(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class pj{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class T_{constructor(e,t,i){this.color=e,this.zIndex=t,this.data=i}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&Rn(e.data,t.data)}static equalsArr(e,t){return Rn(e,t,T_.equals)}}function Pfe(s){return Array.isArray(s)}function Ofe(s){return!Pfe(s)}function _j(s){return typeof s=="string"}function pO(s){return!_j(s)}function zd(s){return!s}function ru(s,e){return s.ignoreCase&&e?e.toLowerCase():e}function _O(s){return s.replace(/[&<>'"_]/g,"-")}function Ffe(s,e){console.log(`${s.languageId}: ${e}`)}function Ti(s,e){return new Error(`${s.languageId}: ${e}`)}function ch(s,e,t,i,n){const r=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let o=null;return e.replace(r,function(a,l,c,u,d,g,m,_,v){return zd(c)?zd(u)?!zd(d)&&d<i.length?ru(s,i[d]):!zd(m)&&s&&typeof s[m]=="string"?s[m]:(o===null&&(o=n.split("."),o.unshift(n)),!zd(g)&&g<o.length?ru(s,o[g]):""):ru(s,t):"$"})}function Bfe(s,e,t){const i=/\$[sS](\d\d?)/g;let n=null;return e.replace(i,function(r,o){return n===null&&(n=t.split("."),n.unshift(t)),!zd(o)&&o<n.length?ru(s,n[o]):""})}function hw(s,e){let t=e;for(;t&&t.length>0;){const i=s.tokenizer[t];if(i)return i;const n=t.lastIndexOf(".");n<0?t=null:t=t.substr(0,n)}return null}function Wfe(s,e){let t=e;for(;t&&t.length>0;){if(s.stateNames[t])return!0;const n=t.lastIndexOf(".");n<0?t=null:t=t.substr(0,n)}return!1}var Vfe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},zfe=function(s,e){return function(t,i){e(t,i,s)}},W6;const vj=5,PS=class PS{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new Wm(e,t);let i=Wm.getStackElementId(e);i.length>0&&(i+="|"),i+=t;let n=this._entries[i];return n||(n=new Wm(e,t),this._entries[i]=n,n)}};PS._INSTANCE=new PS(vj);let N_=PS;class Wm{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return Wm._equals(this,e)}push(e){return N_.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return N_.create(this.parent,e)}}class nm{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new nm(this.languageId,this.state)}}const OS=class OS{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(t!==null)return new x1(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new x1(e,t);const i=Wm.getStackElementId(e);let n=this._entries[i];return n||(n=new x1(e,null),this._entries[i]=n,n)}};OS._INSTANCE=new OS(vj);let uh=OS;class x1{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:uh.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof x1)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}class Hfe{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new e_(e,t,this._languageId)))}nestedLanguageTokenize(e,t,i,n){const r=i.languageId,o=i.state,a=un.get(r);if(!a)return this.enterLanguage(r),this.emit(n,""),o;const l=a.tokenize(e,t,o);if(n!==0)for(const c of l.tokens)this._tokens.push(new e_(c.offset+n,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new c8(this._tokens,e)}}class Dy{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const i=this._theme.match(this._currentLanguageId,t)|1024;this._lastTokenMetadata!==i&&(this._lastTokenMetadata=i,this._tokens.push(e),this._tokens.push(i))}static _merge(e,t,i){const n=e!==null?e.length:0,r=t.length,o=i!==null?i.length:0;if(n===0&&r===0&&o===0)return new Uint32Array(0);if(n===0&&r===0)return i;if(r===0&&o===0)return e;const a=new Uint32Array(n+r+o);e!==null&&a.set(e);for(let l=0;l<r;l++)a[n+l]=t[l];return i!==null&&a.set(i,n+r),a}nestedLanguageTokenize(e,t,i,n){const r=i.languageId,o=i.state,a=un.get(r);if(!a)return this.enterLanguage(r),this.emit(n,""),o;const l=a.tokenizeEncoded(e,t,o);if(n!==0)for(let c=0,u=l.tokens.length;c<u;c+=2)l.tokens[c]+=n;return this._prependTokens=Dy._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new s2(Dy._merge(this._prependTokens,this._tokens,null),e)}}let I_=W6=class extends ve{constructor(e,t,i,n,r){super(),this._configurationService=r,this._languageService=e,this._standaloneThemeService=t,this._languageId=i,this._lexer=n,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let o=!1;this._register(un.onDidChange(a=>{if(o)return;let l=!1;for(let c=0,u=a.changedLanguages.length;c<u;c++){const d=a.changedLanguages[c];if(this._embeddedLanguages[d]){l=!0;break}}l&&(o=!0,un.handleChange([this._languageId]),o=!1)})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))}))}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const i=un.get(t);if(i){if(i instanceof W6){const n=i.getLoadStatus();n.loaded===!1&&e.push(n.promise)}continue}un.isResolved(t)||e.push(un.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=N_.create(null,this._lexer.start);return uh.create(e,null)}tokenize(e,t,i){if(e.length>=this._maxTokenizationLineLength)return Az(this._languageId,i);const n=new Hfe,r=this._tokenize(e,t,i,n);return n.finalize(r)}tokenizeEncoded(e,t,i){if(e.length>=this._maxTokenizationLineLength)return oE(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),i);const n=new Dy(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),r=this._tokenize(e,t,i,n);return n.finalize(r)}_tokenize(e,t,i,n){return i.embeddedLanguageData?this._nestedTokenize(e,t,i,0,n):this._myTokenize(e,t,i,0,n)}_findLeavingNestedLanguageOffset(e,t){let i=this._lexer.tokenizer[t.stack.state];if(!i&&(i=hw(this._lexer,t.stack.state),!i))throw Ti(this._lexer,"tokenizer state is not defined: "+t.stack.state);let n=-1,r=!1;for(const o of i){if(!pO(o.action)||o.action.nextEmbedded!=="@pop")continue;r=!0;let a=o.resolveRegex(t.stack.state);const l=a.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const u=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),u)}const c=e.search(a);c===-1||c!==0&&o.matchOnlyAtLineStart||(n===-1||c<n)&&(n=c)}if(!r)throw Ti(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return n}_nestedTokenize(e,t,i,n,r){const o=this._findLeavingNestedLanguageOffset(e,i);if(o===-1){const c=r.nestedLanguageTokenize(e,t,i.embeddedLanguageData,n);return uh.create(i.stack,new nm(i.embeddedLanguageData.languageId,c))}const a=e.substring(0,o);a.length>0&&r.nestedLanguageTokenize(a,!1,i.embeddedLanguageData,n);const l=e.substring(o);return this._myTokenize(l,t,i,n+o,r)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,i,n,r){r.enterLanguage(this._languageId);const o=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=i.embeddedLanguageData,u=i.stack,d=0,g=null,m=!0;for(;m||d<l;){const _=d,v=u.depth,w=g?g.groups.length:0,y=u.state;let S=null,k=null,L=null,T=null,A=null;if(g){S=g.matches;const F=g.groups.shift();k=F.matched,L=F.action,T=g.rule,g.groups.length===0&&(g=null)}else{if(!m&&d>=l)break;m=!1;let F=this._lexer.tokenizer[y];if(!F&&(F=hw(this._lexer,y),!F))throw Ti(this._lexer,"tokenizer state is not defined: "+y);const J=a.substr(d);for(const Y of F)if((d===0||!Y.matchOnlyAtLineStart)&&(S=J.match(Y.resolveRegex(y)),S)){k=S[0],L=Y.action;break}}if(S||(S=[""],k=""),L||(d<l&&(S=[a.charAt(d)],k=S[0]),L=this._lexer.defaultToken),k===null)break;for(d+=k.length;Ofe(L)&&pO(L)&&L.test;)L=L.test(k,S,y,d===l);let I=null;if(typeof L=="string"||Array.isArray(L))I=L;else if(L.group)I=L.group;else if(L.token!==null&&L.token!==void 0){if(L.tokenSubst?I=ch(this._lexer,L.token,k,S,y):I=L.token,L.nextEmbedded)if(L.nextEmbedded==="@pop"){if(!c)throw Ti(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw Ti(this._lexer,"cannot enter embedded language from within an embedded language");A=ch(this._lexer,L.nextEmbedded,k,S,y)}if(L.goBack&&(d=Math.max(0,d-L.goBack)),L.switchTo&&typeof L.switchTo=="string"){let F=ch(this._lexer,L.switchTo,k,S,y);if(F[0]==="@"&&(F=F.substr(1)),hw(this._lexer,F))u=u.switchTo(F);else throw Ti(this._lexer,"trying to switch to a state '"+F+"' that is undefined in rule: "+this._safeRuleName(T))}else{if(L.transform&&typeof L.transform=="function")throw Ti(this._lexer,"action.transform not supported");if(L.next)if(L.next==="@push"){if(u.depth>=this._lexer.maxStack)throw Ti(this._lexer,"maximum tokenizer stack size reached: ["+u.state+","+u.parent.state+",...]");u=u.push(y)}else if(L.next==="@pop"){if(u.depth<=1)throw Ti(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(T));u=u.pop()}else if(L.next==="@popall")u=u.popall();else{let F=ch(this._lexer,L.next,k,S,y);if(F[0]==="@"&&(F=F.substr(1)),hw(this._lexer,F))u=u.push(F);else throw Ti(this._lexer,"trying to set a next state '"+F+"' that is undefined in rule: "+this._safeRuleName(T))}}L.log&&typeof L.log=="string"&&Ffe(this._lexer,this._lexer.languageId+": "+ch(this._lexer,L.log,k,S,y))}if(I===null)throw Ti(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(T));const O=F=>{const J=this._languageService.getLanguageIdByLanguageName(F)||this._languageService.getLanguageIdByMimeType(F)||F,Y=this._getNestedEmbeddedLanguageData(J);if(d<l){const G=e.substr(d);return this._nestedTokenize(G,t,uh.create(u,Y),n+d,r)}else return uh.create(u,Y)};if(Array.isArray(I)){if(g&&g.groups.length>0)throw Ti(this._lexer,"groups cannot be nested: "+this._safeRuleName(T));if(S.length!==I.length+1)throw Ti(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(T));let F=0;for(let J=1;J<S.length;J++)F+=S[J].length;if(F!==k.length)throw Ti(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(T));g={rule:T,matches:S,groups:[]};for(let J=0;J<I.length;J++)g.groups[J]={action:I[J],matched:S[J+1]};d-=k.length;continue}else{if(I==="@rematch"&&(d-=k.length,k="",S=null,I="",A!==null))return O(A);if(k.length===0){if(l===0||v!==u.depth||y!==u.state||(g?g.groups.length:0)!==w)continue;throw Ti(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(T))}let F=null;if(_j(I)&&I.indexOf("@brackets")===0){const J=I.substr(9),Y=jfe(this._lexer,k);if(!Y)throw Ti(this._lexer,"@brackets token returned but no bracket defined as: "+k);F=_O(Y.token+J)}else{const J=I===""?"":I+this._lexer.tokenPostfix;F=_O(J)}_<o&&r.emit(_+n,F)}if(A!==null)return O(A)}return uh.create(u,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new nm(e,g_);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),un.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=un.get(e);return t?new nm(e,t.getInitialState()):new nm(e,g_)}};I_=W6=Vfe([zfe(4,Xi)],I_);function jfe(s,e){if(!e)return null;e=ru(s,e);const t=s.brackets;for(const i of t){if(i.open===e)return{token:i.token,bracketType:1};if(i.close===e)return{token:i.token,bracketType:-1}}return null}const Ufe=Kf("standaloneColorizer",{createHTML:s=>s});class t9{static colorizeElement(e,t,i,n){n=n||{};const r=n.theme||"vs",o=n.mimeType||i.getAttribute("lang")||i.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(o)||o;e.setTheme(r);const l=i.firstChild?i.firstChild.nodeValue:"";i.className+=" "+r;const c=u=>{const d=Ufe?.createHTML(u)??u;i.innerHTML=d};return this.colorize(t,l||"",a,n).then(c,u=>console.error(u))}static async colorize(e,t,i,n){const r=e.languageIdCodec;let o=4;n&&typeof n.tabSize=="number"&&(o=n.tabSize),_8(t)&&(t=t.substr(1));const a=yp(t);if(!e.isRegisteredLanguageId(i))return vO(a,o,r);const l=await un.getOrCreate(i);return l?$fe(a,o,l,r):vO(a,o,r)}static colorizeLine(e,t,i,n,r=4){const o=So.isBasicASCII(e,t),a=So.containsRTL(e,o,i);return J2(new Np(!1,!0,e,!1,o,a,0,n,[],r,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,i=4){const n=e.getLineContent(t);e.tokenization.forceTokenization(t);const o=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(n,e.mightContainNonBasicASCII(),e.mightContainRTL(),o,i)}}function $fe(s,e,t,i){return new Promise((n,r)=>{const o=()=>{const a=qfe(s,e,t,i);if(t instanceof I_){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(o,r);return}}n(a)};o()})}function vO(s,e,t){let i=[];const r=new Uint32Array(2);r[0]=0,r[1]=33587200;for(let o=0,a=s.length;o<a;o++){const l=s[o];r[0]=l.length;const c=new es(r,l,t),u=So.isBasicASCII(l,!0),d=So.containsRTL(l,u,!0),g=J2(new Np(!1,!0,l,!1,u,d,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(g.html),i.push("<br/>")}return i.join("")}function qfe(s,e,t,i){let n=[],r=t.getInitialState();for(let o=0,a=s.length;o<a;o++){const l=s[o],c=t.tokenizeEncoded(l,!0,r);es.convertToEndOffset(c.tokens,l.length);const u=new es(c.tokens,l,i),d=So.isBasicASCII(l,!0),g=So.containsRTL(l,d,!0),m=J2(new Np(!1,!0,l,!1,d,g,0,u.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(m.html),n.push("<br/>"),r=c.endState}return n.join("")}var Kfe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Gfe=function(s,e){return function(t,i){e(t,i,s)}},$m;let Ey=($m=class{constructor(e,t){}dispose(){}},$m.ID="editor.contrib.markerDecorations",$m);Ey=Kfe([Gfe(1,dH)],Ey);rV(Ey.ID,Ey,0);class bj extends ve{constructor(e,t){super(),this._onDidChange=this._register(new re),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()};let i=!1,n=!1;const r=()=>{if(i&&!n)try{i=!1,n=!0,t()}finally{Kr(tt(this._referenceDomElement),()=>{n=!1,r()})}};this._resizeObserver=new ResizeObserver(o=>{o&&o[0]&&o[0].contentRect?e={width:o[0].contentRect.width,height:o[0].contentRect.height}:e=null,i=!0,r()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let i=0,n=0;t?(i=t.width,n=t.height):this._referenceDomElement&&(i=this._referenceDomElement.clientWidth,n=this._referenceDomElement.clientHeight),i=Math.max(5,i),n=Math.max(5,n),(this._width!==i||this._height!==n)&&(this._width=i,this._height=n,e&&this._onDidChange.fire())}}const _m=class _m{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=_m._read(e,this.key),i=r=>_m._read(e,r),n=(r,o)=>_m._write(e,r,o);this.migrate(t,i,n)}static _read(e,t){if(typeof e>"u")return;const i=t.indexOf(".");if(i>=0){const n=t.substring(0,i);return this._read(e[n],t.substring(i+1))}return e[t]}static _write(e,t,i){const n=t.indexOf(".");if(n>=0){const r=t.substring(0,n);e[r]=e[r]||{},this._write(e[r],t.substring(n+1),i);return}e[t]=i}};_m.items=[];let M_=_m;function ul(s,e){M_.items.push(new M_(s,e))}function Gr(s,e){ul(s,(t,i,n)=>{if(typeof t<"u"){for(const[r,o]of e)if(t===r){n(s,o);return}}})}function Zfe(s){M_.items.forEach(e=>e.apply(s))}Gr("wordWrap",[[!0,"on"],[!1,"off"]]);Gr("lineNumbers",[[!0,"on"],[!1,"off"]]);Gr("cursorBlinking",[["visible","solid"]]);Gr("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);Gr("renderLineHighlight",[[!0,"line"],[!1,"none"]]);Gr("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);Gr("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);Gr("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Gr("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Gr("autoIndent",[[!1,"advanced"],[!0,"full"]]);Gr("matchBrackets",[[!0,"always"],[!1,"never"]]);Gr("renderFinalNewline",[[!0,"on"],[!1,"off"]]);Gr("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);Gr("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]);Gr("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]);ul("autoClosingBrackets",(s,e,t)=>{s===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});ul("renderIndentGuides",(s,e,t)=>{typeof s<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!s))});ul("highlightActiveIndentGuide",(s,e,t)=>{typeof s<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!s))});const Yfe={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};ul("suggest.filteredTypes",(s,e,t)=>{if(s&&typeof s=="object"){for(const i of Object.entries(Yfe))s[i[0]]===!1&&typeof e(`suggest.${i[1]}`)>"u"&&t(`suggest.${i[1]}`,!1);t("suggest.filteredTypes",void 0)}});ul("quickSuggestions",(s,e,t)=>{if(typeof s=="boolean"){const i=s?"on":"off";t("quickSuggestions",{comments:i,strings:i,other:i})}});ul("experimental.stickyScroll.enabled",(s,e,t)=>{typeof s=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",s))});ul("experimental.stickyScroll.maxLineCount",(s,e,t)=>{typeof s=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",s))});ul("codeActionsOnSave",(s,e,t)=>{if(s&&typeof s=="object"){let i=!1;const n={};for(const r of Object.entries(s))typeof r[1]=="boolean"?(i=!0,n[r[0]]=r[1]?"explicit":"never"):n[r[0]]=r[1];i&&t("codeActionsOnSave",n)}});ul("codeActionWidget.includeNearbyQuickfixes",(s,e,t)=>{typeof s=="boolean"&&(t("codeActionWidget.includeNearbyQuickfixes",void 0),typeof e("codeActionWidget.includeNearbyQuickFixes")>"u"&&t("codeActionWidget.includeNearbyQuickFixes",s))});ul("lightbulb.enabled",(s,e,t)=>{typeof s=="boolean"&&t("lightbulb.enabled",s?void 0:"off")});class Xfe{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new re,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}}const Ty=new Xfe;var Qfe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Jfe=function(s,e){return function(t,i){e(t,i,s)}};let V6=class extends ve{constructor(e,t,i,n,r){super(),this._accessibilityService=r,this._onDidChange=this._register(new re),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new re),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new nW,this.isSimpleWidget=e,this.contextMenuId=t,this._containerObserver=this._register(new bj(n,i.dimension)),this._targetWindowId=tt(n).vscodeWindowId,this._rawOptions=bO(i),this._validatedOptions=hh.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(oh.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(Ty.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(v3.onDidChange(()=>this._recomputeOptions())),this._register(LC.getInstance(tt(n)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=hh.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=rf.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(t),n={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:Ty.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return hh.computeOptions(this._validatedOptions,n)}_readEnvConfiguration(){return{extraEditorClassName:tge(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:o2||ba,pixelRatio:LC.getInstance(YM(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return v3.readFontInfo(YM(this._targetWindowId,!0).window,e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=bO(e);hh.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=hh.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=ege(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}};V6=Qfe([Jfe(4,ll)],V6);function ege(s){let e=0;for(;s;)s=Math.floor(s/10),e++;return e||1}function tge(){let s="";return!Mh&&!DW&&(s+="no-user-select "),Mh&&(s+="no-minimap-shadow ",s+="enable-user-select "),qt&&(s+="mac "),s}class ige{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class nge{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class hh{static validateOptions(e){const t=new ige;for(const i of Hg){const n=i.name==="_never_"?void 0:e[i.name];t._write(i.id,i.validate(n))}return t}static computeOptions(e,t){const i=new nge;for(const n of Hg)i._write(n.id,n.compute(t,i,e._read(n.id)));return i}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?Rn(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!hh._deepEquals(e[i],t[i]))return!1;return!0}static checkEquals(e,t){const i=[];let n=!1;for(const r of Hg){const o=!hh._deepEquals(e._read(r.id),t._read(r.id));i[r.id]=o,o&&(n=!0)}return n?new iW(i):null}static applyUpdate(e,t){let i=!1;for(const n of Hg)if(t.hasOwnProperty(n.name)){const r=n.applyUpdate(e[n.name],t[n.name]);e[n.name]=r.newValue,i=i||r.didChange}return i}}function bO(s){const e=Ju(s);return Zfe(e),e}var bh;(function(s){const e={total:0,min:Number.MAX_VALUE,max:0},t={...e},i={...e},n={...e};let r=0;const o={keydown:0,input:0,render:0};function a(){y(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),o.keydown=1,queueMicrotask(l)}s.onKeyDown=a;function l(){o.keydown===1&&(performance.mark("keydown/end"),o.keydown=2)}function c(){performance.mark("input/start"),o.input=1,w()}s.onBeforeInput=c;function u(){o.input===0&&c(),queueMicrotask(d)}s.onInput=u;function d(){o.input===1&&(performance.mark("input/end"),o.input=2)}function g(){y()}s.onKeyUp=g;function m(){y()}s.onSelectionChange=m;function _(){o.keydown===2&&o.input===2&&o.render===0&&(performance.mark("render/start"),o.render=1,queueMicrotask(v),w())}s.onRenderStart=_;function v(){o.render===1&&(performance.mark("render/end"),o.render=2)}function w(){setTimeout(y)}function y(){o.keydown===2&&o.input===2&&o.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),S("keydown",e),S("input",t),S("render",i),S("inputlatency",n),r++,k())}function S(I,O){const F=performance.getEntriesByName(I)[0].duration;O.total+=F,O.min=Math.min(O.min,F),O.max=Math.max(O.max,F)}function k(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),o.keydown=0,o.input=0,o.render=0}function L(){if(r===0)return;const I={keydown:T(e),input:T(t),render:T(i),total:T(n),sampleCount:r};return A(e),A(t),A(i),A(n),r=0,I}s.getAndClearMeasurements=L;function T(I){return{average:I.total/r,max:I.max,min:I.min}}function A(I){I.total=0,I.min=Number.MAX_VALUE,I.max=0}})(bh||(bh={}));class e4{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(e){return new wj(this.x-e.scrollX,this.y-e.scrollY)}}class wj{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(e){return new e4(this.clientX+e.scrollX,this.clientY+e.scrollY)}}class sge{constructor(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n,this._editorPagePositionBrand=void 0}}class rge{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function i9(s){const e=$o(s);return new sge(e.left,e.top,e.width,e.height)}function n9(s,e,t){const i=e.width/s.offsetWidth,n=e.height/s.offsetHeight,r=(t.x-e.x)/i,o=(t.y-e.y)/n;return new rge(r,o)}class Bh extends Ya{constructor(e,t,i){super(tt(i),e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new e4(this.posx,this.posy),this.editorPos=i9(i),this.relativePos=n9(i,this.editorPos,this.pos)}}class oge{constructor(e){this._editorViewDomNode=e}_create(e){return new Bh(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return ge(e,"contextmenu",i=>{t(this._create(i))})}onMouseUp(e,t){return ge(e,"mouseup",i=>{t(this._create(i))})}onMouseDown(e,t){return ge(e,Ne.MOUSE_DOWN,i=>{t(this._create(i))})}onPointerDown(e,t){return ge(e,Ne.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onMouseLeave(e,t){return ge(e,Ne.MOUSE_LEAVE,i=>{t(this._create(i))})}onMouseMove(e,t){return ge(e,"mousemove",i=>t(this._create(i)))}}class age{constructor(e){this._editorViewDomNode=e}_create(e){return new Bh(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return ge(e,"pointerup",i=>{t(this._create(i))})}onPointerDown(e,t){return ge(e,Ne.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onPointerLeave(e,t){return ge(e,Ne.POINTER_LEAVE,i=>{t(this._create(i))})}onPointerMove(e,t){return ge(e,"pointermove",i=>t(this._create(i)))}}class lge extends ve{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new E2),this._keydownListener=null}startMonitoring(e,t,i,n,r){this._keydownListener=Un(e.ownerDocument,"keydown",o=>{o.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,o.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,i,o=>{n(new Bh(o,!0,this._editorViewDomNode))},o=>{this._keydownListener.dispose(),r(o)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}class pv extends ve{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let i=0,n=e.length;i<n;i++){const r=e[i];switch(r.type){case 0:this.onCompositionStart(r)&&(t=!0);break;case 1:this.onCompositionEnd(r)&&(t=!0);break;case 2:this.onConfigurationChanged(r)&&(t=!0);break;case 3:this.onCursorStateChanged(r)&&(t=!0);break;case 4:this.onDecorationsChanged(r)&&(t=!0);break;case 5:this.onFlushed(r)&&(t=!0);break;case 6:this.onFocusChanged(r)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(r)&&(t=!0);break;case 8:this.onLineMappingChanged(r)&&(t=!0);break;case 9:this.onLinesChanged(r)&&(t=!0);break;case 10:this.onLinesDeleted(r)&&(t=!0);break;case 11:this.onLinesInserted(r)&&(t=!0);break;case 12:this.onRevealRangeRequest(r)&&(t=!0);break;case 13:this.onScrollChanged(r)&&(t=!0);break;case 15:this.onTokensChanged(r)&&(t=!0);break;case 14:this.onThemeChanged(r)&&(t=!0);break;case 16:this.onTokensColorsChanged(r)&&(t=!0);break;case 17:this.onZonesChanged(r)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(r)}}t&&(this._shouldRender=!0)}}class Zr extends pv{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class rl{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const i=[];let n=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[n++]=this.read(e)),e=e.parentElement;const r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=i[n-o-1];return r}}class cge{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class uge extends cge{constructor(e,t,i){super(e,t),this._renderingContextBrand=void 0,this._viewLines=i}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class hge{constructor(e,t,i,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=i,this.continuesOnNextLine=n}}class t4{static from(e){const t=new Array(e.length);for(let i=0,n=e.length;i<n;i++){const r=e[i];t[i]=new t4(r.left,r.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}class df{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class dge{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class wO{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class tC{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,i,n,r){const o=this._createRange();try{return o.setStart(e,t),o.setEnd(i,n),o.getClientRects()}catch{return null}finally{this._detachRange(o,r)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(df.compare);const t=[];let i=0,n=e[0];for(let r=1,o=e.length;r<o;r++){const a=e[r];n.left+n.width+.9>=a.left?n.width=Math.max(n.width,a.left+a.width-n.left):(t[i++]=n,n=a)}return t[i++]=n,t}static _createHorizontalRangesFromClientRects(e,t,i){if(!e||e.length===0)return null;const n=[];for(let r=0,o=e.length;r<o;r++){const a=e[r];n[r]=new df(Math.max(0,(a.left-t)/i),a.width/i)}return this._mergeAdjacentRanges(n)}static readHorizontalRanges(e,t,i,n,r,o){const l=e.children.length-1;if(0>l)return null;if(t=Math.min(l,Math.max(0,t)),n=Math.min(l,Math.max(0,n)),t===n&&i===r&&i===0&&!e.children[t].firstChild){const g=e.children[t].getClientRects();return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(g,o.clientRectDeltaLeft,o.clientRectScale)}t!==n&&n>0&&r===0&&(n--,r=1073741824);let c=e.children[t].firstChild,u=e.children[n].firstChild;if((!c||!u)&&(!c&&i===0&&t>0&&(c=e.children[t-1].firstChild,i=1073741824),!u&&r===0&&n>0&&(u=e.children[n-1].firstChild,r=1073741824)),!c||!u)return null;i=Math.min(c.textContent.length,Math.max(0,i)),r=Math.min(u.textContent.length,Math.max(0,r));const d=this._readClientRects(c,i,u,r,o.endNode);return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(d,o.clientRectDeltaLeft,o.clientRectScale)}}const fge=function(){return mC?!0:!(xr||ba||Mh)}();let Vm=!0;class CO{constructor(e,t){this.themeType=t;const i=e.options,n=i.get(50);i.get(38)==="off"?this.renderWhitespace=i.get(100):this.renderWhitespace="none",this.renderControlCharacters=i.get(95),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.useMonospaceOptimizations=n.isMonospace&&!i.get(33),this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(67),this.stopRenderingLineAfter=i.get(118),this.fontLigatures=i.get(51)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}const FS=class FS{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=Qt(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return Dm(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,i,n,r){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const o=n.getViewLineRenderingData(e),a=this._options,l=fa.filter(o.inlineDecorations,e,o.minColumn,o.maxColumn);let c=null;if(Dm(a.themeType)||this._options.renderWhitespace==="selection"){const m=n.selections;for(const _ of m){if(_.endLineNumber<e||_.startLineNumber>e)continue;const v=_.startLineNumber===e?_.startColumn:o.minColumn,w=_.endLineNumber===e?_.endColumn:o.maxColumn;v<w&&(Dm(a.themeType)&&l.push(new fa(v,w,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(c||(c=[]),c.push(new fj(v-1,w-1))))}}const u=new Np(a.useMonospaceOptimizations,a.canUseHalfwidthRightwardsArrow,o.content,o.continuesWithWrappedLine,o.isBasicASCII,o.containsRTL,o.minColumn-1,o.tokens,l,o.tabSize,o.startVisibleColumn,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,a.stopRenderingLineAfter,a.renderWhitespace,a.renderControlCharacters,a.fontLigatures!==kf.OFF,c);if(this._renderedViewLine&&this._renderedViewLine.input.equals(u))return!1;r.appendString('<div style="top:'),r.appendString(String(t)),r.appendString("px;height:"),r.appendString(String(i)),r.appendString('px;" class="'),r.appendString(FS.CLASS_NAME),r.appendString('">');const d=JE(u,r);r.appendString("</div>");let g=null;return Vm&&fge&&o.isBasicASCII&&a.useMonospaceOptimizations&&d.containsForeignElements===0&&(g=new dw(this._renderedViewLine?this._renderedViewLine.domNode:null,u,d.characterMapping)),g||(g=yj(this._renderedViewLine?this._renderedViewLine.domNode:null,u,d.characterMapping,d.containsRTL,d.containsForeignElements)),this._renderedViewLine=g,!0}layoutLine(e,t,i){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(i))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof dw:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof dw?this._renderedViewLine.monospaceAssumptionsAreValid():Vm}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof dw&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,i,n){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));const r=this._renderedViewLine.input.stopRenderingLineAfter;if(r!==-1&&t>r+1&&i>r+1)return new wO(!0,[new df(this.getWidth(n),0)]);r!==-1&&t>r+1&&(t=r+1),r!==-1&&i>r+1&&(i=r+1);const o=this._renderedViewLine.getVisibleRangesForRange(e,t,i,n);return o&&o.length>0?new wO(!1,o):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}};FS.CLASS_NAME="view-line";let jc=FS;class dw{constructor(e,t,i){this._cachedWidth=-1,this.domNode=e,this.input=t;const n=Math.floor(t.lineContent.length/300);if(n>0){this._keyColumnPixelOffsetCache=new Float32Array(n);for(let r=0;r<n;r++)this._keyColumnPixelOffsetCache[r]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=i,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e?.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return Vm;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),Vm=!1)}return Vm}toSlowRenderedLine(){return yj(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,i,n){const r=this._getColumnPixelOffset(e,t,n),o=this._getColumnPixelOffset(e,i,n);return[new df(r,o-r)]}_getColumnPixelOffset(e,t,i){if(t<=300){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const n=Math.floor((t-1)/300)-1,r=(n+1)*300+1;let o=-1;if(this._keyColumnPixelOffsetCache&&(o=this._keyColumnPixelOffsetCache[n],o===-1&&(o=this._actualReadPixelOffset(e,r,i),this._keyColumnPixelOffsetCache[n]=o)),o===-1){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const a=this._characterMapping.getHorizontalOffset(r),l=this._characterMapping.getHorizontalOffset(t);return o+this._charWidth*(l-a)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,i){if(!this.domNode)return-1;const n=this._characterMapping.getDomPosition(t),r=tC.readHorizontalRanges(this._getReadingTarget(this.domNode),n.partIndex,n.charIndex,n.partIndex,n.charIndex,i);return!r||r.length===0?-1:r[0].left}getColumnOfNodeOffset(e,t){return Sj(this._characterMapping,e,t)}}class Cj{constructor(e,t,i,n,r){if(this.domNode=e,this.input=t,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=r,this._cachedWidth=-1,this._pixelOffsetCache=null,!n||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let o=0,a=this._characterMapping.length;o<=a;o++)this._pixelOffsetCache[o]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e?.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,i,n){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const r=this._readPixelOffset(this.domNode,e,t,n);if(r===-1)return null;const o=this._readPixelOffset(this.domNode,e,i,n);return o===-1?null:[new df(r,o-r)]}return this._readVisibleRangesForRange(this.domNode,e,t,i,n)}_readVisibleRangesForRange(e,t,i,n,r){if(i===n){const o=this._readPixelOffset(e,t,i,r);return o===-1?null:[new df(o,0)]}else return this._readRawVisibleRangesForRange(e,i,n,r)}_readPixelOffset(e,t,i,n){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(n);const r=this._getReadingTarget(e);return r.firstChild?(n.markDidDomLayout(),r.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const r=this._pixelOffsetCache[i];if(r!==-1)return r;const o=this._actualReadPixelOffset(e,t,i,n);return this._pixelOffsetCache[i]=o,o}return this._actualReadPixelOffset(e,t,i,n)}_actualReadPixelOffset(e,t,i,n){if(this._characterMapping.length===0){const l=tC.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,n);return!l||l.length===0?-1:l[0].left}if(i===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(n);const r=this._characterMapping.getDomPosition(i),o=tC.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,r.partIndex,r.charIndex,n);if(!o||o.length===0)return-1;const a=o[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(i),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,i,n){if(t===1&&i===this._characterMapping.length)return[new df(0,this.getWidth(n))];const r=this._characterMapping.getDomPosition(t),o=this._characterMapping.getDomPosition(i);return tC.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,o.partIndex,o.charIndex,n)}getColumnOfNodeOffset(e,t){return Sj(this._characterMapping,e,t)}}class gge extends Cj{_readVisibleRangesForRange(e,t,i,n,r){const o=super._readVisibleRangesForRange(e,t,i,n,r);if(!o||o.length===0||i===n||i===1&&n===this._characterMapping.length)return o;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,n,r);if(a!==-1){const l=o[o.length-1];l.left<a&&(l.width=a-l.left)}}return o}}const yj=function(){return o2?mge:pge}();function mge(s,e,t,i,n){return new gge(s,e,t,i,n)}function pge(s,e,t,i,n){return new Cj(s,e,t,i,n)}function Sj(s,e,t){const i=e.textContent.length;let n=-1;for(;e;)e=e.previousSibling,n++;return s.getColumn(new gj(n,t),i)}class R_{static whitespaceVisibleColumn(e,t,i){const n=e.length;let r=0,o=-1,a=-1;for(let l=0;l<n;l++){if(l===t)return[o,a,r];switch(r%i===0&&(o=l,a=r),e.charCodeAt(l)){case 32:r+=1;break;case 9:r=Tn.nextRenderTabStop(r,i);break;default:return[-1,-1,-1]}}return t===n?[o,a,r]:[-1,-1,-1]}static atomicPosition(e,t,i,n){const r=e.length,[o,a,l]=R_.whitespaceVisibleColumn(e,t,i);if(l===-1)return-1;let c;switch(n){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%i===0)return t;c=l%i<=i/2;break}if(c){if(o===-1)return-1;let g=a;for(let m=o;m<r;++m){if(g===a+i)return o;switch(e.charCodeAt(m)){case 32:g+=1;break;case 9:g=Tn.nextRenderTabStop(g,i);break;default:return-1}}return g===a+i?o:-1}const u=Tn.nextRenderTabStop(l,i);let d=l;for(let g=t;g<r;g++){if(d===u)return g;switch(e.charCodeAt(g)){case 32:d+=1;break;case 9:d=Tn.nextRenderTabStop(d,i);break;default:return-1}}return d===u?r:-1}}class Qu{constructor(e=null){this.hitTarget=e,this.type=0}}class xj{get hitTarget(){return this.spanNode}constructor(e,t,i){this.position=e,this.spanNode=t,this.injectedText=i,this.type=1}}var Hd;(function(s){function e(t,i,n){const r=t.getPositionFromDOMInfo(i,n);return r?new xj(r,i,null):new Qu(i)}s.createFromDOMInfo=e})(Hd||(Hd={}));class _ge{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class Vs{static _deduceRage(e,t=null){return!t&&e?new Q(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,i){return{type:0,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,i,n,r,o){return{type:e,element:t,mouseColumn:i,position:n,range:r,detail:o}}static createViewZone(e,t,i,n,r){return{type:e,element:t,mouseColumn:i,position:n,range:this._deduceRage(n),detail:r}}static createContentText(e,t,i,n,r){return{type:6,element:e,mouseColumn:t,position:i,range:this._deduceRage(i,n),detail:r}}static createContentEmpty(e,t,i,n){return{type:7,element:e,mouseColumn:t,position:i,range:this._deduceRage(i),detail:n}}static createContentWidget(e,t,i){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createScrollbar(e,t,i){return{type:11,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createOverlayWidget(e,t,i){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createOutsideEditor(e,t,i,n){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:i,outsideDistance:n}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class Qs{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===7}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===8}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===8}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===6}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===9}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowGuard(e){return e.length>=1&&e[0]===3}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}static isChildOfOverflowingOverlayWidgets(e){return e.length>=1&&e[0]===5}}class mp{constructor(e,t,i){this.viewModel=e.viewModel;const n=e.configuration.options;this.layoutInfo=n.get(146),this.viewDomNode=t.viewDomNode,this.lineHeight=n.get(67),this.stickyTabStops=n.get(117),this.typicalHalfwidthCharacterWidth=n.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return mp.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const i=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(i){const n=i.verticalOffset+i.height/2,r=e.viewModel.getLineCount();let o=null,a,l=null;return i.afterLineNumber!==r&&(l=new ce(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(o=new ce(i.afterLineNumber,e.viewModel.getLineMaxColumn(i.afterLineNumber))),l===null?a=o:o===null?a=l:t<n?a=o:a=l,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:o,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const n=this._context.viewModel.getLineCount(),r=this._context.viewModel.getLineMaxColumn(n);return{range:new Q(n,r,n,r),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),i=this._context.viewModel.getLineMaxColumn(t);return{range:new Q(t,1,t,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return mp._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,i){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===i)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class vge{constructor(e,t,i,n){this.editorPos=t,this.pos=i,this.relativePos=n,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,Ws._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class bge extends vge{get target(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}get targetPath(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=rl.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue}constructor(e,t,i,n,r){super(e,t,i,n),this.hitTestResult=new Nh(()=>Ws.doHitTest(this._ctx,this)),this._targetPathCacheElement=null,this._targetPathCacheValue=new Uint8Array(0),this._ctx=e,this._eventTarget=r;const o=!!this._eventTarget;this._useHitTestTarget=!o}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}get wouldBenefitFromHitTestTargetSwitch(){return!this._useHitTestTarget&&this.hitTestResult.value.hitTarget!==null&&this.target!==this.hitTestResult.value.hitTarget}switchToHitTestTarget(){this._useHitTestTarget=!0}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?Tn.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return Vs.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return Vs.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,i,n){return Vs.createMargin(e,this.target,this._getMouseColumn(t),t,i,n)}fulfillViewZone(e,t,i){return Vs.createViewZone(e,this.target,this._getMouseColumn(t),t,i)}fulfillContentText(e,t,i){return Vs.createContentText(this.target,this._getMouseColumn(e),e,t,i)}fulfillContentEmpty(e,t){return Vs.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return Vs.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return Vs.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return Vs.createOverlayWidget(this.target,this._getMouseColumn(),e)}}const yO={isAfterLines:!0};function fL(s){return{isAfterLines:!1,horizontalDistanceToText:s}}class Ws{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,i=rl.collect(t,this._viewHelper.viewDomNode);return!!(Qs.isChildOfContentWidgets(i)||Qs.isChildOfOverflowingContentWidgets(i)||Qs.isChildOfOverlayWidgets(i)||Qs.isChildOfOverflowingOverlayWidgets(i))}createMouseTarget(e,t,i,n,r){const o=new mp(this._context,this._viewHelper,e),a=new bge(o,t,i,n,r);try{const l=Ws._createMouseTarget(o,a);if(l.type===6&&o.stickyTabStops&&l.position!==null){const c=Ws._snapToSoftTabBoundary(l.position,o.viewModel),u=Q.fromPositions(c,c).plusRange(l.range);return a.fulfillContentText(c,u,l.detail)}return l}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t){if(t.target===null)return t.fulfillUnknown();const i=t;let n=null;return!Qs.isChildOfOverflowGuard(t.targetPath)&&!Qs.isChildOfOverflowingContentWidgets(t.targetPath)&&!Qs.isChildOfOverflowingOverlayWidgets(t.targetPath)&&(n=n||t.fulfillUnknown()),n=n||Ws._hitTestContentWidget(e,i),n=n||Ws._hitTestOverlayWidget(e,i),n=n||Ws._hitTestMinimap(e,i),n=n||Ws._hitTestScrollbarSlider(e,i),n=n||Ws._hitTestViewZone(e,i),n=n||Ws._hitTestMargin(e,i),n=n||Ws._hitTestViewCursor(e,i),n=n||Ws._hitTestTextArea(e,i),n=n||Ws._hitTestViewLines(e,i),n=n||Ws._hitTestScrollbar(e,i),n||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(Qs.isChildOfContentWidgets(t.targetPath)||Qs.isChildOfOverflowingContentWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillContentWidget(i):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(Qs.isChildOfOverlayWidgets(t.targetPath)||Qs.isChildOfOverflowingOverlayWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillOverlayWidget(i):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const i=e.lastRenderData.lastViewCursorsRenderData;for(const n of i)if(t.target===n.domNode)return t.fulfillContentText(n.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const i=e.lastRenderData.lastViewCursorsRenderData,n=t.mouseContentHorizontalOffset,r=t.mouseVerticalOffset;for(const o of i){if(n<o.contentLeft||n>o.contentLeft+o.width)continue;const a=e.getVerticalOffsetForLineNumber(o.position.lineNumber);if(a<=r&&r<=a+o.height)return t.fulfillContentText(o.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const i=e.getZoneAtCoord(t.mouseVerticalOffset);if(i){const n=t.isInContentArea?8:5;return t.fulfillViewZone(n,i.position,i)}return null}static _hitTestTextArea(e,t){return Qs.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const i=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),n=i.range.getStartPosition();let r=Math.abs(t.relativePos.x);const o={isAfterLines:i.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:r};if(r-=e.layoutInfo.glyphMarginLeft,r<=e.layoutInfo.glyphMarginWidth){const a=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(i.range.getStartPosition()),l=e.viewModel.glyphLanes.getLanesAtLine(a.lineNumber);return o.glyphMarginLane=l[Math.floor(r/e.lineHeight)],t.fulfillMargin(2,n,i.range,o)}return r-=e.layoutInfo.glyphMarginWidth,r<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,n,i.range,o):(r-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,n,i.range,o))}return null}static _hitTestViewLines(e,t){if(!Qs.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new ce(1,1),yO);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const n=e.viewModel.getLineCount(),r=e.viewModel.getLineMaxColumn(n);return t.fulfillContentEmpty(new ce(n,r),yO)}if(Qs.isStrictChildOfViewLines(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(n)===0){const o=e.getLineWidth(n),a=fL(t.mouseContentHorizontalOffset-o);return t.fulfillContentEmpty(new ce(n,1),a)}const r=e.getLineWidth(n);if(t.mouseContentHorizontalOffset>=r){const o=fL(t.mouseContentHorizontalOffset-r),a=new ce(n,e.viewModel.getLineMaxColumn(n));return t.fulfillContentEmpty(a,o)}}const i=t.hitTestResult.value;return i.type===1?Ws.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):t.wouldBenefitFromHitTestTargetSwitch?(t.switchToHitTestTarget(),this._createMouseTarget(e,t)):t.fulfillUnknown()}static _hitTestMinimap(e,t){if(Qs.isChildOfMinimap(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new ce(i,n))}return null}static _hitTestScrollbarSlider(e,t){if(Qs.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const i=t.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new ce(n,r))}}return null}static _hitTestScrollbar(e,t){if(Qs.isChildOfScrollableElement(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new ce(i,n))}return null}getMouseColumn(e){const t=this._context.configuration.options,i=t.get(146),n=this._context.viewLayout.getCurrentScrollLeft()+e.x-i.contentLeft;return Ws._getMouseColumn(n,t.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,i,n,r){const o=n.lineNumber,a=n.column,l=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>l){const y=fL(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(n,y)}const c=e.visibleRangeForPosition(o,a);if(!c)return t.fulfillUnknown(n);const u=c.left;if(Math.abs(t.mouseContentHorizontalOffset-u)<1)return t.fulfillContentText(n,null,{mightBeForeignElement:!!r,injectedText:r});const d=[];if(d.push({offset:c.left,column:a}),a>1){const y=e.visibleRangeForPosition(o,a-1);y&&d.push({offset:y.left,column:a-1})}const g=e.viewModel.getLineMaxColumn(o);if(a<g){const y=e.visibleRangeForPosition(o,a+1);y&&d.push({offset:y.left,column:a+1})}d.sort((y,S)=>y.offset-S.offset);const m=t.pos.toClientCoordinates(tt(e.viewDomNode)),_=i.getBoundingClientRect(),v=_.left<=m.clientX&&m.clientX<=_.right;let w=null;for(let y=1;y<d.length;y++){const S=d[y-1],k=d[y];if(S.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=k.offset){w=new Q(o,S.column,o,k.column);const L=Math.abs(S.offset-t.mouseContentHorizontalOffset),T=Math.abs(k.offset-t.mouseContentHorizontalOffset);n=L<T?new ce(o,S.column):new ce(o,k.column);break}}return t.fulfillContentText(n,w,{mightBeForeignElement:!v||!!r,injectedText:r})}static _doHitTestWithCaretRangeFromPoint(e,t){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.getVerticalOffsetForLineNumber(i),r=n+e.lineHeight;if(!(i===e.viewModel.getLineCount()&&t.mouseVerticalOffset>r)){const a=Math.floor((n+r)/2);let l=t.pos.y+(a-t.mouseVerticalOffset);l<=t.editorPos.y&&(l=t.editorPos.y+1),l>=t.editorPos.y+t.editorPos.height&&(l=t.editorPos.y+t.editorPos.height-1);const c=new e4(t.pos.x,l),u=this._actualDoHitTestWithCaretRangeFromPoint(e,c.toClientCoordinates(tt(e.viewDomNode)));if(u.type===1)return u}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates(tt(e.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const i=Qm(e.viewDomNode);let n;if(i?typeof i.caretRangeFromPoint>"u"?n=wge(i,t.clientX,t.clientY):n=i.caretRangeFromPoint(t.clientX,t.clientY):n=e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!n||!n.startContainer)return new Qu;const r=n.startContainer;if(r.nodeType===r.TEXT_NODE){const o=r.parentNode,a=o?o.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===jc.CLASS_NAME?Hd.createFromDOMInfo(e,o,n.startOffset):new Qu(r.parentNode)}else if(r.nodeType===r.ELEMENT_NODE){const o=r.parentNode,a=o?o.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===jc.CLASS_NAME?Hd.createFromDOMInfo(e,r,r.textContent.length):new Qu(r)}return new Qu}static _doHitTestWithCaretPositionFromPoint(e,t){const i=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){const n=i.offsetNode.parentNode,r=n?n.parentNode:null,o=r?r.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===jc.CLASS_NAME?Hd.createFromDOMInfo(e,i.offsetNode.parentNode,i.offset):new Qu(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){const n=i.offsetNode.parentNode,r=n&&n.nodeType===n.ELEMENT_NODE?n.className:null,o=n?n.parentNode:null,a=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;if(r===jc.CLASS_NAME){const l=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(l)return Hd.createFromDOMInfo(e,l,0)}else if(a===jc.CLASS_NAME)return Hd.createFromDOMInfo(e,i.offsetNode,0)}return new Qu(i.offsetNode)}static _snapToSoftTabBoundary(e,t){const i=t.getLineContent(e.lineNumber),{tabSize:n}=t.model.getOptions(),r=R_.atomicPosition(i,e.column-1,n,2);return r!==-1?new ce(e.lineNumber,r+1):e}static doHitTest(e,t){let i=new Qu;if(typeof e.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?i=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates(tt(e.viewDomNode)))),i.type===1){const n=e.viewModel.getInjectedTextAt(i.position),r=e.viewModel.normalizePosition(i.position,2);(n||!r.equals(i.position))&&(i=new xj(r,i.spanNode,n))}return i}}function wge(s,e,t){const i=document.createRange();let n=s.elementFromPoint(e,t);if(n!==null){for(;n&&n.firstChild&&n.firstChild.nodeType!==n.firstChild.TEXT_NODE&&n.lastChild&&n.lastChild.firstChild;)n=n.lastChild;const r=n.getBoundingClientRect(),o=tt(n),a=o.getComputedStyle(n,null).getPropertyValue("font-style"),l=o.getComputedStyle(n,null).getPropertyValue("font-variant"),c=o.getComputedStyle(n,null).getPropertyValue("font-weight"),u=o.getComputedStyle(n,null).getPropertyValue("font-size"),d=o.getComputedStyle(n,null).getPropertyValue("line-height"),g=o.getComputedStyle(n,null).getPropertyValue("font-family"),m=`${a} ${l} ${c} ${u}/${d} ${g}`,_=n.innerText;let v=r.left,w=0,y;if(e>r.left+r.width)w=_.length;else{const S=z6.getInstance();for(let k=0;k<_.length+1;k++){if(y=S.getCharWidth(_.charAt(k),m)/2,v+=y,e<v){w=k;break}v+=y}}i.setStart(n.firstChild,w),i.setEnd(n.firstChild,w)}return i}const Zd=class Zd{static getInstance(){return Zd._INSTANCE||(Zd._INSTANCE=new Zd),Zd._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const i=e+t;if(this._cache[i])return this._cache[i];const n=this._canvas.getContext("2d");n.font=t;const o=n.measureText(e).width;return this._cache[i]=o,o}};Zd._INSTANCE=null;let z6=Zd;class s9 extends pv{constructor(e,t,i){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new Ws(this._context,i),this._mouseDownOperation=this._register(new Cge(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(o,a)=>this._createMouseTarget(o,a),o=>this._getMouseColumn(o))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(146).height;const n=new oge(this.viewHelper.viewDomNode);this._register(n.onContextMenu(this.viewHelper.viewDomNode,o=>this._onContextMenu(o,!0))),this._register(n.onMouseMove(this.viewHelper.viewDomNode,o=>{this._onMouseMove(o),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=ge(this.viewHelper.viewDomNode.ownerDocument,"mousemove",a=>{this.viewHelper.viewDomNode.contains(a.target)||this._onMouseLeave(new Bh(a,!1,this.viewHelper.viewDomNode))}))})),this._register(n.onMouseUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(n.onMouseLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o)));let r=0;this._register(n.onPointerDown(this.viewHelper.viewDomNode,(o,a)=>{r=a})),this._register(ge(this.viewHelper.viewDomNode,Ne.POINTER_UP,o=>{this._mouseDownOperation.onPointerUp()})),this._register(n.onMouseDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o,r))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=jC.INSTANCE;let t=0,i=oh.getZoomLevel(),n=!1,r=0;const o=l=>{if(this.viewController.emitMouseWheel(l),!this._context.configuration.options.get(76))return;const c=new Df(l);if(e.acceptStandardWheelEvent(c),e.isPhysicalMouseWheel()){if(a(l)){const u=oh.getZoomLevel(),d=c.deltaY>0?1:-1;oh.setZoomLevel(u+d),c.preventDefault(),c.stopPropagation()}}else Date.now()-t>50&&(i=oh.getZoomLevel(),n=a(l),r=0),t=Date.now(),r+=c.deltaY,n&&(oh.setZoomLevel(i+r/5),c.preventDefault(),c.stopPropagation())};this._register(ge(this.viewHelper.viewDomNode,Ne.MOUSE_WHEEL,o,{capture:!0,passive:!1}));function a(l){return qt?(l.metaKey||l.ctrlKey)&&!l.shiftKey&&!l.altKey:l.ctrlKey&&!l.metaKey&&!l.shiftKey&&!l.altKey}}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(146)){const t=this._context.configuration.options.get(146).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const n=new wj(e,t).toPageCoordinates(tt(this.viewHelper.viewDomNode)),r=i9(this.viewHelper.viewDomNode);if(n.y<r.y||n.y>r.y+r.height||n.x<r.x||n.x>r.x+r.width)return null;const o=n9(this.viewHelper.viewDomNode,r,n);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),r,n,o,null)}_createMouseTarget(e,t){let i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){const n=Qm(this.viewHelper.viewDomNode);n&&(i=n.elementsFromPoint(e.posx,e.posy).find(r=>this.viewHelper.viewDomNode.contains(r)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?i:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const i=this._createMouseTarget(e,!0),n=i.type===6||i.type===7,r=i.type===2||i.type===3||i.type===4,o=i.type===3,a=this._context.configuration.options.get(110),l=i.type===8||i.type===5,c=i.type===9;let u=e.leftButton||e.middleButton;qt&&e.leftButton&&e.ctrlKey&&(u=!1);const d=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(u&&(n||o&&a))d(),this._mouseDownOperation.start(i.type,e,t);else if(r)e.preventDefault();else if(l){const g=i.detail;u&&this.viewHelper.shouldSuppressMouseDownOnViewZone(g.viewZoneId)&&(d(),this._mouseDownOperation.start(i.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(i.detail)&&(d(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:i})}}class Cge extends ve{constructor(e,t,i,n,r,o){super(),this._context=e,this._viewController=t,this._viewHelper=i,this._mouseTargetFactory=n,this._createMouseTarget=r,this._getMouseColumn=o,this._mouseMoveMonitor=this._register(new lge(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new yge(this._context,this._viewHelper,this._mouseTargetFactory,(a,l,c)=>this._dispatchMouse(a,l,c))),this._mouseState=new H6,this._currentSelection=new wi(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):t.type===13&&(t.outsidePosition==="above"||t.outsidePosition==="below")?this._topBottomDragScrolling.start(t,e):(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)))}start(e,t,i){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const n=this._findMousePosition(t,!0);if(!n||!n.position)return;this._mouseState.trySetCount(t.detail,n.position),t.detail=this._mouseState.count;const r=this._context.configuration.options;if(!r.get(92)&&r.get(35)&&!r.get(22)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&n.type===6&&n.position&&this._currentSelection.containsPosition(n.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,o=>this._onMouseDownThenMove(o),o=>{const a=this._findMousePosition(this._lastMouseEvent,!1);Rc(o)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(n,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,o=>this._onMouseDownThenMove(o),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,i=this._context.viewModel,n=this._context.viewLayout,r=this._getMouseColumn(e);if(e.posy<t.y){const a=t.y-e.posy,l=Math.max(n.getCurrentScrollTop()-a,0),c=mp.getZoneAtCoord(this._context,l);if(c){const d=this._helpPositionJumpOverViewZone(c);if(d)return Vs.createOutsideEditor(r,d,"above",a)}const u=n.getLineNumberAtVerticalOffset(l);return Vs.createOutsideEditor(r,new ce(u,1),"above",a)}if(e.posy>t.y+t.height){const a=e.posy-t.y-t.height,l=n.getCurrentScrollTop()+e.relativePos.y,c=mp.getZoneAtCoord(this._context,l);if(c){const d=this._helpPositionJumpOverViewZone(c);if(d)return Vs.createOutsideEditor(r,d,"below",a)}const u=n.getLineNumberAtVerticalOffset(l);return Vs.createOutsideEditor(r,new ce(u,i.getLineMaxColumn(u)),"below",a)}const o=n.getLineNumberAtVerticalOffset(n.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const a=t.x-e.posx;return Vs.createOutsideEditor(r,new ce(o,1),"left",a)}if(e.posx>t.x+t.width){const a=e.posx-t.x-t.width;return Vs.createOutsideEditor(r,new ce(o,i.getLineMaxColumn(o)),"right",a)}return null}_findMousePosition(e,t){const i=this._getPositionOutsideEditor(e);if(i)return i;const n=this._createMouseTarget(e,t);if(!n.position)return null;if(n.type===8||n.type===5){const o=this._helpPositionJumpOverViewZone(n.detail);if(o)return Vs.createViewZone(n.type,n.element,n.mouseColumn,o,n.detail)}return n}_helpPositionJumpOverViewZone(e){const t=new ce(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=e.positionBefore,n=e.positionAfter;return i&&n?i.isBefore(t)?i:n:null}_dispatchMouse(e,t,i){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:i,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}class yge extends ve{constructor(e,t,i,n){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=n,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new Sge(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class Sge extends ve{constructor(e,t,i,n,r,o){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=n,this._position=r,this._mouseEvent=o,this._lastTime=Date.now(),this._animationFrameDisposable=Kr(tt(o.browserEvent),()=>this._execute())}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(67),t=this._context.configuration.options.get(146).height/e,i=this._position.outsideDistance/e;return i<=1.5?Math.max(30,t*(1+i)):i<=3?Math.max(60,t*(2+i)):Math.max(200,t*(7+i))}_execute(){const e=this._context.configuration.options.get(67),t=this._getScrollSpeed(),i=this._tick(),n=t*(i/1e3)*e,r=this._position.outsidePosition==="above"?-n:n;this._context.viewModel.viewLayout.deltaScrollNow(0,r),this._viewHelper.renderNow();const o=this._context.viewLayout.getLinesViewportData(),a=this._position.outsidePosition==="above"?o.startLineNumber:o.endLineNumber;let l;{const c=i9(this._viewHelper.viewDomNode),u=this._context.configuration.options.get(146).horizontalScrollbarHeight,d=new e4(this._mouseEvent.pos.x,c.y+c.height-u-.1),g=n9(this._viewHelper.viewDomNode,c,d);l=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),c,d,g,null)}(!l.position||l.position.lineNumber!==a)&&(this._position.outsidePosition==="above"?l=Vs.createOutsideEditor(this._position.mouseColumn,new ce(a,1),"above",this._position.outsideDistance):l=Vs.createOutsideEditor(this._position.mouseColumn,new ce(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(l,!0,2),this._animationFrameDisposable=Kr(tt(l.element),()=>this._execute())}}const BS=class BS{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const i=new Date().getTime();i-this._lastSetMouseDownCountTime>BS.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};BS.CLEAR_MOUSE_DOWN_COUNT_TIME=400;let H6=BS;const vm=class vm{constructor(e,t,i,n,r){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selection=n,this.newlineCountBeforeSelection=r}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const i=e.getValue(),n=e.getSelectionStart(),r=e.getSelectionEnd();let o;if(t){const a=i.substring(0,n),l=t.value.substring(0,t.selectionStart);a===l&&(o=t.newlineCountBeforeSelection)}return new vm(i,n,r,null,o)}collapseSelection(){return this.selectionStart===this.value.length?this:new vm(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,i){t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const n=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selection?.getStartPosition()??null,n,-1)}if(e>=this.selectionEnd){const n=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selection?.getEndPosition()??null,n,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf("…")===-1)return this._finishDeduceEditorPosition(this.selection?.getStartPosition()??null,t,1);const i=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selection?.getEndPosition()??null,i,-1)}_finishDeduceEditorPosition(e,t,i){let n=0,r=-1;for(;(r=t.indexOf(`
`,r+1))!==-1;)n++;return[e,i*t.length,n]}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const n=Math.min(t3(e.value,t.value),e.selectionStart,t.selectionStart),r=Math.min(i3(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(n,e.value.length-r);const o=t.value.substring(n,t.value.length-r),a=e.selectionStart-n,l=e.selectionEnd-n,c=t.selectionStart-n,u=t.selectionEnd-n;if(c===u){const g=e.selectionStart-n;return{text:o,replacePrevCharCnt:g,replaceNextCharCnt:0,positionDelta:0}}const d=l-a;return{text:o,replacePrevCharCnt:d,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min(t3(e.value,t.value),e.selectionEnd),n=Math.min(i3(e.value,t.value),e.value.length-e.selectionEnd),r=e.value.substring(i,e.value.length-n),o=t.value.substring(i,t.value.length-n);e.selectionStart-i;const a=e.selectionEnd-i;t.selectionStart-i;const l=t.selectionEnd-i;return{text:o,replacePrevCharCnt:a,replaceNextCharCnt:r.length-a,positionDelta:l-o.length}}};vm.EMPTY=new vm("",0,0,null,void 0);let zs=vm;class sm{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const i=e*t,n=i+1,r=i+t;return new Q(n,1,r+1,1)}static fromEditorSelection(e,t,i,n){const o=sm._getPageOfLine(t.startLineNumber,i),a=sm._getRangeForPage(o,i),l=sm._getPageOfLine(t.endLineNumber,i),c=sm._getRangeForPage(l,i);let u=a.intersectRanges(new Q(1,1,t.startLineNumber,t.startColumn));if(n&&e.getValueLengthInRange(u,1)>500){const y=e.modifyPosition(u.getEndPosition(),-500);u=Q.fromPositions(y,u.getEndPosition())}const d=e.getValueInRange(u,1),g=e.getLineCount(),m=e.getLineMaxColumn(g);let _=c.intersectRanges(new Q(t.endLineNumber,t.endColumn,g,m));if(n&&e.getValueLengthInRange(_,1)>500){const y=e.modifyPosition(_.getStartPosition(),500);_=Q.fromPositions(_.getStartPosition(),y)}const v=e.getValueInRange(_,1);let w;if(o===l||o+1===l)w=e.getValueInRange(t,1);else{const y=a.intersectRanges(t),S=c.intersectRanges(t);w=e.getValueInRange(y,1)+"…"+e.getValueInRange(S,1)}return n&&w.length>2*500&&(w=w.substring(0,500)+"…"+w.substring(w.length-500,w.length)),new zs(d+w+v,d.length,d.length+w.length,t,u.endLineNumber-u.startLineNumber)}}var xge=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},SO=function(s,e){return function(t,i){e(t,i,s)}},Ny;(function(s){s.Tap="-monaco-textarea-synthetic-tap"})(Ny||(Ny={}));const WS=class WS{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}};WS.INSTANCE=new WS;let Iy=WS;class kge{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}let j6=class extends ve{get textAreaState(){return this._textAreaState}constructor(e,t,i,n,r,o){super(),this._host=e,this._textArea=t,this._OS=i,this._browser=n,this._accessibilityService=r,this._logService=o,this._onFocus=this._register(new re),this.onFocus=this._onFocus.event,this._onBlur=this._register(new re),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new re),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new re),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new re),this.onCut=this._onCut.event,this._onPaste=this._register(new re),this.onPaste=this._onPaste.event,this._onType=this._register(new re),this.onType=this._onType.event,this._onCompositionStart=this._register(new re),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new re),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new re),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new re),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new uu),this._asyncTriggerCut=this._register(new ir(()=>this._onCut.fire(),0)),this._textAreaState=zs.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(Te.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new ir(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)):this._asyncFocusGainWriteScreenReaderContent.clear()})),this._hasFocus=!1,this._currentComposition=null;let a=null;this._register(this._textArea.onKeyDown(l=>{const c=new Ni(l);(c.keyCode===114||this._currentComposition&&c.keyCode===1)&&c.stopPropagation(),c.equals(9)&&c.preventDefault(),a=c,this._onKeyDown.fire(c)})),this._register(this._textArea.onKeyUp(l=>{const c=new Ni(l);this._onKeyUp.fire(c)})),this._register(this._textArea.onCompositionStart(l=>{const c=new kge;if(this._currentComposition){this._currentComposition=c;return}if(this._currentComposition=c,this._OS===2&&a&&a.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===l.data&&(a.code==="ArrowRight"||a.code==="ArrowLeft")){c.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:l.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:l.data});return}this._onCompositionStart.fire({data:l.data})})),this._register(this._textArea.onCompositionUpdate(l=>{const c=this._currentComposition;if(!c)return;if(this._browser.isAndroid){const d=zs.readFromTextArea(this._textArea,this._textAreaState),g=zs.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(g),this._onCompositionUpdate.fire(l);return}const u=c.handleCompositionUpdate(l.data);this._textAreaState=zs.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(u),this._onCompositionUpdate.fire(l)})),this._register(this._textArea.onCompositionEnd(l=>{const c=this._currentComposition;if(!c)return;if(this._currentComposition=null,this._browser.isAndroid){const d=zs.readFromTextArea(this._textArea,this._textAreaState),g=zs.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(g),this._onCompositionEnd.fire();return}const u=c.handleCompositionUpdate(l.data);this._textAreaState=zs.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(u),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const c=zs.readFromTextArea(this._textArea,this._textAreaState),u=zs.deduceInput(this._textAreaState,c,this._OS===2);u.replacePrevCharCnt===0&&u.text.length===1&&(zn(u.text.charCodeAt(0))||u.text.charCodeAt(0)===127)||(this._textAreaState=c,(u.text!==""||u.replacePrevCharCnt!==0||u.replaceNextCharCnt!==0||u.positionDelta!==0)&&this._onType.fire(u))})),this._register(this._textArea.onCut(l=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(l),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(l=>{this._ensureClipboardGetsEditorSelection(l)})),this._register(this._textArea.onPaste(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),l.preventDefault(),!l.clipboardData)return;let[c,u]=xO.getTextData(l.clipboardData);c&&(u=u||Iy.INSTANCE.get(c),this._onPaste.fire({text:c,metadata:u}))})),this._register(this._textArea.onFocus(()=>{const l=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!l&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new ir(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return ge(this._textArea.ownerDocument,"selectionchange",t=>{if(bh.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const i=Date.now(),n=i-e;if(e=i,n<5)return;const r=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),r<100||!this._textAreaState.selection)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),u=this._host.deduceModelPosition(c[0],c[1],c[2]),d=this._textAreaState.deduceEditorPosition(l),g=this._host.deduceModelPosition(d[0],d[1],d[2]),m=new wi(u.lineNumber,u.column,g.lineNumber,g.column);this._onSelectionChangeRequest.fire(m)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeNativeTextAreaContent(e){!this._accessibilityService.isScreenReaderOptimized()&&e==="render"||this._currentComposition||(this._logService.trace(`writeTextAreaState(reason: ${e})`),this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),i={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};Iy.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,i),e.preventDefault(),e.clipboardData&&xO.setTextData(e.clipboardData,t.text,t.html,i)}};j6=xge([SO(4,ll),SO(5,ol)],j6);const xO={getTextData(s){const e=s.getData(Vc.text);let t=null;const i=s.getData("vscode-editor-data");if(typeof i=="string")try{t=JSON.parse(i),t.version!==1&&(t=null)}catch{}return e.length===0&&t===null&&s.files.length>0?[Array.prototype.slice.call(s.files,0).map(r=>r.name).join(`
`),null]:[e,t]},setTextData(s,e,t,i){s.setData(Vc.text,e),typeof t=="string"&&s.setData("text/html",t),s.setData("vscode-editor-data",JSON.stringify(i))}};class Lge extends ve{get ownerDocument(){return this._actual.ownerDocument}constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new Rt(this._actual,"keydown")).event,this.onKeyUp=this._register(new Rt(this._actual,"keyup")).event,this.onCompositionStart=this._register(new Rt(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new Rt(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new Rt(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new Rt(this._actual,"beforeinput")).event,this.onInput=this._register(new Rt(this._actual,"input")).event,this.onCut=this._register(new Rt(this._actual,"cut")).event,this.onCopy=this._register(new Rt(this._actual,"copy")).event,this.onPaste=this._register(new Rt(this._actual,"paste")).event,this.onFocus=this._register(new Rt(this._actual,"focus")).event,this.onBlur=this._register(new Rt(this._actual,"blur")).event,this._onSyntheticTap=this._register(new re),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>bh.onKeyDown())),this._register(this.onBeforeInput(()=>bh.onBeforeInput())),this._register(this.onInput(()=>bh.onInput())),this._register(this.onKeyUp(()=>bh.onKeyUp())),this._register(ge(this._actual,Ny.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=Qm(this._actual);return e?e.activeElement===this._actual:this._actual.isConnected?Us()===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const i=this._actual;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,i){const n=this._actual;let r=null;const o=Qm(n);o?r=o.activeElement:r=Us();const a=tt(r),l=r===n,c=n.selectionStart,u=n.selectionEnd;if(l&&c===t&&u===i){ba&&a.parent!==a&&n.focus();return}if(l){this.setIgnoreSelectionChangeTime("setSelectionRange"),n.setSelectionRange(t,i),ba&&a.parent!==a&&n.focus();return}try{const d=qQ(n);this.setIgnoreSelectionChangeTime("setSelectionRange"),n.focus(),n.setSelectionRange(t,i),KQ(n,d)}catch{}}}class Dge extends s9{constructor(e,t,i){super(e,t,i),this._register(rr.addTarget(this.viewHelper.linesContentDomNode)),this._register(ge(this.viewHelper.linesContentDomNode,xi.Tap,r=>this.onTap(r))),this._register(ge(this.viewHelper.linesContentDomNode,xi.Change,r=>this.onChange(r))),this._register(ge(this.viewHelper.linesContentDomNode,xi.Contextmenu,r=>this._onContextMenu(new Bh(r,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(ge(this.viewHelper.linesContentDomNode,"pointerdown",r=>{const o=r.pointerType;if(o==="mouse"){this._lastPointerType="mouse";return}else o==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const n=new age(this.viewHelper.viewDomNode);this._register(n.onPointerMove(this.viewHelper.viewDomNode,r=>this._onMouseMove(r))),this._register(n.onPointerUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(n.onPointerLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r))),this._register(n.onPointerDown(this.viewHelper.viewDomNode,(r,o)=>this._onMouseDown(r,o)))}onTap(e){!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget)||(e.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(e,!1))}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY),this._lastPointerType==="pen"&&this._dispatchGesture(e,!0)}_dispatchGesture(e,t){const i=this._createMouseTarget(new Bh(e,!1,this.viewHelper.viewDomNode),!1);i.position&&this.viewController.dispatchMouse({position:i.position,mouseColumn:i.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:t,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:i.type===6&&i.detail.injectedText!==null})}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}class Ege extends s9{constructor(e,t,i){super(e,t,i),this._register(rr.addTarget(this.viewHelper.linesContentDomNode)),this._register(ge(this.viewHelper.linesContentDomNode,xi.Tap,n=>this.onTap(n))),this._register(ge(this.viewHelper.linesContentDomNode,xi.Change,n=>this.onChange(n))),this._register(ge(this.viewHelper.linesContentDomNode,xi.Contextmenu,n=>this._onContextMenu(new Bh(n,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new Bh(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const i=document.createEvent("CustomEvent");i.initEvent(Ny.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(i),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class Tge extends ve{constructor(e,t,i){super(),(xf||UZ&&XB)&&EW.pointerEvents?this.handler=this._register(new Dge(e,t,i)):bi.TouchEvent?this.handler=this._register(new Ege(e,t,i)):this.handler=this._register(new s9(e,t,i))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class Jf extends pv{}const VS=class VS extends Jf{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new ce(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(67);const t=e.get(68);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(96);const i=e.get(146);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let i=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,i=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(i=!0),i}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return e.affectsLineNumber}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new ce(e,1));if(t.column!==1)return"";const i=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(this._renderLineNumbers===2){const n=Math.abs(this._lastCursorModelPosition.lineNumber-i);return n===0?'<span class="relative-current-line-number">'+i+"</span>":String(n)}if(this._renderLineNumbers===3){if(this._lastCursorModelPosition.lineNumber===i||i%10===0)return String(i);const n=this._context.viewModel.getLineCount();return i===n?String(i):""}return String(i)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=xr?this._lineHeight%2===0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter(c=>!!c.options.lineNumberClassName);r.sort((c,u)=>Q.compareRangesUsingEnds(c.range,u.range));let o=0;const a=this._context.viewModel.getLineCount(),l=[];for(let c=i;c<=n;c++){const u=c-i;let d=this._getLineRenderLineNumber(c),g="";for(;o<r.length&&r[o].range.endLineNumber<c;)o++;for(let m=o;m<r.length;m++){const{range:_,options:v}=r[m];_.startLineNumber<=c&&(g+=" "+v.lineNumberClassName)}if(!d&&!g){l[u]="";continue}c===a&&this._context.viewModel.getLineLength(c)===0&&(this._renderFinalNewline==="off"&&(d=""),this._renderFinalNewline==="dimmed"&&(g+=" dimmed-line-number")),c===this._activeLineNumber&&(g+=" active-line-number"),l[u]=`<div class="${VS.CLASS_NAME}${t}${g}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${d}</div>`}this._renderResult=l}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};VS.CLASS_NAME="line-numbers";let My=VS;_u((s,e)=>{const t=s.getColor(ale),i=s.getColor(Cle);i?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${i}; }`):t&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${t.transparent(.4)}; }`)});const bm=class bm extends Zr{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._domNode=Qt(document.createElement("div")),this._domNode.setClassName(bm.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=Qt(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(bm.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}};bm.CLASS_NAME="glyph-margin",bm.OUTER_CLASS_NAME="margin";let Ry=bm;const zm="monaco-mouse-cursor-text";var Nge=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},kO=function(s,e){return function(t,i){e(t,i,s)}};class Ige{constructor(e,t,i,n,r){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=n,this.distanceToModelLineEnd=r,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new ce(this.modelLineNumber,this.distanceToModelLineStart+1),i=new ce(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const gL=ba;let U6=class extends Zr{constructor(e,t,i,n,r){super(e),this._keybindingService=n,this._instantiationService=r,this._primaryCursorPosition=new ce(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=i,this._scrollLeft=0,this._scrollTop=0;const o=this._context.configuration.options,a=o.get(146);this._setAccessibilityOptions(o),this._contentLeft=a.contentLeft,this._contentWidth=a.contentWidth,this._contentHeight=a.height,this._fontInfo=o.get(50),this._lineHeight=o.get(67),this._emptySelectionClipboard=o.get(37),this._copyWithSyntaxHighlighting=o.get(25),this._visibleTextArea=null,this._selections=[new wi(1,1,1,1)],this._modelSelections=[new wi(1,1,1,1)],this._lastRenderPosition=null,this.textArea=Qt(document.createElement("textarea")),rl.write(this.textArea,7),this.textArea.setClassName(`inputarea ${zm}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:l}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${l*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(o)),this.textArea.setAttribute("aria-required",o.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(o.get(125))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",b("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",o.get(92)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=Qt(document.createElement("div")),this.textAreaCover.setPosition("absolute");const c={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:g=>this._context.viewModel.getLineMaxColumn(g),getValueInRange:(g,m)=>this._context.viewModel.getValueInRange(g,m),getValueLengthInRange:(g,m)=>this._context.viewModel.getValueLengthInRange(g,m),modifyPosition:(g,m)=>this._context.viewModel.modifyPosition(g,m)},u={getDataToCopy:()=>{const g=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,$r),m=this._context.viewModel.model.getEOL(),_=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),v=Array.isArray(g)?g:null,w=Array.isArray(g)?g.join(m):g;let y,S=null;if(this._copyWithSyntaxHighlighting&&w.length<65536){const k=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);k&&(y=k.html,S=k.mode)}return{isFromEmptySelection:_,multicursorText:v,text:w,html:y,mode:S}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const g=this._selections[0];if(qt&&g.isEmpty()){const _=g.getStartPosition();let v=this._getWordBeforePosition(_);if(v.length===0&&(v=this._getCharacterBeforePosition(_)),v.length>0)return new zs(v,v.length,v.length,Q.fromPositions(_),0)}if(qt&&!g.isEmpty()&&c.getValueLengthInRange(g,0)<500){const _=c.getValueInRange(g,0);return new zs(_,0,_.length,g,0)}if(Mh&&!g.isEmpty()){const _="vscode-placeholder";return new zs(_,0,_.length,null,void 0)}return zs.EMPTY}if(FM){const g=this._selections[0];if(g.isEmpty()){const m=g.getStartPosition(),[_,v]=this._getAndroidWordAtPosition(m);if(_.length>0)return new zs(_,v,v,Q.fromPositions(m),0)}return zs.EMPTY}return sm.fromEditorSelection(c,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(g,m,_)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(g,m,_)},d=this._register(new Lge(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(j6,u,d,ha,{isAndroid:FM,isChrome:Z_,isFirefox:ba,isSafari:Mh})),this._register(this._textAreaInput.onKeyDown(g=>{this._viewController.emitKeyDown(g)})),this._register(this._textAreaInput.onKeyUp(g=>{this._viewController.emitKeyUp(g)})),this._register(this._textAreaInput.onPaste(g=>{let m=!1,_=null,v=null;g.metadata&&(m=this._emptySelectionClipboard&&!!g.metadata.isFromEmptySelection,_=typeof g.metadata.multicursorText<"u"?g.metadata.multicursorText:null,v=g.metadata.mode),this._viewController.paste(g.text,m,_,v)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(g=>{g.replacePrevCharCnt||g.replaceNextCharCnt||g.positionDelta?this._viewController.compositionType(g.text,g.replacePrevCharCnt,g.replaceNextCharCnt,g.positionDelta):this._viewController.type(g.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(g=>{this._viewController.setSelection(g)})),this._register(this._textAreaInput.onCompositionStart(g=>{const m=this.textArea.domNode,_=this._modelSelections[0],{distanceToModelLineStart:v,widthOfHiddenTextBefore:w}=(()=>{const S=m.value.substring(0,Math.min(m.selectionStart,m.selectionEnd)),k=S.lastIndexOf(`
`),L=S.substring(k+1),T=L.lastIndexOf("	"),A=L.length-T-1,I=_.getStartPosition(),O=Math.min(I.column-1,A),F=I.column-1-O,J=L.substring(0,L.length-O),{tabSize:Y}=this._context.viewModel.model.getOptions(),G=Mge(this.textArea.domNode.ownerDocument,J,this._fontInfo,Y);return{distanceToModelLineStart:F,widthOfHiddenTextBefore:G}})(),{distanceToModelLineEnd:y}=(()=>{const S=m.value.substring(Math.max(m.selectionStart,m.selectionEnd)),k=S.indexOf(`
`),L=k===-1?S:S.substring(0,k),T=L.indexOf("	"),A=T===-1?L.length:L.length-T-1,I=_.getEndPosition(),O=Math.min(this._context.viewModel.model.getLineMaxColumn(I.lineNumber)-I.column,A);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(I.lineNumber)-I.column-O}})();this._context.viewModel.revealRange("keyboard",!0,Q.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new Ige(this._context,_.startLineNumber,v,w,y),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${zm} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(g=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${zm}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(l1.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(e){this._textAreaInput.writeNativeTextAreaContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',i=this._context.viewModel.getLineContent(e.lineNumber),n=tp(t,[]);let r=!0,o=e.column,a=!0,l=e.column,c=0;for(;c<50&&(r||a);){if(r&&o<=1&&(r=!1),r){const u=i.charCodeAt(o-2);n.get(u)!==0?r=!1:o--}if(a&&l>i.length&&(a=!1),a){const u=i.charCodeAt(l-1);n.get(u)!==0?a=!1:l++}c++}return[i.substring(o-1,l-1),e.column-o]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),i=tp(this._context.configuration.options.get(132),[]);let n=e.column,r=0;for(;n>1;){const o=t.charCodeAt(n-2);if(i.get(o)!==0||r>50)return t.substring(n-1,e.column-1);r++,n--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const i=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!zn(i.charCodeAt(0)))return i}return""}_getAriaLabel(e){if(e.get(2)===1){const i=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode")?.getAriaLabel(),n=this._keybindingService.lookupKeybinding("workbench.action.showCommands")?.getAriaLabel(),r=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings")?.getAriaLabel(),o=b("accessibilityModeOff","The editor is not accessible at this time.");return i?b("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",o,i):n?b("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",o,n):r?b("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",o,r):o}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===Bf.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const n=e.get(146).wrappingColumn;if(n!==-1&&this._accessibilitySupport!==1){const r=e.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(n*r.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=gL?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(50),this._lineHeight=t.get(67),this._emptySelectionClipboard=t.get(37),this._copyWithSyntaxHighlighting=t.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:n}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${n*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(125))),(e.hasChanged(34)||e.hasChanged(92))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!l1.enabled||e.get(34)&&e.get(92)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){this._primaryCursorPosition=new ce(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),this._visibleTextArea?.prepareRender(e)}render(e){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){if(this._visibleTextArea){const i=this._visibleTextArea.visibleTextareaStart,n=this._visibleTextArea.visibleTextareaEnd,r=this._visibleTextArea.startPosition,o=this._visibleTextArea.endPosition;if(r&&o&&i&&n&&n.left>=this._scrollLeft&&i.left<=this._scrollLeft+this._contentWidth){const a=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,l=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let c=this._visibleTextArea.widthOfHiddenLineTextBefore,u=this._contentLeft+i.left-this._scrollLeft,d=n.left-i.left+1;if(u<this._contentLeft){const y=this._contentLeft-u;u+=y,c+=y,d-=y}d>this._contentWidth&&(d=this._contentWidth);const g=this._context.viewModel.getViewLineData(r.lineNumber),m=g.tokens.findTokenIndexAtOffset(r.column-1),_=g.tokens.findTokenIndexAtOffset(o.column-1),v=m===_,w=this._visibleTextArea.definePresentation(v?g.tokens.getPresentation(m):null);this.textArea.domNode.scrollTop=l*this._lineHeight,this.textArea.domNode.scrollLeft=c,this._doRender({lastRenderPosition:null,top:a,left:u,width:d,height:this._lineHeight,useCover:!1,color:(un.getColorMap()||[])[w.foreground],italic:w.italic,bold:w.bold,underline:w.underline,strikethrough:w.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(qt||this._accessibilitySupport===2){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const i=this._textAreaInput.textAreaState.newlineCountBeforeSelection??this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=i*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:gL?0:1,useCover:!1})}_newlinecount(e){let t=0,i=-1;do{if(i=e.indexOf(`
`,i+1),i===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:gL?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,i=this.textAreaCover;xs(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?Le.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),i.setTop(e.useCover?e.top:0),i.setLeft(e.useCover?e.left:0),i.setWidth(e.useCover?e.width:0),i.setHeight(e.useCover?e.height:0);const n=this._context.configuration.options;n.get(57)?i.setClassName("monaco-editor-background textAreaCover "+Ry.OUTER_CLASS_NAME):n.get(68).renderType!==0?i.setClassName("monaco-editor-background textAreaCover "+My.CLASS_NAME):i.setClassName("monaco-editor-background textAreaCover")}};U6=Nge([kO(3,ps),kO(4,hi)],U6);function Mge(s,e,t,i){if(e.length===0)return 0;const n=s.createElement("div");n.style.position="absolute",n.style.top="-50000px",n.style.width="50000px";const r=s.createElement("span");xs(r,t),r.style.whiteSpace="pre",r.style.tabSize=`${i*t.spaceWidth}px`,r.append(e),n.appendChild(r),s.body.appendChild(n);const o=r.offsetWidth;return n.remove(),o}const Rge=()=>!0,Age=()=>!1,Pge=s=>s===" "||s==="	";class Pg{static shouldRecreate(e){return e.hasChanged(146)||e.hasChanged(132)||e.hasChanged(37)||e.hasChanged(77)||e.hasChanged(79)||e.hasChanged(80)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(129)||e.hasChanged(50)||e.hasChanged(92)||e.hasChanged(131)}constructor(e,t,i,n){this.languageConfigurationService=n,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const r=i.options,o=r.get(146),a=r.get(50);this.readOnly=r.get(92),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=r.get(117),this.lineHeight=a.lineHeight,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(o.height/this.lineHeight)-2),this.useTabStops=r.get(129),this.wordSeparators=r.get(132),this.emptySelectionClipboard=r.get(37),this.copyWithSyntaxHighlighting=r.get(25),this.multiCursorMergeOverlapping=r.get(77),this.multiCursorPaste=r.get(79),this.multiCursorLimit=r.get(80),this.autoClosingBrackets=r.get(6),this.autoClosingComments=r.get(7),this.autoClosingQuotes=r.get(11),this.autoClosingDelete=r.get(9),this.autoClosingOvertype=r.get(10),this.autoSurround=r.get(14),this.autoIndent=r.get(12),this.wordSegmenterLocales=r.get(131),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const l=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(l)for(const u of l)this.surroundingPairs[u.open]=u.close;const c=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=c?.blockCommentStartToken??null}get electricChars(){if(!this._electricChars){this._electricChars={};const e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter?.getElectricCharacters();if(e)for(const t of e)this._electricChars[t]=!0}return this._electricChars}onElectricCharacter(e,t,i){const n=Qd(t,i-1),r=this.languageConfigurationService.getLanguageConfiguration(n.languageId).electricCharacter;return r?r.onElectricCharacter(e,n,i-n.firstCharOffset):null}normalizeIndentation(e){return fH(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,i){switch(t){case"beforeWhitespace":return Pge;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,i);case"always":return Rge;case"never":return Age}}_getLanguageDefinedShouldAutoClose(e,t){const i=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return n=>i.indexOf(n)!==-1}visibleColumnFromColumn(e,t){return Tn.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,i){const n=Tn.columnFromVisibleColumn(e.getLineContent(t),i,this.tabSize),r=e.getLineMinColumn(t);if(n<r)return r;const o=e.getLineMaxColumn(t);return n>o?o:n}}class Bt{static fromModelState(e){return new Oge(e)}static fromViewState(e){return new Fge(e)}static fromModelSelection(e){const t=wi.liftSelection(e),i=new Zn(Q.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return Bt.fromModelState(i)}static fromModelSelections(e){const t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this.fromModelSelection(e[i]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class Oge{constructor(e){this.modelState=e,this.viewState=null}}class Fge{constructor(e){this.modelState=null,this.viewState=e}}class Zn{constructor(e,t,i,n,r){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=i,this.position=n,this.leftoverVisibleColumns=r,this._singleCursorStateBrand=void 0,this.selection=Zn._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,i,n){return e?new Zn(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new ce(t,i),n):new Zn(new Q(t,i,t,i),0,n,new ce(t,i),n)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?wi.fromPositions(e.getStartPosition(),t):wi.fromPositions(e.getEndPosition(),t)}}class Lr{constructor(e,t,i){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter}}function Wh(s){return s==="'"||s==='"'||s==="`"}class jd{static columnSelect(e,t,i,n,r,o){const a=Math.abs(r-i)+1,l=i>r,c=n>o,u=n<o,d=[];for(let g=0;g<a;g++){const m=i+(l?-g:g),_=e.columnFromVisibleColumn(t,m,n),v=e.columnFromVisibleColumn(t,m,o),w=e.visibleColumnFromColumn(t,new ce(m,_)),y=e.visibleColumnFromColumn(t,new ce(m,v));u&&(w>o||y<n)||c&&(y>n||w<o)||d.push(new Zn(new Q(m,_,m,_),0,0,new ce(m,v),0))}if(d.length===0)for(let g=0;g<a;g++){const m=i+(l?-g:g),_=t.getLineMaxColumn(m);d.push(new Zn(new Q(m,_,m,_),0,0,new ce(m,_),0))}return{viewStates:d,reversed:l,fromLineNumber:i,fromVisualColumn:n,toLineNumber:r,toVisualColumn:o}}static columnSelectLeft(e,t,i){let n=i.toViewVisualColumn;return n>0&&n--,jd.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,n)}static columnSelectRight(e,t,i){let n=0;const r=Math.min(i.fromViewLineNumber,i.toViewLineNumber),o=Math.max(i.fromViewLineNumber,i.toViewLineNumber);for(let l=r;l<=o;l++){const c=t.getLineMaxColumn(l),u=e.visibleColumnFromColumn(t,new ce(l,c));n=Math.max(n,u)}let a=i.toViewVisualColumn;return a<n&&a++,this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,a)}static columnSelectUp(e,t,i,n){const r=n?e.pageSize:1,o=Math.max(1,i.toViewLineNumber-r);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,o,i.toViewVisualColumn)}static columnSelectDown(e,t,i,n){const r=n?e.pageSize:1,o=Math.min(t.getLineCount(),i.toViewLineNumber+r);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,o,i.toViewVisualColumn)}}class Vr{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return wi.fromPositions(n.getEndPosition())}}class iC{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return wi.fromPositions(n.getStartPosition())}}class Ay{constructor(e,t,i,n,r=!1){this._range=e,this._text=t,this._columnDeltaOffset=n,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=r}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return wi.fromPositions(n.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class Bge{constructor(e,t,i,n=!1){this._range=e,this._text=t,this._initialSelection=i,this._forceMoveMarkers=n,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class mL{constructor(e,t,i){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=i}}class li{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-yW(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const i=t.lineNumber-1;return new ce(i,e.getLineMaxColumn(i))}else return t}static leftPositionAtomicSoftTabs(e,t,i){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const n=e.getLineMinColumn(t.lineNumber),r=e.getLineContent(t.lineNumber),o=R_.atomicPosition(r,t.column-1,i,0);if(o!==-1&&o+1>=n)return new ce(t.lineNumber,o+1)}return this.leftPosition(e,t)}static left(e,t,i){const n=e.stickyTabStops?li.leftPositionAtomicSoftTabs(t,i,e.tabSize):li.leftPosition(t,i);return new mL(n.lineNumber,n.column,0)}static moveLeft(e,t,i,n,r){let o,a;if(i.hasSelection()&&!n)o=i.selection.startLineNumber,a=i.selection.startColumn;else{const l=i.position.delta(void 0,-(r-1)),c=t.normalizePosition(li.clipPositionColumn(l,t),0),u=li.left(e,t,c);o=u.lineNumber,a=u.column}return i.move(n,o,a,0)}static clipPositionColumn(e,t){return new ce(e.lineNumber,li.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,i){return e<t?t:e>i?i:e}static rightPosition(e,t,i){return i<e.getLineMaxColumn(t)?i=i+g8(e.getLineContent(t),i-1):t<e.getLineCount()&&(t=t+1,i=e.getLineMinColumn(t)),new ce(t,i)}static rightPositionAtomicSoftTabs(e,t,i,n,r){if(i<e.getLineIndentColumn(t)){const o=e.getLineContent(t),a=R_.atomicPosition(o,i-1,n,1);if(a!==-1)return new ce(t,a+1)}return this.rightPosition(e,t,i)}static right(e,t,i){const n=e.stickyTabStops?li.rightPositionAtomicSoftTabs(t,i.lineNumber,i.column,e.tabSize,e.indentSize):li.rightPosition(t,i.lineNumber,i.column);return new mL(n.lineNumber,n.column,0)}static moveRight(e,t,i,n,r){let o,a;if(i.hasSelection()&&!n)o=i.selection.endLineNumber,a=i.selection.endColumn;else{const l=i.position.delta(void 0,r-1),c=t.normalizePosition(li.clipPositionColumn(l,t),1),u=li.right(e,t,c);o=u.lineNumber,a=u.column}return i.move(n,o,a,0)}static vertical(e,t,i,n,r,o,a,l){const c=Tn.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize)+r,u=t.getLineCount(),d=i===1&&n===1,g=i===u&&n===t.getLineMaxColumn(i),m=o<i?d:g;if(i=o,i<1?(i=1,a?n=t.getLineMinColumn(i):n=Math.min(t.getLineMaxColumn(i),n)):i>u?(i=u,a?n=t.getLineMaxColumn(i):n=Math.min(t.getLineMaxColumn(i),n)):n=e.columnFromVisibleColumn(t,i,c),m?r=0:r=c-Tn.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize),l!==void 0){const _=new ce(i,n),v=t.normalizePosition(_,l);r=r+(n-v.column),i=v.lineNumber,n=v.column}return new mL(i,n,r)}static down(e,t,i,n,r,o,a){return this.vertical(e,t,i,n,r,i+o,a,4)}static moveDown(e,t,i,n,r){let o,a;i.hasSelection()&&!n?(o=i.selection.endLineNumber,a=i.selection.endColumn):(o=i.position.lineNumber,a=i.position.column);let l=0,c;do if(c=li.down(e,t,o+l,a,i.leftoverVisibleColumns,r,!0),t.normalizePosition(new ce(c.lineNumber,c.column),2).lineNumber>o)break;while(l++<10&&o+l<t.getLineCount());return i.move(n,c.lineNumber,c.column,c.leftoverVisibleColumns)}static translateDown(e,t,i){const n=i.selection,r=li.down(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),o=li.down(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new Zn(new Q(r.lineNumber,r.column,r.lineNumber,r.column),0,r.leftoverVisibleColumns,new ce(o.lineNumber,o.column),o.leftoverVisibleColumns)}static up(e,t,i,n,r,o,a){return this.vertical(e,t,i,n,r,i-o,a,3)}static moveUp(e,t,i,n,r){let o,a;i.hasSelection()&&!n?(o=i.selection.startLineNumber,a=i.selection.startColumn):(o=i.position.lineNumber,a=i.position.column);const l=li.up(e,t,o,a,i.leftoverVisibleColumns,r,!0);return i.move(n,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,i){const n=i.selection,r=li.up(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),o=li.up(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new Zn(new Q(r.lineNumber,r.column,r.lineNumber,r.column),0,r.leftoverVisibleColumns,new ce(o.lineNumber,o.column),o.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,i,n){let r=i.position.lineNumber;for(;r>1&&this._isBlankLine(t,r);)r--;for(;r>1&&!this._isBlankLine(t,r);)r--;return i.move(n,r,t.getLineMinColumn(r),0)}static moveToNextBlankLine(e,t,i,n){const r=t.getLineCount();let o=i.position.lineNumber;for(;o<r&&this._isBlankLine(t,o);)o++;for(;o<r&&!this._isBlankLine(t,o);)o++;return i.move(n,o,t.getLineMinColumn(o),0)}static moveToBeginningOfLine(e,t,i,n){const r=i.position.lineNumber,o=t.getLineMinColumn(r),a=t.getLineFirstNonWhitespaceColumn(r)||o;let l;return i.position.column===a?l=o:l=a,i.move(n,r,l,0)}static moveToEndOfLine(e,t,i,n,r){const o=i.position.lineNumber,a=t.getLineMaxColumn(o);return i.move(n,o,a,r?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,i,n){return i.move(n,1,1,0)}static moveToEndOfBuffer(e,t,i,n){const r=t.getLineCount(),o=t.getLineMaxColumn(r);return i.move(n,r,o,0)}}class Pf{static deleteRight(e,t,i,n){const r=[];let o=e!==3;for(let a=0,l=n.length;a<l;a++){const c=n[a];let u=c;if(u.isEmpty()){const d=c.getPosition(),g=li.right(t,i,d);u=new Q(g.lineNumber,g.column,d.lineNumber,d.column)}if(u.isEmpty()){r[a]=null;continue}u.startLineNumber!==u.endLineNumber&&(o=!0),r[a]=new Vr(u,"")}return[o,r]}static isAutoClosingPairDelete(e,t,i,n,r,o,a){if(t==="never"&&i==="never"||e==="never")return!1;for(let l=0,c=o.length;l<c;l++){const u=o[l],d=u.getPosition();if(!u.isEmpty())return!1;const g=r.getLineContent(d.lineNumber);if(d.column<2||d.column>=g.length+1)return!1;const m=g.charAt(d.column-2),_=n.get(m);if(!_)return!1;if(Wh(m)){if(i==="never")return!1}else if(t==="never")return!1;const v=g.charAt(d.column-1);let w=!1;for(const y of _)y.open===m&&y.close===v&&(w=!0);if(!w)return!1;if(e==="auto"){let y=!1;for(let S=0,k=a.length;S<k;S++){const L=a[S];if(d.lineNumber===L.startLineNumber&&d.column===L.startColumn){y=!0;break}}if(!y)return!1}}return!0}static _runAutoClosingPairDelete(e,t,i){const n=[];for(let r=0,o=i.length;r<o;r++){const a=i[r].getPosition(),l=new Q(a.lineNumber,a.column-1,a.lineNumber,a.column+1);n[r]=new Vr(l,"")}return[!0,n]}static deleteLeft(e,t,i,n,r){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,i,n,r))return this._runAutoClosingPairDelete(t,i,n);const o=[];let a=e!==2;for(let l=0,c=n.length;l<c;l++){const u=Pf.getDeleteRange(n[l],i,t);if(u.isEmpty()){o[l]=null;continue}u.startLineNumber!==u.endLineNumber&&(a=!0),o[l]=new Vr(u,"")}return[a,o]}static getDeleteRange(e,t,i){if(!e.isEmpty())return e;const n=e.getPosition();if(i.useTabStops&&n.column>1){const r=t.getLineContent(n.lineNumber),o=Ur(r),a=o===-1?r.length+1:o+1;if(n.column<=a){const l=i.visibleColumnFromColumn(t,n),c=Tn.prevIndentTabStop(l,i.indentSize),u=i.columnFromVisibleColumn(t,n.lineNumber,c);return new Q(n.lineNumber,u,n.lineNumber,n.column)}}return Q.fromPositions(Pf.getPositionAfterDeleteLeft(n,t),n)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const i=zX(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,i+1)}else if(e.lineNumber>1){const i=e.lineNumber-1;return new ce(i,t.getLineMaxColumn(i))}else return e}static cut(e,t,i){const n=[];let r=null;i.sort((o,a)=>ce.compare(o.getStartPosition(),a.getEndPosition()));for(let o=0,a=i.length;o<a;o++){const l=i[o];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let u,d,g,m;c.lineNumber<t.getLineCount()?(u=c.lineNumber,d=1,g=c.lineNumber+1,m=1):c.lineNumber>1&&r?.endLineNumber!==c.lineNumber?(u=c.lineNumber-1,d=t.getLineMaxColumn(c.lineNumber-1),g=c.lineNumber,m=t.getLineMaxColumn(c.lineNumber)):(u=c.lineNumber,d=1,g=c.lineNumber,m=t.getLineMaxColumn(c.lineNumber));const _=new Q(u,d,g,m);r=_,_.isEmpty()?n[o]=null:n[o]=new Vr(_,"")}else n[o]=null;else n[o]=new Vr(l,"")}return new Lr(0,n,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class nn{static _createWord(e,t,i,n,r){return{start:n,end:r,wordType:t,nextCharClass:i}}static _createIntlWord(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(e,t,i){const n=t.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(n,e,i)}static _doFindPreviousWordOnLine(e,t,i){let n=0;const r=t.findPrevIntlWordBeforeOrAtOffset(e,i.column-2);for(let o=i.column-2;o>=0;o--){const a=e.charCodeAt(o),l=t.get(a);if(r&&o===r.index)return this._createIntlWord(r,l);if(l===0){if(n===2)return this._createWord(e,n,l,o+1,this._findEndOfWord(e,t,n,o+1));n=1}else if(l===2){if(n===1)return this._createWord(e,n,l,o+1,this._findEndOfWord(e,t,n,o+1));n=2}else if(l===1&&n!==0)return this._createWord(e,n,l,o+1,this._findEndOfWord(e,t,n,o+1))}return n!==0?this._createWord(e,n,1,0,this._findEndOfWord(e,t,n,0)):null}static _findEndOfWord(e,t,i,n){const r=t.findNextIntlWordAtOrAfterOffset(e,n),o=e.length;for(let a=n;a<o;a++){const l=e.charCodeAt(a),c=t.get(l);if(r&&a===r.index+r.segment.length||c===1||i===1&&c===2||i===2&&c===0)return a}return o}static _findNextWordOnLine(e,t,i){const n=t.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(n,e,i)}static _doFindNextWordOnLine(e,t,i){let n=0;const r=e.length,o=t.findNextIntlWordAtOrAfterOffset(e,i.column-1);for(let a=i.column-1;a<r;a++){const l=e.charCodeAt(a),c=t.get(l);if(o&&a===o.index)return this._createIntlWord(o,c);if(c===0){if(n===2)return this._createWord(e,n,c,this._findStartOfWord(e,t,n,a-1),a);n=1}else if(c===2){if(n===1)return this._createWord(e,n,c,this._findStartOfWord(e,t,n,a-1),a);n=2}else if(c===1&&n!==0)return this._createWord(e,n,c,this._findStartOfWord(e,t,n,a-1),a)}return n!==0?this._createWord(e,n,1,this._findStartOfWord(e,t,n,r-1),r):null}static _findStartOfWord(e,t,i,n){const r=t.findPrevIntlWordBeforeOrAtOffset(e,n);for(let o=n;o>=0;o--){const a=e.charCodeAt(o),l=t.get(a);if(r&&o===r.index)return o;if(l===1||i===1&&l===2||i===2&&l===0)return o+1}return 0}static moveWordLeft(e,t,i,n,r){let o=i.lineNumber,a=i.column;a===1&&o>1&&(o=o-1,a=t.getLineMaxColumn(o));let l=nn._findPreviousWordOnLine(e,t,new ce(o,a));if(n===0)return new ce(o,l?l.start+1:1);if(n===1)return!r&&l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=nn._findPreviousWordOnLine(e,t,new ce(o,l.start+1))),new ce(o,l?l.start+1:1);if(n===3){for(;l&&l.wordType===2;)l=nn._findPreviousWordOnLine(e,t,new ce(o,l.start+1));return new ce(o,l?l.start+1:1)}return l&&a<=l.end+1&&(l=nn._findPreviousWordOnLine(e,t,new ce(o,l.start+1))),new ce(o,l?l.end+1:1)}static _moveWordPartLeft(e,t){const i=t.lineNumber,n=e.getLineMaxColumn(i);if(t.column===1)return i>1?new ce(i-1,e.getLineMaxColumn(i-1)):t;const r=e.getLineContent(i);for(let o=t.column-1;o>1;o--){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a===95&&l!==95)return new ce(i,o);if(a===45&&l!==45)return new ce(i,o);if((jg(a)||Mb(a))&&eh(l))return new ce(i,o);if(eh(a)&&eh(l)&&o+1<n){const c=r.charCodeAt(o);if(jg(c)||Mb(c))return new ce(i,o)}}return new ce(i,1)}static moveWordRight(e,t,i,n){let r=i.lineNumber,o=i.column,a=!1;o===t.getLineMaxColumn(r)&&r<t.getLineCount()&&(a=!0,r=r+1,o=1);let l=nn._findNextWordOnLine(e,t,new ce(r,o));if(n===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=nn._findNextWordOnLine(e,t,new ce(r,l.end+1))),l?o=l.end+1:o=t.getLineMaxColumn(r);else if(n===3){for(a&&(o=0);l&&(l.wordType===2||l.start+1<=o);)l=nn._findNextWordOnLine(e,t,new ce(r,l.end+1));l?o=l.start+1:o=t.getLineMaxColumn(r)}else l&&!a&&o>=l.start+1&&(l=nn._findNextWordOnLine(e,t,new ce(r,l.end+1))),l?o=l.start+1:o=t.getLineMaxColumn(r);return new ce(r,o)}static _moveWordPartRight(e,t){const i=t.lineNumber,n=e.getLineMaxColumn(i);if(t.column===n)return i<e.getLineCount()?new ce(i+1,1):t;const r=e.getLineContent(i);for(let o=t.column+1;o<n;o++){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a!==95&&l===95)return new ce(i,o);if(a!==45&&l===45)return new ce(i,o);if((jg(a)||Mb(a))&&eh(l))return new ce(i,o);if(eh(a)&&eh(l)&&o+1<n){const c=r.charCodeAt(o);if(jg(c)||Mb(c))return new ce(i,o)}}return new ce(i,n)}static _deleteWordLeftWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=t.column-2,r=Vf(i,n);return r+1<n?new Q(t.lineNumber,r+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const i=e.wordSeparators,n=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;if(Pf.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const d=e.selection.getPosition();return new Q(d.lineNumber,d.column-1,d.lineNumber,d.column+1)}const a=new ce(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(o){const d=this._deleteWordLeftWhitespace(n,a);if(d)return d}let u=nn._findPreviousWordOnLine(i,n,a);return t===0?u?c=u.start+1:c>1?c=1:(l--,c=n.getLineMaxColumn(l)):(u&&c<=u.end+1&&(u=nn._findPreviousWordOnLine(i,n,new ce(l,u.start+1))),u?c=u.end+1:c>1?c=1:(l--,c=n.getLineMaxColumn(l))),new Q(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,i){if(!i.isEmpty())return i;const n=new ce(i.positionLineNumber,i.positionColumn),r=this._deleteInsideWordWhitespace(t,n);return r||this._deleteInsideWordDetermineDeleteRange(e,t,n)}static _charAtIsWhitespace(e,t){const i=e.charCodeAt(t);return i===32||i===9}static _deleteInsideWordWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=i.length;if(n===0)return null;let r=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(i,r))return null;let o=Math.min(t.column-1,n-1);if(!this._charAtIsWhitespace(i,o))return null;for(;r>0&&this._charAtIsWhitespace(i,r-1);)r--;for(;o+1<n&&this._charAtIsWhitespace(i,o+1);)o++;return new Q(t.lineNumber,r+1,t.lineNumber,o+2)}static _deleteInsideWordDetermineDeleteRange(e,t,i){const n=t.getLineContent(i.lineNumber),r=n.length;if(r===0)return i.lineNumber>1?new Q(i.lineNumber-1,t.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1):i.lineNumber<t.getLineCount()?new Q(i.lineNumber,1,i.lineNumber+1,1):new Q(i.lineNumber,1,i.lineNumber,1);const o=d=>d.start+1<=i.column&&i.column<=d.end+1,a=(d,g)=>(d=Math.min(d,i.column),g=Math.max(g,i.column),new Q(i.lineNumber,d,i.lineNumber,g)),l=d=>{let g=d.start+1,m=d.end+1,_=!1;for(;m-1<r&&this._charAtIsWhitespace(n,m-1);)_=!0,m++;if(!_)for(;g>1&&this._charAtIsWhitespace(n,g-2);)g--;return a(g,m)},c=nn._findPreviousWordOnLine(e,t,i);if(c&&o(c))return l(c);const u=nn._findNextWordOnLine(e,t,i);return u&&o(u)?l(u):c&&u?a(c.end+1,u.start+1):c?a(c.start+1,c.end+1):u?a(u.start+1,u.end+1):a(1,r+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),n=nn._moveWordPartLeft(e,i);return new Q(i.lineNumber,i.column,n.lineNumber,n.column)}static _findFirstNonWhitespaceChar(e,t){const i=e.length;for(let n=t;n<i;n++){const r=e.charAt(n);if(r!==" "&&r!=="	")return n}return i}static _deleteWordRightWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=t.column-1,r=this._findFirstNonWhitespaceChar(i,n);return n+1<r?new Q(t.lineNumber,t.column,t.lineNumber,r+1):null}static deleteWordRight(e,t){const i=e.wordSeparators,n=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;const a=new ce(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,c=a.column;const u=n.getLineCount(),d=n.getLineMaxColumn(l);if(l===u&&c===d)return null;if(o){const m=this._deleteWordRightWhitespace(n,a);if(m)return m}let g=nn._findNextWordOnLine(i,n,a);return t===2?g?c=g.end+1:c<d||l===u?c=d:(l++,g=nn._findNextWordOnLine(i,n,new ce(l,1)),g?c=g.start+1:c=n.getLineMaxColumn(l)):(g&&c>=g.start+1&&(g=nn._findNextWordOnLine(i,n,new ce(l,g.end+1))),g?c=g.start+1:c<d||l===u?c=d:(l++,g=nn._findNextWordOnLine(i,n,new ce(l,1)),g?c=g.start+1:c=n.getLineMaxColumn(l))),new Q(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),n=nn._moveWordPartRight(e,i);return new Q(i.lineNumber,i.column,n.lineNumber,n.column)}static _createWordAtPosition(e,t,i){const n=new Q(t,i.start+1,t,i.end+1);return{word:e.getValueInRange(n),startColumn:n.startColumn,endColumn:n.endColumn}}static getWordAtPosition(e,t,i,n){const r=tp(t,i),o=nn._findPreviousWordOnLine(r,e,n);if(o&&o.wordType===1&&o.start<=n.column-1&&n.column-1<=o.end)return nn._createWordAtPosition(e,n.lineNumber,o);const a=nn._findNextWordOnLine(r,e,n);return a&&a.wordType===1&&a.start<=n.column-1&&n.column-1<=a.end?nn._createWordAtPosition(e,n.lineNumber,a):null}static word(e,t,i,n,r){const o=tp(e.wordSeparators,e.wordSegmenterLocales),a=nn._findPreviousWordOnLine(o,t,r),l=nn._findNextWordOnLine(o,t,r);if(!n){let m,_;return a&&a.wordType===1&&a.start<=r.column-1&&r.column-1<=a.end?(m=a.start+1,_=a.end+1):l&&l.wordType===1&&l.start<=r.column-1&&r.column-1<=l.end?(m=l.start+1,_=l.end+1):(a?m=a.end+1:m=1,l?_=l.start+1:_=t.getLineMaxColumn(r.lineNumber)),new Zn(new Q(r.lineNumber,m,r.lineNumber,_),1,0,new ce(r.lineNumber,_),0)}let c,u;a&&a.wordType===1&&a.start<r.column-1&&r.column-1<a.end?(c=a.start+1,u=a.end+1):l&&l.wordType===1&&l.start<r.column-1&&r.column-1<l.end?(c=l.start+1,u=l.end+1):(c=r.column,u=r.column);const d=r.lineNumber;let g;if(i.selectionStart.containsPosition(r))g=i.selectionStart.endColumn;else if(r.isBeforeOrEqual(i.selectionStart.getStartPosition())){g=c;const m=new ce(d,g);i.selectionStart.containsPosition(m)&&(g=i.selectionStart.endColumn)}else{g=u;const m=new ce(d,g);i.selectionStart.containsPosition(m)&&(g=i.selectionStart.startColumn)}return i.move(!0,d,g,0)}}class Os{static addCursorDown(e,t,i){const n=[];let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];n[r++]=new Bt(l.modelState,l.viewState),i?n[r++]=Bt.fromModelState(li.translateDown(e.cursorConfig,e.model,l.modelState)):n[r++]=Bt.fromViewState(li.translateDown(e.cursorConfig,e,l.viewState))}return n}static addCursorUp(e,t,i){const n=[];let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];n[r++]=new Bt(l.modelState,l.viewState),i?n[r++]=Bt.fromModelState(li.translateUp(e.cursorConfig,e.model,l.modelState)):n[r++]=Bt.fromViewState(li.translateUp(e.cursorConfig,e,l.viewState))}return n}static moveToBeginningOfLine(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];n[r]=this._moveToLineStart(e,a,i)}return n}static _moveToLineStart(e,t,i){const n=t.viewState.position.column,r=t.modelState.position.column,o=n===r,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!o&&!(n===l)?this._moveToLineStartByView(e,t,i):this._moveToLineStartByModel(e,t,i)}static _moveToLineStartByView(e,t,i){return Bt.fromViewState(li.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,i))}static _moveToLineStartByModel(e,t,i){return Bt.fromModelState(li.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,i))}static moveToEndOfLine(e,t,i,n){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=this._moveToLineEnd(e,l,i,n)}return r}static _moveToLineEnd(e,t,i,n){const r=t.viewState.position,o=e.getLineMaxColumn(r.lineNumber),a=r.column===o,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),u=o-r.column===c-l.column;return a||u?this._moveToLineEndByModel(e,t,i,n):this._moveToLineEndByView(e,t,i,n)}static _moveToLineEndByView(e,t,i,n){return Bt.fromViewState(li.moveToEndOfLine(e.cursorConfig,e,t.viewState,i,n))}static _moveToLineEndByModel(e,t,i,n){return Bt.fromModelState(li.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,i,n))}static expandLineSelection(e,t){const i=[];for(let n=0,r=t.length;n<r;n++){const o=t[n],a=o.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=o.modelState.selection.endLineNumber,u;c===l?u=e.model.getLineMaxColumn(l):(c++,u=1),i[n]=Bt.fromModelState(new Zn(new Q(a,1,a,1),0,0,new ce(c,u),0))}return i}static moveToBeginningOfBuffer(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];n[r]=Bt.fromModelState(li.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return n}static moveToEndOfBuffer(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];n[r]=Bt.fromModelState(li.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return n}static selectAll(e,t){const i=e.model.getLineCount(),n=e.model.getLineMaxColumn(i);return Bt.fromModelState(new Zn(new Q(1,1,1,1),0,0,new ce(i,n),0))}static line(e,t,i,n,r){const o=e.model.validatePosition(n),a=r?e.coordinatesConverter.validateViewPosition(new ce(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);if(!i){const c=e.model.getLineCount();let u=o.lineNumber+1,d=1;return u>c&&(u=c,d=e.model.getLineMaxColumn(u)),Bt.fromModelState(new Zn(new Q(o.lineNumber,1,u,d),2,0,new ce(u,d),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<l)return Bt.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(o.lineNumber>l){const c=e.getLineCount();let u=a.lineNumber+1,d=1;return u>c&&(u=c,d=e.getLineMaxColumn(u)),Bt.fromViewState(t.viewState.move(!0,u,d,0))}else{const c=t.modelState.selectionStart.getEndPosition();return Bt.fromModelState(t.modelState.move(!0,c.lineNumber,c.column,0))}}static word(e,t,i,n){const r=e.model.validatePosition(n);return Bt.fromModelState(nn.word(e.cursorConfig,e.model,t.modelState,i,r))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Bt(t.modelState,t.viewState);const i=t.viewState.position.lineNumber,n=t.viewState.position.column;return Bt.fromViewState(new Zn(new Q(i,n,i,n),0,0,new ce(i,n),0))}static moveTo(e,t,i,n,r){if(i){if(t.modelState.selectionStartKind===1)return this.word(e,t,i,n);if(t.modelState.selectionStartKind===2)return this.line(e,t,i,n,r)}const o=e.model.validatePosition(n),a=r?e.coordinatesConverter.validateViewPosition(new ce(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);return Bt.fromViewState(t.viewState.move(i,a.lineNumber,a.column,0))}static simpleMove(e,t,i,n,r,o){switch(i){case 0:return o===4?this._moveHalfLineLeft(e,t,n):this._moveLeft(e,t,n,r);case 1:return o===4?this._moveHalfLineRight(e,t,n):this._moveRight(e,t,n,r);case 2:return o===2?this._moveUpByViewLines(e,t,n,r):this._moveUpByModelLines(e,t,n,r);case 3:return o===2?this._moveDownByViewLines(e,t,n,r):this._moveDownByModelLines(e,t,n,r);case 4:return o===2?t.map(a=>Bt.fromViewState(li.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,n))):t.map(a=>Bt.fromModelState(li.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,n)));case 5:return o===2?t.map(a=>Bt.fromViewState(li.moveToNextBlankLine(e.cursorConfig,e,a.viewState,n))):t.map(a=>Bt.fromModelState(li.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,n)));case 6:return this._moveToViewMinColumn(e,t,n);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,n);case 8:return this._moveToViewCenterColumn(e,t,n);case 9:return this._moveToViewMaxColumn(e,t,n);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,n);default:return null}}static viewportMove(e,t,i,n,r){const o=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(o);switch(i){case 11:{const l=this._firstLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],n,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],n,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],n,l,c)]}case 14:{const l=[];for(let c=0,u=t.length;c<u;c++){const d=t[c];l[c]=this.findPositionInViewportIfOutside(e,d,o,n)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,i,n){const r=t.viewState.position.lineNumber;if(i.startLineNumber<=r&&r<=i.endLineNumber-1)return new Bt(t.modelState,t.viewState);{let o;r>i.endLineNumber-1?o=i.endLineNumber-1:r<i.startLineNumber?o=i.startLineNumber:o=r;const a=li.vertical(e.cursorConfig,e,r,t.viewState.position.column,t.viewState.leftoverVisibleColumns,o,!1);return Bt.fromViewState(t.viewState.move(n,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.min(t.endLineNumber,n+i-1)}static _lastLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.max(n,t.endLineNumber-i+1)}static _moveLeft(e,t,i,n){return t.map(r=>Bt.fromViewState(li.moveLeft(e.cursorConfig,e,r.viewState,i,n)))}static _moveHalfLineLeft(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);n[r]=Bt.fromViewState(li.moveLeft(e.cursorConfig,e,a.viewState,i,c))}return n}static _moveRight(e,t,i,n){return t.map(r=>Bt.fromViewState(li.moveRight(e.cursorConfig,e,r.viewState,i,n)))}static _moveHalfLineRight(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);n[r]=Bt.fromViewState(li.moveRight(e.cursorConfig,e,a.viewState,i,c))}return n}static _moveDownByViewLines(e,t,i,n){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Bt.fromViewState(li.moveDown(e.cursorConfig,e,l.viewState,i,n))}return r}static _moveDownByModelLines(e,t,i,n){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Bt.fromModelState(li.moveDown(e.cursorConfig,e.model,l.modelState,i,n))}return r}static _moveUpByViewLines(e,t,i,n){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Bt.fromViewState(li.moveUp(e.cursorConfig,e,l.viewState,i,n))}return r}static _moveUpByModelLines(e,t,i,n){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Bt.fromModelState(li.moveUp(e.cursorConfig,e.model,l.modelState,i,n))}return r}static _moveToViewPosition(e,t,i,n,r){return Bt.fromViewState(t.viewState.move(i,n,r,0))}static _moveToModelPosition(e,t,i,n,r){return Bt.fromModelState(t.modelState.move(i,n,r,0))}static _moveToViewMinColumn(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);n[r]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewFirstNonWhitespaceColumn(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);n[r]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewCenterColumn(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);n[r]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewMaxColumn(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);n[r]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewLastNonWhitespaceColumn(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);n[r]=this._moveToViewPosition(e,a,i,l,c)}return n}}var Py;(function(s){const e=function(i){if(!Cr(i))return!1;const n=i;return!(!bo(n.to)||!Uo(n.select)&&!UB(n.select)||!Uo(n.by)&&!bo(n.by)||!Uo(n.value)&&!vp(n.value))};s.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},s.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},s.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(i){if(!i.to)return null;let n;switch(i.to){case s.RawDirection.Left:n=0;break;case s.RawDirection.Right:n=1;break;case s.RawDirection.Up:n=2;break;case s.RawDirection.Down:n=3;break;case s.RawDirection.PrevBlankLine:n=4;break;case s.RawDirection.NextBlankLine:n=5;break;case s.RawDirection.WrappedLineStart:n=6;break;case s.RawDirection.WrappedLineFirstNonWhitespaceCharacter:n=7;break;case s.RawDirection.WrappedLineColumnCenter:n=8;break;case s.RawDirection.WrappedLineEnd:n=9;break;case s.RawDirection.WrappedLineLastNonWhitespaceCharacter:n=10;break;case s.RawDirection.ViewPortTop:n=11;break;case s.RawDirection.ViewPortBottom:n=13;break;case s.RawDirection.ViewPortCenter:n=12;break;case s.RawDirection.ViewPortIfOutside:n=14;break;default:return null}let r=0;switch(i.by){case s.RawUnit.Line:r=1;break;case s.RawUnit.WrappedLine:r=2;break;case s.RawUnit.Character:r=3;break;case s.RawUnit.HalfLine:r=4;break}return{direction:n,unit:r,select:!!i.select,value:i.value||1}}s.parse=t})(Py||(Py={}));class Wge{constructor(e,t,i){this._indentRulesSupport=t,this._indentationLineProcessor=new kj(e,i)}shouldIncrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIncrease(i)}shouldDecrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldDecrease(i)}shouldIgnore(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIgnore(i)}shouldIndentNextLine(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIndentNextLine(i)}}class r9{constructor(e,t){this.model=e,this.indentationLineProcessor=new kj(e,t)}getProcessedTokenContextAroundRange(e){const t=this._getProcessedTokensBeforeRange(e),i=this._getProcessedTokensAfterRange(e),n=this._getProcessedPreviousLineTokens(e);return{beforeRangeProcessedTokens:t,afterRangeProcessedTokens:i,previousLineProcessedTokens:n}}_getProcessedTokensBeforeRange(e){this.model.tokenization.forceTokenization(e.startLineNumber);const t=this.model.tokenization.getLineTokens(e.startLineNumber),i=Qd(t,e.startColumn-1);let n;if(o9(this.model,e.getStartPosition())){const o=e.startColumn-1-i.firstCharOffset,a=i.firstCharOffset,l=a+o;n=t.sliceAndInflate(a,l,0)}else{const o=e.startColumn-1;n=t.sliceAndInflate(0,o,0)}return this.indentationLineProcessor.getProcessedTokens(n)}_getProcessedTokensAfterRange(e){const t=e.isEmpty()?e.getStartPosition():e.getEndPosition();this.model.tokenization.forceTokenization(t.lineNumber);const i=this.model.tokenization.getLineTokens(t.lineNumber),n=Qd(i,t.column-1),r=t.column-1-n.firstCharOffset,o=n.firstCharOffset+r,a=n.firstCharOffset+n.getLineLength(),l=i.sliceAndInflate(o,a,0);return this.indentationLineProcessor.getProcessedTokens(l)}_getProcessedPreviousLineTokens(e){const t=m=>{this.model.tokenization.forceTokenization(m);const _=this.model.tokenization.getLineTokens(m),v=this.model.getLineMaxColumn(m)-1;return Qd(_,v)};this.model.tokenization.forceTokenization(e.startLineNumber);const i=this.model.tokenization.getLineTokens(e.startLineNumber),n=Qd(i,e.startColumn-1),r=es.createEmpty("",n.languageIdCodec),o=e.startLineNumber-1;if(o===0||!(n.firstCharOffset===0))return r;const c=t(o);if(!(n.languageId===c.languageId))return r;const d=c.toIViewLineTokens();return this.indentationLineProcessor.getProcessedTokens(d)}}class kj{constructor(e,t){this.model=e,this.languageConfigurationService=t}getProcessedLine(e,t){const i=(o,a)=>{const l=Js(o);return a+o.substring(l.length)};this.model.tokenization.forceTokenization?.(e);const n=this.model.tokenization.getLineTokens(e);let r=this.getProcessedTokens(n).getLineContent();return t!==void 0&&(r=i(r,t)),r}getProcessedTokens(e){const t=l=>l===2||l===3||l===1,i=e.getLanguageId(0),r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew.getBracketRegExp({global:!0}),o=[];return e.forEach(l=>{const c=e.getStandardTokenType(l);let u=e.getTokenText(l);t(c)&&(u=u.replace(r,""));const d=e.getMetadata(l);o.push({text:u,metadata:d})}),es.createFromTextAndMetadata(o,e.languageIdCodec)}}function o9(s,e){s.tokenization.forceTokenization(e.lineNumber);const t=s.tokenization.getLineTokens(e.lineNumber),i=Qd(t,e.column-1),n=i.firstCharOffset===0,r=t.getLanguageId(0)===i.languageId;return!n&&!r}function a9(s,e,t,i){e.tokenization.forceTokenization(t.startLineNumber);const n=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),r=i.getLanguageConfiguration(n);if(!r)return null;const a=new r9(e,i).getProcessedTokenContextAroundRange(t),l=a.previousLineProcessedTokens.getLineContent(),c=a.beforeRangeProcessedTokens.getLineContent(),u=a.afterRangeProcessedTokens.getLineContent(),d=r.onEnter(s,l,c,u);if(!d)return null;const g=d.indentAction;let m=d.appendText;const _=d.removeText||0;m?g===tr.Indent&&(m="	"+m):g===tr.Indent||g===tr.IndentOutdent?m="	":m="";let v=bV(e,t.startLineNumber,t.startColumn);return _&&(v=v.substring(0,v.length-_)),{indentAction:g,appendText:m,removeText:_,indentation:v}}var Vge=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},zge=function(s,e){return function(t,i){e(t,i,s)}},nC;const pL=Object.create(null);function md(s,e){if(e<=0)return"";pL[s]||(pL[s]=["",s]);const t=pL[s];for(let i=t.length;i<=e;i++)t[i]=t[i-1]+s;return t[e]}let Of=nC=class{static unshiftIndent(e,t,i,n,r){const o=Tn.visibleColumnFromColumn(e,t,i);if(r){const a=md(" ",n),c=Tn.prevIndentTabStop(o,n)/n;return md(a,c)}else{const a="	",c=Tn.prevRenderTabStop(o,i)/i;return md(a,c)}}static shiftIndent(e,t,i,n,r){const o=Tn.visibleColumnFromColumn(e,t,i);if(r){const a=md(" ",n),c=Tn.nextIndentTabStop(o,n)/n;return md(a,c)}else{const a="	",c=Tn.nextRenderTabStop(o,i)/i;return md(a,c)}}constructor(e,t,i){this._languageConfigurationService=i,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,i){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,i):e.addEditOperation(t,i)}getEditOperations(e,t){const i=this._selection.startLineNumber;let n=this._selection.endLineNumber;this._selection.endColumn===1&&i!==n&&(n=n-1);const{tabSize:r,indentSize:o,insertSpaces:a}=this._opts,l=i===n;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(i))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,u=0;for(let d=i;d<=n;d++,c=u){u=0;const g=e.getLineContent(d);let m=Ur(g);if(this._opts.isUnshift&&(g.length===0||m===0)||!l&&!this._opts.isUnshift&&g.length===0)continue;if(m===-1&&(m=g.length),d>1&&Tn.visibleColumnFromColumn(g,m+1,r)%o!==0&&e.tokenization.isCheapToTokenize(d-1)){const w=a9(this._opts.autoIndent,e,new Q(d-1,e.getLineMaxColumn(d-1),d-1,e.getLineMaxColumn(d-1)),this._languageConfigurationService);if(w){if(u=c,w.appendText)for(let y=0,S=w.appendText.length;y<S&&u<o&&w.appendText.charCodeAt(y)===32;y++)u++;w.removeText&&(u=Math.max(0,u-w.removeText));for(let y=0;y<u&&!(m===0||g.charCodeAt(m-1)!==32);y++)m--}}if(this._opts.isUnshift&&m===0)continue;let _;this._opts.isUnshift?_=nC.unshiftIndent(g,m+1,r,o,a):_=nC.shiftIndent(g,m+1,r,o,a),this._addEditOperation(t,new Q(d,1,d,m+1),_),d===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=m+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(i)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?md(" ",o):"	";for(let u=i;u<=n;u++){const d=e.getLineContent(u);let g=Ur(d);if(!(this._opts.isUnshift&&(d.length===0||g===0))&&!(!l&&!this._opts.isUnshift&&d.length===0)&&(g===-1&&(g=d.length),!(this._opts.isUnshift&&g===0)))if(this._opts.isUnshift){g=Math.min(g,o);for(let m=0;m<g;m++)if(d.charCodeAt(m)===9){g=m+1;break}this._addEditOperation(t,new Q(u,1,u,g+1),"")}else this._addEditOperation(t,new Q(u,1,u,1),c),u===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const n=t.getInverseEditOperations()[0];return new wi(n.range.endLineNumber,n.range.endColumn,n.range.endLineNumber,n.range.endColumn)}const i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const n=this._selection.startColumn;return i.startColumn<=n?i:i.getDirection()===0?new wi(i.startLineNumber,n,i.endLineNumber,i.endColumn):new wi(i.endLineNumber,i.endColumn,i.startLineNumber,n)}return i}};Of=nC=Vge([zge(2,Yl)],Of);class Hge{constructor(e,t,i){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=i}getEditOperations(e,t){t.addTrackedEditOperation(new Q(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new Q(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const i=t.getInverseEditOperations(),n=i[0].range,r=i[1].range;return new wi(n.endLineNumber,n.endColumn,r.endLineNumber,r.endColumn-this._charAfterSelection.length)}}class jge{constructor(e,t,i){this._position=e,this._text=t,this._charAfter=i}getEditOperations(e,t){t.addTrackedEditOperation(new Q(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return new wi(n.endLineNumber,n.startColumn,n.endLineNumber,n.endColumn-this._charAfter.length)}}function Uge(s,e,t){const i=s.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let n,r=-1;for(n=e-1;n>=1;n--){if(s.tokenization.getLanguageIdAtPosition(n,0)!==i)return r;const o=s.getLineContent(n);if(t.shouldIgnore(n)||/^\s+$/.test(o)||o===""){r=n;continue}return n}}return-1}function Oy(s,e,t,i=!0,n){if(s<4)return null;const r=n.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!r)return null;const o=new Wge(e,r,n);if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};const a=Uge(e,t,o);if(a<0)return null;if(a<1)return{indentation:"",action:null};if(o.shouldIncrease(a)||o.shouldIndentNextLine(a)){const l=e.getLineContent(a);return{indentation:Js(l),action:tr.Indent,line:a}}else if(o.shouldDecrease(a)){const l=e.getLineContent(a);return{indentation:Js(l),action:null,line:a}}else{if(a===1)return{indentation:Js(e.getLineContent(a)),action:null,line:a};const l=a-1,c=r.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let u=0;for(let d=l-1;d>0;d--)if(!o.shouldIndentNextLine(d)){u=d;break}return{indentation:Js(e.getLineContent(u+1)),action:null,line:u+1}}if(i)return{indentation:Js(e.getLineContent(a)),action:null,line:a};for(let u=a;u>0;u--){if(o.shouldIncrease(u))return{indentation:Js(e.getLineContent(u)),action:tr.Indent,line:u};if(o.shouldIndentNextLine(u)){let d=0;for(let g=u-1;g>0;g--)if(!o.shouldIndentNextLine(u)){d=g;break}return{indentation:Js(e.getLineContent(d+1)),action:null,line:d+1}}else if(o.shouldDecrease(u))return{indentation:Js(e.getLineContent(u)),action:null,line:u}}return{indentation:Js(e.getLineContent(1)),action:null,line:1}}}function $ge(s,e,t,i,n){if(s<4)return null;const r=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),o=n.getLanguageConfiguration(r).indentRulesSupport;if(!o)return null;e.tokenization.forceTokenization(t.startLineNumber);const l=new r9(e,n).getProcessedTokenContextAroundRange(t),c=l.afterRangeProcessedTokens,u=l.beforeRangeProcessedTokens,d=Js(u.getLineContent()),g=Kge(e,t.startLineNumber,u),m=o9(e,t.getStartPosition()),_=e.getLineContent(t.startLineNumber),v=Js(_),w=Oy(s,g,t.startLineNumber+1,void 0,n);if(!w){const S=m?v:d;return{beforeEnter:S,afterEnter:S}}let y=m?v:w.indentation;return w.action===tr.Indent&&(y=i.shiftIndent(y)),o.shouldDecrease(c.getLineContent())&&(y=i.unshiftIndent(y)),{beforeEnter:m?v:d,afterEnter:y}}function qge(s,e,t,i,n,r){const o=s.autoIndent;if(o<4||o9(e,t.getStartPosition()))return null;const l=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),c=r.getLanguageConfiguration(l).indentRulesSupport;if(!c)return null;const d=new r9(e,r).getProcessedTokenContextAroundRange(t),g=d.beforeRangeProcessedTokens.getLineContent(),m=d.afterRangeProcessedTokens.getLineContent(),_=g+m,v=g+i+m;if(!c.shouldDecrease(_)&&c.shouldDecrease(v)){const y=Oy(o,e,t.startLineNumber,!1,r);if(!y)return null;let S=y.indentation;return y.action!==tr.Indent&&(S=n.unshiftIndent(S)),S}const w=t.startLineNumber-1;if(w>0){const y=e.getLineContent(w);if(c.shouldIndentNextLine(y)&&c.shouldIncrease(v)){const k=Oy(o,e,t.startLineNumber,!1,r)?.indentation;if(k!==void 0){const L=e.getLineContent(t.startLineNumber),T=Js(L),I=n.shiftIndent(k)===T,O=/^\s*$/.test(_),F=s.autoClosingPairs.autoClosingPairsOpenByEnd.get(i),Y=F&&F.length>0&&O;if(I&&Y)return k}}}return null}function Kge(s,e,t){return{tokenization:{getLineTokens:n=>n===e?t:s.tokenization.getLineTokens(n),getLanguageId:()=>s.getLanguageId(),getLanguageIdAtPosition:(n,r)=>s.getLanguageIdAtPosition(n,r)},getLineContent:n=>n===e?t.getLineContent():s.getLineContent(n)}}class Gge{static getEdits(e,t,i,n,r){if(!r&&this._isAutoIndentType(e,t,i)){const o=[];for(const l of i){const c=this._findActualIndentationForSelection(e,t,l,n);if(c===null)return;o.push({selection:l,indentation:c})}const a=$6.getAutoClosingPairClose(e,t,i,n,!1);return this._getIndentationAndAutoClosingPairEdits(e,t,o,n,a)}}static _isAutoIndentType(e,t,i){if(e.autoIndent<4)return!1;for(let n=0,r=i.length;n<r;n++)if(!t.tokenization.isCheapToTokenize(i[n].getEndPosition().lineNumber))return!1;return!0}static _findActualIndentationForSelection(e,t,i,n){const r=qge(e,t,i,n,{shiftIndent:a=>u9(e,a),unshiftIndent:a=>Fy(e,a)},e.languageConfigurationService);if(r===null)return null;const o=bV(t,i.startLineNumber,i.startColumn);return r===e.normalizeIndentation(o)?null:r}static _getIndentationAndAutoClosingPairEdits(e,t,i,n,r){const o=i.map(({selection:l,indentation:c})=>{if(r!==null){const u=this._getEditFromIndentationAndSelection(e,t,c,l,n,!1);return new rme(u,l,n,r)}else{const u=this._getEditFromIndentationAndSelection(e,t,c,l,n,!0);return kd(u.range,u.text,!1)}}),a={shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1};return new Lr(4,o,a)}static _getEditFromIndentationAndSelection(e,t,i,n,r,o=!0){const a=n.startLineNumber,l=t.getLineFirstNonWhitespaceColumn(a);let c=e.normalizeIndentation(i);if(l!==0){const d=t.getLineContent(a);c+=d.substring(l-1,n.startColumn-1)}return c+=o?r:"",{range:new Q(a,1,n.endLineNumber,n.endColumn),text:c}}}class Zge{static getEdits(e,t,i,n,r,o){if(Dj(t,i,n,r,o))return this._runAutoClosingOvertype(e,n,o)}static _runAutoClosingOvertype(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const l=t[r].getPosition(),c=new Q(l.lineNumber,l.column,l.lineNumber,l.column+1);n[r]=new Vr(c,i)}return new Lr(4,n,{shouldPushStackElementBefore:i4(e,4),shouldPushStackElementAfter:!1})}}class Yge{static getEdits(e,t,i,n,r){if(Dj(e,t,i,n,r)){const o=i.map(a=>new Vr(new Q(a.positionLineNumber,a.positionColumn,a.positionLineNumber,a.positionColumn+1),"",!1));return new Lr(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}}class $6{static getEdits(e,t,i,n,r,o){if(!o){const a=this.getAutoClosingPairClose(e,t,i,n,r);if(a!==null)return this._runAutoClosingOpenCharType(i,n,r,a)}}static _runAutoClosingOpenCharType(e,t,i,n){const r=[];for(let o=0,a=e.length;o<a;o++){const l=e[o];r[o]=new sme(l,t,!i,n)}return new Lr(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static getAutoClosingPairClose(e,t,i,n,r){for(const _ of i)if(!_.isEmpty())return null;const o=i.map(_=>{const v=_.getPosition();return r?{lineNumber:v.lineNumber,beforeColumn:v.column-n.length,afterColumn:v.column}:{lineNumber:v.lineNumber,beforeColumn:v.column,afterColumn:v.column}}),a=this._findAutoClosingPairOpen(e,t,o.map(_=>new ce(_.lineNumber,_.beforeColumn)),n);if(!a)return null;let l,c;if(Wh(n)?(l=e.autoClosingQuotes,c=e.shouldAutoCloseBefore.quote):(e.blockCommentStartToken?a.open.includes(e.blockCommentStartToken):!1)?(l=e.autoClosingComments,c=e.shouldAutoCloseBefore.comment):(l=e.autoClosingBrackets,c=e.shouldAutoCloseBefore.bracket),l==="never")return null;const d=this._findContainedAutoClosingPair(e,a),g=d?d.close:"";let m=!0;for(const _ of o){const{lineNumber:v,beforeColumn:w,afterColumn:y}=_,S=t.getLineContent(v),k=S.substring(0,w-1),L=S.substring(y-1);if(L.startsWith(g)||(m=!1),L.length>0){const O=L.charAt(0);if(!this._isBeforeClosingBrace(e,L)&&!c(O))return null}if(a.open.length===1&&(n==="'"||n==='"')&&l!=="always"){const O=tp(e.wordSeparators,[]);if(k.length>0){const F=k.charCodeAt(k.length-1);if(O.get(F)===0)return null}}if(!t.tokenization.isCheapToTokenize(v))return null;t.tokenization.forceTokenization(v);const T=t.tokenization.getLineTokens(v),A=Qd(T,w-1);if(!a.shouldAutoClose(A,w-A.firstCharOffset))return null;const I=a.findNeutralCharacter();if(I){const O=t.tokenization.getTokenTypeIfInsertingCharacter(v,w,I);if(!a.isOK(O))return null}}return m?a.close.substring(0,a.close.length-g.length):a.close}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const i=t.close.charAt(t.close.length-1),n=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(i)||[];let r=null;for(const o of n)o.open!==t.open&&t.open.includes(o.open)&&t.close.endsWith(o.close)&&(!r||o.open.length>r.open.length)&&(r=o);return r}static _findAutoClosingPairOpen(e,t,i,n){const r=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(n);if(!r)return null;let o=null;for(const a of r)if(o===null||a.open.length>o.open.length){let l=!0;for(const c of i)if(t.getValueInRange(new Q(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+n!==a.open){l=!1;break}l&&(o=a)}return o}static _isBeforeClosingBrace(e,t){const i=t.charAt(0),n=e.autoClosingPairs.autoClosingPairsOpenByStart.get(i)||[],r=e.autoClosingPairs.autoClosingPairsCloseByStart.get(i)||[],o=n.some(l=>t.startsWith(l.open)),a=r.some(l=>t.startsWith(l.close));return!o&&a}}class Xge{static getEdits(e,t,i,n,r){if(!r&&this._isSurroundSelectionType(e,t,i,n))return this._runSurroundSelectionType(e,i,n)}static _runSurroundSelectionType(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=e.surroundingPairs[i];n[r]=new Hge(a,i,l)}return new Lr(0,n,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isSurroundSelectionType(e,t,i,n){if(!Ej(e,n)||!e.surroundingPairs.hasOwnProperty(n))return!1;const r=Wh(n);for(const o of i){if(o.isEmpty())return!1;let a=!0;for(let l=o.startLineNumber;l<=o.endLineNumber;l++){const c=t.getLineContent(l),u=l===o.startLineNumber?o.startColumn-1:0,d=l===o.endLineNumber?o.endColumn-1:c.length,g=c.substring(u,d);if(/[^ \t]/.test(g)){a=!1;break}}if(a)return!1;if(r&&o.startLineNumber===o.endLineNumber&&o.startColumn+1===o.endColumn){const l=t.getValueInRange(o);if(Wh(l))return!1}}return!0}}class Qge{static getEdits(e,t,i,n,r,o){if(!o&&this._isTypeInterceptorElectricChar(t,i,n)){const a=this._typeInterceptorElectricChar(e,t,i,n[0],r);if(a)return a}}static _isTypeInterceptorElectricChar(e,t,i){return!!(i.length===1&&t.tokenization.isCheapToTokenize(i[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,i,n,r){if(!t.electricChars.hasOwnProperty(r)||!n.isEmpty())return null;const o=n.getPosition();i.tokenization.forceTokenization(o.lineNumber);const a=i.tokenization.getLineTokens(o.lineNumber);let l;try{l=t.onElectricCharacter(r,a,o.column)}catch(c){return _i(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+r).lastIndexOf(l.matchOpenBracket)+1,u=i.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:o.lineNumber,column:c},500);if(u){if(u.startLineNumber===o.lineNumber)return null;const d=i.getLineContent(u.startLineNumber),g=Js(d),m=t.normalizeIndentation(g),_=i.getLineContent(o.lineNumber),v=i.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,w=_.substring(v-1,o.column-1),y=m+w+r,S=new Q(o.lineNumber,1,o.lineNumber,o.column),k=new Vr(S,y);return new Lr(c9(y,e),[k],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}}class Jge{static getEdits(e,t,i){const n=[];for(let o=0,a=t.length;o<a;o++)n[o]=new Vr(t[o],i);const r=c9(i,e);return new Lr(r,n,{shouldPushStackElementBefore:i4(e,r),shouldPushStackElementAfter:!1})}}class Lj{static getEdits(e,t,i,n,r){if(!r&&n===`
`){const o=[];for(let a=0,l=i.length;a<l;a++)o[a]=this._enter(e,t,!1,i[a]);return new Lr(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}static _enter(e,t,i,n){if(e.autoIndent===0)return kd(n,`
`,i);if(!t.tokenization.isCheapToTokenize(n.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(n.startLineNumber),c=Js(l).substring(0,n.startColumn-1);return kd(n,`
`+e.normalizeIndentation(c),i)}const r=a9(e.autoIndent,t,n,e.languageConfigurationService);if(r){if(r.indentAction===tr.None)return kd(n,`
`+e.normalizeIndentation(r.indentation+r.appendText),i);if(r.indentAction===tr.Indent)return kd(n,`
`+e.normalizeIndentation(r.indentation+r.appendText),i);if(r.indentAction===tr.IndentOutdent){const l=e.normalizeIndentation(r.indentation),c=e.normalizeIndentation(r.indentation+r.appendText),u=`
`+c+`
`+l;return i?new iC(n,u,!0):new Ay(n,u,-1,c.length-l.length,!0)}else if(r.indentAction===tr.Outdent){const l=Fy(e,r.indentation);return kd(n,`
`+e.normalizeIndentation(l+r.appendText),i)}}const o=t.getLineContent(n.startLineNumber),a=Js(o).substring(0,n.startColumn-1);if(e.autoIndent>=4){const l=$ge(e.autoIndent,t,n,{unshiftIndent:c=>Fy(e,c),shiftIndent:c=>u9(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,n.getEndPosition());const u=n.endColumn,d=t.getLineContent(n.endLineNumber),g=Ur(d);if(g>=0?n=n.setEndPosition(n.endLineNumber,Math.max(n.endColumn,g+1)):n=n.setEndPosition(n.endLineNumber,t.getLineMaxColumn(n.endLineNumber)),i)return new iC(n,`
`+e.normalizeIndentation(l.afterEnter),!0);{let m=0;return u<=g+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),m=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new Ay(n,`
`+e.normalizeIndentation(l.afterEnter),0,m,!0)}}}return kd(n,`
`+e.normalizeIndentation(a),i)}static lineInsertBefore(e,t,i){if(t===null||i===null)return[];const n=[];for(let r=0,o=i.length;r<o;r++){let a=i[r].positionLineNumber;if(a===1)n[r]=new iC(new Q(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);n[r]=this._enter(e,t,!1,new Q(a,l,a,l))}}return n}static lineInsertAfter(e,t,i){if(t===null||i===null)return[];const n=[];for(let r=0,o=i.length;r<o;r++){const a=i[r].positionLineNumber,l=t.getLineMaxColumn(a);n[r]=this._enter(e,t,!1,new Q(a,l,a,l))}return n}static lineBreakInsert(e,t,i){const n=[];for(let r=0,o=i.length;r<o;r++)n[r]=this._enter(e,t,!0,i[r]);return n}}class eme{static getEdits(e,t,i,n,r,o){const a=this._distributePasteToCursors(e,i,n,r,o);return a?(i=i.sort(Q.compareRangesUsingStarts),this._distributedPaste(e,t,i,a)):this._simplePaste(e,t,i,n,r)}static _distributePasteToCursors(e,t,i,n,r){if(n||t.length===1)return null;if(r&&r.length===t.length)return r;if(e.multiCursorPaste==="spread"){i.charCodeAt(i.length-1)===10&&(i=i.substring(0,i.length-1)),i.charCodeAt(i.length-1)===13&&(i=i.substring(0,i.length-1));const o=yp(i);if(o.length===t.length)return o}return null}static _distributedPaste(e,t,i,n){const r=[];for(let o=0,a=i.length;o<a;o++)r[o]=new Vr(i[o],n[o]);return new Lr(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,i,n,r){const o=[];for(let a=0,l=i.length;a<l;a++){const c=i[a],u=c.getPosition();if(r&&!c.isEmpty()&&(r=!1),r&&n.indexOf(`
`)!==n.length-1&&(r=!1),r){const d=new Q(u.lineNumber,1,u.lineNumber,1);o[a]=new Bge(d,n,c,!0)}else o[a]=new Vr(c,n)}return new Lr(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class tme{static getEdits(e,t,i,n,r,o,a,l){const c=n.map(u=>this._compositionType(i,u,r,o,a,l));return new Lr(4,c,{shouldPushStackElementBefore:i4(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,i,n,r,o){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-n),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+r),u=new Q(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(u)===i&&o===0?null:new Ay(u,i,0,o)}}class ime{static getEdits(e,t,i){const n=[];for(let o=0,a=t.length;o<a;o++)n[o]=new Vr(t[o],i);const r=c9(i,e);return new Lr(r,n,{shouldPushStackElementBefore:i4(e,r),shouldPushStackElementAfter:!1})}}class nme{static getCommands(e,t,i){const n=[];for(let r=0,o=i.length;r<o;r++){const a=i[r];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const u=e.normalizeIndentation(c);if(!l.startsWith(u)){n[r]=new Vr(new Q(a.startLineNumber,1,a.startLineNumber,l.length+1),u,!0);continue}}n[r]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){n[r]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}n[r]=new Of(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return n}static _goodIndentForLine(e,t,i){let n=null,r="";const o=Oy(e.autoIndent,t,i,!1,e.languageConfigurationService);if(o)n=o.action,r=o.indentation;else if(i>1){let a;for(a=i-1;a>=1;a--){const u=t.getLineContent(a);if(Vf(u)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=a9(e.autoIndent,t,new Q(a,l,a,l),e.languageConfigurationService);c&&(r=c.indentation+c.appendText)}return n&&(n===tr.Indent&&(r=u9(e,r)),n===tr.Outdent&&(r=Fy(e,r)),r=e.normalizeIndentation(r)),r||null}static _replaceJumpToNextIndent(e,t,i,n){let r="";const o=i.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,o),l=e.indentSize,c=l-a%l;for(let u=0;u<c;u++)r+=" "}else r="	";return new Vr(i,r,n)}}class l9 extends Ay{constructor(e,t,i,n,r,o){super(e,t,i,n),this._openCharacter=r,this._closeCharacter=o,this.closeCharacterRange=null,this.enclosingRange=null}_computeCursorStateWithRange(e,t,i){return this.closeCharacterRange=new Q(t.startLineNumber,t.endColumn-this._closeCharacter.length,t.endLineNumber,t.endColumn),this.enclosingRange=new Q(t.startLineNumber,t.endColumn-this._openCharacter.length-this._closeCharacter.length,t.endLineNumber,t.endColumn),super.computeCursorState(e,i)}}class sme extends l9{constructor(e,t,i,n){const r=(i?t:"")+n,o=0,a=-n.length;super(e,r,o,a,t,n)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(e,n,t)}}class rme extends l9{constructor(e,t,i,n){const r=i+n,o=0,a=i.length;super(t,r,o,a,i,n),this._autoIndentationEdit=e,this._autoClosingEdit={range:t,text:r}}getEditOperations(e,t){t.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),t.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(i.length!==2)throw new Error("There should be two inverse edit operations!");const n=i[0].range,r=i[1].range,o=n.plusRange(r);return this._computeCursorStateWithRange(e,o,t)}}function c9(s,e){return s===" "?e===5||e===6?6:5:4}function i4(s,e){return DO(s)&&!DO(e)?!0:s===5?!1:LO(s)!==LO(e)}function LO(s){return s===6||s===5?"space":s}function DO(s){return s===4||s===5||s===6}function Dj(s,e,t,i,n){if(s.autoClosingOvertype==="never"||!s.autoClosingPairs.autoClosingPairsCloseSingleChar.has(n))return!1;for(let r=0,o=t.length;r<o;r++){const a=t[r];if(!a.isEmpty())return!1;const l=a.getPosition(),c=e.getLineContent(l.lineNumber);if(c.charAt(l.column-1)!==n)return!1;const d=Wh(n);if((l.column>2?c.charCodeAt(l.column-2):0)===92&&d)return!1;if(s.autoClosingOvertype==="auto"){let m=!1;for(let _=0,v=i.length;_<v;_++){const w=i[_];if(l.lineNumber===w.startLineNumber&&l.column===w.startColumn){m=!0;break}}if(!m)return!1}}return!0}function kd(s,e,t){return t?new iC(s,e,!0):new Vr(s,e,!0)}function u9(s,e,t){return t=t||1,Of.shiftIndent(e,e.length+t,s.tabSize,s.indentSize,s.insertSpaces)}function Fy(s,e,t){return t=t||1,Of.unshiftIndent(e,e.length+t,s.tabSize,s.indentSize,s.insertSpaces)}function Ej(s,e){return Wh(e)?s.autoSurround==="quotes"||s.autoSurround==="languageDefined":s.autoSurround==="brackets"||s.autoSurround==="languageDefined"}class Ud{static indent(e,t,i){if(t===null||i===null)return[];const n=[];for(let r=0,o=i.length;r<o;r++)n[r]=new Of(i[r],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return n}static outdent(e,t,i){const n=[];for(let r=0,o=i.length;r<o;r++)n[r]=new Of(i[r],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return n}static paste(e,t,i,n,r,o){return eme.getEdits(e,t,i,n,r,o)}static tab(e,t,i){return nme.getCommands(e,t,i)}static compositionType(e,t,i,n,r,o,a,l){return tme.getEdits(e,t,i,n,r,o,a,l)}static compositionEndWithInterceptors(e,t,i,n,r,o){if(!n)return null;let a=null;for(const g of n)if(a===null)a=g.insertedText;else if(a!==g.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let c=!1;for(const g of n)if(g.deletedText.length!==0){c=!0;break}if(c){if(!Ej(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const g=Wh(l);for(const v of n)if(v.deletedSelectionStart!==0||v.deletedSelectionEnd!==v.deletedText.length||/^[ \t]+$/.test(v.deletedText)||g&&Wh(v.deletedText))return null;const m=[];for(const v of r){if(!v.isEmpty())return null;m.push(v.getPosition())}if(m.length!==n.length)return null;const _=[];for(let v=0,w=m.length;v<w;v++)_.push(new jge(m[v],n[v].deletedText,t.surroundingPairs[l]));return new Lr(4,_,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const u=Yge.getEdits(t,i,r,o,l);if(u!==void 0)return u;const d=$6.getEdits(t,i,r,l,!0,!1);return d!==void 0?d:null}static typeWithInterceptors(e,t,i,n,r,o,a){const l=Lj.getEdits(i,n,r,a,e);if(l!==void 0)return l;const c=Gge.getEdits(i,n,r,a,e);if(c!==void 0)return c;const u=Zge.getEdits(t,i,n,r,o,a);if(u!==void 0)return u;const d=$6.getEdits(i,n,r,a,!1,e);if(d!==void 0)return d;const g=Xge.getEdits(i,n,r,a,e);if(g!==void 0)return g;const m=Qge.getEdits(t,i,n,r,a,e);return m!==void 0?m:Jge.getEdits(t,r,a)}static typeWithoutInterceptors(e,t,i,n,r){return ime.getEdits(e,n,r)}}class ome{constructor(e,t,i,n,r,o){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=i,this.insertedText=n,this.insertedSelectionStart=r,this.insertedSelectionEnd=o}}var Be;(function(s){s.editorSimpleInput=new Je("editorSimpleInput",!1,!0),s.editorTextFocus=new Je("editorTextFocus",!1,b("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),s.focus=new Je("editorFocus",!1,b("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),s.textInputFocus=new Je("textInputFocus",!1,b("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),s.readOnly=new Je("editorReadonly",!1,b("editorReadonly","Whether the editor is read-only")),s.inDiffEditor=new Je("inDiffEditor",!1,b("inDiffEditor","Whether the context is a diff editor")),s.isEmbeddedDiffEditor=new Je("isEmbeddedDiffEditor",!1,b("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),s.inMultiDiffEditor=new Je("inMultiDiffEditor",!1,b("inMultiDiffEditor","Whether the context is a multi diff editor")),s.multiDiffEditorAllCollapsed=new Je("multiDiffEditorAllCollapsed",void 0,b("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),s.hasChanges=new Je("diffEditorHasChanges",!1,b("diffEditorHasChanges","Whether the diff editor has changes")),s.comparingMovedCode=new Je("comparingMovedCode",!1,b("comparingMovedCode","Whether a moved code block is selected for comparison")),s.accessibleDiffViewerVisible=new Je("accessibleDiffViewerVisible",!1,b("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),s.diffEditorRenderSideBySideInlineBreakpointReached=new Je("diffEditorRenderSideBySideInlineBreakpointReached",!1,b("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),s.diffEditorInlineMode=new Je("diffEditorInlineMode",!1,b("diffEditorInlineMode","Whether inline mode is active")),s.diffEditorOriginalWritable=new Je("diffEditorOriginalWritable",!1,b("diffEditorOriginalWritable","Whether modified is writable in the diff editor")),s.diffEditorModifiedWritable=new Je("diffEditorModifiedWritable",!1,b("diffEditorModifiedWritable","Whether modified is writable in the diff editor")),s.diffEditorOriginalUri=new Je("diffEditorOriginalUri","",b("diffEditorOriginalUri","The uri of the original document")),s.diffEditorModifiedUri=new Je("diffEditorModifiedUri","",b("diffEditorModifiedUri","The uri of the modified document")),s.columnSelection=new Je("editorColumnSelection",!1,b("editorColumnSelection","Whether `editor.columnSelection` is enabled")),s.writable=s.readOnly.toNegated(),s.hasNonEmptySelection=new Je("editorHasSelection",!1,b("editorHasSelection","Whether the editor has text selected")),s.hasOnlyEmptySelection=s.hasNonEmptySelection.toNegated(),s.hasMultipleSelections=new Je("editorHasMultipleSelections",!1,b("editorHasMultipleSelections","Whether the editor has multiple selections")),s.hasSingleSelection=s.hasMultipleSelections.toNegated(),s.tabMovesFocus=new Je("editorTabMovesFocus",!1,b("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),s.tabDoesNotMoveFocus=s.tabMovesFocus.toNegated(),s.isInEmbeddedEditor=new Je("isInEmbeddedEditor",!1,!0),s.canUndo=new Je("canUndo",!1,!0),s.canRedo=new Je("canRedo",!1,!0),s.hoverVisible=new Je("editorHoverVisible",!1,b("editorHoverVisible","Whether the editor hover is visible")),s.hoverFocused=new Je("editorHoverFocused",!1,b("editorHoverFocused","Whether the editor hover is focused")),s.stickyScrollFocused=new Je("stickyScrollFocused",!1,b("stickyScrollFocused","Whether the sticky scroll is focused")),s.stickyScrollVisible=new Je("stickyScrollVisible",!1,b("stickyScrollVisible","Whether the sticky scroll is visible")),s.standaloneColorPickerVisible=new Je("standaloneColorPickerVisible",!1,b("standaloneColorPickerVisible","Whether the standalone color picker is visible")),s.standaloneColorPickerFocused=new Je("standaloneColorPickerFocused",!1,b("standaloneColorPickerFocused","Whether the standalone color picker is focused")),s.inCompositeEditor=new Je("inCompositeEditor",void 0,b("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),s.notInCompositeEditor=s.inCompositeEditor.toNegated(),s.languageId=new Je("editorLangId","",b("editorLangId","The language identifier of the editor")),s.hasCompletionItemProvider=new Je("editorHasCompletionItemProvider",!1,b("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),s.hasCodeActionsProvider=new Je("editorHasCodeActionsProvider",!1,b("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),s.hasCodeLensProvider=new Je("editorHasCodeLensProvider",!1,b("editorHasCodeLensProvider","Whether the editor has a code lens provider")),s.hasDefinitionProvider=new Je("editorHasDefinitionProvider",!1,b("editorHasDefinitionProvider","Whether the editor has a definition provider")),s.hasDeclarationProvider=new Je("editorHasDeclarationProvider",!1,b("editorHasDeclarationProvider","Whether the editor has a declaration provider")),s.hasImplementationProvider=new Je("editorHasImplementationProvider",!1,b("editorHasImplementationProvider","Whether the editor has an implementation provider")),s.hasTypeDefinitionProvider=new Je("editorHasTypeDefinitionProvider",!1,b("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),s.hasHoverProvider=new Je("editorHasHoverProvider",!1,b("editorHasHoverProvider","Whether the editor has a hover provider")),s.hasDocumentHighlightProvider=new Je("editorHasDocumentHighlightProvider",!1,b("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),s.hasDocumentSymbolProvider=new Je("editorHasDocumentSymbolProvider",!1,b("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),s.hasReferenceProvider=new Je("editorHasReferenceProvider",!1,b("editorHasReferenceProvider","Whether the editor has a reference provider")),s.hasRenameProvider=new Je("editorHasRenameProvider",!1,b("editorHasRenameProvider","Whether the editor has a rename provider")),s.hasSignatureHelpProvider=new Je("editorHasSignatureHelpProvider",!1,b("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),s.hasInlayHintsProvider=new Je("editorHasInlayHintsProvider",!1,b("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),s.hasDocumentFormattingProvider=new Je("editorHasDocumentFormattingProvider",!1,b("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),s.hasDocumentSelectionFormattingProvider=new Je("editorHasDocumentSelectionFormattingProvider",!1,b("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),s.hasMultipleDocumentFormattingProvider=new Je("editorHasMultipleDocumentFormattingProvider",!1,b("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),s.hasMultipleDocumentSelectionFormattingProvider=new Je("editorHasMultipleDocumentSelectionFormattingProvider",!1,b("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(Be||(Be={}));const Kt=0;class Ui extends Nf{runEditorCommand(e,t,i){const n=t._getViewModel();n&&this.runCoreEditorCommand(n,i||{})}}var cs;(function(s){const e=function(i){if(!Cr(i))return!1;const n=i;return!(!bo(n.to)||!Uo(n.by)&&!bo(n.by)||!Uo(n.value)&&!vp(n.value)||!Uo(n.revealCursor)&&!UB(n.revealCursor))};s.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},s.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},s.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function t(i){let n;switch(i.to){case s.RawDirection.Up:n=1;break;case s.RawDirection.Right:n=2;break;case s.RawDirection.Down:n=3;break;case s.RawDirection.Left:n=4;break;default:return null}let r;switch(i.by){case s.RawUnit.Line:r=1;break;case s.RawUnit.WrappedLine:r=2;break;case s.RawUnit.Page:r=3;break;case s.RawUnit.HalfPage:r=4;break;case s.RawUnit.Editor:r=5;break;case s.RawUnit.Column:r=6;break;default:r=2}const o=Math.floor(i.value||1),a=!!i.revealCursor;return{direction:n,unit:r,value:o,revealCursor:a,select:!!i.select}}s.parse=t})(cs||(cs={}));var rm;(function(s){const e=function(t){if(!Cr(t))return!1;const i=t;return!(!vp(i.lineNumber)&&!bo(i.lineNumber)||!Uo(i.at)&&!bo(i.at))};s.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},s.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(rm||(rm={}));class q6{constructor(e){e.addImplementation(1e4,"code-editor",(t,i)=>{const n=t.get(An).getFocusedCodeEditor();return n&&n.hasTextFocus()?this._runEditorCommand(t,n,i):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,i)=>{const n=Us();return n&&["input","textarea"].indexOf(n.tagName.toLowerCase())>=0?(this.runDOMCommand(n),!0):!1}),e.addImplementation(0,"generic-dom",(t,i)=>{const n=t.get(An).getActiveCodeEditor();return n?(n.focus(),this._runEditorCommand(t,n,i)):!1})}_runEditorCommand(e,t,i){const n=this.runEditorCommand(e,t,i);return n||!0}}var Bn;(function(s){class e extends Ui{constructor(S){super(S),this._inSelectionMode=S.inSelectionMode}runCoreEditorCommand(S,k){if(!k.position)return;S.model.pushStackElement(),S.setCursorStates(k.source,3,[Os.moveTo(S,S.getPrimaryCursorState(),this._inSelectionMode,k.position,k.viewPosition)])&&k.revealType!==2&&S.revealAllCursors(k.source,!0,!0)}}s.MoveTo=pt(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),s.MoveToSelect=pt(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends Ui{runCoreEditorCommand(S,k){S.model.pushStackElement();const L=this._getColumnSelectResult(S,S.getPrimaryCursorState(),S.getCursorColumnSelectData(),k);L!==null&&(S.setCursorStates(k.source,3,L.viewStates.map(T=>Bt.fromViewState(T))),S.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:L.fromLineNumber,fromViewVisualColumn:L.fromVisualColumn,toViewLineNumber:L.toLineNumber,toViewVisualColumn:L.toVisualColumn}),L.reversed?S.revealTopMostCursor(k.source):S.revealBottomMostCursor(k.source))}}s.ColumnSelect=pt(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(y,S,k,L){if(typeof L.position>"u"||typeof L.viewPosition>"u"||typeof L.mouseColumn>"u")return null;const T=y.model.validatePosition(L.position),A=y.coordinatesConverter.validateViewPosition(new ce(L.viewPosition.lineNumber,L.viewPosition.column),T),I=L.doColumnSelect?k.fromViewLineNumber:A.lineNumber,O=L.doColumnSelect?k.fromViewVisualColumn:L.mouseColumn-1;return jd.columnSelect(y.cursorConfig,y,I,O,A.lineNumber,L.mouseColumn-1)}}),s.CursorColumnSelectLeft=pt(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(y,S,k,L){return jd.columnSelectLeft(y.cursorConfig,y,k)}}),s.CursorColumnSelectRight=pt(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(y,S,k,L){return jd.columnSelectRight(y.cursorConfig,y,k)}});class i extends t{constructor(S){super(S),this._isPaged=S.isPaged}_getColumnSelectResult(S,k,L,T){return jd.columnSelectUp(S.cursorConfig,S,L,this._isPaged)}}s.CursorColumnSelectUp=pt(new i({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:3600,linux:{primary:0}}})),s.CursorColumnSelectPageUp=pt(new i({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:3595,linux:{primary:0}}}));class n extends t{constructor(S){super(S),this._isPaged=S.isPaged}_getColumnSelectResult(S,k,L,T){return jd.columnSelectDown(S.cursorConfig,S,L,this._isPaged)}}s.CursorColumnSelectDown=pt(new n({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:3602,linux:{primary:0}}})),s.CursorColumnSelectPageDown=pt(new n({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:3596,linux:{primary:0}}}));class r extends Ui{constructor(){super({id:"cursorMove",precondition:void 0,metadata:Py.metadata})}runCoreEditorCommand(S,k){const L=Py.parse(k);L&&this._runCursorMove(S,k.source,L)}_runCursorMove(S,k,L){S.model.pushStackElement(),S.setCursorStates(k,3,r._move(S,S.getCursorStates(),L)),S.revealAllCursors(k,!0)}static _move(S,k,L){const T=L.select,A=L.value;switch(L.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return Os.simpleMove(S,k,L.direction,T,A,L.unit);case 11:case 13:case 12:case 14:return Os.viewportMove(S,k,L.direction,T,A);default:return null}}}s.CursorMoveImpl=r,s.CursorMove=pt(new r);class o extends Ui{constructor(S){super(S),this._staticArgs=S.args}runCoreEditorCommand(S,k){let L=this._staticArgs;this._staticArgs.value===-1&&(L={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:k.pageSize||S.cursorConfig.pageSize}),S.model.pushStackElement(),S.setCursorStates(k.source,3,Os.simpleMove(S,S.getCursorStates(),L.direction,L.select,L.value,L.unit)),S.revealAllCursors(k.source,!0)}}s.CursorLeft=pt(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),s.CursorLeftSelect=pt(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:1039}})),s.CursorRight=pt(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),s.CursorRightSelect=pt(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:1041}})),s.CursorUp=pt(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),s.CursorUpSelect=pt(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),s.CursorPageUp=pt(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:11}})),s.CursorPageUpSelect=pt(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:1035}})),s.CursorDown=pt(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),s.CursorDownSelect=pt(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),s.CursorPageDown=pt(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:12}})),s.CursorPageDownSelect=pt(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:1036}})),s.CreateCursor=pt(new class extends Ui{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(y,S){if(!S.position)return;let k;S.wholeLine?k=Os.line(y,y.getPrimaryCursorState(),!1,S.position,S.viewPosition):k=Os.moveTo(y,y.getPrimaryCursorState(),!1,S.position,S.viewPosition);const L=y.getCursorStates();if(L.length>1){const T=k.modelState?k.modelState.position:null,A=k.viewState?k.viewState.position:null;for(let I=0,O=L.length;I<O;I++){const F=L[I];if(!(T&&!F.modelState.selection.containsPosition(T))&&!(A&&!F.viewState.selection.containsPosition(A))){L.splice(I,1),y.model.pushStackElement(),y.setCursorStates(S.source,3,L);return}}}L.push(k),y.model.pushStackElement(),y.setCursorStates(S.source,3,L)}}),s.LastCursorMoveToSelect=pt(new class extends Ui{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(y,S){if(!S.position)return;const k=y.getLastAddedCursorIndex(),L=y.getCursorStates(),T=L.slice(0);T[k]=Os.moveTo(y,L[k],!0,S.position,S.viewPosition),y.model.pushStackElement(),y.setCursorStates(S.source,3,T)}});class a extends Ui{constructor(S){super(S),this._inSelectionMode=S.inSelectionMode}runCoreEditorCommand(S,k){S.model.pushStackElement(),S.setCursorStates(k.source,3,Os.moveToBeginningOfLine(S,S.getCursorStates(),this._inSelectionMode)),S.revealAllCursors(k.source,!0)}}s.CursorHome=pt(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),s.CursorHomeSelect=pt(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends Ui{constructor(S){super(S),this._inSelectionMode=S.inSelectionMode}runCoreEditorCommand(S,k){S.model.pushStackElement(),S.setCursorStates(k.source,3,this._exec(S.getCursorStates())),S.revealAllCursors(k.source,!0)}_exec(S){const k=[];for(let L=0,T=S.length;L<T;L++){const A=S[L],I=A.modelState.position.lineNumber;k[L]=Bt.fromModelState(A.modelState.move(this._inSelectionMode,I,1,0))}return k}}s.CursorLineStart=pt(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:0,mac:{primary:287}}})),s.CursorLineStartSelect=pt(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends Ui{constructor(S){super(S),this._inSelectionMode=S.inSelectionMode}runCoreEditorCommand(S,k){S.model.pushStackElement(),S.setCursorStates(k.source,3,Os.moveToEndOfLine(S,S.getCursorStates(),this._inSelectionMode,k.sticky||!1)),S.revealAllCursors(k.source,!0)}}s.CursorEnd=pt(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Kt,kbExpr:Be.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:b("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),s.CursorEndSelect=pt(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Kt,kbExpr:Be.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:b("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class u extends Ui{constructor(S){super(S),this._inSelectionMode=S.inSelectionMode}runCoreEditorCommand(S,k){S.model.pushStackElement(),S.setCursorStates(k.source,3,this._exec(S,S.getCursorStates())),S.revealAllCursors(k.source,!0)}_exec(S,k){const L=[];for(let T=0,A=k.length;T<A;T++){const I=k[T],O=I.modelState.position.lineNumber,F=S.model.getLineMaxColumn(O);L[T]=Bt.fromModelState(I.modelState.move(this._inSelectionMode,O,F,0))}return L}}s.CursorLineEnd=pt(new u({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:0,mac:{primary:291}}})),s.CursorLineEndSelect=pt(new u({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:0,mac:{primary:1315}}}));class d extends Ui{constructor(S){super(S),this._inSelectionMode=S.inSelectionMode}runCoreEditorCommand(S,k){S.model.pushStackElement(),S.setCursorStates(k.source,3,Os.moveToBeginningOfBuffer(S,S.getCursorStates(),this._inSelectionMode)),S.revealAllCursors(k.source,!0)}}s.CursorTop=pt(new d({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:2062,mac:{primary:2064}}})),s.CursorTopSelect=pt(new d({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:3086,mac:{primary:3088}}}));class g extends Ui{constructor(S){super(S),this._inSelectionMode=S.inSelectionMode}runCoreEditorCommand(S,k){S.model.pushStackElement(),S.setCursorStates(k.source,3,Os.moveToEndOfBuffer(S,S.getCursorStates(),this._inSelectionMode)),S.revealAllCursors(k.source,!0)}}s.CursorBottom=pt(new g({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:2061,mac:{primary:2066}}})),s.CursorBottomSelect=pt(new g({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:3085,mac:{primary:3090}}}));class m extends Ui{constructor(){super({id:"editorScroll",precondition:void 0,metadata:cs.metadata})}determineScrollMethod(S){const k=[6],L=[1,2,3,4,5,6],T=[4,2],A=[1,3];return k.includes(S.unit)&&T.includes(S.direction)?this._runHorizontalEditorScroll.bind(this):L.includes(S.unit)&&A.includes(S.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(S,k){const L=cs.parse(k);if(!L)return;const T=this.determineScrollMethod(L);T&&T(S,k.source,L)}_runVerticalEditorScroll(S,k,L){const T=this._computeDesiredScrollTop(S,L);if(L.revealCursor){const A=S.getCompletelyVisibleViewRangeAtScrollTop(T);S.setCursorStates(k,3,[Os.findPositionInViewportIfOutside(S,S.getPrimaryCursorState(),A,L.select)])}S.viewLayout.setScrollPosition({scrollTop:T},0)}_computeDesiredScrollTop(S,k){if(k.unit===1){const A=S.viewLayout.getFutureViewport(),I=S.getCompletelyVisibleViewRangeAtScrollTop(A.top),O=S.coordinatesConverter.convertViewRangeToModelRange(I);let F;k.direction===1?F=Math.max(1,O.startLineNumber-k.value):F=Math.min(S.model.getLineCount(),O.startLineNumber+k.value);const J=S.coordinatesConverter.convertModelPositionToViewPosition(new ce(F,1));return S.viewLayout.getVerticalOffsetForLineNumber(J.lineNumber)}if(k.unit===5){let A=0;return k.direction===3&&(A=S.model.getLineCount()-S.cursorConfig.pageSize),S.viewLayout.getVerticalOffsetForLineNumber(A)}let L;k.unit===3?L=S.cursorConfig.pageSize*k.value:k.unit===4?L=Math.round(S.cursorConfig.pageSize/2)*k.value:L=k.value;const T=(k.direction===1?-1:1)*L;return S.viewLayout.getCurrentScrollTop()+T*S.cursorConfig.lineHeight}_runHorizontalEditorScroll(S,k,L){const T=this._computeDesiredScrollLeft(S,L);S.viewLayout.setScrollPosition({scrollLeft:T},0)}_computeDesiredScrollLeft(S,k){const L=(k.direction===4?-1:1)*k.value;return S.viewLayout.getCurrentScrollLeft()+L*S.cursorConfig.typicalHalfwidthCharacterWidth}}s.EditorScrollImpl=m,s.EditorScroll=pt(new m),s.ScrollLineUp=pt(new class extends Ui{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(y,S){s.EditorScroll.runCoreEditorCommand(y,{to:cs.RawDirection.Up,by:cs.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:S.source})}}),s.ScrollPageUp=pt(new class extends Ui{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(y,S){s.EditorScroll.runCoreEditorCommand(y,{to:cs.RawDirection.Up,by:cs.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:S.source})}}),s.ScrollEditorTop=pt(new class extends Ui{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus}})}runCoreEditorCommand(y,S){s.EditorScroll.runCoreEditorCommand(y,{to:cs.RawDirection.Up,by:cs.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:S.source})}}),s.ScrollLineDown=pt(new class extends Ui{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(y,S){s.EditorScroll.runCoreEditorCommand(y,{to:cs.RawDirection.Down,by:cs.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:S.source})}}),s.ScrollPageDown=pt(new class extends Ui{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(y,S){s.EditorScroll.runCoreEditorCommand(y,{to:cs.RawDirection.Down,by:cs.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:S.source})}}),s.ScrollEditorBottom=pt(new class extends Ui{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus}})}runCoreEditorCommand(y,S){s.EditorScroll.runCoreEditorCommand(y,{to:cs.RawDirection.Down,by:cs.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:S.source})}}),s.ScrollLeft=pt(new class extends Ui{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus}})}runCoreEditorCommand(y,S){s.EditorScroll.runCoreEditorCommand(y,{to:cs.RawDirection.Left,by:cs.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:S.source})}}),s.ScrollRight=pt(new class extends Ui{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus}})}runCoreEditorCommand(y,S){s.EditorScroll.runCoreEditorCommand(y,{to:cs.RawDirection.Right,by:cs.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:S.source})}});class _ extends Ui{constructor(S){super(S),this._inSelectionMode=S.inSelectionMode}runCoreEditorCommand(S,k){k.position&&(S.model.pushStackElement(),S.setCursorStates(k.source,3,[Os.word(S,S.getPrimaryCursorState(),this._inSelectionMode,k.position)]),k.revealType!==2&&S.revealAllCursors(k.source,!0,!0))}}s.WordSelect=pt(new _({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),s.WordSelectDrag=pt(new _({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),s.LastCursorWordSelect=pt(new class extends Ui{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(y,S){if(!S.position)return;const k=y.getLastAddedCursorIndex(),L=y.getCursorStates(),T=L.slice(0),A=L[k];T[k]=Os.word(y,A,A.modelState.hasSelection(),S.position),y.model.pushStackElement(),y.setCursorStates(S.source,3,T)}});class v extends Ui{constructor(S){super(S),this._inSelectionMode=S.inSelectionMode}runCoreEditorCommand(S,k){k.position&&(S.model.pushStackElement(),S.setCursorStates(k.source,3,[Os.line(S,S.getPrimaryCursorState(),this._inSelectionMode,k.position,k.viewPosition)]),k.revealType!==2&&S.revealAllCursors(k.source,!1,!0))}}s.LineSelect=pt(new v({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),s.LineSelectDrag=pt(new v({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class w extends Ui{constructor(S){super(S),this._inSelectionMode=S.inSelectionMode}runCoreEditorCommand(S,k){if(!k.position)return;const L=S.getLastAddedCursorIndex(),T=S.getCursorStates(),A=T.slice(0);A[L]=Os.line(S,T[L],this._inSelectionMode,k.position,k.viewPosition),S.model.pushStackElement(),S.setCursorStates(k.source,3,A)}}s.LastCursorLineSelect=pt(new w({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),s.LastCursorLineSelectDrag=pt(new w({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),s.CancelSelection=pt(new class extends Ui{constructor(){super({id:"cancelSelection",precondition:Be.hasNonEmptySelection,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(y,S){y.model.pushStackElement(),y.setCursorStates(S.source,3,[Os.cancelSelection(y,y.getPrimaryCursorState())]),y.revealAllCursors(S.source,!0)}}),s.RemoveSecondaryCursors=pt(new class extends Ui{constructor(){super({id:"removeSecondaryCursors",precondition:Be.hasMultipleSelections,kbOpts:{weight:Kt+1,kbExpr:Be.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(y,S){y.model.pushStackElement(),y.setCursorStates(S.source,3,[y.getPrimaryCursorState()]),y.revealAllCursors(S.source,!0),GC(b("removedCursor","Removed secondary cursors"))}}),s.RevealLine=pt(new class extends Ui{constructor(){super({id:"revealLine",precondition:void 0,metadata:rm.metadata})}runCoreEditorCommand(y,S){const k=S,L=k.lineNumber||0;let T=typeof L=="number"?L+1:parseInt(L)+1;T<1&&(T=1);const A=y.model.getLineCount();T>A&&(T=A);const I=new Q(T,1,T,y.model.getLineMaxColumn(T));let O=0;if(k.at)switch(k.at){case rm.RawAtArgument.Top:O=3;break;case rm.RawAtArgument.Center:O=1;break;case rm.RawAtArgument.Bottom:O=4;break}const F=y.coordinatesConverter.convertModelRangeToViewRange(I);y.revealRange(S.source,!1,F,O,0)}}),s.SelectAll=new class extends q6{constructor(){super(RJ)}runDOMCommand(y){ba&&(y.focus(),y.select()),y.ownerDocument.execCommand("selectAll")}runEditorCommand(y,S,k){const L=S._getViewModel();L&&this.runCoreEditorCommand(L,k)}runCoreEditorCommand(y,S){y.model.pushStackElement(),y.setCursorStates("keyboard",3,[Os.selectAll(y,y.getPrimaryCursorState())])}},s.SetSelection=pt(new class extends Ui{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(y,S){S.selection&&(y.model.pushStackElement(),y.setCursorStates(S.source,3,[Bt.fromModelSelection(S.selection)]))}})})(Bn||(Bn={}));const ame=ni.and(Be.textInputFocus,Be.columnSelection);function Ip(s,e){Q_.registerKeybindingRule({id:s,primary:e,when:ame,weight:Kt+1})}Ip(Bn.CursorColumnSelectLeft.id,1039);Ip(Bn.CursorColumnSelectRight.id,1041);Ip(Bn.CursorColumnSelectUp.id,1040);Ip(Bn.CursorColumnSelectPageUp.id,1035);Ip(Bn.CursorColumnSelectDown.id,1042);Ip(Bn.CursorColumnSelectPageDown.id,1036);function EO(s){return s.register(),s}var TO;(function(s){class e extends Nf{runEditorCommand(i,n,r){const o=n._getViewModel();o&&this.runCoreEditingCommand(n,o,r||{})}}s.CoreEditingCommand=e,s.LineBreakInsert=pt(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:Be.writable,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,i,n){t.pushUndoStop(),t.executeCommands(this.id,Lj.lineBreakInsert(i.cursorConfig,i.model,i.getCursorStates().map(r=>r.modelState.selection)))}}),s.Outdent=pt(new class extends e{constructor(){super({id:"outdent",precondition:Be.writable,kbOpts:{weight:Kt,kbExpr:ni.and(Be.editorTextFocus,Be.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,i,n){t.pushUndoStop(),t.executeCommands(this.id,Ud.outdent(i.cursorConfig,i.model,i.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),s.Tab=pt(new class extends e{constructor(){super({id:"tab",precondition:Be.writable,kbOpts:{weight:Kt,kbExpr:ni.and(Be.editorTextFocus,Be.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,i,n){t.pushUndoStop(),t.executeCommands(this.id,Ud.tab(i.cursorConfig,i.model,i.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),s.DeleteLeft=pt(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,i,n){const[r,o]=Pf.deleteLeft(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection),i.getCursorAutoClosedCharacters());r&&t.pushUndoStop(),t.executeCommands(this.id,o),i.setPrevEditOperationType(2)}}),s.DeleteRight=pt(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:Kt,kbExpr:Be.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,i,n){const[r,o]=Pf.deleteRight(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection));r&&t.pushUndoStop(),t.executeCommands(this.id,o),i.setPrevEditOperationType(3)}}),s.Undo=new class extends q6{constructor(){super(oV)}runDOMCommand(t){t.ownerDocument.execCommand("undo")}runEditorCommand(t,i,n){if(!(!i.hasModel()||i.getOption(92)===!0))return i.getModel().undo()}},s.Redo=new class extends q6{constructor(){super(aV)}runDOMCommand(t){t.ownerDocument.execCommand("redo")}runEditorCommand(t,i,n){if(!(!i.hasModel()||i.getOption(92)===!0))return i.getModel().redo()}}})(TO||(TO={}));class NO extends w2{constructor(e,t,i){super({id:e,precondition:void 0,metadata:i}),this._handlerId=t}runCommand(e,t){const i=e.get(An).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,t)}}function eg(s,e){EO(new NO("default:"+s,s)),EO(new NO(s,s,e))}eg("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});eg("replacePreviousChar");eg("compositionType");eg("compositionStart");eg("compositionEnd");eg("paste");eg("cut");class lme{constructor(e,t,i,n){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=n}paste(e,t,i,n){this.commandDelegate.paste(e,t,i,n)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,n){this.commandDelegate.compositionType(e,t,i,n)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Bn.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new ce(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,i=xr&&t.get(108),n=t.get(22);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):n?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){Bn.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){Bn.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,i){e=this._validateViewColumn(e),Bn.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),Bn.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){Bn.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){Bn.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){Bn.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){Bn.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){Bn.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){Bn.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){Bn.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){Bn.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){Bn.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class Tj{constructor(e){this._lineFactory=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new ri("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const i=this.getStartLineNumber(),n=this.getEndLineNumber();if(t<i){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>n)return null;let r=0,o=0;for(let l=i;l<=n;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(o===0?(r=c,o=1):o++)}if(e<i){let l=0;t<i?l=t-e+1:l=i-e,this._rendLineNumberStart-=l}return this._lines.splice(r,o)}onLinesChanged(e,t){const i=e+t-1;if(this.getCount()===0)return!1;const n=this.getStartLineNumber(),r=this.getEndLineNumber();let o=!1;for(let a=e;a<=i;a++)a>=n&&a<=r&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),o=!0);return o}onLinesInserted(e,t){if(this.getCount()===0)return null;const i=t-e+1,n=this.getStartLineNumber(),r=this.getEndLineNumber();if(e<=n)return this._rendLineNumberStart+=i,null;if(e>r)return null;if(i+e>r)return this._lines.splice(e-this._rendLineNumberStart,r-e+1);const o=[];for(let d=0;d<i;d++)o[d]=this._lineFactory.createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-i),u=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=l.concat(o).concat(c),u}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),i=this.getEndLineNumber();let n=!1;for(let r=0,o=e.length;r<o;r++){const a=e[r];if(a.toLineNumber<t||a.fromLineNumber>i)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(i,a.toLineNumber);for(let u=l;u<=c;u++){const d=u-this._rendLineNumberStart;this._lines[d].onTokensChanged(),n=!0}}return n}}class Nj{constructor(e){this._lineFactory=e,this.domNode=this._createDomNode(),this._linesCollection=new Tj(this._lineFactory)}_createDomNode(){const e=Qt(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(146)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,n=t.length;i<n;i++)t[i].getDomNode()?.remove();return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,n=t.length;i<n;i++)t[i].getDomNode()?.remove();return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),i=new K6(this.domNode.domNode,this._lineFactory,e),n={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},r=i.render(n,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(r.rendLineNumberStart,r.lines)}}const Mc=class Mc{constructor(e,t,i){this._domNode=e,this._lineFactory=t,this._viewportData=i}render(e,t,i,n){const r={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(r.rendLineNumberStart+r.linesLength-1<t||i<r.rendLineNumberStart){r.rendLineNumberStart=t,r.linesLength=i-t+1,r.lines=[];for(let o=t;o<=i;o++)r.lines[o-t]=this._lineFactory.createLine();return this._finishRendering(r,!0,n),r}if(this._renderUntouchedLines(r,Math.max(t-r.rendLineNumberStart,0),Math.min(i-r.rendLineNumberStart,r.linesLength-1),n,t),r.rendLineNumberStart>t){const o=t,a=Math.min(i,r.rendLineNumberStart-1);o<=a&&(this._insertLinesBefore(r,o,a,n,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart<t){const o=Math.min(r.linesLength,t-r.rendLineNumberStart);o>0&&(this._removeLinesBefore(r,o),r.linesLength-=o)}if(r.rendLineNumberStart=t,r.rendLineNumberStart+r.linesLength-1<i){const o=r.rendLineNumberStart+r.linesLength,a=i;o<=a&&(this._insertLinesAfter(r,o,a,n,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart+r.linesLength-1>i){const o=Math.max(0,i-r.rendLineNumberStart+1),l=r.linesLength-1-o+1;l>0&&(this._removeLinesAfter(r,l),r.linesLength-=l)}return this._finishRendering(r,!1,n),r}_renderUntouchedLines(e,t,i,n,r){const o=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=i;l++){const c=o+l;a[l].layoutLine(c,n[c-r],this._viewportData.lineHeight)}}_insertLinesBefore(e,t,i,n,r){const o=[];let a=0;for(let l=t;l<=i;l++)o[a++]=this._lineFactory.createLine();e.lines=o.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++)e.lines[i].getDomNode()?.remove();e.lines.splice(0,t)}_insertLinesAfter(e,t,i,n,r){const o=[];let a=0;for(let l=t;l<=i;l++)o[a++]=this._lineFactory.createLine();e.lines=e.lines.concat(o)}_removeLinesAfter(e,t){const i=e.linesLength-t;for(let n=0;n<t;n++)e.lines[i+n].getDomNode()?.remove();e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,n){Mc._ttPolicy&&(i=Mc._ttPolicy.createHTML(i));const r=this._domNode.lastChild;t||!r?this._domNode.innerHTML=i:r.insertAdjacentHTML("afterend",i);let o=this._domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];n[a]&&(l.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(e,t,i){const n=document.createElement("div");Mc._ttPolicy&&(t=Mc._ttPolicy.createHTML(t)),n.innerHTML=t;for(let r=0;r<e.linesLength;r++){const o=e.lines[r];if(i[r]){const a=n.firstChild,l=o.getDomNode();l.parentNode.replaceChild(a,l),o.setDomNode(a)}}}_finishRendering(e,t,i){const n=Mc._sb,r=e.linesLength,o=e.lines,a=e.rendLineNumberStart,l=[];{n.reset();let c=!1;for(let u=0;u<r;u++){const d=o[u];l[u]=!1,!(d.getDomNode()||!d.renderLine(u+a,i[u],this._viewportData.lineHeight,this._viewportData,n))&&(l[u]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,n.build(),l)}{n.reset();let c=!1;const u=[];for(let d=0;d<r;d++){const g=o[d];u[d]=!1,!(l[d]||!g.renderLine(d+a,i[d],this._viewportData.lineHeight,this._viewportData,n))&&(u[d]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,n.build(),u)}}};Mc._ttPolicy=Kf("editorViewLayer",{createHTML:e=>e}),Mc._sb=new C2(1e5);let K6=Mc;class Ij extends Zr{constructor(e){super(e),this._dynamicOverlays=[],this._isFocused=!1,this._visibleLines=new Nj({createLine:()=>new cme(this._dynamicOverlays)}),this.domNode=this._visibleLines.domNode;const i=this._context.configuration.options.get(50);xs(this.domNode,i),this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const i=this._context.configuration.options.get(50);return xs(this.domNode,i),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(i=>i.shouldRender());for(let i=0,n=t.length;i<n;i++){const r=t[i];r.prepareRender(e),r.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class cme{constructor(e){this._dynamicOverlays=e,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=Qt(e)}onContentChanged(){}onTokensChanged(){}renderLine(e,t,i,n,r){let o="";for(let a=0,l=this._dynamicOverlays.length;a<l;a++){const c=this._dynamicOverlays[a];o+=c.render(n.startLineNumber,e)}return this._renderedContent===o?!1:(this._renderedContent=o,r.appendString('<div style="top:'),r.appendString(String(t)),r.appendString("px;height:"),r.appendString(String(i)),r.appendString('px;">'),r.appendString(o),r.appendString("</div>"),!0)}layoutLine(e,t,i){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(i))}}class ume extends Ij{constructor(e){super(e);const i=this._context.configuration.options.get(146);this._contentWidth=i.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._contentWidth=i.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class hme extends Ij{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),xs(this.domNode,t.get(50))}onConfigurationChanged(e){const t=this._context.configuration.options;xs(this.domNode,t.get(50));const i=t.get(146);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class n4{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown?.(e)}emitKeyUp(e){this.onKeyUp?.(e)}emitContextMenu(e){this.onContextMenu?.(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove?.(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave?.(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown?.(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp?.(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag?.(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop?.(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled?.()}emitMouseWheel(e){this.onMouseWheel?.(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return n4.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const i={...e};return i.position&&(i.position=t.convertViewPositionToModelPosition(i.position)),i.range&&(i.range=t.convertViewRangeToModelRange(i.range)),(i.type===5||i.type===8)&&(i.detail=this.convertViewToModelViewZoneData(i.detail,t)),i}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new ce(e.afterLineNumber,1)).lineNumber}}}class dme extends Zr{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=Qt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const i=this._context.configuration.options.get(146),n=i.contentWidth-i.verticalScrollbarWidth;this.contentWidth!==n&&(this.contentWidth=n,e=!0);const r=i.contentLeft;return this.contentLeft!==r&&(this.contentLeft=r,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let t=0;const i=e.getDecorationsInViewport();for(const n of i){if(!n.options.blockClassName)continue;let r=this.blocks[t];r||(r=this.blocks[t]=Qt(document.createElement("div")),this.domNode.appendChild(r));let o,a;n.options.blockIsAfterEnd?(o=e.getVerticalOffsetAfterLineNumber(n.range.endLineNumber,!1),a=e.getVerticalOffsetAfterLineNumber(n.range.endLineNumber,!0)):(o=e.getVerticalOffsetForLineNumber(n.range.startLineNumber,!0),a=n.range.isEmpty()&&!n.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(n.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(n.range.endLineNumber,!0));const[l,c,u,d]=n.options.blockPadding??[0,0,0,0];r.setClassName("blockDecorations-block "+n.options.blockClassName),r.setLeft(this.contentLeft-d),r.setWidth(this.contentWidth+d+c),r.setTop(o-e.scrollTop-l),r.setHeight(a-o+l+u),t++}for(let n=t;n<this.blocks.length;n++)this.blocks[n].domNode.remove();this.blocks.length=t}}class fme extends Zr{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=Qt(document.createElement("div")),rl.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=Qt(document.createElement("div")),rl.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new gme(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,i,n,r){this._widgets[e.getId()].setPosition(t,i,n,r),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t];delete this._widgets[t];const n=i.domNode.domNode;n.remove(),n.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].render(e)}}class gme{constructor(e,t,i){this._primaryAnchor=new O0(null,null),this._secondaryAnchor=new O0(null,null),this._context=e,this._viewDomNode=t,this._actual=i,this.domNode=Qt(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const n=this._context.configuration.options,r=n.get(146);this._fixedOverflowWidgets=n.get(42),this._contentWidth=r.contentWidth,this._contentLeft=r.contentLeft,this._lineHeight=n.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(67),e.hasChanged(146)){const i=t.get(146);this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,i){this._affinity=e,this._primaryAnchor=n(t,this._context.viewModel,this._affinity),this._secondaryAnchor=n(i,this._context.viewModel,this._affinity);function n(r,o,a){if(!r)return new O0(null,null);const l=o.model.validatePosition(r);if(o.coordinatesConverter.modelPositionIsVisible(l)){const c=o.coordinatesConverter.convertModelPositionToViewPosition(l,a??void 0);return new O0(r,c)}return new O0(r,null)}}_getMaxWidth(){const e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?t?.innerWidth||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,i,n){this._setPosition(n,e,t),this._preference=i,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,i,n){const r=e.top,o=r,a=e.top+e.height,l=n.viewportHeight-a,c=r-i,u=o>=i,d=a,g=l>=i;let m=e.left;return m+t>n.scrollLeft+n.viewportWidth&&(m=n.scrollLeft+n.viewportWidth-t),m<n.scrollLeft&&(m=n.scrollLeft),{fitsAbove:u,aboveTop:c,fitsBelow:g,belowTop:d,left:m}}_layoutHorizontalSegmentInPage(e,t,i,n){const a=Math.max(15,t.left-n),l=Math.min(t.left+t.width+n,e.width-15),u=this._viewDomNode.domNode.ownerDocument.defaultView;let d=t.left+i-(u?.scrollX??0);if(d+n>l){const g=d-(l-n);d-=g,i-=g}if(d<a){const g=d-a;d-=g,i-=g}return[i,d]}_layoutBoxInPage(e,t,i,n){const r=e.top-i,o=e.top+e.height,a=$o(this._viewDomNode.domNode),l=this._viewDomNode.domNode.ownerDocument,c=l.defaultView,u=a.top+r-(c?.scrollY??0),d=a.top+o-(c?.scrollY??0),g=f3(l.body),[m,_]=this._layoutHorizontalSegmentInPage(g,a,e.left-n.scrollLeft+this._contentLeft,t),v=22,w=22,y=u>=v,S=d+i<=g.height-w;return this._fixedOverflowWidgets?{fitsAbove:y,aboveTop:Math.max(u,v),fitsBelow:S,belowTop:d,left:_}:{fitsAbove:y,aboveTop:r,fitsBelow:S,belowTop:o,left:m}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new F0(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){const t=r(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),i=this._secondaryAnchor.viewPosition?.lineNumber===this._primaryAnchor.viewPosition?.lineNumber?this._secondaryAnchor.viewPosition:null,n=r(i,this._affinity,this._lineHeight);return{primary:t,secondary:n};function r(o,a,l){if(!o)return null;const c=e.visibleRangeForPosition(o);if(!c)return null;const u=o.column===1&&a===3?0:c.left,d=e.getVerticalOffsetForLineNumber(o.lineNumber)-e.scrollTop;return new IO(d,u,l)}}_reduceAnchorCoordinates(e,t,i){if(!t)return e;const n=this._context.configuration.options.get(50);let r=t.left;return r<e.left?r=Math.max(r,e.left-i+n.typicalFullwidthCharacterWidth):r=Math.min(r,e.left+i-n.typicalFullwidthCharacterWidth),new IO(e.top,r,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const{primary:t,secondary:i}=this._getAnchorsCoordinates(e);if(!t)return{kind:"offViewport",preserveFocus:this.domNode.domNode.contains(this.domNode.domNode.ownerDocument.activeElement)};if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let o=null;if(typeof this._actual.beforeRender=="function"&&(o=_L(this._actual.beforeRender,this._actual)),o)this._cachedDomNodeOffsetWidth=o.width,this._cachedDomNodeOffsetHeight=o.height;else{const l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}const n=this._reduceAnchorCoordinates(t,i,this._cachedDomNodeOffsetWidth);let r;this.allowEditorOverflow?r=this._layoutBoxInPage(n,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):r=this._layoutBoxInViewport(n,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let o=1;o<=2;o++)for(const a of this._preference)if(a===1){if(!r)return null;if(o===2||r.fitsAbove)return{kind:"inViewport",coordinate:new F0(r.aboveTop,r.left),position:1}}else if(a===2){if(!r)return null;if(o===2||r.fitsBelow)return{kind:"inViewport",coordinate:new F0(r.belowTop,r.left),position:2}}else return this.allowEditorOverflow?{kind:"inViewport",coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new F0(n.top,n.left)),position:0}:{kind:"inViewport",coordinate:new F0(n.top,n.left),position:0};return null}onBeforeRender(e){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData||this._renderData.kind==="offViewport"){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this._renderData?.kind==="offViewport"&&this._renderData.preserveFocus?this.domNode.setTop(-1e3):this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&_L(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&_L(this._actual.afterRender,this._actual,this._renderData.position)}}class O0{constructor(e,t){this.modelPosition=e,this.viewPosition=t}}class F0{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}}class IO{constructor(e,t,i){this.top=e,this.left=t,this.height=i,this._anchorCoordinateBrand=void 0}}function _L(s,e,...t){try{return s.call(e,...t)}catch{return null}}class Mj extends Jf{constructor(e){super(),this._context=e;const t=this._context.configuration.options,i=t.get(146);this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new wi(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=new Set;for(const r of this._selections)t.add(r.positionLineNumber);const i=Array.from(t);i.sort((r,o)=>r-o),Rn(this._cursorLineNumbers,i)||(this._cursorLineNumbers=i,e=!0);const n=this._selections.every(r=>r.isEmpty());return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=[];for(let o=t;o<=i;o++){const a=o-t;n[a]=""}if(this._wordWrap){const o=this._renderOne(e,!1);for(const a of this._cursorLineNumbers){const l=this._context.viewModel.coordinatesConverter,c=l.convertViewPositionToModelPosition(new ce(a,1)).lineNumber,u=l.convertModelPositionToViewPosition(new ce(c,1)).lineNumber,d=l.convertModelPositionToViewPosition(new ce(c,this._context.viewModel.model.getLineMaxColumn(c))).lineNumber,g=Math.max(u,t),m=Math.min(d,i);for(let _=g;_<=m;_++){const v=_-t;n[v]=o}}}const r=this._renderOne(e,!0);for(const o of this._cursorLineNumbers){if(o<t||o>i)continue;const a=o-t;n[a]=r}this._renderData=n}render(e,t){if(!this._renderData)return"";const i=t-e;return i>=this._renderData.length?"":this._renderData[i]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class mme extends Mj{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class pme extends Mj{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}_u((s,e)=>{const t=s.getColor(nH);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||s.defines(uP)){const i=s.getColor(uP);i&&(e.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${i}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${i}; }`),Dm(s.type)&&(e.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}});class _me extends Jf{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let i=[],n=0;for(let l=0,c=t.length;l<c;l++){const u=t[l];u.options.className&&(i[n++]=u)}i=i.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const u=l.options.className,d=c.options.className;return u<d?-1:u>d?1:Q.compareRangesUsingStarts(l.range,c.range)});const r=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=[];for(let l=r;l<=o;l++){const c=l-r;a[c]=""}this._renderWholeLineDecorations(e,i,a),this._renderNormalDecorations(e,i,a),this._renderResult=a}_renderWholeLineDecorations(e,t,i){const n=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let o=0,a=t.length;o<a;o++){const l=t[o];if(!l.options.isWholeLine)continue;const c='<div class="cdr '+l.options.className+'" style="left:0;width:100%;"></div>',u=Math.max(l.range.startLineNumber,n),d=Math.min(l.range.endLineNumber,r);for(let g=u;g<=d;g++){const m=g-n;i[m]+=c}}}_renderNormalDecorations(e,t,i){const n=e.visibleRange.startLineNumber;let r=null,o=!1,a=null,l=!1;for(let c=0,u=t.length;c<u;c++){const d=t[c];if(d.options.isWholeLine)continue;const g=d.options.className,m=!!d.options.showIfCollapsed;let _=d.range;if(m&&_.endColumn===1&&_.endLineNumber!==_.startLineNumber&&(_=new Q(_.startLineNumber,_.startColumn,_.endLineNumber-1,this._context.viewModel.getLineMaxColumn(_.endLineNumber-1))),r===g&&o===m&&Q.areIntersectingOrTouching(a,_)){a=Q.plusRange(a,_);continue}r!==null&&this._renderNormalDecoration(e,a,r,l,o,n,i),r=g,o=m,a=_,l=d.options.shouldFillLineOnLineBreak??!1}r!==null&&this._renderNormalDecoration(e,a,r,l,o,n,i)}_renderNormalDecoration(e,t,i,n,r,o,a){const l=e.linesVisibleRangesForRange(t,i==="findMatch");if(l)for(let c=0,u=l.length;c<u;c++){const d=l[c];if(d.outsideRenderedLine)continue;const g=d.lineNumber-o;if(r&&d.ranges.length===1){const m=d.ranges[0];if(m.width<this._typicalHalfwidthCharacterWidth){const _=Math.round(m.left+m.width/2),v=Math.max(0,Math.round(_-this._typicalHalfwidthCharacterWidth/2));d.ranges[0]=new t4(v,this._typicalHalfwidthCharacterWidth)}}for(let m=0,_=d.ranges.length;m<_;m++){const v=n&&d.continuesOnNextLine&&_===1,w=d.ranges[m],y='<div class="cdr '+i+'" style="left:'+String(w.left)+"px;width:"+(v?"100%;":String(w.width)+"px;")+'"></div>';a[g]+=y}}}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class vme extends Zr{constructor(e,t,i,n){super(e);const r=this._context.configuration.options,o=r.get(104),a=r.get(75),l=r.get(40),c=r.get(107),u={listenOnDomNode:i.domNode,className:"editor-scrollable "+B3(e.theme.type),useShadows:!1,lazyRender:!0,vertical:o.vertical,horizontal:o.horizontal,verticalHasArrows:o.verticalHasArrows,horizontalHasArrows:o.horizontalHasArrows,verticalScrollbarSize:o.verticalScrollbarSize,verticalSliderSize:o.verticalSliderSize,horizontalScrollbarSize:o.horizontalScrollbarSize,horizontalSliderSize:o.horizontalSliderSize,handleMouseWheel:o.handleMouseWheel,alwaysConsumeMouseWheel:o.alwaysConsumeMouseWheel,arrowSize:o.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:o.scrollByPage};this.scrollbar=this._register(new T2(t.domNode,u,this._context.viewLayout.getScrollable())),rl.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=Qt(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const d=(g,m,_)=>{const v={};{const w=g.scrollTop;w&&(v.scrollTop=this._context.viewLayout.getCurrentScrollTop()+w,g.scrollTop=0)}if(_){const w=g.scrollLeft;w&&(v.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+w,g.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(v,1)};this._register(ge(i.domNode,"scroll",g=>d(i.domNode,!0,!0))),this._register(ge(t.domNode,"scroll",g=>d(t.domNode,!0,!1))),this._register(ge(n.domNode,"scroll",g=>d(n.domNode,!0,!1))),this._register(ge(this.scrollbarDomNode.domNode,"scroll",g=>d(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(146);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(73).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(104)||e.hasChanged(75)||e.hasChanged(40)){const t=this._context.configuration.options,i=t.get(104),n=t.get(75),r=t.get(40),o=t.get(107),a={vertical:i.vertical,horizontal:i.horizontal,verticalScrollbarSize:i.verticalScrollbarSize,horizontalScrollbarSize:i.horizontalScrollbarSize,scrollByPage:i.scrollByPage,handleMouseWheel:i.handleMouseWheel,mouseWheelScrollSensitivity:n,fastScrollSensitivity:r,scrollPredominantAxis:o};this.scrollbar.updateOptions(a)}return e.hasChanged(146)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+B3(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}class G6{constructor(e,t,i,n,r){this.startLineNumber=e,this.endLineNumber=t,this.className=i,this.tooltip=n,this._decorationToRenderBrand=void 0,this.zIndex=r??0}}class bme{constructor(e,t,i){this.className=e,this.zIndex=t,this.tooltip=i}}class wme{constructor(){this.decorations=[]}add(e){this.decorations.push(e)}getDecorations(){return this.decorations}}class Rj extends Jf{_render(e,t,i){const n=[];for(let a=e;a<=t;a++){const l=a-e;n[l]=new wme}if(i.length===0)return n;i.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let r=null,o=0;for(let a=0,l=i.length;a<l;a++){const c=i[a],u=c.className,d=c.zIndex;let g=Math.max(c.startLineNumber,e)-e;const m=Math.min(c.endLineNumber,t)-e;r===u?(g=Math.max(o+1,g),o=Math.max(o,m)):(r=u,o=m);for(let _=g;_<=o;_++)n[_].add(new bme(u,d,c.tooltip))}return n}}class Cme extends Zr{constructor(e){super(e),this._widgets={},this._context=e;const t=this._context.configuration.options,i=t.get(146);this.domNode=Qt(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){const t=Qt(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const i=this._widgets[e.getId()];return i.preference.lane===t.lane&&i.preference.zIndex===t.zIndex&&Q.equalsRange(i.preference.range,t.range)?!1:(i.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets[t]){const n=this._widgets[t].domNode.domNode;delete this._widgets[t],n.remove(),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){const i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=e.getDecorationsInViewport();for(const o of r){const a=o.options.glyphMarginClassName;if(!a)continue;const l=Math.max(o.range.startLineNumber,i),c=Math.min(o.range.endLineNumber,n),u=o.options.glyphMargin?.position??Ah.Center,d=o.options.zIndex??0;for(let g=l;g<=c;g++){const m=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new ce(g,0)),_=this._context.viewModel.glyphLanes.getLanesAtLine(m.lineNumber).indexOf(u);t.push(new yme(g,_,d,a))}}}_collectWidgetBasedGlyphRenderRequest(e,t){const i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;for(const r of Object.values(this._widgets)){const o=r.preference.range,{startLineNumber:a,endLineNumber:l}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(Q.lift(o));if(!a||!l||l<i||a>n)continue;const c=Math.max(a,i),u=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new ce(c,0)),d=this._context.viewModel.glyphLanes.getLanesAtLine(u.lineNumber).indexOf(r.preference.lane);t.push(new Sme(c,d,r.preference.zIndex,r))}}_collectSortedGlyphRenderRequests(e){const t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((i,n)=>i.lineNumber===n.lineNumber?i.laneIndex===n.laneIndex?i.zIndex===n.zIndex?n.type===i.type?i.type===0&&n.type===0?i.className<n.className?-1:1:0:n.type-i.type:n.zIndex-i.zIndex:i.laneIndex-n.laneIndex:i.lineNumber-n.lineNumber),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(const n of Object.values(this._widgets))n.renderInfo=null;const t=new cu(this._collectSortedGlyphRenderRequests(e)),i=[];for(;t.length>0;){const n=t.peek();if(!n)break;const r=t.takeWhile(a=>a.lineNumber===n.lineNumber&&a.laneIndex===n.laneIndex);if(!r||r.length===0)break;const o=r[0];if(o.type===0){const a=[];for(const l of r){if(l.zIndex!==o.zIndex||l.type!==o.type)break;(a.length===0||a[a.length-1]!==l.className)&&a.push(l.className)}i.push(o.accept(a.join(" ")))}else o.widget.renderInfo={lineNumber:o.lineNumber,laneIndex:o.laneIndex}}this._decorationGlyphsToRender=i}render(e){if(!this._glyphMargin){for(const i of Object.values(this._widgets))i.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;)this._managedDomNodes.pop()?.domNode.remove();return}const t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const i of Object.values(this._widgets))if(!i.renderInfo)i.domNode.setDisplay("none");else{const n=e.viewportData.relativeVerticalOffset[i.renderInfo.lineNumber-e.viewportData.startLineNumber],r=this._glyphMarginLeft+i.renderInfo.laneIndex*this._lineHeight;i.domNode.setDisplay("block"),i.domNode.setTop(n),i.domNode.setLeft(r),i.domNode.setWidth(t),i.domNode.setHeight(this._lineHeight)}for(let i=0;i<this._decorationGlyphsToRender.length;i++){const n=this._decorationGlyphsToRender[i],r=e.viewportData.relativeVerticalOffset[n.lineNumber-e.viewportData.startLineNumber],o=this._glyphMarginLeft+n.laneIndex*this._lineHeight;let a;i<this._managedDomNodes.length?a=this._managedDomNodes[i]:(a=Qt(document.createElement("div")),this._managedDomNodes.push(a),this.domNode.appendChild(a)),a.setClassName("cgmr codicon "+n.combinedClassName),a.setPosition("absolute"),a.setTop(r),a.setLeft(o),a.setWidth(t),a.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;)this._managedDomNodes.pop()?.domNode.remove()}}class yme{constructor(e,t,i,n){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.className=n,this.type=0}accept(e){return new xme(this.lineNumber,this.laneIndex,e)}}class Sme{constructor(e,t,i,n){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.widget=n,this.type=1}}class xme{constructor(e,t,i){this.lineNumber=e,this.laneIndex=t,this.combinedClassName=i}}class kme extends Jf{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,i=t.get(147),n=t.get(50);this._spaceWidth=n.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(147),n=t.get(50);return this._spaceWidth=n.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),!0}onCursorStateChanged(e){const i=e.selections[0].getPosition();return this._primaryPosition?.equals(i)?!1:(this._primaryPosition=i,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=e.scrollWidth,r=this._primaryPosition,o=this.getGuidesByLine(t,Math.min(i+1,this._context.viewModel.getLineCount()),r),a=[];for(let l=t;l<=i;l++){const c=l-t,u=o[c];let d="";const g=e.visibleRangeForPosition(new ce(l,1))?.left??0;for(const m of u){const _=m.column===-1?g+(m.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new ce(l,m.column)).left;if(_>n||this._maxIndentLeft>0&&_>this._maxIndentLeft)break;const v=m.horizontalLine?m.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",w=m.horizontalLine?(e.visibleRangeForPosition(new ce(l,m.horizontalLine.endColumn))?.left??_+this._spaceWidth)-_:this._spaceWidth;d+=`<div class="core-guide ${m.className} ${v}" style="left:${_}px;width:${w}px"></div>`}a[c]=d}this._renderResult=a}getGuidesByLine(e,t,i){const n=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?cf.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?cf.EnabledForActive:cf.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,r=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let o=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&i){const d=this._context.viewModel.getActiveIndentGuide(i.lineNumber,e,t);o=d.startLineNumber,a=d.endLineNumber,l=d.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),u=[];for(let d=e;d<=t;d++){const g=new Array;u.push(g);const m=n?n[d-e]:[],_=new cu(m),v=r?r[d-e]:0;for(let w=1;w<=v;w++){const y=(w-1)*c+1,S=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||m.length===0)&&o<=d&&d<=a&&w===l;g.push(..._.takeWhile(L=>L.visibleColumn<y)||[]);const k=_.peek();(!k||k.visibleColumn!==y||k.horizontalLine)&&g.push(new ef(y,-1,`core-guide-indent lvl-${(w-1)%30}`+(S?" indent-active":""),null,-1,-1))}g.push(..._.takeWhile(w=>!0)||[])}return u}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}function Og(s){if(!(s&&s.isTransparent()))return s}_u((s,e)=>{const t=[{bracketColor:oH,guideColor:Nle,guideColorActive:Ole},{bracketColor:aH,guideColor:Ile,guideColorActive:Fle},{bracketColor:lH,guideColor:Mle,guideColorActive:Ble},{bracketColor:cH,guideColor:Rle,guideColorActive:Wle},{bracketColor:uH,guideColor:Ale,guideColorActive:Vle},{bracketColor:hH,guideColor:Ple,guideColorActive:zle}],i=new CH,n=[{indentColor:fv,indentColorActive:gv},{indentColor:ule,indentColorActive:mle},{indentColor:hle,indentColorActive:ple},{indentColor:dle,indentColorActive:_le},{indentColor:fle,indentColorActive:vle},{indentColor:gle,indentColorActive:ble}],r=t.map(a=>{const l=s.getColor(a.bracketColor),c=s.getColor(a.guideColor),u=s.getColor(a.guideColorActive),d=Og(Og(c)??l?.transparent(.3)),g=Og(Og(u)??l);if(!(!d||!g))return{guideColor:d,guideColorActive:g}}).filter(Gm),o=n.map(a=>{const l=s.getColor(a.indentColor),c=s.getColor(a.indentColorActive),u=Og(l),d=Og(c);if(!(!u||!d))return{indentColor:u,indentColorActive:d}}).filter(Gm);if(r.length>0){for(let a=0;a<30;a++){const l=r[a%r.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${i.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${i.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${i.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${a} { --indent-color: ${l.indentColor}; --indent-color-active: ${l.indentColorActive}; }`)}e.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),e.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});class vL{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class Lme{constructor(){this._currentVisibleRange=new Q(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class Dme{constructor(e,t,i,n,r,o,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=i,this.endColumn=n,this.startScrollTop=r,this.stopScrollTop=o,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class Eme{constructor(e,t,i,n,r){this.minimalReveal=e,this.selections=t,this.startScrollTop=i,this.stopScrollTop=n,this.scrollType=r,this.type="selections";let o=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const u=t[l];o=Math.min(o,u.startLineNumber),a=Math.max(a,u.endLineNumber)}this.minLineNumber=o,this.maxLineNumber=a}}const zS=class zS extends Zr{constructor(e,t){super(e);const i=this._context.configuration,n=this._context.configuration.options,r=n.get(50),o=n.get(147);this._lineHeight=n.get(67),this._typicalHalfwidthCharacterWidth=r.typicalHalfwidthCharacterWidth,this._isViewportWrapping=o.isViewportWrapping,this._revealHorizontalRightPadding=n.get(101),this._cursorSurroundingLines=n.get(29),this._cursorSurroundingLinesStyle=n.get(30),this._canUseLayerHinting=!n.get(32),this._viewLineOptions=new CO(i,this._context.theme.type),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new Nj({createLine:()=>new jc(this._viewLineOptions)}),this.domNode=this._visibleLines.domNode,rl.write(this.domNode,8),this.domNode.setClassName(`view-lines ${zm}`),xs(this.domNode,r),this._maxLineWidth=0,this._asyncUpdateLineWidths=new ir(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new ir(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new Lme,this._horizontalRevealRequest=null,this._stickyScrollEnabled=n.get(116).enabled,this._maxNumberStickyLines=n.get(116).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(147)&&(this._maxLineWidth=0);const t=this._context.configuration.options,i=t.get(50),n=t.get(147);return this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=n.isViewportWrapping,this._revealHorizontalRightPadding=t.get(101),this._cursorSurroundingLines=t.get(29),this._cursorSurroundingLinesStyle=t.get(30),this._canUseLayerHinting=!t.get(32),this._stickyScrollEnabled=t.get(116).enabled,this._maxNumberStickyLines=t.get(116).maxLineCount,xs(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(146)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new CO(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=i;r<=n;r++)this._visibleLines.getVisibleLine(r).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let n=!1;for(let r=t;r<=i;r++)n=this._visibleLines.getVisibleLine(r).onSelectionChanged()||n;return n}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++)this._visibleLines.getVisibleLine(n).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new Dme(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new Eme(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const r=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(i,r),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const i=this._getViewLineDomNode(e);if(i===null)return null;const n=this._getLineNumberFor(i);if(n===-1||n<1||n>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(n)===1)return new ce(n,1);const r=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(n<r||n>o)return null;let a=this._visibleLines.getVisibleLine(n).getColumnOfNodeOffset(e,t);const l=this._context.viewModel.getLineMinColumn(n);return a<l&&(a=l),new ce(n,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===jc.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++){const r=this._visibleLines.getVisibleLine(n);if(e===r.getDomNode())return n}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();if(e<t||e>i)return-1;const n=new vL(this.domNode.domNode,this._textRangeRestingSpot),r=this._visibleLines.getVisibleLine(e).getWidth(n);return this._updateLineWidthsSlowIfDomDidLayout(n),r}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const i=e.endLineNumber,n=Q.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!n)return null;const r=[];let o=0;const a=new vL(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new ce(n.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),u=this._visibleLines.getEndLineNumber();for(let d=n.startLineNumber;d<=n.endLineNumber;d++){if(d<c||d>u)continue;const g=d===n.startLineNumber?n.startColumn:1,m=d!==n.endLineNumber,_=m?this._context.viewModel.getLineMaxColumn(d):n.endColumn,v=this._visibleLines.getVisibleLine(d).getVisibleRangesForRange(d,g,_,a);if(v){if(t&&d<i){const w=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new ce(d+1,1)).lineNumber,w!==l&&(v.ranges[v.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}r[o++]=new hge(v.outsideRenderedLine,d,t4.from(v.ranges),m)}}return this._updateLineWidthsSlowIfDomDidLayout(a),o===0?null:r}_visibleRangesForLineRange(e,t,i){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const n=new vL(this.domNode.domNode,this._textRangeRestingSpot),r=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,i,n);return this._updateLineWidthsSlowIfDomDidLayout(n),r}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new dge(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let n=1,r=!0;for(let o=t;o<=i;o++){const a=this._visibleLines.getVisibleLine(o);if(e&&!a.getWidthIsFast()){r=!1;continue}n=Math.max(n,a.getWidth(null))}return r&&t===1&&i===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(n),r}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=i;r<=n;r++){const o=this._visibleLines.getVisibleLine(r);if(o.needsMonospaceFontCheck()){const a=o.getWidth(null);a>t&&(t=a,e=r)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let r=i;r<=n;r++)this._visibleLines.getVisibleLine(r).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const i=this._horizontalRevealRequest;if(e.startLineNumber<=i.minLineNumber&&i.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const n=this._computeScrollLeftToReveal(i);n&&(this._isViewportWrapping||this._ensureMaxLineWidth(n.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:n.scrollLeft},i.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),xr&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=i;r<=n;r++)if(this._visibleLines.getVisibleLine(r).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,i,n,r,o){const a=e.top,l=e.height,c=a+l;let u,d,g;if(r&&r.length>0){let y=r[0].startLineNumber,S=r[0].endLineNumber;for(let k=1,L=r.length;k<L;k++){const T=r[k];y=Math.min(y,T.startLineNumber),S=Math.max(S,T.endLineNumber)}u=!1,d=this._context.viewLayout.getVerticalOffsetForLineNumber(y),g=this._context.viewLayout.getVerticalOffsetForLineNumber(S)+this._lineHeight}else if(n)u=!0,d=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),g=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight;else return-1;const m=(t==="mouse"||i)&&this._cursorSurroundingLinesStyle==="default";let _=0,v=0;if(m)i||(_=this._lineHeight);else{const y=l/this._lineHeight,S=Math.max(this._cursorSurroundingLines,this._stickyScrollEnabled?this._maxNumberStickyLines:0),k=Math.min(y/2,S);_=k*this._lineHeight,v=Math.max(0,k-1)*this._lineHeight}i||(o===0||o===4)&&(v+=this._lineHeight),d-=_,g+=v;let w;if(g-d>l){if(!u)return-1;w=d}else if(o===5||o===6)if(o===6&&a<=d&&g<=c)w=a;else{const y=Math.max(5*this._lineHeight,l*.2),S=d-y,k=g-l;w=Math.max(k,S)}else if(o===1||o===2)if(o===2&&a<=d&&g<=c)w=a;else{const y=(d+g)/2;w=Math.max(0,y-l/2)}else w=this._computeMinimumScrolling(a,c,d,g,o===3,o===4);return w}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),i=this._context.configuration.options.get(146),n=t.left,r=n+t.width-i.verticalScrollbarWidth;let o=1073741824,a=0;if(e.type==="range"){const c=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!c)return null;for(const u of c.ranges)o=Math.min(o,Math.round(u.left)),a=Math.max(a,Math.round(u.left+u.width))}else for(const c of e.selections){if(c.startLineNumber!==c.endLineNumber)return null;const u=this._visibleRangesForLineRange(c.startLineNumber,c.startColumn,c.endColumn);if(!u)return null;for(const d of u.ranges)o=Math.min(o,Math.round(d.left)),a=Math.max(a,Math.round(d.left+d.width))}return e.minimalReveal||(o=Math.max(0,o-zS.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),e.type==="selections"&&a-o>t.width?null:{scrollLeft:this._computeMinimumScrolling(n,r,o,a),maxHorizontalOffset:a}}_computeMinimumScrolling(e,t,i,n,r,o){e=e|0,t=t|0,i=i|0,n=n|0,r=!!r,o=!!o;const a=t-e;if(n-i<a){if(r)return i;if(o)return Math.max(0,n-a);if(i<e)return i;if(n>t)return Math.max(0,n-a)}else return i;return e}};zS.HORIZONTAL_EXTRA_PX=30;let Z6=zS;class Tme extends Rj{constructor(e){super(),this._context=e;const i=this._context.configuration.options.get(146);this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let n=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.linesDecorationsClassName,c=a.options.zIndex;l&&(i[n++]=new G6(a.range.startLineNumber,a.range.endLineNumber,l,a.options.linesDecorationsTooltip??null,c));const u=a.options.firstLineDecorationClassName;u&&(i[n++]=new G6(a.range.startLineNumber,a.range.startLineNumber,u,a.options.linesDecorationsTooltip??null,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),r=this._decorationsLeft.toString(),o=this._decorationsWidth.toString(),a='" style="left:'+r+"px;width:"+o+'px;"></div>',l=[];for(let c=t;c<=i;c++){const u=c-t,d=n[u].getDecorations();let g="";for(const m of d){let _='<div class="cldr '+m.className;m.tooltip!==null&&(_+='" title="'+m.tooltip),_+=a,g+=_}l[u]=g}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class Nme extends Rj{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let n=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.marginClassName,c=a.options.zIndex;l&&(i[n++]=new G6(a.range.startLineNumber,a.range.endLineNumber,l,null,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),r=[];for(let o=t;o<=i;o++){const a=o-t,l=n[a].getDecorations();let c="";for(const u of l)c+='<div class="cmdr '+u.className+'" style=""></div>';r[a]=c}this._renderResult=r}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}const nh=class nh{constructor(e,t,i,n){this._rgba8Brand=void 0,this.r=nh._clamp(e),this.g=nh._clamp(t),this.b=nh._clamp(i),this.a=nh._clamp(n)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}};nh.Empty=new nh(0,0,0,0);let ou=nh;const HS=class HS extends ve{static getInstance(){return this._INSTANCE||(this._INSTANCE=new HS),this._INSTANCE}constructor(){super(),this._onDidChange=new re,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(un.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const e=un.getColorMap();if(!e){this._colors=[ou.Empty],this._backgroundIsLight=!0;return}this._colors=[ou.Empty];for(let i=1;i<e.length;i++){const n=e[i].rgba;this._colors[i]=new ou(n.r,n.g,n.b,Math.round(n.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}};HS._INSTANCE=null;let By=HS;const Ime=(()=>{const s=[];for(let e=32;e<=126;e++)s.push(e);return s.push(65533),s})(),Mme=(s,e)=>(s-=32,s<0||s>96?e<=2?(s+96)%96:95:s);class A_{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=A_.soften(e,12/15),this.charDataLight=A_.soften(e,50/60)}static soften(e,t){const i=new Uint8ClampedArray(e.length);for(let n=0,r=e.length;n<r;n++)i[n]=TC(e[n]*t);return i}renderChar(e,t,i,n,r,o,a,l,c,u,d){const g=1*this.scale,m=2*this.scale,_=d?1:m;if(t+g>e.width||i+_>e.height){console.warn("bad render request outside image data");return}const v=u?this.charDataLight:this.charDataNormal,w=Mme(n,c),y=e.width*4,S=a.r,k=a.g,L=a.b,T=r.r-S,A=r.g-k,I=r.b-L,O=Math.max(o,l),F=e.data;let J=w*g*m,Y=i*y+t*4;for(let G=0;G<_;G++){let ie=Y;for(let Z=0;Z<g;Z++){const ue=v[J++]/255*(o/255);F[ie++]=S+T*ue,F[ie++]=k+A*ue,F[ie++]=L+I*ue,F[ie++]=O}Y+=y}}blockRenderChar(e,t,i,n,r,o,a,l){const c=1*this.scale,u=2*this.scale,d=l?1:u;if(t+c>e.width||i+d>e.height){console.warn("bad render request outside image data");return}const g=e.width*4,m=.5*(r/255),_=o.r,v=o.g,w=o.b,y=n.r-_,S=n.g-v,k=n.b-w,L=_+y*m,T=v+S*m,A=w+k*m,I=Math.max(r,a),O=e.data;let F=i*g+t*4;for(let J=0;J<d;J++){let Y=F;for(let G=0;G<c;G++)O[Y++]=L,O[Y++]=T,O[Y++]=A,O[Y++]=I;F+=g}}}const MO={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},RO=s=>{const e=new Uint8ClampedArray(s.length/2);for(let t=0;t<s.length;t+=2)e[t>>1]=MO[s[t]]<<4|MO[s[t+1]]&15;return e},AO={1:Ym(()=>RO("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:Ym(()=>RO("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class k1{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let i;return AO[e]?i=new A_(AO[e](),e):i=k1.createFromSampleData(k1.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=i,i}static createSampleData(e){const t=document.createElement("canvas"),i=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",i.fillStyle="#ffffff",i.font=`bold 16px ${e}`,i.textBaseline="middle";let n=0;for(const r of Ime)i.fillText(String.fromCharCode(r),n,16/2),n+=10;return i.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const n=k1._downsample(e,t);return new A_(n,t)}static _downsampleChar(e,t,i,n,r){const o=1*r,a=2*r;let l=n,c=0;for(let u=0;u<a;u++){const d=u/a*16,g=(u+1)/a*16;for(let m=0;m<o;m++){const _=m/o*10,v=(m+1)/o*10;let w=0,y=0;for(let k=d;k<g;k++){const L=t+Math.floor(k)*3840,T=1-(k-Math.floor(k));for(let A=_;A<v;A++){const I=1-(A-Math.floor(A)),O=L+Math.floor(A)*4,F=I*T;y+=F,w+=e[O]*e[O+3]/255*F}}const S=w/y;c=Math.max(c,S),i[l++]=TC(S)}}return c}static _downsample(e,t){const i=2*t*1*t,n=i*96,r=new Uint8ClampedArray(n);let o=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,r,o,t)),o+=i,a+=10*4;if(l>0){const c=255/l;for(let u=0;u<n;u++)r[u]*=c}return r}}const Rme=$r?'"Segoe WPC", "Segoe UI", sans-serif':qt?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif',Ame=140,Pme=2;class Hm{constructor(e,t,i){const n=e.options,r=n.get(144),o=n.get(146),a=o.minimap,l=n.get(50),c=n.get(73);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=n.get(106),this.paddingTop=n.get(84).top,this.paddingBottom=n.get(84).bottom,this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=r,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=n.get(67),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=o.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=Rme,this.sectionHeaderFontSize=c.sectionHeaderFontSize*r,this.sectionHeaderLetterSpacing=c.sectionHeaderLetterSpacing,this.sectionHeaderFontColor=Hm._getSectionHeaderColor(t,i.getColor(1)),this.charRenderer=Ym(()=>k1.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=i.getColor(2),this.backgroundColor=Hm._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=Hm._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const i=e.getColor(sne);return i?new ou(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(rne);return t?ou._clamp(Math.round(255*t.rgba.a)):255}static _getSectionHeaderColor(e,t){const i=e.getColor(nv);return i?new ou(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.sectionHeaderFontSize===e.sectionHeaderFontSize&&this.sectionHeaderLetterSpacing===e.sectionHeaderLetterSpacing&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class L1{constructor(e,t,i,n,r,o,a,l,c){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=i,this._computedSliderRatio=n,this.sliderTop=r,this.sliderHeight=o,this.topPaddingLineCount=a,this.startLineNumber=l,this.endLineNumber=c}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumber,e.endLineNumber);return t>i?null:[t,i]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,i,n,r,o,a,l,c,u,d){const g=e.pixelRatio,m=e.minimapLineHeight,_=Math.floor(e.canvasInnerHeight/m),v=e.lineHeight;if(e.minimapHeightIsEditorHeight){let A=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(A+=Math.max(0,r-e.lineHeight-e.paddingBottom));const I=Math.max(1,Math.floor(r*r/A)),O=Math.max(0,e.minimapHeight-I),F=O/(u-r),J=c*F,Y=O>0,G=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),ie=Math.floor(e.paddingTop/e.lineHeight);return new L1(c,u,Y,F,J,I,ie,1,Math.min(a,G))}let w;if(o&&i!==a){const A=i-t+1;w=Math.floor(A*m/g)}else{const A=r/v;w=Math.floor(A*m/g)}const y=Math.floor(e.paddingTop/v);let S=Math.floor(e.paddingBottom/v);if(e.scrollBeyondLastLine){const A=r/v;S=Math.max(S,A-1)}let k;if(S>0){const A=r/v;k=(y+a+S-A-1)*m/g}else k=Math.max(0,(y+a)*m/g-w);k=Math.min(e.minimapHeight-w,k);const L=k/(u-r),T=c*L;if(_>=y+a+S){const A=k>0;return new L1(c,u,A,L,T,w,y,1,a)}else{let A;t>1?A=t+y:A=Math.max(1,c/v);let I,O=Math.max(1,Math.floor(A-T*g/m));O<y?(I=y-O+1,O=1):(I=0,O=Math.max(1,O-y)),d&&d.scrollHeight===u&&(d.scrollTop>c&&(O=Math.min(O,d.startLineNumber),I=Math.max(I,d.topPaddingLineCount)),d.scrollTop<c&&(O=Math.max(O,d.startLineNumber),I=Math.min(I,d.topPaddingLineCount)));const F=Math.min(a,O-I+_-1),J=(c-n)/v;let Y;return c>=e.paddingTop?Y=(t-O+I+J)*m/g:Y=c/e.paddingTop*(I+J)*m/g,new L1(c,u,!0,L,Y,w,I,O,F)}}}const jS=class jS{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}};jS.INVALID=new jS(-1);let Wy=jS;class PO{constructor(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new Tj({createLine:()=>Wy.INVALID}),this._renderedLines._set(e.startLineNumber,i)}linesEquals(e){if(!this.scrollEquals(e))return!1;const i=this._renderedLines._get().lines;for(let n=0,r=i.length;n<r;n++)if(i[n].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class h9{constructor(e,t,i,n){this._backgroundFillData=h9._createBackgroundFillData(t,i,n),this._buffers=[e.createImageData(t,i),e.createImageData(t,i)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,i){const n=i.r,r=i.g,o=i.b,a=i.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let u=0;u<t;u++)for(let d=0;d<e;d++)l[c]=n,l[c+1]=r,l[c+2]=o,l[c+3]=a,c+=4;return l}}class P_{static compute(e,t,i){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const{minimapLineCount:n}=wm.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),r=t/n,o=r/2;if(!i||i.minimapLines.length===0){const w=[];if(w[0]=1,n>1){for(let y=0,S=n-1;y<S;y++)w[y]=Math.round(y*r+o);w[n-1]=t}return[new P_(r,w),[]]}const a=i.minimapLines,l=a.length,c=[];let u=0,d=0,g=1;const m=10;let _=[],v=null;for(let w=0;w<n;w++){const y=Math.max(g,Math.round(w*r)),S=Math.max(y,Math.round((w+1)*r));for(;u<l&&a[u]<y;){if(_.length<m){const L=u+1+d;v&&v.type==="deleted"&&v._oldIndex===u-1?v.deleteToLineNumber++:(v={type:"deleted",_oldIndex:u,deleteFromLineNumber:L,deleteToLineNumber:L},_.push(v)),d--}u++}let k;if(u<l&&a[u]<=S)k=a[u],u++;else if(w===0?k=1:w+1===n?k=t:k=Math.round(w*r+o),_.length<m){const L=u+1+d;v&&v.type==="inserted"&&v._i===w-1?v.insertToLineNumber++:(v={type:"inserted",_i:w,insertFromLineNumber:L,insertToLineNumber:L},_.push(v)),d++}c[w]=k,g=k}if(_.length<m)for(;u<l;){const w=u+1+d;v&&v.type==="deleted"&&v._oldIndex===u-1?v.deleteToLineNumber++:(v={type:"deleted",_oldIndex:u,deleteFromLineNumber:w,deleteToLineNumber:w},_.push(v)),d--,u++}else _=[{type:"flush"}];return[new P_(r,c),_]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e)-1;for(;i>0&&this.minimapLines[i-1]>=e;)i--;let n=this.modelLineToMinimapLine(t)-1;for(;n+1<this.minimapLines.length&&this.minimapLines[n+1]<=t;)n++;if(i===n){const r=this.minimapLines[i];if(r<e||r>t)return null}return[i+1,n+1]}decorationLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e),n=this.modelLineToMinimapLine(t);return e!==t&&n===i&&(n===this.minimapLines.length?i>1&&i--:n++),[i,n]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let i=this.minimapLines.length,n=0;for(let r=this.minimapLines.length-1;r>=0&&!(this.minimapLines[r]<e.fromLineNumber);r--)this.minimapLines[r]<=e.toLineNumber?(this.minimapLines[r]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,r),n=Math.max(n,r)):this.minimapLines[r]-=t;return[i,n]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}}class Ome extends Zr{constructor(e){super(e),this._sectionHeaderCache=new iv(10,1.5),this.tokensColorTracker=By.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new Hm(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=P_.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new om(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new Hm(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,i]=this._samplingState.onLinesDeleted(e);return t<=i&&this._actual.onLinesChanged(t+1,i-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const i of e.ranges){const n=this._samplingState.modelLineRangeToMinimapLineRange(i.fromLineNumber,i.toLineNumber);n&&t.push({fromLineNumber:n[0],toLineNumber:n[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));const n={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(n)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,i]=P_.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const n of i)switch(n.type){case"deleted":this._actual.onLinesDeleted(n.deleteFromLineNumber,n.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(n.insertFromLineNumber,n.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,i){if(this._samplingState){const n=[];for(let r=0,o=t-e+1;r<o;r++)i[r]?n[r]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+r-1]):n[r]=null;return n}return this._context.viewModel.getMinimapLinesRenderingData(e,t,i).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,i]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new wi(t,e.startColumn,i,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){const i=this._getMinimapDecorationsInViewport(e,t).filter(n=>!n.options.minimap?.sectionHeaderStyle);if(this._samplingState){const n=[];for(const r of i){if(!r.options.minimap)continue;const o=r.range,a=this._samplingState.modelLineToMinimapLine(o.startLineNumber),l=this._samplingState.modelLineToMinimapLine(o.endLineNumber);n.push(new pj(new Q(a,o.startColumn,l,o.endColumn),r.options))}return n}return i}getSectionHeaderDecorationsInViewport(e,t){const i=this.options.minimapLineHeight,r=this.options.sectionHeaderFontSize/i;return e=Math.floor(Math.max(1,e-r)),this._getMinimapDecorationsInViewport(e,t).filter(o=>!!o.options.minimap?.sectionHeaderStyle)}_getMinimapDecorationsInViewport(e,t){let i;if(this._samplingState){const n=this._samplingState.minimapLines[e-1],r=this._samplingState.minimapLines[t-1];i=new Q(n,1,r,this._context.viewModel.getLineMaxColumn(r))}else i=new Q(e,1,t,this._context.viewModel.getLineMaxColumn(t));return this._context.viewModel.getMinimapDecorationsInRange(i)}getSectionHeaderText(e,t){const i=e.options.minimap?.sectionHeaderText;if(!i)return null;const n=this._sectionHeaderCache.get(i);if(n)return n;const r=t(i);return this._sectionHeaderCache.set(i,r),r}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new Q(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class om extends ve{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(_A),this._domNode=Qt(document.createElement("div")),rl.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=Qt(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=Qt(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=Qt(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=Qt(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=Qt(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=Un(this._domNode.domNode,Ne.POINTER_DOWN,i=>{if(i.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(i.button===0&&this._lastRenderData){const c=$o(this._slider.domNode),u=c.top+c.height/2;this._startSliderDragging(i,u,this._lastRenderData.renderedLayout)}return}const r=this._model.options.minimapLineHeight,o=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*i.offsetY;let l=Math.floor(o/r)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new E2,this._sliderPointerDownListener=Un(this._slider.domNode,Ne.POINTER_DOWN,i=>{i.preventDefault(),i.stopPropagation(),i.button===0&&this._lastRenderData&&this._startSliderDragging(i,i.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=rr.addTarget(this._domNode.domNode),this._sliderTouchStartListener=ge(this._domNode.domNode,xi.Start,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(i))},{passive:!1}),this._sliderTouchMoveListener=ge(this._domNode.domNode,xi.Change,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(i)},{passive:!1}),this._sliderTouchEndListener=Un(this._domNode.domNode,xi.End,i=>{i.preventDefault(),i.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,i){if(!e.target||!(e.target instanceof Element))return;const n=e.pageX;this._slider.toggleClassName("active",!0);const r=(o,a)=>{const l=$o(this._domNode.domNode),c=Math.min(Math.abs(a-n),Math.abs(a-l.left),Math.abs(a-l.left-l.width));if($r&&c>Ame){this._model.setScrollTop(i.scrollTop);return}const u=o-t;this._model.setScrollTop(i.getDesiredScrollTopFromDelta(u))};e.pageY!==t&&r(e.pageY,n),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>r(o.pageY,o.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new h9(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){return this._lastRenderData?.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData?.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(_A),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const i=L1.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(i.sliderNeeded?"block":"none"),this._slider.setTop(i.sliderTop),this._slider.setHeight(i.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(i.sliderHeight),this.renderDecorations(i),this._lastRenderData=this.renderLines(i)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(Q.compareRangesUsingStarts);const i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);i.sort((g,m)=>(g.options.zIndex||0)-(m.options.zIndex||0));const{canvasInnerWidth:n,canvasInnerHeight:r}=this._model.options,o=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,n,r);const u=new OO(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,u,e,o),this._renderDecorationsLineHighlights(c,i,u,e,o);const d=new OO(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,d,e,o,l,a,n),this._renderDecorationsHighlights(c,i,d,e,o,l,a,n),this._renderSectionHeaders(e)}}_renderSelectionLineHighlights(e,t,i,n,r){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let o=0,a=0;for(const l of t){const c=n.intersectWithViewport(l);if(!c)continue;const[u,d]=c;for(let _=u;_<=d;_++)i.set(_,!0);const g=n.getYForLineNumber(u,r),m=n.getYForLineNumber(d,r);a>=g||(a>o&&e.fillRect(Cl,o,e.canvas.width,a-o),o=g),a=m}a>o&&e.fillRect(Cl,o,e.canvas.width,a-o)}_renderDecorationsLineHighlights(e,t,i,n,r){const o=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==1)continue;const u=n.intersectWithViewport(l.range);if(!u)continue;const[d,g]=u,m=c.getColor(this._theme.value);if(!m||m.isTransparent())continue;let _=o.get(m.toString());_||(_=m.transparent(.5).toString(),o.set(m.toString(),_)),e.fillStyle=_;for(let v=d;v<=g;v++){if(i.has(v))continue;i.set(v,!0);const w=n.getYForLineNumber(d,r);e.fillRect(Cl,w,e.canvas.width,r)}}}_renderSelectionsHighlights(e,t,i,n,r,o,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const u=n.intersectWithViewport(c);if(!u)continue;const[d,g]=u;for(let m=d;m<=g;m++)this.renderDecorationOnLine(e,i,c,this._selectionColor,n,m,r,r,o,a,l)}}_renderDecorationsHighlights(e,t,i,n,r,o,a,l){for(const c of t){const u=c.options.minimap;if(!u)continue;const d=n.intersectWithViewport(c.range);if(!d)continue;const[g,m]=d,_=u.getColor(this._theme.value);if(!(!_||_.isTransparent()))for(let v=g;v<=m;v++)switch(u.position){case 1:this.renderDecorationOnLine(e,i,c.range,_,n,v,r,r,o,a,l);continue;case 2:{const w=n.getYForLineNumber(v,r);this.renderDecoration(e,_,2,w,Pme,r);continue}}}}renderDecorationOnLine(e,t,i,n,r,o,a,l,c,u,d){const g=r.getYForLineNumber(o,l);if(g+a<0||g>this._model.options.canvasInnerHeight)return;const{startLineNumber:m,endLineNumber:_}=i,v=m===o?i.startColumn:1,w=_===o?i.endColumn:this._model.getLineMaxColumn(o),y=this.getXOffsetForPosition(t,o,v,c,u,d),S=this.getXOffsetForPosition(t,o,w,c,u,d);this.renderDecoration(e,n,y,g,S-y,a)}getXOffsetForPosition(e,t,i,n,r,o){if(i===1)return Cl;if((i-1)*r>=o)return o;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[Cl];let u=Cl;for(let d=1;d<c.length+1;d++){const g=c.charCodeAt(d-1),m=g===9?n*r:Ih(g)?2*r:r,_=u+m;if(_>=o){l[d]=o;break}l[d]=_,u=_}e.set(t,l)}return i-1<l.length?l[i-1]:o}renderDecoration(e,t,i,n,r,o){e.fillStyle=t&&t.toString()||"",e.fillRect(i,n,r,o)}_renderSectionHeaders(e){const t=this._model.options.minimapLineHeight,i=this._model.options.sectionHeaderFontSize,n=this._model.options.sectionHeaderLetterSpacing,r=i*1.5,{canvasInnerWidth:o}=this._model.options,a=this._model.options.backgroundColor,l=`rgb(${a.r} ${a.g} ${a.b} / .7)`,c=this._model.options.sectionHeaderFontColor,u=`rgb(${c.r} ${c.g} ${c.b})`,d=u,g=this._decorationsCanvas.domNode.getContext("2d");g.letterSpacing=n+"px",g.font="500 "+i+"px "+this._model.options.sectionHeaderFontFamily,g.strokeStyle=d,g.lineWidth=.2;const m=this._model.getSectionHeaderDecorationsInViewport(e.startLineNumber,e.endLineNumber);m.sort((v,w)=>v.range.startLineNumber-w.range.startLineNumber);const _=om._fitSectionHeader.bind(null,g,o-Cl);for(const v of m){const w=e.getYForLineNumber(v.range.startLineNumber,t)+i,y=w-i,S=y+2,k=this._model.getSectionHeaderText(v,_);om._renderSectionLabel(g,k,v.options.minimap?.sectionHeaderStyle===2,l,u,o,y,r,w,S)}}static _fitSectionHeader(e,t,i){if(!i)return i;const n="…",r=e.measureText(i).width,o=e.measureText(n).width;if(r<=t||r<=o)return i;const a=i.length,l=r/i.length,c=Math.floor((t-o)/l)-1;let u=Math.ceil(c/2);for(;u>0&&/\s/.test(i[u-1]);)--u;return i.substring(0,u)+n+i.substring(a-(c-u))}static _renderSectionLabel(e,t,i,n,r,o,a,l,c,u){t&&(e.fillStyle=n,e.fillRect(0,a,o,l),e.fillStyle=r,e.fillText(t,Cl,c)),i&&(e.beginPath(),e.moveTo(0,u),e.lineTo(o,u),e.closePath(),e.stroke())}renderLines(e){const t=e.startLineNumber,i=e.endLineNumber,n=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const ue=this._lastRenderData._get();return new PO(e,ue.imageData,ue.lines)}const r=this._getBuffer();if(!r)return null;const[o,a,l]=om._renderUntouchedLines(r,e.topPaddingLineCount,t,i,n,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,i,l),u=this._model.getOptions().tabSize,d=this._model.options.defaultBackgroundColor,g=this._model.options.backgroundColor,m=this._model.options.foregroundAlpha,_=this._model.tokensColorTracker,v=_.backgroundIsLight(),w=this._model.options.renderMinimap,y=this._model.options.charRenderer(),S=this._model.options.fontScale,k=this._model.options.minimapCharWidth,T=(w===1?2:3)*S,A=n>T?Math.floor((n-T)/2):0,I=g.a/255,O=new ou(Math.round((g.r-d.r)*I+d.r),Math.round((g.g-d.g)*I+d.g),Math.round((g.b-d.b)*I+d.b),255);let F=e.topPaddingLineCount*n;const J=[];for(let ue=0,be=i-t+1;ue<be;ue++)l[ue]&&om._renderLine(r,O,g.a,v,w,k,_,m,y,F,A,u,c[ue],S,n),J[ue]=new Wy(F),F+=n;const Y=o===-1?0:o,ie=(a===-1?r.height:a)-Y;return this._canvas.domNode.getContext("2d").putImageData(r,0,0,0,Y,r.width,ie),new PO(e,r,J)}static _renderUntouchedLines(e,t,i,n,r,o){const a=[];if(!o){for(let F=0,J=n-i+1;F<J;F++)a[F]=!0;return[-1,-1,a]}const l=o._get(),c=l.imageData.data,u=l.rendLineNumberStart,d=l.lines,g=d.length,m=e.width,_=e.data,v=(n-i+1)*r*m*4;let w=-1,y=-1,S=-1,k=-1,L=-1,T=-1,A=t*r;for(let F=i;F<=n;F++){const J=F-i,Y=F-u,G=Y>=0&&Y<g?d[Y].dy:-1;if(G===-1){a[J]=!0,A+=r;continue}const ie=G*m*4,Z=(G+r)*m*4,ue=A*m*4,be=(A+r)*m*4;k===ie&&T===ue?(k=Z,T=be):(S!==-1&&(_.set(c.subarray(S,k),L),w===-1&&S===0&&S===L&&(w=k),y===-1&&k===v&&S===L&&(y=S)),S=ie,k=Z,L=ue,T=be),a[J]=!1,A+=r}S!==-1&&(_.set(c.subarray(S,k),L),w===-1&&S===0&&S===L&&(w=k),y===-1&&k===v&&S===L&&(y=S));const I=w===-1?-1:w/(m*4),O=y===-1?-1:y/(m*4);return[I,O,a]}static _renderLine(e,t,i,n,r,o,a,l,c,u,d,g,m,_,v){const w=m.content,y=m.tokens,S=e.width-o,k=v===1;let L=Cl,T=0,A=0;for(let I=0,O=y.getCount();I<O;I++){const F=y.getEndOffset(I),J=y.getForeground(I),Y=a.getColor(J);for(;T<F;T++){if(L>S)return;const G=w.charCodeAt(T);if(G===9){const ie=g-(T+A)%g;A+=ie-1,L+=ie*o}else if(G===32)L+=o;else{const ie=Ih(G)?2:1;for(let Z=0;Z<ie;Z++)if(r===2?c.blockRenderChar(e,L,u+d,Y,l,t,i,k):c.renderChar(e,L,u+d,G,Y,l,t,i,_,n,k),L+=o,L>S)return}}}}}class OO{constructor(e,t,i){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=i,this._values=[];for(let n=0,r=this._endLineNumber-this._startLineNumber+1;n<r;n++)this._values[n]=i}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}class Fme extends Zr{constructor(e,t){super(e),this._viewDomNode=t;const n=this._context.configuration.options.get(146);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=Qt(document.createElement("div")),rl.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=Qt(document.createElement("div")),rl.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,!0}addWidget(e){const t=Qt(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const i=this._widgets[e.getId()],n=t?t.preference:null,r=t?.stackOridinal;return i.preference===n&&i.stack===r?(this._updateMaxMinWidth(),!1):(i.preference=n,i.stack=r,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t].domNode.domNode;delete this._widgets[t],n.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){let e=0;const t=Object.keys(this._widgets);for(let i=0,n=t.length;i<n;i++){const r=t[i],a=this._widgets[r].widget.getMinContentWidthInPx?.();typeof a<"u"&&(e=Math.max(e,a))}this._context.viewLayout.setOverlayWidgetsMinWidth(e)}_renderWidget(e,t){const i=e.domNode;if(e.preference===null){i.setTop("");return}const n=2*this._verticalScrollbarWidth+this._minimapWidth;if(e.preference===0||e.preference===1){if(e.preference===1){const r=i.domNode.clientHeight;i.setTop(this._editorHeight-r-2*this._horizontalScrollbarHeight)}else i.setTop(0);e.stack!==void 0?(i.setTop(t[e.preference]),t[e.preference]+=i.domNode.clientWidth):i.setRight(n)}else if(e.preference===2)i.domNode.style.right="50%",e.stack!==void 0?(i.setTop(t[2]),t[2]+=i.domNode.clientHeight):i.setTop(0);else{const{top:r,left:o}=e.preference;if(this._context.configuration.options.get(42)&&e.widget.allowEditorOverflow){const l=this._viewDomNodeRect;i.setTop(r+l.top),i.setLeft(o+l.left),i.setPosition("fixed")}else i.setTop(r),i.setLeft(o),i.setPosition("absolute")}}prepareRender(e){this._viewDomNodeRect=$o(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets),i=Array.from({length:3},()=>0);t.sort((n,r)=>(this._widgets[n].stack||0)-(this._widgets[r].stack||0));for(let n=0,r=t.length;n<r;n++){const o=t[n];this._renderWidget(this._widgets[o],i)}}}let Bme=class{constructor(e,t){const i=e.options;this.lineHeight=i.get(67),this.pixelRatio=i.get(144),this.overviewRulerLanes=i.get(83),this.renderBorder=i.get(82);const n=t.getColor(yle);this.borderColor=n?n.toString():null,this.hideCursor=i.get(59);const r=t.getColor(H2);this.cursorColorSingle=r?r.transparent(.7).toString():null;const o=t.getColor(sH);this.cursorColorPrimary=o?o.transparent(.7).toString():null;const a=t.getColor(rH);this.cursorColorSecondary=a?a.transparent(.7).toString():null,this.themeType=t.type;const l=i.get(73),c=l.enabled,u=l.side,d=t.getColor(Sle),g=un.getDefaultBackground();d?this.backgroundColor=d:c&&u==="right"?this.backgroundColor=g:this.backgroundColor=null;const _=i.get(146).overviewRuler;this.top=_.top,this.right=_.right,this.domWidth=_.width,this.domHeight=_.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[v,w]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=v,this.w=w}_initLanes(e,t,i){const n=t-e;if(i>=3){const r=Math.floor(n/3),o=Math.floor(n/3),a=n-r-o,l=e,c=l+r,u=l+r+a;return[[0,l,c,l,u,l,c,l],[0,r,a,r+a,o,r+a+o,a+o,r+a+o]]}else if(i===2){const r=Math.floor(n/2),o=n-r,a=e,l=a+r;return[[0,a,a,a,l,a,a,a],[0,r,r,r,o,r+o,r+o,r+o]]}else{const r=e,o=n;return[[0,r,r,r,r,r,r,r],[0,o,o,o,o,o,o,o]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColorSingle===e.cursorColorSingle&&this.cursorColorPrimary===e.cursorColorPrimary&&this.cursorColorSecondary===e.cursorColorSecondary&&this.themeType===e.themeType&&Le.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}};class Wme extends Zr{constructor(e){super(e),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=Qt(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=un.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[{position:new ce(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new Bme(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++){let n=this._settings.cursorColorSingle;i>1&&(n=t===0?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:e.selections[t].getPosition(),color:n})}return this._cursorPositions.sort((t,i)=>ce.compare(t.position,i.position)),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return e.affectsOverviewRuler?this._markRenderingIsMaybeNeeded():!1}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return e.scrollHeightChanged?this._markRenderingIsNeeded():!1}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){const e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(e?Le.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}const t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(T_.compareByRenderingProps),this._actualShouldRender===1&&!T_.equalsArr(this._renderedDecorations,t)&&(this._actualShouldRender=2),this._actualShouldRender===1&&!Rn(this._renderedCursorPositions,this._cursorPositions,(_,v)=>_.position.lineNumber===v.position.lineNumber&&_.color===v.color)&&(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const i=this._settings.canvasWidth,n=this._settings.canvasHeight,r=this._settings.lineHeight,o=this._context.viewLayout,a=this._context.viewLayout.getScrollHeight(),l=n/a,c=6*this._settings.pixelRatio|0,u=c/2|0,d=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(d.fillStyle=Le.Format.CSS.formatHexA(e),d.fillRect(0,0,i,n)):(d.clearRect(0,0,i,n),d.fillStyle=Le.Format.CSS.formatHexA(e),d.fillRect(0,0,i,n)):d.clearRect(0,0,i,n);const g=this._settings.x,m=this._settings.w;for(const _ of t){const v=_.color,w=_.data;d.fillStyle=v;let y=0,S=0,k=0;for(let L=0,T=w.length/3;L<T;L++){const A=w[3*L],I=w[3*L+1],O=w[3*L+2];let F=o.getVerticalOffsetForLineNumber(I)*l|0,J=(o.getVerticalOffsetForLineNumber(O)+r)*l|0;if(J-F<c){let G=(F+J)/2|0;G<u?G=u:G+u>n&&(G=n-u),F=G-u,J=G+u}F>k+1||A!==y?(L!==0&&d.fillRect(g[y],S,m[y],k-S),y=A,S=F,k=J):J>k&&(k=J)}d.fillRect(g[y],S,m[y],k-S)}if(!this._settings.hideCursor){const _=2*this._settings.pixelRatio|0,v=_/2|0,w=this._settings.x[7],y=this._settings.w[7];let S=-100,k=-100,L=null;for(let T=0,A=this._cursorPositions.length;T<A;T++){const I=this._cursorPositions[T].color;if(!I)continue;const O=this._cursorPositions[T].position;let F=o.getVerticalOffsetForLineNumber(O.lineNumber)*l|0;F<v?F=v:F+v>n&&(F=n-v);const J=F-v,Y=J+_;J>k+1||I!==L?(T!==0&&L&&d.fillRect(w,S,y,k-S),S=J,k=Y):Y>k&&(k=Y),L=I,d.fillStyle=I}L&&d.fillRect(w,S,y,k-S)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(d.beginPath(),d.lineWidth=1,d.strokeStyle=this._settings.borderColor,d.moveTo(0,0),d.lineTo(0,n),d.moveTo(1,0),d.lineTo(i,0),d.stroke())}}class FO{constructor(e,t,i){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=i|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class Aj{constructor(e,t,i,n){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=i,this.color=n,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class Vme{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(Aj.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),i=Math.floor(this.getCanvasHeight()),n=Math.floor(this._outerHeight),r=i/n,o=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const u=this._zones[l];if(!e){const L=u.getColorZones();if(L){a.push(L);continue}}const d=this._getVerticalOffsetForLine(u.startLineNumber),g=u.heightInLines===0?this._getVerticalOffsetForLine(u.endLineNumber)+t:d+u.heightInLines*t,m=Math.floor(r*d),_=Math.floor(r*g);let v=Math.floor((m+_)/2),w=_-v;w<o&&(w=o),v-w<0&&(v=w),v+w>i&&(v=i-w);const y=u.color;let S=this._color2Id[y];S||(S=++this._lastAssignedId,this._color2Id[y]=S,this._id2Color[S]=y);const k=new FO(v-w,v+w,S);u.setColorZone(k),a.push(k)}return this._colorZonesInvalid=!1,a.sort(FO.compare),a}}class zme extends pv{constructor(e,t){super(),this._context=e;const i=this._context.configuration.options;this._domNode=Qt(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new Vme(n=>this._context.viewLayout.getVerticalOffsetForLineNumber(n)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(67)),this._zoneManager.setPixelRatio(i.get(144)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(67)&&(this._zoneManager.setLineHeight(t.get(67)),this._render()),e.hasChanged(144)&&(this._zoneManager.setPixelRatio(t.get(144)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),n=this._zoneManager.getId2Color(),r=this._domNode.domNode.getContext("2d");return r.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(r,i,n,e),!0}_renderOneLane(e,t,i,n){let r=0,o=0,a=0;for(const l of t){const c=l.colorId,u=l.from,d=l.to;c!==r?(e.fillRect(0,o,n,a-o),r=c,e.fillStyle=i[r],o=u,a=d):a>=u?a=Math.max(a,d):(e.fillRect(0,o,n,a-o),o=u,a=d)}e.fillRect(0,o,n,a-o)}}class Hme extends Zr{constructor(e){super(e),this.domNode=Qt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:n}=this._context.viewModel.model.getOptions(),r=n;let o=t-e;for(;o>0;){const a=Qt(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(r),this.domNode.appendChild(a),this._renderedRulers.push(a),o--}return}let i=e-t;for(;i>0;){const n=this._renderedRulers.pop();this.domNode.removeChild(n),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){const n=this._renderedRulers[t],r=this._rulers[t];n.setBoxShadow(r.color?`1px 0 0 0 ${r.color} inset`:""),n.setHeight(Math.min(e.scrollHeight,1e6)),n.setLeft(r.column*this._typicalHalfwidthCharacterWidth)}}}class jme extends Zr{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const i=this._context.configuration.options.get(104);this._useShadows=i.useShadows,this._domNode=Qt(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(146);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const i=this._context.configuration.options.get(104);return this._useShadows=i.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class Ume{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class $me{constructor(e,t){this.lineNumber=e,this.ranges=t}}function qme(s){return new Ume(s)}function Kme(s){return new $me(s.lineNumber,s.ranges.map(qme))}const Gi=class Gi extends Jf{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,i=e.length;t<i;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,i){const n=this._typicalHalfwidthCharacterWidth/4;let r=null,o=null;if(i&&i.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!r&&c<i.length;c++)i[c].lineNumber===a&&(r=i[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=i.length-1;!o&&c>=0;c--)i[c].lineNumber===l&&(o=i[c].ranges[0]);r&&!r.startStyle&&(r=null),o&&!o.startStyle&&(o=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],u=c.left,d=c.left+c.width,g={top:0,bottom:0},m={top:0,bottom:0};if(a>0){const _=t[a-1].ranges[0].left,v=t[a-1].ranges[0].left+t[a-1].ranges[0].width;fw(u-_)<n?g.top=2:u>_&&(g.top=1),fw(d-v)<n?m.top=2:_<d&&d<v&&(m.top=1)}else r&&(g.top=r.startStyle.top,m.top=r.endStyle.top);if(a+1<l){const _=t[a+1].ranges[0].left,v=t[a+1].ranges[0].left+t[a+1].ranges[0].width;fw(u-_)<n?g.bottom=2:_<u&&u<v&&(g.bottom=1),fw(d-v)<n?m.bottom=2:d<v&&(m.bottom=1)}else o&&(g.bottom=o.startStyle.bottom,m.bottom=o.endStyle.bottom);c.startStyle=g,c.endStyle=m}}_getVisibleRangesWithStyle(e,t,i){const r=(t.linesVisibleRangesForRange(e,!0)||[]).map(Kme);return!this._visibleRangesHaveGaps(r)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,r,i),r}_createSelectionPiece(e,t,i,n,r){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;bottom:"+t.toString()+"px;left:"+n.toString()+"px;width:"+r.toString()+'px;"></div>'}_actualRenderOneSelection(e,t,i,n){if(n.length===0)return;const r=!!n[0].ranges[0].startStyle,o=n[0].lineNumber,a=n[n.length-1].lineNumber;for(let l=0,c=n.length;l<c;l++){const u=n[l],d=u.lineNumber,g=d-t,m=i&&d===o?1:0,_=i&&d!==o&&d===a?1:0;let v="",w="";for(let y=0,S=u.ranges.length;y<S;y++){const k=u.ranges[y];if(r){const T=k.startStyle,A=k.endStyle;if(T.top===1||T.bottom===1){v+=this._createSelectionPiece(m,_,Gi.SELECTION_CLASS_NAME,k.left-Gi.ROUNDED_PIECE_WIDTH,Gi.ROUNDED_PIECE_WIDTH);let I=Gi.EDITOR_BACKGROUND_CLASS_NAME;T.top===1&&(I+=" "+Gi.SELECTION_TOP_RIGHT),T.bottom===1&&(I+=" "+Gi.SELECTION_BOTTOM_RIGHT),v+=this._createSelectionPiece(m,_,I,k.left-Gi.ROUNDED_PIECE_WIDTH,Gi.ROUNDED_PIECE_WIDTH)}if(A.top===1||A.bottom===1){v+=this._createSelectionPiece(m,_,Gi.SELECTION_CLASS_NAME,k.left+k.width,Gi.ROUNDED_PIECE_WIDTH);let I=Gi.EDITOR_BACKGROUND_CLASS_NAME;A.top===1&&(I+=" "+Gi.SELECTION_TOP_LEFT),A.bottom===1&&(I+=" "+Gi.SELECTION_BOTTOM_LEFT),v+=this._createSelectionPiece(m,_,I,k.left+k.width,Gi.ROUNDED_PIECE_WIDTH)}}let L=Gi.SELECTION_CLASS_NAME;if(r){const T=k.startStyle,A=k.endStyle;T.top===0&&(L+=" "+Gi.SELECTION_TOP_LEFT),T.bottom===0&&(L+=" "+Gi.SELECTION_BOTTOM_LEFT),A.top===0&&(L+=" "+Gi.SELECTION_TOP_RIGHT),A.bottom===0&&(L+=" "+Gi.SELECTION_BOTTOM_RIGHT)}w+=this._createSelectionPiece(m,_,L,k.left,k.width)}e[g][0]+=v,e[g][1]+=w}}prepareRender(e){const t=[],i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;for(let o=i;o<=n;o++){const a=o-i;t[a]=["",""]}const r=[];for(let o=0,a=this._selections.length;o<a;o++){const l=this._selections[o];if(l.isEmpty()){r[o]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[o]);r[o]=c,this._actualRenderOneSelection(t,i,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=r,this._renderResult=t.map(([o,a])=>o+a)}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};Gi.SELECTION_CLASS_NAME="selected-text",Gi.SELECTION_TOP_LEFT="top-left-radius",Gi.SELECTION_BOTTOM_LEFT="bottom-left-radius",Gi.SELECTION_TOP_RIGHT="top-right-radius",Gi.SELECTION_BOTTOM_RIGHT="bottom-right-radius",Gi.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",Gi.ROUNDED_PIECE_WIDTH=10;let Y6=Gi;_u((s,e)=>{const t=s.getColor(Vie);t&&!t.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function fw(s){return s<0?-s:s}class BO{constructor(e,t,i,n,r,o,a){this.top=e,this.left=t,this.paddingLeft=i,this.width=n,this.height=r,this.textContent=o,this.textContentClassName=a}}var Gc;(function(s){s[s.Single=0]="Single",s[s.MultiPrimary=1]="MultiPrimary",s[s.MultiSecondary=2]="MultiSecondary"})(Gc||(Gc={}));class WO{constructor(e,t){this._context=e;const i=this._context.configuration.options,n=i.get(50);this._cursorStyle=i.get(28),this._lineHeight=i.get(67),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(i.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=Qt(document.createElement("div")),this._domNode.setClassName(`cursor ${zm}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),xs(this._domNode,n),this._domNode.setDisplay("none"),this._position=new ce(1,1),this._pluralityClass="",this.setPlurality(t),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(e){switch(e){default:case Gc.Single:this._pluralityClass="";break;case Gc.MultiPrimary:this._pluralityClass="cursor-primary";break;case Gc.MultiSecondary:this._pluralityClass="cursor-secondary";break}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(50);return this._cursorStyle=t.get(28),this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),xs(this._domNode,i),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,i=this._context.viewModel.getLineContent(e),[n,r]=OX(i,t-1);return[new ce(e,n+1),i.substring(n,r)]}_prepareRender(e){let t="",i="";const[n,r]=this._getGraphemeAwarePosition();if(this._cursorStyle===Yn.Line||this._cursorStyle===Yn.LineThin){const g=e.visibleRangeForPosition(n);if(!g||g.outsideRenderedLine)return null;const m=tt(this._domNode.domNode);let _;this._cursorStyle===Yn.Line?(_=JM(m,this._lineCursorWidth>0?this._lineCursorWidth:2),_>2&&(t=r,i=this._getTokenClassName(n))):_=JM(m,1);let v=g.left,w=0;_>=2&&v>=1&&(w=1,v-=w);const y=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta;return new BO(y,v,w,_,this._lineHeight,t,i)}const o=e.linesVisibleRangesForRange(new Q(n.lineNumber,n.column,n.lineNumber,n.column+r.length),!1);if(!o||o.length===0)return null;const a=o[0];if(a.outsideRenderedLine||a.ranges.length===0)return null;const l=a.ranges[0],c=r==="	"?this._typicalHalfwidthCharacterWidth:l.width<1?this._typicalHalfwidthCharacterWidth:l.width;this._cursorStyle===Yn.Block&&(t=r,i=this._getTokenClassName(n));let u=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta,d=this._lineHeight;return(this._cursorStyle===Yn.Underline||this._cursorStyle===Yn.UnderlineThin)&&(u+=this._lineHeight-2,d=2),new BO(u,l.left,0,c,d,t,i)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),i=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(i)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${zm} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}const U1=class U1 extends Zr{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new WO(this._context,Gc.Single),this._secondaryCursors=[],this._renderData=[],this._domNode=Qt(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new zf,this._cursorFlatBlinkInterval=new C8,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let i=0,n=this._secondaryCursors.length;i<n;i++)this._secondaryCursors[i].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,i){const n=this._secondaryCursors.length!==t.length||this._cursorSmoothCaretAnimation==="explicit"&&i!==3;if(this._primaryCursor.setPlurality(t.length?Gc.MultiPrimary:Gc.Single),this._primaryCursor.onCursorPositionChanged(e,n),this._updateBlinking(),this._secondaryCursors.length<t.length){const r=t.length-this._secondaryCursors.length;for(let o=0;o<r;o++){const a=new WO(this._context,Gc.MultiSecondary);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>t.length){const r=this._secondaryCursors.length-t.length;for(let o=0;o<r;o++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let r=0;r<t.length;r++)this._secondaryCursors[r].onCursorPositionChanged(t[r],n)}onCursorStateChanged(e){const t=[];for(let n=0,r=e.selections.length;n<r;n++)t[n]=e.selections[n].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const i=e.selections[0].isEmpty();return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=i=>{for(let n=0,r=e.ranges.length;n<r;n++)if(e.ranges[n].fromLineNumber<=i.lineNumber&&i.lineNumber<=e.ranges[n].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const i of this._secondaryCursors)if(t(i.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,i=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!i&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},U1.BLINK_INTERVAL,tt(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},U1.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case Yn.Line:e+=" cursor-line-style";break;case Yn.Block:e+=" cursor-block-style";break;case Yn.Underline:e+=" cursor-underline-style";break;case Yn.LineThin:e+=" cursor-line-thin-style";break;case Yn.BlockOutline:e+=" cursor-block-outline-style";break;case Yn.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let i=0;const n=this._primaryCursor.render(e);n&&(t[i++]=n);for(let r=0,o=this._secondaryCursors.length;r<o;r++){const a=this._secondaryCursors[r].render(e);a&&(t[i++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}};U1.BLINK_INTERVAL=500;let X6=U1;_u((s,e)=>{const t=[{class:".cursor",foreground:H2,background:bE},{class:".cursor-primary",foreground:sH,background:rle},{class:".cursor-secondary",foreground:rH,background:ole}];for(const i of t){const n=s.getColor(i.foreground);if(n){let r=s.getColor(i.background);r||(r=n.opposite()),e.addRule(`.monaco-editor .cursors-layer ${i.class} { background-color: ${n}; border-color: ${n}; color: ${r}; }`),Dm(s.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection ${i.class} { border-left: 1px solid ${r}; border-right: 1px solid ${r}; }`)}}});const bL=()=>{throw new Error("Invalid change accessor")};class Gme extends Zr{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this.domNode=Qt(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=Qt(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const n of e)t.set(n.id,n);let i=!1;return this._context.viewModel.changeWhitespace(n=>{const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],c=this._zones[l],u=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=u.isInHiddenArea;const d=t.get(l);d&&(d.afterLineNumber!==u.afterViewLineNumber||d.height!==u.heightInPx)&&(n.changeOneWhitespace(l,u.afterViewLineNumber,u.heightInPx),this._safeCallOnComputedHeight(c.delegate,u.heightInPx),i=!0)}}),i}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(67)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return e.ordinal??e.afterColumn??1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const o=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new ce(o,this._context.viewModel.model.getLineMaxColumn(o))}let i;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const n=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),r=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!r,afterViewLineNumber:n.lineNumber,heightInPx:r?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(i=>{const n={addZone:r=>(t=!0,this._addZone(i,r)),removeZone:r=>{r&&(t=this._removeZone(i,r)||t)},layoutZone:r=>{r&&(t=this._layoutZone(i,r)||t)}};Zme(e,n),n.addZone=bL,n.removeZone=bL,n.layoutZone=bL}),t}_addZone(e,t){const i=this._computeWhitespaceProps(t),r={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:Qt(t.domNode),marginDomNode:t.marginDomNode?Qt(t.marginDomNode):null};return this._safeCallOnComputedHeight(r.delegate,i.heightInPx),r.domNode.setPosition("absolute"),r.domNode.domNode.style.width="100%",r.domNode.setDisplay("none"),r.domNode.setAttribute("monaco-view-zone",r.whitespaceId),this.domNode.appendChild(r.domNode),r.marginDomNode&&(r.marginDomNode.setPosition("absolute"),r.marginDomNode.domNode.style.width="100%",r.marginDomNode.setDisplay("none"),r.marginDomNode.setAttribute("monaco-view-zone",r.whitespaceId),this.marginDomNode.appendChild(r.marginDomNode)),this._zones[r.whitespaceId]=r,this.setShouldRender(),r.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.remove(),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.remove()),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t],n=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=n.isInHiddenArea,e.changeOneWhitespace(i.whitespaceId,n.afterViewLineNumber,n.heightInPx),this._safeCallOnComputedHeight(i.delegate,n.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(i){_i(i)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(i){_i(i)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,i={};let n=!1;for(const o of t)this._zones[o.id].isInHiddenArea||(i[o.id]=o,n=!0);const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],c=this._zones[l];let u=0,d=0,g="none";i.hasOwnProperty(l)?(u=i[l].verticalOffset-e.bigNumbersDelta,d=i[l].height,g="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(i[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(u),c.domNode.setHeight(d),c.domNode.setDisplay(g),c.marginDomNode&&(c.marginDomNode.setTop(u),c.marginDomNode.setHeight(d),c.marginDomNode.setDisplay(g))}n&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function Zme(s,e){try{return s(e)}catch(t){_i(t)}}class Yme extends Jf{constructor(e){super(),this._context=e,this._options=new VO(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new VO(this._context.configuration);return this._options.equals(t)?e.hasChanged(146):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber-t+1,r=new Array(n);for(let a=0;a<n;a++)r[a]=!0;const o=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,r);this._renderResult=[];for(let a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){const l=a-e.viewportData.startLineNumber,c=o.data[l];let u=null;if(this._options.renderWhitespace==="selection"){const d=this._selection;for(const g of d){if(g.endLineNumber<a||g.startLineNumber>a)continue;const m=g.startLineNumber===a?g.startColumn:c.minColumn,_=g.endLineNumber===a?g.endColumn:c.maxColumn;m<_&&(u||(u=[]),u.push(new fj(m-1,_-1)))}}this._renderResult[l]=this._applyRenderWhitespace(e,a,u,c)}}_applyRenderWhitespace(e,t,i,n){if(this._options.renderWhitespace==="selection"&&!i||this._options.renderWhitespace==="trailing"&&n.continuesWithWrappedLine)return"";const r=this._context.theme.getColor(wE),o=this._options.renderWithSVG,a=n.content,l=this._options.stopRenderingLineAfter===-1?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),c=n.continuesWithWrappedLine,u=n.minColumn-1,d=this._options.renderWhitespace==="boundary",g=this._options.renderWhitespace==="trailing",m=this._options.lineHeight,_=this._options.middotWidth,v=this._options.wsmiddotWidth,w=this._options.spaceWidth,y=Math.abs(v-w),S=Math.abs(_-w),k=y<S?11825:183,L=this._options.canUseHalfwidthRightwardsArrow;let T="",A=!1,I=Ur(a),O;I===-1?(A=!0,I=l,O=l):O=Vf(a);let F=0,J=i&&i[F],Y=0;for(let G=u;G<l;G++){const ie=a.charCodeAt(G);if(J&&G>=J.endOffset&&(F++,J=i&&i[F]),ie!==9&&ie!==32||g&&!A&&G<=O)continue;if(d&&G>=I&&G<=O&&ie===32){const ue=G-1>=0?a.charCodeAt(G-1):0,be=G+1<l?a.charCodeAt(G+1):0;if(ue!==32&&be!==32)continue}if(d&&c&&G===l-1){const ue=G-1>=0?a.charCodeAt(G-1):0;if(ie===32&&ue!==32&&ue!==9)continue}if(i&&(!J||J.startOffset>G||J.endOffset<=G))continue;const Z=e.visibleRangeForPosition(new ce(t,G+1));Z&&(o?(Y=Math.max(Y,Z.left),ie===9?T+=this._renderArrow(m,w,Z.left):T+=`<circle cx="${(Z.left+w/2).toFixed(2)}" cy="${(m/2).toFixed(2)}" r="${(w/7).toFixed(2)}" />`):ie===9?T+=`<div class="mwh" style="left:${Z.left}px;height:${m}px;">${L?"￫":"→"}</div>`:T+=`<div class="mwh" style="left:${Z.left}px;height:${m}px;">${String.fromCharCode(k)}</div>`)}return o?(Y=Math.round(Y+w),`<svg style="bottom:0;position:absolute;width:${Y}px;height:${m}px" viewBox="0 0 ${Y} ${m}" xmlns="http://www.w3.org/2000/svg" fill="${r}">`+T+"</svg>"):T}_renderArrow(e,t,i){const n=t/7,r=t,o=e/2,a=i,l={x:0,y:n/2},c={x:100/125*r,y:l.y},u={x:c.x-.2*c.x,y:c.y+.2*c.x},d={x:u.x+.1*c.x,y:u.y+.1*c.x},g={x:d.x+.35*c.x,y:d.y-.35*c.x},m={x:g.x,y:-g.y},_={x:d.x,y:-d.y},v={x:u.x,y:-u.y},w={x:c.x,y:-c.y},y={x:l.x,y:-l.y};return`<path d="M ${[l,c,u,d,g,m,_,v,w,y].map(L=>`${(a+L.x).toFixed(2)} ${(o+L.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class VO{constructor(e){const t=e.options,i=t.get(50),n=t.get(38);n==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):n==="svg"?(this.renderWhitespace=t.get(100),this.renderWithSVG=!0):(this.renderWhitespace=t.get(100),this.renderWithSVG=!1),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(67),this.stopRenderingLineAfter=t.get(118)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}class Xme{constructor(e,t,i,n){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.lineHeight=t.lineHeight|0,this.whitespaceViewportData=i,this._model=n,this.visibleRange=new Q(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class Qme{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class Jme{constructor(e,t,i){this.configuration=e,this.theme=new Qme(t),this.viewModel=i,this.viewLayout=i.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}var epe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},tpe=function(s,e){return function(t,i){e(t,i,s)}};let Q6=class extends pv{constructor(e,t,i,n,r,o,a){super(),this._instantiationService=a,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new wi(1,1,1,1)],this._renderAnimationFrame=null;const l=new lme(t,n,r,e);this._context=new Jme(t,i,n),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(U6,this._context,l,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=Qt(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=Qt(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=Qt(document.createElement("div")),rl.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new vme(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new Z6(this._context,this._linesContent),this._viewZones=new Gme(this._context),this._viewParts.push(this._viewZones);const c=new Wme(this._context);this._viewParts.push(c);const u=new jme(this._context);this._viewParts.push(u);const d=new ume(this._context);this._viewParts.push(d),d.addDynamicOverlay(new mme(this._context)),d.addDynamicOverlay(new Y6(this._context)),d.addDynamicOverlay(new kme(this._context)),d.addDynamicOverlay(new _me(this._context)),d.addDynamicOverlay(new Yme(this._context));const g=new hme(this._context);this._viewParts.push(g),g.addDynamicOverlay(new pme(this._context)),g.addDynamicOverlay(new Nme(this._context)),g.addDynamicOverlay(new Tme(this._context)),g.addDynamicOverlay(new My(this._context)),this._glyphMarginWidgets=new Cme(this._context),this._viewParts.push(this._glyphMarginWidgets);const m=new Ry(this._context);m.getDomNode().appendChild(this._viewZones.marginDomNode),m.getDomNode().appendChild(g.getDomNode()),m.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(m),this._contentWidgets=new fme(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new X6(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new Fme(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);const _=new Hme(this._context);this._viewParts.push(_);const v=new dme(this._context);this._viewParts.push(v);const w=new Ome(this._context);if(this._viewParts.push(w),c){const y=this._scrollbar.getOverviewRulerLayoutInfo();y.parent.insertBefore(c.getDomNode(),y.insertBefore)}this._linesContent.appendChild(d.getDomNode()),this._linesContent.appendChild(_.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(m.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(u.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(w.getDomNode()),this._overflowGuardContainer.appendChild(v.domNode),this.domNode.appendChild(this._overflowGuardContainer),o?(o.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),o.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new Tge(this._context,l,this._createPointerHandlerHelper()))}_computeGlyphMarginLanes(){const e=this._context.viewModel.model,t=this._context.viewModel.glyphLanes;let i=[],n=0;i=i.concat(e.getAllMarginDecorations().map(r=>{const o=r.options.glyphMargin?.position??Ah.Center;return n=Math.max(n,r.range.endLineNumber),{range:r.range,lane:o,persist:r.options.glyphMargin?.persistLane}})),i=i.concat(this._glyphMarginWidgets.getWidgets().map(r=>{const o=e.validateRange(r.preference.range);return n=Math.max(n,o.endLineNumber),{range:o,lane:r.preference.lane}})),i.sort((r,o)=>Q.compareRangesUsingStarts(r.range,o.range)),t.reset(n);for(const r of i)t.push(r.lane,r.range,r.persist);return t}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new _ge(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new ce(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(146);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(143)+" "+B3(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){if(this._store.isDisposed)throw new ri;if(this._renderAnimationFrame===null){const e=this._createCoordinatedRendering();this._renderAnimationFrame=J6.INSTANCE.scheduleCoordinatedRendering({window:tt(this.domNode?.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new ri;try{return e.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new ri;return e.renderText()},prepareRender:(t,i)=>{if(this._store.isDisposed)throw new ri;return e.prepareRender(t,i)},render:(t,i)=>{if(this._store.isDisposed)throw new ri;return e.render(t,i)}})}}_flushAccumulatedAndRenderNow(){const e=this._createCoordinatedRendering();wh(()=>e.prepareRenderText());const t=wh(()=>e.renderText());if(t){const[i,n]=t;wh(()=>e.prepareRender(i,n)),wh(()=>e.render(i,n))}}_getViewPartsToRender(){const e=[];let t=0;for(const i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;const e=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(e.requiredLanes)}bh.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return null;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const i=new Xme(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender()),[e,new uge(this._context.viewLayout,i,this._viewLines)]},prepareRender:(e,t)=>{for(const i of e)i.prepareRender(t)},render:(e,t)=>{for(const i of e)i.render(t),i.onDidRender()}}}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const i=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),n=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();const r=this._viewLines.visibleRangeForPosition(new ce(n.lineNumber,n.column));return r?r.left:-1}getTargetAtClientPoint(e,t){const i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?n4.convertViewToModelMouseTarget(i,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new zme(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const i of this._viewParts)i.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){this._contentWidgets.setWidgetPosition(e.widget,e.position?.position??null,e.position?.secondaryPosition??null,e.position?.preference??null,e.position?.positionAffinity??null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){this._overlayWidgets.setWidgetPosition(e.widget,e.position)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){const t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};Q6=epe([tpe(6,hi)],Q6);function wh(s){try{return s()}catch(e){return _i(e),null}}const US=class US{constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(e){return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:()=>{const t=this._coordinatedRenderings.indexOf(e);if(t!==-1&&(this._coordinatedRenderings.splice(t,1),this._coordinatedRenderings.length===0)){for(const[i,n]of this._animationFrameRunners)n.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(e){if(!this._animationFrameRunners.has(e)){const t=()=>{this._animationFrameRunners.delete(e),this._onRenderScheduled()};this._animationFrameRunners.set(e,$W(e,t,100))}}_onRenderScheduled(){const e=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(const i of e)wh(()=>i.prepareRenderText());const t=[];for(let i=0,n=e.length;i<n;i++){const r=e[i];t[i]=wh(()=>r.renderText())}for(let i=0,n=e.length;i<n;i++){const r=e[i],o=t[i];if(!o)continue;const[a,l]=o;wh(()=>r.prepareRender(a,l))}for(let i=0,n=e.length;i<n;i++){const r=e[i],o=t[i];if(!o)continue;const[a,l]=o;wh(()=>r.render(a,l))}}};US.INSTANCE=new US;let J6=US;class D1{constructor(e,t,i,n,r){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=i,this.breakOffsetsVisibleColumn=n,this.wrappedTextIndentLength=r}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let n=this.breakOffsets[e]-t;return e>0&&(n+=this.wrappedTextIndentLength),n}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let n=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let r=0;r<this.injectionOffsets.length&&n>this.injectionOffsets[r];r++)n<this.injectionOffsets[r]+this.injectionOptions[r].content.length?n=this.injectionOffsets[r]:n-=this.injectionOptions[r].content.length;return n}translateToOutputPosition(e,t=2){let i=e;if(this.injectionOffsets!==null)for(let n=0;n<this.injectionOffsets.length&&!(e<this.injectionOffsets[n]||t!==1&&e===this.injectionOffsets[n]);n++)i+=this.injectionOptions[n].content.length;return this.offsetInInputWithInjectionsToOutputPosition(i,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let i=0,n=this.breakOffsets.length-1,r=0,o=0;for(;i<=n;){r=i+(n-i)/2|0;const l=this.breakOffsets[r];if(o=r>0?this.breakOffsets[r-1]:0,t===0)if(e<=o)n=r-1;else if(e>l)i=r+1;else break;else if(e<o)n=r-1;else if(e>=l)i=r+1;else break}let a=e-o;return r>0&&(a+=this.wrappedTextIndentLength),new gw(r,a)}normalizeOutputPosition(e,t,i){if(this.injectionOffsets!==null){const n=this.outputPositionToOffsetInInputWithInjections(e,t),r=this.normalizeOffsetInInputWithInjectionsAroundInjections(n,i);if(r!==n)return this.offsetInInputWithInjectionsToOutputPosition(r,i)}if(i===0){if(e>0&&t===this.getMinOutputOffset(e))return new gw(e-1,this.getMaxOutputOffset(e-1))}else if(i===1){const n=this.getOutputLineCount()-1;if(e<n&&t===this.getMaxOutputOffset(e))return new gw(e+1,this.getMinOutputOffset(e+1))}return new gw(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const i=this.getInjectedTextAtOffset(e);if(!i)return e;if(t===2){if(e===i.offsetInInputWithInjections+i.length&&zO(this.injectionOptions[i.injectedTextIndex].cursorStops))return i.offsetInInputWithInjections+i.length;{let n=i.offsetInInputWithInjections;if(HO(this.injectionOptions[i.injectedTextIndex].cursorStops))return n;let r=i.injectedTextIndex-1;for(;r>=0&&this.injectionOffsets[r]===this.injectionOffsets[i.injectedTextIndex]&&!(zO(this.injectionOptions[r].cursorStops)||(n-=this.injectionOptions[r].content.length,HO(this.injectionOptions[r].cursorStops)));)r--;return n}}else if(t===1||t===4){let n=i.offsetInInputWithInjections+i.length,r=i.injectedTextIndex;for(;r+1<this.injectionOffsets.length&&this.injectionOffsets[r+1]===this.injectionOffsets[r];)n+=this.injectionOptions[r+1].content.length,r++;return n}else if(t===0||t===3){let n=i.offsetInInputWithInjections,r=i.injectedTextIndex;for(;r-1>=0&&this.injectionOffsets[r-1]===this.injectionOffsets[r];)n-=this.injectionOptions[r-1].content.length,r--;return n}N8()}getInjectedText(e,t){const i=this.outputPositionToOffsetInInputWithInjections(e,t),n=this.getInjectedTextAtOffset(i);return n?{options:this.injectionOptions[n.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,i=this.injectionOptions;if(t!==null){let n=0;for(let r=0;r<t.length;r++){const o=i[r].content.length,a=t[r]+n,l=t[r]+n+o;if(a>e)break;if(e<=l)return{injectedTextIndex:r,offsetInInputWithInjections:a,length:o};n+=o}}}}function zO(s){return s==null?!0:s===ip.Right||s===ip.Both}function HO(s){return s==null?!0:s===ip.Left||s===ip.Both}class gw{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new ce(e+this.outputLineIndex,this.outputOffset+1)}}const ipe=Kf("domLineBreaksComputer",{createHTML:s=>s});class d9{static create(e){return new d9(new WeakRef(e))}constructor(e){this.targetWindow=e}createLineBreaksComputer(e,t,i,n,r){const o=[],a=[];return{addRequest:(l,c,u)=>{o.push(l),a.push(c)},finalize:()=>npe($B(this.targetWindow.deref()),o,e,t,i,n,r,a)}}}function npe(s,e,t,i,n,r,o,a){function l(F){const J=a[F];if(J){const Y=il.applyInjectedText(e[F],J),G=J.map(Z=>Z.options),ie=J.map(Z=>Z.column-1);return new D1(ie,G,[Y.length],[],0)}else return null}if(n===-1){const F=[];for(let J=0,Y=e.length;J<Y;J++)F[J]=l(J);return F}const c=Math.round(n*t.typicalHalfwidthCharacterWidth),d=Math.round(i*(r===3?2:r===2?1:0)),g=Math.ceil(t.spaceWidth*d),m=document.createElement("div");xs(m,t);const _=new C2(1e4),v=[],w=[],y=[],S=[],k=[];for(let F=0;F<e.length;F++){const J=il.applyInjectedText(e[F],a[F]);let Y=0,G=0,ie=c;if(r!==0)if(Y=Ur(J),Y===-1)Y=0;else{for(let ye=0;ye<Y;ye++){const ae=J.charCodeAt(ye)===9?i-G%i:1;G+=ae}const be=Math.ceil(t.spaceWidth*G);be+t.typicalFullwidthCharacterWidth>c?(Y=0,G=0):ie=c-be}const Z=J.substr(Y),ue=spe(Z,G,i,ie,_,g);v[F]=Y,w[F]=G,y[F]=Z,S[F]=ue[0],k[F]=ue[1]}const L=_.build(),T=ipe?.createHTML(L)??L;m.innerHTML=T,m.style.position="absolute",m.style.top="10000",o==="keepAll"?(m.style.wordBreak="keep-all",m.style.overflowWrap="anywhere"):(m.style.wordBreak="inherit",m.style.overflowWrap="break-word"),s.document.body.appendChild(m);const A=document.createRange(),I=Array.prototype.slice.call(m.children,0),O=[];for(let F=0;F<e.length;F++){const J=I[F],Y=rpe(A,J,y[F],S[F]);if(Y===null){O[F]=l(F);continue}const G=v[F],ie=w[F]+d,Z=k[F],ue=[];for(let xe=0,fe=Y.length;xe<fe;xe++)ue[xe]=Z[Y[xe]];if(G!==0)for(let xe=0,fe=Y.length;xe<fe;xe++)Y[xe]+=G;let be,ye;const ae=a[F];ae?(be=ae.map(xe=>xe.options),ye=ae.map(xe=>xe.column-1)):(be=null,ye=null),O[F]=new D1(ye,be,Y,ue,ie)}return m.remove(),O}function spe(s,e,t,i,n,r){if(r!==0){const g=String(r);n.appendString('<div style="text-indent: -'),n.appendString(g),n.appendString("px; padding-left: "),n.appendString(g),n.appendString("px; box-sizing: border-box; width:")}else n.appendString('<div style="width:');n.appendString(String(i)),n.appendString('px;">');const o=s.length;let a=e,l=0;const c=[],u=[];let d=0<o?s.charCodeAt(0):0;n.appendString("<span>");for(let g=0;g<o;g++){g!==0&&g%16384===0&&n.appendString("</span><span>"),c[g]=l,u[g]=a;const m=d;d=g+1<o?s.charCodeAt(g+1):0;let _=1,v=1;switch(m){case 9:_=t-a%t,v=_;for(let w=1;w<=_;w++)w<_?n.appendCharCode(160):n.appendASCIICharCode(32);break;case 32:d===32?n.appendCharCode(160):n.appendASCIICharCode(32);break;case 60:n.appendString("&lt;");break;case 62:n.appendString("&gt;");break;case 38:n.appendString("&amp;");break;case 0:n.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:n.appendCharCode(65533);break;default:Ih(m)&&v++,m<32?n.appendCharCode(9216+m):n.appendCharCode(m)}l+=_,a+=v}return n.appendString("</span>"),c[s.length]=l,u[s.length]=a,n.appendString("</div>"),[c,u]}function rpe(s,e,t,i){if(t.length<=1)return null;const n=Array.prototype.slice.call(e.children,0),r=[];try{eD(s,n,i,0,null,t.length-1,null,r)}catch(o){return console.log(o),null}return r.length===0?null:(r.push(t.length),r)}function eD(s,e,t,i,n,r,o,a){if(i===r||(n=n||wL(s,e,t[i],t[i+1]),o=o||wL(s,e,t[r],t[r+1]),Math.abs(n[0].top-o[0].top)<=.1))return;if(i+1===r){a.push(r);return}const l=i+(r-i)/2|0,c=wL(s,e,t[l],t[l+1]);eD(s,e,t,i,n,l,c,a),eD(s,e,t,l,c,r,o,a)}function wL(s,e,t,i){return s.setStart(e[t/16384|0].firstChild,t%16384),s.setEnd(e[i/16384|0].firstChild,i%16384),s.getClientRects()}class ope extends ve{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new r8),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,i){this._editor=e,this._instantiationService=i;for(const n of t){if(this._pending.has(n.id)){_i(new Error(`Cannot have two contributions with the same id ${n.id}`));continue}this._pending.set(n.id,n)}this._instantiateSome(0),this._register(Ob(tt(this._editor.getDomNode()),()=>{this._instantiateSome(1)})),this._register(Ob(tt(this._editor.getDomNode()),()=>{this._instantiateSome(2)})),this._register(Ob(tt(this._editor.getDomNode()),()=>{this._instantiateSome(3)},5e3))}saveViewState(){const e={};for(const[t,i]of this._instances)typeof i.saveViewState=="function"&&(e[t]=i.saveViewState());return e}restoreViewState(e){for(const[t,i]of this._instances)typeof i.restoreViewState=="function"&&i.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){return Ob(tt(this._editor?.getDomNode()),()=>{this._instantiateSome(1)},50)}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const i of t)this._instantiateById(i.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,i]of this._pending)i.instantiation===e&&t.push(i);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const i=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,i),typeof i.restoreViewState=="function"&&t.instantiation!==0&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(i){_i(i)}}}}class Pj{constructor(e,t,i,n,r,o,a){this.id=e,this.label=t,this.alias=i,this.metadata=n,this._precondition=r,this._run=o,this._contextKeyService=a}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}class f9{static create(e){return new f9(e.get(135),e.get(134))}constructor(e,t){this.classifier=new ape(e,t)}createLineBreaksComputer(e,t,i,n,r){const o=[],a=[],l=[];return{addRequest:(c,u,d)=>{o.push(c),a.push(u),l.push(d)},finalize:()=>{const c=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,u=[];for(let d=0,g=o.length;d<g;d++){const m=a[d],_=l[d];_&&!_.injectionOptions&&!m?u[d]=lpe(this.classifier,_,o[d],t,i,c,n,r):u[d]=cpe(this.classifier,o[d],m,t,i,c,n,r)}return tD.length=0,iD.length=0,u}}}}class ape extends tv{constructor(e,t){super(0);for(let i=0;i<e.length;i++)this.set(e.charCodeAt(i),1);for(let i=0;i<t.length;i++)this.set(t.charCodeAt(i),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let tD=[],iD=[];function lpe(s,e,t,i,n,r,o,a){if(n===-1)return null;const l=t.length;if(l<=1)return null;const c=a==="keepAll",u=e.breakOffsets,d=e.breakOffsetsVisibleColumn,g=Oj(t,i,n,r,o),m=n-g,_=tD,v=iD;let w=0,y=0,S=0,k=n;const L=u.length;let T=0;if(T>=0){let A=Math.abs(d[T]-k);for(;T+1<L;){const I=Math.abs(d[T+1]-k);if(I>=A)break;A=I,T++}}for(;T<L;){let A=T<0?0:u[T],I=T<0?0:d[T];y>A&&(A=y,I=S);let O=0,F=0,J=0,Y=0;if(I<=k){let ie=I,Z=A===0?0:t.charCodeAt(A-1),ue=A===0?0:s.get(Z),be=!0;for(let ye=A;ye<l;ye++){const ae=ye,xe=t.charCodeAt(ye);let fe,X;if(zn(xe)?(ye++,fe=0,X=2):(fe=s.get(xe),X=E1(xe,ie,i,r)),ae>y&&nD(Z,ue,xe,fe,c)&&(O=ae,F=ie),ie+=X,ie>k){ae>y?(J=ae,Y=ie-X):(J=ye+1,Y=ie),ie-F>m&&(O=0),be=!1;break}Z=xe,ue=fe}if(be){w>0&&(_[w]=u[u.length-1],v[w]=d[u.length-1],w++);break}}if(O===0){let ie=I,Z=t.charCodeAt(A),ue=s.get(Z),be=!1;for(let ye=A-1;ye>=y;ye--){const ae=ye+1,xe=t.charCodeAt(ye);if(xe===9){be=!0;break}let fe,X;if(Xm(xe)?(ye--,fe=0,X=2):(fe=s.get(xe),X=Ih(xe)?r:1),ie<=k){if(J===0&&(J=ae,Y=ie),ie<=k-m)break;if(nD(xe,fe,Z,ue,c)){O=ae,F=ie;break}}ie-=X,Z=xe,ue=fe}if(O!==0){const ye=m-(Y-F);if(ye<=i){const ae=t.charCodeAt(J);let xe;zn(ae)?xe=2:xe=E1(ae,Y,i,r),ye-xe<0&&(O=0)}}if(be){T--;continue}}if(O===0&&(O=J,F=Y),O<=y){const ie=t.charCodeAt(y);zn(ie)?(O=y+2,F=S+2):(O=y+1,F=S+E1(ie,S,i,r))}for(y=O,_[w]=O,S=F,v[w]=F,w++,k=F+m;T<0||T<L&&d[T]<F;)T++;let G=Math.abs(d[T]-k);for(;T+1<L;){const ie=Math.abs(d[T+1]-k);if(ie>=G)break;G=ie,T++}}return w===0?null:(_.length=w,v.length=w,tD=e.breakOffsets,iD=e.breakOffsetsVisibleColumn,e.breakOffsets=_,e.breakOffsetsVisibleColumn=v,e.wrappedTextIndentLength=g,e)}function cpe(s,e,t,i,n,r,o,a){const l=il.applyInjectedText(e,t);let c,u;if(t&&t.length>0?(c=t.map(F=>F.options),u=t.map(F=>F.column-1)):(c=null,u=null),n===-1)return c?new D1(u,c,[l.length],[],0):null;const d=l.length;if(d<=1)return c?new D1(u,c,[l.length],[],0):null;const g=a==="keepAll",m=Oj(l,i,n,r,o),_=n-m,v=[],w=[];let y=0,S=0,k=0,L=n,T=l.charCodeAt(0),A=s.get(T),I=E1(T,0,i,r),O=1;zn(T)&&(I+=1,T=l.charCodeAt(1),A=s.get(T),O++);for(let F=O;F<d;F++){const J=F,Y=l.charCodeAt(F);let G,ie;zn(Y)?(F++,G=0,ie=2):(G=s.get(Y),ie=E1(Y,I,i,r)),nD(T,A,Y,G,g)&&(S=J,k=I),I+=ie,I>L&&((S===0||I-k>_)&&(S=J,k=I-ie),v[y]=S,w[y]=k,y++,L=k+_,S=0),T=Y,A=G}return y===0&&(!t||t.length===0)?null:(v[y]=d,w[y]=I,new D1(u,c,v,w,m))}function E1(s,e,t,i){return s===9?t-e%t:Ih(s)||s<32?i:1}function jO(s,e){return e-s%e}function nD(s,e,t,i,n){return t!==32&&(e===2&&i!==2||e!==1&&i===1||!n&&e===3&&i!==2||!n&&i===3&&e!==1)}function Oj(s,e,t,i,n){let r=0;if(n!==0){const o=Ur(s);if(o!==-1){for(let l=0;l<o;l++){const c=s.charCodeAt(l)===9?jO(r,e):1;r+=c}const a=n===3?2:n===2?1:0;for(let l=0;l<a;l++){const c=jO(r,e);r+=c}r+i>t&&(r=0)}}return r}class Vy{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new Zn(new Q(1,1,1,1),0,0,new ce(1,1),0),new Zn(new Q(1,1,1,1),0,0,new ce(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Bt(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?wi.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):wi.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,i){this._setState(e,t,i)}static _validatePositionWithCache(e,t,i,n){return t.equals(i)?n:e.normalizePosition(t,2)}static _validateViewState(e,t){const i=t.position,n=t.selectionStart.getStartPosition(),r=t.selectionStart.getEndPosition(),o=e.normalizePosition(i,2),a=this._validatePositionWithCache(e,n,i,o),l=this._validatePositionWithCache(e,r,n,a);return i.equals(o)&&n.equals(a)&&r.equals(l)?t:new Zn(Q.fromPositions(a,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+n.column-a.column,o,t.leftoverVisibleColumns+i.column-o.column)}_setState(e,t,i){if(i&&(i=Vy._validateViewState(e.viewModel,i)),t){const n=e.model.validateRange(t.selectionStart),r=t.selectionStart.equalsRange(n)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),a=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new Zn(n,t.selectionStartKind,r,o,a)}else{if(!i)return;const n=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(i.selectionStart)),r=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(i.position));t=new Zn(n,i.selectionStartKind,i.selectionStartLeftoverVisibleColumns,r,i.leftoverVisibleColumns)}if(i){const n=e.coordinatesConverter.validateViewRange(i.selectionStart,t.selectionStart),r=e.coordinatesConverter.validateViewPosition(i.position,t.position);i=new Zn(n,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,r,t.leftoverVisibleColumns)}else{const n=e.coordinatesConverter.convertModelPositionToViewPosition(new ce(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),r=e.coordinatesConverter.convertModelPositionToViewPosition(new ce(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),o=new Q(n.lineNumber,n.column,r.lineNumber,r.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);i=new Zn(o,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=i,this._updateTrackedRange(e)}}class UO{constructor(e){this.context=e,this.cursors=[new Vy(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return tte(this.cursors,ma(e=>e.viewState.position,ce.compare)).viewState.position}getBottomMostViewPosition(){return ete(this.cursors,ma(e=>e.viewState.position,ce.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(Bt.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,i=e.length;if(t<i){const n=i-t;for(let r=0;r<n;r++)this._addSecondaryCursor()}else if(t>i){const n=t-i;for(let r=0;r<n;r++)this._removeSecondaryCursor(this.cursors.length-2)}for(let n=0;n<i;n++)this.cursors[n+1].setState(this.context,e[n].modelState,e[n].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new Vy(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let i=0,n=e.length;i<n;i++)t.push({index:i,selection:e[i].modelState.selection});t.sort(ma(i=>i.selection,Q.compareRangesUsingStarts));for(let i=0;i<t.length-1;i++){const n=t[i],r=t[i+1],o=n.selection,a=r.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||o.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(o.getEndPosition()):l=a.getStartPosition().isBefore(o.getEndPosition()),l){const c=n.index<r.index?i:i+1,u=n.index<r.index?i+1:i,d=t[u].index,g=t[c].index,m=t[u].selection,_=t[c].selection;if(!m.equalsSelection(_)){const v=m.plusRange(_),w=m.selectionStartLineNumber===m.startLineNumber&&m.selectionStartColumn===m.startColumn,y=_.selectionStartLineNumber===_.startLineNumber&&_.selectionStartColumn===_.startColumn;let S;d===this.lastAddedCursorIndex?(S=w,this.lastAddedCursorIndex=g):S=y;let k;S?k=new wi(v.startLineNumber,v.startColumn,v.endLineNumber,v.endColumn):k=new wi(v.endLineNumber,v.endColumn,v.startLineNumber,v.startColumn),t[c].selection=k;const L=Bt.fromModelSelection(k);e[g].setState(this.context,L.modelState,L.viewState)}for(const v of t)v.index>d&&v.index--;e.splice(d,1),t.splice(u,1),this._removeSecondaryCursor(d-1),i--}}}}class $O{constructor(e,t,i,n){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=i,this.cursorConfig=n}}class upe{constructor(){this.type=0}}class hpe{constructor(){this.type=1}}class dpe{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class fpe{constructor(e,t,i){this.selections=e,this.modelSelections=t,this.reason=i,this.type=3}}class pd{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin,this.affectsLineNumber=e.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}class mw{constructor(){this.type=5}}class gpe{constructor(e){this.type=6,this.isFocused=e}}class mpe{constructor(){this.type=7}}class pw{constructor(){this.type=8}}class Fj{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class sD{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class rD{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class T1{constructor(e,t,i,n,r,o,a){this.source=e,this.minimalReveal=t,this.range=i,this.selections=n,this.verticalType=r,this.revealHorizontal=o,this.scrollType=a,this.type=12}}class ppe{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class _pe{constructor(e){this.theme=e,this.type=14}}class vpe{constructor(e){this.type=15,this.ranges=e}}class bpe{constructor(){this.type=16}}let wpe=class{constructor(){this.type=17}};class Cpe extends ve{constructor(){super(),this._onEvent=this._register(new re),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,i=this._outgoingEvents.length;t<i;t++){const n=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(n){this._outgoingEvents[t]=n;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,i=this._eventHandlers.length;t<i;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new ype),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const i of e)this._addOutgoingEvent(i);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const i of t)i.handleEvents(e)}}}class ype{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class g9{constructor(e,t,i,n){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=i,this.contentHeight=n,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new g9(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class m9{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new m9(this.oldHasFocus,e.hasFocus)}}class p9{constructor(e,t,i,n,r,o,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=i,this._oldScrollTop=n,this.scrollWidth=r,this.scrollLeft=o,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new p9(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class Spe{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class xpe{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class zy{constructor(e,t,i,n,r,o,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=i,this.modelVersionId=n,this.source=r,this.reason=o,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const i=e.length,n=t.length;if(i!==n)return!1;for(let r=0;r<i;r++)if(!e[r].equalsSelection(t[r]))return!1;return!0}isNoOp(){return zy._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new zy(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class kpe{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class Lpe{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class Dpe{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class Epe{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class Tpe{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class Npe{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class Ipe{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class Mpe extends ve{constructor(e,t,i,n){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=i,this.context=new $O(this._model,this._viewModel,this._coordinatesConverter,n),this._cursors=new UO(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=ms(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new $O(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const i=this._autoClosedActions[t];i.isValid(e)||(i.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,i,n){let r=!1;const o=this.context.cursorConfig.multiCursorLimit;n!==null&&n.length>o&&(n=n.slice(0,o),r=!0);const a=N1.from(this._model,this);return this._cursors.setStates(n),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,i,a,r)}setCursorColumnSelectData(e){this._columnSelectData=e}revealAll(e,t,i,n,r,o){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=Q.fromPositions(a[0],a[0]),e.emitViewEvent(new T1(t,i,l,c,n,r,o))}revealPrimary(e,t,i,n,r,o){const l=[this._cursors.getPrimaryCursor().viewState.selection];e.emitViewEvent(new T1(t,i,null,l,n,r,o))}saveState(){const e=[],t=this._cursors.getSelections();for(let i=0,n=t.length;i<n;i++){const r=t[i];e.push({inSelectionMode:!r.isEmpty(),selectionStart:{lineNumber:r.selectionStartLineNumber,column:r.selectionStartColumn},position:{lineNumber:r.positionLineNumber,column:r.positionColumn}})}return e}restoreState(e,t){const i=[];for(let n=0,r=t.length;n<r;n++){const o=t[n];let a=1,l=1;o.position&&o.position.lineNumber&&(a=o.position.lineNumber),o.position&&o.position.column&&(l=o.position.column);let c=a,u=l;o.selectionStart&&o.selectionStart.lineNumber&&(c=o.selectionStart.lineNumber),o.selectionStart&&o.selectionStart.column&&(u=o.selectionStart.column),i.push({selectionStartLineNumber:c,selectionStartColumn:u,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,Bt.fromModelSelections(i)),this.revealAll(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof IH){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const i=t.rawContentChangedEvent;if(this._knownModelVersionId=i.versionId,this._isHandling)return;const n=i.containsEvent(1);if(this._prevEditOperationType=0,n)this._cursors.dispose(),this._cursors=new UO(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&i.resultingSelection&&i.resultingSelection.length>0){const r=Bt.fromModelSelections(i.resultingSelection);this.setStates(e,"modelChange",i.isUndoing?5:i.isRedoing?6:2,r)&&this.revealAll(e,"modelChange",!1,0,!0,0)}else{const r=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Bt.fromModelSelections(r))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),i=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:i.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,i)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,i,n){this.setStates(e,t,n,Bt.fromModelSelections(i))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const i=[],n=[];for(let a=0,l=e.length;a<l;a++)i.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),n.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const r=this._model.deltaDecorations([],i),o=this._model.deltaDecorations([],n);this._autoClosedActions.push(new qO(this._model,r,o))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=Rpe.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const i=[],n=[];for(let r=0;r<e.commands.length;r++){const o=e.commands[r];o instanceof l9&&o.enclosingRange&&o.closeCharacterRange&&(i.push(o.closeCharacterRange),n.push(o.enclosingRange))}i.length>0&&this._pushAutoClosedAction(i,n),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,i,n,r){const o=N1.from(this._model,this);if(o.equals(n))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new fpe(l,a,i)),!n||n.cursorState.length!==o.cursorState.length||o.cursorState.some((c,u)=>!c.modelState.equals(n.cursorState[u].modelState))){const c=n?n.cursorState.map(d=>d.modelState.selection):null,u=n?n.modelVersionId:0;e.emitOutgoingEvent(new zy(c,a,u,o.modelVersionId,t||"keyboard",i,r))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let i=0,n=e.length;i<n;i++){const r=e[i];if(!r.text||r.text.indexOf(`
`)>=0)return null;const o=r.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;const a=o[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,u=r.text.length-o[2].length-1,d=r.text.lastIndexOf(c,u-1);if(d===-1)return null;t.push([d,u])}return t}executeEdits(e,t,i,n){let r=null;t==="snippet"&&(r=this._findAutoClosingPairs(i)),r&&(i[0]._isTracked=!0);const o=[],a=[],l=this._model.pushEditOperations(this.getSelections(),i,c=>{if(r)for(let d=0,g=r.length;d<g;d++){const[m,_]=r[d],v=c[d],w=v.range.startLineNumber,y=v.range.startColumn-1+m,S=v.range.startColumn-1+_;o.push(new Q(w,S+1,w,S+2)),a.push(new Q(w,y+1,w,S+2))}const u=n(c);return u&&(this._isHandling=!0),u});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),o.length>0&&this._pushAutoClosedAction(o,a)}_executeEdit(e,t,i,n=0){if(this.context.cursorConfig.readOnly)return;const r=N1.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(o){_i(o)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,i,n,r,!1)&&this.revealAll(t,i,!1,0,!0,0)}getAutoClosedCharacters(){return qO.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new I1(this._model,this.getSelections())}endComposition(e,t){const i=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(Ud.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,i,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,i){this._executeEdit(()=>{if(i==="keyboard"){const n=t.length;let r=0;for(;r<n;){const o=g8(t,r),a=t.substr(r,o);this._executeEditOperation(Ud.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),r+=o}}else this._executeEditOperation(Ud.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,i)}compositionType(e,t,i,n,r,o){if(t.length===0&&i===0&&n===0){if(r!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new wi(c.lineNumber,c.column+r,c.lineNumber,c.column+r)});this.setSelections(e,o,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(Ud.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,i,n,r))},e,o)}paste(e,t,i,n,r){this._executeEdit(()=>{this._executeEditOperation(Ud.paste(this.context.cursorConfig,this._model,this.getSelections(),t,i,n||[]))},e,r,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(Pf.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,i){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Lr(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}executeCommands(e,t,i){this._executeEdit(()=>{this._executeEditOperation(new Lr(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}}class N1{static from(e,t){return new N1(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,i=this.cursorState.length;t<i;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class qO{static getAllAutoClosedCharacters(e){let t=[];for(const i of e)t=t.concat(i.getAutoClosedCharactersRanges());return t}constructor(e,t,i){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=i}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const i=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);i&&e.push(i)}return e}isValid(e){const t=[];for(let i=0;i<this._autoClosedEnclosingDecorations.length;i++){const n=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[i]);if(n&&(t.push(n),n.startLineNumber!==n.endLineNumber))return!1}t.sort(Q.compareRangesUsingStarts),e.sort(Q.compareRangesUsingStarts);for(let i=0;i<e.length;i++)if(i>=t.length||!t[i].strictContainsRange(e[i]))return!1;return!0}}class Rpe{static executeCommands(e,t,i){const n={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},r=this._innerExecuteCommands(n,i);for(let o=0,a=n.trackedRanges.length;o<a;o++)n.model._setTrackedRange(n.trackedRanges[o],null,0);return r}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const i=this._getEditOperations(e,t);if(i.operations.length===0)return null;const n=i.operations,r=this._getLoserCursorMap(n);if(r.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const o=[];for(let c=0,u=n.length;c<u;c++)r.hasOwnProperty(n[c].identifier.major.toString())||o.push(n[c]);i.hadTrackedEditOperation&&o.length>0&&(o[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,o,c=>{const u=[];for(let m=0;m<e.selectionsBefore.length;m++)u[m]=[];for(const m of c)m.identifier&&u[m.identifier.major].push(m);const d=(m,_)=>m.identifier.minor-_.identifier.minor,g=[];for(let m=0;m<e.selectionsBefore.length;m++)u[m].length>0?(u[m].sort(d),g[m]=t[m].computeCursorState(e.model,{getInverseEditOperations:()=>u[m],getTrackedSelection:_=>{const v=parseInt(_,10),w=e.model._getTrackedRange(e.trackedRanges[v]);return e.trackedRangesDirection[v]===0?new wi(w.startLineNumber,w.startColumn,w.endLineNumber,w.endColumn):new wi(w.endLineNumber,w.endColumn,w.startLineNumber,w.startColumn)}})):g[m]=e.selectionsBefore[m];return g});a||(a=e.selectionsBefore);const l=[];for(const c in r)r.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,u)=>u-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,i=e.length;t<i;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let i=[],n=!1;for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a){const l=this._getEditOperationsFromCommand(e,r,a);i=i.concat(l.operations),n=n||l.hadTrackedEditOperation}}return{operations:i,hadTrackedEditOperation:n}}static _getEditOperationsFromCommand(e,t,i){const n=[];let r=0;const o=(d,g,m=!1)=>{Q.isEmpty(d)&&g===""||n.push({identifier:{major:t,minor:r++},range:d,text:g,forceMoveMarkers:m,isAutoWhitespaceEdit:i.insertsAutoWhitespace})};let a=!1;const u={addEditOperation:o,addTrackedEditOperation:(d,g,m)=>{a=!0,o(d,g,m)},trackSelection:(d,g)=>{const m=wi.liftSelection(d);let _;if(m.isEmpty())if(typeof g=="boolean")g?_=2:_=3;else{const y=e.model.getLineMaxColumn(m.startLineNumber);m.startColumn===y?_=2:_=3}else _=1;const v=e.trackedRanges.length,w=e.model._setTrackedRange(null,m,_);return e.trackedRanges[v]=w,e.trackedRangesDirection[v]=m.getDirection(),v.toString()}};try{i.getEditOperations(e.model,u)}catch(d){return _i(d),{operations:[],hadTrackedEditOperation:!1}}return{operations:n,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((i,n)=>-Q.compareRangesUsingEnds(i.range,n.range));const t={};for(let i=1;i<e.length;i++){const n=e[i-1],r=e[i];if(Q.getStartPosition(n.range).isBefore(Q.getEndPosition(r.range))){let o;n.identifier.major>r.identifier.major?o=n.identifier.major:o=r.identifier.major,t[o.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===o&&(e.splice(a,1),a<i&&i--,a--);i>0&&i--}}return t}}class Ape{constructor(e,t,i){this.text=e,this.startSelection=t,this.endSelection=i}}class I1{static _capture(e,t){const i=[];for(const n of t){if(n.startLineNumber!==n.endLineNumber)return null;i.push(new Ape(e.getLineContent(n.startLineNumber),n.startColumn-1,n.endColumn-1))}return i}constructor(e,t){this._original=I1._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const i=I1._capture(e,t);if(!i||this._original.length!==i.length)return null;const n=[];for(let r=0,o=this._original.length;r<o;r++)n.push(I1._deduceOutcome(this._original[r],i[r]));return n}static _deduceOutcome(e,t){const i=Math.min(e.startSelection,t.startSelection,t3(e.text,t.text)),n=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,i3(e.text,t.text)),r=e.text.substring(i,e.text.length-n),o=t.text.substring(i,t.text.length-n);return new ome(r,e.startSelection-i,e.endSelection-i,o,t.startSelection-i,t.endSelection-i)}}class Ppe{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,i=this._changes,n=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,i,n)}}class Ope{constructor(e,t,i,n,r){this.id=e,this.afterLineNumber=t,this.ordinal=i,this.height=n,this.minWidth=r,this.prefixSum=0}}var Th;let Fpe=(Th=class{constructor(e,t,i,n){this._instanceId=kW(++Th.INSTANCE_COUNT),this._pendingChanges=new Ppe,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=i,this._paddingBottom=n}static findInsertionIndex(e,t,i){let n=0,r=e.length;for(;n<r;){const o=n+r>>>1;t===e[o].afterLineNumber?i<e[o].ordinal?r=o:n=o+1:t<e[o].afterLineNumber?r=o:n=o+1}return n}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(n,r,o,a)=>{t=!0,n=n|0,r=r|0,o=o|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new Ope(l,n,r,o,a)),l},changeOneWhitespace:(n,r,o)=>{t=!0,r=r|0,o=o|0,this._pendingChanges.change({id:n,newAfterLineNumber:r,newHeight:o})},removeWhitespace:n=>{t=!0,this._pendingChanges.remove({id:n})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,i){if((e.length>0||i.length>0)&&(this._minWidth=-1),e.length+t.length+i.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of i){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const n=new Set;for(const l of i)n.add(l.id);const r=new Map;for(const l of t)r.set(l.id,l);const o=l=>{const c=[];for(const u of l)if(!n.has(u.id)){if(r.has(u.id)){const d=r.get(u.id);u.afterLineNumber=d.newAfterLineNumber,u.height=d.newHeight}c.push(u)}return c},a=o(this._arr).concat(o(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=Th.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let i=0,n=t.length;i<n;i++)if(t[i].id===e)return i;return-1}_changeOneWhitespace(e,t,i){const n=this._findWhitespaceIndex(e);if(n!==-1&&(this._arr[n].height!==i&&(this._arr[n].height=i,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,n-1)),this._arr[n].afterLineNumber!==t)){const r=this._arr[n];this._removeWhitespace(n),r.afterLineNumber=t,this._insertWhitespace(r)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let i=0,n=this._arr.length;i<n;i++){const r=this._arr[i].afterLineNumber;e<=r&&r<=t?this._arr[i].afterLineNumber=e-1:r>t&&(this._arr[i].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let i=0,n=this._arr.length;i<n;i++){const r=this._arr[i].afterLineNumber;e<=r&&(this._arr[i].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let i=t;i<=e;i++)this._arr[i].prefixSum=this._arr[i-1].prefixSum+this._arr[i].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let i=0,n=t.length-1;for(;i<=n;){const o=(n-i|0)/2|0,a=i+o|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;i=a+1|0}else n=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const i=this._findLastWhitespaceBeforeLineNumber(e)+1;return i<this._arr.length?i:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let i;e>1?i=this._lineHeight*(e-1):i=0;const n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return i+n+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const i=this._lineHeight*e,n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return i+n+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,i=this._arr.length;t<i;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,i=this._lineHeight;let n=1,r=t;for(;n<r;){const o=(n+r)/2|0,a=this.getVerticalOffsetForLineNumber(o)|0;if(e>=a+i)n=o+1;else{if(e>=a)return o;r=o}}return n>t?t:n}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this._lineHeight,n=this.getLineNumberAtOrAfterVerticalOffset(e)|0,r=this.getVerticalOffsetForLineNumber(n)|0;let o=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(n)|0;const l=this.getWhitespacesCount()|0;let c,u;a===-1?(a=l,u=o+1,c=0):(u=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let d=r,g=d;const m=5e5;let _=0;r>=m&&(_=Math.floor(r/m)*m,_=Math.floor(_/i)*i,g-=_);const v=[],w=e+(t-e)/2;let y=-1;for(let T=n;T<=o;T++){if(y===-1){const A=d,I=d+i;(A<=w&&w<I||A>w)&&(y=T)}for(d+=i,v[T-n]=g,g+=i;u===T;)g+=c,d+=c,a++,a>=l?u=o+1:(u=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(d>=t){o=T;break}}y===-1&&(y=o);const S=this.getVerticalOffsetForLineNumber(o)|0;let k=n,L=o;return k<L&&r<e&&k++,k<L&&S+i>t&&L--,{bigNumbersDelta:_,startLineNumber:n,endLineNumber:o,relativeVerticalOffset:v,centeredLineNumber:y,completelyVisibleStartLineNumber:k,completelyVisibleEndLineNumber:L,lineHeight:this._lineHeight}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let i;t>=1?i=this._lineHeight*t:i=0;let n;return e>0?n=this.getWhitespacesAccumulatedHeight(e-1):n=0,i+n+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,i=this.getWhitespacesCount()-1;if(i<0)return-1;const n=this.getVerticalOffsetForWhitespaceIndex(i),r=this.getHeightForWhitespaceIndex(i);if(e>=n+r)return-1;for(;t<i;){const o=Math.floor((t+i)/2),a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(e>=a+l)t=o+1;else{if(e>=a)return o;i=o}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const i=this.getVerticalOffsetForWhitespaceIndex(t);if(i>e)return null;const n=this.getHeightForWhitespaceIndex(t),r=this.getIdForWhitespaceIndex(t),o=this.getAfterLineNumberForWhitespaceIndex(t);return{id:r,afterLineNumber:o,verticalOffset:i,height:n}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),n=this.getWhitespacesCount()-1;if(i<0)return[];const r=[];for(let o=i;o<=n;o++){const a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(a>=t)break;r.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:a,height:l})}return r}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}},Th.INSTANCE_COUNT=0,Th);const Bpe=125;class X0{constructor(e,t,i,n){e=e|0,t=t|0,i=i|0,n=n|0,e<0&&(e=0),t<0&&(t=0),i<0&&(i=0),n<0&&(n=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=i,this.contentHeight=n,this.scrollHeight=Math.max(i,n)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class Wpe extends ve{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new re),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new X0(0,0,0,0),this._scrollable=this._register(new xp({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const i=t.contentWidth!==e.contentWidth,n=t.contentHeight!==e.contentHeight;(i||n)&&this._onDidContentSizeChange.fire(new g9(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class Vpe extends ve{constructor(e,t,i){super(),this._configuration=e;const n=this._configuration.options,r=n.get(146),o=n.get(84);this._linesLayout=new Fpe(t,n.get(67),o.top,o.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new Wpe(0,i)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new X0(r.contentWidth,0,r.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(115)?Bpe:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(67)&&this._linesLayout.setLineHeight(t.get(67)),e.hasChanged(84)){const i=t.get(84);this._linesLayout.setPadding(i.top,i.bottom)}if(e.hasChanged(146)){const i=t.get(146),n=i.contentWidth,r=i.height,o=this._scrollable.getScrollDimensions(),a=o.contentWidth;this._scrollable.setScrollDimensions(new X0(n,o.contentWidth,r,this._getContentHeight(n,r,a)))}else this._updateHeight();e.hasChanged(115)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const n=this._configuration.options.get(104);return n.horizontal===2||e>=t?0:n.horizontalScrollbarSize}_getContentHeight(e,t,i){const n=this._configuration.options;let r=this._linesLayout.getLinesTotalHeight();return n.get(106)?r+=Math.max(0,t-n.get(67)-n.get(84).bottom):n.get(104).ignoreHorizontalScrollbarInContentHeight||(r+=this._getHorizontalScrollbarHeight(e,i)),r}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,i=e.height,n=e.contentWidth;this._scrollable.setScrollDimensions(new X0(t,e.contentWidth,i,this._getContentHeight(t,i,n)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new mO(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new mO(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,i=e.get(147),n=e.get(50),r=e.get(146);if(i.isViewportWrapping){const o=e.get(73);return t>r.contentWidth+n.typicalHalfwidthCharacterWidth&&o.enabled&&o.side==="right"?t+r.verticalScrollbarWidth:t}else{const o=e.get(105)*n.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+o+r.verticalScrollbarWidth,a,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new X0(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,i=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),n=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(i);return{scrollTop:t,scrollTopWithoutViewZones:t-n,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const i=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:i.scrollLeft+e,scrollTop:i.scrollTop+t})}}class zpe{constructor(e,t,i,n,r){this.editorId=e,this.model=t,this.configuration=i,this._linesCollection=n,this._coordinatesConverter=r,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let i=this._decorationsCache[t];if(!i){const n=e.range,r=e.options;let o;if(r.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new ce(n.startLineNumber,1),0,!1,!0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new ce(n.endLineNumber,this.model.getLineMaxColumn(n.endLineNumber)),1);o=new Q(a.lineNumber,a.column,l.lineNumber,l.column)}else o=this._coordinatesConverter.convertModelRangeToViewRange(n,1);i=new pj(o,r),this._decorationsCache[t]=i}return i}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e,t=!1,i=!1){const n=new Q(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(n,t,i).inlineDecorations[0]}_getDecorationsInRange(e,t,i){const n=this._linesCollection.getDecorationsInRange(e,this.editorId,pC(this.configuration.options),t,i),r=e.startLineNumber,o=e.endLineNumber,a=[];let l=0;const c=[];for(let u=r;u<=o;u++)c[u-r]=[];for(let u=0,d=n.length;u<d;u++){const g=n[u],m=g.options;if(!Hpe(this.model,g))continue;const _=this._getOrCreateViewModelDecoration(g),v=_.range;if(a[l++]=_,m.inlineClassName){const w=new S1(v,m.inlineClassName,m.inlineClassNameAffectsLetterSpacing?3:0),y=Math.max(r,v.startLineNumber),S=Math.min(o,v.endLineNumber);for(let k=y;k<=S;k++)c[k-r].push(w)}if(m.beforeContentClassName&&r<=v.startLineNumber&&v.startLineNumber<=o){const w=new S1(new Q(v.startLineNumber,v.startColumn,v.startLineNumber,v.startColumn),m.beforeContentClassName,1);c[v.startLineNumber-r].push(w)}if(m.afterContentClassName&&r<=v.endLineNumber&&v.endLineNumber<=o){const w=new S1(new Q(v.endLineNumber,v.endColumn,v.endLineNumber,v.endColumn),m.afterContentClassName,2);c[v.endLineNumber-r].push(w)}}return{decorations:a,inlineDecorations:c}}}function Hpe(s,e){return!(e.options.hideInCommentTokens&&jpe(s,e)||e.options.hideInStringTokens&&Upe(s,e))}function jpe(s,e){return Bj(s,e.range,t=>t===1)}function Upe(s,e){return Bj(s,e.range,t=>t===2)}function Bj(s,e,t){for(let i=e.startLineNumber;i<=e.endLineNumber;i++){const n=s.tokenization.getLineTokens(i),r=i===e.startLineNumber,o=i===e.endLineNumber;let a=r?n.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<n.getCount()&&!(o&&n.getStartOffset(a)>e.endColumn-1);){if(!t(n.getStandardTokenType(a)))return!1;a++}}return!0}function CL(s,e){return s===null?e?Hy.INSTANCE:jy.INSTANCE:new $pe(s,e)}class $pe{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,i){this._assertVisible();const n=i>0?this._projectionData.breakOffsets[i-1]:0,r=this._projectionData.breakOffsets[i];let o;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,u)=>new il(0,0,c+1,this._projectionData.injectionOptions[u],0));o=il.applyInjectedText(e.getLineContent(t),a).substring(n,r)}else o=e.getValueInRange({startLineNumber:t,startColumn:n+1,endLineNumber:t,endColumn:r+1});return i>0&&(o=KO(this._projectionData.wrappedTextIndentLength)+o),o}getViewLineLength(e,t,i){return this._assertVisible(),this._projectionData.getLineLength(i)}getViewLineMinColumn(e,t,i){return this._assertVisible(),this._projectionData.getMinOutputOffset(i)+1}getViewLineMaxColumn(e,t,i){return this._assertVisible(),this._projectionData.getMaxOutputOffset(i)+1}getViewLineData(e,t,i){const n=new Array;return this.getViewLinesData(e,t,i,1,0,[!0],n),n[0]}getViewLinesData(e,t,i,n,r,o,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,u=l.injectionOptions;let d=null;if(c){d=[];let m=0,_=0;for(let v=0;v<l.getOutputLineCount();v++){const w=new Array;d[v]=w;const y=v>0?l.breakOffsets[v-1]:0,S=l.breakOffsets[v];for(;_<c.length;){const k=u[_].content.length,L=c[_]+m,T=L+k;if(L>S)break;if(y<T){const A=u[_];if(A.inlineClassName){const I=v>0?l.wrappedTextIndentLength:0,O=I+Math.max(L-y,0),F=I+Math.min(T-y,S-y);O!==F&&w.push(new Afe(O,F,A.inlineClassName,A.inlineClassNameAffectsLetterSpacing))}}if(T<=S)m+=k,_++;else break}}}let g;c?g=e.tokenization.getLineTokens(t).withInserted(c.map((m,_)=>({offset:m,text:u[_].content,tokenMetadata:es.defaultTokenMetadata}))):g=e.tokenization.getLineTokens(t);for(let m=i;m<i+n;m++){const _=r+m-i;if(!o[_]){a[_]=null;continue}a[_]=this._getViewLineData(g,d?d[m]:null,m)}}_getViewLineData(e,t,i){this._assertVisible();const n=this._projectionData,r=i>0?n.wrappedTextIndentLength:0,o=i>0?n.breakOffsets[i-1]:0,a=n.breakOffsets[i],l=e.sliceAndInflate(o,a,r);let c=l.getLineContent();i>0&&(c=KO(n.wrappedTextIndentLength)+c);const u=this._projectionData.getMinOutputOffset(i)+1,d=c.length+1,g=i+1<this.getViewLineCount(),m=i===0?0:n.breakOffsetsVisibleColumn[i-1];return new e9(c,g,u,d,m,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,i=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,i).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const i=this._projectionData.translateToOutputPosition(t-1);return e+i.outputLineIndex}normalizePosition(e,t,i){const n=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,i).toPosition(n)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}const $S=class $S{constructor(){}isVisible(){return!0}setVisible(e){return e?this:jy.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,i){return e.getLineContent(t)}getViewLineLength(e,t,i){return e.getLineLength(t)}getViewLineMinColumn(e,t,i){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,i){return e.getLineMaxColumn(t)}getViewLineData(e,t,i){const n=e.tokenization.getLineTokens(t),r=n.getLineContent();return new e9(r,!1,1,r.length+1,0,n.inflate(),null)}getViewLinesData(e,t,i,n,r,o,a){if(!o[r]){a[r]=null;return}a[r]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new ce(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,i){return t}getInjectedTextAt(e,t){return null}};$S.INSTANCE=new $S;let Hy=$S;const qS=class qS{constructor(){}isVisible(){return!1}setVisible(e){return e?Hy.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,i){throw new Error("Not supported")}getViewLineLength(e,t,i){throw new Error("Not supported")}getViewLineMinColumn(e,t,i){throw new Error("Not supported")}getViewLineMaxColumn(e,t,i){throw new Error("Not supported")}getViewLineData(e,t,i){throw new Error("Not supported")}getViewLinesData(e,t,i,n,r,o,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,i){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}};qS.INSTANCE=new qS;let jy=qS;const yL=[""];function KO(s){if(s>=yL.length)for(let e=1;e<=s;e++)yL[e]=qpe(e);return yL[s]}function qpe(s){return new Array(s+1).join(" ")}class Kpe{constructor(e,t,i,n,r,o,a,l,c,u){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=n,this.fontInfo=r,this.tabSize=o,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this.wordBreak=u,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new Zpe(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const i=this.model.getLinesContent(),n=this.model.getInjectedTextDecorations(this._editorId),r=i.length,o=this.createLineBreaksComputer(),a=new cu(il.fromDecorations(n));for(let v=0;v<r;v++){const w=a.takeWhile(y=>y.lineNumber===v+1);o.addRequest(i[v],w,t?t[v]:null)}const l=o.finalize(),c=[],u=this.hiddenAreasDecorationIds.map(v=>this.model.getDecorationRange(v)).sort(Q.compareRangesUsingStarts);let d=1,g=0,m=-1,_=m+1<u.length?g+1:r+2;for(let v=0;v<r;v++){const w=v+1;w===_&&(m++,d=u[m].startLineNumber,g=u[m].endLineNumber,_=m+1<u.length?g+1:r+2);const y=w>=d&&w<=g,S=CL(l[v],!y);c[v]=S.getViewLineCount(),this.modelLineProjections[v]=S}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new Vte(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(g=>this.model.validateRange(g)),i=Gpe(t),n=this.hiddenAreasDecorationIds.map(g=>this.model.getDecorationRange(g)).sort(Q.compareRangesUsingStarts);if(i.length===n.length){let g=!1;for(let m=0;m<i.length;m++)if(!i[m].equalsRange(n[m])){g=!0;break}if(!g)return!1}const r=i.map(g=>({range:g,options:Mn.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,r);const o=i;let a=1,l=0,c=-1,u=c+1<o.length?l+1:this.modelLineProjections.length+2,d=!1;for(let g=0;g<this.modelLineProjections.length;g++){const m=g+1;m===u&&(c++,a=o[c].startLineNumber,l=o[c].endLineNumber,u=c+1<o.length?l+1:this.modelLineProjections.length+2);let _=!1;if(m>=a&&m<=l?this.modelLineProjections[g].isVisible()&&(this.modelLineProjections[g]=this.modelLineProjections[g].setVisible(!1),_=!0):(d=!0,this.modelLineProjections[g].isVisible()||(this.modelLineProjections[g]=this.modelLineProjections[g].setVisible(!0),_=!0)),_){const v=this.modelLineProjections[g].getViewLineCount();this.projectedModelLineLineCounts.setValue(g,v)}}return d||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,i,n,r){const o=this.fontInfo.equals(e),a=this.wrappingStrategy===t,l=this.wrappingColumn===i,c=this.wrappingIndent===n,u=this.wordBreak===r;if(o&&a&&l&&c&&u)return!1;const d=o&&a&&!l&&c&&u;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=i,this.wrappingIndent=n,this.wordBreak=r;let g=null;if(d){g=[];for(let m=0,_=this.modelLineProjections.length;m<_;m++)g[m]=this.modelLineProjections[m].getProjectionData()}return this._constructLines(!1,g),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,i){if(!e||e<=this._validModelVersionId)return null;const n=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,r=this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections.splice(t-1,i-t+1),this.projectedModelLineLineCounts.removeValues(t-1,i-t+1),new sD(n,r)}onModelLinesInserted(e,t,i,n){if(!e||e<=this._validModelVersionId)return null;const r=t>2&&!this.modelLineProjections[t-2].isVisible(),o=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let u=0,d=n.length;u<d;u++){const g=CL(n[u],!r);l.push(g);const m=g.getViewLineCount();a+=m,c[u]=m}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new rD(o,o+a-1)}onModelLineChanged(e,t,i){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const n=t-1,r=this.modelLineProjections[n].getViewLineCount(),o=this.modelLineProjections[n].isVisible(),a=CL(i,o);this.modelLineProjections[n]=a;const l=this.modelLineProjections[n].getViewLineCount();let c=!1,u=0,d=-1,g=0,m=-1,_=0,v=-1;r>l?(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,d=u+l-1,_=d+1,v=_+(r-l)-1,c=!0):r<l?(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,d=u+r-1,g=d+1,m=g+(l-r)-1,c=!0):(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,d=u+l-1),this.projectedModelLineLineCounts.setValue(n,l);const w=u<=d?new Fj(u,d-u+1):null,y=g<=m?new rD(g,m):null,S=_<=v?new sD(_,v):null;return[c,w,y,S]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),a=this.model.guides.getActiveIndentGuide(n.lineNumber,r.lineNumber,o.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),i=t.index,n=t.remainder;return new GO(i+1,n)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),n=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new ce(e.modelLineNumber,n)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),n=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new ce(e.modelLineNumber,n)}getViewLineInfosGroupedByModelRanges(e,t){const i=this.getViewLineInfo(e),n=this.getViewLineInfo(t),r=new Array;let o=this.getModelStartPositionOfViewLine(i),a=new Array;for(let l=i.modelLineNumber;l<=n.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const u=l===i.modelLineNumber?i.modelLineWrappedLineIdx:0,d=l===n.modelLineNumber?n.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let g=u;g<d;g++)a.push(new GO(l,g))}if(!c.isVisible()&&o){const u=new ce(l-1,this.model.getLineMaxColumn(l-1)+1),d=Q.fromPositions(o,u);r.push(new ZO(d,a)),a=[],o=null}else c.isVisible()&&!o&&(o=new ce(l,1))}if(o){const l=Q.fromPositions(o,this.getModelEndPositionOfViewLine(n));r.push(new ZO(l,a))}return r}getViewLinesBracketGuides(e,t,i,n){const r=i?this.convertViewPositionToModelPosition(i.lineNumber,i.column):null,o=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,r,n);for(const u of a.viewLines){const g=c[u.modelLineNumber-l].map(m=>{if(m.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,m.forWrappedLinesAfterColumn).lineNumber>=u.modelLineWrappedLineIdx||m.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,m.forWrappedLinesBeforeOrAtColumn).lineNumber<u.modelLineWrappedLineIdx)return;if(!m.horizontalLine)return m;let _=-1;if(m.column!==-1){const y=this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,m.column);if(y.lineNumber===u.modelLineWrappedLineIdx)_=y.column;else if(y.lineNumber<u.modelLineWrappedLineIdx)_=this.getMinColumnOfViewLine(u);else if(y.lineNumber>u.modelLineWrappedLineIdx)return}const v=this.convertModelPositionToViewPosition(u.modelLineNumber,m.horizontalLine.endColumn),w=this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,m.horizontalLine.endColumn);return w.lineNumber===u.modelLineWrappedLineIdx?new ef(m.visibleColumn,_,m.className,new f1(m.horizontalLine.top,v.column),-1,-1):w.lineNumber<u.modelLineWrappedLineIdx||m.visibleColumn!==-1?void 0:new ef(m.visibleColumn,_,m.className,new f1(m.horizontalLine.top,this.getMaxColumnOfViewLine(u)),-1,-1)});o.push(g.filter(m=>!!m))}}return o}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),n=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let r=[];const o=[],a=[],l=i.lineNumber-1,c=n.lineNumber-1;let u=null;for(let _=l;_<=c;_++){const v=this.modelLineProjections[_];if(v.isVisible()){const w=v.getViewLineNumberOfModelPosition(0,_===l?i.column:1),y=v.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(_+1)),S=y-w+1;let k=0;S>1&&v.getViewLineMinColumn(this.model,_+1,y)===1&&(k=w===0?1:2),o.push(S),a.push(k),u===null&&(u=new ce(_+1,0))}else u!==null&&(r=r.concat(this.model.guides.getLinesIndentGuides(u.lineNumber,_)),u=null)}u!==null&&(r=r.concat(this.model.guides.getLinesIndentGuides(u.lineNumber,n.lineNumber)),u=null);const d=t-e+1,g=new Array(d);let m=0;for(let _=0,v=r.length;_<v;_++){let w=r[_];const y=Math.min(d-m,o[_]),S=a[_];let k;S===2?k=0:S===1?k=1:k=y;for(let L=0;L<y;L++)L===k&&(w=0),g[m++]=w}return g}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.projectedModelLineLineCounts.getIndexOf(e-1);let r=e;const o=n.index,a=n.remainder,l=[];for(let c=o,u=this.model.getLineCount();c<u;c++){const d=this.modelLineProjections[c];if(!d.isVisible())continue;const g=c===o?a:0;let m=d.getViewLineCount()-g,_=!1;if(r+m>t&&(_=!0,m=t-r+1),d.getViewLinesData(this.model,c+1,g,m,r-e,i,l),r+=m,_)break}return l}validateViewPosition(e,t,i){e=this._toValidViewLineNumber(e);const n=this.projectedModelLineLineCounts.getIndexOf(e-1),r=n.index,o=n.remainder,a=this.modelLineProjections[r],l=a.getViewLineMinColumn(this.model,r+1,o),c=a.getViewLineMaxColumn(this.model,r+1,o);t<l&&(t=l),t>c&&(t=c);const u=a.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new ce(r+1,u)).equals(i)?new ce(e,t):this.convertModelPositionToViewPosition(i.lineNumber,i.column)}validateViewRange(e,t){const i=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),n=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new Q(i.lineNumber,i.column,n.lineNumber,n.column)}convertViewPositionToModelPosition(e,t){const i=this.getViewLineInfo(e),n=this.modelLineProjections[i.modelLineNumber-1].getModelColumnOfViewPosition(i.modelLineWrappedLineIdx,t);return this.model.validatePosition(new ce(i.modelLineNumber,n))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),i=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new Q(t.lineNumber,t.column,i.lineNumber,i.column)}convertModelPositionToViewPosition(e,t,i=2,n=!1,r=!1){const o=this.model.validatePosition(new ce(e,t)),a=o.lineNumber,l=o.column;let c=a-1,u=!1;if(r)for(;c<this.modelLineProjections.length&&!this.modelLineProjections[c].isVisible();)c++,u=!0;else for(;c>0&&!this.modelLineProjections[c].isVisible();)c--,u=!0;if(c===0&&!this.modelLineProjections[c].isVisible())return new ce(n?0:1,1);const d=1+this.projectedModelLineLineCounts.getPrefixSum(c);let g;return u?r?g=this.modelLineProjections[c].getViewPositionOfModelPosition(d,1,i):g=this.modelLineProjections[c].getViewPositionOfModelPosition(d,this.model.getLineMaxColumn(c+1),i):g=this.modelLineProjections[a-1].getViewPositionOfModelPosition(d,l,i),g}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return Q.fromPositions(i)}else{const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),n=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new Q(i.lineNumber,i.column,n.lineNumber,n.column)}}getViewLineNumberOfModelPosition(e,t){let i=e-1;if(this.modelLineProjections[i].isVisible()){const r=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(r,t)}for(;i>0&&!this.modelLineProjections[i].isVisible();)i--;if(i===0&&!this.modelLineProjections[i].isVisible())return 1;const n=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(n,this.model.getLineMaxColumn(i+1))}getDecorationsInRange(e,t,i,n,r){const o=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),a=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(a.lineNumber-o.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new Q(o.lineNumber,1,a.lineNumber,a.column),t,i,n,r);let l=[];const c=o.lineNumber-1,u=a.lineNumber-1;let d=null;for(let v=c;v<=u;v++)if(this.modelLineProjections[v].isVisible())d===null&&(d=new ce(v+1,v===c?o.column:1));else if(d!==null){const y=this.model.getLineMaxColumn(v);l=l.concat(this.model.getDecorationsInRange(new Q(d.lineNumber,d.column,v,y),t,i,n)),d=null}d!==null&&(l=l.concat(this.model.getDecorationsInRange(new Q(d.lineNumber,d.column,a.lineNumber,a.column),t,i,n)),d=null),l.sort((v,w)=>{const y=Q.compareRangesUsingStarts(v.range,w.range);return y===0?v.id<w.id?-1:v.id>w.id?1:0:y});const g=[];let m=0,_=null;for(const v of l){const w=v.id;_!==w&&(_=w,g[m++]=v)}return g}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const i=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[i.modelLineNumber-1].normalizePosition(i.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function Gpe(s){if(s.length===0)return[];const e=s.slice();e.sort(Q.compareRangesUsingStarts);const t=[];let i=e[0].startLineNumber,n=e[0].endLineNumber;for(let r=1,o=e.length;r<o;r++){const a=e[r];a.startLineNumber>n+1?(t.push(new Q(i,1,n,1)),i=a.startLineNumber,n=a.endLineNumber):a.endLineNumber>n&&(n=a.endLineNumber)}return t.push(new Q(i,1,n,1)),t}class GO{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class ZO{constructor(e,t){this.modelRange=e,this.viewLines=t}}class Zpe{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,i,n){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,i,n)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class Ype{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new Xpe(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,i,n){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,i,n)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,i){return new sD(t,i)}onModelLinesInserted(e,t,i,n){return new rD(t,i)}onModelLineChanged(e,t,i){return[!1,new Fj(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,i){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,i){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const i=t-e+1,n=new Array(i);for(let r=0;r<i;r++)n[r]=0;return n}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),i=t.getLineContent();return new e9(i,!1,1,i.length+1,0,t.inflate(),null)}getViewLinesData(e,t,i){const n=this.model.getLineCount();e=Math.min(Math.max(1,e),n),t=Math.min(Math.max(1,t),n);const r=[];for(let o=e;o<=t;o++){const a=o-e;r[a]=i[a]?this.getViewLineData(o):null}return r}getDecorationsInRange(e,t,i,n,r){return this.model.getDecorationsInRange(e,t,i,n,r)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class Xpe{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}const _d=Ah.Right;class Qpe{constructor(e){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((e+1)*_d/8))}reset(e){const t=Math.ceil((e+1)*_d/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(e,t,i){i&&(this.persist|=1<<e-1);for(let n=t.startLineNumber;n<=t.endLineNumber;n++){const r=_d*n+(e-1);this.lanes[r>>>3]|=1<<r%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(n))}}getLanesAtLine(e){const t=[];let i=_d*e;for(let n=0;n<_d;n++)(this.persist&1<<n||this.lanes[i>>>3]&1<<i%8)&&t.push(n+1),i++;return t.length?t:[Ah.Center]}countAtLine(e){let t=_d*e,i=0;for(let n=0;n<_d;n++)(this.persist&1<<n||this.lanes[t>>>3]&1<<t%8)&&i++,t++;return i}}let Jpe=class extends ve{constructor(e,t,i,n,r,o,a,l,c,u){if(super(),this.languageConfigurationService=a,this._themeService=l,this._attachedView=c,this._transactionalTarget=u,this.hiddenAreasModel=new t0e,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=i,this._eventDispatcher=new Cpe,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new Pg(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new ir(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=_9.create(this.model),this.glyphLanes=new Qpe(0),this.model.isTooLargeForTokenization())this._lines=new Ype(this.model);else{const d=this._configuration.options,g=d.get(50),m=d.get(140),_=d.get(147),v=d.get(139),w=d.get(130);this._lines=new Kpe(this._editorId,this.model,n,r,g,this.model.getOptions().tabSize,m,_.wrappingColumn,v,w)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new Mpe(i,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new Vpe(this._configuration,this.getLineCount(),o)),this._register(this.viewLayout.onDidScroll(d=>{d.scrollTopChanged&&this._handleVisibleLinesChanged(),d.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new ppe(d)),this._eventDispatcher.emitOutgoingEvent(new p9(d.oldScrollWidth,d.oldScrollLeft,d.oldScrollHeight,d.oldScrollTop,d.scrollWidth,d.scrollLeft,d.scrollHeight,d.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(d=>{this._eventDispatcher.emitOutgoingEvent(d)})),this._decorations=new zpe(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(d=>{try{const g=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(g,d)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(By.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new bpe)})),this._register(this._themeService.onDidColorThemeChange(d=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new _pe(d))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new Q(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new gpe(e)),this._eventDispatcher.emitOutgoingEvent(new m9(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new upe)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new hpe)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new ce(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new XO(t,this._viewportStart.startLineDelta)}return new XO(null,0)}_onConfigurationChanged(e,t){const i=this._captureStableViewport(),n=this._configuration.options,r=n.get(50),o=n.get(140),a=n.get(147),l=n.get(139),c=n.get(130);this._lines.setWrappingSettings(r,o,a.wrappingColumn,l,c)&&(e.emitViewEvent(new mw),e.emitViewEvent(new pw),e.emitViewEvent(new pd(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(92)&&(this._decorations.reset(),e.emitViewEvent(new pd(null))),t.hasChanged(99)&&(this._decorations.reset(),e.emitViewEvent(new pd(null))),e.emitViewEvent(new dpe(t)),this.viewLayout.onConfigurationChanged(t),i.recoverViewportStart(this.coordinatesConverter,this.viewLayout),Pg.shouldRecreate(t)&&(this.cursorConfig=new Pg(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const i=this._eventDispatcher.beginEmitViewEvents();let n=!1,r=!1;const o=e instanceof uf?e.rawContentChangedEvent.changes:e.changes,a=e instanceof uf?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const d of o)switch(d.changeType){case 4:{for(let g=0;g<d.detail.length;g++){const m=d.detail[g];let _=d.injectedTexts[g];_&&(_=_.filter(v=>!v.ownerId||v.ownerId===this._editorId)),l.addRequest(m,_,null)}break}case 2:{let g=null;d.injectedText&&(g=d.injectedText.filter(m=>!m.ownerId||m.ownerId===this._editorId)),l.addRequest(d.detail,g,null);break}}const c=l.finalize(),u=new cu(c);for(const d of o)switch(d.changeType){case 1:{this._lines.onModelFlushed(),i.emitViewEvent(new mw),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),n=!0;break}case 3:{const g=this._lines.onModelLinesDeleted(a,d.fromLineNumber,d.toLineNumber);g!==null&&(i.emitViewEvent(g),this.viewLayout.onLinesDeleted(g.fromLineNumber,g.toLineNumber)),n=!0;break}case 4:{const g=u.takeCount(d.detail.length),m=this._lines.onModelLinesInserted(a,d.fromLineNumber,d.toLineNumber,g);m!==null&&(i.emitViewEvent(m),this.viewLayout.onLinesInserted(m.fromLineNumber,m.toLineNumber)),n=!0;break}case 2:{const g=u.dequeue(),[m,_,v,w]=this._lines.onModelLineChanged(a,d.lineNumber,g);r=m,_&&i.emitViewEvent(_),v&&(i.emitViewEvent(v),this.viewLayout.onLinesInserted(v.fromLineNumber,v.toLineNumber)),w&&(i.emitViewEvent(w),this.viewLayout.onLinesDeleted(w.fromLineNumber,w.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!n&&r&&(i.emitViewEvent(new pw),i.emitViewEvent(new pd(null)),this._cursor.onLineMappingChanged(i),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const i=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(i){const n=this.coordinatesConverter.convertModelPositionToViewPosition(i.getStartPosition()),r=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber);this.viewLayout.setScrollPosition({scrollTop:r+this._viewportStart.startLineDelta},1)}}try{const i=this._eventDispatcher.beginEmitViewEvents();e instanceof uf&&i.emitOutgoingEvent(new Tpe(e.contentChangedEvent)),this._cursor.onModelContentChanged(i,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let i=0,n=e.ranges.length;i<n;i++){const r=e.ranges[i],o=this.coordinatesConverter.convertModelPositionToViewPosition(new ce(r.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new ce(r.toLineNumber,this.model.getLineMaxColumn(r.toLineNumber))).lineNumber;t[i]={fromLineNumber:o,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new vpe(t)),this._eventDispatcher.emitOutgoingEvent(new Ipe(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new mpe),this.cursorConfig=new Pg(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new Epe(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new Pg(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new Dpe(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new mw),t.emitViewEvent(new pw),t.emitViewEvent(new pd(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new Pg(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new Npe(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new pd(e)),this._eventDispatcher.emitOutgoingEvent(new Lpe(e))}))}setHiddenAreas(e,t){this.hiddenAreasModel.setHiddenAreas(t,e);const i=this.hiddenAreasModel.getMergedRanges();if(i===this.previousHiddenAreas)return;this.previousHiddenAreas=i;const n=this._captureStableViewport();let r=!1;try{const o=this._eventDispatcher.beginEmitViewEvents();r=this._lines.setHiddenAreas(i),r&&(o.emitViewEvent(new mw),o.emitViewEvent(new pw),o.emitViewEvent(new pd(null)),this._cursor.onLineMappingChanged(o),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());const a=n.viewportStartModelPosition?.lineNumber;a&&i.some(c=>c.startLineNumber<=a&&a<=c.endLineNumber)||n.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),r&&this._eventDispatcher.emitOutgoingEvent(new xpe)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(146),t=this._configuration.options.get(67),i=Math.max(20,Math.round(e.height/t)),n=this.viewLayout.getLinesViewportData(),r=Math.max(1,n.completelyVisibleStartLineNumber-i),o=Math.min(this.getLineCount(),n.completelyVisibleEndLineNumber+i);return this._toModelVisibleRanges(new Q(r,this.getLineMinColumn(r),o,this.getLineMaxColumn(o)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),i=this._lines.getHiddenAreas();if(i.length===0)return[t];const n=[];let r=0,o=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let u=0,d=i.length;u<d;u++){const g=i[u].startLineNumber,m=i[u].endLineNumber;m<o||g>l||(o<g&&(n[r++]=new Q(o,a,g-1,this.model.getLineMaxColumn(g-1))),o=m+1,a=1)}return(o<l||o===l&&a<c)&&(n[r++]=new Q(o,a,l,c)),n}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,i=e.completelyVisibleEndLineNumber;return new Q(t,this.getLineMinColumn(t),i,this.getLineMaxColumn(i))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),i=t.completelyVisibleStartLineNumber,n=t.completelyVisibleEndLineNumber;return new Q(i,this.getLineMinColumn(i),n,this.getLineMaxColumn(n))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(t),n=this.coordinatesConverter.convertViewPositionToModelPosition(new ce(i,this.getLineMinColumn(i))),r=this.viewLayout.getVerticalOffsetForLineNumber(i)-t;return{scrollLeft:e.scrollLeft,firstPosition:n,firstPositionDeltaTop:r}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(t),n=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:n}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,i){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,i){return this._lines.getActiveIndentGuide(e,t,i)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,i,n){return this._lines.getViewLinesBracketGuides(e,t,i,n)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=Ur(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Vf(this.getLineContent(e));return t===-1?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const n=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,n)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const i=this.model.mightContainRTL(),n=this.model.mightContainNonBasicASCII(),r=this.getTabSize(),o=this._lines.getViewLineData(e);return o.inlineDecorations&&(t=[...t,...o.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new So(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,i,n,o.tokens,t,r,o.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,i){const n=this._lines.getViewLinesData(e,t,i);return new Rfe(this.getTabSize(),n)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,pC(this._configuration.options)),i=new e0e;for(const n of t){const r=n.options,o=r.overviewRuler;if(!o)continue;const a=o.position;if(a===0)continue;const l=o.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(n.range.startLineNumber,n.range.startColumn),u=this.coordinatesConverter.getViewLineNumberOfModelPosition(n.range.endLineNumber,n.range.endColumn);i.accept(l,r.zIndex,c,u,a)}return i.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e)t.options.overviewRuler?.invalidateCachedColor(),t.options.minimap?.invalidateCachedColor()}getValueInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(i,t)}getValueLengthInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(i,t)}modifyPosition(e,t){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e),n=this.model.modifyPosition(i,t);return this.coordinatesConverter.convertModelPositionToViewPosition(n)}deduceModelPositionRelativeToViewPosition(e,t,i){const n=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=i:t+=i);const o=this.model.getOffsetAt(n)+t;return this.model.getPositionAt(o)}getPlainTextToCopy(e,t,i){const n=i?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(Q.compareRangesUsingStarts);let r=!1,o=!1;for(const l of e)l.isEmpty()?r=!0:o=!0;if(!o){if(!t)return"";const l=e.map(u=>u.startLineNumber);let c="";for(let u=0;u<l.length;u++)u>0&&l[u-1]===l[u]||(c+=this.model.getLineContent(l[u])+n);return c}if(r&&t){const l=[];let c=0;for(const u of e){const d=u.startLineNumber;u.isEmpty()?d!==c&&l.push(this.model.getLineContent(d)):l.push(this.model.getValueInRange(u,i?2:0)),c=d}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,i?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const i=this.model.getLanguageId();if(i===pa||e.length!==1)return null;let n=e[0];if(n.isEmpty()){if(!t)return null;const u=n.startLineNumber;n=new Q(u,this.model.getLineMinColumn(u),u,this.model.getLineMaxColumn(u))}const r=this._configuration.options.get(50),o=this._getColorMap(),l=/[:;\\\/<>]/.test(r.fontFamily)||r.fontFamily===wo.fontFamily;let c;return l?c=wo.fontFamily:(c=r.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${wo.fontFamily}`),{mode:i,html:`<div style="color: ${o[1]};background-color: ${o[2]};font-family: ${c};font-weight: ${r.fontWeight};font-size: ${r.fontSize}px;line-height: ${r.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(n,o)+"</div>"}}_getHTMLToCopy(e,t){const i=e.startLineNumber,n=e.startColumn,r=e.endLineNumber,o=e.endColumn,a=this.getTabSize();let l="";for(let c=i;c<=r;c++){const u=this.model.tokenization.getLineTokens(c),d=u.getLineContent(),g=c===i?n-1:0,m=c===r?o-1:d.length;d===""?l+="<br>":l+=Hre(d,u.inflate(),t,g,m,a,$r)}return l}_getColorMap(){const e=un.getColorMap(),t=["#000000"];if(e)for(let i=1,n=e.length;i<n;i++)t[i]=Le.Format.CSS.formatHex(e[i]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,i){return this._withViewEventsCollector(n=>this._cursor.setStates(n,e,t,i))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,i=0){this._withViewEventsCollector(n=>this._cursor.setSelections(n,e,t,i))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new kpe);return}this._withViewEventsCollector(e)}executeEdits(e,t,i){this._executeCursorEdit(n=>this._cursor.executeEdits(n,e,t,i))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(i=>this._cursor.type(i,e,t))}compositionType(e,t,i,n,r){this._executeCursorEdit(o=>this._cursor.compositionType(o,e,t,i,n,r))}paste(e,t,i,n){this._executeCursorEdit(r=>this._cursor.paste(r,e,t,i,n))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(i=>this._cursor.executeCommand(i,e,t))}executeCommands(e,t){this._executeCursorEdit(i=>this._cursor.executeCommands(i,e,t))}revealAllCursors(e,t,i=!1){this._withViewEventsCollector(n=>this._cursor.revealAll(n,e,i,0,t,0))}revealPrimaryCursor(e,t,i=!1){this._withViewEventsCollector(n=>this._cursor.revealPrimary(n,e,i,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),i=new Q(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(n=>n.emitViewEvent(new T1(e,!1,i,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),i=new Q(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(n=>n.emitViewEvent(new T1(e,!1,i,null,0,!0,0)))}revealRange(e,t,i,n,r){this._withViewEventsCollector(o=>o.emitViewEvent(new T1(e,!1,i,null,n,t,r)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new wpe),this._eventDispatcher.emitOutgoingEvent(new Spe))}_withViewEventsCollector(e){return this._transactionalTarget.batchChanges(()=>{try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}})}batchEvents(e){this._withViewEventsCollector(()=>{e()})}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}};class _9{static create(e){const t=e._setTrackedRange(null,new Q(1,1,1,1),1);return new _9(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,i,n,r){this._model=e,this._viewLineNumber=t,this._isValid=i,this._modelTrackedRange=n,this._startLineDelta=r}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const i=e.coordinatesConverter.convertViewPositionToModelPosition(new ce(t,e.getLineMinColumn(t))),n=e.model._setTrackedRange(this._modelTrackedRange,new Q(i.lineNumber,i.column,i.lineNumber,i.column),1),r=e.viewLayout.getVerticalOffsetForLineNumber(t),o=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=n,this._startLineDelta=o-r}invalidate(){this._isValid=!1}}class e0e{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,i,n,r){const o=this._asMap[e];if(o){const a=o.data,l=a[a.length-3],c=a[a.length-1];if(l===r&&c+1>=i){n>c&&(a[a.length-1]=n);return}a.push(r,i,n)}else{const a=new T_(e,t,[r,i,n]);this._asMap[e]=a,this.asArray.push(a)}}}class t0e{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const i=this.hiddenAreas.get(e);i&&YO(i,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce((t,i)=>i0e(t,i),[]);return YO(this.ranges,e)?this.ranges:(this.ranges=e,this.ranges)}}function i0e(s,e){const t=[];let i=0,n=0;for(;i<s.length&&n<e.length;){const r=s[i],o=e[n];if(r.endLineNumber<o.startLineNumber-1)t.push(s[i++]);else if(o.endLineNumber<r.startLineNumber-1)t.push(e[n++]);else{const a=Math.min(r.startLineNumber,o.startLineNumber),l=Math.max(r.endLineNumber,o.endLineNumber);t.push(new Q(a,1,l,1)),i++,n++}}for(;i<s.length;)t.push(s[i++]);for(;n<e.length;)t.push(e[n++]);return t}function YO(s,e){if(s.length!==e.length)return!1;for(let t=0;t<s.length;t++)if(!s[t].equalsRange(e[t]))return!1;return!0}class XO{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const i=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),n=t.getVerticalOffsetForLineNumber(i.lineNumber);t.setScrollPosition({scrollTop:n+this.startLineDelta},1)}}var n0e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},_c=function(s,e){return function(t,i){e(t,i,s)}},Ld,bf;let Uy=(bf=class extends ve{get isSimpleWidget(){return this._configuration.isSimpleWidget}get contextMenuId(){return this._configuration.contextMenuId}constructor(e,t,i,n,r,o,a,l,c,u,d,g){super(),this.languageConfigurationService=d,this._deliveryQueue=KY(),this._contributions=this._register(new ope),this._onDidDispose=this._register(new re),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new re({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new re({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new re({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new re({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new re({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new re({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new re({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new re({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new re({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new re({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new re({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new re({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new QO({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new QO({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new re({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new re({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new re({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new re({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._updateCounter=0,this._onBeginUpdate=this._register(new re),this.onBeginUpdate=this._onBeginUpdate.event,this._onEndUpdate=this._register(new re),this.onEndUpdate=this._onEndUpdate.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),r.willCreateCodeEditor();const m={...t};this._domElement=e,this._overflowWidgetsDomNode=m.overflowWidgetsDomNode,delete m.overflowWidgetsDomNode,this._id=++s0e,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(i.isSimpleWidget||!1,i.contextMenuId??(i.isSimpleWidget?fs.SimpleEditorContext:fs.EditorContext),m,u)),this._register(this._configuration.onDidChange(w=>{this._onDidChangeConfiguration.fire(w);const y=this._configuration.options;if(w.hasChanged(146)){const S=y.get(146);this._onDidLayoutChange.fire(S)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=r,this._commandService=o,this._themeService=l,this._register(new o0e(this,this._contextKeyService)),this._register(new a0e(this,this._contextKeyService,g)),this._instantiationService=this._register(n.createChild(new Tp([ai,this._contextKeyService]))),this._modelData=null,this._focusTracker=new l0e(e,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let _;Array.isArray(i.contributions)?_=i.contributions:_=xm.getEditorContributions(),this._contributions.initialize(this,_,this._instantiationService);for(const w of xm.getEditorActions()){if(this._actions.has(w.id)){_i(new Error(`Cannot have two actions with the same id ${w.id}`));continue}const y=new Pj(w.id,w.label,w.alias,w.metadata,w.precondition??void 0,S=>this._instantiationService.invokeFunction(k=>Promise.resolve(w.runEditorCommand(k,this,S))),this._contextKeyService);this._actions.set(y.id,y)}const v=()=>!this._configuration.options.get(92)&&this._configuration.options.get(36).enabled;this._register(new JQ(this._domElement,{onDragOver:w=>{if(!v())return;const y=this.getTargetAtClientPoint(w.clientX,w.clientY);y?.position&&this.showDropIndicatorAt(y.position)},onDrop:async w=>{if(!v()||(this.removeDropIndicator(),!w.dataTransfer))return;const y=this.getTargetAtClientPoint(w.clientX,w.clientY);y?.position&&this._onDropIntoEditor.fire({position:y.position,event:w})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){this._modelData?.view.writeScreenReaderContent(e)}_createConfiguration(e,t,i,n){return new V6(e,t,i,this._domElement,n)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return QE.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?nn.getWordAtPosition(this._modelData.model,this._configuration.options.get(132),this._configuration.options.get(131),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let i=0;return e&&e.lineEnding&&e.lineEnding===`
`?i=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){try{if(this._beginUpdate(),!this._modelData)return;this._modelData.model.setValue(e)}finally{this._endUpdate()}}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){try{this._beginUpdate();const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const i={oldModelUrl:this._modelData?.model.uri||null,newModelUrl:t?.uri||null};this._onWillChangeModel.fire(i);const n=this.hasTextFocus(),r=this._detachModel();this._attachModel(t),n&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(i),this._postDetachModelCleanup(r),this._contributionsDisposable=this._contributions.onAfterModelAttached()}finally{this._endUpdate()}}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,i,n){const r=e.model.validatePosition({lineNumber:t,column:i}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(o.lineNumber,n)}getTopForLineNumber(e,t=!1){return this._modelData?Ld._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?Ld._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,i,n=!1){const r=e.model.validatePosition({lineNumber:t,column:i}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber,n)}getBottomForLineNumber(e,t=!1){if(!this._modelData)return-1;const i=this._modelData.model.getLineMaxColumn(e);return Ld._getVerticalOffsetAfterPosition(this._modelData,e,i,t)}setHiddenAreas(e,t){this._modelData?.viewModel.setHiddenAreas(e.map(i=>Q.lift(i)),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return Tn.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!ce.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,n){if(!this._modelData)return;if(!Q.isIRange(e))throw new Error("Invalid arguments");const r=this._modelData.model.validateRange(e),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(r);this._modelData.viewModel.revealRange("api",i,o,t,n)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,i){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new Q(e,1,e,1),t,!1,i)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,n){if(!ce.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new Q(e.lineNumber,e.column,e.lineNumber,e.column),t,i,n)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const i=wi.isISelection(e),n=Q.isIRange(e);if(!i&&!n)throw new Error("Invalid arguments");if(i)this._setSelectionImpl(e,t);else if(n){const r={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(r,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const i=new wi(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[i])}revealLines(e,t,i=0){this._revealLines(e,t,0,i)}revealLinesInCenter(e,t,i=0){this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._revealLines(e,t,2,i)}revealLinesNearTop(e,t,i=0){this._revealLines(e,t,5,i)}_revealLines(e,t,i,n){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new Q(e,1,t,1),i,!1,n)}revealRange(e,t=0,i=!1,n=!0){this._revealRange(e,i?1:0,n,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,i,n){if(!Q.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(Q.lift(e),t,i,n)}setSelections(e,t="api",i=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let n=0,r=e.length;n<r;n++)if(!wi.isISelection(e[n]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState(),t=this._modelData.viewModel.saveCursorState(),i=this._modelData.viewModel.saveState();return{cursorState:t,viewState:i,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const i=t.cursorState;Array.isArray(i)?i.length>0&&this._modelData.viewModel.restoreCursorState(i):this._modelData.viewModel.restoreCursorState([i]),this._contributions.restoreViewState(t.contributionsState||{});const n=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(n)}}handleInitialized(){this._getViewModel()?.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions.get(e)||null}trigger(e,t,i){i=i||{};try{switch(this._beginUpdate(),t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const r=i;this._type(e,r.text||"");return}case"replacePreviousChar":{const r=i;this._compositionType(e,r.text||"",r.replaceCharCnt||0,0,0);return}case"compositionType":{const r=i;this._compositionType(e,r.text||"",r.replacePrevCharCnt||0,r.replaceNextCharCnt||0,r.positionDelta||0);return}case"paste":{const r=i;this._paste(e,r.text||"",r.pasteOnNewLine||!1,r.multicursorText||null,r.mode||null,r.clipboardEvent);return}case"cut":this._cut(e);return}const n=this.getAction(t);if(n){Promise.resolve(n.run(i)).then(void 0,_i);return}if(!this._modelData||this._triggerEditorCommand(e,t,i))return;this._triggerCommand(t,i)}finally{this._endUpdate()}}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,i,n,r){this._modelData&&this._modelData.viewModel.compositionType(t,i,n,r,e)}_paste(e,t,i,n,r,o){if(!this._modelData)return;const a=this._modelData.viewModel,l=a.getSelection().getStartPosition();a.paste(t,i,n,e);const c=a.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({clipboardEvent:o,range:new Q(l.lineNumber,l.column,c.lineNumber,c.column),languageId:r})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){const n=xm.getEditorCommand(t);return n?(i=i||{},i.source=e,this._instantiationService.invokeFunction(r=>{Promise.resolve(n.runEditorCommand(r,this,i)).then(void 0,_i)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,i){if(!this._modelData||this._configuration.options.get(92))return!1;let n;return i?Array.isArray(i)?n=()=>i:n=i:n=()=>null,this._modelData.viewModel.executeEdits(e,t,n),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new c0e(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,pC(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,pC(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.changeDecorations(i=>i.deltaDecorations(t,[])),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(146)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e,t=!1){this._configuration.observeContainer(e),t||this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id:"+e.getId()),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(i)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(i)}}addGlyphMarginWidget(e){const t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(i)}}removeGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(i)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),i=this._configuration.options,n=i.get(146),r=Ld._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),o=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+n.glyphMarginWidth+n.lineNumbersWidth+n.decorationsWidth-this.getScrollLeft();return{top:r,left:o,height:i.get(67)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.viewModel.batchEvents(()=>{this._modelData.view.render(!0,e)})}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){xs(e,this._configuration.options.get(50))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const i=e.onBeforeAttached(),n=new Jpe(this._id,this._configuration,e,d9.create(tt(this._domElement)),f9.create(this._configuration.options),a=>Kr(tt(this._domElement),a),this.languageConfigurationService,this._themeService,i,{batchChanges:a=>{try{return this._beginUpdate(),a()}finally{this._endUpdate()}}});t.push(e.onWillDispose(()=>this.setModel(null))),t.push(n.onEvent(a=>{switch(a.kind){case 0:this._onDidContentSizeChange.fire(a);break;case 1:this._editorTextFocus.setValue(a.hasFocus);break;case 2:this._onDidScrollChange.fire(a);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(a.reachedMaxCursorCount){const d=this.getOption(80),g=b("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",d);this._notificationService.prompt(Qte.Warning,g,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:b("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const l=[];for(let d=0,g=a.selections.length;d<g;d++)l[d]=a.selections[d].getPosition();const c={position:l[0],secondaryPositions:l.slice(1),reason:a.reason,source:a.source};this._onDidChangeCursorPosition.fire(c);const u={selection:a.selections[0],secondarySelections:a.selections.slice(1),modelVersionId:a.modelVersionId,oldSelections:a.oldSelections,oldModelVersionId:a.oldModelVersionId,source:a.source,reason:a.reason};this._onDidChangeCursorSelection.fire(u);break}case 7:this._onDidChangeModelDecorations.fire(a.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(a.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(a.event);break;case 10:this._onDidChangeModelContent.fire(a.event);break;case 11:this._onDidChangeModelOptions.fire(a.event);break;case 12:this._onDidChangeModelTokens.fire(a.event);break}}));const[r,o]=this._createView(n);if(o){this._domElement.appendChild(r.domNode.domNode);let a=Object.keys(this._contentWidgets);for(let l=0,c=a.length;l<c;l++){const u=a[l];r.addContentWidget(this._contentWidgets[u])}a=Object.keys(this._overlayWidgets);for(let l=0,c=a.length;l<c;l++){const u=a[l];r.addOverlayWidget(this._overlayWidgets[u])}a=Object.keys(this._glyphMarginWidgets);for(let l=0,c=a.length;l<c;l++){const u=a[l];r.addGlyphMarginWidget(this._glyphMarginWidgets[u])}r.render(!1,!0),r.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new r0e(e,n,r,o,t,i)}_createView(e){let t;this.isSimpleWidget?t={paste:(r,o,a,l)=>{this._paste("keyboard",r,o,a,l)},type:r=>{this._type("keyboard",r)},compositionType:(r,o,a,l)=>{this._compositionType("keyboard",r,o,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(r,o,a,l)=>{const c={text:r,pasteOnNewLine:o,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:r=>{const o={text:r};this._commandService.executeCommand("type",o)},compositionType:(r,o,a,l)=>{if(a||l){const c={text:r,replacePrevCharCnt:o,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:r,replaceCharCnt:o};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const i=new n4(e.coordinatesConverter);return i.onKeyDown=r=>this._onKeyDown.fire(r),i.onKeyUp=r=>this._onKeyUp.fire(r),i.onContextMenu=r=>this._onContextMenu.fire(r),i.onMouseMove=r=>this._onMouseMove.fire(r),i.onMouseLeave=r=>this._onMouseLeave.fire(r),i.onMouseDown=r=>this._onMouseDown.fire(r),i.onMouseUp=r=>this._onMouseUp.fire(r),i.onMouseDrag=r=>this._onMouseDrag.fire(r),i.onMouseDrop=r=>this._onMouseDrop.fire(r),i.onMouseDropCanceled=r=>this._onMouseDropCanceled.fire(r),i.onMouseWheel=r=>this._onMouseWheel.fire(r),[new Q6(t,this._configuration,this._themeService.getColorTheme(),e,i,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){e?.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(this._contributionsDisposable?.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&t.remove(),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new Q(e.lineNumber,e.column,e.lineNumber,e.column),options:Ld.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,t){this._contextKeyService.createKey(e,t)}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&this._onBeginUpdate.fire()}_endUpdate(){this._updateCounter--,this._updateCounter===0&&this._onEndUpdate.fire()}},Ld=bf,bf.dropIntoEditorDecorationOptions=Mn.register({description:"workbench-dnd-target",className:"dnd-target"}),bf);Uy=Ld=n0e([_c(3,hi),_c(4,An),_c(5,xo),_c(6,ai),_c(7,La),_c(8,al),_c(9,ll),_c(10,Yl),_c(11,Ci)],Uy);let s0e=0;class r0e{constructor(e,t,i,n,r,o){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=n,this.listenersToRemove=r,this.attachedView=o}dispose(){ms(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}class QO extends ve{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new re(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new re(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class Fs extends re{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class o0e extends ve{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=Be.editorSimpleInput.bindTo(t),this._editorFocus=Be.focus.bindTo(t),this._textInputFocus=Be.textInputFocus.bindTo(t),this._editorTextFocus=Be.editorTextFocus.bindTo(t),this._tabMovesFocus=Be.tabMovesFocus.bindTo(t),this._editorReadonly=Be.readOnly.bindTo(t),this._inDiffEditor=Be.inDiffEditor.bindTo(t),this._editorColumnSelection=Be.columnSelection.bindTo(t),this._hasMultipleSelections=Be.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=Be.hasNonEmptySelection.bindTo(t),this._canUndo=Be.canUndo.bindTo(t),this._canRedo=Be.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(Ty.onDidChangeTabFocus(i=>this._tabMovesFocus.set(i))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._tabMovesFocus.set(Ty.getTabFocusMode()),this._editorReadonly.set(e.get(92)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class a0e extends ve{constructor(e,t,i){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=i,this._langId=Be.languageId.bindTo(t),this._hasCompletionItemProvider=Be.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=Be.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=Be.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=Be.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=Be.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=Be.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=Be.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=Be.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=Be.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=Be.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=Be.hasReferenceProvider.bindTo(t),this._hasRenameProvider=Be.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=Be.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=Be.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=Be.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=Be.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=Be.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=Be.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInEmbeddedEditor=Be.isInEmbeddedEditor.bindTo(t);const n=()=>this._update();this._register(e.onDidChangeModel(n)),this._register(e.onDidChangeModelLanguage(n)),this._register(i.completionProvider.onDidChange(n)),this._register(i.codeActionProvider.onDidChange(n)),this._register(i.codeLensProvider.onDidChange(n)),this._register(i.definitionProvider.onDidChange(n)),this._register(i.declarationProvider.onDidChange(n)),this._register(i.implementationProvider.onDidChange(n)),this._register(i.typeDefinitionProvider.onDidChange(n)),this._register(i.hoverProvider.onDidChange(n)),this._register(i.documentHighlightProvider.onDidChange(n)),this._register(i.documentSymbolProvider.onDidChange(n)),this._register(i.referenceProvider.onDidChange(n)),this._register(i.renameProvider.onDidChange(n)),this._register(i.documentFormattingEditProvider.onDidChange(n)),this._register(i.documentRangeFormattingEditProvider.onDidChange(n)),this._register(i.signatureHelpProvider.onDidChange(n)),this._register(i.inlayHintsProvider.onDidChange(n)),n()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInEmbeddedEditor.set(e.uri.scheme===Dt.walkThroughSnippet||e.uri.scheme===Dt.vscodeChatCodeBlock)})}}class l0e extends ve{constructor(e,t){super(),this._onChange=this._register(new re),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(s_(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),t&&(this._overflowWidgetsDomNode=this._register(s_(t)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()})))}_update(){const e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){return this._hadFocus??!1}}class c0e{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,i){return this._editor.onDidChangeModelDecorations(n=>{this._isChangingDecorations||e.call(t,n)},i)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const i of this._decorationIds){const n=e.getDecorationRange(i);n&&t.push(n)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let t=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations(i=>{t=i.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(t)})}finally{this._isChangingDecorations=!1}return t}}const u0e=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),h0e=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function SL(s){return u0e+encodeURIComponent(s.toString())+h0e}const d0e=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),f0e=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function g0e(s){return d0e+encodeURIComponent(s.toString())+f0e}_u((s,e)=>{const t=s.getColor($8);t&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${SL(t)}") repeat-x bottom left; }`);const i=s.getColor(Oh);i&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${SL(i)}") repeat-x bottom left; }`);const n=s.getColor(If);n&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${SL(n)}") repeat-x bottom left; }`);const r=s.getColor(Wie);r&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${g0e(r)}") no-repeat bottom left; }`);const o=s.getColor(xle);o&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${o.rgba.a}; }`)});class $y{static capture(e){if(e.getScrollTop()===0||e.hasPendingScrollAnimation())return new $y(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,i=0;const n=e.getVisibleRanges();if(n.length>0){t=n[0].getStartPosition();const r=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-r}return new $y(e.getScrollTop(),e.getContentHeight(),t,i,e.getPosition())}constructor(e,t,i,n,r){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=i,this._visiblePositionScrollDelta=n,this._cursorPosition=r}restore(e){if(!(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i,1)}}function m0e(s,e,t,i){if(s.length===0)return e;if(e.length===0)return s;const n=[];let r=0,o=0;for(;r<s.length&&o<e.length;){const a=s[r],l=e[o],c=t(a),u=t(l);c<u?(n.push(a),r++):c>u?(n.push(l),o++):(n.push(i(a,l)),r++,o++)}for(;r<s.length;)n.push(s[r]),r++;for(;o<e.length;)n.push(e[o]),o++;return n}function qy(s,e){const t=new Qe,i=s.createDecorationsCollection();return t.add(P2({debugName:()=>`Apply decorations from ${e.debugName}`},n=>{const r=e.read(n);i.set(r)})),t.add({dispose:()=>{i.clear()}}),t}function Q0(s,e){return s.appendChild(e),bt(()=>{e.remove()})}function p0e(s,e){return s.prepend(e),bt(()=>{e.remove()})}class Wj extends ve{get width(){return this._width}get height(){return this._height}get automaticLayout(){return this._automaticLayout}constructor(e,t){super(),this._automaticLayout=!1,this.elementSizeObserver=this._register(new bj(e,t)),this._width=Zt(this,this.elementSizeObserver.getWidth()),this._height=Zt(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(i=>In(n=>{this._width.set(this.elementSizeObserver.getWidth(),n),this._height.set(this.elementSizeObserver.getHeight(),n)})))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){this._automaticLayout=e,e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function JO(s,e,t){let i=e.get(),n=i,r=i;const o=Zt("animatedValue",i);let a=-1;const l=300;let c;t.add(O2({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(d,g)=>(d.didChange(e)&&(g.animate=g.animate||d.change),!0)},(d,g)=>{c!==void 0&&(s.cancelAnimationFrame(c),c=void 0),n=r,i=e.read(d),a=Date.now()-(g.animate?0:l),u()}));function u(){const d=Date.now()-a;r=Math.floor(_0e(d,n,i-n,l)),d<l?c=s.requestAnimationFrame(u):r=i,o.set(r,void 0)}return o}function _0e(s,e,t,i){return s===i?e+t:t*(-Math.pow(2,-10*s/i)+1)+e}class v9 extends ve{constructor(e,t,i){super(),this._register(new oD(e,i)),this._register(Vh(i,{height:t.actualHeight,top:t.actualTop}))}}class am{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=Zt(this,void 0),this._actualHeight=Zt(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=i=>{this._actualTop.set(i,void 0)},this.onComputedHeight=i=>{this._actualHeight.set(i,void 0)}}}const KS=class KS{constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId=`managedOverlayWidget-${KS._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}};KS._counter=0;let oD=KS;function Vh(s,e){return ti(t=>{for(let[i,n]of Object.entries(e))n&&typeof n=="object"&&"read"in n&&(n=n.read(t)),typeof n=="number"&&(n=`${n}px`),i=i.replace(/[A-Z]/g,r=>"-"+r.toLowerCase()),s.style[i]=n})}function Ky(s,e,t,i){const n=new Qe,r=[];return n.add(Ja((o,a)=>{const l=e.read(o),c=new Map,u=new Map;t&&t(!0),s.changeViewZones(d=>{for(const g of r)d.removeZone(g),i?.delete(g);r.length=0;for(const g of l){const m=d.addZone(g);g.setZoneId&&g.setZoneId(m),r.push(m),i?.add(m),c.set(g,m)}}),t&&t(!1),a.add(O2({createEmptyChangeSummary(){return{zoneIds:[]}},handleChange(d,g){const m=u.get(d.changedObservable);return m!==void 0&&g.zoneIds.push(m),!0}},(d,g)=>{for(const m of l)m.onChange&&(u.set(m.onChange,c.get(m)),m.onChange.read(d));t&&t(!0),s.changeViewZones(m=>{for(const _ of g.zoneIds)m.layoutZone(_)}),t&&t(!1)}))})),n.add({dispose(){t&&t(!0),s.changeViewZones(o=>{for(const a of r)o.removeZone(a)}),i?.clear(),t&&t(!1)}}),n}function eF(s,e){const t=MC(e,n=>n.original.startLineNumber<=s.lineNumber);if(!t)return Q.fromPositions(s);if(t.original.endLineNumberExclusive<=s.lineNumber){const n=s.lineNumber-t.original.endLineNumberExclusive+t.modified.endLineNumberExclusive;return Q.fromPositions(new ce(n,s.column))}if(!t.innerChanges)return Q.fromPositions(new ce(t.modified.startLineNumber,1));const i=MC(t.innerChanges,n=>n.originalRange.getStartPosition().isBeforeOrEqual(s));if(!i){const n=s.lineNumber-t.original.startLineNumber+t.modified.startLineNumber;return Q.fromPositions(new ce(n,s.column))}if(i.originalRange.containsPosition(s))return i.modifiedRange;{const n=v0e(i.originalRange.getEndPosition(),s);return Q.fromPositions(n.addToPosition(i.modifiedRange.getEndPosition()))}}function v0e(s,e){return s.lineNumber===e.lineNumber?new Ph(0,e.column-s.column):new Ph(e.lineNumber-s.lineNumber,e.column-1)}function b0e(s,e){let t;return s.filter(i=>{const n=e(i,t);return t=i,n})}class Gy{static create(e,t=void 0){return new tF(e,e,t)}static createWithDisposable(e,t,i=void 0){const n=new Qe;return n.add(t),n.add(e),new tF(e,n,i)}}class tF extends Gy{constructor(e,t,i){super(),this.object=e,this._disposable=t,this._debugOwner=i,this._refCount=1,this._isDisposed=!1,this._owners=[],i&&this._addOwner(i)}_addOwner(e){e&&this._owners.push(e)}createNewRef(e){return this._refCount++,e&&this._addOwner(e),new w0e(this,e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._decreaseRefCount(this._debugOwner))}_decreaseRefCount(e){if(this._refCount--,this._refCount===0&&this._disposable.dispose(),e){const t=this._owners.indexOf(e);t!==-1&&this._owners.splice(t,1)}}}class w0e extends Gy{constructor(e,t){super(),this._base=e,this._debugOwner=t,this._isDisposed=!1}get object(){return this._base.object}createNewRef(e){return this._base.createNewRef(e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._base._decreaseRefCount(this._debugOwner))}}var b9=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},w9=function(s,e){return function(t,i){e(t,i,s)}};const C0e=Zh("diff-review-insert",$e.add,b("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),y0e=Zh("diff-review-remove",$e.remove,b("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),S0e=Zh("diff-review-close",$e.close,b("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));var qm;let nf=(qm=class extends ve{constructor(e,t,i,n,r,o,a,l,c){super(),this._parentNode=e,this._visible=t,this._setVisible=i,this._canClose=n,this._width=r,this._height=o,this._diffs=a,this._models=l,this._instantiationService=c,this._state=Lp(this,(u,d)=>{const g=this._visible.read(u);if(this._parentNode.style.visibility=g?"visible":"hidden",!g)return null;const m=d.add(this._instantiationService.createInstance(aD,this._diffs,this._models,this._setVisible,this._canClose)),_=d.add(this._instantiationService.createInstance(lD,this._parentNode,m,this._width,this._height,this._models));return{model:m,view:_}}).recomputeInitiallyAndOnChange(this._store)}next(){In(e=>{const t=this._visible.get();this._setVisible(!0,e),t&&this._state.get().model.nextGroup(e)})}prev(){In(e=>{this._setVisible(!0,e),this._state.get().model.previousGroup(e)})}close(){In(e=>{this._setVisible(!1,e)})}},qm._ttPolicy=Kf("diffReview",{createHTML:e=>e}),qm);nf=b9([w9(8,hi)],nf);let aD=class extends ve{constructor(e,t,i,n,r){super(),this._diffs=e,this._models=t,this._setVisible=i,this.canClose=n,this._accessibilitySignalService=r,this._groups=Zt(this,[]),this._currentGroupIdx=Zt(this,0),this._currentElementIdx=Zt(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((o,a)=>this._groups.read(a)[o]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((o,a)=>this.currentGroup.read(a)?.lines[o]),this._register(ti(o=>{const a=this._diffs.read(o);if(!a){this._groups.set([],void 0);return}const l=x0e(a,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());In(c=>{const u=this._models.getModifiedPosition();if(u){const d=l.findIndex(g=>u?.lineNumber<g.range.modified.endLineNumberExclusive);d!==-1&&this._currentGroupIdx.set(d,c)}this._groups.set(l,c)})})),this._register(ti(o=>{const a=this.currentElement.read(o);a?.type===er.Deleted?this._accessibilitySignalService.playSignal(Ml.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):a?.type===er.Added&&this._accessibilitySignalService.playSignal(Ml.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register(ti(o=>{const a=this.currentElement.read(o);if(a&&a.type!==er.Header){const l=a.modifiedLineNumber??a.diff.modified.startLineNumber;this._models.modifiedSetSelection(Q.fromPositions(new ce(l,1)))}}))}_goToGroupDelta(e,t){const i=this.groups.get();!i||i.length<=1||dE(t,n=>{this._currentGroupIdx.set(yt.ofLength(i.length).clipCyclic(this._currentGroupIdx.get()+e),n),this._currentElementIdx.set(0,n)})}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const t=this.currentGroup.get();!t||t.lines.length<=1||In(i=>{this._currentElementIdx.set(yt.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),i)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const t=this.currentGroup.get();if(!t)return;const i=t.lines.indexOf(e);i!==-1&&In(n=>{this._currentElementIdx.set(i,n)})}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===er.Deleted?this._models.originalReveal(Q.fromPositions(new ce(e.originalLineNumber,1))):this._models.modifiedReveal(e.type!==er.Header?Q.fromPositions(new ce(e.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};aD=b9([w9(4,Q2)],aD);const B0=3;function x0e(s,e,t){const i=[];for(const n of ZD(s,(r,o)=>o.modified.startLineNumber-r.modified.endLineNumberExclusive<2*B0)){const r=[];r.push(new L0e);const o=new dt(Math.max(1,n[0].original.startLineNumber-B0),Math.min(n[n.length-1].original.endLineNumberExclusive+B0,e+1)),a=new dt(Math.max(1,n[0].modified.startLineNumber-B0),Math.min(n[n.length-1].modified.endLineNumberExclusive+B0,t+1));HB(n,(u,d)=>{const g=new dt(u?u.original.endLineNumberExclusive:o.startLineNumber,d?d.original.startLineNumber:o.endLineNumberExclusive),m=new dt(u?u.modified.endLineNumberExclusive:a.startLineNumber,d?d.modified.startLineNumber:a.endLineNumberExclusive);g.forEach(_=>{r.push(new T0e(_,m.startLineNumber+(_-g.startLineNumber)))}),d&&(d.original.forEach(_=>{r.push(new D0e(d,_))}),d.modified.forEach(_=>{r.push(new E0e(d,_))}))});const l=n[0].modified.join(n[n.length-1].modified),c=n[0].original.join(n[n.length-1].original);i.push(new k0e(new js(l,c),r))}return i}var er;(function(s){s[s.Header=0]="Header",s[s.Unchanged=1]="Unchanged",s[s.Deleted=2]="Deleted",s[s.Added=3]="Added"})(er||(er={}));class k0e{constructor(e,t){this.range=e,this.lines=t}}class L0e{constructor(){this.type=er.Header}}class D0e{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=er.Deleted,this.modifiedLineNumber=void 0}}class E0e{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=er.Added,this.originalLineNumber=void 0}}class T0e{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=er.Unchanged}}let lD=class extends ve{constructor(e,t,i,n,r,o){super(),this._element=e,this._model=t,this._width=i,this._height=n,this._models=r,this._languageService=o,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const a=document.createElement("div");a.className="diff-review-actions",this._actionBar=this._register(new su(a)),this._register(ti(l=>{this._actionBar.clear(),this._model.canClose.read(l)&&this._actionBar.push(new tu("diffreview.close",b("label.close","Close"),"close-diff-review "+Yt.asClassName(S0e),!0,async()=>t.close()),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new Y8(this._content,{})),nr(this.domNode,this._scrollbar.getDomNode(),a),this._register(ti(l=>{this._height.read(l),this._width.read(l),this._scrollbar.scanDomNode()})),this._register(bt(()=>{nr(this.domNode)})),this._register(Vh(this.domNode,{width:this._width,height:this._height})),this._register(Vh(this._content,{width:this._width,height:this._height})),this._register(Ja((l,c)=>{this._model.currentGroup.read(l),this._render(c)})),this._register(Un(this.domNode,"keydown",l=>{(l.equals(18)||l.equals(2066)||l.equals(530))&&(l.preventDefault(),this._model.goToNextLine()),(l.equals(16)||l.equals(2064)||l.equals(528))&&(l.preventDefault(),this._model.goToPreviousLine()),(l.equals(9)||l.equals(2057)||l.equals(521)||l.equals(1033))&&(l.preventDefault(),this._model.close()),(l.equals(10)||l.equals(3))&&(l.preventDefault(),this._model.revealCurrentElementInEditor())}))}_render(e){const t=this._models.getOriginalOptions(),i=this._models.getModifiedOptions(),n=document.createElement("div");n.className="diff-review-table",n.setAttribute("role","list"),n.setAttribute("aria-label",b("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),xs(n,i.get(50)),nr(this._content,n);const r=this._models.getOriginalModel(),o=this._models.getModifiedModel();if(!r||!o)return;const a=r.getOptions(),l=o.getOptions(),c=i.get(67),u=this._model.currentGroup.get();for(const d of u?.lines||[]){if(!u)break;let g;if(d.type===er.Header){const _=document.createElement("div");_.className="diff-review-row",_.setAttribute("role","listitem");const v=u.range,w=this._model.currentGroupIndex.get(),y=this._model.groups.get().length,S=A=>A===0?b("no_lines_changed","no lines changed"):A===1?b("one_line_changed","1 line changed"):b("more_lines_changed","{0} lines changed",A),k=S(v.original.length),L=S(v.modified.length);_.setAttribute("aria-label",b({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",w+1,y,v.original.startLineNumber,k,v.modified.startLineNumber,L));const T=document.createElement("div");T.className="diff-review-cell diff-review-summary",T.appendChild(document.createTextNode(`${w+1}/${y}: @@ -${v.original.startLineNumber},${v.original.length} +${v.modified.startLineNumber},${v.modified.length} @@`)),_.appendChild(T),g=_}else g=this._createRow(d,c,this._width.get(),t,r,a,i,o,l);n.appendChild(g);const m=_t(_=>this._model.currentElement.read(_)===d);e.add(ti(_=>{const v=m.read(_);g.tabIndex=v?0:-1,v&&g.focus()})),e.add(ge(g,"focus",()=>{this._model.goToLine(d)}))}this._scrollbar.scanDomNode()}_createRow(e,t,i,n,r,o,a,l,c){const u=n.get(146),d=u.glyphMarginWidth+u.lineNumbersWidth,g=a.get(146),m=10+g.glyphMarginWidth+g.lineNumbersWidth;let _="diff-review-row",v="";const w="diff-review-spacer";let y=null;switch(e.type){case er.Added:_="diff-review-row line-insert",v=" char-insert",y=C0e;break;case er.Deleted:_="diff-review-row line-delete",v=" char-delete",y=y0e;break}const S=document.createElement("div");S.style.minWidth=i+"px",S.className=_,S.setAttribute("role","listitem"),S.ariaLevel="";const k=document.createElement("div");k.className="diff-review-cell",k.style.height=`${t}px`,S.appendChild(k);const L=document.createElement("span");L.style.width=d+"px",L.style.minWidth=d+"px",L.className="diff-review-line-number"+v,e.originalLineNumber!==void 0?L.appendChild(document.createTextNode(String(e.originalLineNumber))):L.innerText=" ",k.appendChild(L);const T=document.createElement("span");T.style.width=m+"px",T.style.minWidth=m+"px",T.style.paddingRight="10px",T.className="diff-review-line-number"+v,e.modifiedLineNumber!==void 0?T.appendChild(document.createTextNode(String(e.modifiedLineNumber))):T.innerText=" ",k.appendChild(T);const A=document.createElement("span");if(A.className=w,y){const F=document.createElement("span");F.className=Yt.asClassName(y),F.innerText="  ",A.appendChild(F)}else A.innerText="  ";k.appendChild(A);let I;if(e.modifiedLineNumber!==void 0){let F=this._getLineHtml(l,a,c.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);nf._ttPolicy&&(F=nf._ttPolicy.createHTML(F)),k.insertAdjacentHTML("beforeend",F),I=l.getLineContent(e.modifiedLineNumber)}else{let F=this._getLineHtml(r,n,o.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);nf._ttPolicy&&(F=nf._ttPolicy.createHTML(F)),k.insertAdjacentHTML("beforeend",F),I=r.getLineContent(e.originalLineNumber)}I.length===0&&(I=b("blankLine","blank"));let O="";switch(e.type){case er.Unchanged:e.originalLineNumber===e.modifiedLineNumber?O=b({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",I,e.originalLineNumber):O=b("equalLine","{0} original line {1} modified line {2}",I,e.originalLineNumber,e.modifiedLineNumber);break;case er.Added:O=b("insertLine","+ {0} modified line {1}",I,e.modifiedLineNumber);break;case er.Deleted:O=b("deleteLine","- {0} original line {1}",I,e.originalLineNumber);break}return S.setAttribute("aria-label",O),S}_getLineHtml(e,t,i,n,r){const o=e.getLineContent(n),a=t.get(50),l=es.createEmpty(o,r),c=So.isBasicASCII(o,e.mightContainNonBasicASCII()),u=So.containsRTL(o,c,e.mightContainRTL());return J2(new Np(a.isMonospace&&!t.get(33),a.canUseHalfwidthRightwardsArrow,o,!1,c,u,0,l,[],i,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(118),t.get(100),t.get(95),t.get(51)!==kf.OFF,null)).html}};lD=b9([w9(5,$n)],lD);class N0e{constructor(e){this.editors=e}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}modifiedSetSelection(e){this.editors.modified.setSelection(e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){return this.editors.modified.getPosition()??void 0}}$("diffEditor.move.border","#8b8b8b9c",b("diffEditor.move.border","The border color for text that got moved in the diff editor."));$("diffEditor.moveActive.border","#FFA500",b("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor."));$("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},b("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));const I0e=Zh("diff-insert",$e.add,b("diffInsertIcon","Line decoration for inserts in the diff editor.")),Vj=Zh("diff-remove",$e.remove,b("diffRemoveIcon","Line decoration for removals in the diff editor.")),iF=Mn.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+Yt.asClassName(I0e),marginClassName:"gutter-insert"}),nF=Mn.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+Yt.asClassName(Vj),marginClassName:"gutter-delete"}),sF=Mn.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),rF=Mn.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),oF=Mn.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),M0e=Mn.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),R0e=Mn.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),cD=Mn.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),A0e=Mn.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),P0e=Mn.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"});var zj=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},uD=function(s,e){return function(t,i){e(t,i,s)}},Dd;const Hj=Ut("diffProviderFactoryService");let hD=class{constructor(e){this.instantiationService=e}createDiffProvider(e){return this.instantiationService.createInstance(dD,e)}};hD=zj([uD(0,hi)],hD);Jt(Hj,hD,1);var wf;let dD=(wf=class{constructor(e,t,i){this.editorWorkerService=t,this.telemetryService=i,this.onDidChangeEventEmitter=new re,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){this.diffAlgorithmOnDidChangeSubscription?.dispose()}async computeDiff(e,t,i,n){if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(e,t,i,n);if(e.isDisposed()||t.isDisposed())return{changes:[],identical:!0,quitEarly:!1,moves:[]};if(e.getLineCount()===1&&e.getLineMaxColumn(1)===1)return t.getLineCount()===1&&t.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new yo(new dt(1,2),new dt(1,t.getLineCount()+1),[new go(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const r=JSON.stringify([e.uri.toString(),t.uri.toString()]),o=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(i)]),a=Dd.diffCache.get(r);if(a&&a.context===o)return a.result;const l=Wf.create(),c=await this.editorWorkerService.computeDiff(e.uri,t.uri,i,this.diffAlgorithm),u=l.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:u,timedOut:c?.quitEarly??!0,detectedMoves:i.computeMoves?c?.moves.length??0:-1}),n.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!c)throw new Error("no diff result available");return Dd.diffCache.size>10&&Dd.diffCache.delete(Dd.diffCache.keys().next().value),Dd.diffCache.set(r,{result:c,context:o}),c}setOptions(e){let t=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&(this.diffAlgorithmOnDidChangeSubscription?.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,typeof e.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),t=!0),t&&this.onDidChangeEventEmitter.fire()}},Dd=wf,wf.diffCache=new Map,wf);dD=Dd=zj([uD(1,dv),uD(2,qf)],dD);function C9(){return e5&&!!e5.VSCODE_DEV}function jj(s){if(C9()){const e=O0e();return e.add(s),{dispose(){e.delete(s)}}}else return{dispose(){}}}function O0e(){_w||(_w=new Set);const s=globalThis;return s.$hotReload_applyNewExports||(s.$hotReload_applyNewExports=e=>{const t={config:{mode:void 0},...e},i=[];for(const n of _w){const r=n(t);r&&i.push(r)}if(i.length>0)return n=>{let r=!1;for(const o of i)o(n)&&(r=!0);return r}}),_w}let _w;C9()&&jj(({oldExports:s,newSrc:e,config:t})=>{if(t.mode==="patch-prototype")return i=>{for(const n in i){const r=i[n];if(console.log(`[hot-reload] Patching prototype methods of '${n}'`,{exportedItem:r}),typeof r=="function"&&r.prototype){const o=s[n];if(o){for(const a of Object.getOwnPropertyNames(r.prototype)){const l=Object.getOwnPropertyDescriptor(r.prototype,a),c=Object.getOwnPropertyDescriptor(o.prototype,a);l?.value?.toString()!==c?.value?.toString()&&console.log(`[hot-reload] Patching prototype method '${n}.${a}'`),Object.defineProperty(o.prototype,a,l)}i[n]=o}}}return!0}});function la(s,e){return F0e([s],e),s}function F0e(s,e){C9()&&zo("reload",i=>jj(({oldExports:n})=>{if([...Object.values(n)].some(r=>s.includes(r)))return r=>(i(void 0),!0)})).read(e)}var B0e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},W0e=function(s,e){return function(t,i){e(t,i,s)}};let fD=class extends ve{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,t,i){super(),this.model=e,this._options=t,this._diffProviderFactoryService=i,this._isDiffUpToDate=Zt(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=Zt(this,void 0),this.diff=this._diff,this._unchangedRegions=Zt(this,void 0),this.unchangedRegions=_t(this,a=>this._options.hideUnchangedRegions.read(a)?this._unchangedRegions.read(a)?.regions??[]:(In(l=>{for(const c of this._unchangedRegions.get()?.regions||[])c.collapseAll(l)}),[])),this.movedTextToCompare=Zt(this,void 0),this._activeMovedText=Zt(this,void 0),this._hoveredMovedText=Zt(this,void 0),this.activeMovedText=_t(this,a=>this.movedTextToCompare.read(a)??this._hoveredMovedText.read(a)??this._activeMovedText.read(a)),this._cancellationTokenSource=new Cp,this._diffProvider=_t(this,a=>{const l=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(a)}),c=zo("onDidChange",l.onDidChange);return{diffProvider:l,onChangeSignal:c}}),this._register(bt(()=>this._cancellationTokenSource.cancel()));const n=mE("contentChangedSignal"),r=this._register(new ir(()=>n.trigger(void 0),200));this._register(ti(a=>{const l=this._unchangedRegions.read(a);if(!l||l.regions.some(_=>_.isDragged.read(a)))return;const c=l.originalDecorationIds.map(_=>e.original.getDecorationRange(_)).map(_=>_?dt.fromRangeInclusive(_):void 0),u=l.modifiedDecorationIds.map(_=>e.modified.getDecorationRange(_)).map(_=>_?dt.fromRangeInclusive(_):void 0),d=l.regions.map((_,v)=>!c[v]||!u[v]?void 0:new Ch(c[v].startLineNumber,u[v].startLineNumber,c[v].length,_.visibleLineCountTop.read(a),_.visibleLineCountBottom.read(a))).filter(Gm),g=[];let m=!1;for(const _ of ZD(d,(v,w)=>v.getHiddenModifiedRange(a).endLineNumberExclusive===w.getHiddenModifiedRange(a).startLineNumber))if(_.length>1){m=!0;const v=_.reduce((y,S)=>y+S.lineCount,0),w=new Ch(_[0].originalLineNumber,_[0].modifiedLineNumber,v,_[0].visibleLineCountTop.get(),_[_.length-1].visibleLineCountBottom.get());g.push(w)}else g.push(_[0]);if(m){const _=e.original.deltaDecorations(l.originalDecorationIds,g.map(w=>({range:w.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),v=e.modified.deltaDecorations(l.modifiedDecorationIds,g.map(w=>({range:w.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));In(w=>{this._unchangedRegions.set({regions:g,originalDecorationIds:_,modifiedDecorationIds:v},w)})}}));const o=(a,l,c)=>{const u=Ch.fromDiffs(a.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(c),this._options.hideUnchangedRegionsContextLineCount.read(c));let d;const g=this._unchangedRegions.get();if(g){const w=g.originalDecorationIds.map(L=>e.original.getDecorationRange(L)).map(L=>L?dt.fromRangeInclusive(L):void 0),y=g.modifiedDecorationIds.map(L=>e.modified.getDecorationRange(L)).map(L=>L?dt.fromRangeInclusive(L):void 0);let k=b0e(g.regions.map((L,T)=>{if(!w[T]||!y[T])return;const A=w[T].length;return new Ch(w[T].startLineNumber,y[T].startLineNumber,A,Math.min(L.visibleLineCountTop.get(),A),Math.min(L.visibleLineCountBottom.get(),A-L.visibleLineCountTop.get()))}).filter(Gm),(L,T)=>!T||L.modifiedLineNumber>=T.modifiedLineNumber+T.lineCount&&L.originalLineNumber>=T.originalLineNumber+T.lineCount).map(L=>new js(L.getHiddenOriginalRange(c),L.getHiddenModifiedRange(c)));k=js.clip(k,dt.ofLength(1,e.original.getLineCount()),dt.ofLength(1,e.modified.getLineCount())),d=js.inverse(k,e.original.getLineCount(),e.modified.getLineCount())}const m=[];if(d)for(const w of u){const y=d.filter(S=>S.original.intersectsStrict(w.originalUnchangedRange)&&S.modified.intersectsStrict(w.modifiedUnchangedRange));m.push(...w.setVisibleRanges(y,l))}else m.push(...u);const _=e.original.deltaDecorations(g?.originalDecorationIds||[],m.map(w=>({range:w.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),v=e.modified.deltaDecorations(g?.modifiedDecorationIds||[],m.map(w=>({range:w.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));this._unchangedRegions.set({regions:m,originalDecorationIds:_,modifiedDecorationIds:v},l)};this._register(e.modified.onDidChangeContent(a=>{if(this._diff.get()){const c=qc.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),r.schedule()})),this._register(e.original.onDidChangeContent(a=>{if(this._diff.get()){const c=qc.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),r.schedule()})),this._register(Ja(async(a,l)=>{this._options.hideUnchangedRegionsMinimumLineCount.read(a),this._options.hideUnchangedRegionsContextLineCount.read(a),r.cancel(),n.read(a);const c=this._diffProvider.read(a);c.onChangeSignal.read(a),la(DV,a),la(A3,a),this._isDiffUpToDate.set(!1,void 0);let u=[];l.add(e.original.onDidChangeContent(m=>{const _=qc.fromModelContentChanges(m.changes);u=ly(u,_)}));let d=[];l.add(e.modified.onDidChangeContent(m=>{const _=qc.fromModelContentChanges(m.changes);d=ly(d,_)}));let g=await c.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(a),maxComputationTimeMs:this._options.maxComputationTimeMs.read(a),computeMoves:this._options.showMoves.read(a)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||e.original.isDisposed()||e.modified.isDisposed()||(g=V0e(g,e.original,e.modified),g=(e.original,e.modified,void 0)??g,g=(e.original,e.modified,void 0)??g,In(m=>{o(g,m),this._lastDiff=g;const _=y9.fromDiffResult(g);this._diff.set(_,m),this._isDiffUpToDate.set(!0,m);const v=this.movedTextToCompare.get();this.movedTextToCompare.set(v?this._lastDiff.moves.find(w=>w.lineRangeMapping.modified.intersect(v.lineRangeMapping.modified)):void 0,m)}))}))}ensureModifiedLineIsVisible(e,t,i){if(this.diff.get()?.mappings.length===0)return;const n=this._unchangedRegions.get()?.regions||[];for(const r of n)if(r.getHiddenModifiedRange(void 0).contains(e)){r.showModifiedLine(e,t,i);return}}ensureOriginalLineIsVisible(e,t,i){if(this.diff.get()?.mappings.length===0)return;const n=this._unchangedRegions.get()?.regions||[];for(const r of n)if(r.getHiddenOriginalRange(void 0).contains(e)){r.showOriginalLine(e,t,i);return}}async waitForDiff(){await sae(this.isDiffUpToDate,e=>e)}serializeState(){return{collapsedRegions:this._unchangedRegions.get()?.regions.map(t=>({range:t.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(e){const t=e.collapsedRegions?.map(n=>dt.deserialize(n.range)),i=this._unchangedRegions.get();!i||!t||In(n=>{for(const r of i.regions)for(const o of t)if(r.modifiedUnchangedRange.intersect(o)){r.setHiddenModifiedRange(o,n);break}})}};fD=B0e([W0e(2,Hj)],fD);function V0e(s,e,t){return{changes:s.changes.map(i=>new yo(i.original,i.modified,i.innerChanges?i.innerChanges.map(n=>z0e(n,e,t)):void 0)),moves:s.moves,identical:s.identical,quitEarly:s.quitEarly}}function z0e(s,e,t){let i=s.originalRange,n=s.modifiedRange;return i.startColumn===1&&n.startColumn===1&&(i.endColumn!==1||n.endColumn!==1)&&i.endColumn===e.getLineMaxColumn(i.endLineNumber)&&n.endColumn===t.getLineMaxColumn(n.endLineNumber)&&i.endLineNumber<e.getLineCount()&&n.endLineNumber<t.getLineCount()&&(i=i.setEndPosition(i.endLineNumber+1,1),n=n.setEndPosition(n.endLineNumber+1,1)),new go(i,n)}class y9{static fromDiffResult(e){return new y9(e.changes.map(t=>new Uj(t)),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,i,n){this.mappings=e,this.movedTexts=t,this.identical=i,this.quitEarly=n}}class Uj{constructor(e){this.lineRangeMapping=e}}class Ch{static fromDiffs(e,t,i,n,r){const o=yo.inverse(e,t,i),a=[];for(const l of o){let c=l.original.startLineNumber,u=l.modified.startLineNumber,d=l.original.length;const g=c===1&&u===1,m=c+d===t+1&&u+d===i+1;(g||m)&&d>=r+n?(g&&!m&&(d-=r),m&&!g&&(c+=r,u+=r,d-=r),a.push(new Ch(c,u,d,0,0))):d>=r*2+n&&(c+=r,u+=r,d-=r*2,a.push(new Ch(c,u,d,0,0)))}return a}get originalUnchangedRange(){return dt.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return dt.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,t,i,n,r){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=i,this._visibleLineCountTop=Zt(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=Zt(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=_t(this,l=>this.visibleLineCountTop.read(l)+this.visibleLineCountBottom.read(l)===this.lineCount&&!this.isDragged.read(l)),this.isDragged=Zt(this,void 0);const o=Math.max(Math.min(n,this.lineCount),0),a=Math.max(Math.min(r,this.lineCount-n),0);sR(n===o),sR(r===a),this._visibleLineCountTop.set(o,void 0),this._visibleLineCountBottom.set(a,void 0)}setVisibleRanges(e,t){const i=[],n=new Vo(e.map(l=>l.modified)).subtractFrom(this.modifiedUnchangedRange);let r=this.originalLineNumber,o=this.modifiedLineNumber;const a=this.modifiedLineNumber+this.lineCount;if(n.ranges.length===0)this.showAll(t),i.push(this);else{let l=0;for(const c of n.ranges){const u=l===n.ranges.length-1;l++;const d=(u?a:c.endLineNumberExclusive)-o,g=new Ch(r,o,d,0,0);g.setHiddenModifiedRange(c,t),i.push(g),r=g.originalUnchangedRange.endLineNumberExclusive,o=g.modifiedUnchangedRange.endLineNumberExclusive}}return i}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return dt.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return dt.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){const i=e.startLineNumber-this.modifiedLineNumber,n=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(i,n,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(e=10,t){const i=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,i),t)}showMoreBelow(e=10,t){const i=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,i),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t,i){const n=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),r=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;t===0&&n<r||t===1?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+n,i):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+r,i)}showOriginalLine(e,t,i){const n=e-this.originalLineNumber,r=this.originalLineNumber+this.lineCount-e;t===0&&n<r||t===1?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+r-n,this.getMaxVisibleLineCountTop()),i):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+n-r,this.getMaxVisibleLineCountBottom()),i)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,i){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,i),this._visibleLineCountBottom.set(t,i)}}class H0e extends ve{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,t,i,n,r,o,a,l,c){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=i,this._diff=n,this._editor=r,this._viewLineCounts=o,this._originalTextModel=a,this._contextMenuService=l,this._clipboardService=c,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=Yt.asClassName($e.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const u=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${u}px`,this._diffActions.style.lineHeight=`${u}px`,this._marginDomNode.appendChild(this._diffActions);let d=0;const g=i.getOption(128)&&!xf,m=(_,v)=>{this._contextMenuService.showContextMenu({domForShadowRoot:g?i.getDomNode()??void 0:void 0,getAnchor:()=>({x:_,y:v}),getActions:()=>{const w=[],y=n.modified.isEmpty;return w.push(new tu("diff.clipboard.copyDeletedContent",y?n.original.length>1?b("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):b("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):n.original.length>1?b("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):b("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,async()=>{const k=this._originalTextModel.getValueInRange(n.original.toExclusiveRange());await this._clipboardService.writeText(k)})),n.original.length>1&&w.push(new tu("diff.clipboard.copyDeletedLineContent",y?b("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",n.original.startLineNumber+d):b("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",n.original.startLineNumber+d),void 0,!0,async()=>{let k=this._originalTextModel.getLineContent(n.original.startLineNumber+d);k===""&&(k=this._originalTextModel.getEndOfLineSequence()===0?`
`:`\r
`),await this._clipboardService.writeText(k)})),i.getOption(92)||w.push(new tu("diff.inline.revertChange",b("diff.inline.revertChange.label","Revert this change"),void 0,!0,async()=>{this._editor.revert(this._diff)})),w},autoSelectFirstItem:!0})};this._register(Un(this._diffActions,"mousedown",_=>{if(!_.leftButton)return;const{top:v,height:w}=$o(this._diffActions),y=Math.floor(u/3);_.preventDefault(),m(_.posx,v+w+y)})),this._register(i.onMouseMove(_=>{(_.target.type===8||_.target.type===5)&&_.target.detail.viewZoneId===this._getViewZoneId()?(d=this._updateLightBulbPosition(this._marginDomNode,_.event.browserEvent.y,u),this.visibility=!0):this.visibility=!1})),this._register(i.onMouseDown(_=>{_.event.leftButton&&(_.target.type===8||_.target.type===5)&&_.target.detail.viewZoneId===this._getViewZoneId()&&(_.event.preventDefault(),d=this._updateLightBulbPosition(this._marginDomNode,_.event.browserEvent.y,u),m(_.event.posx,_.event.posy+u))}))}_updateLightBulbPosition(e,t,i){const{top:n}=$o(e),r=t-n,o=Math.floor(r/i),a=o*i;if(this._diffActions.style.top=`${a}px`,this._viewLineCounts){let l=0;for(let c=0;c<this._viewLineCounts.length;c++)if(l+=this._viewLineCounts[c],o<l)return c}return o}}const aF=Kf("diffEditorWidget",{createHTML:s=>s});function j0e(s,e,t,i){xs(i,e.fontInfo);const n=t.length>0,r=new C2(1e4);let o=0,a=0;const l=[];for(let g=0;g<s.lineTokens.length;g++){const m=g+1,_=s.lineTokens[g],v=s.lineBreakData[g],w=fa.filter(t,m,1,Number.MAX_SAFE_INTEGER);if(v){let y=0;for(const S of v.breakOffsets){const k=_.sliceAndInflate(y,S,0);o=Math.max(o,lF(a,k,fa.extractWrapped(w,y,S),n,s.mightContainNonBasicASCII,s.mightContainRTL,e,r)),a++,y=S}l.push(v.breakOffsets.length)}else l.push(1),o=Math.max(o,lF(a,_,w,n,s.mightContainNonBasicASCII,s.mightContainRTL,e,r)),a++}o+=e.scrollBeyondLastColumn;const c=r.build(),u=aF?aF.createHTML(c):c;i.innerHTML=u;const d=o*e.typicalHalfwidthCharacterWidth;return{heightInLines:a,minWidthInPx:d,viewLineCounts:l}}class U0e{constructor(e,t,i,n){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=i,this.mightContainRTL=n}}class S9{static fromEditor(e){const t=e.getOptions(),i=t.get(50),n=t.get(146);return new S9(e.getModel()?.getOptions().tabSize||0,i,t.get(33),i.typicalHalfwidthCharacterWidth,t.get(105),t.get(67),n.decorationsWidth,t.get(118),t.get(100),t.get(95),t.get(51))}constructor(e,t,i,n,r,o,a,l,c,u,d){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=i,this.typicalHalfwidthCharacterWidth=n,this.scrollBeyondLastColumn=r,this.lineHeight=o,this.lineDecorationsWidth=a,this.stopRenderingLineAfter=l,this.renderWhitespace=c,this.renderControlCharacters=u,this.fontLigatures=d}}function lF(s,e,t,i,n,r,o,a){a.appendString('<div class="view-line'),i||a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(s*o.lineHeight)),a.appendString('px;width:1000000px;">');const l=e.getLineContent(),c=So.isBasicASCII(l,n),u=So.containsRTL(l,c,r),d=JE(new Np(o.fontInfo.isMonospace&&!o.disableMonospaceOptimizations,o.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,c,u,0,e,t,o.tabSize,0,o.fontInfo.spaceWidth,o.fontInfo.middotWidth,o.fontInfo.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==kf.OFF,null),a);return a.appendString("</div>"),d.characterMapping.getHorizontalOffset(d.characterMapping.length)}var $0e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},cF=function(s,e){return function(t,i){e(t,i,s)}};let gD=class extends ve{constructor(e,t,i,n,r,o,a,l,c,u){super(),this._targetWindow=e,this._editors=t,this._diffModel=i,this._options=n,this._diffEditorWidget=r,this._canIgnoreViewZoneUpdateEvent=o,this._origViewZonesToIgnore=a,this._modViewZonesToIgnore=l,this._clipboardService=c,this._contextMenuService=u,this._originalTopPadding=Zt(this,0),this._originalScrollOffset=Zt(this,0),this._originalScrollOffsetAnimated=JO(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=Zt(this,0),this._modifiedScrollOffset=Zt(this,0),this._modifiedScrollOffsetAnimated=JO(this._targetWindow,this._modifiedScrollOffset,this._store);const d=Zt("invalidateAlignmentsState",0),g=this._register(new ir(()=>{d.set(d.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(k=>{this._canIgnoreViewZoneUpdateEvent()||g.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(k=>{this._canIgnoreViewZoneUpdateEvent()||g.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(k=>{(k.hasChanged(147)||k.hasChanged(67))&&g.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(k=>{(k.hasChanged(147)||k.hasChanged(67))&&g.schedule()}));const m=this._diffModel.map(k=>k?Yi(this,k.model.original.onDidChangeTokens,()=>k.model.original.tokenization.backgroundTokenizationState===2):void 0).map((k,L)=>k?.read(L)),_=_t(k=>{const L=this._diffModel.read(k),T=L?.diff.read(k);if(!L||!T)return null;d.read(k);const I=this._options.renderSideBySide.read(k);return uF(this._editors.original,this._editors.modified,T.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,I)}),v=_t(k=>{const L=this._diffModel.read(k)?.movedTextToCompare.read(k);if(!L)return null;d.read(k);const T=L.changes.map(A=>new Uj(A));return uF(this._editors.original,this._editors.modified,T,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)});function w(){const k=document.createElement("div");return k.className="diagonal-fill",k}const y=this._register(new Qe);this.viewZones=Lp(this,(k,L)=>{y.clear();const T=_.read(k)||[],A=[],I=[],O=this._modifiedTopPadding.read(k);O>0&&I.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:O,showInHiddenAreas:!0,suppressMouseDown:!0});const F=this._originalTopPadding.read(k);F>0&&A.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:F,showInHiddenAreas:!0,suppressMouseDown:!0});const J=this._options.renderSideBySide.read(k),Y=J?void 0:this._editors.modified._getViewModel()?.createLineBreaksComputer();if(Y){const fe=this._editors.original.getModel();for(const X of T)if(X.diff)for(let me=X.originalRange.startLineNumber;me<X.originalRange.endLineNumberExclusive;me++){if(me>fe.getLineCount())return{orig:A,mod:I};Y?.addRequest(fe.getLineContent(me),null,null)}}const G=Y?.finalize()??[];let ie=0;const Z=this._editors.modified.getOption(67),ue=this._diffModel.read(k)?.movedTextToCompare.read(k),be=this._editors.original.getModel()?.mightContainNonBasicASCII()??!1,ye=this._editors.original.getModel()?.mightContainRTL()??!1,ae=S9.fromEditor(this._editors.modified);for(const fe of T)if(fe.diff&&!J&&(!this._options.useTrueInlineDiffRendering.read(k)||!x9(fe.diff))){if(!fe.originalRange.isEmpty){m.read(k);const me=document.createElement("div");me.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const ze=this._editors.original.getModel();if(fe.originalRange.endLineNumberExclusive-1>ze.getLineCount())return{orig:A,mod:I};const it=new U0e(fe.originalRange.mapToLineArray(Lt=>ze.tokenization.getLineTokens(Lt)),fe.originalRange.mapToLineArray(Lt=>G[ie++]),be,ye),He=[];for(const Lt of fe.diff.innerChanges||[])He.push(new S1(Lt.originalRange.delta(-(fe.diff.original.startLineNumber-1)),cD.className,0));const st=j0e(it,ae,He,me),gt=document.createElement("div");if(gt.className="inline-deleted-margin-view-zone",xs(gt,ae.fontInfo),this._options.renderIndicators.read(k))for(let Lt=0;Lt<st.heightInLines;Lt++){const ci=document.createElement("div");ci.className=`delete-sign ${Yt.asClassName(Vj)}`,ci.setAttribute("style",`position:absolute;top:${Lt*Z}px;width:${ae.lineDecorationsWidth}px;height:${Z}px;right:0;`),gt.appendChild(ci)}let St;y.add(new H0e(()=>$B(St),gt,this._editors.modified,fe.diff,this._diffEditorWidget,st.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let Lt=0;Lt<st.viewLineCounts.length;Lt++){const ci=st.viewLineCounts[Lt];ci>1&&A.push({afterLineNumber:fe.originalRange.startLineNumber+Lt,domNode:w(),heightInPx:(ci-1)*Z,showInHiddenAreas:!0,suppressMouseDown:!0})}I.push({afterLineNumber:fe.modifiedRange.startLineNumber-1,domNode:me,heightInPx:st.heightInLines*Z,minWidthInPx:st.minWidthInPx,marginDomNode:gt,setZoneId(Lt){St=Lt},showInHiddenAreas:!0,suppressMouseDown:!0})}const X=document.createElement("div");X.className="gutter-delete",A.push({afterLineNumber:fe.originalRange.endLineNumberExclusive-1,domNode:w(),heightInPx:fe.modifiedHeightInPx,marginDomNode:X,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const X=fe.modifiedHeightInPx-fe.originalHeightInPx;if(X>0){if(ue?.lineRangeMapping.original.delta(-1).deltaLength(2).contains(fe.originalRange.endLineNumberExclusive-1))continue;A.push({afterLineNumber:fe.originalRange.endLineNumberExclusive-1,domNode:w(),heightInPx:X,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let me=function(){const it=document.createElement("div");return it.className="arrow-revert-change "+Yt.asClassName($e.arrowRight),L.add(ge(it,"mousedown",He=>He.stopPropagation())),L.add(ge(it,"click",He=>{He.stopPropagation(),r.revert(fe.diff)})),at("div",{},it)};var xe=me;if(ue?.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(fe.modifiedRange.endLineNumberExclusive-1))continue;let ze;fe.diff&&fe.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(k)&&(ze=me()),I.push({afterLineNumber:fe.modifiedRange.endLineNumberExclusive-1,domNode:w(),heightInPx:-X,marginDomNode:ze,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const fe of v.read(k)??[]){if(!ue?.lineRangeMapping.original.intersect(fe.originalRange)||!ue?.lineRangeMapping.modified.intersect(fe.modifiedRange))continue;const X=fe.modifiedHeightInPx-fe.originalHeightInPx;X>0?A.push({afterLineNumber:fe.originalRange.endLineNumberExclusive-1,domNode:w(),heightInPx:X,showInHiddenAreas:!0,suppressMouseDown:!0}):I.push({afterLineNumber:fe.modifiedRange.endLineNumberExclusive-1,domNode:w(),heightInPx:-X,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:A,mod:I}});let S=!1;this._register(this._editors.original.onDidScrollChange(k=>{k.scrollLeftChanged&&!S&&(S=!0,this._editors.modified.setScrollLeft(k.scrollLeft),S=!1)})),this._register(this._editors.modified.onDidScrollChange(k=>{k.scrollLeftChanged&&!S&&(S=!0,this._editors.original.setScrollLeft(k.scrollLeft),S=!1)})),this._originalScrollTop=Yi(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=Yi(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register(ti(k=>{const L=this._originalScrollTop.read(k)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(k))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(k));L!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(L,1)})),this._register(ti(k=>{const L=this._modifiedScrollTop.read(k)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(k))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(k));L!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(L,1)})),this._register(ti(k=>{const L=this._diffModel.read(k)?.movedTextToCompare.read(k);let T=0;if(L){const A=this._editors.original.getTopForLineNumber(L.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();T=this._editors.modified.getTopForLineNumber(L.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-A}T>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(T,void 0)):T<0?(this._modifiedTopPadding.set(-T,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-T,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+T,void 0,!0)}))}};gD=$0e([cF(8,YE),cF(9,vu)],gD);function uF(s,e,t,i,n,r){const o=new cu(hF(s,i)),a=new cu(hF(e,n)),l=s.getOption(67),c=e.getOption(67),u=[];let d=0,g=0;function m(v,w){for(;;){let y=o.peek(),S=a.peek();if(y&&y.lineNumber>=v&&(y=void 0),S&&S.lineNumber>=w&&(S=void 0),!y&&!S)break;const k=y?y.lineNumber-d:Number.MAX_VALUE,L=S?S.lineNumber-g:Number.MAX_VALUE;k<L?(o.dequeue(),S={lineNumber:y.lineNumber-d+g,heightInPx:0}):k>L?(a.dequeue(),y={lineNumber:S.lineNumber-g+d,heightInPx:0}):(o.dequeue(),a.dequeue()),u.push({originalRange:dt.ofLength(y.lineNumber,1),modifiedRange:dt.ofLength(S.lineNumber,1),originalHeightInPx:l+y.heightInPx,modifiedHeightInPx:c+S.heightInPx,diff:void 0})}}for(const v of t){let L=function(T,A,I=!1){if(T<k||A<S)return;if(y)y=!1;else if(!I&&(T===k||A===S))return;const O=new dt(k,T),F=new dt(S,A);if(O.isEmpty&&F.isEmpty)return;const J=o.takeWhile(G=>G.lineNumber<T)?.reduce((G,ie)=>G+ie.heightInPx,0)??0,Y=a.takeWhile(G=>G.lineNumber<A)?.reduce((G,ie)=>G+ie.heightInPx,0)??0;u.push({originalRange:O,modifiedRange:F,originalHeightInPx:O.length*l+J,modifiedHeightInPx:F.length*c+Y,diff:v.lineRangeMapping}),k=T,S=A};var _=L;const w=v.lineRangeMapping;m(w.original.startLineNumber,w.modified.startLineNumber);let y=!0,S=w.modified.startLineNumber,k=w.original.startLineNumber;if(r)for(const T of w.innerChanges||[]){T.originalRange.startColumn>1&&T.modifiedRange.startColumn>1&&L(T.originalRange.startLineNumber,T.modifiedRange.startLineNumber);const A=s.getModel(),I=T.originalRange.endLineNumber<=A.getLineCount()?A.getLineMaxColumn(T.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;T.originalRange.endColumn<I&&L(T.originalRange.endLineNumber,T.modifiedRange.endLineNumber)}L(w.original.endLineNumberExclusive,w.modified.endLineNumberExclusive,!0),d=w.original.endLineNumberExclusive,g=w.modified.endLineNumberExclusive}return m(Number.MAX_VALUE,Number.MAX_VALUE),u}function hF(s,e){const t=[],i=[],n=s.getOption(147).wrappingColumn!==-1,r=s._getViewModel().coordinatesConverter,o=s.getOption(67);if(n)for(let l=1;l<=s.getModel().getLineCount();l++){const c=r.getModelLineViewLineCount(l);c>1&&i.push({lineNumber:l,heightInPx:o*(c-1)})}for(const l of s.getWhitespaces()){if(e.has(l.id))continue;const c=l.afterLineNumber===0?0:r.convertViewPositionToModelPosition(new ce(l.afterLineNumber,1)).lineNumber;t.push({lineNumber:c,heightInPx:l.height})}return m0e(t,i,l=>l.lineNumber,(l,c)=>({lineNumber:l.lineNumber,heightInPx:l.heightInPx+c.heightInPx}))}function x9(s){return s.innerChanges?s.innerChanges.every(e=>dF(e.modifiedRange)&&dF(e.originalRange)||e.originalRange.equalsRange(new Q(1,1,1,1))):!1}function dF(s){return s.startLineNumber===s.endLineNumber}const $1=class $1 extends ve{constructor(e,t,i,n,r){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=i,this._modifiedEditorLayoutInfo=n,this._editors=r,this._originalScrollTop=Yi(this,this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=Yi(this,this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=zo("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=Zt(this,0),this._modifiedViewZonesChangedSignal=zo("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=zo("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=Lp(this,(u,d)=>{this._element.replaceChildren();const g=this._diffModel.read(u),m=g?.diff.read(u)?.movedTexts;if(!m||m.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(u);const _=this._originalEditorLayoutInfo.read(u),v=this._modifiedEditorLayoutInfo.read(u);if(!_||!v){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(u),this._originalViewZonesChangedSignal.read(u);const w=m.map(I=>{function O(ye,ae){const xe=ae.getTopForLineNumber(ye.startLineNumber,!0),fe=ae.getTopForLineNumber(ye.endLineNumberExclusive,!0);return(xe+fe)/2}const F=O(I.lineRangeMapping.original,this._editors.original),J=this._originalScrollTop.read(u),Y=O(I.lineRangeMapping.modified,this._editors.modified),G=this._modifiedScrollTop.read(u),ie=F-J,Z=Y-G,ue=Math.min(F,Y),be=Math.max(F,Y);return{range:new yt(ue,be),from:ie,to:Z,fromWithoutScroll:F,toWithoutScroll:Y,move:I}});w.sort(SZ(ma(I=>I.fromWithoutScroll>I.toWithoutScroll,xZ),ma(I=>I.fromWithoutScroll>I.toWithoutScroll?I.fromWithoutScroll:-I.toWithoutScroll,Sh)));const y=k9.compute(w.map(I=>I.range)),S=10,k=_.verticalScrollbarWidth,L=(y.getTrackCount()-1)*10+S*2,T=k+L+(v.contentLeft-$1.movedCodeBlockPadding);let A=0;for(const I of w){const O=y.getTrack(A),F=k+S+O*10,J=15,Y=15,G=T,ie=v.glyphMarginWidth+v.lineNumbersWidth,Z=18,ue=document.createElementNS("http://www.w3.org/2000/svg","rect");ue.classList.add("arrow-rectangle"),ue.setAttribute("x",`${G-ie}`),ue.setAttribute("y",`${I.to-Z/2}`),ue.setAttribute("width",`${ie}`),ue.setAttribute("height",`${Z}`),this._element.appendChild(ue);const be=document.createElementNS("http://www.w3.org/2000/svg","g"),ye=document.createElementNS("http://www.w3.org/2000/svg","path");ye.setAttribute("d",`M 0 ${I.from} L ${F} ${I.from} L ${F} ${I.to} L ${G-Y} ${I.to}`),ye.setAttribute("fill","none"),be.appendChild(ye);const ae=document.createElementNS("http://www.w3.org/2000/svg","polygon");ae.classList.add("arrow"),d.add(ti(xe=>{ye.classList.toggle("currentMove",I.move===g.activeMovedText.read(xe)),ae.classList.toggle("currentMove",I.move===g.activeMovedText.read(xe))})),ae.setAttribute("points",`${G-Y},${I.to-J/2} ${G},${I.to} ${G-Y},${I.to+J/2}`),be.appendChild(ae),this._element.appendChild(be),A++}this.width.set(L,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(bt(()=>this._element.remove())),this._register(ti(u=>{const d=this._originalEditorLayoutInfo.read(u),g=this._modifiedEditorLayoutInfo.read(u);!d||!g||(this._element.style.left=`${d.width-d.verticalScrollbarWidth}px`,this._element.style.height=`${d.height}px`,this._element.style.width=`${d.verticalScrollbarWidth+d.contentLeft-$1.movedCodeBlockPadding+this.width.read(u)}px`)})),this._register(B2(this._state));const o=_t(u=>{const g=this._diffModel.read(u)?.diff.read(u);return g?g.movedTexts.map(m=>({move:m,original:new am(JC(m.lineRangeMapping.original.startLineNumber-1),18),modified:new am(JC(m.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register(Ky(this._editors.original,o.map(u=>u.map(d=>d.original)))),this._register(Ky(this._editors.modified,o.map(u=>u.map(d=>d.modified)))),this._register(Ja((u,d)=>{const g=o.read(u);for(const m of g)d.add(new fF(this._editors.original,m.original,m.move,"original",this._diffModel.get())),d.add(new fF(this._editors.modified,m.modified,m.move,"modified",this._diffModel.get()))}));const a=zo("original.onDidFocusEditorWidget",u=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>u(void 0),0))),l=zo("modified.onDidFocusEditorWidget",u=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>u(void 0),0)));let c="modified";this._register(O2({createEmptyChangeSummary:()=>{},handleChange:(u,d)=>(u.didChange(a)&&(c="original"),u.didChange(l)&&(c="modified"),!0)},u=>{a.read(u),l.read(u);const d=this._diffModel.read(u);if(!d)return;const g=d.diff.read(u);let m;if(g&&c==="original"){const _=this._editors.originalCursor.read(u);_&&(m=g.movedTexts.find(v=>v.lineRangeMapping.original.contains(_.lineNumber)))}if(g&&c==="modified"){const _=this._editors.modifiedCursor.read(u);_&&(m=g.movedTexts.find(v=>v.lineRangeMapping.modified.contains(_.lineNumber)))}m!==d.movedTextToCompare.get()&&d.movedTextToCompare.set(void 0,void 0),d.setActiveMovedText(m)}))}};$1.movedCodeBlockPadding=4;let jm=$1;class k9{static compute(e){const t=[],i=[];for(const n of e){let r=t.findIndex(o=>!o.intersectsStrict(n));r===-1&&(t.length>=6?r=ite(t,ma(a=>a.intersectWithRangeLength(n),Sh)):(r=t.length,t.push(new F8))),t[r].addRange(n),i.push(r)}return new k9(t.length,i)}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class fF extends v9{constructor(e,t,i,n,r){const o=Gt("div.diff-hidden-lines-widget");super(e,t,o.root),this._editor=e,this._move=i,this._kind=n,this._diffModel=r,this._nodes=Gt("div.diff-moved-code-block",{style:{marginRight:"4px"}},[Gt("div.text-content@textContent"),Gt("div.action-bar@actionBar")]),o.root.appendChild(this._nodes.root);const a=Yi(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register(Vh(this._nodes.root,{paddingRight:a.map(g=>g.verticalScrollbarWidth)}));let l;i.changes.length>0?l=this._kind==="original"?b("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):b("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):l=this._kind==="original"?b("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):b("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const c=this._register(new su(this._nodes.actionBar,{highlightToggledItems:!0})),u=new tu("",l,"",!1);c.push(u,{icon:!1,label:!0});const d=new tu("","Compare",Yt.asClassName($e.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===i?void 0:this._move,void 0)});this._register(ti(g=>{const m=this._diffModel.movedTextToCompare.read(g)===i;d.checked=m})),c.push(d,{icon:!1,label:!0})}}class q0e extends ve{constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._decorations=_t(this,r=>{const o=this._diffModel.read(r),a=o?.diff.read(r);if(!a)return null;const l=this._diffModel.read(r).movedTextToCompare.read(r),c=this._options.renderIndicators.read(r),u=this._options.showEmptyDecorations.read(r),d=[],g=[];if(!l)for(const _ of a.mappings)if(_.lineRangeMapping.original.isEmpty||d.push({range:_.lineRangeMapping.original.toInclusiveRange(),options:c?nF:rF}),_.lineRangeMapping.modified.isEmpty||g.push({range:_.lineRangeMapping.modified.toInclusiveRange(),options:c?iF:sF}),_.lineRangeMapping.modified.isEmpty||_.lineRangeMapping.original.isEmpty)_.lineRangeMapping.original.isEmpty||d.push({range:_.lineRangeMapping.original.toInclusiveRange(),options:A0e}),_.lineRangeMapping.modified.isEmpty||g.push({range:_.lineRangeMapping.modified.toInclusiveRange(),options:M0e});else{const v=this._options.useTrueInlineDiffRendering.read(r)&&x9(_.lineRangeMapping);for(const w of _.lineRangeMapping.innerChanges||[])if(_.lineRangeMapping.original.contains(w.originalRange.startLineNumber)&&d.push({range:w.originalRange,options:w.originalRange.isEmpty()&&u?P0e:cD}),_.lineRangeMapping.modified.contains(w.modifiedRange.startLineNumber)&&g.push({range:w.modifiedRange,options:w.modifiedRange.isEmpty()&&u&&!v?R0e:oF}),v){const y=o.model.original.getValueInRange(w.originalRange);g.push({range:w.modifiedRange,options:{description:"deleted-text",before:{content:y,inlineClassName:"inline-deleted-text"},zIndex:1e5,showIfCollapsed:!0}})}}if(l)for(const _ of l.changes){const v=_.original.toInclusiveRange();v&&d.push({range:v,options:c?nF:rF});const w=_.modified.toInclusiveRange();w&&g.push({range:w,options:c?iF:sF});for(const y of _.innerChanges||[])d.push({range:y.originalRange,options:cD}),g.push({range:y.modifiedRange,options:oF})}const m=this._diffModel.read(r).activeMovedText.read(r);for(const _ of a.movedTexts)d.push({range:_.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(_===m?" currentMove":""),blockPadding:[jm.movedCodeBlockPadding,0,jm.movedCodeBlockPadding,jm.movedCodeBlockPadding]}}),g.push({range:_.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(_===m?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:d,modifiedDecorations:g}}),this._register(qy(this._editors.original,this._decorations.map(r=>r?.originalDecorations||[]))),this._register(qy(this._editors.modified,this._decorations.map(r=>r?.modifiedDecorations||[])))}}class K0e{resetSash(){this._sashRatio.set(void 0,void 0)}constructor(e,t){this._options=e,this.dimensions=t,this.sashLeft=gE(this,i=>{const n=this._sashRatio.read(i)??this._options.splitViewDefaultRatio.read(i);return this._computeSashLeft(n,i)},(i,n)=>{const r=this.dimensions.width.get();this._sashRatio.set(i/r,n)}),this._sashRatio=Zt(this,void 0)}_computeSashLeft(e,t){const i=this.dimensions.width.read(t),n=Math.floor(this._options.splitViewDefaultRatio.read(t)*i),r=this._options.enableSplitViewResizing.read(t)?Math.floor(e*i):n,o=100;return i<=o*2?n:r<o?o:r>i-o?i-o:r}}class $j extends ve{constructor(e,t,i,n,r,o){super(),this._domNode=e,this._dimensions=t,this._enabled=i,this._boundarySashes=n,this.sashLeft=r,this._resetSash=o,this._sash=this._register(new Fo(this._domNode,{getVerticalSashTop:a=>0,getVerticalSashLeft:a=>this.sashLeft.get(),getVerticalSashHeight:a=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(a=>{this.sashLeft.set(this._startSashPosition+(a.currentX-a.startX),void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._resetSash())),this._register(ti(a=>{const l=this._boundarySashes.read(a);l&&(this._sash.orthogonalEndSash=l.bottom)})),this._register(ti(a=>{const l=this._enabled.read(a);this._sash.state=l?3:0,this.sashLeft.read(a),this._dimensions.height.read(a),this._sash.layout()}))}}class G0e extends ve{constructor(e,t,i){super(),this._editor=e,this._domNode=t,this.itemProvider=i,this.scrollTop=Yi(this,this._editor.onDidScrollChange,o=>this._editor.getScrollTop()),this.isScrollTopZero=this.scrollTop.map(o=>o===0),this.modelAttached=Yi(this,this._editor.onDidChangeModel,o=>this._editor.hasModel()),this.editorOnDidChangeViewZones=zo("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=zo("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=mE("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const n=this._domNode.appendChild(Gt("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),r=new ResizeObserver(()=>{In(o=>{this.domNodeSizeChanged.trigger(o)})});r.observe(this._domNode),this._register(bt(()=>r.disconnect())),this._register(ti(o=>{n.className=this.isScrollTopZero.read(o)?"":"scroll-decoration"})),this._register(ti(o=>this.render(o)))}dispose(){super.dispose(),nr(this._domNode)}render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);const t=this.scrollTop.read(e),i=this._editor.getVisibleRanges(),n=new Set(this.views.keys()),r=yt.ofStartAndLength(0,this._domNode.clientHeight);if(!r.isEmpty)for(const o of i){const a=new dt(o.startLineNumber,o.endLineNumber+1),l=this.itemProvider.getIntersectingGutterItems(a,e);In(c=>{for(const u of l){if(!u.range.intersect(a))continue;n.delete(u.id);let d=this.views.get(u.id);if(d)d.item.set(u,c);else{const v=document.createElement("div");this._domNode.appendChild(v);const w=Zt("item",u),y=this.itemProvider.createView(w,v);d=new Z0e(w,y,v),this.views.set(u.id,d)}const g=u.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(u.range.startLineNumber,!0)-t:this._editor.getBottomForLineNumber(u.range.startLineNumber-1,!1)-t,_=(u.range.endLineNumberExclusive===1?Math.max(g,this._editor.getTopForLineNumber(u.range.startLineNumber,!1)-t):Math.max(g,this._editor.getBottomForLineNumber(u.range.endLineNumberExclusive-1,!0)-t))-g;d.domNode.style.top=`${g}px`,d.domNode.style.height=`${_}px`,d.gutterItemView.layout(yt.ofStartAndLength(g,_),r)}})}for(const o of n){const a=this.views.get(o);a.gutterItemView.dispose(),a.domNode.remove(),this.views.delete(o)}}}class Z0e{constructor(e,t,i){this.item=e,this.gutterItemView=t,this.domNode=i}}class qj extends Ef{constructor(e){super(),this._getContext=e}runAction(e,t){const i=this._getContext();return super.runAction(e,i)}}class gF extends xV{constructor(e){super(),this._textModel=e}getValueOfRange(e){return this._textModel.getValueInRange(e)}get length(){const e=this._textModel.getLineCount(),t=this._textModel.getLineLength(e);return new Ph(e-1,t)}}class Y0e extends ve{constructor(e,t,i={orientation:0}){super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new ZY),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new Qe),i.hoverDelegate=i.hoverDelegate??this._register(pE()),this.options=i,this.toggleMenuAction=this._register(new O_(()=>this.toggleMenuActionViewItem?.show(),i.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new su(this.element,{orientation:i.orientation,ariaLabel:i.ariaLabel,actionRunner:i.actionRunner,allowContextMenu:i.allowContextMenu,highlightToggledItems:i.highlightToggledItems,hoverDelegate:i.hoverDelegate,actionViewItemProvider:(n,r)=>{if(n.id===O_.ID)return this.toggleMenuActionViewItem=new ty(n,n.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:Yt.asClassNameArray(i.moreIcon??$e.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(i.actionViewItemProvider){const o=i.actionViewItemProvider(n,r);if(o)return o}if(n instanceof h2){const o=new ty(n,n.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:n.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return o.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(o),this.disposables.add(this._onDidChangeDropdownVisibility.add(o.onDidChangeVisibility)),o}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(e){return this.actionBar.getAction(e)}setActions(e,t){this.clear();const i=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),i.push(this.toggleMenuAction)),i.forEach(n=>{this.actionBar.push(n,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(n)})})}getKeybindingLabel(e){return this.options.getKeyBinding?.(e)?.getLabel()??void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}const GS=class GS extends tu{constructor(e,t){t=t||b("moreActions","More Actions..."),super(GS.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}};GS.ID="toolbar.toggle.more";let O_=GS;var Kj=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},ua=function(s,e){return function(t,i){e(t,i,s)}};let mD=class extends Y0e{constructor(e,t,i,n,r,o,a,l){super(e,r,{getKeyBinding:u=>o.lookupKeybinding(u.id)??void 0,...t,allowContextMenu:!0,skipTelemetry:typeof t?.telemetrySource=="string"}),this._options=t,this._menuService=i,this._contextKeyService=n,this._contextMenuService=r,this._keybindingService=o,this._commandService=a,this._sessionDisposables=this._store.add(new Qe);const c=t?.telemetrySource;c&&this._store.add(this.actionBar.onDidRun(u=>l.publicLog2("workbenchActionExecuted",{id:u.action.id,from:c})))}setActions(e,t=[],i){this._sessionDisposables.clear();const n=e.slice(),r=t.slice(),o=[];let a=0;const l=[];let c=!1;if(this._options?.hiddenItemStrategy!==-1)for(let u=0;u<n.length;u++){const d=n[u];!(d instanceof iu)&&!(d instanceof o1)||d.hideActions&&(o.push(d.hideActions.toggle),d.hideActions.toggle.checked&&a++,d.hideActions.isHidden&&(c=!0,n[u]=void 0,this._options?.hiddenItemStrategy!==0&&(l[u]=d)))}if(this._options?.overflowBehavior!==void 0){const u=jle(new Set(this._options.overflowBehavior.exempted),ei.map(n,m=>m?.id)),d=this._options.overflowBehavior.maxItems-u.size;let g=0;for(let m=0;m<n.length;m++){const _=n[m];_&&(g++,!u.has(_.id)&&g>=d&&(n[m]=void 0,l[m]=_))}}uM(n),uM(l),super.setActions(n,$s.join(l,r)),(o.length>0||n.length>0)&&this._sessionDisposables.add(ge(this.getElement(),"contextmenu",u=>{const d=new Ya(tt(this.getElement()),u),g=this.getItemAction(d.target);if(!g)return;d.preventDefault(),d.stopPropagation();const m=[];if(g instanceof iu&&g.menuKeybinding)m.push(g.menuKeybinding);else if(!(g instanceof o1||g instanceof O_)){const v=!!this._keybindingService.lookupKeybinding(g.id);m.push(hj(this._commandService,this._keybindingService,g.id,void 0,v))}if(o.length>0){let v=!1;if(a===1&&this._options?.hiddenItemStrategy===0){v=!0;for(let w=0;w<o.length;w++)if(o[w].checked){o[w]=Sm({id:g.id,label:g.label,checked:!0,enabled:!1,run(){}});break}}if(!v&&(g instanceof iu||g instanceof o1)){if(!g.hideActions)return;m.push(g.hideActions.hide)}else m.push(Sm({id:"label",label:b("hide","Hide"),enabled:!1,run(){}}))}const _=$s.join(m,o);this._options?.resetMenu&&!i&&(i=[this._options.resetMenu]),c&&i&&(_.push(new $s),_.push(Sm({id:"resetThisMenu",label:b("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(i)}))),_.length!==0&&this._contextMenuService.showContextMenu({getAnchor:()=>d,getActions:()=>_,menuId:this._options?.contextMenu,menuActionOptions:{renderShortTitle:!0,...this._options?.menuOptions},skipTelemetry:typeof this._options?.telemetrySource=="string",contextKeyService:this._contextKeyService})}))}};mD=Kj([ua(2,$f),ua(3,ai),ua(4,vu),ua(5,ps),ua(6,xo),ua(7,qf)],mD);let Zy=class extends mD{constructor(e,t,i,n,r,o,a,l,c){super(e,{resetMenu:t,...i},n,r,o,a,l,c),this._onDidChangeMenuItems=this._store.add(new re),this.onDidChangeMenuItems=this._onDidChangeMenuItems.event;const u=this._store.add(n.createMenu(t,r,{emitEventsForSubmenuChanges:!0})),d=()=>{const g=[],m=[];Jae(u,i?.menuOptions,{primary:g,secondary:m},i?.toolbarOptions?.primaryGroup,i?.toolbarOptions?.shouldInlineSubmenu,i?.toolbarOptions?.useSeparatorsInPrimaryActions),e.classList.toggle("has-no-actions",g.length===0&&m.length===0),super.setActions(g,m)};this._store.add(u.onDidChange(()=>{d(),this._onDidChangeMenuItems.fire(this)})),d()}setActions(){throw new ri("This toolbar is populated from a menu.")}};Zy=Kj([ua(3,$f),ua(4,ai),ua(5,vu),ua(6,ps),ua(7,xo),ua(8,qf)],Zy);var Gj=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},sC=function(s,e){return function(t,i){e(t,i,s)}};const xL=[],vw=35;let pD=class extends ve{constructor(e,t,i,n,r,o,a,l,c){super(),this._diffModel=t,this._editors=i,this._options=n,this._sashLayout=r,this._boundarySashes=o,this._instantiationService=a,this._contextKeyService=l,this._menuService=c,this._menu=this._register(this._menuService.createMenu(fs.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=Yi(this,this._menu.onDidChange,()=>this._menu.getActions()),this._hasActions=this._actions.map(u=>u.length>0),this._showSash=_t(this,u=>this._options.renderSideBySide.read(u)&&this._hasActions.read(u)),this.width=_t(this,u=>this._hasActions.read(u)?vw:0),this.elements=Gt("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:vw+"px"}},[]),this._currentDiff=_t(this,u=>{const d=this._diffModel.read(u);if(!d)return;const g=d.diff.read(u)?.mappings,m=this._editors.modifiedCursor.read(u);if(m)return g?.find(_=>_.lineRangeMapping.modified.contains(m.lineNumber))}),this._selectedDiffs=_t(this,u=>{const g=this._diffModel.read(u)?.diff.read(u);if(!g)return xL;const m=this._editors.modifiedSelections.read(u);if(m.every(y=>y.isEmpty()))return xL;const _=new Vo(m.map(y=>dt.fromRangeInclusive(y))),w=g.mappings.filter(y=>y.lineRangeMapping.innerChanges&&_.intersects(y.lineRangeMapping.modified)).map(y=>({mapping:y,rangeMappings:y.lineRangeMapping.innerChanges.filter(S=>m.some(k=>Q.areIntersecting(S.modifiedRange,k)))}));return w.length===0||w.every(y=>y.rangeMappings.length===0)?xL:w}),this._register(p0e(e,this.elements.root)),this._register(ge(this.elements.root,"click",()=>{this._editors.modified.focus()})),this._register(Vh(this.elements.root,{display:this._hasActions.map(u=>u?"block":"none")})),Sl(this,u=>this._showSash.read(u)?new $j(e,this._sashLayout.dimensions,this._options.enableSplitViewResizing,this._boundarySashes,gE(this,g=>this._sashLayout.sashLeft.read(g)-vw,(g,m)=>this._sashLayout.sashLeft.set(g+vw,m)),()=>this._sashLayout.resetSash()):void 0).recomputeInitiallyAndOnChange(this._store),this._register(new G0e(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(u,d)=>{const g=this._diffModel.read(d);if(!g)return[];const m=g.diff.read(d);if(!m)return[];const _=this._selectedDiffs.read(d);if(_.length>0){const w=yo.fromRangeMappings(_.flatMap(y=>y.rangeMappings));return[new mF(w,!0,fs.DiffEditorSelectionToolbar,void 0,g.model.original.uri,g.model.modified.uri)]}const v=this._currentDiff.read(d);return m.mappings.map(w=>new mF(w.lineRangeMapping.withInnerChangesFromLineRanges(),w.lineRangeMapping===v?.lineRangeMapping,fs.DiffEditorHunkToolbar,void 0,g.model.original.uri,g.model.modified.uri))},createView:(u,d)=>this._instantiationService.createInstance(_D,u,d,this)})),this._register(ge(this.elements.gutter,Ne.MOUSE_WHEEL,u=>{this._editors.modified.getOption(104).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(u)},{passive:!1}))}computeStagedValue(e){const t=e.innerChanges??[],i=new gF(this._editors.modifiedModel.get()),n=new gF(this._editors.original.getModel());return new ste(t.map(a=>a.toTextEdit(i))).apply(n)}layout(e){this.elements.gutter.style.left=e+"px"}};pD=Gj([sC(6,hi),sC(7,ai),sC(8,$f)],pD);class mF{constructor(e,t,i,n,r,o){this.mapping=e,this.showAlways=t,this.menuId=i,this.rangeOverride=n,this.originalUri=r,this.modifiedUri=o}get id(){return this.mapping.modified.toString()}get range(){return this.rangeOverride??this.mapping.modified}}let _D=class extends ve{constructor(e,t,i,n){super(),this._item=e,this._elements=Gt("div.gutterItem",{style:{height:"20px",width:"34px"}},[Gt("div.background@background",{},[]),Gt("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,o=>o.showAlways),this._menuId=this._item.map(this,o=>o.menuId),this._isSmall=Zt(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;const r=this._register(n.createInstance(d_,"element",!0,{position:{hoverPosition:1}}));this._register(Q0(t,this._elements.root)),this._register(ti(o=>{const a=this._showAlways.read(o);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",a),setTimeout(()=>{this._elements.root.classList.toggle("noTransition",!1)},0)})),this._register(Ja((o,a)=>{this._elements.buttons.replaceChildren();const l=a.add(n.createInstance(Zy,this._elements.buttons,this._menuId.read(o),{orientation:1,hoverDelegate:r,toolbarOptions:{primaryGroup:c=>c.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(o)?1:3},hiddenItemStrategy:0,actionRunner:new qj(()=>{const c=this._item.get(),u=c.mapping;return{mapping:u,originalWithModifiedChanges:i.computeStagedValue(u),originalUri:c.originalUri,modifiedUri:c.modifiedUri}}),menuOptions:{shouldForwardArgs:!0}}));a.add(l.onDidChangeMenuItems(()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)}))}))}layout(e,t){this._lastItemRange=e,this._lastViewRange=t;let i=this._elements.buttons.clientHeight;this._isSmall.set(this._item.get().mapping.original.startLineNumber===1&&e.length<30,void 0),i=this._elements.buttons.clientHeight;const n=e.length/2-i/2,r=i;let o=e.start+n;const a=yt.tryCreate(r,t.endExclusive-r-i),l=yt.tryCreate(e.start+r,e.endExclusive-i-r);l&&a&&l.start<l.endExclusive&&(o=a.clip(o),o=l.clip(o)),this._elements.buttons.style.top=`${o-e.start}px`}};_D=Gj([sC(3,hi)],_D);function F_(s){return vD.get(s)}const sh=class sh extends ve{static get(e){let t=sh._map.get(e);if(!t){t=new sh(e),sh._map.set(e,t);const i=e.onDidDispose(()=>{const n=sh._map.get(e);n&&(sh._map.delete(e),n.dispose(),i.dispose())})}return t}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&(this._currentTransaction=new lv(()=>{}))}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){const e=this._currentTransaction;this._currentTransaction=void 0,e.finish()}}constructor(e){super(),this.editor=e,this._updateCounter=0,this._currentTransaction=void 0,this._model=Zt(this,this.editor.getModel()),this.model=this._model,this.isReadonly=Yi(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(92)),this._versionId=x7({owner:this,lazy:!0},this.editor.getModel()?.getVersionId()??null),this.versionId=this._versionId,this._selections=x7({owner:this,equalsFn:YA(zoe(wi.selectionsEqual)),lazy:!0},this.editor.getSelections()??null),this.selections=this._selections,this.isFocused=Yi(this,t=>{const i=this.editor.onDidFocusEditorWidget(t),n=this.editor.onDidBlurEditorWidget(t);return{dispose(){i.dispose(),n.dispose()}}},()=>this.editor.hasWidgetFocus()),this.value=gE(this,t=>(this.versionId.read(t),this.model.read(t)?.getValue()??""),(t,i)=>{const n=this.model.get();n!==null&&t!==n.getValue()&&n.setValue(t)}),this.valueIsEmpty=_t(this,t=>(this.versionId.read(t),this.editor.getModel()?.getValueLength()===0)),this.cursorSelection=A2({owner:this,equalsFn:YA(wi.selectionsEqual)},t=>this.selections.read(t)?.[0]??null),this.onDidType=mE(this),this.scrollTop=Yi(this.editor.onDidScrollChange,()=>this.editor.getScrollTop()),this.scrollLeft=Yi(this.editor.onDidScrollChange,()=>this.editor.getScrollLeft()),this.layoutInfo=Yi(this.editor.onDidLayoutChange,()=>this.editor.getLayoutInfo()),this.layoutInfoContentLeft=this.layoutInfo.map(t=>t.contentLeft),this.layoutInfoDecorationsLeft=this.layoutInfo.map(t=>t.decorationsLeft),this.contentWidth=Yi(this.editor.onDidContentSizeChange,()=>this.editor.getContentWidth()),this._overlayWidgetCounter=0,this._register(this.editor.onBeginUpdate(()=>this._beginUpdate())),this._register(this.editor.onEndUpdate(()=>this._endUpdate())),this._register(this.editor.onDidChangeModel(()=>{this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidType(t=>{this._beginUpdate();try{this._forceUpdate(),this.onDidType.trigger(this._currentTransaction,t)}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeModelContent(t=>{this._beginUpdate();try{this._versionId.set(this.editor.getModel()?.getVersionId()??null,this._currentTransaction,t),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeCursorSelection(t=>{this._beginUpdate();try{this._selections.set(this.editor.getSelections(),this._currentTransaction,t),this._forceUpdate()}finally{this._endUpdate()}}))}forceUpdate(e){this._beginUpdate();try{return this._forceUpdate(),e?e(this._currentTransaction):void 0}finally{this._endUpdate()}}_forceUpdate(){this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._versionId.set(this.editor.getModel()?.getVersionId()??null,this._currentTransaction,void 0),this._selections.set(this.editor.getSelections(),this._currentTransaction,void 0)}finally{this._endUpdate()}}getOption(e){return Yi(this,t=>this.editor.onDidChangeConfiguration(i=>{i.hasChanged(e)&&t(void 0)}),()=>this.editor.getOption(e))}setDecorations(e){const t=new Qe,i=this.editor.createDecorationsCollection();return t.add(P2({owner:this,debugName:()=>`Apply decorations from ${e.debugName}`},n=>{const r=e.read(n);i.set(r)})),t.add({dispose:()=>{i.clear()}}),t}createOverlayWidget(e){const t="observableOverlayWidget"+this._overlayWidgetCounter++,i={getDomNode:()=>e.domNode,getPosition:()=>e.position.get(),getId:()=>t,allowEditorOverflow:e.allowEditorOverflow,getMinContentWidthInPx:()=>e.minContentWidthInPx.get()};this.editor.addOverlayWidget(i);const n=ti(r=>{e.position.read(r),e.minContentWidthInPx.read(r),this.editor.layoutOverlayWidget(i)});return bt(()=>{n.dispose(),this.editor.removeOverlayWidget(i)})}};sh._map=new Map;let vD=sh;var X0e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Q0e=function(s,e){return function(t,i){e(t,i,s)}},rC,Cf;let bD=(Cf=class extends ve{static setBreadcrumbsSourceFactory(e){this._breadcrumbsSourceFactory.set(e,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._instantiationService=n,this._modifiedOutlineSource=Sl(this,l=>{const c=this._editors.modifiedModel.read(l),u=rC._breadcrumbsSourceFactory.read(l);return!c||!u?void 0:u(c,this._instantiationService)}),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();In(u=>{for(const d of this._editors.original.getSelections()||[])c?.ensureOriginalLineIsVisible(d.getStartPosition().lineNumber,0,u),c?.ensureOriginalLineIsVisible(d.getEndPosition().lineNumber,0,u)})})),this._register(this._editors.modified.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();In(u=>{for(const d of this._editors.modified.getSelections()||[])c?.ensureModifiedLineIsVisible(d.getStartPosition().lineNumber,0,u),c?.ensureModifiedLineIsVisible(d.getEndPosition().lineNumber,0,u)})}));const r=this._diffModel.map((l,c)=>{const u=l?.unchangedRegions.read(c)??[];return u.length===1&&u[0].modifiedLineNumber===1&&u[0].lineCount===this._editors.modifiedModel.read(c)?.getLineCount()?[]:u});this.viewZones=Lp(this,(l,c)=>{const u=this._modifiedOutlineSource.read(l);if(!u)return{origViewZones:[],modViewZones:[]};const d=[],g=[],m=this._options.renderSideBySide.read(l),_=this._options.compactMode.read(l),v=r.read(l);for(let w=0;w<v.length;w++){const y=v[w];if(!y.shouldHideControls(l)&&!(_&&(w===0||w===v.length-1)))if(_){{const S=_t(this,L=>y.getHiddenOriginalRange(L).startLineNumber-1),k=new am(S,12);d.push(k),c.add(new pF(this._editors.original,k,y,!m))}{const S=_t(this,L=>y.getHiddenModifiedRange(L).startLineNumber-1),k=new am(S,12);g.push(k),c.add(new pF(this._editors.modified,k,y))}}else{{const S=_t(this,L=>y.getHiddenOriginalRange(L).startLineNumber-1),k=new am(S,24);d.push(k),c.add(new _F(this._editors.original,k,y,y.originalUnchangedRange,!m,u,L=>this._diffModel.get().ensureModifiedLineIsVisible(L,2,void 0),this._options))}{const S=_t(this,L=>y.getHiddenModifiedRange(L).startLineNumber-1),k=new am(S,24);g.push(k),c.add(new _F(this._editors.modified,k,y,y.modifiedUnchangedRange,!1,u,L=>this._diffModel.get().ensureModifiedLineIsVisible(L,2,void 0),this._options))}}}return{origViewZones:d,modViewZones:g}});const o={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},a={description:"Fold Unchanged",glyphMarginHoverMessage:new Tz(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(b("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+Yt.asClassName($e.fold),zIndex:10001};this._register(qy(this._editors.original,_t(this,l=>{const c=r.read(l),u=c.map(d=>({range:d.originalUnchangedRange.toInclusiveRange(),options:o}));for(const d of c)d.shouldHideControls(l)&&u.push({range:Q.fromPositions(new ce(d.originalLineNumber,1)),options:a});return u}))),this._register(qy(this._editors.modified,_t(this,l=>{const c=r.read(l),u=c.map(d=>({range:d.modifiedUnchangedRange.toInclusiveRange(),options:o}));for(const d of c)d.shouldHideControls(l)&&u.push({range:dt.ofLength(d.modifiedLineNumber,1).toInclusiveRange(),options:a});return u}))),this._register(ti(l=>{const c=r.read(l);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(c.map(u=>u.getHiddenOriginalRange(l).toInclusiveRange()).filter(Gm)),this._editors.modified.setHiddenAreas(c.map(u=>u.getHiddenModifiedRange(l).toInclusiveRange()).filter(Gm))}finally{this._isUpdatingHiddenAreas=!1}})),this._register(this._editors.modified.onMouseUp(l=>{if(!l.event.rightButton&&l.target.position&&l.target.element?.className.includes("fold-unchanged")){const c=l.target.position.lineNumber,u=this._diffModel.get();if(!u)return;const d=u.unchangedRegions.get().find(g=>g.modifiedUnchangedRange.includes(c));if(!d)return;d.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(l=>{if(!l.event.rightButton&&l.target.position&&l.target.element?.className.includes("fold-unchanged")){const c=l.target.position.lineNumber,u=this._diffModel.get();if(!u)return;const d=u.unchangedRegions.get().find(g=>g.originalUnchangedRange.includes(c));if(!d)return;d.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}}))}},rC=Cf,Cf._breadcrumbsSourceFactory=Zt(rC,()=>({dispose(){},getBreadcrumbItems(e,t){return[]}})),Cf);bD=rC=X0e([Q0e(3,hi)],bD);class pF extends v9{constructor(e,t,i,n=!1){const r=Gt("div.diff-hidden-lines-widget");super(e,t,r.root),this._unchangedRegion=i,this._hide=n,this._nodes=Gt("div.diff-hidden-lines-compact",[Gt("div.line-left",[]),Gt("div.text@text",[]),Gt("div.line-right",[])]),r.root.appendChild(this._nodes.root),this._hide&&this._nodes.root.replaceChildren(),this._register(ti(o=>{if(!this._hide){const a=this._unchangedRegion.getHiddenModifiedRange(o).length,l=b("hiddenLines","{0} hidden lines",a);this._nodes.text.innerText=l}}))}}class _F extends v9{constructor(e,t,i,n,r,o,a,l){const c=Gt("div.diff-hidden-lines-widget");super(e,t,c.root),this._editor=e,this._unchangedRegion=i,this._unchangedRegionRange=n,this._hide=r,this._modifiedOutlineSource=o,this._revealModifiedHiddenLine=a,this._options=l,this._nodes=Gt("div.diff-hidden-lines",[Gt("div.top@top",{title:b("diff.hiddenLines.top","Click or drag to show more above")}),Gt("div.center@content",{style:{display:"flex"}},[Gt("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[at("a",{title:b("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...of("$(unfold)"))]),Gt("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),Gt("div.bottom@bottom",{title:b("diff.bottom","Click or drag to show more below"),role:"button"})]),c.root.appendChild(this._nodes.root),this._hide?nr(this._nodes.first):this._register(Vh(this._nodes.first,{width:F_(this._editor).layoutInfoContentLeft})),this._register(ti(d=>{const g=this._unchangedRegion.visibleLineCountTop.read(d)+this._unchangedRegion.visibleLineCountBottom.read(d)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!g),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(d)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(d)>0),this._nodes.top.classList.toggle("canMoveBottom",!g);const m=this._unchangedRegion.isDragged.read(d),_=this._editor.getDomNode();_&&(_.classList.toggle("draggingUnchangedRegion",!!m),m==="top"?(_.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(d)>0),_.classList.toggle("canMoveBottom",!g)):m==="bottom"?(_.classList.toggle("canMoveTop",!g),_.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(d)>0)):(_.classList.toggle("canMoveTop",!1),_.classList.toggle("canMoveBottom",!1)))}));const u=this._editor;this._register(ge(this._nodes.top,"mousedown",d=>{if(d.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),d.preventDefault();const g=d.clientY;let m=!1;const _=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const v=tt(this._nodes.top),w=ge(v,"mousemove",S=>{const L=S.clientY-g;m=m||Math.abs(L)>2;const T=Math.round(L/u.getOption(67)),A=Math.max(0,Math.min(_+T,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(A,void 0)}),y=ge(v,"mouseup",S=>{m||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),w.dispose(),y.dispose()})})),this._register(ge(this._nodes.bottom,"mousedown",d=>{if(d.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),d.preventDefault();const g=d.clientY;let m=!1;const _=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const v=tt(this._nodes.bottom),w=ge(v,"mousemove",S=>{const L=S.clientY-g;m=m||Math.abs(L)>2;const T=Math.round(L/u.getOption(67)),A=Math.max(0,Math.min(_-T,this._unchangedRegion.getMaxVisibleLineCountBottom())),I=this._unchangedRegionRange.endLineNumberExclusive>u.getModel().getLineCount()?u.getContentHeight():u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(A,void 0);const O=this._unchangedRegionRange.endLineNumberExclusive>u.getModel().getLineCount()?u.getContentHeight():u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);u.setScrollTop(u.getScrollTop()+(O-I))}),y=ge(v,"mouseup",S=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!m){const k=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const L=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);u.setScrollTop(u.getScrollTop()+(L-k))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),w.dispose(),y.dispose()})})),this._register(ti(d=>{const g=[];if(!this._hide){const m=i.getHiddenModifiedRange(d).length,_=b("hiddenLines","{0} hidden lines",m),v=at("span",{title:b("diff.hiddenLines.expandAll","Double click to unfold")},_);v.addEventListener("dblclick",S=>{S.button===0&&(S.preventDefault(),this._unchangedRegion.showAll(void 0))}),g.push(v);const w=this._unchangedRegion.getHiddenModifiedRange(d),y=this._modifiedOutlineSource.getBreadcrumbItems(w,d);if(y.length>0){g.push(at("span",void 0,"  |  "));for(let S=0;S<y.length;S++){const k=y[S],L=s5.toIcon(k.kind),T=Gt("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[UC(L)," ",k.name,...S===y.length-1?[]:[UC($e.chevronRight)]]).root;g.push(T),T.onclick=()=>{this._revealModifiedHiddenLine(k.startLineNumber)}}}}nr(this._nodes.others,...g)}))}}var J0e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},e1e=function(s,e){return function(t,i){e(t,i,s)}},Va,Xc;let B_=(Xc=class extends ve{constructor(e,t,i,n,r,o,a){super(),this._editors=e,this._rootElement=t,this._diffModel=i,this._rootWidth=n,this._rootHeight=r,this._modifiedEditorLayoutInfo=o,this._themeService=a,this.width=Va.ENTIRE_DIFF_OVERVIEW_WIDTH;const l=Yi(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),c=_t(g=>{const m=l.read(g),_=m.getColor($ie)||(m.getColor(jie)||Z3).transparent(2),v=m.getColor(qie)||(m.getColor(Uie)||Y3).transparent(2);return{insertColor:_,removeColor:v}}),u=Qt(document.createElement("div"));u.setClassName("diffViewport"),u.setPosition("absolute");const d=Gt("div.diffOverview",{style:{position:"absolute",top:"0px",width:Va.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register(Q0(d,u.domNode)),this._register(Un(d,Ne.POINTER_DOWN,g=>{this._editors.modified.delegateVerticalScrollbarPointerDown(g)})),this._register(ge(d,Ne.MOUSE_WHEEL,g=>{this._editors.modified.delegateScrollFromMouseWheelEvent(g)},{passive:!1})),this._register(Q0(this._rootElement,d)),this._register(Ja((g,m)=>{const _=this._diffModel.read(g),v=this._editors.original.createOverviewRuler("original diffOverviewRuler");v&&(m.add(v),m.add(Q0(d,v.getDomNode())));const w=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(w&&(m.add(w),m.add(Q0(d,w.getDomNode()))),!v||!w)return;const y=zo("viewZoneChanged",this._editors.original.onDidChangeViewZones),S=zo("viewZoneChanged",this._editors.modified.onDidChangeViewZones),k=zo("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),L=zo("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);m.add(ti(T=>{y.read(T),S.read(T),k.read(T),L.read(T);const A=c.read(T),I=_?.diff.read(T)?.mappings;function O(Y,G,ie){const Z=ie._getViewModel();return Z?Y.filter(ue=>ue.length>0).map(ue=>{const be=Z.coordinatesConverter.convertModelPositionToViewPosition(new ce(ue.startLineNumber,1)),ye=Z.coordinatesConverter.convertModelPositionToViewPosition(new ce(ue.endLineNumberExclusive,1)),ae=ye.lineNumber-be.lineNumber;return new Aj(be.lineNumber,ye.lineNumber,ae,G.toString())}):[]}const F=O((I||[]).map(Y=>Y.lineRangeMapping.original),A.removeColor,this._editors.original),J=O((I||[]).map(Y=>Y.lineRangeMapping.modified),A.insertColor,this._editors.modified);v?.setZones(F),w?.setZones(J)})),m.add(ti(T=>{const A=this._rootHeight.read(T),I=this._rootWidth.read(T),O=this._modifiedEditorLayoutInfo.read(T);if(O){const F=Va.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Va.ONE_OVERVIEW_WIDTH;v.setLayout({top:0,height:A,right:F+Va.ONE_OVERVIEW_WIDTH,width:Va.ONE_OVERVIEW_WIDTH}),w.setLayout({top:0,height:A,right:0,width:Va.ONE_OVERVIEW_WIDTH});const J=this._editors.modifiedScrollTop.read(T),Y=this._editors.modifiedScrollHeight.read(T),G=this._editors.modified.getOption(104),ie=new lp(G.verticalHasArrows?G.arrowSize:0,G.verticalScrollbarSize,0,O.height,Y,J);u.setTop(ie.getSliderPosition()),u.setHeight(ie.getSliderSize())}else u.setTop(0),u.setHeight(0);d.style.height=A+"px",d.style.left=I-Va.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",u.setWidth(Va.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}},Va=Xc,Xc.ONE_OVERVIEW_WIDTH=15,Xc.ENTIRE_DIFF_OVERVIEW_WIDTH=Xc.ONE_OVERVIEW_WIDTH*2,Xc);B_=Va=J0e([e1e(6,La)],B_);const kL=[];class t1e extends ve{constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._widget=n,this._selectedDiffs=_t(this,r=>{const a=this._diffModel.read(r)?.diff.read(r);if(!a)return kL;const l=this._editors.modifiedSelections.read(r);if(l.every(g=>g.isEmpty()))return kL;const c=new Vo(l.map(g=>dt.fromRangeInclusive(g))),d=a.mappings.filter(g=>g.lineRangeMapping.innerChanges&&c.intersects(g.lineRangeMapping.modified)).map(g=>({mapping:g,rangeMappings:g.lineRangeMapping.innerChanges.filter(m=>l.some(_=>Q.areIntersecting(m.modifiedRange,_)))}));return d.length===0||d.every(g=>g.rangeMappings.length===0)?kL:d}),this._register(Ja((r,o)=>{if(!this._options.shouldRenderOldRevertArrows.read(r))return;const a=this._diffModel.read(r),l=a?.diff.read(r);if(!a||!l||a.movedTextToCompare.read(r))return;const c=[],u=this._selectedDiffs.read(r),d=new Set(u.map(g=>g.mapping));if(u.length>0){const g=this._editors.modifiedSelections.read(r),m=o.add(new Yy(g[g.length-1].positionLineNumber,this._widget,u.flatMap(_=>_.rangeMappings),!0));this._editors.modified.addGlyphMarginWidget(m),c.push(m)}for(const g of l.mappings)if(!d.has(g)&&!g.lineRangeMapping.modified.isEmpty&&g.lineRangeMapping.innerChanges){const m=o.add(new Yy(g.lineRangeMapping.modified.startLineNumber,this._widget,g.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(m),c.push(m)}o.add(bt(()=>{for(const g of c)this._editors.modified.removeGlyphMarginWidget(g)}))}))}}const ZS=class ZS extends ve{getId(){return this._id}constructor(e,t,i,n){super(),this._lineNumber=e,this._widget=t,this._diffs=i,this._revertSelection=n,this._id=`revertButton${ZS.counter++}`,this._domNode=Gt("div.revertButton",{title:this._revertSelection?b("revertSelectedChanges","Revert Selected Changes"):b("revertChange","Revert Change")},[UC($e.arrowRight)]).root,this._register(ge(this._domNode,Ne.MOUSE_DOWN,r=>{r.button!==2&&(r.stopPropagation(),r.preventDefault())})),this._register(ge(this._domNode,Ne.MOUSE_UP,r=>{r.stopPropagation(),r.preventDefault()})),this._register(ge(this._domNode,Ne.CLICK,r=>{this._diffs instanceof js?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),r.stopPropagation(),r.preventDefault()}))}getDomNode(){return this._domNode}getPosition(){return{lane:Ah.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}};ZS.counter=0;let Yy=ZS;function vc(s,e,t){const i=s.bindTo(e);return P2({debugName:()=>`Set Context Key "${s.key}"`},n=>{i.set(t(n))})}var i1e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},vF=function(s,e){return function(t,i){e(t,i,s)}};let wD=class extends ve{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(e,t,i,n,r,o,a){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=i,this._argCodeEditorWidgetOptions=n,this._createInnerEditor=r,this._instantiationService=o,this._keybindingService=a,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new re),this.modifiedScrollTop=Yi(this,this.modified.onDidScrollChange,()=>this.modified.getScrollTop()),this.modifiedScrollHeight=Yi(this,this.modified.onDidScrollChange,()=>this.modified.getScrollHeight()),this.modifiedObs=F_(this.modified),this.originalObs=F_(this.original),this.modifiedModel=this.modifiedObs.model,this.modifiedSelections=Yi(this,this.modified.onDidChangeCursorSelection,()=>this.modified.getSelections()??[]),this.modifiedCursor=A2({owner:this,equalsFn:ce.equals},l=>this.modifiedSelections.read(l)[0]?.getPosition()??new ce(1,1)),this.originalCursor=Yi(this,this.original.onDidChangeCursorPosition,()=>this.original.getPosition()??new ce(1,1)),this._argCodeEditorWidgetOptions=null,this._register(O2({createEmptyChangeSummary:()=>({}),handleChange:(l,c)=>(l.didChange(i.editorOptions)&&Object.assign(c,l.change.changedOptions),!0)},(l,c)=>{i.editorOptions.read(l),this._options.renderSideBySide.read(l),this.modified.updateOptions(this._adjustOptionsForRightHandSide(l,c)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(l,c))}))}_createLeftHandSideEditor(e,t){const i=this._adjustOptionsForLeftHandSide(void 0,e),n=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,i,t);return n.setContextValue("isInDiffLeftEditor",!0),n}_createRightHandSideEditor(e,t){const i=this._adjustOptionsForRightHandSide(void 0,e),n=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,i,t);return n.setContextValue("isInDiffRightEditor",!0),n}_constructInnerEditor(e,t,i,n){const r=this._createInnerEditor(e,t,i,n);return this._register(r.onDidContentSizeChange(o=>{const a=this.original.getContentWidth()+this.modified.getContentWidth()+B_.ENTIRE_DIFF_OVERVIEW_WIDTH,l=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:l,contentWidth:a,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),r}_adjustOptionsForLeftHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(i.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},i.wordWrapOverride1=this._options.diffWordWrap.get()):(i.wordWrapOverride1="off",i.wordWrapOverride2="off",i.stickyScroll={enabled:!1},i.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),i.glyphMargin=this._options.renderSideBySide.get(),t.originalAriaLabel&&(i.ariaLabel=t.originalAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.readOnly=!this._options.originalEditable.get(),i.dropIntoEditor={enabled:!i.readOnly},i.extraEditorClassName="original-in-monaco-diff-editor",i}_adjustOptionsForRightHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(i.ariaLabel=t.modifiedAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.wordWrapOverride1=this._options.diffWordWrap.get(),i.revealHorizontalRightPadding=Bf.revealHorizontalRightPadding.defaultValue+B_.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",i}_adjustOptionsForSubEditor(e){const t={...e,dimension:{height:0,width:0}};return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar={...t.scrollbar||{}},t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap={...t.minimap||{}},t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){e||(e="");const t=b("diff-aria-navigation-tip"," use {0} to open the accessibility help.",this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp")?.getAriaLabel());return this._options.accessibilityVerbose.get()?e+t:e?e.replaceAll(t,""):""}};wD=i1e([vF(5,hi),vF(6,ps)],wD);const YS=class YS extends ve{constructor(){super(...arguments),this._id=++YS.idCounter,this._onDidDispose=this._register(new re),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e,t="api"){this._targetEditor.setPosition(e,t)}revealLine(e,t=0){this._targetEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._targetEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e,t="api"){this._targetEditor.setSelection(e,t)}setSelections(e,t="api"){this._targetEditor.setSelections(e,t)}revealLines(e,t,i=0){this._targetEditor.revealLines(e,t,i)}revealLinesInCenter(e,t,i=0){this._targetEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t,i=0){this._targetEditor.revealLinesNearTop(e,t,i)}revealRange(e,t=0,i=!1,n=!0){this._targetEditor.revealRange(e,t,i,n)}revealRangeInCenter(e,t=0){this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,i){this._targetEditor.trigger(e,t,i)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}};YS.idCounter=0;let CD=YS;var n1e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},s1e=function(s,e){return function(t,i){e(t,i,s)}};let yD=class{get editorOptions(){return this._options}constructor(e,t){this._accessibilityService=t,this._diffEditorWidth=Zt(this,0),this._screenReaderMode=Yi(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this.couldShowInlineViewBecauseOfSize=_t(this,n=>this._options.read(n).renderSideBySide&&this._diffEditorWidth.read(n)<=this._options.read(n).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=_t(this,n=>this._options.read(n).renderOverviewRuler),this.renderSideBySide=_t(this,n=>this.compactMode.read(n)&&this.shouldRenderInlineViewInSmartMode.read(n)?!1:this._options.read(n).renderSideBySide&&!(this._options.read(n).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(n)&&!this._screenReaderMode.read(n))),this.readOnly=_t(this,n=>this._options.read(n).readOnly),this.shouldRenderOldRevertArrows=_t(this,n=>!(!this._options.read(n).renderMarginRevertIcon||!this.renderSideBySide.read(n)||this.readOnly.read(n)||this.shouldRenderGutterMenu.read(n))),this.shouldRenderGutterMenu=_t(this,n=>this._options.read(n).renderGutterMenu),this.renderIndicators=_t(this,n=>this._options.read(n).renderIndicators),this.enableSplitViewResizing=_t(this,n=>this._options.read(n).enableSplitViewResizing),this.splitViewDefaultRatio=_t(this,n=>this._options.read(n).splitViewDefaultRatio),this.ignoreTrimWhitespace=_t(this,n=>this._options.read(n).ignoreTrimWhitespace),this.maxComputationTimeMs=_t(this,n=>this._options.read(n).maxComputationTime),this.showMoves=_t(this,n=>this._options.read(n).experimental.showMoves&&this.renderSideBySide.read(n)),this.isInEmbeddedEditor=_t(this,n=>this._options.read(n).isInEmbeddedEditor),this.diffWordWrap=_t(this,n=>this._options.read(n).diffWordWrap),this.originalEditable=_t(this,n=>this._options.read(n).originalEditable),this.diffCodeLens=_t(this,n=>this._options.read(n).diffCodeLens),this.accessibilityVerbose=_t(this,n=>this._options.read(n).accessibilityVerbose),this.diffAlgorithm=_t(this,n=>this._options.read(n).diffAlgorithm),this.showEmptyDecorations=_t(this,n=>this._options.read(n).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=_t(this,n=>this._options.read(n).onlyShowAccessibleDiffViewer),this.compactMode=_t(this,n=>this._options.read(n).compactMode),this.trueInlineDiffRenderingEnabled=_t(this,n=>this._options.read(n).experimental.useTrueInlineView),this.useTrueInlineDiffRendering=_t(this,n=>!this.renderSideBySide.read(n)&&this.trueInlineDiffRenderingEnabled.read(n)),this.hideUnchangedRegions=_t(this,n=>this._options.read(n).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=_t(this,n=>this._options.read(n).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=_t(this,n=>this._options.read(n).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsMinimumLineCount=_t(this,n=>this._options.read(n).hideUnchangedRegions.minimumLineCount),this._model=Zt(this,void 0),this.shouldRenderInlineViewInSmartMode=this._model.map(this,n=>nae(this,r=>{const o=n?.diff.read(r);return o?r1e(o,this.trueInlineDiffRenderingEnabled.read(r)):void 0})).flatten().map(this,n=>!!n),this.inlineViewHideOriginalLineNumbers=this.compactMode;const i={...e,...bF(e,as)};this._options=Zt(this,i)}updateOptions(e){const t=bF(e,this._options.get()),i={...this._options.get(),...e,...t};this._options.set(i,void 0,{changedOptions:e})}setWidth(e){this._diffEditorWidth.set(e,void 0)}setModel(e){this._model.set(e,void 0)}};yD=n1e([s1e(1,ll)],yD);function r1e(s,e){return s.mappings.every(t=>o1e(t.lineRangeMapping)||a1e(t.lineRangeMapping)||e&&x9(t.lineRangeMapping))}function o1e(s){return s.original.length===0}function a1e(s){return s.modified.length===0}function bF(s,e){return{enableSplitViewResizing:Ve(s.enableSplitViewResizing,e.enableSplitViewResizing),splitViewDefaultRatio:KZ(s.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:Ve(s.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:Ve(s.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:wd(s.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:wd(s.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:Ve(s.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:Ve(s.renderIndicators,e.renderIndicators),originalEditable:Ve(s.originalEditable,e.originalEditable),diffCodeLens:Ve(s.diffCodeLens,e.diffCodeLens),renderOverviewRuler:Ve(s.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:Hi(s.diffWordWrap,e.diffWordWrap,["off","on","inherit"]),diffAlgorithm:Hi(s.diffAlgorithm,e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:Ve(s.accessibilityVerbose,e.accessibilityVerbose),experimental:{showMoves:Ve(s.experimental?.showMoves,e.experimental.showMoves),showEmptyDecorations:Ve(s.experimental?.showEmptyDecorations,e.experimental.showEmptyDecorations),useTrueInlineView:Ve(s.experimental?.useTrueInlineView,e.experimental.useTrueInlineView)},hideUnchangedRegions:{enabled:Ve(s.hideUnchangedRegions?.enabled??s.experimental?.collapseUnchangedRegions,e.hideUnchangedRegions.enabled),contextLineCount:wd(s.hideUnchangedRegions?.contextLineCount,e.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:wd(s.hideUnchangedRegions?.minimumLineCount,e.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:wd(s.hideUnchangedRegions?.revealLineCount,e.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:Ve(s.isInEmbeddedEditor,e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:Ve(s.onlyShowAccessibleDiffViewer,e.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:wd(s.renderSideBySideInlineBreakpoint,e.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:Ve(s.useInlineViewWhenSpaceIsLimited,e.useInlineViewWhenSpaceIsLimited),renderGutterMenu:Ve(s.renderGutterMenu,e.renderGutterMenu),compactMode:Ve(s.compactMode,e.compactMode)}}var l1e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},W0=function(s,e){return function(t,i){e(t,i,s)}};let Xy=class extends CD{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(e,t,i,n,r,o,a,l){super(),this._domElement=e,this._parentContextKeyService=n,this._parentInstantiationService=r,this._accessibilitySignalService=a,this._editorProgressService=l,this.elements=Gt("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[Gt("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),Gt("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),Gt("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModelSrc=this._register(Hz(this,void 0)),this._diffModel=_t(this,L=>this._diffModelSrc.read(L)?.object),this.onDidChangeModel=Te.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new Tp([ai,this._contextKeyService]))),this._boundarySashes=Zt(this,void 0),this._accessibleDiffViewerShouldBeVisible=Zt(this,!1),this._accessibleDiffViewerVisible=_t(this,L=>this._options.onlyShowAccessibleDiffViewer.read(L)?!0:this._accessibleDiffViewerShouldBeVisible.read(L)),this._movedBlocksLinesPart=Zt(this,void 0),this._layoutInfo=_t(this,L=>{const T=this._rootSizeObserver.width.read(L),A=this._rootSizeObserver.height.read(L);this._rootSizeObserver.automaticLayout?this.elements.root.style.height="100%":this.elements.root.style.height=A+"px";const I=this._sash.read(L),O=this._gutter.read(L),F=O?.width.read(L)??0,J=this._overviewRulerPart.read(L)?.width??0;let Y,G,ie,Z,ue;if(!!I){const ye=I.sashLeft.read(L),ae=this._movedBlocksLinesPart.read(L)?.width.read(L)??0;Y=0,G=ye-F-ae,ue=ye-F,ie=ye,Z=T-ie-J}else{ue=0;const ye=this._options.inlineViewHideOriginalLineNumbers.read(L);Y=F,ye?G=0:G=Math.max(5,this._editors.originalObs.layoutInfoDecorationsLeft.read(L)),ie=F+G,Z=T-ie-J}return this.elements.original.style.left=Y+"px",this.elements.original.style.width=G+"px",this._editors.original.layout({width:G,height:A},!0),O?.layout(ue),this.elements.modified.style.left=ie+"px",this.elements.modified.style.width=Z+"px",this._editors.modified.layout({width:Z,height:A},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((L,T)=>L?.diff.read(T)),this.onDidUpdateDiff=Te.fromObservableLight(this._diffValue),o.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register(bt(()=>this.elements.root.remove())),this._rootSizeObserver=this._register(new Wj(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout(t.automaticLayout??!1),this._options=this._instantiationService.createInstance(yD,t),this._register(ti(L=>{this._options.setWidth(this._rootSizeObserver.width.read(L))})),this._contextKeyService.createKey(Be.isEmbeddedDiffEditor.key,!1),this._register(vc(Be.isEmbeddedDiffEditor,this._contextKeyService,L=>this._options.isInEmbeddedEditor.read(L))),this._register(vc(Be.comparingMovedCode,this._contextKeyService,L=>!!this._diffModel.read(L)?.movedTextToCompare.read(L))),this._register(vc(Be.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,L=>this._options.couldShowInlineViewBecauseOfSize.read(L))),this._register(vc(Be.diffEditorInlineMode,this._contextKeyService,L=>!this._options.renderSideBySide.read(L))),this._register(vc(Be.hasChanges,this._contextKeyService,L=>(this._diffModel.read(L)?.diff.read(L)?.mappings.length??0)>0)),this._editors=this._register(this._instantiationService.createInstance(wD,this.elements.original,this.elements.modified,this._options,i,(L,T,A,I)=>this._createInnerEditor(L,T,A,I))),this._register(vc(Be.diffEditorOriginalWritable,this._contextKeyService,L=>this._options.originalEditable.read(L))),this._register(vc(Be.diffEditorModifiedWritable,this._contextKeyService,L=>!this._options.readOnly.read(L))),this._register(vc(Be.diffEditorOriginalUri,this._contextKeyService,L=>this._diffModel.read(L)?.model.original.uri.toString()??"")),this._register(vc(Be.diffEditorModifiedUri,this._contextKeyService,L=>this._diffModel.read(L)?.model.modified.uri.toString()??"")),this._overviewRulerPart=Sl(this,L=>this._options.renderOverviewRuler.read(L)?this._instantiationService.createInstance(la(B_,L),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(T=>T.modifiedEditor)):void 0).recomputeInitiallyAndOnChange(this._store);const c={height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((L,T)=>L-(this._overviewRulerPart.read(T)?.width??0))};this._sashLayout=new K0e(this._options,c),this._sash=Sl(this,L=>{const T=this._options.renderSideBySide.read(L);return this.elements.root.classList.toggle("side-by-side",T),T?new $j(this.elements.root,c,this._options.enableSplitViewResizing,this._boundarySashes,this._sashLayout.sashLeft,()=>this._sashLayout.resetSash()):void 0}).recomputeInitiallyAndOnChange(this._store);const u=Sl(this,L=>this._instantiationService.createInstance(la(bD,L),this._editors,this._diffModel,this._options)).recomputeInitiallyAndOnChange(this._store);Sl(this,L=>this._instantiationService.createInstance(la(q0e,L),this._editors,this._diffModel,this._options,this)).recomputeInitiallyAndOnChange(this._store);const d=new Set,g=new Set;let m=!1;const _=Sl(this,L=>this._instantiationService.createInstance(la(gD,L),tt(this._domElement),this._editors,this._diffModel,this._options,this,()=>m||u.get().isUpdatingHiddenAreas,d,g)).recomputeInitiallyAndOnChange(this._store),v=_t(this,L=>{const T=_.read(L).viewZones.read(L).orig,A=u.read(L).viewZones.read(L).origViewZones;return T.concat(A)}),w=_t(this,L=>{const T=_.read(L).viewZones.read(L).mod,A=u.read(L).viewZones.read(L).modViewZones;return T.concat(A)});this._register(Ky(this._editors.original,v,L=>{m=L},d));let y;this._register(Ky(this._editors.modified,w,L=>{m=L,m?y=$y.capture(this._editors.modified):(y?.restore(this._editors.modified),y=void 0)},g)),this._accessibleDiffViewer=Sl(this,L=>this._instantiationService.createInstance(la(nf,L),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(T,A)=>this._accessibleDiffViewerShouldBeVisible.set(T,A),this._options.onlyShowAccessibleDiffViewer.map(T=>!T),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((T,A)=>T?.diff.read(A)?.mappings.map(I=>I.lineRangeMapping)),new N0e(this._editors))).recomputeInitiallyAndOnChange(this._store);const S=this._accessibleDiffViewerVisible.map(L=>L?"hidden":"visible");this._register(Vh(this.elements.modified,{visibility:S})),this._register(Vh(this.elements.original,{visibility:S})),this._createDiffEditorContributions(),o.addDiffEditor(this),this._gutter=Sl(this,L=>this._options.shouldRenderGutterMenu.read(L)?this._instantiationService.createInstance(la(pD,L),this.elements.root,this._diffModel,this._editors,this._options,this._sashLayout,this._boundarySashes):void 0),this._register(B2(this._layoutInfo)),Sl(this,L=>new(la(jm,L))(this.elements.root,this._diffModel,this._layoutInfo.map(T=>T.originalEditor),this._layoutInfo.map(T=>T.modifiedEditor),this._editors)).recomputeInitiallyAndOnChange(this._store,L=>{this._movedBlocksLinesPart.set(L,void 0)}),this._register(Te.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,L=>this._handleCursorPositionChange(L,!0))),this._register(Te.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,L=>this._handleCursorPositionChange(L,!1)));const k=this._diffModel.map(this,(L,T)=>{if(L)return L.diff.read(T)===void 0&&!L.isDiffUpToDate.read(T)});this._register(Ja((L,T)=>{if(k.read(L)===!0){const A=this._editorProgressService.show(!0,1e3);T.add(bt(()=>A.done()))}})),this._register(Ja((L,T)=>{T.add(new(la(t1e,L))(this._editors,this._diffModel,this._options,this))})),this._register(Ja((L,T)=>{const A=this._diffModel.read(L);if(A)for(const I of[A.model.original,A.model.modified])T.add(I.onWillDispose(O=>{_i(new ri("TextModel got disposed before DiffEditorWidget model got reset")),this.setModel(null)}))})),this._register(ti(L=>{this._options.setModel(this._diffModel.read(L))}))}_createInnerEditor(e,t,i,n){return e.createInstance(Uy,t,i,n)}_createDiffEditorContributions(){const e=xm.getDiffEditorContributions();for(const t of e)try{this._register(this._instantiationService.createInstance(t.ctor,this))}catch(i){_i(i)}}get _targetEditor(){return this._editors.modified}getEditorType(){return QE.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){const e=this._editors.original.saveViewState(),t=this._editors.modified.saveViewState();return{original:e,modified:t,modelState:this._diffModel.get()?.serializeState()}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._editors.original.restoreViewState(t.original),this._editors.modified.restoreViewState(t.modified),t.modelState&&this._diffModel.get()?.restoreSerializedState(t.modelState)}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(e){return this._instantiationService.createInstance(fD,e,this._options)}getModel(){return this._diffModel.get()?.model??null}setModel(e){const t=e?"model"in e?Gy.create(e).createNewRef(this):Gy.create(this.createViewModel(e),this):null;this.setDiffModel(t)}setDiffModel(e,t){const i=this._diffModel.get();!e&&i&&this._accessibleDiffViewer.get().close(),this._diffModel.get()!==e?.object&&dE(t,n=>{const r=e?.object;Yi.batchEventsGlobally(n,()=>{this._editors.original.setModel(r?r.model.original:null),this._editors.modified.setModel(r?r.model.modified:null)});const o=this._diffModelSrc.get()?.createNewRef(this);this._diffModelSrc.set(e?.createNewRef(this),n),setTimeout(()=>{o?.dispose()},0)})}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){const e=this._diffModel.get()?.diff.get();return e?c1e(e):null}revert(e){const t=this._diffModel.get();!t||!t.isDiffUpToDate.get()||this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:t.model.original.getValueInRange(e.original.toExclusiveRange())}])}revertRangeMappings(e){const t=this._diffModel.get();if(!t||!t.isDiffUpToDate.get())return;const i=e.map(n=>({range:n.modifiedRange,text:t.model.original.getValueInRange(n.originalRange)}));this._editors.modified.executeEdits("diffEditor",i)}_goTo(e){this._editors.modified.setPosition(new ce(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(e){const t=this._diffModel.get()?.diff.get()?.mappings;if(!t||t.length===0)return;const i=this._editors.modified.getPosition().lineNumber;let n;e==="next"?n=t.find(r=>r.lineRangeMapping.modified.startLineNumber>i)??t[0]:n=MC(t,r=>r.lineRangeMapping.modified.startLineNumber<i)??t[t.length-1],this._goTo(n),n.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Ml.diffLineDeleted,{source:"diffEditor.goToDiff"}):n.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Ml.diffLineInserted,{source:"diffEditor.goToDiff"}):n&&this._accessibilitySignalService.playSignal(Ml.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const e=this._diffModel.get();e&&this.waitForDiff().then(()=>{const t=e.diff.get()?.mappings;!t||t.length===0||this._goTo(t[0])})}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const e=this._diffModel.get();e&&await e.waitForDiff()}mapToOtherSide(){const e=this._editors.modified.hasWidgetFocus(),t=e?this._editors.modified:this._editors.original,i=e?this._editors.original:this._editors.modified;let n;const r=t.getSelection();if(r){const o=this._diffModel.get()?.diff.get()?.mappings.map(a=>e?a.lineRangeMapping.flip():a.lineRangeMapping);if(o){const a=eF(r.getStartPosition(),o),l=eF(r.getEndPosition(),o);n=Q.plusRange(a,l)}}return{destination:i,destinationSelection:n}}switchSide(){const{destination:e,destinationSelection:t}=this.mapToOtherSide();e.focus(),t&&e.setSelection(t)}exitCompareMove(){const e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){const e=this._diffModel.get()?.unchangedRegions.get();e&&In(t=>{for(const i of e)i.collapseAll(t)})}showAllUnchangedRegions(){const e=this._diffModel.get()?.unchangedRegions.get();e&&In(t=>{for(const i of e)i.showAll(t)})}_handleCursorPositionChange(e,t){if(e?.reason===3){const i=this._diffModel.get()?.diff.get()?.mappings.find(n=>t?n.lineRangeMapping.modified.contains(e.position.lineNumber):n.lineRangeMapping.original.contains(e.position.lineNumber));i?.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Ml.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):i?.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Ml.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):i&&this._accessibilitySignalService.playSignal(Ml.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};Xy=l1e([W0(3,ai),W0(4,hi),W0(5,An),W0(6,Q2),W0(7,cE)],Xy);function c1e(s){return s.mappings.map(e=>{const t=e.lineRangeMapping;let i,n,r,o,a=t.innerChanges;return t.original.isEmpty?(i=t.original.startLineNumber-1,n=0,a=void 0):(i=t.original.startLineNumber,n=t.original.endLineNumberExclusive-1),t.modified.isEmpty?(r=t.modified.startLineNumber-1,o=0,a=void 0):(r=t.modified.startLineNumber,o=t.modified.endLineNumberExclusive-1),{originalStartLineNumber:i,originalEndLineNumber:n,modifiedStartLineNumber:r,modifiedEndLineNumber:o,charChanges:a?.map(l=>({originalStartLineNumber:l.originalRange.startLineNumber,originalStartColumn:l.originalRange.startColumn,originalEndLineNumber:l.originalRange.endLineNumber,originalEndColumn:l.originalRange.endColumn,modifiedStartLineNumber:l.modifiedRange.startLineNumber,modifiedStartColumn:l.modifiedRange.startColumn,modifiedEndLineNumber:l.modifiedRange.endLineNumber,modifiedEndColumn:l.modifiedRange.endColumn}))}})}var L9=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},yi=function(s,e){return function(t,i){e(t,i,s)}};let u1e=0,wF=!1;function h1e(s){if(!s){if(wF)return;wF=!0}qre(s||bi.document.body)}let Qy=class extends Uy{constructor(e,t,i,n,r,o,a,l,c,u,d,g,m){const _={...t};_.ariaLabel=_.ariaLabel||b7.editorViewAccessibleLabel,super(e,_,{},i,n,r,o,c,u,d,g,m),l instanceof gp?this._standaloneKeybindingService=l:this._standaloneKeybindingService=null,h1e(_.ariaContainerElement),cae((v,w)=>i.createInstance(d_,v,w,{})),uae(a)}addCommand(e,t,i){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const n="DYNAMIC_"+ ++u1e,r=ni.deserialize(i);return this._standaloneKeybindingService.addDynamicKeybinding(n,e,t,r),n}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),ve.None;const t=e.id,i=e.label,n=ni.and(ni.equals("editorId",this.getId()),ni.deserialize(e.precondition)),r=e.keybindings,o=ni.and(n,ni.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(m,..._)=>Promise.resolve(e.run(this,..._)),u=new Qe,d=this.getId()+":"+t;if(u.add(Dr.registerCommand(d,c)),a){const m={command:{id:d,title:i},when:n,group:a,order:l};u.add(Jm.appendMenuItem(fs.EditorContext,m))}if(Array.isArray(r))for(const m of r)u.add(this._standaloneKeybindingService.addDynamicKeybinding(d,m,c,o));const g=new Pj(d,i,i,void 0,n,(...m)=>Promise.resolve(e.run(this,...m)),this._contextKeyService);return this._actions.set(t,g),u.add(bt(()=>{this._actions.delete(t)})),u}_triggerCommand(e,t){if(this._codeEditorService instanceof FC)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};Qy=L9([yi(2,hi),yi(3,An),yi(4,xo),yi(5,ai),yi(6,rv),yi(7,ps),yi(8,La),yi(9,al),yi(10,ll),yi(11,Yl),yi(12,Ci)],Qy);let SD=class extends Qy{constructor(e,t,i,n,r,o,a,l,c,u,d,g,m,_,v,w){const y={...t};ky(d,y,!1);const S=c.registerEditorContainer(e);typeof y.theme=="string"&&c.setTheme(y.theme),typeof y.autoDetectHighContrast<"u"&&c.setAutoDetectHighContrast(!!y.autoDetectHighContrast);const k=y.model;delete y.model,super(e,y,i,n,r,o,a,l,c,u,g,v,w),this._configurationService=d,this._standaloneThemeService=c,this._register(S);let L;if(typeof k>"u"){const T=_.getLanguageIdByMimeType(y.language)||y.language||pa;L=Zj(m,_,y.value||"",T,void 0),this._ownsModel=!0}else L=k,this._ownsModel=!1;if(this._attachModel(L),L){const T={oldModelUrl:null,newModelUrl:L.uri};this._onDidChangeModel.fire(T)}}dispose(){super.dispose()}updateOptions(e){ky(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};SD=L9([yi(2,hi),yi(3,An),yi(4,xo),yi(5,ai),yi(6,rv),yi(7,ps),yi(8,Da),yi(9,al),yi(10,Xi),yi(11,ll),yi(12,ar),yi(13,$n),yi(14,Yl),yi(15,Ci)],SD);let xD=class extends Xy{constructor(e,t,i,n,r,o,a,l,c,u,d,g){const m={...t};ky(l,m,!0);const _=o.registerEditorContainer(e);typeof m.theme=="string"&&o.setTheme(m.theme),typeof m.autoDetectHighContrast<"u"&&o.setAutoDetectHighContrast(!!m.autoDetectHighContrast),super(e,m,{},n,i,r,g,u),this._configurationService=l,this._standaloneThemeService=o,this._register(_)}dispose(){super.dispose()}updateOptions(e){ky(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,i){return e.createInstance(Qy,t,i)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,i){return this.getModifiedEditor().addCommand(e,t,i)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};xD=L9([yi(2,hi),yi(3,ai),yi(4,An),yi(5,Da),yi(6,al),yi(7,Xi),yi(8,vu),yi(9,cE),yi(10,YE),yi(11,Q2)],xD);function Zj(s,e,t,i,n){if(t=t||"",!i){const r=t.indexOf(`
`);let o=t;return r!==-1&&(o=t.substring(0,r)),CF(s,t,e.createByFilepathOrFirstLine(n||null,o),n)}return CF(s,t,e.createById(i),n)}function CF(s,e,t,i){return s.createModel(e,t,i)}var d1e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},yF=function(s,e){return function(t,i){e(t,i,s)}};class f1e{constructor(e,t){this.viewModel=e,this.deltaScrollVertical=t}getId(){return this.viewModel}}let Jy=class extends ve{constructor(e,t,i,n,r){super(),this._container=e,this._overflowWidgetsDomNode=t,this._workbenchUIElementFactory=i,this._instantiationService=n,this._viewModel=Zt(this,void 0),this._collapsed=_t(this,l=>this._viewModel.read(l)?.collapsed.read(l)),this._editorContentHeight=Zt(this,500),this.contentHeight=_t(this,l=>(this._collapsed.read(l)?0:this._editorContentHeight.read(l))+this._outerEditorHeight),this._modifiedContentWidth=Zt(this,0),this._modifiedWidth=Zt(this,0),this._originalContentWidth=Zt(this,0),this._originalWidth=Zt(this,0),this.maxScroll=_t(this,l=>{const c=this._modifiedContentWidth.read(l)-this._modifiedWidth.read(l),u=this._originalContentWidth.read(l)-this._originalWidth.read(l);return c>u?{maxScroll:c,width:this._modifiedWidth.read(l)}:{maxScroll:u,width:this._originalWidth.read(l)}}),this._elements=Gt("div.multiDiffEntry",[Gt("div.header@header",[Gt("div.header-content",[Gt("div.collapse-button@collapseButton"),Gt("div.file-path",[Gt("div.title.modified.show-file-icons@primaryPath",[]),Gt("div.status.deleted@status",["R"]),Gt("div.title.original.show-file-icons@secondaryPath",[])]),Gt("div.actions@actions")])]),Gt("div.editorParent",[Gt("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(Xy,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=F_(this.editor.getModifiedEditor()).isFocused,this.isOriginalFocused=F_(this.editor.getOriginalEditor()).isFocused,this.isFocused=_t(this,l=>this.isModifedFocused.read(l)||this.isOriginalFocused.read(l)),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=this._register(new Qe),this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;const o=new t6(this._elements.collapseButton,{});this._register(ti(l=>{o.element.className="",o.icon=this._collapsed.read(l)?$e.chevronRight:$e.chevronDown})),this._register(o.onDidClick(()=>{this._viewModel.get()?.collapsed.set(!this._collapsed.get(),void 0)})),this._register(ti(l=>{this._elements.editor.style.display=this._collapsed.read(l)?"none":"block"})),this._register(this.editor.getModifiedEditor().onDidLayoutChange(l=>{const c=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(c,void 0)})),this._register(this.editor.getOriginalEditor().onDidLayoutChange(l=>{const c=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(c,void 0)})),this._register(this.editor.onDidContentSizeChange(l=>{q0(c=>{this._editorContentHeight.set(l.contentHeight,c),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),c),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),c)})})),this._register(this.editor.getOriginalEditor().onDidScrollChange(l=>{if(this._isSettingScrollTop||!l.scrollTopChanged||!this._data)return;const c=l.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(c)})),this._register(ti(l=>{const c=this._viewModel.read(l)?.isActive.read(l);this._elements.root.classList.toggle("active",c)})),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._contextKeyService=this._register(r.createScoped(this._elements.actions));const a=this._register(this._instantiationService.createChild(new Tp([ai,this._contextKeyService])));this._register(a.createInstance(Zy,this._elements.actions,fs.MultiDiffEditorFileToolbar,{actionRunner:this._register(new qj(()=>this._viewModel.get()?.modifiedUri)),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:l=>l.startsWith("navigation")},actionViewItemProvider:(l,c)=>ele(a,l,c)}))}setScrollLeft(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}setData(e){this._data=e;function t(n){return{...n,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}if(!e){q0(n=>{this._viewModel.set(void 0,n),this.editor.setDiffModel(null,n),this._dataStore.clear()});return}const i=e.viewModel.documentDiffItem;if(q0(n=>{this._resourceLabel?.setUri(e.viewModel.modifiedUri??e.viewModel.originalUri,{strikethrough:e.viewModel.modifiedUri===void 0});let r=!1,o=!1,a=!1,l="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(l="R",r=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(l="A",a=!0):(l="D",o=!0),this._elements.status.classList.toggle("renamed",r),this._elements.status.classList.toggle("deleted",o),this._elements.status.classList.toggle("added",a),this._elements.status.innerText=l,this._resourceLabel2?.setUri(r?e.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(e.viewModel,n),this.editor.setDiffModel(e.viewModel.diffEditorViewModelRef,n),this.editor.updateOptions(t(i.options??{}))}),i.onOptionsDidChange&&this._dataStore.add(i.onOptionsDidChange(()=>{this.editor.updateOptions(t(i.options??{}))})),e.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore,n=>{n||this.setData(void 0)}),e.viewModel.documentDiffItem.contextKeys)for(const[n,r]of Object.entries(e.viewModel.documentDiffItem.contextKeys))this._contextKeyService.createKey(n,r)}render(e,t,i,n){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${e.start}px`,this._elements.root.style.height=`${e.length}px`,this._elements.root.style.width=`${t}px`,this._elements.root.style.position="absolute";const r=e.length-this._headerHeight,o=Math.max(0,Math.min(n.start-e.start,r));this._elements.header.style.transform=`translateY(${o}px)`,q0(a=>{this.editor.layout({width:t-2*8-2*1,height:e.length-this._outerEditorHeight})});try{this._isSettingScrollTop=!0,this._lastScrollTop=i,this.editor.getOriginalEditor().setScrollTop(i)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",o>0||i>0),this._elements.header.classList.toggle("collapsed",o===r)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};Jy=d1e([yF(3,hi),yF(4,ai)],Jy);class g1e{constructor(e){this._create=e,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(e){let t;if(this._unused.size===0)t=this._create(e),this._itemData.set(t,e);else{const i=[...this._unused.values()];t=i.find(n=>this._itemData.get(n).getId()===e.getId())??i[0],this._unused.delete(t),this._itemData.set(t,e),t.setData(e)}return this._used.add(t),{object:t,dispose:()=>{this._used.delete(t),this._unused.size>5?t.dispose():this._unused.add(t)}}}dispose(){for(const e of this._used)e.dispose();for(const e of this._unused)e.dispose();this._used.clear(),this._unused.clear()}}var m1e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},SF=function(s,e){return function(t,i){e(t,i,s)}};let kD=class extends ve{constructor(e,t,i,n,r,o){super(),this._element=e,this._dimension=t,this._viewModel=i,this._workbenchUIElementFactory=n,this._parentContextKeyService=r,this._parentInstantiationService=o,this._scrollableElements=Gt("div.scrollContent",[Gt("div@content",{style:{overflow:"hidden"}}),Gt("div.monaco-editor@overflowWidgetsDomNode",{})]),this._scrollable=this._register(new xp({forceIntegerValues:!1,scheduleAtNextAnimationFrame:l=>Kr(tt(this._element),l),smoothScrollDuration:100})),this._scrollableElement=this._register(new T2(this._scrollableElements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this._elements=Gt("div.monaco-component.multiDiffEditor",{},[Gt("div",{},[this._scrollableElement.getDomNode()]),Gt("div.placeholder@placeholder",{},[Gt("div",[b("noChangedFiles","No Changed Files")])])]),this._sizeObserver=this._register(new Wj(this._element,void 0)),this._objectPool=this._register(new g1e(l=>{const c=this._instantiationService.createInstance(Jy,this._scrollableElements.content,this._scrollableElements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return c.setData(l),c})),this.scrollTop=Yi(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollTop),this.scrollLeft=Yi(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollLeft),this._viewItemsInfo=Lp(this,(l,c)=>{const u=this._viewModel.read(l);if(!u)return{items:[],getItem:_=>{throw new ri}};const d=u.items.read(l),g=new Map;return{items:d.map(_=>{const v=c.add(new p1e(_,this._objectPool,this.scrollLeft,y=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+y})})),w=this._lastDocStates?.[v.getKey()];return w&&In(y=>{v.setViewState(w,y)}),g.set(_,v),v}),getItem:_=>g.get(_)}}),this._viewItems=this._viewItemsInfo.map(this,l=>l.items),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,(l,c)=>l.reduce((u,d)=>u+d.contentHeight.read(c)+this._spaceBetweenPx,0)),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new Tp([ai,this._contextKeyService]))),this._lastDocStates={},this._contextKeyService.createKey(Be.inMultiDiffEditor.key,!0),this._register(Ja((l,c)=>{const u=this._viewModel.read(l);if(u&&u.contextKeys)for(const[d,g]of Object.entries(u.contextKeys)){const m=this._contextKeyService.createKey(d,void 0);m.set(g),c.add(bt(()=>m.reset()))}}));const a=this._parentContextKeyService.createKey(Be.multiDiffEditorAllCollapsed.key,!1);this._register(ti(l=>{const c=this._viewModel.read(l);if(c){const u=c.items.read(l).every(d=>d.collapsed.read(l));a.set(u)}})),this._register(ti(l=>{const c=this._dimension.read(l);this._sizeObserver.observe(c)})),this._register(ti(l=>{const c=this._viewItems.read(l);this._elements.placeholder.classList.toggle("visible",c.length===0)})),this._scrollableElements.content.style.position="relative",this._register(ti(l=>{const c=this._sizeObserver.height.read(l);this._scrollableElements.root.style.height=`${c}px`;const u=this._totalHeight.read(l);this._scrollableElements.content.style.height=`${u}px`;const d=this._sizeObserver.width.read(l);let g=d;const m=this._viewItems.read(l),_=SV(m,ma(v=>v.maxScroll.read(l).maxScroll,Sh));if(_){const v=_.maxScroll.read(l);g=d+v.maxScroll}this._scrollableElement.setScrollDimensions({width:d,height:c,scrollHeight:u,scrollWidth:g})})),e.replaceChildren(this._elements.root),this._register(bt(()=>{e.replaceChildren()})),this._register(this._register(ti(l=>{q0(c=>{this.render(l)})})))}render(e){const t=this.scrollTop.read(e);let i=0,n=0,r=0;const o=this._sizeObserver.height.read(e),a=yt.ofStartAndLength(t,o),l=this._sizeObserver.width.read(e);for(const c of this._viewItems.read(e)){const u=c.contentHeight.read(e),d=Math.min(u,o),g=yt.ofStartAndLength(n,d),m=yt.ofStartAndLength(r,u);if(m.isBefore(a))i-=u-d,c.hide();else if(m.isAfter(a))c.hide();else{const _=Math.max(0,Math.min(a.start-m.start,u-d));i-=_;const v=yt.ofStartAndLength(t+i,o);c.render(g,_,l,v)}n+=d+this._spaceBetweenPx,r+=u+this._spaceBetweenPx}this._scrollableElements.content.style.transform=`translateY(${-(t+i)}px)`}};kD=m1e([SF(4,ai),SF(5,hi)],kD);class p1e extends ve{constructor(e,t,i,n){super(),this.viewModel=e,this._objectPool=t,this._scrollLeft=i,this._deltaScrollVertical=n,this._templateRef=this._register(Hz(this,void 0)),this.contentHeight=_t(this,r=>this._templateRef.read(r)?.object.contentHeight?.read(r)??this.viewModel.lastTemplateData.read(r).contentHeight),this.maxScroll=_t(this,r=>this._templateRef.read(r)?.object.maxScroll.read(r)??{maxScroll:0,scrollWidth:0}),this.template=_t(this,r=>this._templateRef.read(r)?.object),this._isHidden=Zt(this,!1),this._isFocused=_t(this,r=>this.template.read(r)?.isFocused.read(r)??!1),this.viewModel.setIsFocused(this._isFocused,void 0),this._register(ti(r=>{const o=this._scrollLeft.read(r);this._templateRef.read(r)?.object.setScrollLeft(o)})),this._register(ti(r=>{const o=this._templateRef.read(r);!o||!this._isHidden.read(r)||o.object.isFocused.read(r)||this._clear()}))}dispose(){this._clear(),super.dispose()}toString(){return`VirtualViewItem(${this.viewModel.documentDiffItem.modified?.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(e,t){this.viewModel.collapsed.set(e.collapsed,t),this._updateTemplateData(t);const i=this.viewModel.lastTemplateData.get(),n=e.selections?.map(wi.liftSelection);this.viewModel.lastTemplateData.set({...i,selections:n},t);const r=this._templateRef.get();r&&n&&r.object.editor.setSelections(n)}_updateTemplateData(e){const t=this._templateRef.get();t&&this.viewModel.lastTemplateData.set({contentHeight:t.object.contentHeight.get(),selections:t.object.editor.getSelections()??void 0},e)}_clear(){const e=this._templateRef.get();e&&In(t=>{this._updateTemplateData(t),e.object.hide(),this._templateRef.set(void 0,t)})}hide(){this._isHidden.set(!0,void 0)}render(e,t,i,n){this._isHidden.set(!1,void 0);let r=this._templateRef.get();if(!r){r=this._objectPool.getUnusedObj(new f1e(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(r,void 0);const o=this.viewModel.lastTemplateData.get().selections;o&&r.object.editor.setSelections(o)}r.object.render(e,i,t,n)}}$("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},b("multiDiffEditor.headerBackground","The background color of the diff editor's header"));$("multiDiffEditor.background",tl,b("multiDiffEditor.background","The background color of the multi file diff editor"));$("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},b("multiDiffEditor.border","The border color of the multi file diff editor"));var _1e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},v1e=function(s,e){return function(t,i){e(t,i,s)}};let LD=class extends ve{constructor(e,t,i){super(),this._element=e,this._workbenchUIElementFactory=t,this._instantiationService=i,this._dimension=Zt(this,void 0),this._viewModel=Zt(this,void 0),this._widgetImpl=Lp(this,(n,r)=>(la(Jy,n),r.add(this._instantiationService.createInstance(la(kD,n),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory)))),this._register(B2(this._widgetImpl))}};LD=_1e([v1e(2,hi)],LD);function b1e(s,e,t){return nt.initialize(t||{}).createInstance(SD,s,e)}function w1e(s){return nt.get(An).onCodeEditorAdd(t=>{s(t)})}function C1e(s){return nt.get(An).onDiffEditorAdd(t=>{s(t)})}function y1e(){return nt.get(An).listCodeEditors()}function S1e(){return nt.get(An).listDiffEditors()}function x1e(s,e,t){return nt.initialize(t||{}).createInstance(xD,s,e)}function k1e(s,e){const t=nt.initialize(e||{});return new LD(s,{},t)}function L1e(s){if(typeof s.id!="string"||typeof s.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return Dr.registerCommand(s.id,s.run)}function D1e(s){if(typeof s.id!="string"||typeof s.label!="string"||typeof s.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=ni.deserialize(s.precondition),t=(n,...r)=>Nf.runEditorCommand(n,r,e,(o,a,l)=>Promise.resolve(s.run(a,...l))),i=new Qe;if(i.add(Dr.registerCommand(s.id,t)),s.contextMenuGroupId){const n={command:{id:s.id,title:s.label},when:e,group:s.contextMenuGroupId,order:s.contextMenuOrder||0};i.add(Jm.appendMenuItem(fs.EditorContext,n))}if(Array.isArray(s.keybindings)){const n=nt.get(ps);if(!(n instanceof gp))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const r=ni.and(e,ni.deserialize(s.keybindingContext));i.add(n.addDynamicKeybindings(s.keybindings.map(o=>({keybinding:o,command:s.id,when:r}))))}}return i}function E1e(s){return Yj([s])}function Yj(s){const e=nt.get(ps);return e instanceof gp?e.addDynamicKeybindings(s.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:ni.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),ve.None)}function T1e(s,e,t){const i=nt.get($n),n=i.getLanguageIdByMimeType(e)||e;return Zj(nt.get(ar),i,s,n,t)}function N1e(s,e){const t=nt.get($n),i=t.getLanguageIdByMimeType(e)||e||pa;s.setLanguage(t.createById(i))}function I1e(s,e,t){s&&nt.get(Yf).changeOne(e,s.uri,t)}function M1e(s){nt.get(Yf).changeAll(s,[])}function R1e(s){return nt.get(Yf).read(s)}function A1e(s){return nt.get(Yf).onMarkerChanged(s)}function P1e(s){return nt.get(ar).getModel(s)}function O1e(){return nt.get(ar).getModels()}function F1e(s){return nt.get(ar).onModelAdded(s)}function B1e(s){return nt.get(ar).onModelRemoved(s)}function W1e(s){return nt.get(ar).onModelLanguageChanged(t=>{s({model:t.model,oldLanguage:t.oldLanguageId})})}function V1e(s){return bfe(nt.get(ar),s)}function z1e(s,e){const t=nt.get($n),i=nt.get(Da);return t9.colorizeElement(i,t,s,e).then(()=>{i.registerEditorContainer(s)})}function H1e(s,e,t){const i=nt.get($n);return nt.get(Da).registerEditorContainer(bi.document.body),t9.colorize(i,s,e,t)}function j1e(s,e,t=4){return nt.get(Da).registerEditorContainer(bi.document.body),t9.colorizeModelLine(s,e,t)}function U1e(s){const e=un.get(s);return e||{getInitialState:()=>g_,tokenize:(t,i,n)=>Az(s,n)}}function $1e(s,e){un.getOrCreate(e);const t=U1e(e),i=yp(s),n=[];let r=t.getInitialState();for(let o=0,a=i.length;o<a;o++){const l=i[o],c=t.tokenize(l,!0,r);n[o]=c.tokens,r=c.endState}return n}function q1e(s,e){nt.get(Da).defineTheme(s,e)}function K1e(s){nt.get(Da).setTheme(s)}function G1e(){v3.clearAllFontInfos()}function Z1e(s,e){return Dr.registerCommand({id:s,handler:e})}function Y1e(s){return nt.get(av).registerOpener({async open(t){return typeof t=="string"&&(t=Et.parse(t)),s.open(t)}})}function X1e(s){return nt.get(An).registerCodeEditorOpenHandler(async(t,i,n)=>{if(!i)return null;const r=t.options?.selection;let o;return r&&typeof r.endLineNumber=="number"&&typeof r.endColumn=="number"?o=r:r&&(o={lineNumber:r.startLineNumber,column:r.startColumn}),await s.openCodeEditor(i,t.resource,o)?i:null})}function Q1e(){return{create:b1e,getEditors:y1e,getDiffEditors:S1e,onDidCreateEditor:w1e,onDidCreateDiffEditor:C1e,createDiffEditor:x1e,addCommand:L1e,addEditorAction:D1e,addKeybindingRule:E1e,addKeybindingRules:Yj,createModel:T1e,setModelLanguage:N1e,setModelMarkers:I1e,getModelMarkers:R1e,removeAllMarkers:M1e,onDidChangeMarkers:A1e,getModels:O1e,getModel:P1e,onDidCreateModel:F1e,onWillDisposeModel:B1e,onDidChangeModelLanguage:W1e,createWebWorker:V1e,colorizeElement:z1e,colorize:H1e,colorizeModelLine:j1e,tokenize:$1e,defineTheme:q1e,setTheme:K1e,remeasureFonts:G1e,registerCommand:Z1e,registerLinkOpener:Y1e,registerEditorOpener:X1e,AccessibilitySupport:a5,ContentWidgetPositionPreference:f5,CursorChangeReason:g5,DefaultEndOfLine:m5,EditorAutoIndentStrategy:_5,EditorOption:v5,EndOfLinePreference:b5,EndOfLineSequence:w5,MinimapPosition:I5,MinimapSectionHeaderStyle:M5,MouseTargetType:R5,OverlayWidgetPositionPreference:O5,OverviewRulerLane:F5,GlyphMarginLane:C5,RenderLineNumbersType:V5,RenderMinimap:z5,ScrollbarVisibility:j5,ScrollType:H5,TextEditorCursorBlinkingStyle:Z5,TextEditorCursorStyle:Y5,TrackedRangeStickiness:X5,WrappingIndent:Q5,InjectedTextCursorStops:x5,PositionAffinity:W5,ShowLightbulbIconMode:$5,ConfigurationChangedEvent:iW,BareFontInfo:rf,FontInfo:_3,TextModelResolvedOptions:Bw,FindMatch:a_,ApplyUpdateResult:e1,EditorZoom:oh,createMultiFileDiffEditor:k1e,EditorType:QE,EditorOptions:Bf}}function J1e(s,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!s(t))return!1;return!0}function bw(s,e){return typeof s=="boolean"?s:e}function xF(s,e){return typeof s=="string"?s:e}function e_e(s){const e={};for(const t of s)e[t]=!0;return e}function kF(s,e=!1){e&&(s=s.map(function(i){return i.toLowerCase()}));const t=e_e(s);return e?function(i){return t[i.toLowerCase()]!==void 0&&t.hasOwnProperty(i.toLowerCase())}:function(i){return t[i]!==void 0&&t.hasOwnProperty(i)}}function DD(s,e,t){e=e.replace(/@@/g,"");let i=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(o,a){n=!0;let l="";if(typeof s[a]=="string")l=s[a];else if(s[a]&&s[a]instanceof RegExp)l=s[a].source;else throw s[a]===void 0?Ti(s,"language definition does not contain attribute '"+a+"', used at: "+e):Ti(s,"attribute reference '"+a+"' must be a string, used at: "+e);return zd(l)?"":"(?:"+l+")"}),i++;while(n&&i<5);e=e.replace(/\x01/g,"@");const r=(s.ignoreCase?"i":"")+(s.unicode?"u":"");if(t&&e.match(/\$[sS](\d\d?)/g)){let a=null,l=null;return c=>(l&&a===c||(a=c,l=new RegExp(Bfe(s,e,c),r)),l)}return new RegExp(e,r)}function t_e(s,e,t,i){if(i<0)return s;if(i<e.length)return e[i];if(i>=100){i=i-100;const n=t.split(".");if(n.unshift(t),i<n.length)return n[i]}return null}function i_e(s,e,t,i){let n=-1,r=t,o=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(n=parseInt(o[3]),o[2]&&(n=n+100)),r=o[4]);let a="~",l=r;!r||r.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(o=r.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(a=o[1],l=o[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const u=kF(l.split("|"),s.ignoreCase);c=function(d){return a==="~"?u(d):!u(d)}}else if(a==="@"||a==="!@"){const u=s[l];if(!u)throw Ti(s,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!J1e(function(g){return typeof g=="string"},u))throw Ti(s,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const d=kF(u,s.ignoreCase);c=function(g){return a==="@"?d(g):!d(g)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const u=DD(s,"^"+l+"$",!1);c=function(d){return a==="~"?u.test(d):!u.test(d)}}else c=function(u,d,g,m){return DD(s,"^"+ch(s,l,d,g,m)+"$",!1).test(u)};else if(l.indexOf("$")<0){const u=ru(s,l);c=function(d){return a==="=="?d===u:d!==u}}else{const u=ru(s,l);c=function(d,g,m,_,v){const w=ch(s,u,g,m,_);return a==="=="?d===w:d!==w}}return n===-1?{name:t,value:i,test:function(u,d,g,m){return c(u,u,d,g,m)}}:{name:t,value:i,test:function(u,d,g,m){const _=t_e(u,d,g,n);return c(_||"",u,d,g,m)}}}function ED(s,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw Ti(s,"a 'token' attribute must be of type string, in rule: "+e);{const i={token:t.token};if(t.token.indexOf("$")>=0&&(i.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")i.bracket=1;else if(t.bracket==="@close")i.bracket=-1;else throw Ti(s,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw Ti(s,"the next state must be a string value in rule: "+e);{let n=t.next;if(!/^(@pop|@push|@popall)$/.test(n)&&(n[0]==="@"&&(n=n.substr(1)),n.indexOf("$")<0&&!Wfe(s,ch(s,n,"",[],""))))throw Ti(s,"the next state '"+t.next+"' is not defined in rule: "+e);i.next=n}}return typeof t.goBack=="number"&&(i.goBack=t.goBack),typeof t.switchTo=="string"&&(i.switchTo=t.switchTo),typeof t.log=="string"&&(i.log=t.log),typeof t.nextEmbedded=="string"&&(i.nextEmbedded=t.nextEmbedded,s.usesEmbedded=!0),i}}else if(Array.isArray(t)){const i=[];for(let n=0,r=t.length;n<r;n++)i[n]=ED(s,e,t[n]);return{group:i}}else if(t.cases){const i=[];for(const r in t.cases)if(t.cases.hasOwnProperty(r)){const o=ED(s,e,t.cases[r]);r==="@default"||r==="@"||r===""?i.push({test:void 0,value:o,name:r}):r==="@eos"?i.push({test:function(a,l,c,u){return u},value:o,name:r}):i.push(i_e(s,e,r,o))}const n=s.defaultToken;return{test:function(r,o,a,l){for(const c of i)if(!c.test||c.test(r,o,a,l))return c.value;return n}}}else throw Ti(s,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class n_e{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let i;if(typeof t=="string")i=t;else if(t instanceof RegExp)i=t.source;else throw Ti(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=i.length>0&&i[0]==="^",this.name=this.name+": "+i,this.regex=DD(e,"^(?:"+(this.matchOnlyAtLineStart?i.substr(1):i)+")",!0)}setAction(e,t){this.action=ED(e,this.name,t)}resolveRegex(e){return this.regex instanceof RegExp?this.regex:this.regex(e)}}function Xj(s,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={languageId:s,includeLF:bw(e.includeLF,!1),noThrow:!1,maxStack:100,start:typeof e.start=="string"?e.start:null,ignoreCase:bw(e.ignoreCase,!1),unicode:bw(e.unicode,!1),tokenPostfix:xF(e.tokenPostfix,"."+s),defaultToken:xF(e.defaultToken,"source"),usesEmbedded:!1,stateNames:{},tokenizer:{},brackets:[]},i=e;i.languageId=s,i.includeLF=t.includeLF,i.ignoreCase=t.ignoreCase,i.unicode=t.unicode,i.noThrow=t.noThrow,i.usesEmbedded=t.usesEmbedded,i.stateNames=e.tokenizer,i.defaultToken=t.defaultToken;function n(o,a,l){for(const c of l){let u=c.include;if(u){if(typeof u!="string")throw Ti(t,"an 'include' attribute must be a string at: "+o);if(u[0]==="@"&&(u=u.substr(1)),!e.tokenizer[u])throw Ti(t,"include target '"+u+"' is not defined at: "+o);n(o+"."+u,a,e.tokenizer[u])}else{const d=new n_e(o);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(d.setRegex(i,c[0]),c.length>=3)if(typeof c[1]=="string")d.setAction(i,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const g=c[1];g.next=c[2],d.setAction(i,g)}else throw Ti(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+o);else d.setAction(i,c[1]);else{if(!c.regex)throw Ti(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+o);c.name&&typeof c.name=="string"&&(d.name=c.name),c.matchOnlyAtStart&&(d.matchOnlyAtLineStart=bw(c.matchOnlyAtLineStart,!1)),d.setRegex(i,c.regex),d.setAction(i,c.action)}a.push(d)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw Ti(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const o in e.tokenizer)if(e.tokenizer.hasOwnProperty(o)){t.start||(t.start=o);const a=e.tokenizer[o];t.tokenizer[o]=new Array,n("tokenizer."+o,t.tokenizer[o],a)}if(t.usesEmbedded=i.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw Ti(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const r=[];for(const o of e.brackets){let a=o;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw Ti(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")r.push({token:a.token+t.tokenPostfix,open:ru(t,a.open),close:ru(t,a.close)});else throw Ti(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=r,t.noThrow=!0,t}function s_e(s){ep.registerLanguage(s)}function r_e(){let s=[];return s=s.concat(ep.getLanguages()),s}function o_e(s){return nt.get($n).languageIdCodec.encodeLanguageId(s)}function a_e(s,e){return nt.withServices(()=>{const i=nt.get($n).onDidRequestRichLanguageFeatures(n=>{n===s&&(i.dispose(),e())});return i})}function l_e(s,e){return nt.withServices(()=>{const i=nt.get($n).onDidRequestBasicLanguageFeatures(n=>{n===s&&(i.dispose(),e())});return i})}function c_e(s,e){if(!nt.get($n).isRegisteredLanguageId(s))throw new Error(`Cannot set configuration for unknown language ${s}`);return nt.get(Yl).register(s,e,100)}class u_e{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,i){if(typeof this._actual.tokenize=="function")return W_.adaptTokenize(this._languageId,this._actual,e,i);throw new Error("Not supported!")}tokenizeEncoded(e,t,i){const n=this._actual.tokenizeEncoded(e,i);return new s2(n.tokens,n.endState)}}class W_{constructor(e,t,i,n){this._languageId=e,this._actual=t,this._languageService=i,this._standaloneThemeService=n}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const i=[];let n=0;for(let r=0,o=e.length;r<o;r++){const a=e[r];let l=a.startIndex;r===0?l=0:l<n&&(l=n),i[r]=new e_(l,a.scopes,t),n=l}return i}static adaptTokenize(e,t,i,n){const r=t.tokenize(i,n),o=W_._toClassicTokens(r.tokens,e);let a;return r.endState.equals(n)?a=n:a=r.endState,new c8(o,a)}tokenize(e,t,i){return W_.adaptTokenize(this._languageId,this._actual,e,i)}_toBinaryTokens(e,t){const i=e.encodeLanguageId(this._languageId),n=this._standaloneThemeService.getColorTheme().tokenTheme,r=[];let o=0,a=0;for(let c=0,u=t.length;c<u;c++){const d=t[c],g=n.match(i,d.scopes)|1024;if(o>0&&r[o-1]===g)continue;let m=d.startIndex;c===0?m=0:m<a&&(m=a),r[o++]=m,r[o++]=g,a=m}const l=new Uint32Array(o);for(let c=0;c<o;c++)l[c]=r[c];return l}tokenizeEncoded(e,t,i){const n=this._actual.tokenize(e,i),r=this._toBinaryTokens(this._languageService.languageIdCodec,n.tokens);let o;return n.endState.equals(i)?o=i:o=n.endState,new s2(r,o)}}function h_e(s){return typeof s.getInitialState=="function"}function d_e(s){return"tokenizeEncoded"in s}function Qj(s){return s&&typeof s.then=="function"}function f_e(s){const e=nt.get(Da);if(s){const t=[null];for(let i=1,n=s.length;i<n;i++)t[i]=Le.fromHex(s[i]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}function Jj(s,e){return d_e(e)?new u_e(s,e):new W_(s,e,nt.get($n),nt.get(Da))}function D9(s,e){const t=new kX(async()=>{const i=await Promise.resolve(e.create());return i?h_e(i)?Jj(s,i):new I_(nt.get($n),nt.get(Da),s,Xj(s,i),nt.get(Xi)):null});return un.registerFactory(s,t)}function g_e(s,e){if(!nt.get($n).isRegisteredLanguageId(s))throw new Error(`Cannot set tokens provider for unknown language ${s}`);return Qj(e)?D9(s,{create:()=>e}):un.register(s,Jj(s,e))}function m_e(s,e){const t=i=>new I_(nt.get($n),nt.get(Da),s,Xj(s,i),nt.get(Xi));return Qj(e)?D9(s,{create:()=>e}):un.register(s,t(e))}function p_e(s,e){return nt.get(Ci).referenceProvider.register(s,e)}function __e(s,e){return nt.get(Ci).renameProvider.register(s,e)}function v_e(s,e){return nt.get(Ci).newSymbolNamesProvider.register(s,e)}function b_e(s,e){return nt.get(Ci).signatureHelpProvider.register(s,e)}function w_e(s,e){return nt.get(Ci).hoverProvider.register(s,{provideHover:async(i,n,r,o)=>{const a=i.getWordAtPosition(n);return Promise.resolve(e.provideHover(i,n,r,o)).then(l=>{if(l)return!l.range&&a&&(l.range=new Q(n.lineNumber,a.startColumn,n.lineNumber,a.endColumn)),l.range||(l.range=new Q(n.lineNumber,n.column,n.lineNumber,n.column)),l})}})}function C_e(s,e){return nt.get(Ci).documentSymbolProvider.register(s,e)}function y_e(s,e){return nt.get(Ci).documentHighlightProvider.register(s,e)}function S_e(s,e){return nt.get(Ci).linkedEditingRangeProvider.register(s,e)}function x_e(s,e){return nt.get(Ci).definitionProvider.register(s,e)}function k_e(s,e){return nt.get(Ci).implementationProvider.register(s,e)}function L_e(s,e){return nt.get(Ci).typeDefinitionProvider.register(s,e)}function D_e(s,e){return nt.get(Ci).codeLensProvider.register(s,e)}function E_e(s,e,t){return nt.get(Ci).codeActionProvider.register(s,{providedCodeActionKinds:t?.providedCodeActionKinds,documentation:t?.documentation,provideCodeActions:(n,r,o,a)=>{const c=nt.get(Yf).read({resource:n.uri}).filter(u=>Q.areIntersectingOrTouching(u,r));return e.provideCodeActions(n,r,{markers:c,only:o.only,trigger:o.trigger},a)},resolveCodeAction:e.resolveCodeAction})}function T_e(s,e){return nt.get(Ci).documentFormattingEditProvider.register(s,e)}function N_e(s,e){return nt.get(Ci).documentRangeFormattingEditProvider.register(s,e)}function I_e(s,e){return nt.get(Ci).onTypeFormattingEditProvider.register(s,e)}function M_e(s,e){return nt.get(Ci).linkProvider.register(s,e)}function R_e(s,e){return nt.get(Ci).completionProvider.register(s,e)}function A_e(s,e){return nt.get(Ci).colorProvider.register(s,e)}function P_e(s,e){return nt.get(Ci).foldingRangeProvider.register(s,e)}function O_e(s,e){return nt.get(Ci).declarationProvider.register(s,e)}function F_e(s,e){return nt.get(Ci).selectionRangeProvider.register(s,e)}function B_e(s,e){return nt.get(Ci).documentSemanticTokensProvider.register(s,e)}function W_e(s,e){return nt.get(Ci).documentRangeSemanticTokensProvider.register(s,e)}function V_e(s,e){return nt.get(Ci).inlineCompletionsProvider.register(s,e)}function z_e(s,e){return nt.get(Ci).inlineEditProvider.register(s,e)}function H_e(s,e){return nt.get(Ci).inlayHintsProvider.register(s,e)}function j_e(){return{register:s_e,getLanguages:r_e,onLanguage:a_e,onLanguageEncountered:l_e,getEncodedLanguageId:o_e,setLanguageConfiguration:c_e,setColorMap:f_e,registerTokensProviderFactory:D9,setTokensProvider:g_e,setMonarchTokensProvider:m_e,registerReferenceProvider:p_e,registerRenameProvider:__e,registerNewSymbolNameProvider:v_e,registerCompletionItemProvider:R_e,registerSignatureHelpProvider:b_e,registerHoverProvider:w_e,registerDocumentSymbolProvider:C_e,registerDocumentHighlightProvider:y_e,registerLinkedEditingRangeProvider:S_e,registerDefinitionProvider:x_e,registerImplementationProvider:k_e,registerTypeDefinitionProvider:L_e,registerCodeLensProvider:D_e,registerCodeActionProvider:E_e,registerDocumentFormattingEditProvider:T_e,registerDocumentRangeFormattingEditProvider:N_e,registerOnTypeFormattingEditProvider:I_e,registerLinkProvider:M_e,registerColorProvider:A_e,registerFoldingRangeProvider:P_e,registerDeclarationProvider:O_e,registerSelectionRangeProvider:F_e,registerDocumentSemanticTokensProvider:B_e,registerDocumentRangeSemanticTokensProvider:W_e,registerInlineCompletionsProvider:V_e,registerInlineEditProvider:z_e,registerInlayHintsProvider:H_e,DocumentHighlightKind:p5,CompletionItemKind:u5,CompletionItemTag:h5,CompletionItemInsertTextRule:c5,SymbolKind:K5,SymbolTag:G5,IndentAction:S5,CompletionTriggerKind:d5,SignatureHelpTriggerKind:q5,InlayHintKind:k5,InlineCompletionTriggerKind:L5,InlineEditTriggerKind:D5,CodeActionTriggerType:l5,NewSymbolNameTag:A5,NewSymbolNameTriggerKind:P5,PartialAcceptTriggerKind:B5,HoverVerbosityAction:y5,FoldingRangeKind:r5,SelectedSuggestionInfo:xX}}const eU=Ut("IEditorCancelService"),tU=new Je("cancellableOperation",!1,b("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));Jt(eU,class{constructor(){this._tokens=new WeakMap}add(s,e){let t=this._tokens.get(s);t||(t=s.invokeWithinContext(n=>{const r=tU.bindTo(n.get(ai)),o=new zr;return{key:r,tokens:o}}),this._tokens.set(s,t));let i;return t.key.set(!0),i=t.tokens.push(e),()=>{i&&(i(),t.key.set(!t.tokens.isEmpty()),i=void 0)}}cancel(s){const e=this._tokens.get(s);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},1);pt(new class extends Nf{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:tU})}runEditorCommand(s,e){s.get(eU).cancel(e)}});class LF{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}class U_e{constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(LF.toKey(e))}has(e){return this._set.has(LF.toKey(e))}}function $_e(s,e,t){const i=[],n=new U_e,r=s.ordered(t);for(const a of r)i.push(a),a.extensionId&&n.add(a.extensionId);const o=e.ordered(t);for(const a of o){if(a.extensionId){if(n.has(a.extensionId))continue;n.add(a.extensionId)}i.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,u){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,u)}})}return i}const q1=class q1{static setFormatterSelector(e){return{dispose:q1._selectors.unshift(e)}}static async select(e,t,i,n){if(e.length===0)return;const r=ei.first(q1._selectors);if(r)return await r(e,t,i,n)}};q1._selectors=new zr;let TD=q1;async function q_e(s,e,t,i,n,r){const o=e.documentRangeFormattingEditProvider.ordered(t);for(const a of o){const l=await Promise.resolve(a.provideDocumentRangeFormattingEdits(t,i,n,r)).catch(n8);if(e2(l))return await s.computeMoreMinimalEdits(t.uri,l)}}async function K_e(s,e,t,i,n){const r=$_e(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const o of r){const a=await Promise.resolve(o.provideDocumentFormattingEdits(t,i,n)).catch(n8);if(e2(a))return await s.computeMoreMinimalEdits(t.uri,a)}}function G_e(s,e,t,i,n,r,o){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(n)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,i,n,r,o)).catch(n8).then(l=>s.computeMoreMinimalEdits(t.uri,l))}Dr.registerCommand("_executeFormatRangeProvider",async function(s,...e){const[t,i,n]=e;xh(Et.isUri(t)),xh(Q.isIRange(i));const r=s.get(u2),o=s.get(dv),a=s.get(Ci),l=await r.createModelReference(t);try{return q_e(o,a,l.object.textEditorModel,Q.lift(i),n,va.None)}finally{l.dispose()}});Dr.registerCommand("_executeFormatDocumentProvider",async function(s,...e){const[t,i]=e;xh(Et.isUri(t));const n=s.get(u2),r=s.get(dv),o=s.get(Ci),a=await n.createModelReference(t);try{return K_e(r,o,a.object.textEditorModel,i,va.None)}finally{a.dispose()}});Dr.registerCommand("_executeFormatOnTypeProvider",async function(s,...e){const[t,i,n,r]=e;xh(Et.isUri(t)),xh(ce.isIPosition(i)),xh(typeof n=="string");const o=s.get(u2),a=s.get(dv),l=s.get(Ci),c=await o.createModelReference(t);try{return G_e(a,l,c.object.textEditorModel,ce.lift(i),n,r,va.None)}finally{c.dispose()}});Bf.wrappingIndent.defaultValue=0;Bf.glyphMargin.defaultValue=!1;Bf.autoIndent.defaultValue=3;Bf.overviewRulerLanes.defaultValue=2;TD.setFormatterSelector((s,e,t)=>Promise.resolve(s[0]));const lr=bW();lr.editor=Q1e();lr.languages=j_e();const Z_e=lr.CancellationTokenSource,Y_e=lr.Emitter,X_e=lr.KeyCode,Q_e=lr.KeyMod,J_e=lr.Position,eve=lr.Range,tve=lr.Selection,ive=lr.SelectionDirection,nve=lr.MarkerSeverity,sve=lr.MarkerTag,rve=lr.Uri,ove=lr.Token,Ed=lr.editor,ave=lr.languages,lve=globalThis.MonacoEnvironment;(lve?.globalAPI||typeof define=="function"&&define.amd)&&(globalThis.monaco=lr);typeof globalThis.require<"u"&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const ww=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:Z_e,Emitter:Y_e,KeyCode:X_e,KeyMod:Q_e,MarkerSeverity:nve,MarkerTag:sve,Position:J_e,Range:eve,Selection:tve,SelectionDirection:ive,Token:ove,Uri:rve,editor:Ed,languages:ave},Symbol.toStringTag,{value:"Module"}));function DF(s){return/^\d+$/.test(s)?"".concat(s,"px"):s}function Cw(){}var Dc=function(){return Dc=Object.assign||function(s){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n])}return s},Dc.apply(this,arguments)},cve=function(s,e){var t={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&e.indexOf(i)<0&&(t[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(s);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(s,i[n])&&(t[i[n]]=s[i[n]]);return t};function s4(s){var e=s.width,t=s.height,i=s.value,n=s.defaultValue,r=s.language,o=s.theme,a=s.options,l=s.overrideServices,c=s.editorWillMount,u=s.editorDidMount,d=s.editorWillUnmount,g=s.onChange,m=s.className,_=s.uri,v=Ee.useRef(null),w=Ee.useRef(null),y=Ee.useRef(null),S=Ee.useRef(null),k=DF(e),L=DF(t),T=Ee.useRef(g);T.current=g;var A=Ee.useMemo(function(){return{width:k,height:L}},[k,L]),I=function(){var Y=c(ww);return Y||{}},O=function(){u(w.current,ww),y.current=w.current.onDidChangeModelContent(function(Y){var G;S.current||(G=T.current)===null||G===void 0||G.call(T,w.current.getValue(),Y)})},F=function(){d(w.current,ww)},J=function(){var Y=i!==null?i:n;if(v.current){var G=Dc(Dc({},a),I()),ie=_?.(ww),Z=ie&&Ed.getModel(ie);Z?(Z.setValue(Y),Ed.setModelLanguage(Z,r)):Z=Ed.createModel(Y,r,ie),w.current=Ed.create(v.current,Dc(Dc(Dc({model:Z},m?{extraEditorClassName:m}:{}),G),o?{theme:o}:{}),l),O()}};return Ee.useEffect(J,[]),Ee.useEffect(function(){if(w.current){if(i===w.current.getValue())return;var Y=w.current.getModel();S.current=!0,w.current.pushUndoStop(),Y.pushEditOperations([],[{range:Y.getFullModelRange(),text:i}],void 0),w.current.pushUndoStop(),S.current=!1}},[i]),Ee.useEffect(function(){if(w.current){var Y=w.current.getModel();Ed.setModelLanguage(Y,r)}},[r]),Ee.useEffect(function(){if(w.current){a.model;var Y=cve(a,["model"]);w.current.updateOptions(Dc(Dc({},m?{extraEditorClassName:m}:{}),Y))}},[m,a]),Ee.useEffect(function(){w.current&&w.current.layout()},[e,t]),Ee.useEffect(function(){Ed.setTheme(o)},[o]),Ee.useEffect(function(){return function(){w.current&&(F(),w.current.dispose()),y.current&&y.current.dispose()}},[]),Ee.createElement("div",{ref:v,style:A,className:"react-monaco-editor-container"})}s4.defaultProps={width:"100%",height:"100%",value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:Cw,editorDidMount:Cw,editorWillUnmount:Cw,onChange:Cw,className:null};s4.displayName="MonacoEditor";function uve({ppmS:s}){const[e,t]=Ee.useState(s),i=Ee.useRef(null),n=16;Ee.useEffect(()=>{if(!e)return;const o=e.split(`
`),[a,l,c,u]=o.slice(0,4);if(a!=="P3"){console.error("Unsupported PPM format");return}const d=o.slice(4).join(" ").split(" ").map(k=>parseInt(k,n)),g=i.current,m=g.getContext("2d");m.clearRect(0,0,g.width,g.height),m.imageSmoothingEnabled=!1;const _=parseInt(l,n)||1,v=parseInt(c,n)||1,w=m.createImageData(_,v);for(let k=0,L=0;k<d.length;k+=3,L+=4)w.data[L]=parseInt(d[k],n),w.data[L+1]=parseInt(d[k+1],n),w.data[L+2]=parseInt(d[k+2],n),w.data[L+3]=255;const y=document.createElement("canvas");y.width=_,y.height=v,y.getContext("2d").putImageData(w,0,0),m.drawImage(y,0,0,_,v,0,0,g.width,g.height)},[e]);const r=o=>{t(o)};return x.jsxs("div",{style:{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"center",width:"100%",gap:"1em"},children:[x.jsx(s4,{language:"json",value:e,height:"300px",theme:"vs-dark",onChange:r}),x.jsx("canvas",{ref:i,style:{border:"1px solid white",width:"300px",height:"300px",imageRendering:"pixelated"}})]})}function EF(s){const e={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...s.components};return x.jsxs(x.Fragment,{children:[x.jsx(e.h2,{children:"Farben"}),`
`,x.jsxs(e.p,{children:["Da ein Computer nur mit ",x.jsx(e.code,{children:"Bits"}),` arbeiten kann, müssen wir dem Computer
beibringen wie er `,x.jsx(e.code,{children:"Bits"}),` zusammen gruppieren kann, damit wir diese Daten weiter
interpretieren können. Wir haben bereits gesehen das wir mit dem `,x.jsx(e.code,{children:"Byte 0110 0001"})," den Buchstaben ",x.jsx(e.code,{children:"a"})," abbilden können. Wir können also mit ",x.jsx(e.code,{children:"Bytes"}),` bereits
Text abbilden. Nun möchten wir aber noch Bilder beschreiben können. Dafür
müssen wir die `,x.jsx(e.code,{children:"Bits"}),` so gruppieren, das wir die Farben von einzelnen Pixeln
beschreiben können. Das kommt daher, das Computerdisplays pro Pixel 3 LEDs
haben, die jeweils `,x.jsx(e.code,{children:"rot"}),", ",x.jsx(e.code,{children:"grün"})," und ",x.jsx(e.code,{children:"blau"}),` sind. Wenn Sie das Licht von diesen
LEDs mischen, dann können Sie jede beliebige Farbe darstellen. Sie müssen nur
sagen wie stark jedes LED leuchten soll. Aus dieser Idee ergibt sich das
`,x.jsx(e.code,{children:"RBG"}),"-Farbschema."]}),`
`,x.jsxs(e.p,{children:["Wir müssen nun also die Intensitäten von ",x.jsx(e.code,{children:"rot"}),", ",x.jsx(e.code,{children:"grün"})," und ",x.jsx(e.code,{children:"blau"}),` jeweils in
`,x.jsx(e.code,{children:"Bits"}),` angeben. Damit mir möglichst feine Abstufungen haben, hat man sich für
256 Werte pro Farbe entschieden. Wir können ein Pixel also mit genau 3 `,x.jsx(e.code,{children:"Bytes"}),`
beschreiben. Wenn wir also nur Rot möchten, dann können wir das mit den
folgenden 3 `,x.jsx(e.code,{children:"Bytes"})," beschreiben."]}),`
`,x.jsx(e.pre,{children:x.jsx(e.code,{className:"language-text",children:`11111111 00000000 00000000
`})}),`
`,x.jsxs(e.p,{children:[`Das ist aber unglaublich aufwendig und Fehler können schnell passieren, wenn
man mal in einer Stelle verrutscht. Deshalb nehmen wir das Hexadezimalsystem
zur Hilfe und können die gleiche Farbe dann einfach so schreiben: `,x.jsx(e.code,{children:"FF 00 00"}),`.
Dieses Format ist so verbreitet, das man dafür eine eigene Schreibweise
eingeführt hat: `,x.jsx(e.code,{children:"#FF0000"}),"."]}),`
`,x.jsx(e.p,{children:"Hier finden Sie eine Anwendung die Ihnen die Farbe direkt darstellen kann."}),`
`,x.jsx(mZ,{}),`
`,x.jsxs(Ko,{title:"Farben mischen",children:[x.jsx(e.p,{children:`Sie kennen bereits das mischen von Wasserfarben. Diese Art von Farben
mischen, nennt man Farbsubtraktion, da die unterschiedlichen Farbpigmente
das Licht absorbieren. Also jede weitere Farbe absorbiert mehr Licht.`}),x.jsxs(e.p,{children:[`Die Mischung von Farben die wir auf dem Bildschirm haben, funktioniert ganz
anders. Da kommt immer mehr Licht dazu, deshalb sagt man zu dieser Art
Farbaddition. Mit Farbaddition kommen Sie auf ganz andere Farben wie mit
der Farbsubtraktion. Zum Beispiel erreichen Sie weiss, indem Sie alle
Farben voll aktivieren, also mit `,x.jsx(e.code,{children:"#FFFFFF"}),`. Und schwarz erhalten Sie wenn
Sie alle Farben komplett deaktivieren, also `,x.jsx(e.code,{children:"#000000"}),"."]}),x.jsxs(e.p,{children:["Finden Sie heraus was die folgenden ",x.jsx(e.code,{children:"Bytes"}),` für eine Farbe ergeben.
Versuchen Sie zuerst zu raten, geben Sie es dann in den Farbrechner oben
ein.`]}),x.jsxs(e.ul,{children:[`
`,x.jsx(e.li,{children:x.jsx(e.code,{children:"#FF00FF"})}),`
`,x.jsx(e.li,{children:x.jsx(e.code,{children:"#00FFFF"})}),`
`,x.jsx(e.li,{children:x.jsx(e.code,{children:"#A33ECE"})}),`
`,x.jsx(e.li,{children:x.jsx(e.code,{children:"#626262"})}),`
`]}),x.jsx(e.p,{children:"Versuchen Sie die Hexwerte für die folgenden Farben zu finden:"}),x.jsxs(e.ul,{children:[`
`,x.jsxs(e.li,{children:[`
`,x.jsx(_0,{hex:"#FFFF00"}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(_0,{hex:"#FF00FF"}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(_0,{hex:"#00FFFF"}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(_0,{hex:"#000000"}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(_0,{hex:"#FFFFFF"}),`
`]}),`
`]})]}),`
`,x.jsx(e.h3,{children:"Bilder"}),`
`,x.jsxs(e.p,{children:[`Wir wissen nun wie man Farben beschreiben kann, jetzt möchten wir aber Bilder
beschreiben. Wir schauen uns dafür ein Bildformat an, das so eigentlich nicht
mehr verwendet wird, das aber praktisch zum lernen ist. Das Format heisst `,x.jsx(e.code,{children:"PPM"}),`
und steht für `,x.jsx(e.code,{children:"Portable Pixmap Format"}),`. Im Gegensatz zu den häufig verwendeten
Formaten wir `,x.jsx(e.code,{children:"JPG"})," oder ",x.jsx(e.code,{children:"PNG"}),", ist ",x.jsx(e.code,{children:"PPM"}),` nicht komprimiert. Das bedeutet das
jedes einzelne Pixel mit all seinen Farbwerten beschrieben wird. Das Format
selber ist sehr einfach aufgebaut, hier finden Sie ein Beispiel dazu:`]}),`
`,x.jsx(e.pre,{children:x.jsx(e.code,{className:"language-text",children:`P3
2
2
FF
00 FF 00 FF 00 00
A2 B5 18 3F 3F 3F
`})}),`
`,x.jsxs(e.p,{children:[`Die erste Zeile beschreibt welche Version von dem Format verwendet werden soll.
`,x.jsx(e.code,{children:"P1"})," und ",x.jsx(e.code,{children:"P2"}),` wären Binär oder nur Graustufen. Daher arbeiten wir nur mit dem
`,x.jsx(e.code,{children:"P3"}),` Format. In unserer Anwendung sind die anderen Formate gar nicht definiert.
Die nächsten beiden Zeilen geben die `,x.jsx(e.code,{children:"Breite"})," und die ",x.jsx(e.code,{children:"Höhe"}),` des Bildes in
Pixeln an. Die Zeile 4 gibt den maximalen Wert an. Der ist bei uns immer `,x.jsx(e.code,{children:"FF"}),`,
angeben müssen wir ihn dennoch. Alles was danach kommt, sind die einzelnen
Pixel. Hier spielt es keine Rolle ob Sie diese auf einer Zeile oder auf
mehreren verteilt schreiben. Hier wird einfach ein `,x.jsx(e.code,{children:"Byte"}),` nach dem anderen
gelesen und als Farbkanal für den entsprechenden Pixel interpretiert. Das
Format das hier gewählt wurde, soll das ganze ein wenig übersichtlicher machen.
So entspricht das Format genau der Anordnung der Pixel im Bild selber.`]}),`
`,x.jsx(uve,{ppmS:String.raw`P3
2
2
FF
00 FF 00 FF 00 00
A2 B5 18 3F 3F 3F`}),`
`,x.jsxs(Ko,{title:"Aufgaben: Bilder erstellen",children:[x.jsx(e.p,{children:"Erstellen Sie eigene Bilder mit diesem Format."}),x.jsxs(e.ul,{children:[`
`,x.jsxs(e.li,{children:["Erstellen Sie ein ",x.jsx(e.code,{children:"2x2"})," Bild, das alle Grundfarben und weiss enhält."]}),`
`,x.jsxs(e.li,{children:["Erstellen Sie ein ",x.jsx(e.code,{children:"2x2"})," Bild, das 4 unterschiedliche Grüntöne enthält."]}),`
`,x.jsxs(e.li,{children:["Erstellen Sie ein ",x.jsx(e.code,{children:"3x3"})," Bild, mit 9 unterschiedlichen Farben."]}),`
`,x.jsxs(e.li,{children:["Erstellen Sie ein ",x.jsx(e.code,{children:"4x4"}),` Bild, mit einem Farbverlauf. Starten Sie oben
links mit Ihrer Lieblingsfarbe und unten rechts mit einer weiteren Farbe.
Der Farbverlauf soll diagnal sein, von Ihrer Lieblingsfarbe zur zweiten
Farbe.`]}),`
`]})]})]})}function hve(s={}){const{wrapper:e}=s.components||{};return e?x.jsx(e,{...s,children:x.jsx(EF,{...s})}):EF(s)}function TF(s){const e={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...s.components};return x.jsxs(x.Fragment,{children:[x.jsx(e.h2,{children:"Daten und Informationen"}),`
`,x.jsxs(e.p,{children:["In der Informatik unterscheiden wir zwischen ",x.jsx(e.strong,{children:"Daten"})," und ",x.jsx(e.strong,{children:"Informationen"}),`.
Das einfachste Beispiel das Sie bereits kennen, ist das `,x.jsx(e.code,{children:"Bit"}),". Das ",x.jsx(e.code,{children:"Bit"}),` selbst
sind die `,x.jsx(e.strong,{children:"Daten"}),`, also das was im Computer gespeichert ist, und die
`,x.jsx(e.strong,{children:"Informationen"}),` die wir damit abbilden können, ist unsere Interpretation vom
Zustand des `,x.jsx(e.code,{children:"Bit"}),". In einem ",x.jsx(e.code,{children:"Bit"}),` können wir genau 2 Zustände speichern, die
`,x.jsx(e.code,{children:"0"})," und die ",x.jsx(e.code,{children:"1"}),". Damit können wir 2 ",x.jsx(e.strong,{children:"Informationen"}),` abbilden, diese aber
unterschiedlich interpretieren. Wir können die Zahlen `,x.jsx(e.code,{children:"0"})," und ",x.jsx(e.code,{children:"1"}),`
interpretieren, oder die Wahrheitswerte `,x.jsx(e.code,{children:"false"})," und ",x.jsx(e.code,{children:"true"}),`. Das ganze können
wir aber noch auf sehr viel mehr Arten Interpretieren. Wir können damit auch
`,x.jsx(e.code,{children:"Tag"})," oder ",x.jsx(e.code,{children:"Nacht"}),", sowie ",x.jsx(e.code,{children:"Innen"})," oder ",x.jsx(e.code,{children:"Aussen"}),` oder alle anderen möglichen
Binären Unterscheidungen interpretieren. Bei der Interpretation sind wir sehr
frei, wir müssen dafür nur den Kontext kennen. Die Anzahl der Interpretationen
ist aber von den Daten vorgegeben, mit einem `,x.jsx(e.code,{children:"Bit"}),` können also nur 2 Zustände
abgebildet werden.`]}),`
`,x.jsxs(e.h3,{children:["Informationen in einem ",x.jsx(e.code,{children:"Byte"})]}),`
`,x.jsxs(e.p,{children:["Wie wir bereits wissen, besteht ein ",x.jsx(e.code,{children:"Byte"})," aus genau 8 ",x.jsx(e.code,{children:"Bits"}),`. Die Daten sind
hier also diese 8 `,x.jsx(e.code,{children:"Bits"}),` in der gegebenen Reihenfolge. Wie wir diese Daten
jetzt aber interpretieren möchten, ist uns überlassen. Wir können ganz einfach
das `,x.jsx(e.code,{children:"Byte"})," als Binärzahl interpretieren, und dann alle Zahlen von ",x.jsx(e.code,{children:"0b0000 0000"}),`
bis `,x.jsx(e.code,{children:"0b1111 1111"}),", also von ",x.jsx(e.code,{children:"0"})," bis ",x.jsx(e.code,{children:"255"}),` abbilden. Damit könnten wir aber nur
mit den Zahlen rechnen, und der Raum der Zahlen ist auch sehr begrenzt. Eine
weitere Interpretation von einem `,x.jsx(e.code,{children:"Byte"})," können wir mit Hilfe des ",x.jsx(e.code,{children:"ASCII"}),`-Codes
machen. So können wir jedem `,x.jsx(e.code,{children:"Byte"}),` ein Symbol aus dem Alphabet zuweisen, und
noch weitere, wie Sonderzeichen und Zahlen. Dank des `,x.jsx(e.code,{children:"ASCII"}),`-Codes, können wir
also Texte auf dem Computer verfassen.`]}),`
`,x.jsx(e.h3,{children:"Andere Arten von Informationen"}),`
`,x.jsxs(e.p,{children:[`Mit Texten können wir bereits sehr viele Informationen abbilden. Manchmal ist
es aber besser ein Bild zu haben. Eine Art ein Bild zu beschreiben, ist jeder
einzelne Bildpunkt genau zu beschreiben. Also die Farbe von jedem Bildpunkt
anzugeben. Die Frage die wir uns nun stellen, ist die folgende: Welche
Informationen möchten wir abbilden und welche Daten brauchen wir dafür. Um eine
Farbe zu beschreiben können wir das einfache `,x.jsx(e.code,{children:"RGB"}),`-Format wählen. Wir geben
dabei die Intensität der Teilfarben `,x.jsx(e.code,{children:"rot"}),", ",x.jsx(e.code,{children:"grün"})," und ",x.jsx(e.code,{children:"blau"}),` an. Eine
Möglichkeit wäre es einfach nur 3 `,x.jsx(e.code,{children:"Bits"}),` zu wählen. Damit können wir sagen ob
eine der Farben vorkommt oder gar nicht. Damit lassen sich aber nicht so viele
Farben erstellen. Es würde also mehr Sinn ergeben, wenn wir mehr `,x.jsx(e.code,{children:"Bits"}),` pro
Farbkanal verwenden. Nehmen wir also einfach ein `,x.jsx(e.code,{children:"Byte"}),` pro Farbkanal. So
brauchen wir also 3 `,x.jsx(e.code,{children:"Bytes"}),` pro Pixel, und können damit jedes beliebige Bild
erklären.`]}),`
`,x.jsxs(Ko,{title:"Daten vs. Informationen",children:[x.jsxs(e.p,{children:["Die ",x.jsx(e.strong,{children:"Daten"}),` sind das was physikalisch auf dem Computer hinterlegt ist.
Also eine Speicherzelle die entweder geladen und nichtgeladen ist.`]}),x.jsxs(e.p,{children:["Die ",x.jsx(e.strong,{children:"Informationen"}),` sind unsere Interpretation der Daten. Die Anzahl der
Informationen die gespeichert werden können, ist die Anzahl der Zustände
die mit den Daten beschrieben werden können.`]})]}),`
`,x.jsx(e.h3,{children:"Informationsformate"}),`
`,x.jsxs(e.p,{children:[`Die Informationen auf dem Computer sind immer in Dateien organisiert. Jede
Datei folgt einem bestimmten Format. Eine ganze gewöhnliche Textdatei, folgt
einfach nur dem `,x.jsx(e.code,{children:"ASCII"}),"-Code. Da wird jedes ",x.jsx(e.code,{children:"Byte"}),` als eigenes Zeichen gelesen.
Mehr Informationen zum Dateiformat braucht es da nicht.`]}),`
`,x.jsxs(e.p,{children:["Bei einer Bilddatei, wird jedes Pixel in genau 3 ",x.jsx(e.code,{children:"Bytes"}),` gespeichert. Das
reicht aber noch nicht um das Bild zu beschreiben. Wir brauchen noch
zusätzliche Informationen über die Höhe und die Breite des Bildes. Das wird in
der Regel ganz am Anfang der Datei angegeben.`]}),`
`,x.jsx(e.p,{children:`Auch bei PDF-Dateien und anderen Dateiformaten kommt es häufig vor das eine
Version des Dateiformats ganz am Anfang gespeichert wird. Das braucht man damit
das Anzeigeprogramm weiss welche Features in der Datei vorkommen, bzw. wie die
Daten zu lesen sind.`}),`
`,x.jsxs(e.p,{children:[`Sehr häufig werden Textformate verwendet, um die Informationen in einer Datei
abzubilden. Das wird eigentlich immer gemacht wenn wir Programmcode schreiben.
Aber auch wenn wir die Struktur von einer Webseite beschreiben, wir alles in
Text gemacht, und dann vom Webbrowser interpretiert. So sieht ein Titel in
`,x.jsx(e.code,{children:"HTML"})," zum Beispiel so aus:"]}),`
`,x.jsx(e.pre,{children:x.jsx(e.code,{className:"language-html",children:`<h1>Titel</h1>
`})}),`
`,x.jsxs(e.p,{children:["Sehr ähnlich wird es in ",x.jsx(e.code,{children:"Markdown"}),` gemacht. Auch dort nutzen wir die
Schriftzeichen um mehr Informationen in den Text zu bekommen. Ein Titel im
`,x.jsx(e.code,{children:"Markdown"})," schreiben wir so:"]}),`
`,x.jsx(e.pre,{children:x.jsx(e.code,{className:"language-markdown",children:`# Titel
`})}),`
`,x.jsxs(e.p,{children:["Die Daten die darunter liegen, sind einfach wieder eine folge von ",x.jsx(e.code,{children:"Bytes"}),`, mehr
brauchen wir ja nicht um Text darzustellen.`]})]})}function dve(s={}){const{wrapper:e}=s.components||{};return e?x.jsx(e,{...s,children:x.jsx(TF,{...s})}):TF(s)}function NF(s){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...s.components};return x.jsxs(x.Fragment,{children:[x.jsx(e.h2,{children:"Notwendige Programme Installieren"}),`
`,x.jsx(e.p,{children:`Um mit dem Computer vernünftig arbeiten zu können, brauchen wir einige
Programme, die Sie zuerst installieren müssen. Sie finden hier eine Liste mit
allen Programmen die Sie verwenden werden. Weiter unten finden Sie eine kurze
Beschreibung zu alle den Programmen.`}),`
`,x.jsxs(e.ul,{children:[`
`,x.jsx(e.li,{children:x.jsx(e.a,{href:"https://code.visualstudio.com/download",children:"VSCode"})}),`
`,x.jsx(e.li,{children:x.jsx(e.a,{href:"https://git-scm.com/downloads",children:"Git"})}),`
`,x.jsxs(e.li,{children:[x.jsx(e.a,{href:"https://nodejs.org/en/download",children:"NodeJS"}),` (Hier müssen Sie das Binary
herunterladen, das finden Sie unterhalb von dem Skript).`]}),`
`,x.jsxs(e.li,{children:[x.jsx(e.a,{href:"https://www.docker.com/products/docker-desktop/",children:"Docker-Desktop"}),` (Das wird
nicht unbedingt benötigt, kann vieles aber einfacher machen, dafür auch
langsamer).`]}),`
`]}),`
`,x.jsxs(e.p,{children:["Bei ",x.jsx(e.code,{children:"NodeJS"})," und ",x.jsx(e.code,{children:"Docker-Desktop"}),` können Sie eigentlich auswählen, welches Sie
installieren möchten. Denn durch `,x.jsx(e.code,{children:"Docker-Desktop"})," kann man ",x.jsx(e.code,{children:"NodeJS"}),` automatisch
laufen lassen, allerdings ist das ein wenig langsamer. Am besten versuchen Sie
beides zu installieren, dann sind Sie flexibel.`]}),`
`,x.jsx(e.h2,{children:"Github-Account"}),`
`,x.jsxs(e.p,{children:[`Sie werden alle Materialien über Github-Classrooms erhalten und abgeben,
deshalb ist es wichtig das Sie auch einen Github-Account haben. Erstellen Sie
diesen `,x.jsx(e.a,{href:"https://github.com/signup",children:"hier"}),"."]}),`
`,x.jsx(e.p,{children:`Verwenden Sie für diesen Account am besten Ihre Schulemail. Den Benutzernamen
können Sie wählen wie Sie möchten. Sie können Ihre e-Nummer dafür verwenden,
oder auch etwas das für Sie einfacher zum merken ist.`}),`
`,x.jsx(e.h2,{children:"Erklärung zu den Programmen"}),`
`,x.jsx(e.p,{children:"Hier finden Sie eine kurze Erklärung was die einzelnen Programme machen."}),`
`,x.jsx(e.h3,{children:"VSCode"}),`
`,x.jsx(e.p,{children:`Das ist Ihr Editor. In der Informatik ist der Editor und vor allem Ihr Umgang
damit das wichtigste überhaupt. Mit dem Editor bearbeiten Sie Text und Code, er
ist also Ihr Werkzeug um Ihre Ideen direkt umzusetzen und anzupassen. In all
den Informatiklektionen die Sie haben, sollten Sie immer auf einen guten Umgang
mit dem Editor achten. Dazu kommt dann aber noch mehr in den einzelnen
Lektionen.`}),`
`,x.jsx(e.h3,{children:"Git"}),`
`,x.jsxs(e.p,{children:[x.jsx(e.code,{children:"Git"}),` ist ein Werkzeug zur Versionierung von Software oder Projekten im
allgemeinen. `,x.jsx(e.code,{children:"Git"})," ist nicht das gleiche wie ",x.jsx(e.code,{children:"Github"}),". ",x.jsx(e.code,{children:"Github"}),` ist ein
Onlinedienst von Microsoft, der es ermöglicht `,x.jsx(e.code,{children:"Git"}),`-Projekte einfach
miteinander zu tauschen.`]}),`
`,x.jsxs(e.p,{children:[`Versionierung klingt für Sie wahrscheinlich noch sehr unnötig und kompliziert,
es ist aber sehr praktisch, und wenn Sie sich ein klein wenig damit
auseinandersetzen, auch sehr einfach. `,x.jsx(e.code,{children:"Git"}),` macht Ihnen keine automatische
Versionierung wie Sie das vielleicht schon von `,x.jsx(e.code,{children:"Word"})," oder ",x.jsx(e.code,{children:"OneNote"}),` kennen,
sondern Sie müssen explizit sagen, wann es eine neue Version ist. Damit liegt
die Kontrolle über die Versionierung bei Ihnen, und Sie können einfach zu
funktionierenden Versionen zurück springen, wenn Sie was gemacht haben, das
nicht funktioniert. Aber auch zu dem Werkzeug kommt später noch mehr.`]}),`
`,x.jsx(e.h3,{children:"NodeJS"}),`
`,x.jsxs(e.p,{children:[x.jsx(e.code,{children:"NodeJS"})," oder kurz auch einfach nur ",x.jsx(e.code,{children:"node"}),`, ist ein Programm das es Ihnen
ermöglicht, `,x.jsx(e.code,{children:"Javascript"}),`-Code auf dem eigene Computer auszuführen. Wir brauchen
das Programm also, damit wir unsere eigenen Programme schreiben und ausführen
können. `,x.jsx(e.code,{children:"Node"})," kann Ihnen ausserdem noch weitere ",x.jsx(e.code,{children:"Javascript"}),`-Programme
installieren, die Ihr eigenes Programm unterstützen und erweitern, so müssen
wir nicht alles komplett neu programmieren. Auch zu diesem Programm kommt
später noch mehr.`]}),`
`,x.jsx(e.h3,{children:"Docker-Desktop"}),`
`,x.jsxs(e.p,{children:[x.jsx(e.code,{children:"Docker"}),` ist ein Programm, das Ihnen einen Container auf dem Computer ausführen
kann. Ein Container ist ein eigenes Modul, welches unabhängig vom Rest Ihres
Betriebssystems arbeiten kann. Mit so einem Container können wir also das
benötigte `,x.jsx(e.code,{children:"NodeJS"}),` ausführen. Container sind sehr praktisch weil wir dann alle
das genau gleiche Setup verwenden können. Wir haben also alle die gleiche
Version von `,x.jsx(e.code,{children:"Node"}),` und lassen es auf dem gleichen Betriebssystem laufen. So
können Unterschiede und Komplikationen die auf Mac, Windows oder Linux
auftreten minimiert werden.`]}),`
`,x.jsxs(e.p,{children:["Wenn Sie ",x.jsx(e.code,{children:"Node"})," zum laufen bekommen, dann brauchen Sie ",x.jsx(e.code,{children:"Docker"}),` nicht
unbedingt, aber wie schon erwähnt, macht es Dinge einfacher, weil dann alle das
gleiche Setup haben. Allerdings lauft alles ein wenig langsamer, was Sie dann
auch merken werden.`]}),`
`,x.jsxs(Ko,{title:"Installation testen",children:[x.jsxs(e.p,{children:[`Wenn Sie alles installiert haben, dann möchten Sie die Installation sicherlich
auch testen. Dafür können Sie VSCode öffnen und ein neues Repository von Github
klonen, und eine erste eigene Version erstellen. Dafür drücken Sie die folgende
Tastenkombination: `,x.jsx(e.code,{children:"Shift + Ctrl + P"})," und suchen nach dem Befehl: ",x.jsx(e.code,{children:"Git: Clone"}),`.
Drücken Sie auf `,x.jsx(e.code,{children:"Enter"}),` um den Befehl auszuführen und fügen Sie die folgende
`,x.jsx(e.code,{children:"URL"})," ein:"]}),x.jsx(e.pre,{children:x.jsx(e.code,{className:"language-text",children:`https://github.com/gymmu/00-demo.git
`})}),x.jsxs(e.p,{children:["Bestätigen Sie das wieder mit ",x.jsx(e.code,{children:"Enter"}),` und legen Sie das neue Repository auf
Ihrem `,x.jsx(e.code,{children:"Desktop"})," ab."]}),x.jsx(e.p,{children:`Wenn das Repository erfolgreich geklont werden konnte, und Sie haben alles
richtig installiert, dann können Sie mit folgendem Befehl das ganze zum laufen
bringen:`}),x.jsx(e.pre,{children:x.jsx(e.code,{className:"language-bash",children:`npm run dev
`})})]})]})}function fve(s={}){const{wrapper:e}=s.components||{};return e?x.jsx(e,{...s,children:x.jsx(NF,{...s})}):NF(s)}function IF(s){const e={h2:"h2",p:"p",...s.components};return x.jsxs(x.Fragment,{children:[x.jsx(e.h2,{children:"FMS Theorie"}),`
`,x.jsx(e.p,{children:"Theorie für die FMS."})]})}function gve(s={}){const{wrapper:e}=s.components||{};return e?x.jsx(e,{...s,children:x.jsx(IF,{...s})}):IF(s)}function E9({url:s}){return x.jsx("center",{children:x.jsx("iframe",{width:"560",height:"315",src:`https://www.youtube.com/embed/${s}`,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})})}function MF(s){const e={a:"a",code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...s.components};return x.jsxs(x.Fragment,{children:[x.jsx(e.h2,{children:"Obsidian"}),`
`,x.jsx(e.p,{children:`Obsidian ist eine App die uns dabei Hilft unser Wissen zu verwalten. Man kann
es auch als Notizapp bezeichnen. Obsidian macht aber noch mehr als nur Notizen
zu speichern, es verwaltet diese auch, und setzt Notizen zueinander in
Verbindung. Das ist einer der zentralen Elemente von Obsidian.`}),`
`,x.jsx(e.p,{children:"Weitere praktische Eigenschaften von Obsidian sind:"}),`
`,x.jsxs(e.ul,{children:[`
`,x.jsxs(e.li,{children:["Es verwendet ",x.jsx(e.code,{children:"Markdown"})," als Syntax für die Notizen"]}),`
`,x.jsx(e.li,{children:"Alle Dateien gehören dem Benutzer"}),`
`,x.jsx(e.li,{children:"Alle Notizen können auch ohne Obsidian gelesen und geändert werden"}),`
`,x.jsxs(e.li,{children:["Das ",x.jsx(e.code,{children:"Markdown"})," wird schnell und schön dargestellt"]}),`
`,x.jsx(e.li,{children:"Viele Erweiterungen können installiert werden"}),`
`]}),`
`,x.jsx(e.p,{children:`Wir werden aber nicht alle davon verwenden, wir möchten damit vor allem lernen
wie wir unsere Gedanken als Text aufschreiben und verwalten können.`}),`
`,x.jsx(e.h2,{children:"Gedanken als Text"}),`
`,x.jsx(e.p,{children:`Wieso ist das wichtig? Dank KI bzw. LLMs ist Text wichtiger den je. Dieser Text
sollte aber nicht in merkwürdigen Dateiformaten weggesperrt sein, sondern
möglichst nahe an reinem Text, damit die KI alles schnell und einfach lesen
kann, und den Kontext behalten kann. Mit KI können wir dann unsere Gedanken
zusammenfassen, reflektieren oder sogar eine Unterhaltung damit führen. Wir
werden KI aber erst später einsetzen, wichtig ist für jetzt nur, dass wir
unsere Notizen schnell und übersichtlich bearbeiten können.`}),`
`,x.jsx(e.h2,{children:"Einstieg"}),`
`,x.jsxs(e.p,{children:[`Hier finden Sie ein kurzes Video, das Ihnen erklärt wie Obsidian grundlegend
funktioniert. Dafür müssen Sie Obsidian aber zuerst von hier installieren:
`,x.jsx(e.a,{href:"https://obsidian.md/download",children:"Obsidian"}),"."]}),`
`,x.jsx(E9,{url:"WuOj1PkDQPs"})]})}function mve(s={}){const{wrapper:e}=s.components||{};return e?x.jsx(e,{...s,children:x.jsx(MF,{...s})}):MF(s)}function RF(s){const e={a:"a",h2:"h2",p:"p",...s.components};return x.jsxs(x.Fragment,{children:[x.jsx(e.h2,{children:"Markdown in Obsidian"}),`
`,x.jsxs(e.p,{children:[`Eine Startdatei die fast alles zeigt das man mit Markdown in Obsidian machen
kann, können Sie hier finden: `,x.jsx(e.a,{href:"/gym-inf/obsidian-intro.md",children:"Start-Datei"})]})]})}function pve(s={}){const{wrapper:e}=s.components||{};return e?x.jsx(e,{...s,children:x.jsx(RF,{...s})}):RF(s)}function _ve(){const s={grid:{width:"50%",minWidth:"360px",marginInline:"auto",display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},cell:{textAlign:"center",border:"1px solid #eee",paddingBlock:"0.5em",margin:0},header:{fontWeight:"600"}};return x.jsxs("div",{style:s.grid,children:[x.jsx("span",{style:{...s.cell,...s.header},children:"Byte"}),x.jsx("span",{style:{...s.cell,...s.header},children:"Zeichen"}),x.jsx("pre",{style:{...s.cell},children:"0110 0001"}),x.jsx("pre",{style:{...s.cell},children:"a"}),x.jsx("pre",{style:{...s.cell},children:"0110 0010"}),x.jsx("pre",{style:{...s.cell},children:"b"}),x.jsx("pre",{style:{...s.cell},children:"0110 0011"}),x.jsx("pre",{style:{...s.cell},children:"c"}),x.jsx("pre",{style:{...s.cell},children:"0011 0000"}),x.jsx("pre",{style:{...s.cell},children:"0"}),x.jsx("pre",{style:{...s.cell},children:"0011 0001"}),x.jsx("pre",{style:{...s.cell},children:"1"}),x.jsx("pre",{style:{...s.cell},children:"0011 0010"}),x.jsx("pre",{style:{...s.cell},children:"2"}),x.jsx("pre",{style:{...s.cell},children:"0010 0000"}),x.jsx("pre",{style:{...s.cell},children:"SPACE"}),x.jsx("pre",{style:{...s.cell},children:"0100 0001"}),x.jsx("pre",{style:{...s.cell},children:"A"}),x.jsx("pre",{style:{...s.cell},children:"0100 0010"}),x.jsx("pre",{style:{...s.cell},children:"B"}),x.jsx("pre",{style:{...s.cell},children:"0100 0011"}),x.jsx("pre",{style:{...s.cell},children:"C"})]})}function T9({src:s,alt:e,imgStyle:t={},containerStyle:i={}}){return x.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",...i},children:x.jsx("img",{style:{...t},src:s,alt:e})})}function AF(s){const e={code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...s.components};return x.jsxs(x.Fragment,{children:[x.jsx(e.h2,{children:"Computer Hardware"}),`
`,x.jsxs(e.p,{children:[`Ein Computer besteht aus vielen einzelnen Komponenten. Einige wenige davon
können Sie sehen, wie zum Beispiel den Bildschirm oder die Tastatur. Dies sind
aber eigentlich keine Komponenten von einem Computer, sondern periphere Geräte
die den Umgang mit dem Computer einfacher machen. Der eigentliche `,x.jsx(e.strong,{children:"Computer"}),`
ist die Recheneinheit die im Zentrum des Computers steht, daher auch der Name
Computer. Dieser kommt vom Wort `,x.jsx(e.code,{children:"compute"})," was so viel bedeutet wie ",x.jsx(e.code,{children:"berechnen"}),`.
In der deutschen Sprache verwendet man manchmal auch das Wort `,x.jsx(e.code,{children:"Rechner"}),` wenn
man über den `,x.jsx(e.strong,{children:"Computer"}),` spricht. Es ist ganz wichtig das wir dies immer im
Hinterkopf behalten, der `,x.jsx(e.strong,{children:"Computer"}),` ist nur eine sehr fortgeschrittene
Rechenmaschine in seinem Kern. Für diese Funktionalität braucht ein
`,x.jsx(e.strong,{children:"Computer"})," die folgenden Komponenten:"]}),`
`,x.jsxs(e.ul,{children:[`
`,x.jsxs(e.li,{children:[x.jsx(e.strong,{children:"CPU"}),": Zentrale Recheneinheit"]}),`
`,x.jsxs(e.li,{children:[x.jsx(e.strong,{children:"RAM"}),": Arbeitsspeicher"]}),`
`,x.jsxs(e.li,{children:[x.jsx(e.strong,{children:"Festplatte"}),": Langzeitspeicher"]}),`
`]}),`
`,x.jsxs(e.p,{children:[`Diese Komponenten werden wir uns zusammen anschauen und verstehen wofür diese
gebraucht werden. Aber zuerst müssen wir verstehen was denn ein `,x.jsx(e.strong,{children:"Computer"}),`
eigentlich genau `,x.jsx(e.em,{children:"berechnet"}),"."]}),`
`,x.jsx(e.h3,{children:"Bits und Bytes"}),`
`,x.jsxs(e.p,{children:["Da der ",x.jsx(e.strong,{children:"Computer"}),` ein elektronisches Gerät ist, kann er auch nur auf
elektronischen Komponenten arbeiten. Die einzige mögliche Speichereinheit die
wir haben, ist ein `,x.jsx(e.code,{children:"Bit"}),". Ein ",x.jsx(e.code,{children:"Bit"}),` kann entweder geladen oder nicht geladen
sein. So wie bei einer Lampe, diese kann entweder eingeschaltet oder
ausgeschaltet sein. Eine Dimmfunktion gibt es nicht, da die Speicherzelle sonst
nicht zuverlässig ausgelesen werden kann. Ein `,x.jsx(e.code,{children:"Bit"}),` kann also die folgenden
beiden Werte annehmen `,x.jsx(e.code,{children:"0"})," oder ",x.jsx(e.code,{children:"1"}),`. Ein Computer arbeitet also immer auf diesen
`,x.jsx(e.code,{children:"Bits"}),". Er kann ein ",x.jsx(e.code,{children:"Bit"})," auslesen oder setzen."]}),`
`,x.jsxs(e.p,{children:["Mit nur einem ",x.jsx(e.code,{children:"Bit"}),` können wir nur sehr wenig Informationen speichern,
eigentlich nur die Zahlen `,x.jsx(e.code,{children:"0"})," und ",x.jsx(e.code,{children:"1"}),`, oder wenn wir diese als Wahrheitswerte
interpretieren möchten, können wir die Informationen `,x.jsx(e.code,{children:"true"})," und ",x.jsx(e.code,{children:"false"}),`
speichern. Mit nur einem `,x.jsx(e.code,{children:"Bit"}),` kommen wir also nicht sehr weit. Damit wir mit
mehr Informationen arbeiten können, nehmen wir einfach mehrere `,x.jsx(e.code,{children:"Bits"}),` zusammen.
Man hat beschlossen dass es am besten ist gleich 8 `,x.jsx(e.code,{children:"Bits"}),` zusammen zu nehmen,
das gibt uns dann 1 `,x.jsx(e.code,{children:"Byte"}),". Im Speicher würde ein ",x.jsx(e.code,{children:"Byte"})," dann so aussehen:"]}),`
`,x.jsx(e.pre,{children:x.jsx(e.code,{className:"language-text",children:`1001 0011
`})}),`
`,x.jsxs(e.p,{children:["Mit diesem ",x.jsx(e.code,{children:"Byte"}),` können wir bereits $2^8$ Informationen darstellen, also $256$
unterschiedliche Dinge. Damit können wir schon mal alle Ziffern und das ganze
Alphabet mit noch Sonderzeichen abdecken. Dafür müssen wir das aber definieren.
Also immer wenn wir das folgende `,x.jsx(e.code,{children:"Byte"})," haben, möchten wir dies als ",x.jsx(e.code,{children:"a"}),`
interpretieren, so wie in dieser Tabelle:`]}),`
`,x.jsx(_ve,{}),`
`,x.jsxs(e.p,{children:["Der ",x.jsx(e.strong,{children:"Computer"})," rechnet also immer mit ",x.jsx(e.code,{children:"Bits"}),` und damit wir mehr Informationen
verwenden können, müssen wir mehrere `,x.jsx(e.code,{children:"Bits"})," zu einem ",x.jsx(e.code,{children:"Byte"}),` zusammenschliessen
und dieses `,x.jsx(e.code,{children:"Byte"}),` müssen wir dann interpretieren, so wie es in der Tabelle
gemacht wird.`]}),`
`,x.jsxs(Ko,{title:"Hardware Komponenten",children:[x.jsxs(e.p,{children:[`Wir haben uns weiter oben 3 Hardware Komponenten angeschaut. Was genau
haben diese jetzt aber mit dem Computer zu tun? Und wieso müssen wir zuerst
diese `,x.jsx(e.code,{children:"Bits"})," und ",x.jsx(e.code,{children:"Bytes"})," verstehen?"]}),x.jsxs(e.p,{children:[`Zum Glück müssen Sie das alles nicht im Detail verstehen, wir können uns
hier also einfach anschauen was die einzelnen Dinge machen. Starten wir mit
dem schwierigsten. Was genau macht die `,x.jsx(e.strong,{children:"CPU"}),"?"]}),x.jsxs(e.p,{children:["Eine ",x.jsx(e.strong,{children:"CPU"})," ist die logische Recheneinheit des Computers. Die ",x.jsx(e.strong,{children:"CPU"}),`
liest ein kleines Stück des Speichers ein, und formt diesen dann um. Das
passiert alles über logische Schaltkreise in der `,x.jsx(e.strong,{children:"CPU"}),`. Möchten wir dem
Computer zum Beispiel sagen das wir ein grosses `,x.jsx(e.code,{children:"A"})," in ein kleines ",x.jsx(e.code,{children:"a"}),`
umwandeln möchten, dann liest der Computer den Speicher an der Stelle aus
wo das `,x.jsx(e.code,{children:"A"})," stand, und schreibt neu das entsprechende ",x.jsx(e.code,{children:"Byte"})," für ",x.jsx(e.code,{children:"a"}),"."]}),x.jsx(e.pre,{children:x.jsx(e.code,{children:`0110 0001  -->  0100 0001
`})}),x.jsxs(e.p,{children:["Die ",x.jsx(e.strong,{children:"CPU"})," liest also immer einige ",x.jsx(e.code,{children:"Bytes"}),` gleichzeitig ein, und schreibt
dann neue `,x.jsx(e.code,{children:"Bytes"}),". Wie die ",x.jsx(e.strong,{children:"CPU"}),` aber zu dem Resultat kommt, schauen wir
uns nicht genauer an, das würde zu viel Zeit brauchen und ist nicht
unbedingt hilfreich.`]})]}),`
`,x.jsxs(e.h2,{children:["Alles in ",x.jsx(e.code,{children:"0"})," und ",x.jsx(e.code,{children:"1"})]}),`
`,x.jsxs(e.p,{children:["Um die Funktionsweise eines ",x.jsx(e.strong,{children:"Computers"}),` zu verstehen, und zu verstehen was
überhaupt möglich ist, müssen Sie sich immer ganz klar machen, die Grundlage
für alles was auf dem `,x.jsx(e.strong,{children:"Computer"})," passiert, sind die ",x.jsx(e.code,{children:"0"})," und die ",x.jsx(e.code,{children:"1"}),`, mehr
gibt es da nicht. Wenn wir also Daten auf dem `,x.jsx(e.strong,{children:"Computer"}),` speichern, dann ist
dies einfach eine Abfolge von `,x.jsx(e.code,{children:"Bits"}),`. Schauen wir uns ein Bild auf dem
Bildschirm an, dann ist dieses Bild im Speicher einfach eine Reihe von `,x.jsx(e.code,{children:"Bits"}),`.
Wo dieses Bild beginnt und wo es aufhört im Speicher ist ebenfalls in `,x.jsx(e.code,{children:"Bits"}),` im
Speicher abgelegt.`]}),`
`,x.jsxs(e.p,{children:["Wenn wir auf dem ",x.jsx(e.strong,{children:"Computer"}),` eine Taste drücken, dann wird ein Signal aus
mehreren `,x.jsx(e.code,{children:"Bits"})," (genau ein ",x.jsx(e.code,{children:"Byte"}),") an die ",x.jsx(e.strong,{children:"CPU"}),` geschickt, das führt dann
dazu dass genau dieses `,x.jsx(e.code,{children:"Byte"}),` im Speicherblock hinzugefügt wird, und so
entsteht ein Text auf dem `,x.jsx(e.strong,{children:"Computer"}),"."]}),`
`,x.jsxs(e.p,{children:[`Die Anzeige die Sie auf dem Bildschirm sehen, ist einfach ein Teil des
Speichers, der genau sagt welches Pixel welche Farbe haben soll. Ändert sich
nun die Farbe von so einem Pixel, dann ist es weil die `,x.jsx(e.strong,{children:"CPU"})," die ",x.jsx(e.code,{children:"Bits"}),` im
Speicherbereich für den Bildschirm geändert hat.`]}),`
`,x.jsxs(e.p,{children:["Wenn Sie Daten über das Netzwerk schicken, machen Sie das auch in ",x.jsx(e.code,{children:"Bits"}),`. Das
übertragen von Daten ist im Prinzip recht einfach. Sie legen fest wie viele
Signale in der Sekunde übertragen werden können. Wenn Sie nun einen `,x.jsx(e.code,{children:"1"}),`
schicken möchten, machen Sie den Strom so lange an wie Sie `,x.jsx(e.code,{children:"1"}),`-en schicken, und
lassen den Strom ab, wenn Sie `,x.jsx(e.code,{children:"0"}),`-en schicken. Nehmen Sie an Sie können 1
Signal in der Sekunde schicken. Möchten Sie nun eine `,x.jsx(e.code,{children:"a"}),` verschicken, dann
machen Sie folgendes:`]}),`
`,x.jsxs(e.ul,{children:[`
`,x.jsx(e.li,{children:"1s kein Strom"}),`
`,x.jsx(e.li,{children:"2s Strom"}),`
`,x.jsx(e.li,{children:"4s kein Strom"}),`
`,x.jsx(e.li,{children:"1s Strom"}),`
`]}),`
`,x.jsxs(e.p,{children:["Wenn Sie das auf der anderen Seite auslesen, und pro Sekunde ein ",x.jsx(e.code,{children:"Bit"}),`
auslesen, erhalten Sie das folgende `,x.jsx(e.code,{children:"Byte"})," am Ende: ",x.jsx(e.code,{children:"0110 0001"}),"."]}),`
`,x.jsxs(Ko,{title:"Stromausfall",children:[x.jsxs(e.p,{children:["Was passiert wenn der Strom ausfällt? Dazu müssen wir ",x.jsx(e.strong,{children:"RAM"}),`-Speicher und
`,x.jsx(e.strong,{children:"Festplatten"}),`-Speicher unterscheiden. Beides sind Speichermedien um eine
Reihe von `,x.jsx(e.code,{children:"Bytes"})," zu speichern. Das eine ist sehr schnell ",x.jsx(e.strong,{children:"RAM"}),` das
andere sehr langsam `,x.jsx(e.strong,{children:"Festplatte"}),". Damit der ",x.jsx(e.strong,{children:"Computer"}),` effizient
arbeiten kann, arbeitet dieser also immer mit `,x.jsx(e.strong,{children:"RAM"}),`, daher auch der Name
`,x.jsx(e.strong,{children:"Arbeitsspeicher"}),"."]}),x.jsxs(e.p,{children:[x.jsx(e.strong,{children:"RAM"}),` besteht aus ganz vielen kleinen Kondesatoren, diese können geladen
oder nicht geladen sein, also jeweils ein `,x.jsx(e.code,{children:"Bit"}),`. Damit diese aber geladen
sind, braucht es Strom, sonst geht die Ladung ganz schnell weg. Somit
braucht es also eine andere Lösung für den permanenten Speicher. Also eine
`,x.jsx(e.strong,{children:"Festplatte"}),"."]}),x.jsxs(e.p,{children:["Auf einer ",x.jsx(e.strong,{children:"Festplatte"}),` werden die Daten magnetisch in die einzelnen
Zellen geschrieben. So braucht es keinen Strom um die Daten zu erhalten.
Das ganze ist aber sehr viel langsamer und eignet sich somit nicht für
direkte Berechnungen.`]})]}),`
`,x.jsx(e.h2,{children:"Vom Speicher zur CPU"}),`
`,x.jsxs(e.p,{children:["Damit wir überhaupt etwas arbeiten können auf dem ",x.jsx(e.strong,{children:"Computer"}),` müssen die Daten
immer zuerst von der `,x.jsx(e.strong,{children:"Festplatte"})," gelesen werden. Von der ",x.jsx(e.strong,{children:"Festplatte"}),`
werden die Daten ins `,x.jsx(e.strong,{children:"RAM"})," geladen, darauf kann dann die ",x.jsx(e.strong,{children:"CPU"}),` ihre
logischen Operationen durchführen.`]}),`
`,x.jsxs(e.p,{children:["Damit ein ",x.jsx(e.strong,{children:"Computer"}),` aber auch wirklich das macht was er soll, und auch nicht
immer das gleiche, braucht es neben den `,x.jsx(e.em,{children:"Daten"})," auch noch ",x.jsx(e.em,{children:"Instruktionen"}),`. Das
sind die Maschinenbefehle, die der `,x.jsx(e.strong,{children:"CPU"})," sagen, wie die ",x.jsx(e.em,{children:"Daten"}),` verarbeitet
werden. Aus unserer Sicht müssen wir das nicht weiter Unterscheiden, denn auch
diese `,x.jsx(e.em,{children:"Instruktionen"})," sind einfach nur als ",x.jsx(e.code,{children:"Bits"})," im Speicher abgelegt."]}),`
`,x.jsx(e.h2,{children:"ASCII-Tabelle"}),`
`,x.jsxs(e.p,{children:["Die vollständige Tabelle wie wir auf dem ",x.jsx(e.strong,{children:"Computer"})," jedes ",x.jsx(e.code,{children:"Byte"}),`
interpretieren ist in `,x.jsx(e.code,{children:"ASCII"}),`-Standard festgelegt. Die Tabelle dazu finden Sie
hier.`]}),`
`,x.jsx(T9,{src:"https://www.asciitable.com/asciifull.gif"})]})}function vve(s={}){const{wrapper:e}=s.components||{};return e?x.jsx(e,{...s,children:x.jsx(AF,{...s})}):AF(s)}class Wo{constructor(e,t,i){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=i}static range(e,t){return t?!e||!e.loc||!t.loc||e.loc.lexer!==t.loc.lexer?null:new Wo(e.loc.lexer,e.loc.start,t.loc.end):e&&e.loc}}class _a{constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}range(e,t){return new _a(t,Wo.range(this,e))}}class Ke{constructor(e,t){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var i="KaTeX parse error: "+e,n,r,o=t&&t.loc;if(o&&o.start<=o.end){var a=o.lexer.input;n=o.start,r=o.end,n===a.length?i+=" at end of input: ":i+=" at position "+(n+1)+": ";var l=a.slice(n,r).replace(/[^]/g,"$&̲"),c;n>15?c="…"+a.slice(n-15,n):c=a.slice(0,n);var u;r+15<a.length?u=a.slice(r,r+15)+"…":u=a.slice(r),i+=c+l+u}var d=new Error(i);return d.name="ParseError",d.__proto__=Ke.prototype,d.position=n,n!=null&&r!=null&&(d.length=r-n),d.rawMessage=e,d}}Ke.prototype.__proto__=Error.prototype;var bve=function(e,t){return e.indexOf(t)!==-1},wve=function(e,t){return e===void 0?t:e},Cve=/([A-Z])/g,yve=function(e){return e.replace(Cve,"-$1").toLowerCase()},Sve={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},xve=/[&><"']/g;function kve(s){return String(s).replace(xve,e=>Sve[e])}var iU=function s(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?s(e.body[0]):e:e.type==="font"?s(e.body):e},Lve=function(e){var t=iU(e);return t.type==="mathord"||t.type==="textord"||t.type==="atom"},Dve=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},Eve=function(e){var t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?t[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?null:t[1].toLowerCase():"_relative"},Tt={contains:bve,deflt:wve,escape:kve,hyphenate:yve,getBaseElem:iU,isCharacterBox:Lve,protocolFromUrl:Eve},oC={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:s=>"#"+s},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(s,e)=>(e.push(s),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:s=>Math.max(0,s),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:s=>Math.max(0,s),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:s=>Math.max(0,s),cli:"-e, --max-expand <n>",cliProcessor:s=>s==="Infinity"?1/0:parseInt(s)},globalGroup:{type:"boolean",cli:!1}};function Tve(s){if(s.default)return s.default;var e=s.type,t=Array.isArray(e)?e[0]:e;if(typeof t!="string")return t.enum[0];switch(t){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class N9{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var t in oC)if(oC.hasOwnProperty(t)){var i=oC[t];this[t]=e[t]!==void 0?i.processor?i.processor(e[t]):e[t]:Tve(i)}}reportNonstrict(e,t,i){var n=this.strict;if(typeof n=="function"&&(n=n(e,t,i)),!(!n||n==="ignore")){if(n===!0||n==="error")throw new Ke("LaTeX-incompatible input and strict mode is set to 'error': "+(t+" ["+e+"]"),i);n==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+n+"': "+t+" ["+e+"]"))}}useStrictBehavior(e,t,i){var n=this.strict;if(typeof n=="function")try{n=n(e,t,i)}catch{n="error"}return!n||n==="ignore"?!1:n===!0||n==="error"?!0:n==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+n+"': "+t+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var t=Tt.protocolFromUrl(e.url);if(t==null)return!1;e.protocol=t}var i=typeof this.trust=="function"?this.trust(e):this.trust;return!!i}}class qu{constructor(e,t,i){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=i}sup(){return Al[Nve[this.id]]}sub(){return Al[Ive[this.id]]}fracNum(){return Al[Mve[this.id]]}fracDen(){return Al[Rve[this.id]]}cramp(){return Al[Ave[this.id]]}text(){return Al[Pve[this.id]]}isTight(){return this.size>=2}}var I9=0,eS=1,Um=2,au=3,V_=4,ga=5,pp=6,Hr=7,Al=[new qu(I9,0,!1),new qu(eS,0,!0),new qu(Um,1,!1),new qu(au,1,!0),new qu(V_,2,!1),new qu(ga,2,!0),new qu(pp,3,!1),new qu(Hr,3,!0)],Nve=[V_,ga,V_,ga,pp,Hr,pp,Hr],Ive=[ga,ga,ga,ga,Hr,Hr,Hr,Hr],Mve=[Um,au,V_,ga,pp,Hr,pp,Hr],Rve=[au,au,ga,ga,Hr,Hr,Hr,Hr],Ave=[eS,eS,au,au,ga,ga,Hr,Hr],Pve=[I9,eS,Um,au,Um,au,Um,au],Pt={DISPLAY:Al[I9],TEXT:Al[Um],SCRIPT:Al[V_],SCRIPTSCRIPT:Al[pp]},ND=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Ove(s){for(var e=0;e<ND.length;e++)for(var t=ND[e],i=0;i<t.blocks.length;i++){var n=t.blocks[i];if(s>=n[0]&&s<=n[1])return t.name}return null}var aC=[];ND.forEach(s=>s.blocks.forEach(e=>aC.push(...e)));function nU(s){for(var e=0;e<aC.length;e+=2)if(s>=aC[e]&&s<=aC[e+1])return!0;return!1}var Fg=80,Fve=function(e,t){return"M95,"+(622+e+t)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},Bve=function(e,t){return"M263,"+(601+e+t)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},Wve=function(e,t){return"M983 "+(10+e+t)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},Vve=function(e,t){return"M424,"+(2398+e+t)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+t+`
h400000v`+(40+e)+"h-400000z"},zve=function(e,t){return"M473,"+(2713+e+t)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+t+"h400000v"+(40+e)+"H1017.7z"},Hve=function(e){var t=e/2;return"M400000 "+e+" H0 L"+t+" 0 l65 45 L145 "+(e-80)+" H400000z"},jve=function(e,t,i){var n=i-54-t-e;return"M702 "+(e+t)+"H400000"+(40+e)+`
H742v`+n+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+t+"H400000v"+(40+e)+"H742z"},Uve=function(e,t,i){t=1e3*t;var n="";switch(e){case"sqrtMain":n=Fve(t,Fg);break;case"sqrtSize1":n=Bve(t,Fg);break;case"sqrtSize2":n=Wve(t,Fg);break;case"sqrtSize3":n=Vve(t,Fg);break;case"sqrtSize4":n=zve(t,Fg);break;case"sqrtTall":n=jve(t,Fg,i)}return n},$ve=function(e,t){switch(e){case"⎜":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"∣":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"∥":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z"+("M367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z");case"⎟":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"⎢":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"⎥":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"⎪":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"⏐":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"‖":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257z"+("M478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z");default:return""}},PF={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},qve=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+` v585 h43z
M367 15 v585 v`+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v602 h84z
M403 1759 V0 H319 V1759 v`+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v602 h84z
M347 1759 V0 h-84 V1759 v`+t+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(t+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(t+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(t+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(t+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class _v{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return Tt.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){var e=t=>t.toText();return this.children.map(e).join("")}}var Bl={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},yw={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},OF={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function Kve(s,e){Bl[s]=e}function M9(s,e,t){if(!Bl[e])throw new Error("Font metrics not found for font: "+e+".");var i=s.charCodeAt(0),n=Bl[e][i];if(!n&&s[0]in OF&&(i=OF[s[0]].charCodeAt(0),n=Bl[e][i]),!n&&t==="text"&&nU(i)&&(n=Bl[e][77]),n)return{depth:n[0],height:n[1],italic:n[2],skew:n[3],width:n[4]}}var LL={};function Gve(s){var e;if(s>=5?e=0:s>=3?e=1:e=2,!LL[e]){var t=LL[e]={cssEmPerMu:yw.quad[e]/18};for(var i in yw)yw.hasOwnProperty(i)&&(t[i]=yw[i][e])}return LL[e]}var Zve=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],FF=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],BF=function(e,t){return t.size<2?e:Zve[e-1][t.size-1]};class Oc{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Oc.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=FF[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return new Oc(t)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:BF(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:FF[e-1]})}havingBaseStyle(e){e=e||this.style.text();var t=BF(Oc.BASESIZE,e);return this.size===t&&this.textSize===Oc.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Oc.BASESIZE?["sizing","reset-size"+this.size,"size"+Oc.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Gve(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Oc.BASESIZE=6;var ID={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Yve={ex:!0,em:!0,mu:!0},sU=function(e){return typeof e!="string"&&(e=e.unit),e in ID||e in Yve||e==="ex"},Nn=function(e,t){var i;if(e.unit in ID)i=ID[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if(e.unit==="mu")i=t.fontMetrics().cssEmPerMu;else{var n;if(t.style.isTight()?n=t.havingStyle(t.style.text()):n=t,e.unit==="ex")i=n.fontMetrics().xHeight;else if(e.unit==="em")i=n.fontMetrics().quad;else throw new Ke("Invalid unit: '"+e.unit+"'");n!==t&&(i*=n.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*i,t.maxSize)},et=function(e){return+e.toFixed(4)+"em"},zh=function(e){return e.filter(t=>t).join(" ")},rU=function(e,t,i){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=i||{},t){t.style.isTight()&&this.classes.push("mtight");var n=t.getColor();n&&(this.style.color=n)}},oU=function(e){var t=document.createElement(e);t.className=zh(this.classes);for(var i in this.style)this.style.hasOwnProperty(i)&&(t.style[i]=this.style[i]);for(var n in this.attributes)this.attributes.hasOwnProperty(n)&&t.setAttribute(n,this.attributes[n]);for(var r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t},Xve=/[\s"'>/=\x00-\x1f]/,aU=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+Tt.escape(zh(this.classes))+'"');var i="";for(var n in this.style)this.style.hasOwnProperty(n)&&(i+=Tt.hyphenate(n)+":"+this.style[n]+";");i&&(t+=' style="'+Tt.escape(i)+'"');for(var r in this.attributes)if(this.attributes.hasOwnProperty(r)){if(Xve.test(r))throw new Ke("Invalid attribute name '"+r+"'");t+=" "+r+'="'+Tt.escape(this.attributes[r])+'"'}t+=">";for(var o=0;o<this.children.length;o++)t+=this.children[o].toMarkup();return t+="</"+e+">",t};class vv{constructor(e,t,i,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,rU.call(this,e,i,n),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return Tt.contains(this.classes,e)}toNode(){return oU.call(this,"span")}toMarkup(){return aU.call(this,"span")}}class R9{constructor(e,t,i,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,rU.call(this,t,n),this.children=i||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return Tt.contains(this.classes,e)}toNode(){return oU.call(this,"a")}toMarkup(){return aU.call(this,"a")}}class Qve{constructor(e,t,i){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=i}hasClass(e){return Tt.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var t in this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e='<img src="'+Tt.escape(this.src)+'"'+(' alt="'+Tt.escape(this.alt)+'"'),t="";for(var i in this.style)this.style.hasOwnProperty(i)&&(t+=Tt.hyphenate(i)+":"+this.style[i]+";");return t&&(e+=' style="'+Tt.escape(t)+'"'),e+="'/>",e}}var Jve={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"};class xa{constructor(e,t,i,n,r,o,a,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=i||0,this.italic=n||0,this.skew=r||0,this.width=o||0,this.classes=a||[],this.style=l||{},this.maxFontSize=0;var c=Ove(this.text.charCodeAt(0));c&&this.classes.push(c+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=Jve[this.text])}hasClass(e){return Tt.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),t=null;this.italic>0&&(t=document.createElement("span"),t.style.marginRight=et(this.italic)),this.classes.length>0&&(t=t||document.createElement("span"),t.className=zh(this.classes));for(var i in this.style)this.style.hasOwnProperty(i)&&(t=t||document.createElement("span"),t.style[i]=this.style[i]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=Tt.escape(zh(this.classes)),t+='"');var i="";this.italic>0&&(i+="margin-right:"+this.italic+"em;");for(var n in this.style)this.style.hasOwnProperty(n)&&(i+=Tt.hyphenate(n)+":"+this.style[n]+";");i&&(e=!0,t+=' style="'+Tt.escape(i)+'"');var r=Tt.escape(this.text);return e?(t+=">",t+=r,t+="</span>",t):r}}class fu{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");for(var i in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,i)&&t.setAttribute(i,this.attributes[i]);for(var n=0;n<this.children.length;n++)t.appendChild(this.children[n].toNode());return t}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+Tt.escape(this.attributes[t])+'"');e+=">";for(var i=0;i<this.children.length;i++)e+=this.children[i].toMarkup();return e+="</svg>",e}}class Hh{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"path");return this.alternate?t.setAttribute("d",this.alternate):t.setAttribute("d",PF[this.pathName]),t}toMarkup(){return this.alternate?'<path d="'+Tt.escape(this.alternate)+'"/>':'<path d="'+Tt.escape(PF[this.pathName])+'"/>'}}class MD{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"line");for(var i in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,i)&&t.setAttribute(i,this.attributes[i]);return t}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+Tt.escape(this.attributes[t])+'"');return e+="/>",e}}function WF(s){if(s instanceof xa)return s;throw new Error("Expected symbolNode but got "+String(s)+".")}function ebe(s){if(s instanceof vv)return s;throw new Error("Expected span<HtmlDomNode> but got "+String(s)+".")}var tbe={bin:1,close:1,inner:1,open:1,punct:1,rel:1},ibe={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},hn={math:{},text:{}};function E(s,e,t,i,n,r){hn[s][n]={font:e,group:t,replace:i},r&&i&&(hn[s][i]=hn[s][n])}var R="math",Oe="text",B="main",te="ams",yn="accent-token",ct="bin",Yr="close",Mp="inner",At="mathord",_s="op-token",Qo="open",r4="punct",ne="rel",yu="spacing",he="textord";E(R,B,ne,"≡","\\equiv",!0);E(R,B,ne,"≺","\\prec",!0);E(R,B,ne,"≻","\\succ",!0);E(R,B,ne,"∼","\\sim",!0);E(R,B,ne,"⊥","\\perp");E(R,B,ne,"⪯","\\preceq",!0);E(R,B,ne,"⪰","\\succeq",!0);E(R,B,ne,"≃","\\simeq",!0);E(R,B,ne,"∣","\\mid",!0);E(R,B,ne,"≪","\\ll",!0);E(R,B,ne,"≫","\\gg",!0);E(R,B,ne,"≍","\\asymp",!0);E(R,B,ne,"∥","\\parallel");E(R,B,ne,"⋈","\\bowtie",!0);E(R,B,ne,"⌣","\\smile",!0);E(R,B,ne,"⊑","\\sqsubseteq",!0);E(R,B,ne,"⊒","\\sqsupseteq",!0);E(R,B,ne,"≐","\\doteq",!0);E(R,B,ne,"⌢","\\frown",!0);E(R,B,ne,"∋","\\ni",!0);E(R,B,ne,"∝","\\propto",!0);E(R,B,ne,"⊢","\\vdash",!0);E(R,B,ne,"⊣","\\dashv",!0);E(R,B,ne,"∋","\\owns");E(R,B,r4,".","\\ldotp");E(R,B,r4,"⋅","\\cdotp");E(R,B,he,"#","\\#");E(Oe,B,he,"#","\\#");E(R,B,he,"&","\\&");E(Oe,B,he,"&","\\&");E(R,B,he,"ℵ","\\aleph",!0);E(R,B,he,"∀","\\forall",!0);E(R,B,he,"ℏ","\\hbar",!0);E(R,B,he,"∃","\\exists",!0);E(R,B,he,"∇","\\nabla",!0);E(R,B,he,"♭","\\flat",!0);E(R,B,he,"ℓ","\\ell",!0);E(R,B,he,"♮","\\natural",!0);E(R,B,he,"♣","\\clubsuit",!0);E(R,B,he,"℘","\\wp",!0);E(R,B,he,"♯","\\sharp",!0);E(R,B,he,"♢","\\diamondsuit",!0);E(R,B,he,"ℜ","\\Re",!0);E(R,B,he,"♡","\\heartsuit",!0);E(R,B,he,"ℑ","\\Im",!0);E(R,B,he,"♠","\\spadesuit",!0);E(R,B,he,"§","\\S",!0);E(Oe,B,he,"§","\\S");E(R,B,he,"¶","\\P",!0);E(Oe,B,he,"¶","\\P");E(R,B,he,"†","\\dag");E(Oe,B,he,"†","\\dag");E(Oe,B,he,"†","\\textdagger");E(R,B,he,"‡","\\ddag");E(Oe,B,he,"‡","\\ddag");E(Oe,B,he,"‡","\\textdaggerdbl");E(R,B,Yr,"⎱","\\rmoustache",!0);E(R,B,Qo,"⎰","\\lmoustache",!0);E(R,B,Yr,"⟯","\\rgroup",!0);E(R,B,Qo,"⟮","\\lgroup",!0);E(R,B,ct,"∓","\\mp",!0);E(R,B,ct,"⊖","\\ominus",!0);E(R,B,ct,"⊎","\\uplus",!0);E(R,B,ct,"⊓","\\sqcap",!0);E(R,B,ct,"∗","\\ast");E(R,B,ct,"⊔","\\sqcup",!0);E(R,B,ct,"◯","\\bigcirc",!0);E(R,B,ct,"∙","\\bullet",!0);E(R,B,ct,"‡","\\ddagger");E(R,B,ct,"≀","\\wr",!0);E(R,B,ct,"⨿","\\amalg");E(R,B,ct,"&","\\And");E(R,B,ne,"⟵","\\longleftarrow",!0);E(R,B,ne,"⇐","\\Leftarrow",!0);E(R,B,ne,"⟸","\\Longleftarrow",!0);E(R,B,ne,"⟶","\\longrightarrow",!0);E(R,B,ne,"⇒","\\Rightarrow",!0);E(R,B,ne,"⟹","\\Longrightarrow",!0);E(R,B,ne,"↔","\\leftrightarrow",!0);E(R,B,ne,"⟷","\\longleftrightarrow",!0);E(R,B,ne,"⇔","\\Leftrightarrow",!0);E(R,B,ne,"⟺","\\Longleftrightarrow",!0);E(R,B,ne,"↦","\\mapsto",!0);E(R,B,ne,"⟼","\\longmapsto",!0);E(R,B,ne,"↗","\\nearrow",!0);E(R,B,ne,"↩","\\hookleftarrow",!0);E(R,B,ne,"↪","\\hookrightarrow",!0);E(R,B,ne,"↘","\\searrow",!0);E(R,B,ne,"↼","\\leftharpoonup",!0);E(R,B,ne,"⇀","\\rightharpoonup",!0);E(R,B,ne,"↙","\\swarrow",!0);E(R,B,ne,"↽","\\leftharpoondown",!0);E(R,B,ne,"⇁","\\rightharpoondown",!0);E(R,B,ne,"↖","\\nwarrow",!0);E(R,B,ne,"⇌","\\rightleftharpoons",!0);E(R,te,ne,"≮","\\nless",!0);E(R,te,ne,"","\\@nleqslant");E(R,te,ne,"","\\@nleqq");E(R,te,ne,"⪇","\\lneq",!0);E(R,te,ne,"≨","\\lneqq",!0);E(R,te,ne,"","\\@lvertneqq");E(R,te,ne,"⋦","\\lnsim",!0);E(R,te,ne,"⪉","\\lnapprox",!0);E(R,te,ne,"⊀","\\nprec",!0);E(R,te,ne,"⋠","\\npreceq",!0);E(R,te,ne,"⋨","\\precnsim",!0);E(R,te,ne,"⪹","\\precnapprox",!0);E(R,te,ne,"≁","\\nsim",!0);E(R,te,ne,"","\\@nshortmid");E(R,te,ne,"∤","\\nmid",!0);E(R,te,ne,"⊬","\\nvdash",!0);E(R,te,ne,"⊭","\\nvDash",!0);E(R,te,ne,"⋪","\\ntriangleleft");E(R,te,ne,"⋬","\\ntrianglelefteq",!0);E(R,te,ne,"⊊","\\subsetneq",!0);E(R,te,ne,"","\\@varsubsetneq");E(R,te,ne,"⫋","\\subsetneqq",!0);E(R,te,ne,"","\\@varsubsetneqq");E(R,te,ne,"≯","\\ngtr",!0);E(R,te,ne,"","\\@ngeqslant");E(R,te,ne,"","\\@ngeqq");E(R,te,ne,"⪈","\\gneq",!0);E(R,te,ne,"≩","\\gneqq",!0);E(R,te,ne,"","\\@gvertneqq");E(R,te,ne,"⋧","\\gnsim",!0);E(R,te,ne,"⪊","\\gnapprox",!0);E(R,te,ne,"⊁","\\nsucc",!0);E(R,te,ne,"⋡","\\nsucceq",!0);E(R,te,ne,"⋩","\\succnsim",!0);E(R,te,ne,"⪺","\\succnapprox",!0);E(R,te,ne,"≆","\\ncong",!0);E(R,te,ne,"","\\@nshortparallel");E(R,te,ne,"∦","\\nparallel",!0);E(R,te,ne,"⊯","\\nVDash",!0);E(R,te,ne,"⋫","\\ntriangleright");E(R,te,ne,"⋭","\\ntrianglerighteq",!0);E(R,te,ne,"","\\@nsupseteqq");E(R,te,ne,"⊋","\\supsetneq",!0);E(R,te,ne,"","\\@varsupsetneq");E(R,te,ne,"⫌","\\supsetneqq",!0);E(R,te,ne,"","\\@varsupsetneqq");E(R,te,ne,"⊮","\\nVdash",!0);E(R,te,ne,"⪵","\\precneqq",!0);E(R,te,ne,"⪶","\\succneqq",!0);E(R,te,ne,"","\\@nsubseteqq");E(R,te,ct,"⊴","\\unlhd");E(R,te,ct,"⊵","\\unrhd");E(R,te,ne,"↚","\\nleftarrow",!0);E(R,te,ne,"↛","\\nrightarrow",!0);E(R,te,ne,"⇍","\\nLeftarrow",!0);E(R,te,ne,"⇏","\\nRightarrow",!0);E(R,te,ne,"↮","\\nleftrightarrow",!0);E(R,te,ne,"⇎","\\nLeftrightarrow",!0);E(R,te,ne,"△","\\vartriangle");E(R,te,he,"ℏ","\\hslash");E(R,te,he,"▽","\\triangledown");E(R,te,he,"◊","\\lozenge");E(R,te,he,"Ⓢ","\\circledS");E(R,te,he,"®","\\circledR");E(Oe,te,he,"®","\\circledR");E(R,te,he,"∡","\\measuredangle",!0);E(R,te,he,"∄","\\nexists");E(R,te,he,"℧","\\mho");E(R,te,he,"Ⅎ","\\Finv",!0);E(R,te,he,"⅁","\\Game",!0);E(R,te,he,"‵","\\backprime");E(R,te,he,"▲","\\blacktriangle");E(R,te,he,"▼","\\blacktriangledown");E(R,te,he,"■","\\blacksquare");E(R,te,he,"⧫","\\blacklozenge");E(R,te,he,"★","\\bigstar");E(R,te,he,"∢","\\sphericalangle",!0);E(R,te,he,"∁","\\complement",!0);E(R,te,he,"ð","\\eth",!0);E(Oe,B,he,"ð","ð");E(R,te,he,"╱","\\diagup");E(R,te,he,"╲","\\diagdown");E(R,te,he,"□","\\square");E(R,te,he,"□","\\Box");E(R,te,he,"◊","\\Diamond");E(R,te,he,"¥","\\yen",!0);E(Oe,te,he,"¥","\\yen",!0);E(R,te,he,"✓","\\checkmark",!0);E(Oe,te,he,"✓","\\checkmark");E(R,te,he,"ℶ","\\beth",!0);E(R,te,he,"ℸ","\\daleth",!0);E(R,te,he,"ℷ","\\gimel",!0);E(R,te,he,"ϝ","\\digamma",!0);E(R,te,he,"ϰ","\\varkappa");E(R,te,Qo,"┌","\\@ulcorner",!0);E(R,te,Yr,"┐","\\@urcorner",!0);E(R,te,Qo,"└","\\@llcorner",!0);E(R,te,Yr,"┘","\\@lrcorner",!0);E(R,te,ne,"≦","\\leqq",!0);E(R,te,ne,"⩽","\\leqslant",!0);E(R,te,ne,"⪕","\\eqslantless",!0);E(R,te,ne,"≲","\\lesssim",!0);E(R,te,ne,"⪅","\\lessapprox",!0);E(R,te,ne,"≊","\\approxeq",!0);E(R,te,ct,"⋖","\\lessdot");E(R,te,ne,"⋘","\\lll",!0);E(R,te,ne,"≶","\\lessgtr",!0);E(R,te,ne,"⋚","\\lesseqgtr",!0);E(R,te,ne,"⪋","\\lesseqqgtr",!0);E(R,te,ne,"≑","\\doteqdot");E(R,te,ne,"≓","\\risingdotseq",!0);E(R,te,ne,"≒","\\fallingdotseq",!0);E(R,te,ne,"∽","\\backsim",!0);E(R,te,ne,"⋍","\\backsimeq",!0);E(R,te,ne,"⫅","\\subseteqq",!0);E(R,te,ne,"⋐","\\Subset",!0);E(R,te,ne,"⊏","\\sqsubset",!0);E(R,te,ne,"≼","\\preccurlyeq",!0);E(R,te,ne,"⋞","\\curlyeqprec",!0);E(R,te,ne,"≾","\\precsim",!0);E(R,te,ne,"⪷","\\precapprox",!0);E(R,te,ne,"⊲","\\vartriangleleft");E(R,te,ne,"⊴","\\trianglelefteq");E(R,te,ne,"⊨","\\vDash",!0);E(R,te,ne,"⊪","\\Vvdash",!0);E(R,te,ne,"⌣","\\smallsmile");E(R,te,ne,"⌢","\\smallfrown");E(R,te,ne,"≏","\\bumpeq",!0);E(R,te,ne,"≎","\\Bumpeq",!0);E(R,te,ne,"≧","\\geqq",!0);E(R,te,ne,"⩾","\\geqslant",!0);E(R,te,ne,"⪖","\\eqslantgtr",!0);E(R,te,ne,"≳","\\gtrsim",!0);E(R,te,ne,"⪆","\\gtrapprox",!0);E(R,te,ct,"⋗","\\gtrdot");E(R,te,ne,"⋙","\\ggg",!0);E(R,te,ne,"≷","\\gtrless",!0);E(R,te,ne,"⋛","\\gtreqless",!0);E(R,te,ne,"⪌","\\gtreqqless",!0);E(R,te,ne,"≖","\\eqcirc",!0);E(R,te,ne,"≗","\\circeq",!0);E(R,te,ne,"≜","\\triangleq",!0);E(R,te,ne,"∼","\\thicksim");E(R,te,ne,"≈","\\thickapprox");E(R,te,ne,"⫆","\\supseteqq",!0);E(R,te,ne,"⋑","\\Supset",!0);E(R,te,ne,"⊐","\\sqsupset",!0);E(R,te,ne,"≽","\\succcurlyeq",!0);E(R,te,ne,"⋟","\\curlyeqsucc",!0);E(R,te,ne,"≿","\\succsim",!0);E(R,te,ne,"⪸","\\succapprox",!0);E(R,te,ne,"⊳","\\vartriangleright");E(R,te,ne,"⊵","\\trianglerighteq");E(R,te,ne,"⊩","\\Vdash",!0);E(R,te,ne,"∣","\\shortmid");E(R,te,ne,"∥","\\shortparallel");E(R,te,ne,"≬","\\between",!0);E(R,te,ne,"⋔","\\pitchfork",!0);E(R,te,ne,"∝","\\varpropto");E(R,te,ne,"◀","\\blacktriangleleft");E(R,te,ne,"∴","\\therefore",!0);E(R,te,ne,"∍","\\backepsilon");E(R,te,ne,"▶","\\blacktriangleright");E(R,te,ne,"∵","\\because",!0);E(R,te,ne,"⋘","\\llless");E(R,te,ne,"⋙","\\gggtr");E(R,te,ct,"⊲","\\lhd");E(R,te,ct,"⊳","\\rhd");E(R,te,ne,"≂","\\eqsim",!0);E(R,B,ne,"⋈","\\Join");E(R,te,ne,"≑","\\Doteq",!0);E(R,te,ct,"∔","\\dotplus",!0);E(R,te,ct,"∖","\\smallsetminus");E(R,te,ct,"⋒","\\Cap",!0);E(R,te,ct,"⋓","\\Cup",!0);E(R,te,ct,"⩞","\\doublebarwedge",!0);E(R,te,ct,"⊟","\\boxminus",!0);E(R,te,ct,"⊞","\\boxplus",!0);E(R,te,ct,"⋇","\\divideontimes",!0);E(R,te,ct,"⋉","\\ltimes",!0);E(R,te,ct,"⋊","\\rtimes",!0);E(R,te,ct,"⋋","\\leftthreetimes",!0);E(R,te,ct,"⋌","\\rightthreetimes",!0);E(R,te,ct,"⋏","\\curlywedge",!0);E(R,te,ct,"⋎","\\curlyvee",!0);E(R,te,ct,"⊝","\\circleddash",!0);E(R,te,ct,"⊛","\\circledast",!0);E(R,te,ct,"⋅","\\centerdot");E(R,te,ct,"⊺","\\intercal",!0);E(R,te,ct,"⋒","\\doublecap");E(R,te,ct,"⋓","\\doublecup");E(R,te,ct,"⊠","\\boxtimes",!0);E(R,te,ne,"⇢","\\dashrightarrow",!0);E(R,te,ne,"⇠","\\dashleftarrow",!0);E(R,te,ne,"⇇","\\leftleftarrows",!0);E(R,te,ne,"⇆","\\leftrightarrows",!0);E(R,te,ne,"⇚","\\Lleftarrow",!0);E(R,te,ne,"↞","\\twoheadleftarrow",!0);E(R,te,ne,"↢","\\leftarrowtail",!0);E(R,te,ne,"↫","\\looparrowleft",!0);E(R,te,ne,"⇋","\\leftrightharpoons",!0);E(R,te,ne,"↶","\\curvearrowleft",!0);E(R,te,ne,"↺","\\circlearrowleft",!0);E(R,te,ne,"↰","\\Lsh",!0);E(R,te,ne,"⇈","\\upuparrows",!0);E(R,te,ne,"↿","\\upharpoonleft",!0);E(R,te,ne,"⇃","\\downharpoonleft",!0);E(R,B,ne,"⊶","\\origof",!0);E(R,B,ne,"⊷","\\imageof",!0);E(R,te,ne,"⊸","\\multimap",!0);E(R,te,ne,"↭","\\leftrightsquigarrow",!0);E(R,te,ne,"⇉","\\rightrightarrows",!0);E(R,te,ne,"⇄","\\rightleftarrows",!0);E(R,te,ne,"↠","\\twoheadrightarrow",!0);E(R,te,ne,"↣","\\rightarrowtail",!0);E(R,te,ne,"↬","\\looparrowright",!0);E(R,te,ne,"↷","\\curvearrowright",!0);E(R,te,ne,"↻","\\circlearrowright",!0);E(R,te,ne,"↱","\\Rsh",!0);E(R,te,ne,"⇊","\\downdownarrows",!0);E(R,te,ne,"↾","\\upharpoonright",!0);E(R,te,ne,"⇂","\\downharpoonright",!0);E(R,te,ne,"⇝","\\rightsquigarrow",!0);E(R,te,ne,"⇝","\\leadsto");E(R,te,ne,"⇛","\\Rrightarrow",!0);E(R,te,ne,"↾","\\restriction");E(R,B,he,"‘","`");E(R,B,he,"$","\\$");E(Oe,B,he,"$","\\$");E(Oe,B,he,"$","\\textdollar");E(R,B,he,"%","\\%");E(Oe,B,he,"%","\\%");E(R,B,he,"_","\\_");E(Oe,B,he,"_","\\_");E(Oe,B,he,"_","\\textunderscore");E(R,B,he,"∠","\\angle",!0);E(R,B,he,"∞","\\infty",!0);E(R,B,he,"′","\\prime");E(R,B,he,"△","\\triangle");E(R,B,he,"Γ","\\Gamma",!0);E(R,B,he,"Δ","\\Delta",!0);E(R,B,he,"Θ","\\Theta",!0);E(R,B,he,"Λ","\\Lambda",!0);E(R,B,he,"Ξ","\\Xi",!0);E(R,B,he,"Π","\\Pi",!0);E(R,B,he,"Σ","\\Sigma",!0);E(R,B,he,"Υ","\\Upsilon",!0);E(R,B,he,"Φ","\\Phi",!0);E(R,B,he,"Ψ","\\Psi",!0);E(R,B,he,"Ω","\\Omega",!0);E(R,B,he,"A","Α");E(R,B,he,"B","Β");E(R,B,he,"E","Ε");E(R,B,he,"Z","Ζ");E(R,B,he,"H","Η");E(R,B,he,"I","Ι");E(R,B,he,"K","Κ");E(R,B,he,"M","Μ");E(R,B,he,"N","Ν");E(R,B,he,"O","Ο");E(R,B,he,"P","Ρ");E(R,B,he,"T","Τ");E(R,B,he,"X","Χ");E(R,B,he,"¬","\\neg",!0);E(R,B,he,"¬","\\lnot");E(R,B,he,"⊤","\\top");E(R,B,he,"⊥","\\bot");E(R,B,he,"∅","\\emptyset");E(R,te,he,"∅","\\varnothing");E(R,B,At,"α","\\alpha",!0);E(R,B,At,"β","\\beta",!0);E(R,B,At,"γ","\\gamma",!0);E(R,B,At,"δ","\\delta",!0);E(R,B,At,"ϵ","\\epsilon",!0);E(R,B,At,"ζ","\\zeta",!0);E(R,B,At,"η","\\eta",!0);E(R,B,At,"θ","\\theta",!0);E(R,B,At,"ι","\\iota",!0);E(R,B,At,"κ","\\kappa",!0);E(R,B,At,"λ","\\lambda",!0);E(R,B,At,"μ","\\mu",!0);E(R,B,At,"ν","\\nu",!0);E(R,B,At,"ξ","\\xi",!0);E(R,B,At,"ο","\\omicron",!0);E(R,B,At,"π","\\pi",!0);E(R,B,At,"ρ","\\rho",!0);E(R,B,At,"σ","\\sigma",!0);E(R,B,At,"τ","\\tau",!0);E(R,B,At,"υ","\\upsilon",!0);E(R,B,At,"ϕ","\\phi",!0);E(R,B,At,"χ","\\chi",!0);E(R,B,At,"ψ","\\psi",!0);E(R,B,At,"ω","\\omega",!0);E(R,B,At,"ε","\\varepsilon",!0);E(R,B,At,"ϑ","\\vartheta",!0);E(R,B,At,"ϖ","\\varpi",!0);E(R,B,At,"ϱ","\\varrho",!0);E(R,B,At,"ς","\\varsigma",!0);E(R,B,At,"φ","\\varphi",!0);E(R,B,ct,"∗","*",!0);E(R,B,ct,"+","+");E(R,B,ct,"−","-",!0);E(R,B,ct,"⋅","\\cdot",!0);E(R,B,ct,"∘","\\circ",!0);E(R,B,ct,"÷","\\div",!0);E(R,B,ct,"±","\\pm",!0);E(R,B,ct,"×","\\times",!0);E(R,B,ct,"∩","\\cap",!0);E(R,B,ct,"∪","\\cup",!0);E(R,B,ct,"∖","\\setminus",!0);E(R,B,ct,"∧","\\land");E(R,B,ct,"∨","\\lor");E(R,B,ct,"∧","\\wedge",!0);E(R,B,ct,"∨","\\vee",!0);E(R,B,he,"√","\\surd");E(R,B,Qo,"⟨","\\langle",!0);E(R,B,Qo,"∣","\\lvert");E(R,B,Qo,"∥","\\lVert");E(R,B,Yr,"?","?");E(R,B,Yr,"!","!");E(R,B,Yr,"⟩","\\rangle",!0);E(R,B,Yr,"∣","\\rvert");E(R,B,Yr,"∥","\\rVert");E(R,B,ne,"=","=");E(R,B,ne,":",":");E(R,B,ne,"≈","\\approx",!0);E(R,B,ne,"≅","\\cong",!0);E(R,B,ne,"≥","\\ge");E(R,B,ne,"≥","\\geq",!0);E(R,B,ne,"←","\\gets");E(R,B,ne,">","\\gt",!0);E(R,B,ne,"∈","\\in",!0);E(R,B,ne,"","\\@not");E(R,B,ne,"⊂","\\subset",!0);E(R,B,ne,"⊃","\\supset",!0);E(R,B,ne,"⊆","\\subseteq",!0);E(R,B,ne,"⊇","\\supseteq",!0);E(R,te,ne,"⊈","\\nsubseteq",!0);E(R,te,ne,"⊉","\\nsupseteq",!0);E(R,B,ne,"⊨","\\models");E(R,B,ne,"←","\\leftarrow",!0);E(R,B,ne,"≤","\\le");E(R,B,ne,"≤","\\leq",!0);E(R,B,ne,"<","\\lt",!0);E(R,B,ne,"→","\\rightarrow",!0);E(R,B,ne,"→","\\to");E(R,te,ne,"≱","\\ngeq",!0);E(R,te,ne,"≰","\\nleq",!0);E(R,B,yu," ","\\ ");E(R,B,yu," ","\\space");E(R,B,yu," ","\\nobreakspace");E(Oe,B,yu," ","\\ ");E(Oe,B,yu," "," ");E(Oe,B,yu," ","\\space");E(Oe,B,yu," ","\\nobreakspace");E(R,B,yu,null,"\\nobreak");E(R,B,yu,null,"\\allowbreak");E(R,B,r4,",",",");E(R,B,r4,";",";");E(R,te,ct,"⊼","\\barwedge",!0);E(R,te,ct,"⊻","\\veebar",!0);E(R,B,ct,"⊙","\\odot",!0);E(R,B,ct,"⊕","\\oplus",!0);E(R,B,ct,"⊗","\\otimes",!0);E(R,B,he,"∂","\\partial",!0);E(R,B,ct,"⊘","\\oslash",!0);E(R,te,ct,"⊚","\\circledcirc",!0);E(R,te,ct,"⊡","\\boxdot",!0);E(R,B,ct,"△","\\bigtriangleup");E(R,B,ct,"▽","\\bigtriangledown");E(R,B,ct,"†","\\dagger");E(R,B,ct,"⋄","\\diamond");E(R,B,ct,"⋆","\\star");E(R,B,ct,"◃","\\triangleleft");E(R,B,ct,"▹","\\triangleright");E(R,B,Qo,"{","\\{");E(Oe,B,he,"{","\\{");E(Oe,B,he,"{","\\textbraceleft");E(R,B,Yr,"}","\\}");E(Oe,B,he,"}","\\}");E(Oe,B,he,"}","\\textbraceright");E(R,B,Qo,"{","\\lbrace");E(R,B,Yr,"}","\\rbrace");E(R,B,Qo,"[","\\lbrack",!0);E(Oe,B,he,"[","\\lbrack",!0);E(R,B,Yr,"]","\\rbrack",!0);E(Oe,B,he,"]","\\rbrack",!0);E(R,B,Qo,"(","\\lparen",!0);E(R,B,Yr,")","\\rparen",!0);E(Oe,B,he,"<","\\textless",!0);E(Oe,B,he,">","\\textgreater",!0);E(R,B,Qo,"⌊","\\lfloor",!0);E(R,B,Yr,"⌋","\\rfloor",!0);E(R,B,Qo,"⌈","\\lceil",!0);E(R,B,Yr,"⌉","\\rceil",!0);E(R,B,he,"\\","\\backslash");E(R,B,he,"∣","|");E(R,B,he,"∣","\\vert");E(Oe,B,he,"|","\\textbar",!0);E(R,B,he,"∥","\\|");E(R,B,he,"∥","\\Vert");E(Oe,B,he,"∥","\\textbardbl");E(Oe,B,he,"~","\\textasciitilde");E(Oe,B,he,"\\","\\textbackslash");E(Oe,B,he,"^","\\textasciicircum");E(R,B,ne,"↑","\\uparrow",!0);E(R,B,ne,"⇑","\\Uparrow",!0);E(R,B,ne,"↓","\\downarrow",!0);E(R,B,ne,"⇓","\\Downarrow",!0);E(R,B,ne,"↕","\\updownarrow",!0);E(R,B,ne,"⇕","\\Updownarrow",!0);E(R,B,_s,"∐","\\coprod");E(R,B,_s,"⋁","\\bigvee");E(R,B,_s,"⋀","\\bigwedge");E(R,B,_s,"⨄","\\biguplus");E(R,B,_s,"⋂","\\bigcap");E(R,B,_s,"⋃","\\bigcup");E(R,B,_s,"∫","\\int");E(R,B,_s,"∫","\\intop");E(R,B,_s,"∬","\\iint");E(R,B,_s,"∭","\\iiint");E(R,B,_s,"∏","\\prod");E(R,B,_s,"∑","\\sum");E(R,B,_s,"⨂","\\bigotimes");E(R,B,_s,"⨁","\\bigoplus");E(R,B,_s,"⨀","\\bigodot");E(R,B,_s,"∮","\\oint");E(R,B,_s,"∯","\\oiint");E(R,B,_s,"∰","\\oiiint");E(R,B,_s,"⨆","\\bigsqcup");E(R,B,_s,"∫","\\smallint");E(Oe,B,Mp,"…","\\textellipsis");E(R,B,Mp,"…","\\mathellipsis");E(Oe,B,Mp,"…","\\ldots",!0);E(R,B,Mp,"…","\\ldots",!0);E(R,B,Mp,"⋯","\\@cdots",!0);E(R,B,Mp,"⋱","\\ddots",!0);E(R,B,he,"⋮","\\varvdots");E(Oe,B,he,"⋮","\\varvdots");E(R,B,yn,"ˊ","\\acute");E(R,B,yn,"ˋ","\\grave");E(R,B,yn,"¨","\\ddot");E(R,B,yn,"~","\\tilde");E(R,B,yn,"ˉ","\\bar");E(R,B,yn,"˘","\\breve");E(R,B,yn,"ˇ","\\check");E(R,B,yn,"^","\\hat");E(R,B,yn,"⃗","\\vec");E(R,B,yn,"˙","\\dot");E(R,B,yn,"˚","\\mathring");E(R,B,At,"","\\@imath");E(R,B,At,"","\\@jmath");E(R,B,he,"ı","ı");E(R,B,he,"ȷ","ȷ");E(Oe,B,he,"ı","\\i",!0);E(Oe,B,he,"ȷ","\\j",!0);E(Oe,B,he,"ß","\\ss",!0);E(Oe,B,he,"æ","\\ae",!0);E(Oe,B,he,"œ","\\oe",!0);E(Oe,B,he,"ø","\\o",!0);E(Oe,B,he,"Æ","\\AE",!0);E(Oe,B,he,"Œ","\\OE",!0);E(Oe,B,he,"Ø","\\O",!0);E(Oe,B,yn,"ˊ","\\'");E(Oe,B,yn,"ˋ","\\`");E(Oe,B,yn,"ˆ","\\^");E(Oe,B,yn,"˜","\\~");E(Oe,B,yn,"ˉ","\\=");E(Oe,B,yn,"˘","\\u");E(Oe,B,yn,"˙","\\.");E(Oe,B,yn,"¸","\\c");E(Oe,B,yn,"˚","\\r");E(Oe,B,yn,"ˇ","\\v");E(Oe,B,yn,"¨",'\\"');E(Oe,B,yn,"˝","\\H");E(Oe,B,yn,"◯","\\textcircled");var lU={"--":!0,"---":!0,"``":!0,"''":!0};E(Oe,B,he,"–","--",!0);E(Oe,B,he,"–","\\textendash");E(Oe,B,he,"—","---",!0);E(Oe,B,he,"—","\\textemdash");E(Oe,B,he,"‘","`",!0);E(Oe,B,he,"‘","\\textquoteleft");E(Oe,B,he,"’","'",!0);E(Oe,B,he,"’","\\textquoteright");E(Oe,B,he,"“","``",!0);E(Oe,B,he,"“","\\textquotedblleft");E(Oe,B,he,"”","''",!0);E(Oe,B,he,"”","\\textquotedblright");E(R,B,he,"°","\\degree",!0);E(Oe,B,he,"°","\\degree");E(Oe,B,he,"°","\\textdegree",!0);E(R,B,he,"£","\\pounds");E(R,B,he,"£","\\mathsterling",!0);E(Oe,B,he,"£","\\pounds");E(Oe,B,he,"£","\\textsterling",!0);E(R,te,he,"✠","\\maltese");E(Oe,te,he,"✠","\\maltese");var VF='0123456789/@."';for(var DL=0;DL<VF.length;DL++){var zF=VF.charAt(DL);E(R,B,he,zF,zF)}var HF='0123456789!@*()-=+";:?/.,';for(var EL=0;EL<HF.length;EL++){var jF=HF.charAt(EL);E(Oe,B,he,jF,jF)}var tS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var TL=0;TL<tS.length;TL++){var Sw=tS.charAt(TL);E(R,B,At,Sw,Sw),E(Oe,B,he,Sw,Sw)}E(R,te,he,"C","ℂ");E(Oe,te,he,"C","ℂ");E(R,te,he,"H","ℍ");E(Oe,te,he,"H","ℍ");E(R,te,he,"N","ℕ");E(Oe,te,he,"N","ℕ");E(R,te,he,"P","ℙ");E(Oe,te,he,"P","ℙ");E(R,te,he,"Q","ℚ");E(Oe,te,he,"Q","ℚ");E(R,te,he,"R","ℝ");E(Oe,te,he,"R","ℝ");E(R,te,he,"Z","ℤ");E(Oe,te,he,"Z","ℤ");E(R,B,At,"h","ℎ");E(Oe,B,At,"h","ℎ");var jt="";for(var Pr=0;Pr<tS.length;Pr++){var Fn=tS.charAt(Pr);jt=String.fromCharCode(55349,56320+Pr),E(R,B,At,Fn,jt),E(Oe,B,he,Fn,jt),jt=String.fromCharCode(55349,56372+Pr),E(R,B,At,Fn,jt),E(Oe,B,he,Fn,jt),jt=String.fromCharCode(55349,56424+Pr),E(R,B,At,Fn,jt),E(Oe,B,he,Fn,jt),jt=String.fromCharCode(55349,56580+Pr),E(R,B,At,Fn,jt),E(Oe,B,he,Fn,jt),jt=String.fromCharCode(55349,56684+Pr),E(R,B,At,Fn,jt),E(Oe,B,he,Fn,jt),jt=String.fromCharCode(55349,56736+Pr),E(R,B,At,Fn,jt),E(Oe,B,he,Fn,jt),jt=String.fromCharCode(55349,56788+Pr),E(R,B,At,Fn,jt),E(Oe,B,he,Fn,jt),jt=String.fromCharCode(55349,56840+Pr),E(R,B,At,Fn,jt),E(Oe,B,he,Fn,jt),jt=String.fromCharCode(55349,56944+Pr),E(R,B,At,Fn,jt),E(Oe,B,he,Fn,jt),Pr<26&&(jt=String.fromCharCode(55349,56632+Pr),E(R,B,At,Fn,jt),E(Oe,B,he,Fn,jt),jt=String.fromCharCode(55349,56476+Pr),E(R,B,At,Fn,jt),E(Oe,B,he,Fn,jt))}jt="𝕜";E(R,B,At,"k",jt);E(Oe,B,he,"k",jt);for(var vd=0;vd<10;vd++){var Ku=vd.toString();jt=String.fromCharCode(55349,57294+vd),E(R,B,At,Ku,jt),E(Oe,B,he,Ku,jt),jt=String.fromCharCode(55349,57314+vd),E(R,B,At,Ku,jt),E(Oe,B,he,Ku,jt),jt=String.fromCharCode(55349,57324+vd),E(R,B,At,Ku,jt),E(Oe,B,he,Ku,jt),jt=String.fromCharCode(55349,57334+vd),E(R,B,At,Ku,jt),E(Oe,B,he,Ku,jt)}var RD="ÐÞþ";for(var NL=0;NL<RD.length;NL++){var xw=RD.charAt(NL);E(R,B,At,xw,xw),E(Oe,B,he,xw,xw)}var kw=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],UF=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],nbe=function(e,t){var i=e.charCodeAt(0),n=e.charCodeAt(1),r=(i-55296)*1024+(n-56320)+65536,o=t==="math"?0:1;if(119808<=r&&r<120484){var a=Math.floor((r-119808)/26);return[kw[a][2],kw[a][o]]}else if(120782<=r&&r<=120831){var l=Math.floor((r-120782)/10);return[UF[l][2],UF[l][o]]}else{if(r===120485||r===120486)return[kw[0][2],kw[0][o]];if(120486<r&&r<120782)return["",""];throw new Ke("Unsupported character: "+e)}},o4=function(e,t,i){return hn[i][e]&&hn[i][e].replace&&(e=hn[i][e].replace),{value:e,metrics:M9(e,t,i)}},$a=function(e,t,i,n,r){var o=o4(e,t,i),a=o.metrics;e=o.value;var l;if(a){var c=a.italic;(i==="text"||n&&n.font==="mathit")&&(c=0),l=new xa(e,a.height,a.depth,c,a.skew,a.width,r)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+t+"' and mode '"+i+"'")),l=new xa(e,0,0,0,0,0,r);if(n){l.maxFontSize=n.sizeMultiplier,n.style.isTight()&&l.classes.push("mtight");var u=n.getColor();u&&(l.style.color=u)}return l},sbe=function(e,t,i,n){return n===void 0&&(n=[]),i.font==="boldsymbol"&&o4(e,"Main-Bold",t).metrics?$a(e,"Main-Bold",t,i,n.concat(["mathbf"])):e==="\\"||hn[t][e].font==="main"?$a(e,"Main-Regular",t,i,n):$a(e,"AMS-Regular",t,i,n.concat(["amsrm"]))},rbe=function(e,t,i,n,r){return r!=="textord"&&o4(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},obe=function(e,t,i){var n=e.mode,r=e.text,o=["mord"],a=n==="math"||n==="text"&&t.font,l=a?t.font:t.fontFamily,c="",u="";if(r.charCodeAt(0)===55349&&([c,u]=nbe(r,n)),c.length>0)return $a(r,c,n,t,o.concat(u));if(l){var d,g;if(l==="boldsymbol"){var m=rbe(r,n,t,o,i);d=m.fontName,g=[m.fontClass]}else a?(d=hU[l].fontName,g=[l]):(d=Lw(l,t.fontWeight,t.fontShape),g=[l,t.fontWeight,t.fontShape]);if(o4(r,d,n).metrics)return $a(r,d,n,t,o.concat(g));if(lU.hasOwnProperty(r)&&d.slice(0,10)==="Typewriter"){for(var _=[],v=0;v<r.length;v++)_.push($a(r[v],d,n,t,o.concat(g)));return uU(_)}}if(i==="mathord")return $a(r,"Math-Italic",n,t,o.concat(["mathnormal"]));if(i==="textord"){var w=hn[n][r]&&hn[n][r].font;if(w==="ams"){var y=Lw("amsrm",t.fontWeight,t.fontShape);return $a(r,y,n,t,o.concat("amsrm",t.fontWeight,t.fontShape))}else if(w==="main"||!w){var S=Lw("textrm",t.fontWeight,t.fontShape);return $a(r,S,n,t,o.concat(t.fontWeight,t.fontShape))}else{var k=Lw(w,t.fontWeight,t.fontShape);return $a(r,k,n,t,o.concat(k,t.fontWeight,t.fontShape))}}else throw new Error("unexpected type: "+i+" in makeOrd")},abe=(s,e)=>{if(zh(s.classes)!==zh(e.classes)||s.skew!==e.skew||s.maxFontSize!==e.maxFontSize)return!1;if(s.classes.length===1){var t=s.classes[0];if(t==="mbin"||t==="mord")return!1}for(var i in s.style)if(s.style.hasOwnProperty(i)&&s.style[i]!==e.style[i])return!1;for(var n in e.style)if(e.style.hasOwnProperty(n)&&s.style[n]!==e.style[n])return!1;return!0},lbe=s=>{for(var e=0;e<s.length-1;e++){var t=s[e],i=s[e+1];t instanceof xa&&i instanceof xa&&abe(t,i)&&(t.text+=i.text,t.height=Math.max(t.height,i.height),t.depth=Math.max(t.depth,i.depth),t.italic=i.italic,s.splice(e+1,1),e--)}return s},A9=function(e){for(var t=0,i=0,n=0,r=0;r<e.children.length;r++){var o=e.children[r];o.height>t&&(t=o.height),o.depth>i&&(i=o.depth),o.maxFontSize>n&&(n=o.maxFontSize)}e.height=t,e.depth=i,e.maxFontSize=n},uo=function(e,t,i,n){var r=new vv(e,t,i,n);return A9(r),r},cU=(s,e,t,i)=>new vv(s,e,t,i),cbe=function(e,t,i){var n=uo([e],[],t);return n.height=Math.max(i||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),n.style.borderBottomWidth=et(n.height),n.maxFontSize=1,n},ube=function(e,t,i,n){var r=new R9(e,t,i,n);return A9(r),r},uU=function(e){var t=new _v(e);return A9(t),t},hbe=function(e,t){return e instanceof _v?uo([],[e],t):e},dbe=function(e){if(e.positionType==="individualShift"){for(var t=e.children,i=[t[0]],n=-t[0].shift-t[0].elem.depth,r=n,o=1;o<t.length;o++){var a=-t[o].shift-r-t[o].elem.depth,l=a-(t[o-1].elem.height+t[o-1].elem.depth);r=r+a,i.push({type:"kern",size:l}),i.push(t[o])}return{children:i,depth:n}}var c;if(e.positionType==="top"){for(var u=e.positionData,d=0;d<e.children.length;d++){var g=e.children[d];u-=g.type==="kern"?g.size:g.elem.height+g.elem.depth}c=u}else if(e.positionType==="bottom")c=-e.positionData;else{var m=e.children[0];if(m.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")c=-m.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")c=-m.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:c}},fbe=function(e,t){for(var{children:i,depth:n}=dbe(e),r=0,o=0;o<i.length;o++){var a=i[o];if(a.type==="elem"){var l=a.elem;r=Math.max(r,l.maxFontSize,l.height)}}r+=2;var c=uo(["pstrut"],[]);c.style.height=et(r);for(var u=[],d=n,g=n,m=n,_=0;_<i.length;_++){var v=i[_];if(v.type==="kern")m+=v.size;else{var w=v.elem,y=v.wrapperClasses||[],S=v.wrapperStyle||{},k=uo(y,[c,w],void 0,S);k.style.top=et(-r-m-w.depth),v.marginLeft&&(k.style.marginLeft=v.marginLeft),v.marginRight&&(k.style.marginRight=v.marginRight),u.push(k),m+=w.height+w.depth}d=Math.min(d,m),g=Math.max(g,m)}var L=uo(["vlist"],u);L.style.height=et(g);var T;if(d<0){var A=uo([],[]),I=uo(["vlist"],[A]);I.style.height=et(-d);var O=uo(["vlist-s"],[new xa("​")]);T=[uo(["vlist-r"],[L,O]),uo(["vlist-r"],[I])]}else T=[uo(["vlist-r"],[L])];var F=uo(["vlist-t"],T);return T.length===2&&F.classes.push("vlist-t2"),F.height=g,F.depth=-d,F},gbe=(s,e)=>{var t=uo(["mspace"],[],e),i=Nn(s,e);return t.style.marginRight=et(i),t},Lw=function(e,t,i){var n="";switch(e){case"amsrm":n="AMS";break;case"textrm":n="Main";break;case"textsf":n="SansSerif";break;case"texttt":n="Typewriter";break;default:n=e}var r;return t==="textbf"&&i==="textit"?r="BoldItalic":t==="textbf"?r="Bold":t==="textit"?r="Italic":r="Regular",n+"-"+r},hU={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},dU={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},mbe=function(e,t){var[i,n,r]=dU[e],o=new Hh(i),a=new fu([o],{width:et(n),height:et(r),style:"width:"+et(n),viewBox:"0 0 "+1e3*n+" "+1e3*r,preserveAspectRatio:"xMinYMin"}),l=cU(["overlay"],[a],t);return l.height=r,l.style.height=et(r),l.style.width=et(n),l},we={fontMap:hU,makeSymbol:$a,mathsym:sbe,makeSpan:uo,makeSvgSpan:cU,makeLineSpan:cbe,makeAnchor:ube,makeFragment:uU,wrapFragment:hbe,makeVList:fbe,makeOrd:obe,makeGlue:gbe,staticSvg:mbe,svgData:dU,tryCombineChars:lbe},Dn={number:3,unit:"mu"},bd={number:4,unit:"mu"},bc={number:5,unit:"mu"},pbe={mord:{mop:Dn,mbin:bd,mrel:bc,minner:Dn},mop:{mord:Dn,mop:Dn,mrel:bc,minner:Dn},mbin:{mord:bd,mop:bd,mopen:bd,minner:bd},mrel:{mord:bc,mop:bc,mopen:bc,minner:bc},mopen:{},mclose:{mop:Dn,mbin:bd,mrel:bc,minner:Dn},mpunct:{mord:Dn,mop:Dn,mrel:bc,mopen:Dn,mclose:Dn,mpunct:Dn,minner:Dn},minner:{mord:Dn,mop:Dn,mbin:bd,mrel:bc,mopen:Dn,mpunct:Dn,minner:Dn}},_be={mord:{mop:Dn},mop:{mord:Dn,mop:Dn},mbin:{},mrel:{},mopen:{},mclose:{mop:Dn},mpunct:{},minner:{mop:Dn}},fU={},iS={},nS={};function ot(s){for(var{type:e,names:t,props:i,handler:n,htmlBuilder:r,mathmlBuilder:o}=s,a={type:e,numArgs:i.numArgs,argTypes:i.argTypes,allowedInArgument:!!i.allowedInArgument,allowedInText:!!i.allowedInText,allowedInMath:i.allowedInMath===void 0?!0:i.allowedInMath,numOptionalArgs:i.numOptionalArgs||0,infix:!!i.infix,primitive:!!i.primitive,handler:n},l=0;l<t.length;++l)fU[t[l]]=a;e&&(r&&(iS[e]=r),o&&(nS[e]=o))}function tg(s){var{type:e,htmlBuilder:t,mathmlBuilder:i}=s;ot({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:t,mathmlBuilder:i})}var sS=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},Qn=function(e){return e.type==="ordgroup"?e.body:[e]},gu=we.makeSpan,vbe=["leftmost","mbin","mopen","mrel","mop","mpunct"],bbe=["rightmost","mrel","mclose","mpunct"],wbe={display:Pt.DISPLAY,text:Pt.TEXT,script:Pt.SCRIPT,scriptscript:Pt.SCRIPTSCRIPT},Cbe={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Ls=function(e,t,i,n){n===void 0&&(n=[null,null]);for(var r=[],o=0;o<e.length;o++){var a=Ai(e[o],t);if(a instanceof _v){var l=a.children;r.push(...l)}else r.push(a)}if(we.tryCombineChars(r),!i)return r;var c=t;if(e.length===1){var u=e[0];u.type==="sizing"?c=t.havingSize(u.size):u.type==="styling"&&(c=t.havingStyle(wbe[u.style]))}var d=gu([n[0]||"leftmost"],[],t),g=gu([n[1]||"rightmost"],[],t),m=i==="root";return $F(r,(_,v)=>{var w=v.classes[0],y=_.classes[0];w==="mbin"&&Tt.contains(bbe,y)?v.classes[0]="mord":y==="mbin"&&Tt.contains(vbe,w)&&(_.classes[0]="mord")},{node:d},g,m),$F(r,(_,v)=>{var w=AD(v),y=AD(_),S=w&&y?_.hasClass("mtight")?_be[w][y]:pbe[w][y]:null;if(S)return we.makeGlue(S,c)},{node:d},g,m),r},$F=function s(e,t,i,n,r){n&&e.push(n);for(var o=0;o<e.length;o++){var a=e[o],l=gU(a);if(l){s(l.children,t,i,null,r);continue}var c=!a.hasClass("mspace");if(c){var u=t(a,i.node);u&&(i.insertAfter?i.insertAfter(u):(e.unshift(u),o++))}c?i.node=a:r&&a.hasClass("newline")&&(i.node=gu(["leftmost"])),i.insertAfter=(d=>g=>{e.splice(d+1,0,g),o++})(o)}n&&e.pop()},gU=function(e){return e instanceof _v||e instanceof R9||e instanceof vv&&e.hasClass("enclosing")?e:null},ybe=function s(e,t){var i=gU(e);if(i){var n=i.children;if(n.length){if(t==="right")return s(n[n.length-1],"right");if(t==="left")return s(n[0],"left")}}return e},AD=function(e,t){return e?(t&&(e=ybe(e,t)),Cbe[e.classes[0]]||null):null},z_=function(e,t){var i=["nulldelimiter"].concat(e.baseSizingClasses());return gu(t.concat(i))},Ai=function(e,t,i){if(!e)return gu();if(iS[e.type]){var n=iS[e.type](e,t);if(i&&t.size!==i.size){n=gu(t.sizingClasses(i),[n],t);var r=t.sizeMultiplier/i.sizeMultiplier;n.height*=r,n.depth*=r}return n}else throw new Ke("Got group of unknown type: '"+e.type+"'")};function Dw(s,e){var t=gu(["base"],s,e),i=gu(["strut"]);return i.style.height=et(t.height+t.depth),t.depth&&(i.style.verticalAlign=et(-t.depth)),t.children.unshift(i),t}function PD(s,e){var t=null;s.length===1&&s[0].type==="tag"&&(t=s[0].tag,s=s[0].body);var i=Ls(s,e,"root"),n;i.length===2&&i[1].hasClass("tag")&&(n=i.pop());for(var r=[],o=[],a=0;a<i.length;a++)if(o.push(i[a]),i[a].hasClass("mbin")||i[a].hasClass("mrel")||i[a].hasClass("allowbreak")){for(var l=!1;a<i.length-1&&i[a+1].hasClass("mspace")&&!i[a+1].hasClass("newline");)a++,o.push(i[a]),i[a].hasClass("nobreak")&&(l=!0);l||(r.push(Dw(o,e)),o=[])}else i[a].hasClass("newline")&&(o.pop(),o.length>0&&(r.push(Dw(o,e)),o=[]),r.push(i[a]));o.length>0&&r.push(Dw(o,e));var c;t?(c=Dw(Ls(t,e,!0)),c.classes=["tag"],r.push(c)):n&&r.push(n);var u=gu(["katex-html"],r);if(u.setAttribute("aria-hidden","true"),c){var d=c.children[0];d.style.height=et(u.height+u.depth),u.depth&&(d.style.verticalAlign=et(-u.depth))}return u}function mU(s){return new _v(s)}class jo{constructor(e,t,i){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=i||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=zh(this.classes));for(var i=0;i<this.children.length;i++)if(this.children[i]instanceof Wl&&this.children[i+1]instanceof Wl){for(var n=this.children[i].toText()+this.children[++i].toText();this.children[i+1]instanceof Wl;)n+=this.children[++i].toText();e.appendChild(new Wl(n).toNode())}else e.appendChild(this.children[i].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=Tt.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+Tt.escape(zh(this.classes))+'"'),e+=">";for(var i=0;i<this.children.length;i++)e+=this.children[i].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class Wl{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Tt.escape(this.toText())}toText(){return this.text}}class Sbe{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character=" ":e>=.1666&&e<=.1667?this.character=" ":e>=.2222&&e<=.2223?this.character=" ":e>=.2777&&e<=.2778?this.character="  ":e>=-.05556&&e<=-.05555?this.character=" ⁣":e>=-.1667&&e<=-.1666?this.character=" ⁣":e>=-.2223&&e<=-.2222?this.character=" ⁣":e>=-.2778&&e<=-.2777?this.character=" ⁣":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",et(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+et(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Ue={MathNode:jo,TextNode:Wl,SpaceNode:Sbe,newDocumentFragment:mU},ka=function(e,t,i){return hn[t][e]&&hn[t][e].replace&&e.charCodeAt(0)!==55349&&!(lU.hasOwnProperty(e)&&i&&(i.fontFamily&&i.fontFamily.slice(4,6)==="tt"||i.font&&i.font.slice(4,6)==="tt"))&&(e=hn[t][e].replace),new Ue.TextNode(e)},P9=function(e){return e.length===1?e[0]:new Ue.MathNode("mrow",e)},O9=function(e,t){if(t.fontFamily==="texttt")return"monospace";if(t.fontFamily==="textsf")return t.fontShape==="textit"&&t.fontWeight==="textbf"?"sans-serif-bold-italic":t.fontShape==="textit"?"sans-serif-italic":t.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(t.fontShape==="textit"&&t.fontWeight==="textbf")return"bold-italic";if(t.fontShape==="textit")return"italic";if(t.fontWeight==="textbf")return"bold";var i=t.font;if(!i||i==="mathnormal")return null;var n=e.mode;if(i==="mathit")return"italic";if(i==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(i==="mathbf")return"bold";if(i==="mathbb")return"double-struck";if(i==="mathsfit")return"sans-serif-italic";if(i==="mathfrak")return"fraktur";if(i==="mathscr"||i==="mathcal")return"script";if(i==="mathsf")return"sans-serif";if(i==="mathtt")return"monospace";var r=e.text;if(Tt.contains(["\\imath","\\jmath"],r))return null;hn[n][r]&&hn[n][r].replace&&(r=hn[n][r].replace);var o=we.fontMap[i].fontName;return M9(r,o,n)?we.fontMap[i].variant:null};function IL(s){if(!s)return!1;if(s.type==="mi"&&s.children.length===1){var e=s.children[0];return e instanceof Wl&&e.text==="."}else if(s.type==="mo"&&s.children.length===1&&s.getAttribute("separator")==="true"&&s.getAttribute("lspace")==="0em"&&s.getAttribute("rspace")==="0em"){var t=s.children[0];return t instanceof Wl&&t.text===","}else return!1}var ko=function(e,t,i){if(e.length===1){var n=an(e[0],t);return i&&n instanceof jo&&n.type==="mo"&&(n.setAttribute("lspace","0em"),n.setAttribute("rspace","0em")),[n]}for(var r=[],o,a=0;a<e.length;a++){var l=an(e[a],t);if(l instanceof jo&&o instanceof jo){if(l.type==="mtext"&&o.type==="mtext"&&l.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...l.children);continue}else if(l.type==="mn"&&o.type==="mn"){o.children.push(...l.children);continue}else if(IL(l)&&o.type==="mn"){o.children.push(...l.children);continue}else if(l.type==="mn"&&IL(o))l.children=[...o.children,...l.children],r.pop();else if((l.type==="msup"||l.type==="msub")&&l.children.length>=1&&(o.type==="mn"||IL(o))){var c=l.children[0];c instanceof jo&&c.type==="mn"&&(c.children=[...o.children,...c.children],r.pop())}else if(o.type==="mi"&&o.children.length===1){var u=o.children[0];if(u instanceof Wl&&u.text==="̸"&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var d=l.children[0];d instanceof Wl&&d.text.length>0&&(d.text=d.text.slice(0,1)+"̸"+d.text.slice(1),r.pop())}}}r.push(l),o=l}return r},jh=function(e,t,i){return P9(ko(e,t,i))},an=function(e,t){if(!e)return new Ue.MathNode("mrow");if(nS[e.type]){var i=nS[e.type](e,t);return i}else throw new Ke("Got group of unknown type: '"+e.type+"'")};function qF(s,e,t,i,n){var r=ko(s,t),o;r.length===1&&r[0]instanceof jo&&Tt.contains(["mrow","mtable"],r[0].type)?o=r[0]:o=new Ue.MathNode("mrow",r);var a=new Ue.MathNode("annotation",[new Ue.TextNode(e)]);a.setAttribute("encoding","application/x-tex");var l=new Ue.MathNode("semantics",[o,a]),c=new Ue.MathNode("math",[l]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),i&&c.setAttribute("display","block");var u=n?"katex":"katex-mathml";return we.makeSpan([u],[c])}var pU=function(e){return new Oc({style:e.displayMode?Pt.DISPLAY:Pt.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},_U=function(e,t){if(t.displayMode){var i=["katex-display"];t.leqno&&i.push("leqno"),t.fleqn&&i.push("fleqn"),e=we.makeSpan(i,[e])}return e},xbe=function(e,t,i){var n=pU(i),r;if(i.output==="mathml")return qF(e,t,n,i.displayMode,!0);if(i.output==="html"){var o=PD(e,n);r=we.makeSpan(["katex"],[o])}else{var a=qF(e,t,n,i.displayMode,!1),l=PD(e,n);r=we.makeSpan(["katex"],[a,l])}return _U(r,i)},kbe=function(e,t,i){var n=pU(i),r=PD(e,n),o=we.makeSpan(["katex"],[r]);return _U(o,i)},Lbe={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},Dbe=function(e){var t=new Ue.MathNode("mo",[new Ue.TextNode(Lbe[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},Ebe={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Tbe=function(e){return e.type==="ordgroup"?e.body.length:1},Nbe=function(e,t){function i(){var a=4e5,l=e.label.slice(1);if(Tt.contains(["widehat","widecheck","widetilde","utilde"],l)){var c=e,u=Tbe(c.base),d,g,m;if(u>5)l==="widehat"||l==="widecheck"?(d=420,a=2364,m=.42,g=l+"4"):(d=312,a=2340,m=.34,g="tilde4");else{var _=[1,1,2,2,3,3][u];l==="widehat"||l==="widecheck"?(a=[0,1062,2364,2364,2364][_],d=[0,239,300,360,420][_],m=[0,.24,.3,.3,.36,.42][_],g=l+_):(a=[0,600,1033,2339,2340][_],d=[0,260,286,306,312][_],m=[0,.26,.286,.3,.306,.34][_],g="tilde"+_)}var v=new Hh(g),w=new fu([v],{width:"100%",height:et(m),viewBox:"0 0 "+a+" "+d,preserveAspectRatio:"none"});return{span:we.makeSvgSpan([],[w],t),minWidth:0,height:m}}else{var y=[],S=Ebe[l],[k,L,T]=S,A=T/1e3,I=k.length,O,F;if(I===1){var J=S[3];O=["hide-tail"],F=[J]}else if(I===2)O=["halfarrow-left","halfarrow-right"],F=["xMinYMin","xMaxYMin"];else if(I===3)O=["brace-left","brace-center","brace-right"],F=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+I+" children.");for(var Y=0;Y<I;Y++){var G=new Hh(k[Y]),ie=new fu([G],{width:"400em",height:et(A),viewBox:"0 0 "+a+" "+T,preserveAspectRatio:F[Y]+" slice"}),Z=we.makeSvgSpan([O[Y]],[ie],t);if(I===1)return{span:Z,minWidth:L,height:A};Z.style.height=et(A),y.push(Z)}return{span:we.makeSpan(["stretchy"],y,t),minWidth:L,height:A}}}var{span:n,minWidth:r,height:o}=i();return n.height=o,n.style.height=et(o),r>0&&(n.style.minWidth=et(r)),n},Ibe=function(e,t,i,n,r){var o,a=e.height+e.depth+i+n;if(/fbox|color|angl/.test(t)){if(o=we.makeSpan(["stretchy",t],[],r),t==="fbox"){var l=r.color&&r.getColor();l&&(o.style.borderColor=l)}}else{var c=[];/^[bx]cancel$/.test(t)&&c.push(new MD({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&c.push(new MD({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var u=new fu(c,{width:"100%",height:et(a)});o=we.makeSvgSpan([],[u],r)}return o.height=a,o.style.height=et(a),o},mu={encloseSpan:Ibe,mathMLnode:Dbe,svgSpan:Nbe};function oi(s,e){if(!s||s.type!==e)throw new Error("Expected node of type "+e+", but got "+(s?"node of type "+s.type:String(s)));return s}function F9(s){var e=a4(s);if(!e)throw new Error("Expected node of symbol group type, but got "+(s?"node of type "+s.type:String(s)));return e}function a4(s){return s&&(s.type==="atom"||ibe.hasOwnProperty(s.type))?s:null}var B9=(s,e)=>{var t,i,n;s&&s.type==="supsub"?(i=oi(s.base,"accent"),t=i.base,s.base=t,n=ebe(Ai(s,e)),s.base=i):(i=oi(s,"accent"),t=i.base);var r=Ai(t,e.havingCrampedStyle()),o=i.isShifty&&Tt.isCharacterBox(t),a=0;if(o){var l=Tt.getBaseElem(t),c=Ai(l,e.havingCrampedStyle());a=WF(c).skew}var u=i.label==="\\c",d=u?r.height+r.depth:Math.min(r.height,e.fontMetrics().xHeight),g;if(i.isStretchy)g=mu.svgSpan(i,e),g=we.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"elem",elem:g,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+et(2*a)+")",marginLeft:et(2*a)}:void 0}]},e);else{var m,_;i.label==="\\vec"?(m=we.staticSvg("vec",e),_=we.svgData.vec[1]):(m=we.makeOrd({mode:i.mode,text:i.label},e,"textord"),m=WF(m),m.italic=0,_=m.width,u&&(d+=m.depth)),g=we.makeSpan(["accent-body"],[m]);var v=i.label==="\\textcircled";v&&(g.classes.push("accent-full"),d=r.height);var w=a;v||(w-=_/2),g.style.left=et(w),i.label==="\\textcircled"&&(g.style.top=".2em"),g=we.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:-d},{type:"elem",elem:g}]},e)}var y=we.makeSpan(["mord","accent"],[g],e);return n?(n.children[0]=y,n.height=Math.max(y.height,n.height),n.classes[0]="mord",n):y},vU=(s,e)=>{var t=s.isStretchy?mu.mathMLnode(s.label):new Ue.MathNode("mo",[ka(s.label,s.mode)]),i=new Ue.MathNode("mover",[an(s.base,e),t]);return i.setAttribute("accent","true"),i},Mbe=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(s=>"\\"+s).join("|"));ot({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(s,e)=>{var t=sS(e[0]),i=!Mbe.test(s.funcName),n=!i||s.funcName==="\\widehat"||s.funcName==="\\widetilde"||s.funcName==="\\widecheck";return{type:"accent",mode:s.parser.mode,label:s.funcName,isStretchy:i,isShifty:n,base:t}},htmlBuilder:B9,mathmlBuilder:vU});ot({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(s,e)=>{var t=e[0],i=s.parser.mode;return i==="math"&&(s.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+s.funcName+" works only in text mode"),i="text"),{type:"accent",mode:i,label:s.funcName,isStretchy:!1,isShifty:!0,base:t}},htmlBuilder:B9,mathmlBuilder:vU});ot({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(s,e)=>{var{parser:t,funcName:i}=s,n=e[0];return{type:"accentUnder",mode:t.mode,label:i,base:n}},htmlBuilder:(s,e)=>{var t=Ai(s.base,e),i=mu.svgSpan(s,e),n=s.label==="\\utilde"?.12:0,r=we.makeVList({positionType:"top",positionData:t.height,children:[{type:"elem",elem:i,wrapperClasses:["svg-align"]},{type:"kern",size:n},{type:"elem",elem:t}]},e);return we.makeSpan(["mord","accentunder"],[r],e)},mathmlBuilder:(s,e)=>{var t=mu.mathMLnode(s.label),i=new Ue.MathNode("munder",[an(s.base,e),t]);return i.setAttribute("accentunder","true"),i}});var Ew=s=>{var e=new Ue.MathNode("mpadded",s?[s]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};ot({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(s,e,t){var{parser:i,funcName:n}=s;return{type:"xArrow",mode:i.mode,label:n,body:e[0],below:t[0]}},htmlBuilder(s,e){var t=e.style,i=e.havingStyle(t.sup()),n=we.wrapFragment(Ai(s.body,i,e),e),r=s.label.slice(0,2)==="\\x"?"x":"cd";n.classes.push(r+"-arrow-pad");var o;s.below&&(i=e.havingStyle(t.sub()),o=we.wrapFragment(Ai(s.below,i,e),e),o.classes.push(r+"-arrow-pad"));var a=mu.svgSpan(s,e),l=-e.fontMetrics().axisHeight+.5*a.height,c=-e.fontMetrics().axisHeight-.5*a.height-.111;(n.depth>.25||s.label==="\\xleftequilibrium")&&(c-=n.depth);var u;if(o){var d=-e.fontMetrics().axisHeight+o.height+.5*a.height+.111;u=we.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:c},{type:"elem",elem:a,shift:l},{type:"elem",elem:o,shift:d}]},e)}else u=we.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:c},{type:"elem",elem:a,shift:l}]},e);return u.children[0].children[0].children[1].classes.push("svg-align"),we.makeSpan(["mrel","x-arrow"],[u],e)},mathmlBuilder(s,e){var t=mu.mathMLnode(s.label);t.setAttribute("minsize",s.label.charAt(0)==="x"?"1.75em":"3.0em");var i;if(s.body){var n=Ew(an(s.body,e));if(s.below){var r=Ew(an(s.below,e));i=new Ue.MathNode("munderover",[t,r,n])}else i=new Ue.MathNode("mover",[t,n])}else if(s.below){var o=Ew(an(s.below,e));i=new Ue.MathNode("munder",[t,o])}else i=Ew(),i=new Ue.MathNode("mover",[t,i]);return i}});var Rbe=we.makeSpan;function bU(s,e){var t=Ls(s.body,e,!0);return Rbe([s.mclass],t,e)}function wU(s,e){var t,i=ko(s.body,e);return s.mclass==="minner"?t=new Ue.MathNode("mpadded",i):s.mclass==="mord"?s.isCharacterBox?(t=i[0],t.type="mi"):t=new Ue.MathNode("mi",i):(s.isCharacterBox?(t=i[0],t.type="mo"):t=new Ue.MathNode("mo",i),s.mclass==="mbin"?(t.attributes.lspace="0.22em",t.attributes.rspace="0.22em"):s.mclass==="mpunct"?(t.attributes.lspace="0em",t.attributes.rspace="0.17em"):s.mclass==="mopen"||s.mclass==="mclose"?(t.attributes.lspace="0em",t.attributes.rspace="0em"):s.mclass==="minner"&&(t.attributes.lspace="0.0556em",t.attributes.width="+0.1111em")),t}ot({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(s,e){var{parser:t,funcName:i}=s,n=e[0];return{type:"mclass",mode:t.mode,mclass:"m"+i.slice(5),body:Qn(n),isCharacterBox:Tt.isCharacterBox(n)}},htmlBuilder:bU,mathmlBuilder:wU});var l4=s=>{var e=s.type==="ordgroup"&&s.body.length?s.body[0]:s;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};ot({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(s,e){var{parser:t}=s;return{type:"mclass",mode:t.mode,mclass:l4(e[0]),body:Qn(e[1]),isCharacterBox:Tt.isCharacterBox(e[1])}}});ot({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(s,e){var{parser:t,funcName:i}=s,n=e[1],r=e[0],o;i!=="\\stackrel"?o=l4(n):o="mrel";var a={type:"op",mode:n.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:i!=="\\stackrel",body:Qn(n)},l={type:"supsub",mode:r.mode,base:a,sup:i==="\\underset"?null:r,sub:i==="\\underset"?r:null};return{type:"mclass",mode:t.mode,mclass:o,body:[l],isCharacterBox:Tt.isCharacterBox(l)}},htmlBuilder:bU,mathmlBuilder:wU});ot({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(s,e){var{parser:t}=s;return{type:"pmb",mode:t.mode,mclass:l4(e[0]),body:Qn(e[0])}},htmlBuilder(s,e){var t=Ls(s.body,e,!0),i=we.makeSpan([s.mclass],t,e);return i.style.textShadow="0.02em 0.01em 0.04px",i},mathmlBuilder(s,e){var t=ko(s.body,e),i=new Ue.MathNode("mstyle",t);return i.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),i}});var Abe={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},KF=()=>({type:"styling",body:[],mode:"math",style:"display"}),GF=s=>s.type==="textord"&&s.text==="@",Pbe=(s,e)=>(s.type==="mathord"||s.type==="atom")&&s.text===e;function Obe(s,e,t){var i=Abe[s];switch(i){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return t.callFunction(i,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var n=t.callFunction("\\\\cdleft",[e[0]],[]),r={type:"atom",text:i,mode:"math",family:"rel"},o=t.callFunction("\\Big",[r],[]),a=t.callFunction("\\\\cdright",[e[1]],[]),l={type:"ordgroup",mode:"math",body:[n,o,a]};return t.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return t.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var c={type:"textord",text:"\\Vert",mode:"math"};return t.callFunction("\\Big",[c],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Fbe(s){var e=[];for(s.gullet.beginGroup(),s.gullet.macros.set("\\cr","\\\\\\relax"),s.gullet.beginGroup();;){e.push(s.parseExpression(!1,"\\\\")),s.gullet.endGroup(),s.gullet.beginGroup();var t=s.fetch().text;if(t==="&"||t==="\\\\")s.consume();else if(t==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new Ke("Expected \\\\ or \\cr or \\end",s.nextToken)}for(var i=[],n=[i],r=0;r<e.length;r++){for(var o=e[r],a=KF(),l=0;l<o.length;l++)if(!GF(o[l]))a.body.push(o[l]);else{i.push(a),l+=1;var c=F9(o[l]).text,u=new Array(2);if(u[0]={type:"ordgroup",mode:"math",body:[]},u[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(c)>-1))if("<>AV".indexOf(c)>-1)for(var d=0;d<2;d++){for(var g=!0,m=l+1;m<o.length;m++){if(Pbe(o[m],c)){g=!1,l=m;break}if(GF(o[m]))throw new Ke("Missing a "+c+" character to complete a CD arrow.",o[m]);u[d].body.push(o[m])}if(g)throw new Ke("Missing a "+c+" character to complete a CD arrow.",o[l])}else throw new Ke('Expected one of "<>AV=|." after @',o[l]);var _=Obe(c,u,s),v={type:"styling",body:[_],mode:"math",style:"display"};i.push(v),a=KF()}r%2===0?i.push(a):i.shift(),i=[],n.push(i)}s.gullet.endGroup(),s.gullet.endGroup();var w=new Array(n[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:n,arraystretch:1,addJot:!0,rowGaps:[null],cols:w,colSeparationType:"CD",hLinesBeforeRow:new Array(n.length+1).fill([])}}ot({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(s,e){var{parser:t,funcName:i}=s;return{type:"cdlabel",mode:t.mode,side:i.slice(4),label:e[0]}},htmlBuilder(s,e){var t=e.havingStyle(e.style.sup()),i=we.wrapFragment(Ai(s.label,t,e),e);return i.classes.push("cd-label-"+s.side),i.style.bottom=et(.8-i.depth),i.height=0,i.depth=0,i},mathmlBuilder(s,e){var t=new Ue.MathNode("mrow",[an(s.label,e)]);return t=new Ue.MathNode("mpadded",[t]),t.setAttribute("width","0"),s.side==="left"&&t.setAttribute("lspace","-1width"),t.setAttribute("voffset","0.7em"),t=new Ue.MathNode("mstyle",[t]),t.setAttribute("displaystyle","false"),t.setAttribute("scriptlevel","1"),t}});ot({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(s,e){var{parser:t}=s;return{type:"cdlabelparent",mode:t.mode,fragment:e[0]}},htmlBuilder(s,e){var t=we.wrapFragment(Ai(s.fragment,e),e);return t.classes.push("cd-vert-arrow"),t},mathmlBuilder(s,e){return new Ue.MathNode("mrow",[an(s.fragment,e)])}});ot({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(s,e){for(var{parser:t}=s,i=oi(e[0],"ordgroup"),n=i.body,r="",o=0;o<n.length;o++){var a=oi(n[o],"textord");r+=a.text}var l=parseInt(r),c;if(isNaN(l))throw new Ke("\\@char has non-numeric argument "+r);if(l<0||l>=1114111)throw new Ke("\\@char with invalid code point "+r);return l<=65535?c=String.fromCharCode(l):(l-=65536,c=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:t.mode,text:c}}});var CU=(s,e)=>{var t=Ls(s.body,e.withColor(s.color),!1);return we.makeFragment(t)},yU=(s,e)=>{var t=ko(s.body,e.withColor(s.color)),i=new Ue.MathNode("mstyle",t);return i.setAttribute("mathcolor",s.color),i};ot({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(s,e){var{parser:t}=s,i=oi(e[0],"color-token").color,n=e[1];return{type:"color",mode:t.mode,color:i,body:Qn(n)}},htmlBuilder:CU,mathmlBuilder:yU});ot({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(s,e){var{parser:t,breakOnTokenText:i}=s,n=oi(e[0],"color-token").color;t.gullet.macros.set("\\current@color",n);var r=t.parseExpression(!0,i);return{type:"color",mode:t.mode,color:n,body:r}},htmlBuilder:CU,mathmlBuilder:yU});ot({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(s,e,t){var{parser:i}=s,n=i.gullet.future().text==="["?i.parseSizeGroup(!0):null,r=!i.settings.displayMode||!i.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:i.mode,newLine:r,size:n&&oi(n,"size").value}},htmlBuilder(s,e){var t=we.makeSpan(["mspace"],[],e);return s.newLine&&(t.classes.push("newline"),s.size&&(t.style.marginTop=et(Nn(s.size,e)))),t},mathmlBuilder(s,e){var t=new Ue.MathNode("mspace");return s.newLine&&(t.setAttribute("linebreak","newline"),s.size&&t.setAttribute("height",et(Nn(s.size,e)))),t}});var OD={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},SU=s=>{var e=s.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new Ke("Expected a control sequence",s);return e},Bbe=s=>{var e=s.gullet.popToken();return e.text==="="&&(e=s.gullet.popToken(),e.text===" "&&(e=s.gullet.popToken())),e},xU=(s,e,t,i)=>{var n=s.gullet.macros.get(t.text);n==null&&(t.noexpand=!0,n={tokens:[t],numArgs:0,unexpandable:!s.gullet.isExpandable(t.text)}),s.gullet.macros.set(e,n,i)};ot({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(s){var{parser:e,funcName:t}=s;e.consumeSpaces();var i=e.fetch();if(OD[i.text])return(t==="\\global"||t==="\\\\globallong")&&(i.text=OD[i.text]),oi(e.parseFunction(),"internal");throw new Ke("Invalid token after macro prefix",i)}});ot({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(s){var{parser:e,funcName:t}=s,i=e.gullet.popToken(),n=i.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(n))throw new Ke("Expected a control sequence",i);for(var r=0,o,a=[[]];e.gullet.future().text!=="{";)if(i=e.gullet.popToken(),i.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),a[r].push("{");break}if(i=e.gullet.popToken(),!/^[1-9]$/.test(i.text))throw new Ke('Invalid argument number "'+i.text+'"');if(parseInt(i.text)!==r+1)throw new Ke('Argument number "'+i.text+'" out of order');r++,a.push([])}else{if(i.text==="EOF")throw new Ke("Expected a macro definition");a[r].push(i.text)}var{tokens:l}=e.gullet.consumeArg();return o&&l.unshift(o),(t==="\\edef"||t==="\\xdef")&&(l=e.gullet.expandTokens(l),l.reverse()),e.gullet.macros.set(n,{tokens:l,numArgs:r,delimiters:a},t===OD[t]),{type:"internal",mode:e.mode}}});ot({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(s){var{parser:e,funcName:t}=s,i=SU(e.gullet.popToken());e.gullet.consumeSpaces();var n=Bbe(e);return xU(e,i,n,t==="\\\\globallet"),{type:"internal",mode:e.mode}}});ot({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(s){var{parser:e,funcName:t}=s,i=SU(e.gullet.popToken()),n=e.gullet.popToken(),r=e.gullet.popToken();return xU(e,i,r,t==="\\\\globalfuture"),e.gullet.pushToken(r),e.gullet.pushToken(n),{type:"internal",mode:e.mode}}});var J0=function(e,t,i){var n=hn.math[e]&&hn.math[e].replace,r=M9(n||e,t,i);if(!r)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return r},W9=function(e,t,i,n){var r=i.havingBaseStyle(t),o=we.makeSpan(n.concat(r.sizingClasses(i)),[e],i),a=r.sizeMultiplier/i.sizeMultiplier;return o.height*=a,o.depth*=a,o.maxFontSize=r.sizeMultiplier,o},kU=function(e,t,i){var n=t.havingBaseStyle(i),r=(1-t.sizeMultiplier/n.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=et(r),e.height-=r,e.depth+=r},Wbe=function(e,t,i,n,r,o){var a=we.makeSymbol(e,"Main-Regular",r,n),l=W9(a,t,n,o);return i&&kU(l,n,t),l},Vbe=function(e,t,i,n){return we.makeSymbol(e,"Size"+t+"-Regular",i,n)},LU=function(e,t,i,n,r,o){var a=Vbe(e,t,r,n),l=W9(we.makeSpan(["delimsizing","size"+t],[a],n),Pt.TEXT,n,o);return i&&kU(l,n,Pt.TEXT),l},ML=function(e,t,i){var n;t==="Size1-Regular"?n="delim-size1":n="delim-size4";var r=we.makeSpan(["delimsizinginner",n],[we.makeSpan([],[we.makeSymbol(e,t,i)])]);return{type:"elem",elem:r}},RL=function(e,t,i){var n=Bl["Size4-Regular"][e.charCodeAt(0)]?Bl["Size4-Regular"][e.charCodeAt(0)][4]:Bl["Size1-Regular"][e.charCodeAt(0)][4],r=new Hh("inner",$ve(e,Math.round(1e3*t))),o=new fu([r],{width:et(n),height:et(t),style:"width:"+et(n),viewBox:"0 0 "+1e3*n+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),a=we.makeSvgSpan([],[o],i);return a.height=t,a.style.height=et(t),a.style.width=et(n),{type:"elem",elem:a}},FD=.008,Tw={type:"kern",size:-1*FD},zbe=["|","\\lvert","\\rvert","\\vert"],Hbe=["\\|","\\lVert","\\rVert","\\Vert"],DU=function(e,t,i,n,r,o){var a,l,c,u,d="",g=0;a=c=u=e,l=null;var m="Size1-Regular";e==="\\uparrow"?c=u="⏐":e==="\\Uparrow"?c=u="‖":e==="\\downarrow"?a=c="⏐":e==="\\Downarrow"?a=c="‖":e==="\\updownarrow"?(a="\\uparrow",c="⏐",u="\\downarrow"):e==="\\Updownarrow"?(a="\\Uparrow",c="‖",u="\\Downarrow"):Tt.contains(zbe,e)?(c="∣",d="vert",g=333):Tt.contains(Hbe,e)?(c="∥",d="doublevert",g=556):e==="["||e==="\\lbrack"?(a="⎡",c="⎢",u="⎣",m="Size4-Regular",d="lbrack",g=667):e==="]"||e==="\\rbrack"?(a="⎤",c="⎥",u="⎦",m="Size4-Regular",d="rbrack",g=667):e==="\\lfloor"||e==="⌊"?(c=a="⎢",u="⎣",m="Size4-Regular",d="lfloor",g=667):e==="\\lceil"||e==="⌈"?(a="⎡",c=u="⎢",m="Size4-Regular",d="lceil",g=667):e==="\\rfloor"||e==="⌋"?(c=a="⎥",u="⎦",m="Size4-Regular",d="rfloor",g=667):e==="\\rceil"||e==="⌉"?(a="⎤",c=u="⎥",m="Size4-Regular",d="rceil",g=667):e==="("||e==="\\lparen"?(a="⎛",c="⎜",u="⎝",m="Size4-Regular",d="lparen",g=875):e===")"||e==="\\rparen"?(a="⎞",c="⎟",u="⎠",m="Size4-Regular",d="rparen",g=875):e==="\\{"||e==="\\lbrace"?(a="⎧",l="⎨",u="⎩",c="⎪",m="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(a="⎫",l="⎬",u="⎭",c="⎪",m="Size4-Regular"):e==="\\lgroup"||e==="⟮"?(a="⎧",u="⎩",c="⎪",m="Size4-Regular"):e==="\\rgroup"||e==="⟯"?(a="⎫",u="⎭",c="⎪",m="Size4-Regular"):e==="\\lmoustache"||e==="⎰"?(a="⎧",u="⎭",c="⎪",m="Size4-Regular"):(e==="\\rmoustache"||e==="⎱")&&(a="⎫",u="⎩",c="⎪",m="Size4-Regular");var _=J0(a,m,r),v=_.height+_.depth,w=J0(c,m,r),y=w.height+w.depth,S=J0(u,m,r),k=S.height+S.depth,L=0,T=1;if(l!==null){var A=J0(l,m,r);L=A.height+A.depth,T=2}var I=v+k+L,O=Math.max(0,Math.ceil((t-I)/(T*y))),F=I+O*T*y,J=n.fontMetrics().axisHeight;i&&(J*=n.sizeMultiplier);var Y=F/2-J,G=[];if(d.length>0){var ie=F-v-k,Z=Math.round(F*1e3),ue=qve(d,Math.round(ie*1e3)),be=new Hh(d,ue),ye=(g/1e3).toFixed(3)+"em",ae=(Z/1e3).toFixed(3)+"em",xe=new fu([be],{width:ye,height:ae,viewBox:"0 0 "+g+" "+Z}),fe=we.makeSvgSpan([],[xe],n);fe.height=Z/1e3,fe.style.width=ye,fe.style.height=ae,G.push({type:"elem",elem:fe})}else{if(G.push(ML(u,m,r)),G.push(Tw),l===null){var X=F-v-k+2*FD;G.push(RL(c,X,n))}else{var me=(F-v-k-L)/2+2*FD;G.push(RL(c,me,n)),G.push(Tw),G.push(ML(l,m,r)),G.push(Tw),G.push(RL(c,me,n))}G.push(Tw),G.push(ML(a,m,r))}var ze=n.havingBaseStyle(Pt.TEXT),it=we.makeVList({positionType:"bottom",positionData:Y,children:G},ze);return W9(we.makeSpan(["delimsizing","mult"],[it],ze),Pt.TEXT,n,o)},AL=80,PL=.08,OL=function(e,t,i,n,r){var o=Uve(e,n,i),a=new Hh(e,o),l=new fu([a],{width:"400em",height:et(t),viewBox:"0 0 400000 "+i,preserveAspectRatio:"xMinYMin slice"});return we.makeSvgSpan(["hide-tail"],[l],r)},jbe=function(e,t){var i=t.havingBaseSizing(),n=IU("\\surd",e*i.sizeMultiplier,NU,i),r=i.sizeMultiplier,o=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),a,l=0,c=0,u=0,d;return n.type==="small"?(u=1e3+1e3*o+AL,e<1?r=1:e<1.4&&(r=.7),l=(1+o+PL)/r,c=(1+o)/r,a=OL("sqrtMain",l,u,o,t),a.style.minWidth="0.853em",d=.833/r):n.type==="large"?(u=(1e3+AL)*M1[n.size],c=(M1[n.size]+o)/r,l=(M1[n.size]+o+PL)/r,a=OL("sqrtSize"+n.size,l,u,o,t),a.style.minWidth="1.02em",d=1/r):(l=e+o+PL,c=e+o,u=Math.floor(1e3*e+o)+AL,a=OL("sqrtTall",l,u,o,t),a.style.minWidth="0.742em",d=1.056),a.height=c,a.style.height=et(l),{span:a,advanceWidth:d,ruleWidth:(t.fontMetrics().sqrtRuleThickness+o)*r}},EU=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],Ube=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],TU=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],M1=[0,1.2,1.8,2.4,3],$be=function(e,t,i,n,r){if(e==="<"||e==="\\lt"||e==="⟨"?e="\\langle":(e===">"||e==="\\gt"||e==="⟩")&&(e="\\rangle"),Tt.contains(EU,e)||Tt.contains(TU,e))return LU(e,t,!1,i,n,r);if(Tt.contains(Ube,e))return DU(e,M1[t],!1,i,n,r);throw new Ke("Illegal delimiter: '"+e+"'")},qbe=[{type:"small",style:Pt.SCRIPTSCRIPT},{type:"small",style:Pt.SCRIPT},{type:"small",style:Pt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Kbe=[{type:"small",style:Pt.SCRIPTSCRIPT},{type:"small",style:Pt.SCRIPT},{type:"small",style:Pt.TEXT},{type:"stack"}],NU=[{type:"small",style:Pt.SCRIPTSCRIPT},{type:"small",style:Pt.SCRIPT},{type:"small",style:Pt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Gbe=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},IU=function(e,t,i,n){for(var r=Math.min(2,3-n.style.size),o=r;o<i.length&&i[o].type!=="stack";o++){var a=J0(e,Gbe(i[o]),"math"),l=a.height+a.depth;if(i[o].type==="small"){var c=n.havingBaseStyle(i[o].style);l*=c.sizeMultiplier}if(l>t)return i[o]}return i[i.length-1]},MU=function(e,t,i,n,r,o){e==="<"||e==="\\lt"||e==="⟨"?e="\\langle":(e===">"||e==="\\gt"||e==="⟩")&&(e="\\rangle");var a;Tt.contains(TU,e)?a=qbe:Tt.contains(EU,e)?a=NU:a=Kbe;var l=IU(e,t,a,n);return l.type==="small"?Wbe(e,l.style,i,n,r,o):l.type==="large"?LU(e,l.size,i,n,r,o):DU(e,t,i,n,r,o)},Zbe=function(e,t,i,n,r,o){var a=n.fontMetrics().axisHeight*n.sizeMultiplier,l=901,c=5/n.fontMetrics().ptPerEm,u=Math.max(t-a,i+a),d=Math.max(u/500*l,2*u-c);return MU(e,d,!0,n,r,o)},lu={sqrtImage:jbe,sizedDelim:$be,sizeToMaxHeight:M1,customSizedDelim:MU,leftRightDelim:Zbe},ZF={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Ybe=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function c4(s,e){var t=a4(s);if(t&&Tt.contains(Ybe,t.text))return t;throw t?new Ke("Invalid delimiter '"+t.text+"' after '"+e.funcName+"'",s):new Ke("Invalid delimiter type '"+s.type+"'",s)}ot({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(s,e)=>{var t=c4(e[0],s);return{type:"delimsizing",mode:s.parser.mode,size:ZF[s.funcName].size,mclass:ZF[s.funcName].mclass,delim:t.text}},htmlBuilder:(s,e)=>s.delim==="."?we.makeSpan([s.mclass]):lu.sizedDelim(s.delim,s.size,e,s.mode,[s.mclass]),mathmlBuilder:s=>{var e=[];s.delim!=="."&&e.push(ka(s.delim,s.mode));var t=new Ue.MathNode("mo",e);s.mclass==="mopen"||s.mclass==="mclose"?t.setAttribute("fence","true"):t.setAttribute("fence","false"),t.setAttribute("stretchy","true");var i=et(lu.sizeToMaxHeight[s.size]);return t.setAttribute("minsize",i),t.setAttribute("maxsize",i),t}});function YF(s){if(!s.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}ot({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(s,e)=>{var t=s.parser.gullet.macros.get("\\current@color");if(t&&typeof t!="string")throw new Ke("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:s.parser.mode,delim:c4(e[0],s).text,color:t}}});ot({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(s,e)=>{var t=c4(e[0],s),i=s.parser;++i.leftrightDepth;var n=i.parseExpression(!1);--i.leftrightDepth,i.expect("\\right",!1);var r=oi(i.parseFunction(),"leftright-right");return{type:"leftright",mode:i.mode,body:n,left:t.text,right:r.delim,rightColor:r.color}},htmlBuilder:(s,e)=>{YF(s);for(var t=Ls(s.body,e,!0,["mopen","mclose"]),i=0,n=0,r=!1,o=0;o<t.length;o++)t[o].isMiddle?r=!0:(i=Math.max(t[o].height,i),n=Math.max(t[o].depth,n));i*=e.sizeMultiplier,n*=e.sizeMultiplier;var a;if(s.left==="."?a=z_(e,["mopen"]):a=lu.leftRightDelim(s.left,i,n,e,s.mode,["mopen"]),t.unshift(a),r)for(var l=1;l<t.length;l++){var c=t[l],u=c.isMiddle;u&&(t[l]=lu.leftRightDelim(u.delim,i,n,u.options,s.mode,[]))}var d;if(s.right===".")d=z_(e,["mclose"]);else{var g=s.rightColor?e.withColor(s.rightColor):e;d=lu.leftRightDelim(s.right,i,n,g,s.mode,["mclose"])}return t.push(d),we.makeSpan(["minner"],t,e)},mathmlBuilder:(s,e)=>{YF(s);var t=ko(s.body,e);if(s.left!=="."){var i=new Ue.MathNode("mo",[ka(s.left,s.mode)]);i.setAttribute("fence","true"),t.unshift(i)}if(s.right!=="."){var n=new Ue.MathNode("mo",[ka(s.right,s.mode)]);n.setAttribute("fence","true"),s.rightColor&&n.setAttribute("mathcolor",s.rightColor),t.push(n)}return P9(t)}});ot({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(s,e)=>{var t=c4(e[0],s);if(!s.parser.leftrightDepth)throw new Ke("\\middle without preceding \\left",t);return{type:"middle",mode:s.parser.mode,delim:t.text}},htmlBuilder:(s,e)=>{var t;if(s.delim===".")t=z_(e,[]);else{t=lu.sizedDelim(s.delim,1,e,s.mode,[]);var i={delim:s.delim,options:e};t.isMiddle=i}return t},mathmlBuilder:(s,e)=>{var t=s.delim==="\\vert"||s.delim==="|"?ka("|","text"):ka(s.delim,s.mode),i=new Ue.MathNode("mo",[t]);return i.setAttribute("fence","true"),i.setAttribute("lspace","0.05em"),i.setAttribute("rspace","0.05em"),i}});var V9=(s,e)=>{var t=we.wrapFragment(Ai(s.body,e),e),i=s.label.slice(1),n=e.sizeMultiplier,r,o=0,a=Tt.isCharacterBox(s.body);if(i==="sout")r=we.makeSpan(["stretchy","sout"]),r.height=e.fontMetrics().defaultRuleThickness/n,o=-.5*e.fontMetrics().xHeight;else if(i==="phase"){var l=Nn({number:.6,unit:"pt"},e),c=Nn({number:.35,unit:"ex"},e),u=e.havingBaseSizing();n=n/u.sizeMultiplier;var d=t.height+t.depth+l+c;t.style.paddingLeft=et(d/2+l);var g=Math.floor(1e3*d*n),m=Hve(g),_=new fu([new Hh("phase",m)],{width:"400em",height:et(g/1e3),viewBox:"0 0 400000 "+g,preserveAspectRatio:"xMinYMin slice"});r=we.makeSvgSpan(["hide-tail"],[_],e),r.style.height=et(d),o=t.depth+l+c}else{/cancel/.test(i)?a||t.classes.push("cancel-pad"):i==="angl"?t.classes.push("anglpad"):t.classes.push("boxpad");var v=0,w=0,y=0;/box/.test(i)?(y=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),v=e.fontMetrics().fboxsep+(i==="colorbox"?0:y),w=v):i==="angl"?(y=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),v=4*y,w=Math.max(0,.25-t.depth)):(v=a?.2:0,w=v),r=mu.encloseSpan(t,i,v,w,e),/fbox|boxed|fcolorbox/.test(i)?(r.style.borderStyle="solid",r.style.borderWidth=et(y)):i==="angl"&&y!==.049&&(r.style.borderTopWidth=et(y),r.style.borderRightWidth=et(y)),o=t.depth+w,s.backgroundColor&&(r.style.backgroundColor=s.backgroundColor,s.borderColor&&(r.style.borderColor=s.borderColor))}var S;if(s.backgroundColor)S=we.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:o},{type:"elem",elem:t,shift:0}]},e);else{var k=/cancel|phase/.test(i)?["svg-align"]:[];S=we.makeVList({positionType:"individualShift",children:[{type:"elem",elem:t,shift:0},{type:"elem",elem:r,shift:o,wrapperClasses:k}]},e)}return/cancel/.test(i)&&(S.height=t.height,S.depth=t.depth),/cancel/.test(i)&&!a?we.makeSpan(["mord","cancel-lap"],[S],e):we.makeSpan(["mord"],[S],e)},z9=(s,e)=>{var t=0,i=new Ue.MathNode(s.label.indexOf("colorbox")>-1?"mpadded":"menclose",[an(s.body,e)]);switch(s.label){case"\\cancel":i.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":i.setAttribute("notation","downdiagonalstrike");break;case"\\phase":i.setAttribute("notation","phasorangle");break;case"\\sout":i.setAttribute("notation","horizontalstrike");break;case"\\fbox":i.setAttribute("notation","box");break;case"\\angl":i.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(t=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,i.setAttribute("width","+"+2*t+"pt"),i.setAttribute("height","+"+2*t+"pt"),i.setAttribute("lspace",t+"pt"),i.setAttribute("voffset",t+"pt"),s.label==="\\fcolorbox"){var n=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);i.setAttribute("style","border: "+n+"em solid "+String(s.borderColor))}break;case"\\xcancel":i.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return s.backgroundColor&&i.setAttribute("mathbackground",s.backgroundColor),i};ot({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(s,e,t){var{parser:i,funcName:n}=s,r=oi(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:i.mode,label:n,backgroundColor:r,body:o}},htmlBuilder:V9,mathmlBuilder:z9});ot({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(s,e,t){var{parser:i,funcName:n}=s,r=oi(e[0],"color-token").color,o=oi(e[1],"color-token").color,a=e[2];return{type:"enclose",mode:i.mode,label:n,backgroundColor:o,borderColor:r,body:a}},htmlBuilder:V9,mathmlBuilder:z9});ot({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(s,e){var{parser:t}=s;return{type:"enclose",mode:t.mode,label:"\\fbox",body:e[0]}}});ot({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(s,e){var{parser:t,funcName:i}=s,n=e[0];return{type:"enclose",mode:t.mode,label:i,body:n}},htmlBuilder:V9,mathmlBuilder:z9});ot({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(s,e){var{parser:t}=s;return{type:"enclose",mode:t.mode,label:"\\angl",body:e[0]}}});var RU={};function ec(s){for(var{type:e,names:t,props:i,handler:n,htmlBuilder:r,mathmlBuilder:o}=s,a={type:e,numArgs:i.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:n},l=0;l<t.length;++l)RU[t[l]]=a;r&&(iS[e]=r),o&&(nS[e]=o)}var AU={};function j(s,e){AU[s]=e}function XF(s){var e=[];s.consumeSpaces();var t=s.fetch().text;for(t==="\\relax"&&(s.consume(),s.consumeSpaces(),t=s.fetch().text);t==="\\hline"||t==="\\hdashline";)s.consume(),e.push(t==="\\hdashline"),s.consumeSpaces(),t=s.fetch().text;return e}var u4=s=>{var e=s.parser.settings;if(!e.displayMode)throw new Ke("{"+s.envName+"} can be used only in display mode.")};function H9(s){if(s.indexOf("ed")===-1)return s.indexOf("*")===-1}function Yh(s,e,t){var{hskipBeforeAndAfter:i,addJot:n,cols:r,arraystretch:o,colSeparationType:a,autoTag:l,singleRow:c,emptySingleRow:u,maxNumCols:d,leqno:g}=e;if(s.gullet.beginGroup(),c||s.gullet.macros.set("\\cr","\\\\\\relax"),!o){var m=s.gullet.expandMacroAsText("\\arraystretch");if(m==null)o=1;else if(o=parseFloat(m),!o||o<0)throw new Ke("Invalid \\arraystretch: "+m)}s.gullet.beginGroup();var _=[],v=[_],w=[],y=[],S=l!=null?[]:void 0;function k(){l&&s.gullet.macros.set("\\@eqnsw","1",!0)}function L(){S&&(s.gullet.macros.get("\\df@tag")?(S.push(s.subparse([new _a("\\df@tag")])),s.gullet.macros.set("\\df@tag",void 0,!0)):S.push(!!l&&s.gullet.macros.get("\\@eqnsw")==="1"))}for(k(),y.push(XF(s));;){var T=s.parseExpression(!1,c?"\\end":"\\\\");s.gullet.endGroup(),s.gullet.beginGroup(),T={type:"ordgroup",mode:s.mode,body:T},t&&(T={type:"styling",mode:s.mode,style:t,body:[T]}),_.push(T);var A=s.fetch().text;if(A==="&"){if(d&&_.length===d){if(c||a)throw new Ke("Too many tab characters: &",s.nextToken);s.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}s.consume()}else if(A==="\\end"){L(),_.length===1&&T.type==="styling"&&T.body[0].body.length===0&&(v.length>1||!u)&&v.pop(),y.length<v.length+1&&y.push([]);break}else if(A==="\\\\"){s.consume();var I=void 0;s.gullet.future().text!==" "&&(I=s.parseSizeGroup(!0)),w.push(I?I.value:null),L(),y.push(XF(s)),_=[],v.push(_),k()}else throw new Ke("Expected & or \\\\ or \\cr or \\end",s.nextToken)}return s.gullet.endGroup(),s.gullet.endGroup(),{type:"array",mode:s.mode,addJot:n,arraystretch:o,body:v,cols:r,rowGaps:w,hskipBeforeAndAfter:i,hLinesBeforeRow:y,colSeparationType:a,tags:S,leqno:g}}function j9(s){return s.slice(0,1)==="d"?"display":"text"}var tc=function(e,t){var i,n,r=e.body.length,o=e.hLinesBeforeRow,a=0,l=new Array(r),c=[],u=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),d=1/t.fontMetrics().ptPerEm,g=5*d;if(e.colSeparationType&&e.colSeparationType==="small"){var m=t.havingStyle(Pt.SCRIPT).sizeMultiplier;g=.2778*(m/t.sizeMultiplier)}var _=e.colSeparationType==="CD"?Nn({number:3,unit:"ex"},t):12*d,v=3*d,w=e.arraystretch*_,y=.7*w,S=.3*w,k=0;function L(cr){for(var Ts=0;Ts<cr.length;++Ts)Ts>0&&(k+=.25),c.push({pos:k,isDashed:cr[Ts]})}for(L(o[0]),i=0;i<e.body.length;++i){var T=e.body[i],A=y,I=S;a<T.length&&(a=T.length);var O=new Array(T.length);for(n=0;n<T.length;++n){var F=Ai(T[n],t);I<F.depth&&(I=F.depth),A<F.height&&(A=F.height),O[n]=F}var J=e.rowGaps[i],Y=0;J&&(Y=Nn(J,t),Y>0&&(Y+=S,I<Y&&(I=Y),Y=0)),e.addJot&&(I+=v),O.height=A,O.depth=I,k+=A,O.pos=k,k+=I+Y,l[i]=O,L(o[i+1])}var G=k/2+t.fontMetrics().axisHeight,ie=e.cols||[],Z=[],ue,be,ye=[];if(e.tags&&e.tags.some(cr=>cr))for(i=0;i<r;++i){var ae=l[i],xe=ae.pos-G,fe=e.tags[i],X=void 0;fe===!0?X=we.makeSpan(["eqn-num"],[],t):fe===!1?X=we.makeSpan([],[],t):X=we.makeSpan([],Ls(fe,t,!0),t),X.depth=ae.depth,X.height=ae.height,ye.push({type:"elem",elem:X,shift:xe})}for(n=0,be=0;n<a||be<ie.length;++n,++be){for(var me=ie[be]||{},ze=!0;me.type==="separator";){if(ze||(ue=we.makeSpan(["arraycolsep"],[]),ue.style.width=et(t.fontMetrics().doubleRuleSep),Z.push(ue)),me.separator==="|"||me.separator===":"){var it=me.separator==="|"?"solid":"dashed",He=we.makeSpan(["vertical-separator"],[],t);He.style.height=et(k),He.style.borderRightWidth=et(u),He.style.borderRightStyle=it,He.style.margin="0 "+et(-u/2);var st=k-G;st&&(He.style.verticalAlign=et(-st)),Z.push(He)}else throw new Ke("Invalid separator type: "+me.separator);be++,me=ie[be]||{},ze=!1}if(!(n>=a)){var gt=void 0;(n>0||e.hskipBeforeAndAfter)&&(gt=Tt.deflt(me.pregap,g),gt!==0&&(ue=we.makeSpan(["arraycolsep"],[]),ue.style.width=et(gt),Z.push(ue)));var St=[];for(i=0;i<r;++i){var Lt=l[i],ci=Lt[n];if(ci){var qs=Lt.pos-G;ci.depth=Lt.depth,ci.height=Lt.height,St.push({type:"elem",elem:ci,shift:qs})}}St=we.makeVList({positionType:"individualShift",children:St},t),St=we.makeSpan(["col-align-"+(me.align||"c")],[St]),Z.push(St),(n<a-1||e.hskipBeforeAndAfter)&&(gt=Tt.deflt(me.postgap,g),gt!==0&&(ue=we.makeSpan(["arraycolsep"],[]),ue.style.width=et(gt),Z.push(ue)))}}if(l=we.makeSpan(["mtable"],Z),c.length>0){for(var Wi=we.makeLineSpan("hline",t,u),Sn=we.makeLineSpan("hdashline",t,u),dn=[{type:"elem",elem:l,shift:0}];c.length>0;){var Er=c.pop(),Pn=Er.pos-G;Er.isDashed?dn.push({type:"elem",elem:Sn,shift:Pn}):dn.push({type:"elem",elem:Wi,shift:Pn})}l=we.makeVList({positionType:"individualShift",children:dn},t)}if(ye.length===0)return we.makeSpan(["mord"],[l],t);var Es=we.makeVList({positionType:"individualShift",children:ye},t);return Es=we.makeSpan(["tag"],[Es],t),we.makeFragment([l,Es])},Xbe={c:"center ",l:"left ",r:"right "},ic=function(e,t){for(var i=[],n=new Ue.MathNode("mtd",[],["mtr-glue"]),r=new Ue.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var a=e.body[o],l=[],c=0;c<a.length;c++)l.push(new Ue.MathNode("mtd",[an(a[c],t)]));e.tags&&e.tags[o]&&(l.unshift(n),l.push(n),e.leqno?l.unshift(r):l.push(r)),i.push(new Ue.MathNode("mtr",l))}var u=new Ue.MathNode("mtable",i),d=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);u.setAttribute("rowspacing",et(d));var g="",m="";if(e.cols&&e.cols.length>0){var _=e.cols,v="",w=!1,y=0,S=_.length;_[0].type==="separator"&&(g+="top ",y=1),_[_.length-1].type==="separator"&&(g+="bottom ",S-=1);for(var k=y;k<S;k++)_[k].type==="align"?(m+=Xbe[_[k].align],w&&(v+="none "),w=!0):_[k].type==="separator"&&w&&(v+=_[k].separator==="|"?"solid ":"dashed ",w=!1);u.setAttribute("columnalign",m.trim()),/[sd]/.test(v)&&u.setAttribute("columnlines",v.trim())}if(e.colSeparationType==="align"){for(var L=e.cols||[],T="",A=1;A<L.length;A++)T+=A%2?"0em ":"1em ";u.setAttribute("columnspacing",T.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?u.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?u.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?u.setAttribute("columnspacing","0.5em"):u.setAttribute("columnspacing","1em");var I="",O=e.hLinesBeforeRow;g+=O[0].length>0?"left ":"",g+=O[O.length-1].length>0?"right ":"";for(var F=1;F<O.length-1;F++)I+=O[F].length===0?"none ":O[F][0]?"dashed ":"solid ";return/[sd]/.test(I)&&u.setAttribute("rowlines",I.trim()),g!==""&&(u=new Ue.MathNode("menclose",[u]),u.setAttribute("notation",g.trim())),e.arraystretch&&e.arraystretch<1&&(u=new Ue.MathNode("mstyle",[u]),u.setAttribute("scriptlevel","1")),u},PU=function(e,t){e.envName.indexOf("ed")===-1&&u4(e);var i=[],n=e.envName.indexOf("at")>-1?"alignat":"align",r=e.envName==="split",o=Yh(e.parser,{cols:i,addJot:!0,autoTag:r?void 0:H9(e.envName),emptySingleRow:!0,colSeparationType:n,maxNumCols:r?2:void 0,leqno:e.parser.settings.leqno},"display"),a,l=0,c={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&t[0].type==="ordgroup"){for(var u="",d=0;d<t[0].body.length;d++){var g=oi(t[0].body[d],"textord");u+=g.text}a=Number(u),l=a*2}var m=!l;o.body.forEach(function(y){for(var S=1;S<y.length;S+=2){var k=oi(y[S],"styling"),L=oi(k.body[0],"ordgroup");L.body.unshift(c)}if(m)l<y.length&&(l=y.length);else{var T=y.length/2;if(a<T)throw new Ke("Too many math in a row: "+("expected "+a+", but got "+T),y[0])}});for(var _=0;_<l;++_){var v="r",w=0;_%2===1?v="l":_>0&&m&&(w=1),i[_]={type:"align",align:v,pregap:w,postgap:0}}return o.colSeparationType=m?"align":"alignat",o};ec({type:"array",names:["array","darray"],props:{numArgs:1},handler(s,e){var t=a4(e[0]),i=t?[e[0]]:oi(e[0],"ordgroup").body,n=i.map(function(o){var a=F9(o),l=a.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new Ke("Unknown column alignment: "+l,o)}),r={cols:n,hskipBeforeAndAfter:!0,maxNumCols:n.length};return Yh(s.parser,r,j9(s.envName))},htmlBuilder:tc,mathmlBuilder:ic});ec({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(s){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[s.envName.replace("*","")],t="c",i={hskipBeforeAndAfter:!1,cols:[{type:"align",align:t}]};if(s.envName.charAt(s.envName.length-1)==="*"){var n=s.parser;if(n.consumeSpaces(),n.fetch().text==="["){if(n.consume(),n.consumeSpaces(),t=n.fetch().text,"lcr".indexOf(t)===-1)throw new Ke("Expected l or c or r",n.nextToken);n.consume(),n.consumeSpaces(),n.expect("]"),n.consume(),i.cols=[{type:"align",align:t}]}}var r=Yh(s.parser,i,j9(s.envName)),o=Math.max(0,...r.body.map(a=>a.length));return r.cols=new Array(o).fill({type:"align",align:t}),e?{type:"leftright",mode:s.mode,body:[r],left:e[0],right:e[1],rightColor:void 0}:r},htmlBuilder:tc,mathmlBuilder:ic});ec({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(s){var e={arraystretch:.5},t=Yh(s.parser,e,"script");return t.colSeparationType="small",t},htmlBuilder:tc,mathmlBuilder:ic});ec({type:"array",names:["subarray"],props:{numArgs:1},handler(s,e){var t=a4(e[0]),i=t?[e[0]]:oi(e[0],"ordgroup").body,n=i.map(function(o){var a=F9(o),l=a.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new Ke("Unknown column alignment: "+l,o)});if(n.length>1)throw new Ke("{subarray} can contain only one column");var r={cols:n,hskipBeforeAndAfter:!1,arraystretch:.5};if(r=Yh(s.parser,r,"script"),r.body.length>0&&r.body[0].length>1)throw new Ke("{subarray} can contain only one column");return r},htmlBuilder:tc,mathmlBuilder:ic});ec({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(s){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},t=Yh(s.parser,e,j9(s.envName));return{type:"leftright",mode:s.mode,body:[t],left:s.envName.indexOf("r")>-1?".":"\\{",right:s.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:tc,mathmlBuilder:ic});ec({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:PU,htmlBuilder:tc,mathmlBuilder:ic});ec({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(s){Tt.contains(["gather","gather*"],s.envName)&&u4(s);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:H9(s.envName),emptySingleRow:!0,leqno:s.parser.settings.leqno};return Yh(s.parser,e,"display")},htmlBuilder:tc,mathmlBuilder:ic});ec({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:PU,htmlBuilder:tc,mathmlBuilder:ic});ec({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(s){u4(s);var e={autoTag:H9(s.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:s.parser.settings.leqno};return Yh(s.parser,e,"display")},htmlBuilder:tc,mathmlBuilder:ic});ec({type:"array",names:["CD"],props:{numArgs:0},handler(s){return u4(s),Fbe(s.parser)},htmlBuilder:tc,mathmlBuilder:ic});j("\\nonumber","\\gdef\\@eqnsw{0}");j("\\notag","\\nonumber");ot({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(s,e){throw new Ke(s.funcName+" valid only within array environment")}});var QF=RU;ot({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(s,e){var{parser:t,funcName:i}=s,n=e[0];if(n.type!=="ordgroup")throw new Ke("Invalid environment name",n);for(var r="",o=0;o<n.body.length;++o)r+=oi(n.body[o],"textord").text;if(i==="\\begin"){if(!QF.hasOwnProperty(r))throw new Ke("No such environment: "+r,n);var a=QF[r],{args:l,optArgs:c}=t.parseArguments("\\begin{"+r+"}",a),u={mode:t.mode,envName:r,parser:t},d=a.handler(u,l,c);t.expect("\\end",!1);var g=t.nextToken,m=oi(t.parseFunction(),"environment");if(m.name!==r)throw new Ke("Mismatch: \\begin{"+r+"} matched by \\end{"+m.name+"}",g);return d}return{type:"environment",mode:t.mode,name:r,nameGroup:n}}});var OU=(s,e)=>{var t=s.font,i=e.withFont(t);return Ai(s.body,i)},FU=(s,e)=>{var t=s.font,i=e.withFont(t);return an(s.body,i)},JF={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};ot({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(s,e)=>{var{parser:t,funcName:i}=s,n=sS(e[0]),r=i;return r in JF&&(r=JF[r]),{type:"font",mode:t.mode,font:r.slice(1),body:n}},htmlBuilder:OU,mathmlBuilder:FU});ot({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(s,e)=>{var{parser:t}=s,i=e[0],n=Tt.isCharacterBox(i);return{type:"mclass",mode:t.mode,mclass:l4(i),body:[{type:"font",mode:t.mode,font:"boldsymbol",body:i}],isCharacterBox:n}}});ot({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(s,e)=>{var{parser:t,funcName:i,breakOnTokenText:n}=s,{mode:r}=t,o=t.parseExpression(!0,n),a="math"+i.slice(1);return{type:"font",mode:r,font:a,body:{type:"ordgroup",mode:t.mode,body:o}}},htmlBuilder:OU,mathmlBuilder:FU});var BU=(s,e)=>{var t=e;return s==="display"?t=t.id>=Pt.SCRIPT.id?t.text():Pt.DISPLAY:s==="text"&&t.size===Pt.DISPLAY.size?t=Pt.TEXT:s==="script"?t=Pt.SCRIPT:s==="scriptscript"&&(t=Pt.SCRIPTSCRIPT),t},U9=(s,e)=>{var t=BU(s.size,e.style),i=t.fracNum(),n=t.fracDen(),r;r=e.havingStyle(i);var o=Ai(s.numer,r,e);if(s.continued){var a=8.5/e.fontMetrics().ptPerEm,l=3.5/e.fontMetrics().ptPerEm;o.height=o.height<a?a:o.height,o.depth=o.depth<l?l:o.depth}r=e.havingStyle(n);var c=Ai(s.denom,r,e),u,d,g;s.hasBarLine?(s.barSize?(d=Nn(s.barSize,e),u=we.makeLineSpan("frac-line",e,d)):u=we.makeLineSpan("frac-line",e),d=u.height,g=u.height):(u=null,d=0,g=e.fontMetrics().defaultRuleThickness);var m,_,v;t.size===Pt.DISPLAY.size||s.size==="display"?(m=e.fontMetrics().num1,d>0?_=3*g:_=7*g,v=e.fontMetrics().denom1):(d>0?(m=e.fontMetrics().num2,_=g):(m=e.fontMetrics().num3,_=3*g),v=e.fontMetrics().denom2);var w;if(u){var S=e.fontMetrics().axisHeight;m-o.depth-(S+.5*d)<_&&(m+=_-(m-o.depth-(S+.5*d))),S-.5*d-(c.height-v)<_&&(v+=_-(S-.5*d-(c.height-v)));var k=-(S-.5*d);w=we.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:v},{type:"elem",elem:u,shift:k},{type:"elem",elem:o,shift:-m}]},e)}else{var y=m-o.depth-(c.height-v);y<_&&(m+=.5*(_-y),v+=.5*(_-y)),w=we.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:v},{type:"elem",elem:o,shift:-m}]},e)}r=e.havingStyle(t),w.height*=r.sizeMultiplier/e.sizeMultiplier,w.depth*=r.sizeMultiplier/e.sizeMultiplier;var L;t.size===Pt.DISPLAY.size?L=e.fontMetrics().delim1:t.size===Pt.SCRIPTSCRIPT.size?L=e.havingStyle(Pt.SCRIPT).fontMetrics().delim2:L=e.fontMetrics().delim2;var T,A;return s.leftDelim==null?T=z_(e,["mopen"]):T=lu.customSizedDelim(s.leftDelim,L,!0,e.havingStyle(t),s.mode,["mopen"]),s.continued?A=we.makeSpan([]):s.rightDelim==null?A=z_(e,["mclose"]):A=lu.customSizedDelim(s.rightDelim,L,!0,e.havingStyle(t),s.mode,["mclose"]),we.makeSpan(["mord"].concat(r.sizingClasses(e)),[T,we.makeSpan(["mfrac"],[w]),A],e)},$9=(s,e)=>{var t=new Ue.MathNode("mfrac",[an(s.numer,e),an(s.denom,e)]);if(!s.hasBarLine)t.setAttribute("linethickness","0px");else if(s.barSize){var i=Nn(s.barSize,e);t.setAttribute("linethickness",et(i))}var n=BU(s.size,e.style);if(n.size!==e.style.size){t=new Ue.MathNode("mstyle",[t]);var r=n.size===Pt.DISPLAY.size?"true":"false";t.setAttribute("displaystyle",r),t.setAttribute("scriptlevel","0")}if(s.leftDelim!=null||s.rightDelim!=null){var o=[];if(s.leftDelim!=null){var a=new Ue.MathNode("mo",[new Ue.TextNode(s.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),o.push(a)}if(o.push(t),s.rightDelim!=null){var l=new Ue.MathNode("mo",[new Ue.TextNode(s.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),o.push(l)}return P9(o)}return t};ot({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(s,e)=>{var{parser:t,funcName:i}=s,n=e[0],r=e[1],o,a=null,l=null,c="auto";switch(i){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,a="(",l=")";break;case"\\\\bracefrac":o=!1,a="\\{",l="\\}";break;case"\\\\brackfrac":o=!1,a="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(i){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text";break}return{type:"genfrac",mode:t.mode,continued:!1,numer:n,denom:r,hasBarLine:o,leftDelim:a,rightDelim:l,size:c,barSize:null}},htmlBuilder:U9,mathmlBuilder:$9});ot({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(s,e)=>{var{parser:t,funcName:i}=s,n=e[0],r=e[1];return{type:"genfrac",mode:t.mode,continued:!0,numer:n,denom:r,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});ot({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(s){var{parser:e,funcName:t,token:i}=s,n;switch(t){case"\\over":n="\\frac";break;case"\\choose":n="\\binom";break;case"\\atop":n="\\\\atopfrac";break;case"\\brace":n="\\\\bracefrac";break;case"\\brack":n="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:n,token:i}}});var eB=["display","text","script","scriptscript"],tB=function(e){var t=null;return e.length>0&&(t=e,t=t==="."?null:t),t};ot({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(s,e){var{parser:t}=s,i=e[4],n=e[5],r=sS(e[0]),o=r.type==="atom"&&r.family==="open"?tB(r.text):null,a=sS(e[1]),l=a.type==="atom"&&a.family==="close"?tB(a.text):null,c=oi(e[2],"size"),u,d=null;c.isBlank?u=!0:(d=c.value,u=d.number>0);var g="auto",m=e[3];if(m.type==="ordgroup"){if(m.body.length>0){var _=oi(m.body[0],"textord");g=eB[Number(_.text)]}}else m=oi(m,"textord"),g=eB[Number(m.text)];return{type:"genfrac",mode:t.mode,numer:i,denom:n,continued:!1,hasBarLine:u,barSize:d,leftDelim:o,rightDelim:l,size:g}},htmlBuilder:U9,mathmlBuilder:$9});ot({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(s,e){var{parser:t,funcName:i,token:n}=s;return{type:"infix",mode:t.mode,replaceWith:"\\\\abovefrac",size:oi(e[0],"size").value,token:n}}});ot({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(s,e)=>{var{parser:t,funcName:i}=s,n=e[0],r=Dve(oi(e[1],"infix").size),o=e[2],a=r.number>0;return{type:"genfrac",mode:t.mode,numer:n,denom:o,continued:!1,hasBarLine:a,barSize:r,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:U9,mathmlBuilder:$9});var WU=(s,e)=>{var t=e.style,i,n;s.type==="supsub"?(i=s.sup?Ai(s.sup,e.havingStyle(t.sup()),e):Ai(s.sub,e.havingStyle(t.sub()),e),n=oi(s.base,"horizBrace")):n=oi(s,"horizBrace");var r=Ai(n.base,e.havingBaseStyle(Pt.DISPLAY)),o=mu.svgSpan(n,e),a;if(n.isOver?(a=we.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:.1},{type:"elem",elem:o}]},e),a.children[0].children[0].children[1].classes.push("svg-align")):(a=we.makeVList({positionType:"bottom",positionData:r.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:r}]},e),a.children[0].children[0].children[0].classes.push("svg-align")),i){var l=we.makeSpan(["mord",n.isOver?"mover":"munder"],[a],e);n.isOver?a=we.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:i}]},e):a=we.makeVList({positionType:"bottom",positionData:l.depth+.2+i.height+i.depth,children:[{type:"elem",elem:i},{type:"kern",size:.2},{type:"elem",elem:l}]},e)}return we.makeSpan(["mord",n.isOver?"mover":"munder"],[a],e)},Qbe=(s,e)=>{var t=mu.mathMLnode(s.label);return new Ue.MathNode(s.isOver?"mover":"munder",[an(s.base,e),t])};ot({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(s,e){var{parser:t,funcName:i}=s;return{type:"horizBrace",mode:t.mode,label:i,isOver:/^\\over/.test(i),base:e[0]}},htmlBuilder:WU,mathmlBuilder:Qbe});ot({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(s,e)=>{var{parser:t}=s,i=e[1],n=oi(e[0],"url").url;return t.settings.isTrusted({command:"\\href",url:n})?{type:"href",mode:t.mode,href:n,body:Qn(i)}:t.formatUnsupportedCmd("\\href")},htmlBuilder:(s,e)=>{var t=Ls(s.body,e,!1);return we.makeAnchor(s.href,[],t,e)},mathmlBuilder:(s,e)=>{var t=jh(s.body,e);return t instanceof jo||(t=new jo("mrow",[t])),t.setAttribute("href",s.href),t}});ot({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(s,e)=>{var{parser:t}=s,i=oi(e[0],"url").url;if(!t.settings.isTrusted({command:"\\url",url:i}))return t.formatUnsupportedCmd("\\url");for(var n=[],r=0;r<i.length;r++){var o=i[r];o==="~"&&(o="\\textasciitilde"),n.push({type:"textord",mode:"text",text:o})}var a={type:"text",mode:t.mode,font:"\\texttt",body:n};return{type:"href",mode:t.mode,href:i,body:Qn(a)}}});ot({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(s,e){var{parser:t}=s;return{type:"hbox",mode:t.mode,body:Qn(e[0])}},htmlBuilder(s,e){var t=Ls(s.body,e,!1);return we.makeFragment(t)},mathmlBuilder(s,e){return new Ue.MathNode("mrow",ko(s.body,e))}});ot({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(s,e)=>{var{parser:t,funcName:i,token:n}=s,r=oi(e[0],"raw").string,o=e[1];t.settings.strict&&t.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var a,l={};switch(i){case"\\htmlClass":l.class=r,a={command:"\\htmlClass",class:r};break;case"\\htmlId":l.id=r,a={command:"\\htmlId",id:r};break;case"\\htmlStyle":l.style=r,a={command:"\\htmlStyle",style:r};break;case"\\htmlData":{for(var c=r.split(","),u=0;u<c.length;u++){var d=c[u].split("=");if(d.length!==2)throw new Ke("Error parsing key-value for \\htmlData");l["data-"+d[0].trim()]=d[1].trim()}a={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return t.settings.isTrusted(a)?{type:"html",mode:t.mode,attributes:l,body:Qn(o)}:t.formatUnsupportedCmd(i)},htmlBuilder:(s,e)=>{var t=Ls(s.body,e,!1),i=["enclosing"];s.attributes.class&&i.push(...s.attributes.class.trim().split(/\s+/));var n=we.makeSpan(i,t,e);for(var r in s.attributes)r!=="class"&&s.attributes.hasOwnProperty(r)&&n.setAttribute(r,s.attributes[r]);return n},mathmlBuilder:(s,e)=>jh(s.body,e)});ot({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(s,e)=>{var{parser:t}=s;return{type:"htmlmathml",mode:t.mode,html:Qn(e[0]),mathml:Qn(e[1])}},htmlBuilder:(s,e)=>{var t=Ls(s.html,e,!1);return we.makeFragment(t)},mathmlBuilder:(s,e)=>jh(s.mathml,e)});var FL=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new Ke("Invalid size: '"+e+"' in \\includegraphics");var i={number:+(t[1]+t[2]),unit:t[3]};if(!sU(i))throw new Ke("Invalid unit: '"+i.unit+"' in \\includegraphics.");return i};ot({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(s,e,t)=>{var{parser:i}=s,n={number:0,unit:"em"},r={number:.9,unit:"em"},o={number:0,unit:"em"},a="";if(t[0])for(var l=oi(t[0],"raw").string,c=l.split(","),u=0;u<c.length;u++){var d=c[u].split("=");if(d.length===2){var g=d[1].trim();switch(d[0].trim()){case"alt":a=g;break;case"width":n=FL(g);break;case"height":r=FL(g);break;case"totalheight":o=FL(g);break;default:throw new Ke("Invalid key: '"+d[0]+"' in \\includegraphics.")}}}var m=oi(e[0],"url").url;return a===""&&(a=m,a=a.replace(/^.*[\\/]/,""),a=a.substring(0,a.lastIndexOf("."))),i.settings.isTrusted({command:"\\includegraphics",url:m})?{type:"includegraphics",mode:i.mode,alt:a,width:n,height:r,totalheight:o,src:m}:i.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(s,e)=>{var t=Nn(s.height,e),i=0;s.totalheight.number>0&&(i=Nn(s.totalheight,e)-t);var n=0;s.width.number>0&&(n=Nn(s.width,e));var r={height:et(t+i)};n>0&&(r.width=et(n)),i>0&&(r.verticalAlign=et(-i));var o=new Qve(s.src,s.alt,r);return o.height=t,o.depth=i,o},mathmlBuilder:(s,e)=>{var t=new Ue.MathNode("mglyph",[]);t.setAttribute("alt",s.alt);var i=Nn(s.height,e),n=0;if(s.totalheight.number>0&&(n=Nn(s.totalheight,e)-i,t.setAttribute("valign",et(-n))),t.setAttribute("height",et(i+n)),s.width.number>0){var r=Nn(s.width,e);t.setAttribute("width",et(r))}return t.setAttribute("src",s.src),t}});ot({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(s,e){var{parser:t,funcName:i}=s,n=oi(e[0],"size");if(t.settings.strict){var r=i[1]==="m",o=n.value.unit==="mu";r?(o||t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" supports only mu units, "+("not "+n.value.unit+" units")),t.mode!=="math"&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" works only in math mode")):o&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" doesn't support mu units")}return{type:"kern",mode:t.mode,dimension:n.value}},htmlBuilder(s,e){return we.makeGlue(s.dimension,e)},mathmlBuilder(s,e){var t=Nn(s.dimension,e);return new Ue.SpaceNode(t)}});ot({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(s,e)=>{var{parser:t,funcName:i}=s,n=e[0];return{type:"lap",mode:t.mode,alignment:i.slice(5),body:n}},htmlBuilder:(s,e)=>{var t;s.alignment==="clap"?(t=we.makeSpan([],[Ai(s.body,e)]),t=we.makeSpan(["inner"],[t],e)):t=we.makeSpan(["inner"],[Ai(s.body,e)]);var i=we.makeSpan(["fix"],[]),n=we.makeSpan([s.alignment],[t,i],e),r=we.makeSpan(["strut"]);return r.style.height=et(n.height+n.depth),n.depth&&(r.style.verticalAlign=et(-n.depth)),n.children.unshift(r),n=we.makeSpan(["thinbox"],[n],e),we.makeSpan(["mord","vbox"],[n],e)},mathmlBuilder:(s,e)=>{var t=new Ue.MathNode("mpadded",[an(s.body,e)]);if(s.alignment!=="rlap"){var i=s.alignment==="llap"?"-1":"-0.5";t.setAttribute("lspace",i+"width")}return t.setAttribute("width","0px"),t}});ot({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(s,e){var{funcName:t,parser:i}=s,n=i.mode;i.switchMode("math");var r=t==="\\("?"\\)":"$",o=i.parseExpression(!1,r);return i.expect(r),i.switchMode(n),{type:"styling",mode:i.mode,style:"text",body:o}}});ot({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(s,e){throw new Ke("Mismatched "+s.funcName)}});var iB=(s,e)=>{switch(e.style.size){case Pt.DISPLAY.size:return s.display;case Pt.TEXT.size:return s.text;case Pt.SCRIPT.size:return s.script;case Pt.SCRIPTSCRIPT.size:return s.scriptscript;default:return s.text}};ot({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(s,e)=>{var{parser:t}=s;return{type:"mathchoice",mode:t.mode,display:Qn(e[0]),text:Qn(e[1]),script:Qn(e[2]),scriptscript:Qn(e[3])}},htmlBuilder:(s,e)=>{var t=iB(s,e),i=Ls(t,e,!1);return we.makeFragment(i)},mathmlBuilder:(s,e)=>{var t=iB(s,e);return jh(t,e)}});var VU=(s,e,t,i,n,r,o)=>{s=we.makeSpan([],[s]);var a=t&&Tt.isCharacterBox(t),l,c;if(e){var u=Ai(e,i.havingStyle(n.sup()),i);c={elem:u,kern:Math.max(i.fontMetrics().bigOpSpacing1,i.fontMetrics().bigOpSpacing3-u.depth)}}if(t){var d=Ai(t,i.havingStyle(n.sub()),i);l={elem:d,kern:Math.max(i.fontMetrics().bigOpSpacing2,i.fontMetrics().bigOpSpacing4-d.height)}}var g;if(c&&l){var m=i.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+s.depth+o;g=we.makeVList({positionType:"bottom",positionData:m,children:[{type:"kern",size:i.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:et(-r)},{type:"kern",size:l.kern},{type:"elem",elem:s},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:et(r)},{type:"kern",size:i.fontMetrics().bigOpSpacing5}]},i)}else if(l){var _=s.height-o;g=we.makeVList({positionType:"top",positionData:_,children:[{type:"kern",size:i.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:et(-r)},{type:"kern",size:l.kern},{type:"elem",elem:s}]},i)}else if(c){var v=s.depth+o;g=we.makeVList({positionType:"bottom",positionData:v,children:[{type:"elem",elem:s},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:et(r)},{type:"kern",size:i.fontMetrics().bigOpSpacing5}]},i)}else return s;var w=[g];if(l&&r!==0&&!a){var y=we.makeSpan(["mspace"],[],i);y.style.marginRight=et(r),w.unshift(y)}return we.makeSpan(["mop","op-limits"],w,i)},zU=["\\smallint"],Rp=(s,e)=>{var t,i,n=!1,r;s.type==="supsub"?(t=s.sup,i=s.sub,r=oi(s.base,"op"),n=!0):r=oi(s,"op");var o=e.style,a=!1;o.size===Pt.DISPLAY.size&&r.symbol&&!Tt.contains(zU,r.name)&&(a=!0);var l;if(r.symbol){var c=a?"Size2-Regular":"Size1-Regular",u="";if((r.name==="\\oiint"||r.name==="\\oiiint")&&(u=r.name.slice(1),r.name=u==="oiint"?"\\iint":"\\iiint"),l=we.makeSymbol(r.name,c,"math",e,["mop","op-symbol",a?"large-op":"small-op"]),u.length>0){var d=l.italic,g=we.staticSvg(u+"Size"+(a?"2":"1"),e);l=we.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:g,shift:a?.08:0}]},e),r.name="\\"+u,l.classes.unshift("mop"),l.italic=d}}else if(r.body){var m=Ls(r.body,e,!0);m.length===1&&m[0]instanceof xa?(l=m[0],l.classes[0]="mop"):l=we.makeSpan(["mop"],m,e)}else{for(var _=[],v=1;v<r.name.length;v++)_.push(we.mathsym(r.name[v],r.mode,e));l=we.makeSpan(["mop"],_,e)}var w=0,y=0;return(l instanceof xa||r.name==="\\oiint"||r.name==="\\oiiint")&&!r.suppressBaseShift&&(w=(l.height-l.depth)/2-e.fontMetrics().axisHeight,y=l.italic),n?VU(l,t,i,e,o,y,w):(w&&(l.style.position="relative",l.style.top=et(w)),l)},bv=(s,e)=>{var t;if(s.symbol)t=new jo("mo",[ka(s.name,s.mode)]),Tt.contains(zU,s.name)&&t.setAttribute("largeop","false");else if(s.body)t=new jo("mo",ko(s.body,e));else{t=new jo("mi",[new Wl(s.name.slice(1))]);var i=new jo("mo",[ka("⁡","text")]);s.parentIsSupSub?t=new jo("mrow",[t,i]):t=mU([t,i])}return t},Jbe={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};ot({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:(s,e)=>{var{parser:t,funcName:i}=s,n=i;return n.length===1&&(n=Jbe[n]),{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Rp,mathmlBuilder:bv});ot({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(s,e)=>{var{parser:t}=s,i=e[0];return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Qn(i)}},htmlBuilder:Rp,mathmlBuilder:bv});var ewe={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};ot({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(s){var{parser:e,funcName:t}=s;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:Rp,mathmlBuilder:bv});ot({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(s){var{parser:e,funcName:t}=s;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:Rp,mathmlBuilder:bv});ot({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler(s){var{parser:e,funcName:t}=s,i=t;return i.length===1&&(i=ewe[i]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:Rp,mathmlBuilder:bv});var HU=(s,e)=>{var t,i,n=!1,r;s.type==="supsub"?(t=s.sup,i=s.sub,r=oi(s.base,"operatorname"),n=!0):r=oi(s,"operatorname");var o;if(r.body.length>0){for(var a=r.body.map(d=>{var g=d.text;return typeof g=="string"?{type:"textord",mode:d.mode,text:g}:d}),l=Ls(a,e.withFont("mathrm"),!0),c=0;c<l.length;c++){var u=l[c];u instanceof xa&&(u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=we.makeSpan(["mop"],l,e)}else o=we.makeSpan(["mop"],[],e);return n?VU(o,t,i,e,e.style,0,0):o},twe=(s,e)=>{for(var t=ko(s.body,e.withFont("mathrm")),i=!0,n=0;n<t.length;n++){var r=t[n];if(!(r instanceof Ue.SpaceNode))if(r instanceof Ue.MathNode)switch(r.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=r.children[0];r.children.length===1&&o instanceof Ue.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):i=!1;break}default:i=!1}else i=!1}if(i){var a=t.map(u=>u.toText()).join("");t=[new Ue.TextNode(a)]}var l=new Ue.MathNode("mi",t);l.setAttribute("mathvariant","normal");var c=new Ue.MathNode("mo",[ka("⁡","text")]);return s.parentIsSupSub?new Ue.MathNode("mrow",[l,c]):Ue.newDocumentFragment([l,c])};ot({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(s,e)=>{var{parser:t,funcName:i}=s,n=e[0];return{type:"operatorname",mode:t.mode,body:Qn(n),alwaysHandleSupSub:i==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:HU,mathmlBuilder:twe});j("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");tg({type:"ordgroup",htmlBuilder(s,e){return s.semisimple?we.makeFragment(Ls(s.body,e,!1)):we.makeSpan(["mord"],Ls(s.body,e,!0),e)},mathmlBuilder(s,e){return jh(s.body,e,!0)}});ot({type:"overline",names:["\\overline"],props:{numArgs:1},handler(s,e){var{parser:t}=s,i=e[0];return{type:"overline",mode:t.mode,body:i}},htmlBuilder(s,e){var t=Ai(s.body,e.havingCrampedStyle()),i=we.makeLineSpan("overline-line",e),n=e.fontMetrics().defaultRuleThickness,r=we.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t},{type:"kern",size:3*n},{type:"elem",elem:i},{type:"kern",size:n}]},e);return we.makeSpan(["mord","overline"],[r],e)},mathmlBuilder(s,e){var t=new Ue.MathNode("mo",[new Ue.TextNode("‾")]);t.setAttribute("stretchy","true");var i=new Ue.MathNode("mover",[an(s.body,e),t]);return i.setAttribute("accent","true"),i}});ot({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(s,e)=>{var{parser:t}=s,i=e[0];return{type:"phantom",mode:t.mode,body:Qn(i)}},htmlBuilder:(s,e)=>{var t=Ls(s.body,e.withPhantom(),!1);return we.makeFragment(t)},mathmlBuilder:(s,e)=>{var t=ko(s.body,e);return new Ue.MathNode("mphantom",t)}});ot({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(s,e)=>{var{parser:t}=s,i=e[0];return{type:"hphantom",mode:t.mode,body:i}},htmlBuilder:(s,e)=>{var t=we.makeSpan([],[Ai(s.body,e.withPhantom())]);if(t.height=0,t.depth=0,t.children)for(var i=0;i<t.children.length;i++)t.children[i].height=0,t.children[i].depth=0;return t=we.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e),we.makeSpan(["mord"],[t],e)},mathmlBuilder:(s,e)=>{var t=ko(Qn(s.body),e),i=new Ue.MathNode("mphantom",t),n=new Ue.MathNode("mpadded",[i]);return n.setAttribute("height","0px"),n.setAttribute("depth","0px"),n}});ot({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(s,e)=>{var{parser:t}=s,i=e[0];return{type:"vphantom",mode:t.mode,body:i}},htmlBuilder:(s,e)=>{var t=we.makeSpan(["inner"],[Ai(s.body,e.withPhantom())]),i=we.makeSpan(["fix"],[]);return we.makeSpan(["mord","rlap"],[t,i],e)},mathmlBuilder:(s,e)=>{var t=ko(Qn(s.body),e),i=new Ue.MathNode("mphantom",t),n=new Ue.MathNode("mpadded",[i]);return n.setAttribute("width","0px"),n}});ot({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(s,e){var{parser:t}=s,i=oi(e[0],"size").value,n=e[1];return{type:"raisebox",mode:t.mode,dy:i,body:n}},htmlBuilder(s,e){var t=Ai(s.body,e),i=Nn(s.dy,e);return we.makeVList({positionType:"shift",positionData:-i,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(s,e){var t=new Ue.MathNode("mpadded",[an(s.body,e)]),i=s.dy.number+s.dy.unit;return t.setAttribute("voffset",i),t}});ot({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(s){var{parser:e}=s;return{type:"internal",mode:e.mode}}});ot({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(s,e,t){var{parser:i}=s,n=t[0],r=oi(e[0],"size"),o=oi(e[1],"size");return{type:"rule",mode:i.mode,shift:n&&oi(n,"size").value,width:r.value,height:o.value}},htmlBuilder(s,e){var t=we.makeSpan(["mord","rule"],[],e),i=Nn(s.width,e),n=Nn(s.height,e),r=s.shift?Nn(s.shift,e):0;return t.style.borderRightWidth=et(i),t.style.borderTopWidth=et(n),t.style.bottom=et(r),t.width=i,t.height=n+r,t.depth=-r,t.maxFontSize=n*1.125*e.sizeMultiplier,t},mathmlBuilder(s,e){var t=Nn(s.width,e),i=Nn(s.height,e),n=s.shift?Nn(s.shift,e):0,r=e.color&&e.getColor()||"black",o=new Ue.MathNode("mspace");o.setAttribute("mathbackground",r),o.setAttribute("width",et(t)),o.setAttribute("height",et(i));var a=new Ue.MathNode("mpadded",[o]);return n>=0?a.setAttribute("height",et(n)):(a.setAttribute("height",et(n)),a.setAttribute("depth",et(-n))),a.setAttribute("voffset",et(n)),a}});function jU(s,e,t){for(var i=Ls(s,e,!1),n=e.sizeMultiplier/t.sizeMultiplier,r=0;r<i.length;r++){var o=i[r].classes.indexOf("sizing");o<0?Array.prototype.push.apply(i[r].classes,e.sizingClasses(t)):i[r].classes[o+1]==="reset-size"+e.size&&(i[r].classes[o+1]="reset-size"+t.size),i[r].height*=n,i[r].depth*=n}return we.makeFragment(i)}var nB=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],iwe=(s,e)=>{var t=e.havingSize(s.size);return jU(s.body,t,e)};ot({type:"sizing",names:nB,props:{numArgs:0,allowedInText:!0},handler:(s,e)=>{var{breakOnTokenText:t,funcName:i,parser:n}=s,r=n.parseExpression(!1,t);return{type:"sizing",mode:n.mode,size:nB.indexOf(i)+1,body:r}},htmlBuilder:iwe,mathmlBuilder:(s,e)=>{var t=e.havingSize(s.size),i=ko(s.body,t),n=new Ue.MathNode("mstyle",i);return n.setAttribute("mathsize",et(t.sizeMultiplier)),n}});ot({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(s,e,t)=>{var{parser:i}=s,n=!1,r=!1,o=t[0]&&oi(t[0],"ordgroup");if(o)for(var a="",l=0;l<o.body.length;++l){var c=o.body[l];if(a=c.text,a==="t")n=!0;else if(a==="b")r=!0;else{n=!1,r=!1;break}}else n=!0,r=!0;var u=e[0];return{type:"smash",mode:i.mode,body:u,smashHeight:n,smashDepth:r}},htmlBuilder:(s,e)=>{var t=we.makeSpan([],[Ai(s.body,e)]);if(!s.smashHeight&&!s.smashDepth)return t;if(s.smashHeight&&(t.height=0,t.children))for(var i=0;i<t.children.length;i++)t.children[i].height=0;if(s.smashDepth&&(t.depth=0,t.children))for(var n=0;n<t.children.length;n++)t.children[n].depth=0;var r=we.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e);return we.makeSpan(["mord"],[r],e)},mathmlBuilder:(s,e)=>{var t=new Ue.MathNode("mpadded",[an(s.body,e)]);return s.smashHeight&&t.setAttribute("height","0px"),s.smashDepth&&t.setAttribute("depth","0px"),t}});ot({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(s,e,t){var{parser:i}=s,n=t[0],r=e[0];return{type:"sqrt",mode:i.mode,body:r,index:n}},htmlBuilder(s,e){var t=Ai(s.body,e.havingCrampedStyle());t.height===0&&(t.height=e.fontMetrics().xHeight),t=we.wrapFragment(t,e);var i=e.fontMetrics(),n=i.defaultRuleThickness,r=n;e.style.id<Pt.TEXT.id&&(r=e.fontMetrics().xHeight);var o=n+r/4,a=t.height+t.depth+o+n,{span:l,ruleWidth:c,advanceWidth:u}=lu.sqrtImage(a,e),d=l.height-c;d>t.height+t.depth+o&&(o=(o+d-t.height-t.depth)/2);var g=l.height-t.height-o-c;t.style.paddingLeft=et(u);var m=we.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t,wrapperClasses:["svg-align"]},{type:"kern",size:-(t.height+g)},{type:"elem",elem:l},{type:"kern",size:c}]},e);if(s.index){var _=e.havingStyle(Pt.SCRIPTSCRIPT),v=Ai(s.index,_,e),w=.6*(m.height-m.depth),y=we.makeVList({positionType:"shift",positionData:-w,children:[{type:"elem",elem:v}]},e),S=we.makeSpan(["root"],[y]);return we.makeSpan(["mord","sqrt"],[S,m],e)}else return we.makeSpan(["mord","sqrt"],[m],e)},mathmlBuilder(s,e){var{body:t,index:i}=s;return i?new Ue.MathNode("mroot",[an(t,e),an(i,e)]):new Ue.MathNode("msqrt",[an(t,e)])}});var sB={display:Pt.DISPLAY,text:Pt.TEXT,script:Pt.SCRIPT,scriptscript:Pt.SCRIPTSCRIPT};ot({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(s,e){var{breakOnTokenText:t,funcName:i,parser:n}=s,r=n.parseExpression(!0,t),o=i.slice(1,i.length-5);return{type:"styling",mode:n.mode,style:o,body:r}},htmlBuilder(s,e){var t=sB[s.style],i=e.havingStyle(t).withFont("");return jU(s.body,i,e)},mathmlBuilder(s,e){var t=sB[s.style],i=e.havingStyle(t),n=ko(s.body,i),r=new Ue.MathNode("mstyle",n),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},a=o[s.style];return r.setAttribute("scriptlevel",a[0]),r.setAttribute("displaystyle",a[1]),r}});var nwe=function(e,t){var i=e.base;if(i)if(i.type==="op"){var n=i.limits&&(t.style.size===Pt.DISPLAY.size||i.alwaysHandleSupSub);return n?Rp:null}else if(i.type==="operatorname"){var r=i.alwaysHandleSupSub&&(t.style.size===Pt.DISPLAY.size||i.limits);return r?HU:null}else{if(i.type==="accent")return Tt.isCharacterBox(i.base)?B9:null;if(i.type==="horizBrace"){var o=!e.sub;return o===i.isOver?WU:null}else return null}else return null};tg({type:"supsub",htmlBuilder(s,e){var t=nwe(s,e);if(t)return t(s,e);var{base:i,sup:n,sub:r}=s,o=Ai(i,e),a,l,c=e.fontMetrics(),u=0,d=0,g=i&&Tt.isCharacterBox(i);if(n){var m=e.havingStyle(e.style.sup());a=Ai(n,m,e),g||(u=o.height-m.fontMetrics().supDrop*m.sizeMultiplier/e.sizeMultiplier)}if(r){var _=e.havingStyle(e.style.sub());l=Ai(r,_,e),g||(d=o.depth+_.fontMetrics().subDrop*_.sizeMultiplier/e.sizeMultiplier)}var v;e.style===Pt.DISPLAY?v=c.sup1:e.style.cramped?v=c.sup3:v=c.sup2;var w=e.sizeMultiplier,y=et(.5/c.ptPerEm/w),S=null;if(l){var k=s.base&&s.base.type==="op"&&s.base.name&&(s.base.name==="\\oiint"||s.base.name==="\\oiiint");(o instanceof xa||k)&&(S=et(-o.italic))}var L;if(a&&l){u=Math.max(u,v,a.depth+.25*c.xHeight),d=Math.max(d,c.sub2);var T=c.defaultRuleThickness,A=4*T;if(u-a.depth-(l.height-d)<A){d=A-(u-a.depth)+l.height;var I=.8*c.xHeight-(u-a.depth);I>0&&(u+=I,d-=I)}var O=[{type:"elem",elem:l,shift:d,marginRight:y,marginLeft:S},{type:"elem",elem:a,shift:-u,marginRight:y}];L=we.makeVList({positionType:"individualShift",children:O},e)}else if(l){d=Math.max(d,c.sub1,l.height-.8*c.xHeight);var F=[{type:"elem",elem:l,marginLeft:S,marginRight:y}];L=we.makeVList({positionType:"shift",positionData:d,children:F},e)}else if(a)u=Math.max(u,v,a.depth+.25*c.xHeight),L=we.makeVList({positionType:"shift",positionData:-u,children:[{type:"elem",elem:a,marginRight:y}]},e);else throw new Error("supsub must have either sup or sub.");var J=AD(o,"right")||"mord";return we.makeSpan([J],[o,we.makeSpan(["msupsub"],[L])],e)},mathmlBuilder(s,e){var t=!1,i,n;s.base&&s.base.type==="horizBrace"&&(n=!!s.sup,n===s.base.isOver&&(t=!0,i=s.base.isOver)),s.base&&(s.base.type==="op"||s.base.type==="operatorname")&&(s.base.parentIsSupSub=!0);var r=[an(s.base,e)];s.sub&&r.push(an(s.sub,e)),s.sup&&r.push(an(s.sup,e));var o;if(t)o=i?"mover":"munder";else if(s.sub)if(s.sup){var c=s.base;c&&c.type==="op"&&c.limits&&e.style===Pt.DISPLAY||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(e.style===Pt.DISPLAY||c.limits)?o="munderover":o="msubsup"}else{var l=s.base;l&&l.type==="op"&&l.limits&&(e.style===Pt.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===Pt.DISPLAY)?o="munder":o="msub"}else{var a=s.base;a&&a.type==="op"&&a.limits&&(e.style===Pt.DISPLAY||a.alwaysHandleSupSub)||a&&a.type==="operatorname"&&a.alwaysHandleSupSub&&(a.limits||e.style===Pt.DISPLAY)?o="mover":o="msup"}return new Ue.MathNode(o,r)}});tg({type:"atom",htmlBuilder(s,e){return we.mathsym(s.text,s.mode,e,["m"+s.family])},mathmlBuilder(s,e){var t=new Ue.MathNode("mo",[ka(s.text,s.mode)]);if(s.family==="bin"){var i=O9(s,e);i==="bold-italic"&&t.setAttribute("mathvariant",i)}else s.family==="punct"?t.setAttribute("separator","true"):(s.family==="open"||s.family==="close")&&t.setAttribute("stretchy","false");return t}});var UU={mi:"italic",mn:"normal",mtext:"normal"};tg({type:"mathord",htmlBuilder(s,e){return we.makeOrd(s,e,"mathord")},mathmlBuilder(s,e){var t=new Ue.MathNode("mi",[ka(s.text,s.mode,e)]),i=O9(s,e)||"italic";return i!==UU[t.type]&&t.setAttribute("mathvariant",i),t}});tg({type:"textord",htmlBuilder(s,e){return we.makeOrd(s,e,"textord")},mathmlBuilder(s,e){var t=ka(s.text,s.mode,e),i=O9(s,e)||"normal",n;return s.mode==="text"?n=new Ue.MathNode("mtext",[t]):/[0-9]/.test(s.text)?n=new Ue.MathNode("mn",[t]):s.text==="\\prime"?n=new Ue.MathNode("mo",[t]):n=new Ue.MathNode("mi",[t]),i!==UU[n.type]&&n.setAttribute("mathvariant",i),n}});var BL={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},WL={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};tg({type:"spacing",htmlBuilder(s,e){if(WL.hasOwnProperty(s.text)){var t=WL[s.text].className||"";if(s.mode==="text"){var i=we.makeOrd(s,e,"textord");return i.classes.push(t),i}else return we.makeSpan(["mspace",t],[we.mathsym(s.text,s.mode,e)],e)}else{if(BL.hasOwnProperty(s.text))return we.makeSpan(["mspace",BL[s.text]],[],e);throw new Ke('Unknown type of space "'+s.text+'"')}},mathmlBuilder(s,e){var t;if(WL.hasOwnProperty(s.text))t=new Ue.MathNode("mtext",[new Ue.TextNode(" ")]);else{if(BL.hasOwnProperty(s.text))return new Ue.MathNode("mspace");throw new Ke('Unknown type of space "'+s.text+'"')}return t}});var rB=()=>{var s=new Ue.MathNode("mtd",[]);return s.setAttribute("width","50%"),s};tg({type:"tag",mathmlBuilder(s,e){var t=new Ue.MathNode("mtable",[new Ue.MathNode("mtr",[rB(),new Ue.MathNode("mtd",[jh(s.body,e)]),rB(),new Ue.MathNode("mtd",[jh(s.tag,e)])])]);return t.setAttribute("width","100%"),t}});var oB={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},aB={"\\textbf":"textbf","\\textmd":"textmd"},swe={"\\textit":"textit","\\textup":"textup"},lB=(s,e)=>{var t=s.font;if(t){if(oB[t])return e.withTextFontFamily(oB[t]);if(aB[t])return e.withTextFontWeight(aB[t]);if(t==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(swe[t])};ot({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(s,e){var{parser:t,funcName:i}=s,n=e[0];return{type:"text",mode:t.mode,body:Qn(n),font:i}},htmlBuilder(s,e){var t=lB(s,e),i=Ls(s.body,t,!0);return we.makeSpan(["mord","text"],i,t)},mathmlBuilder(s,e){var t=lB(s,e);return jh(s.body,t)}});ot({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(s,e){var{parser:t}=s;return{type:"underline",mode:t.mode,body:e[0]}},htmlBuilder(s,e){var t=Ai(s.body,e),i=we.makeLineSpan("underline-line",e),n=e.fontMetrics().defaultRuleThickness,r=we.makeVList({positionType:"top",positionData:t.height,children:[{type:"kern",size:n},{type:"elem",elem:i},{type:"kern",size:3*n},{type:"elem",elem:t}]},e);return we.makeSpan(["mord","underline"],[r],e)},mathmlBuilder(s,e){var t=new Ue.MathNode("mo",[new Ue.TextNode("‾")]);t.setAttribute("stretchy","true");var i=new Ue.MathNode("munder",[an(s.body,e),t]);return i.setAttribute("accentunder","true"),i}});ot({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(s,e){var{parser:t}=s;return{type:"vcenter",mode:t.mode,body:e[0]}},htmlBuilder(s,e){var t=Ai(s.body,e),i=e.fontMetrics().axisHeight,n=.5*(t.height-i-(t.depth+i));return we.makeVList({positionType:"shift",positionData:n,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(s,e){return new Ue.MathNode("mpadded",[an(s.body,e)],["vcenter"])}});ot({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(s,e,t){throw new Ke("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(s,e){for(var t=cB(s),i=[],n=e.havingStyle(e.style.text()),r=0;r<t.length;r++){var o=t[r];o==="~"&&(o="\\textasciitilde"),i.push(we.makeSymbol(o,"Typewriter-Regular",s.mode,n,["mord","texttt"]))}return we.makeSpan(["mord","text"].concat(n.sizingClasses(e)),we.tryCombineChars(i),n)},mathmlBuilder(s,e){var t=new Ue.TextNode(cB(s)),i=new Ue.MathNode("mtext",[t]);return i.setAttribute("mathvariant","monospace"),i}});var cB=s=>s.body.replace(/ /g,s.star?"␣":" "),yh=fU,$U=`[ \r
	]`,rwe="\\\\[a-zA-Z@]+",owe="\\\\[^\uD800-\uDFFF]",awe="("+rwe+")"+$U+"*",lwe=`\\\\(
|[ \r	]+
?)[ \r	]*`,BD="[̀-ͯ]",cwe=new RegExp(BD+"+$"),uwe="("+$U+"+)|"+(lwe+"|")+"([!-\\[\\]-‧‪-퟿豈-￿]"+(BD+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(BD+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+awe)+("|"+owe+")");class uB{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp(uwe,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new _a("EOF",new Wo(this,t,t));var i=this.tokenRegex.exec(e);if(i===null||i.index!==t)throw new Ke("Unexpected character: '"+e[t]+"'",new _a(e[t],new Wo(this,t,t+1)));var n=i[6]||i[3]||(i[2]?"\\ ":" ");if(this.catcodes[n]===14){var r=e.indexOf(`
`,this.tokenRegex.lastIndex);return r===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=r+1,this.lex()}return new _a(n,new Wo(this,t,this.tokenRegex.lastIndex))}}class hwe{constructor(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new Ke("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(e[t]==null?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,i){if(i===void 0&&(i=!1),i){for(var n=0;n<this.undefStack.length;n++)delete this.undefStack[n][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var r=this.undefStack[this.undefStack.length-1];r&&!r.hasOwnProperty(e)&&(r[e]=this.current[e])}t==null?delete this.current[e]:this.current[e]=t}}var dwe=AU;j("\\noexpand",function(s){var e=s.popToken();return s.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});j("\\expandafter",function(s){var e=s.popToken();return s.expandOnce(!0),{tokens:[e],numArgs:0}});j("\\@firstoftwo",function(s){var e=s.consumeArgs(2);return{tokens:e[0],numArgs:0}});j("\\@secondoftwo",function(s){var e=s.consumeArgs(2);return{tokens:e[1],numArgs:0}});j("\\@ifnextchar",function(s){var e=s.consumeArgs(3);s.consumeSpaces();var t=s.future();return e[0].length===1&&e[0][0].text===t.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});j("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");j("\\TextOrMath",function(s){var e=s.consumeArgs(2);return s.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var hB={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};j("\\char",function(s){var e=s.popToken(),t,i="";if(e.text==="'")t=8,e=s.popToken();else if(e.text==='"')t=16,e=s.popToken();else if(e.text==="`")if(e=s.popToken(),e.text[0]==="\\")i=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new Ke("\\char` missing argument");i=e.text.charCodeAt(0)}else t=10;if(t){if(i=hB[e.text],i==null||i>=t)throw new Ke("Invalid base-"+t+" digit "+e.text);for(var n;(n=hB[s.future().text])!=null&&n<t;)i*=t,i+=n,s.popToken()}return"\\@char{"+i+"}"});var q9=(s,e,t,i)=>{var n=s.consumeArg().tokens;if(n.length!==1)throw new Ke("\\newcommand's first argument must be a macro name");var r=n[0].text,o=s.isDefined(r);if(o&&!e)throw new Ke("\\newcommand{"+r+"} attempting to redefine "+(r+"; use \\renewcommand"));if(!o&&!t)throw new Ke("\\renewcommand{"+r+"} when command "+r+" does not yet exist; use \\newcommand");var a=0;if(n=s.consumeArg().tokens,n.length===1&&n[0].text==="["){for(var l="",c=s.expandNextToken();c.text!=="]"&&c.text!=="EOF";)l+=c.text,c=s.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new Ke("Invalid number of arguments: "+l);a=parseInt(l),n=s.consumeArg().tokens}return o&&i||s.macros.set(r,{tokens:n,numArgs:a}),""};j("\\newcommand",s=>q9(s,!1,!0,!1));j("\\renewcommand",s=>q9(s,!0,!1,!1));j("\\providecommand",s=>q9(s,!0,!0,!0));j("\\message",s=>{var e=s.consumeArgs(1)[0];return console.log(e.reverse().map(t=>t.text).join("")),""});j("\\errmessage",s=>{var e=s.consumeArgs(1)[0];return console.error(e.reverse().map(t=>t.text).join("")),""});j("\\show",s=>{var e=s.popToken(),t=e.text;return console.log(e,s.macros.get(t),yh[t],hn.math[t],hn.text[t]),""});j("\\bgroup","{");j("\\egroup","}");j("~","\\nobreakspace");j("\\lq","`");j("\\rq","'");j("\\aa","\\r a");j("\\AA","\\r A");j("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}");j("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");j("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}");j("ℬ","\\mathscr{B}");j("ℰ","\\mathscr{E}");j("ℱ","\\mathscr{F}");j("ℋ","\\mathscr{H}");j("ℐ","\\mathscr{I}");j("ℒ","\\mathscr{L}");j("ℳ","\\mathscr{M}");j("ℛ","\\mathscr{R}");j("ℭ","\\mathfrak{C}");j("ℌ","\\mathfrak{H}");j("ℨ","\\mathfrak{Z}");j("\\Bbbk","\\Bbb{k}");j("·","\\cdotp");j("\\llap","\\mathllap{\\textrm{#1}}");j("\\rlap","\\mathrlap{\\textrm{#1}}");j("\\clap","\\mathclap{\\textrm{#1}}");j("\\mathstrut","\\vphantom{(}");j("\\underbar","\\underline{\\text{#1}}");j("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');j("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}");j("\\ne","\\neq");j("≠","\\neq");j("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}");j("∉","\\notin");j("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}");j("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}");j("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}");j("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}");j("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}");j("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}");j("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}");j("⟂","\\perp");j("‼","\\mathclose{!\\mkern-0.8mu!}");j("∌","\\notni");j("⌜","\\ulcorner");j("⌝","\\urcorner");j("⌞","\\llcorner");j("⌟","\\lrcorner");j("©","\\copyright");j("®","\\textregistered");j("️","\\textregistered");j("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');j("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');j("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');j("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');j("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");j("⋮","\\vdots");j("\\varGamma","\\mathit{\\Gamma}");j("\\varDelta","\\mathit{\\Delta}");j("\\varTheta","\\mathit{\\Theta}");j("\\varLambda","\\mathit{\\Lambda}");j("\\varXi","\\mathit{\\Xi}");j("\\varPi","\\mathit{\\Pi}");j("\\varSigma","\\mathit{\\Sigma}");j("\\varUpsilon","\\mathit{\\Upsilon}");j("\\varPhi","\\mathit{\\Phi}");j("\\varPsi","\\mathit{\\Psi}");j("\\varOmega","\\mathit{\\Omega}");j("\\substack","\\begin{subarray}{c}#1\\end{subarray}");j("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");j("\\boxed","\\fbox{$\\displaystyle{#1}$}");j("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");j("\\implies","\\DOTSB\\;\\Longrightarrow\\;");j("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");j("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");j("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var dB={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};j("\\dots",function(s){var e="\\dotso",t=s.expandAfterFuture().text;return t in dB?e=dB[t]:(t.slice(0,4)==="\\not"||t in hn.math&&Tt.contains(["bin","rel"],hn.math[t].group))&&(e="\\dotsb"),e});var K9={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};j("\\dotso",function(s){var e=s.future().text;return e in K9?"\\ldots\\,":"\\ldots"});j("\\dotsc",function(s){var e=s.future().text;return e in K9&&e!==","?"\\ldots\\,":"\\ldots"});j("\\cdots",function(s){var e=s.future().text;return e in K9?"\\@cdots\\,":"\\@cdots"});j("\\dotsb","\\cdots");j("\\dotsm","\\cdots");j("\\dotsi","\\!\\cdots");j("\\dotsx","\\ldots\\,");j("\\DOTSI","\\relax");j("\\DOTSB","\\relax");j("\\DOTSX","\\relax");j("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");j("\\,","\\tmspace+{3mu}{.1667em}");j("\\thinspace","\\,");j("\\>","\\mskip{4mu}");j("\\:","\\tmspace+{4mu}{.2222em}");j("\\medspace","\\:");j("\\;","\\tmspace+{5mu}{.2777em}");j("\\thickspace","\\;");j("\\!","\\tmspace-{3mu}{.1667em}");j("\\negthinspace","\\!");j("\\negmedspace","\\tmspace-{4mu}{.2222em}");j("\\negthickspace","\\tmspace-{5mu}{.277em}");j("\\enspace","\\kern.5em ");j("\\enskip","\\hskip.5em\\relax");j("\\quad","\\hskip1em\\relax");j("\\qquad","\\hskip2em\\relax");j("\\tag","\\@ifstar\\tag@literal\\tag@paren");j("\\tag@paren","\\tag@literal{({#1})}");j("\\tag@literal",s=>{if(s.macros.get("\\df@tag"))throw new Ke("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});j("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");j("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");j("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");j("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");j("\\newline","\\\\\\relax");j("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var qU=et(Bl["Main-Regular"][84][1]-.7*Bl["Main-Regular"][65][1]);j("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+qU+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");j("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+qU+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");j("\\hspace","\\@ifstar\\@hspacer\\@hspace");j("\\@hspace","\\hskip #1\\relax");j("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");j("\\ordinarycolon",":");j("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");j("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');j("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');j("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');j("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');j("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');j("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');j("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');j("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');j("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');j("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');j("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');j("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');j("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');j("∷","\\dblcolon");j("∹","\\eqcolon");j("≔","\\coloneqq");j("≕","\\eqqcolon");j("⩴","\\Coloneqq");j("\\ratio","\\vcentcolon");j("\\coloncolon","\\dblcolon");j("\\colonequals","\\coloneqq");j("\\coloncolonequals","\\Coloneqq");j("\\equalscolon","\\eqqcolon");j("\\equalscoloncolon","\\Eqqcolon");j("\\colonminus","\\coloneq");j("\\coloncolonminus","\\Coloneq");j("\\minuscolon","\\eqcolon");j("\\minuscoloncolon","\\Eqcolon");j("\\coloncolonapprox","\\Colonapprox");j("\\coloncolonsim","\\Colonsim");j("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");j("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");j("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");j("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");j("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}");j("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");j("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");j("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");j("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");j("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");j("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");j("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");j("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");j("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}");j("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}");j("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}");j("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}");j("\\nleqq","\\html@mathml{\\@nleqq}{≰}");j("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}");j("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}");j("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}");j("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}");j("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}");j("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}");j("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}");j("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}");j("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}");j("\\imath","\\html@mathml{\\@imath}{ı}");j("\\jmath","\\html@mathml{\\@jmath}{ȷ}");j("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}");j("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}");j("⟦","\\llbracket");j("⟧","\\rrbracket");j("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}");j("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}");j("⦃","\\lBrace");j("⦄","\\rBrace");j("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}");j("⦵","\\minuso");j("\\darr","\\downarrow");j("\\dArr","\\Downarrow");j("\\Darr","\\Downarrow");j("\\lang","\\langle");j("\\rang","\\rangle");j("\\uarr","\\uparrow");j("\\uArr","\\Uparrow");j("\\Uarr","\\Uparrow");j("\\N","\\mathbb{N}");j("\\R","\\mathbb{R}");j("\\Z","\\mathbb{Z}");j("\\alef","\\aleph");j("\\alefsym","\\aleph");j("\\Alpha","\\mathrm{A}");j("\\Beta","\\mathrm{B}");j("\\bull","\\bullet");j("\\Chi","\\mathrm{X}");j("\\clubs","\\clubsuit");j("\\cnums","\\mathbb{C}");j("\\Complex","\\mathbb{C}");j("\\Dagger","\\ddagger");j("\\diamonds","\\diamondsuit");j("\\empty","\\emptyset");j("\\Epsilon","\\mathrm{E}");j("\\Eta","\\mathrm{H}");j("\\exist","\\exists");j("\\harr","\\leftrightarrow");j("\\hArr","\\Leftrightarrow");j("\\Harr","\\Leftrightarrow");j("\\hearts","\\heartsuit");j("\\image","\\Im");j("\\infin","\\infty");j("\\Iota","\\mathrm{I}");j("\\isin","\\in");j("\\Kappa","\\mathrm{K}");j("\\larr","\\leftarrow");j("\\lArr","\\Leftarrow");j("\\Larr","\\Leftarrow");j("\\lrarr","\\leftrightarrow");j("\\lrArr","\\Leftrightarrow");j("\\Lrarr","\\Leftrightarrow");j("\\Mu","\\mathrm{M}");j("\\natnums","\\mathbb{N}");j("\\Nu","\\mathrm{N}");j("\\Omicron","\\mathrm{O}");j("\\plusmn","\\pm");j("\\rarr","\\rightarrow");j("\\rArr","\\Rightarrow");j("\\Rarr","\\Rightarrow");j("\\real","\\Re");j("\\reals","\\mathbb{R}");j("\\Reals","\\mathbb{R}");j("\\Rho","\\mathrm{P}");j("\\sdot","\\cdot");j("\\sect","\\S");j("\\spades","\\spadesuit");j("\\sub","\\subset");j("\\sube","\\subseteq");j("\\supe","\\supseteq");j("\\Tau","\\mathrm{T}");j("\\thetasym","\\vartheta");j("\\weierp","\\wp");j("\\Zeta","\\mathrm{Z}");j("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");j("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");j("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");j("\\bra","\\mathinner{\\langle{#1}|}");j("\\ket","\\mathinner{|{#1}\\rangle}");j("\\braket","\\mathinner{\\langle{#1}\\rangle}");j("\\Bra","\\left\\langle#1\\right|");j("\\Ket","\\left|#1\\right\\rangle");var KU=s=>e=>{var t=e.consumeArg().tokens,i=e.consumeArg().tokens,n=e.consumeArg().tokens,r=e.consumeArg().tokens,o=e.macros.get("|"),a=e.macros.get("\\|");e.macros.beginGroup();var l=d=>g=>{s&&(g.macros.set("|",o),n.length&&g.macros.set("\\|",a));var m=d;if(!d&&n.length){var _=g.future();_.text==="|"&&(g.popToken(),m=!0)}return{tokens:m?n:i,numArgs:0}};e.macros.set("|",l(!1)),n.length&&e.macros.set("\\|",l(!0));var c=e.consumeArg().tokens,u=e.expandTokens([...r,...c,...t]);return e.macros.endGroup(),{tokens:u.reverse(),numArgs:0}};j("\\bra@ket",KU(!1));j("\\bra@set",KU(!0));j("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");j("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");j("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");j("\\angln","{\\angl n}");j("\\blue","\\textcolor{##6495ed}{#1}");j("\\orange","\\textcolor{##ffa500}{#1}");j("\\pink","\\textcolor{##ff00af}{#1}");j("\\red","\\textcolor{##df0030}{#1}");j("\\green","\\textcolor{##28ae7b}{#1}");j("\\gray","\\textcolor{gray}{#1}");j("\\purple","\\textcolor{##9d38bd}{#1}");j("\\blueA","\\textcolor{##ccfaff}{#1}");j("\\blueB","\\textcolor{##80f6ff}{#1}");j("\\blueC","\\textcolor{##63d9ea}{#1}");j("\\blueD","\\textcolor{##11accd}{#1}");j("\\blueE","\\textcolor{##0c7f99}{#1}");j("\\tealA","\\textcolor{##94fff5}{#1}");j("\\tealB","\\textcolor{##26edd5}{#1}");j("\\tealC","\\textcolor{##01d1c1}{#1}");j("\\tealD","\\textcolor{##01a995}{#1}");j("\\tealE","\\textcolor{##208170}{#1}");j("\\greenA","\\textcolor{##b6ffb0}{#1}");j("\\greenB","\\textcolor{##8af281}{#1}");j("\\greenC","\\textcolor{##74cf70}{#1}");j("\\greenD","\\textcolor{##1fab54}{#1}");j("\\greenE","\\textcolor{##0d923f}{#1}");j("\\goldA","\\textcolor{##ffd0a9}{#1}");j("\\goldB","\\textcolor{##ffbb71}{#1}");j("\\goldC","\\textcolor{##ff9c39}{#1}");j("\\goldD","\\textcolor{##e07d10}{#1}");j("\\goldE","\\textcolor{##a75a05}{#1}");j("\\redA","\\textcolor{##fca9a9}{#1}");j("\\redB","\\textcolor{##ff8482}{#1}");j("\\redC","\\textcolor{##f9685d}{#1}");j("\\redD","\\textcolor{##e84d39}{#1}");j("\\redE","\\textcolor{##bc2612}{#1}");j("\\maroonA","\\textcolor{##ffbde0}{#1}");j("\\maroonB","\\textcolor{##ff92c6}{#1}");j("\\maroonC","\\textcolor{##ed5fa6}{#1}");j("\\maroonD","\\textcolor{##ca337c}{#1}");j("\\maroonE","\\textcolor{##9e034e}{#1}");j("\\purpleA","\\textcolor{##ddd7ff}{#1}");j("\\purpleB","\\textcolor{##c6b9fc}{#1}");j("\\purpleC","\\textcolor{##aa87ff}{#1}");j("\\purpleD","\\textcolor{##7854ab}{#1}");j("\\purpleE","\\textcolor{##543b78}{#1}");j("\\mintA","\\textcolor{##f5f9e8}{#1}");j("\\mintB","\\textcolor{##edf2df}{#1}");j("\\mintC","\\textcolor{##e0e5cc}{#1}");j("\\grayA","\\textcolor{##f6f7f7}{#1}");j("\\grayB","\\textcolor{##f0f1f2}{#1}");j("\\grayC","\\textcolor{##e3e5e6}{#1}");j("\\grayD","\\textcolor{##d6d8da}{#1}");j("\\grayE","\\textcolor{##babec2}{#1}");j("\\grayF","\\textcolor{##888d93}{#1}");j("\\grayG","\\textcolor{##626569}{#1}");j("\\grayH","\\textcolor{##3b3e40}{#1}");j("\\grayI","\\textcolor{##21242c}{#1}");j("\\kaBlue","\\textcolor{##314453}{#1}");j("\\kaGreen","\\textcolor{##71B307}{#1}");var GU={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class fwe{constructor(e,t,i){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new hwe(dwe,t.macros),this.mode=i,this.stack=[]}feed(e){this.lexer=new uB(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,i,n;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;t=this.popToken(),{tokens:n,end:i}=this.consumeArg(["]"])}else({tokens:n,start:t,end:i}=this.consumeArg());return this.pushToken(new _a("EOF",i.loc)),this.pushTokens(n),t.range(i,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var t=[],i=e&&e.length>0;i||this.consumeSpaces();var n=this.future(),r,o=0,a=0;do{if(r=this.popToken(),t.push(r),r.text==="{")++o;else if(r.text==="}"){if(--o,o===-1)throw new Ke("Extra }",r)}else if(r.text==="EOF")throw new Ke("Unexpected end of input in a macro argument, expected '"+(e&&i?e[a]:"}")+"'",r);if(e&&i)if((o===0||o===1&&e[a]==="{")&&r.text===e[a]){if(++a,a===e.length){t.splice(-a,a);break}}else a=0}while(o!==0||i);return n.text==="{"&&t[t.length-1].text==="}"&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:n,end:r}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new Ke("The length of delimiters doesn't match the number of args!");for(var i=t[0],n=0;n<i.length;n++){var r=this.popToken();if(i[n]!==r.text)throw new Ke("Use of the macro doesn't match its definition",r)}}for(var o=[],a=0;a<e;a++)o.push(this.consumeArg(t&&t[a+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new Ke("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var t=this.popToken(),i=t.text,n=t.noexpand?null:this._getExpansion(i);if(n==null||e&&n.unexpandable){if(e&&n==null&&i[0]==="\\"&&!this.isDefined(i))throw new Ke("Undefined control sequence: "+i);return this.pushToken(t),!1}this.countExpansion(1);var r=n.tokens,o=this.consumeArgs(n.numArgs,n.delimiters);if(n.numArgs){r=r.slice();for(var a=r.length-1;a>=0;--a){var l=r[a];if(l.text==="#"){if(a===0)throw new Ke("Incomplete placeholder at end of macro body",l);if(l=r[--a],l.text==="#")r.splice(a+1,1);else if(/^[1-9]$/.test(l.text))r.splice(a,2,...o[+l.text-1]);else throw new Ke("Not a valid argument number",l)}}}return this.pushTokens(r),r.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new _a(e)]):void 0}expandTokens(e){var t=[],i=this.stack.length;for(this.pushTokens(e);this.stack.length>i;)if(this.expandOnce(!0)===!1){var n=this.stack.pop();n.treatAsRelax&&(n.noexpand=!1,n.treatAsRelax=!1),t.push(n)}return this.countExpansion(t.length),t}expandMacroAsText(e){var t=this.expandMacro(e);return t&&t.map(i=>i.text).join("")}_getExpansion(e){var t=this.macros.get(e);if(t==null)return t;if(e.length===1){var i=this.lexer.catcodes[e];if(i!=null&&i!==13)return}var n=typeof t=="function"?t(this):t;if(typeof n=="string"){var r=0;if(n.indexOf("#")!==-1)for(var o=n.replace(/##/g,"");o.indexOf("#"+(r+1))!==-1;)++r;for(var a=new uB(n,this.settings),l=[],c=a.lex();c.text!=="EOF";)l.push(c),c=a.lex();l.reverse();var u={tokens:l,numArgs:r};return u}return n}isDefined(e){return this.macros.has(e)||yh.hasOwnProperty(e)||hn.math.hasOwnProperty(e)||hn.text.hasOwnProperty(e)||GU.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return t!=null?typeof t=="string"||typeof t=="function"||!t.unexpandable:yh.hasOwnProperty(e)&&!yh[e].primitive}}var fB=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,Nw=Object.freeze({"₊":"+","₋":"-","₌":"=","₍":"(","₎":")","₀":"0","₁":"1","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9","ₐ":"a","ₑ":"e","ₕ":"h","ᵢ":"i","ⱼ":"j","ₖ":"k","ₗ":"l","ₘ":"m","ₙ":"n","ₒ":"o","ₚ":"p","ᵣ":"r","ₛ":"s","ₜ":"t","ᵤ":"u","ᵥ":"v","ₓ":"x","ᵦ":"β","ᵧ":"γ","ᵨ":"ρ","ᵩ":"ϕ","ᵪ":"χ","⁺":"+","⁻":"-","⁼":"=","⁽":"(","⁾":")","⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","ᴬ":"A","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ⱽ":"V","ᵂ":"W","ᵃ":"a","ᵇ":"b","ᶜ":"c","ᵈ":"d","ᵉ":"e","ᶠ":"f","ᵍ":"g",ʰ:"h","ⁱ":"i",ʲ:"j","ᵏ":"k",ˡ:"l","ᵐ":"m",ⁿ:"n","ᵒ":"o","ᵖ":"p",ʳ:"r",ˢ:"s","ᵗ":"t","ᵘ":"u","ᵛ":"v",ʷ:"w",ˣ:"x",ʸ:"y","ᶻ":"z","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"ϕ","ᵡ":"χ","ᶿ":"θ"}),VL={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},gB={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"};class h4{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new fwe(e,t,this.mode),this.settings=t,this.leftrightDepth=0}expect(e,t){if(t===void 0&&(t=!0),this.fetch().text!==e)throw new Ke("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new _a("}")),this.gullet.pushTokens(e);var i=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,i}parseExpression(e,t){for(var i=[];;){this.mode==="math"&&this.consumeSpaces();var n=this.fetch();if(h4.endOfExpression.indexOf(n.text)!==-1||t&&n.text===t||e&&yh[n.text]&&yh[n.text].infix)break;var r=this.parseAtom(t);if(r){if(r.type==="internal")continue}else break;i.push(r)}return this.mode==="text"&&this.formLigatures(i),this.handleInfixNodes(i)}handleInfixNodes(e){for(var t=-1,i,n=0;n<e.length;n++)if(e[n].type==="infix"){if(t!==-1)throw new Ke("only one infix operator per group",e[n].token);t=n,i=e[n].replaceWith}if(t!==-1&&i){var r,o,a=e.slice(0,t),l=e.slice(t+1);a.length===1&&a[0].type==="ordgroup"?r=a[0]:r={type:"ordgroup",mode:this.mode,body:a},l.length===1&&l[0].type==="ordgroup"?o=l[0]:o={type:"ordgroup",mode:this.mode,body:l};var c;return i==="\\\\abovefrac"?c=this.callFunction(i,[r,e[t],o],[]):c=this.callFunction(i,[r,o],[]),[c]}else return e}handleSupSubscript(e){var t=this.fetch(),i=t.text;this.consume(),this.consumeSpaces();var n;do{var r;n=this.parseGroup(e)}while(((r=n)==null?void 0:r.type)==="internal");if(!n)throw new Ke("Expected group after '"+i+"'",t);return n}formatUnsupportedCmd(e){for(var t=[],i=0;i<e.length;i++)t.push({type:"textord",mode:"text",text:e[i]});var n={type:"text",mode:this.mode,body:t},r={type:"color",mode:this.mode,color:this.settings.errorColor,body:[n]};return r}parseAtom(e){var t=this.parseGroup("atom",e);if(t?.type==="internal"||this.mode==="text")return t;for(var i,n;;){this.consumeSpaces();var r=this.fetch();if(r.text==="\\limits"||r.text==="\\nolimits"){if(t&&t.type==="op"){var o=r.text==="\\limits";t.limits=o,t.alwaysHandleSupSub=!0}else if(t&&t.type==="operatorname")t.alwaysHandleSupSub&&(t.limits=r.text==="\\limits");else throw new Ke("Limit controls must follow a math operator",r);this.consume()}else if(r.text==="^"){if(i)throw new Ke("Double superscript",r);i=this.handleSupSubscript("superscript")}else if(r.text==="_"){if(n)throw new Ke("Double subscript",r);n=this.handleSupSubscript("subscript")}else if(r.text==="'"){if(i)throw new Ke("Double superscript",r);var a={type:"textord",mode:this.mode,text:"\\prime"},l=[a];for(this.consume();this.fetch().text==="'";)l.push(a),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),i={type:"ordgroup",mode:this.mode,body:l}}else if(Nw[r.text]){var c=fB.test(r.text),u=[];for(u.push(new _a(Nw[r.text])),this.consume();;){var d=this.fetch().text;if(!Nw[d]||fB.test(d)!==c)break;u.unshift(new _a(Nw[d])),this.consume()}var g=this.subparse(u);c?n={type:"ordgroup",mode:"math",body:g}:i={type:"ordgroup",mode:"math",body:g}}else break}return i||n?{type:"supsub",mode:this.mode,base:t,sup:i,sub:n}:t}parseFunction(e,t){var i=this.fetch(),n=i.text,r=yh[n];if(!r)return null;if(this.consume(),t&&t!=="atom"&&!r.allowedInArgument)throw new Ke("Got function '"+n+"' with no arguments"+(t?" as "+t:""),i);if(this.mode==="text"&&!r.allowedInText)throw new Ke("Can't use function '"+n+"' in text mode",i);if(this.mode==="math"&&r.allowedInMath===!1)throw new Ke("Can't use function '"+n+"' in math mode",i);var{args:o,optArgs:a}=this.parseArguments(n,r);return this.callFunction(n,o,a,i,e)}callFunction(e,t,i,n,r){var o={funcName:e,parser:this,token:n,breakOnTokenText:r},a=yh[e];if(a&&a.handler)return a.handler(o,t,i);throw new Ke("No function handler for "+e)}parseArguments(e,t){var i=t.numArgs+t.numOptionalArgs;if(i===0)return{args:[],optArgs:[]};for(var n=[],r=[],o=0;o<i;o++){var a=t.argTypes&&t.argTypes[o],l=o<t.numOptionalArgs;(t.primitive&&a==null||t.type==="sqrt"&&o===1&&r[0]==null)&&(a="primitive");var c=this.parseGroupOfType("argument to '"+e+"'",a,l);if(l)r.push(c);else if(c!=null)n.push(c);else throw new Ke("Null argument, please report this as a bug")}return{args:n,optArgs:r}}parseGroupOfType(e,t,i){switch(t){case"color":return this.parseColorGroup(i);case"size":return this.parseSizeGroup(i);case"url":return this.parseUrlGroup(i);case"math":case"text":return this.parseArgumentGroup(i,t);case"hbox":{var n=this.parseArgumentGroup(i,"text");return n!=null?{type:"styling",mode:n.mode,body:[n],style:"text"}:null}case"raw":{var r=this.parseStringGroup("raw",i);return r!=null?{type:"raw",mode:"text",string:r.text}:null}case"primitive":{if(i)throw new Ke("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new Ke("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(i);default:throw new Ke("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,t){var i=this.gullet.scanArgument(t);if(i==null)return null;for(var n="",r;(r=this.fetch()).text!=="EOF";)n+=r.text,this.consume();return this.consume(),i.text=n,i}parseRegexGroup(e,t){for(var i=this.fetch(),n=i,r="",o;(o=this.fetch()).text!=="EOF"&&e.test(r+o.text);)n=o,r+=n.text,this.consume();if(r==="")throw new Ke("Invalid "+t+": '"+i.text+"'",i);return i.range(n,r)}parseColorGroup(e){var t=this.parseStringGroup("color",e);if(t==null)return null;var i=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!i)throw new Ke("Invalid color: '"+t.text+"'",t);var n=i[0];return/^[0-9a-f]{6}$/i.test(n)&&(n="#"+n),{type:"color-token",mode:this.mode,color:n}}parseSizeGroup(e){var t,i=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?t=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):t=this.parseStringGroup("size",e),!t)return null;!e&&t.text.length===0&&(t.text="0pt",i=!0);var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!n)throw new Ke("Invalid size: '"+t.text+"'",t);var r={number:+(n[1]+n[2]),unit:n[3]};if(!sU(r))throw new Ke("Invalid unit: '"+r.unit+"'",t);return{type:"size",mode:this.mode,value:r,isBlank:i}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),t==null)return null;var i=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:i}}parseArgumentGroup(e,t){var i=this.gullet.scanArgument(e);if(i==null)return null;var n=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var r=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:i.loc,body:r};return t&&this.switchMode(n),o}parseGroup(e,t){var i=this.fetch(),n=i.text,r;if(n==="{"||n==="\\begingroup"){this.consume();var o=n==="{"?"}":"\\endgroup";this.gullet.beginGroup();var a=this.parseExpression(!1,o),l=this.fetch();this.expect(o),this.gullet.endGroup(),r={type:"ordgroup",mode:this.mode,loc:Wo.range(i,l),body:a,semisimple:n==="\\begingroup"||void 0}}else if(r=this.parseFunction(t,e)||this.parseSymbol(),r==null&&n[0]==="\\"&&!GU.hasOwnProperty(n)){if(this.settings.throwOnError)throw new Ke("Undefined control sequence: "+n,i);r=this.formatUnsupportedCmd(n),this.consume()}return r}formLigatures(e){for(var t=e.length-1,i=0;i<t;++i){var n=e[i],r=n.text;r==="-"&&e[i+1].text==="-"&&(i+1<t&&e[i+2].text==="-"?(e.splice(i,3,{type:"textord",mode:"text",loc:Wo.range(n,e[i+2]),text:"---"}),t-=2):(e.splice(i,2,{type:"textord",mode:"text",loc:Wo.range(n,e[i+1]),text:"--"}),t-=1)),(r==="'"||r==="`")&&e[i+1].text===r&&(e.splice(i,2,{type:"textord",mode:"text",loc:Wo.range(n,e[i+1]),text:r+r}),t-=1)}}parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var i=t.slice(5),n=i.charAt(0)==="*";if(n&&(i=i.slice(1)),i.length<2||i.charAt(0)!==i.slice(-1))throw new Ke(`\\verb assertion failed --
                    please report what input caused this bug`);return i=i.slice(1,-1),{type:"verb",mode:"text",body:i,star:n}}gB.hasOwnProperty(t[0])&&!hn[this.mode][t[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=gB[t[0]]+t.slice(1));var r=cwe.exec(t);r&&(t=t.substring(0,r.index),t==="i"?t="ı":t==="j"&&(t="ȷ"));var o;if(hn[this.mode][t]){this.settings.strict&&this.mode==="math"&&RD.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var a=hn[this.mode][t].group,l=Wo.range(e),c;if(tbe.hasOwnProperty(a)){var u=a;c={type:"atom",mode:this.mode,family:u,loc:l,text:t}}else c={type:a,mode:this.mode,loc:l,text:t};o=c}else if(t.charCodeAt(0)>=128)this.settings.strict&&(nU(t.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'"'+(" ("+t.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:Wo.range(e),text:t};else return null;if(this.consume(),r)for(var d=0;d<r[0].length;d++){var g=r[0][d];if(!VL[g])throw new Ke("Unknown accent ' "+g+"'",e);var m=VL[g][this.mode]||VL[g].text;if(!m)throw new Ke("Accent "+g+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:Wo.range(e),label:m,isStretchy:!1,isShifty:!0,base:o}}return o}}h4.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var G9=function(e,t){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var i=new h4(e,t);delete i.gullet.macros.current["\\df@tag"];var n=i.parse();if(delete i.gullet.macros.current["\\current@color"],delete i.gullet.macros.current["\\color"],i.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new Ke("\\tag works only in display equations");n=[{type:"tag",mode:"text",body:n,tag:i.subparse([new _a("\\df@tag")])}]}return n},ZU=function(e,t,i){t.textContent="";var n=Z9(e,i).toNode();t.appendChild(n)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),ZU=function(){throw new Ke("KaTeX doesn't work in quirks mode.")});var gwe=function(e,t){var i=Z9(e,t).toMarkup();return i},mwe=function(e,t){var i=new N9(t);return G9(e,i)},YU=function(e,t,i){if(i.throwOnError||!(e instanceof Ke))throw e;var n=we.makeSpan(["katex-error"],[new xa(t)]);return n.setAttribute("title",e.toString()),n.setAttribute("style","color:"+i.errorColor),n},Z9=function(e,t){var i=new N9(t);try{var n=G9(e,i);return xbe(n,e,i)}catch(r){return YU(r,e,i)}},pwe=function(e,t){var i=new N9(t);try{var n=G9(e,i);return kbe(n,e,i)}catch(r){return YU(r,e,i)}},_we="0.16.22",vwe={Span:vv,Anchor:R9,SymbolNode:xa,SvgNode:fu,PathNode:Hh,LineNode:MD},XU={version:_we,render:ZU,renderToString:gwe,ParseError:Ke,SETTINGS_SCHEMA:oC,__parse:mwe,__renderToDomTree:Z9,__renderToHTMLTree:pwe,__setFontMetrics:Kve,__defineSymbol:E,__defineFunction:ot,__defineMacro:j,__domTree:vwe};const bwe="_inline_1yelo_1",wwe="_display_1yelo_5",Cwe="_wrapper_1yelo_9",WD={inline:bwe,display:wwe,wrapper:Cwe};function Nt({children:s}){const e=Ee.useRef(null);return Ee.useEffect(()=>{XU.render(s,e.current,{throwOnError:!1})},[e]),x.jsx("span",{className:WD.inline,ref:e,children:s})}function dh({children:s}){const e=Ee.useRef(null);return Ee.useEffect(()=>{XU.render(s,e.current,{displayMode:!0,throwOnError:!1})},[e]),x.jsx("div",{className:WD.wrapper,children:x.jsx("div",{ref:e,className:WD.display,children:s})})}const ywe="_wrapper_1ku6b_1",Swe="_tip_1ku6b_6",mB={wrapper:ywe,tip:Swe};function Gu({tip:s,children:e}){return x.jsxs("div",{className:mB.wrapper,children:[x.jsx("div",{className:mB.tip,children:s}),e]})}function pB(s){const e={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...s.components};return x.jsxs(x.Fragment,{children:[x.jsx(e.h2,{children:"Binärsystem"}),`
`,x.jsxs(e.p,{children:[`Das Binärsystem ist eines von vielen Zahlensystem. Es ist besonders in der
Informatik sehr verbreitet, da die Grundeinheit des Computers das `,x.jsx(e.code,{children:"Bit"}),` ist,
und somit nur 2 Werte annehmen kann. Für uns scheint das Binärsystem auf den
ersten Blick sehr unintuitiv und kompliziert, da wir uns das Dezimalsystem
gewohnt sind. Die Beherrschung des Binärsystems ist vor allem auch wichtig, um
den folgenden Witz zu verstehen.`]}),`
`,x.jsx(e.pre,{children:x.jsx(e.code,{className:"language-text",children:`Es gitb nur 10 Arten von Menschen, diejenigen die das Binärsystem verstehen und
die anderen.
`})}),`
`,x.jsx(e.h2,{children:"Dezimalsystem"}),`
`,x.jsx(e.p,{children:`Bevor wir uns das Binärsystem aber genauer anschauen, versuchen wir zu
verstehen, wie Zahlensysteme generell funktionieren. Dafür schauen wir und das
Dezimalsystem genauer an, da Sie dieses schon kennen.`}),`
`,x.jsxs(e.p,{children:["Die Zahl ",x.jsx(Nt,{children:"273"}),` im Dezimalsystem, hat einen klaren Wert für Sie,
genau wie die Zahl `,x.jsx(Nt,{children:"721."}),` Für Sie ist auch absolut klar dass
`,x.jsx(Nt,{children:"273 < 721"}),` ist. Dazu müssen Sie nicht mal die ganze Zahl anschauen,
es reicht völlig wenn Sie auf die hunderter Stelle schauen. Aber was genau ist
denn die hunderter Stelle?`]}),`
`,x.jsx(e.p,{children:`Um den Wert einer mehrstelligen Zahl zu erhalten, wenden wir eigentlich immer
einen Trick an. Im Dezimalsystem haben wir diese Stellen sogar benannt. Der
Trick sieht dann wie folgt aus:`}),`
`,x.jsx(dh,{children:String.raw`273 = 2 \cdot 100 + 7 \cdot 10 + 3 \cdot 1`}),`
`,x.jsxs(e.p,{children:[`So können wir den Wert der Zahl ganz einfach berechnen. Da es aber aufwendig
ist, die Zahl immer so aufzuschreiben, schreibt man die Zahl in der Kurzform,
so wie sie auf der linken Seite steht, also `,x.jsx(Nt,{children:"273"}),`. Wir können die
Regel mit der Summe die wir oben verwendet haben, aber noch allgemeiner
schreiben. Wenn wir das machen, dann sollten wir danach jedes beliebige
Zahlensystem verstehen, oder zumindest den Wert der Zahl im Dezimalsystem
berechnen können. Die Regel sieht wie folgt aus:`]}),`
`,x.jsx(dh,{children:String.raw`273 = 2 \cdot 10^2 + 7 \cdot 10^1 + 3 \cdot 10^0`}),`
`,x.jsxs(e.p,{children:["Beginnen wir bei ",x.jsx(Nt,{children:"0"}),` zu zählen, so wie es in der Informatik üblich
ist, dann können wir den Wert einer Stelle immer mit
`,x.jsx(Nt,{children:String.raw`\mathrm{Basis}^\mathrm{Stelle}`}),` darstellen. So kommen
wir auf den Wert der Stelle, also `,x.jsx(Nt,{children:"10^0"}),` für die Einerstelle,
`,x.jsx(Nt,{children:"10^1"})," für die Zehnerstelle, ",x.jsx(Nt,{children:"10^2"}),` für die
Hunderterstelle und so weiter.`]}),`
`,x.jsxs(e.p,{children:[`Der Wert an der jeweiligen Stelle, wird dann mit der Ziffer angegeben. Also die
Zahl `,x.jsx(Nt,{children:"273"})," hat an der Hunderterstelle den folgenden Wert:"]}),`
`,x.jsx(dh,{children:String.raw`2 \cdot 10^2`}),`
`,x.jsx(e.p,{children:"Die gleichen Regeln lassen sich nun auf alle anderen Zahlensysteme anwenden."}),`
`,x.jsx(e.h2,{children:"Ziffern im Binärsystem"}),`
`,x.jsxs(e.p,{children:["Das Binärsystem hat nur 2 Ziffern, die ",x.jsx(Nt,{children:"0"})," und die ",x.jsx(Nt,{children:"1"}),`.
Sie können also Zahlen nur mit diesen beiden Ziffern schreiben, wie zum
Beispiel die Zahl `,x.jsx(Nt,{children:String.raw`10_{\mathrm{Bin}}`}),`. Oftmals
schreiben wir dafür auch `,x.jsx(e.code,{children:"0b10"}),`, wenn es einfacher ist. Das zweite ist auch die
Schreibweise die in der Informatik verbreitet ist, das erste wird mehr in der
Mathematik verwendet.`]}),`
`,x.jsx(e.p,{children:`Aber was hat diese Zahl nun für einen Wert? Das können wir mit der Regel von
oben ganze einfach ausrechnen:`}),`
`,x.jsx(dh,{children:String.raw`1 \cdot 2^1 + 0 \cdot 2^0 = 2_\mathrm{Dec}`}),`
`,x.jsx(e.p,{children:`Genau das Schema können Sie bei allen Binärzahlen anwenden, dann erhalten Sie
immer der Wert im Dezimalsystem.`}),`
`,x.jsxs(Ko,{title:"Aufgabe: Von Binär zu Dezimal",children:[x.jsx(e.p,{children:"Bestimmen Sie den Dezimalwert der folgenden Binärzahlen."}),x.jsxs(e.ul,{children:[`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Gu,{tip:"4",children:x.jsx(e.code,{children:"0b0100"})}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Gu,{tip:"10",children:x.jsx(e.code,{children:"0b1010"})}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Gu,{tip:"1",children:x.jsx(e.code,{children:"0b0001"})}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Gu,{tip:"15",children:x.jsx(e.code,{children:"0b1111"})}),`
`]}),`
`]}),x.jsx(e.p,{children:"Bestimmen Sie auch den Wert von diesen grösseren Binärzahlen"}),x.jsxs(e.ul,{children:[`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Gu,{tip:"75",children:x.jsx(e.code,{children:"0b1000 1011"})}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Gu,{tip:"24",children:x.jsx(e.code,{children:"0b0001 1000"})}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Gu,{tip:"255",children:x.jsx(e.code,{children:"0b1111 1111"})}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Gu,{tip:"240",children:x.jsx(e.code,{children:"0b1111 0000"})}),`
`]}),`
`]}),x.jsxs(e.p,{children:["Die grösste Zahl mit 8 Stellen ist also die Zahl ",x.jsx(e.code,{children:"0b1111 1111"}),`, mit dem
Wert 255. Das ist genau ein `,x.jsx(e.code,{children:"Byte"})," wo alle ",x.jsx(e.code,{children:"Bits"})," auf ",x.jsx(e.code,{children:"1"}),` gesetzt wurden.
Daraus können Sie ablesen das Sie mit einem `,x.jsx(e.code,{children:"Byte"}),` genau 256 Informationen
darstellen können, also die Zahlen von 0 bis 255.`]})]}),`
`,x.jsx(e.h2,{children:"Von der Dezimalzahl zur Binärzahl"}),`
`,x.jsx(e.p,{children:`Dieser Weg wird deutlich weniger oft gebraucht, dennoch schauen wir es kurz an.
Wenn Sie eine Dezimalzahl in eine Binärzahl umwandeln möchten, können Sie mit
einem ganz einfachen Algorithmus vorgehen. Dabei schreiben wir die Binärzahl
von hinten nach vorne.`}),`
`,x.jsxs(e.p,{children:["Nehmen wir als Beispiel die Zahl ",x.jsx(Nt,{children:String.raw`43_\mathrm{Dec}`}),`.
Nun dividieren wir diese Zahl durch 2, und wir notieren den Rest. Wenn es einen
Rest gibt, dann schreiben wir eine `,x.jsx(Nt,{children:"1"}),`. Wenn es keinen Rest gibt,
dann schreiben wir an der Stelle eine `,x.jsx(Nt,{children:"0"}),`. Dann rechnen wir mit dem
Ergebnis weiter, lassen den Rest aber weg. Das machen wir bis wir bei
`,x.jsx(Nt,{children:"0"})," angekommen sind."]}),`
`,x.jsx(dh,{children:String.raw`
  \begin{align*}
  43 : 2 = 21.5 &\Rightarrow \text{0er-Stelle} \Rightarrow 0.5 \cdot 2 = 1 \\
  21 : 2 = 10.5 &\Rightarrow \text{1er-Stelle} \Rightarrow 0.5 \cdot 2 = 1 \\
  10 : 2 = 5 &\Rightarrow \text{2er-Stelle} \Rightarrow 0.0 \cdot 2 = 0 \\
  5 : 2 = 2.5 &\Rightarrow \text{3er-Stelle} \Rightarrow 0.5 \cdot 2 = 1 \\
  2 : 2 = 1 &\Rightarrow \text{4er-Stelle} \Rightarrow 0.0 \cdot 2 = 0 \\
  1 : 2 = 0.5 &\Rightarrow \text{5er-Stelle} \Rightarrow 0.5 \cdot 2 = 1
  \end{align*}
`}),`
`,x.jsxs(e.p,{children:[`Wir erhalten damit also die folgende Binärzahl:
`,x.jsx(Nt,{children:String.raw`101011_\mathrm{Bin}`}),"."]})]})}function xwe(s={}){const{wrapper:e}=s.components||{};return e?x.jsx(e,{...s,children:x.jsx(pB,{...s})}):pB(s)}var zL={},_B;function kwe(){return _B||(_B=1,function(s){(function(e){var t=function(o,a){return new i(o,a).toString()},i=function(o,a){const l=this,c=8;switch(typeof Buffer<"u"&&(o=Buffer.isBuffer(o)&&o||typeof o=="string"&&Buffer.from(o)||o&&o.constructor===Array&&Buffer.from(o)||Buffer.alloc(0)),o=o||[],a=a||{},l.buffer=o,l.bytes_per_line=parseInt(a.width)||16,l.numbering=a.numbering=="none"?"none":"hex_bytes",l.bytes_per_group=2,a.format){case"none":l.bytes_per_group=0;break;case"twos":l.bytes_per_group=1;break;case"eights":l.bytes_per_group=4;break;case"sixteens":l.bytes_per_group=8;break}switch(l.littleEndian=a.littleEndian||!1,l.radix=a.radix||16,l.caps=a.caps=="upper"?"upper":"lower",l.annotate=a.annotate=="none"?"none":"ascii",l.prefix=a.prefix||"",l.indent=a.indent||0,l.html=a.html||!1,l.offset=a.offset||0,l.length=a.length||-1,l.extendedChs=a.extendedChs||!1,l.display_offset=a.display_offset||0,l.offset&&l.offset<l.buffer.length&&(l.buffer=l.buffer.slice(l.offset)),l.length!==-1&&l.length<=l.buffer.length&&(l.buffer=l.buffer.slice(0,l.length)),l.prefix=(l.html?"&nbsp;":" ").repeat(l.indent)+l.prefix,l.hex_line_length=n(l.bytes_per_group,l.radix)*l.bytes_per_line/Math.max(l.bytes_per_group,1),l.bytes_per_group){case 8:case 4:case 2:l.hex_line_length+=Math.floor(l.bytes_per_line/l.bytes_per_group);break;case 1:l.hex_line_length+=l.bytes_per_line+3;break;case 0:l.hex_line_length+=2;break}l.bytes_per_group=Math.min(l.bytes_per_group,l.bytes_per_line),this.toString=function(){var y="",S=l.offset+l.display_offset,k=!1;l.html&&(y+=`<div class='hexy'>
`);for(var L=0;L<l.buffer.length;L+=l.bytes_per_line){const A=Math.min(L+l.bytes_per_line,l.buffer.length),I=l.buffer.slice(L,A);if(l.html&&(y+="<div class='"+d(S,c,16)+(k?"  odd":" even")+"'>",k=!k),y+=l.prefix,l.numbering==="hex_bytes"&&(y+=d(S,c,16)+": "),y+=u(I,l.bytes_per_line,l.bytes_per_group,l.radix,l.littleEndian),l.annotate==="ascii"){var T="";switch(I.constructor){case Array:T=String.fromCharCode.apply(l,I);break;case Uint8Array:I.forEach(O=>T+=String.fromCharCode(O));break;default:T=I.toString("latin1")}y+=" "+(l.html?w(T):v(T))}y+=l.html?`</div>
`:`
`,S+=l.bytes_per_line}return l.html&&(y+=`</div>
`),y};var u=function(y,S,k,L,T){var A="";const I=k==0?"":" ",O=n(k,L),F=(S-y.length)*(k==0?O:(O+1)/k);k==0&&(k=1);const J=T?k-1:0,Y=T?-1:k,G=T?-1:1;for(var ie=0;ie<y.length/k;++ie){for(var Z=k<4?0:BigInt(0),ue=J;ue!=Y;ue+=G){const ae=ie*k+ue;if(ae>=y.length)break;k<4?Z=Z*256+((y.constructor==String?y.codePointAt(ae):y[ae])&255):Z=BigInt(Z)*BigInt(256)+BigInt((y.constructor==String?y.codePointAt(ae):y[ae])&255)}const ye=Z.toString(L);for(var be=0;be<O-ye.length;be++)A+="0";A+=ye,A+=I,l.caps==="upper"&&(A=A.toUpperCase())}return y.length<S&&(A+=(l.html?"&nbsp;":" ").repeat(F)),A=g(A,l.hex_line_length),A},d=function(y,S,k){const L=y.toString(k);return"0".repeat(S-L.length)+L},g=function(y,S){const k=S-y.length-1;return k>0&&(y+=(l.html?"&nbsp;":" ").repeat(k)),y};const m=/[^\x20-\x7f]/g,_=/[\x00-\x1f]/g;var v=function(y){return y.replace(l.extendedChs?_:m,".")},w=function(y){return y=y.replace(/&/g,"&amp;"),y=y.replace(/</g,"&lt;"),y=y.replace(/>/g,"&gt;"),l.extendedChs?(y=y.replace(/\'/g,"&apos;"),y=y.replace(/\"/g,"&quot;"),y=y.replace(m,function(S){return S=S.codePointAt(0),"&#x"+S.toString(16)+";"})):y=y.replace(m,"."),y}};i.VERSION="0.3.4";var n=function(o,a){var l=2;switch(o==0&&(o=1),a){case 2:l=o*8;break;case 8:switch(o){case 1:l=3;break;case 2:l=6;break;case 4:l=11;break;case 8:l=22;break}break;case 10:switch(o){case 1:l=3;break;case 2:l=6;break;case 4:l=10;break;case 8:l=20;break}break;case 16:l=2*o;break}return l},r;r=s,r.hexy=t,r.Hexy=i,r.maxnumberlen=n})()}(zL)),zL}var Lwe=kwe();function Dwe(){const[s,e]=Ee.useState("Hello World!"),[t,i]=Ee.useState({width:4,numbering:"none",format:"twos",radix:16}),n=Ee.useRef(null),r=a=>{i(l=>({...l,radix:a}))},o=a=>{e(a)};return x.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[x.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"1rem"},children:[x.jsx("button",{onClick:()=>r(2),children:"Binary"}),x.jsx("button",{onClick:()=>r(8),children:"Octal"}),x.jsx("button",{onClick:()=>r(10),children:"Decimal"}),x.jsx("button",{onClick:()=>r(16),children:"Hexadecimal"})]}),x.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",gap:"1em"},children:[x.jsx(s4,{language:"json",value:s,height:"300px",theme:"vs-dark",onChange:o}),x.jsx("pre",{ref:n,style:{border:"1px solid black",width:"320px",height:"300px",marginRight:"1em",overflowY:"scroll"},children:Lwe.hexy(s,t)})]})]})}function vB(s){const e={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...s.components};return x.jsxs(x.Fragment,{children:[x.jsx(e.h2,{children:"Hexadezimalsystem"}),`
`,x.jsxs(e.p,{children:[`Neben dem Dezimal- und dem Binärzahlensystem, gibt es noch weitere
Zahlensysteme, wie zum Beispiel das Hexadezimalsystem. Das Hexadezimalsystem
ist in der Informatik sehr praktisch, da man ein `,x.jsx(e.code,{children:"Byte"}),` immer mit genau 2
Stellen darstellen kann. Man braucht also deutlich weniger Platz wie beim
Binärsystem und das ganze wird viel einfacher zu lesen. Sie denken nun
wahrscheinlich; wieso denn nicht direkt das Dezimalsystem, das wäre ja am
einfachsten zum lesen. Das mag so sein, aber das Dezimalsystem geht mit einem
`,x.jsx(e.code,{children:"Byte"})," nicht gut auf. Denn ein ",x.jsx(e.code,{children:"Byte"})," kann die Zahlen ",x.jsx(Nt,{children:"0"}),` bis
`,x.jsx(Nt,{children:"255"}),` darstellen. Das bedeutet wir brauchen 3 Stellen für das
Dezimalsystem, und können gut `,x.jsx(Nt,{children:String.raw`\frac{3}{4}`}),` der Werte
nicht verwenden. Weitere Gründe sind das umrechnen in das Binärsystem, das über
das Hexadezimalsystem einfacher ist. Aber was genau ist jetzt das
Hexadezimalsystem?`]}),`
`,x.jsxs(Ko,{title:"16er-System",children:[x.jsxs(e.p,{children:["Das Hexadezimalsystem ist das Zahlensystem mit der Basis 16, was von ",x.jsx(e.code,{children:"hexa     := 6"})," und ",x.jsx(e.code,{children:"dezimal := 10"}),`, kommt. Ansonsten funktioniert es genau gleich
wie die anderen Zahlensysteme, wir können also den Wert von einer
Hexadezimalzahl ganz einfach im Dezimalsystem berechnen.`]}),x.jsx(dh,{children:String.raw`
      92_{\mathrm{Hex}} = 9 \cdot 16^1 + 2 \cdot 16^0 = 146
  `}),x.jsxs(e.p,{children:["Die Zahl ist ja bereits sehr gross mit einer ",x.jsx(Nt,{children:"9"}),` an der ersten
Stelle, aber noch weit weg von der `,x.jsx(Nt,{children:"255"}),`. Wie können wir denn
noch grössere Zahlen machen?`]})]}),`
`,x.jsx(e.h3,{children:"Ziffern erweitern"}),`
`,x.jsxs(e.p,{children:["Im Binärsystem hatten wir nur die ",x.jsx(Nt,{children:"0"})," und ",x.jsx(Nt,{children:"1"}),` als Ziffern
gebraucht. Im Dezimalsystem brauchen wir alle Ziffern die wir kennen. Nun
brauchen wir aber 16 Ziffern, da wir sonst nicht alle Werte darstellen können.
Deshalb müssen wir die Ziffern einfach erweitern. Das machen wir indem wir das
Alphabet zur Hilfe nehmen. Unsere Ziffern gehen also von `,x.jsx(Nt,{children:"0"}),` bis
`,x.jsx(Nt,{children:String.raw`\mathrm{F}`}),", und haben die folgenden Werte:"]}),`
`,x.jsxs(e.ul,{children:[`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`0 \rightarrow 0`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`1 \rightarrow 1`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`2 \rightarrow 2`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`3 \rightarrow 3`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`4 \rightarrow 4`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`5 \rightarrow 5`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`6 \rightarrow 6`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`7 \rightarrow 7`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`8 \rightarrow 8`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`9 \rightarrow 9`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`\mathrm{A} \rightarrow 10`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`\mathrm{B} \rightarrow 11`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`\mathrm{C} \rightarrow 12`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`\mathrm{D} \rightarrow 13`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`\mathrm{E} \rightarrow 14`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`\mathrm{F} \rightarrow 15`}),`
`]}),`
`]}),`
`,x.jsx(e.p,{children:"Nun können wir also den grössten Wert einer 2-stelligen Hexzahl berechnen:"}),`
`,x.jsx(dh,{children:String.raw`
  \mathrm{FF}_\mathrm{Hex} = 15 \cdot 16^1 + 15 \cdot 16^0 = 240 + 15 = 255 
`}),`
`,x.jsxs(e.p,{children:["Das ist unglaublich praktisch für uns, denn so können wir ein ",x.jsx(e.code,{children:"Byte"}),` mit immer
genau 2 Stellen einer Hexzahl angeben. Das ist einer der Gründe weshalb das
Hexadezimalsystem in der Informatik gern verwendet wurde und immer noch wird.`]}),`
`,x.jsxs(Ko,{title:"Aufgabe: Werte im Dezimalsystem berechnen",children:[x.jsx(e.p,{children:"Berechnen Sie die folgenden Werte im Dezimalsystem:"}),x.jsxs(e.ul,{children:[`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`62_\mathrm{Hex}`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`\mathrm{F0}_\mathrm{Hex}`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`\mathrm{0F}_\mathrm{Hex}`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`\mathrm{AB}_\mathrm{Hex}`}),`
`]}),`
`]})]}),`
`,x.jsx(e.h3,{children:"Von Dezimal zu Hex"}),`
`,x.jsxs(e.p,{children:[`Auch beim Hexadezimalsystem kann es vorkommen das wir eine Zahl vom
Dezimalsystem ins Hexadezimalsystem bringen müssen. Auch das geht recht
einfach, wir dividieren die Hexzahl durch 16 und der Rest ergibt die nächste
Stelle. Wenn das Resultat grösser als 16 ist, dann wiederholen wir den Vorgang
bis es nicht mehr möglich ist. Oder anders formuliert, wir schauen welche
Stellen aktiv sind. Wir möchten dafür die Zahl
`,x.jsx(Nt,{children:String.raw`6754_\mathrm{Dec}`}),` in eine Hexzahl umwandeln. Wir
dividieren also immer durch 16 und schauen uns den Rest an.`]}),`
`,x.jsx(dh,{children:String.raw`
  \begin{align*}
  6754 : 16 = 422.125 &\Rightarrow \text{0er-Stelle} \Rightarrow 0.125 \cdot 16 = 2 \\
  422 : 16 = 26.375 &\Rightarrow \text{1er-Stelle} \Rightarrow 0.375 \cdot 16 = 6 \\
  26 : 16 = 1.625 &\Rightarrow \text{2er-Stelle} \Rightarrow 0.625 \cdot 16 = 10 \\
  1 : 16 = 0.0625 &\Rightarrow \text{3er-Stelle} \Rightarrow 0.0625 \cdot 16 = 1 \\
  \end{align*}
`}),`
`,x.jsxs(e.p,{children:[`Dann können wir die Zahl einfach an den Stellen ablesen. Wir müssen nur noch
die Ziffern ersetzen, falls eine Stelle einen Wert von 10 oder mehr hat. Hier
ergibt sich also die Zahl
`,x.jsx(Nt,{children:String.raw`\mathrm{1A62}_\mathrm{Hex}`}),`. Somit können wir also in
beide Richtungen umrechnen.`]}),`
`,x.jsxs(Ko,{title:"Aufgabe: Umrechnen ins Hexadezimalsystem",children:[x.jsx(e.p,{children:"Bestimmen Sie die Werte der folgenden Zahlen im Hexadezimalsystem:"}),x.jsxs(e.ul,{children:[`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`\mathrm{16}_\mathrm{Dec}`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`\mathrm{162}_\mathrm{Dec}`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`\mathrm{240}_\mathrm{Dec}`}),`
`]}),`
`,x.jsxs(e.li,{children:[`
`,x.jsx(Nt,{children:String.raw`\mathrm{255}_\mathrm{Dec}`}),`
`]}),`
`]})]}),`
`,x.jsx(e.h3,{children:"Warum das Hexadezimalsystem?"}),`
`,x.jsxs(e.p,{children:[`Auf modernen Computern wird das Hexadezimalsystem nicht mehr explizit
verwendet, denn es ist für uns unintuitiv und mühsam zum rechnen. Auf modernen
Computern gibt es so viele Schichten, die alles für Sie abstrahieren, das Sie
fast gar nicht in Berührung mit den `,x.jsx(e.code,{children:"Bits"})," und ",x.jsx(e.code,{children:"Bytes"}),` kommen. Bei der
Entstehung der Computer, war das noch ganz anders. In den Anfangszeiten wurde
noch direkt mit `,x.jsx(e.code,{children:"Bytes"})," gearbeitet. Da ein ",x.jsx(e.code,{children:"Byte"}),` aber 8 Stellen hat, und nur
aus `,x.jsx(e.code,{children:"0"})," und ",x.jsx(e.code,{children:"1"}),` besteht, passieren da recht schnell Fehler. Deshalb ist das
Hexadezimalsystem besser, denn man kann die Zahlen kompakter darstellen (nur 2
Stellen) und es wird auch übersichtlicher und einfacher zu merken.`]}),`
`,x.jsxs(e.p,{children:[`Heute finden Sie noch sehr oft Überreste vom Hexadezimalsystem im Umgang mit
dem Computer. Eine ganz normale Textdatei auf dem Computer ist immer nur im
ASCII-Code gespeichert, diese Datei lässt sich dann `,x.jsx(e.code,{children:"Byte"})," für ",x.jsx(e.code,{children:"Byte"}),` im
Hexadezimalcode lesen und mit Hilfe der ASCII-Tabelle direkt übersetzen. Das
folgende Beispiel zeigt wie so eine Datei aussehen könnte. Auf der rechten
Seite haben Sie den Inhalt der Datei, so wie wir als Menschen das ganze gerne
lesen würden, und auf der rechten Seite, finden Sie die Datei im
Hexadezimalformat.`]}),`
`,x.jsx(Dwe,{}),`
`,x.jsx(e.h3,{children:"Farben und Hexadezimalsystem"}),`
`,x.jsxs(e.p,{children:[`Das Hexadezimalsystem ist auch bei den Farben sehr verbreitet, oder war es
früher einmal. Wenn Sie auf dem Computer eine Farbe darstellen möchten, also
auf dem Bildschirm, dann können Sie jede beliebige Farbe erzeugen, indem Sie
das Licht von 3 Grundfarben mischen, und zwar von `,x.jsx(e.code,{children:"rot"}),", ",x.jsx(e.code,{children:"grün"})," und ",x.jsx(e.code,{children:"blau"}),`. Die
Intensität der einzelnen Farben, können Sie jeweils von 0 bis 255 abstufen. So
brauchen Sie genau 1 `,x.jsx(e.code,{children:"Byte"})," für jeden Farbkanal, also 3 ",x.jsx(e.code,{children:"Bytes"}),` pro Pixel. Die
Farben werden dann immer so angegeben: `,x.jsx(e.code,{children:"#FF0037"}),`. Das wäre eine Farbe mit sehr
viel `,x.jsx(e.code,{children:"rot"}),", kein ",x.jsx(e.code,{children:"grün"})," und ein klein wenig ",x.jsx(e.code,{children:"blau"}),"."]})]})}function Ewe(s={}){const{wrapper:e}=s.components||{};return e?x.jsx(e,{...s,children:x.jsx(vB,{...s})}):vB(s)}const Twe="/gym-inf/assets/notentabelle-6xgMTh6X.png";function bB(s){const e={a:"a",code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...s.components};return x.jsxs(x.Fragment,{children:[x.jsx(e.h2,{children:"Excel"}),`
`,x.jsxs(e.p,{children:[x.jsx(e.code,{children:"Excel"})," ist ein Werkzeug für die Tabellenkalkulation. ",x.jsx(e.code,{children:"Excel"}),` ist das Produkt
von Microsoft und ist in der Industrie und sonst so weit verbreitet, das man
`,x.jsx(e.code,{children:"Excel"}),` gerne als synonym für Tabellenkalkulation verwendet. Es gibt aber noch
viele andere Werkzeuge, mit denen man die gleichen Aufgaben lösen kann. Diese
Werkzeuge sind aber untereinander oftmals nicht ganz kompatibel. Auch innerhalb
der gleichen Anwendung ist nicht immer alles kompatibel. Gerade bei Excel gibt
es so viele verschiedene Versionen, da kann es schon mal passieren, das etwas
plötzlich nicht mehr funktioniert. Daher ist es für uns wichtig, das wir alle
die gleiche Version verwenden, oder so gleich wie möglich. Damit dies auch
sicher der Fall ist, werden wir alles im Webbrowser machen. Wenn Sie das Risiko
eingehen möchten und das ganze in der Desktop-App machen möchten, können Sie
dies gerne machen, es könnten aber unerwartet Probleme auftreten und es wird
nicht alles gleich aussehen. Und Sie wissen nicht unbedingt wo Ihre Daten
gespeichert werden. Wenn wir über den Browser arbeiten, dann sollte alles auf
Ihrem Schulaccount liegen, und Sie können Dateien einfach teilen bzw. abgeben.`]}),`
`,x.jsx(e.h2,{children:"Tabellenkalkulation"}),`
`,x.jsxs(e.p,{children:[`Was aber ist Tabellenkalkulation. Das ist sehr schwer genau zu definieren, im
Prinzip alles was mit der Verarbeitung von Daten in einer Tabelle zu tun hat.
Aber auch das führen von Listen, das Darstellen von Stundenplänen oder das
Berechnen Ihrer Zeugnisnoten können Sie mit einer Tabellenkalkulation lösen.
Nicht immer ist die Tabellenkalkulation das beste Werkzeug. Zum Beispiel
sollten Daten nur in einer Tabelle gespeichert werden, die Auswertung sollte
dann professionell mit einer Programmiersprache wie `,x.jsx(e.code,{children:"Python"}),` gemacht werden.
Dies ist für die meisten Benutzer aber zu viel, deshalb können einfache
Datenauswertungen auch in einer Tabellenkalkulation gemacht werden.`]}),`
`,x.jsx(e.p,{children:`Die Tabellenkalkulation ist ein sehr mächtiges Werkzeug, und kann wie bereits
erwähnt unterschiedliche Aufgaben lösen. Meistens gibt es eine bessere Lösung,
aber die Tabellenkalkulation ist oft die einfachste, die jede Person schnell
zum laufen bringen kann. Wir möchten uns hier einige Anwendungsfälle einer
Tabellenkalkulation anschauen. Dabei hinterfragen wir aber jedesmal ob es nicht
besser wäre, eine eigene App dafür zu haben, oder ob es andere Werkzeuge dafür
gibt. Denn Tabellenkalkulation wird in der Industrie viel zu viel eingesetzt,
auch wenn dies gar nicht nötig wäre.`}),`
`,x.jsxs(Ko,{title:"Beispiel: Notentabelle",children:[x.jsxs(e.p,{children:[`Sie haben sicher bereits Ihre eigene Methode wie Sie Ihre Zeugnisnoten
ausrechnen. Oder Sie rechnen es garnicht aus und schauen die Noten einfach
im Schulnetz nach. Hier möchten wir uns aber ein Beispiel für eine solche
Notentabelle anschauen, und die einfachsten Features von `,x.jsx(e.code,{children:"Excel"}),`
kennenlernen.`]}),x.jsx(e.p,{children:"Hier sehen Sie das Endresultat, wie diese Tabelle dann aussehen könnte."}),x.jsx(T9,{src:Twe,imgStyle:{width:"80%"}}),x.jsx(e.p,{children:`Im Video weiter unten, können Sie die wichtigsten Teile von dieser Tabelle
Schritt-für-Schritt mitarbeiten.`})]}),`
`,x.jsx(e.h2,{children:"Videoanleitung"}),`
`,x.jsxs(e.p,{children:[`Hier finden Sie eine Anleitung wie man mit Excel umgehen kann und eine erste
Tabelle erstellen kann. Damit Sie dem Video auch folgen können, müssen Sie sich
zuerst noch bei Ihrer Schul-Onedrive anmelden: `,x.jsx(e.a,{href:"https://sblch-my.sharepoint.com/my",children:"https://sblch-my.sharepoint.com/my"})]}),`
`,x.jsx(E9,{url:"wNUOuEa7fYc"}),`
`,x.jsx(e.h2,{children:"Weitere Befehle"}),`
`,x.jsxs(e.p,{children:[x.jsx(e.code,{children:"Excel"}),` hat eine riesige Palette an Funktionen und Befehlen die Sie verwenden
können. Im Video wurden nicht alle gezeigt die in der ursprünglichen Tabelle
verwendet wurden.`]}),`
`,x.jsx(e.p,{children:`Versuchen Sie die fehlenden Zellen aus dem Video mit den folgenden Befehlen zu
ergänzen:`}),`
`,x.jsxs(e.ul,{children:[`
`,x.jsx(e.li,{children:x.jsx(e.code,{children:"=SUMMEWENN(...)"})}),`
`,x.jsx(e.li,{children:x.jsx(e.code,{children:"=ZÄHLENWENN(...)"})}),`
`]}),`
`,x.jsx(e.h2,{children:"Gelerntes Abspeichern"}),`
`,x.jsxs(e.p,{children:[`Wenn Sie fertig sind mit dieser Tabelle und Sie diese für sich selbst angepasst
haben, dann halten Sie das gelernte in irgend einer Form fest. Am besten machen
Sie das mit `,x.jsx(e.a,{href:"https://obsidian.md",children:"Obsidian"}),` oder einem anderen Werkzeug das Sie
bereits kennen. Sie können auch in der Tabelle selber Notizen machen, ihr
Wissen wird dann einfach auf verschiedene Tabellen verteilt sein und somit wird
es für Sie schwer alles wieder zu finden.`]})]})}function Nwe(s={}){const{wrapper:e}=s.components||{};return e?x.jsx(e,{...s,children:x.jsx(bB,{...s})}):bB(s)}const Iwe="/gym-inf/assets/excel-spielplan-D1jE9aU3.png";function wB(s){const e={a:"a",code:"code",h2:"h2",p:"p",strong:"strong",...s.components};return x.jsxs(x.Fragment,{children:[x.jsx(e.h2,{children:"Zusammenarbeiten in Excel"}),`
`,x.jsxs(e.p,{children:[`Wie im letzten Kapitel bereits angekündigt, kann Excel für alle möglichen Tasks
verwendet werden. Oftmals auch für Dinge, für die es ursprünglich nicht gemacht
wurde. Dank der Entwicklung von `,x.jsx(e.strong,{children:"Google Spreadsheets"}),`, was nur im Browser und
über die `,x.jsx(e.strong,{children:"Google Drive"}),` verfügbar ist, hat auch Excel nachziehen müssen, und
eine Vollversion des Programms im Browser zur Verfügung zu stellen. Damit sind
die Tage in denen man Excel-Sheets per Email verschickt hat, und niemand mehr
weiss welches die aktuelle Version ist, endlich vorbei. Zusätzlich können die
Sheets sogar gleichzeitig bearbeitet werden, und ermöglichen ganz neue Tasks,
die ursprünglich nicht vorgesehen waren. Wenn sich jeder an einfache Regeln
hält, dann können wir zum Beispiel einen Doodle ganz leicht über Excel
koordinieren, wir müssen nur jedem Bearbeiter einen Link schicken, der das
Sheet enthält. So können auch Personen die nicht in der gleichen Organisation
sind, oder keinen `,x.jsx(e.strong,{children:"Google Account"}),` haben, auf das Sheet zugreifen und
Änderungen einfügen. Wir müssen nicht mehr eine eigene Applikation dafür
erstellen.`]}),`
`,x.jsxs(Ko,{title:"Beispiel: Spielplansitzung",children:[x.jsxs(e.p,{children:[`Im regionalen Volleyball war es seit Jahren so, dass man sich für die
Spielplansitzung vor Ort trifft, und dann in 30 Minuten alle Spiele der
Saison abmacht. Das hat oft dazu geführt das es überschneidungen gab, oder
es unnötig kompliziert wurde. Oftmals gab es sogar richtig schlechte
Spielpläne, je nach dem welche Teams die Spiele zuerst abgemacht haben. Mit
Covid brauchte es eine neue Lösung für das Problem, denn eine Sitzung mit
allen Teamverantwortlichen in einer Aula war nicht mehr möglich. Das
gleiche Format einfach nur digital mit Zoom und Breakout-Rooms zu machen,
erschien auch nicht sehr attraktiv, da die gleichen Probleme wie oben
bereits erwähnt, erhalten bleiben. Auf so kurze Zeit eine Applikation zu
entwerfen war auch nicht möglich, daher wurde das ganze mit geteilten
`,x.jsx(e.strong,{children:"Excel Sheets"}),` gelöst. Wie das ganze aussehen könnte, sehen Sie in dem
folgenden Bild.`]}),x.jsx(T9,{src:Iwe,imgStyle:{width:"80%"}}),x.jsx(e.p,{children:`Im Video weiter unten, können Sie die wichtigsten Teile von dieser Tabelle
Schritt-für-Schritt mitarbeiten.`})]}),`
`,x.jsx(e.h2,{children:"Videoanleitung"}),`
`,x.jsxs(e.p,{children:[`Hier finden Sie den Link zum Onedrive-Ordner der Schule, damit können Sie alles
direkt im Browser mit dem Video mitarbeiten:
`,x.jsx(e.a,{href:"https://sblch-my.sharepoint.com/my",children:"https://sblch-my.sharepoint.com/my"})]}),`
`,x.jsx(E9,{url:"HuOC_rlxte4"}),`
`,x.jsxs(Ko,{title:"Aufgabe: Sheet verbessern",children:[x.jsx(e.p,{children:`Finden Sie Möglichkeiten das Sheet weiter zu verbessern. Fügen Sie die
Teamnummer in die Tabelle mit ein. Zeigen Sie Überschneidungen an, wenn am
gleichen Tag ein Spiel abgemacht wird. Markieren Sie eine Zelle in
hellgrau, wenn das Auswärtsteam an dem Datum bereits ein Spiel abgemacht
hat. Markieren Sie alle Zellen mit dunkelgrau, wenn das Auswärtsteam am
gleichen Tag ein Heimspiel anbieten würde.`}),x.jsxs(e.p,{children:[`Sie können auch eigene Verbesserungen einbringen. Versuchen Sie dabei mit
zusätzlichen Tabellen und den Befehlen `,x.jsx(e.code,{children:"XVERGLEICH(...)"}),", ",x.jsx(e.code,{children:"INDEX(...)"}),`,
`,x.jsx(e.code,{children:"FILTER(...)"})," und ",x.jsx(e.code,{children:"SVERWEIS(...)"})," zu arbeiten."]})]})]})}function Mwe(s={}){const{wrapper:e}=s.components||{};return e?x.jsx(e,{...s,children:x.jsx(wB,{...s})}):wB(s)}const Rwe=()=>pG([{path:"/",element:x.jsx(rZ,{}),children:[{path:"/",element:x.jsx(oZ,{})},{path:"obsidian",element:x.jsx(mve,{})},{path:"obsidian-md",element:x.jsx(pve,{})},{path:"colors",element:x.jsx(hve,{})},{path:"information",element:x.jsx(dve,{})},{path:"praktikum/install",element:x.jsx(fve,{})},{path:"fms-theorie",element:x.jsx(gve,{})},{path:"fms/hardware",element:x.jsx(vve,{})},{path:"fms/binary",element:x.jsx(xwe,{})},{path:"fms/hex",element:x.jsx(Ewe,{})},{path:"fms/excel",element:x.jsx(Nwe,{})},{path:"fms/excel-spielplan",element:x.jsx(Mwe,{})},{path:"*",element:x.jsxs("div",{children:["Leider wurde hier keine Webseite gefunden. Gehe zurück zum ",x.jsx(JS,{to:"/",children:"Start"})]})}]}],{basename:"/gym-inf/"});function Awe(){const s=Rwe();return s?x.jsx(kG,{router:s}):x.jsx("div",{children:"Loading..."})}$q.createRoot(document.getElementById("root")).render(x.jsx(Awe,{}))});export default Pwe();
