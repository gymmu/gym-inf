const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dagre-6UL2VRFP-Dsg8uJVc.js","assets/graph-WMo7b3Ut.js","assets/_baseUniq-D4gNXlTT.js","assets/layout-B3CraNdO.js","assets/_basePickBy-D9UNTtZ6.js","assets/clone-C67wZATF.js","assets/cose-bilkent-S5V4N54A-Dy9Uvf0B.js","assets/cytoscape.esm-BlPLnP8k.js","assets/c4Diagram-YG6GDRKO-B44pgAMZ.js","assets/chunk-TZMSLE5B-Dafl3K1x.js","assets/flowDiagram-NV44I4VS-B2L4_VHy.js","assets/chunk-FMBD7UC4-x9kMqs5l.js","assets/chunk-55IACEB6-COmiZuZD.js","assets/chunk-QN33PNHL-BZGCKkv3.js","assets/channel-B5V7GMg_.js","assets/erDiagram-Q2GNP2WA-DVExqMHI.js","assets/gitGraphDiagram-NY62KEGX-BlDN5ExZ.js","assets/chunk-4BX2VUAB-C9McxoSw.js","assets/chunk-QZHKN3VN-BIuiX5YH.js","assets/treemap-KMMF4GRG-MCtO81-y.js","assets/ganttDiagram-LVOFAZNH-DSTV9fnp.js","assets/linear-Cnwsg7qe.js","assets/init-Gi6I4Gst.js","assets/defaultLocale-C4B-KCzX.js","assets/infoDiagram-F6ZHWCRC-B3f_s5eP.js","assets/pieDiagram-ADFJNKIX-kfr74Dse.js","assets/arc-Df8qrclm.js","assets/ordinal-Cboi1Yqb.js","assets/quadrantDiagram-AYHSOK5B-DiOm-VWt.js","assets/xychartDiagram-PRI3JC2R-CLqah65X.js","assets/requirementDiagram-UZGBJVZJ-DJY9qHx_.js","assets/sequenceDiagram-WL72ISMW-BvZRWlqs.js","assets/classDiagram-2ON5EDUG-Trut4UnC.js","assets/chunk-B4BG7PRW-B77vXreS.js","assets/classDiagram-v2-WZHVMYZB-Trut4UnC.js","assets/stateDiagram-FKZM4ZOC-DqYPSmei.js","assets/chunk-DI55MBZ5-DvSnVQAs.js","assets/stateDiagram-v2-4FDKWEC3-3n8pXzal.js","assets/journeyDiagram-XKPGCS4Q-Cz7hhH7B.js","assets/timeline-definition-IT6M3QCI-C2Zs-UYu.js","assets/mindmap-definition-VGOIOE7T-ButaXwcy.js","assets/kanban-definition-3W4ZIXB7-CGPshJnN.js","assets/sankeyDiagram-TZEHDZUN-cVz2lquE.js","assets/diagram-S2PKOQOG-BHQPmPYJ.js","assets/diagram-QEK2KX5R-DkC_UF7N.js","assets/blockDiagram-VD42YOAC-HrhBsL45.js","assets/architectureDiagram-VXUJARFQ-DU91e2LL.js","assets/diagram-PSM6KHXK-D0pvIhSd.js"])))=>i.map(i=>d[i]);
function GG(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function $L(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dT={exports:{}},e_={},fT={exports:{}},Mi={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hW;function Dle(){if(hW)return Mi;hW=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),u=Symbol.iterator;function d(J){return J===null||typeof J!="object"?null:(J=u&&J[u]||J["@@iterator"],typeof J=="function"?J:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,b={};function _(J,ge,Le){this.props=J,this.context=ge,this.refs=b,this.updater=Le||g}_.prototype.isReactComponent={},_.prototype.setState=function(J,ge){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,ge,"setState")},_.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function w(){}w.prototype=_.prototype;function y(J,ge,Le){this.props=J,this.context=ge,this.refs=b,this.updater=Le||g}var k=y.prototype=new w;k.constructor=y,p(k,_.prototype),k.isPureReactComponent=!0;var L=Array.isArray,T=Object.prototype.hasOwnProperty,N={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function O(J,ge,Le){var We,Ie={},Ze=null,ct=null;if(ge!=null)for(We in ge.ref!==void 0&&(ct=ge.ref),ge.key!==void 0&&(Ze=""+ge.key),ge)T.call(ge,We)&&!D.hasOwnProperty(We)&&(Ie[We]=ge[We]);var ot=arguments.length-2;if(ot===1)Ie.children=Le;else if(1<ot){for(var Ot=Array(ot),$t=0;$t<ot;$t++)Ot[$t]=arguments[$t+2];Ie.children=Ot}if(J&&J.defaultProps)for(We in ot=J.defaultProps,ot)Ie[We]===void 0&&(Ie[We]=ot[We]);return{$$typeof:n,type:J,key:Ze,ref:ct,props:Ie,_owner:N.current}}function B(J,ge){return{$$typeof:n,type:J.type,key:ge,ref:J.ref,props:J.props,_owner:J._owner}}function G(J){return typeof J=="object"&&J!==null&&J.$$typeof===n}function H(J){var ge={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(Le){return ge[Le]})}var q=/\/+/g;function X(J,ge){return typeof J=="object"&&J!==null&&J.key!=null?H(""+J.key):ge.toString(36)}function z(J,ge,Le,We,Ie){var Ze=typeof J;(Ze==="undefined"||Ze==="boolean")&&(J=null);var ct=!1;if(J===null)ct=!0;else switch(Ze){case"string":case"number":ct=!0;break;case"object":switch(J.$$typeof){case n:case e:ct=!0}}if(ct)return ct=J,Ie=Ie(ct),J=We===""?"."+X(ct,0):We,L(Ie)?(Le="",J!=null&&(Le=J.replace(q,"$&/")+"/"),z(Ie,ge,Le,"",function($t){return $t})):Ie!=null&&(G(Ie)&&(Ie=B(Ie,Le+(!Ie.key||ct&&ct.key===Ie.key?"":(""+Ie.key).replace(q,"$&/")+"/")+J)),ge.push(Ie)),1;if(ct=0,We=We===""?".":We+":",L(J))for(var ot=0;ot<J.length;ot++){Ze=J[ot];var Ot=We+X(Ze,ot);ct+=z(Ze,ge,Le,Ot,Ie)}else if(Ot=d(J),typeof Ot=="function")for(J=Ot.call(J),ot=0;!(Ze=J.next()).done;)Ze=Ze.value,Ot=We+X(Ze,ot++),ct+=z(Ze,ge,Le,Ot,Ie);else if(Ze==="object")throw ge=String(J),Error("Objects are not valid as a React child (found: "+(ge==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":ge)+"). If you meant to render a collection of children, use an array instead.");return ct}function Q(J,ge,Le){if(J==null)return J;var We=[],Ie=0;return z(J,We,"","",function(Ze){return ge.call(Le,Ze,Ie++)}),We}function te(J){if(J._status===-1){var ge=J._result;ge=ge(),ge.then(function(Le){(J._status===0||J._status===-1)&&(J._status=1,J._result=Le)},function(Le){(J._status===0||J._status===-1)&&(J._status=2,J._result=Le)}),J._status===-1&&(J._status=0,J._result=ge)}if(J._status===1)return J._result.default;throw J._result}var se={current:null},Y={transition:null},ae={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:Y,ReactCurrentOwner:N};function fe(){throw Error("act(...) is not supported in production builds of React.")}return Mi.Children={map:Q,forEach:function(J,ge,Le){Q(J,function(){ge.apply(this,arguments)},Le)},count:function(J){var ge=0;return Q(J,function(){ge++}),ge},toArray:function(J){return Q(J,function(ge){return ge})||[]},only:function(J){if(!G(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},Mi.Component=_,Mi.Fragment=t,Mi.Profiler=r,Mi.PureComponent=y,Mi.StrictMode=i,Mi.Suspense=l,Mi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,Mi.act=fe,Mi.cloneElement=function(J,ge,Le){if(J==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+J+".");var We=p({},J.props),Ie=J.key,Ze=J.ref,ct=J._owner;if(ge!=null){if(ge.ref!==void 0&&(Ze=ge.ref,ct=N.current),ge.key!==void 0&&(Ie=""+ge.key),J.type&&J.type.defaultProps)var ot=J.type.defaultProps;for(Ot in ge)T.call(ge,Ot)&&!D.hasOwnProperty(Ot)&&(We[Ot]=ge[Ot]===void 0&&ot!==void 0?ot[Ot]:ge[Ot])}var Ot=arguments.length-2;if(Ot===1)We.children=Le;else if(1<Ot){ot=Array(Ot);for(var $t=0;$t<Ot;$t++)ot[$t]=arguments[$t+2];We.children=ot}return{$$typeof:n,type:J.type,key:Ie,ref:Ze,props:We,_owner:ct}},Mi.createContext=function(J){return J={$$typeof:o,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},J.Provider={$$typeof:s,_context:J},J.Consumer=J},Mi.createElement=O,Mi.createFactory=function(J){var ge=O.bind(null,J);return ge.type=J,ge},Mi.createRef=function(){return{current:null}},Mi.forwardRef=function(J){return{$$typeof:a,render:J}},Mi.isValidElement=G,Mi.lazy=function(J){return{$$typeof:h,_payload:{_status:-1,_result:J},_init:te}},Mi.memo=function(J,ge){return{$$typeof:c,type:J,compare:ge===void 0?null:ge}},Mi.startTransition=function(J){var ge=Y.transition;Y.transition={};try{J()}finally{Y.transition=ge}},Mi.unstable_act=fe,Mi.useCallback=function(J,ge){return se.current.useCallback(J,ge)},Mi.useContext=function(J){return se.current.useContext(J)},Mi.useDebugValue=function(){},Mi.useDeferredValue=function(J){return se.current.useDeferredValue(J)},Mi.useEffect=function(J,ge){return se.current.useEffect(J,ge)},Mi.useId=function(){return se.current.useId()},Mi.useImperativeHandle=function(J,ge,Le){return se.current.useImperativeHandle(J,ge,Le)},Mi.useInsertionEffect=function(J,ge){return se.current.useInsertionEffect(J,ge)},Mi.useLayoutEffect=function(J,ge){return se.current.useLayoutEffect(J,ge)},Mi.useMemo=function(J,ge){return se.current.useMemo(J,ge)},Mi.useReducer=function(J,ge,Le){return se.current.useReducer(J,ge,Le)},Mi.useRef=function(J){return se.current.useRef(J)},Mi.useState=function(J){return se.current.useState(J)},Mi.useSyncExternalStore=function(J,ge,Le){return se.current.useSyncExternalStore(J,ge,Le)},Mi.useTransition=function(){return se.current.useTransition()},Mi.version="18.3.1",Mi}var uW;function LM(){return uW||(uW=1,fT.exports=Dle()),fT.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dW;function Ele(){if(dW)return e_;dW=1;var n=LM(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var h,u={},d=null,g=null;c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),l.ref!==void 0&&(g=l.ref);for(h in l)i.call(l,h)&&!s.hasOwnProperty(h)&&(u[h]=l[h]);if(a&&a.defaultProps)for(h in l=a.defaultProps,l)u[h]===void 0&&(u[h]=l[h]);return{$$typeof:e,type:a,key:d,ref:g,props:u,_owner:r.current}}return e_.Fragment=t,e_.jsx=o,e_.jsxs=o,e_}var fW;function Ile(){return fW||(fW=1,dT.exports=Ele()),dT.exports}var S=Ile(),Pe=LM();const Nle=$L(Pe),Mle=GG({__proto__:null,default:Nle},[Pe]);var c2={},gT={exports:{}},oa={},mT={exports:{}},pT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gW;function Ale(){return gW||(gW=1,function(n){function e(Y,ae){var fe=Y.length;Y.push(ae);e:for(;0<fe;){var J=fe-1>>>1,ge=Y[J];if(0<r(ge,ae))Y[J]=ae,Y[fe]=ge,fe=J;else break e}}function t(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var ae=Y[0],fe=Y.pop();if(fe!==ae){Y[0]=fe;e:for(var J=0,ge=Y.length,Le=ge>>>1;J<Le;){var We=2*(J+1)-1,Ie=Y[We],Ze=We+1,ct=Y[Ze];if(0>r(Ie,fe))Ze<ge&&0>r(ct,Ie)?(Y[J]=ct,Y[Ze]=fe,J=Ze):(Y[J]=Ie,Y[We]=fe,J=We);else if(Ze<ge&&0>r(ct,fe))Y[J]=ct,Y[Ze]=fe,J=Ze;else break e}}return ae}function r(Y,ae){var fe=Y.sortIndex-ae.sortIndex;return fe!==0?fe:Y.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,u=null,d=3,g=!1,p=!1,b=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(Y){for(var ae=t(c);ae!==null;){if(ae.callback===null)i(c);else if(ae.startTime<=Y)i(c),ae.sortIndex=ae.expirationTime,e(l,ae);else break;ae=t(c)}}function L(Y){if(b=!1,k(Y),!p)if(t(l)!==null)p=!0,te(T);else{var ae=t(c);ae!==null&&se(L,ae.startTime-Y)}}function T(Y,ae){p=!1,b&&(b=!1,w(O),O=-1),g=!0;var fe=d;try{for(k(ae),u=t(l);u!==null&&(!(u.expirationTime>ae)||Y&&!H());){var J=u.callback;if(typeof J=="function"){u.callback=null,d=u.priorityLevel;var ge=J(u.expirationTime<=ae);ae=n.unstable_now(),typeof ge=="function"?u.callback=ge:u===t(l)&&i(l),k(ae)}else i(l);u=t(l)}if(u!==null)var Le=!0;else{var We=t(c);We!==null&&se(L,We.startTime-ae),Le=!1}return Le}finally{u=null,d=fe,g=!1}}var N=!1,D=null,O=-1,B=5,G=-1;function H(){return!(n.unstable_now()-G<B)}function q(){if(D!==null){var Y=n.unstable_now();G=Y;var ae=!0;try{ae=D(!0,Y)}finally{ae?X():(N=!1,D=null)}}else N=!1}var X;if(typeof y=="function")X=function(){y(q)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Q=z.port2;z.port1.onmessage=q,X=function(){Q.postMessage(null)}}else X=function(){_(q,0)};function te(Y){D=Y,N||(N=!0,X())}function se(Y,ae){O=_(function(){Y(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_continueExecution=function(){p||g||(p=!0,te(T))},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(Y){switch(d){case 1:case 2:case 3:var ae=3;break;default:ae=d}var fe=d;d=ae;try{return Y()}finally{d=fe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Y,ae){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var fe=d;d=Y;try{return ae()}finally{d=fe}},n.unstable_scheduleCallback=function(Y,ae,fe){var J=n.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?J+fe:J):fe=J,Y){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=fe+ge,Y={id:h++,callback:ae,priorityLevel:Y,startTime:fe,expirationTime:ge,sortIndex:-1},fe>J?(Y.sortIndex=fe,e(c,Y),t(l)===null&&Y===t(c)&&(b?(w(O),O=-1):b=!0,se(L,fe-J))):(Y.sortIndex=ge,e(l,Y),p||g||(p=!0,te(T))),Y},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(Y){var ae=d;return function(){var fe=d;d=ae;try{return Y.apply(this,arguments)}finally{d=fe}}}}(pT)),pT}var mW;function Rle(){return mW||(mW=1,mT.exports=Ale()),mT.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pW;function Ple(){if(pW)return oa;pW=1;var n=LM(),e=Rle();function t(f){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+f,v=1;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function s(f,m){o(f,m),o(f+"Capture",m)}function o(f,m){for(r[f]=m,f=0;f<m.length;f++)i.add(m[f])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},u={};function d(f){return l.call(u,f)?!0:l.call(h,f)?!1:c.test(f)?u[f]=!0:(h[f]=!0,!1)}function g(f,m,v,x){if(v!==null&&v.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return x?!1:v!==null?!v.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function p(f,m,v,x){if(m===null||typeof m>"u"||g(f,m,v,x))return!0;if(x)return!1;if(v!==null)switch(v.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function b(f,m,v,x,E,A,$){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=x,this.attributeNamespace=E,this.mustUseProperty=v,this.propertyName=f,this.type=m,this.sanitizeURL=A,this.removeEmptyString=$}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){_[f]=new b(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var m=f[0];_[m]=new b(m,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){_[f]=new b(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){_[f]=new b(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){_[f]=new b(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){_[f]=new b(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){_[f]=new b(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){_[f]=new b(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){_[f]=new b(f,5,!1,f.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function y(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var m=f.replace(w,y);_[m]=new b(m,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var m=f.replace(w,y);_[m]=new b(m,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var m=f.replace(w,y);_[m]=new b(m,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){_[f]=new b(f,1,!1,f.toLowerCase(),null,!1,!1)}),_.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){_[f]=new b(f,1,!1,f.toLowerCase(),null,!0,!0)});function k(f,m,v,x){var E=_.hasOwnProperty(m)?_[m]:null;(E!==null?E.type!==0:x||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(p(m,v,E,x)&&(v=null),x||E===null?d(m)&&(v===null?f.removeAttribute(m):f.setAttribute(m,""+v)):E.mustUseProperty?f[E.propertyName]=v===null?E.type===3?!1:"":v:(m=E.attributeName,x=E.attributeNamespace,v===null?f.removeAttribute(m):(E=E.type,v=E===3||E===4&&v===!0?"":""+v,x?f.setAttributeNS(x,m,v):f.setAttribute(m,v))))}var L=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),N=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),H=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),Y=Symbol.iterator;function ae(f){return f===null||typeof f!="object"?null:(f=Y&&f[Y]||f["@@iterator"],typeof f=="function"?f:null)}var fe=Object.assign,J;function ge(f){if(J===void 0)try{throw Error()}catch(v){var m=v.stack.trim().match(/\n( *(at )?)/);J=m&&m[1]||""}return`
`+J+f}var Le=!1;function We(f,m){if(!f||Le)return"";Le=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(Ee){var x=Ee}Reflect.construct(f,[],m)}else{try{m.call()}catch(Ee){x=Ee}f.call(m.prototype)}else{try{throw Error()}catch(Ee){x=Ee}f()}}catch(Ee){if(Ee&&x&&typeof Ee.stack=="string"){for(var E=Ee.stack.split(`
`),A=x.stack.split(`
`),$=E.length-1,le=A.length-1;1<=$&&0<=le&&E[$]!==A[le];)le--;for(;1<=$&&0<=le;$--,le--)if(E[$]!==A[le]){if($!==1||le!==1)do if($--,le--,0>le||E[$]!==A[le]){var me=`
`+E[$].replace(" at new "," at ");return f.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",f.displayName)),me}while(1<=$&&0<=le);break}}}finally{Le=!1,Error.prepareStackTrace=v}return(f=f?f.displayName||f.name:"")?ge(f):""}function Ie(f){switch(f.tag){case 5:return ge(f.type);case 16:return ge("Lazy");case 13:return ge("Suspense");case 19:return ge("SuspenseList");case 0:case 2:case 15:return f=We(f.type,!1),f;case 11:return f=We(f.type.render,!1),f;case 1:return f=We(f.type,!0),f;default:return""}}function Ze(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case D:return"Fragment";case N:return"Portal";case B:return"Profiler";case O:return"StrictMode";case X:return"Suspense";case z:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case H:return(f.displayName||"Context")+".Consumer";case G:return(f._context.displayName||"Context")+".Provider";case q:var m=f.render;return f=f.displayName,f||(f=m.displayName||m.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case Q:return m=f.displayName||null,m!==null?m:Ze(f.type)||"Memo";case te:m=f._payload,f=f._init;try{return Ze(f(m))}catch{}}return null}function ct(f){var m=f.type;switch(f.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=m.render,f=f.displayName||f.name||"",m.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ze(m);case 8:return m===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function ot(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function Ot(f){var m=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function $t(f){var m=Ot(f)?"checked":"value",v=Object.getOwnPropertyDescriptor(f.constructor.prototype,m),x=""+f[m];if(!f.hasOwnProperty(m)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var E=v.get,A=v.set;return Object.defineProperty(f,m,{configurable:!0,get:function(){return E.call(this)},set:function($){x=""+$,A.call(this,$)}}),Object.defineProperty(f,m,{enumerable:v.enumerable}),{getValue:function(){return x},setValue:function($){x=""+$},stopTracking:function(){f._valueTracker=null,delete f[m]}}}}function yn(f){f._valueTracker||(f._valueTracker=$t(f))}function vi(f){if(!f)return!1;var m=f._valueTracker;if(!m)return!0;var v=m.getValue(),x="";return f&&(x=Ot(f)?f.checked?"true":"false":f.value),f=x,f!==v?(m.setValue(f),!0):!1}function nn(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function rn(f,m){var v=m.checked;return fe({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??f._wrapperState.initialChecked})}function ss(f,m){var v=m.defaultValue==null?"":m.defaultValue,x=m.checked!=null?m.checked:m.defaultChecked;v=ot(m.value!=null?m.value:v),f._wrapperState={initialChecked:x,initialValue:v,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function Vn(f,m){m=m.checked,m!=null&&k(f,"checked",m,!1)}function Kn(f,m){Vn(f,m);var v=ot(m.value),x=m.type;if(v!=null)x==="number"?(v===0&&f.value===""||f.value!=v)&&(f.value=""+v):f.value!==""+v&&(f.value=""+v);else if(x==="submit"||x==="reset"){f.removeAttribute("value");return}m.hasOwnProperty("value")?or(f,m.type,v):m.hasOwnProperty("defaultValue")&&or(f,m.type,ot(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(f.defaultChecked=!!m.defaultChecked)}function Nr(f,m,v){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var x=m.type;if(!(x!=="submit"&&x!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+f._wrapperState.initialValue,v||m===f.value||(f.value=m),f.defaultValue=m}v=f.name,v!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,v!==""&&(f.name=v)}function or(f,m,v){(m!=="number"||nn(f.ownerDocument)!==f)&&(v==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+v&&(f.defaultValue=""+v))}var ys=Array.isArray;function eo(f,m,v,x){if(f=f.options,m){m={};for(var E=0;E<v.length;E++)m["$"+v[E]]=!0;for(v=0;v<f.length;v++)E=m.hasOwnProperty("$"+f[v].value),f[v].selected!==E&&(f[v].selected=E),E&&x&&(f[v].defaultSelected=!0)}else{for(v=""+ot(v),m=null,E=0;E<f.length;E++){if(f[E].value===v){f[E].selected=!0,x&&(f[E].defaultSelected=!0);return}m!==null||f[E].disabled||(m=f[E])}m!==null&&(m.selected=!0)}}function el(f,m){if(m.dangerouslySetInnerHTML!=null)throw Error(t(91));return fe({},m,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function ko(f,m){var v=m.value;if(v==null){if(v=m.children,m=m.defaultValue,v!=null){if(m!=null)throw Error(t(92));if(ys(v)){if(1<v.length)throw Error(t(93));v=v[0]}m=v}m==null&&(m=""),v=m}f._wrapperState={initialValue:ot(v)}}function Jn(f,m){var v=ot(m.value),x=ot(m.defaultValue);v!=null&&(v=""+v,v!==f.value&&(f.value=v),m.defaultValue==null&&f.defaultValue!==v&&(f.defaultValue=v)),x!=null&&(f.defaultValue=""+x)}function $n(f){var m=f.textContent;m===f._wrapperState.initialValue&&m!==""&&m!==null&&(f.value=m)}function Mr(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Os(f,m){return f==null||f==="http://www.w3.org/1999/xhtml"?Mr(m):f==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var Ar,ar=function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,v,x,E){MSApp.execUnsafeLocalFunction(function(){return f(m,v,x,E)})}:f}(function(f,m){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=m;else{for(Ar=Ar||document.createElement("div"),Ar.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=Ar.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;m.firstChild;)f.appendChild(m.firstChild)}});function wr(f,m){if(m){var v=f.firstChild;if(v&&v===f.lastChild&&v.nodeType===3){v.nodeValue=m;return}}f.textContent=m}var Ln={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},os=["Webkit","ms","Moz","O"];Object.keys(Ln).forEach(function(f){os.forEach(function(m){m=m+f.charAt(0).toUpperCase()+f.substring(1),Ln[m]=Ln[f]})});function jn(f,m,v){return m==null||typeof m=="boolean"||m===""?"":v||typeof m!="number"||m===0||Ln.hasOwnProperty(f)&&Ln[f]?(""+m).trim():m+"px"}function Ai(f,m){f=f.style;for(var v in m)if(m.hasOwnProperty(v)){var x=v.indexOf("--")===0,E=jn(v,m[v],x);v==="float"&&(v="cssFloat"),x?f.setProperty(v,E):f[v]=E}}var er=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bs(f,m){if(m){if(er[f]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(t(137,f));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(t(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(t(61))}if(m.style!=null&&typeof m.style!="object")throw Error(t(62))}}function Rr(f,m){if(f.indexOf("-")===-1)return typeof m.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xi=null;function Pr(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var Lo=null,to=null,Ri=null;function To(f){if(f=Wb(f)){if(typeof Lo!="function")throw Error(t(280));var m=f.stateNode;m&&(m=xC(m),Lo(f.stateNode,f.type,m))}}function Rl(f){to?Ri?Ri.push(f):Ri=[f]:to=f}function Tn(){if(to){var f=to,m=Ri;if(Ri=to=null,To(f),m)for(f=0;f<m.length;f++)To(m[f])}}function Cs(f,m){return f(m)}function At(){}var K=!1;function ee(f,m,v){if(K)return f(m,v);K=!0;try{return Cs(f,m,v)}finally{K=!1,(to!==null||Ri!==null)&&(At(),Tn())}}function re(f,m){var v=f.stateNode;if(v===null)return null;var x=xC(v);if(x===null)return null;v=x[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(f=f.type,x=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!x;break e;default:f=!1}if(f)return null;if(v&&typeof v!="function")throw Error(t(231,m,typeof v));return v}var F=!1;if(a)try{var j={};Object.defineProperty(j,"passive",{get:function(){F=!0}}),window.addEventListener("test",j,j),window.removeEventListener("test",j,j)}catch{F=!1}function ne(f,m,v,x,E,A,$,le,me){var Ee=Array.prototype.slice.call(arguments,3);try{m.apply(v,Ee)}catch(qe){this.onError(qe)}}var he=!1,Ce=null,Re=!1,Ve=null,$e={onError:function(f){he=!0,Ce=f}};function He(f,m,v,x,E,A,$,le,me){he=!1,Ce=null,ne.apply($e,arguments)}function tt(f,m,v,x,E,A,$,le,me){if(He.apply(this,arguments),he){if(he){var Ee=Ce;he=!1,Ce=null}else throw Error(t(198));Re||(Re=!0,Ve=Ee)}}function Ke(f){var m=f,v=f;if(f.alternate)for(;m.return;)m=m.return;else{f=m;do m=f,(m.flags&4098)!==0&&(v=m.return),f=m.return;while(f)}return m.tag===3?v:null}function xt(f){if(f.tag===13){var m=f.memoizedState;if(m===null&&(f=f.alternate,f!==null&&(m=f.memoizedState)),m!==null)return m.dehydrated}return null}function jt(f){if(Ke(f)!==f)throw Error(t(188))}function An(f){var m=f.alternate;if(!m){if(m=Ke(f),m===null)throw Error(t(188));return m!==f?null:f}for(var v=f,x=m;;){var E=v.return;if(E===null)break;var A=E.alternate;if(A===null){if(x=E.return,x!==null){v=x;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===v)return jt(E),f;if(A===x)return jt(E),m;A=A.sibling}throw Error(t(188))}if(v.return!==x.return)v=E,x=A;else{for(var $=!1,le=E.child;le;){if(le===v){$=!0,v=E,x=A;break}if(le===x){$=!0,x=E,v=A;break}le=le.sibling}if(!$){for(le=A.child;le;){if(le===v){$=!0,v=A,x=E;break}if(le===x){$=!0,x=A,v=E;break}le=le.sibling}if(!$)throw Error(t(189))}}if(v.alternate!==x)throw Error(t(190))}if(v.tag!==3)throw Error(t(188));return v.stateNode.current===v?f:m}function Ne(f){return f=An(f),f!==null?W(f):null}function W(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var m=W(f);if(m!==null)return m;f=f.sibling}return null}var pe=e.unstable_scheduleCallback,Ae=e.unstable_cancelCallback,Bt=e.unstable_shouldYield,mi=e.unstable_requestPaint,gt=e.unstable_now,Ui=e.unstable_getCurrentPriorityLevel,mn=e.unstable_ImmediatePriority,lr=e.unstable_UserBlockingPriority,Cn=e.unstable_NormalPriority,Rn=e.unstable_LowPriority,ki=e.unstable_IdlePriority,pn=null,Fs=null;function Ff(f){if(Fs&&typeof Fs.onCommitFiberRoot=="function")try{Fs.onCommitFiberRoot(pn,f,void 0,(f.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:M3,Qu=Math.log,sC=Math.LN2;function M3(f){return f>>>=0,f===0?32:31-(Qu(f)/sC|0)|0}var oC=64,aC=4194304;function yb(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function lC(f,m){var v=f.pendingLanes;if(v===0)return 0;var x=0,E=f.suspendedLanes,A=f.pingedLanes,$=v&268435455;if($!==0){var le=$&~E;le!==0?x=yb(le):(A&=$,A!==0&&(x=yb(A)))}else $=v&~E,$!==0?x=yb($):A!==0&&(x=yb(A));if(x===0)return 0;if(m!==0&&m!==x&&(m&E)===0&&(E=x&-x,A=m&-m,E>=A||E===16&&(A&4194240)!==0))return m;if((x&4)!==0&&(x|=v&16),m=f.entangledLanes,m!==0)for(f=f.entanglements,m&=x;0<m;)v=31-ln(m),E=1<<v,x|=f[v],m&=~E;return x}function Goe(f,m){switch(f){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Koe(f,m){for(var v=f.suspendedLanes,x=f.pingedLanes,E=f.expirationTimes,A=f.pendingLanes;0<A;){var $=31-ln(A),le=1<<$,me=E[$];me===-1?((le&v)===0||(le&x)!==0)&&(E[$]=Goe(le,m)):me<=m&&(f.expiredLanes|=le),A&=~le}}function A3(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function HO(){var f=oC;return oC<<=1,(oC&4194240)===0&&(oC=64),f}function R3(f){for(var m=[],v=0;31>v;v++)m.push(f);return m}function Cb(f,m,v){f.pendingLanes|=m,m!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,m=31-ln(m),f[m]=v}function Yoe(f,m){var v=f.pendingLanes&~m;f.pendingLanes=m,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=m,f.mutableReadLanes&=m,f.entangledLanes&=m,m=f.entanglements;var x=f.eventTimes;for(f=f.expirationTimes;0<v;){var E=31-ln(v),A=1<<E;m[E]=0,x[E]=-1,f[E]=-1,v&=~A}}function P3(f,m){var v=f.entangledLanes|=m;for(f=f.entanglements;v;){var x=31-ln(v),E=1<<x;E&m|f[x]&m&&(f[x]|=m),v&=~E}}var Sn=0;function VO(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var $O,O3,jO,UO,qO,B3=!1,cC=[],Ju=null,ed=null,td=null,Sb=new Map,xb=new Map,id=[],Zoe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function GO(f,m){switch(f){case"focusin":case"focusout":Ju=null;break;case"dragenter":case"dragleave":ed=null;break;case"mouseover":case"mouseout":td=null;break;case"pointerover":case"pointerout":Sb.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":xb.delete(m.pointerId)}}function kb(f,m,v,x,E,A){return f===null||f.nativeEvent!==A?(f={blockedOn:m,domEventName:v,eventSystemFlags:x,nativeEvent:A,targetContainers:[E]},m!==null&&(m=Wb(m),m!==null&&O3(m)),f):(f.eventSystemFlags|=x,m=f.targetContainers,E!==null&&m.indexOf(E)===-1&&m.push(E),f)}function Xoe(f,m,v,x,E){switch(m){case"focusin":return Ju=kb(Ju,f,m,v,x,E),!0;case"dragenter":return ed=kb(ed,f,m,v,x,E),!0;case"mouseover":return td=kb(td,f,m,v,x,E),!0;case"pointerover":var A=E.pointerId;return Sb.set(A,kb(Sb.get(A)||null,f,m,v,x,E)),!0;case"gotpointercapture":return A=E.pointerId,xb.set(A,kb(xb.get(A)||null,f,m,v,x,E)),!0}return!1}function KO(f){var m=Wf(f.target);if(m!==null){var v=Ke(m);if(v!==null){if(m=v.tag,m===13){if(m=xt(v),m!==null){f.blockedOn=m,qO(f.priority,function(){jO(v)});return}}else if(m===3&&v.stateNode.current.memoizedState.isDehydrated){f.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}f.blockedOn=null}function hC(f){if(f.blockedOn!==null)return!1;for(var m=f.targetContainers;0<m.length;){var v=W3(f.domEventName,f.eventSystemFlags,m[0],f.nativeEvent);if(v===null){v=f.nativeEvent;var x=new v.constructor(v.type,v);xi=x,v.target.dispatchEvent(x),xi=null}else return m=Wb(v),m!==null&&O3(m),f.blockedOn=v,!1;m.shift()}return!0}function YO(f,m,v){hC(f)&&v.delete(m)}function Qoe(){B3=!1,Ju!==null&&hC(Ju)&&(Ju=null),ed!==null&&hC(ed)&&(ed=null),td!==null&&hC(td)&&(td=null),Sb.forEach(YO),xb.forEach(YO)}function Lb(f,m){f.blockedOn===m&&(f.blockedOn=null,B3||(B3=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Qoe)))}function Tb(f){function m(E){return Lb(E,f)}if(0<cC.length){Lb(cC[0],f);for(var v=1;v<cC.length;v++){var x=cC[v];x.blockedOn===f&&(x.blockedOn=null)}}for(Ju!==null&&Lb(Ju,f),ed!==null&&Lb(ed,f),td!==null&&Lb(td,f),Sb.forEach(m),xb.forEach(m),v=0;v<id.length;v++)x=id[v],x.blockedOn===f&&(x.blockedOn=null);for(;0<id.length&&(v=id[0],v.blockedOn===null);)KO(v),v.blockedOn===null&&id.shift()}var up=L.ReactCurrentBatchConfig,uC=!0;function Joe(f,m,v,x){var E=Sn,A=up.transition;up.transition=null;try{Sn=1,F3(f,m,v,x)}finally{Sn=E,up.transition=A}}function eae(f,m,v,x){var E=Sn,A=up.transition;up.transition=null;try{Sn=4,F3(f,m,v,x)}finally{Sn=E,up.transition=A}}function F3(f,m,v,x){if(uC){var E=W3(f,m,v,x);if(E===null)i7(f,m,x,dC,v),GO(f,x);else if(Xoe(E,f,m,v,x))x.stopPropagation();else if(GO(f,x),m&4&&-1<Zoe.indexOf(f)){for(;E!==null;){var A=Wb(E);if(A!==null&&$O(A),A=W3(f,m,v,x),A===null&&i7(f,m,x,dC,v),A===E)break;E=A}E!==null&&x.stopPropagation()}else i7(f,m,x,null,v)}}var dC=null;function W3(f,m,v,x){if(dC=null,f=Pr(x),f=Wf(f),f!==null)if(m=Ke(f),m===null)f=null;else if(v=m.tag,v===13){if(f=xt(m),f!==null)return f;f=null}else if(v===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;f=null}else m!==f&&(f=null);return dC=f,null}function ZO(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ui()){case mn:return 1;case lr:return 4;case Cn:case Rn:return 16;case ki:return 536870912;default:return 16}default:return 16}}var nd=null,z3=null,fC=null;function XO(){if(fC)return fC;var f,m=z3,v=m.length,x,E="value"in nd?nd.value:nd.textContent,A=E.length;for(f=0;f<v&&m[f]===E[f];f++);var $=v-f;for(x=1;x<=$&&m[v-x]===E[A-x];x++);return fC=E.slice(f,1<x?1-x:void 0)}function gC(f){var m=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&m===13&&(f=13)):f=m,f===10&&(f=13),32<=f||f===13?f:0}function mC(){return!0}function QO(){return!1}function Ea(f){function m(v,x,E,A,$){this._reactName=v,this._targetInst=E,this.type=x,this.nativeEvent=A,this.target=$,this.currentTarget=null;for(var le in f)f.hasOwnProperty(le)&&(v=f[le],this[le]=v?v(A):A[le]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?mC:QO,this.isPropagationStopped=QO,this}return fe(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=mC)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=mC)},persist:function(){},isPersistent:mC}),m}var dp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},H3=Ea(dp),Db=fe({},dp,{view:0,detail:0}),tae=Ea(Db),V3,$3,Eb,pC=fe({},Db,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:U3,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==Eb&&(Eb&&f.type==="mousemove"?(V3=f.screenX-Eb.screenX,$3=f.screenY-Eb.screenY):$3=V3=0,Eb=f),V3)},movementY:function(f){return"movementY"in f?f.movementY:$3}}),JO=Ea(pC),iae=fe({},pC,{dataTransfer:0}),nae=Ea(iae),rae=fe({},Db,{relatedTarget:0}),j3=Ea(rae),sae=fe({},dp,{animationName:0,elapsedTime:0,pseudoElement:0}),oae=Ea(sae),aae=fe({},dp,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),lae=Ea(aae),cae=fe({},dp,{data:0}),eB=Ea(cae),hae={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uae={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dae={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fae(f){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(f):(f=dae[f])?!!m[f]:!1}function U3(){return fae}var gae=fe({},Db,{key:function(f){if(f.key){var m=hae[f.key]||f.key;if(m!=="Unidentified")return m}return f.type==="keypress"?(f=gC(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?uae[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:U3,charCode:function(f){return f.type==="keypress"?gC(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?gC(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),mae=Ea(gae),pae=fe({},pC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tB=Ea(pae),bae=fe({},Db,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:U3}),_ae=Ea(bae),vae=fe({},dp,{propertyName:0,elapsedTime:0,pseudoElement:0}),wae=Ea(vae),yae=fe({},pC,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),Cae=Ea(yae),Sae=[9,13,27,32],q3=a&&"CompositionEvent"in window,Ib=null;a&&"documentMode"in document&&(Ib=document.documentMode);var xae=a&&"TextEvent"in window&&!Ib,iB=a&&(!q3||Ib&&8<Ib&&11>=Ib),nB=" ",rB=!1;function sB(f,m){switch(f){case"keyup":return Sae.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oB(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var fp=!1;function kae(f,m){switch(f){case"compositionend":return oB(m);case"keypress":return m.which!==32?null:(rB=!0,nB);case"textInput":return f=m.data,f===nB&&rB?null:f;default:return null}}function Lae(f,m){if(fp)return f==="compositionend"||!q3&&sB(f,m)?(f=XO(),fC=z3=nd=null,fp=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return iB&&m.locale!=="ko"?null:m.data;default:return null}}var Tae={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aB(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m==="input"?!!Tae[f.type]:m==="textarea"}function lB(f,m,v,x){Rl(x),m=yC(m,"onChange"),0<m.length&&(v=new H3("onChange","change",null,v,x),f.push({event:v,listeners:m}))}var Nb=null,Mb=null;function Dae(f){LB(f,0)}function bC(f){var m=_p(f);if(vi(m))return f}function Eae(f,m){if(f==="change")return m}var cB=!1;if(a){var G3;if(a){var K3="oninput"in document;if(!K3){var hB=document.createElement("div");hB.setAttribute("oninput","return;"),K3=typeof hB.oninput=="function"}G3=K3}else G3=!1;cB=G3&&(!document.documentMode||9<document.documentMode)}function uB(){Nb&&(Nb.detachEvent("onpropertychange",dB),Mb=Nb=null)}function dB(f){if(f.propertyName==="value"&&bC(Mb)){var m=[];lB(m,Mb,f,Pr(f)),ee(Dae,m)}}function Iae(f,m,v){f==="focusin"?(uB(),Nb=m,Mb=v,Nb.attachEvent("onpropertychange",dB)):f==="focusout"&&uB()}function Nae(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return bC(Mb)}function Mae(f,m){if(f==="click")return bC(m)}function Aae(f,m){if(f==="input"||f==="change")return bC(m)}function Rae(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var Pl=typeof Object.is=="function"?Object.is:Rae;function Ab(f,m){if(Pl(f,m))return!0;if(typeof f!="object"||f===null||typeof m!="object"||m===null)return!1;var v=Object.keys(f),x=Object.keys(m);if(v.length!==x.length)return!1;for(x=0;x<v.length;x++){var E=v[x];if(!l.call(m,E)||!Pl(f[E],m[E]))return!1}return!0}function fB(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function gB(f,m){var v=fB(f);f=0;for(var x;v;){if(v.nodeType===3){if(x=f+v.textContent.length,f<=m&&x>=m)return{node:v,offset:m-f};f=x}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=fB(v)}}function mB(f,m){return f&&m?f===m?!0:f&&f.nodeType===3?!1:m&&m.nodeType===3?mB(f,m.parentNode):"contains"in f?f.contains(m):f.compareDocumentPosition?!!(f.compareDocumentPosition(m)&16):!1:!1}function pB(){for(var f=window,m=nn();m instanceof f.HTMLIFrameElement;){try{var v=typeof m.contentWindow.location.href=="string"}catch{v=!1}if(v)f=m.contentWindow;else break;m=nn(f.document)}return m}function Y3(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m&&(m==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||m==="textarea"||f.contentEditable==="true")}function Pae(f){var m=pB(),v=f.focusedElem,x=f.selectionRange;if(m!==v&&v&&v.ownerDocument&&mB(v.ownerDocument.documentElement,v)){if(x!==null&&Y3(v)){if(m=x.start,f=x.end,f===void 0&&(f=m),"selectionStart"in v)v.selectionStart=m,v.selectionEnd=Math.min(f,v.value.length);else if(f=(m=v.ownerDocument||document)&&m.defaultView||window,f.getSelection){f=f.getSelection();var E=v.textContent.length,A=Math.min(x.start,E);x=x.end===void 0?A:Math.min(x.end,E),!f.extend&&A>x&&(E=x,x=A,A=E),E=gB(v,A);var $=gB(v,x);E&&$&&(f.rangeCount!==1||f.anchorNode!==E.node||f.anchorOffset!==E.offset||f.focusNode!==$.node||f.focusOffset!==$.offset)&&(m=m.createRange(),m.setStart(E.node,E.offset),f.removeAllRanges(),A>x?(f.addRange(m),f.extend($.node,$.offset)):(m.setEnd($.node,$.offset),f.addRange(m)))}}for(m=[],f=v;f=f.parentNode;)f.nodeType===1&&m.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<m.length;v++)f=m[v],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var Oae=a&&"documentMode"in document&&11>=document.documentMode,gp=null,Z3=null,Rb=null,X3=!1;function bB(f,m,v){var x=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;X3||gp==null||gp!==nn(x)||(x=gp,"selectionStart"in x&&Y3(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Rb&&Ab(Rb,x)||(Rb=x,x=yC(Z3,"onSelect"),0<x.length&&(m=new H3("onSelect","select",null,m,v),f.push({event:m,listeners:x}),m.target=gp)))}function _C(f,m){var v={};return v[f.toLowerCase()]=m.toLowerCase(),v["Webkit"+f]="webkit"+m,v["Moz"+f]="moz"+m,v}var mp={animationend:_C("Animation","AnimationEnd"),animationiteration:_C("Animation","AnimationIteration"),animationstart:_C("Animation","AnimationStart"),transitionend:_C("Transition","TransitionEnd")},Q3={},_B={};a&&(_B=document.createElement("div").style,"AnimationEvent"in window||(delete mp.animationend.animation,delete mp.animationiteration.animation,delete mp.animationstart.animation),"TransitionEvent"in window||delete mp.transitionend.transition);function vC(f){if(Q3[f])return Q3[f];if(!mp[f])return f;var m=mp[f],v;for(v in m)if(m.hasOwnProperty(v)&&v in _B)return Q3[f]=m[v];return f}var vB=vC("animationend"),wB=vC("animationiteration"),yB=vC("animationstart"),CB=vC("transitionend"),SB=new Map,xB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rd(f,m){SB.set(f,m),s(m,[f])}for(var J3=0;J3<xB.length;J3++){var e7=xB[J3],Bae=e7.toLowerCase(),Fae=e7[0].toUpperCase()+e7.slice(1);rd(Bae,"on"+Fae)}rd(vB,"onAnimationEnd"),rd(wB,"onAnimationIteration"),rd(yB,"onAnimationStart"),rd("dblclick","onDoubleClick"),rd("focusin","onFocus"),rd("focusout","onBlur"),rd(CB,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wae=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pb));function kB(f,m,v){var x=f.type||"unknown-event";f.currentTarget=v,tt(x,m,void 0,f),f.currentTarget=null}function LB(f,m){m=(m&4)!==0;for(var v=0;v<f.length;v++){var x=f[v],E=x.event;x=x.listeners;e:{var A=void 0;if(m)for(var $=x.length-1;0<=$;$--){var le=x[$],me=le.instance,Ee=le.currentTarget;if(le=le.listener,me!==A&&E.isPropagationStopped())break e;kB(E,le,Ee),A=me}else for($=0;$<x.length;$++){if(le=x[$],me=le.instance,Ee=le.currentTarget,le=le.listener,me!==A&&E.isPropagationStopped())break e;kB(E,le,Ee),A=me}}}if(Re)throw f=Ve,Re=!1,Ve=null,f}function Yn(f,m){var v=m[l7];v===void 0&&(v=m[l7]=new Set);var x=f+"__bubble";v.has(x)||(TB(m,f,2,!1),v.add(x))}function t7(f,m,v){var x=0;m&&(x|=4),TB(v,f,x,m)}var wC="_reactListening"+Math.random().toString(36).slice(2);function Ob(f){if(!f[wC]){f[wC]=!0,i.forEach(function(v){v!=="selectionchange"&&(Wae.has(v)||t7(v,!1,f),t7(v,!0,f))});var m=f.nodeType===9?f:f.ownerDocument;m===null||m[wC]||(m[wC]=!0,t7("selectionchange",!1,m))}}function TB(f,m,v,x){switch(ZO(m)){case 1:var E=Joe;break;case 4:E=eae;break;default:E=F3}v=E.bind(null,m,v,f),E=void 0,!F||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(E=!0),x?E!==void 0?f.addEventListener(m,v,{capture:!0,passive:E}):f.addEventListener(m,v,!0):E!==void 0?f.addEventListener(m,v,{passive:E}):f.addEventListener(m,v,!1)}function i7(f,m,v,x,E){var A=x;if((m&1)===0&&(m&2)===0&&x!==null)e:for(;;){if(x===null)return;var $=x.tag;if($===3||$===4){var le=x.stateNode.containerInfo;if(le===E||le.nodeType===8&&le.parentNode===E)break;if($===4)for($=x.return;$!==null;){var me=$.tag;if((me===3||me===4)&&(me=$.stateNode.containerInfo,me===E||me.nodeType===8&&me.parentNode===E))return;$=$.return}for(;le!==null;){if($=Wf(le),$===null)return;if(me=$.tag,me===5||me===6){x=A=$;continue e}le=le.parentNode}}x=x.return}ee(function(){var Ee=A,qe=Pr(v),Xe=[];e:{var je=SB.get(f);if(je!==void 0){var pt=H3,yt=f;switch(f){case"keypress":if(gC(v)===0)break e;case"keydown":case"keyup":pt=mae;break;case"focusin":yt="focus",pt=j3;break;case"focusout":yt="blur",pt=j3;break;case"beforeblur":case"afterblur":pt=j3;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pt=JO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pt=nae;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pt=_ae;break;case vB:case wB:case yB:pt=oae;break;case CB:pt=wae;break;case"scroll":pt=tae;break;case"wheel":pt=Cae;break;case"copy":case"cut":case"paste":pt=lae;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pt=tB}var Tt=(m&4)!==0,Or=!Tt&&f==="scroll",Se=Tt?je!==null?je+"Capture":null:je;Tt=[];for(var ve=Ee,Te;ve!==null;){Te=ve;var nt=Te.stateNode;if(Te.tag===5&&nt!==null&&(Te=nt,Se!==null&&(nt=re(ve,Se),nt!=null&&Tt.push(Bb(ve,nt,Te)))),Or)break;ve=ve.return}0<Tt.length&&(je=new pt(je,yt,null,v,qe),Xe.push({event:je,listeners:Tt}))}}if((m&7)===0){e:{if(je=f==="mouseover"||f==="pointerover",pt=f==="mouseout"||f==="pointerout",je&&v!==xi&&(yt=v.relatedTarget||v.fromElement)&&(Wf(yt)||yt[xh]))break e;if((pt||je)&&(je=qe.window===qe?qe:(je=qe.ownerDocument)?je.defaultView||je.parentWindow:window,pt?(yt=v.relatedTarget||v.toElement,pt=Ee,yt=yt?Wf(yt):null,yt!==null&&(Or=Ke(yt),yt!==Or||yt.tag!==5&&yt.tag!==6)&&(yt=null)):(pt=null,yt=Ee),pt!==yt)){if(Tt=JO,nt="onMouseLeave",Se="onMouseEnter",ve="mouse",(f==="pointerout"||f==="pointerover")&&(Tt=tB,nt="onPointerLeave",Se="onPointerEnter",ve="pointer"),Or=pt==null?je:_p(pt),Te=yt==null?je:_p(yt),je=new Tt(nt,ve+"leave",pt,v,qe),je.target=Or,je.relatedTarget=Te,nt=null,Wf(qe)===Ee&&(Tt=new Tt(Se,ve+"enter",yt,v,qe),Tt.target=Te,Tt.relatedTarget=Or,nt=Tt),Or=nt,pt&&yt)t:{for(Tt=pt,Se=yt,ve=0,Te=Tt;Te;Te=pp(Te))ve++;for(Te=0,nt=Se;nt;nt=pp(nt))Te++;for(;0<ve-Te;)Tt=pp(Tt),ve--;for(;0<Te-ve;)Se=pp(Se),Te--;for(;ve--;){if(Tt===Se||Se!==null&&Tt===Se.alternate)break t;Tt=pp(Tt),Se=pp(Se)}Tt=null}else Tt=null;pt!==null&&DB(Xe,je,pt,Tt,!1),yt!==null&&Or!==null&&DB(Xe,Or,yt,Tt,!0)}}e:{if(je=Ee?_p(Ee):window,pt=je.nodeName&&je.nodeName.toLowerCase(),pt==="select"||pt==="input"&&je.type==="file")var Rt=Eae;else if(aB(je))if(cB)Rt=Aae;else{Rt=Nae;var Kt=Iae}else(pt=je.nodeName)&&pt.toLowerCase()==="input"&&(je.type==="checkbox"||je.type==="radio")&&(Rt=Mae);if(Rt&&(Rt=Rt(f,Ee))){lB(Xe,Rt,v,qe);break e}Kt&&Kt(f,je,Ee),f==="focusout"&&(Kt=je._wrapperState)&&Kt.controlled&&je.type==="number"&&or(je,"number",je.value)}switch(Kt=Ee?_p(Ee):window,f){case"focusin":(aB(Kt)||Kt.contentEditable==="true")&&(gp=Kt,Z3=Ee,Rb=null);break;case"focusout":Rb=Z3=gp=null;break;case"mousedown":X3=!0;break;case"contextmenu":case"mouseup":case"dragend":X3=!1,bB(Xe,v,qe);break;case"selectionchange":if(Oae)break;case"keydown":case"keyup":bB(Xe,v,qe)}var Yt;if(q3)e:{switch(f){case"compositionstart":var li="onCompositionStart";break e;case"compositionend":li="onCompositionEnd";break e;case"compositionupdate":li="onCompositionUpdate";break e}li=void 0}else fp?sB(f,v)&&(li="onCompositionEnd"):f==="keydown"&&v.keyCode===229&&(li="onCompositionStart");li&&(iB&&v.locale!=="ko"&&(fp||li!=="onCompositionStart"?li==="onCompositionEnd"&&fp&&(Yt=XO()):(nd=qe,z3="value"in nd?nd.value:nd.textContent,fp=!0)),Kt=yC(Ee,li),0<Kt.length&&(li=new eB(li,f,null,v,qe),Xe.push({event:li,listeners:Kt}),Yt?li.data=Yt:(Yt=oB(v),Yt!==null&&(li.data=Yt)))),(Yt=xae?kae(f,v):Lae(f,v))&&(Ee=yC(Ee,"onBeforeInput"),0<Ee.length&&(qe=new eB("onBeforeInput","beforeinput",null,v,qe),Xe.push({event:qe,listeners:Ee}),qe.data=Yt))}LB(Xe,m)})}function Bb(f,m,v){return{instance:f,listener:m,currentTarget:v}}function yC(f,m){for(var v=m+"Capture",x=[];f!==null;){var E=f,A=E.stateNode;E.tag===5&&A!==null&&(E=A,A=re(f,v),A!=null&&x.unshift(Bb(f,A,E)),A=re(f,m),A!=null&&x.push(Bb(f,A,E))),f=f.return}return x}function pp(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function DB(f,m,v,x,E){for(var A=m._reactName,$=[];v!==null&&v!==x;){var le=v,me=le.alternate,Ee=le.stateNode;if(me!==null&&me===x)break;le.tag===5&&Ee!==null&&(le=Ee,E?(me=re(v,A),me!=null&&$.unshift(Bb(v,me,le))):E||(me=re(v,A),me!=null&&$.push(Bb(v,me,le)))),v=v.return}$.length!==0&&f.push({event:m,listeners:$})}var zae=/\r\n?/g,Hae=/\u0000|\uFFFD/g;function EB(f){return(typeof f=="string"?f:""+f).replace(zae,`
`).replace(Hae,"")}function CC(f,m,v){if(m=EB(m),EB(f)!==m&&v)throw Error(t(425))}function SC(){}var n7=null,r7=null;function s7(f,m){return f==="textarea"||f==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var o7=typeof setTimeout=="function"?setTimeout:void 0,Vae=typeof clearTimeout=="function"?clearTimeout:void 0,IB=typeof Promise=="function"?Promise:void 0,$ae=typeof queueMicrotask=="function"?queueMicrotask:typeof IB<"u"?function(f){return IB.resolve(null).then(f).catch(jae)}:o7;function jae(f){setTimeout(function(){throw f})}function a7(f,m){var v=m,x=0;do{var E=v.nextSibling;if(f.removeChild(v),E&&E.nodeType===8)if(v=E.data,v==="/$"){if(x===0){f.removeChild(E),Tb(m);return}x--}else v!=="$"&&v!=="$?"&&v!=="$!"||x++;v=E}while(v);Tb(m)}function sd(f){for(;f!=null;f=f.nextSibling){var m=f.nodeType;if(m===1||m===3)break;if(m===8){if(m=f.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return f}function NB(f){f=f.previousSibling;for(var m=0;f;){if(f.nodeType===8){var v=f.data;if(v==="$"||v==="$!"||v==="$?"){if(m===0)return f;m--}else v==="/$"&&m++}f=f.previousSibling}return null}var bp=Math.random().toString(36).slice(2),kc="__reactFiber$"+bp,Fb="__reactProps$"+bp,xh="__reactContainer$"+bp,l7="__reactEvents$"+bp,Uae="__reactListeners$"+bp,qae="__reactHandles$"+bp;function Wf(f){var m=f[kc];if(m)return m;for(var v=f.parentNode;v;){if(m=v[xh]||v[kc]){if(v=m.alternate,m.child!==null||v!==null&&v.child!==null)for(f=NB(f);f!==null;){if(v=f[kc])return v;f=NB(f)}return m}f=v,v=f.parentNode}return null}function Wb(f){return f=f[kc]||f[xh],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function _p(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(t(33))}function xC(f){return f[Fb]||null}var c7=[],vp=-1;function od(f){return{current:f}}function Zn(f){0>vp||(f.current=c7[vp],c7[vp]=null,vp--)}function Un(f,m){vp++,c7[vp]=f.current,f.current=m}var ad={},io=od(ad),ta=od(!1),zf=ad;function wp(f,m){var v=f.type.contextTypes;if(!v)return ad;var x=f.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===m)return x.__reactInternalMemoizedMaskedChildContext;var E={},A;for(A in v)E[A]=m[A];return x&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=m,f.__reactInternalMemoizedMaskedChildContext=E),E}function ia(f){return f=f.childContextTypes,f!=null}function kC(){Zn(ta),Zn(io)}function MB(f,m,v){if(io.current!==ad)throw Error(t(168));Un(io,m),Un(ta,v)}function AB(f,m,v){var x=f.stateNode;if(m=m.childContextTypes,typeof x.getChildContext!="function")return v;x=x.getChildContext();for(var E in x)if(!(E in m))throw Error(t(108,ct(f)||"Unknown",E));return fe({},v,x)}function LC(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||ad,zf=io.current,Un(io,f),Un(ta,ta.current),!0}function RB(f,m,v){var x=f.stateNode;if(!x)throw Error(t(169));v?(f=AB(f,m,zf),x.__reactInternalMemoizedMergedChildContext=f,Zn(ta),Zn(io),Un(io,f)):Zn(ta),Un(ta,v)}var kh=null,TC=!1,h7=!1;function PB(f){kh===null?kh=[f]:kh.push(f)}function Gae(f){TC=!0,PB(f)}function ld(){if(!h7&&kh!==null){h7=!0;var f=0,m=Sn;try{var v=kh;for(Sn=1;f<v.length;f++){var x=v[f];do x=x(!0);while(x!==null)}kh=null,TC=!1}catch(E){throw kh!==null&&(kh=kh.slice(f+1)),pe(mn,ld),E}finally{Sn=m,h7=!1}}return null}var yp=[],Cp=0,DC=null,EC=0,tl=[],il=0,Hf=null,Lh=1,Th="";function Vf(f,m){yp[Cp++]=EC,yp[Cp++]=DC,DC=f,EC=m}function OB(f,m,v){tl[il++]=Lh,tl[il++]=Th,tl[il++]=Hf,Hf=f;var x=Lh;f=Th;var E=32-ln(x)-1;x&=~(1<<E),v+=1;var A=32-ln(m)+E;if(30<A){var $=E-E%5;A=(x&(1<<$)-1).toString(32),x>>=$,E-=$,Lh=1<<32-ln(m)+E|v<<E|x,Th=A+f}else Lh=1<<A|v<<E|x,Th=f}function u7(f){f.return!==null&&(Vf(f,1),OB(f,1,0))}function d7(f){for(;f===DC;)DC=yp[--Cp],yp[Cp]=null,EC=yp[--Cp],yp[Cp]=null;for(;f===Hf;)Hf=tl[--il],tl[il]=null,Th=tl[--il],tl[il]=null,Lh=tl[--il],tl[il]=null}var Ia=null,Na=null,tr=!1,Ol=null;function BB(f,m){var v=ol(5,null,null,0);v.elementType="DELETED",v.stateNode=m,v.return=f,m=f.deletions,m===null?(f.deletions=[v],f.flags|=16):m.push(v)}function FB(f,m){switch(f.tag){case 5:var v=f.type;return m=m.nodeType!==1||v.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(f.stateNode=m,Ia=f,Na=sd(m.firstChild),!0):!1;case 6:return m=f.pendingProps===""||m.nodeType!==3?null:m,m!==null?(f.stateNode=m,Ia=f,Na=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(v=Hf!==null?{id:Lh,overflow:Th}:null,f.memoizedState={dehydrated:m,treeContext:v,retryLane:1073741824},v=ol(18,null,null,0),v.stateNode=m,v.return=f,f.child=v,Ia=f,Na=null,!0):!1;default:return!1}}function f7(f){return(f.mode&1)!==0&&(f.flags&128)===0}function g7(f){if(tr){var m=Na;if(m){var v=m;if(!FB(f,m)){if(f7(f))throw Error(t(418));m=sd(v.nextSibling);var x=Ia;m&&FB(f,m)?BB(x,v):(f.flags=f.flags&-4097|2,tr=!1,Ia=f)}}else{if(f7(f))throw Error(t(418));f.flags=f.flags&-4097|2,tr=!1,Ia=f}}}function WB(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;Ia=f}function IC(f){if(f!==Ia)return!1;if(!tr)return WB(f),tr=!0,!1;var m;if((m=f.tag!==3)&&!(m=f.tag!==5)&&(m=f.type,m=m!=="head"&&m!=="body"&&!s7(f.type,f.memoizedProps)),m&&(m=Na)){if(f7(f))throw zB(),Error(t(418));for(;m;)BB(f,m),m=sd(m.nextSibling)}if(WB(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(317));e:{for(f=f.nextSibling,m=0;f;){if(f.nodeType===8){var v=f.data;if(v==="/$"){if(m===0){Na=sd(f.nextSibling);break e}m--}else v!=="$"&&v!=="$!"&&v!=="$?"||m++}f=f.nextSibling}Na=null}}else Na=Ia?sd(f.stateNode.nextSibling):null;return!0}function zB(){for(var f=Na;f;)f=sd(f.nextSibling)}function Sp(){Na=Ia=null,tr=!1}function m7(f){Ol===null?Ol=[f]:Ol.push(f)}var Kae=L.ReactCurrentBatchConfig;function zb(f,m,v){if(f=v.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(t(309));var x=v.stateNode}if(!x)throw Error(t(147,f));var E=x,A=""+f;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===A?m.ref:(m=function($){var le=E.refs;$===null?delete le[A]:le[A]=$},m._stringRef=A,m)}if(typeof f!="string")throw Error(t(284));if(!v._owner)throw Error(t(290,f))}return f}function NC(f,m){throw f=Object.prototype.toString.call(m),Error(t(31,f==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":f))}function HB(f){var m=f._init;return m(f._payload)}function VB(f){function m(Se,ve){if(f){var Te=Se.deletions;Te===null?(Se.deletions=[ve],Se.flags|=16):Te.push(ve)}}function v(Se,ve){if(!f)return null;for(;ve!==null;)m(Se,ve),ve=ve.sibling;return null}function x(Se,ve){for(Se=new Map;ve!==null;)ve.key!==null?Se.set(ve.key,ve):Se.set(ve.index,ve),ve=ve.sibling;return Se}function E(Se,ve){return Se=pd(Se,ve),Se.index=0,Se.sibling=null,Se}function A(Se,ve,Te){return Se.index=Te,f?(Te=Se.alternate,Te!==null?(Te=Te.index,Te<ve?(Se.flags|=2,ve):Te):(Se.flags|=2,ve)):(Se.flags|=1048576,ve)}function $(Se){return f&&Se.alternate===null&&(Se.flags|=2),Se}function le(Se,ve,Te,nt){return ve===null||ve.tag!==6?(ve=oT(Te,Se.mode,nt),ve.return=Se,ve):(ve=E(ve,Te),ve.return=Se,ve)}function me(Se,ve,Te,nt){var Rt=Te.type;return Rt===D?qe(Se,ve,Te.props.children,nt,Te.key):ve!==null&&(ve.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===te&&HB(Rt)===ve.type)?(nt=E(ve,Te.props),nt.ref=zb(Se,ve,Te),nt.return=Se,nt):(nt=t2(Te.type,Te.key,Te.props,null,Se.mode,nt),nt.ref=zb(Se,ve,Te),nt.return=Se,nt)}function Ee(Se,ve,Te,nt){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==Te.containerInfo||ve.stateNode.implementation!==Te.implementation?(ve=aT(Te,Se.mode,nt),ve.return=Se,ve):(ve=E(ve,Te.children||[]),ve.return=Se,ve)}function qe(Se,ve,Te,nt,Rt){return ve===null||ve.tag!==7?(ve=Zf(Te,Se.mode,nt,Rt),ve.return=Se,ve):(ve=E(ve,Te),ve.return=Se,ve)}function Xe(Se,ve,Te){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return ve=oT(""+ve,Se.mode,Te),ve.return=Se,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case T:return Te=t2(ve.type,ve.key,ve.props,null,Se.mode,Te),Te.ref=zb(Se,null,ve),Te.return=Se,Te;case N:return ve=aT(ve,Se.mode,Te),ve.return=Se,ve;case te:var nt=ve._init;return Xe(Se,nt(ve._payload),Te)}if(ys(ve)||ae(ve))return ve=Zf(ve,Se.mode,Te,null),ve.return=Se,ve;NC(Se,ve)}return null}function je(Se,ve,Te,nt){var Rt=ve!==null?ve.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Rt!==null?null:le(Se,ve,""+Te,nt);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case T:return Te.key===Rt?me(Se,ve,Te,nt):null;case N:return Te.key===Rt?Ee(Se,ve,Te,nt):null;case te:return Rt=Te._init,je(Se,ve,Rt(Te._payload),nt)}if(ys(Te)||ae(Te))return Rt!==null?null:qe(Se,ve,Te,nt,null);NC(Se,Te)}return null}function pt(Se,ve,Te,nt,Rt){if(typeof nt=="string"&&nt!==""||typeof nt=="number")return Se=Se.get(Te)||null,le(ve,Se,""+nt,Rt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case T:return Se=Se.get(nt.key===null?Te:nt.key)||null,me(ve,Se,nt,Rt);case N:return Se=Se.get(nt.key===null?Te:nt.key)||null,Ee(ve,Se,nt,Rt);case te:var Kt=nt._init;return pt(Se,ve,Te,Kt(nt._payload),Rt)}if(ys(nt)||ae(nt))return Se=Se.get(Te)||null,qe(ve,Se,nt,Rt,null);NC(ve,nt)}return null}function yt(Se,ve,Te,nt){for(var Rt=null,Kt=null,Yt=ve,li=ve=0,ks=null;Yt!==null&&li<Te.length;li++){Yt.index>li?(ks=Yt,Yt=null):ks=Yt.sibling;var cn=je(Se,Yt,Te[li],nt);if(cn===null){Yt===null&&(Yt=ks);break}f&&Yt&&cn.alternate===null&&m(Se,Yt),ve=A(cn,ve,li),Kt===null?Rt=cn:Kt.sibling=cn,Kt=cn,Yt=ks}if(li===Te.length)return v(Se,Yt),tr&&Vf(Se,li),Rt;if(Yt===null){for(;li<Te.length;li++)Yt=Xe(Se,Te[li],nt),Yt!==null&&(ve=A(Yt,ve,li),Kt===null?Rt=Yt:Kt.sibling=Yt,Kt=Yt);return tr&&Vf(Se,li),Rt}for(Yt=x(Se,Yt);li<Te.length;li++)ks=pt(Yt,Se,li,Te[li],nt),ks!==null&&(f&&ks.alternate!==null&&Yt.delete(ks.key===null?li:ks.key),ve=A(ks,ve,li),Kt===null?Rt=ks:Kt.sibling=ks,Kt=ks);return f&&Yt.forEach(function(bd){return m(Se,bd)}),tr&&Vf(Se,li),Rt}function Tt(Se,ve,Te,nt){var Rt=ae(Te);if(typeof Rt!="function")throw Error(t(150));if(Te=Rt.call(Te),Te==null)throw Error(t(151));for(var Kt=Rt=null,Yt=ve,li=ve=0,ks=null,cn=Te.next();Yt!==null&&!cn.done;li++,cn=Te.next()){Yt.index>li?(ks=Yt,Yt=null):ks=Yt.sibling;var bd=je(Se,Yt,cn.value,nt);if(bd===null){Yt===null&&(Yt=ks);break}f&&Yt&&bd.alternate===null&&m(Se,Yt),ve=A(bd,ve,li),Kt===null?Rt=bd:Kt.sibling=bd,Kt=bd,Yt=ks}if(cn.done)return v(Se,Yt),tr&&Vf(Se,li),Rt;if(Yt===null){for(;!cn.done;li++,cn=Te.next())cn=Xe(Se,cn.value,nt),cn!==null&&(ve=A(cn,ve,li),Kt===null?Rt=cn:Kt.sibling=cn,Kt=cn);return tr&&Vf(Se,li),Rt}for(Yt=x(Se,Yt);!cn.done;li++,cn=Te.next())cn=pt(Yt,Se,li,cn.value,nt),cn!==null&&(f&&cn.alternate!==null&&Yt.delete(cn.key===null?li:cn.key),ve=A(cn,ve,li),Kt===null?Rt=cn:Kt.sibling=cn,Kt=cn);return f&&Yt.forEach(function(Tle){return m(Se,Tle)}),tr&&Vf(Se,li),Rt}function Or(Se,ve,Te,nt){if(typeof Te=="object"&&Te!==null&&Te.type===D&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case T:e:{for(var Rt=Te.key,Kt=ve;Kt!==null;){if(Kt.key===Rt){if(Rt=Te.type,Rt===D){if(Kt.tag===7){v(Se,Kt.sibling),ve=E(Kt,Te.props.children),ve.return=Se,Se=ve;break e}}else if(Kt.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===te&&HB(Rt)===Kt.type){v(Se,Kt.sibling),ve=E(Kt,Te.props),ve.ref=zb(Se,Kt,Te),ve.return=Se,Se=ve;break e}v(Se,Kt);break}else m(Se,Kt);Kt=Kt.sibling}Te.type===D?(ve=Zf(Te.props.children,Se.mode,nt,Te.key),ve.return=Se,Se=ve):(nt=t2(Te.type,Te.key,Te.props,null,Se.mode,nt),nt.ref=zb(Se,ve,Te),nt.return=Se,Se=nt)}return $(Se);case N:e:{for(Kt=Te.key;ve!==null;){if(ve.key===Kt)if(ve.tag===4&&ve.stateNode.containerInfo===Te.containerInfo&&ve.stateNode.implementation===Te.implementation){v(Se,ve.sibling),ve=E(ve,Te.children||[]),ve.return=Se,Se=ve;break e}else{v(Se,ve);break}else m(Se,ve);ve=ve.sibling}ve=aT(Te,Se.mode,nt),ve.return=Se,Se=ve}return $(Se);case te:return Kt=Te._init,Or(Se,ve,Kt(Te._payload),nt)}if(ys(Te))return yt(Se,ve,Te,nt);if(ae(Te))return Tt(Se,ve,Te,nt);NC(Se,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,ve!==null&&ve.tag===6?(v(Se,ve.sibling),ve=E(ve,Te),ve.return=Se,Se=ve):(v(Se,ve),ve=oT(Te,Se.mode,nt),ve.return=Se,Se=ve),$(Se)):v(Se,ve)}return Or}var xp=VB(!0),$B=VB(!1),MC=od(null),AC=null,kp=null,p7=null;function b7(){p7=kp=AC=null}function _7(f){var m=MC.current;Zn(MC),f._currentValue=m}function v7(f,m,v){for(;f!==null;){var x=f.alternate;if((f.childLanes&m)!==m?(f.childLanes|=m,x!==null&&(x.childLanes|=m)):x!==null&&(x.childLanes&m)!==m&&(x.childLanes|=m),f===v)break;f=f.return}}function Lp(f,m){AC=f,p7=kp=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&m)!==0&&(na=!0),f.firstContext=null)}function nl(f){var m=f._currentValue;if(p7!==f)if(f={context:f,memoizedValue:m,next:null},kp===null){if(AC===null)throw Error(t(308));kp=f,AC.dependencies={lanes:0,firstContext:f}}else kp=kp.next=f;return m}var $f=null;function w7(f){$f===null?$f=[f]:$f.push(f)}function jB(f,m,v,x){var E=m.interleaved;return E===null?(v.next=v,w7(m)):(v.next=E.next,E.next=v),m.interleaved=v,Dh(f,x)}function Dh(f,m){f.lanes|=m;var v=f.alternate;for(v!==null&&(v.lanes|=m),v=f,f=f.return;f!==null;)f.childLanes|=m,v=f.alternate,v!==null&&(v.childLanes|=m),v=f,f=f.return;return v.tag===3?v.stateNode:null}var cd=!1;function y7(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function UB(f,m){f=f.updateQueue,m.updateQueue===f&&(m.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function Eh(f,m){return{eventTime:f,lane:m,tag:0,payload:null,callback:null,next:null}}function hd(f,m,v){var x=f.updateQueue;if(x===null)return null;if(x=x.shared,(sn&2)!==0){var E=x.pending;return E===null?m.next=m:(m.next=E.next,E.next=m),x.pending=m,Dh(f,v)}return E=x.interleaved,E===null?(m.next=m,w7(x)):(m.next=E.next,E.next=m),x.interleaved=m,Dh(f,v)}function RC(f,m,v){if(m=m.updateQueue,m!==null&&(m=m.shared,(v&4194240)!==0)){var x=m.lanes;x&=f.pendingLanes,v|=x,m.lanes=v,P3(f,v)}}function qB(f,m){var v=f.updateQueue,x=f.alternate;if(x!==null&&(x=x.updateQueue,v===x)){var E=null,A=null;if(v=v.firstBaseUpdate,v!==null){do{var $={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};A===null?E=A=$:A=A.next=$,v=v.next}while(v!==null);A===null?E=A=m:A=A.next=m}else E=A=m;v={baseState:x.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:x.shared,effects:x.effects},f.updateQueue=v;return}f=v.lastBaseUpdate,f===null?v.firstBaseUpdate=m:f.next=m,v.lastBaseUpdate=m}function PC(f,m,v,x){var E=f.updateQueue;cd=!1;var A=E.firstBaseUpdate,$=E.lastBaseUpdate,le=E.shared.pending;if(le!==null){E.shared.pending=null;var me=le,Ee=me.next;me.next=null,$===null?A=Ee:$.next=Ee,$=me;var qe=f.alternate;qe!==null&&(qe=qe.updateQueue,le=qe.lastBaseUpdate,le!==$&&(le===null?qe.firstBaseUpdate=Ee:le.next=Ee,qe.lastBaseUpdate=me))}if(A!==null){var Xe=E.baseState;$=0,qe=Ee=me=null,le=A;do{var je=le.lane,pt=le.eventTime;if((x&je)===je){qe!==null&&(qe=qe.next={eventTime:pt,lane:0,tag:le.tag,payload:le.payload,callback:le.callback,next:null});e:{var yt=f,Tt=le;switch(je=m,pt=v,Tt.tag){case 1:if(yt=Tt.payload,typeof yt=="function"){Xe=yt.call(pt,Xe,je);break e}Xe=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=Tt.payload,je=typeof yt=="function"?yt.call(pt,Xe,je):yt,je==null)break e;Xe=fe({},Xe,je);break e;case 2:cd=!0}}le.callback!==null&&le.lane!==0&&(f.flags|=64,je=E.effects,je===null?E.effects=[le]:je.push(le))}else pt={eventTime:pt,lane:je,tag:le.tag,payload:le.payload,callback:le.callback,next:null},qe===null?(Ee=qe=pt,me=Xe):qe=qe.next=pt,$|=je;if(le=le.next,le===null){if(le=E.shared.pending,le===null)break;je=le,le=je.next,je.next=null,E.lastBaseUpdate=je,E.shared.pending=null}}while(!0);if(qe===null&&(me=Xe),E.baseState=me,E.firstBaseUpdate=Ee,E.lastBaseUpdate=qe,m=E.shared.interleaved,m!==null){E=m;do $|=E.lane,E=E.next;while(E!==m)}else A===null&&(E.shared.lanes=0);qf|=$,f.lanes=$,f.memoizedState=Xe}}function GB(f,m,v){if(f=m.effects,m.effects=null,f!==null)for(m=0;m<f.length;m++){var x=f[m],E=x.callback;if(E!==null){if(x.callback=null,x=v,typeof E!="function")throw Error(t(191,E));E.call(x)}}}var Hb={},Lc=od(Hb),Vb=od(Hb),$b=od(Hb);function jf(f){if(f===Hb)throw Error(t(174));return f}function C7(f,m){switch(Un($b,m),Un(Vb,f),Un(Lc,Hb),f=m.nodeType,f){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:Os(null,"");break;default:f=f===8?m.parentNode:m,m=f.namespaceURI||null,f=f.tagName,m=Os(m,f)}Zn(Lc),Un(Lc,m)}function Tp(){Zn(Lc),Zn(Vb),Zn($b)}function KB(f){jf($b.current);var m=jf(Lc.current),v=Os(m,f.type);m!==v&&(Un(Vb,f),Un(Lc,v))}function S7(f){Vb.current===f&&(Zn(Lc),Zn(Vb))}var cr=od(0);function OC(f){for(var m=f;m!==null;){if(m.tag===13){var v=m.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var x7=[];function k7(){for(var f=0;f<x7.length;f++)x7[f]._workInProgressVersionPrimary=null;x7.length=0}var BC=L.ReactCurrentDispatcher,L7=L.ReactCurrentBatchConfig,Uf=0,hr=null,as=null,Ss=null,FC=!1,jb=!1,Ub=0,Yae=0;function no(){throw Error(t(321))}function T7(f,m){if(m===null)return!1;for(var v=0;v<m.length&&v<f.length;v++)if(!Pl(f[v],m[v]))return!1;return!0}function D7(f,m,v,x,E,A){if(Uf=A,hr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,BC.current=f===null||f.memoizedState===null?Jae:ele,f=v(x,E),jb){A=0;do{if(jb=!1,Ub=0,25<=A)throw Error(t(301));A+=1,Ss=as=null,m.updateQueue=null,BC.current=tle,f=v(x,E)}while(jb)}if(BC.current=HC,m=as!==null&&as.next!==null,Uf=0,Ss=as=hr=null,FC=!1,m)throw Error(t(300));return f}function E7(){var f=Ub!==0;return Ub=0,f}function Tc(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ss===null?hr.memoizedState=Ss=f:Ss=Ss.next=f,Ss}function rl(){if(as===null){var f=hr.alternate;f=f!==null?f.memoizedState:null}else f=as.next;var m=Ss===null?hr.memoizedState:Ss.next;if(m!==null)Ss=m,as=f;else{if(f===null)throw Error(t(310));as=f,f={memoizedState:as.memoizedState,baseState:as.baseState,baseQueue:as.baseQueue,queue:as.queue,next:null},Ss===null?hr.memoizedState=Ss=f:Ss=Ss.next=f}return Ss}function qb(f,m){return typeof m=="function"?m(f):m}function I7(f){var m=rl(),v=m.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=f;var x=as,E=x.baseQueue,A=v.pending;if(A!==null){if(E!==null){var $=E.next;E.next=A.next,A.next=$}x.baseQueue=E=A,v.pending=null}if(E!==null){A=E.next,x=x.baseState;var le=$=null,me=null,Ee=A;do{var qe=Ee.lane;if((Uf&qe)===qe)me!==null&&(me=me.next={lane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),x=Ee.hasEagerState?Ee.eagerState:f(x,Ee.action);else{var Xe={lane:qe,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null};me===null?(le=me=Xe,$=x):me=me.next=Xe,hr.lanes|=qe,qf|=qe}Ee=Ee.next}while(Ee!==null&&Ee!==A);me===null?$=x:me.next=le,Pl(x,m.memoizedState)||(na=!0),m.memoizedState=x,m.baseState=$,m.baseQueue=me,v.lastRenderedState=x}if(f=v.interleaved,f!==null){E=f;do A=E.lane,hr.lanes|=A,qf|=A,E=E.next;while(E!==f)}else E===null&&(v.lanes=0);return[m.memoizedState,v.dispatch]}function N7(f){var m=rl(),v=m.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=f;var x=v.dispatch,E=v.pending,A=m.memoizedState;if(E!==null){v.pending=null;var $=E=E.next;do A=f(A,$.action),$=$.next;while($!==E);Pl(A,m.memoizedState)||(na=!0),m.memoizedState=A,m.baseQueue===null&&(m.baseState=A),v.lastRenderedState=A}return[A,x]}function YB(){}function ZB(f,m){var v=hr,x=rl(),E=m(),A=!Pl(x.memoizedState,E);if(A&&(x.memoizedState=E,na=!0),x=x.queue,M7(JB.bind(null,v,x,f),[f]),x.getSnapshot!==m||A||Ss!==null&&Ss.memoizedState.tag&1){if(v.flags|=2048,Gb(9,QB.bind(null,v,x,E,m),void 0,null),xs===null)throw Error(t(349));(Uf&30)!==0||XB(v,m,E)}return E}function XB(f,m,v){f.flags|=16384,f={getSnapshot:m,value:v},m=hr.updateQueue,m===null?(m={lastEffect:null,stores:null},hr.updateQueue=m,m.stores=[f]):(v=m.stores,v===null?m.stores=[f]:v.push(f))}function QB(f,m,v,x){m.value=v,m.getSnapshot=x,eF(m)&&tF(f)}function JB(f,m,v){return v(function(){eF(m)&&tF(f)})}function eF(f){var m=f.getSnapshot;f=f.value;try{var v=m();return!Pl(f,v)}catch{return!0}}function tF(f){var m=Dh(f,1);m!==null&&zl(m,f,1,-1)}function iF(f){var m=Tc();return typeof f=="function"&&(f=f()),m.memoizedState=m.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qb,lastRenderedState:f},m.queue=f,f=f.dispatch=Qae.bind(null,hr,f),[m.memoizedState,f]}function Gb(f,m,v,x){return f={tag:f,create:m,destroy:v,deps:x,next:null},m=hr.updateQueue,m===null?(m={lastEffect:null,stores:null},hr.updateQueue=m,m.lastEffect=f.next=f):(v=m.lastEffect,v===null?m.lastEffect=f.next=f:(x=v.next,v.next=f,f.next=x,m.lastEffect=f)),f}function nF(){return rl().memoizedState}function WC(f,m,v,x){var E=Tc();hr.flags|=f,E.memoizedState=Gb(1|m,v,void 0,x===void 0?null:x)}function zC(f,m,v,x){var E=rl();x=x===void 0?null:x;var A=void 0;if(as!==null){var $=as.memoizedState;if(A=$.destroy,x!==null&&T7(x,$.deps)){E.memoizedState=Gb(m,v,A,x);return}}hr.flags|=f,E.memoizedState=Gb(1|m,v,A,x)}function rF(f,m){return WC(8390656,8,f,m)}function M7(f,m){return zC(2048,8,f,m)}function sF(f,m){return zC(4,2,f,m)}function oF(f,m){return zC(4,4,f,m)}function aF(f,m){if(typeof m=="function")return f=f(),m(f),function(){m(null)};if(m!=null)return f=f(),m.current=f,function(){m.current=null}}function lF(f,m,v){return v=v!=null?v.concat([f]):null,zC(4,4,aF.bind(null,m,f),v)}function A7(){}function cF(f,m){var v=rl();m=m===void 0?null:m;var x=v.memoizedState;return x!==null&&m!==null&&T7(m,x[1])?x[0]:(v.memoizedState=[f,m],f)}function hF(f,m){var v=rl();m=m===void 0?null:m;var x=v.memoizedState;return x!==null&&m!==null&&T7(m,x[1])?x[0]:(f=f(),v.memoizedState=[f,m],f)}function uF(f,m,v){return(Uf&21)===0?(f.baseState&&(f.baseState=!1,na=!0),f.memoizedState=v):(Pl(v,m)||(v=HO(),hr.lanes|=v,qf|=v,f.baseState=!0),m)}function Zae(f,m){var v=Sn;Sn=v!==0&&4>v?v:4,f(!0);var x=L7.transition;L7.transition={};try{f(!1),m()}finally{Sn=v,L7.transition=x}}function dF(){return rl().memoizedState}function Xae(f,m,v){var x=gd(f);if(v={lane:x,action:v,hasEagerState:!1,eagerState:null,next:null},fF(f))gF(m,v);else if(v=jB(f,m,v,x),v!==null){var E=Eo();zl(v,f,x,E),mF(v,m,x)}}function Qae(f,m,v){var x=gd(f),E={lane:x,action:v,hasEagerState:!1,eagerState:null,next:null};if(fF(f))gF(m,E);else{var A=f.alternate;if(f.lanes===0&&(A===null||A.lanes===0)&&(A=m.lastRenderedReducer,A!==null))try{var $=m.lastRenderedState,le=A($,v);if(E.hasEagerState=!0,E.eagerState=le,Pl(le,$)){var me=m.interleaved;me===null?(E.next=E,w7(m)):(E.next=me.next,me.next=E),m.interleaved=E;return}}catch{}finally{}v=jB(f,m,E,x),v!==null&&(E=Eo(),zl(v,f,x,E),mF(v,m,x))}}function fF(f){var m=f.alternate;return f===hr||m!==null&&m===hr}function gF(f,m){jb=FC=!0;var v=f.pending;v===null?m.next=m:(m.next=v.next,v.next=m),f.pending=m}function mF(f,m,v){if((v&4194240)!==0){var x=m.lanes;x&=f.pendingLanes,v|=x,m.lanes=v,P3(f,v)}}var HC={readContext:nl,useCallback:no,useContext:no,useEffect:no,useImperativeHandle:no,useInsertionEffect:no,useLayoutEffect:no,useMemo:no,useReducer:no,useRef:no,useState:no,useDebugValue:no,useDeferredValue:no,useTransition:no,useMutableSource:no,useSyncExternalStore:no,useId:no,unstable_isNewReconciler:!1},Jae={readContext:nl,useCallback:function(f,m){return Tc().memoizedState=[f,m===void 0?null:m],f},useContext:nl,useEffect:rF,useImperativeHandle:function(f,m,v){return v=v!=null?v.concat([f]):null,WC(4194308,4,aF.bind(null,m,f),v)},useLayoutEffect:function(f,m){return WC(4194308,4,f,m)},useInsertionEffect:function(f,m){return WC(4,2,f,m)},useMemo:function(f,m){var v=Tc();return m=m===void 0?null:m,f=f(),v.memoizedState=[f,m],f},useReducer:function(f,m,v){var x=Tc();return m=v!==void 0?v(m):m,x.memoizedState=x.baseState=m,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:m},x.queue=f,f=f.dispatch=Xae.bind(null,hr,f),[x.memoizedState,f]},useRef:function(f){var m=Tc();return f={current:f},m.memoizedState=f},useState:iF,useDebugValue:A7,useDeferredValue:function(f){return Tc().memoizedState=f},useTransition:function(){var f=iF(!1),m=f[0];return f=Zae.bind(null,f[1]),Tc().memoizedState=f,[m,f]},useMutableSource:function(){},useSyncExternalStore:function(f,m,v){var x=hr,E=Tc();if(tr){if(v===void 0)throw Error(t(407));v=v()}else{if(v=m(),xs===null)throw Error(t(349));(Uf&30)!==0||XB(x,m,v)}E.memoizedState=v;var A={value:v,getSnapshot:m};return E.queue=A,rF(JB.bind(null,x,A,f),[f]),x.flags|=2048,Gb(9,QB.bind(null,x,A,v,m),void 0,null),v},useId:function(){var f=Tc(),m=xs.identifierPrefix;if(tr){var v=Th,x=Lh;v=(x&~(1<<32-ln(x)-1)).toString(32)+v,m=":"+m+"R"+v,v=Ub++,0<v&&(m+="H"+v.toString(32)),m+=":"}else v=Yae++,m=":"+m+"r"+v.toString(32)+":";return f.memoizedState=m},unstable_isNewReconciler:!1},ele={readContext:nl,useCallback:cF,useContext:nl,useEffect:M7,useImperativeHandle:lF,useInsertionEffect:sF,useLayoutEffect:oF,useMemo:hF,useReducer:I7,useRef:nF,useState:function(){return I7(qb)},useDebugValue:A7,useDeferredValue:function(f){var m=rl();return uF(m,as.memoizedState,f)},useTransition:function(){var f=I7(qb)[0],m=rl().memoizedState;return[f,m]},useMutableSource:YB,useSyncExternalStore:ZB,useId:dF,unstable_isNewReconciler:!1},tle={readContext:nl,useCallback:cF,useContext:nl,useEffect:M7,useImperativeHandle:lF,useInsertionEffect:sF,useLayoutEffect:oF,useMemo:hF,useReducer:N7,useRef:nF,useState:function(){return N7(qb)},useDebugValue:A7,useDeferredValue:function(f){var m=rl();return as===null?m.memoizedState=f:uF(m,as.memoizedState,f)},useTransition:function(){var f=N7(qb)[0],m=rl().memoizedState;return[f,m]},useMutableSource:YB,useSyncExternalStore:ZB,useId:dF,unstable_isNewReconciler:!1};function Bl(f,m){if(f&&f.defaultProps){m=fe({},m),f=f.defaultProps;for(var v in f)m[v]===void 0&&(m[v]=f[v]);return m}return m}function R7(f,m,v,x){m=f.memoizedState,v=v(x,m),v=v==null?m:fe({},m,v),f.memoizedState=v,f.lanes===0&&(f.updateQueue.baseState=v)}var VC={isMounted:function(f){return(f=f._reactInternals)?Ke(f)===f:!1},enqueueSetState:function(f,m,v){f=f._reactInternals;var x=Eo(),E=gd(f),A=Eh(x,E);A.payload=m,v!=null&&(A.callback=v),m=hd(f,A,E),m!==null&&(zl(m,f,E,x),RC(m,f,E))},enqueueReplaceState:function(f,m,v){f=f._reactInternals;var x=Eo(),E=gd(f),A=Eh(x,E);A.tag=1,A.payload=m,v!=null&&(A.callback=v),m=hd(f,A,E),m!==null&&(zl(m,f,E,x),RC(m,f,E))},enqueueForceUpdate:function(f,m){f=f._reactInternals;var v=Eo(),x=gd(f),E=Eh(v,x);E.tag=2,m!=null&&(E.callback=m),m=hd(f,E,x),m!==null&&(zl(m,f,x,v),RC(m,f,x))}};function pF(f,m,v,x,E,A,$){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(x,A,$):m.prototype&&m.prototype.isPureReactComponent?!Ab(v,x)||!Ab(E,A):!0}function bF(f,m,v){var x=!1,E=ad,A=m.contextType;return typeof A=="object"&&A!==null?A=nl(A):(E=ia(m)?zf:io.current,x=m.contextTypes,A=(x=x!=null)?wp(f,E):ad),m=new m(v,A),f.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=VC,f.stateNode=m,m._reactInternals=f,x&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=E,f.__reactInternalMemoizedMaskedChildContext=A),m}function _F(f,m,v,x){f=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(v,x),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(v,x),m.state!==f&&VC.enqueueReplaceState(m,m.state,null)}function P7(f,m,v,x){var E=f.stateNode;E.props=v,E.state=f.memoizedState,E.refs={},y7(f);var A=m.contextType;typeof A=="object"&&A!==null?E.context=nl(A):(A=ia(m)?zf:io.current,E.context=wp(f,A)),E.state=f.memoizedState,A=m.getDerivedStateFromProps,typeof A=="function"&&(R7(f,m,A,v),E.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(m=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),m!==E.state&&VC.enqueueReplaceState(E,E.state,null),PC(f,v,E,x),E.state=f.memoizedState),typeof E.componentDidMount=="function"&&(f.flags|=4194308)}function Dp(f,m){try{var v="",x=m;do v+=Ie(x),x=x.return;while(x);var E=v}catch(A){E=`
Error generating stack: `+A.message+`
`+A.stack}return{value:f,source:m,stack:E,digest:null}}function O7(f,m,v){return{value:f,source:null,stack:v??null,digest:m??null}}function B7(f,m){try{console.error(m.value)}catch(v){setTimeout(function(){throw v})}}var ile=typeof WeakMap=="function"?WeakMap:Map;function vF(f,m,v){v=Eh(-1,v),v.tag=3,v.payload={element:null};var x=m.value;return v.callback=function(){YC||(YC=!0,Q7=x),B7(f,m)},v}function wF(f,m,v){v=Eh(-1,v),v.tag=3;var x=f.type.getDerivedStateFromError;if(typeof x=="function"){var E=m.value;v.payload=function(){return x(E)},v.callback=function(){B7(f,m)}}var A=f.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(v.callback=function(){B7(f,m),typeof x!="function"&&(dd===null?dd=new Set([this]):dd.add(this));var $=m.stack;this.componentDidCatch(m.value,{componentStack:$!==null?$:""})}),v}function yF(f,m,v){var x=f.pingCache;if(x===null){x=f.pingCache=new ile;var E=new Set;x.set(m,E)}else E=x.get(m),E===void 0&&(E=new Set,x.set(m,E));E.has(v)||(E.add(v),f=ple.bind(null,f,m,v),m.then(f,f))}function CF(f){do{var m;if((m=f.tag===13)&&(m=f.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return f;f=f.return}while(f!==null);return null}function SF(f,m,v,x,E){return(f.mode&1)===0?(f===m?f.flags|=65536:(f.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(m=Eh(-1,1),m.tag=2,hd(v,m,1))),v.lanes|=1),f):(f.flags|=65536,f.lanes=E,f)}var nle=L.ReactCurrentOwner,na=!1;function Do(f,m,v,x){m.child=f===null?$B(m,null,v,x):xp(m,f.child,v,x)}function xF(f,m,v,x,E){v=v.render;var A=m.ref;return Lp(m,E),x=D7(f,m,v,x,A,E),v=E7(),f!==null&&!na?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~E,Ih(f,m,E)):(tr&&v&&u7(m),m.flags|=1,Do(f,m,x,E),m.child)}function kF(f,m,v,x,E){if(f===null){var A=v.type;return typeof A=="function"&&!sT(A)&&A.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(m.tag=15,m.type=A,LF(f,m,A,x,E)):(f=t2(v.type,null,x,m,m.mode,E),f.ref=m.ref,f.return=m,m.child=f)}if(A=f.child,(f.lanes&E)===0){var $=A.memoizedProps;if(v=v.compare,v=v!==null?v:Ab,v($,x)&&f.ref===m.ref)return Ih(f,m,E)}return m.flags|=1,f=pd(A,x),f.ref=m.ref,f.return=m,m.child=f}function LF(f,m,v,x,E){if(f!==null){var A=f.memoizedProps;if(Ab(A,x)&&f.ref===m.ref)if(na=!1,m.pendingProps=x=A,(f.lanes&E)!==0)(f.flags&131072)!==0&&(na=!0);else return m.lanes=f.lanes,Ih(f,m,E)}return F7(f,m,v,x,E)}function TF(f,m,v){var x=m.pendingProps,E=x.children,A=f!==null?f.memoizedState:null;if(x.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null,transitions:null},Un(Ip,Ma),Ma|=v;else{if((v&1073741824)===0)return f=A!==null?A.baseLanes|v:v,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:f,cachePool:null,transitions:null},m.updateQueue=null,Un(Ip,Ma),Ma|=f,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=A!==null?A.baseLanes:v,Un(Ip,Ma),Ma|=x}else A!==null?(x=A.baseLanes|v,m.memoizedState=null):x=v,Un(Ip,Ma),Ma|=x;return Do(f,m,E,v),m.child}function DF(f,m){var v=m.ref;(f===null&&v!==null||f!==null&&f.ref!==v)&&(m.flags|=512,m.flags|=2097152)}function F7(f,m,v,x,E){var A=ia(v)?zf:io.current;return A=wp(m,A),Lp(m,E),v=D7(f,m,v,x,A,E),x=E7(),f!==null&&!na?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~E,Ih(f,m,E)):(tr&&x&&u7(m),m.flags|=1,Do(f,m,v,E),m.child)}function EF(f,m,v,x,E){if(ia(v)){var A=!0;LC(m)}else A=!1;if(Lp(m,E),m.stateNode===null)jC(f,m),bF(m,v,x),P7(m,v,x,E),x=!0;else if(f===null){var $=m.stateNode,le=m.memoizedProps;$.props=le;var me=$.context,Ee=v.contextType;typeof Ee=="object"&&Ee!==null?Ee=nl(Ee):(Ee=ia(v)?zf:io.current,Ee=wp(m,Ee));var qe=v.getDerivedStateFromProps,Xe=typeof qe=="function"||typeof $.getSnapshotBeforeUpdate=="function";Xe||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(le!==x||me!==Ee)&&_F(m,$,x,Ee),cd=!1;var je=m.memoizedState;$.state=je,PC(m,x,$,E),me=m.memoizedState,le!==x||je!==me||ta.current||cd?(typeof qe=="function"&&(R7(m,v,qe,x),me=m.memoizedState),(le=cd||pF(m,v,le,x,je,me,Ee))?(Xe||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(m.flags|=4194308)):(typeof $.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=x,m.memoizedState=me),$.props=x,$.state=me,$.context=Ee,x=le):(typeof $.componentDidMount=="function"&&(m.flags|=4194308),x=!1)}else{$=m.stateNode,UB(f,m),le=m.memoizedProps,Ee=m.type===m.elementType?le:Bl(m.type,le),$.props=Ee,Xe=m.pendingProps,je=$.context,me=v.contextType,typeof me=="object"&&me!==null?me=nl(me):(me=ia(v)?zf:io.current,me=wp(m,me));var pt=v.getDerivedStateFromProps;(qe=typeof pt=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(le!==Xe||je!==me)&&_F(m,$,x,me),cd=!1,je=m.memoizedState,$.state=je,PC(m,x,$,E);var yt=m.memoizedState;le!==Xe||je!==yt||ta.current||cd?(typeof pt=="function"&&(R7(m,v,pt,x),yt=m.memoizedState),(Ee=cd||pF(m,v,Ee,x,je,yt,me)||!1)?(qe||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(x,yt,me),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(x,yt,me)),typeof $.componentDidUpdate=="function"&&(m.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof $.componentDidUpdate!="function"||le===f.memoizedProps&&je===f.memoizedState||(m.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||le===f.memoizedProps&&je===f.memoizedState||(m.flags|=1024),m.memoizedProps=x,m.memoizedState=yt),$.props=x,$.state=yt,$.context=me,x=Ee):(typeof $.componentDidUpdate!="function"||le===f.memoizedProps&&je===f.memoizedState||(m.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||le===f.memoizedProps&&je===f.memoizedState||(m.flags|=1024),x=!1)}return W7(f,m,v,x,A,E)}function W7(f,m,v,x,E,A){DF(f,m);var $=(m.flags&128)!==0;if(!x&&!$)return E&&RB(m,v,!1),Ih(f,m,A);x=m.stateNode,nle.current=m;var le=$&&typeof v.getDerivedStateFromError!="function"?null:x.render();return m.flags|=1,f!==null&&$?(m.child=xp(m,f.child,null,A),m.child=xp(m,null,le,A)):Do(f,m,le,A),m.memoizedState=x.state,E&&RB(m,v,!0),m.child}function IF(f){var m=f.stateNode;m.pendingContext?MB(f,m.pendingContext,m.pendingContext!==m.context):m.context&&MB(f,m.context,!1),C7(f,m.containerInfo)}function NF(f,m,v,x,E){return Sp(),m7(E),m.flags|=256,Do(f,m,v,x),m.child}var z7={dehydrated:null,treeContext:null,retryLane:0};function H7(f){return{baseLanes:f,cachePool:null,transitions:null}}function MF(f,m,v){var x=m.pendingProps,E=cr.current,A=!1,$=(m.flags&128)!==0,le;if((le=$)||(le=f!==null&&f.memoizedState===null?!1:(E&2)!==0),le?(A=!0,m.flags&=-129):(f===null||f.memoizedState!==null)&&(E|=1),Un(cr,E&1),f===null)return g7(m),f=m.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((m.mode&1)===0?m.lanes=1:f.data==="$!"?m.lanes=8:m.lanes=1073741824,null):($=x.children,f=x.fallback,A?(x=m.mode,A=m.child,$={mode:"hidden",children:$},(x&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=$):A=i2($,x,0,null),f=Zf(f,x,v,null),A.return=m,f.return=m,A.sibling=f,m.child=A,m.child.memoizedState=H7(v),m.memoizedState=z7,f):V7(m,$));if(E=f.memoizedState,E!==null&&(le=E.dehydrated,le!==null))return rle(f,m,$,x,le,E,v);if(A){A=x.fallback,$=m.mode,E=f.child,le=E.sibling;var me={mode:"hidden",children:x.children};return($&1)===0&&m.child!==E?(x=m.child,x.childLanes=0,x.pendingProps=me,m.deletions=null):(x=pd(E,me),x.subtreeFlags=E.subtreeFlags&14680064),le!==null?A=pd(le,A):(A=Zf(A,$,v,null),A.flags|=2),A.return=m,x.return=m,x.sibling=A,m.child=x,x=A,A=m.child,$=f.child.memoizedState,$=$===null?H7(v):{baseLanes:$.baseLanes|v,cachePool:null,transitions:$.transitions},A.memoizedState=$,A.childLanes=f.childLanes&~v,m.memoizedState=z7,x}return A=f.child,f=A.sibling,x=pd(A,{mode:"visible",children:x.children}),(m.mode&1)===0&&(x.lanes=v),x.return=m,x.sibling=null,f!==null&&(v=m.deletions,v===null?(m.deletions=[f],m.flags|=16):v.push(f)),m.child=x,m.memoizedState=null,x}function V7(f,m){return m=i2({mode:"visible",children:m},f.mode,0,null),m.return=f,f.child=m}function $C(f,m,v,x){return x!==null&&m7(x),xp(m,f.child,null,v),f=V7(m,m.pendingProps.children),f.flags|=2,m.memoizedState=null,f}function rle(f,m,v,x,E,A,$){if(v)return m.flags&256?(m.flags&=-257,x=O7(Error(t(422))),$C(f,m,$,x)):m.memoizedState!==null?(m.child=f.child,m.flags|=128,null):(A=x.fallback,E=m.mode,x=i2({mode:"visible",children:x.children},E,0,null),A=Zf(A,E,$,null),A.flags|=2,x.return=m,A.return=m,x.sibling=A,m.child=x,(m.mode&1)!==0&&xp(m,f.child,null,$),m.child.memoizedState=H7($),m.memoizedState=z7,A);if((m.mode&1)===0)return $C(f,m,$,null);if(E.data==="$!"){if(x=E.nextSibling&&E.nextSibling.dataset,x)var le=x.dgst;return x=le,A=Error(t(419)),x=O7(A,x,void 0),$C(f,m,$,x)}if(le=($&f.childLanes)!==0,na||le){if(x=xs,x!==null){switch($&-$){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(x.suspendedLanes|$))!==0?0:E,E!==0&&E!==A.retryLane&&(A.retryLane=E,Dh(f,E),zl(x,f,E,-1))}return rT(),x=O7(Error(t(421))),$C(f,m,$,x)}return E.data==="$?"?(m.flags|=128,m.child=f.child,m=ble.bind(null,f),E._reactRetry=m,null):(f=A.treeContext,Na=sd(E.nextSibling),Ia=m,tr=!0,Ol=null,f!==null&&(tl[il++]=Lh,tl[il++]=Th,tl[il++]=Hf,Lh=f.id,Th=f.overflow,Hf=m),m=V7(m,x.children),m.flags|=4096,m)}function AF(f,m,v){f.lanes|=m;var x=f.alternate;x!==null&&(x.lanes|=m),v7(f.return,m,v)}function $7(f,m,v,x,E){var A=f.memoizedState;A===null?f.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:x,tail:v,tailMode:E}:(A.isBackwards=m,A.rendering=null,A.renderingStartTime=0,A.last=x,A.tail=v,A.tailMode=E)}function RF(f,m,v){var x=m.pendingProps,E=x.revealOrder,A=x.tail;if(Do(f,m,x.children,v),x=cr.current,(x&2)!==0)x=x&1|2,m.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=m.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&AF(f,v,m);else if(f.tag===19)AF(f,v,m);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===m)break e;for(;f.sibling===null;){if(f.return===null||f.return===m)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}x&=1}if(Un(cr,x),(m.mode&1)===0)m.memoizedState=null;else switch(E){case"forwards":for(v=m.child,E=null;v!==null;)f=v.alternate,f!==null&&OC(f)===null&&(E=v),v=v.sibling;v=E,v===null?(E=m.child,m.child=null):(E=v.sibling,v.sibling=null),$7(m,!1,E,v,A);break;case"backwards":for(v=null,E=m.child,m.child=null;E!==null;){if(f=E.alternate,f!==null&&OC(f)===null){m.child=E;break}f=E.sibling,E.sibling=v,v=E,E=f}$7(m,!0,v,null,A);break;case"together":$7(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function jC(f,m){(m.mode&1)===0&&f!==null&&(f.alternate=null,m.alternate=null,m.flags|=2)}function Ih(f,m,v){if(f!==null&&(m.dependencies=f.dependencies),qf|=m.lanes,(v&m.childLanes)===0)return null;if(f!==null&&m.child!==f.child)throw Error(t(153));if(m.child!==null){for(f=m.child,v=pd(f,f.pendingProps),m.child=v,v.return=m;f.sibling!==null;)f=f.sibling,v=v.sibling=pd(f,f.pendingProps),v.return=m;v.sibling=null}return m.child}function sle(f,m,v){switch(m.tag){case 3:IF(m),Sp();break;case 5:KB(m);break;case 1:ia(m.type)&&LC(m);break;case 4:C7(m,m.stateNode.containerInfo);break;case 10:var x=m.type._context,E=m.memoizedProps.value;Un(MC,x._currentValue),x._currentValue=E;break;case 13:if(x=m.memoizedState,x!==null)return x.dehydrated!==null?(Un(cr,cr.current&1),m.flags|=128,null):(v&m.child.childLanes)!==0?MF(f,m,v):(Un(cr,cr.current&1),f=Ih(f,m,v),f!==null?f.sibling:null);Un(cr,cr.current&1);break;case 19:if(x=(v&m.childLanes)!==0,(f.flags&128)!==0){if(x)return RF(f,m,v);m.flags|=128}if(E=m.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Un(cr,cr.current),x)break;return null;case 22:case 23:return m.lanes=0,TF(f,m,v)}return Ih(f,m,v)}var PF,j7,OF,BF;PF=function(f,m){for(var v=m.child;v!==null;){if(v.tag===5||v.tag===6)f.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===m)break;for(;v.sibling===null;){if(v.return===null||v.return===m)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},j7=function(){},OF=function(f,m,v,x){var E=f.memoizedProps;if(E!==x){f=m.stateNode,jf(Lc.current);var A=null;switch(v){case"input":E=rn(f,E),x=rn(f,x),A=[];break;case"select":E=fe({},E,{value:void 0}),x=fe({},x,{value:void 0}),A=[];break;case"textarea":E=el(f,E),x=el(f,x),A=[];break;default:typeof E.onClick!="function"&&typeof x.onClick=="function"&&(f.onclick=SC)}Bs(v,x);var $;v=null;for(Ee in E)if(!x.hasOwnProperty(Ee)&&E.hasOwnProperty(Ee)&&E[Ee]!=null)if(Ee==="style"){var le=E[Ee];for($ in le)le.hasOwnProperty($)&&(v||(v={}),v[$]="")}else Ee!=="dangerouslySetInnerHTML"&&Ee!=="children"&&Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&Ee!=="autoFocus"&&(r.hasOwnProperty(Ee)?A||(A=[]):(A=A||[]).push(Ee,null));for(Ee in x){var me=x[Ee];if(le=E?.[Ee],x.hasOwnProperty(Ee)&&me!==le&&(me!=null||le!=null))if(Ee==="style")if(le){for($ in le)!le.hasOwnProperty($)||me&&me.hasOwnProperty($)||(v||(v={}),v[$]="");for($ in me)me.hasOwnProperty($)&&le[$]!==me[$]&&(v||(v={}),v[$]=me[$])}else v||(A||(A=[]),A.push(Ee,v)),v=me;else Ee==="dangerouslySetInnerHTML"?(me=me?me.__html:void 0,le=le?le.__html:void 0,me!=null&&le!==me&&(A=A||[]).push(Ee,me)):Ee==="children"?typeof me!="string"&&typeof me!="number"||(A=A||[]).push(Ee,""+me):Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&(r.hasOwnProperty(Ee)?(me!=null&&Ee==="onScroll"&&Yn("scroll",f),A||le===me||(A=[])):(A=A||[]).push(Ee,me))}v&&(A=A||[]).push("style",v);var Ee=A;(m.updateQueue=Ee)&&(m.flags|=4)}},BF=function(f,m,v,x){v!==x&&(m.flags|=4)};function Kb(f,m){if(!tr)switch(f.tailMode){case"hidden":m=f.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?f.tail=null:v.sibling=null;break;case"collapsed":v=f.tail;for(var x=null;v!==null;)v.alternate!==null&&(x=v),v=v.sibling;x===null?m||f.tail===null?f.tail=null:f.tail.sibling=null:x.sibling=null}}function ro(f){var m=f.alternate!==null&&f.alternate.child===f.child,v=0,x=0;if(m)for(var E=f.child;E!==null;)v|=E.lanes|E.childLanes,x|=E.subtreeFlags&14680064,x|=E.flags&14680064,E.return=f,E=E.sibling;else for(E=f.child;E!==null;)v|=E.lanes|E.childLanes,x|=E.subtreeFlags,x|=E.flags,E.return=f,E=E.sibling;return f.subtreeFlags|=x,f.childLanes=v,m}function ole(f,m,v){var x=m.pendingProps;switch(d7(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ro(m),null;case 1:return ia(m.type)&&kC(),ro(m),null;case 3:return x=m.stateNode,Tp(),Zn(ta),Zn(io),k7(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(f===null||f.child===null)&&(IC(m)?m.flags|=4:f===null||f.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Ol!==null&&(tT(Ol),Ol=null))),j7(f,m),ro(m),null;case 5:S7(m);var E=jf($b.current);if(v=m.type,f!==null&&m.stateNode!=null)OF(f,m,v,x,E),f.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!x){if(m.stateNode===null)throw Error(t(166));return ro(m),null}if(f=jf(Lc.current),IC(m)){x=m.stateNode,v=m.type;var A=m.memoizedProps;switch(x[kc]=m,x[Fb]=A,f=(m.mode&1)!==0,v){case"dialog":Yn("cancel",x),Yn("close",x);break;case"iframe":case"object":case"embed":Yn("load",x);break;case"video":case"audio":for(E=0;E<Pb.length;E++)Yn(Pb[E],x);break;case"source":Yn("error",x);break;case"img":case"image":case"link":Yn("error",x),Yn("load",x);break;case"details":Yn("toggle",x);break;case"input":ss(x,A),Yn("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!A.multiple},Yn("invalid",x);break;case"textarea":ko(x,A),Yn("invalid",x)}Bs(v,A),E=null;for(var $ in A)if(A.hasOwnProperty($)){var le=A[$];$==="children"?typeof le=="string"?x.textContent!==le&&(A.suppressHydrationWarning!==!0&&CC(x.textContent,le,f),E=["children",le]):typeof le=="number"&&x.textContent!==""+le&&(A.suppressHydrationWarning!==!0&&CC(x.textContent,le,f),E=["children",""+le]):r.hasOwnProperty($)&&le!=null&&$==="onScroll"&&Yn("scroll",x)}switch(v){case"input":yn(x),Nr(x,A,!0);break;case"textarea":yn(x),$n(x);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(x.onclick=SC)}x=E,m.updateQueue=x,x!==null&&(m.flags|=4)}else{$=E.nodeType===9?E:E.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=Mr(v)),f==="http://www.w3.org/1999/xhtml"?v==="script"?(f=$.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):typeof x.is=="string"?f=$.createElement(v,{is:x.is}):(f=$.createElement(v),v==="select"&&($=f,x.multiple?$.multiple=!0:x.size&&($.size=x.size))):f=$.createElementNS(f,v),f[kc]=m,f[Fb]=x,PF(f,m,!1,!1),m.stateNode=f;e:{switch($=Rr(v,x),v){case"dialog":Yn("cancel",f),Yn("close",f),E=x;break;case"iframe":case"object":case"embed":Yn("load",f),E=x;break;case"video":case"audio":for(E=0;E<Pb.length;E++)Yn(Pb[E],f);E=x;break;case"source":Yn("error",f),E=x;break;case"img":case"image":case"link":Yn("error",f),Yn("load",f),E=x;break;case"details":Yn("toggle",f),E=x;break;case"input":ss(f,x),E=rn(f,x),Yn("invalid",f);break;case"option":E=x;break;case"select":f._wrapperState={wasMultiple:!!x.multiple},E=fe({},x,{value:void 0}),Yn("invalid",f);break;case"textarea":ko(f,x),E=el(f,x),Yn("invalid",f);break;default:E=x}Bs(v,E),le=E;for(A in le)if(le.hasOwnProperty(A)){var me=le[A];A==="style"?Ai(f,me):A==="dangerouslySetInnerHTML"?(me=me?me.__html:void 0,me!=null&&ar(f,me)):A==="children"?typeof me=="string"?(v!=="textarea"||me!=="")&&wr(f,me):typeof me=="number"&&wr(f,""+me):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(r.hasOwnProperty(A)?me!=null&&A==="onScroll"&&Yn("scroll",f):me!=null&&k(f,A,me,$))}switch(v){case"input":yn(f),Nr(f,x,!1);break;case"textarea":yn(f),$n(f);break;case"option":x.value!=null&&f.setAttribute("value",""+ot(x.value));break;case"select":f.multiple=!!x.multiple,A=x.value,A!=null?eo(f,!!x.multiple,A,!1):x.defaultValue!=null&&eo(f,!!x.multiple,x.defaultValue,!0);break;default:typeof E.onClick=="function"&&(f.onclick=SC)}switch(v){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return ro(m),null;case 6:if(f&&m.stateNode!=null)BF(f,m,f.memoizedProps,x);else{if(typeof x!="string"&&m.stateNode===null)throw Error(t(166));if(v=jf($b.current),jf(Lc.current),IC(m)){if(x=m.stateNode,v=m.memoizedProps,x[kc]=m,(A=x.nodeValue!==v)&&(f=Ia,f!==null))switch(f.tag){case 3:CC(x.nodeValue,v,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&CC(x.nodeValue,v,(f.mode&1)!==0)}A&&(m.flags|=4)}else x=(v.nodeType===9?v:v.ownerDocument).createTextNode(x),x[kc]=m,m.stateNode=x}return ro(m),null;case 13:if(Zn(cr),x=m.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(tr&&Na!==null&&(m.mode&1)!==0&&(m.flags&128)===0)zB(),Sp(),m.flags|=98560,A=!1;else if(A=IC(m),x!==null&&x.dehydrated!==null){if(f===null){if(!A)throw Error(t(318));if(A=m.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(t(317));A[kc]=m}else Sp(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;ro(m),A=!1}else Ol!==null&&(tT(Ol),Ol=null),A=!0;if(!A)return m.flags&65536?m:null}return(m.flags&128)!==0?(m.lanes=v,m):(x=x!==null,x!==(f!==null&&f.memoizedState!==null)&&x&&(m.child.flags|=8192,(m.mode&1)!==0&&(f===null||(cr.current&1)!==0?ls===0&&(ls=3):rT())),m.updateQueue!==null&&(m.flags|=4),ro(m),null);case 4:return Tp(),j7(f,m),f===null&&Ob(m.stateNode.containerInfo),ro(m),null;case 10:return _7(m.type._context),ro(m),null;case 17:return ia(m.type)&&kC(),ro(m),null;case 19:if(Zn(cr),A=m.memoizedState,A===null)return ro(m),null;if(x=(m.flags&128)!==0,$=A.rendering,$===null)if(x)Kb(A,!1);else{if(ls!==0||f!==null&&(f.flags&128)!==0)for(f=m.child;f!==null;){if($=OC(f),$!==null){for(m.flags|=128,Kb(A,!1),x=$.updateQueue,x!==null&&(m.updateQueue=x,m.flags|=4),m.subtreeFlags=0,x=v,v=m.child;v!==null;)A=v,f=x,A.flags&=14680066,$=A.alternate,$===null?(A.childLanes=0,A.lanes=f,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=$.childLanes,A.lanes=$.lanes,A.child=$.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=$.memoizedProps,A.memoizedState=$.memoizedState,A.updateQueue=$.updateQueue,A.type=$.type,f=$.dependencies,A.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),v=v.sibling;return Un(cr,cr.current&1|2),m.child}f=f.sibling}A.tail!==null&&gt()>Np&&(m.flags|=128,x=!0,Kb(A,!1),m.lanes=4194304)}else{if(!x)if(f=OC($),f!==null){if(m.flags|=128,x=!0,v=f.updateQueue,v!==null&&(m.updateQueue=v,m.flags|=4),Kb(A,!0),A.tail===null&&A.tailMode==="hidden"&&!$.alternate&&!tr)return ro(m),null}else 2*gt()-A.renderingStartTime>Np&&v!==1073741824&&(m.flags|=128,x=!0,Kb(A,!1),m.lanes=4194304);A.isBackwards?($.sibling=m.child,m.child=$):(v=A.last,v!==null?v.sibling=$:m.child=$,A.last=$)}return A.tail!==null?(m=A.tail,A.rendering=m,A.tail=m.sibling,A.renderingStartTime=gt(),m.sibling=null,v=cr.current,Un(cr,x?v&1|2:v&1),m):(ro(m),null);case 22:case 23:return nT(),x=m.memoizedState!==null,f!==null&&f.memoizedState!==null!==x&&(m.flags|=8192),x&&(m.mode&1)!==0?(Ma&1073741824)!==0&&(ro(m),m.subtreeFlags&6&&(m.flags|=8192)):ro(m),null;case 24:return null;case 25:return null}throw Error(t(156,m.tag))}function ale(f,m){switch(d7(m),m.tag){case 1:return ia(m.type)&&kC(),f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 3:return Tp(),Zn(ta),Zn(io),k7(),f=m.flags,(f&65536)!==0&&(f&128)===0?(m.flags=f&-65537|128,m):null;case 5:return S7(m),null;case 13:if(Zn(cr),f=m.memoizedState,f!==null&&f.dehydrated!==null){if(m.alternate===null)throw Error(t(340));Sp()}return f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 19:return Zn(cr),null;case 4:return Tp(),null;case 10:return _7(m.type._context),null;case 22:case 23:return nT(),null;case 24:return null;default:return null}}var UC=!1,so=!1,lle=typeof WeakSet=="function"?WeakSet:Set,_t=null;function Ep(f,m){var v=f.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(x){yr(f,m,x)}else v.current=null}function U7(f,m,v){try{v()}catch(x){yr(f,m,x)}}var FF=!1;function cle(f,m){if(n7=uC,f=pB(),Y3(f)){if("selectionStart"in f)var v={start:f.selectionStart,end:f.selectionEnd};else e:{v=(v=f.ownerDocument)&&v.defaultView||window;var x=v.getSelection&&v.getSelection();if(x&&x.rangeCount!==0){v=x.anchorNode;var E=x.anchorOffset,A=x.focusNode;x=x.focusOffset;try{v.nodeType,A.nodeType}catch{v=null;break e}var $=0,le=-1,me=-1,Ee=0,qe=0,Xe=f,je=null;t:for(;;){for(var pt;Xe!==v||E!==0&&Xe.nodeType!==3||(le=$+E),Xe!==A||x!==0&&Xe.nodeType!==3||(me=$+x),Xe.nodeType===3&&($+=Xe.nodeValue.length),(pt=Xe.firstChild)!==null;)je=Xe,Xe=pt;for(;;){if(Xe===f)break t;if(je===v&&++Ee===E&&(le=$),je===A&&++qe===x&&(me=$),(pt=Xe.nextSibling)!==null)break;Xe=je,je=Xe.parentNode}Xe=pt}v=le===-1||me===-1?null:{start:le,end:me}}else v=null}v=v||{start:0,end:0}}else v=null;for(r7={focusedElem:f,selectionRange:v},uC=!1,_t=m;_t!==null;)if(m=_t,f=m.child,(m.subtreeFlags&1028)!==0&&f!==null)f.return=m,_t=f;else for(;_t!==null;){m=_t;try{var yt=m.alternate;if((m.flags&1024)!==0)switch(m.tag){case 0:case 11:case 15:break;case 1:if(yt!==null){var Tt=yt.memoizedProps,Or=yt.memoizedState,Se=m.stateNode,ve=Se.getSnapshotBeforeUpdate(m.elementType===m.type?Tt:Bl(m.type,Tt),Or);Se.__reactInternalSnapshotBeforeUpdate=ve}break;case 3:var Te=m.stateNode.containerInfo;Te.nodeType===1?Te.textContent="":Te.nodeType===9&&Te.documentElement&&Te.removeChild(Te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(nt){yr(m,m.return,nt)}if(f=m.sibling,f!==null){f.return=m.return,_t=f;break}_t=m.return}return yt=FF,FF=!1,yt}function Yb(f,m,v){var x=m.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var E=x=x.next;do{if((E.tag&f)===f){var A=E.destroy;E.destroy=void 0,A!==void 0&&U7(m,v,A)}E=E.next}while(E!==x)}}function qC(f,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var v=m=m.next;do{if((v.tag&f)===f){var x=v.create;v.destroy=x()}v=v.next}while(v!==m)}}function q7(f){var m=f.ref;if(m!==null){var v=f.stateNode;switch(f.tag){case 5:f=v;break;default:f=v}typeof m=="function"?m(f):m.current=f}}function WF(f){var m=f.alternate;m!==null&&(f.alternate=null,WF(m)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(m=f.stateNode,m!==null&&(delete m[kc],delete m[Fb],delete m[l7],delete m[Uae],delete m[qae])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function zF(f){return f.tag===5||f.tag===3||f.tag===4}function HF(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||zF(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function G7(f,m,v){var x=f.tag;if(x===5||x===6)f=f.stateNode,m?v.nodeType===8?v.parentNode.insertBefore(f,m):v.insertBefore(f,m):(v.nodeType===8?(m=v.parentNode,m.insertBefore(f,v)):(m=v,m.appendChild(f)),v=v._reactRootContainer,v!=null||m.onclick!==null||(m.onclick=SC));else if(x!==4&&(f=f.child,f!==null))for(G7(f,m,v),f=f.sibling;f!==null;)G7(f,m,v),f=f.sibling}function K7(f,m,v){var x=f.tag;if(x===5||x===6)f=f.stateNode,m?v.insertBefore(f,m):v.appendChild(f);else if(x!==4&&(f=f.child,f!==null))for(K7(f,m,v),f=f.sibling;f!==null;)K7(f,m,v),f=f.sibling}var Ws=null,Fl=!1;function ud(f,m,v){for(v=v.child;v!==null;)VF(f,m,v),v=v.sibling}function VF(f,m,v){if(Fs&&typeof Fs.onCommitFiberUnmount=="function")try{Fs.onCommitFiberUnmount(pn,v)}catch{}switch(v.tag){case 5:so||Ep(v,m);case 6:var x=Ws,E=Fl;Ws=null,ud(f,m,v),Ws=x,Fl=E,Ws!==null&&(Fl?(f=Ws,v=v.stateNode,f.nodeType===8?f.parentNode.removeChild(v):f.removeChild(v)):Ws.removeChild(v.stateNode));break;case 18:Ws!==null&&(Fl?(f=Ws,v=v.stateNode,f.nodeType===8?a7(f.parentNode,v):f.nodeType===1&&a7(f,v),Tb(f)):a7(Ws,v.stateNode));break;case 4:x=Ws,E=Fl,Ws=v.stateNode.containerInfo,Fl=!0,ud(f,m,v),Ws=x,Fl=E;break;case 0:case 11:case 14:case 15:if(!so&&(x=v.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){E=x=x.next;do{var A=E,$=A.destroy;A=A.tag,$!==void 0&&((A&2)!==0||(A&4)!==0)&&U7(v,m,$),E=E.next}while(E!==x)}ud(f,m,v);break;case 1:if(!so&&(Ep(v,m),x=v.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=v.memoizedProps,x.state=v.memoizedState,x.componentWillUnmount()}catch(le){yr(v,m,le)}ud(f,m,v);break;case 21:ud(f,m,v);break;case 22:v.mode&1?(so=(x=so)||v.memoizedState!==null,ud(f,m,v),so=x):ud(f,m,v);break;default:ud(f,m,v)}}function $F(f){var m=f.updateQueue;if(m!==null){f.updateQueue=null;var v=f.stateNode;v===null&&(v=f.stateNode=new lle),m.forEach(function(x){var E=_le.bind(null,f,x);v.has(x)||(v.add(x),x.then(E,E))})}}function Wl(f,m){var v=m.deletions;if(v!==null)for(var x=0;x<v.length;x++){var E=v[x];try{var A=f,$=m,le=$;e:for(;le!==null;){switch(le.tag){case 5:Ws=le.stateNode,Fl=!1;break e;case 3:Ws=le.stateNode.containerInfo,Fl=!0;break e;case 4:Ws=le.stateNode.containerInfo,Fl=!0;break e}le=le.return}if(Ws===null)throw Error(t(160));VF(A,$,E),Ws=null,Fl=!1;var me=E.alternate;me!==null&&(me.return=null),E.return=null}catch(Ee){yr(E,m,Ee)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)jF(m,f),m=m.sibling}function jF(f,m){var v=f.alternate,x=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(Wl(m,f),Dc(f),x&4){try{Yb(3,f,f.return),qC(3,f)}catch(Tt){yr(f,f.return,Tt)}try{Yb(5,f,f.return)}catch(Tt){yr(f,f.return,Tt)}}break;case 1:Wl(m,f),Dc(f),x&512&&v!==null&&Ep(v,v.return);break;case 5:if(Wl(m,f),Dc(f),x&512&&v!==null&&Ep(v,v.return),f.flags&32){var E=f.stateNode;try{wr(E,"")}catch(Tt){yr(f,f.return,Tt)}}if(x&4&&(E=f.stateNode,E!=null)){var A=f.memoizedProps,$=v!==null?v.memoizedProps:A,le=f.type,me=f.updateQueue;if(f.updateQueue=null,me!==null)try{le==="input"&&A.type==="radio"&&A.name!=null&&Vn(E,A),Rr(le,$);var Ee=Rr(le,A);for($=0;$<me.length;$+=2){var qe=me[$],Xe=me[$+1];qe==="style"?Ai(E,Xe):qe==="dangerouslySetInnerHTML"?ar(E,Xe):qe==="children"?wr(E,Xe):k(E,qe,Xe,Ee)}switch(le){case"input":Kn(E,A);break;case"textarea":Jn(E,A);break;case"select":var je=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!A.multiple;var pt=A.value;pt!=null?eo(E,!!A.multiple,pt,!1):je!==!!A.multiple&&(A.defaultValue!=null?eo(E,!!A.multiple,A.defaultValue,!0):eo(E,!!A.multiple,A.multiple?[]:"",!1))}E[Fb]=A}catch(Tt){yr(f,f.return,Tt)}}break;case 6:if(Wl(m,f),Dc(f),x&4){if(f.stateNode===null)throw Error(t(162));E=f.stateNode,A=f.memoizedProps;try{E.nodeValue=A}catch(Tt){yr(f,f.return,Tt)}}break;case 3:if(Wl(m,f),Dc(f),x&4&&v!==null&&v.memoizedState.isDehydrated)try{Tb(m.containerInfo)}catch(Tt){yr(f,f.return,Tt)}break;case 4:Wl(m,f),Dc(f);break;case 13:Wl(m,f),Dc(f),E=f.child,E.flags&8192&&(A=E.memoizedState!==null,E.stateNode.isHidden=A,!A||E.alternate!==null&&E.alternate.memoizedState!==null||(X7=gt())),x&4&&$F(f);break;case 22:if(qe=v!==null&&v.memoizedState!==null,f.mode&1?(so=(Ee=so)||qe,Wl(m,f),so=Ee):Wl(m,f),Dc(f),x&8192){if(Ee=f.memoizedState!==null,(f.stateNode.isHidden=Ee)&&!qe&&(f.mode&1)!==0)for(_t=f,qe=f.child;qe!==null;){for(Xe=_t=qe;_t!==null;){switch(je=_t,pt=je.child,je.tag){case 0:case 11:case 14:case 15:Yb(4,je,je.return);break;case 1:Ep(je,je.return);var yt=je.stateNode;if(typeof yt.componentWillUnmount=="function"){x=je,v=je.return;try{m=x,yt.props=m.memoizedProps,yt.state=m.memoizedState,yt.componentWillUnmount()}catch(Tt){yr(x,v,Tt)}}break;case 5:Ep(je,je.return);break;case 22:if(je.memoizedState!==null){GF(Xe);continue}}pt!==null?(pt.return=je,_t=pt):GF(Xe)}qe=qe.sibling}e:for(qe=null,Xe=f;;){if(Xe.tag===5){if(qe===null){qe=Xe;try{E=Xe.stateNode,Ee?(A=E.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(le=Xe.stateNode,me=Xe.memoizedProps.style,$=me!=null&&me.hasOwnProperty("display")?me.display:null,le.style.display=jn("display",$))}catch(Tt){yr(f,f.return,Tt)}}}else if(Xe.tag===6){if(qe===null)try{Xe.stateNode.nodeValue=Ee?"":Xe.memoizedProps}catch(Tt){yr(f,f.return,Tt)}}else if((Xe.tag!==22&&Xe.tag!==23||Xe.memoizedState===null||Xe===f)&&Xe.child!==null){Xe.child.return=Xe,Xe=Xe.child;continue}if(Xe===f)break e;for(;Xe.sibling===null;){if(Xe.return===null||Xe.return===f)break e;qe===Xe&&(qe=null),Xe=Xe.return}qe===Xe&&(qe=null),Xe.sibling.return=Xe.return,Xe=Xe.sibling}}break;case 19:Wl(m,f),Dc(f),x&4&&$F(f);break;case 21:break;default:Wl(m,f),Dc(f)}}function Dc(f){var m=f.flags;if(m&2){try{e:{for(var v=f.return;v!==null;){if(zF(v)){var x=v;break e}v=v.return}throw Error(t(160))}switch(x.tag){case 5:var E=x.stateNode;x.flags&32&&(wr(E,""),x.flags&=-33);var A=HF(f);K7(f,A,E);break;case 3:case 4:var $=x.stateNode.containerInfo,le=HF(f);G7(f,le,$);break;default:throw Error(t(161))}}catch(me){yr(f,f.return,me)}f.flags&=-3}m&4096&&(f.flags&=-4097)}function hle(f,m,v){_t=f,UF(f)}function UF(f,m,v){for(var x=(f.mode&1)!==0;_t!==null;){var E=_t,A=E.child;if(E.tag===22&&x){var $=E.memoizedState!==null||UC;if(!$){var le=E.alternate,me=le!==null&&le.memoizedState!==null||so;le=UC;var Ee=so;if(UC=$,(so=me)&&!Ee)for(_t=E;_t!==null;)$=_t,me=$.child,$.tag===22&&$.memoizedState!==null?KF(E):me!==null?(me.return=$,_t=me):KF(E);for(;A!==null;)_t=A,UF(A),A=A.sibling;_t=E,UC=le,so=Ee}qF(f)}else(E.subtreeFlags&8772)!==0&&A!==null?(A.return=E,_t=A):qF(f)}}function qF(f){for(;_t!==null;){var m=_t;if((m.flags&8772)!==0){var v=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:so||qC(5,m);break;case 1:var x=m.stateNode;if(m.flags&4&&!so)if(v===null)x.componentDidMount();else{var E=m.elementType===m.type?v.memoizedProps:Bl(m.type,v.memoizedProps);x.componentDidUpdate(E,v.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var A=m.updateQueue;A!==null&&GB(m,A,x);break;case 3:var $=m.updateQueue;if($!==null){if(v=null,m.child!==null)switch(m.child.tag){case 5:v=m.child.stateNode;break;case 1:v=m.child.stateNode}GB(m,$,v)}break;case 5:var le=m.stateNode;if(v===null&&m.flags&4){v=le;var me=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":me.autoFocus&&v.focus();break;case"img":me.src&&(v.src=me.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var Ee=m.alternate;if(Ee!==null){var qe=Ee.memoizedState;if(qe!==null){var Xe=qe.dehydrated;Xe!==null&&Tb(Xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}so||m.flags&512&&q7(m)}catch(je){yr(m,m.return,je)}}if(m===f){_t=null;break}if(v=m.sibling,v!==null){v.return=m.return,_t=v;break}_t=m.return}}function GF(f){for(;_t!==null;){var m=_t;if(m===f){_t=null;break}var v=m.sibling;if(v!==null){v.return=m.return,_t=v;break}_t=m.return}}function KF(f){for(;_t!==null;){var m=_t;try{switch(m.tag){case 0:case 11:case 15:var v=m.return;try{qC(4,m)}catch(me){yr(m,v,me)}break;case 1:var x=m.stateNode;if(typeof x.componentDidMount=="function"){var E=m.return;try{x.componentDidMount()}catch(me){yr(m,E,me)}}var A=m.return;try{q7(m)}catch(me){yr(m,A,me)}break;case 5:var $=m.return;try{q7(m)}catch(me){yr(m,$,me)}}}catch(me){yr(m,m.return,me)}if(m===f){_t=null;break}var le=m.sibling;if(le!==null){le.return=m.return,_t=le;break}_t=m.return}}var ule=Math.ceil,GC=L.ReactCurrentDispatcher,Y7=L.ReactCurrentOwner,sl=L.ReactCurrentBatchConfig,sn=0,xs=null,qr=null,zs=0,Ma=0,Ip=od(0),ls=0,Zb=null,qf=0,KC=0,Z7=0,Xb=null,ra=null,X7=0,Np=1/0,Nh=null,YC=!1,Q7=null,dd=null,ZC=!1,fd=null,XC=0,Qb=0,J7=null,QC=-1,JC=0;function Eo(){return(sn&6)!==0?gt():QC!==-1?QC:QC=gt()}function gd(f){return(f.mode&1)===0?1:(sn&2)!==0&&zs!==0?zs&-zs:Kae.transition!==null?(JC===0&&(JC=HO()),JC):(f=Sn,f!==0||(f=window.event,f=f===void 0?16:ZO(f.type)),f)}function zl(f,m,v,x){if(50<Qb)throw Qb=0,J7=null,Error(t(185));Cb(f,v,x),((sn&2)===0||f!==xs)&&(f===xs&&((sn&2)===0&&(KC|=v),ls===4&&md(f,zs)),sa(f,x),v===1&&sn===0&&(m.mode&1)===0&&(Np=gt()+500,TC&&ld()))}function sa(f,m){var v=f.callbackNode;Koe(f,m);var x=lC(f,f===xs?zs:0);if(x===0)v!==null&&Ae(v),f.callbackNode=null,f.callbackPriority=0;else if(m=x&-x,f.callbackPriority!==m){if(v!=null&&Ae(v),m===1)f.tag===0?Gae(ZF.bind(null,f)):PB(ZF.bind(null,f)),$ae(function(){(sn&6)===0&&ld()}),v=null;else{switch(VO(x)){case 1:v=mn;break;case 4:v=lr;break;case 16:v=Cn;break;case 536870912:v=ki;break;default:v=Cn}v=rW(v,YF.bind(null,f))}f.callbackPriority=m,f.callbackNode=v}}function YF(f,m){if(QC=-1,JC=0,(sn&6)!==0)throw Error(t(327));var v=f.callbackNode;if(Mp()&&f.callbackNode!==v)return null;var x=lC(f,f===xs?zs:0);if(x===0)return null;if((x&30)!==0||(x&f.expiredLanes)!==0||m)m=e2(f,x);else{m=x;var E=sn;sn|=2;var A=QF();(xs!==f||zs!==m)&&(Nh=null,Np=gt()+500,Kf(f,m));do try{gle();break}catch(le){XF(f,le)}while(!0);b7(),GC.current=A,sn=E,qr!==null?m=0:(xs=null,zs=0,m=ls)}if(m!==0){if(m===2&&(E=A3(f),E!==0&&(x=E,m=eT(f,E))),m===1)throw v=Zb,Kf(f,0),md(f,x),sa(f,gt()),v;if(m===6)md(f,x);else{if(E=f.current.alternate,(x&30)===0&&!dle(E)&&(m=e2(f,x),m===2&&(A=A3(f),A!==0&&(x=A,m=eT(f,A))),m===1))throw v=Zb,Kf(f,0),md(f,x),sa(f,gt()),v;switch(f.finishedWork=E,f.finishedLanes=x,m){case 0:case 1:throw Error(t(345));case 2:Yf(f,ra,Nh);break;case 3:if(md(f,x),(x&130023424)===x&&(m=X7+500-gt(),10<m)){if(lC(f,0)!==0)break;if(E=f.suspendedLanes,(E&x)!==x){Eo(),f.pingedLanes|=f.suspendedLanes&E;break}f.timeoutHandle=o7(Yf.bind(null,f,ra,Nh),m);break}Yf(f,ra,Nh);break;case 4:if(md(f,x),(x&4194240)===x)break;for(m=f.eventTimes,E=-1;0<x;){var $=31-ln(x);A=1<<$,$=m[$],$>E&&(E=$),x&=~A}if(x=E,x=gt()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*ule(x/1960))-x,10<x){f.timeoutHandle=o7(Yf.bind(null,f,ra,Nh),x);break}Yf(f,ra,Nh);break;case 5:Yf(f,ra,Nh);break;default:throw Error(t(329))}}}return sa(f,gt()),f.callbackNode===v?YF.bind(null,f):null}function eT(f,m){var v=Xb;return f.current.memoizedState.isDehydrated&&(Kf(f,m).flags|=256),f=e2(f,m),f!==2&&(m=ra,ra=v,m!==null&&tT(m)),f}function tT(f){ra===null?ra=f:ra.push.apply(ra,f)}function dle(f){for(var m=f;;){if(m.flags&16384){var v=m.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var x=0;x<v.length;x++){var E=v[x],A=E.getSnapshot;E=E.value;try{if(!Pl(A(),E))return!1}catch{return!1}}}if(v=m.child,m.subtreeFlags&16384&&v!==null)v.return=m,m=v;else{if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function md(f,m){for(m&=~Z7,m&=~KC,f.suspendedLanes|=m,f.pingedLanes&=~m,f=f.expirationTimes;0<m;){var v=31-ln(m),x=1<<v;f[v]=-1,m&=~x}}function ZF(f){if((sn&6)!==0)throw Error(t(327));Mp();var m=lC(f,0);if((m&1)===0)return sa(f,gt()),null;var v=e2(f,m);if(f.tag!==0&&v===2){var x=A3(f);x!==0&&(m=x,v=eT(f,x))}if(v===1)throw v=Zb,Kf(f,0),md(f,m),sa(f,gt()),v;if(v===6)throw Error(t(345));return f.finishedWork=f.current.alternate,f.finishedLanes=m,Yf(f,ra,Nh),sa(f,gt()),null}function iT(f,m){var v=sn;sn|=1;try{return f(m)}finally{sn=v,sn===0&&(Np=gt()+500,TC&&ld())}}function Gf(f){fd!==null&&fd.tag===0&&(sn&6)===0&&Mp();var m=sn;sn|=1;var v=sl.transition,x=Sn;try{if(sl.transition=null,Sn=1,f)return f()}finally{Sn=x,sl.transition=v,sn=m,(sn&6)===0&&ld()}}function nT(){Ma=Ip.current,Zn(Ip)}function Kf(f,m){f.finishedWork=null,f.finishedLanes=0;var v=f.timeoutHandle;if(v!==-1&&(f.timeoutHandle=-1,Vae(v)),qr!==null)for(v=qr.return;v!==null;){var x=v;switch(d7(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&kC();break;case 3:Tp(),Zn(ta),Zn(io),k7();break;case 5:S7(x);break;case 4:Tp();break;case 13:Zn(cr);break;case 19:Zn(cr);break;case 10:_7(x.type._context);break;case 22:case 23:nT()}v=v.return}if(xs=f,qr=f=pd(f.current,null),zs=Ma=m,ls=0,Zb=null,Z7=KC=qf=0,ra=Xb=null,$f!==null){for(m=0;m<$f.length;m++)if(v=$f[m],x=v.interleaved,x!==null){v.interleaved=null;var E=x.next,A=v.pending;if(A!==null){var $=A.next;A.next=E,x.next=$}v.pending=x}$f=null}return f}function XF(f,m){do{var v=qr;try{if(b7(),BC.current=HC,FC){for(var x=hr.memoizedState;x!==null;){var E=x.queue;E!==null&&(E.pending=null),x=x.next}FC=!1}if(Uf=0,Ss=as=hr=null,jb=!1,Ub=0,Y7.current=null,v===null||v.return===null){ls=1,Zb=m,qr=null;break}e:{var A=f,$=v.return,le=v,me=m;if(m=zs,le.flags|=32768,me!==null&&typeof me=="object"&&typeof me.then=="function"){var Ee=me,qe=le,Xe=qe.tag;if((qe.mode&1)===0&&(Xe===0||Xe===11||Xe===15)){var je=qe.alternate;je?(qe.updateQueue=je.updateQueue,qe.memoizedState=je.memoizedState,qe.lanes=je.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var pt=CF($);if(pt!==null){pt.flags&=-257,SF(pt,$,le,A,m),pt.mode&1&&yF(A,Ee,m),m=pt,me=Ee;var yt=m.updateQueue;if(yt===null){var Tt=new Set;Tt.add(me),m.updateQueue=Tt}else yt.add(me);break e}else{if((m&1)===0){yF(A,Ee,m),rT();break e}me=Error(t(426))}}else if(tr&&le.mode&1){var Or=CF($);if(Or!==null){(Or.flags&65536)===0&&(Or.flags|=256),SF(Or,$,le,A,m),m7(Dp(me,le));break e}}A=me=Dp(me,le),ls!==4&&(ls=2),Xb===null?Xb=[A]:Xb.push(A),A=$;do{switch(A.tag){case 3:A.flags|=65536,m&=-m,A.lanes|=m;var Se=vF(A,me,m);qB(A,Se);break e;case 1:le=me;var ve=A.type,Te=A.stateNode;if((A.flags&128)===0&&(typeof ve.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(dd===null||!dd.has(Te)))){A.flags|=65536,m&=-m,A.lanes|=m;var nt=wF(A,le,m);qB(A,nt);break e}}A=A.return}while(A!==null)}eW(v)}catch(Rt){m=Rt,qr===v&&v!==null&&(qr=v=v.return);continue}break}while(!0)}function QF(){var f=GC.current;return GC.current=HC,f===null?HC:f}function rT(){(ls===0||ls===3||ls===2)&&(ls=4),xs===null||(qf&268435455)===0&&(KC&268435455)===0||md(xs,zs)}function e2(f,m){var v=sn;sn|=2;var x=QF();(xs!==f||zs!==m)&&(Nh=null,Kf(f,m));do try{fle();break}catch(E){XF(f,E)}while(!0);if(b7(),sn=v,GC.current=x,qr!==null)throw Error(t(261));return xs=null,zs=0,ls}function fle(){for(;qr!==null;)JF(qr)}function gle(){for(;qr!==null&&!Bt();)JF(qr)}function JF(f){var m=nW(f.alternate,f,Ma);f.memoizedProps=f.pendingProps,m===null?eW(f):qr=m,Y7.current=null}function eW(f){var m=f;do{var v=m.alternate;if(f=m.return,(m.flags&32768)===0){if(v=ole(v,m,Ma),v!==null){qr=v;return}}else{if(v=ale(v,m),v!==null){v.flags&=32767,qr=v;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{ls=6,qr=null;return}}if(m=m.sibling,m!==null){qr=m;return}qr=m=f}while(m!==null);ls===0&&(ls=5)}function Yf(f,m,v){var x=Sn,E=sl.transition;try{sl.transition=null,Sn=1,mle(f,m,v,x)}finally{sl.transition=E,Sn=x}return null}function mle(f,m,v,x){do Mp();while(fd!==null);if((sn&6)!==0)throw Error(t(327));v=f.finishedWork;var E=f.finishedLanes;if(v===null)return null;if(f.finishedWork=null,f.finishedLanes=0,v===f.current)throw Error(t(177));f.callbackNode=null,f.callbackPriority=0;var A=v.lanes|v.childLanes;if(Yoe(f,A),f===xs&&(qr=xs=null,zs=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||ZC||(ZC=!0,rW(Cn,function(){return Mp(),null})),A=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||A){A=sl.transition,sl.transition=null;var $=Sn;Sn=1;var le=sn;sn|=4,Y7.current=null,cle(f,v),jF(v,f),Pae(r7),uC=!!n7,r7=n7=null,f.current=v,hle(v),mi(),sn=le,Sn=$,sl.transition=A}else f.current=v;if(ZC&&(ZC=!1,fd=f,XC=E),A=f.pendingLanes,A===0&&(dd=null),Ff(v.stateNode),sa(f,gt()),m!==null)for(x=f.onRecoverableError,v=0;v<m.length;v++)E=m[v],x(E.value,{componentStack:E.stack,digest:E.digest});if(YC)throw YC=!1,f=Q7,Q7=null,f;return(XC&1)!==0&&f.tag!==0&&Mp(),A=f.pendingLanes,(A&1)!==0?f===J7?Qb++:(Qb=0,J7=f):Qb=0,ld(),null}function Mp(){if(fd!==null){var f=VO(XC),m=sl.transition,v=Sn;try{if(sl.transition=null,Sn=16>f?16:f,fd===null)var x=!1;else{if(f=fd,fd=null,XC=0,(sn&6)!==0)throw Error(t(331));var E=sn;for(sn|=4,_t=f.current;_t!==null;){var A=_t,$=A.child;if((_t.flags&16)!==0){var le=A.deletions;if(le!==null){for(var me=0;me<le.length;me++){var Ee=le[me];for(_t=Ee;_t!==null;){var qe=_t;switch(qe.tag){case 0:case 11:case 15:Yb(8,qe,A)}var Xe=qe.child;if(Xe!==null)Xe.return=qe,_t=Xe;else for(;_t!==null;){qe=_t;var je=qe.sibling,pt=qe.return;if(WF(qe),qe===Ee){_t=null;break}if(je!==null){je.return=pt,_t=je;break}_t=pt}}}var yt=A.alternate;if(yt!==null){var Tt=yt.child;if(Tt!==null){yt.child=null;do{var Or=Tt.sibling;Tt.sibling=null,Tt=Or}while(Tt!==null)}}_t=A}}if((A.subtreeFlags&2064)!==0&&$!==null)$.return=A,_t=$;else e:for(;_t!==null;){if(A=_t,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:Yb(9,A,A.return)}var Se=A.sibling;if(Se!==null){Se.return=A.return,_t=Se;break e}_t=A.return}}var ve=f.current;for(_t=ve;_t!==null;){$=_t;var Te=$.child;if(($.subtreeFlags&2064)!==0&&Te!==null)Te.return=$,_t=Te;else e:for($=ve;_t!==null;){if(le=_t,(le.flags&2048)!==0)try{switch(le.tag){case 0:case 11:case 15:qC(9,le)}}catch(Rt){yr(le,le.return,Rt)}if(le===$){_t=null;break e}var nt=le.sibling;if(nt!==null){nt.return=le.return,_t=nt;break e}_t=le.return}}if(sn=E,ld(),Fs&&typeof Fs.onPostCommitFiberRoot=="function")try{Fs.onPostCommitFiberRoot(pn,f)}catch{}x=!0}return x}finally{Sn=v,sl.transition=m}}return!1}function tW(f,m,v){m=Dp(v,m),m=vF(f,m,1),f=hd(f,m,1),m=Eo(),f!==null&&(Cb(f,1,m),sa(f,m))}function yr(f,m,v){if(f.tag===3)tW(f,f,v);else for(;m!==null;){if(m.tag===3){tW(m,f,v);break}else if(m.tag===1){var x=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(dd===null||!dd.has(x))){f=Dp(v,f),f=wF(m,f,1),m=hd(m,f,1),f=Eo(),m!==null&&(Cb(m,1,f),sa(m,f));break}}m=m.return}}function ple(f,m,v){var x=f.pingCache;x!==null&&x.delete(m),m=Eo(),f.pingedLanes|=f.suspendedLanes&v,xs===f&&(zs&v)===v&&(ls===4||ls===3&&(zs&130023424)===zs&&500>gt()-X7?Kf(f,0):Z7|=v),sa(f,m)}function iW(f,m){m===0&&((f.mode&1)===0?m=1:(m=aC,aC<<=1,(aC&130023424)===0&&(aC=4194304)));var v=Eo();f=Dh(f,m),f!==null&&(Cb(f,m,v),sa(f,v))}function ble(f){var m=f.memoizedState,v=0;m!==null&&(v=m.retryLane),iW(f,v)}function _le(f,m){var v=0;switch(f.tag){case 13:var x=f.stateNode,E=f.memoizedState;E!==null&&(v=E.retryLane);break;case 19:x=f.stateNode;break;default:throw Error(t(314))}x!==null&&x.delete(m),iW(f,v)}var nW;nW=function(f,m,v){if(f!==null)if(f.memoizedProps!==m.pendingProps||ta.current)na=!0;else{if((f.lanes&v)===0&&(m.flags&128)===0)return na=!1,sle(f,m,v);na=(f.flags&131072)!==0}else na=!1,tr&&(m.flags&1048576)!==0&&OB(m,EC,m.index);switch(m.lanes=0,m.tag){case 2:var x=m.type;jC(f,m),f=m.pendingProps;var E=wp(m,io.current);Lp(m,v),E=D7(null,m,x,f,E,v);var A=E7();return m.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,ia(x)?(A=!0,LC(m)):A=!1,m.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,y7(m),E.updater=VC,m.stateNode=E,E._reactInternals=m,P7(m,x,f,v),m=W7(null,m,x,!0,A,v)):(m.tag=0,tr&&A&&u7(m),Do(null,m,E,v),m=m.child),m;case 16:x=m.elementType;e:{switch(jC(f,m),f=m.pendingProps,E=x._init,x=E(x._payload),m.type=x,E=m.tag=wle(x),f=Bl(x,f),E){case 0:m=F7(null,m,x,f,v);break e;case 1:m=EF(null,m,x,f,v);break e;case 11:m=xF(null,m,x,f,v);break e;case 14:m=kF(null,m,x,Bl(x.type,f),v);break e}throw Error(t(306,x,""))}return m;case 0:return x=m.type,E=m.pendingProps,E=m.elementType===x?E:Bl(x,E),F7(f,m,x,E,v);case 1:return x=m.type,E=m.pendingProps,E=m.elementType===x?E:Bl(x,E),EF(f,m,x,E,v);case 3:e:{if(IF(m),f===null)throw Error(t(387));x=m.pendingProps,A=m.memoizedState,E=A.element,UB(f,m),PC(m,x,null,v);var $=m.memoizedState;if(x=$.element,A.isDehydrated)if(A={element:x,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},m.updateQueue.baseState=A,m.memoizedState=A,m.flags&256){E=Dp(Error(t(423)),m),m=NF(f,m,x,v,E);break e}else if(x!==E){E=Dp(Error(t(424)),m),m=NF(f,m,x,v,E);break e}else for(Na=sd(m.stateNode.containerInfo.firstChild),Ia=m,tr=!0,Ol=null,v=$B(m,null,x,v),m.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Sp(),x===E){m=Ih(f,m,v);break e}Do(f,m,x,v)}m=m.child}return m;case 5:return KB(m),f===null&&g7(m),x=m.type,E=m.pendingProps,A=f!==null?f.memoizedProps:null,$=E.children,s7(x,E)?$=null:A!==null&&s7(x,A)&&(m.flags|=32),DF(f,m),Do(f,m,$,v),m.child;case 6:return f===null&&g7(m),null;case 13:return MF(f,m,v);case 4:return C7(m,m.stateNode.containerInfo),x=m.pendingProps,f===null?m.child=xp(m,null,x,v):Do(f,m,x,v),m.child;case 11:return x=m.type,E=m.pendingProps,E=m.elementType===x?E:Bl(x,E),xF(f,m,x,E,v);case 7:return Do(f,m,m.pendingProps,v),m.child;case 8:return Do(f,m,m.pendingProps.children,v),m.child;case 12:return Do(f,m,m.pendingProps.children,v),m.child;case 10:e:{if(x=m.type._context,E=m.pendingProps,A=m.memoizedProps,$=E.value,Un(MC,x._currentValue),x._currentValue=$,A!==null)if(Pl(A.value,$)){if(A.children===E.children&&!ta.current){m=Ih(f,m,v);break e}}else for(A=m.child,A!==null&&(A.return=m);A!==null;){var le=A.dependencies;if(le!==null){$=A.child;for(var me=le.firstContext;me!==null;){if(me.context===x){if(A.tag===1){me=Eh(-1,v&-v),me.tag=2;var Ee=A.updateQueue;if(Ee!==null){Ee=Ee.shared;var qe=Ee.pending;qe===null?me.next=me:(me.next=qe.next,qe.next=me),Ee.pending=me}}A.lanes|=v,me=A.alternate,me!==null&&(me.lanes|=v),v7(A.return,v,m),le.lanes|=v;break}me=me.next}}else if(A.tag===10)$=A.type===m.type?null:A.child;else if(A.tag===18){if($=A.return,$===null)throw Error(t(341));$.lanes|=v,le=$.alternate,le!==null&&(le.lanes|=v),v7($,v,m),$=A.sibling}else $=A.child;if($!==null)$.return=A;else for($=A;$!==null;){if($===m){$=null;break}if(A=$.sibling,A!==null){A.return=$.return,$=A;break}$=$.return}A=$}Do(f,m,E.children,v),m=m.child}return m;case 9:return E=m.type,x=m.pendingProps.children,Lp(m,v),E=nl(E),x=x(E),m.flags|=1,Do(f,m,x,v),m.child;case 14:return x=m.type,E=Bl(x,m.pendingProps),E=Bl(x.type,E),kF(f,m,x,E,v);case 15:return LF(f,m,m.type,m.pendingProps,v);case 17:return x=m.type,E=m.pendingProps,E=m.elementType===x?E:Bl(x,E),jC(f,m),m.tag=1,ia(x)?(f=!0,LC(m)):f=!1,Lp(m,v),bF(m,x,E),P7(m,x,E,v),W7(null,m,x,!0,f,v);case 19:return RF(f,m,v);case 22:return TF(f,m,v)}throw Error(t(156,m.tag))};function rW(f,m){return pe(f,m)}function vle(f,m,v,x){this.tag=f,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ol(f,m,v,x){return new vle(f,m,v,x)}function sT(f){return f=f.prototype,!(!f||!f.isReactComponent)}function wle(f){if(typeof f=="function")return sT(f)?1:0;if(f!=null){if(f=f.$$typeof,f===q)return 11;if(f===Q)return 14}return 2}function pd(f,m){var v=f.alternate;return v===null?(v=ol(f.tag,m,f.key,f.mode),v.elementType=f.elementType,v.type=f.type,v.stateNode=f.stateNode,v.alternate=f,f.alternate=v):(v.pendingProps=m,v.type=f.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=f.flags&14680064,v.childLanes=f.childLanes,v.lanes=f.lanes,v.child=f.child,v.memoizedProps=f.memoizedProps,v.memoizedState=f.memoizedState,v.updateQueue=f.updateQueue,m=f.dependencies,v.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},v.sibling=f.sibling,v.index=f.index,v.ref=f.ref,v}function t2(f,m,v,x,E,A){var $=2;if(x=f,typeof f=="function")sT(f)&&($=1);else if(typeof f=="string")$=5;else e:switch(f){case D:return Zf(v.children,E,A,m);case O:$=8,E|=8;break;case B:return f=ol(12,v,m,E|2),f.elementType=B,f.lanes=A,f;case X:return f=ol(13,v,m,E),f.elementType=X,f.lanes=A,f;case z:return f=ol(19,v,m,E),f.elementType=z,f.lanes=A,f;case se:return i2(v,E,A,m);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case G:$=10;break e;case H:$=9;break e;case q:$=11;break e;case Q:$=14;break e;case te:$=16,x=null;break e}throw Error(t(130,f==null?f:typeof f,""))}return m=ol($,v,m,E),m.elementType=f,m.type=x,m.lanes=A,m}function Zf(f,m,v,x){return f=ol(7,f,x,m),f.lanes=v,f}function i2(f,m,v,x){return f=ol(22,f,x,m),f.elementType=se,f.lanes=v,f.stateNode={isHidden:!1},f}function oT(f,m,v){return f=ol(6,f,null,m),f.lanes=v,f}function aT(f,m,v){return m=ol(4,f.children!==null?f.children:[],f.key,m),m.lanes=v,m.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},m}function yle(f,m,v,x,E){this.tag=m,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=R3(0),this.expirationTimes=R3(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=R3(0),this.identifierPrefix=x,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function lT(f,m,v,x,E,A,$,le,me){return f=new yle(f,m,v,le,me),m===1?(m=1,A===!0&&(m|=8)):m=0,A=ol(3,null,null,m),f.current=A,A.stateNode=f,A.memoizedState={element:x,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},y7(A),f}function Cle(f,m,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:x==null?null:""+x,children:f,containerInfo:m,implementation:v}}function sW(f){if(!f)return ad;f=f._reactInternals;e:{if(Ke(f)!==f||f.tag!==1)throw Error(t(170));var m=f;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(ia(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(t(171))}if(f.tag===1){var v=f.type;if(ia(v))return AB(f,v,m)}return m}function oW(f,m,v,x,E,A,$,le,me){return f=lT(v,x,!0,f,E,A,$,le,me),f.context=sW(null),v=f.current,x=Eo(),E=gd(v),A=Eh(x,E),A.callback=m??null,hd(v,A,E),f.current.lanes=E,Cb(f,E,x),sa(f,x),f}function n2(f,m,v,x){var E=m.current,A=Eo(),$=gd(E);return v=sW(v),m.context===null?m.context=v:m.pendingContext=v,m=Eh(A,$),m.payload={element:f},x=x===void 0?null:x,x!==null&&(m.callback=x),f=hd(E,m,$),f!==null&&(zl(f,E,$,A),RC(f,E,$)),$}function r2(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return f.child.stateNode;default:return f.child.stateNode}}function aW(f,m){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var v=f.retryLane;f.retryLane=v!==0&&v<m?v:m}}function cT(f,m){aW(f,m),(f=f.alternate)&&aW(f,m)}function Sle(){return null}var lW=typeof reportError=="function"?reportError:function(f){console.error(f)};function hT(f){this._internalRoot=f}s2.prototype.render=hT.prototype.render=function(f){var m=this._internalRoot;if(m===null)throw Error(t(409));n2(f,m,null,null)},s2.prototype.unmount=hT.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var m=f.containerInfo;Gf(function(){n2(null,f,null,null)}),m[xh]=null}};function s2(f){this._internalRoot=f}s2.prototype.unstable_scheduleHydration=function(f){if(f){var m=UO();f={blockedOn:null,target:f,priority:m};for(var v=0;v<id.length&&m!==0&&m<id[v].priority;v++);id.splice(v,0,f),v===0&&KO(f)}};function uT(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function o2(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function cW(){}function xle(f,m,v,x,E){if(E){if(typeof x=="function"){var A=x;x=function(){var Ee=r2($);A.call(Ee)}}var $=oW(m,x,f,0,null,!1,!1,"",cW);return f._reactRootContainer=$,f[xh]=$.current,Ob(f.nodeType===8?f.parentNode:f),Gf(),$}for(;E=f.lastChild;)f.removeChild(E);if(typeof x=="function"){var le=x;x=function(){var Ee=r2(me);le.call(Ee)}}var me=lT(f,0,!1,null,null,!1,!1,"",cW);return f._reactRootContainer=me,f[xh]=me.current,Ob(f.nodeType===8?f.parentNode:f),Gf(function(){n2(m,me,v,x)}),me}function a2(f,m,v,x,E){var A=v._reactRootContainer;if(A){var $=A;if(typeof E=="function"){var le=E;E=function(){var me=r2($);le.call(me)}}n2(m,$,f,E)}else $=xle(v,m,f,E,x);return r2($)}$O=function(f){switch(f.tag){case 3:var m=f.stateNode;if(m.current.memoizedState.isDehydrated){var v=yb(m.pendingLanes);v!==0&&(P3(m,v|1),sa(m,gt()),(sn&6)===0&&(Np=gt()+500,ld()))}break;case 13:Gf(function(){var x=Dh(f,1);if(x!==null){var E=Eo();zl(x,f,1,E)}}),cT(f,1)}},O3=function(f){if(f.tag===13){var m=Dh(f,134217728);if(m!==null){var v=Eo();zl(m,f,134217728,v)}cT(f,134217728)}},jO=function(f){if(f.tag===13){var m=gd(f),v=Dh(f,m);if(v!==null){var x=Eo();zl(v,f,m,x)}cT(f,m)}},UO=function(){return Sn},qO=function(f,m){var v=Sn;try{return Sn=f,m()}finally{Sn=v}},Lo=function(f,m,v){switch(m){case"input":if(Kn(f,v),m=v.name,v.type==="radio"&&m!=null){for(v=f;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<v.length;m++){var x=v[m];if(x!==f&&x.form===f.form){var E=xC(x);if(!E)throw Error(t(90));vi(x),Kn(x,E)}}}break;case"textarea":Jn(f,v);break;case"select":m=v.value,m!=null&&eo(f,!!v.multiple,m,!1)}},Cs=iT,At=Gf;var kle={usingClientEntryPoint:!1,Events:[Wb,_p,xC,Rl,Tn,iT]},Jb={findFiberByHostInstance:Wf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lle={bundleType:Jb.bundleType,version:Jb.version,rendererPackageName:Jb.rendererPackageName,rendererConfig:Jb.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=Ne(f),f===null?null:f.stateNode},findFiberByHostInstance:Jb.findFiberByHostInstance||Sle,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var l2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!l2.isDisabled&&l2.supportsFiber)try{pn=l2.inject(Lle),Fs=l2}catch{}}return oa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kle,oa.createPortal=function(f,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uT(m))throw Error(t(200));return Cle(f,m,null,v)},oa.createRoot=function(f,m){if(!uT(f))throw Error(t(299));var v=!1,x="",E=lW;return m!=null&&(m.unstable_strictMode===!0&&(v=!0),m.identifierPrefix!==void 0&&(x=m.identifierPrefix),m.onRecoverableError!==void 0&&(E=m.onRecoverableError)),m=lT(f,1,!1,null,null,v,!1,x,E),f[xh]=m.current,Ob(f.nodeType===8?f.parentNode:f),new hT(m)},oa.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var m=f._reactInternals;if(m===void 0)throw typeof f.render=="function"?Error(t(188)):(f=Object.keys(f).join(","),Error(t(268,f)));return f=Ne(m),f=f===null?null:f.stateNode,f},oa.flushSync=function(f){return Gf(f)},oa.hydrate=function(f,m,v){if(!o2(m))throw Error(t(200));return a2(null,f,m,!0,v)},oa.hydrateRoot=function(f,m,v){if(!uT(f))throw Error(t(405));var x=v!=null&&v.hydratedSources||null,E=!1,A="",$=lW;if(v!=null&&(v.unstable_strictMode===!0&&(E=!0),v.identifierPrefix!==void 0&&(A=v.identifierPrefix),v.onRecoverableError!==void 0&&($=v.onRecoverableError)),m=oW(m,null,f,1,v??null,E,!1,A,$),f[xh]=m.current,Ob(f),x)for(f=0;f<x.length;f++)v=x[f],E=v._getVersion,E=E(v._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[v,E]:m.mutableSourceEagerHydrationData.push(v,E);return new s2(m)},oa.render=function(f,m,v){if(!o2(m))throw Error(t(200));return a2(null,f,m,!1,v)},oa.unmountComponentAtNode=function(f){if(!o2(f))throw Error(t(40));return f._reactRootContainer?(Gf(function(){a2(null,null,f,!1,function(){f._reactRootContainer=null,f[xh]=null})}),!0):!1},oa.unstable_batchedUpdates=iT,oa.unstable_renderSubtreeIntoContainer=function(f,m,v,x){if(!o2(v))throw Error(t(200));if(f==null||f._reactInternals===void 0)throw Error(t(38));return a2(f,m,v,!1,x)},oa.version="18.3.1-next-f1338f8080-20240426",oa}var bW;function KG(){if(bW)return gT.exports;bW=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gT.exports=Ple(),gT.exports}var _W;function Ole(){if(_W)return c2;_W=1;var n=KG();return c2.createRoot=n.createRoot,c2.hydrateRoot=n.hydrateRoot,c2}var Ble=Ole();const Fle=$L(Ble);var YG=KG();const Wle=$L(YG),zle=GG({__proto__:null,default:Wle},[YG]);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nr(){return nr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},nr.apply(this,arguments)}var Xr;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Xr||(Xr={}));const vW="popstate";function Hle(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return lw("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:vm(r)}return $le(e,t,null,n)}function Hi(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function v1(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Vle(){return Math.random().toString(36).substr(2,8)}function wW(n,e){return{usr:n.state,key:n.key,idx:e}}function lw(n,e,t,i){return t===void 0&&(t=null),nr({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Tf(e):e,{state:t,key:e&&e.key||i||Vle()})}function vm(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Tf(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function $le(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Xr.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(nr({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function u(){a=Xr.Pop;let _=h(),w=_==null?null:_-c;c=_,l&&l({action:a,location:b.location,delta:w})}function d(_,w){a=Xr.Push;let y=lw(b.location,_,w);c=h()+1;let k=wW(y,c),L=b.createHref(y);try{o.pushState(k,"",L)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;r.location.assign(L)}s&&l&&l({action:a,location:b.location,delta:1})}function g(_,w){a=Xr.Replace;let y=lw(b.location,_,w);c=h();let k=wW(y,c),L=b.createHref(y);o.replaceState(k,"",L),s&&l&&l({action:a,location:b.location,delta:0})}function p(_){let w=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof _=="string"?_:vm(_);return y=y.replace(/ $/,"%20"),Hi(w,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,w)}let b={get action(){return a},get location(){return n(r,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(vW,u),l=_,()=>{r.removeEventListener(vW,u),l=null}},createHref(_){return e(r,_)},createURL:p,encodeLocation(_){let w=p(_);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:d,replace:g,go(_){return o.go(_)}};return b}var kn;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(kn||(kn={}));const jle=new Set(["lazy","caseSensitive","path","id","index","children"]);function Ule(n){return n.index===!0}function vx(n,e,t,i){return t===void 0&&(t=[]),i===void 0&&(i={}),n.map((r,s)=>{let o=[...t,String(s)],a=typeof r.id=="string"?r.id:o.join("-");if(Hi(r.index!==!0||!r.children,"Cannot specify children on an index route"),Hi(!i[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),Ule(r)){let l=nr({},r,e(r),{id:a});return i[a]=l,l}else{let l=nr({},r,e(r),{id:a,children:void 0});return i[a]=l,r.children&&(l.children=vx(r.children,e,o,i)),l}})}function wg(n,e,t){return t===void 0&&(t="/"),DS(n,e,t,!1)}function DS(n,e,t,i){let r=typeof e=="string"?Tf(e):e,s=Q1(r.pathname||"/",t);if(s==null)return null;let o=ZG(n);Gle(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=rce(s);a=ice(o[l],c,i)}return a}function qle(n,e){let{route:t,pathname:i,params:r}=n;return{id:t.id,pathname:i,params:r,data:e[t.id],handle:t.handle}}function ZG(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Hi(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=yu([i,l.relativePath]),h=t.concat(l);s.children&&s.children.length>0&&(Hi(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),ZG(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:ece(c,s.index),routesMeta:h})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of XG(s.path))r(s,o,l)}),e}function XG(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=XG(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function Gle(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:tce(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const Kle=/^:[\w-]+$/,Yle=3,Zle=2,Xle=1,Qle=10,Jle=-2,yW=n=>n==="*";function ece(n,e){let t=n.split("/"),i=t.length;return t.some(yW)&&(i+=Jle),e&&(i+=Zle),t.filter(r=>!yW(r)).reduce((r,s)=>r+(Kle.test(s)?Yle:s===""?Xle:Qle),i)}function tce(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function ice(n,e,t){t===void 0&&(t=!1);let{routesMeta:i}=n,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",u=CW({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),d=l.route;if(!u&&c&&t&&!i[i.length-1].route.index&&(u=CW({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!u)return null;Object.assign(r,u.params),o.push({params:r,pathname:yu([s,u.pathname]),pathnameBase:ace(yu([s,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(s=yu([s,u.pathnameBase]))}return o}function CW(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=nce(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,h,u)=>{let{paramName:d,isOptional:g}=h;if(d==="*"){let b=a[u]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const p=a[u];return g&&!p?c[d]=void 0:c[d]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function nce(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),v1(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function rce(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return v1(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Q1(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function sce(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Tf(n):n;return{pathname:t?t.startsWith("/")?t:oce(t,e):e,search:lce(i),hash:cce(r)}}function oce(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function bT(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function QG(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function TM(n,e){let t=QG(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function DM(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=Tf(n):(r=nr({},n),Hi(!r.pathname||!r.pathname.includes("?"),bT("?","pathname","search",r)),Hi(!r.pathname||!r.pathname.includes("#"),bT("#","pathname","hash",r)),Hi(!r.search||!r.search.includes("#"),bT("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let u=e.length-1;if(!i&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),u-=1;r.pathname=d.join("/")}a=u>=0?e[u]:"/"}let l=sce(r,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const yu=n=>n.join("/").replace(/\/\/+/g,"/"),ace=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),lce=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,cce=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class wx{constructor(e,t,i,r){r===void 0&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function cw(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const JG=["post","put","patch","delete"],hce=new Set(JG),uce=["get",...JG],dce=new Set(uce),fce=new Set([301,302,303,307,308]),gce=new Set([307,308]),_T={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},mce={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},t_={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},EM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pce=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),eK="remix-router-transitions";function bce(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",i=!t;Hi(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r;if(n.mapRouteProperties)r=n.mapRouteProperties;else if(n.detectErrorBoundary){let F=n.detectErrorBoundary;r=j=>({hasErrorBoundary:F(j)})}else r=pce;let s={},o=vx(n.routes,r,void 0,s),a,l=n.basename||"/",c=n.dataStrategy||yce,h=n.patchRoutesOnNavigation,u=nr({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),d=null,g=new Set,p=null,b=null,_=null,w=n.hydrationData!=null,y=wg(o,n.history.location,l),k=!1,L=null;if(y==null&&!h){let F=ha(404,{pathname:n.history.location.pathname}),{matches:j,route:ne}=AW(o);y=j,L={[ne.id]:F}}y&&!n.hydrationData&&At(y,o,n.history.location.pathname).active&&(y=null);let T;if(y)if(y.some(F=>F.route.lazy))T=!1;else if(!y.some(F=>F.route.loader))T=!0;else if(u.v7_partialHydration){let F=n.hydrationData?n.hydrationData.loaderData:null,j=n.hydrationData?n.hydrationData.errors:null;if(j){let ne=y.findIndex(he=>j[he.route.id]!==void 0);T=y.slice(0,ne+1).every(he=>!ID(he.route,F,j))}else T=y.every(ne=>!ID(ne.route,F,j))}else T=n.hydrationData!=null;else if(T=!1,y=[],u.v7_partialHydration){let F=At(null,o,n.history.location.pathname);F.active&&F.matches&&(k=!0,y=F.matches)}let N,D={historyAction:n.history.action,location:n.history.location,matches:y,initialized:T,navigation:_T,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||L,fetchers:new Map,blockers:new Map},O=Xr.Pop,B=!1,G,H=!1,q=new Map,X=null,z=!1,Q=!1,te=[],se=new Set,Y=new Map,ae=0,fe=-1,J=new Map,ge=new Set,Le=new Map,We=new Map,Ie=new Set,Ze=new Map,ct=new Map,ot;function Ot(){if(d=n.history.listen(F=>{let{action:j,location:ne,delta:he}=F;if(ot){ot(),ot=void 0;return}v1(ct.size===0||he!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ce=Lo({currentLocation:D.location,nextLocation:ne,historyAction:j});if(Ce&&he!=null){let Re=new Promise(Ve=>{ot=Ve});n.history.go(he*-1),Pr(Ce,{state:"blocked",location:ne,proceed(){Pr(Ce,{state:"proceeding",proceed:void 0,reset:void 0,location:ne}),Re.then(()=>n.history.go(he))},reset(){let Ve=new Map(D.blockers);Ve.set(Ce,t_),vi({blockers:Ve})}});return}return Vn(j,ne)}),t){Pce(e,q);let F=()=>Oce(e,q);e.addEventListener("pagehide",F),X=()=>e.removeEventListener("pagehide",F)}return D.initialized||Vn(Xr.Pop,D.location,{initialHydration:!0}),N}function $t(){d&&d(),X&&X(),g.clear(),G&&G.abort(),D.fetchers.forEach((F,j)=>Ln(j)),D.blockers.forEach((F,j)=>xi(j))}function yn(F){return g.add(F),()=>g.delete(F)}function vi(F,j){j===void 0&&(j={}),D=nr({},D,F);let ne=[],he=[];u.v7_fetcherPersist&&D.fetchers.forEach((Ce,Re)=>{Ce.state==="idle"&&(Ie.has(Re)?he.push(Re):ne.push(Re))}),Ie.forEach(Ce=>{!D.fetchers.has(Ce)&&!Y.has(Ce)&&he.push(Ce)}),[...g].forEach(Ce=>Ce(D,{deletedFetchers:he,viewTransitionOpts:j.viewTransitionOpts,flushSync:j.flushSync===!0})),u.v7_fetcherPersist?(ne.forEach(Ce=>D.fetchers.delete(Ce)),he.forEach(Ce=>Ln(Ce))):he.forEach(Ce=>Ie.delete(Ce))}function nn(F,j,ne){var he,Ce;let{flushSync:Re}=ne===void 0?{}:ne,Ve=D.actionData!=null&&D.navigation.formMethod!=null&&Zl(D.navigation.formMethod)&&D.navigation.state==="loading"&&((he=F.state)==null?void 0:he._isRedirect)!==!0,$e;j.actionData?Object.keys(j.actionData).length>0?$e=j.actionData:$e=null:Ve?$e=D.actionData:$e=null;let He=j.loaderData?NW(D.loaderData,j.loaderData,j.matches||[],j.errors):D.loaderData,tt=D.blockers;tt.size>0&&(tt=new Map(tt),tt.forEach((jt,An)=>tt.set(An,t_)));let Ke=B===!0||D.navigation.formMethod!=null&&Zl(D.navigation.formMethod)&&((Ce=F.state)==null?void 0:Ce._isRedirect)!==!0;a&&(o=a,a=void 0),z||O===Xr.Pop||(O===Xr.Push?n.history.push(F,F.state):O===Xr.Replace&&n.history.replace(F,F.state));let xt;if(O===Xr.Pop){let jt=q.get(D.location.pathname);jt&&jt.has(F.pathname)?xt={currentLocation:D.location,nextLocation:F}:q.has(F.pathname)&&(xt={currentLocation:F,nextLocation:D.location})}else if(H){let jt=q.get(D.location.pathname);jt?jt.add(F.pathname):(jt=new Set([F.pathname]),q.set(D.location.pathname,jt)),xt={currentLocation:D.location,nextLocation:F}}vi(nr({},j,{actionData:$e,loaderData:He,historyAction:O,location:F,initialized:!0,navigation:_T,revalidation:"idle",restoreScrollPosition:Cs(F,j.matches||D.matches),preventScrollReset:Ke,blockers:tt}),{viewTransitionOpts:xt,flushSync:Re===!0}),O=Xr.Pop,B=!1,H=!1,z=!1,Q=!1,te=[]}async function rn(F,j){if(typeof F=="number"){n.history.go(F);return}let ne=ED(D.location,D.matches,l,u.v7_prependBasename,F,u.v7_relativeSplatPath,j?.fromRouteId,j?.relative),{path:he,submission:Ce,error:Re}=SW(u.v7_normalizeFormMethod,!1,ne,j),Ve=D.location,$e=lw(D.location,he,j&&j.state);$e=nr({},$e,n.history.encodeLocation($e));let He=j&&j.replace!=null?j.replace:void 0,tt=Xr.Push;He===!0?tt=Xr.Replace:He===!1||Ce!=null&&Zl(Ce.formMethod)&&Ce.formAction===D.location.pathname+D.location.search&&(tt=Xr.Replace);let Ke=j&&"preventScrollReset"in j?j.preventScrollReset===!0:void 0,xt=(j&&j.flushSync)===!0,jt=Lo({currentLocation:Ve,nextLocation:$e,historyAction:tt});if(jt){Pr(jt,{state:"blocked",location:$e,proceed(){Pr(jt,{state:"proceeding",proceed:void 0,reset:void 0,location:$e}),rn(F,j)},reset(){let An=new Map(D.blockers);An.set(jt,t_),vi({blockers:An})}});return}return await Vn(tt,$e,{submission:Ce,pendingError:Re,preventScrollReset:Ke,replace:j&&j.replace,enableViewTransition:j&&j.viewTransition,flushSync:xt})}function ss(){if(Os(),vi({revalidation:"loading"}),D.navigation.state!=="submitting"){if(D.navigation.state==="idle"){Vn(D.historyAction,D.location,{startUninterruptedRevalidation:!0});return}Vn(O||D.historyAction,D.navigation.location,{overrideNavigation:D.navigation,enableViewTransition:H===!0})}}async function Vn(F,j,ne){G&&G.abort(),G=null,O=F,z=(ne&&ne.startUninterruptedRevalidation)===!0,Tn(D.location,D.matches),B=(ne&&ne.preventScrollReset)===!0,H=(ne&&ne.enableViewTransition)===!0;let he=a||o,Ce=ne&&ne.overrideNavigation,Re=ne!=null&&ne.initialHydration&&D.matches&&D.matches.length>0&&!k?D.matches:wg(he,j,l),Ve=(ne&&ne.flushSync)===!0;if(Re&&D.initialized&&!Q&&Tce(D.location,j)&&!(ne&&ne.submission&&Zl(ne.submission.formMethod))){nn(j,{matches:Re},{flushSync:Ve});return}let $e=At(Re,he,j.pathname);if($e.active&&$e.matches&&(Re=$e.matches),!Re){let{error:Ne,notFoundMatches:W,route:pe}=to(j.pathname);nn(j,{matches:W,loaderData:{},errors:{[pe.id]:Ne}},{flushSync:Ve});return}G=new AbortController;let He=Ap(n.history,j,G.signal,ne&&ne.submission),tt;if(ne&&ne.pendingError)tt=[yg(Re).route.id,{type:kn.error,error:ne.pendingError}];else if(ne&&ne.submission&&Zl(ne.submission.formMethod)){let Ne=await Kn(He,j,ne.submission,Re,$e.active,{replace:ne.replace,flushSync:Ve});if(Ne.shortCircuited)return;if(Ne.pendingActionResult){let[W,pe]=Ne.pendingActionResult;if(Wa(pe)&&cw(pe.error)&&pe.error.status===404){G=null,nn(j,{matches:Ne.matches,loaderData:{},errors:{[W]:pe.error}});return}}Re=Ne.matches||Re,tt=Ne.pendingActionResult,Ce=vT(j,ne.submission),Ve=!1,$e.active=!1,He=Ap(n.history,He.url,He.signal)}let{shortCircuited:Ke,matches:xt,loaderData:jt,errors:An}=await Nr(He,j,Re,$e.active,Ce,ne&&ne.submission,ne&&ne.fetcherSubmission,ne&&ne.replace,ne&&ne.initialHydration===!0,Ve,tt);Ke||(G=null,nn(j,nr({matches:xt||Re},MW(tt),{loaderData:jt,errors:An})))}async function Kn(F,j,ne,he,Ce,Re){Re===void 0&&(Re={}),Os();let Ve=Ace(j,ne);if(vi({navigation:Ve},{flushSync:Re.flushSync===!0}),Ce){let tt=await K(he,j.pathname,F.signal);if(tt.type==="aborted")return{shortCircuited:!0};if(tt.type==="error"){let Ke=yg(tt.partialMatches).route.id;return{matches:tt.partialMatches,pendingActionResult:[Ke,{type:kn.error,error:tt.error}]}}else if(tt.matches)he=tt.matches;else{let{notFoundMatches:Ke,error:xt,route:jt}=to(j.pathname);return{matches:Ke,pendingActionResult:[jt.id,{type:kn.error,error:xt}]}}}let $e,He=W_(he,j);if(!He.route.action&&!He.route.lazy)$e={type:kn.error,error:ha(405,{method:F.method,pathname:j.pathname,routeId:He.route.id})};else if($e=(await $n("action",D,F,[He],he,null))[He.route.id],F.signal.aborted)return{shortCircuited:!0};if(Hg($e)){let tt;return Re&&Re.replace!=null?tt=Re.replace:tt=DW($e.response.headers.get("Location"),new URL(F.url),l)===D.location.pathname+D.location.search,await Jn(F,$e,!0,{submission:ne,replace:tt}),{shortCircuited:!0}}if($d($e))throw ha(400,{type:"defer-action"});if(Wa($e)){let tt=yg(he,He.route.id);return(Re&&Re.replace)!==!0&&(O=Xr.Push),{matches:he,pendingActionResult:[tt.route.id,$e]}}return{matches:he,pendingActionResult:[He.route.id,$e]}}async function Nr(F,j,ne,he,Ce,Re,Ve,$e,He,tt,Ke){let xt=Ce||vT(j,Re),jt=Re||Ve||PW(xt),An=!z&&(!u.v7_partialHydration||!He);if(he){if(An){let pn=or(Ke);vi(nr({navigation:xt},pn!==void 0?{actionData:pn}:{}),{flushSync:tt})}let ki=await K(ne,j.pathname,F.signal);if(ki.type==="aborted")return{shortCircuited:!0};if(ki.type==="error"){let pn=yg(ki.partialMatches).route.id;return{matches:ki.partialMatches,loaderData:{},errors:{[pn]:ki.error}}}else if(ki.matches)ne=ki.matches;else{let{error:pn,notFoundMatches:Fs,route:Ff}=to(j.pathname);return{matches:Fs,loaderData:{},errors:{[Ff.id]:pn}}}}let Ne=a||o,[W,pe]=kW(n.history,D,ne,jt,j,u.v7_partialHydration&&He===!0,u.v7_skipActionErrorRevalidation,Q,te,se,Ie,Le,ge,Ne,l,Ke);if(Ri(ki=>!(ne&&ne.some(pn=>pn.route.id===ki))||W&&W.some(pn=>pn.route.id===ki)),fe=++ae,W.length===0&&pe.length===0){let ki=er();return nn(j,nr({matches:ne,loaderData:{},errors:Ke&&Wa(Ke[1])?{[Ke[0]]:Ke[1].error}:null},MW(Ke),ki?{fetchers:new Map(D.fetchers)}:{}),{flushSync:tt}),{shortCircuited:!0}}if(An){let ki={};if(!he){ki.navigation=xt;let pn=or(Ke);pn!==void 0&&(ki.actionData=pn)}pe.length>0&&(ki.fetchers=ys(pe)),vi(ki,{flushSync:tt})}pe.forEach(ki=>{jn(ki.key),ki.controller&&Y.set(ki.key,ki.controller)});let Ae=()=>pe.forEach(ki=>jn(ki.key));G&&G.signal.addEventListener("abort",Ae);let{loaderResults:Bt,fetcherResults:mi}=await Mr(D,ne,W,pe,F);if(F.signal.aborted)return{shortCircuited:!0};G&&G.signal.removeEventListener("abort",Ae),pe.forEach(ki=>Y.delete(ki.key));let gt=h2(Bt);if(gt)return await Jn(F,gt.result,!0,{replace:$e}),{shortCircuited:!0};if(gt=h2(mi),gt)return ge.add(gt.key),await Jn(F,gt.result,!0,{replace:$e}),{shortCircuited:!0};let{loaderData:Ui,errors:mn}=IW(D,ne,Bt,Ke,pe,mi,Ze);Ze.forEach((ki,pn)=>{ki.subscribe(Fs=>{(Fs||ki.done)&&Ze.delete(pn)})}),u.v7_partialHydration&&He&&D.errors&&(mn=nr({},D.errors,mn));let lr=er(),Cn=Bs(fe),Rn=lr||Cn||pe.length>0;return nr({matches:ne,loaderData:Ui,errors:mn},Rn?{fetchers:new Map(D.fetchers)}:{})}function or(F){if(F&&!Wa(F[1]))return{[F[0]]:F[1].data};if(D.actionData)return Object.keys(D.actionData).length===0?null:D.actionData}function ys(F){return F.forEach(j=>{let ne=D.fetchers.get(j.key),he=i_(void 0,ne?ne.data:void 0);D.fetchers.set(j.key,he)}),new Map(D.fetchers)}function eo(F,j,ne,he){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");jn(F);let Ce=(he&&he.flushSync)===!0,Re=a||o,Ve=ED(D.location,D.matches,l,u.v7_prependBasename,ne,u.v7_relativeSplatPath,j,he?.relative),$e=wg(Re,Ve,l),He=At($e,Re,Ve);if(He.active&&He.matches&&($e=He.matches),!$e){ar(F,j,ha(404,{pathname:Ve}),{flushSync:Ce});return}let{path:tt,submission:Ke,error:xt}=SW(u.v7_normalizeFormMethod,!0,Ve,he);if(xt){ar(F,j,xt,{flushSync:Ce});return}let jt=W_($e,tt),An=(he&&he.preventScrollReset)===!0;if(Ke&&Zl(Ke.formMethod)){el(F,j,tt,jt,$e,He.active,Ce,An,Ke);return}Le.set(F,{routeId:j,path:tt}),ko(F,j,tt,jt,$e,He.active,Ce,An,Ke)}async function el(F,j,ne,he,Ce,Re,Ve,$e,He){Os(),Le.delete(F);function tt(ln){if(!ln.route.action&&!ln.route.lazy){let Qu=ha(405,{method:He.formMethod,pathname:ne,routeId:j});return ar(F,j,Qu,{flushSync:Ve}),!0}return!1}if(!Re&&tt(he))return;let Ke=D.fetchers.get(F);Ar(F,Rce(He,Ke),{flushSync:Ve});let xt=new AbortController,jt=Ap(n.history,ne,xt.signal,He);if(Re){let ln=await K(Ce,new URL(jt.url).pathname,jt.signal,F);if(ln.type==="aborted")return;if(ln.type==="error"){ar(F,j,ln.error,{flushSync:Ve});return}else if(ln.matches){if(Ce=ln.matches,he=W_(Ce,ne),tt(he))return}else{ar(F,j,ha(404,{pathname:ne}),{flushSync:Ve});return}}Y.set(F,xt);let An=ae,W=(await $n("action",D,jt,[he],Ce,F))[he.route.id];if(jt.signal.aborted){Y.get(F)===xt&&Y.delete(F);return}if(u.v7_fetcherPersist&&Ie.has(F)){if(Hg(W)||Wa(W)){Ar(F,xd(void 0));return}}else{if(Hg(W))if(Y.delete(F),fe>An){Ar(F,xd(void 0));return}else return ge.add(F),Ar(F,i_(He)),Jn(jt,W,!1,{fetcherSubmission:He,preventScrollReset:$e});if(Wa(W)){ar(F,j,W.error);return}}if($d(W))throw ha(400,{type:"defer-action"});let pe=D.navigation.location||D.location,Ae=Ap(n.history,pe,xt.signal),Bt=a||o,mi=D.navigation.state!=="idle"?wg(Bt,D.navigation.location,l):D.matches;Hi(mi,"Didn't find any matches after fetcher action");let gt=++ae;J.set(F,gt);let Ui=i_(He,W.data);D.fetchers.set(F,Ui);let[mn,lr]=kW(n.history,D,mi,He,pe,!1,u.v7_skipActionErrorRevalidation,Q,te,se,Ie,Le,ge,Bt,l,[he.route.id,W]);lr.filter(ln=>ln.key!==F).forEach(ln=>{let Qu=ln.key,sC=D.fetchers.get(Qu),M3=i_(void 0,sC?sC.data:void 0);D.fetchers.set(Qu,M3),jn(Qu),ln.controller&&Y.set(Qu,ln.controller)}),vi({fetchers:new Map(D.fetchers)});let Cn=()=>lr.forEach(ln=>jn(ln.key));xt.signal.addEventListener("abort",Cn);let{loaderResults:Rn,fetcherResults:ki}=await Mr(D,mi,mn,lr,Ae);if(xt.signal.aborted)return;xt.signal.removeEventListener("abort",Cn),J.delete(F),Y.delete(F),lr.forEach(ln=>Y.delete(ln.key));let pn=h2(Rn);if(pn)return Jn(Ae,pn.result,!1,{preventScrollReset:$e});if(pn=h2(ki),pn)return ge.add(pn.key),Jn(Ae,pn.result,!1,{preventScrollReset:$e});let{loaderData:Fs,errors:Ff}=IW(D,mi,Rn,void 0,lr,ki,Ze);if(D.fetchers.has(F)){let ln=xd(W.data);D.fetchers.set(F,ln)}Bs(gt),D.navigation.state==="loading"&&gt>fe?(Hi(O,"Expected pending action"),G&&G.abort(),nn(D.navigation.location,{matches:mi,loaderData:Fs,errors:Ff,fetchers:new Map(D.fetchers)})):(vi({errors:Ff,loaderData:NW(D.loaderData,Fs,mi,Ff),fetchers:new Map(D.fetchers)}),Q=!1)}async function ko(F,j,ne,he,Ce,Re,Ve,$e,He){let tt=D.fetchers.get(F);Ar(F,i_(He,tt?tt.data:void 0),{flushSync:Ve});let Ke=new AbortController,xt=Ap(n.history,ne,Ke.signal);if(Re){let W=await K(Ce,new URL(xt.url).pathname,xt.signal,F);if(W.type==="aborted")return;if(W.type==="error"){ar(F,j,W.error,{flushSync:Ve});return}else if(W.matches)Ce=W.matches,he=W_(Ce,ne);else{ar(F,j,ha(404,{pathname:ne}),{flushSync:Ve});return}}Y.set(F,Ke);let jt=ae,Ne=(await $n("loader",D,xt,[he],Ce,F))[he.route.id];if($d(Ne)&&(Ne=await IM(Ne,xt.signal,!0)||Ne),Y.get(F)===Ke&&Y.delete(F),!xt.signal.aborted){if(Ie.has(F)){Ar(F,xd(void 0));return}if(Hg(Ne))if(fe>jt){Ar(F,xd(void 0));return}else{ge.add(F),await Jn(xt,Ne,!1,{preventScrollReset:$e});return}if(Wa(Ne)){ar(F,j,Ne.error);return}Hi(!$d(Ne),"Unhandled fetcher deferred data"),Ar(F,xd(Ne.data))}}async function Jn(F,j,ne,he){let{submission:Ce,fetcherSubmission:Re,preventScrollReset:Ve,replace:$e}=he===void 0?{}:he;j.response.headers.has("X-Remix-Revalidate")&&(Q=!0);let He=j.response.headers.get("Location");Hi(He,"Expected a Location header on the redirect Response"),He=DW(He,new URL(F.url),l);let tt=lw(D.location,He,{_isRedirect:!0});if(t){let W=!1;if(j.response.headers.has("X-Remix-Reload-Document"))W=!0;else if(EM.test(He)){const pe=n.history.createURL(He);W=pe.origin!==e.location.origin||Q1(pe.pathname,l)==null}if(W){$e?e.location.replace(He):e.location.assign(He);return}}G=null;let Ke=$e===!0||j.response.headers.has("X-Remix-Replace")?Xr.Replace:Xr.Push,{formMethod:xt,formAction:jt,formEncType:An}=D.navigation;!Ce&&!Re&&xt&&jt&&An&&(Ce=PW(D.navigation));let Ne=Ce||Re;if(gce.has(j.response.status)&&Ne&&Zl(Ne.formMethod))await Vn(Ke,tt,{submission:nr({},Ne,{formAction:He}),preventScrollReset:Ve||B,enableViewTransition:ne?H:void 0});else{let W=vT(tt,Ce);await Vn(Ke,tt,{overrideNavigation:W,fetcherSubmission:Re,preventScrollReset:Ve||B,enableViewTransition:ne?H:void 0})}}async function $n(F,j,ne,he,Ce,Re){let Ve,$e={};try{Ve=await Cce(c,F,j,ne,he,Ce,Re,s,r)}catch(He){return he.forEach(tt=>{$e[tt.route.id]={type:kn.error,error:He}}),$e}for(let[He,tt]of Object.entries(Ve))if(Dce(tt)){let Ke=tt.result;$e[He]={type:kn.redirect,response:kce(Ke,ne,He,Ce,l,u.v7_relativeSplatPath)}}else $e[He]=await xce(tt);return $e}async function Mr(F,j,ne,he,Ce){let Re=F.matches,Ve=$n("loader",F,Ce,ne,j,null),$e=Promise.all(he.map(async Ke=>{if(Ke.matches&&Ke.match&&Ke.controller){let jt=(await $n("loader",F,Ap(n.history,Ke.path,Ke.controller.signal),[Ke.match],Ke.matches,Ke.key))[Ke.match.route.id];return{[Ke.key]:jt}}else return Promise.resolve({[Ke.key]:{type:kn.error,error:ha(404,{pathname:Ke.path})}})})),He=await Ve,tt=(await $e).reduce((Ke,xt)=>Object.assign(Ke,xt),{});return await Promise.all([Nce(j,He,Ce.signal,Re,F.loaderData),Mce(j,tt,he)]),{loaderResults:He,fetcherResults:tt}}function Os(){Q=!0,te.push(...Ri()),Le.forEach((F,j)=>{Y.has(j)&&se.add(j),jn(j)})}function Ar(F,j,ne){ne===void 0&&(ne={}),D.fetchers.set(F,j),vi({fetchers:new Map(D.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function ar(F,j,ne,he){he===void 0&&(he={});let Ce=yg(D.matches,j);Ln(F),vi({errors:{[Ce.route.id]:ne},fetchers:new Map(D.fetchers)},{flushSync:(he&&he.flushSync)===!0})}function wr(F){return We.set(F,(We.get(F)||0)+1),Ie.has(F)&&Ie.delete(F),D.fetchers.get(F)||mce}function Ln(F){let j=D.fetchers.get(F);Y.has(F)&&!(j&&j.state==="loading"&&J.has(F))&&jn(F),Le.delete(F),J.delete(F),ge.delete(F),u.v7_fetcherPersist&&Ie.delete(F),se.delete(F),D.fetchers.delete(F)}function os(F){let j=(We.get(F)||0)-1;j<=0?(We.delete(F),Ie.add(F),u.v7_fetcherPersist||Ln(F)):We.set(F,j),vi({fetchers:new Map(D.fetchers)})}function jn(F){let j=Y.get(F);j&&(j.abort(),Y.delete(F))}function Ai(F){for(let j of F){let ne=wr(j),he=xd(ne.data);D.fetchers.set(j,he)}}function er(){let F=[],j=!1;for(let ne of ge){let he=D.fetchers.get(ne);Hi(he,"Expected fetcher: "+ne),he.state==="loading"&&(ge.delete(ne),F.push(ne),j=!0)}return Ai(F),j}function Bs(F){let j=[];for(let[ne,he]of J)if(he<F){let Ce=D.fetchers.get(ne);Hi(Ce,"Expected fetcher: "+ne),Ce.state==="loading"&&(jn(ne),J.delete(ne),j.push(ne))}return Ai(j),j.length>0}function Rr(F,j){let ne=D.blockers.get(F)||t_;return ct.get(F)!==j&&ct.set(F,j),ne}function xi(F){D.blockers.delete(F),ct.delete(F)}function Pr(F,j){let ne=D.blockers.get(F)||t_;Hi(ne.state==="unblocked"&&j.state==="blocked"||ne.state==="blocked"&&j.state==="blocked"||ne.state==="blocked"&&j.state==="proceeding"||ne.state==="blocked"&&j.state==="unblocked"||ne.state==="proceeding"&&j.state==="unblocked","Invalid blocker state transition: "+ne.state+" -> "+j.state);let he=new Map(D.blockers);he.set(F,j),vi({blockers:he})}function Lo(F){let{currentLocation:j,nextLocation:ne,historyAction:he}=F;if(ct.size===0)return;ct.size>1&&v1(!1,"A router only supports one blocker at a time");let Ce=Array.from(ct.entries()),[Re,Ve]=Ce[Ce.length-1],$e=D.blockers.get(Re);if(!($e&&$e.state==="proceeding")&&Ve({currentLocation:j,nextLocation:ne,historyAction:he}))return Re}function to(F){let j=ha(404,{pathname:F}),ne=a||o,{matches:he,route:Ce}=AW(ne);return Ri(),{notFoundMatches:he,route:Ce,error:j}}function Ri(F){let j=[];return Ze.forEach((ne,he)=>{(!F||F(he))&&(ne.cancel(),j.push(he),Ze.delete(he))}),j}function To(F,j,ne){if(p=F,_=j,b=ne||null,!w&&D.navigation===_T){w=!0;let he=Cs(D.location,D.matches);he!=null&&vi({restoreScrollPosition:he})}return()=>{p=null,_=null,b=null}}function Rl(F,j){return b&&b(F,j.map(he=>qle(he,D.loaderData)))||F.key}function Tn(F,j){if(p&&_){let ne=Rl(F,j);p[ne]=_()}}function Cs(F,j){if(p){let ne=Rl(F,j),he=p[ne];if(typeof he=="number")return he}return null}function At(F,j,ne){if(h)if(F){if(Object.keys(F[0].params).length>0)return{active:!0,matches:DS(j,ne,l,!0)}}else return{active:!0,matches:DS(j,ne,l,!0)||[]};return{active:!1,matches:null}}async function K(F,j,ne,he){if(!h)return{type:"success",matches:F};let Ce=F;for(;;){let Re=a==null,Ve=a||o,$e=s;try{await h({signal:ne,path:j,matches:Ce,fetcherKey:he,patch:(Ke,xt)=>{ne.aborted||TW(Ke,xt,Ve,$e,r)}})}catch(Ke){return{type:"error",error:Ke,partialMatches:Ce}}finally{Re&&!ne.aborted&&(o=[...o])}if(ne.aborted)return{type:"aborted"};let He=wg(Ve,j,l);if(He)return{type:"success",matches:He};let tt=DS(Ve,j,l,!0);if(!tt||Ce.length===tt.length&&Ce.every((Ke,xt)=>Ke.route.id===tt[xt].route.id))return{type:"success",matches:null};Ce=tt}}function ee(F){s={},a=vx(F,r,void 0,s)}function re(F,j){let ne=a==null;TW(F,j,a||o,s,r),ne&&(o=[...o],vi({}))}return N={get basename(){return l},get future(){return u},get state(){return D},get routes(){return o},get window(){return e},initialize:Ot,subscribe:yn,enableScrollRestoration:To,navigate:rn,fetch:eo,revalidate:ss,createHref:F=>n.history.createHref(F),encodeLocation:F=>n.history.encodeLocation(F),getFetcher:wr,deleteFetcher:os,dispose:$t,getBlocker:Rr,deleteBlocker:xi,patchRoutes:re,_internalFetchControllers:Y,_internalActiveDeferreds:Ze,_internalSetRoutes:ee},N}function _ce(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function ED(n,e,t,i,r,s,o,a){let l,c;if(o){l=[];for(let u of e)if(l.push(u),u.route.id===o){c=u;break}}else l=e,c=e[e.length-1];let h=DM(r||".",TM(l,s),Q1(n.pathname,t)||n.pathname,a==="path");if(r==null&&(h.search=n.search,h.hash=n.hash),(r==null||r===""||r===".")&&c){let u=NM(h.search);if(c.route.index&&!u)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&u){let d=new URLSearchParams(h.search),g=d.getAll("index");d.delete("index"),g.filter(b=>b).forEach(b=>d.append("index",b));let p=d.toString();h.search=p?"?"+p:""}}return i&&t!=="/"&&(h.pathname=h.pathname==="/"?t:yu([t,h.pathname])),vm(h)}function SW(n,e,t,i){if(!i||!_ce(i))return{path:t};if(i.formMethod&&!Ice(i.formMethod))return{path:t,error:ha(405,{method:i.formMethod})};let r=()=>({path:t,error:ha(400,{type:"invalid-body"})}),s=i.formMethod||"get",o=n?s.toUpperCase():s.toLowerCase(),a=nK(t);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!Zl(o))return r();let d=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((g,p)=>{let[b,_]=p;return""+g+b+"="+_+`
`},""):String(i.body);return{path:t,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:void 0,text:d}}}else if(i.formEncType==="application/json"){if(!Zl(o))return r();try{let d=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:t,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:d,text:void 0}}}catch{return r()}}}Hi(typeof FormData=="function","FormData is not available in this environment");let l,c;if(i.formData)l=ND(i.formData),c=i.formData;else if(i.body instanceof FormData)l=ND(i.body),c=i.body;else if(i.body instanceof URLSearchParams)l=i.body,c=EW(l);else if(i.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(i.body),c=EW(l)}catch{return r()}let h={formMethod:o,formAction:a,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Zl(h.formMethod))return{path:t,submission:h};let u=Tf(t);return e&&u.search&&NM(u.search)&&l.append("index",""),u.search="?"+l,{path:vm(u),submission:h}}function xW(n,e,t){t===void 0&&(t=!1);let i=n.findIndex(r=>r.route.id===e);return i>=0?n.slice(0,t?i+1:i):n}function kW(n,e,t,i,r,s,o,a,l,c,h,u,d,g,p,b){let _=b?Wa(b[1])?b[1].error:b[1].data:void 0,w=n.createURL(e.location),y=n.createURL(r),k=t;s&&e.errors?k=xW(t,Object.keys(e.errors)[0],!0):b&&Wa(b[1])&&(k=xW(t,b[0]));let L=b?b[1].statusCode:void 0,T=o&&L&&L>=400,N=k.filter((O,B)=>{let{route:G}=O;if(G.lazy)return!0;if(G.loader==null)return!1;if(s)return ID(G,e.loaderData,e.errors);if(vce(e.loaderData,e.matches[B],O)||l.some(X=>X===O.route.id))return!0;let H=e.matches[B],q=O;return LW(O,nr({currentUrl:w,currentParams:H.params,nextUrl:y,nextParams:q.params},i,{actionResult:_,actionStatus:L,defaultShouldRevalidate:T?!1:a||w.pathname+w.search===y.pathname+y.search||w.search!==y.search||tK(H,q)}))}),D=[];return u.forEach((O,B)=>{if(s||!t.some(z=>z.route.id===O.routeId)||h.has(B))return;let G=wg(g,O.path,p);if(!G){D.push({key:B,routeId:O.routeId,path:O.path,matches:null,match:null,controller:null});return}let H=e.fetchers.get(B),q=W_(G,O.path),X=!1;d.has(B)?X=!1:c.has(B)?(c.delete(B),X=!0):H&&H.state!=="idle"&&H.data===void 0?X=a:X=LW(q,nr({currentUrl:w,currentParams:e.matches[e.matches.length-1].params,nextUrl:y,nextParams:t[t.length-1].params},i,{actionResult:_,actionStatus:L,defaultShouldRevalidate:T?!1:a})),X&&D.push({key:B,routeId:O.routeId,path:O.path,matches:G,match:q,controller:new AbortController})}),[N,D]}function ID(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let i=e!=null&&e[n.id]!==void 0,r=t!=null&&t[n.id]!==void 0;return!i&&r?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!r}function vce(n,e,t){let i=!e||t.route.id!==e.route.id,r=n[t.route.id]===void 0;return i||r}function tK(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function LW(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function TW(n,e,t,i,r){var s;let o;if(n){let c=i[n];Hi(c,"No route found to patch children into: routeId = "+n),c.children||(c.children=[]),o=c.children}else o=t;let a=e.filter(c=>!o.some(h=>iK(c,h))),l=vx(a,r,[n||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],i);o.push(...l)}function iK(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>{var r;return(r=e.children)==null?void 0:r.some(s=>iK(t,s))}):!1}async function wce(n,e,t){if(!n.lazy)return;let i=await n.lazy();if(!n.lazy)return;let r=t[n.id];Hi(r,"No route found in manifest");let s={};for(let o in i){let l=r[o]!==void 0&&o!=="hasErrorBoundary";v1(!l,'Route "'+r.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!jle.has(o)&&(s[o]=i[o])}Object.assign(r,s),Object.assign(r,nr({},e(r),{lazy:void 0}))}async function yce(n){let{matches:e}=n,t=e.filter(r=>r.shouldLoad);return(await Promise.all(t.map(r=>r.resolve()))).reduce((r,s,o)=>Object.assign(r,{[t[o].route.id]:s}),{})}async function Cce(n,e,t,i,r,s,o,a,l,c){let h=s.map(g=>g.route.lazy?wce(g.route,l,a):void 0),u=s.map((g,p)=>{let b=h[p],_=r.some(y=>y.route.id===g.route.id);return nr({},g,{shouldLoad:_,resolve:async y=>(y&&i.method==="GET"&&(g.route.lazy||g.route.loader)&&(_=!0),_?Sce(e,i,g,b,y,c):Promise.resolve({type:kn.data,result:void 0}))})}),d=await n({matches:u,request:i,params:s[0].params,fetcherKey:o,context:c});try{await Promise.all(h)}catch{}return d}async function Sce(n,e,t,i,r,s){let o,a,l=c=>{let h,u=new Promise((p,b)=>h=b);a=()=>h(),e.signal.addEventListener("abort",a);let d=p=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):c({request:e,params:t.params,context:s},...p!==void 0?[p]:[]),g=(async()=>{try{return{type:"data",result:await(r?r(b=>d(b)):d())}}catch(p){return{type:"error",result:p}}})();return Promise.race([g,u])};try{let c=t.route[n];if(i)if(c){let h,[u]=await Promise.all([l(c).catch(d=>{h=d}),i]);if(h!==void 0)throw h;o=u}else if(await i,c=t.route[n],c)o=await l(c);else if(n==="action"){let h=new URL(e.url),u=h.pathname+h.search;throw ha(405,{method:e.method,pathname:u,routeId:t.route.id})}else return{type:kn.data,result:void 0};else if(c)o=await l(c);else{let h=new URL(e.url),u=h.pathname+h.search;throw ha(404,{pathname:u})}Hi(o.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:kn.error,result:c}}finally{a&&e.signal.removeEventListener("abort",a)}return o}async function xce(n){let{result:e,type:t}=n;if(rK(e)){let u;try{let d=e.headers.get("Content-Type");d&&/\bapplication\/json\b/.test(d)?e.body==null?u=null:u=await e.json():u=await e.text()}catch(d){return{type:kn.error,error:d}}return t===kn.error?{type:kn.error,error:new wx(e.status,e.statusText,u),statusCode:e.status,headers:e.headers}:{type:kn.data,data:u,statusCode:e.status,headers:e.headers}}if(t===kn.error){if(RW(e)){var i,r;if(e.data instanceof Error){var s,o;return{type:kn.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:kn.error,error:new wx(((i=e.init)==null?void 0:i.status)||500,void 0,e.data),statusCode:cw(e)?e.status:void 0,headers:(r=e.init)!=null&&r.headers?new Headers(e.init.headers):void 0}}return{type:kn.error,error:e,statusCode:cw(e)?e.status:void 0}}if(Ece(e)){var a,l;return{type:kn.deferred,deferredData:e,statusCode:(a=e.init)==null?void 0:a.status,headers:((l=e.init)==null?void 0:l.headers)&&new Headers(e.init.headers)}}if(RW(e)){var c,h;return{type:kn.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(h=e.init)!=null&&h.headers?new Headers(e.init.headers):void 0}}return{type:kn.data,data:e}}function kce(n,e,t,i,r,s){let o=n.headers.get("Location");if(Hi(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!EM.test(o)){let a=i.slice(0,i.findIndex(l=>l.route.id===t)+1);o=ED(new URL(e.url),a,r,!0,o,s),n.headers.set("Location",o)}return n}function DW(n,e,t){if(EM.test(n)){let i=n,r=i.startsWith("//")?new URL(e.protocol+i):new URL(i),s=Q1(r.pathname,t)!=null;if(r.origin===e.origin&&s)return r.pathname+r.search+r.hash}return n}function Ap(n,e,t,i){let r=n.createURL(nK(e)).toString(),s={signal:t};if(i&&Zl(i.formMethod)){let{formMethod:o,formEncType:a}=i;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(i.json)):a==="text/plain"?s.body=i.text:a==="application/x-www-form-urlencoded"&&i.formData?s.body=ND(i.formData):s.body=i.formData}return new Request(r,s)}function ND(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function EW(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function Lce(n,e,t,i,r){let s={},o=null,a,l=!1,c={},h=t&&Wa(t[1])?t[1].error:void 0;return n.forEach(u=>{if(!(u.route.id in e))return;let d=u.route.id,g=e[d];if(Hi(!Hg(g),"Cannot handle redirect results in processLoaderData"),Wa(g)){let p=g.error;h!==void 0&&(p=h,h=void 0),o=o||{};{let b=yg(n,d);o[b.route.id]==null&&(o[b.route.id]=p)}s[d]=void 0,l||(l=!0,a=cw(g.error)?g.error.status:500),g.headers&&(c[d]=g.headers)}else $d(g)?(i.set(d,g.deferredData),s[d]=g.deferredData.data,g.statusCode!=null&&g.statusCode!==200&&!l&&(a=g.statusCode),g.headers&&(c[d]=g.headers)):(s[d]=g.data,g.statusCode&&g.statusCode!==200&&!l&&(a=g.statusCode),g.headers&&(c[d]=g.headers))}),h!==void 0&&t&&(o={[t[0]]:h},s[t[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function IW(n,e,t,i,r,s,o){let{loaderData:a,errors:l}=Lce(e,t,i,o);return r.forEach(c=>{let{key:h,match:u,controller:d}=c,g=s[h];if(Hi(g,"Did not find corresponding fetcher result"),!(d&&d.signal.aborted))if(Wa(g)){let p=yg(n.matches,u?.route.id);l&&l[p.route.id]||(l=nr({},l,{[p.route.id]:g.error})),n.fetchers.delete(h)}else if(Hg(g))Hi(!1,"Unhandled fetcher revalidation redirect");else if($d(g))Hi(!1,"Unhandled fetcher deferred data");else{let p=xd(g.data);n.fetchers.set(h,p)}}),{loaderData:a,errors:l}}function NW(n,e,t,i){let r=nr({},e);for(let s of t){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(r[o]=e[o]):n[o]!==void 0&&s.route.loader&&(r[o]=n[o]),i&&i.hasOwnProperty(o))break}return r}function MW(n){return n?Wa(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function yg(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function AW(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ha(n,e){let{pathname:t,routeId:i,method:r,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return n===400?(a="Bad Request",r&&t&&i?l="You made a "+r+' request to "'+t+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):n===403?(a="Forbidden",l='Route "'+i+'" does not match URL "'+t+'"'):n===404?(a="Not Found",l='No route matches URL "'+t+'"'):n===405&&(a="Method Not Allowed",r&&t&&i?l="You made a "+r.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":r&&(l='Invalid request method "'+r.toUpperCase()+'"')),new wx(n||500,a,new Error(l),!0)}function h2(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,r]=e[t];if(Hg(r))return{key:i,result:r}}}function nK(n){let e=typeof n=="string"?Tf(n):n;return vm(nr({},e,{hash:""}))}function Tce(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function Dce(n){return rK(n.result)&&fce.has(n.result.status)}function $d(n){return n.type===kn.deferred}function Wa(n){return n.type===kn.error}function Hg(n){return(n&&n.type)===kn.redirect}function RW(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function Ece(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function rK(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function Ice(n){return dce.has(n.toLowerCase())}function Zl(n){return hce.has(n.toLowerCase())}async function Nce(n,e,t,i,r){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[a,l]=s[o],c=n.find(d=>d?.route.id===a);if(!c)continue;let h=i.find(d=>d.route.id===c.route.id),u=h!=null&&!tK(h,c)&&(r&&r[c.route.id])!==void 0;$d(l)&&u&&await IM(l,t,!1).then(d=>{d&&(e[a]=d)})}}async function Mce(n,e,t){for(let i=0;i<t.length;i++){let{key:r,routeId:s,controller:o}=t[i],a=e[r];n.find(c=>c?.route.id===s)&&$d(a)&&(Hi(o,"Expected an AbortController for revalidating fetcher deferred result"),await IM(a,o.signal,!0).then(c=>{c&&(e[r]=c)}))}}async function IM(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:kn.data,data:n.deferredData.unwrappedData}}catch(r){return{type:kn.error,error:r}}return{type:kn.data,data:n.deferredData.data}}}function NM(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function W_(n,e){let t=typeof e=="string"?Tf(e).search:e.search;if(n[n.length-1].route.index&&NM(t||""))return n[n.length-1];let i=QG(n);return i[i.length-1]}function PW(n){let{formMethod:e,formAction:t,formEncType:i,text:r,formData:s,json:o}=n;if(!(!e||!t||!i)){if(r!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:r};if(s!=null)return{formMethod:e,formAction:t,formEncType:i,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:o,text:void 0}}}function vT(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Ace(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function i_(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Rce(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function xd(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function Pce(n,e){try{let t=n.sessionStorage.getItem(eK);if(t){let i=JSON.parse(t);for(let[r,s]of Object.entries(i||{}))s&&Array.isArray(s)&&e.set(r,new Set(s||[]))}}catch{}}function Oce(n,e){if(e.size>0){let t={};for(let[i,r]of e)t[i]=[...r];try{n.sessionStorage.setItem(eK,JSON.stringify(t))}catch(i){v1(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yx(){return yx=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},yx.apply(this,arguments)}const jL=Pe.createContext(null),sK=Pe.createContext(null),Hm=Pe.createContext(null),MM=Pe.createContext(null),Df=Pe.createContext({outlet:null,matches:[],isDataRoute:!1}),oK=Pe.createContext(null);function Bce(n,e){let{relative:t}=e===void 0?{}:e;py()||Hi(!1);let{basename:i,navigator:r}=Pe.useContext(Hm),{hash:s,pathname:o,search:a}=lK(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:yu([i,o])),r.createHref({pathname:l,search:a,hash:s})}function py(){return Pe.useContext(MM)!=null}function UL(){return py()||Hi(!1),Pe.useContext(MM).location}function aK(n){Pe.useContext(Hm).static||Pe.useLayoutEffect(n)}function Fce(){let{isDataRoute:n}=Pe.useContext(Df);return n?Qce():Wce()}function Wce(){py()||Hi(!1);let n=Pe.useContext(jL),{basename:e,future:t,navigator:i}=Pe.useContext(Hm),{matches:r}=Pe.useContext(Df),{pathname:s}=UL(),o=JSON.stringify(TM(r,t.v7_relativeSplatPath)),a=Pe.useRef(!1);return aK(()=>{a.current=!0}),Pe.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let u=DM(c,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:yu([e,u.pathname])),(h.replace?i.replace:i.push)(u,h.state,h)},[e,i,o,s,n])}const zce=Pe.createContext(null);function Hce(n){let e=Pe.useContext(Df).outlet;return e&&Pe.createElement(zce.Provider,{value:n},e)}function lK(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=Pe.useContext(Hm),{matches:r}=Pe.useContext(Df),{pathname:s}=UL(),o=JSON.stringify(TM(r,i.v7_relativeSplatPath));return Pe.useMemo(()=>DM(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function Vce(n,e,t,i){py()||Hi(!1);let{navigator:r}=Pe.useContext(Hm),{matches:s}=Pe.useContext(Df),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=UL(),h;h=c;let u=h.pathname||"/",d=u;if(l!=="/"){let b=l.replace(/^\//,"").split("/");d="/"+u.replace(/^\//,"").split("/").slice(b.length).join("/")}let g=wg(n,{pathname:d});return Gce(g&&g.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:yu([l,r.encodeLocation?r.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:yu([l,r.encodeLocation?r.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,t,i)}function $ce(){let n=Xce(),e=cw(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Pe.createElement(Pe.Fragment,null,Pe.createElement("h2",null,"Unexpected Application Error!"),Pe.createElement("h3",{style:{fontStyle:"italic"}},e),t?Pe.createElement("pre",{style:r},t):null,null)}const jce=Pe.createElement($ce,null);class Uce extends Pe.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Pe.createElement(Df.Provider,{value:this.props.routeContext},Pe.createElement(oK.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qce(n){let{routeContext:e,match:t,children:i}=n,r=Pe.useContext(jL);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),Pe.createElement(Df.Provider,{value:e},i)}function Gce(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(r=t)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(u=>u.route.id&&a?.[u.route.id]!==void 0);h>=0||Hi(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let u=o[h];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(c=h),u.route.id){let{loaderData:d,errors:g}=t,p=u.route.loader&&d[u.route.id]===void 0&&(!g||g[u.route.id]===void 0);if(u.route.lazy||p){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,u,d)=>{let g,p=!1,b=null,_=null;t&&(g=a&&u.route.id?a[u.route.id]:void 0,b=u.route.errorElement||jce,l&&(c<0&&d===0?(Jce("route-fallback"),p=!0,_=null):c===d&&(p=!0,_=u.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,d+1)),y=()=>{let k;return g?k=b:p?k=_:u.route.Component?k=Pe.createElement(u.route.Component,null):u.route.element?k=u.route.element:k=h,Pe.createElement(qce,{match:u,routeContext:{outlet:h,matches:w,isDataRoute:t!=null},children:k})};return t&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?Pe.createElement(Uce,{location:t.location,revalidation:t.revalidation,component:b,error:g,children:y(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):y()},null)}var cK=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(cK||{}),hK=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(hK||{});function Kce(n){let e=Pe.useContext(jL);return e||Hi(!1),e}function Yce(n){let e=Pe.useContext(sK);return e||Hi(!1),e}function Zce(n){let e=Pe.useContext(Df);return e||Hi(!1),e}function uK(n){let e=Zce(),t=e.matches[e.matches.length-1];return t.route.id||Hi(!1),t.route.id}function Xce(){var n;let e=Pe.useContext(oK),t=Yce(hK.UseRouteError),i=uK();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function Qce(){let{router:n}=Kce(cK.UseNavigateStable),e=uK(),t=Pe.useRef(!1);return aK(()=>{t.current=!0}),Pe.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,yx({fromRouteId:e},s)))},[n,e])}const OW={};function Jce(n,e,t){OW[n]||(OW[n]=!0)}function ehe(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function the(n){return Hce(n.context)}function ihe(n){let{basename:e="/",children:t=null,location:i,navigationType:r=Xr.Pop,navigator:s,static:o=!1,future:a}=n;py()&&Hi(!1);let l=e.replace(/^\/*/,"/"),c=Pe.useMemo(()=>({basename:l,navigator:s,static:o,future:yx({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=Tf(i));let{pathname:h="/",search:u="",hash:d="",state:g=null,key:p="default"}=i,b=Pe.useMemo(()=>{let _=Q1(h,l);return _==null?null:{location:{pathname:_,search:u,hash:d,state:g,key:p},navigationType:r}},[l,h,u,d,g,p,r]);return b==null?null:Pe.createElement(Hm.Provider,{value:c},Pe.createElement(MM.Provider,{children:t,value:b}))}new Promise(()=>{});function nhe(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:Pe.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:Pe.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:Pe.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hw(){return hw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},hw.apply(this,arguments)}function rhe(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function she(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ohe(n,e){return n.button===0&&(!e||e==="_self")&&!she(n)}const ahe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lhe="6";try{window.__reactRouterVersion=lhe}catch{}function che(n,e){return bce({basename:e?.basename,future:hw({},e?.future,{v7_prependBasename:!0}),history:Hle({window:e?.window}),hydrationData:e?.hydrationData||hhe(),routes:n,mapRouteProperties:nhe,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window}).initialize()}function hhe(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=hw({},e,{errors:uhe(e.errors)})),e}function uhe(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,r]of e)if(r&&r.__type==="RouteErrorResponse")t[i]=new wx(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){if(r.__subType){let s=window[r.__subType];if(typeof s=="function")try{let o=new s(r.message);o.stack="",t[i]=o}catch{}}if(t[i]==null){let s=new Error(r.message);s.stack="",t[i]=s}}else t[i]=r;return t}const dhe=Pe.createContext({isTransitioning:!1}),fhe=Pe.createContext(new Map),ghe="startTransition",BW=Mle[ghe],mhe="flushSync",FW=zle[mhe];function phe(n){BW?BW(n):n()}function n_(n){FW?FW(n):n()}class bhe{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}}function _he(n){let{fallbackElement:e,router:t,future:i}=n,[r,s]=Pe.useState(t.state),[o,a]=Pe.useState(),[l,c]=Pe.useState({isTransitioning:!1}),[h,u]=Pe.useState(),[d,g]=Pe.useState(),[p,b]=Pe.useState(),_=Pe.useRef(new Map),{v7_startTransition:w}=i||{},y=Pe.useCallback(O=>{w?phe(O):O()},[w]),k=Pe.useCallback((O,B)=>{let{deletedFetchers:G,flushSync:H,viewTransitionOpts:q}=B;O.fetchers.forEach((z,Q)=>{z.data!==void 0&&_.current.set(Q,z.data)}),G.forEach(z=>_.current.delete(z));let X=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!q||X){H?n_(()=>s(O)):y(()=>s(O));return}if(H){n_(()=>{d&&(h&&h.resolve(),d.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:q.currentLocation,nextLocation:q.nextLocation})});let z=t.window.document.startViewTransition(()=>{n_(()=>s(O))});z.finished.finally(()=>{n_(()=>{u(void 0),g(void 0),a(void 0),c({isTransitioning:!1})})}),n_(()=>g(z));return}d?(h&&h.resolve(),d.skipTransition(),b({state:O,currentLocation:q.currentLocation,nextLocation:q.nextLocation})):(a(O),c({isTransitioning:!0,flushSync:!1,currentLocation:q.currentLocation,nextLocation:q.nextLocation}))},[t.window,d,h,_,y]);Pe.useLayoutEffect(()=>t.subscribe(k),[t,k]),Pe.useEffect(()=>{l.isTransitioning&&!l.flushSync&&u(new bhe)},[l]),Pe.useEffect(()=>{if(h&&o&&t.window){let O=o,B=h.promise,G=t.window.document.startViewTransition(async()=>{y(()=>s(O)),await B});G.finished.finally(()=>{u(void 0),g(void 0),a(void 0),c({isTransitioning:!1})}),g(G)}},[y,o,h,t.window]),Pe.useEffect(()=>{h&&o&&r.location.key===o.location.key&&h.resolve()},[h,d,r.location,o]),Pe.useEffect(()=>{!l.isTransitioning&&p&&(a(p.state),c({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),b(void 0))},[l.isTransitioning,p]),Pe.useEffect(()=>{},[]);let L=Pe.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:O=>t.navigate(O),push:(O,B,G)=>t.navigate(O,{state:B,preventScrollReset:G?.preventScrollReset}),replace:(O,B,G)=>t.navigate(O,{replace:!0,state:B,preventScrollReset:G?.preventScrollReset})}),[t]),T=t.basename||"/",N=Pe.useMemo(()=>({router:t,navigator:L,static:!1,basename:T}),[t,L,T]),D=Pe.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return Pe.useEffect(()=>ehe(i,t.future),[i,t.future]),Pe.createElement(Pe.Fragment,null,Pe.createElement(jL.Provider,{value:N},Pe.createElement(sK.Provider,{value:r},Pe.createElement(fhe.Provider,{value:_.current},Pe.createElement(dhe.Provider,{value:l},Pe.createElement(ihe,{basename:T,location:r.location,navigationType:r.historyAction,navigator:L,future:D},r.initialized||t.future.v7_partialHydration?Pe.createElement(vhe,{routes:t.routes,future:t.future,state:r}):e))))),null)}const vhe=Pe.memo(whe);function whe(n){let{routes:e,future:t,state:i}=n;return Vce(e,void 0,i,t)}const yhe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Che=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qL=Pe.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:u}=e,d=rhe(e,ahe),{basename:g}=Pe.useContext(Hm),p,b=!1;if(typeof c=="string"&&Che.test(c)&&(p=c,yhe))try{let k=new URL(window.location.href),L=c.startsWith("//")?new URL(k.protocol+c):new URL(c),T=Q1(L.pathname,g);L.origin===k.origin&&T!=null?c=T+L.search+L.hash:b=!0}catch{}let _=Bce(c,{relative:r}),w=She(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:u});function y(k){i&&i(k),k.defaultPrevented||w(k)}return Pe.createElement("a",hw({},d,{href:p||_,onClick:b||s?i:y,ref:t,target:l}))});var WW;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(WW||(WW={}));var zW;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(zW||(zW={}));function She(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Fce(),c=UL(),h=lK(n,{relative:o});return Pe.useCallback(u=>{if(ohe(u,t)){u.preventDefault();let d=i!==void 0?i:vm(c)===vm(h);l(n,{replace:d,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,i,r,t,n,s,o,a])}const by=Pe.createContext({});function xhe({children:n}){const[e,t]=Pe.useState(!1),[i,r]=Pe.useState(!1);return S.jsx(by.Provider,{value:{visible:e,setVisible:t,fms:i,setFms:r},children:n})}function khe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function Cx(){return Cx=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Cx.apply(null,arguments)}function MD(n,e){return MD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},MD(n,e)}function Lhe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,MD(n,e)}function wT(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return n.concat(s||Array.prototype.slice.call(e))}var u2={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var HW;function The(){if(HW)return u2;HW=1;var n=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,e=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,t=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,i=/\\([\u000b\u0020-\u00ff])/g,r=/([\\"])/g,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;u2.format=o,u2.parse=a;function o(u){if(!u||typeof u!="object")throw new TypeError("argument obj is required");var d=u.parameters,g=u.type;if(!g||!s.test(g))throw new TypeError("invalid type");var p=g;if(d&&typeof d=="object")for(var b,_=Object.keys(d).sort(),w=0;w<_.length;w++){if(b=_[w],!t.test(b))throw new TypeError("invalid parameter name");p+="; "+b+"="+c(d[b])}return p}function a(u){if(!u)throw new TypeError("argument string is required");var d=typeof u=="object"?l(u):u;if(typeof d!="string")throw new TypeError("argument string is required to be a string");var g=d.indexOf(";"),p=g!==-1?d.slice(0,g).trim():d.trim();if(!s.test(p))throw new TypeError("invalid media type");var b=new h(p.toLowerCase());if(g!==-1){var _,w,y;for(n.lastIndex=g;w=n.exec(d);){if(w.index!==g)throw new TypeError("invalid parameter format");g+=w[0].length,_=w[1].toLowerCase(),y=w[2],y.charCodeAt(0)===34&&(y=y.slice(1,-1),y.indexOf("\\")!==-1&&(y=y.replace(i,"$1"))),b.parameters[_]=y}if(g!==d.length)throw new TypeError("invalid parameter format")}return b}function l(u){var d;if(typeof u.getHeader=="function"?d=u.getHeader("content-type"):typeof u.headers=="object"&&(d=u.headers&&u.headers["content-type"]),typeof d!="string")throw new TypeError("content-type header is missing from object");return d}function c(u){var d=String(u);if(t.test(d))return d;if(d.length>0&&!e.test(d))throw new TypeError("invalid parameter value");return'"'+d.replace(r,"\\$1")+'"'}function h(u){this.parameters=Object.create(null),this.type=u}return u2}var Dhe=The(),Zp=new Map,dK=function(e){return e.cloneNode(!0)},VW=function(){return window.location.protocol==="file:"},fK=function(e,t,i){var r=new XMLHttpRequest;r.onreadystatechange=function(){try{if(!/\.svg/i.test(e)&&r.readyState===2){var s=r.getResponseHeader("Content-Type");if(!s)throw new Error("Content type not found");var o=Dhe.parse(s).type;if(!(o==="image/svg+xml"||o==="text/plain"))throw new Error("Invalid content type: ".concat(o))}if(r.readyState===4){if(r.status===404||r.responseXML===null)throw new Error(VW()?"Note: SVG injection ajax calls do not work locally without adjusting security settings in your browser. Or consider using a local webserver.":"Unable to load SVG file: "+e);if(r.status===200||VW()&&r.status===0)i(null,r);else throw new Error("There was a problem injecting the SVG: "+r.status+" "+r.statusText)}}catch(a){if(r.abort(),a instanceof Error)i(a,r);else throw a}},r.open("GET",e),r.withCredentials=t,r.overrideMimeType&&r.overrideMimeType("text/xml"),r.send()},Od={},$W=function(e,t){Od[e]=Od[e]||[],Od[e].push(t)},Ehe=function(e){for(var t=function(o,a){setTimeout(function(){if(Array.isArray(Od[e])){var l=Zp.get(e),c=Od[e][o];l instanceof SVGSVGElement&&c(null,dK(l)),l instanceof Error&&c(l),o===Od[e].length-1&&delete Od[e]}},0)},i=0,r=Od[e].length;i<r;i++)t(i)},Ihe=function(e,t,i){if(Zp.has(e)){var r=Zp.get(e);if(r===void 0){$W(e,i);return}if(r instanceof SVGSVGElement){i(null,dK(r));return}}Zp.set(e,void 0),$W(e,i),fK(e,t,function(s,o){var a;s?Zp.set(e,s):((a=o.responseXML)===null||a===void 0?void 0:a.documentElement)instanceof SVGSVGElement&&Zp.set(e,o.responseXML.documentElement),Ehe(e)})},Nhe=function(e,t,i){fK(e,t,function(r,s){var o;r?i(r):((o=s.responseXML)===null||o===void 0?void 0:o.documentElement)instanceof SVGSVGElement&&i(null,s.responseXML.documentElement)})},Mhe=0,Ahe=function(){return++Mhe},Ec=[],jW={},Rhe="http://www.w3.org/2000/svg",yT="http://www.w3.org/1999/xlink",UW=function(e,t,i,r,s,o,a){var l=e.getAttribute("data-src")||e.getAttribute("src");if(!l){a(new Error("Invalid data-src or src attribute"));return}if(Ec.indexOf(e)!==-1){Ec.splice(Ec.indexOf(e),1),e=null;return}Ec.push(e),e.setAttribute("src","");var c=r?Ihe:Nhe;c(l,s,function(h,u){if(!u){Ec.splice(Ec.indexOf(e),1),e=null,a(h);return}var d=e.getAttribute("id");d&&u.setAttribute("id",d);var g=e.getAttribute("title");g&&u.setAttribute("title",g);var p=e.getAttribute("width");p&&u.setAttribute("width",p);var b=e.getAttribute("height");b&&u.setAttribute("height",b);var _=Array.from(new Set(wT(wT(wT([],(u.getAttribute("class")||"").split(" "),!0),["injected-svg"],!1),(e.getAttribute("class")||"").split(" "),!0))).join(" ").trim();u.setAttribute("class",_);var w=e.getAttribute("style");w&&u.setAttribute("style",w),u.setAttribute("data-src",l);var y=[].filter.call(e.attributes,function(Y){return/^data-\w[\w-]*$/.test(Y.name)});if(Array.prototype.forEach.call(y,function(Y){Y.name&&Y.value&&u.setAttribute(Y.name,Y.value)}),i){var k={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],path:[],pattern:["fill","stroke"],radialGradient:["fill","stroke"]},L,T,N,D,O;Object.keys(k).forEach(function(Y){L=Y,N=k[Y],T=u.querySelectorAll(L+"[id]");for(var ae=function(Le,We){D=T[Le].id,O=D+"-"+Ahe();var Ie;Array.prototype.forEach.call(N,function(nn){Ie=u.querySelectorAll("["+nn+'*="'+D+'"]');for(var rn=0,ss=Ie.length;rn<ss;rn++){var Vn=Ie[rn].getAttribute(nn);Vn&&!Vn.match(new RegExp('url\\("?#'+D+'"?\\)'))||Ie[rn].setAttribute(nn,"url(#"+O+")")}});for(var Ze=u.querySelectorAll("[*|href]"),ct=[],ot=0,Ot=Ze.length;ot<Ot;ot++){var $t=Ze[ot].getAttributeNS(yT,"href");$t&&$t.toString()==="#"+T[Le].id&&ct.push(Ze[ot])}for(var yn=0,vi=ct.length;yn<vi;yn++)ct[yn].setAttributeNS(yT,"href","#"+O);T[Le].id=O},fe=0,J=T.length;fe<J;fe++)ae(fe)})}u.removeAttribute("xmlns:a");for(var B=u.querySelectorAll("script"),G=[],H,q,X=0,z=B.length;X<z;X++)q=B[X].getAttribute("type"),(!q||q==="application/ecmascript"||q==="application/javascript"||q==="text/javascript")&&(H=B[X].innerText||B[X].textContent,H&&G.push(H),u.removeChild(B[X]));if(G.length>0&&(t==="always"||t==="once"&&!jW[l])){for(var Q=0,te=G.length;Q<te;Q++)new Function(G[Q])(window);jW[l]=!0}var se=u.querySelectorAll("style");if(Array.prototype.forEach.call(se,function(Y){Y.textContent+=""}),u.setAttribute("xmlns",Rhe),u.setAttribute("xmlns:xlink",yT),o(u),!e.parentNode){Ec.splice(Ec.indexOf(e),1),e=null,a(new Error("Parent node is null"));return}e.parentNode.replaceChild(u,e),Ec.splice(Ec.indexOf(e),1),e=null,a(null,u)})},Phe=function(e,t){var i=t===void 0?{}:t,r=i.afterAll,s=r===void 0?function(){}:r,o=i.afterEach,a=o===void 0?function(){}:o,l=i.beforeEach,c=l===void 0?function(){}:l,h=i.cacheRequests,u=h===void 0?!0:h,d=i.evalScripts,g=d===void 0?"never":d,p=i.httpRequestWithCredentials,b=p===void 0?!1:p,_=i.renumerateIRIElements,w=_===void 0?!0:_;if(e&&"length"in e)for(var y=0,k=0,L=e.length;k<L;k++)UW(e[k],g,w,u,b,c,function(T,N){a(T,N),e&&"length"in e&&e.length===++y&&s(y)});else e?UW(e,g,w,u,b,c,function(T,N){a(T,N),s(1),e=null}):s(0)},CT={exports:{}},ST,qW;function Ohe(){if(qW)return ST;qW=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ST=n,ST}var xT,GW;function Bhe(){if(GW)return xT;GW=1;var n=Ohe();function e(){}function t(){}return t.resetWarningCache=e,xT=function(){function i(o,a,l,c,h,u){if(u!==n){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},xT}var KW;function Fhe(){return KW||(KW=1,CT.exports=Bhe()()),CT.exports}var cs=Fhe(),Whe=function(e){var t=e?.ownerDocument||document;return t.defaultView||window},zhe=function(e,t){for(var i in e)if(!(i in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1},Hhe=["afterInjection","beforeInjection","desc","evalScripts","fallback","httpRequestWithCredentials","loading","renumerateIRIElements","src","title","useRequestCache","wrapper"],d2="http://www.w3.org/2000/svg",YW="http://www.w3.org/1999/xlink",AM=function(n){function e(){for(var i,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=n.call.apply(n,[this].concat(s))||this,i.initialState={hasError:!1,isLoading:!0},i.state=i.initialState,i._isMounted=!1,i.reactWrapper=void 0,i.nonReactWrapper=void 0,i.refCallback=function(a){i.reactWrapper=a},i}Lhe(e,n);var t=e.prototype;return t.renderSVG=function(){var r=this;if(this.reactWrapper instanceof Whe(this.reactWrapper).Node){var s=this.props,o=s.desc,a=s.evalScripts,l=s.httpRequestWithCredentials,c=s.renumerateIRIElements,h=s.src,u=s.title,d=s.useRequestCache,g=this.props.onError,p=this.props.beforeInjection,b=this.props.afterInjection,_=this.props.wrapper,w,y;_==="svg"?(w=document.createElementNS(d2,_),w.setAttribute("xmlns",d2),w.setAttribute("xmlns:xlink",YW),y=document.createElementNS(d2,_)):(w=document.createElement(_),y=document.createElement(_)),w.appendChild(y),y.dataset.src=h,this.nonReactWrapper=this.reactWrapper.appendChild(w);var k=function(D){if(r.removeSVG(),!r._isMounted){g(D);return}r.setState(function(){return{hasError:!0,isLoading:!1}},function(){g(D)})},L=function(D,O){if(D){k(D);return}r._isMounted&&r.setState(function(){return{isLoading:!1}},function(){try{b(O)}catch(B){k(B)}})},T=function(D){if(D.setAttribute("role","img"),o){var O=D.querySelector(":scope > desc");O&&D.removeChild(O);var B=document.createElement("desc");B.innerHTML=o,D.prepend(B)}if(u){var G=D.querySelector(":scope > title");G&&D.removeChild(G);var H=document.createElement("title");H.innerHTML=u,D.prepend(H)}try{p(D)}catch(q){k(q)}};Phe(y,{afterEach:L,beforeEach:T,cacheRequests:d,evalScripts:a,httpRequestWithCredentials:l,renumerateIRIElements:c})}},t.removeSVG=function(){var r;(r=this.nonReactWrapper)!=null&&r.parentNode&&(this.nonReactWrapper.parentNode.removeChild(this.nonReactWrapper),this.nonReactWrapper=null)},t.componentDidMount=function(){this._isMounted=!0,this.renderSVG()},t.componentDidUpdate=function(r){var s=this;zhe(Cx({},r),this.props)&&this.setState(function(){return s.initialState},function(){s.removeSVG(),s.renderSVG()})},t.componentWillUnmount=function(){this._isMounted=!1,this.removeSVG()},t.render=function(){var r=this.props;r.afterInjection,r.beforeInjection,r.desc,r.evalScripts;var s=r.fallback;r.httpRequestWithCredentials;var o=r.loading;r.renumerateIRIElements,r.src,r.title,r.useRequestCache;var a=r.wrapper,l=khe(r,Hhe),c=a;return Pe.createElement(c,Cx({},l,{ref:this.refCallback},a==="svg"?{xmlns:d2,xmlnsXlink:YW}:{}),this.state.isLoading&&o&&Pe.createElement(o,null),this.state.hasError&&s&&Pe.createElement(s,null))},e}(Pe.Component);AM.defaultProps={afterInjection:function(){},beforeInjection:function(){},desc:"",evalScripts:"never",fallback:null,httpRequestWithCredentials:!1,loading:null,onError:function(){},renumerateIRIElements:!0,title:"",useRequestCache:!0,wrapper:"div"};AM.propTypes={afterInjection:cs.func,beforeInjection:cs.func,desc:cs.string,evalScripts:cs.oneOf(["always","once","never"]),fallback:cs.oneOfType([cs.func,cs.object,cs.string]),httpRequestWithCredentials:cs.bool,loading:cs.oneOfType([cs.func,cs.object,cs.string]),onError:cs.func,renumerateIRIElements:cs.bool,src:cs.string.isRequired,title:cs.string,useRequestCache:cs.bool,wrapper:cs.oneOf(["div","span","svg"])};const Vhe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='30'%20height='30'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xmlns:sketch='http://www.bohemiancoding.com/sketch/ns'%3e%3cpath%20d='M5%205%20h%2020%20M%205%2015%20h%2020%20M%205%2025%20h%2020'%20id='hamburger'%3e%3c/path%3e%3c/svg%3e";function $he(){const{setVisible:n}=Pe.useContext(by),e=()=>{n(t=>!t)};return S.jsxs("header",{children:[S.jsx("span",{className:"icon",onClick:e,children:S.jsx(AM,{src:Vhe})}),S.jsx("h1",{children:S.jsx(qL,{to:"/",children:"Informatik Skript"})})]})}const jhe=()=>S.jsx("footer",{children:"Informatik Gymnasium Muttenz"}),Uhe="modulepreload",qhe=function(n){return"/gym-inf/"+n},ZW={},fn=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let l=function(c){return Promise.all(c.map(h=>Promise.resolve(h).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");r=l(t.map(c=>{if(c=qhe(c),c in ZW)return;ZW[c]=!0;const h=c.endsWith(".css"),u=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=h?"stylesheet":Uhe,h||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),h)return new Promise((g,p)=>{d.addEventListener("load",g),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function ds({to:n,elem:e,children:t}){const{setVisible:i}=Pe.useContext(by);Pe.useEffect(()=>{},[]);const r=()=>{i(!1)};return S.jsx("li",{children:S.jsx(qL,{onClick:r,to:n,children:t})})}function Ghe(){const{fms:n,setFms:e}=Pe.useContext(by),t=()=>{e(!1)},i=()=>{e(!0)};return S.jsxs(S.Fragment,{children:[S.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-evenly"},children:[S.jsx("h2",{style:{cursor:"pointer"},className:n?"":"active-school",onClick:t,children:"Gym"}),S.jsx("h2",{style:{cursor:"pointer"},className:n?"active-school":"",onClick:i,children:"FMS"})]}),n?S.jsx(Khe,{}):S.jsx(Yhe,{})]})}function Khe(){return S.jsx(S.Fragment,{children:S.jsxs("div",{children:[S.jsx("h2",{children:"1. Klasse"}),S.jsxs("ol",{className:"nav",children:[S.jsxs("li",{children:["Obsidian",S.jsxs("ol",{children:[S.jsx(ds,{to:"obsidian",children:"Einführung"}),S.jsx(ds,{to:"obsidian-md",children:"Markdown in Obsidian"})]})]}),S.jsxs("li",{children:["Einführung",S.jsxs("ol",{children:[S.jsx(ds,{to:"fms/hardware",children:"Computer Hardware"}),S.jsx(ds,{to:"fms/binary",children:"Binärsystem"}),S.jsx(ds,{to:"fms/Hex",children:"Hexadezimalsystem"}),S.jsx(ds,{to:"information",children:"Daten und Informationen"}),S.jsx(ds,{to:"colors",children:"Farben"})]})]})]}),S.jsx("h2",{children:"2. Klasse"}),S.jsx("ol",{className:"nav",children:S.jsxs("li",{children:["Tabellenkalkulation",S.jsxs("ol",{children:[S.jsx(ds,{to:"fms/excel",children:"Einstieg in Excel"}),S.jsx(ds,{to:"fms/excel-spielplan",children:"Zusammenarbeit in Excel"})]})]})})]})})}function Yhe(){return S.jsx(S.Fragment,{children:S.jsxs("div",{children:[S.jsx("h2",{children:"Theorie"}),S.jsxs("ol",{className:"nav",children:[S.jsxs("li",{children:["Obsidian",S.jsxs("ol",{children:[S.jsx(ds,{to:"obsidian",children:"Obsidian"}),S.jsx(ds,{to:"obsidian-md",children:"Markdown in Obsidian"})]})]}),S.jsxs("li",{children:["Einführung",S.jsxs("ol",{children:[S.jsx(ds,{to:"fms/hardware",children:"Computer Hardware"}),S.jsx(ds,{to:"fms/binary",children:"Binärsystem"}),S.jsx(ds,{to:"fms/Hex",children:"Hexadezimalsystem"}),S.jsx(ds,{to:"information",children:"Daten und Informationen"}),S.jsx(ds,{to:"colors",children:"Farben"})]})]}),S.jsxs("li",{children:["Sprachen",S.jsxs("ol",{children:[S.jsx(ds,{to:"sprachen",children:"Sprachen"}),S.jsx(ds,{to:"grammar",children:"Grammatik"})]})]})]}),S.jsx("h2",{children:"Praktikum"}),S.jsx("ol",{className:"nav",children:S.jsx("li",{children:S.jsx("ol",{children:S.jsx(ds,{to:"praktikum/install",children:"Installation"})})})})]})})}function Zhe(){const{visible:n}=Pe.useContext(by);return S.jsx("aside",{className:n?"show sidenav":"sidenav",children:S.jsx(Ghe,{})})}function Xhe(){return S.jsxs(S.Fragment,{children:[S.jsxs(xhe,{children:[S.jsx($he,{}),S.jsx(Zhe,{}),S.jsx("main",{className:"content-grid",children:S.jsx(the,{})})]}),S.jsx(jhe,{})]})}function XW(n){const e={h2:"h2",p:"p",...n.components};return S.jsxs(S.Fragment,{children:[S.jsx(e.h2,{children:"Unterlagen zum Fach Informatik"}),`
`,S.jsx(e.p,{children:`Auf dieser Webseite finden Sie alle Unterlagen die Sie für das Fach Informatik
brauchen. Schauen Sie sich in den verschiedenen Unterabschnitten um, Sie finden
da zu allen Themen die wir im Unterricht behandeln viele Code-Beispiele, und
auch Erklärungen dazu.`}),`
`,S.jsx(e.p,{children:`Wenn Sie keine Navigationsleiste auf der Seite sehen, klicken Sie auf das
Hamburger-Menu. Wenn Sie auf den Titel klicken, werden Sie auf diese Seite
zurück gebracht.`}),`
`,S.jsx(e.h2,{children:"Gym und FMS"}),`
`,S.jsxs(e.p,{children:[`Sie finden alle Unterlagen zu den verschiedenen Schulen in der Seitenleiste,
Sie müssen nur ganz oben die richtige Schule auswählen und dann zum jeweiligen
Schuljahr gehen. Über das Schuljahr werden neue Seiten dazu kommen, und einige
können sich auch noch ändern. Falls Sie also den Inhalt einer Seite unbedingt
brauchen, müssen Sie diesen zu sich kopieren (am besten in `,S.jsx(qL,{to:"/obsidian",children:"Obsidian"}),")."]})]})}function Qhe(n={}){const{wrapper:e}=n.components||{};return e?S.jsx(e,{...n,children:S.jsx(XW,{...n})}):XW(n)}const Jhe="_container_fr3gu_1",eue="_colorinput_fr3gu_11",tue="_inputgroup_fr3gu_20",iue="_red_fr3gu_26",nue="_green_fr3gu_29",rue="_blue_fr3gu_32",sue="_huge_fr3gu_36",oue="_box_fr3gu_44",Aa={container:Jhe,colorinput:eue,inputgroup:tue,red:iue,green:nue,blue:rue,huge:sue,box:oue};function aue(){const[n,e]=Pe.useState("#000000"),[t,i]=Pe.useState("00"),[r,s]=Pe.useState("00"),[o,a]=Pe.useState("00");Pe.useEffect(()=>{e(`#${l(t)}${l(r)}${l(o)}`)},[t,r,o]);const l=d=>{let g=`${d}`;for(;g.length<2;)g=`0${g}`,console.log(g);return g},c=d=>{i(d.target.value)},h=d=>{s(d.target.value)},u=d=>{a(d.target.value)};return S.jsxs("div",{className:Aa.container,children:[S.jsx("div",{className:Aa.huge,children:"#"}),S.jsxs("div",{className:Aa.inputgroup,children:[S.jsx("label",{className:Aa.red,htmlFor:"red",children:"Rot"}),S.jsx("input",{className:Aa.colorinput,id:"red",maxLength:"2",type:"text",name:"red",value:t,onChange:c})]}),S.jsxs("div",{className:Aa.inputgroup,children:[S.jsx("label",{className:Aa.green,htmlFor:"green",children:"Grün"}),S.jsx("input",{className:Aa.colorinput,id:"green",maxLength:"2",type:"text",name:"green",value:r,onChange:h})]}),S.jsxs("div",{className:Aa.inputgroup,children:[S.jsx("label",{className:Aa.blue,htmlFor:"blue",children:"Blau"}),S.jsx("input",{className:Aa.colorinput,id:"blue",maxLength:"2",type:"text",name:"blue",value:o,onChange:u})]}),S.jsx("div",{className:Aa.huge,children:"="}),S.jsx("div",{className:Aa.box,style:{backgroundColor:n},children:" "})]})}function r_({hex:n}){return S.jsx("div",{style:{backgroundColor:n,height:"1.5em",width:"1.5em"}})}function jo({children:n,title:e="Beispiel",classes:t="",id:i=""}){return S.jsxs("div",{className:`full-width content-grid highlight ${t}`,children:[S.jsx("h3",{id:i,children:`${e}`}),n]})}function Ra(n,e=0){return n[n.length-(1+e)]}function lue(n){if(n.length===0)throw new Error("Invalid tail call");return[n.slice(0,n.length-1),n[n.length-1]]}function _r(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e||n.length!==e.length)return!1;for(let i=0,r=n.length;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function cue(n,e){const t=n.length-1;e<t&&(n[e]=n[t]),n.pop()}function hue(n,e,t){return uue(n.length,i=>t(n[i],e))}function uue(n,e){let t=0,i=n-1;for(;t<=i;){const r=(t+i)/2|0,s=e(r);if(s<0)t=r+1;else if(s>0)i=r-1;else return r}return-(t+1)}function*RM(n,e){let t,i;for(const r of n)i!==void 0&&e(i,r)?t.push(r):(t&&(yield t),t=[r]),i=r;t&&(yield t)}function gK(n,e){for(let t=0;t<=n.length;t++)e(t===0?void 0:n[t-1],t===n.length?void 0:n[t])}function due(n,e){for(let t=0;t<n.length;t++)e(t===0?void 0:n[t-1],n[t],t+1===n.length?void 0:n[t+1])}function PM(n){return n.filter(e=>!!e)}function QW(n){let e=0;for(let t=0;t<n.length;t++)n[t]&&(n[e]=n[t],e+=1);n.length=e}function fue(n){return!Array.isArray(n)||n.length===0}function GL(n){return Array.isArray(n)&&n.length>0}function wm(n,e=t=>t){const t=new Set;return n.filter(i=>{const r=e(i);return t.has(r)?!1:(t.add(r),!0)})}function OM(n,e){return n.length>0?n[0]:e}function lo(n,e){let t=typeof e=="number"?n:0;typeof e=="number"?t=n:(t=0,e=n);const i=[];if(t<=e)for(let r=t;r<e;r++)i.push(r);else for(let r=t;r>e;r--)i.push(r);return i}function KL(n,e,t){const i=n.slice(0,e),r=n.slice(e);return i.concat(t,r)}function kT(n,e){const t=n.indexOf(e);t>-1&&(n.splice(t,1),n.unshift(e))}function f2(n,e){const t=n.indexOf(e);t>-1&&(n.splice(t,1),n.push(e))}function AD(n,e){for(const t of e)n.push(t)}function gue(n,e,t){const i=mK(n,e),r=n.length,s=t.length;n.length=r+s;for(let o=r-1;o>=i;o--)n[o+s]=n[o];for(let o=0;o<s;o++)n[o+i]=t[o]}function JW(n,e,t,i){const r=mK(n,e);let s=n.splice(r,t);return s===void 0&&(s=[]),gue(n,r,i),s}function mK(n,e){return e<0?Math.max(e+n.length,0):Math.min(e,n.length)}var uw;(function(n){function e(s){return s<0}n.isLessThan=e;function t(s){return s<=0}n.isLessThanOrEqual=t;function i(s){return s>0}n.isGreaterThan=i;function r(s){return s===0}n.isNeitherLessOrGreaterThan=r,n.greaterThan=1,n.lessThan=-1,n.neitherLessOrGreaterThan=0})(uw||(uw={}));function _l(n,e){return(t,i)=>e(n(t),n(i))}function mue(...n){return(e,t)=>{for(const i of n){const r=i(e,t);if(!uw.isNeitherLessOrGreaterThan(r))return r}return uw.neitherLessOrGreaterThan}}const ef=(n,e)=>n-e,pue=(n,e)=>ef(n?1:0,e?1:0);function bue(n){return(e,t)=>-n(e,t)}class Ru{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const i=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,i}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const i=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,i}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}const S0=class S0{constructor(e){this.iterate=e}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new S0(t=>this.iterate(i=>e(i)?t(i):!0))}map(e){return new S0(t=>this.iterate(i=>t(e(i))))}findLast(e){let t;return this.iterate(i=>(e(i)&&(t=i),!0)),t}findLastMaxBy(e){let t,i=!0;return this.iterate(r=>((i||uw.isGreaterThan(e(r,t)))&&(i=!1,t=r),!0)),t}};S0.empty=new S0(e=>{});let Jg=S0;function Ca(n){return typeof n=="string"}function go(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&!(n instanceof RegExp)&&!(n instanceof Date)}function _ue(n){const e=Object.getPrototypeOf(Uint8Array);return typeof n=="object"&&n instanceof e}function J1(n){return typeof n=="number"&&!isNaN(n)}function ez(n){return!!n&&typeof n[Symbol.iterator]=="function"}function pK(n){return n===!0||n===!1}function Ua(n){return typeof n>"u"}function w1(n){return!pa(n)}function pa(n){return Ua(n)||n===null}function tf(n,e){if(!n)throw new Error("Unexpected type")}function bK(n){if(pa(n))throw new Error("Assertion Failed: argument is undefined or null");return n}function Sx(n){return typeof n=="function"}function vue(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)wue(n[i],e[i])}function wue(n,e){if(Ca(e)){if(typeof n!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(Sx(e)){try{if(n instanceof e)return}catch{}if(!pa(n)&&n.constructor===e||e.length===1&&e.call(void 0,n)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function Ed(n){if(!n||typeof n!="object"||n instanceof RegExp)return n;const e=Array.isArray(n)?[]:{};return Object.entries(n).forEach(([t,i])=>{e[t]=i&&typeof i=="object"?Ed(i):i}),e}function yue(n){if(!n||typeof n!="object")return n;const e=[n];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const i in t)if(_K.call(t,i)){const r=t[i];typeof r=="object"&&!Object.isFrozen(r)&&!_ue(r)&&e.push(r)}}return n}const _K=Object.prototype.hasOwnProperty;function vK(n,e){return RD(n,e,new Set)}function RD(n,e,t){if(pa(n))return n;const i=e(n);if(typeof i<"u")return i;if(Array.isArray(n)){const r=[];for(const s of n)r.push(RD(s,e,t));return r}if(go(n)){if(t.has(n))throw new Error("Cannot clone recursive data-structure");t.add(n);const r={};for(const s in n)_K.call(n,s)&&(r[s]=RD(n[s],e,t));return t.delete(n),r}return n}function Uo(n,e){if(n===e)return!0;if(n==null||e===null||e===void 0||typeof n!=typeof e||typeof n!="object"||Array.isArray(n)!==Array.isArray(e))return!1;let t,i;if(Array.isArray(n)){if(n.length!==e.length)return!1;for(t=0;t<n.length;t++)if(!Uo(n[t],e[t]))return!1}else{const r=[];for(i in n)r.push(i);r.sort();const s=[];for(i in e)s.push(i);if(s.sort(),!Uo(r,s))return!1;for(t=0;t<r.length;t++)if(!Uo(n[r[t]],e[r[t]]))return!1}return!0}function Cue(n){let e=[];for(;Object.prototype!==n;)e=e.concat(Object.getOwnPropertyNames(n)),n=Object.getPrototypeOf(n);return e}function PD(n){const e=[];for(const t of Cue(n))typeof n[t]=="function"&&e.push(t);return e}function Sue(n,e){const t=r=>function(){const s=Array.prototype.slice.call(arguments,0);return e(r,s)},i={};for(const r of n)i[r]=t(r);return i}function wK(){return globalThis._VSCODE_NLS_MESSAGES}function BM(){return globalThis._VSCODE_NLS_LANGUAGE}const xue=BM()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function tz(n,e){let t;return e.length===0?t=n:t=n.replace(/\{(\d+)\}/g,(i,r)=>{const s=r[0],o=e[s];let a=i;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),xue&&(t="［"+t.replace(/[aouei]/g,"$&$&")+"］"),t}function C(n,e,...t){return tz(typeof n=="number"?kue(n,e):e,t)}function kue(n,e){const t=wK()?.[n];if(typeof t!="string"){if(typeof e=="string")return e;throw new Error(`!!! NLS MISSING: ${n} !!!`)}return t}const t0="en";let xx=!1,kx=!1,ES=!1,yK=!1,FM=!1,WM=!1,CK=!1,g2,LT=t0,iz=t0,Lue,zh;const Cu=globalThis;let Ba;typeof Cu.vscode<"u"&&typeof Cu.vscode.process<"u"?Ba=Cu.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Ba=process);const Tue=typeof Ba?.versions?.electron=="string",Due=Tue&&Ba?.type==="renderer";if(typeof Ba=="object"){xx=Ba.platform==="win32",kx=Ba.platform==="darwin",ES=Ba.platform==="linux",ES&&Ba.env.SNAP&&Ba.env.SNAP_REVISION,Ba.env.CI||Ba.env.BUILD_ARTIFACTSTAGINGDIRECTORY,g2=t0,LT=t0;const n=Ba.env.VSCODE_NLS_CONFIG;if(n)try{const e=JSON.parse(n);g2=e.userLocale,iz=e.osLocale,LT=e.resolvedLanguage||t0,Lue=e.languagePack?.translationsConfigFile}catch{}yK=!0}else typeof navigator=="object"&&!Due?(zh=navigator.userAgent,xx=zh.indexOf("Windows")>=0,kx=zh.indexOf("Macintosh")>=0,WM=(zh.indexOf("Macintosh")>=0||zh.indexOf("iPad")>=0||zh.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,ES=zh.indexOf("Linux")>=0,CK=zh?.indexOf("Mobi")>=0,FM=!0,LT=BM()||t0,g2=navigator.language.toLowerCase(),iz=g2):console.error("Unable to resolve platform.");const Go=xx,hi=kx,wo=ES,Lx=yK,eb=FM,Eue=FM&&typeof Cu.importScripts=="function",Iue=Eue?Cu.origin:void 0,ym=WM,SK=CK,oh=zh,Nue=typeof Cu.postMessage=="function"&&!Cu.importScripts,xK=(()=>{if(Nue){const n=[];Cu.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,r=n.length;i<r;i++){const s=n[i];if(s.id===t.data.vscodeScheduleAsyncWork){n.splice(i,1),s.callback();return}}});let e=0;return t=>{const i=++e;n.push({id:i,callback:t}),Cu.postMessage({vscodeScheduleAsyncWork:i},"*")}}return n=>setTimeout(n)})(),gl=kx||WM?2:xx?1:3;let nz=!0,rz=!1;function Mue(){if(!rz){rz=!0;const n=new Uint8Array(2);n[0]=1,n[1]=2,nz=new Uint16Array(n.buffer)[0]===513}return nz}const kK=!!(oh&&oh.indexOf("Chrome")>=0),Aue=!!(oh&&oh.indexOf("Firefox")>=0),Rue=!!(!kK&&oh&&oh.indexOf("Safari")>=0),Pue=!!(oh&&oh.indexOf("Edg/")>=0),Oue=!!(oh&&oh.indexOf("Android")>=0),fs={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var wi;(function(n){function e(L){return L&&typeof L=="object"&&typeof L[Symbol.iterator]=="function"}n.is=e;const t=Object.freeze([]);function i(){return t}n.empty=i;function*r(L){yield L}n.single=r;function s(L){return e(L)?L:r(L)}n.wrap=s;function o(L){return L||t}n.from=o;function*a(L){for(let T=L.length-1;T>=0;T--)yield L[T]}n.reverse=a;function l(L){return!L||L[Symbol.iterator]().next().done===!0}n.isEmpty=l;function c(L){return L[Symbol.iterator]().next().value}n.first=c;function h(L,T){let N=0;for(const D of L)if(T(D,N++))return!0;return!1}n.some=h;function u(L,T){for(const N of L)if(T(N))return N}n.find=u;function*d(L,T){for(const N of L)T(N)&&(yield N)}n.filter=d;function*g(L,T){let N=0;for(const D of L)yield T(D,N++)}n.map=g;function*p(L,T){let N=0;for(const D of L)yield*T(D,N++)}n.flatMap=p;function*b(...L){for(const T of L)yield*T}n.concat=b;function _(L,T,N){let D=N;for(const O of L)D=T(D,O);return D}n.reduce=_;function*w(L,T,N=L.length){for(T<0&&(T+=L.length),N<0?N+=L.length:N>L.length&&(N=L.length);T<N;T++)yield L[T]}n.slice=w;function y(L,T=Number.POSITIVE_INFINITY){const N=[];if(T===0)return[N,L];const D=L[Symbol.iterator]();for(let O=0;O<T;O++){const B=D.next();if(B.done)return[N,n.empty()];N.push(B.value)}return[N,{[Symbol.iterator](){return D}}]}n.consume=y;async function k(L){const T=[];for await(const N of L)T.push(N);return Promise.resolve(T)}n.asyncToArray=k})(wi||(wi={}));var _u;let ur=(_u=class{constructor(e){this.element=e,this.next=_u.Undefined,this.prev=_u.Undefined}},_u.Undefined=new _u(void 0),_u);class Wo{constructor(){this._first=ur.Undefined,this._last=ur.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===ur.Undefined}clear(){let e=this._first;for(;e!==ur.Undefined;){const t=e.next;e.prev=ur.Undefined,e.next=ur.Undefined,e=t}this._first=ur.Undefined,this._last=ur.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new ur(e);if(this._first===ur.Undefined)this._first=i,this._last=i;else if(t){const s=this._last;this._last=i,i.prev=s,s.next=i}else{const s=this._first;this._first=i,i.next=s,s.prev=i}this._size+=1;let r=!1;return()=>{r||(r=!0,this._remove(i))}}shift(){if(this._first!==ur.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==ur.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==ur.Undefined&&e.next!==ur.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===ur.Undefined&&e.next===ur.Undefined?(this._first=ur.Undefined,this._last=ur.Undefined):e.next===ur.Undefined?(this._last=this._last.prev,this._last.next=ur.Undefined):e.prev===ur.Undefined&&(this._first=this._first.next,this._first.prev=ur.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==ur.Undefined;)yield e.element,e=e.next}}const LK="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function Bue(n=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of LK)n.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const zM=Bue();function HM(n){let e=zM;if(n&&n instanceof RegExp)if(n.global)e=n;else{let t="g";n.ignoreCase&&(t+="i"),n.multiline&&(t+="m"),n.unicode&&(t+="u"),e=new RegExp(n.source,t)}return e.lastIndex=0,e}const TK=new Wo;TK.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function dw(n,e,t,i,r){if(e=HM(e),r||(r=wi.first(TK)),t.length>r.maxLen){let c=n-r.maxLen/2;return c<0?c=0:i+=c,t=t.substring(c,n+r.maxLen/2),dw(n,e,t,i,r)}const s=Date.now(),o=n-1-i;let a=-1,l=null;for(let c=1;!(Date.now()-s>=r.timeBudget);c++){const h=o-r.windowSize*c;e.lastIndex=Math.max(0,h);const u=Fue(e,t,o,a);if(!u&&l||(l=u,h<=0))break;a=h}if(l){const c={word:l[0],startColumn:i+1+l.index,endColumn:i+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function Fue(n,e,t,i){let r;for(;r=n.exec(e);){const s=r.index||0;if(s<=t&&n.lastIndex>=t)return r;if(i>0&&s>i)return null}return null}const Rc=8;class DK{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class EK{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class tn{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return YL(e,t)}compute(e,t,i){return i}}class lv{constructor(e,t){this.newValue=e,this.didChange=t}}function YL(n,e){if(typeof n!="object"||typeof e!="object"||!n||!e)return new lv(e,n!==e);if(Array.isArray(n)||Array.isArray(e)){const i=Array.isArray(n)&&Array.isArray(e)&&_r(n,e);return new lv(e,!i)}let t=!1;for(const i in e)if(e.hasOwnProperty(i)){const r=YL(n[i],e[i]);r.didChange&&(n[i]=r.newValue,t=!0)}return new lv(n,t)}class _y{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return YL(e,t)}validate(e){return this.defaultValue}}class tb{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return YL(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}}function Ye(n,e){return typeof n>"u"?e:n==="false"?!1:!!n}class ii extends tb{constructor(e,t,i,r=void 0){typeof r<"u"&&(r.type="boolean",r.default=i),super(e,t,i,r)}validate(e){return Ye(e,this.defaultValue)}}function lg(n,e,t,i){if(typeof n>"u")return e;let r=parseInt(n,10);return isNaN(r)?e:(r=Math.max(t,r),r=Math.min(i,r),r|0)}class Bi extends tb{static clampedInt(e,t,i,r){return lg(e,t,i,r)}constructor(e,t,i,r,s,o=void 0){typeof o<"u"&&(o.type="integer",o.default=i,o.minimum=r,o.maximum=s),super(e,t,i,o),this.minimum=r,this.maximum=s}validate(e){return Bi.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}function Wue(n,e,t,i){if(typeof n>"u")return e;const r=va.float(n,e);return va.clamp(r,t,i)}class va extends tb{static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const i=parseFloat(e);return isNaN(i)?t:i}constructor(e,t,i,r,s){typeof s<"u"&&(s.type="number",s.default=i),super(e,t,i,s),this.validationFn=r}validate(e){return this.validationFn(va.float(e,this.defaultValue))}}class Ms extends tb{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,i,r=void 0){typeof r<"u"&&(r.type="string",r.default=i),super(e,t,i,r)}validate(e){return Ms.string(e,this.defaultValue)}}function _n(n,e,t,i){return typeof n!="string"?e:i&&n in i?i[n]:t.indexOf(n)===-1?e:n}class bn extends tb{constructor(e,t,i,r,s=void 0){typeof s<"u"&&(s.type="string",s.enum=r,s.default=i),super(e,t,i,s),this._allowedValues=r}validate(e){return _n(e,this.defaultValue,this._allowedValues)}}class m2 extends tn{constructor(e,t,i,r,s,o,a=void 0){typeof a<"u"&&(a.type="string",a.enum=s,a.default=r),super(e,t,i,a),this._allowedValues=s,this._convert=o}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function zue(n){switch(n){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class Hue extends tn{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[C("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),C("accessibilitySupport.on","Optimize for usage with a Screen Reader."),C("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:C("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}}class Vue extends tn{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:C("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:C("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Ye(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Ye(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function $ue(n){switch(n){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var Wr;(function(n){n[n.Line=1]="Line",n[n.Block=2]="Block",n[n.Underline=3]="Underline",n[n.LineThin=4]="LineThin",n[n.BlockOutline=5]="BlockOutline",n[n.UnderlineThin=6]="UnderlineThin"})(Wr||(Wr={}));function jue(n){switch(n){case"line":return Wr.Line;case"block":return Wr.Block;case"underline":return Wr.Underline;case"line-thin":return Wr.LineThin;case"block-outline":return Wr.BlockOutline;case"underline-thin":return Wr.UnderlineThin}}class Uue extends _y{constructor(){super(143)}compute(e,t,i){const r=["monaco-editor"];return t.get(39)&&r.push(t.get(39)),e.extraEditorClassName&&r.push(e.extraEditorClassName),t.get(74)==="default"?r.push("mouse-default"):t.get(74)==="copy"&&r.push("mouse-copy"),t.get(112)&&r.push("showUnused"),t.get(141)&&r.push("showDeprecated"),r.join(" ")}}class que extends ii{constructor(){super(37,"emptySelectionClipboard",!0,{description:C("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}}class Gue extends tn{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:C("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[C("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),C("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),C("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:C("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[C("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),C("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),C("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:C("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:C("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:hi},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:C("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:C("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Ye(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":_n(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":_n(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Ye(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Ye(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Ye(t.loop,this.defaultValue.loop)}}}const Xh=class Xh extends tn{constructor(){super(51,"fontLigatures",Xh.OFF,{anyOf:[{type:"boolean",description:C("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:C("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:C("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?Xh.OFF:e==="true"?Xh.ON:e:e?Xh.ON:Xh.OFF}};Xh.OFF='"liga" off, "calt" off',Xh.ON='"liga" on, "calt" on';let Cm=Xh;const Qh=class Qh extends tn{constructor(){super(54,"fontVariations",Qh.OFF,{anyOf:[{type:"boolean",description:C("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:C("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:C("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Qh.OFF:e==="true"?Qh.TRANSLATE:e:e?Qh.TRANSLATE:Qh.OFF}compute(e,t,i){return e.fontInfo.fontVariationSettings}};Qh.OFF="normal",Qh.TRANSLATE="translate";let fw=Qh;class Kue extends _y{constructor(){super(50)}compute(e,t,i){return e.fontInfo}}class Yue extends tb{constructor(){super(52,"fontSize",Sa.fontSize,{type:"number",minimum:6,maximum:100,default:Sa.fontSize,description:C("fontSize","Controls the font size in pixels.")})}validate(e){const t=va.float(e,this.defaultValue);return t===0?Sa.fontSize:va.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}}const zc=class zc extends tn{constructor(){super(53,"fontWeight",Sa.fontWeight,{anyOf:[{type:"number",minimum:zc.MINIMUM_VALUE,maximum:zc.MAXIMUM_VALUE,errorMessage:C("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:zc.SUGGESTION_VALUES}],default:Sa.fontWeight,description:C("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Bi.clampedInt(e,Sa.fontWeight,zc.MINIMUM_VALUE,zc.MAXIMUM_VALUE))}};zc.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],zc.MINIMUM_VALUE=1,zc.MAXIMUM_VALUE=1e3;let OD=zc;class Zue extends tn{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[C("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),C("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),C("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:C("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:C("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:C("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:C("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:C("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:C("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:C("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:C("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:C("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:C("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:C("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:_n(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??_n(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??_n(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??_n(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??_n(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??_n(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??_n(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:Ms.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:Ms.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:Ms.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:Ms.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:Ms.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:Ms.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}}class Xue extends tn{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:C("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:C("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:C("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:C("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:C("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ye(t.enabled,this.defaultValue.enabled),delay:Bi.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Ye(t.sticky,this.defaultValue.sticky),hidingDelay:Bi.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:Ye(t.above,this.defaultValue.above)}}}class P0 extends _y{constructor(){super(146)}compute(e,t,i){return P0.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,i=Math.floor(e.paddingTop/e.lineHeight);let r=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(r=Math.max(r,t-1));const s=(i+e.viewLineCount+r)/(e.pixelRatio*e.height),o=Math.floor(e.viewLineCount/s);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:r,desiredRatio:s,minimapLineCount:o}}static _computeMinimapLayout(e,t){const i=e.outerWidth,r=e.outerHeight,s=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(s*r),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:r};const o=t.stableMinimapLayoutInput,a=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.paddingTop===o.paddingTop&&e.paddingBottom===o.paddingBottom&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,h=e.scrollBeyondLastLine,u=e.minimap.renderCharacters;let d=s>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const g=e.minimap.maxColumn,p=e.minimap.size,b=e.minimap.side,_=e.verticalScrollbarWidth,w=e.viewLineCount,y=e.remainingWidth,k=e.isViewportWrapping,L=u?2:3;let T=Math.floor(s*r);const N=T/s;let D=!1,O=!1,B=L*d,G=d/s,H=1;if(p==="fill"||p==="fit"){const{typicalViewportLineCount:Y,extraLinesBeforeFirstLine:ae,extraLinesBeyondLastLine:fe,desiredRatio:J,minimapLineCount:ge}=P0.computeContainedMinimapLineCount({viewLineCount:w,scrollBeyondLastLine:h,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:r,lineHeight:l,pixelRatio:s});if(w/ge>1)D=!0,O=!0,d=1,B=1,G=d/s;else{let We=!1,Ie=d+1;if(p==="fit"){const Ze=Math.ceil((ae+w+fe)*B);k&&a&&y<=t.stableFitRemainingWidth?(We=!0,Ie=t.stableFitMaxMinimapScale):We=Ze>T}if(p==="fill"||We){D=!0;const Ze=d;B=Math.min(l*s,Math.max(1,Math.floor(1/J))),k&&a&&y<=t.stableFitRemainingWidth&&(Ie=t.stableFitMaxMinimapScale),d=Math.min(Ie,Math.max(1,Math.floor(B/L))),d>Ze&&(H=Math.min(2,d/Ze)),G=d/s/H,T=Math.ceil(Math.max(Y,ae+w+fe)*B),k?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=y,t.stableFitMaxMinimapScale=d):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const q=Math.floor(g*G),X=Math.min(q,Math.max(0,Math.floor((y-_-2)*G/(c+G)))+Rc);let z=Math.floor(s*X);const Q=z/s;z=Math.floor(z*H);const te=u?1:2,se=b==="left"?0:i-X-_;return{renderMinimap:te,minimapLeft:se,minimapWidth:X,minimapHeightIsEditorHeight:D,minimapIsSampling:O,minimapScale:d,minimapLineHeight:B,minimapCanvasInnerWidth:z,minimapCanvasInnerHeight:T,minimapCanvasOuterWidth:Q,minimapCanvasOuterHeight:N}}static computeLayout(e,t){const i=t.outerWidth|0,r=t.outerHeight|0,s=t.lineHeight|0,o=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,h=t.viewLineCount,u=e.get(138),d=u==="inherit"?e.get(137):u,g=d==="inherit"?e.get(133):d,p=e.get(136),b=t.isDominatedByLongLines,_=e.get(57),w=e.get(68).renderType!==0,y=e.get(69),k=e.get(106),L=e.get(84),T=e.get(73),N=e.get(104),D=N.verticalScrollbarSize,O=N.verticalHasArrows,B=N.arrowSize,G=N.horizontalScrollbarSize,H=e.get(43),q=e.get(111)!=="never";let X=e.get(66);H&&q&&(X+=16);let z=0;if(w){const ot=Math.max(o,y);z=Math.round(ot*l)}let Q=0;_&&(Q=s*t.glyphMarginDecorationLaneCount);let te=0,se=te+Q,Y=se+z,ae=Y+X;const fe=i-Q-z-X;let J=!1,ge=!1,Le=-1;d==="inherit"&&b?(J=!0,ge=!0):g==="on"||g==="bounded"?ge=!0:g==="wordWrapColumn"&&(Le=p);const We=P0._computeMinimapLayout({outerWidth:i,outerHeight:r,lineHeight:s,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:k,paddingTop:L.top,paddingBottom:L.bottom,minimap:T,verticalScrollbarWidth:D,viewLineCount:h,remainingWidth:fe,isViewportWrapping:ge},t.memory||new EK);We.renderMinimap!==0&&We.minimapLeft===0&&(te+=We.minimapWidth,se+=We.minimapWidth,Y+=We.minimapWidth,ae+=We.minimapWidth);const Ie=fe-We.minimapWidth,Ze=Math.max(1,Math.floor((Ie-D-2)/a)),ct=O?B:0;return ge&&(Le=Math.max(1,Ze),g==="bounded"&&(Le=Math.min(Le,p))),{width:i,height:r,glyphMarginLeft:te,glyphMarginWidth:Q,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:se,lineNumbersWidth:z,decorationsLeft:Y,decorationsWidth:X,contentLeft:ae,contentWidth:Ie,minimap:We,viewportColumn:Ze,isWordWrapMinified:J,isViewportWrapping:ge,wrappingColumn:Le,verticalScrollbarWidth:D,horizontalScrollbarHeight:G,overviewRuler:{top:ct,width:D,height:r-2*ct,right:0}}}}class Que extends tn{constructor(){super(140,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[C("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),C("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:C("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return _n(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(2)===2?"advanced":i}}var qh;(function(n){n.Off="off",n.OnCode="onCode",n.On="on"})(qh||(qh={}));class Jue extends tn{constructor(){const e={enabled:qh.OnCode};super(65,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[qh.Off,qh.OnCode,qh.On],default:e.enabled,enumDescriptions:[C("editor.lightbulb.enabled.off","Disable the code action menu."),C("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),C("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:C("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:_n(e.enabled,this.defaultValue.enabled,[qh.Off,qh.OnCode,qh.On])}}}class ede extends tn{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(116,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:C("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:C("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:C("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:C("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ye(t.enabled,this.defaultValue.enabled),maxLineCount:Bi.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:_n(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:Ye(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class tde extends tn{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(142,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:C("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[C("editor.inlayHints.on","Inlay hints are enabled"),C("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",hi?"Ctrl+Option":"Ctrl+Alt"),C("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",hi?"Ctrl+Option":"Ctrl+Alt"),C("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:C("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:C("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:C("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:_n(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Bi.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:Ms.string(t.fontFamily,this.defaultValue.fontFamily),padding:Ye(t.padding,this.defaultValue.padding)}}}class ide extends tn{constructor(){super(66,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Bi.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?Bi.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}}class nde extends va{constructor(){super(67,"lineHeight",Sa.lineHeight,e=>va.clamp(e,0,150),{markdownDescription:C("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,i){return e.fontInfo.lineHeight}}class rde extends tn{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(73,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:C("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:C("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[C("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),C("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),C("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:C("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:C("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:C("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:C("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:C("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:C("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:C("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:C("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:C("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:C("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ye(t.enabled,this.defaultValue.enabled),autohide:Ye(t.autohide,this.defaultValue.autohide),size:_n(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:_n(t.side,this.defaultValue.side,["right","left"]),showSlider:_n(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Ye(t.renderCharacters,this.defaultValue.renderCharacters),scale:Bi.clampedInt(t.scale,1,1,3),maxColumn:Bi.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:Ye(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:Ye(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:va.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:va.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}}function sde(n){return n==="ctrlCmd"?hi?"metaKey":"ctrlKey":"altKey"}class ode extends tn{constructor(){super(84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:C("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:C("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Bi.clampedInt(t.top,0,0,1e3),bottom:Bi.clampedInt(t.bottom,0,0,1e3)}}}class ade extends tn{constructor(){const e={enabled:!0,cycle:!0};super(86,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:C("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:C("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ye(t.enabled,this.defaultValue.enabled),cycle:Ye(t.cycle,this.defaultValue.cycle)}}}class lde extends _y{constructor(){super(144)}compute(e,t,i){return e.pixelRatio}}class cde extends tn{constructor(){super(88,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}}class hde extends tn{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[C("on","Quick suggestions show inside the suggest widget"),C("inline","Quick suggestions show as ghost text"),C("off","Quick suggestions are disabled")]}];super(90,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:C("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:C("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:C("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:C("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:r}=e,s=["on","inline","off"];let o,a,l;return typeof t=="boolean"?o=t?"on":"off":o=_n(t,this.defaultValue.other,s),typeof i=="boolean"?a=i?"on":"off":a=_n(i,this.defaultValue.comments,s),typeof r=="boolean"?l=r?"on":"off":l=_n(r,this.defaultValue.strings,s),{other:o,comments:a,strings:l}}}class ude extends tn{constructor(){super(68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[C("lineNumbers.off","Line numbers are not rendered."),C("lineNumbers.on","Line numbers are rendered as absolute number."),C("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),C("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:C("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}}function Tx(n){const e=n.get(99);return e==="editable"?n.get(92):e!=="on"}class dde extends tn{constructor(){const e=[],t={type:"number",description:C("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(103,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:C("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:C("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:Bi.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const r=i;t.push({column:Bi.clampedInt(r.column,0,0,1e4),color:r.color})}return t.sort((i,r)=>i.column-r.column),t}return this.defaultValue}}class fde extends tn{constructor(){super(93,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}}function sz(n,e){if(typeof n!="string")return e;switch(n){case"hidden":return 2;case"visible":return 3;default:return 1}}let gde=class extends tn{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(104,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[C("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),C("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),C("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:C("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[C("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),C("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),C("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:C("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:C("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:C("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:C("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:C("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=Bi.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),r=Bi.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Bi.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:sz(t.vertical,this.defaultValue.vertical),horizontal:sz(t.horizontal,this.defaultValue.horizontal),useShadows:Ye(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Ye(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Ye(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Ye(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Ye(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:Bi.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:r,verticalSliderSize:Bi.clampedInt(t.verticalSliderSize,r,0,1e3),scrollByPage:Ye(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:Ye(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}};const Hl="inUntrustedWorkspace",Xf={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class mde extends tn{constructor(){const e={nonBasicASCII:Hl,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Hl,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(126,"unicodeHighlight",e,{[Xf.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Hl],default:e.nonBasicASCII,description:C("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[Xf.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:C("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[Xf.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:C("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[Xf.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Hl],default:e.includeComments,description:C("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[Xf.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Hl],default:e.includeStrings,description:C("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[Xf.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:C("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[Xf.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:C("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(Uo(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(Uo(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const r=super.applyUpdate(e,t);return i?new lv(r.newValue,!0):r}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:O0(t.nonBasicASCII,Hl,[!0,!1,Hl]),invisibleCharacters:Ye(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Ye(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:O0(t.includeComments,Hl,[!0,!1,Hl]),includeStrings:O0(t.includeStrings,Hl,[!0,!1,Hl]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[r,s]of Object.entries(e))s===!0&&(i[r]=!0);return i}}class pde extends tn{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:C("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[C("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),C("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),C("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:C("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:C("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:C("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ye(t.enabled,this.defaultValue.enabled),mode:_n(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:_n(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:Ye(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:Ye(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:Ms.string(t.fontFamily,this.defaultValue.fontFamily)}}}class bde extends tn{constructor(){const e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(63,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:C("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[C("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),C("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),C("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:C("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:C("inlineEdit.fontFamily","Controls the font family of the inline edit.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ye(t.enabled,this.defaultValue.enabled),showToolbar:_n(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:Ms.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:Ye(t.keepOnBlur,this.defaultValue.keepOnBlur)}}}class _de extends tn{constructor(){const e={enabled:fs.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:fs.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:C("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:C("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ye(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:Ye(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class vde extends tn{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[C("editor.guides.bracketPairs.true","Enables bracket pair guides."),C("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),C("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:C("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[C("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),C("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),C("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:C("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:C("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:C("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[C("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),C("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),C("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:C("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:O0(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:O0(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Ye(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Ye(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:O0(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function O0(n,e,t){const i=t.indexOf(n);return i===-1?e:t[i]}class wde extends tn{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(119,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[C("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),C("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:C("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:C("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:C("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:C("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[C("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),C("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),C("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),C("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:C("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:C("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:C("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:C("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:C("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:C("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:C("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:C("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:_n(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Ye(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Ye(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Ye(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Ye(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:_n(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:Ye(t.showIcons,this.defaultValue.showIcons),showStatusBar:Ye(t.showStatusBar,this.defaultValue.showStatusBar),preview:Ye(t.preview,this.defaultValue.preview),previewMode:_n(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Ye(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Ye(t.showMethods,this.defaultValue.showMethods),showFunctions:Ye(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Ye(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Ye(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:Ye(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:Ye(t.showFields,this.defaultValue.showFields),showVariables:Ye(t.showVariables,this.defaultValue.showVariables),showClasses:Ye(t.showClasses,this.defaultValue.showClasses),showStructs:Ye(t.showStructs,this.defaultValue.showStructs),showInterfaces:Ye(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Ye(t.showModules,this.defaultValue.showModules),showProperties:Ye(t.showProperties,this.defaultValue.showProperties),showEvents:Ye(t.showEvents,this.defaultValue.showEvents),showOperators:Ye(t.showOperators,this.defaultValue.showOperators),showUnits:Ye(t.showUnits,this.defaultValue.showUnits),showValues:Ye(t.showValues,this.defaultValue.showValues),showConstants:Ye(t.showConstants,this.defaultValue.showConstants),showEnums:Ye(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Ye(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Ye(t.showKeywords,this.defaultValue.showKeywords),showWords:Ye(t.showWords,this.defaultValue.showWords),showColors:Ye(t.showColors,this.defaultValue.showColors),showFiles:Ye(t.showFiles,this.defaultValue.showFiles),showReferences:Ye(t.showReferences,this.defaultValue.showReferences),showFolders:Ye(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Ye(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Ye(t.showSnippets,this.defaultValue.showSnippets),showUsers:Ye(t.showUsers,this.defaultValue.showUsers),showIssues:Ye(t.showIssues,this.defaultValue.showIssues)}}}class yde extends tn{constructor(){super(114,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:C("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:C("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Ye(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:Ye(e.selectSubwords,this.defaultValue.selectSubwords)}}}class Cde extends tn{constructor(){const e=[];super(131,"wordSegmenterLocales",e,{anyOf:[{description:C("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:C("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="string")try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}}class Sde extends tn{constructor(){super(139,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[C("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),C("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),C("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),C("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:C("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return t.get(2)===2?0:i}}class xde extends _y{constructor(){super(147)}compute(e,t,i){const r=t.get(146);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:r.isWordWrapMinified,isViewportWrapping:r.isViewportWrapping,wrappingColumn:r.wrappingColumn}}}class kde extends tn{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:C("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:C("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[C("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),C("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ye(t.enabled,this.defaultValue.enabled),showDropSelector:_n(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class Lde extends tn{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(85,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:C("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:C("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[C("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),C("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ye(t.enabled,this.defaultValue.enabled),showPasteSelector:_n(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const Tde="Consolas, 'Courier New', monospace",Dde="Menlo, Monaco, 'Courier New', monospace",Ede="'Droid Sans Mono', 'monospace', monospace",Sa={fontFamily:hi?Dde:wo?Ede:Tde,fontWeight:"normal",fontSize:hi?12:14,lineHeight:0,letterSpacing:0},i0=[];function De(n){return i0[n.id]=n,n}const Vm={acceptSuggestionOnCommitCharacter:De(new ii(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:C("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:De(new bn(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",C("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:C("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:De(new Hue),accessibilityPageSize:De(new Bi(3,"accessibilityPageSize",10,1,1073741824,{description:C("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:De(new Ms(4,"ariaLabel",C("editorViewAccessibleLabel","Editor content"))),ariaRequired:De(new ii(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:De(new ii(8,"screenReaderAnnounceInlineSuggestion",!0,{description:C("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:De(new bn(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",C("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),C("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:C("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:De(new bn(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",C("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),C("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:C("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:De(new bn(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",C("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:C("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:De(new bn(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",C("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:C("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:De(new bn(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",C("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),C("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:C("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:De(new m2(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],zue,{enumDescriptions:[C("editor.autoIndent.none","The editor will not insert indentation automatically."),C("editor.autoIndent.keep","The editor will keep the current line's indentation."),C("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),C("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),C("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:C("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:De(new ii(13,"automaticLayout",!1)),autoSurround:De(new bn(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[C("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),C("editor.autoSurround.quotes","Surround with quotes but not brackets."),C("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:C("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:De(new _de),bracketPairGuides:De(new vde),stickyTabStops:De(new ii(117,"stickyTabStops",!1,{description:C("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:De(new ii(17,"codeLens",!0,{description:C("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:De(new Ms(18,"codeLensFontFamily","",{description:C("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:De(new Bi(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:C("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:De(new ii(20,"colorDecorators",!0,{description:C("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:De(new bn(149,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[C("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),C("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),C("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:C("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:De(new Bi(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:C("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:De(new ii(22,"columnSelection",!1,{description:C("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:De(new Vue),contextmenu:De(new ii(24,"contextmenu",!0)),copyWithSyntaxHighlighting:De(new ii(25,"copyWithSyntaxHighlighting",!0,{description:C("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:De(new m2(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],$ue,{description:C("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:De(new bn(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[C("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),C("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),C("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:C("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:De(new m2(28,"cursorStyle",Wr.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],jue,{description:C("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:De(new Bi(29,"cursorSurroundingLines",0,0,1073741824,{description:C("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:De(new bn(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[C("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),C("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:C("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:De(new Bi(31,"cursorWidth",0,0,1073741824,{markdownDescription:C("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:De(new ii(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:De(new ii(33,"disableMonospaceOptimizations",!1)),domReadOnly:De(new ii(34,"domReadOnly",!1)),dragAndDrop:De(new ii(35,"dragAndDrop",!0,{description:C("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:De(new que),dropIntoEditor:De(new kde),stickyScroll:De(new ede),experimentalWhitespaceRendering:De(new bn(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[C("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),C("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),C("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:C("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:De(new Ms(39,"extraEditorClassName","")),fastScrollSensitivity:De(new va(40,"fastScrollSensitivity",5,n=>n<=0?5:n,{markdownDescription:C("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:De(new Gue),fixedOverflowWidgets:De(new ii(42,"fixedOverflowWidgets",!1)),folding:De(new ii(43,"folding",!0,{description:C("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:De(new bn(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[C("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),C("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:C("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:De(new ii(45,"foldingHighlight",!0,{description:C("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:De(new ii(46,"foldingImportsByDefault",!1,{description:C("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:De(new Bi(47,"foldingMaximumRegions",5e3,10,65e3,{description:C("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:De(new ii(48,"unfoldOnClickAfterEndOfLine",!1,{description:C("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:De(new Ms(49,"fontFamily",Sa.fontFamily,{description:C("fontFamily","Controls the font family.")})),fontInfo:De(new Kue),fontLigatures2:De(new Cm),fontSize:De(new Yue),fontWeight:De(new OD),fontVariations:De(new fw),formatOnPaste:De(new ii(55,"formatOnPaste",!1,{description:C("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:De(new ii(56,"formatOnType",!1,{description:C("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:De(new ii(57,"glyphMargin",!0,{description:C("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:De(new Zue),hideCursorInOverviewRuler:De(new ii(59,"hideCursorInOverviewRuler",!1,{description:C("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:De(new Xue),inDiffEditor:De(new ii(61,"inDiffEditor",!1)),letterSpacing:De(new va(64,"letterSpacing",Sa.letterSpacing,n=>va.clamp(n,-5,20),{description:C("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:De(new Jue),lineDecorationsWidth:De(new ide),lineHeight:De(new nde),lineNumbers:De(new ude),lineNumbersMinChars:De(new Bi(69,"lineNumbersMinChars",5,1,300)),linkedEditing:De(new ii(70,"linkedEditing",!1,{description:C("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:De(new ii(71,"links",!0,{description:C("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:De(new bn(72,"matchBrackets","always",["always","near","never"],{description:C("matchBrackets","Highlight matching brackets.")})),minimap:De(new rde),mouseStyle:De(new bn(74,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:De(new va(75,"mouseWheelScrollSensitivity",1,n=>n===0?1:n,{markdownDescription:C("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:De(new ii(76,"mouseWheelZoom",!1,{markdownDescription:hi?C("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):C("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:De(new ii(77,"multiCursorMergeOverlapping",!0,{description:C("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:De(new m2(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],sde,{markdownEnumDescriptions:[C("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),C("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:C({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:De(new bn(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[C("multiCursorPaste.spread","Each cursor pastes a single line of the text."),C("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:C("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:De(new Bi(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:C("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:De(new bn(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[C("occurrencesHighlight.off","Does not highlight occurrences."),C("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),C("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:C("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:De(new ii(82,"overviewRulerBorder",!0,{description:C("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:De(new Bi(83,"overviewRulerLanes",3,0,3)),padding:De(new ode),pasteAs:De(new Lde),parameterHints:De(new ade),peekWidgetDefaultFocus:De(new bn(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[C("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),C("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:C("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:De(new cde),definitionLinkOpensInPeek:De(new ii(89,"definitionLinkOpensInPeek",!1,{description:C("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:De(new hde),quickSuggestionsDelay:De(new Bi(91,"quickSuggestionsDelay",10,0,1073741824,{description:C("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:De(new ii(92,"readOnly",!1)),readOnlyMessage:De(new fde),renameOnType:De(new ii(94,"renameOnType",!1,{description:C("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:C("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:De(new ii(95,"renderControlCharacters",!0,{description:C("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:De(new bn(96,"renderFinalNewline",wo?"dimmed":"on",["off","on","dimmed"],{description:C("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:De(new bn(97,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",C("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:C("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:De(new ii(98,"renderLineHighlightOnlyWhenFocus",!1,{description:C("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:De(new bn(99,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:De(new bn(100,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",C("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),C("renderWhitespace.selection","Render whitespace characters only on selected text."),C("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:C("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:De(new Bi(101,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:De(new ii(102,"roundedSelection",!0,{description:C("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:De(new dde),scrollbar:De(new gde),scrollBeyondLastColumn:De(new Bi(105,"scrollBeyondLastColumn",4,0,1073741824,{description:C("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:De(new ii(106,"scrollBeyondLastLine",!0,{description:C("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:De(new ii(107,"scrollPredominantAxis",!0,{description:C("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:De(new ii(108,"selectionClipboard",!0,{description:C("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:wo})),selectionHighlight:De(new ii(109,"selectionHighlight",!0,{description:C("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:De(new ii(110,"selectOnLineNumbers",!0)),showFoldingControls:De(new bn(111,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[C("showFoldingControls.always","Always show the folding controls."),C("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),C("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:C("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:De(new ii(112,"showUnused",!0,{description:C("showUnused","Controls fading out of unused code.")})),showDeprecated:De(new ii(141,"showDeprecated",!0,{description:C("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:De(new tde),snippetSuggestions:De(new bn(113,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[C("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),C("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),C("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),C("snippetSuggestions.none","Do not show snippet suggestions.")],description:C("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:De(new yde),smoothScrolling:De(new ii(115,"smoothScrolling",!1,{description:C("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:De(new Bi(118,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:De(new wde),inlineSuggest:De(new pde),inlineEdit:De(new bde),inlineCompletionsAccessibilityVerbose:De(new ii(150,"inlineCompletionsAccessibilityVerbose",!1,{description:C("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:De(new Bi(120,"suggestFontSize",0,0,1e3,{markdownDescription:C("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:De(new Bi(121,"suggestLineHeight",0,0,1e3,{markdownDescription:C("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:De(new ii(122,"suggestOnTriggerCharacters",!0,{description:C("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:De(new bn(123,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[C("suggestSelection.first","Always select the first suggestion."),C("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),C("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:C("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:De(new bn(124,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[C("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),C("tabCompletion.off","Disable tab completions."),C("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:C("tabCompletion","Enables tab completions.")})),tabIndex:De(new Bi(125,"tabIndex",0,-1,1073741824)),unicodeHighlight:De(new mde),unusualLineTerminators:De(new bn(127,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[C("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),C("unusualLineTerminators.off","Unusual line terminators are ignored."),C("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:C("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:De(new ii(128,"useShadowDOM",!0)),useTabStops:De(new ii(129,"useTabStops",!0,{description:C("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:De(new bn(130,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[C("wordBreak.normal","Use the default line break rule."),C("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:C("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:De(new Cde),wordSeparators:De(new Ms(132,"wordSeparators",LK,{description:C("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:De(new bn(133,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[C("wordWrap.off","Lines will never wrap."),C("wordWrap.on","Lines will wrap at the viewport width."),C({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),C({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:C({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:De(new Ms(134,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:De(new Ms(135,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:De(new Bi(136,"wordWrapColumn",80,1,1073741824,{markdownDescription:C({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:De(new bn(137,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:De(new bn(138,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:De(new Uue),defaultColorDecorators:De(new ii(148,"defaultColorDecorators",!1,{markdownDescription:C("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:De(new lde),tabFocusMode:De(new ii(145,"tabFocusMode",!1,{markdownDescription:C("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:De(new P0),wrappingInfo:De(new xde),wrappingIndent:De(new Sde),wrappingStrategy:De(new Que)};class Ide{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?y1.isErrorNoTelemetry(e)?new y1(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const IK=new Ide;function Wi(n){vy(n)||IK.onUnexpectedError(n)}function VM(n){vy(n)||IK.onUnexpectedExternalError(n)}function oz(n){if(n instanceof Error){const{name:e,message:t}=n,i=n.stacktrace||n.stack;return{$isError:!0,name:e,message:t,stack:i,noTelemetry:y1.isErrorNoTelemetry(n)}}return n}const Dx="Canceled";function vy(n){return n instanceof wy?!0:n instanceof Error&&n.name===Dx&&n.message===Dx}class wy extends Error{constructor(){super(Dx),this.name=this.message}}function Nde(){const n=new Error(Dx);return n.name=n.message,n}function ZL(n){return n?new Error(`Illegal argument: ${n}`):new Error("Illegal argument")}function $M(n){return n?new Error(`Illegal state: ${n}`):new Error("Illegal state")}class Mde extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class y1 extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof y1)return e;const t=new y1;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}}class Ti extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,Ti.prototype)}}function C1(n,e){const t=this;let i=!1,r;return function(){return i||(i=!0,r=n.apply(t,arguments)),r}}function NK(n){return typeof n=="object"&&n!==null&&typeof n.dispose=="function"&&n.dispose.length===0}function is(n){if(wi.is(n)){const e=[];for(const t of n)if(t)try{t.dispose()}catch(i){e.push(i)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(n)?[]:n}else if(n)return n.dispose(),n}function ih(...n){return Mt(()=>is(n))}function Mt(n){return{dispose:C1(()=>{n()})}}const X4=class X4{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{is(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?X4.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}deleteAndLeak(e){e&&this._toDispose.has(e)&&this._toDispose.delete(e)}};X4.DISABLE_DISPOSED_WARNING=!1;let rt=X4;const FO=class FO{constructor(){this._store=new rt,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};FO.None=Object.freeze({dispose(){}});let xe=FO;class Pu{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}}class Ade{constructor(e){this.object=e}dispose(){}}class jM{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{is(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t,i=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||this._store.get(e)?.dispose(),this._store.set(e,t)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}const Rde=globalThis.performance&&typeof globalThis.performance.now=="function";class $m{static create(e){return new $m(e)}constructor(e){this._now=Rde&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}var Oe;(function(n){n.None=()=>xe.None;function e(X,z){return d(X,()=>{},0,void 0,!0,void 0,z)}n.defer=e;function t(X){return(z,Q=null,te)=>{let se=!1,Y;return Y=X(ae=>{if(!se)return Y?Y.dispose():se=!0,z.call(Q,ae)},null,te),se&&Y.dispose(),Y}}n.once=t;function i(X,z){return n.once(n.filter(X,z))}n.onceIf=i;function r(X,z,Q){return h((te,se=null,Y)=>X(ae=>te.call(se,z(ae)),null,Y),Q)}n.map=r;function s(X,z,Q){return h((te,se=null,Y)=>X(ae=>{z(ae),te.call(se,ae)},null,Y),Q)}n.forEach=s;function o(X,z,Q){return h((te,se=null,Y)=>X(ae=>z(ae)&&te.call(se,ae),null,Y),Q)}n.filter=o;function a(X){return X}n.signal=a;function l(...X){return(z,Q=null,te)=>{const se=ih(...X.map(Y=>Y(ae=>z.call(Q,ae))));return u(se,te)}}n.any=l;function c(X,z,Q,te){let se=Q;return r(X,Y=>(se=z(se,Y),se),te)}n.reduce=c;function h(X,z){let Q;const te={onWillAddFirstListener(){Q=X(se.fire,se)},onDidRemoveLastListener(){Q?.dispose()}},se=new de(te);return z?.add(se),se.event}function u(X,z){return z instanceof Array?z.push(X):z&&z.add(X),X}function d(X,z,Q=100,te=!1,se=!1,Y,ae){let fe,J,ge,Le=0,We;const Ie={leakWarningThreshold:Y,onWillAddFirstListener(){fe=X(ct=>{Le++,J=z(J,ct),te&&!ge&&(Ze.fire(J),J=void 0),We=()=>{const ot=J;J=void 0,ge=void 0,(!te||Le>1)&&Ze.fire(ot),Le=0},typeof Q=="number"?(clearTimeout(ge),ge=setTimeout(We,Q)):ge===void 0&&(ge=0,queueMicrotask(We))})},onWillRemoveListener(){se&&Le>0&&We?.()},onDidRemoveLastListener(){We=void 0,fe.dispose()}},Ze=new de(Ie);return ae?.add(Ze),Ze.event}n.debounce=d;function g(X,z=0,Q){return n.debounce(X,(te,se)=>te?(te.push(se),te):[se],z,void 0,!0,void 0,Q)}n.accumulate=g;function p(X,z=(te,se)=>te===se,Q){let te=!0,se;return o(X,Y=>{const ae=te||!z(Y,se);return te=!1,se=Y,ae},Q)}n.latch=p;function b(X,z,Q){return[n.filter(X,z,Q),n.filter(X,te=>!z(te),Q)]}n.split=b;function _(X,z=!1,Q=[],te){let se=Q.slice(),Y=X(J=>{se?se.push(J):fe.fire(J)});te&&te.add(Y);const ae=()=>{se?.forEach(J=>fe.fire(J)),se=null},fe=new de({onWillAddFirstListener(){Y||(Y=X(J=>fe.fire(J)),te&&te.add(Y))},onDidAddFirstListener(){se&&(z?setTimeout(ae):ae())},onDidRemoveLastListener(){Y&&Y.dispose(),Y=null}});return te&&te.add(fe),fe.event}n.buffer=_;function w(X,z){return(te,se,Y)=>{const ae=z(new k);return X(function(fe){const J=ae.evaluate(fe);J!==y&&te.call(se,J)},void 0,Y)}}n.chain=w;const y=Symbol("HaltChainable");class k{constructor(){this.steps=[]}map(z){return this.steps.push(z),this}forEach(z){return this.steps.push(Q=>(z(Q),Q)),this}filter(z){return this.steps.push(Q=>z(Q)?Q:y),this}reduce(z,Q){let te=Q;return this.steps.push(se=>(te=z(te,se),te)),this}latch(z=(Q,te)=>Q===te){let Q=!0,te;return this.steps.push(se=>{const Y=Q||!z(se,te);return Q=!1,te=se,Y?se:y}),this}evaluate(z){for(const Q of this.steps)if(z=Q(z),z===y)break;return z}}function L(X,z,Q=te=>te){const te=(...fe)=>ae.fire(Q(...fe)),se=()=>X.on(z,te),Y=()=>X.removeListener(z,te),ae=new de({onWillAddFirstListener:se,onDidRemoveLastListener:Y});return ae.event}n.fromNodeEventEmitter=L;function T(X,z,Q=te=>te){const te=(...fe)=>ae.fire(Q(...fe)),se=()=>X.addEventListener(z,te),Y=()=>X.removeEventListener(z,te),ae=new de({onWillAddFirstListener:se,onDidRemoveLastListener:Y});return ae.event}n.fromDOMEventEmitter=T;function N(X){return new Promise(z=>t(X)(z))}n.toPromise=N;function D(X){const z=new de;return X.then(Q=>{z.fire(Q)},()=>{z.fire(void 0)}).finally(()=>{z.dispose()}),z.event}n.fromPromise=D;function O(X,z){return X(Q=>z.fire(Q))}n.forward=O;function B(X,z,Q){return z(Q),X(te=>z(te))}n.runAndSubscribe=B;class G{constructor(z,Q){this._observable=z,this._counter=0,this._hasChanged=!1;const te={onWillAddFirstListener:()=>{z.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{z.removeObserver(this)}};this.emitter=new de(te),Q&&Q.add(this.emitter)}beginUpdate(z){this._counter++}handlePossibleChange(z){}handleChange(z,Q){this._hasChanged=!0}endUpdate(z){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function H(X,z){return new G(X,z).emitter.event}n.fromObservable=H;function q(X){return(z,Q,te)=>{let se=0,Y=!1;const ae={beginUpdate(){se++},endUpdate(){se--,se===0&&(X.reportChanges(),Y&&(Y=!1,z.call(Q)))},handlePossibleChange(){},handleChange(){Y=!0}};X.addObserver(ae),X.reportChanges();const fe={dispose(){X.removeObserver(ae)}};return te instanceof rt?te.add(fe):Array.isArray(te)&&te.push(fe),fe}}n.fromObservableLight=q})(Oe||(Oe={}));const x0=class x0{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${x0._idPool++}`,x0.all.add(this)}start(e){this._stopWatch=new $m,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};x0.all=new Set,x0._idPool=0;let BD=x0,Pde=-1;const Q4=class Q4{constructor(e,t,i=(Q4._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=t,this.name=i,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,t){const i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);const r=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,r+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=i*.5;const[s,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(s);const l=new Ode(a,s);this._errorHandler(l)}return()=>{const s=this._stacks.get(e.value)||0;this._stacks.set(e.value,s-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(const[i,r]of this._stacks)(!e||t<r)&&(e=[i,r],t=r);return e}};Q4._idPool=1;let FD=Q4;class UM{static create(){const e=new Error;return new UM(e.stack??"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class Ode extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}}class Bde extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}}class TT{constructor(e){this.value=e}}const Fde=2;let de=class{constructor(e){this._size=0,this._options=e,this._leakageMon=this._options?.leakWarningThreshold?new FD(e?.onListenerError??Wi,this._options?.leakWarningThreshold??Pde):void 0,this._perfMon=this._options?._profName?new BD(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(e,t,i)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){const a=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(a);const l=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],c=new Bde(`${a}. HINT: Stack shows most frequent listener (${l[1]}-times)`,l[0]);return(this._options?.onListenerError||Wi)(c),xe.None}if(this._disposed)return xe.None;t&&(e=e.bind(t));const r=new TT(e);let s;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(r.stack=UM.create(),s=this._leakageMon.check(r.stack,this._size+1)),this._listeners?this._listeners instanceof TT?(this._deliveryQueue??=new MK,this._listeners=[this._listeners,r]):this._listeners.push(r):(this._options?.onWillAddFirstListener?.(this),this._listeners=r,this._options?.onDidAddFirstListener?.(this)),this._size++;const o=Mt(()=>{s?.(),this._removeListener(r)});return i instanceof rt?i.add(o):Array.isArray(i)&&i.push(o),o},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}const t=this._listeners,i=t.indexOf(e);if(i===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[i]=void 0;const r=this._deliveryQueue.current===this;if(this._size*Fde<=t.length){let s=0;for(let o=0;o<t.length;o++)t[o]?t[s++]=t[o]:r&&(this._deliveryQueue.end--,s<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=s}}_deliver(e,t){if(!e)return;const i=this._options?.onListenerError||Wi;if(!i){e.value(t);return}try{e.value(t)}catch(r){i(r)}}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof TT)this._deliver(this._listeners,e);else{const t=this._deliveryQueue;t.enqueue(this,e,this._listeners.length),this._deliverQueue(t)}this._perfMon?.stop()}hasListeners(){return this._size>0}};const Wde=()=>new MK;class MK{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class gw extends de{constructor(e){super(e),this._isPaused=0,this._eventQueue=new Wo,this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class AK extends gw{constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class zde extends de{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e?.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}}class Hde{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new de({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),Mt(C1(()=>{this.hasListeners&&this.unhook(t);const r=this.events.indexOf(t);this.events.splice(r,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){e.listener?.dispose(),e.listener=null}dispose(){this.emitter.dispose();for(const e of this.events)e.listener?.dispose();this.events=[]}}class yy{constructor(){this.data=[]}wrapEvent(e,t,i){return(r,s,o)=>e(a=>{const l=this.data[this.data.length-1];if(!t){l?l.buffers.push(()=>r.call(s,a)):r.call(s,a);return}const c=l;if(!c){r.call(s,t(i,a));return}c.items??=[],c.items.push(a),c.buffers.length===0&&l.buffers.push(()=>{c.reducedResult??=i?c.items.reduce(t,i):c.items.reduce(t),r.call(s,c.reducedResult)})},void 0,o)}bufferEvents(e){const t={buffers:new Array};this.data.push(t);const i=e();return this.data.pop(),t.buffers.forEach(r=>r()),i}}class az{constructor(){this.listening=!1,this.inputEvent=Oe.None,this.inputEventListener=xe.None,this.emitter=new de({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const RK=Object.freeze(function(n,e){const t=setTimeout(n.bind(e),0);return{dispose(){clearTimeout(t)}}});var yl;(function(n){function e(t){return t===n.None||t===n.Cancelled||t instanceof IS?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}n.isCancellationToken=e,n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Oe.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:RK})})(yl||(yl={}));class IS{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?RK:(this._emitter||(this._emitter=new de),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let ib=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new IS),this._token}cancel(){this._token?this._token instanceof IS&&this._token.cancel():this._token=yl.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof IS&&this._token.dispose():this._token=yl.None}};class qM{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const NS=new qM,WD=new qM,zD=new qM,PK=new Array(230),Vde=Object.create(null),$de=Object.create(null),GM=[];for(let n=0;n<=193;n++)GM[n]=-1;(function(){const n="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",n,n],[1,1,"Hyper",0,n,0,n,n,n],[1,2,"Super",0,n,0,n,n,n],[1,3,"Fn",0,n,0,n,n,n],[1,4,"FnLock",0,n,0,n,n,n],[1,5,"Suspend",0,n,0,n,n,n],[1,6,"Resume",0,n,0,n,n,n],[1,7,"Turbo",0,n,0,n,n,n],[1,8,"Sleep",0,n,0,"VK_SLEEP",n,n],[1,9,"WakeUp",0,n,0,n,n,n],[0,10,"KeyA",31,"A",65,"VK_A",n,n],[0,11,"KeyB",32,"B",66,"VK_B",n,n],[0,12,"KeyC",33,"C",67,"VK_C",n,n],[0,13,"KeyD",34,"D",68,"VK_D",n,n],[0,14,"KeyE",35,"E",69,"VK_E",n,n],[0,15,"KeyF",36,"F",70,"VK_F",n,n],[0,16,"KeyG",37,"G",71,"VK_G",n,n],[0,17,"KeyH",38,"H",72,"VK_H",n,n],[0,18,"KeyI",39,"I",73,"VK_I",n,n],[0,19,"KeyJ",40,"J",74,"VK_J",n,n],[0,20,"KeyK",41,"K",75,"VK_K",n,n],[0,21,"KeyL",42,"L",76,"VK_L",n,n],[0,22,"KeyM",43,"M",77,"VK_M",n,n],[0,23,"KeyN",44,"N",78,"VK_N",n,n],[0,24,"KeyO",45,"O",79,"VK_O",n,n],[0,25,"KeyP",46,"P",80,"VK_P",n,n],[0,26,"KeyQ",47,"Q",81,"VK_Q",n,n],[0,27,"KeyR",48,"R",82,"VK_R",n,n],[0,28,"KeyS",49,"S",83,"VK_S",n,n],[0,29,"KeyT",50,"T",84,"VK_T",n,n],[0,30,"KeyU",51,"U",85,"VK_U",n,n],[0,31,"KeyV",52,"V",86,"VK_V",n,n],[0,32,"KeyW",53,"W",87,"VK_W",n,n],[0,33,"KeyX",54,"X",88,"VK_X",n,n],[0,34,"KeyY",55,"Y",89,"VK_Y",n,n],[0,35,"KeyZ",56,"Z",90,"VK_Z",n,n],[0,36,"Digit1",22,"1",49,"VK_1",n,n],[0,37,"Digit2",23,"2",50,"VK_2",n,n],[0,38,"Digit3",24,"3",51,"VK_3",n,n],[0,39,"Digit4",25,"4",52,"VK_4",n,n],[0,40,"Digit5",26,"5",53,"VK_5",n,n],[0,41,"Digit6",27,"6",54,"VK_6",n,n],[0,42,"Digit7",28,"7",55,"VK_7",n,n],[0,43,"Digit8",29,"8",56,"VK_8",n,n],[0,44,"Digit9",30,"9",57,"VK_9",n,n],[0,45,"Digit0",21,"0",48,"VK_0",n,n],[1,46,"Enter",3,"Enter",13,"VK_RETURN",n,n],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",n,n],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",n,n],[1,49,"Tab",2,"Tab",9,"VK_TAB",n,n],[1,50,"Space",10,"Space",32,"VK_SPACE",n,n],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,n,0,n,n,n],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",n,n],[1,64,"F1",59,"F1",112,"VK_F1",n,n],[1,65,"F2",60,"F2",113,"VK_F2",n,n],[1,66,"F3",61,"F3",114,"VK_F3",n,n],[1,67,"F4",62,"F4",115,"VK_F4",n,n],[1,68,"F5",63,"F5",116,"VK_F5",n,n],[1,69,"F6",64,"F6",117,"VK_F6",n,n],[1,70,"F7",65,"F7",118,"VK_F7",n,n],[1,71,"F8",66,"F8",119,"VK_F8",n,n],[1,72,"F9",67,"F9",120,"VK_F9",n,n],[1,73,"F10",68,"F10",121,"VK_F10",n,n],[1,74,"F11",69,"F11",122,"VK_F11",n,n],[1,75,"F12",70,"F12",123,"VK_F12",n,n],[1,76,"PrintScreen",0,n,0,n,n,n],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",n,n],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",n,n],[1,79,"Insert",19,"Insert",45,"VK_INSERT",n,n],[1,80,"Home",14,"Home",36,"VK_HOME",n,n],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",n,n],[1,82,"Delete",20,"Delete",46,"VK_DELETE",n,n],[1,83,"End",13,"End",35,"VK_END",n,n],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",n,n],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",n],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",n],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",n],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",n],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",n,n],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",n,n],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",n,n],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",n,n],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",n,n],[1,94,"NumpadEnter",3,n,0,n,n,n],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",n,n],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",n,n],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",n,n],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",n,n],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",n,n],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",n,n],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",n,n],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",n,n],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",n,n],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",n,n],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",n,n],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",n,n],[1,107,"ContextMenu",58,"ContextMenu",93,n,n,n],[1,108,"Power",0,n,0,n,n,n],[1,109,"NumpadEqual",0,n,0,n,n,n],[1,110,"F13",71,"F13",124,"VK_F13",n,n],[1,111,"F14",72,"F14",125,"VK_F14",n,n],[1,112,"F15",73,"F15",126,"VK_F15",n,n],[1,113,"F16",74,"F16",127,"VK_F16",n,n],[1,114,"F17",75,"F17",128,"VK_F17",n,n],[1,115,"F18",76,"F18",129,"VK_F18",n,n],[1,116,"F19",77,"F19",130,"VK_F19",n,n],[1,117,"F20",78,"F20",131,"VK_F20",n,n],[1,118,"F21",79,"F21",132,"VK_F21",n,n],[1,119,"F22",80,"F22",133,"VK_F22",n,n],[1,120,"F23",81,"F23",134,"VK_F23",n,n],[1,121,"F24",82,"F24",135,"VK_F24",n,n],[1,122,"Open",0,n,0,n,n,n],[1,123,"Help",0,n,0,n,n,n],[1,124,"Select",0,n,0,n,n,n],[1,125,"Again",0,n,0,n,n,n],[1,126,"Undo",0,n,0,n,n,n],[1,127,"Cut",0,n,0,n,n,n],[1,128,"Copy",0,n,0,n,n,n],[1,129,"Paste",0,n,0,n,n,n],[1,130,"Find",0,n,0,n,n,n],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",n,n],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",n,n],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",n,n],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",n,n],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",n,n],[1,136,"KanaMode",0,n,0,n,n,n],[0,137,"IntlYen",0,n,0,n,n,n],[1,138,"Convert",0,n,0,n,n,n],[1,139,"NonConvert",0,n,0,n,n,n],[1,140,"Lang1",0,n,0,n,n,n],[1,141,"Lang2",0,n,0,n,n,n],[1,142,"Lang3",0,n,0,n,n,n],[1,143,"Lang4",0,n,0,n,n,n],[1,144,"Lang5",0,n,0,n,n,n],[1,145,"Abort",0,n,0,n,n,n],[1,146,"Props",0,n,0,n,n,n],[1,147,"NumpadParenLeft",0,n,0,n,n,n],[1,148,"NumpadParenRight",0,n,0,n,n,n],[1,149,"NumpadBackspace",0,n,0,n,n,n],[1,150,"NumpadMemoryStore",0,n,0,n,n,n],[1,151,"NumpadMemoryRecall",0,n,0,n,n,n],[1,152,"NumpadMemoryClear",0,n,0,n,n,n],[1,153,"NumpadMemoryAdd",0,n,0,n,n,n],[1,154,"NumpadMemorySubtract",0,n,0,n,n,n],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",n,n],[1,156,"NumpadClearEntry",0,n,0,n,n,n],[1,0,n,5,"Ctrl",17,"VK_CONTROL",n,n],[1,0,n,4,"Shift",16,"VK_SHIFT",n,n],[1,0,n,6,"Alt",18,"VK_MENU",n,n],[1,0,n,57,"Meta",91,"VK_COMMAND",n,n],[1,157,"ControlLeft",5,n,0,"VK_LCONTROL",n,n],[1,158,"ShiftLeft",4,n,0,"VK_LSHIFT",n,n],[1,159,"AltLeft",6,n,0,"VK_LMENU",n,n],[1,160,"MetaLeft",57,n,0,"VK_LWIN",n,n],[1,161,"ControlRight",5,n,0,"VK_RCONTROL",n,n],[1,162,"ShiftRight",4,n,0,"VK_RSHIFT",n,n],[1,163,"AltRight",6,n,0,"VK_RMENU",n,n],[1,164,"MetaRight",57,n,0,"VK_RWIN",n,n],[1,165,"BrightnessUp",0,n,0,n,n,n],[1,166,"BrightnessDown",0,n,0,n,n,n],[1,167,"MediaPlay",0,n,0,n,n,n],[1,168,"MediaRecord",0,n,0,n,n,n],[1,169,"MediaFastForward",0,n,0,n,n,n],[1,170,"MediaRewind",0,n,0,n,n,n],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",n,n],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",n,n],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",n,n],[1,174,"Eject",0,n,0,n,n,n],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",n,n],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",n,n],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",n,n],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",n,n],[1,179,"LaunchApp1",0,n,0,"VK_MEDIA_LAUNCH_APP1",n,n],[1,180,"SelectTask",0,n,0,n,n,n],[1,181,"LaunchScreenSaver",0,n,0,n,n,n],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",n,n],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",n,n],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",n,n],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",n,n],[1,186,"BrowserStop",0,n,0,"VK_BROWSER_STOP",n,n],[1,187,"BrowserRefresh",0,n,0,"VK_BROWSER_REFRESH",n,n],[1,188,"BrowserFavorites",0,n,0,"VK_BROWSER_FAVORITES",n,n],[1,189,"ZoomToggle",0,n,0,n,n,n],[1,190,"MailReply",0,n,0,n,n,n],[1,191,"MailForward",0,n,0,n,n,n],[1,192,"MailSend",0,n,0,n,n,n],[1,0,n,114,"KeyInComposition",229,n,n,n],[1,0,n,116,"ABNT_C2",194,"VK_ABNT_C2",n,n],[1,0,n,96,"OEM_8",223,"VK_OEM_8",n,n],[1,0,n,0,n,0,"VK_KANA",n,n],[1,0,n,0,n,0,"VK_HANGUL",n,n],[1,0,n,0,n,0,"VK_JUNJA",n,n],[1,0,n,0,n,0,"VK_FINAL",n,n],[1,0,n,0,n,0,"VK_HANJA",n,n],[1,0,n,0,n,0,"VK_KANJI",n,n],[1,0,n,0,n,0,"VK_CONVERT",n,n],[1,0,n,0,n,0,"VK_NONCONVERT",n,n],[1,0,n,0,n,0,"VK_ACCEPT",n,n],[1,0,n,0,n,0,"VK_MODECHANGE",n,n],[1,0,n,0,n,0,"VK_SELECT",n,n],[1,0,n,0,n,0,"VK_PRINT",n,n],[1,0,n,0,n,0,"VK_EXECUTE",n,n],[1,0,n,0,n,0,"VK_SNAPSHOT",n,n],[1,0,n,0,n,0,"VK_HELP",n,n],[1,0,n,0,n,0,"VK_APPS",n,n],[1,0,n,0,n,0,"VK_PROCESSKEY",n,n],[1,0,n,0,n,0,"VK_PACKET",n,n],[1,0,n,0,n,0,"VK_DBE_SBCSCHAR",n,n],[1,0,n,0,n,0,"VK_DBE_DBCSCHAR",n,n],[1,0,n,0,n,0,"VK_ATTN",n,n],[1,0,n,0,n,0,"VK_CRSEL",n,n],[1,0,n,0,n,0,"VK_EXSEL",n,n],[1,0,n,0,n,0,"VK_EREOF",n,n],[1,0,n,0,n,0,"VK_PLAY",n,n],[1,0,n,0,n,0,"VK_ZOOM",n,n],[1,0,n,0,n,0,"VK_NONAME",n,n],[1,0,n,0,n,0,"VK_PA1",n,n],[1,0,n,0,n,0,"VK_OEM_CLEAR",n,n]],t=[],i=[];for(const r of e){const[s,o,a,l,c,h,u,d,g]=r;if(i[o]||(i[o]=!0,Vde[a]=o,$de[a.toLowerCase()]=o,s&&(GM[o]=l)),!t[l]){if(t[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);NS.define(l,c),WD.define(l,d||c),zD.define(l,g||d||c)}h&&(PK[h]=l)}})();var ou;(function(n){function e(a){return NS.keyCodeToStr(a)}n.toString=e;function t(a){return NS.strToKeyCode(a)}n.fromString=t;function i(a){return WD.keyCodeToStr(a)}n.toUserSettingsUS=i;function r(a){return zD.keyCodeToStr(a)}n.toUserSettingsGeneral=r;function s(a){return WD.strToKeyCode(a)||zD.strToKeyCode(a)}n.fromUserSettings=s;function o(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return NS.keyCodeToStr(a)}n.toElectronAccelerator=o})(ou||(ou={}));function jde(n,e){const t=(e&65535)<<16>>>0;return(n|t)>>>0}var lz={};let B0;const DT=globalThis.vscode;if(typeof DT<"u"&&typeof DT.process<"u"){const n=DT.process;B0={get platform(){return n.platform},get arch(){return n.arch},get env(){return n.env},cwd(){return n.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?B0={get platform(){return process.platform},get arch(){return process.arch},get env(){return lz},cwd(){return lz.VSCODE_CWD||process.cwd()}}:B0={get platform(){return Go?"win32":hi?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const Ex=B0.cwd,HD=B0.env,Ude=B0.platform,qde=65,Gde=97,Kde=90,Yde=122,nf=46,Ds=47,la=92,_d=58,Zde=63;class OK extends Error{constructor(e,t,i){let r;typeof t=="string"&&t.indexOf("not ")===0?(r="must not be",t=t.replace(/^not /,"")):r="must be";const s=e.indexOf(".")!==-1?"property":"argument";let o=`The "${e}" ${s} ${r} of type ${t}`;o+=`. Received type ${typeof i}`,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function Xde(n,e){if(n===null||typeof n!="object")throw new OK(e,"Object",n)}function kr(n,e){if(typeof n!="string")throw new OK(e,"string",n)}const ju=Ude==="win32";function Li(n){return n===Ds||n===la}function VD(n){return n===Ds}function vd(n){return n>=qde&&n<=Kde||n>=Gde&&n<=Yde}function Ix(n,e,t,i){let r="",s=0,o=-1,a=0,l=0;for(let c=0;c<=n.length;++c){if(c<n.length)l=n.charCodeAt(c);else{if(i(l))break;l=Ds}if(i(l)){if(!(o===c-1||a===1))if(a===2){if(r.length<2||s!==2||r.charCodeAt(r.length-1)!==nf||r.charCodeAt(r.length-2)!==nf){if(r.length>2){const h=r.lastIndexOf(t);h===-1?(r="",s=0):(r=r.slice(0,h),s=r.length-1-r.lastIndexOf(t)),o=c,a=0;continue}else if(r.length!==0){r="",s=0,o=c,a=0;continue}}e&&(r+=r.length>0?`${t}..`:"..",s=2)}else r.length>0?r+=`${t}${n.slice(o+1,c)}`:r=n.slice(o+1,c),s=c-o-1;o=c,a=0}else l===nf&&a!==-1?++a:a=-1}return r}function Qde(n){return n?`${n[0]==="."?"":"."}${n}`:""}function BK(n,e){Xde(e,"pathObject");const t=e.dir||e.root,i=e.base||`${e.name||""}${Qde(e.ext)}`;return t?t===e.root?`${t}${i}`:`${t}${n}${i}`:i}const mo={resolve(...n){let e="",t="",i=!1;for(let r=n.length-1;r>=-1;r--){let s;if(r>=0){if(s=n[r],kr(s,`paths[${r}]`),s.length===0)continue}else e.length===0?s=Ex():(s=HD[`=${e}`]||Ex(),(s===void 0||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===la)&&(s=`${e}\\`));const o=s.length;let a=0,l="",c=!1;const h=s.charCodeAt(0);if(o===1)Li(h)&&(a=1,c=!0);else if(Li(h))if(c=!0,Li(s.charCodeAt(1))){let u=2,d=u;for(;u<o&&!Li(s.charCodeAt(u));)u++;if(u<o&&u!==d){const g=s.slice(d,u);for(d=u;u<o&&Li(s.charCodeAt(u));)u++;if(u<o&&u!==d){for(d=u;u<o&&!Li(s.charCodeAt(u));)u++;(u===o||u!==d)&&(l=`\\\\${g}\\${s.slice(d,u)}`,a=u)}}}else a=1;else vd(h)&&s.charCodeAt(1)===_d&&(l=s.slice(0,2),a=2,o>2&&Li(s.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(i){if(e.length>0)break}else if(t=`${s.slice(a)}\\${t}`,i=c,c&&e.length>0)break}return t=Ix(t,!i,"\\",Li),i?`${e}\\${t}`:`${e}${t}`||"."},normalize(n){kr(n,"path");const e=n.length;if(e===0)return".";let t=0,i,r=!1;const s=n.charCodeAt(0);if(e===1)return VD(s)?"\\":n;if(Li(s))if(r=!0,Li(n.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Li(n.charCodeAt(a));)a++;if(a<e&&a!==l){const c=n.slice(l,a);for(l=a;a<e&&Li(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Li(n.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${n.slice(l)}\\`;a!==l&&(i=`\\\\${c}\\${n.slice(l,a)}`,t=a)}}}else t=1;else vd(s)&&n.charCodeAt(1)===_d&&(i=n.slice(0,2),t=2,e>2&&Li(n.charCodeAt(2))&&(r=!0,t=3));let o=t<e?Ix(n.slice(t),!r,"\\",Li):"";return o.length===0&&!r&&(o="."),o.length>0&&Li(n.charCodeAt(e-1))&&(o+="\\"),i===void 0?r?`\\${o}`:o:r?`${i}\\${o}`:`${i}${o}`},isAbsolute(n){kr(n,"path");const e=n.length;if(e===0)return!1;const t=n.charCodeAt(0);return Li(t)||e>2&&vd(t)&&n.charCodeAt(1)===_d&&Li(n.charCodeAt(2))},join(...n){if(n.length===0)return".";let e,t;for(let s=0;s<n.length;++s){const o=n[s];kr(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let i=!0,r=0;if(typeof t=="string"&&Li(t.charCodeAt(0))){++r;const s=t.length;s>1&&Li(t.charCodeAt(1))&&(++r,s>2&&(Li(t.charCodeAt(2))?++r:i=!1))}if(i){for(;r<e.length&&Li(e.charCodeAt(r));)r++;r>=2&&(e=`\\${e.slice(r)}`)}return mo.normalize(e)},relative(n,e){if(kr(n,"from"),kr(e,"to"),n===e)return"";const t=mo.resolve(n),i=mo.resolve(e);if(t===i||(n=t.toLowerCase(),e=i.toLowerCase(),n===e))return"";let r=0;for(;r<n.length&&n.charCodeAt(r)===la;)r++;let s=n.length;for(;s-1>r&&n.charCodeAt(s-1)===la;)s--;const o=s-r;let a=0;for(;a<e.length&&e.charCodeAt(a)===la;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===la;)l--;const c=l-a,h=o<c?o:c;let u=-1,d=0;for(;d<h;d++){const p=n.charCodeAt(r+d);if(p!==e.charCodeAt(a+d))break;p===la&&(u=d)}if(d!==h){if(u===-1)return i}else{if(c>h){if(e.charCodeAt(a+d)===la)return i.slice(a+d+1);if(d===2)return i.slice(a+d)}o>h&&(n.charCodeAt(r+d)===la?u=d:d===2&&(u=3)),u===-1&&(u=0)}let g="";for(d=r+u+1;d<=s;++d)(d===s||n.charCodeAt(d)===la)&&(g+=g.length===0?"..":"\\..");return a+=u,g.length>0?`${g}${i.slice(a,l)}`:(i.charCodeAt(a)===la&&++a,i.slice(a,l))},toNamespacedPath(n){if(typeof n!="string"||n.length===0)return n;const e=mo.resolve(n);if(e.length<=2)return n;if(e.charCodeAt(0)===la){if(e.charCodeAt(1)===la){const t=e.charCodeAt(2);if(t!==Zde&&t!==nf)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(vd(e.charCodeAt(0))&&e.charCodeAt(1)===_d&&e.charCodeAt(2)===la)return`\\\\?\\${e}`;return n},dirname(n){kr(n,"path");const e=n.length;if(e===0)return".";let t=-1,i=0;const r=n.charCodeAt(0);if(e===1)return Li(r)?n:".";if(Li(r)){if(t=i=1,Li(n.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Li(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&Li(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Li(n.charCodeAt(a));)a++;if(a===e)return n;a!==l&&(t=i=a+1)}}}}else vd(r)&&n.charCodeAt(1)===_d&&(t=e>2&&Li(n.charCodeAt(2))?3:2,i=t);let s=-1,o=!0;for(let a=e-1;a>=i;--a)if(Li(n.charCodeAt(a))){if(!o){s=a;break}}else o=!1;if(s===-1){if(t===-1)return".";s=t}return n.slice(0,s)},basename(n,e){e!==void 0&&kr(e,"suffix"),kr(n,"path");let t=0,i=-1,r=!0,s;if(n.length>=2&&vd(n.charCodeAt(0))&&n.charCodeAt(1)===_d&&(t=2),e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let o=e.length-1,a=-1;for(s=n.length-1;s>=t;--s){const l=n.charCodeAt(s);if(Li(l)){if(!r){t=s+1;break}}else a===-1&&(r=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=n.length),n.slice(t,i)}for(s=n.length-1;s>=t;--s)if(Li(n.charCodeAt(s))){if(!r){t=s+1;break}}else i===-1&&(r=!1,i=s+1);return i===-1?"":n.slice(t,i)},extname(n){kr(n,"path");let e=0,t=-1,i=0,r=-1,s=!0,o=0;n.length>=2&&n.charCodeAt(1)===_d&&vd(n.charCodeAt(0))&&(e=i=2);for(let a=n.length-1;a>=e;--a){const l=n.charCodeAt(a);if(Li(l)){if(!s){i=a+1;break}continue}r===-1&&(s=!1,r=a+1),l===nf?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||r===-1||o===0||o===1&&t===r-1&&t===i+1?"":n.slice(t,r)},format:BK.bind(null,"\\"),parse(n){kr(n,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;const t=n.length;let i=0,r=n.charCodeAt(0);if(t===1)return Li(r)?(e.root=e.dir=n,e):(e.base=e.name=n,e);if(Li(r)){if(i=1,Li(n.charCodeAt(1))){let u=2,d=u;for(;u<t&&!Li(n.charCodeAt(u));)u++;if(u<t&&u!==d){for(d=u;u<t&&Li(n.charCodeAt(u));)u++;if(u<t&&u!==d){for(d=u;u<t&&!Li(n.charCodeAt(u));)u++;u===t?i=u:u!==d&&(i=u+1)}}}}else if(vd(r)&&n.charCodeAt(1)===_d){if(t<=2)return e.root=e.dir=n,e;if(i=2,Li(n.charCodeAt(2))){if(t===3)return e.root=e.dir=n,e;i=3}}i>0&&(e.root=n.slice(0,i));let s=-1,o=i,a=-1,l=!0,c=n.length-1,h=0;for(;c>=i;--c){if(r=n.charCodeAt(c),Li(r)){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),r===nf?s===-1?s=c:h!==1&&(h=1):s!==-1&&(h=-1)}return a!==-1&&(s===-1||h===0||h===1&&s===a-1&&s===o+1?e.base=e.name=n.slice(o,a):(e.name=n.slice(o,s),e.base=n.slice(o,a),e.ext=n.slice(s,a))),o>0&&o!==i?e.dir=n.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},Jde=(()=>{if(ju){const n=/\\/g;return()=>{const e=Ex().replace(n,"/");return e.slice(e.indexOf("/"))}}return()=>Ex()})(),Fn={resolve(...n){let e="",t=!1;for(let i=n.length-1;i>=-1&&!t;i--){const r=i>=0?n[i]:Jde();kr(r,`paths[${i}]`),r.length!==0&&(e=`${r}/${e}`,t=r.charCodeAt(0)===Ds)}return e=Ix(e,!t,"/",VD),t?`/${e}`:e.length>0?e:"."},normalize(n){if(kr(n,"path"),n.length===0)return".";const e=n.charCodeAt(0)===Ds,t=n.charCodeAt(n.length-1)===Ds;return n=Ix(n,!e,"/",VD),n.length===0?e?"/":t?"./":".":(t&&(n+="/"),e?`/${n}`:n)},isAbsolute(n){return kr(n,"path"),n.length>0&&n.charCodeAt(0)===Ds},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){const i=n[t];kr(i,"path"),i.length>0&&(e===void 0?e=i:e+=`/${i}`)}return e===void 0?".":Fn.normalize(e)},relative(n,e){if(kr(n,"from"),kr(e,"to"),n===e||(n=Fn.resolve(n),e=Fn.resolve(e),n===e))return"";const t=1,i=n.length,r=i-t,s=1,o=e.length-s,a=r<o?r:o;let l=-1,c=0;for(;c<a;c++){const u=n.charCodeAt(t+c);if(u!==e.charCodeAt(s+c))break;u===Ds&&(l=c)}if(c===a)if(o>a){if(e.charCodeAt(s+c)===Ds)return e.slice(s+c+1);if(c===0)return e.slice(s+c)}else r>a&&(n.charCodeAt(t+c)===Ds?l=c:c===0&&(l=0));let h="";for(c=t+l+1;c<=i;++c)(c===i||n.charCodeAt(c)===Ds)&&(h+=h.length===0?"..":"/..");return`${h}${e.slice(s+l)}`},toNamespacedPath(n){return n},dirname(n){if(kr(n,"path"),n.length===0)return".";const e=n.charCodeAt(0)===Ds;let t=-1,i=!0;for(let r=n.length-1;r>=1;--r)if(n.charCodeAt(r)===Ds){if(!i){t=r;break}}else i=!1;return t===-1?e?"/":".":e&&t===1?"//":n.slice(0,t)},basename(n,e){e!==void 0&&kr(e,"ext"),kr(n,"path");let t=0,i=-1,r=!0,s;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let o=e.length-1,a=-1;for(s=n.length-1;s>=0;--s){const l=n.charCodeAt(s);if(l===Ds){if(!r){t=s+1;break}}else a===-1&&(r=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=n.length),n.slice(t,i)}for(s=n.length-1;s>=0;--s)if(n.charCodeAt(s)===Ds){if(!r){t=s+1;break}}else i===-1&&(r=!1,i=s+1);return i===-1?"":n.slice(t,i)},extname(n){kr(n,"path");let e=-1,t=0,i=-1,r=!0,s=0;for(let o=n.length-1;o>=0;--o){const a=n.charCodeAt(o);if(a===Ds){if(!r){t=o+1;break}continue}i===-1&&(r=!1,i=o+1),a===nf?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||i===-1||s===0||s===1&&e===i-1&&e===t+1?"":n.slice(e,i)},format:BK.bind(null,"/"),parse(n){kr(n,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;const t=n.charCodeAt(0)===Ds;let i;t?(e.root="/",i=1):i=0;let r=-1,s=0,o=-1,a=!0,l=n.length-1,c=0;for(;l>=i;--l){const h=n.charCodeAt(l);if(h===Ds){if(!a){s=l+1;break}continue}o===-1&&(a=!1,o=l+1),h===nf?r===-1?r=l:c!==1&&(c=1):r!==-1&&(c=-1)}if(o!==-1){const h=s===0&&t?1:s;r===-1||c===0||c===1&&r===o-1&&r===s+1?e.base=e.name=n.slice(h,o):(e.name=n.slice(h,r),e.base=n.slice(h,o),e.ext=n.slice(r,o))}return s>0?e.dir=n.slice(0,s-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Fn.win32=mo.win32=mo;Fn.posix=mo.posix=Fn;const FK=ju?mo.normalize:Fn.normalize,efe=ju?mo.join:Fn.join,tfe=ju?mo.resolve:Fn.resolve,ife=ju?mo.relative:Fn.relative,nfe=ju?mo.dirname:Fn.dirname,WK=ju?mo.basename:Fn.basename,rfe=ju?mo.extname:Fn.extname,rf=ju?mo.sep:Fn.sep,sfe=/^\w[\w\d+.-]*$/,ofe=/^\//,afe=/^\/\//;function lfe(n,e){if(!n.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${n.authority}", path: "${n.path}", query: "${n.query}", fragment: "${n.fragment}"}`);if(n.scheme&&!sfe.test(n.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(n.path){if(n.authority){if(!ofe.test(n.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(afe.test(n.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function cfe(n,e){return!n&&!e?"file":n}function hfe(n,e){switch(n){case"https":case"http":case"file":e?e[0]!==Ql&&(e=Ql+e):e=Ql;break}return e}const Pn="",Ql="/",ufe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Ut{static isUri(e){return e instanceof Ut?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,t,i,r,s,o=!1){typeof e=="object"?(this.scheme=e.scheme||Pn,this.authority=e.authority||Pn,this.path=e.path||Pn,this.query=e.query||Pn,this.fragment=e.fragment||Pn):(this.scheme=cfe(e,o),this.authority=t||Pn,this.path=hfe(this.scheme,i||Pn),this.query=r||Pn,this.fragment=s||Pn,lfe(this,o))}get fsPath(){return Nx(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:r,query:s,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=Pn),i===void 0?i=this.authority:i===null&&(i=Pn),r===void 0?r=this.path:r===null&&(r=Pn),s===void 0?s=this.query:s===null&&(s=Pn),o===void 0?o=this.fragment:o===null&&(o=Pn),t===this.scheme&&i===this.authority&&r===this.path&&s===this.query&&o===this.fragment?this:new Rp(t,i,r,s,o)}static parse(e,t=!1){const i=ufe.exec(e);return i?new Rp(i[2]||Pn,p2(i[4]||Pn),p2(i[5]||Pn),p2(i[7]||Pn),p2(i[9]||Pn),t):new Rp(Pn,Pn,Pn,Pn,Pn)}static file(e){let t=Pn;if(Go&&(e=e.replace(/\\/g,Ql)),e[0]===Ql&&e[1]===Ql){const i=e.indexOf(Ql,2);i===-1?(t=e.substring(2),e=Ql):(t=e.substring(2,i),e=e.substring(i)||Ql)}return new Rp("file",t,e,Pn,Pn)}static from(e,t){return new Rp(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return Go&&e.scheme==="file"?i=Ut.file(mo.join(Nx(e,!0),...t)).path:i=Fn.join(e.path,...t),e.with({path:i})}toString(e=!1){return $D(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof Ut)return e;{const t=new Rp(e);return t._formatted=e.external??null,t._fsPath=e._sep===zK?e.fsPath??null:null,t}}else return e}}const zK=Go?1:void 0;let Rp=class extends Ut{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=Nx(this,!1)),this._fsPath}toString(e=!1){return e?$D(this,!0):(this._formatted||(this._formatted=$D(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=zK),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}};const HK={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function cz(n,e,t){let i,r=-1;for(let s=0;s<n.length;s++){const o=n.charCodeAt(s);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||e&&o===47||t&&o===91||t&&o===93||t&&o===58)r!==-1&&(i+=encodeURIComponent(n.substring(r,s)),r=-1),i!==void 0&&(i+=n.charAt(s));else{i===void 0&&(i=n.substr(0,s));const a=HK[o];a!==void 0?(r!==-1&&(i+=encodeURIComponent(n.substring(r,s)),r=-1),i+=a):r===-1&&(r=s)}}return r!==-1&&(i+=encodeURIComponent(n.substring(r))),i!==void 0?i:n}function dfe(n){let e;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i===35||i===63?(e===void 0&&(e=n.substr(0,t)),e+=HK[i]):e!==void 0&&(e+=n[t])}return e!==void 0?e:n}function Nx(n,e){let t;return n.authority&&n.path.length>1&&n.scheme==="file"?t=`//${n.authority}${n.path}`:n.path.charCodeAt(0)===47&&(n.path.charCodeAt(1)>=65&&n.path.charCodeAt(1)<=90||n.path.charCodeAt(1)>=97&&n.path.charCodeAt(1)<=122)&&n.path.charCodeAt(2)===58?e?t=n.path.substr(1):t=n.path[1].toLowerCase()+n.path.substr(2):t=n.path,Go&&(t=t.replace(/\//g,"\\")),t}function $D(n,e){const t=e?dfe:cz;let i="",{scheme:r,authority:s,path:o,query:a,fragment:l}=n;if(r&&(i+=r,i+=":"),(s||r==="file")&&(i+=Ql,i+=Ql),s){let c=s.indexOf("@");if(c!==-1){const h=s.substr(0,c);s=s.substr(c+1),c=h.lastIndexOf(":"),c===-1?i+=t(h,!1,!1):(i+=t(h.substr(0,c),!1,!1),i+=":",i+=t(h.substr(c+1),!1,!0)),i+="@"}s=s.toLowerCase(),c=s.lastIndexOf(":"),c===-1?i+=t(s,!1,!0):(i+=t(s.substr(0,c),!1,!0),i+=s.substr(c))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const c=o.charCodeAt(1);c>=65&&c<=90&&(o=`/${String.fromCharCode(c+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const c=o.charCodeAt(0);c>=65&&c<=90&&(o=`${String.fromCharCode(c+32)}:${o.substr(2)}`)}i+=t(o,!0,!1)}return a&&(i+="?",i+=t(a,!1,!1)),l&&(i+="#",i+=e?l:cz(l,!1,!1)),i}function VK(n){try{return decodeURIComponent(n)}catch{return n.length>3?n.substr(0,3)+VK(n.substr(3)):n}}const hz=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function p2(n){return n.match(hz)?n.replace(hz,e=>VK(e)):n}let be=class cg{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new cg(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return cg.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return cg.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return cg.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const i=e.lineNumber|0,r=t.lineNumber|0;if(i===r){const s=e.column|0,o=t.column|0;return s-o}return i-r}clone(){return new cg(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new cg(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},oe=class Br{constructor(e,t,i,r){e>i||e===i&&t>r?(this.startLineNumber=i,this.startColumn=r,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=r)}isEmpty(){return Br.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Br.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return Br.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return Br.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return Br.plusRange(this,e)}static plusRange(e,t){let i,r,s,o;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,r=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,r=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,r=e.startColumn),t.endLineNumber>e.endLineNumber?(s=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(s=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(s=e.endLineNumber,o=e.endColumn),new Br(i,r,s,o)}intersectRanges(e){return Br.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,r=e.startColumn,s=e.endLineNumber,o=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,h=t.endColumn;return i<a?(i=a,r=l):i===a&&(r=Math.max(r,l)),s>c?(s=c,o=h):s===c&&(o=Math.min(o,h)),i>s||i===s&&r>o?null:new Br(i,r,s,o)}equalsRange(e){return Br.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return Br.getEndPosition(this)}static getEndPosition(e){return new be(e.endLineNumber,e.endColumn)}getStartPosition(){return Br.getStartPosition(this)}static getStartPosition(e){return new be(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new Br(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new Br(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return Br.collapseToStart(this)}static collapseToStart(e){return new Br(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return Br.collapseToEnd(this)}static collapseToEnd(e){return new Br(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new Br(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new Br(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new Br(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const s=e.startLineNumber|0,o=t.startLineNumber|0;if(s===o){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,h=t.endLineNumber|0;if(c===h){const u=e.endColumn|0,d=t.endColumn|0;return u-d}return c-h}return a-l}return s-o}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}},$i=class ll extends oe{constructor(e,t,i,r){super(e,t,i,r),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=r}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return ll.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new ll(this.startLineNumber,this.startColumn,e,t):new ll(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new be(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new be(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new ll(e,t,this.endLineNumber,this.endColumn):new ll(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new ll(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new ll(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new ll(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new ll(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,i,r,s){return s===0?new ll(e,t,i,r):new ll(i,r,e,t)}};const jD=Object.create(null);function M(n,e){if(Ca(e)){const t=jD[e];if(t===void 0)throw new Error(`${n} references an unknown codicon: ${e}`);e=t}return jD[n]=e,{id:n}}function $K(){return jD}const ffe={add:M("add",6e4),plus:M("plus",6e4),gistNew:M("gist-new",6e4),repoCreate:M("repo-create",6e4),lightbulb:M("lightbulb",60001),lightBulb:M("light-bulb",60001),repo:M("repo",60002),repoDelete:M("repo-delete",60002),gistFork:M("gist-fork",60003),repoForked:M("repo-forked",60003),gitPullRequest:M("git-pull-request",60004),gitPullRequestAbandoned:M("git-pull-request-abandoned",60004),recordKeys:M("record-keys",60005),keyboard:M("keyboard",60005),tag:M("tag",60006),gitPullRequestLabel:M("git-pull-request-label",60006),tagAdd:M("tag-add",60006),tagRemove:M("tag-remove",60006),person:M("person",60007),personFollow:M("person-follow",60007),personOutline:M("person-outline",60007),personFilled:M("person-filled",60007),gitBranch:M("git-branch",60008),gitBranchCreate:M("git-branch-create",60008),gitBranchDelete:M("git-branch-delete",60008),sourceControl:M("source-control",60008),mirror:M("mirror",60009),mirrorPublic:M("mirror-public",60009),star:M("star",60010),starAdd:M("star-add",60010),starDelete:M("star-delete",60010),starEmpty:M("star-empty",60010),comment:M("comment",60011),commentAdd:M("comment-add",60011),alert:M("alert",60012),warning:M("warning",60012),search:M("search",60013),searchSave:M("search-save",60013),logOut:M("log-out",60014),signOut:M("sign-out",60014),logIn:M("log-in",60015),signIn:M("sign-in",60015),eye:M("eye",60016),eyeUnwatch:M("eye-unwatch",60016),eyeWatch:M("eye-watch",60016),circleFilled:M("circle-filled",60017),primitiveDot:M("primitive-dot",60017),closeDirty:M("close-dirty",60017),debugBreakpoint:M("debug-breakpoint",60017),debugBreakpointDisabled:M("debug-breakpoint-disabled",60017),debugHint:M("debug-hint",60017),terminalDecorationSuccess:M("terminal-decoration-success",60017),primitiveSquare:M("primitive-square",60018),edit:M("edit",60019),pencil:M("pencil",60019),info:M("info",60020),issueOpened:M("issue-opened",60020),gistPrivate:M("gist-private",60021),gitForkPrivate:M("git-fork-private",60021),lock:M("lock",60021),mirrorPrivate:M("mirror-private",60021),close:M("close",60022),removeClose:M("remove-close",60022),x:M("x",60022),repoSync:M("repo-sync",60023),sync:M("sync",60023),clone:M("clone",60024),desktopDownload:M("desktop-download",60024),beaker:M("beaker",60025),microscope:M("microscope",60025),vm:M("vm",60026),deviceDesktop:M("device-desktop",60026),file:M("file",60027),fileText:M("file-text",60027),more:M("more",60028),ellipsis:M("ellipsis",60028),kebabHorizontal:M("kebab-horizontal",60028),mailReply:M("mail-reply",60029),reply:M("reply",60029),organization:M("organization",60030),organizationFilled:M("organization-filled",60030),organizationOutline:M("organization-outline",60030),newFile:M("new-file",60031),fileAdd:M("file-add",60031),newFolder:M("new-folder",60032),fileDirectoryCreate:M("file-directory-create",60032),trash:M("trash",60033),trashcan:M("trashcan",60033),history:M("history",60034),clock:M("clock",60034),folder:M("folder",60035),fileDirectory:M("file-directory",60035),symbolFolder:M("symbol-folder",60035),logoGithub:M("logo-github",60036),markGithub:M("mark-github",60036),github:M("github",60036),terminal:M("terminal",60037),console:M("console",60037),repl:M("repl",60037),zap:M("zap",60038),symbolEvent:M("symbol-event",60038),error:M("error",60039),stop:M("stop",60039),variable:M("variable",60040),symbolVariable:M("symbol-variable",60040),array:M("array",60042),symbolArray:M("symbol-array",60042),symbolModule:M("symbol-module",60043),symbolPackage:M("symbol-package",60043),symbolNamespace:M("symbol-namespace",60043),symbolObject:M("symbol-object",60043),symbolMethod:M("symbol-method",60044),symbolFunction:M("symbol-function",60044),symbolConstructor:M("symbol-constructor",60044),symbolBoolean:M("symbol-boolean",60047),symbolNull:M("symbol-null",60047),symbolNumeric:M("symbol-numeric",60048),symbolNumber:M("symbol-number",60048),symbolStructure:M("symbol-structure",60049),symbolStruct:M("symbol-struct",60049),symbolParameter:M("symbol-parameter",60050),symbolTypeParameter:M("symbol-type-parameter",60050),symbolKey:M("symbol-key",60051),symbolText:M("symbol-text",60051),symbolReference:M("symbol-reference",60052),goToFile:M("go-to-file",60052),symbolEnum:M("symbol-enum",60053),symbolValue:M("symbol-value",60053),symbolRuler:M("symbol-ruler",60054),symbolUnit:M("symbol-unit",60054),activateBreakpoints:M("activate-breakpoints",60055),archive:M("archive",60056),arrowBoth:M("arrow-both",60057),arrowDown:M("arrow-down",60058),arrowLeft:M("arrow-left",60059),arrowRight:M("arrow-right",60060),arrowSmallDown:M("arrow-small-down",60061),arrowSmallLeft:M("arrow-small-left",60062),arrowSmallRight:M("arrow-small-right",60063),arrowSmallUp:M("arrow-small-up",60064),arrowUp:M("arrow-up",60065),bell:M("bell",60066),bold:M("bold",60067),book:M("book",60068),bookmark:M("bookmark",60069),debugBreakpointConditionalUnverified:M("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:M("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:M("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:M("debug-breakpoint-data-unverified",60072),debugBreakpointData:M("debug-breakpoint-data",60073),debugBreakpointDataDisabled:M("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:M("debug-breakpoint-log-unverified",60074),debugBreakpointLog:M("debug-breakpoint-log",60075),debugBreakpointLogDisabled:M("debug-breakpoint-log-disabled",60075),briefcase:M("briefcase",60076),broadcast:M("broadcast",60077),browser:M("browser",60078),bug:M("bug",60079),calendar:M("calendar",60080),caseSensitive:M("case-sensitive",60081),check:M("check",60082),checklist:M("checklist",60083),chevronDown:M("chevron-down",60084),chevronLeft:M("chevron-left",60085),chevronRight:M("chevron-right",60086),chevronUp:M("chevron-up",60087),chromeClose:M("chrome-close",60088),chromeMaximize:M("chrome-maximize",60089),chromeMinimize:M("chrome-minimize",60090),chromeRestore:M("chrome-restore",60091),circleOutline:M("circle-outline",60092),circle:M("circle",60092),debugBreakpointUnverified:M("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:M("terminal-decoration-incomplete",60092),circleSlash:M("circle-slash",60093),circuitBoard:M("circuit-board",60094),clearAll:M("clear-all",60095),clippy:M("clippy",60096),closeAll:M("close-all",60097),cloudDownload:M("cloud-download",60098),cloudUpload:M("cloud-upload",60099),code:M("code",60100),collapseAll:M("collapse-all",60101),colorMode:M("color-mode",60102),commentDiscussion:M("comment-discussion",60103),creditCard:M("credit-card",60105),dash:M("dash",60108),dashboard:M("dashboard",60109),database:M("database",60110),debugContinue:M("debug-continue",60111),debugDisconnect:M("debug-disconnect",60112),debugPause:M("debug-pause",60113),debugRestart:M("debug-restart",60114),debugStart:M("debug-start",60115),debugStepInto:M("debug-step-into",60116),debugStepOut:M("debug-step-out",60117),debugStepOver:M("debug-step-over",60118),debugStop:M("debug-stop",60119),debug:M("debug",60120),deviceCameraVideo:M("device-camera-video",60121),deviceCamera:M("device-camera",60122),deviceMobile:M("device-mobile",60123),diffAdded:M("diff-added",60124),diffIgnored:M("diff-ignored",60125),diffModified:M("diff-modified",60126),diffRemoved:M("diff-removed",60127),diffRenamed:M("diff-renamed",60128),diff:M("diff",60129),diffSidebyside:M("diff-sidebyside",60129),discard:M("discard",60130),editorLayout:M("editor-layout",60131),emptyWindow:M("empty-window",60132),exclude:M("exclude",60133),extensions:M("extensions",60134),eyeClosed:M("eye-closed",60135),fileBinary:M("file-binary",60136),fileCode:M("file-code",60137),fileMedia:M("file-media",60138),filePdf:M("file-pdf",60139),fileSubmodule:M("file-submodule",60140),fileSymlinkDirectory:M("file-symlink-directory",60141),fileSymlinkFile:M("file-symlink-file",60142),fileZip:M("file-zip",60143),files:M("files",60144),filter:M("filter",60145),flame:M("flame",60146),foldDown:M("fold-down",60147),foldUp:M("fold-up",60148),fold:M("fold",60149),folderActive:M("folder-active",60150),folderOpened:M("folder-opened",60151),gear:M("gear",60152),gift:M("gift",60153),gistSecret:M("gist-secret",60154),gist:M("gist",60155),gitCommit:M("git-commit",60156),gitCompare:M("git-compare",60157),compareChanges:M("compare-changes",60157),gitMerge:M("git-merge",60158),githubAction:M("github-action",60159),githubAlt:M("github-alt",60160),globe:M("globe",60161),grabber:M("grabber",60162),graph:M("graph",60163),gripper:M("gripper",60164),heart:M("heart",60165),home:M("home",60166),horizontalRule:M("horizontal-rule",60167),hubot:M("hubot",60168),inbox:M("inbox",60169),issueReopened:M("issue-reopened",60171),issues:M("issues",60172),italic:M("italic",60173),jersey:M("jersey",60174),json:M("json",60175),kebabVertical:M("kebab-vertical",60176),key:M("key",60177),law:M("law",60178),lightbulbAutofix:M("lightbulb-autofix",60179),linkExternal:M("link-external",60180),link:M("link",60181),listOrdered:M("list-ordered",60182),listUnordered:M("list-unordered",60183),liveShare:M("live-share",60184),loading:M("loading",60185),location:M("location",60186),mailRead:M("mail-read",60187),mail:M("mail",60188),markdown:M("markdown",60189),megaphone:M("megaphone",60190),mention:M("mention",60191),milestone:M("milestone",60192),gitPullRequestMilestone:M("git-pull-request-milestone",60192),mortarBoard:M("mortar-board",60193),move:M("move",60194),multipleWindows:M("multiple-windows",60195),mute:M("mute",60196),noNewline:M("no-newline",60197),note:M("note",60198),octoface:M("octoface",60199),openPreview:M("open-preview",60200),package:M("package",60201),paintcan:M("paintcan",60202),pin:M("pin",60203),play:M("play",60204),run:M("run",60204),plug:M("plug",60205),preserveCase:M("preserve-case",60206),preview:M("preview",60207),project:M("project",60208),pulse:M("pulse",60209),question:M("question",60210),quote:M("quote",60211),radioTower:M("radio-tower",60212),reactions:M("reactions",60213),references:M("references",60214),refresh:M("refresh",60215),regex:M("regex",60216),remoteExplorer:M("remote-explorer",60217),remote:M("remote",60218),remove:M("remove",60219),replaceAll:M("replace-all",60220),replace:M("replace",60221),repoClone:M("repo-clone",60222),repoForcePush:M("repo-force-push",60223),repoPull:M("repo-pull",60224),repoPush:M("repo-push",60225),report:M("report",60226),requestChanges:M("request-changes",60227),rocket:M("rocket",60228),rootFolderOpened:M("root-folder-opened",60229),rootFolder:M("root-folder",60230),rss:M("rss",60231),ruby:M("ruby",60232),saveAll:M("save-all",60233),saveAs:M("save-as",60234),save:M("save",60235),screenFull:M("screen-full",60236),screenNormal:M("screen-normal",60237),searchStop:M("search-stop",60238),server:M("server",60240),settingsGear:M("settings-gear",60241),settings:M("settings",60242),shield:M("shield",60243),smiley:M("smiley",60244),sortPrecedence:M("sort-precedence",60245),splitHorizontal:M("split-horizontal",60246),splitVertical:M("split-vertical",60247),squirrel:M("squirrel",60248),starFull:M("star-full",60249),starHalf:M("star-half",60250),symbolClass:M("symbol-class",60251),symbolColor:M("symbol-color",60252),symbolConstant:M("symbol-constant",60253),symbolEnumMember:M("symbol-enum-member",60254),symbolField:M("symbol-field",60255),symbolFile:M("symbol-file",60256),symbolInterface:M("symbol-interface",60257),symbolKeyword:M("symbol-keyword",60258),symbolMisc:M("symbol-misc",60259),symbolOperator:M("symbol-operator",60260),symbolProperty:M("symbol-property",60261),wrench:M("wrench",60261),wrenchSubaction:M("wrench-subaction",60261),symbolSnippet:M("symbol-snippet",60262),tasklist:M("tasklist",60263),telescope:M("telescope",60264),textSize:M("text-size",60265),threeBars:M("three-bars",60266),thumbsdown:M("thumbsdown",60267),thumbsup:M("thumbsup",60268),tools:M("tools",60269),triangleDown:M("triangle-down",60270),triangleLeft:M("triangle-left",60271),triangleRight:M("triangle-right",60272),triangleUp:M("triangle-up",60273),twitter:M("twitter",60274),unfold:M("unfold",60275),unlock:M("unlock",60276),unmute:M("unmute",60277),unverified:M("unverified",60278),verified:M("verified",60279),versions:M("versions",60280),vmActive:M("vm-active",60281),vmOutline:M("vm-outline",60282),vmRunning:M("vm-running",60283),watch:M("watch",60284),whitespace:M("whitespace",60285),wholeWord:M("whole-word",60286),window:M("window",60287),wordWrap:M("word-wrap",60288),zoomIn:M("zoom-in",60289),zoomOut:M("zoom-out",60290),listFilter:M("list-filter",60291),listFlat:M("list-flat",60292),listSelection:M("list-selection",60293),selection:M("selection",60293),listTree:M("list-tree",60294),debugBreakpointFunctionUnverified:M("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:M("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:M("debug-breakpoint-function-disabled",60296),debugStackframeActive:M("debug-stackframe-active",60297),circleSmallFilled:M("circle-small-filled",60298),debugStackframeDot:M("debug-stackframe-dot",60298),terminalDecorationMark:M("terminal-decoration-mark",60298),debugStackframe:M("debug-stackframe",60299),debugStackframeFocused:M("debug-stackframe-focused",60299),debugBreakpointUnsupported:M("debug-breakpoint-unsupported",60300),symbolString:M("symbol-string",60301),debugReverseContinue:M("debug-reverse-continue",60302),debugStepBack:M("debug-step-back",60303),debugRestartFrame:M("debug-restart-frame",60304),debugAlt:M("debug-alt",60305),callIncoming:M("call-incoming",60306),callOutgoing:M("call-outgoing",60307),menu:M("menu",60308),expandAll:M("expand-all",60309),feedback:M("feedback",60310),gitPullRequestReviewer:M("git-pull-request-reviewer",60310),groupByRefType:M("group-by-ref-type",60311),ungroupByRefType:M("ungroup-by-ref-type",60312),account:M("account",60313),gitPullRequestAssignee:M("git-pull-request-assignee",60313),bellDot:M("bell-dot",60314),debugConsole:M("debug-console",60315),library:M("library",60316),output:M("output",60317),runAll:M("run-all",60318),syncIgnored:M("sync-ignored",60319),pinned:M("pinned",60320),githubInverted:M("github-inverted",60321),serverProcess:M("server-process",60322),serverEnvironment:M("server-environment",60323),pass:M("pass",60324),issueClosed:M("issue-closed",60324),stopCircle:M("stop-circle",60325),playCircle:M("play-circle",60326),record:M("record",60327),debugAltSmall:M("debug-alt-small",60328),vmConnect:M("vm-connect",60329),cloud:M("cloud",60330),merge:M("merge",60331),export:M("export",60332),graphLeft:M("graph-left",60333),magnet:M("magnet",60334),notebook:M("notebook",60335),redo:M("redo",60336),checkAll:M("check-all",60337),pinnedDirty:M("pinned-dirty",60338),passFilled:M("pass-filled",60339),circleLargeFilled:M("circle-large-filled",60340),circleLarge:M("circle-large",60341),circleLargeOutline:M("circle-large-outline",60341),combine:M("combine",60342),gather:M("gather",60342),table:M("table",60343),variableGroup:M("variable-group",60344),typeHierarchy:M("type-hierarchy",60345),typeHierarchySub:M("type-hierarchy-sub",60346),typeHierarchySuper:M("type-hierarchy-super",60347),gitPullRequestCreate:M("git-pull-request-create",60348),runAbove:M("run-above",60349),runBelow:M("run-below",60350),notebookTemplate:M("notebook-template",60351),debugRerun:M("debug-rerun",60352),workspaceTrusted:M("workspace-trusted",60353),workspaceUntrusted:M("workspace-untrusted",60354),workspaceUnknown:M("workspace-unknown",60355),terminalCmd:M("terminal-cmd",60356),terminalDebian:M("terminal-debian",60357),terminalLinux:M("terminal-linux",60358),terminalPowershell:M("terminal-powershell",60359),terminalTmux:M("terminal-tmux",60360),terminalUbuntu:M("terminal-ubuntu",60361),terminalBash:M("terminal-bash",60362),arrowSwap:M("arrow-swap",60363),copy:M("copy",60364),personAdd:M("person-add",60365),filterFilled:M("filter-filled",60366),wand:M("wand",60367),debugLineByLine:M("debug-line-by-line",60368),inspect:M("inspect",60369),layers:M("layers",60370),layersDot:M("layers-dot",60371),layersActive:M("layers-active",60372),compass:M("compass",60373),compassDot:M("compass-dot",60374),compassActive:M("compass-active",60375),azure:M("azure",60376),issueDraft:M("issue-draft",60377),gitPullRequestClosed:M("git-pull-request-closed",60378),gitPullRequestDraft:M("git-pull-request-draft",60379),debugAll:M("debug-all",60380),debugCoverage:M("debug-coverage",60381),runErrors:M("run-errors",60382),folderLibrary:M("folder-library",60383),debugContinueSmall:M("debug-continue-small",60384),beakerStop:M("beaker-stop",60385),graphLine:M("graph-line",60386),graphScatter:M("graph-scatter",60387),pieChart:M("pie-chart",60388),bracket:M("bracket",60175),bracketDot:M("bracket-dot",60389),bracketError:M("bracket-error",60390),lockSmall:M("lock-small",60391),azureDevops:M("azure-devops",60392),verifiedFilled:M("verified-filled",60393),newline:M("newline",60394),layout:M("layout",60395),layoutActivitybarLeft:M("layout-activitybar-left",60396),layoutActivitybarRight:M("layout-activitybar-right",60397),layoutPanelLeft:M("layout-panel-left",60398),layoutPanelCenter:M("layout-panel-center",60399),layoutPanelJustify:M("layout-panel-justify",60400),layoutPanelRight:M("layout-panel-right",60401),layoutPanel:M("layout-panel",60402),layoutSidebarLeft:M("layout-sidebar-left",60403),layoutSidebarRight:M("layout-sidebar-right",60404),layoutStatusbar:M("layout-statusbar",60405),layoutMenubar:M("layout-menubar",60406),layoutCentered:M("layout-centered",60407),target:M("target",60408),indent:M("indent",60409),recordSmall:M("record-small",60410),errorSmall:M("error-small",60411),terminalDecorationError:M("terminal-decoration-error",60411),arrowCircleDown:M("arrow-circle-down",60412),arrowCircleLeft:M("arrow-circle-left",60413),arrowCircleRight:M("arrow-circle-right",60414),arrowCircleUp:M("arrow-circle-up",60415),layoutSidebarRightOff:M("layout-sidebar-right-off",60416),layoutPanelOff:M("layout-panel-off",60417),layoutSidebarLeftOff:M("layout-sidebar-left-off",60418),blank:M("blank",60419),heartFilled:M("heart-filled",60420),map:M("map",60421),mapHorizontal:M("map-horizontal",60421),foldHorizontal:M("fold-horizontal",60421),mapFilled:M("map-filled",60422),mapHorizontalFilled:M("map-horizontal-filled",60422),foldHorizontalFilled:M("fold-horizontal-filled",60422),circleSmall:M("circle-small",60423),bellSlash:M("bell-slash",60424),bellSlashDot:M("bell-slash-dot",60425),commentUnresolved:M("comment-unresolved",60426),gitPullRequestGoToChanges:M("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:M("git-pull-request-new-changes",60428),searchFuzzy:M("search-fuzzy",60429),commentDraft:M("comment-draft",60430),send:M("send",60431),sparkle:M("sparkle",60432),insert:M("insert",60433),mic:M("mic",60434),thumbsdownFilled:M("thumbsdown-filled",60435),thumbsupFilled:M("thumbsup-filled",60436),coffee:M("coffee",60437),snake:M("snake",60438),game:M("game",60439),vr:M("vr",60440),chip:M("chip",60441),piano:M("piano",60442),music:M("music",60443),micFilled:M("mic-filled",60444),repoFetch:M("repo-fetch",60445),copilot:M("copilot",60446),lightbulbSparkle:M("lightbulb-sparkle",60447),robot:M("robot",60448),sparkleFilled:M("sparkle-filled",60449),diffSingle:M("diff-single",60450),diffMultiple:M("diff-multiple",60451),surroundWith:M("surround-with",60452),share:M("share",60453),gitStash:M("git-stash",60454),gitStashApply:M("git-stash-apply",60455),gitStashPop:M("git-stash-pop",60456),vscode:M("vscode",60457),vscodeInsiders:M("vscode-insiders",60458),codeOss:M("code-oss",60459),runCoverage:M("run-coverage",60460),runAllCoverage:M("run-all-coverage",60461),coverage:M("coverage",60462),githubProject:M("github-project",60463),mapVertical:M("map-vertical",60464),foldVertical:M("fold-vertical",60464),mapVerticalFilled:M("map-vertical-filled",60465),foldVerticalFilled:M("fold-vertical-filled",60465),goToSearch:M("go-to-search",60466),percentage:M("percentage",60467),sortPercentage:M("sort-percentage",60467),attach:M("attach",60468)},gfe={dialogError:M("dialog-error","error"),dialogWarning:M("dialog-warning","warning"),dialogInfo:M("dialog-info","info"),dialogClose:M("dialog-close","close"),treeItemExpanded:M("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:M("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:M("tree-filter-on-type-off","list-selection"),treeFilterClear:M("tree-filter-clear","close"),treeItemLoading:M("tree-item-loading","loading"),menuSelection:M("menu-selection","check"),menuSubmenu:M("menu-submenu","chevron-right"),menuBarMore:M("menubar-more","more"),scrollbarButtonLeft:M("scrollbar-button-left","triangle-left"),scrollbarButtonRight:M("scrollbar-button-right","triangle-right"),scrollbarButtonUp:M("scrollbar-button-up","triangle-up"),scrollbarButtonDown:M("scrollbar-button-down","triangle-down"),toolBarMore:M("toolbar-more","more"),quickInputBack:M("quick-input-back","arrow-left"),dropDownButton:M("drop-down-button",60084),symbolCustomColor:M("symbol-customcolor",60252),exportIcon:M("export",60332),workspaceUnspecified:M("workspace-unspecified",60355),newLine:M("newline",60394),thumbsDownFilled:M("thumbsdown-filled",60435),thumbsUpFilled:M("thumbsup-filled",60436),gitFetch:M("git-fetch",60445),lightbulbSparkleAutofix:M("lightbulb-sparkle-autofix",60447),debugBreakpointPending:M("debug-breakpoint-pending",60377)},Je={...ffe,...gfe};let jK=class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new de,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),Mt(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){this._factories.get(e)?.dispose();const i=new mfe(this,e,t);return this._factories.set(e,i),Mt(()=>{const r=this._factories.get(e);!r||r!==i||(this._factories.delete(e),r.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this._factories.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const i=this._factories.get(e);return!!(!i||i.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};class mfe extends xe{get isResolved(){return this._isResolved}constructor(e,t,i){super(),this._registry=e,this._languageId=t,this._factory=i,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}let mw=class{constructor(e,t,i){this.offset=e,this.type=t,this.language=i,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}};class KM{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}}class XL{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}var uz;(function(n){n[n.Increase=0]="Increase",n[n.Decrease=1]="Decrease"})(uz||(uz={}));var dz;(function(n){const e=new Map;e.set(0,Je.symbolMethod),e.set(1,Je.symbolFunction),e.set(2,Je.symbolConstructor),e.set(3,Je.symbolField),e.set(4,Je.symbolVariable),e.set(5,Je.symbolClass),e.set(6,Je.symbolStruct),e.set(7,Je.symbolInterface),e.set(8,Je.symbolModule),e.set(9,Je.symbolProperty),e.set(10,Je.symbolEvent),e.set(11,Je.symbolOperator),e.set(12,Je.symbolUnit),e.set(13,Je.symbolValue),e.set(15,Je.symbolEnum),e.set(14,Je.symbolConstant),e.set(15,Je.symbolEnum),e.set(16,Je.symbolEnumMember),e.set(17,Je.symbolKeyword),e.set(27,Je.symbolSnippet),e.set(18,Je.symbolText),e.set(19,Je.symbolColor),e.set(20,Je.symbolFile),e.set(21,Je.symbolReference),e.set(22,Je.symbolCustomColor),e.set(23,Je.symbolFolder),e.set(24,Je.symbolTypeParameter),e.set(25,Je.account),e.set(26,Je.issues);function t(s){let o=e.get(s);return o||(console.info("No codicon found for CompletionItemKind "+s),o=Je.symbolProperty),o}n.toIcon=t;const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26);function r(s,o){let a=i.get(s);return typeof a>"u"&&!o&&(a=9),a}n.fromString=r})(dz||(dz={}));var fz;(function(n){n[n.Automatic=0]="Automatic",n[n.Explicit=1]="Explicit"})(fz||(fz={}));class pfe{constructor(e,t,i,r){this.range=e,this.text=t,this.completionKind=i,this.isSnippetText=r}equals(e){return oe.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}var gz;(function(n){n[n.Automatic=0]="Automatic",n[n.PasteAs=1]="PasteAs"})(gz||(gz={}));var mz;(function(n){n[n.Invoke=1]="Invoke",n[n.TriggerCharacter=2]="TriggerCharacter",n[n.ContentChange=3]="ContentChange"})(mz||(mz={}));var pz;(function(n){n[n.Text=0]="Text",n[n.Read=1]="Read",n[n.Write=2]="Write"})(pz||(pz={}));C("Array","array"),C("Boolean","boolean"),C("Class","class"),C("Constant","constant"),C("Constructor","constructor"),C("Enum","enumeration"),C("EnumMember","enumeration member"),C("Event","event"),C("Field","field"),C("File","file"),C("Function","function"),C("Interface","interface"),C("Key","key"),C("Method","method"),C("Module","module"),C("Namespace","namespace"),C("Null","null"),C("Number","number"),C("Object","object"),C("Operator","operator"),C("Package","package"),C("Property","property"),C("String","string"),C("Struct","struct"),C("TypeParameter","type parameter"),C("Variable","variable");var UD;(function(n){const e=new Map;e.set(0,Je.symbolFile),e.set(1,Je.symbolModule),e.set(2,Je.symbolNamespace),e.set(3,Je.symbolPackage),e.set(4,Je.symbolClass),e.set(5,Je.symbolMethod),e.set(6,Je.symbolProperty),e.set(7,Je.symbolField),e.set(8,Je.symbolConstructor),e.set(9,Je.symbolEnum),e.set(10,Je.symbolInterface),e.set(11,Je.symbolFunction),e.set(12,Je.symbolVariable),e.set(13,Je.symbolConstant),e.set(14,Je.symbolString),e.set(15,Je.symbolNumber),e.set(16,Je.symbolBoolean),e.set(17,Je.symbolArray),e.set(18,Je.symbolObject),e.set(19,Je.symbolKey),e.set(20,Je.symbolNull),e.set(21,Je.symbolEnumMember),e.set(22,Je.symbolStruct),e.set(23,Je.symbolEvent),e.set(24,Je.symbolOperator),e.set(25,Je.symbolTypeParameter);function t(i){let r=e.get(i);return r||(console.info("No codicon found for SymbolKind "+i),r=Je.symbolProperty),r}n.toIcon=t})(UD||(UD={}));const hl=class hl{static fromValue(e){switch(e){case"comment":return hl.Comment;case"imports":return hl.Imports;case"region":return hl.Region}return new hl(e)}constructor(e){this.value=e}};hl.Comment=new hl("comment"),hl.Imports=new hl("imports"),hl.Region=new hl("region");let qD=hl;var bz;(function(n){n[n.AIGenerated=1]="AIGenerated"})(bz||(bz={}));var _z;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(_z||(_z={}));var vz;(function(n){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}n.is=e})(vz||(vz={}));var wz;(function(n){n[n.Type=1]="Type",n[n.Parameter=2]="Parameter"})(wz||(wz={}));class bfe{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const qn=new jK,GD=new jK;var yz;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(yz||(yz={}));var KD;(function(n){n[n.Unknown=0]="Unknown",n[n.Disabled=1]="Disabled",n[n.Enabled=2]="Enabled"})(KD||(KD={}));var YD;(function(n){n[n.Invoke=1]="Invoke",n[n.Auto=2]="Auto"})(YD||(YD={}));var ZD;(function(n){n[n.None=0]="None",n[n.KeepWhitespace=1]="KeepWhitespace",n[n.InsertAsSnippet=4]="InsertAsSnippet"})(ZD||(ZD={}));var XD;(function(n){n[n.Method=0]="Method",n[n.Function=1]="Function",n[n.Constructor=2]="Constructor",n[n.Field=3]="Field",n[n.Variable=4]="Variable",n[n.Class=5]="Class",n[n.Struct=6]="Struct",n[n.Interface=7]="Interface",n[n.Module=8]="Module",n[n.Property=9]="Property",n[n.Event=10]="Event",n[n.Operator=11]="Operator",n[n.Unit=12]="Unit",n[n.Value=13]="Value",n[n.Constant=14]="Constant",n[n.Enum=15]="Enum",n[n.EnumMember=16]="EnumMember",n[n.Keyword=17]="Keyword",n[n.Text=18]="Text",n[n.Color=19]="Color",n[n.File=20]="File",n[n.Reference=21]="Reference",n[n.Customcolor=22]="Customcolor",n[n.Folder=23]="Folder",n[n.TypeParameter=24]="TypeParameter",n[n.User=25]="User",n[n.Issue=26]="Issue",n[n.Snippet=27]="Snippet"})(XD||(XD={}));var QD;(function(n){n[n.Deprecated=1]="Deprecated"})(QD||(QD={}));var JD;(function(n){n[n.Invoke=0]="Invoke",n[n.TriggerCharacter=1]="TriggerCharacter",n[n.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(JD||(JD={}));var eE;(function(n){n[n.EXACT=0]="EXACT",n[n.ABOVE=1]="ABOVE",n[n.BELOW=2]="BELOW"})(eE||(eE={}));var tE;(function(n){n[n.NotSet=0]="NotSet",n[n.ContentFlush=1]="ContentFlush",n[n.RecoverFromMarkers=2]="RecoverFromMarkers",n[n.Explicit=3]="Explicit",n[n.Paste=4]="Paste",n[n.Undo=5]="Undo",n[n.Redo=6]="Redo"})(tE||(tE={}));var iE;(function(n){n[n.LF=1]="LF",n[n.CRLF=2]="CRLF"})(iE||(iE={}));var nE;(function(n){n[n.Text=0]="Text",n[n.Read=1]="Read",n[n.Write=2]="Write"})(nE||(nE={}));var rE;(function(n){n[n.None=0]="None",n[n.Keep=1]="Keep",n[n.Brackets=2]="Brackets",n[n.Advanced=3]="Advanced",n[n.Full=4]="Full"})(rE||(rE={}));var sE;(function(n){n[n.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",n[n.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",n[n.accessibilitySupport=2]="accessibilitySupport",n[n.accessibilityPageSize=3]="accessibilityPageSize",n[n.ariaLabel=4]="ariaLabel",n[n.ariaRequired=5]="ariaRequired",n[n.autoClosingBrackets=6]="autoClosingBrackets",n[n.autoClosingComments=7]="autoClosingComments",n[n.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",n[n.autoClosingDelete=9]="autoClosingDelete",n[n.autoClosingOvertype=10]="autoClosingOvertype",n[n.autoClosingQuotes=11]="autoClosingQuotes",n[n.autoIndent=12]="autoIndent",n[n.automaticLayout=13]="automaticLayout",n[n.autoSurround=14]="autoSurround",n[n.bracketPairColorization=15]="bracketPairColorization",n[n.guides=16]="guides",n[n.codeLens=17]="codeLens",n[n.codeLensFontFamily=18]="codeLensFontFamily",n[n.codeLensFontSize=19]="codeLensFontSize",n[n.colorDecorators=20]="colorDecorators",n[n.colorDecoratorsLimit=21]="colorDecoratorsLimit",n[n.columnSelection=22]="columnSelection",n[n.comments=23]="comments",n[n.contextmenu=24]="contextmenu",n[n.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",n[n.cursorBlinking=26]="cursorBlinking",n[n.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",n[n.cursorStyle=28]="cursorStyle",n[n.cursorSurroundingLines=29]="cursorSurroundingLines",n[n.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",n[n.cursorWidth=31]="cursorWidth",n[n.disableLayerHinting=32]="disableLayerHinting",n[n.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",n[n.domReadOnly=34]="domReadOnly",n[n.dragAndDrop=35]="dragAndDrop",n[n.dropIntoEditor=36]="dropIntoEditor",n[n.emptySelectionClipboard=37]="emptySelectionClipboard",n[n.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",n[n.extraEditorClassName=39]="extraEditorClassName",n[n.fastScrollSensitivity=40]="fastScrollSensitivity",n[n.find=41]="find",n[n.fixedOverflowWidgets=42]="fixedOverflowWidgets",n[n.folding=43]="folding",n[n.foldingStrategy=44]="foldingStrategy",n[n.foldingHighlight=45]="foldingHighlight",n[n.foldingImportsByDefault=46]="foldingImportsByDefault",n[n.foldingMaximumRegions=47]="foldingMaximumRegions",n[n.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",n[n.fontFamily=49]="fontFamily",n[n.fontInfo=50]="fontInfo",n[n.fontLigatures=51]="fontLigatures",n[n.fontSize=52]="fontSize",n[n.fontWeight=53]="fontWeight",n[n.fontVariations=54]="fontVariations",n[n.formatOnPaste=55]="formatOnPaste",n[n.formatOnType=56]="formatOnType",n[n.glyphMargin=57]="glyphMargin",n[n.gotoLocation=58]="gotoLocation",n[n.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",n[n.hover=60]="hover",n[n.inDiffEditor=61]="inDiffEditor",n[n.inlineSuggest=62]="inlineSuggest",n[n.inlineEdit=63]="inlineEdit",n[n.letterSpacing=64]="letterSpacing",n[n.lightbulb=65]="lightbulb",n[n.lineDecorationsWidth=66]="lineDecorationsWidth",n[n.lineHeight=67]="lineHeight",n[n.lineNumbers=68]="lineNumbers",n[n.lineNumbersMinChars=69]="lineNumbersMinChars",n[n.linkedEditing=70]="linkedEditing",n[n.links=71]="links",n[n.matchBrackets=72]="matchBrackets",n[n.minimap=73]="minimap",n[n.mouseStyle=74]="mouseStyle",n[n.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",n[n.mouseWheelZoom=76]="mouseWheelZoom",n[n.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",n[n.multiCursorModifier=78]="multiCursorModifier",n[n.multiCursorPaste=79]="multiCursorPaste",n[n.multiCursorLimit=80]="multiCursorLimit",n[n.occurrencesHighlight=81]="occurrencesHighlight",n[n.overviewRulerBorder=82]="overviewRulerBorder",n[n.overviewRulerLanes=83]="overviewRulerLanes",n[n.padding=84]="padding",n[n.pasteAs=85]="pasteAs",n[n.parameterHints=86]="parameterHints",n[n.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",n[n.placeholder=88]="placeholder",n[n.definitionLinkOpensInPeek=89]="definitionLinkOpensInPeek",n[n.quickSuggestions=90]="quickSuggestions",n[n.quickSuggestionsDelay=91]="quickSuggestionsDelay",n[n.readOnly=92]="readOnly",n[n.readOnlyMessage=93]="readOnlyMessage",n[n.renameOnType=94]="renameOnType",n[n.renderControlCharacters=95]="renderControlCharacters",n[n.renderFinalNewline=96]="renderFinalNewline",n[n.renderLineHighlight=97]="renderLineHighlight",n[n.renderLineHighlightOnlyWhenFocus=98]="renderLineHighlightOnlyWhenFocus",n[n.renderValidationDecorations=99]="renderValidationDecorations",n[n.renderWhitespace=100]="renderWhitespace",n[n.revealHorizontalRightPadding=101]="revealHorizontalRightPadding",n[n.roundedSelection=102]="roundedSelection",n[n.rulers=103]="rulers",n[n.scrollbar=104]="scrollbar",n[n.scrollBeyondLastColumn=105]="scrollBeyondLastColumn",n[n.scrollBeyondLastLine=106]="scrollBeyondLastLine",n[n.scrollPredominantAxis=107]="scrollPredominantAxis",n[n.selectionClipboard=108]="selectionClipboard",n[n.selectionHighlight=109]="selectionHighlight",n[n.selectOnLineNumbers=110]="selectOnLineNumbers",n[n.showFoldingControls=111]="showFoldingControls",n[n.showUnused=112]="showUnused",n[n.snippetSuggestions=113]="snippetSuggestions",n[n.smartSelect=114]="smartSelect",n[n.smoothScrolling=115]="smoothScrolling",n[n.stickyScroll=116]="stickyScroll",n[n.stickyTabStops=117]="stickyTabStops",n[n.stopRenderingLineAfter=118]="stopRenderingLineAfter",n[n.suggest=119]="suggest",n[n.suggestFontSize=120]="suggestFontSize",n[n.suggestLineHeight=121]="suggestLineHeight",n[n.suggestOnTriggerCharacters=122]="suggestOnTriggerCharacters",n[n.suggestSelection=123]="suggestSelection",n[n.tabCompletion=124]="tabCompletion",n[n.tabIndex=125]="tabIndex",n[n.unicodeHighlighting=126]="unicodeHighlighting",n[n.unusualLineTerminators=127]="unusualLineTerminators",n[n.useShadowDOM=128]="useShadowDOM",n[n.useTabStops=129]="useTabStops",n[n.wordBreak=130]="wordBreak",n[n.wordSegmenterLocales=131]="wordSegmenterLocales",n[n.wordSeparators=132]="wordSeparators",n[n.wordWrap=133]="wordWrap",n[n.wordWrapBreakAfterCharacters=134]="wordWrapBreakAfterCharacters",n[n.wordWrapBreakBeforeCharacters=135]="wordWrapBreakBeforeCharacters",n[n.wordWrapColumn=136]="wordWrapColumn",n[n.wordWrapOverride1=137]="wordWrapOverride1",n[n.wordWrapOverride2=138]="wordWrapOverride2",n[n.wrappingIndent=139]="wrappingIndent",n[n.wrappingStrategy=140]="wrappingStrategy",n[n.showDeprecated=141]="showDeprecated",n[n.inlayHints=142]="inlayHints",n[n.editorClassName=143]="editorClassName",n[n.pixelRatio=144]="pixelRatio",n[n.tabFocusMode=145]="tabFocusMode",n[n.layoutInfo=146]="layoutInfo",n[n.wrappingInfo=147]="wrappingInfo",n[n.defaultColorDecorators=148]="defaultColorDecorators",n[n.colorDecoratorsActivatedOn=149]="colorDecoratorsActivatedOn",n[n.inlineCompletionsAccessibilityVerbose=150]="inlineCompletionsAccessibilityVerbose"})(sE||(sE={}));var oE;(function(n){n[n.TextDefined=0]="TextDefined",n[n.LF=1]="LF",n[n.CRLF=2]="CRLF"})(oE||(oE={}));var aE;(function(n){n[n.LF=0]="LF",n[n.CRLF=1]="CRLF"})(aE||(aE={}));var lE;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=3]="Right"})(lE||(lE={}));var cE;(function(n){n[n.Increase=0]="Increase",n[n.Decrease=1]="Decrease"})(cE||(cE={}));var hE;(function(n){n[n.None=0]="None",n[n.Indent=1]="Indent",n[n.IndentOutdent=2]="IndentOutdent",n[n.Outdent=3]="Outdent"})(hE||(hE={}));var uE;(function(n){n[n.Both=0]="Both",n[n.Right=1]="Right",n[n.Left=2]="Left",n[n.None=3]="None"})(uE||(uE={}));var dE;(function(n){n[n.Type=1]="Type",n[n.Parameter=2]="Parameter"})(dE||(dE={}));var fE;(function(n){n[n.Automatic=0]="Automatic",n[n.Explicit=1]="Explicit"})(fE||(fE={}));var gE;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(gE||(gE={}));var mE;(function(n){n[n.DependsOnKbLayout=-1]="DependsOnKbLayout",n[n.Unknown=0]="Unknown",n[n.Backspace=1]="Backspace",n[n.Tab=2]="Tab",n[n.Enter=3]="Enter",n[n.Shift=4]="Shift",n[n.Ctrl=5]="Ctrl",n[n.Alt=6]="Alt",n[n.PauseBreak=7]="PauseBreak",n[n.CapsLock=8]="CapsLock",n[n.Escape=9]="Escape",n[n.Space=10]="Space",n[n.PageUp=11]="PageUp",n[n.PageDown=12]="PageDown",n[n.End=13]="End",n[n.Home=14]="Home",n[n.LeftArrow=15]="LeftArrow",n[n.UpArrow=16]="UpArrow",n[n.RightArrow=17]="RightArrow",n[n.DownArrow=18]="DownArrow",n[n.Insert=19]="Insert",n[n.Delete=20]="Delete",n[n.Digit0=21]="Digit0",n[n.Digit1=22]="Digit1",n[n.Digit2=23]="Digit2",n[n.Digit3=24]="Digit3",n[n.Digit4=25]="Digit4",n[n.Digit5=26]="Digit5",n[n.Digit6=27]="Digit6",n[n.Digit7=28]="Digit7",n[n.Digit8=29]="Digit8",n[n.Digit9=30]="Digit9",n[n.KeyA=31]="KeyA",n[n.KeyB=32]="KeyB",n[n.KeyC=33]="KeyC",n[n.KeyD=34]="KeyD",n[n.KeyE=35]="KeyE",n[n.KeyF=36]="KeyF",n[n.KeyG=37]="KeyG",n[n.KeyH=38]="KeyH",n[n.KeyI=39]="KeyI",n[n.KeyJ=40]="KeyJ",n[n.KeyK=41]="KeyK",n[n.KeyL=42]="KeyL",n[n.KeyM=43]="KeyM",n[n.KeyN=44]="KeyN",n[n.KeyO=45]="KeyO",n[n.KeyP=46]="KeyP",n[n.KeyQ=47]="KeyQ",n[n.KeyR=48]="KeyR",n[n.KeyS=49]="KeyS",n[n.KeyT=50]="KeyT",n[n.KeyU=51]="KeyU",n[n.KeyV=52]="KeyV",n[n.KeyW=53]="KeyW",n[n.KeyX=54]="KeyX",n[n.KeyY=55]="KeyY",n[n.KeyZ=56]="KeyZ",n[n.Meta=57]="Meta",n[n.ContextMenu=58]="ContextMenu",n[n.F1=59]="F1",n[n.F2=60]="F2",n[n.F3=61]="F3",n[n.F4=62]="F4",n[n.F5=63]="F5",n[n.F6=64]="F6",n[n.F7=65]="F7",n[n.F8=66]="F8",n[n.F9=67]="F9",n[n.F10=68]="F10",n[n.F11=69]="F11",n[n.F12=70]="F12",n[n.F13=71]="F13",n[n.F14=72]="F14",n[n.F15=73]="F15",n[n.F16=74]="F16",n[n.F17=75]="F17",n[n.F18=76]="F18",n[n.F19=77]="F19",n[n.F20=78]="F20",n[n.F21=79]="F21",n[n.F22=80]="F22",n[n.F23=81]="F23",n[n.F24=82]="F24",n[n.NumLock=83]="NumLock",n[n.ScrollLock=84]="ScrollLock",n[n.Semicolon=85]="Semicolon",n[n.Equal=86]="Equal",n[n.Comma=87]="Comma",n[n.Minus=88]="Minus",n[n.Period=89]="Period",n[n.Slash=90]="Slash",n[n.Backquote=91]="Backquote",n[n.BracketLeft=92]="BracketLeft",n[n.Backslash=93]="Backslash",n[n.BracketRight=94]="BracketRight",n[n.Quote=95]="Quote",n[n.OEM_8=96]="OEM_8",n[n.IntlBackslash=97]="IntlBackslash",n[n.Numpad0=98]="Numpad0",n[n.Numpad1=99]="Numpad1",n[n.Numpad2=100]="Numpad2",n[n.Numpad3=101]="Numpad3",n[n.Numpad4=102]="Numpad4",n[n.Numpad5=103]="Numpad5",n[n.Numpad6=104]="Numpad6",n[n.Numpad7=105]="Numpad7",n[n.Numpad8=106]="Numpad8",n[n.Numpad9=107]="Numpad9",n[n.NumpadMultiply=108]="NumpadMultiply",n[n.NumpadAdd=109]="NumpadAdd",n[n.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",n[n.NumpadSubtract=111]="NumpadSubtract",n[n.NumpadDecimal=112]="NumpadDecimal",n[n.NumpadDivide=113]="NumpadDivide",n[n.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",n[n.ABNT_C1=115]="ABNT_C1",n[n.ABNT_C2=116]="ABNT_C2",n[n.AudioVolumeMute=117]="AudioVolumeMute",n[n.AudioVolumeUp=118]="AudioVolumeUp",n[n.AudioVolumeDown=119]="AudioVolumeDown",n[n.BrowserSearch=120]="BrowserSearch",n[n.BrowserHome=121]="BrowserHome",n[n.BrowserBack=122]="BrowserBack",n[n.BrowserForward=123]="BrowserForward",n[n.MediaTrackNext=124]="MediaTrackNext",n[n.MediaTrackPrevious=125]="MediaTrackPrevious",n[n.MediaStop=126]="MediaStop",n[n.MediaPlayPause=127]="MediaPlayPause",n[n.LaunchMediaPlayer=128]="LaunchMediaPlayer",n[n.LaunchMail=129]="LaunchMail",n[n.LaunchApp2=130]="LaunchApp2",n[n.Clear=131]="Clear",n[n.MAX_VALUE=132]="MAX_VALUE"})(mE||(mE={}));var pE;(function(n){n[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error"})(pE||(pE={}));var bE;(function(n){n[n.Unnecessary=1]="Unnecessary",n[n.Deprecated=2]="Deprecated"})(bE||(bE={}));var _E;(function(n){n[n.Inline=1]="Inline",n[n.Gutter=2]="Gutter"})(_E||(_E={}));var vE;(function(n){n[n.Normal=1]="Normal",n[n.Underlined=2]="Underlined"})(vE||(vE={}));var wE;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.TEXTAREA=1]="TEXTAREA",n[n.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",n[n.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",n[n.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",n[n.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",n[n.CONTENT_TEXT=6]="CONTENT_TEXT",n[n.CONTENT_EMPTY=7]="CONTENT_EMPTY",n[n.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",n[n.CONTENT_WIDGET=9]="CONTENT_WIDGET",n[n.OVERVIEW_RULER=10]="OVERVIEW_RULER",n[n.SCROLLBAR=11]="SCROLLBAR",n[n.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",n[n.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(wE||(wE={}));var yE;(function(n){n[n.AIGenerated=1]="AIGenerated"})(yE||(yE={}));var CE;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(CE||(CE={}));var SE;(function(n){n[n.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",n[n.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",n[n.TOP_CENTER=2]="TOP_CENTER"})(SE||(SE={}));var xE;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=4]="Right",n[n.Full=7]="Full"})(xE||(xE={}));var kE;(function(n){n[n.Word=0]="Word",n[n.Line=1]="Line",n[n.Suggest=2]="Suggest"})(kE||(kE={}));var LE;(function(n){n[n.Left=0]="Left",n[n.Right=1]="Right",n[n.None=2]="None",n[n.LeftOfInjectedText=3]="LeftOfInjectedText",n[n.RightOfInjectedText=4]="RightOfInjectedText"})(LE||(LE={}));var TE;(function(n){n[n.Off=0]="Off",n[n.On=1]="On",n[n.Relative=2]="Relative",n[n.Interval=3]="Interval",n[n.Custom=4]="Custom"})(TE||(TE={}));var DE;(function(n){n[n.None=0]="None",n[n.Text=1]="Text",n[n.Blocks=2]="Blocks"})(DE||(DE={}));var EE;(function(n){n[n.Smooth=0]="Smooth",n[n.Immediate=1]="Immediate"})(EE||(EE={}));var IE;(function(n){n[n.Auto=1]="Auto",n[n.Hidden=2]="Hidden",n[n.Visible=3]="Visible"})(IE||(IE={}));var NE;(function(n){n[n.LTR=0]="LTR",n[n.RTL=1]="RTL"})(NE||(NE={}));var ME;(function(n){n.Off="off",n.OnCode="onCode",n.On="on"})(ME||(ME={}));var AE;(function(n){n[n.Invoke=1]="Invoke",n[n.TriggerCharacter=2]="TriggerCharacter",n[n.ContentChange=3]="ContentChange"})(AE||(AE={}));var RE;(function(n){n[n.File=0]="File",n[n.Module=1]="Module",n[n.Namespace=2]="Namespace",n[n.Package=3]="Package",n[n.Class=4]="Class",n[n.Method=5]="Method",n[n.Property=6]="Property",n[n.Field=7]="Field",n[n.Constructor=8]="Constructor",n[n.Enum=9]="Enum",n[n.Interface=10]="Interface",n[n.Function=11]="Function",n[n.Variable=12]="Variable",n[n.Constant=13]="Constant",n[n.String=14]="String",n[n.Number=15]="Number",n[n.Boolean=16]="Boolean",n[n.Array=17]="Array",n[n.Object=18]="Object",n[n.Key=19]="Key",n[n.Null=20]="Null",n[n.EnumMember=21]="EnumMember",n[n.Struct=22]="Struct",n[n.Event=23]="Event",n[n.Operator=24]="Operator",n[n.TypeParameter=25]="TypeParameter"})(RE||(RE={}));var PE;(function(n){n[n.Deprecated=1]="Deprecated"})(PE||(PE={}));var OE;(function(n){n[n.Hidden=0]="Hidden",n[n.Blink=1]="Blink",n[n.Smooth=2]="Smooth",n[n.Phase=3]="Phase",n[n.Expand=4]="Expand",n[n.Solid=5]="Solid"})(OE||(OE={}));var BE;(function(n){n[n.Line=1]="Line",n[n.Block=2]="Block",n[n.Underline=3]="Underline",n[n.LineThin=4]="LineThin",n[n.BlockOutline=5]="BlockOutline",n[n.UnderlineThin=6]="UnderlineThin"})(BE||(BE={}));var FE;(function(n){n[n.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",n[n.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",n[n.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",n[n.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(FE||(FE={}));var WE;(function(n){n[n.None=0]="None",n[n.Same=1]="Same",n[n.Indent=2]="Indent",n[n.DeepIndent=3]="DeepIndent"})(WE||(WE={}));var vu;let _fe=(vu=class{static chord(e,t){return jde(e,t)}},vu.CtrlCmd=2048,vu.Shift=1024,vu.Alt=512,vu.WinCtrl=256,vu);function UK(){return{editor:void 0,languages:void 0,CancellationTokenSource:ib,Emitter:de,KeyCode:mE,KeyMod:_fe,Position:be,Range:oe,Selection:$i,SelectionDirection:NE,MarkerSeverity:pE,MarkerTag:bE,Uri:Ut,Token:mw}}function vfe(n,e){const t=n;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:()=>e})}const Vi=window;function qK(n){return n}class wfe{constructor(e,t){this.lastCache=void 0,this.lastArgKey=void 0,typeof e=="function"?(this._fn=e,this._computeKey=qK):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}}class Cz{get cachedValues(){return this._map}constructor(e,t){this._map=new Map,this._map2=new Map,typeof e=="function"?(this._fn=e,this._computeKey=qK):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);const i=this._fn(e);return this._map.set(e,i),this._map2.set(t,i),i}}class cf{constructor(e){this.executor=e,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}function yfe(n){return!n||typeof n!="string"?!0:n.trim().length===0}const Cfe=/{(\d+)}/g;function zE(n,...e){return e.length===0?n:n.replace(Cfe,function(t,i){const r=parseInt(i,10);return isNaN(r)||r<0||r>=e.length?t:e[r]})}function Sfe(n){return n.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function cv(n){return n.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function Ou(n){return n.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function QL(n,e){if(!n||!e)return n;const t=e.length;if(t===0||n.length===0)return n;let i=0;for(;n.indexOf(e,i)===i;)i=i+t;return n.substring(i)}function xfe(n,e){if(!n||!e)return n;const t=e.length,i=n.length;if(t===0||i===0)return n;let r=i,s=-1;for(;s=n.lastIndexOf(e,r-1),!(s===-1||s+t!==r);){if(s===0)return"";r=s}return n.substring(0,r)}function kfe(n){return n.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function GK(n,e,t={}){if(!n)throw new Error("Cannot create regex from empty string");e||(n=Ou(n)),t.wholeWord&&(/\B/.test(n.charAt(0))||(n="\\b"+n),/\B/.test(n.charAt(n.length-1))||(n=n+"\\b"));let i="";return t.global&&(i+="g"),t.matchCase||(i+="i"),t.multiline&&(i+="m"),t.unicode&&(i+="u"),new RegExp(n,i)}function Lfe(n){return n.source==="^"||n.source==="^$"||n.source==="$"||n.source==="^\\s*$"?!1:!!(n.exec("")&&n.lastIndex===0)}function nb(n){return n.split(/\r\n|\r|\n/)}function qo(n){for(let e=0,t=n.length;e<t;e++){const i=n.charCodeAt(e);if(i!==32&&i!==9)return e}return-1}function js(n,e=0,t=n.length){for(let i=e;i<t;i++){const r=n.charCodeAt(i);if(r!==32&&r!==9)return n.substring(e,i)}return n.substring(e,t)}function jm(n,e=n.length-1){for(let t=e;t>=0;t--){const i=n.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function HE(n,e){return n<e?-1:n>e?1:0}function YM(n,e,t=0,i=n.length,r=0,s=e.length){for(;t<i&&r<s;t++,r++){const l=n.charCodeAt(t),c=e.charCodeAt(r);if(l<c)return-1;if(l>c)return 1}const o=i-t,a=s-r;return o<a?-1:o>a?1:0}function Sz(n,e){return Cy(n,e,0,n.length,0,e.length)}function Cy(n,e,t=0,i=n.length,r=0,s=e.length){for(;t<i&&r<s;t++,r++){let l=n.charCodeAt(t),c=e.charCodeAt(r);if(l===c)continue;if(l>=128||c>=128)return YM(n.toLowerCase(),e.toLowerCase(),t,i,r,s);n0(l)&&(l-=32),n0(c)&&(c-=32);const h=l-c;if(h!==0)return h}const o=i-t,a=s-r;return o<a?-1:o>a?1:0}function b2(n){return n>=48&&n<=57}function n0(n){return n>=97&&n<=122}function Id(n){return n>=65&&n<=90}function r0(n,e){return n.length===e.length&&Cy(n,e)===0}function ZM(n,e){const t=e.length;return e.length>n.length?!1:Cy(n,e,0,t)===0}function VE(n,e){const t=Math.min(n.length,e.length);let i;for(i=0;i<t;i++)if(n.charCodeAt(i)!==e.charCodeAt(i))return i;return t}function $E(n,e){const t=Math.min(n.length,e.length);let i;const r=n.length-1,s=e.length-1;for(i=0;i<t;i++)if(n.charCodeAt(r-i)!==e.charCodeAt(s-i))return i;return t}function Lr(n){return 55296<=n&&n<=56319}function S1(n){return 56320<=n&&n<=57343}function XM(n,e){return(n-55296<<10)+(e-56320)+65536}function Mx(n,e,t){const i=n.charCodeAt(t);if(Lr(i)&&t+1<e){const r=n.charCodeAt(t+1);if(S1(r))return XM(i,r)}return i}function Tfe(n,e){const t=n.charCodeAt(e-1);if(S1(t)&&e>1){const i=n.charCodeAt(e-2);if(Lr(i))return XM(i,t)}return t}class QM{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=Tfe(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=Mx(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class Ax{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new QM(e,t)}nextGraphemeLength(){const e=Rx.getInstance(),t=this._iterator,i=t.offset;let r=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,o=e.getGraphemeBreakType(t.nextCodePoint());if(xz(r,o)){t.setOffset(s);break}r=o}return t.offset-i}prevGraphemeLength(){const e=Rx.getInstance(),t=this._iterator,i=t.offset;let r=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,o=e.getGraphemeBreakType(t.prevCodePoint());if(xz(o,r)){t.setOffset(s);break}r=o}return i-t.offset}eol(){return this._iterator.eol()}}function JM(n,e){return new Ax(n,e).nextGraphemeLength()}function KK(n,e){return new Ax(n,e).prevGraphemeLength()}function Dfe(n,e){e>0&&S1(n.charCodeAt(e))&&e--;const t=e+JM(n,e);return[t-KK(n,t),t]}let ET;function Efe(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function pw(n){return ET||(ET=Efe()),ET.test(n)}const Ife=/^[\t\n\r\x20-\x7E]*$/;function eA(n){return Ife.test(n)}const YK=/[\u2028\u2029]/;function ZK(n){return YK.test(n)}function hf(n){return n>=11904&&n<=55215||n>=63744&&n<=64255||n>=65281&&n<=65374}function tA(n){return n>=127462&&n<=127487||n===8986||n===8987||n===9200||n===9203||n>=9728&&n<=10175||n===11088||n===11093||n>=127744&&n<=128591||n>=128640&&n<=128764||n>=128992&&n<=129008||n>=129280&&n<=129535||n>=129648&&n<=129782}const Nfe="\uFEFF";function iA(n){return!!(n&&n.length>0&&n.charCodeAt(0)===65279)}function XK(n){return n=n%(2*26),n<26?String.fromCharCode(97+n):String.fromCharCode(65+n-26)}function xz(n,e){return n===0?e!==5&&e!==7:n===2&&e===3?!1:n===4||n===2||n===3||e===4||e===2||e===3?!0:!(n===8&&(e===8||e===9||e===11||e===12)||(n===11||n===9)&&(e===9||e===10)||(n===12||n===10)&&e===10||e===5||e===13||e===7||n===1||n===13&&e===14||n===6&&e===6)}const Og=class Og{static getInstance(){return Og._INSTANCE||(Og._INSTANCE=new Og),Og._INSTANCE}constructor(){this._data=Mfe()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,i=t.length/3;let r=1;for(;r<=i;)if(e<t[3*r])r=2*r;else if(e>t[3*r+1])r=2*r+1;else return t[3*r+2];return 0}};Og._INSTANCE=null;let Rx=Og;function Mfe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function Afe(n,e){if(n===0)return 0;const t=Rfe(n,e);if(t!==void 0)return t;const i=new QM(e,n);return i.prevCodePoint(),i.offset}function Rfe(n,e){const t=new QM(e,n);let i=t.prevCodePoint();for(;Pfe(i)||i===65039||i===8419;){if(t.offset===0)return;i=t.prevCodePoint()}if(!tA(i))return;let r=t.offset;return r>0&&t.prevCodePoint()===8205&&(r=t.offset),r}function Pfe(n){return 127995<=n&&n<=127999}const Hc=class Hc{static getInstance(e){return Hc.cache.get(Array.from(e))}static getLocales(){return Hc._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};Hc.ambiguousCharacterData=new cf(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')),Hc.cache=new wfe({getCacheKey:JSON.stringify},e=>{function t(h){const u=new Map;for(let d=0;d<h.length;d+=2)u.set(h[d],h[d+1]);return u}function i(h,u){const d=new Map(h);for(const[g,p]of u)d.set(g,p);return d}function r(h,u){if(!h)return u;const d=new Map;for(const[g,p]of h)u.has(g)&&d.set(g,p);return d}const s=Hc.ambiguousCharacterData.value;let o=e.filter(h=>!h.startsWith("_")&&h in s);o.length===0&&(o=["_default"]);let a;for(const h of o){const u=t(s[h]);a=r(a,u)}const l=t(s._common),c=i(l,a);return new Hc(c)}),Hc._locales=new cf(()=>Object.keys(Hc.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")));let bw=Hc;const k0=class k0{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(k0.getRawData())),this._data}static isInvisibleCharacter(e){return k0.getData().has(e)}static get codePoints(){return k0.getData()}};k0._data=void 0;let hv=k0;const J4=class J4{constructor(){this.mapWindowIdToZoomFactor=new Map}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}getWindowId(e){return e.vscodeWindowId}};J4.INSTANCE=new J4;let jE=J4;function QK(n,e,t){typeof e=="string"&&(e=n.matchMedia(e)),e.addEventListener("change",t)}function Ofe(n){return jE.INSTANCE.getZoomFactor(n)}const rb=navigator.userAgent,Cl=rb.indexOf("Firefox")>=0,JL=rb.indexOf("AppleWebKit")>=0,Sy=rb.indexOf("Chrome")>=0,uf=!Sy&&rb.indexOf("Safari")>=0,JK=!Sy&&!uf&&JL;rb.indexOf("Electron/")>=0;const kz=rb.indexOf("Android")>=0;let IT=!1;if(typeof Vi.matchMedia=="function"){const n=Vi.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=Vi.matchMedia("(display-mode: fullscreen)");IT=n.matches,QK(Vi,n,({matches:t})=>{IT&&e.matches||(IT=t)})}const eY={clipboard:{writeText:Lx||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:Lx||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},pointerEvents:Vi.PointerEvent&&("ontouchstart"in Vi||navigator.maxTouchPoints>0)};function UE(n,e){if(typeof n=="number"){if(n===0)return null;const t=(n&65535)>>>0,i=(n&4294901760)>>>16;return i!==0?new NT([_2(t,e),_2(i,e)]):new NT([_2(t,e)])}else{const t=[];for(let i=0;i<n.length;i++)t.push(_2(n[i],e));return new NT(t)}}function _2(n,e){const t=!!(n&2048),i=!!(n&256),r=e===2?i:t,s=!!(n&1024),o=!!(n&512),a=e===2?t:i,l=n&255;return new Sm(r,s,o,a,l)}class Sm{constructor(e,t,i,r,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=r,this.keyCode=s}equals(e){return e instanceof Sm&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class NT{constructor(e){if(e.length===0)throw ZL("chords");this.chords=e}}class Bfe{constructor(e,t,i,r,s,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=r,this.keyLabel=s,this.keyAriaLabel=o}}class Ffe{}function Wfe(n){if(n.charCode){const t=String.fromCharCode(n.charCode).toUpperCase();return ou.fromString(t)}const e=n.keyCode;if(e===3)return 7;if(Cl)switch(e){case 59:return 85;case 60:if(wo)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(hi)return 57;break}else if(JL){if(hi&&e===93)return 57;if(!hi&&e===92)return 57}return PK[e]||0}const zfe=hi?256:2048,Hfe=512,Vfe=1024,$fe=hi?2048:256;class en{constructor(e){this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState?.("AltGraph"),this.keyCode=Wfe(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=zfe),this.altKey&&(t|=Hfe),this.shiftKey&&(t|=Vfe),this.metaKey&&(t|=$fe),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Sm(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}const Lz=new WeakMap;function jfe(n){if(!n.parent||n.parent===n)return null;try{const e=n.location,t=n.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return n.parent}class Ufe{static getSameOriginWindowChain(e){let t=Lz.get(e);if(!t){t=[],Lz.set(e,t);let i=e,r;do r=jfe(i),r?t.push({window:new WeakRef(i),iframeElement:i.frameElement||null}):t.push({window:new WeakRef(i),iframeElement:null}),i=r;while(i)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,r=0;const s=this.getSameOriginWindowChain(e);for(const o of s){const a=o.window.deref();if(i+=a?.scrollY??0,r+=a?.scrollX??0,a===t||!o.iframeElement)break;const l=o.iframeElement.getBoundingClientRect();i+=l.top,r+=l.left}return{top:i,left:r}}}class ac{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const i=Ufe.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=i.left,this.posy-=i.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class xm{constructor(e,t=0,i=0){this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t;let r=!1;if(Sy){const s=navigator.userAgent.match(/Chrome\/(\d+)/);r=(s?parseInt(s[1]):123)<=122}if(e){const s=e,o=e,a=e.view?.devicePixelRatio||1;if(typeof s.wheelDeltaY<"u")r?this.deltaY=s.wheelDeltaY/(120*a):this.deltaY=s.wheelDeltaY/120;else if(typeof o.VERTICAL_AXIS<"u"&&o.axis===o.VERTICAL_AXIS)this.deltaY=-o.detail/3;else if(e.type==="wheel"){const l=e;l.deltaMode===l.DOM_DELTA_LINE?Cl&&!hi?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof s.wheelDeltaX<"u")uf&&Go?this.deltaX=-(s.wheelDeltaX/120):r?this.deltaX=s.wheelDeltaX/(120*a):this.deltaX=s.wheelDeltaX/120;else if(typeof o.HORIZONTAL_AXIS<"u"&&o.axis===o.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const l=e;l.deltaMode===l.DOM_DELTA_LINE?Cl&&!hi?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(r?this.deltaY=e.wheelDelta/(120*a):this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}}const tY=Symbol("MicrotaskDelay");function qE(n){return!!n&&typeof n.then=="function"}function iY(n){const e=new ib,t=n(e.token),i=new Promise((r,s)=>{const o=e.token.onCancellationRequested(()=>{o.dispose(),s(new wy)});Promise.resolve(t).then(a=>{o.dispose(),e.dispose(),r(a)},a=>{o.dispose(),e.dispose(),s(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(r,s){return i.then(r,s)}catch(r){return this.then(void 0,r)}finally(r){return i.finally(r)}}}class qfe{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{if(this.queuedPromise=null,this.isDisposed)return;const i=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,i};this.queuedPromise=new Promise(i=>{this.activePromise.then(t,t).then(i)})}return new Promise((t,i)=>{this.queuedPromise.then(t,i)})}return this.activePromise=e(),new Promise((t,i)=>{this.activePromise.then(r=>{this.activePromise=null,t(r)},r=>{this.activePromise=null,i(r)})})}dispose(){this.isDisposed=!0}}const Gfe=(n,e)=>{let t=!0;const i=setTimeout(()=>{t=!1,e()},n);return{isTriggered:()=>t,dispose:()=>{clearTimeout(i),t=!1}}},Kfe=n=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,n())}),{isTriggered:()=>e,dispose:()=>{e=!1}}};class xy{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((r,s)=>{this.doResolve=r,this.doReject=s}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const r=this.task;return this.task=null,r()}}));const i=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=t===tY?Kfe(i):Gfe(t,i),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new wy),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}class nY{constructor(e){this.delayer=new xy(e),this.throttler=new qfe}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function _w(n,e){return e?new Promise((t,i)=>{const r=setTimeout(()=>{s.dispose(),t()},n),s=e.onCancellationRequested(()=>{clearTimeout(r),s.dispose(),i(new wy)})}):iY(t=>_w(n,t))}function GE(n,e=0,t){const i=setTimeout(()=>{n(),t&&r.dispose()},e),r=Mt(()=>{clearTimeout(i),t?.deleteAndLeak(r)});return t?.add(r),r}class Um{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new Ti("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new Ti("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class nA{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,t,i=globalThis){if(this.isDisposed)throw new Ti("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const r=i.setInterval(()=>{e()},t);this.disposable=Mt(()=>{i.clearInterval(r),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}}class Gs{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}}let rY,uv;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?uv=(n,e)=>{xK(()=>{if(t)return;const i=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:uv=(n,e,t)=>{const i=n.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0);let r=!1;return{dispose(){r||(r=!0,n.cancelIdleCallback(i))}}},rY=n=>uv(globalThis,n)})();class Yfe{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(i){this._error=i}finally{this._didRun=!0}},this._handle=uv(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class Zfe extends Yfe{constructor(e){super(globalThis,e)}}class sY{get isRejected(){return this.outcome?.outcome===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new wy)}}var KE;(function(n){async function e(i){let r;const s=await Promise.all(i.map(o=>o.then(a=>a,a=>{r||(r=a)})));if(typeof r<"u")throw r;return s}n.settled=e;function t(i){return new Promise(async(r,s)=>{try{await i(r,s)}catch(o){s(o)}})}n.withAsyncBody=t})(KE||(KE={}));const Po=class Po{static fromArray(e){return new Po(t=>{t.emitMany(e)})}static fromPromise(e){return new Po(async t=>{t.emitMany(await e)})}static fromPromises(e){return new Po(async t=>{await Promise.all(e.map(async i=>t.emitOne(await i)))})}static merge(e){return new Po(async t=>{await Promise.all(e.map(async i=>{for await(const r of i)t.emitOne(r)}))})}constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new de,queueMicrotask(async()=>{const i={emitOne:r=>this.emitOne(r),emitMany:r=>this.emitMany(r),reject:r=>this.reject(r)};try{await Promise.resolve(e(i)),this.resolve()}catch(r){this.reject(r)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await Oe.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(e,t){return new Po(async i=>{for await(const r of e)i.emitOne(t(r))})}map(e){return Po.map(this,e)}static filter(e,t){return new Po(async i=>{for await(const r of e)t(r)&&i.emitOne(r)})}filter(e){return Po.filter(this,e)}static coalesce(e){return Po.filter(e,t=>!!t)}coalesce(){return Po.coalesce(this)}static async toPromise(e){const t=[];for await(const i of e)t.push(i);return t}toPromise(){return Po.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};Po.EMPTY=Po.fromArray([]);let Tz=Po;/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:oY,setPrototypeOf:Dz,isFrozen:Xfe,getPrototypeOf:Qfe,getOwnPropertyDescriptor:Jfe}=Object;let{freeze:Ko,seal:Sl,create:aY}=Object,{apply:YE,construct:ZE}=typeof Reflect<"u"&&Reflect;Ko||(Ko=function(e){return e});Sl||(Sl=function(e){return e});YE||(YE=function(e,t,i){return e.apply(t,i)});ZE||(ZE=function(e,t){return new e(...t)});const v2=Za(Array.prototype.forEach),Ez=Za(Array.prototype.pop),s_=Za(Array.prototype.push),MS=Za(String.prototype.toLowerCase),MT=Za(String.prototype.toString),Iz=Za(String.prototype.match),o_=Za(String.prototype.replace),ege=Za(String.prototype.indexOf),tge=Za(String.prototype.trim),ql=Za(Object.prototype.hasOwnProperty),Io=Za(RegExp.prototype.test),a_=ige(TypeError);function Za(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return YE(n,e,i)}}function ige(n){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return ZE(n,t)}}function Pi(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:MS;Dz&&Dz(n,null);let i=e.length;for(;i--;){let r=e[i];if(typeof r=="string"){const s=t(r);s!==r&&(Xfe(e)||(e[i]=s),r=s)}n[r]=!0}return n}function nge(n){for(let e=0;e<n.length;e++)ql(n,e)||(n[e]=null);return n}function hg(n){const e=aY(null);for(const[t,i]of oY(n))ql(n,t)&&(Array.isArray(i)?e[t]=nge(i):i&&typeof i=="object"&&i.constructor===Object?e[t]=hg(i):e[t]=i);return e}function l_(n,e){for(;n!==null;){const i=Jfe(n,e);if(i){if(i.get)return Za(i.get);if(typeof i.value=="function")return Za(i.value)}n=Qfe(n)}function t(){return null}return t}const Nz=Ko(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),AT=Ko(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),RT=Ko(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),rge=Ko(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),PT=Ko(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),sge=Ko(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Mz=Ko(["#text"]),Az=Ko(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),OT=Ko(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Rz=Ko(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),w2=Ko(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),oge=Sl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),age=Sl(/<%[\w\W]*|[\w\W]*%>/gm),lge=Sl(/\${[\w\W]*}/gm),cge=Sl(/^data-[\-\w.\u00B7-\uFFFF]/),hge=Sl(/^aria-[\-\w]+$/),lY=Sl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),uge=Sl(/^(?:\w+script|data):/i),dge=Sl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),cY=Sl(/^html$/i),fge=Sl(/^[a-z][.\w]*(-[.\w]+)+$/i);var Pz=Object.freeze({__proto__:null,MUSTACHE_EXPR:oge,ERB_EXPR:age,TMPLIT_EXPR:lge,DATA_ATTR:cge,ARIA_ATTR:hge,IS_ALLOWED_URI:lY,IS_SCRIPT_OR_DATA:uge,ATTR_WHITESPACE:dge,DOCTYPE_NAME:cY,CUSTOM_ELEMENT:fge});const c_={element:1,text:3,progressingInstruction:7,comment:8,document:9},gge=function(){return typeof window>"u"?null:window},mge=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(i=t.getAttribute(r));const s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function hY(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gge();const e=Ne=>hY(Ne);if(e.version="3.1.7",e.removed=[],!n||!n.document||n.document.nodeType!==c_.document)return e.isSupported=!1,e;let{document:t}=n;const i=t,r=i.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:h=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:u,DOMParser:d,trustedTypes:g}=n,p=l.prototype,b=l_(p,"cloneNode"),_=l_(p,"remove"),w=l_(p,"nextSibling"),y=l_(p,"childNodes"),k=l_(p,"parentNode");if(typeof o=="function"){const Ne=t.createElement("template");Ne.content&&Ne.content.ownerDocument&&(t=Ne.content.ownerDocument)}let L,T="";const{implementation:N,createNodeIterator:D,createDocumentFragment:O,getElementsByTagName:B}=t,{importNode:G}=i;let H={};e.isSupported=typeof oY=="function"&&typeof k=="function"&&N&&N.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:q,ERB_EXPR:X,TMPLIT_EXPR:z,DATA_ATTR:Q,ARIA_ATTR:te,IS_SCRIPT_OR_DATA:se,ATTR_WHITESPACE:Y,CUSTOM_ELEMENT:ae}=Pz;let{IS_ALLOWED_URI:fe}=Pz,J=null;const ge=Pi({},[...Nz,...AT,...RT,...PT,...Mz]);let Le=null;const We=Pi({},[...Az,...OT,...Rz,...w2]);let Ie=Object.seal(aY(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ze=null,ct=null,ot=!0,Ot=!0,$t=!1,yn=!0,vi=!1,nn=!0,rn=!1,ss=!1,Vn=!1,Kn=!1,Nr=!1,or=!1,ys=!0,eo=!1;const el="user-content-";let ko=!0,Jn=!1,$n={},Mr=null;const Os=Pi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ar=null;const ar=Pi({},["audio","video","img","source","image","track"]);let wr=null;const Ln=Pi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),os="http://www.w3.org/1998/Math/MathML",jn="http://www.w3.org/2000/svg",Ai="http://www.w3.org/1999/xhtml";let er=Ai,Bs=!1,Rr=null;const xi=Pi({},[os,jn,Ai],MT);let Pr=null;const Lo=["application/xhtml+xml","text/html"],to="text/html";let Ri=null,To=null;const Rl=t.createElement("form"),Tn=function(W){return W instanceof RegExp||W instanceof Function},Cs=function(){let W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(To&&To===W)){if((!W||typeof W!="object")&&(W={}),W=hg(W),Pr=Lo.indexOf(W.PARSER_MEDIA_TYPE)===-1?to:W.PARSER_MEDIA_TYPE,Ri=Pr==="application/xhtml+xml"?MT:MS,J=ql(W,"ALLOWED_TAGS")?Pi({},W.ALLOWED_TAGS,Ri):ge,Le=ql(W,"ALLOWED_ATTR")?Pi({},W.ALLOWED_ATTR,Ri):We,Rr=ql(W,"ALLOWED_NAMESPACES")?Pi({},W.ALLOWED_NAMESPACES,MT):xi,wr=ql(W,"ADD_URI_SAFE_ATTR")?Pi(hg(Ln),W.ADD_URI_SAFE_ATTR,Ri):Ln,Ar=ql(W,"ADD_DATA_URI_TAGS")?Pi(hg(ar),W.ADD_DATA_URI_TAGS,Ri):ar,Mr=ql(W,"FORBID_CONTENTS")?Pi({},W.FORBID_CONTENTS,Ri):Os,Ze=ql(W,"FORBID_TAGS")?Pi({},W.FORBID_TAGS,Ri):{},ct=ql(W,"FORBID_ATTR")?Pi({},W.FORBID_ATTR,Ri):{},$n=ql(W,"USE_PROFILES")?W.USE_PROFILES:!1,ot=W.ALLOW_ARIA_ATTR!==!1,Ot=W.ALLOW_DATA_ATTR!==!1,$t=W.ALLOW_UNKNOWN_PROTOCOLS||!1,yn=W.ALLOW_SELF_CLOSE_IN_ATTR!==!1,vi=W.SAFE_FOR_TEMPLATES||!1,nn=W.SAFE_FOR_XML!==!1,rn=W.WHOLE_DOCUMENT||!1,Kn=W.RETURN_DOM||!1,Nr=W.RETURN_DOM_FRAGMENT||!1,or=W.RETURN_TRUSTED_TYPE||!1,Vn=W.FORCE_BODY||!1,ys=W.SANITIZE_DOM!==!1,eo=W.SANITIZE_NAMED_PROPS||!1,ko=W.KEEP_CONTENT!==!1,Jn=W.IN_PLACE||!1,fe=W.ALLOWED_URI_REGEXP||lY,er=W.NAMESPACE||Ai,Ie=W.CUSTOM_ELEMENT_HANDLING||{},W.CUSTOM_ELEMENT_HANDLING&&Tn(W.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ie.tagNameCheck=W.CUSTOM_ELEMENT_HANDLING.tagNameCheck),W.CUSTOM_ELEMENT_HANDLING&&Tn(W.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ie.attributeNameCheck=W.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),W.CUSTOM_ELEMENT_HANDLING&&typeof W.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ie.allowCustomizedBuiltInElements=W.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),vi&&(Ot=!1),Nr&&(Kn=!0),$n&&(J=Pi({},Mz),Le=[],$n.html===!0&&(Pi(J,Nz),Pi(Le,Az)),$n.svg===!0&&(Pi(J,AT),Pi(Le,OT),Pi(Le,w2)),$n.svgFilters===!0&&(Pi(J,RT),Pi(Le,OT),Pi(Le,w2)),$n.mathMl===!0&&(Pi(J,PT),Pi(Le,Rz),Pi(Le,w2))),W.ADD_TAGS&&(J===ge&&(J=hg(J)),Pi(J,W.ADD_TAGS,Ri)),W.ADD_ATTR&&(Le===We&&(Le=hg(Le)),Pi(Le,W.ADD_ATTR,Ri)),W.ADD_URI_SAFE_ATTR&&Pi(wr,W.ADD_URI_SAFE_ATTR,Ri),W.FORBID_CONTENTS&&(Mr===Os&&(Mr=hg(Mr)),Pi(Mr,W.FORBID_CONTENTS,Ri)),ko&&(J["#text"]=!0),rn&&Pi(J,["html","head","body"]),J.table&&(Pi(J,["tbody"]),delete Ze.tbody),W.TRUSTED_TYPES_POLICY){if(typeof W.TRUSTED_TYPES_POLICY.createHTML!="function")throw a_('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof W.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw a_('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');L=W.TRUSTED_TYPES_POLICY,T=L.createHTML("")}else L===void 0&&(L=mge(g,r)),L!==null&&typeof T=="string"&&(T=L.createHTML(""));Ko&&Ko(W),To=W}},At=Pi({},["mi","mo","mn","ms","mtext"]),K=Pi({},["annotation-xml"]),ee=Pi({},["title","style","font","a","script"]),re=Pi({},[...AT,...RT,...rge]),F=Pi({},[...PT,...sge]),j=function(W){let pe=k(W);(!pe||!pe.tagName)&&(pe={namespaceURI:er,tagName:"template"});const Ae=MS(W.tagName),Bt=MS(pe.tagName);return Rr[W.namespaceURI]?W.namespaceURI===jn?pe.namespaceURI===Ai?Ae==="svg":pe.namespaceURI===os?Ae==="svg"&&(Bt==="annotation-xml"||At[Bt]):!!re[Ae]:W.namespaceURI===os?pe.namespaceURI===Ai?Ae==="math":pe.namespaceURI===jn?Ae==="math"&&K[Bt]:!!F[Ae]:W.namespaceURI===Ai?pe.namespaceURI===jn&&!K[Bt]||pe.namespaceURI===os&&!At[Bt]?!1:!F[Ae]&&(ee[Ae]||!re[Ae]):!!(Pr==="application/xhtml+xml"&&Rr[W.namespaceURI]):!1},ne=function(W){s_(e.removed,{element:W});try{k(W).removeChild(W)}catch{_(W)}},he=function(W,pe){try{s_(e.removed,{attribute:pe.getAttributeNode(W),from:pe})}catch{s_(e.removed,{attribute:null,from:pe})}if(pe.removeAttribute(W),W==="is"&&!Le[W])if(Kn||Nr)try{ne(pe)}catch{}else try{pe.setAttribute(W,"")}catch{}},Ce=function(W){let pe=null,Ae=null;if(Vn)W="<remove></remove>"+W;else{const gt=Iz(W,/^[\r\n\t ]+/);Ae=gt&&gt[0]}Pr==="application/xhtml+xml"&&er===Ai&&(W='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+W+"</body></html>");const Bt=L?L.createHTML(W):W;if(er===Ai)try{pe=new d().parseFromString(Bt,Pr)}catch{}if(!pe||!pe.documentElement){pe=N.createDocument(er,"template",null);try{pe.documentElement.innerHTML=Bs?T:Bt}catch{}}const mi=pe.body||pe.documentElement;return W&&Ae&&mi.insertBefore(t.createTextNode(Ae),mi.childNodes[0]||null),er===Ai?B.call(pe,rn?"html":"body")[0]:rn?pe.documentElement:mi},Re=function(W){return D.call(W.ownerDocument||W,W,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Ve=function(W){return W instanceof u&&(typeof W.nodeName!="string"||typeof W.textContent!="string"||typeof W.removeChild!="function"||!(W.attributes instanceof h)||typeof W.removeAttribute!="function"||typeof W.setAttribute!="function"||typeof W.namespaceURI!="string"||typeof W.insertBefore!="function"||typeof W.hasChildNodes!="function")},$e=function(W){return typeof a=="function"&&W instanceof a},He=function(W,pe,Ae){H[W]&&v2(H[W],Bt=>{Bt.call(e,pe,Ae,To)})},tt=function(W){let pe=null;if(He("beforeSanitizeElements",W,null),Ve(W))return ne(W),!0;const Ae=Ri(W.nodeName);if(He("uponSanitizeElement",W,{tagName:Ae,allowedTags:J}),W.hasChildNodes()&&!$e(W.firstElementChild)&&Io(/<[/\w]/g,W.innerHTML)&&Io(/<[/\w]/g,W.textContent)||W.nodeType===c_.progressingInstruction||nn&&W.nodeType===c_.comment&&Io(/<[/\w]/g,W.data))return ne(W),!0;if(!J[Ae]||Ze[Ae]){if(!Ze[Ae]&&xt(Ae)&&(Ie.tagNameCheck instanceof RegExp&&Io(Ie.tagNameCheck,Ae)||Ie.tagNameCheck instanceof Function&&Ie.tagNameCheck(Ae)))return!1;if(ko&&!Mr[Ae]){const Bt=k(W)||W.parentNode,mi=y(W)||W.childNodes;if(mi&&Bt){const gt=mi.length;for(let Ui=gt-1;Ui>=0;--Ui){const mn=b(mi[Ui],!0);mn.__removalCount=(W.__removalCount||0)+1,Bt.insertBefore(mn,w(W))}}}return ne(W),!0}return W instanceof l&&!j(W)||(Ae==="noscript"||Ae==="noembed"||Ae==="noframes")&&Io(/<\/no(script|embed|frames)/i,W.innerHTML)?(ne(W),!0):(vi&&W.nodeType===c_.text&&(pe=W.textContent,v2([q,X,z],Bt=>{pe=o_(pe,Bt," ")}),W.textContent!==pe&&(s_(e.removed,{element:W.cloneNode()}),W.textContent=pe)),He("afterSanitizeElements",W,null),!1)},Ke=function(W,pe,Ae){if(ys&&(pe==="id"||pe==="name")&&(Ae in t||Ae in Rl))return!1;if(!(Ot&&!ct[pe]&&Io(Q,pe))){if(!(ot&&Io(te,pe))){if(!Le[pe]||ct[pe]){if(!(xt(W)&&(Ie.tagNameCheck instanceof RegExp&&Io(Ie.tagNameCheck,W)||Ie.tagNameCheck instanceof Function&&Ie.tagNameCheck(W))&&(Ie.attributeNameCheck instanceof RegExp&&Io(Ie.attributeNameCheck,pe)||Ie.attributeNameCheck instanceof Function&&Ie.attributeNameCheck(pe))||pe==="is"&&Ie.allowCustomizedBuiltInElements&&(Ie.tagNameCheck instanceof RegExp&&Io(Ie.tagNameCheck,Ae)||Ie.tagNameCheck instanceof Function&&Ie.tagNameCheck(Ae))))return!1}else if(!wr[pe]){if(!Io(fe,o_(Ae,Y,""))){if(!((pe==="src"||pe==="xlink:href"||pe==="href")&&W!=="script"&&ege(Ae,"data:")===0&&Ar[W])){if(!($t&&!Io(se,o_(Ae,Y,"")))){if(Ae)return!1}}}}}}return!0},xt=function(W){return W!=="annotation-xml"&&Iz(W,ae)},jt=function(W){He("beforeSanitizeAttributes",W,null);const{attributes:pe}=W;if(!pe)return;const Ae={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Le};let Bt=pe.length;for(;Bt--;){const mi=pe[Bt],{name:gt,namespaceURI:Ui,value:mn}=mi,lr=Ri(gt);let Cn=gt==="value"?mn:tge(mn);if(Ae.attrName=lr,Ae.attrValue=Cn,Ae.keepAttr=!0,Ae.forceKeepAttr=void 0,He("uponSanitizeAttribute",W,Ae),Cn=Ae.attrValue,Ae.forceKeepAttr||(he(gt,W),!Ae.keepAttr))continue;if(!yn&&Io(/\/>/i,Cn)){he(gt,W);continue}vi&&v2([q,X,z],ki=>{Cn=o_(Cn,ki," ")});const Rn=Ri(W.nodeName);if(Ke(Rn,lr,Cn)){if(eo&&(lr==="id"||lr==="name")&&(he(gt,W),Cn=el+Cn),nn&&Io(/((--!?|])>)|<\/(style|title)/i,Cn)){he(gt,W);continue}if(L&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!Ui)switch(g.getAttributeType(Rn,lr)){case"TrustedHTML":{Cn=L.createHTML(Cn);break}case"TrustedScriptURL":{Cn=L.createScriptURL(Cn);break}}try{Ui?W.setAttributeNS(Ui,gt,Cn):W.setAttribute(gt,Cn),Ve(W)?ne(W):Ez(e.removed)}catch{}}}He("afterSanitizeAttributes",W,null)},An=function Ne(W){let pe=null;const Ae=Re(W);for(He("beforeSanitizeShadowDOM",W,null);pe=Ae.nextNode();)He("uponSanitizeShadowNode",pe,null),!tt(pe)&&(pe.content instanceof s&&Ne(pe.content),jt(pe));He("afterSanitizeShadowDOM",W,null)};return e.sanitize=function(Ne){let W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=null,Ae=null,Bt=null,mi=null;if(Bs=!Ne,Bs&&(Ne="<!-->"),typeof Ne!="string"&&!$e(Ne))if(typeof Ne.toString=="function"){if(Ne=Ne.toString(),typeof Ne!="string")throw a_("dirty is not a string, aborting")}else throw a_("toString is not a function");if(!e.isSupported)return Ne;if(ss||Cs(W),e.removed=[],typeof Ne=="string"&&(Jn=!1),Jn){if(Ne.nodeName){const mn=Ri(Ne.nodeName);if(!J[mn]||Ze[mn])throw a_("root node is forbidden and cannot be sanitized in-place")}}else if(Ne instanceof a)pe=Ce("<!---->"),Ae=pe.ownerDocument.importNode(Ne,!0),Ae.nodeType===c_.element&&Ae.nodeName==="BODY"||Ae.nodeName==="HTML"?pe=Ae:pe.appendChild(Ae);else{if(!Kn&&!vi&&!rn&&Ne.indexOf("<")===-1)return L&&or?L.createHTML(Ne):Ne;if(pe=Ce(Ne),!pe)return Kn?null:or?T:""}pe&&Vn&&ne(pe.firstChild);const gt=Re(Jn?Ne:pe);for(;Bt=gt.nextNode();)tt(Bt)||(Bt.content instanceof s&&An(Bt.content),jt(Bt));if(Jn)return Ne;if(Kn){if(Nr)for(mi=O.call(pe.ownerDocument);pe.firstChild;)mi.appendChild(pe.firstChild);else mi=pe;return(Le.shadowroot||Le.shadowrootmode)&&(mi=G.call(i,mi,!0)),mi}let Ui=rn?pe.outerHTML:pe.innerHTML;return rn&&J["!doctype"]&&pe.ownerDocument&&pe.ownerDocument.doctype&&pe.ownerDocument.doctype.name&&Io(cY,pe.ownerDocument.doctype.name)&&(Ui="<!DOCTYPE "+pe.ownerDocument.doctype.name+`>
`+Ui),vi&&v2([q,X,z],mn=>{Ui=o_(Ui,mn," ")}),L&&or?L.createHTML(Ui):Ui},e.setConfig=function(){let Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Cs(Ne),ss=!0},e.clearConfig=function(){To=null,ss=!1},e.isValidAttribute=function(Ne,W,pe){To||Cs({});const Ae=Ri(Ne),Bt=Ri(W);return Ke(Ae,Bt,pe)},e.addHook=function(Ne,W){typeof W=="function"&&(H[Ne]=H[Ne]||[],s_(H[Ne],W))},e.removeHook=function(Ne){if(H[Ne])return Ez(H[Ne])},e.removeHooks=function(Ne){H[Ne]&&(H[Ne]=[])},e.removeAllHooks=function(){H={}},e}var gh=hY();gh.version;gh.isSupported;const uY=gh.sanitize;gh.setConfig;gh.clearConfig;gh.isValidAttribute;const dY=gh.addHook,fY=gh.removeHook;gh.removeHooks;gh.removeAllHooks;var Vt;(function(n){n.inMemory="inmemory",n.vscode="vscode",n.internal="private",n.walkThrough="walkThrough",n.walkThroughSnippet="walkThroughSnippet",n.http="http",n.https="https",n.file="file",n.mailto="mailto",n.untitled="untitled",n.data="data",n.command="command",n.vscodeRemote="vscode-remote",n.vscodeRemoteResource="vscode-remote-resource",n.vscodeManagedRemoteResource="vscode-managed-remote-resource",n.vscodeUserData="vscode-userdata",n.vscodeCustomEditor="vscode-custom-editor",n.vscodeNotebookCell="vscode-notebook-cell",n.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",n.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",n.vscodeNotebookCellOutput="vscode-notebook-cell-output",n.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",n.vscodeNotebookMetadata="vscode-notebook-metadata",n.vscodeInteractiveInput="vscode-interactive-input",n.vscodeSettings="vscode-settings",n.vscodeWorkspaceTrust="vscode-workspace-trust",n.vscodeTerminal="vscode-terminal",n.vscodeChatCodeBlock="vscode-chat-code-block",n.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",n.vscodeChatSesssion="vscode-chat-editor",n.webviewPanel="webview-panel",n.vscodeWebview="vscode-webview",n.extension="extension",n.vscodeFileResource="vscode-file",n.tmp="tmp",n.vsls="vsls",n.vscodeSourceControl="vscode-scm",n.commentsInput="comment",n.codeSetting="code-setting",n.outputChannel="output"})(Vt||(Vt={}));function rA(n,e){return Ut.isUri(n)?r0(n.scheme,e):ZM(n,e+":")}function Oz(n,...e){return e.some(t=>rA(n,t))}const pge="tkn";class bge{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}get _remoteResourcesPath(){return Fn.join(this._serverRootPath,Vt.vscodeRemoteResource)}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return Wi(a),e}const t=e.authority;let i=this._hosts[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const r=this._ports[t],s=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(o+=`&${pge}=${encodeURIComponent(s)}`),Ut.from({scheme:eb?this._preferredWebSchema:Vt.vscodeRemoteResource,authority:`${i}:${r}`,path:this._remoteResourcesPath,query:o})}}const gY=new bge,_ge="vscode-app",Kv=class Kv{asBrowserUri(e){const t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===Vt.vscodeRemote?gY.rewrite(e):e.scheme===Vt.file&&(Lx||Iue===`${Vt.vscodeFileResource}://${Kv.FALLBACK_AUTHORITY}`)?e.with({scheme:Vt.vscodeFileResource,authority:e.authority||Kv.FALLBACK_AUTHORITY,query:null,fragment:null}):e}toUri(e,t){if(Ut.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){const i=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(i))return Ut.joinPath(Ut.parse(i,!0),e);const r=efe(i,e);return Ut.file(r)}return Ut.parse(t.toUrl(e))}};Kv.FALLBACK_AUTHORITY=_ge;let XE=Kv;const e5=new XE;var QE;(function(n){const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);n.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function i(s){let o;typeof s=="string"?o=new URL(s).searchParams:s instanceof URL?o=s.searchParams:Ut.isUri(s)&&(o=new URL(s.toString(!0)).searchParams);const a=o?.get(t);if(a)return e.get(a)}n.getHeadersFromQuery=i;function r(s,o,a){if(!globalThis.crossOriginIsolated)return;const l=o&&a?"3":a?"2":"1";s instanceof URLSearchParams?s.set(t,l):s[t]=l}n.addSearchParam=r})(QE||(QE={}));function mY(n){return t5(n,0)}function t5(n,e){switch(typeof n){case"object":return n===null?fu(349,e):Array.isArray(n)?wge(n,e):yge(n,e);case"string":return sA(n,e);case"boolean":return vge(n,e);case"number":return fu(n,e);case"undefined":return fu(937,e);default:return fu(617,e)}}function fu(n,e){return(e<<5)-e+n|0}function vge(n,e){return fu(n?433:863,e)}function sA(n,e){e=fu(149417,e);for(let t=0,i=n.length;t<i;t++)e=fu(n.charCodeAt(t),e);return e}function wge(n,e){return e=fu(104579,e),n.reduce((t,i)=>t5(i,t),e)}function yge(n,e){return e=fu(181387,e),Object.keys(n).sort().reduce((t,i)=>(t=sA(i,t),t5(n[i],t)),e)}function BT(n,e,t=32){const i=t-e,r=~((1<<i)-1);return(n<<e|(r&n)>>>i)>>>0}function Bz(n,e=0,t=n.byteLength,i=0){for(let r=0;r<t;r++)n[e+r]=i}function Cge(n,e,t="0"){for(;n.length<e;)n=t+n;return n}function h_(n,e=32){return n instanceof ArrayBuffer?Array.from(new Uint8Array(n)).map(t=>t.toString(16).padStart(2,"0")).join(""):Cge((n>>>0).toString(16),e/4)}const eL=class eL{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const i=this._buff;let r=this._buffLen,s=this._leftoverHighSurrogate,o,a;for(s!==0?(o=s,a=-1,s=0):(o=e.charCodeAt(0),a=0);;){let l=o;if(Lr(o))if(a+1<t){const c=e.charCodeAt(a+1);S1(c)?(a++,l=XM(o,c)):l=65533}else{s=o;break}else S1(o)&&(l=65533);if(r=this._push(i,r,l),a++,a<t)o=e.charCodeAt(a);else break}this._buffLen=r,this._leftoverHighSurrogate=s}_push(e,t,i){return i<128?e[t++]=i:i<2048?(e[t++]=192|(i&1984)>>>6,e[t++]=128|(i&63)>>>0):i<65536?(e[t++]=224|(i&61440)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0):(e[t++]=240|(i&1835008)>>>18,e[t++]=128|(i&258048)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),h_(this._h0)+h_(this._h1)+h_(this._h2)+h_(this._h3)+h_(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,Bz(this._buff,this._buffLen),this._buffLen>56&&(this._step(),Bz(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=eL._bigBlock32,t=this._buffDV;for(let u=0;u<64;u+=4)e.setUint32(u,t.getUint32(u,!1),!1);for(let u=64;u<320;u+=4)e.setUint32(u,BT(e.getUint32(u-12,!1)^e.getUint32(u-32,!1)^e.getUint32(u-56,!1)^e.getUint32(u-64,!1),1),!1);let i=this._h0,r=this._h1,s=this._h2,o=this._h3,a=this._h4,l,c,h;for(let u=0;u<80;u++)u<20?(l=r&s|~r&o,c=1518500249):u<40?(l=r^s^o,c=1859775393):u<60?(l=r&s|r&o|s&o,c=2400959708):(l=r^s^o,c=3395469782),h=BT(i,5)+l+a+c+e.getUint32(u*4,!1)&4294967295,a=o,o=s,s=BT(r,30),r=i,i=h;this._h0=this._h0+i&4294967295,this._h1=this._h1+r&4294967295,this._h2=this._h2+s&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}};eL._bigBlock32=new DataView(new ArrayBuffer(320));let JE=eL;const{getWindow:lt,getWindows:pY,getWindowsCount:Sge,getWindowId:Px,getWindowById:Fz,onDidRegisterWindow:i5,onWillUnregisterWindow:xge,onDidUnregisterWindow:kge}=function(){const n=new Map;vfe(Vi,1);const e={window:Vi,disposables:new rt};n.set(Vi.vscodeWindowId,e);const t=new de,i=new de,r=new de;function s(o,a){return(typeof o=="number"?n.get(o):void 0)??(a?e:void 0)}return{onDidRegisterWindow:t.event,onWillUnregisterWindow:r.event,onDidUnregisterWindow:i.event,registerWindow(o){if(n.has(o.vscodeWindowId))return xe.None;const a=new rt,l={window:o,disposables:a.add(new rt)};return n.set(o.vscodeWindowId,l),a.add(Mt(()=>{n.delete(o.vscodeWindowId),i.fire(o)})),a.add(we(o,Be.BEFORE_UNLOAD,()=>{r.fire(o)})),t.fire(l),a},getWindows(){return n.values()},getWindowsCount(){return n.size},getWindowId(o){return o.vscodeWindowId},hasWindow(o){return n.has(o)},getWindowById:s,getWindow(o){const a=o;if(a?.ownerDocument?.defaultView)return a.ownerDocument.defaultView.window;const l=o;return l?.view?l.view.window:Vi},getDocument(o){return lt(o).document}}}();function fc(n){for(;n.firstChild;)n.firstChild.remove()}class Lge{constructor(e,t,i,r){this._node=e,this._type=t,this._handler=i,this._options=r||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function we(n,e,t,i){return new Lge(n,e,t,i)}function Tge(n,e){return function(t){return e(new ac(n,t))}}function Dge(n){return function(e){return n(new en(e))}}const Er=function(e,t,i,r){let s=i;return t==="click"||t==="mousedown"||t==="contextmenu"?s=Tge(lt(e),i):(t==="keydown"||t==="keypress"||t==="keyup")&&(s=Dge(i)),we(e,t,s,r)};function y2(n,e,t){return uv(n,e,t)}let bY,Yo;class oA extends nA{constructor(e){super(),this.defaultTarget=e&&lt(e)}cancelAndSet(e,t,i){return super.cancelAndSet(e,t,i??this.defaultTarget)}}class FT{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Wi(e)}}static sort(e,t){return t.priority-e.priority}}(function(){const n=new Map,e=new Map,t=new Map,i=new Map,r=s=>{t.set(s,!1);const o=n.get(s)??[];for(e.set(s,o),n.set(s,[]),i.set(s,!0);o.length>0;)o.sort(FT.sort),o.shift().execute();i.set(s,!1)};Yo=(s,o,a=0)=>{const l=Px(s),c=new FT(o,a);let h=n.get(l);return h||(h=[],n.set(l,h)),h.push(c),t.get(l)||(t.set(l,!0),s.requestAnimationFrame(()=>r(l))),c},bY=(s,o,a)=>{const l=Px(s);if(i.get(l)){const c=new FT(o,a);let h=e.get(l);return h||(h=[],e.set(l,h)),h.push(c),c}else return Yo(s,o,a)}})();function aA(n){return lt(n).getComputedStyle(n,null)}function e8(n,e){const t=lt(n),i=t.document;if(n!==i.body)return new au(n.clientWidth,n.clientHeight);if(ym&&t?.visualViewport)return new au(t.visualViewport.width,t.visualViewport.height);if(t?.innerWidth&&t.innerHeight)return new au(t.innerWidth,t.innerHeight);if(i.body&&i.body.clientWidth&&i.body.clientHeight)return new au(i.body.clientWidth,i.body.clientHeight);if(i.documentElement&&i.documentElement.clientWidth&&i.documentElement.clientHeight)return new au(i.documentElement.clientWidth,i.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class En{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,i){const r=aA(e),s=r?r.getPropertyValue(t):"0";return En.convertToPixels(e,s)}static getBorderLeftWidth(e){return En.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return En.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return En.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return En.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return En.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return En.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return En.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return En.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return En.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return En.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return En.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return En.getDimension(e,"margin-bottom","marginBottom")}}const Bg=class Bg{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new Bg(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof Bg?e:new Bg(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};Bg.None=new Bg(0,0);let au=Bg;function Ege(n){let e=n.offsetParent,t=n.offsetTop,i=n.offsetLeft;for(;(n=n.parentNode)!==null&&n!==n.ownerDocument.body&&n!==n.ownerDocument.documentElement;){t-=n.scrollTop;const r=vY(n)?null:aA(n);r&&(i-=r.direction!=="rtl"?n.scrollLeft:-n.scrollLeft),n===e&&(i+=En.getBorderLeftWidth(n),t+=En.getBorderTopWidth(n),t+=n.offsetTop,i+=n.offsetLeft,e=n.offsetParent)}return{left:i,top:t}}function qa(n){const e=n.getBoundingClientRect(),t=lt(n);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}function _Y(n){let e=n,t=1;do{const i=aA(e).zoom;i!=null&&i!=="1"&&(t*=i),e=e.parentElement}while(e!==null&&e!==e.ownerDocument.documentElement);return t}function lA(n){const e=En.getMarginLeft(n)+En.getMarginRight(n);return n.offsetWidth+e}function WT(n){const e=En.getBorderLeftWidth(n)+En.getBorderRightWidth(n),t=En.getPaddingLeft(n)+En.getPaddingRight(n);return n.offsetWidth-e-t}function Ige(n){const e=En.getBorderTopWidth(n)+En.getBorderBottomWidth(n),t=En.getPaddingTop(n)+En.getPaddingBottom(n);return n.offsetHeight-e-t}function t8(n){const e=En.getMarginTop(n)+En.getMarginBottom(n);return n.offsetHeight+e}function Dr(n,e){return!!e?.contains(n)}function Nge(n,e,t){for(;n&&n.nodeType===n.ELEMENT_NODE;){if(n.classList.contains(e))return n;if(t){if(typeof t=="string"){if(n.classList.contains(t))return null}else if(n===t)return null}n=n.parentNode}return null}function zT(n,e,t){return!!Nge(n,e,t)}function vY(n){return n&&!!n.host&&!!n.mode}function i8(n){return!!x1(n)}function x1(n){for(;n.parentNode;){if(n===n.ownerDocument?.body)return null;n=n.parentNode}return vY(n)?n:null}function Rs(){let n=hA().activeElement;for(;n?.shadowRoot;)n=n.shadowRoot.activeElement;return n}function cA(n){return Rs()===n}function wY(n){return Dr(Rs(),n)}function hA(){return Sge()<=1?Vi.document:Array.from(pY()).map(({window:e})=>e.document).find(e=>e.hasFocus())??Vi.document}function z_(){return hA().defaultView?.window??Vi}const yY=new Map;function xl(n=Vi.document.head,e,t){const i=document.createElement("style");if(i.type="text/css",i.media="screen",e?.(i),n.appendChild(i),n===Vi.document.head){const r=new Set;yY.set(i,r);for(const{window:s,disposables:o}of pY())s!==Vi&&o.add(Mge(i,r,s))}return i}function Mge(n,e,t){const i=new rt,r=n.cloneNode(!0);t.document.head.appendChild(r),i.add(Mt(()=>r.remove()));for(const s of Pge(n))r.sheet?.insertRule(s.cssText,r.sheet?.cssRules.length);return i.add(Age.observe(n,i,{childList:!0})(()=>{r.textContent=n.textContent})),e.add(r),i.add(Mt(()=>e.delete(r))),i}const Age=new class{constructor(){this.mutationObservers=new Map}observe(n,e,t){let i=this.mutationObservers.get(n);i||(i=new Map,this.mutationObservers.set(n,i));const r=mY(t);let s=i.get(r);if(s)s.users+=1;else{const o=new de,a=new MutationObserver(c=>o.fire(c));a.observe(n,t);const l=s={users:1,observer:a,onDidMutate:o.event};e.add(Mt(()=>{l.users-=1,l.users===0&&(o.dispose(),a.disconnect(),i?.delete(r),i?.size===0&&this.mutationObservers.delete(n))})),i.set(r,s)}return s.onDidMutate}};let HT=null;function Rge(){return HT||(HT=xl()),HT}function Pge(n){return n?.sheet?.rules?n.sheet.rules:n?.sheet?.cssRules?n.sheet.cssRules:[]}function n8(n,e,t=Rge()){if(!(!t||!e)){t.sheet?.insertRule(`${n} {${e}}`,0);for(const i of yY.get(t)??[])n8(n,e,i)}}function $r(n){return n instanceof HTMLElement||n instanceof lt(n).HTMLElement}function Wz(n){return n instanceof HTMLAnchorElement||n instanceof lt(n).HTMLAnchorElement}function Oge(n){return n instanceof SVGElement||n instanceof lt(n).SVGElement}function uA(n){return n instanceof MouseEvent||n instanceof lt(n).MouseEvent}function iu(n){return n instanceof KeyboardEvent||n instanceof lt(n).KeyboardEvent}const Be={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend"};function Bge(n){const e=n;return!!(e&&typeof e.preventDefault=="function"&&typeof e.stopPropagation=="function")}const ni={stop:(n,e)=>(n.preventDefault(),e&&n.stopPropagation(),n)};function Fge(n){const e=[];for(let t=0;n&&n.nodeType===n.ELEMENT_NODE;t++)e[t]=n.scrollTop,n=n.parentNode;return e}function Wge(n,e){for(let t=0;n&&n.nodeType===n.ELEMENT_NODE;t++)n.scrollTop!==e[t]&&(n.scrollTop=e[t]),n=n.parentNode}class Ox extends xe{static hasFocusWithin(e){if($r(e)){const t=x1(e),i=t?t.activeElement:e.ownerDocument.activeElement;return Dr(i,e)}else{const t=e;return Dr(t.document.activeElement,t.document)}}constructor(e){super(),this._onDidFocus=this._register(new de),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new de),this.onDidBlur=this._onDidBlur.event;let t=Ox.hasFocusWithin(e),i=!1;const r=()=>{i=!1,t||(t=!0,this._onDidFocus.fire())},s=()=>{t&&(i=!0,($r(e)?lt(e):e).setTimeout(()=>{i&&(i=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{Ox.hasFocusWithin(e)!==t&&(t?s():r())},this._register(we(e,Be.FOCUS,r,!0)),this._register(we(e,Be.BLUR,s,!0)),$r(e)&&(this._register(we(e,Be.FOCUS_IN,()=>this._refreshStateHandler())),this._register(we(e,Be.FOCUS_OUT,()=>this._refreshStateHandler())))}}function vw(n){return new Ox(n)}function zge(n,e){return n.after(e),e}function it(n,...e){if(n.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function dA(n,e){return n.insertBefore(e,n.firstChild),e}function Ks(n,...e){n.innerText="",it(n,...e)}const Hge=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var ww;(function(n){n.HTML="http://www.w3.org/1999/xhtml",n.SVG="http://www.w3.org/2000/svg"})(ww||(ww={}));function CY(n,e,t,...i){const r=Hge.exec(e);if(!r)throw new Error("Bad use of emmet");const s=r[1]||"div";let o;return n!==ww.HTML?o=document.createElementNS(n,s):o=document.createElement(s),r[3]&&(o.id=r[3]),r[4]&&(o.className=r[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?o[a]=l:a==="selected"?l&&o.setAttribute(a,"true"):o.setAttribute(a,l))}),o.append(...i),o}function ft(n,e,...t){return CY(ww.HTML,n,e,...t)}ft.SVG=function(n,e,...t){return CY(ww.SVG,n,e,...t)};function SY(...n){for(const e of n)e.style.display="",e.removeAttribute("aria-hidden")}function zz(...n){for(const e of n)e.style.display="none",e.setAttribute("aria-hidden","true")}function Hz(n,e){const t=n.devicePixelRatio*e;return Math.max(1,Math.floor(t))/n.devicePixelRatio}function xY(n){Vi.open(n,"_blank","noopener")}function Vge(n,e){const t=()=>{e(),i=Yo(n,t)};let i=Yo(n,t);return Mt(()=>i.dispose())}gY.setPreferredWebSchema(/^https:/.test(Vi.location.href)?"https":"http");function Bu(n){return n?`url('${e5.uriToBrowserUri(n).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function VT(n){return`'${n.replace(/'/g,"%27")}'`}function Su(n,e){if(n!==void 0){const t=n.match(/^\s*var\((.+)\)$/);if(t){const i=t[1].split(",",2);return i.length===2&&(e=Su(i[1].trim(),e)),`var(${i[0]}, ${e})`}return n}return e}function $ge(n,e=!1){const t=document.createElement("a");return dY("afterSanitizeAttributes",i=>{for(const r of["href","src"])if(i.hasAttribute(r)){const s=i.getAttribute(r);if(r==="href"&&s.startsWith("#"))continue;if(t.href=s,!n.includes(t.protocol.replace(/:$/,""))){if(e&&r==="src"&&t.href.startsWith("data:"))continue;i.removeAttribute(r)}}}),Mt(()=>{fY("afterSanitizeAttributes")})}const jge=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);class jd extends de{constructor(){super(),this._subscriptions=new rt,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(Oe.runAndSubscribe(i5,({window:e,disposables:t})=>this.registerListeners(e,t),{window:Vi,disposables:this._subscriptions}))}registerListeners(e,t){t.add(we(e,"keydown",i=>{if(i.defaultPrevented)return;const r=new en(i);if(!(r.keyCode===6&&i.repeat)){if(i.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(i.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(i.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(i.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(r.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=i,this.fire(this._keyStatus))}},!0)),t.add(we(e,"keyup",i=>{i.defaultPrevented||(!i.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!i.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!i.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!i.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=i,this.fire(this._keyStatus)))},!0)),t.add(we(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(we(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(we(e.document.body,"mousemove",i=>{i.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(we(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return jd.instance||(jd.instance=new jd),jd.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class Uge extends xe{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(we(this.element,Be.DRAG_START,e=>{this.callbacks.onDragStart?.(e)})),this.callbacks.onDrag&&this._register(we(this.element,Be.DRAG,e=>{this.callbacks.onDrag?.(e)})),this._register(we(this.element,Be.DRAG_ENTER,e=>{this.counter++,this.dragStartTime=e.timeStamp,this.callbacks.onDragEnter?.(e)})),this._register(we(this.element,Be.DRAG_OVER,e=>{e.preventDefault(),this.callbacks.onDragOver?.(e,e.timeStamp-this.dragStartTime)})),this._register(we(this.element,Be.DRAG_LEAVE,e=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave?.(e))})),this._register(we(this.element,Be.DRAG_END,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd?.(e)})),this._register(we(this.element,Be.DROP,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop?.(e)}))}}const qge=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function di(n,...e){let t,i;Array.isArray(e[0])?(t={},i=e[0]):(t=e[0]||{},i=e[1]);const r=qge.exec(n);if(!r||!r.groups)throw new Error("Bad use of h");const s=r.groups.tag||"div",o=document.createElement(s);r.groups.id&&(o.id=r.groups.id);const a=[];if(r.groups.class)for(const c of r.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(o.className=a.join(" "));const l={};if(r.groups.name&&(l[r.groups.name]=o),i)for(const c of i)$r(c)?o.appendChild(c):typeof c=="string"?o.append(c):"root"in c&&(Object.assign(l,c),o.appendChild(c.root));for(const[c,h]of Object.entries(t))if(c!=="className")if(c==="style")for(const[u,d]of Object.entries(h))o.style.setProperty(Vz(u),typeof d=="number"?d+"px":""+d);else c==="tabIndex"?o.tabIndex=h:o.setAttribute(Vz(c),h.toString());return l.root=o,l}function Vz(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class Gge extends xe{constructor(e){super(),this._onDidChange=this._register(new de),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){this._mediaQueryList?.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}}class Kge extends xe{get value(){return this._value}constructor(e){super(),this._onDidChange=this._register(new de),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio(e);const t=this._register(new Gge(e));this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)}))}_getPixelRatio(e){const t=document.createElement("canvas").getContext("2d"),i=e.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/r}}class Yge{constructor(){this.mapWindowIdToPixelRatioMonitor=new Map}_getOrCreatePixelRatioMonitor(e){const t=Px(e);let i=this.mapWindowIdToPixelRatioMonitor.get(t);return i||(i=new Kge(e),this.mapWindowIdToPixelRatioMonitor.set(t,i),Oe.once(kge)(({vscodeWindowId:r})=>{r===t&&(i?.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))})),i}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}}const Bx=new Yge;class kY{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=Vl(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=Vl(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=Vl(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=Vl(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=Vl(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=Vl(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=Vl(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){const t=Vl(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=Vl(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=Vl(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=Vl(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function Vl(n){return typeof n=="number"?`${n}px`:n}function bi(n){return new kY(n)}function ps(n,e){n instanceof kY?(n.setFontFamily(e.getMassagedFontFamily()),n.setFontWeight(e.fontWeight),n.setFontSize(e.fontSize),n.setFontFeatureSettings(e.fontFeatureSettings),n.setFontVariationSettings(e.fontVariationSettings),n.setLineHeight(e.lineHeight),n.setLetterSpacing(e.letterSpacing)):(n.style.fontFamily=e.getMassagedFontFamily(),n.style.fontWeight=e.fontWeight,n.style.fontSize=e.fontSize+"px",n.style.fontFeatureSettings=e.fontFeatureSettings,n.style.fontVariationSettings=e.fontVariationSettings,n.style.lineHeight=e.lineHeight+"px",n.style.letterSpacing=e.letterSpacing+"px")}class Zge{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class fA{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),this._container?.remove(),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");ps(t,this._bareFontInfo),e.appendChild(t);const i=document.createElement("div");ps(i,this._bareFontInfo),i.style.fontWeight="bold",e.appendChild(i);const r=document.createElement("div");ps(r,this._bareFontInfo),r.style.fontStyle="italic",e.appendChild(r);const s=[];for(const o of this._requests){let a;o.type===0&&(a=t),o.type===2&&(a=i),o.type===1&&(a=r),a.appendChild(document.createElement("br"));const l=document.createElement("span");fA._render(l,o),a.appendChild(l),s.push(l)}this._container=e,this._testElements=s}static _render(e,t){if(t.chr===" "){let i=" ";for(let r=0;r<8;r++)i+=i;e.innerText=i}else{let i=t.chr;for(let r=0;r<8;r++)i+=i;e.textContent=i}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const i=this._requests[e],r=this._testElements[e];i.fulfill(r.offsetWidth/256)}}}function Xge(n,e,t){new fA(e,t).read(n)}const Bd=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new de,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(n){n=Math.min(Math.max(-5,n),20),this._zoomLevel!==n&&(this._zoomLevel=n,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},Qge=hi?1.5:1.35,$T=8;class em{static createFromValidatedSettings(e,t,i){const r=e.get(49),s=e.get(53),o=e.get(52),a=e.get(51),l=e.get(54),c=e.get(67),h=e.get(64);return em._create(r,s,o,a,l,c,h,t,i)}static _create(e,t,i,r,s,o,a,l,c){o===0?o=Qge*i:o<$T&&(o=o*i),o=Math.round(o),o<$T&&(o=$T);const h=1+(c?0:Bd.getZoomLevel()*.1);return i*=h,o*=h,s===fw.TRANSLATE&&(t==="normal"||t==="bold"?s=fw.OFF:(s=`'wght' ${parseInt(t,10)}`,t="normal")),new em({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:i,fontFeatureSettings:r,fontVariationSettings:s,lineHeight:o,letterSpacing:a})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=Sa.fontFamily,t=em._wrapInQuotes(this.fontFamily);return this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const Jge=2;class r8 extends em{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=Jge,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class eme extends xe{constructor(){super(...arguments),this._cache=new Map,this._evictUntrustedReadingsTimeout=-1,this._onDidChange=this._register(new de),this.onDidChange=this._onDidChange.event}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){const t=Px(e);let i=this._cache.get(t);return i||(i=new tme,this._cache.set(t,i)),i}_writeToCache(e,t,i){this._ensureCache(e).put(t,i),!i.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=e.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)},5e3))}_evictUntrustedReadings(e){const t=this._ensureCache(e),i=t.getValues();let r=!1;for(const s of i)s.isTrusted||(r=!0,t.remove(s));r&&this._onDidChange.fire()}readFontInfo(e,t){const i=this._ensureCache(e);if(!i.has(t)){let r=this._actualReadFontInfo(e,t);(r.typicalHalfwidthCharacterWidth<=2||r.typicalFullwidthCharacterWidth<=2||r.spaceWidth<=2||r.maxDigitWidth<=2)&&(r=new r8({pixelRatio:Bx.getInstance(e).value,fontFamily:r.fontFamily,fontWeight:r.fontWeight,fontSize:r.fontSize,fontFeatureSettings:r.fontFeatureSettings,fontVariationSettings:r.fontVariationSettings,lineHeight:r.lineHeight,letterSpacing:r.letterSpacing,isMonospace:r.isMonospace,typicalHalfwidthCharacterWidth:Math.max(r.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(r.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:r.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(r.spaceWidth,5),middotWidth:Math.max(r.middotWidth,5),wsmiddotWidth:Math.max(r.wsmiddotWidth,5),maxDigitWidth:Math.max(r.maxDigitWidth,5)},!1)),this._writeToCache(e,t,r)}return i.get(t)}_createRequest(e,t,i,r){const s=new Zge(e,t);return i.push(s),r?.push(s),s}_actualReadFontInfo(e,t){const i=[],r=[],s=this._createRequest("n",0,i,r),o=this._createRequest("ｍ",0,i,null),a=this._createRequest(" ",0,i,r),l=this._createRequest("0",0,i,r),c=this._createRequest("1",0,i,r),h=this._createRequest("2",0,i,r),u=this._createRequest("3",0,i,r),d=this._createRequest("4",0,i,r),g=this._createRequest("5",0,i,r),p=this._createRequest("6",0,i,r),b=this._createRequest("7",0,i,r),_=this._createRequest("8",0,i,r),w=this._createRequest("9",0,i,r),y=this._createRequest("→",0,i,r),k=this._createRequest("￫",0,i,null),L=this._createRequest("·",0,i,r),T=this._createRequest("⸱",0,i,null),N="|/-_ilm%";for(let H=0,q=N.length;H<q;H++)this._createRequest(N.charAt(H),0,i,r),this._createRequest(N.charAt(H),1,i,r),this._createRequest(N.charAt(H),2,i,r);Xge(e,t,i);const D=Math.max(l.width,c.width,h.width,u.width,d.width,g.width,p.width,b.width,_.width,w.width);let O=t.fontFeatureSettings===Cm.OFF;const B=r[0].width;for(let H=1,q=r.length;O&&H<q;H++){const X=B-r[H].width;if(X<-.001||X>.001){O=!1;break}}let G=!0;return O&&k.width!==B&&(G=!1),k.width>y.width&&(G=!1),new r8({pixelRatio:Bx.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:O,typicalHalfwidthCharacterWidth:s.width,typicalFullwidthCharacterWidth:o.width,canUseHalfwidthRightwardsArrow:G,spaceWidth:a.width,middotWidth:L.width,wsmiddotWidth:T.width,maxDigitWidth:D},!0)}}class tme{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const i=e.getId();this._keys[i]=e,this._values[i]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}const s8=new eme;var lc;(function(n){n.serviceIds=new Map,n.DI_TARGET="$di$target",n.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[n.DI_DEPENDENCIES]||[]}n.getServiceDependencies=e})(lc||(lc={}));const Ni=ai("instantiationService");function ime(n,e,t){e[lc.DI_TARGET]===e?e[lc.DI_DEPENDENCIES].push({id:n,index:t}):(e[lc.DI_DEPENDENCIES]=[{id:n,index:t}],e[lc.DI_TARGET]=e)}function ai(n){if(lc.serviceIds.has(n))return lc.serviceIds.get(n);const e=function(t,i,r){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");ime(e,t,r)};return e.toString=()=>n,lc.serviceIds.set(n,e),e}const vr=ai("codeEditorService"),Qs=ai("modelService"),n5=ai("textModelService");class xu extends xe{constructor(e,t="",i="",r=!0,s){super(),this._onDidChange=this._register(new de),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=r,this._actionCallback=s}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}}class km extends xe{constructor(){super(...arguments),this._onWillRun=this._register(new de),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new de),this.onDidRun=this._onDidRun.event}async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let i;try{await this.runAction(e,t)}catch(r){i=r}this._onDidRun.fire({action:e,error:i})}async runAction(e,t){await e.run(t)}}const Yv=class Yv{constructor(){this.id=Yv.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const i of e)i.length&&(t.length?t=[...t,new Yv,...i]:t=i);return t}async run(){}};Yv.ID="vs.actions.separator";let Ps=Yv;class r5{get actions(){return this._actions}constructor(e,t,i,r){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=r,this._actions=i}async run(){}}const tL=class tL extends xu{constructor(){super(tL.ID,C("submenu.empty","(empty)"),void 0,!1)}};tL.ID="vs.actions.empty";let o8=tL;function F0(n){return{id:n.id,label:n.label,tooltip:n.tooltip??n.label,class:n.class,enabled:n.enabled??!0,checked:n.checked,run:async(...e)=>n.run(...e)}}var a8;(function(n){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}n.isThemeColor=e})(a8||(a8={}));var gi;(function(n){n.iconNameSegment="[A-Za-z0-9]+",n.iconNameExpression="[A-Za-z0-9-]+",n.iconModifierExpression="~[A-Za-z]+",n.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${n.iconNameExpression})(${n.iconModifierExpression})?$`);function t(d){const g=e.exec(d.id);if(!g)return t(Je.error);const[,p,b]=g,_=["codicon","codicon-"+p];return b&&_.push("codicon-modifier-"+b.substring(1)),_}n.asClassNameArray=t;function i(d){return t(d).join(" ")}n.asClassName=i;function r(d){return"."+t(d).join(".")}n.asCSSSelector=r;function s(d){return d&&typeof d=="object"&&typeof d.id=="string"&&(typeof d.color>"u"||a8.isThemeColor(d.color))}n.isThemeIcon=s;const o=new RegExp(`^\\$\\((${n.iconNameExpression}(?:${n.iconModifierExpression})?)\\)$`);function a(d){const g=o.exec(d);if(!g)return;const[,p]=g;return{id:p}}n.fromString=a;function l(d){return{id:d}}n.fromId=l;function c(d,g){let p=d.id;const b=p.lastIndexOf("~");return b!==-1&&(p=p.substring(0,b)),g&&(p=`${p}~${g}`),{id:p}}n.modify=c;function h(d){const g=d.id.lastIndexOf("~");if(g!==-1)return d.id.substring(g+1)}n.getModifier=h;function u(d,g){return d.id===g.id&&d.color?.id===g.color?.id}n.isEqual=u})(gi||(gi={}));const Ta=ai("commandService"),So=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new de,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(n,e){if(!n)throw new Error("invalid command");if(typeof n=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:n,handler:e})}if(n.metadata&&Array.isArray(n.metadata.args)){const o=[];for(const l of n.metadata.args)o.push(l.constraint);const a=n.handler;n.handler=function(l,...c){return vue(c,o),a(l,...c)}}const{id:t}=n;let i=this._commands.get(t);i||(i=new Wo,this._commands.set(t,i));const r=i.unshift(n),s=Mt(()=>{r(),this._commands.get(t)?.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),s}registerCommandAlias(n,e){return So.registerCommand(n,(t,...i)=>t.get(Ta).executeCommand(e,...i))}getCommand(n){const e=this._commands.get(n);if(!(!e||e.isEmpty()))return wi.first(e)}getCommands(){const n=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&n.set(e,t)}return n}};So.registerCommand("noop",()=>{});function jT(...n){switch(n.length){case 1:return C("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",n[0]);case 2:return C("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",n[0],n[1]);case 3:return C("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",n[0],n[1],n[2]);default:return}}const nme=C("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),rme=C("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'."),L0=class L0{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw $M(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(jT("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(jT("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(jT("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,i=this._input.substring(this._start,this._current),r={type:19,offset:this._start,lexeme:i};this._errors.push({offset:t,lexeme:i,additionalInfo:e}),this._tokens.push(r)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),i=L0._keywords.get(t);i?this._addToken(i):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(nme);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,i=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(rme);return}const s=this._input.charCodeAt(e);if(t)t=!1;else if(s===47&&!i){e++;break}else s===91?i=!0:s===92?t=!0:s===93&&(i=!1);e++}for(;e<this._input.length&&L0._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const r=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:r,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}};L0._regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0))),L0._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);let Cg=L0;const bs=new Map;bs.set("false",!1);bs.set("true",!0);bs.set("isMac",hi);bs.set("isLinux",wo);bs.set("isWindows",Go);bs.set("isWeb",eb);bs.set("isMacNative",hi&&!eb);bs.set("isEdge",Pue);bs.set("isFirefox",Aue);bs.set("isChrome",kK);bs.set("isSafari",Rue);const sme=Object.prototype.hasOwnProperty,ome={regexParsingWithErrorRecovery:!0},ame=C("contextkey.parser.error.emptyString","Empty context key expression"),lme=C("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),cme=C("contextkey.parser.error.noInAfterNot","'in' after 'not'."),$z=C("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),hme=C("contextkey.parser.error.unexpectedToken","Unexpected token"),ume=C("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),dme=C("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),fme=C("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");var Jc;let gme=(Jc=class{constructor(e=ome){this._config=e,this._scanner=new Cg,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(e===""){this._parsingErrors.push({message:ame,offset:0,lexeme:"",additionalInfo:lme});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const i=this._peek(),r=i.type===17?ume:void 0;throw this._parsingErrors.push({message:hme,offset:i.offset,lexeme:Cg.getLexeme(i),additionalInfo:r}),Jc._parseError}return t}catch(t){if(t!==Jc._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return e.length===1?e[0]:Si.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return e.length===1?e[0]:Si.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),Ys.INSTANCE;case 12:return this._advance(),yo.INSTANCE;case 0:{this._advance();const t=this._expr();return this._consume(1,$z),t?.negate()}case 17:return this._advance(),Gm.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),Si.true();case 12:return this._advance(),Si.false();case 0:{this._advance();const t=this._expr();return this._consume(1,$z),t}case 17:{const t=e.lexeme;if(this._advance(),this._matchOne(9)){const r=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),r.type!==10)throw this._errExpectedButGot("REGEX",r);const s=r.lexeme,o=s.lastIndexOf("/"),a=o===s.length-1?void 0:this._removeFlagsGY(s.substring(o+1));let l;try{l=new RegExp(s.substring(1,o),a)}catch{throw this._errExpectedButGot("REGEX",r)}return yw.create(t,l)}switch(r.type){case 10:case 19:{const s=[r.lexeme];this._advance();let o=this._peek(),a=0;for(let d=0;d<r.lexeme.length;d++)r.lexeme.charCodeAt(d)===40?a++:r.lexeme.charCodeAt(d)===41&&a--;for(;!this._isAtEnd()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let d=0;d<o.lexeme.length;d++)o.lexeme.charCodeAt(d)===40?a++:r.lexeme.charCodeAt(d)===41&&a--}if(a<0)break;s.push(Cg.getLexeme(o)),this._advance(),o=this._peek()}const l=s.join(""),c=l.lastIndexOf("/"),h=c===l.length-1?void 0:this._removeFlagsGY(l.substring(c+1));let u;try{u=new RegExp(l.substring(1,c),h)}catch{throw this._errExpectedButGot("REGEX",r)}return Si.regex(t,u)}case 18:{const s=r.lexeme;this._advance();let o=null;if(!yfe(s)){const a=s.indexOf("/"),l=s.lastIndexOf("/");if(a!==l&&a>=0){const c=s.slice(a+1,l),h=s[l+1]==="i"?"i":"";try{o=new RegExp(c,h)}catch{throw this._errExpectedButGot("REGEX",r)}}}if(o===null)throw this._errExpectedButGot("REGEX",r);return yw.create(t,o)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,cme);const r=this._value();return Si.notIn(t,r)}switch(this._peek().type){case 3:{this._advance();const r=this._value();if(this._previous().type===18)return Si.equals(t,r);switch(r){case"true":return Si.has(t);case"false":return Si.not(t);default:return Si.equals(t,r)}}case 4:{this._advance();const r=this._value();if(this._previous().type===18)return Si.notEquals(t,r);switch(r){case"true":return Si.not(t);case"false":return Si.has(t);default:return Si.notEquals(t,r)}}case 5:return this._advance(),u5.create(t,this._value());case 6:return this._advance(),d5.create(t,this._value());case 7:return this._advance(),c5.create(t,this._value());case 8:return this._advance(),h5.create(t,this._value());case 13:return this._advance(),Si.in(t,this._value());default:return Si.has(t)}}case 20:throw this._parsingErrors.push({message:dme,offset:e.offset,lexeme:"",additionalInfo:fme}),Jc._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,i){const r=C("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,Cg.getLexeme(t)),s=t.offset,o=Cg.getLexeme(t);return this._parsingErrors.push({message:r,offset:s,lexeme:o,additionalInfo:i}),Jc._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}},Jc._parseError=new Error,Jc);const WO=class WO{static false(){return Ys.INSTANCE}static true(){return yo.INSTANCE}static has(e){return qm.create(e)}static equals(e,t){return ky.create(e,t)}static notEquals(e,t){return a5.create(e,t)}static regex(e,t){return yw.create(e,t)}static in(e,t){return s5.create(e,t)}static notIn(e,t){return o5.create(e,t)}static not(e){return Gm.create(e)}static and(...e){return Vg.create(e,null,!0)}static or(...e){return lu.create(e,null,!0)}static deserialize(e){return e==null?void 0:this._parser.parse(e)}};WO._parser=new gme({regexParsingWithErrorRecovery:!1});let Si=WO;function mme(n,e){const t=n?n.substituteConstants():void 0,i=e?e.substituteConstants():void 0;return!t&&!i?!0:!t||!i?!1:t.equals(i)}function dv(n,e){return n.cmp(e)}const iL=class iL{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return yo.INSTANCE}};iL.INSTANCE=new iL;let Ys=iL;const nL=class nL{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Ys.INSTANCE}};nL.INSTANCE=new nL;let yo=nL;class qm{static create(e,t=null){const i=bs.get(e);return typeof i=="boolean"?i?yo.INSTANCE:Ys.INSTANCE:new qm(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:TY(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=bs.get(this.key);return typeof e=="boolean"?e?yo.INSTANCE:Ys.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=Gm.create(this.key,this)),this.negated}}class ky{static create(e,t,i=null){if(typeof t=="boolean")return t?qm.create(e,i):Gm.create(e,i);const r=bs.get(e);return typeof r=="boolean"?t===(r?"true":"false")?yo.INSTANCE:Ys.INSTANCE:new ky(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:Km(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=bs.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?yo.INSTANCE:Ys.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=a5.create(this.key,this.value,this)),this.negated}}class s5{static create(e,t){return new s5(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:Km(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.includes(i):typeof i=="string"&&typeof t=="object"&&t!==null?sme.call(t,i):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=o5.create(this.key,this.valueKey)),this.negated}}class o5{static create(e,t){return new o5(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=s5.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class a5{static create(e,t,i=null){if(typeof t=="boolean")return t?Gm.create(e,i):qm.create(e,i);const r=bs.get(e);return typeof r=="boolean"?t===(r?"true":"false")?Ys.INSTANCE:yo.INSTANCE:new a5(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:Km(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=bs.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Ys.INSTANCE:yo.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ky.create(this.key,this.value,this)),this.negated}}class Gm{static create(e,t=null){const i=bs.get(e);return typeof i=="boolean"?i?Ys.INSTANCE:yo.INSTANCE:new Gm(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:TY(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=bs.get(this.key);return typeof e=="boolean"?e?Ys.INSTANCE:yo.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=qm.create(this.key,this)),this.negated}}function l5(n,e){if(typeof n=="string"){const t=parseFloat(n);isNaN(t)||(n=t)}return typeof n=="string"||typeof n=="number"?e(n):Ys.INSTANCE}class c5{static create(e,t,i=null){return l5(t,r=>new c5(e,r,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:Km(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=d5.create(this.key,this.value,this)),this.negated}}class h5{static create(e,t,i=null){return l5(t,r=>new h5(e,r,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:Km(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=u5.create(this.key,this.value,this)),this.negated}}class u5{static create(e,t,i=null){return l5(t,r=>new u5(e,r,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:Km(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=h5.create(this.key,this.value,this)),this.negated}}class d5{static create(e,t,i=null){return l5(t,r=>new d5(e,r,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:Km(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=c5.create(this.key,this.value,this)),this.negated}}class yw{static create(e,t){return new yw(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=gA.create(this)),this.negated}}class gA{static create(e){return new gA(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function LY(n){let e=null;for(let t=0,i=n.length;t<i;t++){const r=n[t].substituteConstants();if(n[t]!==r&&e===null){e=[];for(let s=0;s<t;s++)e[s]=n[s]}e!==null&&(e[t]=r)}return e===null?n:e}class Vg{static create(e,t,i){return Vg._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const r=dv(this.expr[t],e.expr[t]);if(r!==0)return r}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=LY(this.expr);return e===this.expr?this:Vg.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,i){const r=[];let s=!1;for(const o of e)if(o){if(o.type===1){s=!0;continue}if(o.type===0)return Ys.INSTANCE;if(o.type===6){r.push(...o.expr);continue}r.push(o)}if(r.length===0&&s)return yo.INSTANCE;if(r.length!==0){if(r.length===1)return r[0];r.sort(dv);for(let o=1;o<r.length;o++)r[o-1].equals(r[o])&&(r.splice(o,1),o--);if(r.length===1)return r[0];for(;r.length>1;){const o=r[r.length-1];if(o.type!==9)break;r.pop();const a=r.pop(),l=r.length===0,c=lu.create(o.expr.map(h=>Vg.create([h,a],null,i)),null,l);c&&(r.push(c),r.sort(dv))}if(r.length===1)return r[0];if(i){for(let o=0;o<r.length;o++)for(let a=o+1;a<r.length;a++)if(r[o].negate().equals(r[a]))return Ys.INSTANCE;if(r.length===1)return r[0]}return new Vg(r,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=lu.create(e,this,!0)}return this.negated}}class lu{static create(e,t,i){return lu._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const r=dv(this.expr[t],e.expr[t]);if(r!==0)return r}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=LY(this.expr);return e===this.expr?this:lu.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,i){let r=[],s=!1;if(e){for(let o=0,a=e.length;o<a;o++){const l=e[o];if(l){if(l.type===0){s=!0;continue}if(l.type===1)return yo.INSTANCE;if(l.type===9){r=r.concat(l.expr);continue}r.push(l)}}if(r.length===0&&s)return Ys.INSTANCE;r.sort(dv)}if(r.length!==0){if(r.length===1)return r[0];for(let o=1;o<r.length;o++)r[o-1].equals(r[o])&&(r.splice(o,1),o--);if(r.length===1)return r[0];if(i){for(let o=0;o<r.length;o++)for(let a=o+1;a<r.length;a++)if(r[o].negate().equals(r[a]))return yo.INSTANCE;if(r.length===1)return r[0]}return new lu(r,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),i=e.shift(),r=[];for(const s of Uz(t))for(const o of Uz(i))r.push(Vg.create([s,o],null,!1));e.unshift(lu.create(r,null,!1))}this.negated=lu.create(e,this,!0)}return this.negated}}const T0=class T0 extends qm{static all(){return T0._info.values()}constructor(e,t,i){super(e,null),this._defaultValue=t,typeof i=="object"?T0._info.push({...i,key:e}):i!==!0&&T0._info.push({key:e,description:i,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return ky.create(this.key,e)}};T0._info=[];let st=T0;const Ei=ai("contextKeyService");function TY(n,e){return n<e?-1:n>e?1:0}function Km(n,e,t,i){return n<t?-1:n>t?1:e<i?-1:e>i?1:0}function l8(n,e){if(n.type===0||e.type===1)return!0;if(n.type===9)return e.type===9?jz(n.expr,e.expr):!1;if(e.type===9){for(const t of e.expr)if(l8(n,t))return!0;return!1}if(n.type===6){if(e.type===6)return jz(e.expr,n.expr);for(const t of n.expr)if(l8(t,e))return!0;return!1}return n.equals(e)}function jz(n,e){let t=0,i=0;for(;t<n.length&&i<e.length;){const r=n[t].cmp(e[i]);if(r<0)return!1;r===0&&t++,i++}return t===n.length}function Uz(n){return n.type===9?n.expr:[n]}function UT(n,e){if(!n)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function mA(n,e="Unreachable"){throw new Error(e)}function qz(n){n||Wi(new Ti("Soft Assertion Failed"))}function Lm(n){if(!n()){debugger;n(),Wi(new Ti("Assertion Failed"))}}function pA(n,e){let t=0;for(;t<n.length-1;){const i=n[t],r=n[t+1];if(!e(i,r))return!1;t++}return!0}class pme{constructor(){this.data=new Map}add(e,t){UT(Ca(e)),UT(go(t)),UT(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const Ur=new pme;class bA{constructor(){this._coreKeybindings=new Wo,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(gl===1){if(e&&e.win)return e.win}else if(gl===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=bA.bindToCurrentPlatform(e),i=new rt;if(t&&t.primary){const r=UE(t.primary,gl);r&&i.add(this._registerDefaultKeybinding(r,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let r=0,s=t.secondary.length;r<s;r++){const o=t.secondary[r],a=UE(o,gl);a&&i.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-r-1,e.when))}return i}registerCommandAndKeybindingRule(e){return ih(this.registerKeybindingRule(e),So.registerCommand(e))}_registerDefaultKeybinding(e,t,i,r,s,o){const a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:i,when:o,weight1:r,weight2:s,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,Mt(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(_me)),this._cachedMergedKeybindings.slice(0)}}const Ly=new bA,bme={EditorModes:"platform.keybindingsRegistry"};Ur.add(bme.EditorModes,Ly);function _me(n,e){if(n.weight1!==e.weight1)return n.weight1-e.weight1;if(n.command&&e.command){if(n.command<e.command)return-1;if(n.command>e.command)return 1}return n.weight2-e.weight2}var vme=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Gz=function(n,e){return function(t,i){e(t,i,n)}},AS;function fv(n){return n.command!==void 0}function wme(n){return n.submenu!==void 0}const U=class U{constructor(e){if(U._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);U._instances.set(e,this),this.id=e}};U._instances=new Map,U.CommandPalette=new U("CommandPalette"),U.DebugBreakpointsContext=new U("DebugBreakpointsContext"),U.DebugCallStackContext=new U("DebugCallStackContext"),U.DebugConsoleContext=new U("DebugConsoleContext"),U.DebugVariablesContext=new U("DebugVariablesContext"),U.NotebookVariablesContext=new U("NotebookVariablesContext"),U.DebugHoverContext=new U("DebugHoverContext"),U.DebugWatchContext=new U("DebugWatchContext"),U.DebugToolBar=new U("DebugToolBar"),U.DebugToolBarStop=new U("DebugToolBarStop"),U.DebugCallStackToolbar=new U("DebugCallStackToolbar"),U.DebugCreateConfiguration=new U("DebugCreateConfiguration"),U.EditorContext=new U("EditorContext"),U.SimpleEditorContext=new U("SimpleEditorContext"),U.EditorContent=new U("EditorContent"),U.EditorLineNumberContext=new U("EditorLineNumberContext"),U.EditorContextCopy=new U("EditorContextCopy"),U.EditorContextPeek=new U("EditorContextPeek"),U.EditorContextShare=new U("EditorContextShare"),U.EditorTitle=new U("EditorTitle"),U.EditorTitleRun=new U("EditorTitleRun"),U.EditorTitleContext=new U("EditorTitleContext"),U.EditorTitleContextShare=new U("EditorTitleContextShare"),U.EmptyEditorGroup=new U("EmptyEditorGroup"),U.EmptyEditorGroupContext=new U("EmptyEditorGroupContext"),U.EditorTabsBarContext=new U("EditorTabsBarContext"),U.EditorTabsBarShowTabsSubmenu=new U("EditorTabsBarShowTabsSubmenu"),U.EditorTabsBarShowTabsZenModeSubmenu=new U("EditorTabsBarShowTabsZenModeSubmenu"),U.EditorActionsPositionSubmenu=new U("EditorActionsPositionSubmenu"),U.ExplorerContext=new U("ExplorerContext"),U.ExplorerContextShare=new U("ExplorerContextShare"),U.ExtensionContext=new U("ExtensionContext"),U.GlobalActivity=new U("GlobalActivity"),U.CommandCenter=new U("CommandCenter"),U.CommandCenterCenter=new U("CommandCenterCenter"),U.LayoutControlMenuSubmenu=new U("LayoutControlMenuSubmenu"),U.LayoutControlMenu=new U("LayoutControlMenu"),U.MenubarMainMenu=new U("MenubarMainMenu"),U.MenubarAppearanceMenu=new U("MenubarAppearanceMenu"),U.MenubarDebugMenu=new U("MenubarDebugMenu"),U.MenubarEditMenu=new U("MenubarEditMenu"),U.MenubarCopy=new U("MenubarCopy"),U.MenubarFileMenu=new U("MenubarFileMenu"),U.MenubarGoMenu=new U("MenubarGoMenu"),U.MenubarHelpMenu=new U("MenubarHelpMenu"),U.MenubarLayoutMenu=new U("MenubarLayoutMenu"),U.MenubarNewBreakpointMenu=new U("MenubarNewBreakpointMenu"),U.PanelAlignmentMenu=new U("PanelAlignmentMenu"),U.PanelPositionMenu=new U("PanelPositionMenu"),U.ActivityBarPositionMenu=new U("ActivityBarPositionMenu"),U.MenubarPreferencesMenu=new U("MenubarPreferencesMenu"),U.MenubarRecentMenu=new U("MenubarRecentMenu"),U.MenubarSelectionMenu=new U("MenubarSelectionMenu"),U.MenubarShare=new U("MenubarShare"),U.MenubarSwitchEditorMenu=new U("MenubarSwitchEditorMenu"),U.MenubarSwitchGroupMenu=new U("MenubarSwitchGroupMenu"),U.MenubarTerminalMenu=new U("MenubarTerminalMenu"),U.MenubarViewMenu=new U("MenubarViewMenu"),U.MenubarHomeMenu=new U("MenubarHomeMenu"),U.OpenEditorsContext=new U("OpenEditorsContext"),U.OpenEditorsContextShare=new U("OpenEditorsContextShare"),U.ProblemsPanelContext=new U("ProblemsPanelContext"),U.SCMInputBox=new U("SCMInputBox"),U.SCMChangesSeparator=new U("SCMChangesSeparator"),U.SCMChangesContext=new U("SCMChangesContext"),U.SCMIncomingChanges=new U("SCMIncomingChanges"),U.SCMIncomingChangesContext=new U("SCMIncomingChangesContext"),U.SCMIncomingChangesSetting=new U("SCMIncomingChangesSetting"),U.SCMOutgoingChanges=new U("SCMOutgoingChanges"),U.SCMOutgoingChangesContext=new U("SCMOutgoingChangesContext"),U.SCMOutgoingChangesSetting=new U("SCMOutgoingChangesSetting"),U.SCMIncomingChangesAllChangesContext=new U("SCMIncomingChangesAllChangesContext"),U.SCMIncomingChangesHistoryItemContext=new U("SCMIncomingChangesHistoryItemContext"),U.SCMOutgoingChangesAllChangesContext=new U("SCMOutgoingChangesAllChangesContext"),U.SCMOutgoingChangesHistoryItemContext=new U("SCMOutgoingChangesHistoryItemContext"),U.SCMChangeContext=new U("SCMChangeContext"),U.SCMResourceContext=new U("SCMResourceContext"),U.SCMResourceContextShare=new U("SCMResourceContextShare"),U.SCMResourceFolderContext=new U("SCMResourceFolderContext"),U.SCMResourceGroupContext=new U("SCMResourceGroupContext"),U.SCMSourceControl=new U("SCMSourceControl"),U.SCMSourceControlInline=new U("SCMSourceControlInline"),U.SCMSourceControlTitle=new U("SCMSourceControlTitle"),U.SCMHistoryTitle=new U("SCMHistoryTitle"),U.SCMTitle=new U("SCMTitle"),U.SearchContext=new U("SearchContext"),U.SearchActionMenu=new U("SearchActionContext"),U.StatusBarWindowIndicatorMenu=new U("StatusBarWindowIndicatorMenu"),U.StatusBarRemoteIndicatorMenu=new U("StatusBarRemoteIndicatorMenu"),U.StickyScrollContext=new U("StickyScrollContext"),U.TestItem=new U("TestItem"),U.TestItemGutter=new U("TestItemGutter"),U.TestProfilesContext=new U("TestProfilesContext"),U.TestMessageContext=new U("TestMessageContext"),U.TestMessageContent=new U("TestMessageContent"),U.TestPeekElement=new U("TestPeekElement"),U.TestPeekTitle=new U("TestPeekTitle"),U.TestCallStack=new U("TestCallStack"),U.TouchBarContext=new U("TouchBarContext"),U.TitleBarContext=new U("TitleBarContext"),U.TitleBarTitleContext=new U("TitleBarTitleContext"),U.TunnelContext=new U("TunnelContext"),U.TunnelPrivacy=new U("TunnelPrivacy"),U.TunnelProtocol=new U("TunnelProtocol"),U.TunnelPortInline=new U("TunnelInline"),U.TunnelTitle=new U("TunnelTitle"),U.TunnelLocalAddressInline=new U("TunnelLocalAddressInline"),U.TunnelOriginInline=new U("TunnelOriginInline"),U.ViewItemContext=new U("ViewItemContext"),U.ViewContainerTitle=new U("ViewContainerTitle"),U.ViewContainerTitleContext=new U("ViewContainerTitleContext"),U.ViewTitle=new U("ViewTitle"),U.ViewTitleContext=new U("ViewTitleContext"),U.CommentEditorActions=new U("CommentEditorActions"),U.CommentThreadTitle=new U("CommentThreadTitle"),U.CommentThreadActions=new U("CommentThreadActions"),U.CommentThreadAdditionalActions=new U("CommentThreadAdditionalActions"),U.CommentThreadTitleContext=new U("CommentThreadTitleContext"),U.CommentThreadCommentContext=new U("CommentThreadCommentContext"),U.CommentTitle=new U("CommentTitle"),U.CommentActions=new U("CommentActions"),U.CommentsViewThreadActions=new U("CommentsViewThreadActions"),U.InteractiveToolbar=new U("InteractiveToolbar"),U.InteractiveCellTitle=new U("InteractiveCellTitle"),U.InteractiveCellDelete=new U("InteractiveCellDelete"),U.InteractiveCellExecute=new U("InteractiveCellExecute"),U.InteractiveInputExecute=new U("InteractiveInputExecute"),U.InteractiveInputConfig=new U("InteractiveInputConfig"),U.ReplInputExecute=new U("ReplInputExecute"),U.IssueReporter=new U("IssueReporter"),U.NotebookToolbar=new U("NotebookToolbar"),U.NotebookStickyScrollContext=new U("NotebookStickyScrollContext"),U.NotebookCellTitle=new U("NotebookCellTitle"),U.NotebookCellDelete=new U("NotebookCellDelete"),U.NotebookCellInsert=new U("NotebookCellInsert"),U.NotebookCellBetween=new U("NotebookCellBetween"),U.NotebookCellListTop=new U("NotebookCellTop"),U.NotebookCellExecute=new U("NotebookCellExecute"),U.NotebookCellExecuteGoTo=new U("NotebookCellExecuteGoTo"),U.NotebookCellExecutePrimary=new U("NotebookCellExecutePrimary"),U.NotebookDiffCellInputTitle=new U("NotebookDiffCellInputTitle"),U.NotebookDiffCellMetadataTitle=new U("NotebookDiffCellMetadataTitle"),U.NotebookDiffCellOutputsTitle=new U("NotebookDiffCellOutputsTitle"),U.NotebookOutputToolbar=new U("NotebookOutputToolbar"),U.NotebookOutlineFilter=new U("NotebookOutlineFilter"),U.NotebookOutlineActionMenu=new U("NotebookOutlineActionMenu"),U.NotebookEditorLayoutConfigure=new U("NotebookEditorLayoutConfigure"),U.NotebookKernelSource=new U("NotebookKernelSource"),U.BulkEditTitle=new U("BulkEditTitle"),U.BulkEditContext=new U("BulkEditContext"),U.TimelineItemContext=new U("TimelineItemContext"),U.TimelineTitle=new U("TimelineTitle"),U.TimelineTitleContext=new U("TimelineTitleContext"),U.TimelineFilterSubMenu=new U("TimelineFilterSubMenu"),U.AccountsContext=new U("AccountsContext"),U.SidebarTitle=new U("SidebarTitle"),U.PanelTitle=new U("PanelTitle"),U.AuxiliaryBarTitle=new U("AuxiliaryBarTitle"),U.AuxiliaryBarHeader=new U("AuxiliaryBarHeader"),U.TerminalInstanceContext=new U("TerminalInstanceContext"),U.TerminalEditorInstanceContext=new U("TerminalEditorInstanceContext"),U.TerminalNewDropdownContext=new U("TerminalNewDropdownContext"),U.TerminalTabContext=new U("TerminalTabContext"),U.TerminalTabEmptyAreaContext=new U("TerminalTabEmptyAreaContext"),U.TerminalStickyScrollContext=new U("TerminalStickyScrollContext"),U.WebviewContext=new U("WebviewContext"),U.InlineCompletionsActions=new U("InlineCompletionsActions"),U.InlineEditsActions=new U("InlineEditsActions"),U.InlineEditActions=new U("InlineEditActions"),U.NewFile=new U("NewFile"),U.MergeInput1Toolbar=new U("MergeToolbar1Toolbar"),U.MergeInput2Toolbar=new U("MergeToolbar2Toolbar"),U.MergeBaseToolbar=new U("MergeBaseToolbar"),U.MergeInputResultToolbar=new U("MergeToolbarResultToolbar"),U.InlineSuggestionToolbar=new U("InlineSuggestionToolbar"),U.InlineEditToolbar=new U("InlineEditToolbar"),U.ChatContext=new U("ChatContext"),U.ChatCodeBlock=new U("ChatCodeblock"),U.ChatCompareBlock=new U("ChatCompareBlock"),U.ChatMessageTitle=new U("ChatMessageTitle"),U.ChatExecute=new U("ChatExecute"),U.ChatExecuteSecondary=new U("ChatExecuteSecondary"),U.ChatInputSide=new U("ChatInputSide"),U.AccessibleView=new U("AccessibleView"),U.MultiDiffEditorFileToolbar=new U("MultiDiffEditorFileToolbar"),U.DiffEditorHunkToolbar=new U("DiffEditorHunkToolbar"),U.DiffEditorSelectionToolbar=new U("DiffEditorSelectionToolbar");let es=U;const Ym=ai("menuService"),Zv=class Zv{static for(e){let t=this._all.get(e);return t||(t=new Zv(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const i of e)i instanceof Zv&&t.add(i.id);return t}constructor(e){this.id=e,this.has=t=>t===e}};Zv._all=new Map;let Sg=Zv;const k1=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new zde({merge:Sg.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(n){return this._commands.set(n.id,n),this._onDidChangeMenu.fire(Sg.for(es.CommandPalette)),Mt(()=>{this._commands.delete(n.id)&&this._onDidChangeMenu.fire(Sg.for(es.CommandPalette))})}getCommand(n){return this._commands.get(n)}getCommands(){const n=new Map;return this._commands.forEach((e,t)=>n.set(t,e)),n}appendMenuItem(n,e){let t=this._menuItems.get(n);t||(t=new Wo,this._menuItems.set(n,t));const i=t.push(e);return this._onDidChangeMenu.fire(Sg.for(n)),Mt(()=>{i(),this._onDidChangeMenu.fire(Sg.for(n))})}appendMenuItems(n){const e=new rt;for(const{id:t,item:i}of n)e.add(this.appendMenuItem(t,i));return e}getMenuItems(n){let e;return this._menuItems.has(n)?e=[...this._menuItems.get(n)]:e=[],n===es.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(n){const e=new Set;for(const t of n)fv(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,i)=>{e.has(i)||n.push({command:t})})}};class gv extends r5{constructor(e,t,i){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,i,"submenu"),this.item=e,this.hideActions=t}}let ku=AS=class{static label(e,t){return t?.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}constructor(e,t,i,r,s,o,a){this.hideActions=r,this.menuKeybinding=s,this._commandService=a,this.id=e.id,this.label=AS.label(e,i),this.tooltip=(typeof e.tooltip=="string"?e.tooltip:e.tooltip?.value)??"",this.enabled=!e.precondition||o.contextMatchesRules(e.precondition),this.checked=void 0;let l;if(e.toggled){const c=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=o.contextMatchesRules(c.condition),this.checked&&c.tooltip&&(this.tooltip=typeof c.tooltip=="string"?c.tooltip:c.tooltip.value),this.checked&&gi.isThemeIcon(c.icon)&&(l=c.icon),this.checked&&c.title&&(this.label=typeof c.title=="string"?c.title:c.title.value)}l||(l=gi.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new AS(t,void 0,i,r,void 0,o,a):void 0,this._options=i,this.class=l&&gi.asClassName(l)}run(...e){let t=[];return this._options?.arg&&(t=[...t,this._options.arg]),this._options?.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};ku=AS=vme([Gz(5,Ei),Gz(6,Ta)],ku);const Zm=ai("telemetryService"),vc=ai("logService");var uo;(function(n){n[n.Off=0]="Off",n[n.Trace=1]="Trace",n[n.Debug=2]="Debug",n[n.Info=3]="Info",n[n.Warning=4]="Warning",n[n.Error=5]="Error"})(uo||(uo={}));const DY=uo.Info;class EY extends xe{constructor(){super(...arguments),this.level=DY,this._onDidChangeLogLevel=this._register(new de),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==uo.Off&&this.level<=e}}class yme extends EY{constructor(e=DY,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.checkLogLevel(uo.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(uo.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(uo.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.checkLogLevel(uo.Warning)&&(this.useColors?console.log("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(uo.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}}class Cme extends EY{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.loggers)i.trace(e,...t)}debug(e,...t){for(const i of this.loggers)i.debug(e,...t)}info(e,...t){for(const i of this.loggers)i.info(e,...t)}warn(e,...t){for(const i of this.loggers)i.warn(e,...t)}error(e,...t){for(const i of this.loggers)i.error(e,...t)}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}function Sme(n){switch(n){case uo.Trace:return"trace";case uo.Debug:return"debug";case uo.Info:return"info";case uo.Warning:return"warn";case uo.Error:return"error";case uo.Off:return"off"}}new st("logLevel",Sme(uo.Info));class f5{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let i=t.kbExpr;this.precondition&&(i?i=Si.and(i,this.precondition):i=this.precondition);const r={id:this.id,weight:t.weight,args:t.args,when:i,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Ly.registerKeybindingRule(r)}}So.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){k1.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class _A extends f5{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i,r){return this._implementations.push({priority:e,name:t,implementation:i,when:r}),this._implementations.sort((s,o)=>o.priority-s.priority),{dispose:()=>{for(let s=0;s<this._implementations.length;s++)if(this._implementations[s].implementation===i){this._implementations.splice(s,1);return}}}}runCommand(e,t){const i=e.get(vc),r=e.get(Ei);i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const s of this._implementations){if(s.when){const a=r.getContext(Rs());if(!s.when.evaluate(a))continue}const o=s.implementation(e,t);if(o)return i.trace(`Command '${this.id}' was handled by '${s.name}'.`),typeof o=="boolean"?void 0:o}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class IY extends f5{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Tm extends f5{static bindToContribution(e){return class extends Tm{constructor(i){super(i),this._callback=i.handler}runEditorCommand(i,r,s){const o=e(r);o&&this._callback(o,s)}}}static runEditorCommand(e,t,i,r){const s=e.get(vr),o=s.getFocusedCodeEditor()||s.getActiveCodeEditor();if(o)return o.invokeWithinContext(a=>{if(a.get(Ei).contextMatchesRules(i??void 0))return r(a,o,t)})}runCommand(e,t){return Tm.runEditorCommand(e,t,this.precondition,(i,r,s)=>this.runEditorCommand(i,r,s))}}function Dt(n){return Xc.INSTANCE.registerEditorCommand(n),n}function NY(n,e,t){Xc.INSTANCE.registerEditorContribution(n,e,t)}var W0;(function(n){function e(o){return Xc.INSTANCE.getEditorCommand(o)}n.getEditorCommand=e;function t(){return Xc.INSTANCE.getEditorActions()}n.getEditorActions=t;function i(){return Xc.INSTANCE.getEditorContributions()}n.getEditorContributions=i;function r(o){return Xc.INSTANCE.getEditorContributions().filter(a=>o.indexOf(a.id)>=0)}n.getSomeEditorContributions=r;function s(){return Xc.INSTANCE.getDiffEditorContributions()}n.getDiffEditorContributions=s})(W0||(W0={}));const xme={EditorCommonContributions:"editor.contributions"},rL=class rL{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,i){this.editorContributions.push({id:e,ctor:t,instantiation:i})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};rL.INSTANCE=new rL;let Xc=rL;Ur.add(xme.EditorCommonContributions,Xc.INSTANCE);function Ty(n){return n.register(),n}const MY=Ty(new _A({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:es.MenubarEditMenu,group:"1_do",title:C({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:es.CommandPalette,group:"",title:C("undo","Undo"),order:1}]}));Ty(new IY(MY,{id:"default:undo",precondition:void 0}));const AY=Ty(new _A({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:es.MenubarEditMenu,group:"1_do",title:C({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:es.CommandPalette,group:"",title:C("redo","Redo"),order:1}]}));Ty(new IY(AY,{id:"default:redo",precondition:void 0}));const kme=Ty(new _A({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:es.MenubarSelectionMenu,group:"1_basic",title:C({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:es.CommandPalette,group:"",title:C("selectAll","Select All"),order:1}]})),Kz="default",Lme="$initialize";let Yz=!1;function c8(n){eb&&(Yz||(Yz=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(n.message))}class Tme{constructor(e,t,i,r,s){this.vsWorker=e,this.req=t,this.channel=i,this.method=r,this.args=s,this.type=0}}class Zz{constructor(e,t,i,r){this.vsWorker=e,this.seq=t,this.res=i,this.err=r,this.type=1}}class Dme{constructor(e,t,i,r,s){this.vsWorker=e,this.req=t,this.channel=i,this.eventName=r,this.arg=s,this.type=2}}class Eme{constructor(e,t,i){this.vsWorker=e,this.req=t,this.event=i,this.type=3}}class Ime{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class Nme{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t,i){const r=String(++this._lastSentReq);return new Promise((s,o)=>{this._pendingReplies[r]={resolve:s,reject:o},this._send(new Tme(this._workerId,r,e,t,i))})}listen(e,t,i){let r=null;const s=new de({onWillAddFirstListener:()=>{r=String(++this._lastSentReq),this._pendingEmitters.set(r,s),this._send(new Dme(this._workerId,r,e,t,i))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(r),this._send(new Ime(this._workerId,r)),r=null}});return s.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}createProxyToRemoteChannel(e,t){const i={get:(r,s)=>(typeof s=="string"&&!r[s]&&(PY(s)?r[s]=o=>this.listen(e,s,o):RY(s)?r[s]=this.listen(e,s,void 0):s.charCodeAt(0)===36&&(r[s]=async(...o)=>(await t?.(),this.sendMessage(e,s,o)))),r[s])};return new Proxy(Object.create(null),i)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let i=e.err;e.err.$isError&&(i=new Error,i.name=e.err.name,i.message=e.err.message,i.stack=e.err.stack),t.reject(i);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.channel,e.method,e.args).then(r=>{this._send(new Zz(this._workerId,t,r,void 0))},r=>{r.detail instanceof Error&&(r.detail=oz(r.detail)),this._send(new Zz(this._workerId,t,void 0,oz(r)))})}_handleSubscribeEventMessage(e){const t=e.req,i=this._handler.handleEvent(e.channel,e.eventName,e.arg)(r=>{this._send(new Eme(this._workerId,t,r))});this._pendingEvents.set(t,i)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let i=0;i<e.args.length;i++)e.args[i]instanceof ArrayBuffer&&t.push(e.args[i]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class Mme extends xe{constructor(e,t){super(),this._localChannels=new Map,this._worker=this._register(e.create({amdModuleId:"vs/base/common/worker/simpleWorker",esmModuleLocation:t.esmModuleLocation,label:t.label},s=>{this._protocol.handleMessage(s)},s=>{Wi(s)})),this._protocol=new Nme({sendMessage:(s,o)=>{this._worker.postMessage(s,o)},handleMessage:(s,o,a)=>this._handleMessage(s,o,a),handleEvent:(s,o,a)=>this._handleEvent(s,o,a)}),this._protocol.setWorkerId(this._worker.getId());let i=null;const r=globalThis.require;typeof r<"u"&&typeof r.getConfig=="function"?i=r.getConfig():typeof globalThis.requirejs<"u"&&(i=globalThis.requirejs.s.contexts._.config),this._onModuleLoaded=this._protocol.sendMessage(Kz,Lme,[this._worker.getId(),JSON.parse(JSON.stringify(i)),t.amdModuleId]),this.proxy=this._protocol.createProxyToRemoteChannel(Kz,async()=>{await this._onModuleLoaded}),this._onModuleLoaded.catch(s=>{this._onError("Worker failed to load "+t.amdModuleId,s)})}_handleMessage(e,t,i){const r=this._localChannels.get(e);if(!r)return Promise.reject(new Error(`Missing channel ${e} on main thread`));if(typeof r[t]!="function")return Promise.reject(new Error(`Missing method ${t} on main thread channel ${e}`));try{return Promise.resolve(r[t].apply(r,i))}catch(s){return Promise.reject(s)}}_handleEvent(e,t,i){const r=this._localChannels.get(e);if(!r)throw new Error(`Missing channel ${e} on main thread`);if(PY(t)){const s=r[t].call(r,i);if(typeof s!="function")throw new Error(`Missing dynamic event ${t} on main thread channel ${e}.`);return s}if(RY(t)){const s=r[t];if(typeof s!="function")throw new Error(`Missing event ${t} on main thread channel ${e}.`);return s}throw new Error(`Malformed event name ${t}`)}setChannel(e,t){this._localChannels.set(e,t)}_onError(e,t){console.error(e),console.info(t)}}function RY(n){return n[0]==="o"&&n[1]==="n"&&Id(n.charCodeAt(2))}function PY(n){return/^onDynamic/.test(n)&&Id(n.charCodeAt(9))}function Xm(n,e){const t=globalThis.MonacoEnvironment;if(t?.createTrustedTypesPolicy)try{return t.createTrustedTypesPolicy(n,e)}catch(i){Wi(i);return}try{return globalThis.trustedTypes?.createPolicy(n,e)}catch(i){Wi(i);return}}let s0;typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope"&&globalThis.workerttPolicy!==void 0?s0=globalThis.workerttPolicy:s0=Xm("defaultWorkerFactory",{createScriptURL:n=>n});function Ame(n,e){const t=globalThis.MonacoEnvironment;if(t){if(typeof t.getWorker=="function")return t.getWorker("workerMain.js",e);if(typeof t.getWorkerUrl=="function"){const i=t.getWorkerUrl("workerMain.js",e);return new Worker(s0?s0.createScriptURL(i):i,{name:e,type:"module"})}}if(n){const i=Rme(e,n.toString(!0)),r=new Worker(s0?s0.createScriptURL(i):i,{name:e,type:"module"});return Pme(r)}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function Rme(n,e,t){if(!(/^((http:)|(https:)|(file:)|(vscode-file:))/.test(e)&&e.substring(0,globalThis.origin.length)!==globalThis.origin)){const s=e.lastIndexOf("?"),o=e.lastIndexOf("#",s),a=s>0?new URLSearchParams(e.substring(s+1,~o?o:void 0)):new URLSearchParams;QE.addSearchParam(a,!0,!0),a.toString()?e=`${e}?${a.toString()}#${n}`:e=`${e}#${n}`}const r=new Blob([PM([`/*${n}*/`,void 0,`globalThis._VSCODE_NLS_MESSAGES = ${JSON.stringify(wK())};`,`globalThis._VSCODE_NLS_LANGUAGE = ${JSON.stringify(BM())};`,`globalThis._VSCODE_FILE_ROOT = '${globalThis._VSCODE_FILE_ROOT}';`,"const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });","globalThis.workerttPolicy = ttPolicy;",`await import(ttPolicy?.createScriptURL('${e}') ?? '${e}');`,"globalThis.postMessage({ type: 'vscode-worker-ready' });",`/*${n}*/`]).join("")],{type:"application/javascript"});return URL.createObjectURL(r)}function Pme(n){return new Promise((e,t)=>{n.onmessage=function(i){i.data.type==="vscode-worker-ready"&&(n.onmessage=null,e(n))},n.onerror=t})}function Ome(n){return typeof n.then=="function"}class Bme extends xe{constructor(e,t,i,r,s,o){super(),this.id=i,this.label=r;const a=Ame(e,r);Ome(a)?this.worker=a:this.worker=Promise.resolve(a),this.postMessage(t,[]),this.worker.then(l=>{l.onmessage=function(c){s(c.data)},l.onmessageerror=o,typeof l.addEventListener=="function"&&l.addEventListener("error",o)}),this._register(Mt(()=>{this.worker?.then(l=>{l.onmessage=null,l.onmessageerror=null,l.removeEventListener("error",o),l.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(e,t){this.worker?.then(i=>{try{i.postMessage(e,t)}catch(r){Wi(r),Wi(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:r}))}})}}class Fme{constructor(e,t){this.amdModuleId=e,this.label=t,this.esmModuleLocation=e5.asBrowserUri(`${e}.esm.js`)}}const sL=class sL{constructor(){this._webWorkerFailedBeforeError=!1}create(e,t,i){const r=++sL.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new Bme(e.esmModuleLocation,e.amdModuleId,r,e.label||"anonymous"+r,t,s=>{c8(s),this._webWorkerFailedBeforeError=s,i(s)})}};sL.LAST_WORKER_ID=0;let h8=sL;function Wme(n,e){const t=typeof n=="string"?new Fme(n,e):n;return new Mme(new h8,t)}var qs;(function(n){n[n.None=0]="None",n[n.Indent=1]="Indent",n[n.IndentOutdent=2]="IndentOutdent",n[n.Outdent=3]="Outdent"})(qs||(qs={}));class qT{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,i=e.notIn.length;t<i;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const i=e.findTokenIndexAtOffset(t-2),r=e.getStandardTokenType(i);return this.isOK(r)}_findNeutralCharacterInRange(e,t){for(let i=e;i<=t;i++){const r=String.fromCharCode(i);if(!this.open.includes(r)&&!this.close.includes(r))return r}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class zme{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)u_(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),u_(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),u_(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),u_(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&u_(this.autoClosingPairsCloseSingleChar,t.close,t)}}function u_(n,e,t){n.has(e)?n.get(e).push(t):n.set(e,[t])}const D0=class D0{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new qT(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new qT({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new qT({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:D0.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:D0.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}};D0.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`,D0.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;let u8=D0;function $g(n,e){const t=n.getCount(),i=n.findTokenIndexAtOffset(e),r=n.getLanguageId(i);let s=i;for(;s+1<t&&n.getLanguageId(s+1)===r;)s++;let o=i;for(;o>0&&n.getLanguageId(o-1)===r;)o--;return new Hme(n,r,o,s+1,n.getStartOffset(o),n.getEndOffset(s))}class Hme{constructor(e,t,i,r,s,o){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=i,this._lastTokenIndex=r,this.firstCharOffset=s,this._lastCharOffset=o,this.languageIdCodec=e.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}}function Pc(n){return(n&3)!==0}const Xz=typeof Buffer<"u";let GT;class vA{static wrap(e){return Xz&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new vA(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return Xz?this.buffer.toString():(GT||(GT=new TextDecoder),GT.decode(this.buffer))}}function Vme(n,e){return n[e+0]<<0>>>0|n[e+1]<<8>>>0}function $me(n,e,t){n[t+0]=e&255,e=e>>>8,n[t+1]=e&255}function Kl(n,e){return n[e]*2**24+n[e+1]*2**16+n[e+2]*2**8+n[e+3]}function Yl(n,e,t){n[t+3]=e,e=e>>>8,n[t+2]=e,e=e>>>8,n[t+1]=e,e=e>>>8,n[t]=e}function Qz(n,e){return n[e]}function Jz(n,e,t){n[t]=e}let KT;function OY(){return KT||(KT=new TextDecoder("UTF-16LE")),KT}let YT;function jme(){return YT||(YT=new TextDecoder("UTF-16BE")),YT}let ZT;function BY(){return ZT||(ZT=Mue()?OY():jme()),ZT}function Ume(n,e,t){const i=new Uint16Array(n.buffer,e,t);return t>0&&(i[0]===65279||i[0]===65534)?qme(n,e,t):OY().decode(i)}function qme(n,e,t){const i=[];let r=0;for(let s=0;s<t;s++){const o=Vme(n,e);e+=2,i[r++]=String.fromCharCode(o)}return i.join("")}class g5{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return BY().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||Lr(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let i=0;i<t;i++)this._buffer[this._bufferLength++]=e.charCodeAt(i)}}class Fx{constructor(e,t,i,r,s,o){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=i,this.close=r,this.forwardRegex=s,this.reversedRegex=o,this._openSet=Fx._toSet(this.open),this._closeSet=Fx._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const i of e)t.add(i);return t}}function Gme(n){const e=n.length;n=n.map(o=>[o[0].toLowerCase(),o[1].toLowerCase()]);const t=[];for(let o=0;o<e;o++)t[o]=o;const i=(o,a)=>{const[l,c]=o,[h,u]=a;return l===h||l===u||c===h||c===u},r=(o,a)=>{const l=Math.min(o,a),c=Math.max(o,a);for(let h=0;h<e;h++)t[h]===c&&(t[h]=l)};for(let o=0;o<e;o++){const a=n[o];for(let l=o+1;l<e;l++){const c=n[l];i(a,c)&&r(t[o],t[l])}}const s=[];for(let o=0;o<e;o++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===o){const[h,u]=n[c];a.push(h),l.push(u)}a.length>0&&s.push({open:a,close:l})}return s}class Kme{constructor(e,t){this._richEditBracketsBrand=void 0;const i=Gme(t);this.brackets=i.map((r,s)=>new Fx(e,s,r.open,r.close,Yme(r.open,r.close,i,s),Zme(r.open,r.close,i,s))),this.forwardRegex=Xme(this.brackets),this.reversedRegex=Qme(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const r of this.brackets){for(const s of r.open)this.textIsBracket[s]=r,this.textIsOpenBracket[s]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,s.length);for(const s of r.close)this.textIsBracket[s]=r,this.textIsOpenBracket[s]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,s.length)}}}function FY(n,e,t,i){for(let r=0,s=e.length;r<s;r++){if(r===t)continue;const o=e[r];for(const a of o.open)a.indexOf(n)>=0&&i.push(a);for(const a of o.close)a.indexOf(n)>=0&&i.push(a)}}function WY(n,e){return n.length-e.length}function m5(n){if(n.length<=1)return n;const e=[],t=new Set;for(const i of n)t.has(i)||(e.push(i),t.add(i));return e}function Yme(n,e,t,i){let r=[];r=r.concat(n),r=r.concat(e);for(let s=0,o=r.length;s<o;s++)FY(r[s],t,i,r);return r=m5(r),r.sort(WY),r.reverse(),Dy(r)}function Zme(n,e,t,i){let r=[];r=r.concat(n),r=r.concat(e);for(let s=0,o=r.length;s<o;s++)FY(r[s],t,i,r);return r=m5(r),r.sort(WY),r.reverse(),Dy(r.map(wA))}function Xme(n){let e=[];for(const t of n){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=m5(e),Dy(e)}function Qme(n){let e=[];for(const t of n){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=m5(e),Dy(e.map(wA))}function Jme(n){const e=/^[\w ]+$/.test(n);return n=Ou(n),e?`\\b${n}\\b`:n}function Dy(n,e){const t=`(${n.map(Jme).join(")|(")})`;return GK(t,!0,e)}const wA=function(){function n(i){const r=new Uint16Array(i.length);let s=0;for(let o=i.length-1;o>=0;o--)r[s++]=i.charCodeAt(o);return BY().decode(r)}let e=null,t=null;return function(r){return e!==r&&(e=r,t=n(e)),t}}();class cl{static _findPrevBracketInText(e,t,i,r){const s=i.match(e);if(!s)return null;const o=i.length-(s.index||0),a=s[0].length,l=r+o;return new oe(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,i,r,s){const a=wA(i).substring(i.length-s,i.length-r);return this._findPrevBracketInText(e,t,a,r)}static findNextBracketInText(e,t,i,r){const s=i.match(e);if(!s)return null;const o=s.index||0,a=s[0].length;if(a===0)return null;const l=r+o;return new oe(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,i,r,s){const o=i.substring(r,s);return this.findNextBracketInText(e,t,o,r)}}class epe{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const i of t.close){const r=i.charAt(i.length-1);e.push(r)}return wm(e)}onElectricCharacter(e,t,i){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const r=t.findTokenIndexAtOffset(i-1);if(Pc(t.getStandardTokenType(r)))return null;const s=this._richEditBrackets.reversedRegex,o=t.getLineContent().substring(0,i-1)+e,a=cl.findPrevBracketInRange(s,1,o,0,o.length);if(!a)return null;const l=o.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const h=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(h)?{matchOpenBracket:l}:null}}function C2(n){return n.global&&(n.lastIndex=0),!0}class tpe{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&C2(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&C2(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&C2(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&C2(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class o0{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const i=o0._createOpenBracketRegExp(t[0]),r=o0._createCloseBracketRegExp(t[1]);i&&r&&this._brackets.push({open:t[0],openRegExp:i,close:t[1],closeRegExp:r})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,i,r){if(e>=3)for(let s=0,o=this._regExpRules.length;s<o;s++){const a=this._regExpRules[s];if([{reg:a.beforeText,text:i},{reg:a.afterText,text:r},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&i.length>0&&r.length>0)for(let s=0,o=this._brackets.length;s<o;s++){const a=this._brackets[s];if(a.openRegExp.test(i)&&a.closeRegExp.test(r))return{indentAction:qs.IndentOutdent}}if(e>=2&&i.length>0){for(let s=0,o=this._brackets.length;s<o;s++)if(this._brackets[s].openRegExp.test(i))return{indentAction:qs.Indent}}return null}static _createOpenBracketRegExp(e){let t=Ou(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",o0._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Ou(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,o0._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return Wi(t),null}}}const Nn=ai("configurationService");function d8(n,e){const t=Object.create(null);for(const i in n)zY(t,i,n[i],e);return t}function zY(n,e,t,i){const r=e.split("."),s=r.pop();let o=n;for(let a=0;a<r.length;a++){const l=r[a];let c=o[l];switch(typeof c){case"undefined":c=o[l]=Object.create(null);break;case"object":if(c===null){i(`Ignoring ${e} as ${r.slice(0,a+1).join(".")} is null`);return}break;default:i(`Ignoring ${e} as ${r.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}o=c}if(typeof o=="object"&&o!==null)try{o[s]=t}catch{i(`Ignoring ${e} as ${r.join(".")} is ${JSON.stringify(o)}`)}else i(`Ignoring ${e} as ${r.join(".")} is ${JSON.stringify(o)}`)}function ipe(n,e){const t=e.split(".");HY(n,t)}function HY(n,e){const t=e.shift();if(e.length===0){delete n[t];return}if(Object.keys(n).indexOf(t)!==-1){const i=n[t];typeof i=="object"&&!Array.isArray(i)&&(HY(i,e),Object.keys(i).length===0&&delete n[t])}}function eH(n,e,t){function i(o,a){let l=o;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const r=e.split("."),s=i(n,r);return typeof s>"u"?t:s}function npe(n){return n.replace(/[\[\]]/g,"")}const Ir=ai("languageService");class Gc{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}const VY=[];function _i(n,e,t){e instanceof Gc||(e=new Gc(e,[],!!t)),VY.push([n,e])}function tH(){return VY}const cu=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),p5={JSONContribution:"base.contributions.json"};function rpe(n){return n.length>0&&n.charAt(n.length-1)==="#"?n.substring(0,n.length-1):n}class spe{constructor(){this._onDidChangeSchema=new de,this.schemasById={}}registerSchema(e,t){this.schemasById[rpe(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const ope=new spe;Ur.add(p5.JSONContribution,ope);const Qm={Configuration:"base.contributions.configuration"},S2="vscode://schemas/settings/resourceLanguage",iH=Ur.as(p5.JSONContribution);class ape{constructor(){this.registeredConfigurationDefaults=[],this.overrideIdentifiers=new Set,this._onDidSchemaChange=new de,this._onDidUpdateConfiguration=new de,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:C("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},iH.registerSchema(S2,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=new Set;this.doRegisterConfigurations(e,t,i),iH.registerSchema(S2,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);const i=[];for(const{overrides:r,source:s}of e)for(const o in r){t.add(o);const a=this.configurationDefaultsOverrides.get(o)??this.configurationDefaultsOverrides.set(o,{configurationDefaultOverrides:[]}).get(o),l=r[o];if(a.configurationDefaultOverrides.push({value:l,source:s}),df.test(o)){const c=this.mergeDefaultConfigurationsForOverrideIdentifier(o,l,s,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c,this.updateDefaultOverrideProperty(o,c,s),i.push(...Wx(o))}else{const c=this.mergeDefaultConfigurationsForConfigurationProperty(o,l,s,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c;const h=this.configurationProperties[o];h&&(this.updatePropertyDefaultValue(o,h),this.updateSchema(o,h))}}this.doRegisterOverrideIdentifiers(i)}updateDefaultOverrideProperty(e,t,i){const r={type:"object",default:t.value,description:C("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",npe(e)),$ref:S2,defaultDefaultValue:t.value,source:i,defaultValueSource:i};this.configurationProperties[e]=r,this.defaultLanguageConfigurationOverridesNode.properties[e]=r}mergeDefaultConfigurationsForOverrideIdentifier(e,t,i,r){const s=r?.value||{},o=r?.source??new Map;if(!(o instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const a of Object.keys(t)){const l=t[a];if(go(l)&&(Ua(s[a])||go(s[a]))){if(s[a]={...s[a]??{},...l},i)for(const h in l)o.set(`${a}.${h}`,i)}else s[a]=l,i?o.set(a,i):o.delete(a)}return{value:s,source:o}}mergeDefaultConfigurationsForConfigurationProperty(e,t,i,r){const s=this.configurationProperties[e],o=r?.value??s?.defaultDefaultValue;let a=i;if(go(t)&&(s!==void 0&&s.type==="object"||s===void 0&&(Ua(o)||go(o)))){if(a=r?.source??new Map,!(a instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)i&&a.set(`${e}.${c}`,i);t={...go(o)?o:{},...t}}return{value:t,source:a}}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,i){e.forEach(r=>{this.validateAndRegisterProperties(r,t,r.extensionInfo,r.restrictedProperties,void 0,i),this.configurationContributors.push(r),this.registerJSONConfiguration(r)})}validateAndRegisterProperties(e,t=!0,i,r,s=3,o){s=pa(e.scope)?s:e.scope;const a=e.properties;if(a)for(const c in a){const h=a[c];if(t&&hpe(c,h)){delete a[c];continue}if(h.source=i,h.defaultDefaultValue=a[c].default,this.updatePropertyDefaultValue(c,h),df.test(c)?h.scope=void 0:(h.scope=pa(h.scope)?s:h.scope,h.restricted=pa(h.restricted)?!!r?.includes(c):h.restricted),a[c].hasOwnProperty("included")&&!a[c].included){this.excludedConfigurationProperties[c]=a[c],delete a[c];continue}else this.configurationProperties[c]=a[c],a[c].policy?.name&&this.policyConfigurations.set(a[c].policy.name,c);!a[c].deprecationMessage&&a[c].markdownDeprecationMessage&&(a[c].deprecationMessage=a[c].markdownDeprecationMessage),o.add(c)}const l=e.allOf;if(l)for(const c of l)this.validateAndRegisterProperties(c,t,i,r,s,o)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=i=>{const r=i.properties;if(r)for(const o in r)this.updateSchema(o,r[o]);i.allOf?.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,i={type:"object",description:C("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:C("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:S2};this.updatePropertyDefaultValue(t,i)}}registerOverridePropertyPatternKey(){C("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),C("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const i=this.configurationDefaultsOverrides.get(e)?.configurationDefaultOverrideValue;let r,s;i&&(!t.disallowConfigurationDefault||!i.source)&&(r=i.value,s=i.source),Ua(r)&&(r=t.defaultDefaultValue,s=void 0),Ua(r)&&(r=cpe(t.type)),t.default=r,t.defaultValueSource=s}}const $Y="\\[([^\\]]+)\\]",nH=new RegExp($Y,"g"),lpe=`^(${$Y})+$`,df=new RegExp(lpe);function Wx(n){const e=[];if(df.test(n)){let t=nH.exec(n);for(;t?.length;){const i=t[1].trim();i&&e.push(i),t=nH.exec(n)}}return wm(e)}function cpe(n){switch(Array.isArray(n)?n[0]:n){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const RS=new ape;Ur.add(Qm.Configuration,RS);function hpe(n,e){return n.trim()?df.test(n)?C("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",n):RS.getConfigurationProperties()[n]!==void 0?C("config.property.duplicate","Cannot register '{0}'. This property is already registered.",n):e.policy?.name&&RS.getPolicyConfigurations().get(e.policy?.name)!==void 0?C("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",n,e.policy?.name,RS.getPolicyConfigurations().get(e.policy?.name)):null:C("config.property.empty","Cannot register an empty property")}const upe={ModesRegistry:"editor.modesRegistry"};class dpe{constructor(){this._onDidChangeLanguages=new de,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,i=this._languages.length;t<i;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}const L1=new dpe;Ur.add(upe.ModesRegistry,L1);const vl="plaintext",fpe=".txt";L1.registerLanguage({id:vl,extensions:[fpe],aliases:[C("plainText.alias","Plain Text"),"text"],mimetypes:[cu.text]});Ur.as(Qm.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class gpe{constructor(e,t){this.languageId=e;const i=t.brackets?rH(t.brackets):[],r=new Cz(a=>{const l=new Set;return{info:new mpe(this,a,l),closing:l}}),s=new Cz(a=>{const l=new Set,c=new Set;return{info:new ppe(this,a,l,c),opening:l,openingColorized:c}});for(const[a,l]of i){const c=r.get(a),h=s.get(l);c.closing.add(h.info),h.opening.add(c.info)}const o=t.colorizedBracketPairs?rH(t.colorizedBracketPairs):i.filter(a=>!(a[0]==="<"&&a[1]===">"));for(const[a,l]of o){const c=r.get(a),h=s.get(l);c.closing.add(h.info),h.openingColorized.add(c.info),h.opening.add(c.info)}this._openingBrackets=new Map([...r.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...s.cachedValues].map(([a,l])=>[a,l.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){const t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return Dy(t,e)}}function rH(n){return n.filter(([e,t])=>e!==""&&t!=="")}class jY{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class mpe extends jY{constructor(e,t,i){super(e,t),this.openedBrackets=i,this.isOpeningBracket=!0}}class ppe extends jY{constructor(e,t,i,r){super(e,t),this.openingBrackets=i,this.openingColorizedBrackets=r,this.isOpeningBracket=!1}closes(e){return e.config!==this.config?!1:this.openingBrackets.has(e)}closesColorized(e){return e.config!==this.config?!1:this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}var bpe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},sH=function(n,e){return function(t,i){e(t,i,n)}};class XT{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const mh=ai("languageConfigurationService");let f8=class extends xe{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new ype),this.onDidChangeEmitter=this._register(new de),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const i=new Set(Object.values(g8));this._register(this.configurationService.onDidChangeConfiguration(r=>{const s=r.change.keys.some(a=>i.has(a)),o=r.change.overrides.filter(([a,l])=>l.some(c=>i.has(c))).map(([a])=>a);if(s)this.configurations.clear(),this.onDidChangeEmitter.fire(new XT(void 0));else for(const a of o)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new XT(a)))})),this._register(this._registry.onDidChange(r=>{this.configurations.delete(r.languageId),this.onDidChangeEmitter.fire(new XT(r.languageId))}))}register(e,t,i){return this._registry.register(e,t,i)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=_pe(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};f8=bpe([sH(0,Nn),sH(1,Ir)],f8);function _pe(n,e,t,i){let r=e.getLanguageConfiguration(n);if(!r){if(!i.isRegisteredLanguageId(n))return new z0(n,{});r=new z0(n,{})}const s=vpe(r.languageId,t),o=qY([r.underlyingConfig,s]);return new z0(r.languageId,o)}const g8={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function vpe(n,e){const t=e.getValue(g8.brackets,{overrideIdentifier:n}),i=e.getValue(g8.colorizedBracketPairs,{overrideIdentifier:n});return{brackets:oH(t),colorizedBracketPairs:oH(i)}}function oH(n){if(Array.isArray(n))return n.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function UY(n,e,t){const i=n.getLineContent(e);let r=js(i);return r.length>t-1&&(r=r.substring(0,t-1)),r}class wpe{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const i=new aH(e,t,++this._order);return this._entries.push(i),this._resolved=null,Mt(()=>{for(let r=0;r<this._entries.length;r++)if(this._entries[r]===i){this._entries.splice(r,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new z0(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(aH.cmp),qY(this._entries.map(e=>e.configuration)))}}function qY(n){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of n)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class aH{constructor(e,t,i){this.configuration=e,this.priority=t,this.order=i}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class lH{constructor(e){this.languageId=e}}class ype extends xe{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new de),this.onDidChange=this._onDidChange.event,this._register(this.register(vl,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,i=0){let r=this._entries.get(e);r||(r=new wpe(e),this._entries.set(e,r));const s=r.register(t,i);return this._onDidChange.fire(new lH(e)),Mt(()=>{s.dispose(),this._onDidChange.fire(new lH(e))})}getLanguageConfiguration(e){return this._entries.get(e)?.getResolvedConfiguration()||null}}class z0{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new o0(this.underlyingConfig):null,this.comments=z0._handleComments(this.underlyingConfig),this.characterPair=new u8(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||zM,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new tpe(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new gpe(e,this.underlyingConfig)}getWordDefinition(){return HM(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new Kme(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new epe(this.brackets)),this._electricCharacter}onEnter(e,t,i,r){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,i,r):null}getAutoClosingPairs(){return new zme(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const i={};if(t.lineComment&&(i.lineCommentToken=t.lineComment),t.blockComment){const[r,s]=t.blockComment;i.blockCommentStartToken=r,i.blockCommentEndToken=s}return i}}_i(mh,f8,1);class kd{constructor(e,t,i,r){this.originalStart=e,this.originalLength=t,this.modifiedStart=i,this.modifiedLength=r}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class cH{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let i=0,r=e.length;i<r;i++)t[i]=e.charCodeAt(i);return t}}function Cpe(n,e,t){return new hu(new cH(n),new cH(e)).ComputeDiff(t).changes}class Pp{static Assert(e,t){if(!e)throw new Error(t)}}class Op{static Copy(e,t,i,r,s){for(let o=0;o<s;o++)i[r+o]=e[t+o]}static Copy2(e,t,i,r,s){for(let o=0;o<s;o++)i[r+o]=e[t+o]}}class hH{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new kd(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class hu{constructor(e,t,i=null){this.ContinueProcessingPredicate=i,this._originalSequence=e,this._modifiedSequence=t;const[r,s,o]=hu._getElements(e),[a,l,c]=hu._getElements(t);this._hasStrings=o&&c,this._originalStringElements=r,this._originalElementsOrHash=s,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(hu._isStringArray(t)){const i=new Int32Array(t.length);for(let r=0,s=t.length;r<s;r++)i[r]=sA(t[r],0);return[t,i,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const i=hu._getStrictElement(this._originalSequence,e),r=hu._getStrictElement(this._modifiedSequence,t);return i===r}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,i,r,s){const o=[!1];let a=this.ComputeDiffRecursive(e,t,i,r,o);return s&&(a=this.PrettifyChanges(a)),{quitEarly:o[0],changes:a}}ComputeDiffRecursive(e,t,i,r,s){for(s[0]=!1;e<=t&&i<=r&&this.ElementsAreEqual(e,i);)e++,i++;for(;t>=e&&r>=i&&this.ElementsAreEqual(t,r);)t--,r--;if(e>t||i>r){let u;return i<=r?(Pp.Assert(e===t+1,"originalStart should only be one more than originalEnd"),u=[new kd(e,0,i,r-i+1)]):e<=t?(Pp.Assert(i===r+1,"modifiedStart should only be one more than modifiedEnd"),u=[new kd(e,t-e+1,i,0)]):(Pp.Assert(e===t+1,"originalStart should only be one more than originalEnd"),Pp.Assert(i===r+1,"modifiedStart should only be one more than modifiedEnd"),u=[]),u}const o=[0],a=[0],l=this.ComputeRecursionPoint(e,t,i,r,o,a,s),c=o[0],h=a[0];if(l!==null)return l;if(!s[0]){const u=this.ComputeDiffRecursive(e,c,i,h,s);let d=[];return s[0]?d=[new kd(c+1,t-(c+1)+1,h+1,r-(h+1)+1)]:d=this.ComputeDiffRecursive(c+1,t,h+1,r,s),this.ConcatenateChanges(u,d)}return[new kd(e,t-e+1,i,r-i+1)]}WALKTRACE(e,t,i,r,s,o,a,l,c,h,u,d,g,p,b,_,w,y){let k=null,L=null,T=new hH,N=t,D=i,O=g[0]-_[0]-r,B=-1073741824,G=this.m_forwardHistory.length-1;do{const H=O+e;H===N||H<D&&c[H-1]<c[H+1]?(u=c[H+1],p=u-O-r,u<B&&T.MarkNextChange(),B=u,T.AddModifiedElement(u+1,p),O=H+1-e):(u=c[H-1]+1,p=u-O-r,u<B&&T.MarkNextChange(),B=u-1,T.AddOriginalElement(u,p+1),O=H-1-e),G>=0&&(c=this.m_forwardHistory[G],e=c[0],N=1,D=c.length-1)}while(--G>=-1);if(k=T.getReverseChanges(),y[0]){let H=g[0]+1,q=_[0]+1;if(k!==null&&k.length>0){const X=k[k.length-1];H=Math.max(H,X.getOriginalEnd()),q=Math.max(q,X.getModifiedEnd())}L=[new kd(H,d-H+1,q,b-q+1)]}else{T=new hH,N=o,D=a,O=g[0]-_[0]-l,B=1073741824,G=w?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const H=O+s;H===N||H<D&&h[H-1]>=h[H+1]?(u=h[H+1]-1,p=u-O-l,u>B&&T.MarkNextChange(),B=u+1,T.AddOriginalElement(u+1,p+1),O=H+1-s):(u=h[H-1],p=u-O-l,u>B&&T.MarkNextChange(),B=u,T.AddModifiedElement(u+1,p+1),O=H-1-s),G>=0&&(h=this.m_reverseHistory[G],s=h[0],N=1,D=h.length-1)}while(--G>=-1);L=T.getChanges()}return this.ConcatenateChanges(k,L)}ComputeRecursionPoint(e,t,i,r,s,o,a){let l=0,c=0,h=0,u=0,d=0,g=0;e--,i--,s[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const p=t-e+(r-i),b=p+1,_=new Int32Array(b),w=new Int32Array(b),y=r-i,k=t-e,L=e-i,T=t-r,D=(k-y)%2===0;_[y]=e,w[k]=t,a[0]=!1;for(let O=1;O<=p/2+1;O++){let B=0,G=0;h=this.ClipDiagonalBound(y-O,O,y,b),u=this.ClipDiagonalBound(y+O,O,y,b);for(let q=h;q<=u;q+=2){q===h||q<u&&_[q-1]<_[q+1]?l=_[q+1]:l=_[q-1]+1,c=l-(q-y)-L;const X=l;for(;l<t&&c<r&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(_[q]=l,l+c>B+G&&(B=l,G=c),!D&&Math.abs(q-k)<=O-1&&l>=w[q])return s[0]=l,o[0]=c,X<=w[q]&&O<=1448?this.WALKTRACE(y,h,u,L,k,d,g,T,_,w,l,t,s,c,r,o,D,a):null}const H=(B-e+(G-i)-O)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(B,H))return a[0]=!0,s[0]=B,o[0]=G,H>0&&O<=1448?this.WALKTRACE(y,h,u,L,k,d,g,T,_,w,l,t,s,c,r,o,D,a):(e++,i++,[new kd(e,t-e+1,i,r-i+1)]);d=this.ClipDiagonalBound(k-O,O,k,b),g=this.ClipDiagonalBound(k+O,O,k,b);for(let q=d;q<=g;q+=2){q===d||q<g&&w[q-1]>=w[q+1]?l=w[q+1]-1:l=w[q-1],c=l-(q-k)-T;const X=l;for(;l>e&&c>i&&this.ElementsAreEqual(l,c);)l--,c--;if(w[q]=l,D&&Math.abs(q-y)<=O&&l<=_[q])return s[0]=l,o[0]=c,X>=_[q]&&O<=1448?this.WALKTRACE(y,h,u,L,k,d,g,T,_,w,l,t,s,c,r,o,D,a):null}if(O<=1447){let q=new Int32Array(u-h+2);q[0]=y-h+1,Op.Copy2(_,h,q,1,u-h+1),this.m_forwardHistory.push(q),q=new Int32Array(g-d+2),q[0]=k-d+1,Op.Copy2(w,d,q,1,g-d+1),this.m_reverseHistory.push(q)}}return this.WALKTRACE(y,h,u,L,k,d,g,T,_,w,l,t,s,c,r,o,D,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const i=e[t],r=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,s=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=i.originalLength>0,a=i.modifiedLength>0;for(;i.originalStart+i.originalLength<r&&i.modifiedStart+i.modifiedLength<s&&(!o||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!a||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){const c=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!c)break;i.originalStart++,i.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const i=e[t];let r=0,s=0;if(t>0){const u=e[t-1];r=u.originalStart+u.originalLength,s=u.modifiedStart+u.modifiedLength}const o=i.originalLength>0,a=i.modifiedLength>0;let l=0,c=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let u=1;;u++){const d=i.originalStart-u,g=i.modifiedStart-u;if(d<r||g<s||o&&!this.OriginalElementsAreEqual(d,d+i.originalLength)||a&&!this.ModifiedElementsAreEqual(g,g+i.modifiedLength))break;const b=(d===r&&g===s?5:0)+this._boundaryScore(d,i.originalLength,g,i.modifiedLength);b>c&&(c=b,l=u)}i.originalStart-=l,i.modifiedStart-=l;const h=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],h)){e[t-1]=h[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,i=e.length;t<i;t++){const r=e[t-1],s=e[t],o=s.originalStart-r.originalStart-r.originalLength,a=r.originalStart,l=s.originalStart+s.originalLength,c=l-a,h=r.modifiedStart,u=s.modifiedStart+s.modifiedLength,d=u-h;if(o<5&&c<20&&d<20){const g=this._findBetterContiguousSequence(a,c,h,d,o);if(g){const[p,b]=g;(p!==r.originalStart+r.originalLength||b!==r.modifiedStart+r.modifiedLength)&&(r.originalLength=p-r.originalStart,r.modifiedLength=b-r.modifiedStart,s.originalStart=p+o,s.modifiedStart=b+o,s.originalLength=l-s.originalStart,s.modifiedLength=u-s.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,i,r,s){if(t<s||r<s)return null;const o=e+t-s+1,a=i+r-s+1;let l=0,c=0,h=0;for(let u=e;u<o;u++)for(let d=i;d<a;d++){const g=this._contiguousSequenceScore(u,d,s);g>0&&g>l&&(l=g,c=u,h=d)}return l>0?[c,h]:null}_contiguousSequenceScore(e,t,i){let r=0;for(let s=0;s<i;s++){if(!this.ElementsAreEqual(e+s,t+s))return 0;r+=this._originalStringElements[e+s].length}return r}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,t,i,r){const s=this._OriginalRegionIsBoundary(e,t)?1:0,o=this._ModifiedRegionIsBoundary(i,r)?1:0;return s+o}ConcatenateChanges(e,t){const i=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],i)){const r=new Array(e.length+t.length-1);return Op.Copy(e,0,r,0,e.length-1),r[e.length-1]=i[0],Op.Copy(t,1,r,e.length,t.length-1),r}else{const r=new Array(e.length+t.length);return Op.Copy(e,0,r,0,e.length),Op.Copy(t,0,r,e.length,t.length),r}}ChangesOverlap(e,t,i){if(Pp.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),Pp.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const r=e.originalStart;let s=e.originalLength;const o=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(s=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),i[0]=new kd(r,s,o,a),!0}else return i[0]=null,!1}ClipDiagonalBound(e,t,i,r){if(e>=0&&e<r)return e;const s=i,o=r-i-1,a=t%2===0;if(e<0){const l=s%2===0;return a===l?0:1}else{const l=o%2===0;return a===l?r-1:r-2}}}function zx(n){return n<0?0:n>255?255:n|0}function Bp(n){return n<0?0:n>4294967295?4294967295:n|0}class Ey{constructor(e){const t=zx(e);this._defaultValue=t,this._asciiMap=Ey._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const i=zx(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class Spe{constructor(e,t,i){const r=new Uint8Array(e*t);for(let s=0,o=e*t;s<o;s++)r[s]=i;this._data=r,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}}class xpe{constructor(e){let t=0,i=0;for(let s=0,o=e.length;s<o;s++){const[a,l,c]=e[s];l>t&&(t=l),a>i&&(i=a),c>i&&(i=c)}t++,i++;const r=new Spe(i,t,0);for(let s=0,o=e.length;s<o;s++){const[a,l,c]=e[s];r.set(a,l,c)}this._states=r,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let QT=null;function kpe(){return QT===null&&(QT=new xpe([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),QT}let d_=null;function Lpe(){if(d_===null){d_=new Ey(0);const n=` 	<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…`;for(let t=0;t<n.length;t++)d_.set(n.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)d_.set(e.charCodeAt(t),2)}return d_}class Hx{static _createLink(e,t,i,r,s){let o=s-1;do{const a=t.charCodeAt(o);if(e.get(a)!==2)break;o--}while(o>r);if(r>0){const a=t.charCodeAt(r-1),l=t.charCodeAt(o);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&o--}return{range:{startLineNumber:i,startColumn:r+1,endLineNumber:i,endColumn:o+2},url:t.substring(r,o+1)}}static computeLinks(e,t=kpe()){const i=Lpe(),r=[];for(let s=1,o=e.getLineCount();s<=o;s++){const a=e.getLineContent(s),l=a.length;let c=0,h=0,u=0,d=1,g=!1,p=!1,b=!1,_=!1;for(;c<l;){let w=!1;const y=a.charCodeAt(c);if(d===13){let k;switch(y){case 40:g=!0,k=0;break;case 41:k=g?0:1;break;case 91:b=!0,p=!0,k=0;break;case 93:b=!1,k=p?0:1;break;case 123:_=!0,k=0;break;case 125:k=_?0:1;break;case 39:case 34:case 96:u===y?k=1:u===39||u===34||u===96?k=0:k=1;break;case 42:k=u===42?1:0;break;case 124:k=u===124?1:0;break;case 32:k=b?0:1;break;default:k=i.get(y)}k===1&&(r.push(Hx._createLink(i,a,s,h,c)),w=!0)}else if(d===12){let k;y===91?(p=!0,k=0):k=i.get(y),k===1?w=!0:d=13}else d=t.nextState(d,y),d===0&&(w=!0);w&&(d=1,g=!1,p=!1,_=!1,h=c+1,u=y),c++}d===13&&r.push(Hx._createLink(i,a,s,h,l))}return r}}function Tpe(n){return!n||typeof n.getLineCount!="function"||typeof n.getLineContent!="function"?[]:Hx.computeLinks(n)}const oL=class oL{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,i,r,s){if(e&&t){const o=this.doNavigateValueSet(t,s);if(o)return{range:e,value:o}}if(i&&r){const o=this.doNavigateValueSet(r,s);if(o)return{range:i,value:o}}return null}doNavigateValueSet(e,t){const i=this.numberReplace(e,t);return i!==null?i:this.textReplace(e,t)}numberReplace(e,t){const i=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let r=Number(e);const s=parseFloat(e);return!isNaN(r)&&!isNaN(s)&&r===s?r===0&&!t?null:(r=Math.floor(r*i),r+=t?i:-i,String(r/i)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,i){let r=null;for(let s=0,o=e.length;r===null&&s<o;s++)r=this.valueSetReplace(e[s],t,i);return r}valueSetReplace(e,t,i){let r=e.indexOf(t);return r>=0?(r+=i?1:-1,r<0?r=e.length-1:r%=e.length,e[r]):null}};oL.INSTANCE=new oL;let m8=oL;const Xv=class Xv{static getChannel(e){return e.getChannel(Xv.CHANNEL_NAME)}static setChannel(e,t){e.setChannel(Xv.CHANNEL_NAME,t)}};Xv.CHANNEL_NAME="editorWorkerHost";let p8=Xv;var uH,dH;class Dpe{constructor(e,t){this.uri=e,this.value=t}}function Epe(n){return Array.isArray(n)}const Fg=class Fg{constructor(e,t){if(this[uH]="ResourceMap",e instanceof Fg)this.map=new Map(e.map),this.toKey=t??Fg.defaultToKey;else if(Epe(e)){this.map=new Map,this.toKey=t??Fg.defaultToKey;for(const[i,r]of e)this.set(i,r)}else this.map=new Map,this.toKey=e??Fg.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new Dpe(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[i,r]of this.map)e(r.value,r.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(uH=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}};Fg.defaultToKey=e=>e.toString();let xa=Fg;class Ipe{constructor(){this[dH]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=0){const i=this._map.get(e);if(i)return t!==0&&this.touch(i,t),i.value}set(e,t,i=0){let r=this._map.get(e);if(r)r.value=t,i!==0&&this.touch(r,i);else{switch(r={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.addItemLast(r);break;case 1:this.addItemFirst(r);break;case 2:this.addItemLast(r);break;default:this.addItemLast(r);break}this._map.set(e,r),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const i=this._state;let r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this._state;let i=this._head;const r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.key,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}values(){const e=this,t=this._state;let i=this._head;const r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.value,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this._state;let i=this._head;const r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:[i.key,i.value],done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}[(dH=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.previous,i--;this._tail=t,this._size=i,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const i=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(i.previous=r,r.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const i=e.next,r=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=r,r.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}class Npe extends Ipe{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}}class Iy extends Npe{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}}class Mpe{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(const[t,i]of e)this.set(t,i)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){const t=this._m1.get(e);return t===void 0?!1:(this._m1.delete(e),this._m2.delete(t),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}}class GY{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);i&&(i.delete(t),i.size===0&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);i&&i.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}class Ape extends Ey{constructor(e,t){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let i=0,r=e.length;i<r;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const r of this._getIntlSegmenterWordsOnLine(e)){if(r.index>t)break;i=r}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this._getIntlSegmenterWordsOnLine(e))if(!(i.index<t))return i;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){const t=[];for(const i of e)this._isWordLike(i)&&t.push(i);return t}_isWordLike(e){return!!e.isWordLike}}const fH=new Iy(10);function T1(n,e){const t=`${n}/${e.join(",")}`;let i=fH.get(t);return i||(i=new Ape(n,e),fH.set(t,i)),i}var Vx;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=4]="Right",n[n.Full=7]="Full"})(Vx||(Vx={}));var ff;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=3]="Right"})(ff||(ff={}));var D1;(function(n){n[n.Both=0]="Both",n[n.Right=1]="Right",n[n.Left=2]="Left",n[n.None=3]="None"})(D1||(D1={}));class PS{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&Uo(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class Cw{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}function Rpe(n){return n&&typeof n.read=="function"}class JT{constructor(e,t,i,r,s,o){this.identifier=e,this.range=t,this.text=i,this.forceMoveMarkers=r,this.isAutoWhitespaceEdit=s,this._isTracked=o}}class Ppe{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}}class Ope{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}}function Bpe(n){return!n.isTooLargeForSyncing()&&!n.isForSimpleWidget}const Fpe=999;class Fp{constructor(e,t,i,r){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=r}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=Wpe(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=GK(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new Ppe(t,this.wordSeparators?T1(this.wordSeparators,[]):null,i?this.searchString:null)}}function Wpe(n){if(!n||n.length===0)return!1;for(let e=0,t=n.length;e<t;e++){const i=n.charCodeAt(e);if(i===10)return!0;if(i===92){if(e++,e>=t)break;const r=n.charCodeAt(e);if(r===110||r===114||r===87)return!0}}return!1}function xg(n,e,t){if(!t)return new Cw(n,null);const i=[];for(let r=0,s=e.length;r<s;r++)i[r]=e[r];return new Cw(n,i)}class gH{constructor(e){const t=[];let i=0;for(let r=0,s=e.length;r<s;r++)e.charCodeAt(r)===10&&(t[i++]=r);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let i=0,r=t.length-1;if(r===-1||e<=t[0])return 0;for(;i<r;){const s=i+((r-i)/2>>0);t[s]>=e?r=s-1:t[s+1]>=e?(i=s,r=s):i=s+1}return i+1}}class x2{static findMatches(e,t,i,r,s){const o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,i,new a0(o.wordSeparators,o.regex),r,s):this._doFindMatchesLineByLine(e,i,o,r,s):[]}static _getMultilineMatchRange(e,t,i,r,s,o){let a,l=0;r?(l=r.findLineFeedCountBeforeOffset(s),a=t+s+l):a=t+s;let c;if(r){const g=r.findLineFeedCountBeforeOffset(s+o.length)-l;c=a+o.length+g}else c=a+o.length;const h=e.getPositionAt(a),u=e.getPositionAt(c);return new oe(h.lineNumber,h.column,u.lineNumber,u.column)}static _doFindMatchesMultiline(e,t,i,r,s){const o=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new gH(a):null,c=[];let h=0,u;for(i.reset(0);u=i.next(a);)if(c[h++]=xg(this._getMultilineMatchRange(e,o,a,l,u.index,u[0]),u,r),h>=s)return c;return c}static _doFindMatchesLineByLine(e,t,i,r,s){const o=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(i,c,t.startLineNumber,t.startColumn-1,a,o,r,s),o}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(i,l,t.startLineNumber,t.startColumn-1,a,o,r,s);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<s;c++)a=this._findMatchesInLine(i,e.getLineContent(c),c,0,a,o,r,s);if(a<s){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(i,c,t.endLineNumber,0,a,o,r,s)}return o}static _findMatchesInLine(e,t,i,r,s,o,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const d=e.simpleSearch,g=d.length,p=t.length;let b=-g;for(;(b=t.indexOf(d,b+g))!==-1;)if((!c||yA(c,t,p,b,g))&&(o[s++]=new Cw(new oe(i,b+1+r,i,b+1+g+r),null),s>=l))return s;return s}const h=new a0(e.wordSeparators,e.regex);let u;h.reset(0);do if(u=h.next(t),u&&(o[s++]=xg(new oe(i,u.index+1+r,i,u.index+1+u[0].length+r),u,a),s>=l))return s;while(u);return s}static findNextMatch(e,t,i,r){const s=t.parseSearchRequest();if(!s)return null;const o=new a0(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindNextMatchMultiline(e,i,o,r):this._doFindNextMatchLineByLine(e,i,o,r)}static _doFindNextMatchMultiline(e,t,i,r){const s=new be(t.lineNumber,1),o=e.getOffsetAt(s),a=e.getLineCount(),l=e.getValueInRange(new oe(s.lineNumber,s.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new gH(l):null;i.reset(t.column-1);const h=i.next(l);return h?xg(this._getMultilineMatchRange(e,o,l,c,h.index,h[0]),h,r):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new be(1,1),i,r):null}static _doFindNextMatchLineByLine(e,t,i,r){const s=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o),l=this._findFirstMatchInLine(i,a,o,t.column,r);if(l)return l;for(let c=1;c<=s;c++){const h=(o+c-1)%s,u=e.getLineContent(h+1),d=this._findFirstMatchInLine(i,u,h+1,1,r);if(d)return d}return null}static _findFirstMatchInLine(e,t,i,r,s){e.reset(r-1);const o=e.next(t);return o?xg(new oe(i,o.index+1,i,o.index+1+o[0].length),o,s):null}static findPreviousMatch(e,t,i,r){const s=t.parseSearchRequest();if(!s)return null;const o=new a0(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindPreviousMatchMultiline(e,i,o,r):this._doFindPreviousMatchLineByLine(e,i,o,r)}static _doFindPreviousMatchMultiline(e,t,i,r){const s=this._doFindMatchesMultiline(e,new oe(1,1,t.lineNumber,t.column),i,r,10*Fpe);if(s.length>0)return s[s.length-1];const o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new be(o,e.getLineMaxColumn(o)),i,r):null}static _doFindPreviousMatchLineByLine(e,t,i,r){const s=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o).substring(0,t.column-1),l=this._findLastMatchInLine(i,a,o,r);if(l)return l;for(let c=1;c<=s;c++){const h=(s+o-c-1)%s,u=e.getLineContent(h+1),d=this._findLastMatchInLine(i,u,h+1,r);if(d)return d}return null}static _findLastMatchInLine(e,t,i,r){let s=null,o;for(e.reset(0);o=e.next(t);)s=xg(new oe(i,o.index+1,i,o.index+1+o[0].length),o,r);return s}}function zpe(n,e,t,i,r){if(i===0)return!0;const s=e.charCodeAt(i-1);if(n.get(s)!==0||s===13||s===10)return!0;if(r>0){const o=e.charCodeAt(i);if(n.get(o)!==0)return!0}return!1}function Hpe(n,e,t,i,r){if(i+r===t)return!0;const s=e.charCodeAt(i+r);if(n.get(s)!==0||s===13||s===10)return!0;if(r>0){const o=e.charCodeAt(i+r-1);if(n.get(o)!==0)return!0}return!1}function yA(n,e,t,i,r){return zpe(n,e,t,i,r)&&Hpe(n,e,t,i,r)}class a0{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let i;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(i=this._searchRegex.exec(e),!i))return null;const r=i.index,s=i[0].length;if(r===this._prevMatchStartIndex&&s===this._prevMatchLength){if(s===0){Mx(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=r,this._prevMatchLength=s,!this._wordSeparators||yA(this._wordSeparators,e,t,r,s))return i}while(i);return null}}class Vpe{static computeUnicodeHighlights(e,t,i){const r=i?i.startLineNumber:1,s=i?i.endLineNumber:e.getLineCount(),o=new mH(t),a=o.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${$pe(Array.from(a))}`,"g");const c=new a0(null,l),h=[];let u=!1,d,g=0,p=0,b=0;e:for(let _=r,w=s;_<=w;_++){const y=e.getLineContent(_),k=y.length;c.reset(0);do if(d=c.next(y),d){let L=d.index,T=d.index+d[0].length;if(L>0){const B=y.charCodeAt(L-1);Lr(B)&&L--}if(T+1<k){const B=y.charCodeAt(T-1);Lr(B)&&T++}const N=y.substring(L,T);let D=dw(L+1,zM,y,0);D&&D.endColumn<=L+1&&(D=null);const O=o.shouldHighlightNonBasicASCII(N,D?D.word:null);if(O!==0){if(O===3?g++:O===2?p++:O===1?b++:mA(),h.length>=1e3){u=!0;break e}h.push(new oe(_,L+1,_,T+1))}}while(d)}return{ranges:h,hasMore:u,ambiguousCharacterCount:g,invisibleCharacterCount:p,nonBasicAsciiCharacterCount:b}}static computeUnicodeHighlightReason(e,t){const i=new mH(t);switch(i.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const s=e.codePointAt(0),o=i.ambiguousCharacters.getPrimaryConfusable(s),a=bw.getLocales().filter(l=>!bw.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(s));return{kind:0,confusableWith:String.fromCodePoint(o),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}function $pe(n,e){return`[${Ou(n.map(i=>String.fromCodePoint(i)).join(""))}]`}class mH{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=bw.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of hv.codePoints)pH(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const i=e.codePointAt(0);if(this.allowedCodePoints.has(i))return 0;if(this.options.nonBasicASCII)return 1;let r=!1,s=!1;if(t)for(const o of t){const a=o.codePointAt(0),l=eA(o);r=r||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!hv.isInvisibleCharacter(a)&&(s=!0)}return!r&&s?0:this.options.invisibleCharacters&&!pH(e)&&hv.isInvisibleCharacter(i)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(i)?3:0}}function pH(n){return n===" "||n===`
`||n==="	"}class OS{constructor(e,t,i){this.changes=e,this.moves=t,this.hitTimeout=i}}class KY{constructor(e,t){this.lineRangeMapping=e,this.changes=t}}class Pt{static addRange(e,t){let i=0;for(;i<t.length&&t[i].endExclusive<e.start;)i++;let r=i;for(;r<t.length&&t[r].start<=e.endExclusive;)r++;if(i===r)t.splice(i,0,e);else{const s=Math.min(e.start,t[i].start),o=Math.max(e.endExclusive,t[r-1].endExclusive);t.splice(i,r-i,new Pt(s,o))}}static tryCreate(e,t){if(!(e>t))return new Pt(e,t)}static ofLength(e){return new Pt(0,e)}static ofStartAndLength(e,t){return new Pt(e,e+t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new Ti(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new Pt(this.start+e,this.endExclusive+e)}deltaStart(e){return new Pt(this.start+e,this.endExclusive)}deltaEnd(e){return new Pt(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new Pt(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);if(t<=i)return new Pt(t,i)}intersects(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);return t<i}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new Ti(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new Ti(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}}class CA{constructor(){this._sortedRanges=[]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let i=t;for(;i<this._sortedRanges.length&&this._sortedRanges[i].start<=e.endExclusive;)i++;if(t===i)this._sortedRanges.splice(t,0,e);else{const r=Math.min(e.start,this._sortedRanges[t].start),s=Math.max(e.endExclusive,this._sortedRanges[i-1].endExclusive);this._sortedRanges.splice(t,i-t,new Pt(r,s))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new CA;for(const i of this._sortedRanges){const r=i.intersect(e);r&&t.addRange(r)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}}function $x(n,e){const t=jpe(n,e);if(t!==-1)return n[t]}function jpe(n,e,t=n.length-1){for(let i=t;i>=0;i--){const r=n[i];if(e(r))return i}return-1}function E1(n,e){const t=Sw(n,e);return t===-1?void 0:n[t]}function Sw(n,e,t=0,i=n.length){let r=t,s=i;for(;r<s;){const o=Math.floor((r+s)/2);e(n[o])?r=o+1:s=o}return r-1}function Upe(n,e){const t=b8(n,e);return t===n.length?void 0:n[t]}function b8(n,e,t=0,i=n.length){let r=t,s=i;for(;r<s;){const o=Math.floor((r+s)/2);e(n[o])?s=o:r=o+1}return r}const aL=class aL{constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(aL.assertInvariants){if(this._prevFindLastPredicate){for(const i of this._array)if(this._prevFindLastPredicate(i)&&!e(i))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}const t=Sw(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,t===-1?void 0:this._array[t]}};aL.assertInvariants=!1;let jx=aL;function YY(n,e){if(n.length===0)return;let t=n[0];for(let i=1;i<n.length;i++){const r=n[i];e(r,t)>0&&(t=r)}return t}function qpe(n,e){if(n.length===0)return;let t=n[0];for(let i=1;i<n.length;i++){const r=n[i];e(r,t)>=0&&(t=r)}return t}function Gpe(n,e){return YY(n,(t,i)=>-e(t,i))}function Kpe(n,e){if(n.length===0)return-1;let t=0;for(let i=1;i<n.length;i++){const r=n[i];e(r,n[t])>0&&(t=i)}return t}let wt=class Hh{static fromRangeInclusive(e){return new Hh(e.startLineNumber,e.endLineNumber+1)}static joinMany(e){if(e.length===0)return[];let t=new Ha(e[0].slice());for(let i=1;i<e.length;i++)t=t.getUnion(new Ha(e[i].slice()));return t.ranges}static join(e){if(e.length===0)throw new Ti("lineRanges cannot be empty");let t=e[0].startLineNumber,i=e[0].endLineNumberExclusive;for(let r=1;r<e.length;r++)t=Math.min(t,e[r].startLineNumber),i=Math.max(i,e[r].endLineNumberExclusive);return new Hh(t,i)}static ofLength(e,t){return new Hh(e,e+t)}static deserialize(e){return new Hh(e[0],e[1])}constructor(e,t){if(e>t)throw new Ti(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new Hh(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new Hh(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new Hh(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=i)return new Hh(t,i)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new oe(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new oe(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let i=this.startLineNumber;i<this.endLineNumberExclusive;i++)t.push(e(i));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Pt(this.startLineNumber-1,this.endLineNumberExclusive-1)}};class Ha{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;const t=b8(this._normalizedRanges,r=>r.endLineNumberExclusive>=e.startLineNumber),i=Sw(this._normalizedRanges,r=>r.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)this._normalizedRanges.splice(t,0,e);else if(t===i-1){const r=this._normalizedRanges[t];this._normalizedRanges[t]=r.join(e)}else{const r=this._normalizedRanges[t].join(this._normalizedRanges[i-1]).join(e);this._normalizedRanges.splice(t,i-t,r)}}contains(e){const t=E1(this._normalizedRanges,i=>i.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){const t=E1(this._normalizedRanges,i=>i.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;const t=[];let i=0,r=0,s=null;for(;i<this._normalizedRanges.length||r<e._normalizedRanges.length;){let o=null;if(i<this._normalizedRanges.length&&r<e._normalizedRanges.length){const a=this._normalizedRanges[i],l=e._normalizedRanges[r];a.startLineNumber<l.startLineNumber?(o=a,i++):(o=l,r++)}else i<this._normalizedRanges.length?(o=this._normalizedRanges[i],i++):(o=e._normalizedRanges[r],r++);s===null?s=o:s.endLineNumberExclusive>=o.startLineNumber?s=new wt(s.startLineNumber,Math.max(s.endLineNumberExclusive,o.endLineNumberExclusive)):(t.push(s),s=o)}return s!==null&&t.push(s),new Ha(t)}subtractFrom(e){const t=b8(this._normalizedRanges,o=>o.endLineNumberExclusive>=e.startLineNumber),i=Sw(this._normalizedRanges,o=>o.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)return new Ha([e]);const r=[];let s=e.startLineNumber;for(let o=t;o<i;o++){const a=this._normalizedRanges[o];a.startLineNumber>s&&r.push(new wt(s,a.startLineNumber)),s=a.endLineNumberExclusive}return s<e.endLineNumberExclusive&&r.push(new wt(s,e.endLineNumberExclusive)),new Ha(r)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){const t=[];let i=0,r=0;for(;i<this._normalizedRanges.length&&r<e._normalizedRanges.length;){const s=this._normalizedRanges[i],o=e._normalizedRanges[r],a=s.intersect(o);a&&!a.isEmpty&&t.push(a),s.endLineNumberExclusive<o.endLineNumberExclusive?i++:r++}return new Ha(t)}getWithDelta(e){return new Ha(this._normalizedRanges.map(t=>t.delta(e)))}}const Ad=class Ad{static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new Ad(0,t.column-e.column):new Ad(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return Ad.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,i=0;for(const r of e)r===`
`?(t++,i=0):i++;return new Ad(t,i)}constructor(e,t){this.lineCount=e,this.columnCount=t}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}createRange(e){return this.lineCount===0?new oe(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new oe(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}addToPosition(e){return this.lineCount===0?new be(e.lineNumber,e.column+this.columnCount):new be(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}};Ad.zero=new Ad(0,0);let gf=Ad;class Ype{constructor(e){this.text=e,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Pt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}get textLength(){const e=this.lineStartOffsetByLineIdx.length-1;return new gf(e,this.text.length-this.lineStartOffsetByLineIdx[e])}}class Zpe{constructor(e){this.edits=e,Lm(()=>pA(e,(t,i)=>t.range.getEndPosition().isBeforeOrEqual(i.range.getStartPosition())))}apply(e){let t="",i=new be(1,1);for(const s of this.edits){const o=s.range,a=o.getStartPosition(),l=o.getEndPosition(),c=bH(i,a);c.isEmpty()||(t+=e.getValueOfRange(c)),t+=s.text,i=l}const r=bH(i,e.endPositionExclusive);return r.isEmpty()||(t+=e.getValueOfRange(r)),t}applyToString(e){const t=new Qpe(e);return this.apply(t)}getNewRanges(){const e=[];let t=0,i=0,r=0;for(const s of this.edits){const o=gf.ofText(s.text),a=be.lift({lineNumber:s.range.startLineNumber+i,column:s.range.startColumn+(s.range.startLineNumber===t?r:0)}),l=o.createRange(a);e.push(l),i=l.endLineNumber-s.range.endLineNumber,r=l.endColumn-s.range.endColumn,t=s.range.endLineNumber}return e}}class Xpe{constructor(e,t){this.range=e,this.text=t}toSingleEditOperation(){return{range:this.range,text:this.text}}}function bH(n,e){if(n.lineNumber===e.lineNumber&&n.column===Number.MAX_SAFE_INTEGER)return oe.fromPositions(e,e);if(!n.isBeforeOrEqual(e))throw new Ti("start must be before end");return new oe(n.lineNumber,n.column,e.lineNumber,e.column)}class ZY{get endPositionExclusive(){return this.length.addToPosition(new be(1,1))}}class Qpe extends ZY{constructor(e){super(),this.value=e,this._t=new Ype(this.value)}getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}}class As{static inverse(e,t,i){const r=[];let s=1,o=1;for(const l of e){const c=new As(new wt(s,l.original.startLineNumber),new wt(o,l.modified.startLineNumber));c.modified.isEmpty||r.push(c),s=l.original.endLineNumberExclusive,o=l.modified.endLineNumberExclusive}const a=new As(new wt(s,t+1),new wt(o,i+1));return a.modified.isEmpty||r.push(a),r}static clip(e,t,i){const r=[];for(const s of e){const o=s.original.intersect(t),a=s.modified.intersect(i);o&&!o.isEmpty&&a&&!a.isEmpty&&r.push(new As(o,a))}return r}constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new As(this.modified,this.original)}join(e){return new As(this.original.join(e.original),this.modified.join(e.modified))}toRangeMapping(){const e=this.original.toInclusiveRange(),t=this.modified.toInclusiveRange();if(e&&t)return new ga(e,t);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new Ti("not a valid diff");return new ga(new oe(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new oe(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new ga(new oe(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new oe(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,t){if(_H(this.original.endLineNumberExclusive,e)&&_H(this.modified.endLineNumberExclusive,t))return new ga(new oe(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new oe(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new ga(oe.fromPositions(new be(this.original.startLineNumber,1),Wp(new be(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),oe.fromPositions(new be(this.modified.startLineNumber,1),Wp(new be(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new ga(oe.fromPositions(Wp(new be(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),Wp(new be(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),oe.fromPositions(Wp(new be(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),t),Wp(new be(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));throw new Ti}}function Wp(n,e){if(n.lineNumber<1)return new be(1,1);if(n.lineNumber>e.length)return new be(e.length,e[e.length-1].length+1);const t=e[n.lineNumber-1];return n.column>t.length+1?new be(n.lineNumber,t.length+1):n}function _H(n,e){return n>=1&&n<=e.length}class ka extends As{static fromRangeMappings(e){const t=wt.join(e.map(r=>wt.fromRangeInclusive(r.originalRange))),i=wt.join(e.map(r=>wt.fromRangeInclusive(r.modifiedRange)));return new ka(t,i,e)}constructor(e,t,i){super(e,t),this.innerChanges=i}flip(){return new ka(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new ka(this.original,this.modified,[this.toRangeMapping()])}}class ga{static assertSorted(e){for(let t=1;t<e.length;t++){const i=e[t-1],r=e[t];if(!(i.originalRange.getEndPosition().isBeforeOrEqual(r.originalRange.getStartPosition())&&i.modifiedRange.getEndPosition().isBeforeOrEqual(r.modifiedRange.getStartPosition())))throw new Ti("Range mappings must be sorted")}}constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new ga(this.modifiedRange,this.originalRange)}toTextEdit(e){const t=e.getValueOfRange(this.modifiedRange);return new Xpe(this.originalRange,t)}}const Jpe=3;class e0e{computeDiff(e,t,i){const s=new n0e(e,t,{maxComputationTime:i.maxComputationTimeMs,shouldIgnoreTrimWhitespace:i.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),o=[];let a=null;for(const l of s.changes){let c;l.originalEndLineNumber===0?c=new wt(l.originalStartLineNumber+1,l.originalStartLineNumber+1):c=new wt(l.originalStartLineNumber,l.originalEndLineNumber+1);let h;l.modifiedEndLineNumber===0?h=new wt(l.modifiedStartLineNumber+1,l.modifiedStartLineNumber+1):h=new wt(l.modifiedStartLineNumber,l.modifiedEndLineNumber+1);let u=new ka(c,h,l.charChanges?.map(d=>new ga(new oe(d.originalStartLineNumber,d.originalStartColumn,d.originalEndLineNumber,d.originalEndColumn),new oe(d.modifiedStartLineNumber,d.modifiedStartColumn,d.modifiedEndLineNumber,d.modifiedEndColumn))));a&&(a.modified.endLineNumberExclusive===u.modified.startLineNumber||a.original.endLineNumberExclusive===u.original.startLineNumber)&&(u=new ka(a.original.join(u.original),a.modified.join(u.modified),a.innerChanges&&u.innerChanges?a.innerChanges.concat(u.innerChanges):void 0),o.pop()),o.push(u),a=u}return Lm(()=>pA(o,(l,c)=>c.original.startLineNumber-l.original.endLineNumberExclusive===c.modified.startLineNumber-l.modified.endLineNumberExclusive&&l.original.endLineNumberExclusive<c.original.startLineNumber&&l.modified.endLineNumberExclusive<c.modified.startLineNumber)),new OS(o,[],s.quitEarly)}}function XY(n,e,t,i){return new hu(n,e,t).ComputeDiff(i)}let vH=class{constructor(e){const t=[],i=[];for(let r=0,s=e.length;r<s;r++)t[r]=_8(e[r],1),i[r]=v8(e[r],1);this.lines=e,this._startColumns=t,this._endColumns=i}getElements(){const e=[];for(let t=0,i=this.lines.length;t<i;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,i){const r=[],s=[],o=[];let a=0;for(let l=t;l<=i;l++){const c=this.lines[l],h=e?this._startColumns[l]:1,u=e?this._endColumns[l]:c.length+1;for(let d=h;d<u;d++)r[a]=c.charCodeAt(d-1),s[a]=l+1,o[a]=d,a++;!e&&l<i&&(r[a]=10,s[a]=l+1,o[a]=c.length+1,a++)}return new t0e(r,s,o)}};class t0e{constructor(e,t,i){this._charCodes=e,this._lineNumbers=t,this._columns=i}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}class H0{constructor(e,t,i,r,s,o,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=i,this.originalEndColumn=r,this.modifiedStartLineNumber=s,this.modifiedStartColumn=o,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,i){const r=t.getStartLineNumber(e.originalStart),s=t.getStartColumn(e.originalStart),o=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=i.getStartLineNumber(e.modifiedStart),c=i.getStartColumn(e.modifiedStart),h=i.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),u=i.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new H0(r,s,o,a,l,c,h,u)}}function i0e(n){if(n.length<=1)return n;const e=[n[0]];let t=e[0];for(let i=1,r=n.length;i<r;i++){const s=n[i],o=s.originalStart-(t.originalStart+t.originalLength),a=s.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(o,a)<Jpe?(t.originalLength=s.originalStart+s.originalLength-t.originalStart,t.modifiedLength=s.modifiedStart+s.modifiedLength-t.modifiedStart):(e.push(s),t=s)}return e}class mv{constructor(e,t,i,r,s){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=r,this.charChanges=s}static createFromDiffResult(e,t,i,r,s,o,a){let l,c,h,u,d;if(t.originalLength===0?(l=i.getStartLineNumber(t.originalStart)-1,c=0):(l=i.getStartLineNumber(t.originalStart),c=i.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(h=r.getStartLineNumber(t.modifiedStart)-1,u=0):(h=r.getStartLineNumber(t.modifiedStart),u=r.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),o&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&s()){const g=i.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),p=r.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(g.getElements().length>0&&p.getElements().length>0){let b=XY(g,p,s,!0).changes;a&&(b=i0e(b)),d=[];for(let _=0,w=b.length;_<w;_++)d.push(H0.createFromDiffChange(b[_],g,p))}}return new mv(l,c,h,u,d)}}class n0e{constructor(e,t,i){this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new vH(e),this.modified=new vH(t),this.continueLineDiff=wH(i.maxComputationTime),this.continueCharDiff=wH(i.maxComputationTime===0?0:Math.min(i.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=XY(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,i=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(mv.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:i,changes:a}}const r=[];let s=0,o=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,h=c?c.originalStart:this.originalLines.length,u=c?c.modifiedStart:this.modifiedLines.length;for(;s<h&&o<u;){const d=this.originalLines[s],g=this.modifiedLines[o];if(d!==g){{let p=_8(d,1),b=_8(g,1);for(;p>1&&b>1;){const _=d.charCodeAt(p-2),w=g.charCodeAt(b-2);if(_!==w)break;p--,b--}(p>1||b>1)&&this._pushTrimWhitespaceCharChange(r,s+1,1,p,o+1,1,b)}{let p=v8(d,1),b=v8(g,1);const _=d.length+1,w=g.length+1;for(;p<_&&b<w;){const y=d.charCodeAt(p-1),k=d.charCodeAt(b-1);if(y!==k)break;p++,b++}(p<_||b<w)&&this._pushTrimWhitespaceCharChange(r,s+1,p,_,o+1,b,w)}}s++,o++}c&&(r.push(mv.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),s+=c.originalLength,o+=c.modifiedLength)}return{quitEarly:i,changes:r}}_pushTrimWhitespaceCharChange(e,t,i,r,s,o,a){if(this._mergeTrimWhitespaceCharChange(e,t,i,r,s,o,a))return;let l;this.shouldComputeCharChanges&&(l=[new H0(t,i,t,r,s,o,s,a)]),e.push(new mv(t,t,s,s,l))}_mergeTrimWhitespaceCharChange(e,t,i,r,s,o,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber===t&&c.modifiedEndLineNumber===s?(this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new H0(t,i,t,r,s,o,s,a)),!0):c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===s?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=s,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new H0(t,i,t,r,s,o,s,a)),!0):!1}}function _8(n,e){const t=qo(n);return t===-1?e:t+1}function v8(n,e){const t=jm(n);return t===-1?e:t+2}function wH(n){if(n===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<n}class Lu{static trivial(e,t){return new Lu([new fr(Pt.ofLength(e.length),Pt.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new Lu([new fr(Pt.ofLength(e.length),Pt.ofLength(t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class fr{static invert(e,t){const i=[];return gK(e,(r,s)=>{i.push(fr.fromOffsetPairs(r?r.getEndExclusives():gu.zero,s?s.getStarts():new gu(t,(r?r.seq2Range.endExclusive-r.seq1Range.endExclusive:0)+t)))}),i}static fromOffsetPairs(e,t){return new fr(new Pt(e.offset1,t.offset1),new Pt(e.offset2,t.offset2))}static assertSorted(e){let t;for(const i of e){if(t&&!(t.seq1Range.endExclusive<=i.seq1Range.start&&t.seq2Range.endExclusive<=i.seq2Range.start))throw new Ti("Sequence diffs must be sorted");t=i}}constructor(e,t){this.seq1Range=e,this.seq2Range=t}swap(){return new fr(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new fr(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new fr(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new fr(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new fr(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersect(e){const t=this.seq1Range.intersect(e.seq1Range),i=this.seq2Range.intersect(e.seq2Range);if(!(!t||!i))return new fr(t,i)}getStarts(){return new gu(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new gu(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}const Wg=class Wg{constructor(e,t){this.offset1=e,this.offset2=t}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new Wg(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}};Wg.zero=new Wg(0,0),Wg.max=new Wg(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);let gu=Wg;const lL=class lL{isValid(){return!0}};lL.instance=new lL;let xw=lL;class r0e{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new Ti("timeout must be positive")}isValid(){if(!(Date.now()-this.startTime<this.timeout)&&this.valid){this.valid=!1;debugger}return this.valid}}class e6{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,i){this.array[e+t*this.width]=i}}function w8(n){return n===32||n===9}const Qv=class Qv{static getKey(e){let t=this.chrKeys.get(e);return t===void 0&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}constructor(e,t,i){this.range=e,this.lines=t,this.source=i,this.histogram=[];let r=0;for(let s=e.startLineNumber-1;s<e.endLineNumberExclusive-1;s++){const o=t[s];for(let l=0;l<o.length;l++){r++;const c=o[l],h=Qv.getKey(c);this.histogram[h]=(this.histogram[h]||0)+1}r++;const a=Qv.getKey(`
`);this.histogram[a]=(this.histogram[a]||0)+1}this.totalCount=r}computeSimilarity(e){let t=0;const i=Math.max(this.histogram.length,e.histogram.length);for(let r=0;r<i;r++)t+=Math.abs((this.histogram[r]??0)-(e.histogram[r]??0));return 1-t/(this.totalCount+e.totalCount)}};Qv.chrKeys=new Map;let Ux=Qv;class s0e{compute(e,t,i=xw.instance,r){if(e.length===0||t.length===0)return Lu.trivial(e,t);const s=new e6(e.length,t.length),o=new e6(e.length,t.length),a=new e6(e.length,t.length);for(let p=0;p<e.length;p++)for(let b=0;b<t.length;b++){if(!i.isValid())return Lu.trivialTimedOut(e,t);const _=p===0?0:s.get(p-1,b),w=b===0?0:s.get(p,b-1);let y;e.getElement(p)===t.getElement(b)?(p===0||b===0?y=0:y=s.get(p-1,b-1),p>0&&b>0&&o.get(p-1,b-1)===3&&(y+=a.get(p-1,b-1)),y+=r?r(p,b):1):y=-1;const k=Math.max(_,w,y);if(k===y){const L=p>0&&b>0?a.get(p-1,b-1):0;a.set(p,b,L+1),o.set(p,b,3)}else k===_?(a.set(p,b,0),o.set(p,b,1)):k===w&&(a.set(p,b,0),o.set(p,b,2));s.set(p,b,k)}const l=[];let c=e.length,h=t.length;function u(p,b){(p+1!==c||b+1!==h)&&l.push(new fr(new Pt(p+1,c),new Pt(b+1,h))),c=p,h=b}let d=e.length-1,g=t.length-1;for(;d>=0&&g>=0;)o.get(d,g)===3?(u(d,g),d--,g--):o.get(d,g)===1?d--:g--;return u(-1,-1),l.reverse(),new Lu(l,!1)}}class QY{compute(e,t,i=xw.instance){if(e.length===0||t.length===0)return Lu.trivial(e,t);const r=e,s=t;function o(b,_){for(;b<r.length&&_<s.length&&r.getElement(b)===s.getElement(_);)b++,_++;return b}let a=0;const l=new o0e;l.set(0,o(0,0));const c=new a0e;c.set(0,l.get(0)===0?null:new yH(null,0,0,l.get(0)));let h=0;e:for(;;){if(a++,!i.isValid())return Lu.trivialTimedOut(r,s);const b=-Math.min(a,s.length+a%2),_=Math.min(a,r.length+a%2);for(h=b;h<=_;h+=2){const w=h===_?-1:l.get(h+1),y=h===b?-1:l.get(h-1)+1,k=Math.min(Math.max(w,y),r.length),L=k-h;if(k>r.length||L>s.length)continue;const T=o(k,L);l.set(h,T);const N=k===w?c.get(h+1):c.get(h-1);if(c.set(h,T!==k?new yH(N,k,L,T-k):N),l.get(h)===r.length&&l.get(h)-h===s.length)break e}}let u=c.get(h);const d=[];let g=r.length,p=s.length;for(;;){const b=u?u.x+u.length:0,_=u?u.y+u.length:0;if((b!==g||_!==p)&&d.push(new fr(new Pt(b,g),new Pt(_,p))),!u)break;g=u.x,p=u.y,u=u.prev}return d.reverse(),new Lu(d,!1)}}class yH{constructor(e,t,i,r){this.prev=e,this.x=t,this.y=i,this.length=r}}class o0e{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const i=this.negativeArr;this.negativeArr=new Int32Array(i.length*2),this.negativeArr.set(i)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const i=this.positiveArr;this.positiveArr=new Int32Array(i.length*2),this.positiveArr.set(i)}this.positiveArr[e]=t}}}class a0e{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}class qx{constructor(e,t,i){this.lines=e,this.range=t,this.considerWhitespaceChanges=i,this.elements=[],this.firstElementOffsetByLineIdx=[],this.lineStartOffsets=[],this.trimmedWsLengthsByLineIdx=[],this.firstElementOffsetByLineIdx.push(0);for(let r=this.range.startLineNumber;r<=this.range.endLineNumber;r++){let s=e[r-1],o=0;r===this.range.startLineNumber&&this.range.startColumn>1&&(o=this.range.startColumn-1,s=s.substring(o)),this.lineStartOffsets.push(o);let a=0;if(!i){const c=s.trimStart();a=s.length-c.length,s=c.trimEnd()}this.trimmedWsLengthsByLineIdx.push(a);const l=r===this.range.endLineNumber?Math.min(this.range.endColumn-1-o-a,s.length):s.length;for(let c=0;c<l;c++)this.elements.push(s.charCodeAt(c));r<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new Pt(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(t=>String.fromCharCode(t)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=SH(e>0?this.elements[e-1]:-1),i=SH(e<this.elements.length?this.elements[e]:-1);if(t===7&&i===8)return 0;if(t===8)return 150;let r=0;return t!==i&&(r+=10,t===0&&i===1&&(r+=1)),r+=CH(t),r+=CH(i),r}translateOffset(e,t="right"){const i=Sw(this.firstElementOffsetByLineIdx,s=>s<=e),r=e-this.firstElementOffsetByLineIdx[i];return new be(this.range.startLineNumber+i,1+this.lineStartOffsets[i]+r+(r===0&&t==="left"?0:this.trimmedWsLengthsByLineIdx[i]))}translateRange(e){const t=this.translateOffset(e.start,"right"),i=this.translateOffset(e.endExclusive,"left");return i.isBefore(t)?oe.fromPositions(i,i):oe.fromPositions(t,i)}findWordContaining(e){if(e<0||e>=this.elements.length||!t6(this.elements[e]))return;let t=e;for(;t>0&&t6(this.elements[t-1]);)t--;let i=e;for(;i<this.elements.length&&t6(this.elements[i]);)i++;return new Pt(t,i)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){const t=E1(this.firstElementOffsetByLineIdx,r=>r<=e.start)??0,i=Upe(this.firstElementOffsetByLineIdx,r=>e.endExclusive<=r)??this.elements.length;return new Pt(t,i)}}function t6(n){return n>=97&&n<=122||n>=65&&n<=90||n>=48&&n<=57}const l0e={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function CH(n){return l0e[n]}function SH(n){return n===10?8:n===13?7:w8(n)?6:n>=97&&n<=122?0:n>=65&&n<=90?1:n>=48&&n<=57?2:n===-1?3:n===44||n===59?5:4}function c0e(n,e,t,i,r,s){let{moves:o,excludedChanges:a}=u0e(n,e,t,s);if(!s.isValid())return[];const l=n.filter(h=>!a.has(h)),c=d0e(l,i,r,e,t,s);return AD(o,c),o=f0e(o),o=o.filter(h=>{const u=h.original.toOffsetRange().slice(e).map(g=>g.trim());return u.join(`
`).length>=15&&h0e(u,g=>g.length>=2)>=2}),o=g0e(n,o),o}function h0e(n,e){let t=0;for(const i of n)e(i)&&t++;return t}function u0e(n,e,t,i){const r=[],s=n.filter(l=>l.modified.isEmpty&&l.original.length>=3).map(l=>new Ux(l.original,e,l)),o=new Set(n.filter(l=>l.original.isEmpty&&l.modified.length>=3).map(l=>new Ux(l.modified,t,l))),a=new Set;for(const l of s){let c=-1,h;for(const u of o){const d=l.computeSimilarity(u);d>c&&(c=d,h=u)}if(c>.9&&h&&(o.delete(h),r.push(new As(l.range,h.range)),a.add(l.source),a.add(h.source)),!i.isValid())return{moves:r,excludedChanges:a}}return{moves:r,excludedChanges:a}}function d0e(n,e,t,i,r,s){const o=[],a=new GY;for(const d of n)for(let g=d.original.startLineNumber;g<d.original.endLineNumberExclusive-2;g++){const p=`${e[g-1]}:${e[g+1-1]}:${e[g+2-1]}`;a.add(p,{range:new wt(g,g+3)})}const l=[];n.sort(_l(d=>d.modified.startLineNumber,ef));for(const d of n){let g=[];for(let p=d.modified.startLineNumber;p<d.modified.endLineNumberExclusive-2;p++){const b=`${t[p-1]}:${t[p+1-1]}:${t[p+2-1]}`,_=new wt(p,p+3),w=[];a.forEach(b,({range:y})=>{for(const L of g)if(L.originalLineRange.endLineNumberExclusive+1===y.endLineNumberExclusive&&L.modifiedLineRange.endLineNumberExclusive+1===_.endLineNumberExclusive){L.originalLineRange=new wt(L.originalLineRange.startLineNumber,y.endLineNumberExclusive),L.modifiedLineRange=new wt(L.modifiedLineRange.startLineNumber,_.endLineNumberExclusive),w.push(L);return}const k={modifiedLineRange:_,originalLineRange:y};l.push(k),w.push(k)}),g=w}if(!s.isValid())return[]}l.sort(bue(_l(d=>d.modifiedLineRange.length,ef)));const c=new Ha,h=new Ha;for(const d of l){const g=d.modifiedLineRange.startLineNumber-d.originalLineRange.startLineNumber,p=c.subtractFrom(d.modifiedLineRange),b=h.subtractFrom(d.originalLineRange).getWithDelta(g),_=p.getIntersection(b);for(const w of _.ranges){if(w.length<3)continue;const y=w,k=w.delta(-g);o.push(new As(k,y)),c.addRange(y),h.addRange(k)}}o.sort(_l(d=>d.original.startLineNumber,ef));const u=new jx(n);for(let d=0;d<o.length;d++){const g=o[d],p=u.findLastMonotonous(N=>N.original.startLineNumber<=g.original.startLineNumber),b=E1(n,N=>N.modified.startLineNumber<=g.modified.startLineNumber),_=Math.max(g.original.startLineNumber-p.original.startLineNumber,g.modified.startLineNumber-b.modified.startLineNumber),w=u.findLastMonotonous(N=>N.original.startLineNumber<g.original.endLineNumberExclusive),y=E1(n,N=>N.modified.startLineNumber<g.modified.endLineNumberExclusive),k=Math.max(w.original.endLineNumberExclusive-g.original.endLineNumberExclusive,y.modified.endLineNumberExclusive-g.modified.endLineNumberExclusive);let L;for(L=0;L<_;L++){const N=g.original.startLineNumber-L-1,D=g.modified.startLineNumber-L-1;if(N>i.length||D>r.length||c.contains(D)||h.contains(N)||!xH(i[N-1],r[D-1],s))break}L>0&&(h.addRange(new wt(g.original.startLineNumber-L,g.original.startLineNumber)),c.addRange(new wt(g.modified.startLineNumber-L,g.modified.startLineNumber)));let T;for(T=0;T<k;T++){const N=g.original.endLineNumberExclusive+T,D=g.modified.endLineNumberExclusive+T;if(N>i.length||D>r.length||c.contains(D)||h.contains(N)||!xH(i[N-1],r[D-1],s))break}T>0&&(h.addRange(new wt(g.original.endLineNumberExclusive,g.original.endLineNumberExclusive+T)),c.addRange(new wt(g.modified.endLineNumberExclusive,g.modified.endLineNumberExclusive+T))),(L>0||T>0)&&(o[d]=new As(new wt(g.original.startLineNumber-L,g.original.endLineNumberExclusive+T),new wt(g.modified.startLineNumber-L,g.modified.endLineNumberExclusive+T)))}return o}function xH(n,e,t){if(n.trim()===e.trim())return!0;if(n.length>300&&e.length>300)return!1;const r=new QY().compute(new qx([n],new oe(1,1,1,n.length),!1),new qx([e],new oe(1,1,1,e.length),!1),t);let s=0;const o=fr.invert(r.diffs,n.length);for(const h of o)h.seq1Range.forEach(u=>{w8(n.charCodeAt(u))||s++});function a(h){let u=0;for(let d=0;d<n.length;d++)w8(h.charCodeAt(d))||u++;return u}const l=a(n.length>e.length?n:e);return s/l>.6&&l>10}function f0e(n){if(n.length===0)return n;n.sort(_l(t=>t.original.startLineNumber,ef));const e=[n[0]];for(let t=1;t<n.length;t++){const i=e[e.length-1],r=n[t],s=r.original.startLineNumber-i.original.endLineNumberExclusive,o=r.modified.startLineNumber-i.modified.endLineNumberExclusive;if(s>=0&&o>=0&&s+o<=2){e[e.length-1]=i.join(r);continue}e.push(r)}return e}function g0e(n,e){const t=new jx(n);return e=e.filter(i=>{const r=t.findLastMonotonous(a=>a.original.startLineNumber<i.original.endLineNumberExclusive)||new As(new wt(1,1),new wt(1,1)),s=E1(n,a=>a.modified.startLineNumber<i.modified.endLineNumberExclusive);return r!==s}),e}function y8(n,e,t){let i=t;return i=kH(n,e,i),i=kH(n,e,i),i=m0e(n,e,i),i}function kH(n,e,t){if(t.length===0)return t;const i=[];i.push(t[0]);for(let s=1;s<t.length;s++){const o=i[i.length-1];let a=t[s];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=a.seq1Range.start-o.seq1Range.endExclusive;let c;for(c=1;c<=l&&!(n.getElement(a.seq1Range.start-c)!==n.getElement(a.seq1Range.endExclusive-c)||e.getElement(a.seq2Range.start-c)!==e.getElement(a.seq2Range.endExclusive-c));c++);if(c--,c===l){i[i.length-1]=new fr(new Pt(o.seq1Range.start,a.seq1Range.endExclusive-l),new Pt(o.seq2Range.start,a.seq2Range.endExclusive-l));continue}a=a.delta(-c)}i.push(a)}const r=[];for(let s=0;s<i.length-1;s++){const o=i[s+1];let a=i[s];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=o.seq1Range.start-a.seq1Range.endExclusive;let c;for(c=0;c<l&&!(!n.isStronglyEqual(a.seq1Range.start+c,a.seq1Range.endExclusive+c)||!e.isStronglyEqual(a.seq2Range.start+c,a.seq2Range.endExclusive+c));c++);if(c===l){i[s+1]=new fr(new Pt(a.seq1Range.start+l,o.seq1Range.endExclusive),new Pt(a.seq2Range.start+l,o.seq2Range.endExclusive));continue}c>0&&(a=a.delta(c))}r.push(a)}return i.length>0&&r.push(i[i.length-1]),r}function m0e(n,e,t){if(!n.getBoundaryScore||!e.getBoundaryScore)return t;for(let i=0;i<t.length;i++){const r=i>0?t[i-1]:void 0,s=t[i],o=i+1<t.length?t[i+1]:void 0,a=new Pt(r?r.seq1Range.endExclusive+1:0,o?o.seq1Range.start-1:n.length),l=new Pt(r?r.seq2Range.endExclusive+1:0,o?o.seq2Range.start-1:e.length);s.seq1Range.isEmpty?t[i]=LH(s,n,e,a,l):s.seq2Range.isEmpty&&(t[i]=LH(s.swap(),e,n,l,a).swap())}return t}function LH(n,e,t,i,r){let o=1;for(;n.seq1Range.start-o>=i.start&&n.seq2Range.start-o>=r.start&&t.isStronglyEqual(n.seq2Range.start-o,n.seq2Range.endExclusive-o)&&o<100;)o++;o--;let a=0;for(;n.seq1Range.start+a<i.endExclusive&&n.seq2Range.endExclusive+a<r.endExclusive&&t.isStronglyEqual(n.seq2Range.start+a,n.seq2Range.endExclusive+a)&&a<100;)a++;if(o===0&&a===0)return n;let l=0,c=-1;for(let h=-o;h<=a;h++){const u=n.seq2Range.start+h,d=n.seq2Range.endExclusive+h,g=n.seq1Range.start+h,p=e.getBoundaryScore(g)+t.getBoundaryScore(u)+t.getBoundaryScore(d);p>c&&(c=p,l=h)}return n.delta(l)}function p0e(n,e,t){const i=[];for(const r of t){const s=i[i.length-1];if(!s){i.push(r);continue}r.seq1Range.start-s.seq1Range.endExclusive<=2||r.seq2Range.start-s.seq2Range.endExclusive<=2?i[i.length-1]=new fr(s.seq1Range.join(r.seq1Range),s.seq2Range.join(r.seq2Range)):i.push(r)}return i}function b0e(n,e,t){const i=fr.invert(t,n.length),r=[];let s=new gu(0,0);function o(l,c){if(l.offset1<s.offset1||l.offset2<s.offset2)return;const h=n.findWordContaining(l.offset1),u=e.findWordContaining(l.offset2);if(!h||!u)return;let d=new fr(h,u);const g=d.intersect(c);let p=g.seq1Range.length,b=g.seq2Range.length;for(;i.length>0;){const _=i[0];if(!(_.seq1Range.intersects(d.seq1Range)||_.seq2Range.intersects(d.seq2Range)))break;const y=n.findWordContaining(_.seq1Range.start),k=e.findWordContaining(_.seq2Range.start),L=new fr(y,k),T=L.intersect(_);if(p+=T.seq1Range.length,b+=T.seq2Range.length,d=d.join(L),d.seq1Range.endExclusive>=_.seq1Range.endExclusive)i.shift();else break}p+b<(d.seq1Range.length+d.seq2Range.length)*2/3&&r.push(d),s=d.getEndExclusives()}for(;i.length>0;){const l=i.shift();l.seq1Range.isEmpty||(o(l.getStarts(),l),o(l.getEndExclusives().delta(-1),l))}return _0e(t,r)}function _0e(n,e){const t=[];for(;n.length>0||e.length>0;){const i=n[0],r=e[0];let s;i&&(!r||i.seq1Range.start<r.seq1Range.start)?s=n.shift():s=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=s.seq1Range.start?t[t.length-1]=t[t.length-1].join(s):t.push(s)}return t}function v0e(n,e,t){let i=t;if(i.length===0)return i;let r=0,s;do{s=!1;const o=[i[0]];for(let a=1;a<i.length;a++){let h=function(d,g){const p=new Pt(c.seq1Range.endExclusive,l.seq1Range.start);return n.getText(p).replace(/\s/g,"").length<=4&&(d.seq1Range.length+d.seq2Range.length>5||g.seq1Range.length+g.seq2Range.length>5)};const l=i[a],c=o[o.length-1];h(c,l)?(s=!0,o[o.length-1]=o[o.length-1].join(l)):o.push(l)}i=o}while(r++<10&&s);return i}function w0e(n,e,t){let i=t;if(i.length===0)return i;let r=0,s;do{s=!1;const a=[i[0]];for(let l=1;l<i.length;l++){let u=function(g,p){const b=new Pt(h.seq1Range.endExclusive,c.seq1Range.start);if(n.countLinesIn(b)>5||b.length>500)return!1;const w=n.getText(b).trim();if(w.length>20||w.split(/\r\n|\r|\n/).length>1)return!1;const y=n.countLinesIn(g.seq1Range),k=g.seq1Range.length,L=e.countLinesIn(g.seq2Range),T=g.seq2Range.length,N=n.countLinesIn(p.seq1Range),D=p.seq1Range.length,O=e.countLinesIn(p.seq2Range),B=p.seq2Range.length,G=2*40+50;function H(q){return Math.min(q,G)}return Math.pow(Math.pow(H(y*40+k),1.5)+Math.pow(H(L*40+T),1.5),1.5)+Math.pow(Math.pow(H(N*40+D),1.5)+Math.pow(H(O*40+B),1.5),1.5)>(G**1.5)**1.5*1.3};const c=i[l],h=a[a.length-1];u(h,c)?(s=!0,a[a.length-1]=a[a.length-1].join(c)):a.push(c)}i=a}while(r++<10&&s);const o=[];return due(i,(a,l,c)=>{let h=l;function u(w){return w.length>0&&w.trim().length<=3&&l.seq1Range.length+l.seq2Range.length>100}const d=n.extendToFullLines(l.seq1Range),g=n.getText(new Pt(d.start,l.seq1Range.start));u(g)&&(h=h.deltaStart(-g.length));const p=n.getText(new Pt(l.seq1Range.endExclusive,d.endExclusive));u(p)&&(h=h.deltaEnd(p.length));const b=fr.fromOffsetPairs(a?a.getEndExclusives():gu.zero,c?c.getStarts():gu.max),_=h.intersect(b);o.length>0&&_.getStarts().equals(o[o.length-1].getEndExclusives())?o[o.length-1]=o[o.length-1].join(_):o.push(_)}),o}class TH{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=e===0?0:DH(this.lines[e-1]),i=e===this.lines.length?0:DH(this.lines[e]);return 1e3-(t+i)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function DH(n){let e=0;for(;e<n.length&&(n.charCodeAt(e)===32||n.charCodeAt(e)===9);)e++;return e}class JY{constructor(){this.dynamicProgrammingDiffing=new s0e,this.myersDiffingAlgorithm=new QY}computeDiff(e,t,i){if(e.length<=1&&_r(e,t,(T,N)=>T===N))return new OS([],[],!1);if(e.length===1&&e[0].length===0||t.length===1&&t[0].length===0)return new OS([new ka(new wt(1,e.length+1),new wt(1,t.length+1),[new ga(new oe(1,1,e.length,e[e.length-1].length+1),new oe(1,1,t.length,t[t.length-1].length+1))])],[],!1);const r=i.maxComputationTimeMs===0?xw.instance:new r0e(i.maxComputationTimeMs),s=!i.ignoreTrimWhitespace,o=new Map;function a(T){let N=o.get(T);return N===void 0&&(N=o.size,o.set(T,N)),N}const l=e.map(T=>a(T.trim())),c=t.map(T=>a(T.trim())),h=new TH(l,e),u=new TH(c,t),d=h.length+u.length<1700?this.dynamicProgrammingDiffing.compute(h,u,r,(T,N)=>e[T]===t[N]?t[N].length===0?.1:1+Math.log(1+t[N].length):.99):this.myersDiffingAlgorithm.compute(h,u,r);let g=d.diffs,p=d.hitTimeout;g=y8(h,u,g),g=v0e(h,u,g);const b=[],_=T=>{if(s)for(let N=0;N<T;N++){const D=w+N,O=y+N;if(e[D]!==t[O]){const B=this.refineDiff(e,t,new fr(new Pt(D,D+1),new Pt(O,O+1)),r,s);for(const G of B.mappings)b.push(G);B.hitTimeout&&(p=!0)}}};let w=0,y=0;for(const T of g){Lm(()=>T.seq1Range.start-w===T.seq2Range.start-y);const N=T.seq1Range.start-w;_(N),w=T.seq1Range.endExclusive,y=T.seq2Range.endExclusive;const D=this.refineDiff(e,t,T,r,s);D.hitTimeout&&(p=!0);for(const O of D.mappings)b.push(O)}_(e.length-w);const k=EH(b,e,t);let L=[];return i.computeMoves&&(L=this.computeMoves(k,e,t,l,c,r,s)),Lm(()=>{function T(D,O){if(D.lineNumber<1||D.lineNumber>O.length)return!1;const B=O[D.lineNumber-1];return!(D.column<1||D.column>B.length+1)}function N(D,O){return!(D.startLineNumber<1||D.startLineNumber>O.length+1||D.endLineNumberExclusive<1||D.endLineNumberExclusive>O.length+1)}for(const D of k){if(!D.innerChanges)return!1;for(const O of D.innerChanges)if(!(T(O.modifiedRange.getStartPosition(),t)&&T(O.modifiedRange.getEndPosition(),t)&&T(O.originalRange.getStartPosition(),e)&&T(O.originalRange.getEndPosition(),e)))return!1;if(!N(D.modified,t)||!N(D.original,e))return!1}return!0}),new OS(k,L,p)}computeMoves(e,t,i,r,s,o,a){return c0e(e,t,i,r,s,o).map(h=>{const u=this.refineDiff(t,i,new fr(h.original.toOffsetRange(),h.modified.toOffsetRange()),o,a),d=EH(u.mappings,t,i,!0);return new KY(h,d)})}refineDiff(e,t,i,r,s){const a=C0e(i).toRangeMapping2(e,t),l=new qx(e,a.originalRange,s),c=new qx(t,a.modifiedRange,s),h=l.length+c.length<500?this.dynamicProgrammingDiffing.compute(l,c,r):this.myersDiffingAlgorithm.compute(l,c,r);let u=h.diffs;return u=y8(l,c,u),u=b0e(l,c,u),u=p0e(l,c,u),u=w0e(l,c,u),{mappings:u.map(g=>new ga(l.translateRange(g.seq1Range),c.translateRange(g.seq2Range))),hitTimeout:h.hitTimeout}}}function EH(n,e,t,i=!1){const r=[];for(const s of RM(n.map(o=>y0e(o,e,t)),(o,a)=>o.original.overlapOrTouch(a.original)||o.modified.overlapOrTouch(a.modified))){const o=s[0],a=s[s.length-1];r.push(new ka(o.original.join(a.original),o.modified.join(a.modified),s.map(l=>l.innerChanges[0])))}return Lm(()=>!i&&r.length>0&&(r[0].modified.startLineNumber!==r[0].original.startLineNumber||t.length-r[r.length-1].modified.endLineNumberExclusive!==e.length-r[r.length-1].original.endLineNumberExclusive)?!1:pA(r,(s,o)=>o.original.startLineNumber-s.original.endLineNumberExclusive===o.modified.startLineNumber-s.modified.endLineNumberExclusive&&s.original.endLineNumberExclusive<o.original.startLineNumber&&s.modified.endLineNumberExclusive<o.modified.startLineNumber)),r}function y0e(n,e,t){let i=0,r=0;n.modifiedRange.endColumn===1&&n.originalRange.endColumn===1&&n.originalRange.startLineNumber+i<=n.originalRange.endLineNumber&&n.modifiedRange.startLineNumber+i<=n.modifiedRange.endLineNumber&&(r=-1),n.modifiedRange.startColumn-1>=t[n.modifiedRange.startLineNumber-1].length&&n.originalRange.startColumn-1>=e[n.originalRange.startLineNumber-1].length&&n.originalRange.startLineNumber<=n.originalRange.endLineNumber+r&&n.modifiedRange.startLineNumber<=n.modifiedRange.endLineNumber+r&&(i=1);const s=new wt(n.originalRange.startLineNumber+i,n.originalRange.endLineNumber+1+r),o=new wt(n.modifiedRange.startLineNumber+i,n.modifiedRange.endLineNumber+1+r);return new ka(s,o,[n])}function C0e(n){return new As(new wt(n.seq1Range.start+1,n.seq1Range.endExclusive+1),new wt(n.seq2Range.start+1,n.seq2Range.endExclusive+1))}const IH={getLegacy:()=>new e0e,getDefault:()=>new JY};function sf(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}class pi{constructor(e,t,i,r=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,i))|0,this.a=sf(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class dl{constructor(e,t,i,r){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=sf(Math.max(Math.min(1,t),0),3),this.l=sf(Math.max(Math.min(1,i),0),3),this.a=sf(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,r=e.b/255,s=e.a,o=Math.max(t,i,r),a=Math.min(t,i,r);let l=0,c=0;const h=(a+o)/2,u=o-a;if(u>0){switch(c=Math.min(h<=.5?u/(2*h):u/(2-2*h),1),o){case t:l=(i-r)/u+(i<r?6:0);break;case i:l=(r-t)/u+2;break;case r:l=(t-i)/u+4;break}l*=60,l=Math.round(l)}return new dl(l,c,h,s)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:r,a:s}=e;let o,a,l;if(i===0)o=a=l=r;else{const c=r<.5?r*(1+i):r+i-r*i,h=2*r-c;o=dl._hue2rgb(h,c,t+1/3),a=dl._hue2rgb(h,c,t),l=dl._hue2rgb(h,c,t-1/3)}return new pi(Math.round(o*255),Math.round(a*255),Math.round(l*255),s)}}class l0{constructor(e,t,i,r){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=sf(Math.max(Math.min(1,t),0),3),this.v=sf(Math.max(Math.min(1,i),0),3),this.a=sf(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,r=e.b/255,s=Math.max(t,i,r),o=Math.min(t,i,r),a=s-o,l=s===0?0:a/s;let c;return a===0?c=0:s===t?c=((i-r)/a%6+6)%6:s===i?c=(r-t)/a+2:c=(t-i)/a+4,new l0(Math.round(c*60),l,s,e.a)}static toRGBA(e){const{h:t,s:i,v:r,a:s}=e,o=r*i,a=o*(1-Math.abs(t/60%2-1)),l=r-o;let[c,h,u]=[0,0,0];return t<60?(c=o,h=a):t<120?(c=a,h=o):t<180?(h=o,u=a):t<240?(h=a,u=o):t<300?(c=a,u=o):t<=360&&(c=o,u=a),c=Math.round((c+l)*255),h=Math.round((h+l)*255),u=Math.round((u+l)*255),new pi(c,h,u,s)}}var un;let Me=(un=class{static fromHex(e){return un.Format.CSS.parseHex(e)||un.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}get hsla(){return this._hsla?this._hsla:dl.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:l0.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof pi)this.rgba=e;else if(e instanceof dl)this._hsla=e,this.rgba=dl.toRGBA(e);else if(e instanceof l0)this._hsva=e,this.rgba=l0.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&pi.equals(this.rgba,e.rgba)&&dl.equals(this.hsla,e.hsla)&&l0.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=un._relativeLuminanceForComponent(this.rgba.r),t=un._relativeLuminanceForComponent(this.rgba.g),i=un._relativeLuminanceForComponent(this.rgba.b),r=.2126*e+.7152*t+.0722*i;return sf(r,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i}isDarkerThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t<i}lighten(e){return new un(new dl(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new un(new dl(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:r,a:s}=this.rgba;return new un(new pi(t,i,r,s*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new un(new pi(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:i,b:r,a:s}=this.rgba;return new un(new pi(e.rgba.r-s*(e.rgba.r-t),e.rgba.g-s*(e.rgba.g-i),e.rgba.b-s*(e.rgba.b-r),1))}toString(){return this._toString||(this._toString=un.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const r=e.getRelativeLuminance(),s=t.getRelativeLuminance();return i=i*(s-r)/s,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const r=e.getRelativeLuminance(),s=t.getRelativeLuminance();return i=i*(r-s)/r,e.darken(i)}},un.white=new un(new pi(255,255,255,1)),un.black=new un(new pi(0,0,0,1)),un.red=new un(new pi(255,0,0,1)),un.blue=new un(new pi(0,0,255,1)),un.green=new un(new pi(0,255,0,1)),un.cyan=new un(new pi(0,255,255,1)),un.lightgrey=new un(new pi(211,211,211,1)),un.transparent=new un(new pi(0,0,0,0)),un);(function(n){(function(e){(function(t){function i(g){return g.rgba.a===1?`rgb(${g.rgba.r}, ${g.rgba.g}, ${g.rgba.b})`:n.Format.CSS.formatRGBA(g)}t.formatRGB=i;function r(g){return`rgba(${g.rgba.r}, ${g.rgba.g}, ${g.rgba.b}, ${+g.rgba.a.toFixed(2)})`}t.formatRGBA=r;function s(g){return g.hsla.a===1?`hsl(${g.hsla.h}, ${(g.hsla.s*100).toFixed(2)}%, ${(g.hsla.l*100).toFixed(2)}%)`:n.Format.CSS.formatHSLA(g)}t.formatHSL=s;function o(g){return`hsla(${g.hsla.h}, ${(g.hsla.s*100).toFixed(2)}%, ${(g.hsla.l*100).toFixed(2)}%, ${g.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(g){const p=g.toString(16);return p.length!==2?"0"+p:p}function l(g){return`#${a(g.rgba.r)}${a(g.rgba.g)}${a(g.rgba.b)}`}t.formatHex=l;function c(g,p=!1){return p&&g.rgba.a===1?n.Format.CSS.formatHex(g):`#${a(g.rgba.r)}${a(g.rgba.g)}${a(g.rgba.b)}${a(Math.round(g.rgba.a*255))}`}t.formatHexA=c;function h(g){return g.isOpaque()?n.Format.CSS.formatHex(g):n.Format.CSS.formatRGBA(g)}t.format=h;function u(g){const p=g.length;if(p===0||g.charCodeAt(0)!==35)return null;if(p===7){const b=16*d(g.charCodeAt(1))+d(g.charCodeAt(2)),_=16*d(g.charCodeAt(3))+d(g.charCodeAt(4)),w=16*d(g.charCodeAt(5))+d(g.charCodeAt(6));return new n(new pi(b,_,w,1))}if(p===9){const b=16*d(g.charCodeAt(1))+d(g.charCodeAt(2)),_=16*d(g.charCodeAt(3))+d(g.charCodeAt(4)),w=16*d(g.charCodeAt(5))+d(g.charCodeAt(6)),y=16*d(g.charCodeAt(7))+d(g.charCodeAt(8));return new n(new pi(b,_,w,y/255))}if(p===4){const b=d(g.charCodeAt(1)),_=d(g.charCodeAt(2)),w=d(g.charCodeAt(3));return new n(new pi(16*b+b,16*_+_,16*w+w))}if(p===5){const b=d(g.charCodeAt(1)),_=d(g.charCodeAt(2)),w=d(g.charCodeAt(3)),y=d(g.charCodeAt(4));return new n(new pi(16*b+b,16*_+_,16*w+w,(16*y+y)/255))}return null}t.parseHex=u;function d(g){switch(g){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(n.Format||(n.Format={}))})(Me||(Me={}));function eZ(n){const e=[];for(const t of n){const i=Number(t);(i||i===0&&t.replace(/\s/g,"")!=="")&&e.push(i)}return e}function SA(n,e,t,i){return{red:n/255,blue:t/255,green:e/255,alpha:i}}function f_(n,e){const t=e.index,i=e[0].length;if(!t)return;const r=n.positionAt(t);return{startLineNumber:r.lineNumber,startColumn:r.column,endLineNumber:r.lineNumber,endColumn:r.column+i}}function S0e(n,e){if(!n)return;const t=Me.Format.CSS.parseHex(e);if(t)return{range:n,color:SA(t.rgba.r,t.rgba.g,t.rgba.b,t.rgba.a)}}function NH(n,e,t){if(!n||e.length!==1)return;const r=e[0].values(),s=eZ(r);return{range:n,color:SA(s[0],s[1],s[2],t?s[3]:1)}}function MH(n,e,t){if(!n||e.length!==1)return;const r=e[0].values(),s=eZ(r),o=new Me(new dl(s[0],s[1]/100,s[2]/100,t?s[3]:1));return{range:n,color:SA(o.rgba.r,o.rgba.g,o.rgba.b,o.rgba.a)}}function g_(n,e){return typeof n=="string"?[...n.matchAll(e)]:n.findMatches(e)}function x0e(n){const e=[],i=g_(n,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(i.length>0)for(const r of i){const s=r.filter(c=>c!==void 0),o=s[1],a=s[2];if(!a)continue;let l;if(o==="rgb"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;l=NH(f_(n,r),g_(a,c),!1)}else if(o==="rgba"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=NH(f_(n,r),g_(a,c),!0)}else if(o==="hsl"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;l=MH(f_(n,r),g_(a,c),!1)}else if(o==="hsla"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=MH(f_(n,r),g_(a,c),!0)}else o==="#"&&(l=S0e(f_(n,r),o+a));l&&e.push(l)}return e}function k0e(n){return!n||typeof n.getValue!="function"||typeof n.positionAt!="function"?[]:x0e(n)}const AH=new RegExp("\\bMARK:\\s*(.*)$","d"),L0e=/^-+|-+$/g;function T0e(n,e){let t=[];if(e.findRegionSectionHeaders&&e.foldingRules?.markers){const i=D0e(n,e);t=t.concat(i)}if(e.findMarkSectionHeaders){const i=E0e(n);t=t.concat(i)}return t}function D0e(n,e){const t=[],i=n.getLineCount();for(let r=1;r<=i;r++){const s=n.getLineContent(r),o=s.match(e.foldingRules.markers.start);if(o){const a={startLineNumber:r,startColumn:o[0].length+1,endLineNumber:r,endColumn:s.length+1};if(a.endColumn>a.startColumn){const l={range:a,...tZ(s.substring(o[0].length)),shouldBeInComments:!1};(l.text||l.hasSeparatorLine)&&t.push(l)}}}return t}function E0e(n){const e=[],t=n.getLineCount();for(let i=1;i<=t;i++){const r=n.getLineContent(i);I0e(r,i,e)}return e}function I0e(n,e,t){AH.lastIndex=0;const i=AH.exec(n);if(i){const r=i.indices[1][0]+1,s=i.indices[1][1]+1,o={startLineNumber:e,startColumn:r,endLineNumber:e,endColumn:s};if(o.endColumn>o.startColumn){const a={range:o,...tZ(i[1]),shouldBeInComments:!0};(a.text||a.hasSeparatorLine)&&t.push(a)}}}function tZ(n){n=n.trim();const e=n.startsWith("-");return n=n.replace(L0e,""),{text:n,hasSeparatorLine:e}}class N0e{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=Bp(e);const i=this.values,r=this.prefixSum,s=t.length;return s===0?!1:(this.values=new Uint32Array(i.length+s),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+s),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(r.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=Bp(e),t=Bp(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=Bp(e),t=Bp(t);const i=this.values,r=this.prefixSum;if(e>=i.length)return!1;const s=i.length-e;return t>=s&&(t=s),t===0?!1:(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(r.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=Bp(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.values.length-1,r=0,s=0,o=0;for(;t<=i;)if(r=t+(i-t)/2|0,s=this.prefixSum[r],o=s-this.values[r],e<o)i=r-1;else if(e>=s)t=r+1;else break;return new iZ(r,e-o)}}class M0e{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],i=t>0?this._prefixSum[t-1]:0;return new iZ(t,e-i)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=KL(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const i=this._values[e],r=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=r+i;for(let s=0;s<i;s++)this._indexBySum[r+s]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class iZ{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class A0e{constructor(e,t,i,r){this._uri=e,this._lines=t,this._eol=i,this._versionId=r,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const i of t)this._acceptDeleteRange(i.range),this._acceptInsertText(new be(i.range.startLineNumber,i.range.startColumn),i.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let r=0;r<t;r++)i[r]=this._lines[r].length+e;this._lineStarts=new N0e(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const i=nb(t);if(i.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);const r=new Uint32Array(i.length-1);for(let s=1;s<i.length;s++)this._lines.splice(e.lineNumber+s-1,0,i[s]),r[s-1]=i[s].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,r)}}const RH=60*1e3;class R0e extends xe{constructor(e,t,i=!1){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!i){const r=new nA;r.cancelAndSet(()=>this._checkStopModelSync(),Math.round(RH/2)),this._register(r)}}dispose(){for(const e in this._syncedModels)is(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t=!1){for(const i of e){const r=i.toString();this._syncedModels[r]||this._beginModelSync(i,t),this._syncedModels[r]&&(this._syncedModelsLastUsedTime[r]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const i in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[i]>RH&&t.push(i);for(const i of t)this._stopModelSync(i)}_beginModelSync(e,t){const i=this._modelService.getModel(e);if(!i||!t&&i.isTooLargeForSyncing())return;const r=e.toString();this._proxy.$acceptNewModel({url:i.uri.toString(),lines:i.getLinesContent(),EOL:i.getEOL(),versionId:i.getVersionId()});const s=new rt;s.add(i.onDidChangeContent(o=>{this._proxy.$acceptModelChanged(r.toString(),o)})),s.add(i.onWillDispose(()=>{this._stopModelSync(r)})),s.add(Mt(()=>{this._proxy.$acceptRemovedModel(r)})),this._syncedModels[r]=s}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],is(t)}}class P0e{constructor(){this._models=Object.create(null)}getModel(e){return this._models[e]}getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}$acceptNewModel(e){this._models[e.url]=new O0e(Ut.parse(e.url),e.lines,e.EOL,e.versionId)}$acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}$acceptRemovedModel(e){this._models[e]&&delete this._models[e]}}class O0e extends A0e{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let i=0;i<this._lines.length;i++){const r=this._lines[i],s=this.offsetAt(new be(i+1,1)),o=r.matchAll(e);for(const a of o)(a.index||a.index===0)&&(a.index=a.index+s),t.push(a)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const i=dw(e.column,HM(t),this._lines[e.lineNumber-1],0);return i?new oe(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn):null}words(e){const t=this._lines,i=this._wordenize.bind(this);let r=0,s="",o=0,a=[];return{*[Symbol.iterator](){for(;;)if(o<a.length){const l=s.substring(a[o].start,a[o].end);o+=1,yield l}else if(r<t.length)s=t[r],a=i(s,e),o=0,r+=1;else break}}}getLineWords(e,t){const i=this._lines[e-1],r=this._wordenize(i,t),s=[];for(const o of r)s.push({word:i.substring(o.start,o.end),startColumn:o.start+1,endColumn:o.end+1});return s}_wordenize(e,t){const i=[];let r;for(t.lastIndex=0;(r=t.exec(e))&&r[0].length!==0;)i.push({start:r.index,end:r.index+r[0].length});return i}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,i=e.startLineNumber-1,r=e.endLineNumber-1,s=[];s.push(this._lines[i].substring(e.startColumn-1));for(let o=i+1;o<r;o++)s.push(this._lines[o]);return s.push(this._lines[r].substring(0,e.endColumn-1)),s.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,i)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),i=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||i.lineNumber!==e.endLineNumber||i.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}:e}_validatePosition(e){if(!be.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:i}=e,r=!1;if(t<1)t=1,i=1,r=!0;else if(t>this._lines.length)t=this._lines.length,i=this._lines[t-1].length+1,r=!0;else{const s=this._lines[t-1].length+1;i<1?(i=1,r=!0):i>s&&(i=s,r=!0)}return r?{lineNumber:t,column:i}:e}}const cL=class cL{constructor(){this._workerTextModelSyncServer=new P0e}dispose(){}_getModel(e){return this._workerTextModelSyncServer.getModel(e)}_getModels(){return this._workerTextModelSyncServer.getModels()}$acceptNewModel(e){this._workerTextModelSyncServer.$acceptNewModel(e)}$acceptModelChanged(e,t){this._workerTextModelSyncServer.$acceptModelChanged(e,t)}$acceptRemovedModel(e){this._workerTextModelSyncServer.$acceptRemovedModel(e)}async $computeUnicodeHighlights(e,t,i){const r=this._getModel(e);return r?Vpe.computeUnicodeHighlights(r,t,i):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async $findSectionHeaders(e,t){const i=this._getModel(e);return i?T0e(i,t):[]}async $computeDiff(e,t,i,r){const s=this._getModel(e),o=this._getModel(t);return!s||!o?null:BS.computeDiff(s,o,i,r)}static computeDiff(e,t,i,r){const s=r==="advanced"?IH.getDefault():IH.getLegacy(),o=e.getLinesContent(),a=t.getLinesContent(),l=s.computeDiff(o,a,i),c=l.changes.length>0?!1:this._modelsAreIdentical(e,t);function h(u){return u.map(d=>[d.original.startLineNumber,d.original.endLineNumberExclusive,d.modified.startLineNumber,d.modified.endLineNumberExclusive,d.innerChanges?.map(g=>[g.originalRange.startLineNumber,g.originalRange.startColumn,g.originalRange.endLineNumber,g.originalRange.endColumn,g.modifiedRange.startLineNumber,g.modifiedRange.startColumn,g.modifiedRange.endLineNumber,g.modifiedRange.endColumn])])}return{identical:c,quitEarly:l.hitTimeout,changes:h(l.changes),moves:l.moves.map(u=>[u.lineRangeMapping.original.startLineNumber,u.lineRangeMapping.original.endLineNumberExclusive,u.lineRangeMapping.modified.startLineNumber,u.lineRangeMapping.modified.endLineNumberExclusive,h(u.changes)])}}static _modelsAreIdentical(e,t){const i=e.getLineCount(),r=t.getLineCount();if(i!==r)return!1;for(let s=1;s<=i;s++){const o=e.getLineContent(s),a=t.getLineContent(s);if(o!==a)return!1}return!0}async $computeMoreMinimalEdits(e,t,i){const r=this._getModel(e);if(!r)return t;const s=[];let o;t=t.slice(0).sort((l,c)=>{if(l.range&&c.range)return oe.compareRangesUsingStarts(l.range,c.range);const h=l.range?0:1,u=c.range?0:1;return h-u});let a=0;for(let l=1;l<t.length;l++)oe.getEndPosition(t[a].range).equals(oe.getStartPosition(t[l].range))?(t[a].range=oe.fromPositions(oe.getStartPosition(t[a].range),oe.getEndPosition(t[l].range)),t[a].text+=t[l].text):(a++,t[a]=t[l]);t.length=a+1;for(let{range:l,text:c,eol:h}of t){if(typeof h=="number"&&(o=h),oe.isEmpty(l)&&!c)continue;const u=r.getValueInRange(l);if(c=c.replace(/\r\n|\n|\r/g,r.eol),u===c)continue;if(Math.max(c.length,u.length)>BS._diffLimit){s.push({range:l,text:c});continue}const d=Cpe(u,c,i),g=r.offsetAt(oe.lift(l).getStartPosition());for(const p of d){const b=r.positionAt(g+p.originalStart),_=r.positionAt(g+p.originalStart+p.originalLength),w={text:c.substr(p.modifiedStart,p.modifiedLength),range:{startLineNumber:b.lineNumber,startColumn:b.column,endLineNumber:_.lineNumber,endColumn:_.column}};r.getValueInRange(w.range)!==w.text&&s.push(w)}}return typeof o=="number"&&s.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),s}async $computeLinks(e){const t=this._getModel(e);return t?Tpe(t):null}async $computeDefaultDocumentColors(e){const t=this._getModel(e);return t?k0e(t):null}async $textualSuggest(e,t,i,r){const s=new $m,o=new RegExp(i,r),a=new Set;e:for(const l of e){const c=this._getModel(l);if(c){for(const h of c.words(o))if(!(h===t||!isNaN(Number(h)))&&(a.add(h),a.size>BS._suggestionsLimit))break e}}return{words:Array.from(a),duration:s.elapsed()}}async $computeWordRanges(e,t,i,r){const s=this._getModel(e);if(!s)return Object.create(null);const o=new RegExp(i,r),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=s.getLineWords(l,o);for(const h of c){if(!isNaN(Number(h.word)))continue;let u=a[h.word];u||(u=[],a[h.word]=u),u.push({startLineNumber:l,startColumn:h.startColumn,endLineNumber:l,endColumn:h.endColumn})}}return a}async $navigateValueSet(e,t,i,r,s){const o=this._getModel(e);if(!o)return null;const a=new RegExp(r,s);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=o.getValueInRange(t),c=o.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const h=o.getValueInRange(c);return m8.INSTANCE.navigateValueSet(t,l,c,h,i)}};cL._diffLimit=1e5,cL._suggestionsLimit=1e4;let C8=cL;class BS extends C8{constructor(e,t){super(),this._host=e,this._foreignModuleFactory=t,this._foreignModule=null}async $ping(){return"pong"}$loadForeignModule(e,t,i){const o={host:Sue(i,(a,l)=>this._host.$fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(o,t),Promise.resolve(PD(this._foreignModule))):new Promise((a,l)=>{const c=h=>{this._foreignModule=h.create(o,t),a(PD(this._foreignModule))};{const h=e5.asBrowserUri(`${e}.js`).toString(!0);fn(()=>import(`${h}`),[]).then(c).catch(l)}})}$fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(i){return Promise.reject(i)}}}typeof importScripts=="function"&&(globalThis.monaco=UK());const xA=ai("textResourceConfigurationService"),nZ=ai("textResourcePropertiesService"),ji=ai("ILanguageFeaturesService");var kA=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},kg=function(n,e){return function(t,i){e(t,i,n)}};const PH=5*60*1e3;function Lg(n,e){const t=n.getModel(e);return!(!t||t.isTooLargeForSyncing())}let S8=class extends xe{constructor(e,t,i,r,s,o){super(),this._languageConfigurationService=s,this._modelService=t,this._workerManager=this._register(new x8(e,this._modelService)),this._logService=r,this._register(o.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:async(a,l)=>{if(!Lg(this._modelService,a.uri))return Promise.resolve({links:[]});const h=await(await this._workerWithResources([a.uri])).$computeLinks(a.uri.toString());return h&&{links:h}}})),this._register(o.completionProvider.register("*",new B0e(this._workerManager,i,this._modelService,this._languageConfigurationService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return Lg(this._modelService,e)}async computedUnicodeHighlights(e,t,i){return(await this._workerWithResources([e])).$computeUnicodeHighlights(e.toString(),t,i)}async computeDiff(e,t,i,r){const o=await(await this._workerWithResources([e,t],!0)).$computeDiff(e.toString(),t.toString(),i,r);if(!o)return null;return{identical:o.identical,quitEarly:o.quitEarly,changes:l(o.changes),moves:o.moves.map(c=>new KY(new As(new wt(c[0],c[1]),new wt(c[2],c[3])),l(c[4])))};function l(c){return c.map(h=>new ka(new wt(h[0],h[1]),new wt(h[2],h[3]),h[4]?.map(u=>new ga(new oe(u[0],u[1],u[2],u[3]),new oe(u[4],u[5],u[6],u[7])))))}}async computeMoreMinimalEdits(e,t,i=!1){if(GL(t)){if(!Lg(this._modelService,e))return Promise.resolve(t);const r=$m.create(),s=this._workerWithResources([e]).then(o=>o.$computeMoreMinimalEdits(e.toString(),t,i));return s.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),r.elapsed())),Promise.race([s,_w(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return Lg(this._modelService,e)}async navigateValueSet(e,t,i){const r=this._modelService.getModel(e);if(!r)return null;const s=this._languageConfigurationService.getLanguageConfiguration(r.getLanguageId()).getWordDefinition(),o=s.source,a=s.flags;return(await this._workerWithResources([e])).$navigateValueSet(e.toString(),t,i,o,a)}canComputeWordRanges(e){return Lg(this._modelService,e)}async computeWordRanges(e,t){const i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);const r=this._languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition(),s=r.source,o=r.flags;return(await this._workerWithResources([e])).$computeWordRanges(e.toString(),t,s,o)}async findSectionHeaders(e,t){return(await this._workerWithResources([e])).$findSectionHeaders(e.toString(),t)}async computeDefaultDocumentColors(e){return(await this._workerWithResources([e])).$computeDefaultDocumentColors(e.toString())}async _workerWithResources(e,t=!1){return await(await this._workerManager.withWorker()).workerWithSyncedResources(e,t)}};S8=kA([kg(1,Qs),kg(2,xA),kg(3,vc),kg(4,mh),kg(5,ji)],S8);class B0e{constructor(e,t,i,r){this.languageConfigurationService=r,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}async provideCompletionItems(e,t){const i=this._configurationService.getValue(e.uri,t,"editor");if(i.wordBasedSuggestions==="off")return;const r=[];if(i.wordBasedSuggestions==="currentDocument")Lg(this._modelService,e.uri)&&r.push(e.uri);else for(const u of this._modelService.getModels())Lg(this._modelService,u.uri)&&(u===e?r.unshift(u.uri):(i.wordBasedSuggestions==="allDocuments"||u.getLanguageId()===e.getLanguageId())&&r.push(u.uri));if(r.length===0)return;const s=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),o=e.getWordAtPosition(t),a=o?new oe(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn):oe.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),h=await(await this._workerManager.withWorker()).textualSuggest(r,o?.word,s);if(h)return{duration:h.duration,suggestions:h.words.map(u=>({kind:18,label:u,insertText:u,range:{insert:l,replace:a}}))}}}let x8=class extends xe{constructor(e,t){super(),this._workerDescriptor=e,this._modelService=t,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new oA).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(PH/2),Vi),this._register(this._modelService.onModelRemoved(r=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>PH&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new Gx(this._workerDescriptor,!1,this._modelService)),Promise.resolve(this._editorWorkerClient)}};x8=kA([kg(1,Qs)],x8);class F0e{constructor(e){this._instance=e,this.proxy=this._instance}dispose(){this._instance.dispose()}setChannel(e,t){throw new Error("Not supported")}}let Gx=class extends xe{constructor(e,t,i){super(),this._workerDescriptor=e,this._disposed=!1,this._modelService=i,this._keepIdleModels=t,this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(Wme(this._workerDescriptor)),p8.setChannel(this._worker,this._createEditorWorkerHost())}catch(e){c8(e),this._worker=this._createFallbackLocalWorker()}return this._worker}async _getProxy(){try{const e=this._getOrCreateWorker().proxy;return await e.$ping(),e}catch(e){return c8(e),this._worker=this._createFallbackLocalWorker(),this._worker.proxy}}_createFallbackLocalWorker(){return new F0e(new BS(this._createEditorWorkerHost(),null))}_createEditorWorkerHost(){return{$fhr:(e,t)=>this.fhr(e,t)}}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new R0e(e,this._modelService,this._keepIdleModels))),this._modelManager}async workerWithSyncedResources(e,t=!1){if(this._disposed)return Promise.reject(Nde());const i=await this._getProxy();return this._getOrCreateModelManager(i).ensureSyncedResources(e,t),i}async textualSuggest(e,t,i){const r=await this.workerWithSyncedResources(e),s=i.source,o=i.flags;return r.$textualSuggest(e.map(a=>a.toString()),t,s,o)}dispose(){super.dispose(),this._disposed=!0}};Gx=kA([kg(2,Qs)],Gx);var Ga;(function(n){n.DARK="dark",n.LIGHT="light",n.HIGH_CONTRAST_DARK="hcDark",n.HIGH_CONTRAST_LIGHT="hcLight"})(Ga||(Ga={}));function V0(n){return n===Ga.HIGH_CONTRAST_DARK||n===Ga.HIGH_CONTRAST_LIGHT}function b5(n){return n===Ga.DARK||n===Ga.HIGH_CONTRAST_DARK}const Ml=ai("themeService");function zp(n){return{id:n}}function k8(n){switch(n){case Ga.DARK:return"vs-dark";case Ga.HIGH_CONTRAST_DARK:return"hc-black";case Ga.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const rZ={ThemingContribution:"base.contributions.theming"};class W0e{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new de}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Mt(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}const sZ=new W0e;Ur.add(rZ.ThemingContribution,sZ);function Uu(n){return sZ.onColorThemeChange(n)}class z0e extends xe{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var H0e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},V0e=function(n,e){return function(t,i){e(t,i,n)}};let L8=class extends xe{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new de),this._onCodeEditorAdd=this._register(new de),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new de),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new de),this._onDiffEditorAdd=this._register(new de),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new de),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new Wo,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(i=>i.removeDecorationsByType(e))))}setModelProperty(e,t,i){const r=e.toString();let s;this._modelProperties.has(r)?s=this._modelProperties.get(r):(s=new Map,this._modelProperties.set(r,s)),s.set(t,i)}getModelProperty(e,t){const i=e.toString();if(this._modelProperties.has(i))return this._modelProperties.get(i).get(t)}async openCodeEditor(e,t,i){for(const r of this._codeEditorOpenHandlers){const s=await r(e,t,i);if(s!==null)return s}return null}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return Mt(t)}};L8=H0e([V0e(0,Ml)],L8);var $0e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},OH=function(n,e){return function(t,i){e(t,i,n)}};let Kx=class extends L8{constructor(e,t){super(t),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(i,r,s)=>r?this.doOpenEditor(r,i):null))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const s=t.resource.scheme;if(s===Vt.http||s===Vt.https)return xY(t.resource.toString()),e}return null}const r=t.options?t.options.selection:null;if(r)if(typeof r.endLineNumber=="number"&&typeof r.endColumn=="number")e.setSelection(r),e.revealRangeInCenter(r,1);else{const s={lineNumber:r.startLineNumber,column:r.startColumn};e.setPosition(s),e.revealPositionInCenter(s,1)}return e}findModel(e,t){const i=e.getModel();return i&&i.uri.toString()!==t.toString()?null:i}};Kx=$0e([OH(0,Ei),OH(1,Ml)],Kx);_i(vr,Kx,0);const Ef=ai("layoutService");var oZ=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},aZ=function(n,e){return function(t,i){e(t,i,n)}};let Yx=class{get mainContainer(){return OM(this._codeEditorService.listCodeEditors())?.getContainerDomNode()??Vi.document.body}get activeContainer(){return(this._codeEditorService.getFocusedCodeEditor()??this._codeEditorService.getActiveCodeEditor())?.getContainerDomNode()??this.mainContainer}get mainContainerDimension(){return e8(this.mainContainer)}get activeContainerDimension(){return e8(this.activeContainer)}get containers(){return PM(this._codeEditorService.listCodeEditors().map(e=>e.getContainerDomNode()))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){this._codeEditorService.getFocusedCodeEditor()?.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=Oe.None,this.onDidLayoutActiveContainer=Oe.None,this.onDidLayoutContainer=Oe.None,this.onDidChangeActiveContainer=Oe.None,this.onDidAddContainer=Oe.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};Yx=oZ([aZ(0,vr)],Yx);let T8=class extends Yx{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};T8=oZ([aZ(1,vr)],T8);_i(Ef,Yx,1);var kw;(function(n){n[n.Ignore=0]="Ignore",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error"})(kw||(kw={}));(function(n){const e="error",t="warning",i="warn",r="info",s="ignore";function o(l){return l?r0(e,l)?n.Error:r0(t,l)||r0(i,l)?n.Warning:r0(r,l)?n.Info:n.Ignore:n.Ignore}n.fromValue=o;function a(l){switch(l){case n.Error:return e;case n.Warning:return t;case n.Info:return r;default:return s}}n.toString=a})(kw||(kw={}));const rr=kw,lZ=ai("dialogService");var j0e=rr;const wc=ai("notificationService");class U0e{}const LA=ai("undoRedoService");class cZ{constructor(e,t){this.resource=e,this.elements=t}}const E0=class E0{constructor(){this.id=E0._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};E0._ID=0,E0.None=new E0;let D8=E0;const I0=class I0{constructor(){this.id=I0._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};I0._ID=0,I0.None=new I0;let Tg=I0;var q0e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},BH=function(n,e){return function(t,i){e(t,i,n)}};function k2(n){return n.scheme===Vt.file?n.fsPath:n.path}let hZ=0;class L2{constructor(e,t,i,r,s,o,a){this.id=++hZ,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=r,this.groupOrder=s,this.sourceId=o,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class FH{constructor(e,t){this.resourceLabel=e,this.reason=t}}class WH{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,r]of this.elements)(r.reason===0?e:t).push(r.resourceLabel);const i=[];return e.length>0&&i.push(C({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&i.push(C({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),i.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class G0e{constructor(e,t,i,r,s,o,a){this.id=++hZ,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=i,this.groupId=r,this.groupOrder=s,this.sourceId=o,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,i){this.removedResources||(this.removedResources=new WH),this.removedResources.has(t)||this.removedResources.set(t,new FH(e,i))}setValid(e,t,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new WH),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new FH(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class uZ{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const i of this._past)t(i.actual)&&this._setElementValidFlag(i,e);for(const i of this._future)t(i.actual)&&this._setElementValidFlag(i,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let i=0,r=this._past.length;i<r;i++)t.push(this._past[i].id);for(let i=this._future.length-1;i>=0;i--)t.push(this._future[i].id);return new cZ(e,t)}restoreSnapshot(e){const t=e.elements.length;let i=!0,r=0,s=-1;for(let a=0,l=this._past.length;a<l;a++,r++){const c=this._past[a];i&&(r>=t||c.id!==e.elements[r])&&(i=!1,s=0),!i&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let o=-1;for(let a=this._future.length-1;a>=0;a--,r++){const l=this._future[a];i&&(r>=t||l.id!==e.elements[r])&&(i=!1,o=a),!i&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}s!==-1&&(this._past=this._past.slice(0,s)),o!==-1&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const e=[],t=[];for(const i of this._past)e.push(i.actual);for(const i of this._future)t.push(i.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let i=this._past.length-1;i>=0;i--)if(this._past[i]===e){t.has(this.strResource)?this._past[i]=t.get(this.strResource):this._past.splice(i,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let i=this._future.length-1;i>=0;i--)if(this._future[i]===e){t.has(this.strResource)?this._future[i]=t.get(this.strResource):this._future.splice(i,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class i6{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,i=this.editStacks.length;t<i;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const dZ=new uZ("","");dZ.locked=!0;let E8=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const i of this._editStacks)t.push(i[1].toString());console.log(t.join(`
`))}pushElement(e,t=D8.None,i=Tg.None){if(e.type===0){const r=k2(e.resource),s=this.getUriComparisonKey(e.resource);this._pushElement(new L2(e,r,s,t.id,t.nextOrder(),i.id,i.nextOrder()))}else{const r=new Set,s=[],o=[];for(const a of e.resources){const l=k2(a),c=this.getUriComparisonKey(a);r.has(c)||(r.add(c),s.push(l),o.push(c))}s.length===1?this._pushElement(new L2(e,s[0],o[0],t.id,t.nextOrder(),i.id,i.nextOrder())):this._pushElement(new G0e(e,s,o,t.id,t.nextOrder(),i.id,i.nextOrder()))}}_pushElement(e){for(let t=0,i=e.strResources.length;t<i;t++){const r=e.resourceLabels[t],s=e.strResources[t];let o;this._editStacks.has(s)?o=this._editStacks.get(s):(o=new uZ(r,s),this._editStacks.set(s,o)),o.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const i=this._editStacks.get(t);if(i.hasFutureElements())return null;const r=i.getClosestPastElement();return r?r.actual:null}return null}_splitPastWorkspaceElement(e,t){const i=e.actual.split(),r=new Map;for(const s of i){const o=k2(s.resource),a=this.getUriComparisonKey(s.resource),l=new L2(s,o,a,0,0,0,0);r.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitPastWorkspaceElement(e,r)}}_splitFutureWorkspaceElement(e,t){const i=e.actual.split(),r=new Map;for(const s of i){const o=k2(s.resource),a=this.getUriComparisonKey(s.resource),l=new L2(s,o,a,0,0,0,0);r.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitFutureWorkspaceElement(e,r)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,i){const r=this.getUriComparisonKey(e);this._editStacks.has(r)&&this._editStacks.get(r).setElementsValidFlag(t,i)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new cZ(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const i=this._editStacks.get(t);i.restoreSnapshot(e),!i.hasPastElements()&&!i.hasFutureElements()&&(i.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[r,s]of this._editStacks){const o=s.getClosestPastElement();o&&o.sourceId===e&&(!t||o.sourceOrder>t.sourceOrder)&&(t=o,i=r)}return[t,i]}canUndo(e){if(e instanceof Tg){const[,i]=this._findClosestUndoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){Wi(e);for(const i of t.strResources)this.removeElements(i);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,i,r,s){const o=this._acquireLocks(i);let a;try{a=t()}catch(l){return o(),r.dispose(),this._onError(l,e)}return a?a.then(()=>(o(),r.dispose(),s()),l=>(o(),r.dispose(),this._onError(l,e))):(o(),r.dispose(),s())}async _invokeWorkspacePrepare(e){if(typeof e.actual.prepareUndoRedo>"u")return xe.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?xe.None:t}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(xe.None);const i=e.actual.prepareUndoRedo();return i?NK(i)?t(i):i.then(r=>t(r)):t(xe.None)}_getAffectedEditStacks(e){const t=[];for(const i of e.strResources)t.push(this._editStacks.get(i)||dZ);return new i6(t)}_tryToSplitAndUndo(e,t,i,r){if(t.canSplit())return this._splitPastWorkspaceElement(t,i),this._notificationService.warn(r),new T2(this._undo(e,0,!0));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(r),new T2}_checkWorkspaceUndo(e,t,i,r){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,C({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(r&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,C({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of i.editStacks)a.getClosestPastElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndUndo(e,t,null,C({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const o=[];for(const a of i.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,t,null,C({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(e,t,null,C({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,i){const r=this._getAffectedEditStacks(t),s=this._checkWorkspaceUndo(e,t,r,!1);return s?s.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,r,i)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const i=t.getClosestPastElement();if(i){if(i===e){const r=t.getSecondClosestPastElement();if(r&&r.groupId===e.groupId)return!0}if(i.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,i,r){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let a;(function(h){h[h.All=0]="All",h[h.This=1]="This",h[h.Cancel=2]="Cancel"})(a||(a={}));const{result:l}=await this._dialogService.prompt({type:rr.Info,message:C("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:C({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",i.editStacks.length),run:()=>a.All},{label:C({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>a.This}],cancelButton:{run:()=>a.Cancel}});if(l===a.Cancel)return;if(l===a.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const c=this._checkWorkspaceUndo(e,t,i,!1);if(c)return c.returnValue;r=!0}let s;try{s=await this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const o=this._checkWorkspaceUndo(e,t,i,!0);if(o)return s.dispose(),o.returnValue;for(const a of i.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),i,s,()=>this._continueUndoInGroup(t.groupId,r))}_resourceUndo(e,t,i){if(!t.isValid){e.flushAllElements();return}if(e.locked){const r=C({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(r);return}return this._invokeResourcePrepare(t,r=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new i6([e]),r,()=>this._continueUndoInGroup(t.groupId,i))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[r,s]of this._editStacks){const o=s.getClosestPastElement();o&&o.groupId===e&&(!t||o.groupOrder>t.groupOrder)&&(t=o,i=r)}return[t,i]}_continueUndoInGroup(e,t){if(!e)return;const[,i]=this._findClosestUndoElementInGroup(e);if(i)return this._undo(i,0,t)}undo(e){if(e instanceof Tg){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,i){if(!this._editStacks.has(e))return;const r=this._editStacks.get(e),s=r.getClosestPastElement();if(!s)return;if(s.groupId){const[a,l]=this._findClosestUndoElementInGroup(s.groupId);if(s!==a&&l)return this._undo(l,t,i)}if((s.sourceId!==t||s.confirmBeforeUndo)&&!i)return this._confirmAndContinueUndo(e,t,s);try{return s.type===1?this._workspaceUndo(e,s,i):this._resourceUndo(r,s,i)}finally{}}async _confirmAndContinueUndo(e,t,i){if((await this._dialogService.confirm({message:C("confirmDifferentSource","Would you like to undo '{0}'?",i.label),primaryButton:C({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:C("confirmDifferentSource.no","No")})).confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[r,s]of this._editStacks){const o=s.getClosestFutureElement();o&&o.sourceId===e&&(!t||o.sourceOrder<t.sourceOrder)&&(t=o,i=r)}return[t,i]}canRedo(e){if(e instanceof Tg){const[,i]=this._findClosestRedoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,i,r){if(t.canSplit())return this._splitFutureWorkspaceElement(t,i),this._notificationService.warn(r),new T2(this._redo(e));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(r),new T2}_checkWorkspaceRedo(e,t,i,r){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,C({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(r&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,C({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of i.editStacks)a.getClosestFutureElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndRedo(e,t,null,C({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const o=[];for(const a of i.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,t,null,C({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(e,t,null,C({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const i=this._getAffectedEditStacks(t),r=this._checkWorkspaceRedo(e,t,i,!1);return r?r.returnValue:this._executeWorkspaceRedo(e,t,i)}async _executeWorkspaceRedo(e,t,i){let r;try{r=await this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const s=this._checkWorkspaceRedo(e,t,i,!0);if(s)return r.dispose(),s.returnValue;for(const o of i.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),i,r,()=>this._continueRedoInGroup(t.groupId))}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=C({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new i6([e]),i,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[r,s]of this._editStacks){const o=s.getClosestFutureElement();o&&o.groupId===e&&(!t||o.groupOrder<t.groupOrder)&&(t=o,i=r)}return[t,i]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof Tg){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),i=t.getClosestFutureElement();if(i){if(i.groupId){const[r,s]=this._findClosestRedoElementInGroup(i.groupId);if(i!==r&&s)return this._redo(s)}try{return i.type===1?this._workspaceRedo(e,i):this._resourceRedo(t,i)}finally{}}}};E8=q0e([BH(0,lZ),BH(1,wc)],E8);class T2{constructor(e){this.returnValue=e}}_i(LA,E8,1);function ho(n,e,t){return Math.min(Math.max(n,e),t)}class fZ{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class K0e{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}const gZ=ai("environmentService");var Y0e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},zH=function(n,e){return function(t,i){e(t,i,n)}};const Z0e=ai("ILanguageFeatureDebounceService");var Zx;(function(n){const e=new WeakMap;let t=0;function i(r){let s=e.get(r);return s===void 0&&(s=++t,e.set(r,s)),s}n.of=i})(Zx||(Zx={}));class X0e{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class Q0e{constructor(e,t,i,r,s,o){this._logService=e,this._name=t,this._registry=i,this._default=r,this._min=s,this._max=o,this._cache=new Iy(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,i)=>t5(Zx.of(i),t),0)}get(e){const t=this._key(e),i=this._cache.get(t);return i?ho(i.value,this._min,this._max):this.default()}update(e,t){const i=this._key(e);let r=this._cache.get(i);r||(r=new K0e(6),this._cache.set(i,r));const s=ho(r.update(t),this._min,this._max);return rA(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${s}ms`),s}_overall(){const e=new fZ;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return ho(e,this._min,this._max)}}let I8=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,i){const r=i?.min??50,s=i?.max??r**2,o=i?.key??void 0,a=`${Zx.of(e)},${r}${o?","+o:""}`;let l=this._data.get(a);return l||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),l=new X0e(r*1.5)):l=new Q0e(this._logService,t,e,this._overallAverage()|0||r*1.5,r,s),this._data.set(a,l)),l}_overallAverage(){const e=new fZ;for(const t of this._data.values())e.update(t.default());return e.value}};I8=Y0e([zH(0,vc),zH(1,gZ)],I8);_i(Z0e,I8,1);class Jl{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let i="mtk"+this.getForeground(e);const r=this.getFontStyle(e);return r&1&&(i+=" mtki"),r&2&&(i+=" mtkb"),r&4&&(i+=" mtku"),r&8&&(i+=" mtks"),i}static getInlineStyleFromMetadata(e,t){const i=this.getForeground(e),r=this.getFontStyle(e);let s=`color: ${t[i]};`;r&1&&(s+="font-style: italic;"),r&2&&(s+="font-weight: bold;");let o="";return r&4&&(o+=" underline"),r&8&&(o+=" line-through"),o&&(s+=`text-decoration:${o};`),s}static getPresentationFromMetadata(e){const t=this.getForeground(e),i=this.getFontStyle(e);return{foreground:t,italic:!!(i&1),bold:!!(i&2),underline:!!(i&4),strikethrough:!!(i&8)}}}function I1(n){let e=0,t=0,i=0,r=0;for(let s=0,o=n.length;s<o;s++){const a=n.charCodeAt(s);a===13?(e===0&&(t=s),e++,s+1<o&&n.charCodeAt(s+1)===10?(r|=2,s++):r|=3,i=s+1):a===10&&(r|=1,e===0&&(t=s),e++,i=s+1)}return e===0&&(t=n.length),[e,t,n.length-i,r]}var J0e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},n6=function(n,e){return function(t,i){e(t,i,n)}};let N8=class{constructor(e,t,i,r){this._legend=e,this._themeService=t,this._languageService=i,this._logService=r,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new M8}getMetadata(e,t,i){const r=this._languageService.languageIdCodec.encodeLanguageId(i),s=this._hashTable.get(e,t,r);let o;if(s)o=s.metadata;else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let u=0;c>0&&u<this._legend.tokenModifiers.length;u++)c&1&&l.push(this._legend.tokenModifiers[u]),c=c>>1;const h=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,i);if(typeof h>"u")o=2147483647;else{if(o=0,typeof h.italic<"u"){const u=(h.italic?1:0)<<11;o|=u|1}if(typeof h.bold<"u"){const u=(h.bold?2:0)<<11;o|=u|2}if(typeof h.underline<"u"){const u=(h.underline?4:0)<<11;o|=u|4}if(typeof h.strikethrough<"u"){const u=(h.strikethrough?8:0)<<11;o|=u|8}if(h.foreground){const u=h.foreground<<15;o|=u|16}o===0&&(o=2147483647)}}else o=2147483647,a="not-in-legend";this._hashTable.add(e,t,r,o)}return o}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,i,r,s){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${i}: The provided start offset ${r} is outside the previous data (length ${s}).`))}};N8=J0e([n6(1,Ml),n6(2,Ir),n6(3,vc)],N8);class e1e{constructor(e,t,i,r){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=i,this.metadata=r,this.next=null}}const Jh=class Jh{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Jh._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Jh._SIZES.length?2/3*this._currentLength:0),this._elements=[],Jh._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let i=0;i<t;i++)e[i]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,i){return this._hash2(this._hash2(e,t),i)%this._currentLength}get(e,t,i){const r=this._hashFunc(e,t,i);let s=this._elements[r];for(;s;){if(s.tokenTypeIndex===e&&s.tokenModifierSet===t&&s.languageId===i)return s;s=s.next}return null}add(e,t,i,r){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const s=this._elements;this._currentLengthIndex++,this._currentLength=Jh._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Jh._SIZES.length?2/3*this._currentLength:0),this._elements=[],Jh._nullOutEntries(this._elements,this._currentLength);for(const o of s){let a=o;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new e1e(e,t,i,r))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}};Jh._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];let M8=Jh;const t1e=ai("semanticTokensStylingService");var i1e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},r6=function(n,e){return function(t,i){e(t,i,n)}};let A8=class extends xe{constructor(e,t,i){super(),this._themeService=e,this._logService=t,this._languageService=i,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new N8(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};A8=i1e([r6(0,Ml),r6(1,vc),r6(2,Ir)],A8);_i(t1e,A8,1);function wd(n){return n===47||n===92}function mZ(n){return n.replace(/[\\/]/g,Fn.sep)}function n1e(n){return n.indexOf("/")===-1&&(n=mZ(n)),/^[a-zA-Z]:(\/|$)/.test(n)&&(n="/"+n),n}function HH(n,e=Fn.sep){if(!n)return"";const t=n.length,i=n.charCodeAt(0);if(wd(i)){if(wd(n.charCodeAt(1))&&!wd(n.charCodeAt(2))){let s=3;const o=s;for(;s<t&&!wd(n.charCodeAt(s));s++);if(o!==s&&!wd(n.charCodeAt(s+1))){for(s+=1;s<t;s++)if(wd(n.charCodeAt(s)))return n.slice(0,s+1).replace(/[\\/]/g,e)}}return e}else if(r1e(i)&&n.charCodeAt(1)===58)return wd(n.charCodeAt(2))?n.slice(0,2)+e:n.slice(0,2);let r=n.indexOf("://");if(r!==-1){for(r+=3;r<t;r++)if(wd(n.charCodeAt(r)))return n.slice(0,r+1)}return""}function R8(n,e,t,i=rf){if(n===e)return!0;if(!n||!e||e.length>n.length)return!1;if(t){if(!ZM(n,e))return!1;if(e.length===n.length)return!0;let s=e.length;return e.charAt(e.length-1)===i&&s--,n.charAt(s)===i}return e.charAt(e.length-1)!==i&&(e+=i),n.indexOf(e)===0}function r1e(n){return n>=65&&n<=90||n>=97&&n<=122}const D2="**",VH="/",FS="[/\\\\]",WS="[^/\\\\]",s1e=/\//g;function $H(n,e){switch(n){case 0:return"";case 1:return`${WS}*?`;default:return`(?:${FS}|${WS}+${FS}${e?`|${FS}${WS}+`:""})*?`}}function jH(n,e){if(!n)return[];const t=[];let i=!1,r=!1,s="";for(const o of n){switch(o){case e:if(!i&&!r){t.push(s),s="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":r=!0;break;case"]":r=!1;break}s+=o}return s&&t.push(s),t}function pZ(n){if(!n)return"";let e="";const t=jH(n,VH);if(t.every(i=>i===D2))e=".*";else{let i=!1;t.forEach((r,s)=>{if(r===D2){if(i)return;e+=$H(2,s===t.length-1)}else{let o=!1,a="",l=!1,c="";for(const h of r){if(h!=="}"&&o){a+=h;continue}if(l&&(h!=="]"||!c)){let u;h==="-"?u=h:(h==="^"||h==="!")&&!c?u="^":h===VH?u="":u=Ou(h),c+=u;continue}switch(h){case"{":o=!0;continue;case"[":l=!0;continue;case"}":{const d=`(?:${jH(a,",").map(g=>pZ(g)).join("|")})`;e+=d,o=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=WS;continue;case"*":e+=$H(1);continue;default:e+=Ou(h)}}s<t.length-1&&(t[s+1]!==D2||s+2<t.length)&&(e+=FS)}i=r===D2})}return e}const o1e=/^\*\*\/\*\.[\w\.-]+$/,a1e=/^\*\*\/([\w\.-]+)\/?$/,l1e=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,c1e=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,h1e=/^\*\*((\/[\w\.-]+)+)\/?$/,u1e=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,UH=new Iy(1e4),qH=function(){return!1},nh=function(){return null};function TA(n,e){if(!n)return nh;let t;typeof n!="string"?t=n.pattern:t=n,t=t.trim();const i=`${t}_${!!e.trimForExclusions}`;let r=UH.get(i);if(r)return GH(r,n);let s;return o1e.test(t)?r=d1e(t.substr(4),t):(s=a1e.exec(s6(t,e)))?r=f1e(s[1],t):(e.trimForExclusions?c1e:l1e).test(t)?r=g1e(t,e):(s=h1e.exec(s6(t,e)))?r=KH(s[1].substr(1),t,!0):(s=u1e.exec(s6(t,e)))?r=KH(s[1],t,!1):r=m1e(t),UH.set(i,r),GH(r,n)}function GH(n,e){if(typeof e=="string")return n;const t=function(i,r){return R8(i,e.base,!wo)?n(QL(i.substr(e.base.length),rf),r):null};return t.allBasenames=n.allBasenames,t.allPaths=n.allPaths,t.basenames=n.basenames,t.patterns=n.patterns,t}function s6(n,e){return e.trimForExclusions&&n.endsWith("/**")?n.substr(0,n.length-2):n}function d1e(n,e){return function(t,i){return typeof t=="string"&&t.endsWith(n)?e:null}}function f1e(n,e){const t=`/${n}`,i=`\\${n}`,r=function(o,a){return typeof o!="string"?null:a?a===n?e:null:o===n||o.endsWith(t)||o.endsWith(i)?e:null},s=[n];return r.basenames=s,r.patterns=[e],r.allBasenames=s,r}function g1e(n,e){const t=_Z(n.slice(1,-1).split(",").map(a=>TA(a,e)).filter(a=>a!==nh),n),i=t.length;if(!i)return nh;if(i===1)return t[0];const r=function(a,l){for(let c=0,h=t.length;c<h;c++)if(t[c](a,l))return n;return null},s=t.find(a=>!!a.allBasenames);s&&(r.allBasenames=s.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(r.allPaths=o),r}function KH(n,e,t){const i=rf===Fn.sep,r=i?n:n.replace(s1e,rf),s=rf+r,o=Fn.sep+n;let a;return t?a=function(l,c){return typeof l=="string"&&(l===r||l.endsWith(s)||!i&&(l===n||l.endsWith(o)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===r||!i&&l===n)?e:null},a.allPaths=[(t?"*/":"./")+n],a}function m1e(n){try{const e=new RegExp(`^${pZ(n)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?n:null}}catch{return nh}}function p1e(n,e,t){return!n||typeof e!="string"?!1:bZ(n)(e,void 0,t)}function bZ(n,e={}){if(!n)return qH;if(typeof n=="string"||b1e(n)){const t=TA(n,e);if(t===nh)return qH;const i=function(r,s){return!!t(r,s)};return t.allBasenames&&(i.allBasenames=t.allBasenames),t.allPaths&&(i.allPaths=t.allPaths),i}return _1e(n,e)}function b1e(n){const e=n;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function _1e(n,e){const t=_Z(Object.getOwnPropertyNames(n).map(a=>v1e(a,n[a],e)).filter(a=>a!==nh)),i=t.length;if(!i)return nh;if(!t.some(a=>!!a.requiresSiblings)){if(i===1)return t[0];const a=function(h,u){let d;for(let g=0,p=t.length;g<p;g++){const b=t[g](h,u);if(typeof b=="string")return b;qE(b)&&(d||(d=[]),d.push(b))}return d?(async()=>{for(const g of d){const p=await g;if(typeof p=="string")return p}return null})():null},l=t.find(h=>!!h.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((h,u)=>u.allPaths?h.concat(u.allPaths):h,[]);return c.length&&(a.allPaths=c),a}const r=function(a,l,c){let h,u;for(let d=0,g=t.length;d<g;d++){const p=t[d];p.requiresSiblings&&c&&(l||(l=WK(a)),h||(h=l.substr(0,l.length-rfe(a).length)));const b=p(a,l,h,c);if(typeof b=="string")return b;qE(b)&&(u||(u=[]),u.push(b))}return u?(async()=>{for(const d of u){const g=await d;if(typeof g=="string")return g}return null})():null},s=t.find(a=>!!a.allBasenames);s&&(r.allBasenames=s.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(r.allPaths=o),r}function v1e(n,e,t){if(e===!1)return nh;const i=TA(n,t);if(i===nh)return nh;if(typeof e=="boolean")return i;if(e){const r=e.when;if(typeof r=="string"){const s=(o,a,l,c)=>{if(!c||!i(o,a))return null;const h=r.replace("$(basename)",()=>l),u=c(h);return qE(u)?u.then(d=>d?n:null):u?n:null};return s.requiresSiblings=!0,s}}return i}function _Z(n,e){const t=n.filter(a=>!!a.basenames);if(t.length<2)return n;const i=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let r;if(e){r=[];for(let a=0,l=i.length;a<l;a++)r.push(e)}else r=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const s=function(a,l){if(typeof a!="string")return null;if(!l){let h;for(h=a.length;h>0;h--){const u=a.charCodeAt(h-1);if(u===47||u===92)break}l=a.substr(h)}const c=i.indexOf(l);return c!==-1?r[c]:null};s.basenames=i,s.patterns=r,s.allBasenames=i;const o=n.filter(a=>!a.basenames);return o.push(s),o}function vZ(n,e,t,i,r,s){if(Array.isArray(n)){let o=0;for(const a of n){const l=vZ(a,e,t,i,r,s);if(l===10)return l;l>o&&(o=l)}return o}else{if(typeof n=="string")return i?n==="*"?5:n===t?10:0:0;if(n){const{language:o,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:h}=n;if(!i&&!c)return 0;h&&r&&(e=r);let u=0;if(l)if(l===e.scheme)u=10;else if(l==="*")u=5;else return 0;if(o)if(o===t)u=10;else if(o==="*")u=Math.max(u,5);else return 0;if(h)if(h===s)u=10;else if(h==="*"&&s!==void 0)u=Math.max(u,5);else return 0;if(a){let d;if(typeof a=="string"?d=a:d={...a,base:FK(a.base)},d===e.fsPath||p1e(d,e.fsPath))u=10;else return 0}return u}else return 0}}function wZ(n){return typeof n=="string"?!1:Array.isArray(n)?n.every(wZ):!!n.exclusive}class YH{constructor(e,t,i,r,s){this.uri=e,this.languageId=t,this.notebookUri=i,this.notebookType=r,this.recursive=s}equals(e){return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&this.notebookUri?.toString()===e.notebookUri?.toString()&&this.recursive===e.recursive}}class hn{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new de,this.onDidChange=this._onDidChange.event}register(e,t){let i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Mt(()=>{if(i){const r=this._entries.indexOf(i);r>=0&&(this._entries.splice(r,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),i=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e,!1);const t=[];for(const i of this._entries)i._score>0&&t.push(i.provider);return t}ordered(e,t=!1){const i=[];return this._orderedForEach(e,t,r=>i.push(r.provider)),i}orderedGroups(e){const t=[];let i,r;return this._orderedForEach(e,!1,s=>{i&&r===s._score?i.push(s.provider):(r=s._score,i=[s.provider],t.push(i))}),t}_orderedForEach(e,t,i){this._updateScores(e,t);for(const r of this._entries)r._score>0&&i(r)}_updateScores(e,t){const i=this._notebookInfoResolver?.(e.uri),r=i?new YH(e.uri,e.getLanguageId(),i.uri,i.type,t):new YH(e.uri,e.getLanguageId(),void 0,void 0,t);if(!this._lastCandidate?.equals(r)){this._lastCandidate=r;for(const s of this._entries)if(s._score=vZ(s.selector,r.uri,r.languageId,Bpe(e),r.notebookUri,r.notebookType),wZ(s.selector)&&s._score>0)if(t)s._score=0;else{for(const o of this._entries)o._score=0;s._score=1e3;break}this._entries.sort(hn._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:H_(e.selector)&&!H_(t.selector)?1:!H_(e.selector)&&H_(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function H_(n){return typeof n=="string"?!1:Array.isArray(n)?n.some(H_):!!n.isBuiltin}class w1e{constructor(){this.referenceProvider=new hn(this._score.bind(this)),this.renameProvider=new hn(this._score.bind(this)),this.newSymbolNamesProvider=new hn(this._score.bind(this)),this.codeActionProvider=new hn(this._score.bind(this)),this.definitionProvider=new hn(this._score.bind(this)),this.typeDefinitionProvider=new hn(this._score.bind(this)),this.declarationProvider=new hn(this._score.bind(this)),this.implementationProvider=new hn(this._score.bind(this)),this.documentSymbolProvider=new hn(this._score.bind(this)),this.inlayHintsProvider=new hn(this._score.bind(this)),this.colorProvider=new hn(this._score.bind(this)),this.codeLensProvider=new hn(this._score.bind(this)),this.documentFormattingEditProvider=new hn(this._score.bind(this)),this.documentRangeFormattingEditProvider=new hn(this._score.bind(this)),this.onTypeFormattingEditProvider=new hn(this._score.bind(this)),this.signatureHelpProvider=new hn(this._score.bind(this)),this.hoverProvider=new hn(this._score.bind(this)),this.documentHighlightProvider=new hn(this._score.bind(this)),this.multiDocumentHighlightProvider=new hn(this._score.bind(this)),this.selectionRangeProvider=new hn(this._score.bind(this)),this.foldingRangeProvider=new hn(this._score.bind(this)),this.linkProvider=new hn(this._score.bind(this)),this.inlineCompletionsProvider=new hn(this._score.bind(this)),this.inlineEditProvider=new hn(this._score.bind(this)),this.completionProvider=new hn(this._score.bind(this)),this.linkedEditingRangeProvider=new hn(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new hn(this._score.bind(this)),this.documentSemanticTokensProvider=new hn(this._score.bind(this)),this.documentDropEditProvider=new hn(this._score.bind(this)),this.documentPasteEditProvider=new hn(this._score.bind(this))}_score(e){return this._notebookTypeResolver?.(e)}}_i(ji,w1e,1);function DA(n){return`--vscode-${n.replace(/\./g,"-")}`}function Fe(n){return`var(${DA(n)})`}function y1e(n,e){return`var(${DA(n)}, ${e})`}function C1e(n){return n!==null&&typeof n=="object"&&"light"in n&&"dark"in n}const yZ={ColorContribution:"base.contributions.colors"},S1e="default";class x1e{constructor(){this._onDidChangeSchema=new de,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,i,r=!1,s){const o={id:e,description:i,defaults:t,needsTransparency:r,deprecationMessage:s};this.colorsById[e]=o;const a={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return s&&(a.deprecationMessage=s),r&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage=C("transparecyRequired","This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:i,oneOf:[a,{type:"string",const:S1e,description:C("useDefault","Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const i=this.colorsById[e];if(i?.defaults){const r=C1e(i.defaults)?i.defaults[t.type]:i.defaults;return $l(r,t)}}getColorSchema(){return this.colorSchema}toString(){const e=(t,i)=>{const r=t.indexOf(".")===-1?0:1,s=i.indexOf(".")===-1?0:1;return r!==s?r-s:t.localeCompare(i)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const _5=new x1e;Ur.add(yZ.ColorContribution,_5);function ie(n,e,t,i,r){return _5.registerColor(n,e,t,i,r)}function k1e(n,e){switch(n.op){case 0:return $l(n.value,e)?.darken(n.factor);case 1:return $l(n.value,e)?.lighten(n.factor);case 2:return $l(n.value,e)?.transparent(n.factor);case 3:{const t=$l(n.background,e);return t?$l(n.value,e)?.makeOpaque(t):$l(n.value,e)}case 4:for(const t of n.values){const i=$l(t,e);if(i)return i}return;case 6:return $l(e.defines(n.if)?n.then:n.else,e);case 5:{const t=$l(n.value,e);if(!t)return;const i=$l(n.background,e);return i?t.isDarkerThan(i)?Me.getLighterColor(t,i,n.factor).transparent(n.transparency):Me.getDarkerColor(t,i,n.factor).transparent(n.transparency):t.transparent(n.factor*n.transparency)}default:throw mA()}}function Jm(n,e){return{op:0,value:n,factor:e}}function cc(n,e){return{op:1,value:n,factor:e}}function Jt(n,e){return{op:2,value:n,factor:e}}function ZH(...n){return{op:4,values:n}}function L1e(n,e,t){return{op:6,if:n,then:e,else:t}}function XH(n,e,t,i){return{op:5,value:n,background:e,factor:t,transparency:i}}function $l(n,e){if(n!==null){if(typeof n=="string")return n[0]==="#"?Me.fromHex(n):e.getColor(n);if(n instanceof Me)return n;if(typeof n=="object")return k1e(n,e)}}const CZ="vscode://schemas/workbench-colors",SZ=Ur.as(p5.JSONContribution);SZ.registerSchema(CZ,_5.getColorSchema());const QH=new Gs(()=>SZ.notifySchemaChanged(CZ),200);_5.onDidChangeSchema(()=>{QH.isScheduled()||QH.schedule()});const Fi=ie("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},C("foreground","Overall foreground color. This color is only used if not overridden by a component."));ie("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},C("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));ie("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},C("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));ie("descriptionForeground",{light:"#717171",dark:Jt(Fi,.7),hcDark:Jt(Fi,.7),hcLight:Jt(Fi,.7)},C("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const P8=ie("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},C("iconForeground","The default color for icons in the workbench.")),ah=ie("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},C("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Ci=ie("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},C("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Hn=ie("contrastActiveBorder",{light:null,dark:null,hcDark:ah,hcLight:ah},C("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));ie("selection.background",null,C("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));const T1e=ie("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},C("textLinkForeground","Foreground color for links in text."));ie("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},C("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));ie("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:Me.black,hcLight:"#292929"},C("textSeparatorForeground","Color for text separators."));ie("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},C("textPreformatForeground","Foreground color for preformatted text segments."));ie("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},C("textPreformatBackground","Background color for preformatted text segments."));ie("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},C("textBlockQuoteBackground","Background color for block quotes in text."));ie("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:Me.white,hcLight:"#292929"},C("textBlockQuoteBorder","Border color for block quotes in text."));ie("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:Me.black,hcLight:"#F2F2F2"},C("textCodeBlockBackground","Background color for code blocks in text."));ie("sash.hoverBorder",ah,C("sashActiveBorder","Border color of active sashes."));const zS=ie("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:Me.black,hcLight:"#0F4A85"},C("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),D1e=ie("badge.foreground",{dark:Me.white,light:"#333",hcDark:Me.white,hcLight:Me.white},C("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),EA=ie("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},C("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),xZ=ie("scrollbarSlider.background",{dark:Me.fromHex("#797979").transparent(.4),light:Me.fromHex("#646464").transparent(.4),hcDark:Jt(Ci,.6),hcLight:Jt(Ci,.4)},C("scrollbarSliderBackground","Scrollbar slider background color.")),kZ=ie("scrollbarSlider.hoverBackground",{dark:Me.fromHex("#646464").transparent(.7),light:Me.fromHex("#646464").transparent(.7),hcDark:Jt(Ci,.8),hcLight:Jt(Ci,.8)},C("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),LZ=ie("scrollbarSlider.activeBackground",{dark:Me.fromHex("#BFBFBF").transparent(.4),light:Me.fromHex("#000000").transparent(.6),hcDark:Ci,hcLight:Ci},C("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),E1e=ie("progressBar.background",{dark:Me.fromHex("#0E70C0"),light:Me.fromHex("#0E70C0"),hcDark:Ci,hcLight:Ci},C("progressBarBackground","Background color of the progress bar that can show for long running operations.")),gc=ie("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:Me.black,hcLight:Me.white},C("editorBackground","Editor background color.")),Ny=ie("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:Me.white,hcLight:Fi},C("editorForeground","Editor default foreground color."));ie("editorStickyScroll.background",gc,C("editorStickyScrollBackground","Background color of sticky scroll in the editor"));ie("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:Me.fromHex("#0F4A85").transparent(.1)},C("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor"));ie("editorStickyScroll.border",{dark:null,light:null,hcDark:Ci,hcLight:Ci},C("editorStickyScrollBorder","Border color of sticky scroll in the editor"));ie("editorStickyScroll.shadow",EA,C("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor"));const ml=ie("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:Me.white},C("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),v5=ie("editorWidget.foreground",Fi,C("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),TZ=ie("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:Ci,hcLight:Ci},C("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));ie("editorWidget.resizeBorder",null,C("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget."));ie("editorError.background",null,C("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const IA=ie("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},C("editorError.foreground","Foreground color of error squigglies in the editor."));ie("editorError.border",{dark:null,light:null,hcDark:Me.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},C("errorBorder","If set, color of double underlines for errors in the editor."));const I1e=ie("editorWarning.background",null,C("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),mf=ie("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},C("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),Xx=ie("editorWarning.border",{dark:null,light:null,hcDark:Me.fromHex("#FFCC00").transparent(.8),hcLight:Me.fromHex("#FFCC00").transparent(.8)},C("warningBorder","If set, color of double underlines for warnings in the editor."));ie("editorInfo.background",null,C("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const Dm=ie("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},C("editorInfo.foreground","Foreground color of info squigglies in the editor.")),Qx=ie("editorInfo.border",{dark:null,light:null,hcDark:Me.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},C("infoBorder","If set, color of double underlines for infos in the editor.")),N1e=ie("editorHint.foreground",{dark:Me.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},C("editorHint.foreground","Foreground color of hint squigglies in the editor."));ie("editorHint.border",{dark:null,light:null,hcDark:Me.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},C("hintBorder","If set, color of double underlines for hints in the editor."));ie("editorLink.activeForeground",{dark:"#4E94CE",light:Me.blue,hcDark:Me.cyan,hcLight:"#292929"},C("activeLinkForeground","Color of active links."));const c0=ie("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},C("editorSelectionBackground","Color of the editor selection.")),M1e=ie("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:Me.white},C("editorSelectionForeground","Color of the selected text for high contrast.")),DZ=ie("editor.inactiveSelectionBackground",{light:Jt(c0,.5),dark:Jt(c0,.5),hcDark:Jt(c0,.7),hcLight:Jt(c0,.5)},C("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),EZ=ie("editor.selectionHighlightBackground",{light:XH(c0,gc,.3,.6),dark:XH(c0,gc,.3,.6),hcDark:null,hcLight:null},C("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);ie("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:Hn,hcLight:Hn},C("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));ie("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},C("editorFindMatch","Color of the current search match."));ie("editor.findMatchForeground",null,C("editorFindMatchForeground","Text color of the current search match."));const Ud=ie("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},C("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0);ie("editor.findMatchHighlightForeground",null,C("findMatchHighlightForeground","Foreground color of the other search matches."),!0);ie("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},C("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);ie("editor.findMatchBorder",{light:null,dark:null,hcDark:Hn,hcLight:Hn},C("editorFindMatchBorder","Border color of the current search match."));const h0=ie("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:Hn,hcLight:Hn},C("findMatchHighlightBorder","Border color of the other search matches."));ie("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:Jt(Hn,.4),hcLight:Jt(Hn,.4)},C("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);ie("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},C("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const JH=ie("editorHoverWidget.background",ml,C("hoverBackground","Background color of the editor hover."));ie("editorHoverWidget.foreground",v5,C("hoverForeground","Foreground color of the editor hover."));const A1e=ie("editorHoverWidget.border",TZ,C("hoverBorder","Border color of the editor hover."));ie("editorHoverWidget.statusBarBackground",{dark:cc(JH,.2),light:Jm(JH,.05),hcDark:ml,hcLight:ml},C("statusBarBackground","Background color of the editor hover status bar."));const IZ=ie("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:Me.white,hcLight:Me.black},C("editorInlayHintForeground","Foreground color of inline hints")),NZ=ie("editorInlayHint.background",{dark:Jt(zS,.1),light:Jt(zS,.1),hcDark:Jt(Me.white,.1),hcLight:Jt(zS,.1)},C("editorInlayHintBackground","Background color of inline hints"));ie("editorInlayHint.typeForeground",IZ,C("editorInlayHintForegroundTypes","Foreground color of inline hints for types"));ie("editorInlayHint.typeBackground",NZ,C("editorInlayHintBackgroundTypes","Background color of inline hints for types"));ie("editorInlayHint.parameterForeground",IZ,C("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters"));ie("editorInlayHint.parameterBackground",NZ,C("editorInlayHintBackgroundParameter","Background color of inline hints for parameters"));const R1e=ie("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},C("editorLightBulbForeground","The color used for the lightbulb actions icon."));ie("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},C("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon."));ie("editorLightBulbAi.foreground",R1e,C("editorLightBulbAiForeground","The color used for the lightbulb AI icon."));ie("editor.snippetTabstopHighlightBackground",{dark:new Me(new pi(124,124,124,.3)),light:new Me(new pi(10,50,100,.2)),hcDark:new Me(new pi(124,124,124,.3)),hcLight:new Me(new pi(10,50,100,.2))},C("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));ie("editor.snippetTabstopHighlightBorder",null,C("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));ie("editor.snippetFinalTabstopHighlightBackground",null,C("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));ie("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new Me(new pi(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},C("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));const O8=new Me(new pi(155,185,85,.2)),B8=new Me(new pi(255,0,0,.2)),P1e=ie("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},C("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),O1e=ie("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},C("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);ie("diffEditor.insertedLineBackground",{dark:O8,light:O8,hcDark:null,hcLight:null},C("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);ie("diffEditor.removedLineBackground",{dark:B8,light:B8,hcDark:null,hcLight:null},C("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);ie("diffEditorGutter.insertedLineBackground",null,C("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted."));ie("diffEditorGutter.removedLineBackground",null,C("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));const B1e=ie("diffEditorOverview.insertedForeground",null,C("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),F1e=ie("diffEditorOverview.removedForeground",null,C("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));ie("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},C("diffEditorInsertedOutline","Outline color for the text that got inserted."));ie("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},C("diffEditorRemovedOutline","Outline color for text that got removed."));ie("diffEditor.border",{dark:null,light:null,hcDark:Ci,hcLight:Ci},C("diffEditorBorder","Border color between the two text editors."));ie("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},C("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));ie("diffEditor.unchangedRegionBackground","sideBar.background",C("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor."));ie("diffEditor.unchangedRegionForeground","foreground",C("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor."));ie("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},C("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor."));const My=ie("widget.shadow",{dark:Jt(Me.black,.36),light:Jt(Me.black,.16),hcDark:null,hcLight:null},C("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),W1e=ie("widget.border",{dark:null,light:null,hcDark:Ci,hcLight:Ci},C("widgetBorder","Border color of widgets such as find/replace inside the editor.")),eV=ie("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},C("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));ie("toolbar.hoverOutline",{dark:null,light:null,hcDark:Hn,hcLight:Hn},C("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));ie("toolbar.activeBackground",{dark:cc(eV,.1),light:Jm(eV,.1),hcDark:null,hcLight:null},C("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));const z1e=ie("breadcrumb.foreground",Jt(Fi,.8),C("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),H1e=ie("breadcrumb.background",gc,C("breadcrumbsBackground","Background color of breadcrumb items.")),tV=ie("breadcrumb.focusForeground",{light:Jm(Fi,.2),dark:cc(Fi,.1),hcDark:cc(Fi,.1),hcLight:cc(Fi,.1)},C("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),V1e=ie("breadcrumb.activeSelectionForeground",{light:Jm(Fi,.2),dark:cc(Fi,.1),hcDark:cc(Fi,.1),hcLight:cc(Fi,.1)},C("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));ie("breadcrumbPicker.background",ml,C("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const MZ=.5,iV=Me.fromHex("#40C8AE").transparent(MZ),nV=Me.fromHex("#40A6FF").transparent(MZ),rV=Me.fromHex("#606060").transparent(.4),NA=.4,N1=1,F8=ie("merge.currentHeaderBackground",{dark:iV,light:iV,hcDark:null,hcLight:null},C("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);ie("merge.currentContentBackground",Jt(F8,NA),C("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const W8=ie("merge.incomingHeaderBackground",{dark:nV,light:nV,hcDark:null,hcLight:null},C("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);ie("merge.incomingContentBackground",Jt(W8,NA),C("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const z8=ie("merge.commonHeaderBackground",{dark:rV,light:rV,hcDark:null,hcLight:null},C("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);ie("merge.commonContentBackground",Jt(z8,NA),C("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const M1=ie("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},C("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));ie("editorOverviewRuler.currentContentForeground",{dark:Jt(F8,N1),light:Jt(F8,N1),hcDark:M1,hcLight:M1},C("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));ie("editorOverviewRuler.incomingContentForeground",{dark:Jt(W8,N1),light:Jt(W8,N1),hcDark:M1,hcLight:M1},C("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));ie("editorOverviewRuler.commonContentForeground",{dark:Jt(z8,N1),light:Jt(z8,N1),hcDark:M1,hcLight:M1},C("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));ie("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},C("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0);ie("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",C("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const $1e=ie("problemsErrorIcon.foreground",IA,C("problemsErrorIconForeground","The color used for the problems error icon.")),j1e=ie("problemsWarningIcon.foreground",mf,C("problemsWarningIconForeground","The color used for the problems warning icon.")),U1e=ie("problemsInfoIcon.foreground",Dm,C("problemsInfoIconForeground","The color used for the problems info icon.")),q1e=ie("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},C("minimapFindMatchHighlight","Minimap marker color for find matches."),!0);ie("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},C("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0);const sV=ie("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},C("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),G1e=ie("minimap.infoHighlight",{dark:Dm,light:Dm,hcDark:Qx,hcLight:Qx},C("minimapInfo","Minimap marker color for infos.")),K1e=ie("minimap.warningHighlight",{dark:mf,light:mf,hcDark:Xx,hcLight:Xx},C("overviewRuleWarning","Minimap marker color for warnings.")),Y1e=ie("minimap.errorHighlight",{dark:new Me(new pi(255,18,18,.7)),light:new Me(new pi(255,18,18,.7)),hcDark:new Me(new pi(255,50,50,1)),hcLight:"#B5200D"},C("minimapError","Minimap marker color for errors.")),Z1e=ie("minimap.background",null,C("minimapBackground","Minimap background color.")),X1e=ie("minimap.foregroundOpacity",Me.fromHex("#000f"),C("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));ie("minimapSlider.background",Jt(xZ,.5),C("minimapSliderBackground","Minimap slider background color."));ie("minimapSlider.hoverBackground",Jt(kZ,.5),C("minimapSliderHoverBackground","Minimap slider background color when hovering."));ie("minimapSlider.activeBackground",Jt(LZ,.5),C("minimapSliderActiveBackground","Minimap slider background color when clicked on."));ie("charts.foreground",Fi,C("chartsForeground","The foreground color used in charts."));ie("charts.lines",Jt(Fi,.5),C("chartsLines","The color used for horizontal lines in charts."));ie("charts.red",IA,C("chartsRed","The red color used in chart visualizations."));ie("charts.blue",Dm,C("chartsBlue","The blue color used in chart visualizations."));ie("charts.yellow",mf,C("chartsYellow","The yellow color used in chart visualizations."));ie("charts.orange",q1e,C("chartsOrange","The orange color used in chart visualizations."));ie("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},C("chartsGreen","The green color used in chart visualizations."));ie("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},C("chartsPurple","The purple color used in chart visualizations."));const Q1e=ie("input.background",{dark:"#3C3C3C",light:Me.white,hcDark:Me.black,hcLight:Me.white},C("inputBoxBackground","Input box background.")),J1e=ie("input.foreground",Fi,C("inputBoxForeground","Input box foreground.")),ebe=ie("input.border",{dark:null,light:null,hcDark:Ci,hcLight:Ci},C("inputBoxBorder","Input box border.")),AZ=ie("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:Ci,hcLight:Ci},C("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),tbe=ie("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},C("inputOption.hoverBackground","Background color of activated options in input fields.")),RZ=ie("inputOption.activeBackground",{dark:Jt(ah,.4),light:Jt(ah,.2),hcDark:Me.transparent,hcLight:Me.transparent},C("inputOption.activeBackground","Background hover color of options in input fields.")),PZ=ie("inputOption.activeForeground",{dark:Me.white,light:Me.black,hcDark:Fi,hcLight:Fi},C("inputOption.activeForeground","Foreground color of activated options in input fields."));ie("input.placeholderForeground",{light:Jt(Fi,.5),dark:Jt(Fi,.5),hcDark:Jt(Fi,.7),hcLight:Jt(Fi,.7)},C("inputPlaceholderForeground","Input box foreground color for placeholder text."));const ibe=ie("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:Me.black,hcLight:Me.white},C("inputValidationInfoBackground","Input validation background color for information severity.")),nbe=ie("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:Fi},C("inputValidationInfoForeground","Input validation foreground color for information severity.")),rbe=ie("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:Ci,hcLight:Ci},C("inputValidationInfoBorder","Input validation border color for information severity.")),sbe=ie("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:Me.black,hcLight:Me.white},C("inputValidationWarningBackground","Input validation background color for warning severity.")),obe=ie("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:Fi},C("inputValidationWarningForeground","Input validation foreground color for warning severity.")),abe=ie("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:Ci,hcLight:Ci},C("inputValidationWarningBorder","Input validation border color for warning severity.")),lbe=ie("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:Me.black,hcLight:Me.white},C("inputValidationErrorBackground","Input validation background color for error severity.")),cbe=ie("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:Fi},C("inputValidationErrorForeground","Input validation foreground color for error severity.")),hbe=ie("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:Ci,hcLight:Ci},C("inputValidationErrorBorder","Input validation border color for error severity.")),w5=ie("dropdown.background",{dark:"#3C3C3C",light:Me.white,hcDark:Me.black,hcLight:Me.white},C("dropdownBackground","Dropdown background.")),ube=ie("dropdown.listBackground",{dark:null,light:null,hcDark:Me.black,hcLight:Me.white},C("dropdownListBackground","Dropdown list background.")),MA=ie("dropdown.foreground",{dark:"#F0F0F0",light:Fi,hcDark:Me.white,hcLight:Fi},C("dropdownForeground","Dropdown foreground.")),AA=ie("dropdown.border",{dark:w5,light:"#CECECE",hcDark:Ci,hcLight:Ci},C("dropdownBorder","Dropdown border.")),OZ=ie("button.foreground",Me.white,C("buttonForeground","Button foreground color.")),dbe=ie("button.separator",Jt(OZ,.4),C("buttonSeparator","Button separator color.")),V_=ie("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},C("buttonBackground","Button background color.")),fbe=ie("button.hoverBackground",{dark:cc(V_,.2),light:Jm(V_,.2),hcDark:V_,hcLight:V_},C("buttonHoverBackground","Button background color when hovering.")),gbe=ie("button.border",Ci,C("buttonBorder","Button border color.")),mbe=ie("button.secondaryForeground",{dark:Me.white,light:Me.white,hcDark:Me.white,hcLight:Fi},C("buttonSecondaryForeground","Secondary button foreground color.")),H8=ie("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:Me.white},C("buttonSecondaryBackground","Secondary button background color.")),pbe=ie("button.secondaryHoverBackground",{dark:cc(H8,.2),light:Jm(H8,.2),hcDark:null,hcLight:null},C("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),$_=ie("radio.activeForeground",PZ,C("radioActiveForeground","Foreground color of active radio option.")),bbe=ie("radio.activeBackground",RZ,C("radioBackground","Background color of active radio option.")),_be=ie("radio.activeBorder",AZ,C("radioActiveBorder","Border color of the active radio option.")),vbe=ie("radio.inactiveForeground",null,C("radioInactiveForeground","Foreground color of inactive radio option.")),wbe=ie("radio.inactiveBackground",null,C("radioInactiveBackground","Background color of inactive radio option.")),ybe=ie("radio.inactiveBorder",{light:Jt($_,.2),dark:Jt($_,.2),hcDark:Jt($_,.4),hcLight:Jt($_,.2)},C("radioInactiveBorder","Border color of the inactive radio option.")),Cbe=ie("radio.inactiveHoverBackground",tbe,C("radioHoverBackground","Background color of inactive active radio option when hovering.")),Sbe=ie("checkbox.background",w5,C("checkbox.background","Background color of checkbox widget."));ie("checkbox.selectBackground",ml,C("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));const xbe=ie("checkbox.foreground",MA,C("checkbox.foreground","Foreground color of checkbox widget.")),kbe=ie("checkbox.border",AA,C("checkbox.border","Border color of checkbox widget."));ie("checkbox.selectBorder",P8,C("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));const Lbe=ie("keybindingLabel.background",{dark:new Me(new pi(128,128,128,.17)),light:new Me(new pi(221,221,221,.4)),hcDark:Me.transparent,hcLight:Me.transparent},C("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),Tbe=ie("keybindingLabel.foreground",{dark:Me.fromHex("#CCCCCC"),light:Me.fromHex("#555555"),hcDark:Me.white,hcLight:Fi},C("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),Dbe=ie("keybindingLabel.border",{dark:new Me(new pi(51,51,51,.6)),light:new Me(new pi(204,204,204,.4)),hcDark:new Me(new pi(111,195,223)),hcLight:Ci},C("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),Ebe=ie("keybindingLabel.bottomBorder",{dark:new Me(new pi(68,68,68,.6)),light:new Me(new pi(187,187,187,.4)),hcDark:new Me(new pi(111,195,223)),hcLight:Fi},C("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),Ibe=ie("list.focusBackground",null,C("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Nbe=ie("list.focusForeground",null,C("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Mbe=ie("list.focusOutline",{dark:ah,light:ah,hcDark:Hn,hcLight:Hn},C("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Abe=ie("list.focusAndSelectionOutline",null,C("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),Em=ie("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:Me.fromHex("#0F4A85").transparent(.1)},C("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Lw=ie("list.activeSelectionForeground",{dark:Me.white,light:Me.white,hcDark:null,hcLight:null},C("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),BZ=ie("list.activeSelectionIconForeground",null,C("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Rbe=ie("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:Me.fromHex("#0F4A85").transparent(.1)},C("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Pbe=ie("list.inactiveSelectionForeground",null,C("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Obe=ie("list.inactiveSelectionIconForeground",null,C("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Bbe=ie("list.inactiveFocusBackground",null,C("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Fbe=ie("list.inactiveFocusOutline",null,C("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),FZ=ie("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:Me.white.transparent(.1),hcLight:Me.fromHex("#0F4A85").transparent(.1)},C("listHoverBackground","List/Tree background when hovering over items using the mouse.")),WZ=ie("list.hoverForeground",null,C("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),Wbe=ie("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},C("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),zbe=ie("list.dropBetweenBackground",{dark:P8,light:P8,hcDark:null,hcLight:null},C("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),E2=ie("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:ah,hcLight:ah},C("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree."));ie("list.focusHighlightForeground",{dark:E2,light:L1e(Em,E2,"#BBE7FF"),hcDark:E2,hcLight:E2},C("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));ie("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},C("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));ie("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},C("listErrorForeground","Foreground color of list items containing errors."));ie("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},C("listWarningForeground","Foreground color of list items containing warnings."));const Hbe=ie("listFilterWidget.background",{light:Jm(ml,0),dark:cc(ml,0),hcDark:ml,hcLight:ml},C("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),Vbe=ie("listFilterWidget.outline",{dark:Me.transparent,light:Me.transparent,hcDark:"#f38518",hcLight:"#007ACC"},C("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),$be=ie("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:Ci,hcLight:Ci},C("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),jbe=ie("listFilterWidget.shadow",My,C("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees."));ie("list.filterMatchBackground",{dark:Ud,light:Ud,hcDark:null,hcLight:null},C("listFilterMatchHighlight","Background color of the filtered match."));ie("list.filterMatchBorder",{dark:h0,light:h0,hcDark:Ci,hcLight:Hn},C("listFilterMatchHighlightBorder","Border color of the filtered match."));ie("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},C("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized."));const zZ=ie("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},C("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),Ube=ie("tree.inactiveIndentGuidesStroke",Jt(zZ,.4),C("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),qbe=ie("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},C("tableColumnsBorder","Table border color between columns.")),Gbe=ie("tree.tableOddRowsBackground",{dark:Jt(Fi,.04),light:Jt(Fi,.04),hcDark:null,hcLight:null},C("tableOddRowsBackgroundColor","Background color for odd table rows."));ie("editorActionList.background",ml,C("editorActionListBackground","Action List background color."));ie("editorActionList.foreground",v5,C("editorActionListForeground","Action List foreground color."));ie("editorActionList.focusForeground",Lw,C("editorActionListFocusForeground","Action List foreground color for the focused item."));ie("editorActionList.focusBackground",Em,C("editorActionListFocusBackground","Action List background color for the focused item."));const Kbe=ie("menu.border",{dark:null,light:null,hcDark:Ci,hcLight:Ci},C("menuBorder","Border color of menus.")),Ybe=ie("menu.foreground",MA,C("menuForeground","Foreground color of menu items.")),Zbe=ie("menu.background",w5,C("menuBackground","Background color of menu items.")),Xbe=ie("menu.selectionForeground",Lw,C("menuSelectionForeground","Foreground color of the selected menu item in menus.")),Qbe=ie("menu.selectionBackground",Em,C("menuSelectionBackground","Background color of the selected menu item in menus.")),Jbe=ie("menu.selectionBorder",{dark:null,light:null,hcDark:Hn,hcLight:Hn},C("menuSelectionBorder","Border color of the selected menu item in menus.")),e_e=ie("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:Ci,hcLight:Ci},C("menuSeparatorBackground","Color of a separator menu item in menus.")),oV=ie("quickInput.background",ml,C("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),t_e=ie("quickInput.foreground",v5,C("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),i_e=ie("quickInputTitle.background",{dark:new Me(new pi(255,255,255,.105)),light:new Me(new pi(0,0,0,.06)),hcDark:"#000000",hcLight:Me.white},C("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),HZ=ie("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:Me.white,hcLight:"#0F4A85"},C("pickerGroupForeground","Quick picker color for grouping labels.")),n_e=ie("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:Me.white,hcLight:"#0F4A85"},C("pickerGroupBorder","Quick picker color for grouping borders.")),aV=ie("quickInput.list.focusBackground",null,"",void 0,C("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),V8=ie("quickInputList.focusForeground",Lw,C("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),VZ=ie("quickInputList.focusIconForeground",BZ,C("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),$8=ie("quickInputList.focusBackground",{dark:ZH(aV,Em),light:ZH(aV,Em),hcDark:null,hcLight:null},C("quickInput.listFocusBackground","Quick picker background color for the focused item."));ie("search.resultsInfoForeground",{light:Fi,dark:Jt(Fi,.65),hcDark:Fi,hcLight:Fi},C("search.resultsInfoForeground","Color of the text in the search viewlet's completion message."));ie("searchEditor.findMatchBackground",{light:Jt(Ud,.66),dark:Jt(Ud,.66),hcDark:Ud,hcLight:Ud},C("searchEditor.queryMatch","Color of the Search Editor query matches."));ie("searchEditor.findMatchBorder",{light:Jt(h0,.66),dark:Jt(h0,.66),hcDark:h0,hcLight:h0},C("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));var r_e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},lV=function(n,e){return function(t,i){e(t,i,n)}};const Ay=ai("hoverService");let Tw=class extends xe{get delay(){return this.isInstantlyHovering()?0:this._delay}constructor(e,t,i={},r,s){super(),this.placement=e,this.instantHover=t,this.overrideOptions=i,this.configurationService=r,this.hoverService=s,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new rt),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}showHover(e,t){const i=typeof this.overrideOptions=="function"?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();const r=$r(e.target)?[e.target]:e.target.targetElements;for(const o of r)this.hoverDisposables.add(Er(o,"keydown",a=>{a.equals(9)&&this.hoverService.hideHover()}));const s=$r(e.content)?void 0:e.content.toString();return this.hoverService.showHover({...e,...i,persistence:{hideOnKeyDown:!0,...i.persistence},id:s,appearance:{...e.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...i.appearance}},t)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};Tw=r_e([lV(3,Nn),lV(4,Ay)],Tw);const Ry=ai("contextViewService"),qu=ai("contextMenuService"),ns=ai("keybindingService");class y5{constructor(){this._hooks=new rt,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,r,s){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=r,this._onStopCallback=s;let o=e;try{e.setPointerCapture(t),this._hooks.add(Mt(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{o=lt(e)}this._hooks.add(we(o,Be.POINTER_MOVE,a=>{if(a.buttons!==i){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(we(o,Be.POINTER_UP,a=>this.stopMonitoring(!0)))}}function Mn(n,e,t){let i=null,r=null;if(typeof t.value=="function"?(i="value",r=t.value,r.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(i="get",r=t.get),!r)throw new Error("not supported");const s=`$memoize$${e}`;t[i]=function(...o){return this.hasOwnProperty(s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,o)}),this[s]}}var s_e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Ki;(function(n){n.Tap="-monaco-gesturetap",n.Change="-monaco-gesturechange",n.Start="-monaco-gesturestart",n.End="-monaco-gesturesend",n.Contextmenu="-monaco-gesturecontextmenu"})(Ki||(Ki={}));const Zr=class Zr extends xe{constructor(){super(),this.dispatched=!1,this.targets=new Wo,this.ignoreTargets=new Wo,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Oe.runAndSubscribe(i5,({window:e,disposables:t})=>{t.add(we(e.document,"touchstart",i=>this.onTouchStart(i),{passive:!1})),t.add(we(e.document,"touchend",i=>this.onTouchEnd(e,i))),t.add(we(e.document,"touchmove",i=>this.onTouchMove(i),{passive:!1}))},{window:Vi,disposables:this._store}))}static addTarget(e){if(!Zr.isTouchDevice())return xe.None;Zr.INSTANCE||(Zr.INSTANCE=new Zr);const t=Zr.INSTANCE.targets.push(e);return Mt(t)}static ignoreTarget(e){if(!Zr.isTouchDevice())return xe.None;Zr.INSTANCE||(Zr.INSTANCE=new Zr);const t=Zr.INSTANCE.ignoreTargets.push(e);return Mt(t)}static isTouchDevice(){return"ontouchstart"in Vi||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,r=e.targetTouches.length;i<r;i++){const s=e.targetTouches.item(i);this.activeTouches[s.identifier]={id:s.identifier,initialTarget:s.target,initialTimeStamp:t,initialPageX:s.pageX,initialPageY:s.pageY,rollingTimestamps:[t],rollingPageX:[s.pageX],rollingPageY:[s.pageY]};const o=this.newGestureEvent(Ki.Start,s.target);o.pageX=s.pageX,o.pageY=s.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){const i=Date.now(),r=Object.keys(this.activeTouches).length;for(let s=0,o=t.changedTouches.length;s<o;s++){const a=t.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}const l=this.activeTouches[a.identifier],c=Date.now()-l.initialTimeStamp;if(c<Zr.HOLD_DELAY&&Math.abs(l.initialPageX-Ra(l.rollingPageX))<30&&Math.abs(l.initialPageY-Ra(l.rollingPageY))<30){const h=this.newGestureEvent(Ki.Tap,l.initialTarget);h.pageX=Ra(l.rollingPageX),h.pageY=Ra(l.rollingPageY),this.dispatchEvent(h)}else if(c>=Zr.HOLD_DELAY&&Math.abs(l.initialPageX-Ra(l.rollingPageX))<30&&Math.abs(l.initialPageY-Ra(l.rollingPageY))<30){const h=this.newGestureEvent(Ki.Contextmenu,l.initialTarget);h.pageX=Ra(l.rollingPageX),h.pageY=Ra(l.rollingPageY),this.dispatchEvent(h)}else if(r===1){const h=Ra(l.rollingPageX),u=Ra(l.rollingPageY),d=Ra(l.rollingTimestamps)-l.rollingTimestamps[0],g=h-l.rollingPageX[0],p=u-l.rollingPageY[0],b=[...this.targets].filter(_=>l.initialTarget instanceof Node&&_.contains(l.initialTarget));this.inertia(e,b,i,Math.abs(g)/d,g>0?1:-1,h,Math.abs(p)/d,p>0?1:-1,u)}this.dispatchEvent(this.newGestureEvent(Ki.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(e){if(e.type===Ki.Tap){const t=new Date().getTime();let i=0;t-this._lastSetTapCountTime>Zr.CLEAR_TAP_COUNT_TIME?i=1:i=2,this._lastSetTapCountTime=t,e.tapCount=i}else(e.type===Ki.Change||e.type===Ki.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const i of this.ignoreTargets)if(i.contains(e.initialTarget))return;const t=[];for(const i of this.targets)if(i.contains(e.initialTarget)){let r=0,s=e.initialTarget;for(;s&&s!==i;)r++,s=s.parentElement;t.push([r,i])}t.sort((i,r)=>i[0]-r[0]);for(const[i,r]of t)r.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,i,r,s,o,a,l,c){this.handle=Yo(e,()=>{const h=Date.now(),u=h-i;let d=0,g=0,p=!0;r+=Zr.SCROLL_FRICTION*u,a+=Zr.SCROLL_FRICTION*u,r>0&&(p=!1,d=s*r*u),a>0&&(p=!1,g=l*a*u);const b=this.newGestureEvent(Ki.Change);b.translationX=d,b.translationY=g,t.forEach(_=>_.dispatchEvent(b)),p||this.inertia(e,t,h,r,s,o+d,a,l,c+g)})}onTouchMove(e){const t=Date.now();for(let i=0,r=e.changedTouches.length;i<r;i++){const s=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("end of an UNKNOWN touch",s);continue}const o=this.activeTouches[s.identifier],a=this.newGestureEvent(Ki.Change,o.initialTarget);a.translationX=s.pageX-Ra(o.rollingPageX),a.translationY=s.pageY-Ra(o.rollingPageY),a.pageX=s.pageX,a.pageY=s.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(s.pageX),o.rollingPageY.push(s.pageY),o.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};Zr.SCROLL_FRICTION=-.005,Zr.HOLD_DELAY=700,Zr.CLEAR_TAP_COUNT_TIME=400;let Zs=Zr;s_e([Mn],Zs,"isTouchDevice",null);let Gu=class extends xe{onclick(e,t){this._register(we(e,Be.CLICK,i=>t(new ac(lt(e),i))))}onmousedown(e,t){this._register(we(e,Be.MOUSE_DOWN,i=>t(new ac(lt(e),i))))}onmouseover(e,t){this._register(we(e,Be.MOUSE_OVER,i=>t(new ac(lt(e),i))))}onmouseleave(e,t){this._register(we(e,Be.MOUSE_LEAVE,i=>t(new ac(lt(e),i))))}onkeydown(e,t){this._register(we(e,Be.KEY_DOWN,i=>t(new en(i))))}onkeyup(e,t){this._register(we(e,Be.KEY_UP,i=>t(new en(i))))}oninput(e,t){this._register(we(e,Be.INPUT,t))}onblur(e,t){this._register(we(e,Be.BLUR,t))}onfocus(e,t){this._register(we(e,Be.FOCUS,t))}ignoreGesture(e){return Zs.ignoreTarget(e)}};const A1=11;class o_e extends Gu{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...gi.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=A1+"px",this.domNode.style.height=A1+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new y5),this._register(Er(this.bgDomNode,Be.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(Er(this.domNode,Be.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new oA),this._pointerdownScheduleRepeatTimer=this._register(new Um)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,lt(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class a_e extends xe{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Um)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(e?" fade":"")))}}const l_e=140;class $Z extends Gu{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new a_e(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new y5),this._shouldRender=!0,this.domNode=bi(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(we(this.domNode.domNode,Be.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new o_e(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,r){this.slider=bi(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof i=="number"&&this.slider.setWidth(i),typeof r=="number"&&this.slider.setHeight(r),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(we(this.slider.domNode,Be.POINTER_DOWN,s=>{s.button===0&&(s.preventDefault(),this._sliderPointerDown(s))})),this.onclick(this.slider.domNode,s=>{s.leftButton&&s.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),r=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),s=this._sliderPointerPosition(e);i<=s&&s<=r?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,i=e.offsetY;else{const s=qa(this.domNode.domNode);t=e.pageX-s.left,i=e.pageY-s.top}const r=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(r):this._scrollbarState.getDesiredScrollPositionFromOffset(r)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),r=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,s=>{const o=this._sliderOrthogonalPointerPosition(s),a=Math.abs(o-i);if(Go&&a>l_e){this._setDesiredScrollPositionNow(r.getScrollPosition());return}const c=this._sliderPointerPosition(s)-t;this._setDesiredScrollPositionNow(r.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const c_e=20;class R1{constructor(e,t,i,r,s,o){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=r,this._scrollSize=s,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new R1(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,i,r,s){const o=Math.max(0,i-e),a=Math.max(0,o-2*t),l=r>0&&r>i;if(!l)return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(c_e,Math.floor(i*a/r))),h=(a-c)/(r-i),u=s*h;return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:h,computedSliderPosition:Math.round(u)}}_refreshComputedValues(){const e=R1._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let i=this._scrollPosition;return t<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class h_e extends $Z{constructor(e,t,i){const r=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new R1(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,r.width,r.scrollWidth,s.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const o=(t.arrowSize-A1)/2,a=(t.horizontalScrollbarSize-A1)/2;this._createArrow({className:"scra",icon:Je.scrollbarButtonLeft,top:a,left:o,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new xm(null,1,0))}),this._createArrow({className:"scra",icon:Je.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:o,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new xm(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class u_e extends $Z{constructor(e,t,i){const r=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new R1(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,r.height,r.scrollHeight,s.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const o=(t.arrowSize-A1)/2,a=(t.verticalScrollbarSize-A1)/2;this._createArrow({className:"scra",icon:Je.scrollbarButtonUp,top:o,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new xm(null,0,1))}),this._createArrow({className:"scra",icon:Je.scrollbarButtonDown,top:void 0,left:a,bottom:o,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new xm(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class Jx{constructor(e,t,i,r,s,o,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,i=i|0,r=r|0,s=s|0,o=o|0,a=a|0),this.rawScrollLeft=r,this.rawScrollTop=a,t<0&&(t=0),r+t>i&&(r=i-t),r<0&&(r=0),s<0&&(s=0),a+s>o&&(a=o-s),a<0&&(a=0),this.width=t,this.scrollWidth=i,this.scrollLeft=r,this.height=s,this.scrollHeight=o,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new Jx(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new Jx(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const i=this.width!==e.width,r=this.scrollWidth!==e.scrollWidth,s=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:r,scrollLeftChanged:s,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:l}}}class sb extends xe{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new de),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new Jx(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const i=this._state.withScrollDimensions(e,t);this._setState(i,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let r;t?r=new Dw(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):r=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=r}else{const i=this._state.withScrollPosition(e);this._smoothScrolling=Dw.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}}class cV{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}}function o6(n,e){const t=e-n;return function(i){return n+t*g_e(i)}}function d_e(n,e,t){return function(i){return i<t?n(i/t):e((i-t)/(1-t))}}class Dw{constructor(e,t,i,r){this.from=e,this.to=t,this.duration=r,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,i){if(Math.abs(e-t)>2.5*i){let s,o;return e<t?(s=e+.75*i,o=t-.75*i):(s=e-.75*i,o=t+.75*i),d_e(o6(e,s),o6(o,t),.33)}return o6(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const i=this.scrollLeft(t),r=this.scrollTop(t);return new cV(i,r,!1)}return new cV(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,i){return Dw.start(e,t,i)}static start(e,t,i){i=i+10;const r=Date.now()-10;return new Dw(e,t,r,i)}}function f_e(n){return Math.pow(n,3)}function g_e(n){return 1-f_e(1-n)}const m_e=500,hV=50;class p_e{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}}const hL=class hL{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,i=1,r=this._rear;do{const s=r===this._front?e:Math.pow(2,-i);if(e-=s,t+=this._memory[r].score*s,r===this._front)break;r=(this._capacity+r-1)%this._capacity,i++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(Sy){const t=lt(e.browserEvent),i=Ofe(t);this.accept(Date.now(),e.deltaX*i,e.deltaY*i)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,i){let r=null;const s=new p_e(e,t,i);this._front===-1&&this._rear===-1?(this._memory[0]=s,this._front=0,this._rear=0):(r=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=s),s.score=this._computeScore(s,r)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let i=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(i+=.25),t){const r=Math.abs(e.deltaX),s=Math.abs(e.deltaY),o=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(r,o),1),c=Math.max(Math.min(s,a),1),h=Math.max(r,o),u=Math.max(s,a);h%l===0&&u%c===0&&(i-=.5)}return Math.min(Math.max(i,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};hL.INSTANCE=new hL;let ek=hL;class RA extends Gu{get options(){return this._options}constructor(e,t,i){super(),this._onScroll=this._register(new de),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new de),e.style.overflow="hidden",this._options=__e(t),this._scrollable=i,this._register(this._scrollable.onScroll(s=>{this._onWillScroll.fire(s),this._onDidScroll(s),this._onScroll.fire(s)}));const r={onMouseWheel:s=>this._onMouseWheel(s),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new u_e(this._scrollable,this._options,r)),this._horizontalScrollbar=this._register(new h_e(this._scrollable,this._options,r)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=bi(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=bi(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=bi(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,s=>this._onMouseOver(s)),this.onmouseleave(this._listenOnDomNode,s=>this._onMouseLeave(s)),this._hideTimeout=this._register(new Um),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=is(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,hi&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new xm(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=is(this._mouseWheelToDispose),e)){const i=r=>{this._onMouseWheel(new xm(r))};this._mouseWheelToDispose.push(we(this._listenOnDomNode,Be.MOUSE_WHEEL,i,{passive:!1}))}}_onMouseWheel(e){if(e.browserEvent?.defaultPrevented)return;const t=ek.INSTANCE;t.acceptStandardWheelEvent(e);let i=!1;if(e.deltaY||e.deltaX){let s=e.deltaY*this._options.mouseWheelScrollSensitivity,o=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&o+s===0?o=s=0:Math.abs(s)>=Math.abs(o)?o=0:s=0),this._options.flipAxes&&([s,o]=[o,s]);const a=!hi&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!o&&(o=s,s=0),e.browserEvent&&e.browserEvent.altKey&&(o=o*this._options.fastScrollSensitivity,s=s*this._options.fastScrollSensitivity);const l=this._scrollable.getFutureScrollPosition();let c={};if(s){const h=hV*s,u=l.scrollTop-(h<0?Math.floor(h):Math.ceil(h));this._verticalScrollbar.writeScrollPosition(c,u)}if(o){const h=hV*o,u=l.scrollLeft-(h<0?Math.floor(h):Math.ceil(h));this._horizontalScrollbar.writeScrollPosition(c,u)}c=this._scrollable.validateScrollPosition(c),(l.scrollLeft!==c.scrollLeft||l.scrollTop!==c.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(c):this._scrollable.setScrollPositionNow(c),i=!0)}let r=i;!r&&this._options.alwaysConsumeMouseWheel&&(r=!0),!r&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(r=!0),r&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,r=i?" left":"",s=t?" top":"",o=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${r}`),this._topShadowDomNode.setClassName(`shadow${s}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${s}${r}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),m_e)}}class b_e extends RA{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new sb({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:r=>Yo(lt(e),r)});super(e,t,i),this._register(i)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class C5 extends RA{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class PA extends RA{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new sb({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:r=>Yo(lt(e),r)});super(e,t,i),this._register(i),this._element=e,this._register(this.onScroll(r=>{r.scrollTopChanged&&(this._element.scrollTop=r.scrollTop),r.scrollLeftChanged&&(this._element.scrollLeft=r.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function __e(n){const e={lazyRender:typeof n.lazyRender<"u"?n.lazyRender:!1,className:typeof n.className<"u"?n.className:"",useShadows:typeof n.useShadows<"u"?n.useShadows:!0,handleMouseWheel:typeof n.handleMouseWheel<"u"?n.handleMouseWheel:!0,flipAxes:typeof n.flipAxes<"u"?n.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof n.consumeMouseWheelIfScrollbarIsNeeded<"u"?n.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof n.alwaysConsumeMouseWheel<"u"?n.alwaysConsumeMouseWheel:!1,scrollYToX:typeof n.scrollYToX<"u"?n.scrollYToX:!1,mouseWheelScrollSensitivity:typeof n.mouseWheelScrollSensitivity<"u"?n.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof n.fastScrollSensitivity<"u"?n.fastScrollSensitivity:5,scrollPredominantAxis:typeof n.scrollPredominantAxis<"u"?n.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof n.mouseWheelSmoothScroll<"u"?n.mouseWheelSmoothScroll:!0,arrowSize:typeof n.arrowSize<"u"?n.arrowSize:11,listenOnDomNode:typeof n.listenOnDomNode<"u"?n.listenOnDomNode:null,horizontal:typeof n.horizontal<"u"?n.horizontal:1,horizontalScrollbarSize:typeof n.horizontalScrollbarSize<"u"?n.horizontalScrollbarSize:10,horizontalSliderSize:typeof n.horizontalSliderSize<"u"?n.horizontalSliderSize:0,horizontalHasArrows:typeof n.horizontalHasArrows<"u"?n.horizontalHasArrows:!1,vertical:typeof n.vertical<"u"?n.vertical:1,verticalScrollbarSize:typeof n.verticalScrollbarSize<"u"?n.verticalScrollbarSize:10,verticalHasArrows:typeof n.verticalHasArrows<"u"?n.verticalHasArrows:!1,verticalSliderSize:typeof n.verticalSliderSize<"u"?n.verticalSliderSize:0,scrollByPage:typeof n.scrollByPage<"u"?n.scrollByPage:!1};return e.horizontalSliderSize=typeof n.horizontalSliderSize<"u"?n.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof n.verticalSliderSize<"u"?n.verticalSliderSize:e.verticalScrollbarSize,hi&&(e.className+=" mac"),e}const I2=ft;let v_e=class extends xe{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new PA(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}};class OA extends xe{static render(e,t,i){return new OA(e,t,i)}constructor(e,t,i){super(),this.actionLabel=t.label,this.actionKeybindingLabel=i,this.actionContainer=it(e,I2("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=it(this.actionContainer,I2("a.action")),this.action.setAttribute("role","button"),t.iconClass&&it(this.action,I2(`span.icon.${t.iconClass}`));const r=it(this.action,I2("span"));r.textContent=i?`${t.label} (${i})`:t.label,this._store.add(new y_e(this.actionContainer,t.run)),this._store.add(new C_e(this.actionContainer,t.run,[3,10])),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function w_e(n,e){return n&&e?C("acessibleViewHint","Inspect this in the accessible view with {0}.",e):n?C("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}class y_e extends xe{constructor(e,t){super(),this._register(we(e,Be.CLICK,i=>{i.stopPropagation(),i.preventDefault(),t(e)}))}}class C_e extends xe{constructor(e,t,i){super(),this._register(we(e,Be.KEY_DOWN,r=>{const s=new en(r);i.some(o=>s.equals(o))&&(r.stopPropagation(),r.preventDefault(),t(e))}))}}const Py=ai("openerService");function S_e(n){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(n.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},n=n.with({fragment:""})),{selection:e,uri:n}}class Zt{get event(){return this.emitter.event}constructor(e,t,i){const r=s=>this.emitter.fire(s);this.emitter=new de({onWillAddFirstListener:()=>e.addEventListener(t,r,i),onDidRemoveLastListener:()=>e.removeEventListener(t,r,i)})}dispose(){this.emitter.dispose()}}function x_e(n,e={}){const t=BA(e);return t.textContent=n,t}function k_e(n,e={}){const t=BA(e);return jZ(t,T_e(n,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function BA(n){const e=n.inline?"span":"div",t=document.createElement(e);return n.className&&(t.className=n.className),t}class L_e{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function jZ(n,e,t,i){let r;if(e.type===2)r=document.createTextNode(e.content||"");else if(e.type===3)r=document.createElement("b");else if(e.type===4)r=document.createElement("i");else if(e.type===7&&i)r=document.createElement("code");else if(e.type===5&&t){const s=document.createElement("a");t.disposables.add(Er(s,"click",o=>{t.callback(String(e.index),o)})),r=s}else e.type===8?r=document.createElement("br"):e.type===1&&(r=n);r&&n!==r&&n.appendChild(r),r&&Array.isArray(e.children)&&e.children.forEach(s=>{jZ(r,s,t,i)})}function T_e(n,e){const t={type:1,children:[]};let i=0,r=t;const s=[],o=new L_e(n);for(;!o.eos();){let a=o.next();const l=a==="\\"&&j8(o.peek(),e)!==0;if(l&&(a=o.next()),!l&&D_e(a,e)&&a===o.peek()){o.advance(),r.type===2&&(r=s.pop());const c=j8(a,e);if(r.type===c||r.type===5&&c===6)r=s.pop();else{const h={type:c,children:[]};c===5&&(h.index=i,i++),r.children.push(h),s.push(r),r=h}}else if(a===`
`)r.type===2&&(r=s.pop()),r.children.push({type:8});else if(r.type!==2){const c={type:2,content:a};r.children.push(c),s.push(r),r=c}else r.content+=a}return r.type===2&&(r=s.pop()),t}function D_e(n,e){return j8(n,e)!==0}function j8(n,e){switch(n){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}const E_e=new RegExp(`(\\\\)?\\$\\((${gi.iconNameExpression}(?:${gi.iconModifierExpression})?)\\)`,"g");function tm(n){const e=new Array;let t,i=0,r=0;for(;(t=E_e.exec(n))!==null;){r=t.index||0,i<r&&e.push(n.substring(i,r)),i=(t.index||0)+t[0].length;const[,s,o]=t;e.push(s?`$(${o})`:tk({id:o}))}return i<n.length&&e.push(n.substring(i)),e}function tk(n){const e=ft("span");return e.classList.add(...gi.asClassNameArray(n)),e}function UZ(...n){return function(e,t){for(let i=0,r=n.length;i<r;i++){const s=n[i](e,t);if(s)return s}return null}}qZ.bind(void 0,!1);const ik=qZ.bind(void 0,!0);function qZ(n,e,t){if(!t||t.length<e.length)return null;let i;return n?i=ZM(t,e):i=t.indexOf(e)===0,i?e.length>0?[{start:0,end:e.length}]:[]:null}function I_e(n,e){const t=e.toLowerCase().indexOf(n.toLowerCase());return t===-1?null:[{start:t,end:t+n.length}]}function N_e(n,e){return U8(n.toLowerCase(),e.toLowerCase(),0,0)}function U8(n,e,t,i){if(t===n.length)return[];if(i===e.length)return null;if(n[t]===e[i]){let r=null;return(r=U8(n,e,t+1,i+1))?KZ({start:i,end:i+1},r):null}return U8(n,e,t,i+1)}function FA(n){return 97<=n&&n<=122}function S5(n){return 65<=n&&n<=90}function WA(n){return 48<=n&&n<=57}function M_e(n){return n===32||n===9||n===10||n===13}const A_e=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(n=>A_e.add(n.charCodeAt(0)));function GZ(n){return FA(n)||S5(n)||WA(n)}function KZ(n,e){return e.length===0?e=[n]:n.end===e[0].start?e[0].start=n.start:e.unshift(n),e}function YZ(n,e){for(let t=e;t<n.length;t++){const i=n.charCodeAt(t);if(S5(i)||WA(i)||t>0&&!GZ(n.charCodeAt(t-1)))return t}return n.length}function q8(n,e,t,i){if(t===n.length)return[];if(i===e.length)return null;if(n[t]!==e[i].toLowerCase())return null;{let r=null,s=i+1;for(r=q8(n,e,t+1,i+1);!r&&(s=YZ(e,s))<e.length;)r=q8(n,e,t+1,s),s++;return r===null?null:KZ({start:i,end:i+1},r)}}function R_e(n){let e=0,t=0,i=0,r=0,s=0;for(let h=0;h<n.length;h++)s=n.charCodeAt(h),S5(s)&&e++,FA(s)&&t++,GZ(s)&&i++,WA(s)&&r++;const o=e/n.length,a=t/n.length,l=i/n.length,c=r/n.length;return{upperPercent:o,lowerPercent:a,alphaPercent:l,numericPercent:c}}function P_e(n){const{upperPercent:e,lowerPercent:t}=n;return t===0&&e>.6}function O_e(n){const{upperPercent:e,lowerPercent:t,alphaPercent:i,numericPercent:r}=n;return t>.2&&e<.8&&i>.6&&r<.2}function B_e(n){let e=0,t=0,i=0,r=0;for(let s=0;s<n.length;s++)i=n.charCodeAt(s),S5(i)&&e++,FA(i)&&t++,M_e(i)&&r++;return(e===0||t===0)&&r===0?n.length<=30:e<=5}function ZZ(n,e){if(!e||(e=e.trim(),e.length===0)||!B_e(n))return null;e.length>60&&(e=e.substring(0,60));const t=R_e(e);if(!O_e(t)){if(!P_e(t))return null;e=e.toLowerCase()}let i=null,r=0;for(n=n.toLowerCase();r<e.length&&(i=q8(n,e,0,r))===null;)r=YZ(e,r+1);return i}const F_e=UZ(ik,ZZ,I_e),W_e=UZ(ik,ZZ,N_e),uV=new Iy(1e4);function dV(n,e,t=!1){if(typeof n!="string"||typeof e!="string")return null;let i=uV.get(n);i||(i=new RegExp(kfe(n),"i"),uV.set(n,i));const r=i.exec(e);return r?[{start:r.index,end:r.index+r[0].length}]:t?W_e(n,e):F_e(n,e)}function z_e(n,e){const t=JZ(n,n.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?H_e(t):null}function H_e(n){if(typeof n>"u")return[];const e=[],t=n[1];for(let i=n.length-1;i>1;i--){const r=n[i]+t,s=e[e.length-1];s&&s.end===r?s.end=r+1:e.push({start:r,end:r+1})}return e}const qd=128;function zA(){const n=[],e=[];for(let t=0;t<=qd;t++)e[t]=0;for(let t=0;t<=qd;t++)n.push(e.slice(0));return n}function XZ(n){const e=[];for(let t=0;t<=n;t++)e[t]=0;return e}const QZ=XZ(2*qd),G8=XZ(2*qd),Mh=zA(),Qf=zA(),N2=zA();function M2(n,e){if(e<0||e>=n.length)return!1;const t=n.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!tA(t)}}function fV(n,e){if(e<0||e>=n.length)return!1;switch(n.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function HS(n,e,t){return e[n]!==t[n]}function V_e(n,e,t,i,r,s,o=!1){for(;e<t&&r<s;)n[e]===i[r]&&(o&&(QZ[e]=r),e+=1),r+=1;return e===t}var $0;(function(n){n.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}n.isDefault=e})($0||($0={}));const zO=class zO{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}};zO.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};let K8=zO;function JZ(n,e,t,i,r,s,o=K8.default){const a=n.length>qd?qd:n.length,l=i.length>qd?qd:i.length;if(t>=a||s>=l||a-t>l-s||!V_e(e,t,a,r,s,l,!0))return;$_e(a,l,t,s,e,r);let c=1,h=1,u=t,d=s;const g=[!1];for(c=1,u=t;u<a;c++,u++){const y=QZ[u],k=G8[u],L=u+1<a?G8[u+1]:l;for(h=y-s+1,d=y;d<L;h++,d++){let T=Number.MIN_SAFE_INTEGER,N=!1;d<=k&&(T=j_e(n,e,u,t,i,r,d,l,s,Mh[c-1][h-1]===0,g));let D=0;T!==Number.MAX_SAFE_INTEGER&&(N=!0,D=T+Qf[c-1][h-1]);const O=d>y,B=O?Qf[c][h-1]+(Mh[c][h-1]>0?-5:0):0,G=d>y+1&&Mh[c][h-1]>0,H=G?Qf[c][h-2]+(Mh[c][h-2]>0?-5:0):0;if(G&&(!O||H>=B)&&(!N||H>=D))Qf[c][h]=H,N2[c][h]=3,Mh[c][h]=0;else if(O&&(!N||B>=D))Qf[c][h]=B,N2[c][h]=2,Mh[c][h]=0;else if(N)Qf[c][h]=D,N2[c][h]=1,Mh[c][h]=Mh[c-1][h-1]+1;else throw new Error("not possible")}}if(!g[0]&&!o.firstMatchCanBeWeak)return;c--,h--;const p=[Qf[c][h],s];let b=0,_=0;for(;c>=1;){let y=h;do{const k=N2[c][y];if(k===3)y=y-2;else if(k===2)y=y-1;else break}while(y>=1);b>1&&e[t+c-1]===r[s+h-1]&&!HS(y+s-1,i,r)&&b+1>Mh[c][y]&&(y=h),y===h?b++:b=1,_||(_=y),c--,h=y-1,p.push(h)}l-s===a&&o.boostFullMatch&&(p[0]+=2);const w=_-a;return p[0]-=w,p}function $_e(n,e,t,i,r,s){let o=n-1,a=e-1;for(;o>=t&&a>=i;)r[o]===s[a]&&(G8[o]=a,o--),a--}function j_e(n,e,t,i,r,s,o,a,l,c,h){if(e[t]!==s[o])return Number.MIN_SAFE_INTEGER;let u=1,d=!1;return o===t-i?u=n[t]===r[o]?7:5:HS(o,r,s)&&(o===0||!HS(o-1,r,s))?(u=n[t]===r[o]?7:5,d=!0):M2(s,o)&&(o===0||!M2(s,o-1))?u=5:(M2(s,o-1)||fV(s,o-1))&&(u=5,d=!0),u>1&&t===i&&(h[0]=!0),d||(d=HS(o,r,s)||M2(s,o-1)||fV(s,o-1)),t===i?o>l&&(u-=d?3:5):c?u+=d?2:0:u+=d?0:1,o+1===a&&(u-=d?3:5),u}const U_e="$(",HA=new RegExp(`\\$\\(${gi.iconNameExpression}(?:${gi.iconModifierExpression})?\\)`,"g"),q_e=new RegExp(`(\\\\)?${HA.source}`,"g");function G_e(n){return n.replace(q_e,(e,t)=>t?e:`\\${e}`)}const K_e=new RegExp(`\\\\${HA.source}`,"g");function Y_e(n){return n.replace(K_e,e=>`\\${e}`)}const Z_e=new RegExp(`(\\s)?(\\\\)?${HA.source}(\\s)?`,"g");function eX(n){return n.indexOf(U_e)===-1?n:n.replace(Z_e,(e,t,i,r)=>i?e:t||r||"")}function X_e(n){return n?n.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}const a6=new RegExp(`\\$\\(${gi.iconNameCharacter}+\\)`,"g");function j_(n){a6.lastIndex=0;let e="";const t=[];let i=0;for(;;){const r=a6.lastIndex,s=a6.exec(n),o=n.substring(r,s?.index);if(o.length>0){e+=o;for(let a=0;a<o.length;a++)t.push(i)}if(!s)break;i+=s[0].length}return{text:e,iconOffsets:t}}function l6(n,e,t=!1){const{text:i,iconOffsets:r}=e;if(!r||r.length===0)return dV(n,i,t);const s=QL(i," "),o=i.length-s.length,a=dV(n,s,t);if(a)for(const l of a){const c=r[l.start+o]+o;l.start+=c,l.end+=c}return a}function Ah(n){return Nx(n,!0)}class Q_e{constructor(e){this._ignorePathCasing=e}compare(e,t,i=!1){return e===t?0:HE(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===Vt.file)return R8(Ah(e),Ah(t),this._ignorePathCasing(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(mV(e.authority,t.authority))return R8(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return Ut.joinPath(e,...t)}basenameOrAuthority(e){return VA(e)||e.authority}basename(e){return Fn.basename(e.path)}extname(e){return Fn.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Vt.file?t=Ut.file(nfe(Ah(e))).path:(t=Fn.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Vt.file?t=Ut.file(FK(Ah(e))).path:t=Fn.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!mV(e.authority,t.authority))return;if(e.scheme===Vt.file){const s=ife(Ah(e),Ah(t));return Go?mZ(s):s}let i=e.path||"/";const r=t.path||"/";if(this._ignorePathCasing(e)){let s=0;for(const o=Math.min(i.length,r.length);s<o&&!(i.charCodeAt(s)!==r.charCodeAt(s)&&i.charAt(s).toLowerCase()!==r.charAt(s).toLowerCase());s++);i=r.substr(0,s)+i.substr(s)}return Fn.relative(i,r)}resolvePath(e,t){if(e.scheme===Vt.file){const i=Ut.file(tfe(Ah(e),t));return e.with({authority:i.authority,path:i.path})}return t=n1e(t),e.with({path:Fn.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&r0(e,t)}hasTrailingPathSeparator(e,t=rf){if(e.scheme===Vt.file){const i=Ah(e);return i.length>HH(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=rf){return pV(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=rf){let i=!1;if(e.scheme===Vt.file){const r=Ah(e);i=r!==void 0&&r.length===HH(r).length&&r[r.length-1]===t}else{t="/";const r=e.path;i=r.length===1&&r.charCodeAt(r.length-1)===47}return!i&&!pV(e,t)?e.with({path:e.path+"/"}):e}}const dn=new Q_e(()=>!1),J_e=dn.isEqual.bind(dn);dn.isEqualOrParent.bind(dn);dn.getComparisonKey.bind(dn);dn.basenameOrAuthority.bind(dn);const VA=dn.basename.bind(dn);dn.extname.bind(dn);const eve=dn.dirname.bind(dn);dn.joinPath.bind(dn);const tve=dn.normalizePath.bind(dn);dn.relativePath.bind(dn);const gV=dn.resolvePath.bind(dn);dn.isAbsolutePath.bind(dn);const mV=dn.isEqualAuthority.bind(dn),pV=dn.hasTrailingPathSeparator.bind(dn);dn.removeTrailingPathSeparator.bind(dn);dn.addTrailingPathSeparator.bind(dn);var nk;(function(n){n.META_DATA_LABEL="label",n.META_DATA_DESCRIPTION="description",n.META_DATA_SIZE="size",n.META_DATA_MIME="mime";function e(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,l]=o.split(":");a&&l&&i.set(a,l)});const s=t.path.substring(0,t.path.indexOf(";"));return s&&i.set(n.META_DATA_MIME,s),i}n.parseMetaData=e})(nk||(nk={}));class tX{constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw ZL("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=nve(this.supportThemeIcons?G_e(e):e).replace(/([ \t]+)/g,(i,r)=>"&nbsp;".repeat(r.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${rve(t,e)}
`,this}appendLink(e,t,i){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),i&&(this.value+=` "${this._escape(this._escape(i,'"'),")")}"`),this.value+=")",this}_escape(e,t){const i=new RegExp(Ou(t),"g");return e.replace(i,(r,s)=>e.charAt(s-1)!=="\\"?`\\${r}`:r)}}function j0(n){return n instanceof tX?!0:n&&typeof n=="object"?typeof n.value=="string"&&(typeof n.isTrusted=="boolean"||typeof n.isTrusted=="object"||n.isTrusted===void 0)&&(typeof n.supportThemeIcons=="boolean"||n.supportThemeIcons===void 0):!1}function ive(n,e){return n===e?!0:!n||!e?!1:n.value===e.value&&n.isTrusted===e.isTrusted&&n.supportThemeIcons===e.supportThemeIcons&&n.supportHtml===e.supportHtml&&(n.baseUri===e.baseUri||!!n.baseUri&&!!e.baseUri&&J_e(Ut.from(n.baseUri),Ut.from(e.baseUri)))}function nve(n){return n.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function rve(n,e){const t=n.match(/^`+/gm)?.reduce((r,s)=>r.length>s.length?r:s).length??0,i=t>=3?t+1:3;return[`${"`".repeat(i)}${e}`,n,`${"`".repeat(i)}`].join(`
`)}function A2(n){return n.replace(/"/g,"&quot;")}function c6(n){return n&&n.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function sve(n){const e=[],t=n.split("|").map(r=>r.trim());n=t[0];const i=t[1];if(i){const r=/height=(\d+)/.exec(i),s=/width=(\d+)/.exec(i),o=r?r[1]:"",a=s?s[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(o));l&&e.push(`width="${a}"`),c&&e.push(`height="${o}"`)}return{href:n,dimensions:e}}class iX{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const bV=new iX("id#");let ws={};(function(){function n(e,t){t(ws)}n.amd=!0,function(e,t){typeof n=="function"&&n.amd?n(["exports"],t):typeof exports=="object"&&typeof module<"u"?t(exports):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}e.defaults=t();function i(At){e.defaults=At}const r=/[&<>"']/,s=new RegExp(r.source,"g"),o=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(o.source,"g"),l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=At=>l[At];function h(At,K){if(K){if(r.test(At))return At.replace(s,c)}else if(o.test(At))return At.replace(a,c);return At}const u=/(^|[^\[])\^/g;function d(At,K){let ee=typeof At=="string"?At:At.source;K=K||"";const re={replace:(F,j)=>{let ne=typeof j=="string"?j:j.source;return ne=ne.replace(u,"$1"),ee=ee.replace(F,ne),re},getRegex:()=>new RegExp(ee,K)};return re}function g(At){try{At=encodeURI(At).replace(/%25/g,"%")}catch{return null}return At}const p={exec:()=>null};function b(At,K){const ee=At.replace(/\|/g,(j,ne,he)=>{let Ce=!1,Re=ne;for(;--Re>=0&&he[Re]==="\\";)Ce=!Ce;return Ce?"|":" |"}),re=ee.split(/ \|/);let F=0;if(re[0].trim()||re.shift(),re.length>0&&!re[re.length-1].trim()&&re.pop(),K)if(re.length>K)re.splice(K);else for(;re.length<K;)re.push("");for(;F<re.length;F++)re[F]=re[F].trim().replace(/\\\|/g,"|");return re}function _(At,K,ee){const re=At.length;if(re===0)return"";let F=0;for(;F<re&&At.charAt(re-F-1)===K;)F++;return At.slice(0,re-F)}function w(At,K){if(At.indexOf(K[1])===-1)return-1;let ee=0;for(let re=0;re<At.length;re++)if(At[re]==="\\")re++;else if(At[re]===K[0])ee++;else if(At[re]===K[1]&&(ee--,ee<0))return re;return-1}function y(At,K,ee,re){const F=K.href,j=K.title?h(K.title):null,ne=At[1].replace(/\\([\[\]])/g,"$1");if(At[0].charAt(0)!=="!"){re.state.inLink=!0;const he={type:"link",raw:ee,href:F,title:j,text:ne,tokens:re.inlineTokens(ne)};return re.state.inLink=!1,he}return{type:"image",raw:ee,href:F,title:j,text:h(ne)}}function k(At,K){const ee=At.match(/^(\s+)(?:```)/);if(ee===null)return K;const re=ee[1];return K.split(`
`).map(F=>{const j=F.match(/^\s+/);if(j===null)return F;const[ne]=j;return ne.length>=re.length?F.slice(re.length):F}).join(`
`)}class L{options;rules;lexer;constructor(K){this.options=K||e.defaults}space(K){const ee=this.rules.block.newline.exec(K);if(ee&&ee[0].length>0)return{type:"space",raw:ee[0]}}code(K){const ee=this.rules.block.code.exec(K);if(ee){const re=ee[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:ee[0],codeBlockStyle:"indented",text:this.options.pedantic?re:_(re,`
`)}}}fences(K){const ee=this.rules.block.fences.exec(K);if(ee){const re=ee[0],F=k(re,ee[3]||"");return{type:"code",raw:re,lang:ee[2]?ee[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):ee[2],text:F}}}heading(K){const ee=this.rules.block.heading.exec(K);if(ee){let re=ee[2].trim();if(/#$/.test(re)){const F=_(re,"#");(this.options.pedantic||!F||/ $/.test(F))&&(re=F.trim())}return{type:"heading",raw:ee[0],depth:ee[1].length,text:re,tokens:this.lexer.inline(re)}}}hr(K){const ee=this.rules.block.hr.exec(K);if(ee)return{type:"hr",raw:_(ee[0],`
`)}}blockquote(K){const ee=this.rules.block.blockquote.exec(K);if(ee){let re=_(ee[0],`
`).split(`
`),F="",j="";const ne=[];for(;re.length>0;){let he=!1;const Ce=[];let Re;for(Re=0;Re<re.length;Re++)if(/^ {0,3}>/.test(re[Re]))Ce.push(re[Re]),he=!0;else if(!he)Ce.push(re[Re]);else break;re=re.slice(Re);const Ve=Ce.join(`
`),$e=Ve.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");F=F?`${F}
${Ve}`:Ve,j=j?`${j}
${$e}`:$e;const He=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens($e,ne,!0),this.lexer.state.top=He,re.length===0)break;const tt=ne[ne.length-1];if(tt?.type==="code")break;if(tt?.type==="blockquote"){const Ke=tt,xt=Ke.raw+`
`+re.join(`
`),jt=this.blockquote(xt);ne[ne.length-1]=jt,F=F.substring(0,F.length-Ke.raw.length)+jt.raw,j=j.substring(0,j.length-Ke.text.length)+jt.text;break}else if(tt?.type==="list"){const Ke=tt,xt=Ke.raw+`
`+re.join(`
`),jt=this.list(xt);ne[ne.length-1]=jt,F=F.substring(0,F.length-tt.raw.length)+jt.raw,j=j.substring(0,j.length-Ke.raw.length)+jt.raw,re=xt.substring(ne[ne.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:F,tokens:ne,text:j}}}list(K){let ee=this.rules.block.list.exec(K);if(ee){let re=ee[1].trim();const F=re.length>1,j={type:"list",raw:"",ordered:F,start:F?+re.slice(0,-1):"",loose:!1,items:[]};re=F?`\\d{1,9}\\${re.slice(-1)}`:`\\${re}`,this.options.pedantic&&(re=F?re:"[*+-]");const ne=new RegExp(`^( {0,3}${re})((?:[	 ][^\\n]*)?(?:\\n|$))`);let he=!1;for(;K;){let Ce=!1,Re="",Ve="";if(!(ee=ne.exec(K))||this.rules.block.hr.test(K))break;Re=ee[0],K=K.substring(Re.length);let $e=ee[2].split(`
`,1)[0].replace(/^\t+/,An=>" ".repeat(3*An.length)),He=K.split(`
`,1)[0],tt=!$e.trim(),Ke=0;if(this.options.pedantic?(Ke=2,Ve=$e.trimStart()):tt?Ke=ee[1].length+1:(Ke=ee[2].search(/[^ ]/),Ke=Ke>4?1:Ke,Ve=$e.slice(Ke),Ke+=ee[1].length),tt&&/^ *$/.test(He)&&(Re+=He+`
`,K=K.substring(He.length+1),Ce=!0),!Ce){const An=new RegExp(`^ {0,${Math.min(3,Ke-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),Ne=new RegExp(`^ {0,${Math.min(3,Ke-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),W=new RegExp(`^ {0,${Math.min(3,Ke-1)}}(?:\`\`\`|~~~)`),pe=new RegExp(`^ {0,${Math.min(3,Ke-1)}}#`);for(;K;){const Ae=K.split(`
`,1)[0];if(He=Ae,this.options.pedantic&&(He=He.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),W.test(He)||pe.test(He)||An.test(He)||Ne.test(K))break;if(He.search(/[^ ]/)>=Ke||!He.trim())Ve+=`
`+He.slice(Ke);else{if(tt||$e.search(/[^ ]/)>=4||W.test($e)||pe.test($e)||Ne.test($e))break;Ve+=`
`+He}!tt&&!He.trim()&&(tt=!0),Re+=Ae+`
`,K=K.substring(Ae.length+1),$e=He.slice(Ke)}}j.loose||(he?j.loose=!0:/\n *\n *$/.test(Re)&&(he=!0));let xt=null,jt;this.options.gfm&&(xt=/^\[[ xX]\] /.exec(Ve),xt&&(jt=xt[0]!=="[ ] ",Ve=Ve.replace(/^\[[ xX]\] +/,""))),j.items.push({type:"list_item",raw:Re,task:!!xt,checked:jt,loose:!1,text:Ve,tokens:[]}),j.raw+=Re}j.items[j.items.length-1].raw=j.items[j.items.length-1].raw.trimEnd(),j.items[j.items.length-1].text=j.items[j.items.length-1].text.trimEnd(),j.raw=j.raw.trimEnd();for(let Ce=0;Ce<j.items.length;Ce++)if(this.lexer.state.top=!1,j.items[Ce].tokens=this.lexer.blockTokens(j.items[Ce].text,[]),!j.loose){const Re=j.items[Ce].tokens.filter($e=>$e.type==="space"),Ve=Re.length>0&&Re.some($e=>/\n.*\n/.test($e.raw));j.loose=Ve}if(j.loose)for(let Ce=0;Ce<j.items.length;Ce++)j.items[Ce].loose=!0;return j}}html(K){const ee=this.rules.block.html.exec(K);if(ee)return{type:"html",block:!0,raw:ee[0],pre:ee[1]==="pre"||ee[1]==="script"||ee[1]==="style",text:ee[0]}}def(K){const ee=this.rules.block.def.exec(K);if(ee){const re=ee[1].toLowerCase().replace(/\s+/g," "),F=ee[2]?ee[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",j=ee[3]?ee[3].substring(1,ee[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):ee[3];return{type:"def",tag:re,raw:ee[0],href:F,title:j}}}table(K){const ee=this.rules.block.table.exec(K);if(!ee||!/[:|]/.test(ee[2]))return;const re=b(ee[1]),F=ee[2].replace(/^\||\| *$/g,"").split("|"),j=ee[3]&&ee[3].trim()?ee[3].replace(/\n[ \t]*$/,"").split(`
`):[],ne={type:"table",raw:ee[0],header:[],align:[],rows:[]};if(re.length===F.length){for(const he of F)/^ *-+: *$/.test(he)?ne.align.push("right"):/^ *:-+: *$/.test(he)?ne.align.push("center"):/^ *:-+ *$/.test(he)?ne.align.push("left"):ne.align.push(null);for(let he=0;he<re.length;he++)ne.header.push({text:re[he],tokens:this.lexer.inline(re[he]),header:!0,align:ne.align[he]});for(const he of j)ne.rows.push(b(he,ne.header.length).map((Ce,Re)=>({text:Ce,tokens:this.lexer.inline(Ce),header:!1,align:ne.align[Re]})));return ne}}lheading(K){const ee=this.rules.block.lheading.exec(K);if(ee)return{type:"heading",raw:ee[0],depth:ee[2].charAt(0)==="="?1:2,text:ee[1],tokens:this.lexer.inline(ee[1])}}paragraph(K){const ee=this.rules.block.paragraph.exec(K);if(ee){const re=ee[1].charAt(ee[1].length-1)===`
`?ee[1].slice(0,-1):ee[1];return{type:"paragraph",raw:ee[0],text:re,tokens:this.lexer.inline(re)}}}text(K){const ee=this.rules.block.text.exec(K);if(ee)return{type:"text",raw:ee[0],text:ee[0],tokens:this.lexer.inline(ee[0])}}escape(K){const ee=this.rules.inline.escape.exec(K);if(ee)return{type:"escape",raw:ee[0],text:h(ee[1])}}tag(K){const ee=this.rules.inline.tag.exec(K);if(ee)return!this.lexer.state.inLink&&/^<a /i.test(ee[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(ee[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(ee[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(ee[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:ee[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:ee[0]}}link(K){const ee=this.rules.inline.link.exec(K);if(ee){const re=ee[2].trim();if(!this.options.pedantic&&/^</.test(re)){if(!/>$/.test(re))return;const ne=_(re.slice(0,-1),"\\");if((re.length-ne.length)%2===0)return}else{const ne=w(ee[2],"()");if(ne>-1){const Ce=(ee[0].indexOf("!")===0?5:4)+ee[1].length+ne;ee[2]=ee[2].substring(0,ne),ee[0]=ee[0].substring(0,Ce).trim(),ee[3]=""}}let F=ee[2],j="";if(this.options.pedantic){const ne=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(F);ne&&(F=ne[1],j=ne[3])}else j=ee[3]?ee[3].slice(1,-1):"";return F=F.trim(),/^</.test(F)&&(this.options.pedantic&&!/>$/.test(re)?F=F.slice(1):F=F.slice(1,-1)),y(ee,{href:F&&F.replace(this.rules.inline.anyPunctuation,"$1"),title:j&&j.replace(this.rules.inline.anyPunctuation,"$1")},ee[0],this.lexer)}}reflink(K,ee){let re;if((re=this.rules.inline.reflink.exec(K))||(re=this.rules.inline.nolink.exec(K))){const F=(re[2]||re[1]).replace(/\s+/g," "),j=ee[F.toLowerCase()];if(!j){const ne=re[0].charAt(0);return{type:"text",raw:ne,text:ne}}return y(re,j,re[0],this.lexer)}}emStrong(K,ee,re=""){let F=this.rules.inline.emStrongLDelim.exec(K);if(!F||F[3]&&re.match(/[\p{L}\p{N}]/u))return;if(!(F[1]||F[2]||"")||!re||this.rules.inline.punctuation.exec(re)){const ne=[...F[0]].length-1;let he,Ce,Re=ne,Ve=0;const $e=F[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for($e.lastIndex=0,ee=ee.slice(-1*K.length+ne);(F=$e.exec(ee))!=null;){if(he=F[1]||F[2]||F[3]||F[4]||F[5]||F[6],!he)continue;if(Ce=[...he].length,F[3]||F[4]){Re+=Ce;continue}else if((F[5]||F[6])&&ne%3&&!((ne+Ce)%3)){Ve+=Ce;continue}if(Re-=Ce,Re>0)continue;Ce=Math.min(Ce,Ce+Re+Ve);const He=[...F[0]][0].length,tt=K.slice(0,ne+F.index+He+Ce);if(Math.min(ne,Ce)%2){const xt=tt.slice(1,-1);return{type:"em",raw:tt,text:xt,tokens:this.lexer.inlineTokens(xt)}}const Ke=tt.slice(2,-2);return{type:"strong",raw:tt,text:Ke,tokens:this.lexer.inlineTokens(Ke)}}}}codespan(K){const ee=this.rules.inline.code.exec(K);if(ee){let re=ee[2].replace(/\n/g," ");const F=/[^ ]/.test(re),j=/^ /.test(re)&&/ $/.test(re);return F&&j&&(re=re.substring(1,re.length-1)),re=h(re,!0),{type:"codespan",raw:ee[0],text:re}}}br(K){const ee=this.rules.inline.br.exec(K);if(ee)return{type:"br",raw:ee[0]}}del(K){const ee=this.rules.inline.del.exec(K);if(ee)return{type:"del",raw:ee[0],text:ee[2],tokens:this.lexer.inlineTokens(ee[2])}}autolink(K){const ee=this.rules.inline.autolink.exec(K);if(ee){let re,F;return ee[2]==="@"?(re=h(ee[1]),F="mailto:"+re):(re=h(ee[1]),F=re),{type:"link",raw:ee[0],text:re,href:F,tokens:[{type:"text",raw:re,text:re}]}}}url(K){let ee;if(ee=this.rules.inline.url.exec(K)){let re,F;if(ee[2]==="@")re=h(ee[0]),F="mailto:"+re;else{let j;do j=ee[0],ee[0]=this.rules.inline._backpedal.exec(ee[0])?.[0]??"";while(j!==ee[0]);re=h(ee[0]),ee[1]==="www."?F="http://"+ee[0]:F=ee[0]}return{type:"link",raw:ee[0],text:re,href:F,tokens:[{type:"text",raw:re,text:re}]}}}inlineText(K){const ee=this.rules.inline.text.exec(K);if(ee){let re;return this.lexer.state.inRawBlock?re=ee[0]:re=h(ee[0]),{type:"text",raw:ee[0],text:re}}}}const T=/^(?: *(?:\n|$))+/,N=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,D=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,O=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,B=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,G=/(?:[*+-]|\d{1,9}[.)])/,H=d(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,G).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),q=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,X=/^[^\n]+/,z=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Q=d(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",z).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),te=d(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,G).getRegex(),se="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Y=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ae=d("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Y).replace("tag",se).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),fe=d(q).replace("hr",O).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",se).getRegex(),ge={blockquote:d(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",fe).getRegex(),code:N,def:Q,fences:D,heading:B,hr:O,html:ae,lheading:H,list:te,newline:T,paragraph:fe,table:p,text:X},Le=d("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",O).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",se).getRegex(),We={...ge,table:Le,paragraph:d(q).replace("hr",O).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Le).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",se).getRegex()},Ie={...ge,html:d(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Y).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:p,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:d(q).replace("hr",O).replace("heading",` *#{1,6} *[^
]`).replace("lheading",H).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Ze=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,ct=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ot=/^( {2,}|\\)\n(?!\s*$)/,Ot=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,$t="\\p{P}\\p{S}",yn=d(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,$t).getRegex(),vi=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,nn=d(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,$t).getRegex(),rn=d("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,$t).getRegex(),ss=d("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,$t).getRegex(),Vn=d(/\\([punct])/,"gu").replace(/punct/g,$t).getRegex(),Kn=d(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Nr=d(Y).replace("(?:-->|$)","-->").getRegex(),or=d("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Nr).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ys=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,eo=d(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",ys).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),el=d(/^!?\[(label)\]\[(ref)\]/).replace("label",ys).replace("ref",z).getRegex(),ko=d(/^!?\[(ref)\](?:\[\])?/).replace("ref",z).getRegex(),Jn=d("reflink|nolink(?!\\()","g").replace("reflink",el).replace("nolink",ko).getRegex(),$n={_backpedal:p,anyPunctuation:Vn,autolink:Kn,blockSkip:vi,br:ot,code:ct,del:p,emStrongLDelim:nn,emStrongRDelimAst:rn,emStrongRDelimUnd:ss,escape:Ze,link:eo,nolink:ko,punctuation:yn,reflink:el,reflinkSearch:Jn,tag:or,text:Ot,url:p},Mr={...$n,link:d(/^!?\[(label)\]\((.*?)\)/).replace("label",ys).getRegex(),reflink:d(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ys).getRegex()},Os={...$n,escape:d(Ze).replace("])","~|])").getRegex(),url:d(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Ar={...Os,br:d(ot).replace("{2,}","*").getRegex(),text:d(Os.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ar={normal:ge,gfm:We,pedantic:Ie},wr={normal:$n,gfm:Os,breaks:Ar,pedantic:Mr};class Ln{tokens;options;state;tokenizer;inlineQueue;constructor(K){this.tokens=[],this.tokens.links=Object.create(null),this.options=K||e.defaults,this.options.tokenizer=this.options.tokenizer||new L,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const ee={block:ar.normal,inline:wr.normal};this.options.pedantic?(ee.block=ar.pedantic,ee.inline=wr.pedantic):this.options.gfm&&(ee.block=ar.gfm,this.options.breaks?ee.inline=wr.breaks:ee.inline=wr.gfm),this.tokenizer.rules=ee}static get rules(){return{block:ar,inline:wr}}static lex(K,ee){return new Ln(ee).lex(K)}static lexInline(K,ee){return new Ln(ee).inlineTokens(K)}lex(K){K=K.replace(/\r\n|\r/g,`
`),this.blockTokens(K,this.tokens);for(let ee=0;ee<this.inlineQueue.length;ee++){const re=this.inlineQueue[ee];this.inlineTokens(re.src,re.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(K,ee=[],re=!1){this.options.pedantic?K=K.replace(/\t/g,"    ").replace(/^ +$/gm,""):K=K.replace(/^( *)(\t+)/gm,(he,Ce,Re)=>Ce+"    ".repeat(Re.length));let F,j,ne;for(;K;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(he=>(F=he.call({lexer:this},K,ee))?(K=K.substring(F.raw.length),ee.push(F),!0):!1))){if(F=this.tokenizer.space(K)){K=K.substring(F.raw.length),F.raw.length===1&&ee.length>0?ee[ee.length-1].raw+=`
`:ee.push(F);continue}if(F=this.tokenizer.code(K)){K=K.substring(F.raw.length),j=ee[ee.length-1],j&&(j.type==="paragraph"||j.type==="text")?(j.raw+=`
`+F.raw,j.text+=`
`+F.text,this.inlineQueue[this.inlineQueue.length-1].src=j.text):ee.push(F);continue}if(F=this.tokenizer.fences(K)){K=K.substring(F.raw.length),ee.push(F);continue}if(F=this.tokenizer.heading(K)){K=K.substring(F.raw.length),ee.push(F);continue}if(F=this.tokenizer.hr(K)){K=K.substring(F.raw.length),ee.push(F);continue}if(F=this.tokenizer.blockquote(K)){K=K.substring(F.raw.length),ee.push(F);continue}if(F=this.tokenizer.list(K)){K=K.substring(F.raw.length),ee.push(F);continue}if(F=this.tokenizer.html(K)){K=K.substring(F.raw.length),ee.push(F);continue}if(F=this.tokenizer.def(K)){K=K.substring(F.raw.length),j=ee[ee.length-1],j&&(j.type==="paragraph"||j.type==="text")?(j.raw+=`
`+F.raw,j.text+=`
`+F.raw,this.inlineQueue[this.inlineQueue.length-1].src=j.text):this.tokens.links[F.tag]||(this.tokens.links[F.tag]={href:F.href,title:F.title});continue}if(F=this.tokenizer.table(K)){K=K.substring(F.raw.length),ee.push(F);continue}if(F=this.tokenizer.lheading(K)){K=K.substring(F.raw.length),ee.push(F);continue}if(ne=K,this.options.extensions&&this.options.extensions.startBlock){let he=1/0;const Ce=K.slice(1);let Re;this.options.extensions.startBlock.forEach(Ve=>{Re=Ve.call({lexer:this},Ce),typeof Re=="number"&&Re>=0&&(he=Math.min(he,Re))}),he<1/0&&he>=0&&(ne=K.substring(0,he+1))}if(this.state.top&&(F=this.tokenizer.paragraph(ne))){j=ee[ee.length-1],re&&j?.type==="paragraph"?(j.raw+=`
`+F.raw,j.text+=`
`+F.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=j.text):ee.push(F),re=ne.length!==K.length,K=K.substring(F.raw.length);continue}if(F=this.tokenizer.text(K)){K=K.substring(F.raw.length),j=ee[ee.length-1],j&&j.type==="text"?(j.raw+=`
`+F.raw,j.text+=`
`+F.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=j.text):ee.push(F);continue}if(K){const he="Infinite loop on byte: "+K.charCodeAt(0);if(this.options.silent){console.error(he);break}else throw new Error(he)}}return this.state.top=!0,ee}inline(K,ee=[]){return this.inlineQueue.push({src:K,tokens:ee}),ee}inlineTokens(K,ee=[]){let re,F,j,ne=K,he,Ce,Re;if(this.tokens.links){const Ve=Object.keys(this.tokens.links);if(Ve.length>0)for(;(he=this.tokenizer.rules.inline.reflinkSearch.exec(ne))!=null;)Ve.includes(he[0].slice(he[0].lastIndexOf("[")+1,-1))&&(ne=ne.slice(0,he.index)+"["+"a".repeat(he[0].length-2)+"]"+ne.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(he=this.tokenizer.rules.inline.blockSkip.exec(ne))!=null;)ne=ne.slice(0,he.index)+"["+"a".repeat(he[0].length-2)+"]"+ne.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(he=this.tokenizer.rules.inline.anyPunctuation.exec(ne))!=null;)ne=ne.slice(0,he.index)+"++"+ne.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;K;)if(Ce||(Re=""),Ce=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(Ve=>(re=Ve.call({lexer:this},K,ee))?(K=K.substring(re.raw.length),ee.push(re),!0):!1))){if(re=this.tokenizer.escape(K)){K=K.substring(re.raw.length),ee.push(re);continue}if(re=this.tokenizer.tag(K)){K=K.substring(re.raw.length),F=ee[ee.length-1],F&&re.type==="text"&&F.type==="text"?(F.raw+=re.raw,F.text+=re.text):ee.push(re);continue}if(re=this.tokenizer.link(K)){K=K.substring(re.raw.length),ee.push(re);continue}if(re=this.tokenizer.reflink(K,this.tokens.links)){K=K.substring(re.raw.length),F=ee[ee.length-1],F&&re.type==="text"&&F.type==="text"?(F.raw+=re.raw,F.text+=re.text):ee.push(re);continue}if(re=this.tokenizer.emStrong(K,ne,Re)){K=K.substring(re.raw.length),ee.push(re);continue}if(re=this.tokenizer.codespan(K)){K=K.substring(re.raw.length),ee.push(re);continue}if(re=this.tokenizer.br(K)){K=K.substring(re.raw.length),ee.push(re);continue}if(re=this.tokenizer.del(K)){K=K.substring(re.raw.length),ee.push(re);continue}if(re=this.tokenizer.autolink(K)){K=K.substring(re.raw.length),ee.push(re);continue}if(!this.state.inLink&&(re=this.tokenizer.url(K))){K=K.substring(re.raw.length),ee.push(re);continue}if(j=K,this.options.extensions&&this.options.extensions.startInline){let Ve=1/0;const $e=K.slice(1);let He;this.options.extensions.startInline.forEach(tt=>{He=tt.call({lexer:this},$e),typeof He=="number"&&He>=0&&(Ve=Math.min(Ve,He))}),Ve<1/0&&Ve>=0&&(j=K.substring(0,Ve+1))}if(re=this.tokenizer.inlineText(j)){K=K.substring(re.raw.length),re.raw.slice(-1)!=="_"&&(Re=re.raw.slice(-1)),Ce=!0,F=ee[ee.length-1],F&&F.type==="text"?(F.raw+=re.raw,F.text+=re.text):ee.push(re);continue}if(K){const Ve="Infinite loop on byte: "+K.charCodeAt(0);if(this.options.silent){console.error(Ve);break}else throw new Error(Ve)}}return ee}}class os{options;parser;constructor(K){this.options=K||e.defaults}space(K){return""}code({text:K,lang:ee,escaped:re}){const F=(ee||"").match(/^\S*/)?.[0],j=K.replace(/\n$/,"")+`
`;return F?'<pre><code class="language-'+h(F)+'">'+(re?j:h(j,!0))+`</code></pre>
`:"<pre><code>"+(re?j:h(j,!0))+`</code></pre>
`}blockquote({tokens:K}){return`<blockquote>
${this.parser.parse(K)}</blockquote>
`}html({text:K}){return K}heading({tokens:K,depth:ee}){return`<h${ee}>${this.parser.parseInline(K)}</h${ee}>
`}hr(K){return`<hr>
`}list(K){const ee=K.ordered,re=K.start;let F="";for(let he=0;he<K.items.length;he++){const Ce=K.items[he];F+=this.listitem(Ce)}const j=ee?"ol":"ul",ne=ee&&re!==1?' start="'+re+'"':"";return"<"+j+ne+`>
`+F+"</"+j+`>
`}listitem(K){let ee="";if(K.task){const re=this.checkbox({checked:!!K.checked});K.loose?K.tokens.length>0&&K.tokens[0].type==="paragraph"?(K.tokens[0].text=re+" "+K.tokens[0].text,K.tokens[0].tokens&&K.tokens[0].tokens.length>0&&K.tokens[0].tokens[0].type==="text"&&(K.tokens[0].tokens[0].text=re+" "+K.tokens[0].tokens[0].text)):K.tokens.unshift({type:"text",raw:re+" ",text:re+" "}):ee+=re+" "}return ee+=this.parser.parse(K.tokens,!!K.loose),`<li>${ee}</li>
`}checkbox({checked:K}){return"<input "+(K?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:K}){return`<p>${this.parser.parseInline(K)}</p>
`}table(K){let ee="",re="";for(let j=0;j<K.header.length;j++)re+=this.tablecell(K.header[j]);ee+=this.tablerow({text:re});let F="";for(let j=0;j<K.rows.length;j++){const ne=K.rows[j];re="";for(let he=0;he<ne.length;he++)re+=this.tablecell(ne[he]);F+=this.tablerow({text:re})}return F&&(F=`<tbody>${F}</tbody>`),`<table>
<thead>
`+ee+`</thead>
`+F+`</table>
`}tablerow({text:K}){return`<tr>
${K}</tr>
`}tablecell(K){const ee=this.parser.parseInline(K.tokens),re=K.header?"th":"td";return(K.align?`<${re} align="${K.align}">`:`<${re}>`)+ee+`</${re}>
`}strong({tokens:K}){return`<strong>${this.parser.parseInline(K)}</strong>`}em({tokens:K}){return`<em>${this.parser.parseInline(K)}</em>`}codespan({text:K}){return`<code>${K}</code>`}br(K){return"<br>"}del({tokens:K}){return`<del>${this.parser.parseInline(K)}</del>`}link({href:K,title:ee,tokens:re}){const F=this.parser.parseInline(re),j=g(K);if(j===null)return F;K=j;let ne='<a href="'+K+'"';return ee&&(ne+=' title="'+ee+'"'),ne+=">"+F+"</a>",ne}image({href:K,title:ee,text:re}){const F=g(K);if(F===null)return re;K=F;let j=`<img src="${K}" alt="${re}"`;return ee&&(j+=` title="${ee}"`),j+=">",j}text(K){return"tokens"in K&&K.tokens?this.parser.parseInline(K.tokens):K.text}}class jn{strong({text:K}){return K}em({text:K}){return K}codespan({text:K}){return K}del({text:K}){return K}html({text:K}){return K}text({text:K}){return K}link({text:K}){return""+K}image({text:K}){return""+K}br(){return""}}class Ai{options;renderer;textRenderer;constructor(K){this.options=K||e.defaults,this.options.renderer=this.options.renderer||new os,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new jn}static parse(K,ee){return new Ai(ee).parse(K)}static parseInline(K,ee){return new Ai(ee).parseInline(K)}parse(K,ee=!0){let re="";for(let F=0;F<K.length;F++){const j=K[F];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[j.type]){const he=j,Ce=this.options.extensions.renderers[he.type].call({parser:this},he);if(Ce!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(he.type)){re+=Ce||"";continue}}const ne=j;switch(ne.type){case"space":{re+=this.renderer.space(ne);continue}case"hr":{re+=this.renderer.hr(ne);continue}case"heading":{re+=this.renderer.heading(ne);continue}case"code":{re+=this.renderer.code(ne);continue}case"table":{re+=this.renderer.table(ne);continue}case"blockquote":{re+=this.renderer.blockquote(ne);continue}case"list":{re+=this.renderer.list(ne);continue}case"html":{re+=this.renderer.html(ne);continue}case"paragraph":{re+=this.renderer.paragraph(ne);continue}case"text":{let he=ne,Ce=this.renderer.text(he);for(;F+1<K.length&&K[F+1].type==="text";)he=K[++F],Ce+=`
`+this.renderer.text(he);ee?re+=this.renderer.paragraph({type:"paragraph",raw:Ce,text:Ce,tokens:[{type:"text",raw:Ce,text:Ce}]}):re+=Ce;continue}default:{const he='Token with "'+ne.type+'" type was not found.';if(this.options.silent)return console.error(he),"";throw new Error(he)}}}return re}parseInline(K,ee){ee=ee||this.renderer;let re="";for(let F=0;F<K.length;F++){const j=K[F];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[j.type]){const he=this.options.extensions.renderers[j.type].call({parser:this},j);if(he!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(j.type)){re+=he||"";continue}}const ne=j;switch(ne.type){case"escape":{re+=ee.text(ne);break}case"html":{re+=ee.html(ne);break}case"link":{re+=ee.link(ne);break}case"image":{re+=ee.image(ne);break}case"strong":{re+=ee.strong(ne);break}case"em":{re+=ee.em(ne);break}case"codespan":{re+=ee.codespan(ne);break}case"br":{re+=ee.br(ne);break}case"del":{re+=ee.del(ne);break}case"text":{re+=ee.text(ne);break}default:{const he='Token with "'+ne.type+'" type was not found.';if(this.options.silent)return console.error(he),"";throw new Error(he)}}}return re}}class er{options;constructor(K){this.options=K||e.defaults}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(K){return K}postprocess(K){return K}processAllTokens(K){return K}}class Bs{defaults=t();options=this.setOptions;parse=this.parseMarkdown(Ln.lex,Ai.parse);parseInline=this.parseMarkdown(Ln.lexInline,Ai.parseInline);Parser=Ai;Renderer=os;TextRenderer=jn;Lexer=Ln;Tokenizer=L;Hooks=er;constructor(...K){this.use(...K)}walkTokens(K,ee){let re=[];for(const F of K)switch(re=re.concat(ee.call(this,F)),F.type){case"table":{const j=F;for(const ne of j.header)re=re.concat(this.walkTokens(ne.tokens,ee));for(const ne of j.rows)for(const he of ne)re=re.concat(this.walkTokens(he.tokens,ee));break}case"list":{const j=F;re=re.concat(this.walkTokens(j.items,ee));break}default:{const j=F;this.defaults.extensions?.childTokens?.[j.type]?this.defaults.extensions.childTokens[j.type].forEach(ne=>{const he=j[ne].flat(1/0);re=re.concat(this.walkTokens(he,ee))}):j.tokens&&(re=re.concat(this.walkTokens(j.tokens,ee)))}}return re}use(...K){const ee=this.defaults.extensions||{renderers:{},childTokens:{}};return K.forEach(re=>{const F={...re};if(F.async=this.defaults.async||F.async||!1,re.extensions&&(re.extensions.forEach(j=>{if(!j.name)throw new Error("extension name required");if("renderer"in j){const ne=ee.renderers[j.name];ne?ee.renderers[j.name]=function(...he){let Ce=j.renderer.apply(this,he);return Ce===!1&&(Ce=ne.apply(this,he)),Ce}:ee.renderers[j.name]=j.renderer}if("tokenizer"in j){if(!j.level||j.level!=="block"&&j.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const ne=ee[j.level];ne?ne.unshift(j.tokenizer):ee[j.level]=[j.tokenizer],j.start&&(j.level==="block"?ee.startBlock?ee.startBlock.push(j.start):ee.startBlock=[j.start]:j.level==="inline"&&(ee.startInline?ee.startInline.push(j.start):ee.startInline=[j.start]))}"childTokens"in j&&j.childTokens&&(ee.childTokens[j.name]=j.childTokens)}),F.extensions=ee),re.renderer){const j=this.defaults.renderer||new os(this.defaults);for(const ne in re.renderer){if(!(ne in j))throw new Error(`renderer '${ne}' does not exist`);if(["options","parser"].includes(ne))continue;const he=ne,Ce=re.renderer[he],Re=j[he];j[he]=(...Ve)=>{let $e=Ce.apply(j,Ve);return $e===!1&&($e=Re.apply(j,Ve)),$e||""}}F.renderer=j}if(re.tokenizer){const j=this.defaults.tokenizer||new L(this.defaults);for(const ne in re.tokenizer){if(!(ne in j))throw new Error(`tokenizer '${ne}' does not exist`);if(["options","rules","lexer"].includes(ne))continue;const he=ne,Ce=re.tokenizer[he],Re=j[he];j[he]=(...Ve)=>{let $e=Ce.apply(j,Ve);return $e===!1&&($e=Re.apply(j,Ve)),$e}}F.tokenizer=j}if(re.hooks){const j=this.defaults.hooks||new er;for(const ne in re.hooks){if(!(ne in j))throw new Error(`hook '${ne}' does not exist`);if(ne==="options")continue;const he=ne,Ce=re.hooks[he],Re=j[he];er.passThroughHooks.has(ne)?j[he]=Ve=>{if(this.defaults.async)return Promise.resolve(Ce.call(j,Ve)).then(He=>Re.call(j,He));const $e=Ce.call(j,Ve);return Re.call(j,$e)}:j[he]=(...Ve)=>{let $e=Ce.apply(j,Ve);return $e===!1&&($e=Re.apply(j,Ve)),$e}}F.hooks=j}if(re.walkTokens){const j=this.defaults.walkTokens,ne=re.walkTokens;F.walkTokens=function(he){let Ce=[];return Ce.push(ne.call(this,he)),j&&(Ce=Ce.concat(j.call(this,he))),Ce}}this.defaults={...this.defaults,...F}}),this}setOptions(K){return this.defaults={...this.defaults,...K},this}lexer(K,ee){return Ln.lex(K,ee??this.defaults)}parser(K,ee){return Ai.parse(K,ee??this.defaults)}parseMarkdown(K,ee){return(F,j)=>{const ne={...j},he={...this.defaults,...ne},Ce=this.onError(!!he.silent,!!he.async);if(this.defaults.async===!0&&ne.async===!1)return Ce(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof F>"u"||F===null)return Ce(new Error("marked(): input parameter is undefined or null"));if(typeof F!="string")return Ce(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(F)+", string expected"));if(he.hooks&&(he.hooks.options=he),he.async)return Promise.resolve(he.hooks?he.hooks.preprocess(F):F).then(Re=>K(Re,he)).then(Re=>he.hooks?he.hooks.processAllTokens(Re):Re).then(Re=>he.walkTokens?Promise.all(this.walkTokens(Re,he.walkTokens)).then(()=>Re):Re).then(Re=>ee(Re,he)).then(Re=>he.hooks?he.hooks.postprocess(Re):Re).catch(Ce);try{he.hooks&&(F=he.hooks.preprocess(F));let Re=K(F,he);he.hooks&&(Re=he.hooks.processAllTokens(Re)),he.walkTokens&&this.walkTokens(Re,he.walkTokens);let Ve=ee(Re,he);return he.hooks&&(Ve=he.hooks.postprocess(Ve)),Ve}catch(Re){return Ce(Re)}}}onError(K,ee){return re=>{if(re.message+=`
Please report this to https://github.com/markedjs/marked.`,K){const F="<p>An error occurred:</p><pre>"+h(re.message+"",!0)+"</pre>";return ee?Promise.resolve(F):F}if(ee)return Promise.reject(re);throw re}}}const Rr=new Bs;function xi(At,K){return Rr.parse(At,K)}xi.options=xi.setOptions=function(At){return Rr.setOptions(At),xi.defaults=Rr.defaults,i(xi.defaults),xi},xi.getDefaults=t,xi.defaults=e.defaults,xi.use=function(...At){return Rr.use(...At),xi.defaults=Rr.defaults,i(xi.defaults),xi},xi.walkTokens=function(At,K){return Rr.walkTokens(At,K)},xi.parseInline=Rr.parseInline,xi.Parser=Ai,xi.parser=Ai.parse,xi.Renderer=os,xi.TextRenderer=jn,xi.Lexer=Ln,xi.lexer=Ln.lex,xi.Tokenizer=L,xi.Hooks=er,xi.parse=xi;const Pr=xi.options,Lo=xi.setOptions,to=xi.use,Ri=xi.walkTokens,To=xi.parseInline,Rl=xi,Tn=Ai.parse,Cs=Ln.lex;e.Hooks=er,e.Lexer=Ln,e.Marked=Bs,e.Parser=Ai,e.Renderer=os,e.TextRenderer=jn,e.Tokenizer=L,e.getDefaults=t,e.lexer=Cs,e.marked=xi,e.options=Pr,e.parse=Rl,e.parseInline=To,e.parser=Tn,e.setOptions=Lo,e.use=to,e.walkTokens=Ri})})();ws.Hooks||exports.Hooks;ws.Lexer||exports.Lexer;ws.Marked||exports.Marked;ws.Parser||exports.Parser;var nX=ws.Renderer||exports.Renderer;ws.TextRenderer||exports.TextRenderer;ws.Tokenizer||exports.Tokenizer;var ove=ws.defaults||exports.defaults;ws.getDefaults||exports.getDefaults;var x5=ws.lexer||exports.lexer;ws.marked||exports.marked;ws.options||exports.options;var rX=ws.parse||exports.parse;ws.parseInline||exports.parseInline;var ave=ws.parser||exports.parser;ws.setOptions||exports.setOptions;ws.use||exports.use;ws.walkTokens||exports.walkTokens;function lve(n){return JSON.stringify(n,cve)}function Y8(n){let e=JSON.parse(n);return e=Z8(e),e}function cve(n,e){return e instanceof RegExp?{$mid:2,source:e.source,flags:e.flags}:e}function Z8(n,e=0){if(!n||e>200)return n;if(typeof n=="object"){switch(n.$mid){case 1:return Ut.revive(n);case 2:return new RegExp(n.source,n.flags);case 17:return new Date(n.source)}if(n instanceof vA||n instanceof Uint8Array)return n;if(Array.isArray(n))for(let t=0;t<n.length;++t)n[t]=Z8(n[t],e+1);else for(const t in n)Object.hasOwnProperty.call(n,t)&&(n[t]=Z8(n[t],e+1))}return n}const h6=Object.freeze({image:({href:n,title:e,text:t})=>{let i=[],r=[];return n&&({href:n,dimensions:i}=sve(n),r.push(`src="${A2(n)}"`)),t&&r.push(`alt="${A2(t)}"`),e&&r.push(`title="${A2(e)}"`),i.length&&(r=r.concat(i)),"<img "+r.join(" ")+">"},paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>`},link({href:n,title:e,tokens:t}){let i=this.parser.parseInline(t);return typeof n!="string"?"":(n===i&&(i=c6(i)),e=typeof e=="string"?A2(c6(e)):"",n=c6(n),n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${n}" title="${e||n}" draggable="false">${i}</a>`)}});function $A(n,e={},t={}){const i=new rt;let r=!1;const s=BA(e),o=function(b){let _;try{_=Y8(decodeURIComponent(b))}catch{}return _?(_=vK(_,w=>{if(n.uris&&n.uris[w])return Ut.revive(n.uris[w])}),encodeURIComponent(JSON.stringify(_))):b},a=function(b,_){const w=n.uris&&n.uris[b];let y=Ut.revive(w);return _?b.startsWith(Vt.data+":")?b:(y||(y=Ut.parse(b)),e5.uriToBrowserUri(y).toString(!0)):!y||Ut.parse(b).toString()===y.toString()?b:(y.query&&(y=y.with({query:o(y.query)})),y.toString())},l=new nX;l.image=h6.image,l.link=h6.link,l.paragraph=h6.paragraph;const c=[],h=[];if(e.codeBlockRendererSync?l.code=({text:b,lang:_})=>{const w=bV.nextId(),y=e.codeBlockRendererSync(_V(_),b);return h.push([w,y]),`<div class="code" data-code="${w}">${cv(b)}</div>`}:e.codeBlockRenderer&&(l.code=({text:b,lang:_})=>{const w=bV.nextId(),y=e.codeBlockRenderer(_V(_),b);return c.push(y.then(k=>[w,k])),`<div class="code" data-code="${w}">${cv(b)}</div>`}),e.actionHandler){const b=function(y){let k=y.target;if(!(k.tagName!=="A"&&(k=k.parentElement,!k||k.tagName!=="A")))try{let L=k.dataset.href;L&&(n.baseUri&&(L=u6(Ut.from(n.baseUri),L)),e.actionHandler.callback(L,y))}catch(L){Wi(L)}finally{y.preventDefault()}},_=e.actionHandler.disposables.add(new Zt(s,"click")),w=e.actionHandler.disposables.add(new Zt(s,"auxclick"));e.actionHandler.disposables.add(Oe.any(_.event,w.event)(y=>{const k=new ac(lt(s),y);!k.leftButton&&!k.middleButton||b(k)})),e.actionHandler.disposables.add(we(s,"keydown",y=>{const k=new en(y);!k.equals(10)&&!k.equals(3)||b(k)}))}n.supportHtml||(l.html=({text:b})=>e.sanitizerOptions?.replaceWithPlaintext?cv(b):(n.isTrusted?b.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?b:""),t.renderer=l;let u=n.value??"";u.length>1e5&&(u=`${u.substr(0,1e5)}…`),n.supportThemeIcons&&(u=Y_e(u));let d;if(e.fillInIncompleteTokens){const b={...ove,...t},_=x5(u,b),w=Cve(_);d=ave(w,b)}else d=rX(u,{...t,async:!1});n.supportThemeIcons&&(d=tm(d).map(_=>typeof _=="string"?_:_.outerHTML).join(""));const p=new DOMParser().parseFromString(X8({isTrusted:n.isTrusted,...e.sanitizerOptions},d),"text/html");if(p.body.querySelectorAll("img, audio, video, source").forEach(b=>{const _=b.getAttribute("src");if(_){let w=_;try{n.baseUri&&(w=u6(Ut.from(n.baseUri),w))}catch{}if(b.setAttribute("src",a(w,!0)),e.remoteImageIsAllowed){const y=Ut.parse(w);y.scheme!==Vt.file&&y.scheme!==Vt.data&&!e.remoteImageIsAllowed(y)&&b.replaceWith(ft("",void 0,b.outerHTML))}}}),p.body.querySelectorAll("a").forEach(b=>{const _=b.getAttribute("href");if(b.setAttribute("href",""),!_||/^data:|javascript:/i.test(_)||/^command:/i.test(_)&&!n.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(_))b.replaceWith(...b.childNodes);else{let w=a(_,!1);n.baseUri&&(w=u6(Ut.from(n.baseUri),_)),b.dataset.href=w}}),s.innerHTML=X8({isTrusted:n.isTrusted,...e.sanitizerOptions},p.body.innerHTML),c.length>0)Promise.all(c).then(b=>{if(r)return;const _=new Map(b),w=s.querySelectorAll("div[data-code]");for(const y of w){const k=_.get(y.dataset.code??"");k&&Ks(y,k)}e.asyncRenderCallback?.()});else if(h.length>0){const b=new Map(h),_=s.querySelectorAll("div[data-code]");for(const w of _){const y=b.get(w.dataset.code??"");y&&Ks(w,y)}}if(e.asyncRenderCallback)for(const b of s.getElementsByTagName("img")){const _=i.add(we(b,"load",()=>{_.dispose(),e.asyncRenderCallback()}))}return{element:s,dispose:()=>{r=!0,i.dispose()}}}function _V(n){if(!n)return"";const e=n.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:n}function u6(n,e){return/^\w[\w\d+.-]*:/.test(e)?e:n.path.endsWith("/")?gV(n,e).toString():gV(eve(n),e).toString()}const hve=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function X8(n,e){const{config:t,allowedSchemes:i}=dve(n),r=new rt;r.add(vV("uponSanitizeAttribute",(s,o)=>{if(o.attrName==="style"||o.attrName==="class"){if(s.tagName==="SPAN"){if(o.attrName==="style"){o.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(border-radius:[0-9]+px;)?$/.test(o.attrValue);return}else if(o.attrName==="class"){o.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(o.attrValue);return}}o.keepAttr=!1;return}else if(s.tagName==="INPUT"&&s.attributes.getNamedItem("type")?.value==="checkbox"){if(o.attrName==="type"&&o.attrValue==="checkbox"||o.attrName==="disabled"||o.attrName==="checked"){o.keepAttr=!0;return}o.keepAttr=!1}})),r.add(vV("uponSanitizeElement",(s,o)=>{if(o.tagName==="input"&&(s.attributes.getNamedItem("type")?.value==="checkbox"?s.setAttribute("disabled",""):n.replaceWithPlaintext||s.remove()),n.replaceWithPlaintext&&!o.allowedTags[o.tagName]&&o.tagName!=="body"&&s.parentElement){let a,l;if(o.tagName==="#comment")a=`<!--${s.textContent}-->`;else{const d=hve.includes(o.tagName),g=s.attributes.length?" "+Array.from(s.attributes).map(p=>`${p.name}="${p.value}"`).join(" "):"";a=`<${o.tagName}${g}>`,d||(l=`</${o.tagName}>`)}const c=document.createDocumentFragment(),h=s.parentElement.ownerDocument.createTextNode(a);c.appendChild(h);const u=l?s.parentElement.ownerDocument.createTextNode(l):void 0;for(;s.firstChild;)c.appendChild(s.firstChild);u&&c.appendChild(u),s.nodeType===Node.COMMENT_NODE?s.parentElement.insertBefore(c,s):s.parentElement.replaceChild(c,s)}})),r.add($ge(i));try{return uY(e,{...t,RETURN_TRUSTED_TYPE:!0})}finally{r.dispose()}}const uve=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function dve(n){const e=[Vt.http,Vt.https,Vt.mailto,Vt.data,Vt.file,Vt.vscodeFileResource,Vt.vscodeRemote,Vt.vscodeRemoteResource];return n.isTrusted&&e.push(Vt.command),{config:{ALLOWED_TAGS:n.allowedTags??[...jge],ALLOWED_ATTR:uve,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}function fve(n){return typeof n=="string"?n:gve(n)}function gve(n,e){let t=n.value??"";t.length>1e5&&(t=`${t.substr(0,1e5)}…`);const i=rX(t,{async:!1,renderer:bve.value}).replace(/&(#\d+|[a-zA-Z]+);/g,r=>mve.get(r)??r);return X8({isTrusted:!1},i).toString()}const mve=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function pve(){const n=new nX;return n.code=({text:e})=>e,n.blockquote=({text:e})=>e+`
`,n.html=e=>"",n.heading=function({tokens:e}){return this.parser.parseInline(e)+`
`},n.hr=()=>"",n.list=function({items:e}){return e.map(t=>this.listitem(t)).join(`
`)+`
`},n.listitem=({text:e})=>e+`
`,n.paragraph=function({tokens:e}){return this.parser.parseInline(e)+`
`},n.table=function({header:e,rows:t}){return e.map(i=>this.tablecell(i)).join(" ")+`
`+t.map(i=>i.map(r=>this.tablecell(r)).join(" ")).join(`
`)+`
`},n.tablerow=({text:e})=>e,n.tablecell=function({tokens:e}){return this.parser.parseInline(e)},n.strong=({text:e})=>e,n.em=({text:e})=>e,n.codespan=({text:e})=>e,n.br=e=>`
`,n.del=({text:e})=>e,n.image=e=>"",n.text=({text:e})=>e,n.link=({text:e})=>e,n}const bve=new cf(n=>pve());function rk(n){let e="";return n.forEach(t=>{e+=t.raw}),e}function sX(n){if(n.tokens)for(let e=n.tokens.length-1;e>=0;e--){const t=n.tokens[e];if(t.type==="text"){const i=t.raw.split(`
`),r=i[i.length-1];if(r.includes("`"))return xve(n);if(r.includes("**"))return Ive(n);if(r.match(/\*\w/))return kve(n);if(r.match(/(^|\s)__\w/))return Nve(n);if(r.match(/(^|\s)_\w/))return Lve(n);if(_ve(r)||vve(r)&&n.tokens.slice(0,e).some(s=>s.type==="text"&&s.raw.match(/\[[^\]]*$/))){const s=n.tokens.slice(e+1);return s[0]?.type==="link"&&s[1]?.type==="text"&&s[1].raw.match(/^ *"[^"]*$/)||r.match(/^[^"]* +"[^"]*$/)?Dve(n):Tve(n)}else if(r.match(/(^|\s)\[\w*/))return Eve(n)}}}function _ve(n){return!!n.match(/(^|\s)\[.*\]\(\w*/)}function vve(n){return!!n.match(/^[^\[]*\]\([^\)]*$/)}function wve(n){const e=n.items[n.items.length-1],t=e.tokens?e.tokens[e.tokens.length-1]:void 0;let i;if(t?.type==="text"&&!("inRawBlock"in e)&&(i=sX(t)),!i||i.type!=="paragraph")return;const r=rk(n.items.slice(0,-1)),s=e.raw.match(/^(\s*(-|\d+\.|\*) +)/)?.[0];if(!s)return;const o=s+rk(e.tokens.slice(0,-1))+i.raw,a=x5(r+o)[0];if(a.type==="list")return a}const yve=3;function Cve(n){for(let e=0;e<yve;e++){const t=Sve(n);if(t)n=t;else break}return n}function Sve(n){let e,t;for(e=0;e<n.length;e++){const i=n[e];if(i.type==="paragraph"&&i.raw.match(/(\n|^)\|/)){t=Mve(n.slice(e));break}if(e===n.length-1&&i.type==="list"){const r=wve(i);if(r){t=[r];break}}if(e===n.length-1&&i.type==="paragraph"){const r=sX(i);if(r){t=[r];break}}}if(t){const i=[...n.slice(0,e),...t];return i.links=n.links,i}return null}function xve(n){return If(n,"`")}function kve(n){return If(n,"*")}function Lve(n){return If(n,"_")}function Tve(n){return If(n,")")}function Dve(n){return If(n,'")')}function Eve(n){return If(n,"](https://microsoft.com)")}function Ive(n){return If(n,"**")}function Nve(n){return If(n,"__")}function If(n,e){const t=rk(Array.isArray(n)?n:[n]);return x5(t+e)[0]}function Mve(n){const e=rk(n),t=e.split(`
`);let i,r=!1;for(let s=0;s<t.length;s++){const o=t[s].trim();if(typeof i>"u"&&o.match(/^\s*\|/)){const a=o.match(/(\|[^\|]+)(?=\||$)/g);a&&(i=a.length)}else if(typeof i=="number")if(o.match(/^\s*\|/)){if(s!==t.length-1)return;r=!0}else return}if(typeof i=="number"&&i>0){const s=r?t.slice(0,-1).join(`
`):e,o=!!s.match(/\|\s*$/),a=s+(o?"":"|")+`
|${" --- |".repeat(i)}`;return x5(a)}}function vV(n,e){return dY(n,e),Mt(()=>fY(n))}const eu=class eu{static createEmpty(e,t){const i=eu.defaultTokenMetadata,r=new Uint32Array(2);return r[0]=e.length,r[1]=i,new eu(r,e,t)}static createFromTextAndMetadata(e,t){let i=0,r="";const s=new Array;for(const{text:o,metadata:a}of e)s.push(i+o.length,a),i+=o.length,r+=o;return new eu(new Uint32Array(s),r,t)}constructor(e,t,i){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=i}equals(e){return e instanceof eu?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,i){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const r=t<<1,s=r+(i<<1);for(let o=r;o<s;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],i=Jl.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(i)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return Jl.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return Jl.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return Jl.getClassNameFromMetadata(t)}getInlineStyle(e,t){const i=this._tokens[(e<<1)+1];return Jl.getInlineStyleFromMetadata(i,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return Jl.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return eu.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,i){return new jA(this,e,t,i)}static convertToEndOffset(e,t){const r=(e.length>>>1)-1;for(let s=0;s<r;s++)e[s<<1]=e[s+1<<1];e[r<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let i=0,r=(e.length>>>1)-1;for(;i<r;){const s=i+Math.floor((r-i)/2),o=e[s<<1];if(o===t)return s+1;o<t?i=s+1:o>t&&(r=s)}return i}withInserted(e){if(e.length===0)return this;let t=0,i=0,r="";const s=new Array;let o=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=i<e.length?e[i]:null;if(a!==-1&&(l===null||a<=l.offset)){r+=this._text.substring(o,a);const c=this._tokens[(t<<1)+1];s.push(r.length,c),t++,o=a}else if(l){if(l.offset>o){r+=this._text.substring(o,l.offset);const c=this._tokens[(t<<1)+1];s.push(r.length,c),o=l.offset}r+=l.text,s.push(r.length,l.tokenMetadata),i++}else break}return new eu(new Uint32Array(s),r,this.languageIdCodec)}getTokenText(e){const t=this.getStartOffset(e),i=this.getEndOffset(e);return this._text.substring(t,i)}forEach(e){const t=this.getCount();for(let i=0;i<t;i++)e(i)}};eu.defaultTokenMetadata=(32768|2<<24)>>>0;let jr=eu;class jA{constructor(e,t,i,r){this._source=e,this._startOffset=t,this._endOffset=i,this._deltaOffset=r,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let s=this._firstTokenIndex,o=e.getCount();s<o&&!(e.getStartOffset(s)>=i);s++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof jA?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){const t=this._firstTokenIndex+e,i=this._source.getStartOffset(t),r=this._source.getEndOffset(t);let s=this._source.getTokenText(t);return i<this._startOffset&&(s=s.substring(this._startOffset-i)),r>this._endOffset&&(s=s.substring(0,s.length-(r-this._endOffset))),s}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}}const Ew=new class{clone(){return this}equals(n){return this===n}};function oX(n,e){return new KM([new mw(0,"",n)],e)}function UA(n,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(n<<0|0|0|32768|2<<24)>>>0,new XL(t,e===null?Ew:e)}const wV={getInitialState:()=>Ew,tokenizeEncoded:(n,e,t)=>UA(0,t)};async function Ave(n,e,t){if(!t)return yV(e,n.languageIdCodec,wV);const i=await qn.getOrCreate(t);return yV(e,n.languageIdCodec,i||wV)}function Rve(n,e,t,i,r,s,o){let a="<div>",l=i,c=0,h=!0;for(let u=0,d=e.getCount();u<d;u++){const g=e.getEndOffset(u);if(g<=i)continue;let p="";for(;l<g&&l<r;l++){const b=n.charCodeAt(l);switch(b){case 9:{let _=s-(l+c)%s;for(c+=_-1;_>0;)o&&h?(p+="&#160;",h=!1):(p+=" ",h=!0),_--;break}case 60:p+="&lt;",h=!1;break;case 62:p+="&gt;",h=!1;break;case 38:p+="&amp;",h=!1;break;case 0:p+="&#00;",h=!1;break;case 65279:case 8232:case 8233:case 133:p+="�",h=!1;break;case 13:p+="&#8203",h=!1;break;case 32:o&&h?(p+="&#160;",h=!1):(p+=" ",h=!0);break;default:p+=String.fromCharCode(b),h=!1}}if(a+=`<span style="${e.getInlineStyle(u,t)}">${p}</span>`,g>r||l>=r)break}return a+="</div>",a}function yV(n,e,t){let i='<div class="monaco-tokenized-source">';const r=nb(n);let s=t.getInitialState();for(let o=0,a=r.length;o<a;o++){const l=r[o];o>0&&(i+="<br/>");const c=t.tokenizeEncoded(l,!0,s);jr.convertToEndOffset(c.tokens,l.length);const u=new jr(c.tokens,l,e).inflate();let d=0;for(let g=0,p=u.getCount();g<p;g++){const b=u.getClassName(g),_=u.getEndOffset(g);i+=`<span class="${b}">${cv(l.substring(d,_))}</span>`,d=_}s=c.endState}return i+="</div>",i}var Pve=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},CV=function(n,e){return function(t,i){e(t,i,n)}},Q8,cm;let J8=(cm=class{constructor(e,t,i){this._options=e,this._languageService=t,this._openerService=i,this._onDidRenderAsync=new de,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const r=new rt,s=r.add($A(e,{...this._getRenderOptions(e,r),...t},i));return s.element.classList.add("rendered-markdown"),{element:s.element,dispose:()=>r.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(i,r)=>{let s;i?s=this._languageService.getLanguageIdByLanguageName(i):this._options.editor&&(s=this._options.editor.getModel()?.getLanguageId()),s||(s=vl);const o=await Ave(this._languageService,r,s),a=document.createElement("span");if(a.innerHTML=Q8._ttpTokenizer?.createHTML(o)??o,this._options.editor){const l=this._options.editor.getOption(50);ps(a,l)}else this._options.codeBlockFontFamily&&(a.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(a.style.fontSize=this._options.codeBlockFontSize),a},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:i=>aX(this._openerService,i,e.isTrusted),disposables:t}}}},Q8=cm,cm._ttpTokenizer=Xm("tokenizeToString",{createHTML(e){return e}}),cm);J8=Q8=Pve([CV(1,Ir),CV(2,Py)],J8);async function aX(n,e,t){try{return await n.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:Ove(t)})}catch(i){return Wi(i),!1}}function Ove(n){return n===!0?!0:n&&Array.isArray(n.enabledCommands)?n.enabledCommands:!1}const yc=ai("accessibilityService"),Bve=new st("accessibilityModeEnabled",!1),SV=2e4;let Dg,VS,e9,$S,t9;function Fve(n){Dg=document.createElement("div"),Dg.className="monaco-aria-container";const e=()=>{const i=document.createElement("div");return i.className="monaco-alert",i.setAttribute("role","alert"),i.setAttribute("aria-atomic","true"),Dg.appendChild(i),i};VS=e(),e9=e();const t=()=>{const i=document.createElement("div");return i.className="monaco-status",i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),Dg.appendChild(i),i};$S=t(),t9=t(),n.appendChild(Dg)}function Iw(n){Dg&&(VS.textContent!==n?(fc(e9),ok(VS,n)):(fc(VS),ok(e9,n)))}function sk(n){Dg&&($S.textContent!==n?(fc(t9),ok($S,n)):(fc($S),ok(t9,n)))}function ok(n,e){fc(n),e.length>SV&&(e=e.substr(0,SV)),n.textContent=e,n.style.visibility="hidden",n.style.visibility="visible"}var Wve=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},m_=function(n,e){return function(t,i){e(t,i,n)}};const Ic=ft;let i9=class extends Gu{get _targetWindow(){return lt(this._target.targetElements[0])}get _targetDocumentElement(){return lt(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===2?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,i,r,s,o){super(),this._keybindingService=t,this._configurationService=i,this._openerService=r,this._instantiationService=s,this._accessibilityService=o,this._messageListeners=new rt,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new de),this._onRequestLayout=this._register(new de),this._linkHandler=e.linkHandler||(d=>aX(this._openerService,d,j0(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new zve(e.target),this._hoverPointer=e.appearance?.showPointer?Ic("div.workbench-hover-pointer"):void 0,this._hover=this._register(new v_e),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),e.appearance?.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),e.appearance?.skipFadeInAnimation&&this._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),e.position?.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=e.position?.hoverPosition??3,this.onmousedown(this._hover.containerDomNode,d=>d.stopPropagation()),this.onkeydown(this._hover.containerDomNode,d=>{d.equals(9)&&this.dispose()}),this._register(we(this._targetWindow,"blur",()=>this.dispose()));const a=Ic("div.hover-row.markdown-hover"),l=Ic("div.hover-contents");if(typeof e.content=="string")l.textContent=e.content,l.style.whiteSpace="pre-wrap";else if($r(e.content))l.appendChild(e.content),l.classList.add("html-hover-contents");else{const d=e.content,g=this._instantiationService.createInstance(J8,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||Sa.fontFamily}),{element:p}=g.render(d,{actionHandler:{callback:b=>this._linkHandler(b),disposables:this._messageListeners},asyncRenderCallback:()=>{l.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});l.appendChild(p)}if(a.appendChild(l),this._hover.contentsDomNode.appendChild(a),e.actions&&e.actions.length>0){const d=Ic("div.hover-row.status-bar"),g=Ic("div.actions");e.actions.forEach(p=>{const b=this._keybindingService.lookupKeybinding(p.commandId),_=b?b.getLabel():null;OA.render(g,{label:p.label,commandId:p.commandId,run:w=>{p.run(w),this.dispose()},iconClass:p.iconClass},_)}),d.appendChild(g),this._hover.containerDomNode.appendChild(d)}this._hoverContainer=Ic("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode);let c;if(e.actions&&e.actions.length>0?c=!1:e.persistence?.hideOnHover===void 0?c=typeof e.content=="string"||j0(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):c=e.persistence.hideOnHover,e.appearance?.showHoverHint){const d=Ic("div.hover-row.status-bar"),g=Ic("div.info");g.textContent=C("hoverhint","Hold {0} key to mouse over",hi?"Option":"Alt"),d.appendChild(g),this._hover.containerDomNode.appendChild(d)}const h=[...this._target.targetElements];c||h.push(this._hoverContainer);const u=this._register(new xV(h));if(this._register(u.onMouseOut(()=>{this._isLocked||this.dispose()})),c){const d=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new xV(d)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=u}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){const i=dA(this._hoverContainer,Ic("div")),r=it(this._hoverContainer,Ic("div"));i.tabIndex=0,r.tabIndex=0,this._register(we(r,"focus",s=>{e.focus(),s.preventDefault()})),this._register(we(i,"focus",s=>{t.focus(),s.preventDefault()}))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){const i=e.childNodes.item(e.childNodes.length-t-1);if(i.nodeType===i.ELEMENT_NODE){const s=i;if(typeof s.tabIndex=="number"&&s.tabIndex>=0)return s}const r=this.findLastFocusableChild(i);if(r)return r}}render(e){e.appendChild(this._hoverContainer);const i=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&w_e(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),this._keybindingService.lookupKeybinding("editor.action.accessibleView")?.getAriaLabel());i&&sk(i),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const e=h=>{const u=_Y(h),d=h.getBoundingClientRect();return{top:d.top*u,bottom:d.bottom*u,right:d.right*u,left:d.left*u}},t=this._target.targetElements.map(h=>e(h)),{top:i,right:r,bottom:s,left:o}=t[0],a=r-o,l=s-i,c={top:i,right:r,bottom:s,left:o,width:a,height:l,center:{x:o+a/2,y:i+l/2}};if(this.adjustHorizontalHoverPosition(c),this.adjustVerticalHoverPosition(c),this.adjustHoverMaxHeight(c),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:c.left+=3,c.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:c.left-=3,c.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:c.top+=3,c.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:c.top-=3,c.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px";break}c.center.x=c.left+a/2,c.center.y=c.top+l/2}this.computeXCordinate(c),this.computeYCordinate(c),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(c)),this._hover.onContentsChanged()}computeXCordinate(e){const t=this._hover.containerDomNode.clientWidth+2;this._target.x!==void 0?this._x=this._target.x:this._hoverPosition===1?this._x=e.right:this._hoverPosition===0?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){this._target.y!==void 0?this._y=this._target.y:this._hoverPosition===3?this._y=e.top:this._hoverPosition===2?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(this._target.x!==void 0)return;const t=this._hoverPointer?3:0;if(this._forcePosition){const i=t+2;this._hoverPosition===1?this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-e.right-i}px`:this._hoverPosition===0&&(this._hover.containerDomNode.style.maxWidth=`${e.left-i}px`);return}this._hoverPosition===1?this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t&&(e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=0:this._hoverPosition=2):this._hoverPosition===0&&(e.left<this._hover.containerDomNode.clientWidth+t&&(this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=1:this._hoverPosition=2),e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1))}adjustVerticalHoverPosition(e){if(this._target.y!==void 0||this._forcePosition)return;const t=this._hoverPointer?3:0;this._hoverPosition===3?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=2):this._hoverPosition===2&&e.bottom+this._hover.containerDomNode.clientHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight/2;if(this._forcePosition){const i=(this._hoverPointer?3:0)+2;this._hoverPosition===3?t=Math.min(t,e.top-i):this._hoverPosition===2&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-i))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const i=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==i&&(this._hover.contentsDomNode.style.paddingRight=i)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(this._hoverPosition===0?"right":"left");const t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=`${e.center.y-(this._y-t)-3}px`:this._hoverPointer.style.top=`${Math.round(t/2)-3}px`;break}case 3:case 2:{this._hoverPointer.classList.add(this._hoverPosition===3?"bottom":"top");const t=this._hover.containerDomNode.clientWidth;let i=Math.round(t/2)-3;const r=this._x+i;(r<e.left||r>e.right)&&(i=e.center.x-this._x-3),this._hoverPointer.style.left=`${i}px`;break}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};i9=Wve([m_(1,ns),m_(2,Nn),m_(3,Py),m_(4,Ni),m_(5,yc)],i9);class xV extends Gu{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e){super(),this._elements=e,this._isMouseIn=!0,this._onMouseOut=this._register(new de),this._elements.forEach(t=>this.onmouseover(t,()=>this._onTargetMouseOver(t))),this._elements.forEach(t=>this.onmouseleave(t,()=>this._onTargetMouseLeave(t)))}_onTargetMouseOver(e){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(e)}_onTargetMouseLeave(e){this._isMouseIn=!1,this._evaluateMouseState(e)}_evaluateMouseState(e){this._clearEvaluateMouseStateTimeout(e),this._mouseTimeout=lt(e).setTimeout(()=>this._fireIfMouseOutside(),0)}_clearEvaluateMouseStateTimeout(e){this._mouseTimeout&&(lt(e).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class zve{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}}var us;(function(n){function e(s,o){if(s.start>=o.end||o.start>=s.end)return{start:0,end:0};const a=Math.max(s.start,o.start),l=Math.min(s.end,o.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}n.intersect=e;function t(s){return s.end-s.start<=0}n.isEmpty=t;function i(s,o){return!t(e(s,o))}n.intersects=i;function r(s,o){const a=[],l={start:s.start,end:Math.min(o.start,s.end)},c={start:Math.max(o.end,s.start),end:s.end};return t(l)||a.push(l),t(c)||a.push(c),a}n.relativeComplement=r})(us||(us={}));function Hve(n){const e=n;return!!e&&typeof e.x=="number"&&typeof e.y=="number"}var Gd;(function(n){n[n.AVOID=0]="AVOID",n[n.ALIGN=1]="ALIGN"})(Gd||(Gd={}));function u0(n,e,t){const i=t.mode===Gd.ALIGN?t.offset:t.offset+t.size,r=t.mode===Gd.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=n-i?i:e<=r?r-e:Math.max(n-e,0):e<=r?r-e:e<=n-i?i:0}const N0=class N0 extends xe{constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=xe.None,this.toDisposeOnSetContainer=xe.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=ft(".context-view"),zz(this.view),this.setContainer(e,t),this._register(Mt(()=>this.setContainer(null,1)))}setContainer(e,t){this.useFixedPosition=t!==1;const i=this.useShadowDOM;if(this.useShadowDOM=t===3,!(e===this.container&&i===this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.view.remove(),this.shadowRoot&&(this.shadowRoot=null,this.shadowRootHostElement?.remove(),this.shadowRootHostElement=null),this.container=null),e)){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=ft(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const s=document.createElement("style");s.textContent=Vve,this.shadowRoot.appendChild(s),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(ft("slot"))}else this.container.appendChild(this.view);const r=new rt;N0.BUBBLE_UP_EVENTS.forEach(s=>{r.add(Er(this.container,s,o=>{this.onDOMEvent(o,!1)}))}),N0.BUBBLE_DOWN_EVENTS.forEach(s=>{r.add(Er(this.container,s,o=>{this.onDOMEvent(o,!0)},!0))}),this.toDisposeOnSetContainer=r}}show(e){this.isVisible()&&this.hide(),fc(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+(e.layer??0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",SY(this.view),this.toDisposeOnClean=e.render(this.view)||xe.None,this.delegate=e,this.doLayout(),this.delegate.focus?.()}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(ym&&eY.pointerEvents)){this.hide();return}this.delegate?.layout?.(),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if($r(e)){const d=qa(e),g=_Y(e);t={top:d.top*g,left:d.left*g,width:d.width*g,height:d.height*g}}else Hve(e)?t={top:e.y,left:e.x,width:e.width||1,height:e.height||2}:t={top:e.posy,left:e.posx,width:2,height:2};const i=lA(this.view),r=t8(this.view),s=this.delegate.anchorPosition||0,o=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;const h=z_();if(a===0){const d={offset:t.top-h.pageYOffset,size:t.height,position:s===0?0:1},g={offset:t.left,size:t.width,position:o===0?0:1,mode:Gd.ALIGN};l=u0(h.innerHeight,r,d)+h.pageYOffset,us.intersects({start:l,end:l+r},{start:d.offset,end:d.offset+d.size})&&(g.mode=Gd.AVOID),c=u0(h.innerWidth,i,g)}else{const d={offset:t.left,size:t.width,position:o===0?0:1},g={offset:t.top,size:t.height,position:s===0?0:1,mode:Gd.ALIGN};c=u0(h.innerWidth,i,d),us.intersects({start:c,end:c+i},{start:d.offset,end:d.offset+d.size})&&(g.mode=Gd.AVOID),l=u0(h.innerHeight,r,g)+h.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(s===0?"bottom":"top"),this.view.classList.add(o===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const u=qa(this.container);this.view.style.top=`${l-(this.useFixedPosition?qa(this.view).top:u.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?qa(this.view).left:u.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t?.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),zz(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,lt(e).document.activeElement):t&&!Dr(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}};N0.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],N0.BUBBLE_DOWN_EVENTS=["click"];let n9=N0;const Vve=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var $ve=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},jve=function(n,e){return function(t,i){e(t,i,n)}};let ak=class extends xe{constructor(e){super(),this.layoutService=e,this.contextView=this._register(new n9(this.layoutService.mainContainer,1)),this.layout(),this._register(e.onDidLayoutContainer(()=>this.layout()))}showContextView(e,t,i){let r;t?t===this.layoutService.getContainer(lt(t))?r=1:i?r=3:r=2:r=1,this.contextView.setContainer(t??this.layoutService.activeContainer,r),this.contextView.show(e);const s={close:()=>{this.openContextView===s&&this.hideContextView()}};return this.openContextView=s,s}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e),this.openContextView=void 0}};ak=$ve([jve(0,Ef)],ak);class Uve extends ak{getContextViewElement(){return this.contextView.getViewElement()}}class qve{constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}async update(e,t,i){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let r;if(e===void 0||Ca(e)||$r(e))r=e;else if(!Sx(e.markdown))r=e.markdown??e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(C("iconLabel.loading","Loading..."),t,i),this._cancellationTokenSource=new ib;const s=this._cancellationTokenSource.token;if(r=await e.markdown(s),r===void 0&&(r=e.markdownNotSupportedFallback),this.isDisposed||s.isCancellationRequested)return}this.show(r,t,i)}show(e,t,i){const r=this._hoverWidget;if(this.hasContent(e)){const s={content:e,target:this.target,actions:i?.actions,linkHandler:i?.linkHandler,trapFocus:i?.trapFocus,appearance:{showPointer:this.hoverDelegate.placement==="element",skipFadeInAnimation:!this.fadeInAnimation||!!r,showHoverHint:i?.appearance?.showHoverHint},position:{hoverPosition:2}};this._hoverWidget=this.hoverDelegate.showHover(s,t)}r?.dispose()}hasContent(e){return e?j0(e)?!!e.value:!0:!1}get isDisposed(){return this._hoverWidget?.isDisposed}dispose(){this._hoverWidget?.dispose(),this._cancellationTokenSource?.dispose(!0),this._cancellationTokenSource=void 0}}var Gve=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},p_=function(n,e){return function(t,i){e(t,i,n)}};let r9=class extends xe{constructor(e,t,i,r,s){super(),this._instantiationService=e,this._keybindingService=i,this._layoutService=r,this._accessibilityService=s,this._managedHovers=new Map,t.onDidShowContextMenu(()=>this.hideHover()),this._contextViewHandler=this._register(new ak(this._layoutService))}showHover(e,t,i){if(kV(this._currentHoverOptions)===kV(e)||this._currentHover&&this._currentHoverOptions?.persistence?.sticky)return;this._currentHoverOptions=e,this._lastHoverOptions=e;const r=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),s=Rs();i||(r&&s?s.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=s):this._lastFocusedElementBeforeOpen=void 0);const o=new rt,a=this._instantiationService.createInstance(i9,e);if(e.persistence?.sticky&&(a.isLocked=!0),a.onDispose(()=>{this._currentHover?.domNode&&wY(this._currentHover.domNode)&&this._lastFocusedElementBeforeOpen?.focus(),this._currentHoverOptions===e&&(this._currentHoverOptions=void 0),o.dispose()},void 0,o),!e.container){const l=$r(e.target)?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(lt(l))}if(this._contextViewHandler.showContextView(new Kve(a,t),e.container),a.onRequestLayout(()=>this._contextViewHandler.layout(),void 0,o),e.persistence?.sticky)o.add(we(lt(e.container).document,Be.MOUSE_DOWN,l=>{Dr(l.target,a.domNode)||this.doHideHover()}));else{if("targetElements"in e.target)for(const c of e.target.targetElements)o.add(we(c,Be.CLICK,()=>this.hideHover()));else o.add(we(e.target,Be.CLICK,()=>this.hideHover()));const l=Rs();if(l){const c=lt(l).document;o.add(we(l,Be.KEY_DOWN,h=>this._keyDown(h,a,!!e.persistence?.hideOnKeyDown))),o.add(we(c,Be.KEY_DOWN,h=>this._keyDown(h,a,!!e.persistence?.hideOnKeyDown))),o.add(we(l,Be.KEY_UP,h=>this._keyUp(h,a))),o.add(we(c,Be.KEY_UP,h=>this._keyUp(h,a)))}}if("IntersectionObserver"in Vi){const l=new IntersectionObserver(h=>this._intersectionChange(h,a),{threshold:0}),c="targetElements"in e.target?e.target.targetElements[0]:e.target;l.observe(c),o.add(Mt(()=>l.disconnect()))}return this._currentHover=a,a}hideHover(){this._currentHover?.isLocked||!this._currentHoverOptions||this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showHover(this._lastHoverOptions,!0,!0)}_keyDown(e,t,i){if(e.key==="Alt"){t.isLocked=!0;return}const r=new en(e);this._keybindingService.resolveKeyboardEvent(r).getSingleModifierDispatchChords().some(o=>!!o)||this._keybindingService.softDispatch(r,r.target).kind!==0||i&&(!this._currentHoverOptions?.trapFocus||e.key!=="Tab")&&(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus())}_keyUp(e,t){e.key==="Alt"&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus()))}setupManagedHover(e,t,i,r){t.setAttribute("custom-hover","true"),t.title!==""&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",t.title),t.title="");let s,o;const a=(k,L)=>{const T=o!==void 0;k&&(o?.dispose(),o=void 0),L&&(s?.dispose(),s=void 0),T&&(e.onDidHideHover?.(),o=void 0)},l=(k,L,T,N)=>new Um(async()=>{(!o||o.isDisposed)&&(o=new qve(e,T||t,k>0),await o.update(typeof i=="function"?i():i,L,{...r,trapFocus:N}))},k);let c=!1;const h=we(t,Be.MOUSE_DOWN,()=>{c=!0,a(!0,!0)},!0),u=we(t,Be.MOUSE_UP,()=>{c=!1},!0),d=we(t,Be.MOUSE_LEAVE,k=>{c=!1,a(!1,k.fromElement===t)},!0),g=k=>{if(s)return;const L=new rt,T={targetElements:[t],dispose:()=>{}};if(e.placement===void 0||e.placement==="mouse"){const N=D=>{T.x=D.x+10,$r(D.target)&&LV(D.target,t)!==t&&a(!0,!0)};L.add(we(t,Be.MOUSE_MOVE,N,!0))}s=L,!($r(k.target)&&LV(k.target,t)!==t)&&L.add(l(e.delay,!1,T))},p=we(t,Be.MOUSE_OVER,g,!0),b=()=>{if(c||s)return;const k={targetElements:[t],dispose:()=>{}},L=new rt,T=()=>a(!0,!0);L.add(we(t,Be.BLUR,T,!0)),L.add(l(e.delay,!1,k)),s=L};let _;const w=t.tagName.toLowerCase();w!=="input"&&w!=="textarea"&&(_=we(t,Be.FOCUS,b,!0));const y={show:k=>{a(!1,!0),l(0,k,void 0,k)},hide:()=>{a(!0,!0)},update:async(k,L)=>{i=k,await o?.update(i,void 0,L)},dispose:()=>{this._managedHovers.delete(t),p.dispose(),d.dispose(),h.dispose(),u.dispose(),_?.dispose(),a(!0,!0)}};return this._managedHovers.set(t,y),y}showManagedHover(e){const t=this._managedHovers.get(e);t&&t.show(!0)}dispose(){this._managedHovers.forEach(e=>e.dispose()),super.dispose()}};r9=Gve([p_(0,Ni),p_(1,qu),p_(2,ns),p_(3,Ef),p_(4,yc)],r9);function kV(n){if(n!==void 0)return n?.id??n}class Kve{get anchorPosition(){return this._hover.anchor}constructor(e,t=!1){this._hover=e,this._focus=t,this.layer=1}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}function LV(n,e){for(e=e??lt(n).document.body;!n.hasAttribute("custom-hover")&&n!==e;)n=n.parentElement;return n}_i(Ay,r9,1);Uu((n,e)=>{const t=n.getColor(A1e);t&&(e.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`))});const Yve=ai("IWorkspaceEditService");class qA{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(im.is(t))return im.lift(t);if(U0.is(t))return U0.lift(t);throw new Error("Unsupported edit")})}}class im extends qA{static is(e){return e instanceof im?!0:go(e)&&Ut.isUri(e.resource)&&go(e.textEdit)}static lift(e){return e instanceof im?e:new im(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,i=void 0,r){super(r),this.resource=e,this.textEdit=t,this.versionId=i}}class U0 extends qA{static is(e){return e instanceof U0?!0:go(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof U0?e:new U0(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,i={},r){super(r),this.oldResource=e,this.newResource=t,this.options=i}}const Gr={enableSplitViewResizing:!0,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0,compactMode:!1},Zve=Object.freeze({id:"editor",order:5,type:"object",title:C("editorConfigurationTitle","Editor"),scope:5}),lk={...Zve,properties:{"editor.tabSize":{type:"number",default:fs.tabSize,minimum:1,markdownDescription:C("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:C("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:fs.insertSpaces,markdownDescription:C("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:fs.detectIndentation,markdownDescription:C("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:fs.trimAutoWhitespace,description:C("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:fs.largeFileOptimizations,description:C("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[C("wordBasedSuggestions.off","Turn off Word Based Suggestions."),C("wordBasedSuggestions.currentDocument","Only suggest words from the active document."),C("wordBasedSuggestions.matchingDocuments","Suggest words from all open documents of the same language."),C("wordBasedSuggestions.allDocuments","Suggest words from all open documents.")],description:C("wordBasedSuggestions","Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[C("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),C("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),C("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:C("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:C("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:C("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!0,description:C("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:C("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:C("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.experimental.treeSitterTelemetry":{type:"boolean",default:!1,markdownDescription:C("editor.experimental.treeSitterTelemetry","Controls whether tree sitter parsing should be turned on and telemetry collected. Setting `editor.experimental.preferTreeSitter` for specific languages will take precedence."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:C("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:C("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:C("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:C("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:C("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:C("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:Gr.maxComputationTime,description:C("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:Gr.maxFileSize,description:C("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:Gr.renderSideBySide,description:C("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:Gr.renderSideBySideInlineBreakpoint,description:C("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:Gr.useInlineViewWhenSpaceIsLimited,description:C("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:Gr.renderMarginRevertIcon,description:C("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:Gr.renderGutterMenu,description:C("renderGutterMenu","When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:Gr.ignoreTrimWhitespace,description:C("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:Gr.renderIndicators,description:C("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:Gr.diffCodeLens,description:C("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:Gr.diffWordWrap,markdownEnumDescriptions:[C("wordWrap.off","Lines will never wrap."),C("wordWrap.on","Lines will wrap at the viewport width."),C("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:Gr.diffAlgorithm,markdownEnumDescriptions:[C("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),C("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:Gr.hideUnchangedRegions.enabled,markdownDescription:C("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:Gr.hideUnchangedRegions.revealLineCount,markdownDescription:C("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:Gr.hideUnchangedRegions.minimumLineCount,markdownDescription:C("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:Gr.hideUnchangedRegions.contextLineCount,markdownDescription:C("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:Gr.experimental.showMoves,markdownDescription:C("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:Gr.experimental.showEmptyDecorations,description:C("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")},"diffEditor.experimental.useTrueInlineView":{type:"boolean",default:Gr.experimental.useTrueInlineView,description:C("useTrueInlineView","If enabled and the editor uses the inline view, word changes are rendered inline.")}}};function Xve(n){return typeof n.type<"u"||typeof n.anyOf<"u"}for(const n of i0){const e=n.schema;if(typeof e<"u")if(Xve(e))lk.properties[`editor.${n.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(lk.properties[t]=e[t])}let R2=null;function lX(){return R2===null&&(R2=Object.create(null),Object.keys(lk.properties).forEach(n=>{R2[n]=!0})),R2}function Qve(n){return lX()[`editor.${n}`]||!1}function Jve(n){return lX()[`diffEditor.${n}`]||!1}const ewe=Ur.as(Qm.Configuration);ewe.registerConfiguration(lk);class twe{static insert(e,t){return{range:new oe(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}function P2(n){return Object.isFrozen(n)?n:yue(n)}class zr{static createEmptyModel(e){return new zr({},[],[],void 0,e)}constructor(e,t,i,r,s){this._contents=e,this._keys=t,this._overrides=i,this.raw=r,this.logService=s,this.overrideConfigurations=new Map}get rawConfiguration(){if(!this._rawConfiguration)if(this.raw?.length){const e=this.raw.map(t=>{if(t instanceof zr)return t;const i=new iwe("",this.logService);return i.parseRaw(t),i.configurationModel});this._rawConfiguration=e.reduce((t,i)=>i===t?i:t.merge(i),e[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?eH(this.contents,e):this.contents}inspect(e,t){const i=this;return{get value(){return P2(i.rawConfiguration.getValue(e))},get override(){return t?P2(i.rawConfiguration.getOverrideValue(e,t)):void 0},get merged(){return P2(t?i.rawConfiguration.override(t).getValue(e):i.rawConfiguration.getValue(e))},get overrides(){const r=[];for(const{contents:s,identifiers:o,keys:a}of i.rawConfiguration.overrides){const l=new zr(s,a,[],void 0,i.logService).getValue(e);l!==void 0&&r.push({identifiers:o,value:l})}return r.length?P2(r):void 0}}}getOverrideValue(e,t){const i=this.getContentsForOverrideIdentifer(t);return i?e?eH(i,e):i:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){const t=Ed(this.contents),i=Ed(this.overrides),r=[...this.keys],s=this.raw?.length?[...this.raw]:[this];for(const o of e)if(s.push(...o.raw?.length?o.raw:[o]),!o.isEmpty()){this.mergeContents(t,o.contents);for(const a of o.overrides){const[l]=i.filter(c=>_r(c.identifiers,a.identifiers));l?(this.mergeContents(l.contents,a.contents),l.keys.push(...a.keys),l.keys=wm(l.keys)):i.push(Ed(a))}for(const a of o.keys)r.indexOf(a)===-1&&r.push(a)}return new zr(t,r,i,s.every(o=>o instanceof zr)?void 0:s,this.logService)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const i={};for(const r of wm([...Object.keys(this.contents),...Object.keys(t)])){let s=this.contents[r];const o=t[r];o&&(typeof s=="object"&&typeof o=="object"?(s=Ed(s),this.mergeContents(s,o)):s=o),i[r]=s}return new zr(i,this.keys,this.overrides,void 0,this.logService)}mergeContents(e,t){for(const i of Object.keys(t)){if(i in e&&go(e[i])&&go(t[i])){this.mergeContents(e[i],t[i]);continue}e[i]=Ed(t[i])}}getContentsForOverrideIdentifer(e){let t=null,i=null;const r=s=>{s&&(i?this.mergeContents(i,s):i=Ed(s))};for(const s of this.overrides)s.identifiers.length===1&&s.identifiers[0]===e?t=s.contents:s.identifiers.includes(e)&&r(s.contents);return r(t),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),ipe(this.contents,e),df.test(e)&&this.overrides.splice(this.overrides.findIndex(i=>_r(i.identifiers,Wx(e))),1))}updateValue(e,t,i){if(zY(this.contents,e,t,r=>this.logService.error(r)),i=i||this.keys.indexOf(e)===-1,i&&this.keys.push(e),df.test(e)){const r=Wx(e),s={identifiers:r,keys:Object.keys(this.contents[e]),contents:d8(this.contents[e],a=>this.logService.error(a))},o=this.overrides.findIndex(a=>_r(a.identifiers,r));o!==-1?this.overrides[o]=s:this.overrides.push(s)}}}class iwe{constructor(e,t){this._name=e,this.logService=t,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||zr.createEmptyModel(this.logService)}parseRaw(e,t){this._raw=e;const{contents:i,keys:r,overrides:s,restricted:o,hasExcludedProperties:a}=this.doParseRaw(e,t);this._configurationModel=new zr(i,r,s,a?[e]:void 0,this.logService),this._restrictedConfigurations=o||[]}doParseRaw(e,t){const i=Ur.as(Qm.Configuration).getConfigurationProperties(),r=this.filter(e,i,!0,t);e=r.raw;const s=d8(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`)),o=Object.keys(e),a=this.toOverrides(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`));return{contents:s,keys:o,overrides:a,restricted:r.restricted,hasExcludedProperties:r.hasExcludedProperties}}filter(e,t,i,r){let s=!1;if(!r?.scopes&&!r?.skipRestricted&&!r?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:s};const o={},a=[];for(const l in e)if(df.test(l)&&i){const c=this.filter(e[l],t,!1,r);o[l]=c.raw,s=s||c.hasExcludedProperties,a.push(...c.restricted)}else{const c=t[l],h=c?typeof c.scope<"u"?c.scope:3:void 0;c?.restricted&&a.push(l),!r.exclude?.includes(l)&&(r.include?.includes(l)||(h===void 0||r.scopes===void 0||r.scopes.includes(h))&&!(r.skipRestricted&&c?.restricted))?o[l]=e[l]:s=!0}return{raw:o,restricted:a,hasExcludedProperties:s}}toOverrides(e,t){const i=[];for(const r of Object.keys(e))if(df.test(r)){const s={};for(const o in e[r])s[o]=e[r][o];i.push({identifiers:Wx(r),keys:Object.keys(s),contents:d8(s,t)})}return i}}class nwe{constructor(e,t,i,r,s,o,a,l,c,h,u,d,g){this.key=e,this.overrides=t,this._value=i,this.overrideIdentifiers=r,this.defaultConfiguration=s,this.policyConfiguration=o,this.applicationConfiguration=a,this.userConfiguration=l,this.localUserConfiguration=c,this.remoteUserConfiguration=h,this.workspaceConfiguration=u,this.folderConfigurationModel=d,this.memoryConfigurationModel=g}toInspectValue(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.toInspectValue(this.userInspectValue)}}class k5{constructor(e,t,i,r,s,o,a,l,c,h){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=i,this._localUserConfiguration=r,this._remoteUserConfiguration=s,this._workspaceConfiguration=o,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this.logService=h,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new xa,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidatedConfigurationModel(e,t,i).getValue(e)}updateValue(e,t,i={}){let r;i.resource?(r=this._memoryConfigurationByResource.get(i.resource),r||(r=zr.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(i.resource,r))):r=this._memoryConfiguration,t===void 0?r.removeValue(e):r.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){const r=this.getConsolidatedConfigurationModel(e,t,i),s=this.getFolderConfigurationModelForResource(t.resource,i),o=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=new Set;for(const l of r.overrides)for(const c of l.identifiers)r.getOverrideValue(e,c)!==void 0&&a.add(c);return new nwe(e,t,r.getValue(e),a.size?[...a]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this._workspaceConfiguration:void 0,s||void 0,o)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,i){let r=this.getConsolidatedConfigurationModelForResource(t,i);return t.overrideIdentifier&&(r=r.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(r=r.merge(this._policyConfiguration)),r}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const r=t.getFolder(e);r&&(i=this.getFolderConsolidatedConfiguration(r.uri)||i);const s=this._memoryConfigurationByResource.get(e);s&&(i=i.merge(s))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),r=this._folderConfigurations.get(e);r?(t=i.merge(r),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const i=t.getFolder(e);if(i)return this._folderConfigurations.get(i.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:i,overrides:r,keys:s}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:r,keys:s}]),e},[])}}static parse(e,t){const i=this.parseConfigurationModel(e.defaults,t),r=this.parseConfigurationModel(e.policy,t),s=this.parseConfigurationModel(e.application,t),o=this.parseConfigurationModel(e.user,t),a=this.parseConfigurationModel(e.workspace,t),l=e.folders.reduce((c,h)=>(c.set(Ut.revive(h[0]),this.parseConfigurationModel(h[1],t)),c),new xa);return new k5(i,r,s,o,zr.createEmptyModel(t),a,l,zr.createEmptyModel(t),new xa,t)}static parseConfigurationModel(e,t){return new zr(e.contents,e.keys,e.overrides,void 0,t)}}class rwe{constructor(e,t,i,r,s){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=r,this.logService=s,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const o of e.keys)this.affectedKeys.add(o);for(const[,o]of e.overrides)for(const a of o)this.affectedKeys.add(a);this._affectsConfigStr=this._marker;for(const o of this.affectedKeys)this._affectsConfigStr+=o+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=k5.parse(this.previous.data,this.logService)),this._previousConfiguration}affectsConfiguration(e,t){const i=this._marker+e,r=this._affectsConfigStr.indexOf(i);if(r<0)return!1;const s=r+i.length;if(s>=this._affectsConfigStr.length)return!1;const o=this._affectsConfigStr.charCodeAt(s);if(o!==this._markerCode1&&o!==this._markerCode2)return!1;if(t){const a=this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.previous?.workspace):void 0,l=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!Uo(a,l)}return!0}}class swe{constructor(){this._onDidChange=new de,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}const pv=new swe,ck={kind:0},owe={kind:1};function awe(n,e,t){return{kind:2,commandId:n,commandArgs:e,isBubble:t}}class bv{constructor(e,t,i){this._log=i,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const r of e){const s=r.command;s&&s.charAt(0)!=="-"&&this._defaultBoundCommands.set(s,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=bv.handleRemovals([].concat(e).concat(t));for(let r=0,s=this._keybindings.length;r<s;r++){const o=this._keybindings[r];if(o.chords.length===0)continue;const a=o.when?.substituteConstants();a&&a.type===0||this._addKeyPress(o.chords[0],o)}}static _isTargetedForRemoval(e,t,i){if(t){for(let r=0;r<t.length;r++)if(t[r]!==e.chords[r])return!1}return!(i&&i.type!==1&&(!e.when||!mme(i,e.when)))}static handleRemovals(e){const t=new Map;for(let r=0,s=e.length;r<s;r++){const o=e[r];if(o.command&&o.command.charAt(0)==="-"){const a=o.command.substring(1);t.has(a)?t.get(a).push(o):t.set(a,[o])}}if(t.size===0)return e;const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];if(!o.command||o.command.length===0){i.push(o);continue}if(o.command.charAt(0)==="-")continue;const a=t.get(o.command);if(!a||!o.isDefault){i.push(o);continue}let l=!1;for(const c of a){const h=c.when;if(this._isTargetedForRemoval(o,c.chords,h)){l=!0;break}}if(!l){i.push(o);continue}}return i}_addKeyPress(e,t){const i=this._map.get(e);if(typeof i>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.command===t.command)continue;let o=!0;for(let a=1;a<s.chords.length&&a<t.chords.length;a++)if(s.chords[a]!==t.chords[a]){o=!1;break}o&&bv.whenIsEntirelyIncluded(s.when,t.when)&&this._removeFromLookupMap(s)}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let i=0,r=t.length;i<r;i++)if(t[i]===e){t.splice(i,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:l8(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const i=this._lookupMap.get(e);if(typeof i>"u"||i.length===0)return null;if(i.length===1)return i[0];for(let r=i.length-1;r>=0;r--){const s=i[r];if(t.contextMatchesRules(s.when))return s}return i[i.length-1]}resolve(e,t,i){const r=[...t,i];this._log(`| Resolving ${r}`);const s=this._map.get(r[0]);if(s===void 0)return this._log("\\ No keybinding entries."),ck;let o=null;if(r.length<2)o=s;else{o=[];for(let l=0,c=s.length;l<c;l++){const h=s[l];if(r.length>h.chords.length)continue;let u=!0;for(let d=1;d<r.length;d++)if(h.chords[d]!==r[d]){u=!1;break}u&&o.push(h)}}const a=this._findCommand(e,o);return a?r.length<a.chords.length?(this._log(`\\ From ${o.length} keybinding entries, awaiting ${a.chords.length-r.length} more chord(s), when: ${TV(a.when)}, source: ${DV(a)}.`),owe):(this._log(`\\ From ${o.length} keybinding entries, matched ${a.command}, when: ${TV(a.when)}, source: ${DV(a)}.`),awe(a.command,a.commandArgs,a.bubble)):(this._log(`\\ From ${o.length} keybinding entries, no when clauses matched the context.`),ck)}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){const r=t[i];if(bv._contextMatchesRules(e,r.when))return r}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function TV(n){return n?`${n.serialize()}`:"no when condition"}function DV(n){return n.extensionId?n.isBuiltinExtension?`built-in extension ${n.extensionId}`:`user extension ${n.extensionId}`:n.isDefault?"built-in":"user"}const lwe=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class cwe extends xe{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Oe.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,i,r,s){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=i,this._notificationService=r,this._logService=s,this._onDidUpdateKeybindings=this._register(new de),this._currentChords=[],this._currentChordChecker=new nA,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=d0.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Um,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const i=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(i)return i.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const i=this.resolveKeyboardEvent(e);if(i.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),ck;const[r]=i.getDispatchChords();if(r===null)return this._log("\\ Keyboard event cannot be dispatched"),ck;const s=this._contextKeyService.getContext(t),o=this._currentChords.map(({keypress:a})=>a);return this._getResolver().resolve(s,o,r)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw $M("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(C("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:{const i=this._currentChords.map(({label:r})=>r).join(", ");this._currentChordStatusMessage=this._notificationService.status(C("next.chord","({0}) was pressed. Waiting for next key of chord...",i))}}this._scheduleLeaveChordMode(),pv.enabled&&pv.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],pv.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const i=this.resolveKeyboardEvent(e),[r]=i.getSingleModifierDispatchChords();if(r)return this._ignoreSingleModifiers.has(r)?(this._log(`+ Ignoring single modifier ${r} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=d0.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=d0.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${r}.`),this._currentSingleModifier=r,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):r===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${r} ${r}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${r}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[s]=i.getChords();return this._ignoreSingleModifiers=new d0(s),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,i=!1){let r=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let s=null,o=null;if(i){const[h]=e.getSingleModifierDispatchChords();s=h,o=h?[h]:[]}else[s]=e.getDispatchChords(),o=this._currentChords.map(({keypress:h})=>h);if(s===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),r;const a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,o,s);switch(c.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",l,"[ No matching keybinding ]"),this.inChordMode){const h=this._currentChords.map(({label:u})=>u).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${h}, ${l}".`),this._notificationService.status(C("missing.chord","The key combination ({0}, {1}) is not a command.",h,l),{hideAfter:10*1e3}),this._leaveChordMode(),r=!0}return r}case 1:return this._logService.trace("KeybindingService#dispatch",l,"[ Several keybindings match - more chords needed ]"),r=!0,this._expectAnotherChord(s,l),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),r;case 2:{if(this._logService.trace("KeybindingService#dispatch",l,`[ Will dispatch command ${c.commandId} ]`),c.commandId===null||c.commandId===""){if(this.inChordMode){const h=this._currentChords.map(({label:u})=>u).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${h}, ${l}".`),this._notificationService.status(C("missing.chord","The key combination ({0}, {1}) is not a command.",h,l),{hideAfter:10*1e3}),this._leaveChordMode(),r=!0}}else{this.inChordMode&&this._leaveChordMode(),c.isBubble||(r=!0),this._log(`+ Invoking command ${c.commandId}.`),this._currentlyDispatchingCommandId=c.commandId;try{typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,h=>this._notificationService.warn(h)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,h=>this._notificationService.warn(h))}finally{this._currentlyDispatchingCommandId=null}lwe.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding",detail:e.getUserSettingsLabel()??void 0})}return r}}}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}const uL=class uL{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}};uL.EMPTY=new uL(null);let d0=uL;class EV{constructor(e,t,i,r,s,o,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?s9(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=s9(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=r,this.isDefault=s,this.extensionId=o,this.isBuiltinExtension=a}}function s9(n){const e=[];for(let t=0,i=n.length;t<i;t++){const r=n[t];if(!r)return[];e.push(r)}return e}class L5{constructor(e,t,i=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}toLabel(e,t,i){if(t.length===0)return null;const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=i(a);if(l===null)return null;r[s]=fwe(a,l,this.modifierLabels[e])}return r.join(" ")}}const GA=new L5({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:C({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:C({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:C({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:C({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:C({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:C({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),hwe=new L5({ctrlKey:C({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:C({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:C({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:C({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:C({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:C({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:C({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:C({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:C({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),uwe=new L5({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),dwe=new L5({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function fwe(n,e,t){if(e===null)return"";const i=[];return n.ctrlKey&&i.push(t.ctrlKey),n.shiftKey&&i.push(t.shiftKey),n.altKey&&i.push(t.altKey),n.metaKey&&i.push(t.metaKey),e!==""&&i.push(e),i.join(t.separator)}class gwe extends Ffe{constructor(e,t){if(super(),t.length===0)throw ZL("chords");this._os=e,this._chords=t}getLabel(){return GA.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return hwe.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:uwe.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return dwe.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new Bfe(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}}class Nw extends gwe{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return ou.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":ou.toString(e.keyCode)}_getElectronAccelerator(e){return ou.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=ou.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_getChordDispatch(e){return Nw.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=ou.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=GM[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof Sm)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new Sm(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const i=s9(e.chords.map(r=>this._toKeyCodeChord(r)));return i.length>0?[new Nw(i,t)]:[]}}const mwe=ai("labelService"),pwe=ai("progressService"),KA=ai("editorProgressService");class bwe{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),i=this._value.charCodeAt(this._pos);return t-i}value(){return this._value[this._pos]}}class _we{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?YM(e,this._value,0,e.length,this._from,this._to):Cy(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class vwe{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const i=this._value.charCodeAt(t);if(!(i===47||this._splitOnBackslash&&i===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?YM(e,this._value,0,e.length,this._from,this._to):Cy(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class wwe{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new vwe(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return Sz(e,this._value.scheme);if(this._states[this._stateIdx]===2)return Sz(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return HE(e,this._value.query);if(this._states[this._stateIdx]===5)return HE(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class O2{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}class _v{static forUris(e=()=>!1,t=()=>!1){return new _v(new wwe(e,t))}static forStrings(){return new _v(new bwe)}static forConfigKeys(){return new _v(new _we)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){const i=this._iter.reset(e);let r;this._root||(this._root=new O2,this._root.segment=i.value());const s=[];for(r=this._root;;){const a=i.cmp(r.segment);if(a>0)r.left||(r.left=new O2,r.left.segment=i.value()),s.push([-1,r]),r=r.left;else if(a<0)r.right||(r.right=new O2,r.right.segment=i.value()),s.push([1,r]),r=r.right;else if(i.hasNext())i.next(),r.mid||(r.mid=new O2,r.mid.segment=i.value()),s.push([0,r]),r=r.mid;else break}const o=r.value;r.value=t,r.key=e;for(let a=s.length-1;a>=0;a--){const l=s[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const h=s[a][0],u=s[a+1][0];if(h===1&&u===1)s[a][1]=l.rotateLeft();else if(h===-1&&u===-1)s[a][1]=l.rotateRight();else if(h===1&&u===-1)l.right=s[a+1][1]=s[a+1][1].rotateRight(),s[a][1]=l.rotateLeft();else if(h===-1&&u===1)l.left=s[a+1][1]=s[a+1][1].rotateLeft(),s[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}return o}get(e){return this._getNode(e)?.value}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const r=t.cmp(i.segment);if(r>0)i=i.left;else if(r<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else break}return i}has(e){const t=this._getNode(e);return!(t?.value===void 0&&t?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const i=this._iter.reset(e),r=[];let s=this._root;for(;s;){const o=i.cmp(s.segment);if(o>0)r.push([-1,s]),s=s.left;else if(o<0)r.push([1,s]),s=s.right;else if(i.hasNext())i.next(),r.push([0,s]),s=s.mid;else break}if(s){if(t?(s.left=void 0,s.mid=void 0,s.right=void 0,s.height=1):(s.key=void 0,s.value=void 0),!s.mid&&!s.value)if(s.left&&s.right){const o=this._min(s.right);if(o.key){const{key:a,value:l,segment:c}=o;this._delete(o.key,!1),s.key=a,s.value=l,s.segment=c}}else{const o=s.left??s.right;if(r.length>0){const[a,l]=r[r.length-1];switch(a){case-1:l.left=o;break;case 0:l.mid=o;break;case 1:l.right=o;break}}else this._root=o}for(let o=r.length-1;o>=0;o--){const a=r[o][1];a.updateHeight();const l=a.balanceFactor();if(l>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),r[o][1]=a.rotateLeft()):l<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),r[o][1]=a.rotateRight()),o>0)switch(r[o-1][0]){case-1:r[o-1][1].left=r[o][1];break;case 1:r[o-1][1].right=r[o][1];break;case 0:r[o-1][1].mid=r[o][1];break}else this._root=r[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let i=this._root,r;for(;i;){const s=t.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(t.hasNext())t.next(),r=i.value||r,i=i.mid;else break}return i&&i.value||r}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const i=this._iter.reset(e);let r=this._root;for(;r;){const s=i.cmp(r.segment);if(s>0)r=r.left;else if(s<0)r=r.right;else if(i.hasNext())i.next(),r=r.mid;else return r.mid?this._entries(r.mid):t?r.value:void 0}}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}const ywe=ai("contextService");class Cwe{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const Swe="code-workspace";C("codeWorkspace","Code Workspace");const xwe="4064f6ec-cb38-4ad0-af64-ee6467e63c82";var IV;(function(n){n.inspectTokensAction=C("inspectTokens","Developer: Inspect Tokens")})(IV||(IV={}));var NV;(function(n){n.gotoLineActionLabel=C("gotoLineActionLabel","Go to Line/Column...")})(NV||(NV={}));var MV;(function(n){n.helpQuickAccessActionLabel=C("helpQuickAccess","Show all Quick Access Providers")})(MV||(MV={}));var AV;(function(n){n.quickCommandActionLabel=C("quickCommandActionLabel","Command Palette"),n.quickCommandHelp=C("quickCommandActionHelp","Show And Run Commands")})(AV||(AV={}));var RV;(function(n){n.quickOutlineActionLabel=C("quickOutlineActionLabel","Go to Symbol..."),n.quickOutlineByCategoryActionLabel=C("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(RV||(RV={}));var o9;(function(n){n.editorViewAccessibleLabel=C("editorViewAccessibleLabel","Editor content")})(o9||(o9={}));var PV;(function(n){n.toggleHighContrast=C("toggleHighContrast","Toggle High Contrast Theme")})(PV||(PV={}));var a9;(function(n){n.bulkEditServiceSummary=C("bulkEditServiceSummary","Made {0} edits in {1} files")})(a9||(a9={}));const kwe=ai("workspaceTrustManagementService");let P1=[],YA=[],cX=[];function B2(n,e=!1){Lwe(n,!1,e)}function Lwe(n,e,t){const i=Twe(n,e);P1.push(i),i.userConfigured?cX.push(i):YA.push(i),t&&!i.userConfigured&&P1.forEach(r=>{r.mime===i.mime||r.userConfigured||(i.extension&&r.extension===i.extension&&console.warn(`Overwriting extension <<${i.extension}>> to now point to mime <<${i.mime}>>`),i.filename&&r.filename===i.filename&&console.warn(`Overwriting filename <<${i.filename}>> to now point to mime <<${i.mime}>>`),i.filepattern&&r.filepattern===i.filepattern&&console.warn(`Overwriting filepattern <<${i.filepattern}>> to now point to mime <<${i.mime}>>`),i.firstline&&r.firstline===i.firstline&&console.warn(`Overwriting firstline <<${i.firstline}>> to now point to mime <<${i.mime}>>`))})}function Twe(n,e){return{id:n.id,mime:n.mime,filename:n.filename,extension:n.extension,filepattern:n.filepattern,firstline:n.firstline,userConfigured:e,filenameLowercase:n.filename?n.filename.toLowerCase():void 0,extensionLowercase:n.extension?n.extension.toLowerCase():void 0,filepatternLowercase:n.filepattern?bZ(n.filepattern.toLowerCase()):void 0,filepatternOnPath:n.filepattern?n.filepattern.indexOf(Fn.sep)>=0:!1}}function Dwe(){P1=P1.filter(n=>n.userConfigured),YA=[]}function Ewe(n,e){return Iwe(n,e).map(t=>t.id)}function Iwe(n,e){let t;if(n)switch(n.scheme){case Vt.file:t=n.fsPath;break;case Vt.data:{t=nk.parseMetaData(n).get(nk.META_DATA_LABEL);break}case Vt.vscodeNotebookCell:t=void 0;break;default:t=n.path}if(!t)return[{id:"unknown",mime:cu.unknown}];t=t.toLowerCase();const i=WK(t),r=OV(t,i,cX);if(r)return[r,{id:vl,mime:cu.text}];const s=OV(t,i,YA);if(s)return[s,{id:vl,mime:cu.text}];if(e){const o=Nwe(e);if(o)return[o,{id:vl,mime:cu.text}]}return[{id:"unknown",mime:cu.unknown}]}function OV(n,e,t){let i,r,s;for(let o=t.length-1;o>=0;o--){const a=t[o];if(e===a.filenameLowercase){i=a;break}if(a.filepattern&&(!r||a.filepattern.length>r.filepattern.length)){const l=a.filepatternOnPath?n:e;a.filepatternLowercase?.(l)&&(r=a)}a.extension&&(!s||a.extension.length>s.extension.length)&&e.endsWith(a.extensionLowercase)&&(s=a)}if(i)return i;if(r)return r;if(s)return s}function Nwe(n){if(iA(n)&&(n=n.substr(1)),n.length>0)for(let e=P1.length-1;e>=0;e--){const t=P1[e];if(!t.firstline)continue;const i=n.match(t.firstline);if(i&&i.length>0)return t}}const F2=Object.prototype.hasOwnProperty,BV="vs.editor.nullLanguage";class Mwe{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(BV,0),this._register(vl,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||BV}}const Jv=class Jv extends xe{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new de),this.onDidChange=this._onDidChange.event,Jv.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new Mwe,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(L1.onDidChangeLanguages(i=>{this._initializeFromRegistry()})))}dispose(){Jv.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Dwe();const e=[].concat(L1.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const i=this._languages[t];i.name&&(this._nameMap[i.name]=i.identifier),i.aliases.forEach(r=>{this._lowercaseNameMap[r.toLowerCase()]=i.identifier}),i.mimetypes.forEach(r=>{this._mimeTypesMap[r]=i.identifier})}),Ur.as(Qm.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let i;F2.call(this._languages,t)?i=this._languages[t]:(this.languageIdCodec.register(t),i={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=i),this._mergeLanguage(i,e)}_mergeLanguage(e,t){const i=t.id;let r=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),r=t.mimetypes[0]),r||(r=`text/x-${i}`,e.mimetypes.push(r)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)B2({id:i,mime:r,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)B2({id:i,mime:r,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)B2({id:i,mime:r,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);Lfe(l)||B2({id:i,mime:r,firstline:l},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${a}\`: `,l)}}e.aliases.push(i);let s=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?s=[null]:s=t.aliases),s!==null)for(const a of s)!a||a.length===0||e.aliases.push(a);const o=s!==null&&s.length>0;if(!(o&&s[0]===null)){const a=(o?s[0]:null)||i;(o||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?F2.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return F2.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&F2.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:Ewe(e,t)}};Jv.instanceCount=0;let l9=Jv;const kl=(n,e)=>n===e;function Awe(n=kl){return(e,t)=>_r(e,t,n)}function FV(n,e,t){{const i=n;return(r,s)=>r==null||s===void 0||s===null?s===r:i(r,s)}}class Xs{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return Rwe(e,this)}}const WV=new Map,c9=new WeakMap;function Rwe(n,e){const t=c9.get(n);if(t)return t;const i=Pwe(n,e);if(i){let r=WV.get(i)??0;r++,WV.set(i,r);const s=r===1?i:`${i}#${r}`;return c9.set(n,s),s}}function Pwe(n,e){const t=c9.get(n);if(t)return t;const i=e.owner?Bwe(e.owner)+".":"";let r;const s=e.debugNameSource;if(s!==void 0)if(typeof s=="function"){if(r=s(),r!==void 0)return i+r}else return i+s;const o=e.referenceFn;if(o!==void 0&&(r=ZA(o),r!==void 0))return i+r;if(e.owner!==void 0){const a=Owe(e.owner,n);if(a!==void 0)return i+a}}function Owe(n,e){for(const t in n)if(n[t]===e)return t}const zV=new Map,HV=new WeakMap;function Bwe(n){const e=HV.get(n);if(e)return e;const t=Fwe(n);let i=zV.get(t)??0;i++,zV.set(t,i);const r=i===1?t:`${t}#${i}`;return HV.set(n,r),r}function Fwe(n){const e=n.constructor;return e?e.name:"Object"}function ZA(n){const e=n.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(i?i[1]:void 0)?.trim()}let Wwe;function hX(){return Wwe}let uX;function zwe(n){uX=n}let dX;function Hwe(n){dX=n}let h9;function Vwe(n){h9=n}class fX{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const i=t===void 0?void 0:e,r=t===void 0?e:t;return h9({owner:i,debugName:()=>{const s=ZA(r);if(s!==void 0)return s;const a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(r.toString());if(a)return`${this.debugName}.${a[2]}`;if(!i)return`${this.debugName} (mapped)`},debugReferenceFn:r},s=>r(this.read(s),s))}flatten(){return h9({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(uX(this,t)),this}keepObserved(e){return e.add(dX(this)),this}}class ob extends fX{constructor(){super(...arguments),this.observers=new Set}addObserver(e){const t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function pr(n,e){const t=new Oy(n,e);try{n(t)}finally{t.finish()}}let W2;function U_(n){if(W2)n(W2);else{const e=new Oy(n,void 0);W2=e;try{n(e)}finally{e.finish(),W2=void 0}}}function XA(n,e,t){n?e(n):pr(e,t)}class Oy{constructor(e,t){this._fn=e,this._getDebugName=t,this.updatingObservers=[]}getDebugName(){return this._getDebugName?this._getDebugName():ZA(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.updatingObservers;for(let t=0;t<e.length;t++){const{observer:i,observable:r}=e[t];i.endUpdate(r)}this.updatingObservers=null}}function fi(n,e){let t;return typeof n=="string"?t=new Xs(void 0,n,void 0):t=new Xs(n,void 0,void 0),new QA(t,e,kl)}class QA extends ob{get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}constructor(e,t,i){super(),this._debugNameData=e,this._equalityComparator=i,this._value=t}get(){return this._value}set(e,t,i){if(i===void 0&&this._equalityComparator(this._value,e))return;let r;t||(t=r=new Oy(()=>{},()=>`Setting ${this.debugName}`));try{const s=this._value;this._setValue(e),hX()?.handleObservableChanged(this,{oldValue:s,newValue:e,change:i,didChange:!0,hadValue:!0});for(const o of this.observers)t.updateObserver(o,this),o.handleChange(this,i)}finally{r&&r.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function gX(n,e){let t;return typeof n=="string"?t=new Xs(void 0,n,void 0):t=new Xs(n,void 0,void 0),new $we(t,e,kl)}class $we extends QA{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){this._value?.dispose()}}function Et(n,e){return e!==void 0?new O1(new Xs(n,void 0,e),e,void 0,void 0,void 0,kl):new O1(new Xs(void 0,void 0,n),n,void 0,void 0,void 0,kl)}function JA(n,e,t){return new jwe(new Xs(n,void 0,e),e,void 0,void 0,void 0,kl,t)}function T5(n,e){return new O1(new Xs(n.owner,n.debugName,n.debugReferenceFn),e,void 0,void 0,n.onLastObserverRemoved,n.equalsFn??kl)}Vwe(T5);function ab(n,e){let t,i;e===void 0?(t=n,i=void 0):(i=n,t=e);const r=new rt;return new O1(new Xs(i,void 0,t),s=>(r.clear(),t(s,r)),void 0,void 0,()=>r.dispose(),kl)}function Fc(n,e){let t,i;e===void 0?(t=n,i=void 0):(i=n,t=e);let r;return new O1(new Xs(i,void 0,t),s=>{r?r.clear():r=new rt;const o=t(s);return o&&r.add(o),o},void 0,void 0,()=>{r&&(r.dispose(),r=void 0)},kl)}class O1 extends ob{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,r,s=void 0,o){super(),this._debugNameData=e,this._computeFn=t,this.createChangeSummary=i,this._handleChange=r,this._handleLastObserverRemoved=s,this._equalityComparator=o,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=this.createChangeSummary?.()}onLastObserverRemoved(){this.state=0,this.value=void 0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this.observers.size===0){const e=this._computeFn(this,this.createChangeSummary?.());return this.onLastObserverRemoved(),e}else{do{if(this.state===1){for(const e of this.dependencies)if(e.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e;const t=this.state!==0,i=this.value;this.state=3;const r=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this.value=this._computeFn(this,r)}finally{for(const o of this.dependenciesToBeRemoved)o.removeObserver(this);this.dependenciesToBeRemoved.clear()}if(t&&!this._equalityComparator(i,this.value))for(const o of this.observers)o.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;const t=this.updateCount===1;if(this.state===3&&(this.state=1,!t))for(const i of this.observers)i.handlePossibleChange(this);if(t)for(const i of this.observers)i.beginUpdate(this)}endUpdate(e){if(this.updateCount--,this.updateCount===0){const t=[...this.observers];for(const i of t)i.endUpdate(this)}Lm(()=>this.updateCount>=0)}handlePossibleChange(e){if(this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const t of this.observers)t.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){const i=this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:s=>s===e},this.changeSummary):!0,r=this.state===3;if(i&&(this.state===1||r)&&(this.state=2,r))for(const s of this.observers)s.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}class jwe extends O1{constructor(e,t,i,r,s=void 0,o,a){super(e,t,i,r,s,o),this.set=a}}function yi(n){return new I5(new Xs(void 0,void 0,n),n,void 0,void 0)}function D5(n,e){return new I5(new Xs(n.owner,n.debugName,n.debugReferenceFn??e),e,void 0,void 0)}function E5(n,e){return new I5(new Xs(n.owner,n.debugName,n.debugReferenceFn??e),e,n.createEmptyChangeSummary,n.handleChange)}function hc(n){const e=new rt,t=D5({owner:void 0,debugName:void 0,debugReferenceFn:n},i=>{e.clear(),n(i,e)});return Mt(()=>{t.dispose(),e.dispose()})}class I5{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,r){this._debugNameData=e,this._runFn=t,this.createChangeSummary=i,this._handleChange=r,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=this.createChangeSummary?.(),this._runIfNeeded()}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear()}_runIfNeeded(){if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;const t=this.disposed;try{if(!t){hX()?.handleAutorunTriggered(this);const i=this.changeSummary;this.changeSummary=this.createChangeSummary?.(),this._runFn(this,i)}}finally{for(const i of this.dependenciesToBeRemoved)i.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,Lm(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:r=>r===e},this.changeSummary))&&(this.state=2)}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}(function(n){n.Observer=I5})(yi||(yi={}));function hk(n){return new Uwe(n)}class Uwe extends fX{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}}function In(...n){let e,t,i;return n.length===3?[e,t,i]=n:[t,i]=n,new f0(new Xs(e,void 0,i),t,i,()=>f0.globalTransaction,kl)}class f0 extends ob{constructor(e,t,i,r,s){super(),this._debugNameData=e,this.event=t,this._getValue=i,this._getTransaction=r,this._equalityComparator=s,this.hasValue=!1,this.handleEvent=o=>{const a=this._getValue(o),l=this.value;(!this.hasValue||!this._equalityComparator(l,a))&&(this.value=a,this.hasValue&&XA(this._getTransaction(),h=>{for(const u of this.observers)h.updateObserver(u,this),u.handleChange(this,void 0)},()=>{const h=this.getDebugName();return"Event fired"+(h?`: ${h}`:"")}),this.hasValue=!0)}}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}}(function(n){n.Observer=f0;function e(t,i){let r=!1;f0.globalTransaction===void 0&&(f0.globalTransaction=t,r=!0);try{i()}finally{r&&(f0.globalTransaction=void 0)}}n.batchEventsGlobally=e})(In||(In={}));function Va(n,e){return new qwe(n,e)}class qwe extends ob{constructor(e,t){super(),this.debugName=e,this.event=t,this.handleEvent=()=>{pr(i=>{for(const r of this.observers)i.updateObserver(r,this),r.handleChange(this,void 0)},()=>this.debugName)}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function eR(n){return typeof n=="string"?new VV(n):new VV(void 0,n)}class VV extends ob{get debugName(){return new Xs(this._owner,this._debugName,void 0).getDebugName(this)??"Observable Signal"}toString(){return this.debugName}constructor(e,t){super(),this._debugName=e,this._owner=t}trigger(e,t){if(!e){pr(i=>{this.trigger(i,t)},()=>`Trigger signal ${this.debugName}`);return}for(const i of this.observers)e.updateObserver(i,this),i.handleChange(this,t)}get(){}}function Gwe(n){const e=new mX(!1,void 0);return n.addObserver(e),Mt(()=>{n.removeObserver(e)})}Hwe(Gwe);function N5(n,e){const t=new mX(!0,e);return n.addObserver(t),e?e(n.get()):n.reportChanges(),Mt(()=>{n.removeObserver(t)})}zwe(N5);class mX{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}}function Kwe(n,e){let t;return T5({owner:n,debugReferenceFn:e},r=>(t=e(r,t),t))}function Ywe(n,e){return Kwe(n,(t,i)=>i??e(t))}function Zwe(n,e,t,i){return e||(e=r=>r!=null),new Promise((r,s)=>{let o=!0,a=!1;const l=n.map(h=>({isFinished:e(h),error:!1,state:h})),c=yi(h=>{const{isFinished:u,error:d,state:g}=l.read(h);(u||d)&&(o?a=!0:c.dispose(),d?s(d===!0?g:d):r(g))});o=!1,a&&c.dispose()})}class Xwe extends ob{get debugName(){return this._debugNameData.getDebugName(this)??"LazyObservableValue"}constructor(e,t,i){super(),this._debugNameData=e,this._equalityComparator=i,this._isUpToDate=!0,this._deltas=[],this._updateCounter=0,this._value=t}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(const e of this.observers)for(const t of this._deltas)e.handleChange(this,t);this._deltas.length=0}else for(const e of this.observers)e.handleChange(this,void 0)}_beginUpdate(){if(this._updateCounter++,this._updateCounter===1)for(const e of this.observers)e.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){this._update();const e=[...this.observers];for(const t of e)t.endUpdate(this)}}addObserver(e){const t=!this.observers.has(e)&&this._updateCounter>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this._updateCounter>0;super.removeObserver(e),t&&e.endUpdate(this)}set(e,t,i){if(i===void 0&&this._equalityComparator(this._value,e))return;let r;t||(t=r=new Oy(()=>{},()=>`Setting ${this.debugName}`));try{if(this._isUpToDate=!1,this._setValue(e),i!==void 0&&this._deltas.push(i),t.updateObserver({beginUpdate:()=>this._beginUpdate(),endUpdate:()=>this._endUpdate(),handleChange:(s,o)=>{},handlePossibleChange:s=>{}},this),this._updateCounter>1)for(const s of this.observers)s.handlePossibleChange(this)}finally{r&&r.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function u9(n,e){return n.lazy?new Xwe(new Xs(n.owner,n.debugName,void 0),e,n.equalsFn??kl):new QA(new Xs(n.owner,n.debugName,void 0),e,n.equalsFn??kl)}const ew=class ew extends xe{constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new de),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new de),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new de({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,ew.instanceCount++,this._registry=this._register(new l9(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){ew.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const i=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return OM(i,null)}createById(e){return new $V(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new $V(this.onDidChange,()=>{const i=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(i)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=vl),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),qn.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}};ew.instanceCount=0;let d9=ew;class $V{constructor(e,t){this._value=In(this,e,()=>t()),this.onDidChange=Oe.fromObservable(this._value)}get languageId(){return this._value.get()}}const pX={TEXT:cu.text},Qwe=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}});let M5=Qwe;const Jwe=new cf(()=>M5("mouse",!1)),eye=new cf(()=>M5("element",!1));function tye(n){M5=n}function Qa(n){return n==="element"?eye.value:Jwe.value}function tR(){return M5("element",!0)}let bX={showHover:()=>{},hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>null,showManagedHover:()=>{}};function iye(n){bX=n}function ph(){return bX}class nye{constructor(e){this.spliceables=e}splice(e,t,i){this.spliceables.forEach(r=>r.splice(e,t,i))}}class Jf extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function jV(n,e){const t=[];for(const i of e){if(n.start>=i.range.end)continue;if(n.end<i.range.start)break;const r=us.intersect(n,i.range);us.isEmpty(r)||t.push({range:r,size:i.size})}return t}function f9({start:n,end:e},t){return{start:n+t,end:e+t}}function rye(n){const e=[];let t=null;for(const i of n){const r=i.range.start,s=i.range.end,o=i.size;if(t&&o===t.size){t.range.end=s;continue}t={range:{start:r,end:s},size:o},e.push(t)}return e}function sye(...n){return rye(n.reduce((e,t)=>e.concat(t),[]))}class oye{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,i=[]){const r=i.length-t,s=jV({start:0,end:e},this.groups),o=jV({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:f9(l.range,r),size:l.size})),a=i.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=sye(s,a,o),this._size=this._paddingTop+this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,i=this._paddingTop;for(const r of this.groups){const s=r.range.end-r.range.start,o=i+s*r.size;if(e<o)return t+Math.floor((e-i)/r.size);t+=s,i=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,i=0;for(const r of this.groups){const s=r.range.end-r.range.start,o=i+s;if(e<o)return this._paddingTop+t+(e-i)*r.size;t+=s*r.size,i=o}return-1}}class aye{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),i=!1;if(t)i=this.transactionNodesPendingRemoval.has(t.domNode),i&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const r=ft(".monaco-list-row"),o=this.getRenderer(e).renderTemplate(r);t={domNode:r,templateId:e,templateData:o}}return{row:t,isReusingConnectedDomNode:i}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:i}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(i).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const i of e)this.getRenderer(t).disposeTemplate(i.templateData),i.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var Ku=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s};const eg={CurrentDragAndDropData:void 0},Nc={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(n){return[n]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class By{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class lye{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class cye{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const i=e.files.item(t);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}}function hye(n,e){return Array.isArray(n)&&Array.isArray(e)?_r(n,e):n===e}class uye{constructor(e){e?.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,i,r)=>r,e?.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,i)=>i+1,e?.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e?.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}const dL=class dL{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:WT(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,i,r=Nc){if(this.virtualDelegate=t,this.domId=`list_id_${++dL.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new xy(50),this.splicing=!1,this.dragOverAnimationStopDisposable=xe.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=xe.None,this.onDragLeaveTimeout=xe.None,this.disposables=new rt,this._onDidChangeContentHeight=new de,this._onDidChangeContentWidth=new de,this.onDidChangeContentHeight=Oe.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,r.horizontalScrolling&&r.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(r.paddingTop??0);for(const o of i)this.renderers.set(o.templateId,o);this.cache=this.disposables.add(new aye(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof r.mouseSupport=="boolean"?r.mouseSupport:!0),this._horizontalScrolling=r.horizontalScrolling??Nc.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof r.paddingBottom>"u"?0:r.paddingBottom,this.accessibilityProvider=new uye(r.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(r.transformOptimization??Nc.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(Zs.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new sb({forceIntegerValues:!0,smoothScrollDuration:r.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:o=>Yo(lt(this.domNode),o)})),this.scrollableElement=this.disposables.add(new C5(this.rowsContainer,{alwaysConsumeMouseWheel:r.alwaysConsumeMouseWheel??Nc.alwaysConsumeMouseWheel,horizontal:1,vertical:r.verticalScrollMode??Nc.verticalScrollMode,useShadows:r.useShadows??Nc.useShadows,mouseWheelScrollSensitivity:r.mouseWheelScrollSensitivity,fastScrollSensitivity:r.fastScrollSensitivity,scrollByPage:r.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(we(this.rowsContainer,Ki.Change,o=>this.onTouchChange(o))),this.disposables.add(we(this.scrollableElement.getDomNode(),"scroll",o=>o.target.scrollTop=0)),this.disposables.add(we(this.domNode,"dragover",o=>this.onDragOver(this.toDragEvent(o)))),this.disposables.add(we(this.domNode,"drop",o=>this.onDrop(this.toDragEvent(o)))),this.disposables.add(we(this.domNode,"dragleave",o=>this.onDragLeave(this.toDragEvent(o)))),this.disposables.add(we(this.domNode,"dragend",o=>this.onDragEnd(o))),this.setRowLineHeight=r.setRowLineHeight??Nc.setRowLineHeight,this.setRowHeight=r.setRowHeight??Nc.setRowHeight,this.supportDynamicHeights=r.supportDynamicHeights??Nc.supportDynamicHeights,this.dnd=r.dnd??this.disposables.add(Nc.dnd),this.layout(r.initialSize?.height,r.initialSize?.width)}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(i,Math.max(0,this.lastRenderTop+r),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}createRangeMap(e){return new oye(e)}splice(e,t,i=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,i=[]){const r=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s={start:e,end:e+t},o=us.intersect(r,s),a=new Map;for(let T=o.end-1;T>=o.start;T--){const N=this.items[T];if(N.dragStartDisposable.dispose(),N.checkedDisposable.dispose(),N.row){let D=a.get(N.templateId);D||(D=[],a.set(N.templateId,D));const O=this.renderers.get(N.templateId);O&&O.disposeElement&&O.disposeElement(N.element,T,N.row.templateData,N.size),D.unshift(N.row)}N.row=null,N.stale=!0}const l={start:e+t,end:this.items.length},c=us.intersect(l,r),h=us.relativeComplement(l,r),u=i.map(T=>({id:String(this.itemId++),element:T,templateId:this.virtualDelegate.getTemplateId(T),size:this.virtualDelegate.getHeight(T),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(T),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:xe.None,checkedDisposable:xe.None,stale:!1}));let d;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,u),d=this.items,this.items=u):(this.rangeMap.splice(e,t,u),d=this.items.splice(e,t,...u));const g=i.length-t,p=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),b=f9(c,g),_=us.intersect(p,b);for(let T=_.start;T<_.end;T++)this.updateItemInDOM(this.items[T],T);const w=us.relativeComplement(b,p);for(const T of w)for(let N=T.start;N<T.end;N++)this.removeItemFromDOM(N);const y=h.map(T=>f9(T,g)),L=[{start:e,end:e+i.length},...y].map(T=>us.intersect(p,T)).reverse();for(const T of L)for(let N=T.end-1;N>=T.start;N--){const D=this.items[N],B=a.get(D.templateId)?.pop();this.insertItemInDOM(N,B)}for(const T of a.values())for(const N of T)this.cache.release(N);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),d.map(T=>T.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=Yo(lt(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const i={height:typeof e=="number"?e:Ige(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:WT(this.domNode)})}render(e,t,i,r,s,o=!1){const a=this.getRenderRange(t,i),l=us.relativeComplement(a,e).reverse(),c=us.relativeComplement(e,a);if(o){const h=us.intersect(e,a);for(let u=h.start;u<h.end;u++)this.updateItemInDOM(this.items[u],u)}this.cache.transact(()=>{for(const h of c)for(let u=h.start;u<h.end;u++)this.removeItemFromDOM(u);for(const h of l)for(let u=h.end-1;u>=h.start;u--)this.insertItemInDOM(u)}),r!==void 0&&(this.rowsContainer.style.left=`-${r}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&s!==void 0&&(this.rowsContainer.style.width=`${Math.max(s,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=i}insertItemInDOM(e,t){const i=this.items[e];if(!i.row)if(t)i.row=t,i.stale=!0;else{const l=this.cache.alloc(i.templateId);i.row=l.row,i.stale||=l.isReusingConnectedDomNode}const r=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",r);const s=this.accessibilityProvider.isChecked(i.element);if(typeof s=="boolean")i.row.domNode.setAttribute("aria-checked",String(!!s));else if(s){const l=c=>i.row.domNode.setAttribute("aria-checked",String(!!c));l(s.value),i.checkedDisposable=s.onDidChange(()=>l(s.value))}if(i.stale||!i.row.domNode.parentElement){const l=this.items.at(e+1)?.row?.domNode??null;(i.row.domNode.parentElement!==this.rowsContainer||i.row.domNode.nextElementSibling!==l)&&this.rowsContainer.insertBefore(i.row.domNode,l),i.stale=!1}this.updateItemInDOM(i,e);const o=this.renderers.get(i.templateId);if(!o)throw new Error(`No renderer found for template id ${i.templateId}`);o?.renderElement(i.element,e,i.row.templateData,i.size);const a=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!a,a&&(i.dragStartDisposable=we(i.row.domNode,"dragstart",l=>this.onDragStart(i.element,a,l))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=WT(e.row.domNode);const t=lt(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const i=this.renderers.get(t.templateId);i&&i.disposeElement&&i.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return Oe.map(this.disposables.add(new Zt(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return Oe.map(this.disposables.add(new Zt(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return Oe.filter(Oe.map(this.disposables.add(new Zt(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return Oe.map(this.disposables.add(new Zt(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return Oe.map(this.disposables.add(new Zt(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return Oe.map(this.disposables.add(new Zt(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return Oe.any(Oe.map(this.disposables.add(new Zt(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),Oe.map(this.disposables.add(new Zt(this.domNode,Ki.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return Oe.map(this.disposables.add(new Zt(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return Oe.map(this.disposables.add(new Zt(this.rowsContainer,Ki.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],r=i&&i.element;return{browserEvent:e,index:t,element:r}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],r=i&&i.element;return{browserEvent:e,index:t,element:r}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),i=typeof t>"u"?void 0:this.items[t],r=i&&i.element;return{browserEvent:e,index:t,element:r}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],r=i&&i.element,s=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:r,sector:s}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,i){if(!i.dataTransfer)return;const r=this.dnd.getDragElements(e);if(i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(pX.TEXT,t),i.dataTransfer.setDragImage){let s;this.dnd.getDragLabel&&(s=this.dnd.getDragLabel(r,i)),typeof s>"u"&&(s=String(r.length));const o=ft(".monaco-drag-image");o.textContent=s,(c=>{for(;c&&!c.classList.contains("monaco-workbench");)c=c.parentElement;return c||this.domNode.ownerDocument})(this.domNode).appendChild(o),i.dataTransfer.setDragImage(o,-10,-10),setTimeout(()=>o.remove(),0)}this.domNode.classList.add("dragging"),this.currentDragData=new By(r),eg.CurrentDragAndDropData=new lye(r),this.dnd.onDragStart?.(this.currentDragData,i)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),eg.CurrentDragAndDropData&&eg.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(eg.CurrentDragAndDropData)this.currentDragData=eg.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new cye}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect?.type===0?"copy":"move";let i;typeof t!="boolean"&&t.feedback?i=t.feedback:typeof e.index>"u"?i=[-1]:i=[e.index],i=wm(i).filter(s=>s>=-1&&s<this.length).sort((s,o)=>s-o),i=i[0]===-1?[-1]:i;let r=typeof t!="boolean"&&t.effect&&t.effect.position?t.effect.position:"drop-target";if(hye(this.currentDragFeedback,i)&&this.currentDragFeedbackPosition===r)return!0;if(this.currentDragFeedback=i,this.currentDragFeedbackPosition=r,this.currentDragFeedbackDisposable.dispose(),i[0]===-1)this.domNode.classList.add(r),this.rowsContainer.classList.add(r),this.currentDragFeedbackDisposable=Mt(()=>{this.domNode.classList.remove(r),this.rowsContainer.classList.remove(r)});else{if(i.length>1&&r!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");r==="drop-target-after"&&i[0]<this.length-1&&(i[0]+=1,r="drop-target-before");for(const s of i){const o=this.items[s];o.dropTarget=!0,o.row?.domNode.classList.add(r)}this.currentDragFeedbackDisposable=Mt(()=>{for(const s of i){const o=this.items[s];o.dropTarget=!1,o.row?.domNode.classList.remove(r)}})}return!0}onDragLeave(e){this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=GE(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&this.dnd.onDragLeave?.(this.currentDragData,e.element,e.index,e.browserEvent)}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,eg.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,eg.CurrentDragAndDropData=void 0,this.dnd.onDragEnd?.(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=xe.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=Ege(this.domNode).top;this.dragOverAnimationDisposable=Vge(lt(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=GE(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,i=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;const i=e.offsetY/this.items[t].size,r=Math.floor(i/.25);return ho(r,0,3)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let i=e;for(;($r(i)||Oge(i))&&i!==this.rowsContainer&&t.contains(i);){const r=i.getAttribute("data-index");if(r){const s=Number(r);if(!isNaN(s))return s}i=i.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,i){const r=this.getRenderRange(e,t);let s,o;e===this.elementTop(r.start)?(s=r.start,o=0):r.end-r.start>1&&(s=r.start+1,o=this.elementTop(s)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let h=l.start;h<l.end;h++){const u=this.probeDynamicHeight(h);u!==0&&this.rangeMap.splice(h,1,[this.items[h]]),a+=u,c=c||u!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const h=us.relativeComplement(r,l);for(const d of h)for(let g=d.start;g<d.end;g++)this.items[g].row&&this.removeItemFromDOM(g);const u=us.relativeComplement(l,r).reverse();for(const d of u)for(let g=d.end-1;g>=d.start;g--)this.insertItemInDOM(g);for(let d=l.start;d<l.end;d++)this.items[d].row&&this.updateItemInDOM(this.items[d],d);if(typeof s=="number"){const d=this.scrollable.getFutureScrollPosition().scrollTop-e,g=this.elementTop(s)-o+d;this.setScrollTop(g,i)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const o=this.virtualDelegate.getDynamicHeight(t.element);if(o!==null){const a=t.size;return t.size=o,t.lastDynamicHeightWidth=this.renderWidth,o-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const i=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,t.size===0&&!Dr(t.row.domNode,lt(t.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",new Error().stack),t.lastDynamicHeightWidth=this.renderWidth,t.size-i;const{row:r}=this.cache.alloc(t.templateId);r.domNode.style.height="",this.rowsContainer.appendChild(r.domNode);const s=this.renderers.get(t.templateId);if(!s)throw new Ti("Missing renderer for templateId: "+t.templateId);return s.renderElement(t.element,e,r.templateData,void 0),t.size=r.domNode.offsetHeight,s.disposeElement?.(t.element,e,r.templateData,void 0),this.virtualDelegate.setDynamicHeight?.(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,r.domNode.remove(),this.cache.release(r),t.size-i}getElementDomId(e){return`${this.domId}_${e}`}dispose(){for(const e of this.items)if(e.dragStartDisposable.dispose(),e.checkedDisposable.dispose(),e.row){const t=this.renderers.get(e.row.templateId);t&&(t.disposeElement?.(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[],this.domNode?.remove(),this.dragOverAnimationDisposable?.dispose(),this.disposables.dispose()}};dL.InstanceCount=0;let Ll=dL;Ku([Mn],Ll.prototype,"onMouseClick",null);Ku([Mn],Ll.prototype,"onMouseDblClick",null);Ku([Mn],Ll.prototype,"onMouseMiddleClick",null);Ku([Mn],Ll.prototype,"onMouseDown",null);Ku([Mn],Ll.prototype,"onMouseOver",null);Ku([Mn],Ll.prototype,"onMouseOut",null);Ku([Mn],Ll.prototype,"onContextMenu",null);Ku([Mn],Ll.prototype,"onTouchStart",null);Ku([Mn],Ll.prototype,"onTap",null);var Nf=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s};class dye{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,i){const r=this.renderedElements.findIndex(s=>s.templateData===i);if(r>=0){const s=this.renderedElements[r];this.trait.unrender(i),s.index=t}else{const s={index:t,templateData:i};this.renderedElements.push(s)}this.trait.renderIndex(t,i)}splice(e,t,i){const r=[];for(const s of this.renderedElements)s.index<e?r.push(s):s.index>=e+t&&r.push({index:s.index+i-t,templateData:s.templateData});this.renderedElements=r}renderIndexes(e){for(const{index:t,templateData:i}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,i)}disposeTemplate(e){const t=this.renderedElements.findIndex(i=>i.templateData===e);t<0||this.renderedElements.splice(t,1)}}let uk=class{get name(){return this._trait}get renderer(){return new dye(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new de,this.onChange=this._onChange.event}splice(e,t,i){const r=i.length-t,s=e+t,o=[];let a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)o.push(this.sortedIndexes[a++]);for(let l=0;l<i.length;l++)i[l]&&o.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=s;)o.push(this.sortedIndexes[a++]+r);this.renderer.splice(e,t,i.length),this._set(o,o)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(qV),t)}_set(e,t,i){const r=this.indexes,s=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=g9(s,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:i}),r}get(){return this.indexes}contains(e){return hue(this.sortedIndexes,e,qV)>=0}dispose(){is(this._onChange)}};Nf([Mn],uk.prototype,"renderer",null);class fye extends uk{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class d6{constructor(e,t,i){this.trait=e,this.view=t,this.identityProvider=i}splice(e,t,i){if(!this.identityProvider)return this.trait.splice(e,t,new Array(i.length).fill(!1));const r=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(r.length===0)return this.trait.splice(e,t,new Array(i.length).fill(!1));const s=new Set(r),o=i.map(a=>s.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,o)}}function of(n){return n.tagName==="INPUT"||n.tagName==="TEXTAREA"}function Fy(n,e){return n.classList.contains(e)?!0:n.classList.contains("monaco-list")||!n.parentElement?!1:Fy(n.parentElement,e)}function q_(n){return Fy(n,"monaco-editor")}function gye(n){return Fy(n,"monaco-custom-toggle")}function mye(n){return Fy(n,"action-item")}function vv(n){return Fy(n,"monaco-tree-sticky-row")}function Mw(n){return n.classList.contains("monaco-tree-sticky-container")}function _X(n){return n.tagName==="A"&&n.classList.contains("monaco-button")||n.tagName==="DIV"&&n.classList.contains("monaco-button-dropdown")?!0:n.classList.contains("monaco-list")||!n.parentElement?!1:_X(n.parentElement)}class vX{get onKeyDown(){return Oe.chain(this.disposables.add(new Zt(this.view.domNode,"keydown")).event,e=>e.filter(t=>!of(t.target)).map(t=>new en(t)))}constructor(e,t,i){this.list=e,this.view=t,this.disposables=new rt,this.multipleSelectionDisposables=new rt,this.multipleSelectionSupport=i.multipleSelectionSupport,this.disposables.add(this.onKeyDown(r=>{switch(r.keyCode){case 3:return this.onEnter(r);case 16:return this.onUpArrow(r);case 18:return this.onDownArrow(r);case 11:return this.onPageUpArrow(r);case 12:return this.onPageDownArrow(r);case 9:return this.onEscape(r);case 31:this.multipleSelectionSupport&&(hi?r.metaKey:r.ctrlKey)&&this.onCtrlA(r)}}))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(lo(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}Nf([Mn],vX.prototype,"onKeyDown",null);var Qc;(function(n){n[n.Automatic=0]="Automatic",n[n.Trigger=1]="Trigger"})(Qc||(Qc={}));var g0;(function(n){n[n.Idle=0]="Idle",n[n.Typing=1]="Typing"})(g0||(g0={}));const pye=new class{mightProducePrintableCharacter(n){return n.ctrlKey||n.metaKey||n.altKey?!1:n.keyCode>=31&&n.keyCode<=56||n.keyCode>=21&&n.keyCode<=30||n.keyCode>=98&&n.keyCode<=107||n.keyCode>=85&&n.keyCode<=95}};class bye{constructor(e,t,i,r,s){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=i,this.keyboardNavigationEventFilter=r,this.delegate=s,this.enabled=!1,this.state=g0.Idle,this.mode=Qc.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new rt,this.disposables=new rt,this.updateOptions(e.options)}updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??Qc.Automatic}enable(){if(this.enabled)return;let e=!1;const t=Oe.chain(this.enabledDisposables.add(new Zt(this.view.domNode,"keydown")).event,s=>s.filter(o=>!of(o.target)).filter(()=>this.mode===Qc.Automatic||this.triggered).map(o=>new en(o)).filter(o=>e||this.keyboardNavigationEventFilter(o)).filter(o=>this.delegate.mightProducePrintableCharacter(o)).forEach(o=>ni.stop(o,!0)).map(o=>o.browserEvent.key)),i=Oe.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);Oe.reduce(Oe.any(t,i),(s,o)=>o===null?null:(s||"")+o,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),i(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),i(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){const e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){const t=this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(e[0]));typeof t=="string"?Iw(t):t&&Iw(t.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=g0.Idle,this.triggered=!1;return}const t=this.list.getFocus(),i=t.length>0?t[0]:0,r=this.state===g0.Idle?1:0;this.state=g0.Typing;for(let s=0;s<this.list.length;s++){const o=(i+s+r)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if(ik(e,l)){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}const c=z_e(e,l);if(c&&c[0].end-c[0].start>1&&c.length===1){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}}}else if(typeof l>"u"||ik(e,l)){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class _ye{constructor(e,t){this.list=e,this.view=t,this.disposables=new rt;const i=Oe.chain(this.disposables.add(new Zt(t.domNode,"keydown")).event,s=>s.filter(o=>!of(o.target)).map(o=>new en(o)));Oe.chain(i,s=>s.filter(o=>o.keyCode===2&&!o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey))(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const i=this.view.domElement(t[0]);if(!i)return;const r=i.querySelector("[tabIndex]");if(!r||!$r(r)||r.tabIndex===-1)return;const s=lt(r).getComputedStyle(r);s.visibility==="hidden"||s.display==="none"||(e.preventDefault(),e.stopPropagation(),r.focus())}dispose(){this.disposables.dispose()}}function wX(n){return hi?n.browserEvent.metaKey:n.browserEvent.ctrlKey}function yX(n){return n.browserEvent.shiftKey}function vye(n){return uA(n)&&n.button===2}const UV={isSelectionSingleChangeEvent:wX,isSelectionRangeChangeEvent:yX};class CX{constructor(e){this.list=e,this.disposables=new rt,this._onPointer=new de,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||UV),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Zs.addTarget(e.getHTMLElement()))),Oe.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||UV))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){q_(e.browserEvent.target)||Rs()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(of(e.browserEvent.target)||q_(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||of(e.browserEvent.target)||q_(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),vye(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(of(e.browserEvent.target)||q_(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof i>"u"&&(i=this.list.getFocus()[0]??t,this.list.setAnchor(i));const r=Math.min(i,t),s=Math.max(i,t),o=lo(r,s+1),a=this.list.getSelection(),l=Cye(g9(a,[i]),i);if(l.length===0)return;const c=g9(o,Sye(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const r=this.list.getSelection(),s=r.filter(o=>o!==t);this.list.setFocus([t]),this.list.setAnchor(t),r.length===s.length?this.list.setSelection([...s,t],e.browserEvent):this.list.setSelection(s,e.browserEvent)}}dispose(){this.disposables.dispose()}}class SX{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,i=[];e.listBackground&&i.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&i.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(i.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&i.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const r=Su(e.listFocusAndSelectionOutline,Su(e.listSelectionOutline,e.listFocusOutline??""));r&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${r}; outline-offset: -1px;}`),e.listFocusOutline&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);const s=Su(e.listSelectionOutline,e.listInactiveFocusOutline??"");s&&i.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${s}; outline-offset: -1px; }`),e.listSelectionOutline&&i.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&i.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&i.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&i.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(i.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${t} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),i.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${t} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&i.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&i.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=i.join(`
`)}}const wye={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:Me.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:Me.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:Me.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},yye={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function Cye(n,e){const t=n.indexOf(e);if(t===-1)return[];const i=[];let r=t-1;for(;r>=0&&n[r]===e-(t-r);)i.push(n[r--]);for(i.reverse(),r=t;r<n.length&&n[r]===e+(r-t);)i.push(n[r++]);return i}function g9(n,e){const t=[];let i=0,r=0;for(;i<n.length||r<e.length;)if(i>=n.length)t.push(e[r++]);else if(r>=e.length)t.push(n[i++]);else if(n[i]===e[r]){t.push(n[i]),i++,r++;continue}else n[i]<e[r]?t.push(n[i++]):t.push(e[r++]);return t}function Sye(n,e){const t=[];let i=0,r=0;for(;i<n.length||r<e.length;)if(i>=n.length)t.push(e[r++]);else if(r>=e.length)t.push(n[i++]);else if(n[i]===e[r]){i++,r++;continue}else n[i]<e[r]?t.push(n[i++]):r++;return t}const qV=(n,e)=>n-e;class xye{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,i,r){let s=0;for(const o of this.renderers)o.renderElement(e,t,i[s++],r)}disposeElement(e,t,i,r){let s=0;for(const o of this.renderers)o.disposeElement?.(e,t,i[s],r),s+=1}disposeTemplate(e){let t=0;for(const i of this.renderers)i.disposeTemplate(e[t++])}}class kye{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return{container:e,disposables:new rt}}renderElement(e,t,i){const r=this.accessibilityProvider.getAriaLabel(e),s=r&&typeof r!="string"?r:hk(r);i.disposables.add(yi(a=>{this.setAriaLabel(a.readObservable(s),i.container)}));const o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof o=="number"?i.container.setAttribute("aria-level",`${o}`):i.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,i,r){i.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}}class Lye{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart?.(e,t)}onDragOver(e,t,i,r,s){return this.dnd.onDragOver(e,t,i,r,s)}onDragLeave(e,t,i,r){this.dnd.onDragLeave?.(e,t,i,r)}onDragEnd(e){this.dnd.onDragEnd?.(e)}drop(e,t,i,r,s){this.dnd.drop(e,t,i,r,s)}dispose(){this.dnd.dispose()}}class Cc{get onDidChangeFocus(){return Oe.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return Oe.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=Oe.chain(this.disposables.add(new Zt(this.view.domNode,"keydown")).event,s=>s.map(o=>new en(o)).filter(o=>e=o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>ni.stop(o,!0)).filter(()=>!1)),i=Oe.chain(this.disposables.add(new Zt(this.view.domNode,"keyup")).event,s=>s.forEach(()=>e=!1).map(o=>new en(o)).filter(o=>o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>ni.stop(o,!0)).map(({browserEvent:o})=>{const a=this.getFocus(),l=a.length?a[0]:void 0,c=typeof l<"u"?this.view.element(l):void 0,h=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:c,anchor:h,browserEvent:o}})),r=Oe.chain(this.view.onContextMenu,s=>s.filter(o=>!e).map(({element:o,index:a,browserEvent:l})=>({element:o,index:a,anchor:new ac(lt(this.view.domNode),l),browserEvent:l})));return Oe.any(t,i,r)}get onKeyDown(){return this.disposables.add(new Zt(this.view.domNode,"keydown")).event}get onDidFocus(){return Oe.signal(this.disposables.add(new Zt(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return Oe.signal(this.disposables.add(new Zt(this.view.domNode,"blur",!0)).event)}constructor(e,t,i,r,s=yye){this.user=e,this._options=s,this.focus=new uk("focused"),this.anchor=new uk("anchor"),this.eventBufferer=new yy,this._ariaLabel="",this.disposables=new rt,this._onDidDispose=new de,this.onDidDispose=this._onDidDispose.event;const o=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?this._options.accessibilityProvider?.getWidgetRole():"list";this.selection=new fye(o!=="listbox");const a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=s.accessibilityProvider,this.accessibilityProvider&&(a.push(new kye(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant?.(this.onDidChangeActiveDescendant,this,this.disposables)),r=r.map(c=>new xye(c.templateId,[...a,c]));const l={...s,dnd:s.dnd&&new Lye(this,s.dnd)};if(this.view=this.createListView(t,i,r,l),this.view.domNode.setAttribute("role",o),s.styleController)this.styleController=s.styleController(this.view.domId);else{const c=xl(this.view.domNode);this.styleController=new SX(c,this.view.domId)}if(this.spliceable=new nye([new d6(this.focus,this.view,s.identityProvider),new d6(this.selection,this.view,s.identityProvider),new d6(this.anchor,this.view,s.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new _ye(this,this.view)),(typeof s.keyboardSupport!="boolean"||s.keyboardSupport)&&(this.keyboardController=new vX(this,this.view,s),this.disposables.add(this.keyboardController)),s.keyboardNavigationLabelProvider){const c=s.keyboardNavigationDelegate||pye;this.typeNavigationController=new bye(this,this.view,s.keyboardNavigationLabelProvider,s.keyboardNavigationEventFilter??(()=>!0),c),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(s),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,i,r){return new Ll(e,t,i,r)}createMouseController(e){return new CX(this)}updateOptions(e={}){this._options={...this._options,...e},this.typeNavigationController?.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),this.keyboardController?.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,i=[]){if(e<0||e>this.view.length)throw new Jf(this.user,`Invalid start index: ${e}`);if(t<0)throw new Jf(this.user,`Invalid delete count: ${t}`);t===0&&i.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,i))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const i of e)if(i<0||i>=this.length)throw new Jf(this.user,`Invalid index ${i}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new Jf(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return OM(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const i of e)if(i<0||i>=this.length)throw new Jf(this.user,`Invalid index ${i}`);this.focus.set(e,t)}focusNext(e=1,t=!1,i,r){if(this.length===0)return;const s=this.focus.get(),o=this.findNextIndex(s.length>0?s[0]+e:0,t,r);o>-1&&this.setFocus([o],i)}focusPrevious(e=1,t=!1,i,r){if(this.length===0)return;const s=this.focus.get(),o=this.findPreviousIndex(s.length>0?s[0]-e:0,t,r);o>-1&&this.setFocus([o],i)}async focusNextPage(e,t){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=i===0?0:i-1;const r=this.getFocus()[0];if(r!==i&&(r===void 0||i>r)){const s=this.findPreviousIndex(i,!1,t);s>-1&&r!==s?this.setFocus([s],e):this.setFocus([i],e)}else{const s=this.view.getScrollTop();let o=s+this.view.renderHeight;i>r&&(o-=this.view.elementHeight(i)),this.view.setScrollTop(o),this.view.getScrollTop()!==s&&(this.setFocus([]),await _w(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,i=()=>0){let r;const s=i(),o=this.view.getScrollTop()+s;o===0?r=this.view.indexAt(o):r=this.view.indexAfter(o-1);const a=this.getFocus()[0];if(a!==r&&(a===void 0||a>=r)){const l=this.findNextIndex(r,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([r],e)}else{const l=o;this.view.setScrollTop(o-this.view.renderHeight-s),this.view.getScrollTop()+i()!==l&&(this.setFocus([]),await _w(0),await this.focusPreviousPage(e,t,i))}}focusLast(e,t){if(this.length===0)return;const i=this.findPreviousIndex(this.length-1,!1,t);i>-1&&this.setFocus([i],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,i){if(this.length===0)return;const r=this.findNextIndex(e,!1,i);r>-1&&this.setFocus([r],t)}findNextIndex(e,t=!1,i){for(let r=0;r<this.length;r++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!i||i(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,i){for(let r=0;r<this.length;r++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!i||i(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,i=0){if(e<0||e>=this.length)throw new Jf(this.user,`Invalid index ${e}`);const r=this.view.getScrollTop(),s=this.view.elementTop(e),o=this.view.elementHeight(e);if(J1(t)){const a=o-this.view.renderHeight+i;this.view.setScrollTop(a*ho(t,0,1)+s-i)}else{const a=s+o,l=r+this.view.renderHeight;s<r+i&&a>=l||(s<r+i||a>=l&&o>=this.view.renderHeight?this.view.setScrollTop(s-i):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new Jf(this.user,`Invalid index ${e}`);const i=this.view.getScrollTop(),r=this.view.elementTop(e),s=this.view.elementHeight(e);if(r<i+t||r+s>i+this.view.renderHeight)return null;const o=s-this.view.renderHeight+t;return Math.abs((i+t-r)/o)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(i=>this.view.element(i)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){const e=this.focus.get();if(e.length>0){let t;this.accessibilityProvider?.getActiveDescendantId&&(t=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",t||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}Nf([Mn],Cc.prototype,"onDidChangeFocus",null);Nf([Mn],Cc.prototype,"onDidChangeSelection",null);Nf([Mn],Cc.prototype,"onContextMenu",null);Nf([Mn],Cc.prototype,"onKeyDown",null);Nf([Mn],Cc.prototype,"onDidFocus",null);Nf([Mn],Cc.prototype,"onDidBlur",null);const jg=ft,xX="selectOption.entry.template";class Tye{get templateId(){return xX}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=it(e,jg(".option-text")),t.detail=it(e,jg(".option-detail")),t.decoratorRight=it(e,jg(".option-decorator-right")),t}renderElement(e,t,i){const r=i,s=e.text,o=e.detail,a=e.decoratorRight,l=e.isDisabled;r.text.textContent=s,r.detail.textContent=o||"",r.decoratorRight.innerText=a||"",l?r.root.classList.add("option-disabled"):r.root.classList.remove("option-disabled")}disposeTemplate(e){}}const Vc=class Vc extends xe{constructor(e,t,i,r,s){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=r,this.selectBoxOptions=s||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=Vc.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new de,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(i),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(ph().setupManagedHover(Qa("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return xX}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=ft(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=it(this.selectDropDownContainer,jg(".select-box-details-pane"));const t=it(this.selectDropDownContainer,jg(".select-box-dropdown-container-width-control")),i=it(t,jg(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",it(i,this.widthControlElement),this._dropDownPosition=0,this.styleElement=xl(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(we(this.selectDropDownContainer,Be.DRAG_START,r=>{ni.stop(r,!0)}))}registerListeners(){this._register(Er(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(we(this.selectElement,Be.CLICK,t=>{ni.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(we(this.selectElement,Be.MOUSE_DOWN,t=>{ni.stop(t)}));let e;this._register(we(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(we(this.selectElement,"touchend",t=>{ni.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(we(this.selectElement,Be.KEY_DOWN,t=>{const i=new en(t);let r=!1;hi?(i.keyCode===18||i.keyCode===16||i.keyCode===10||i.keyCode===3)&&(r=!0):(i.keyCode===18&&i.altKey||i.keyCode===16&&i.altKey||i.keyCode===10||i.keyCode===3)&&(r=!0),r&&(this.showSelectDropDown(),ni.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){_r(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((i,r)=>{this.selectElement.add(this.createOption(i.text,r,i.isDisabled)),typeof i.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){this.selectList?.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){const e=this.styles.selectBackground??"",t=this.styles.selectForeground??"",i=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=e,this.selectElement.style.color=t,this.selectElement.style.borderColor=i}styleList(){const e=this.styles.selectBackground??"",t=Su(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=t,this.selectionDetailsPane.style.backgroundColor=t;const i=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=i,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,i){const r=document.createElement("option");return r.value=e,r.text=e,r.disabled=!!i,r}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,i)=>{this.updateDetail(i),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=lt(this.selectElement),i=qa(this.selectElement),r=lt(this.selectElement).getComputedStyle(this.selectElement),s=parseFloat(r.getPropertyValue("--dropdown-padding-top"))+parseFloat(r.getPropertyValue("--dropdown-padding-bottom")),o=t.innerHeight-i.top-i.height-(this.selectBoxOptions.minBottomMargin||0),a=i.top-Vc.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,l=this.selectElement.offsetWidth,c=this.setWidthControlElement(this.widthControlElement),h=Math.max(c,Math.round(l)).toString()+"px";this.selectDropDownContainer.style.width=h,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let u=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const d=this._hasDetails?this._cachedMaxDetailsHeight:0,g=u+s+d,p=Math.floor((o-s-d)/this.getHeight()),b=Math.floor((a-s-d)/this.getHeight());if(e)return i.top+i.height>t.innerHeight-22||i.top<Vc.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||p<1&&b<1?!1:(p<Vc.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&b>p&&this.options.length>p?(this._dropDownPosition=1,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(i.top+i.height>t.innerHeight-22||i.top<Vc.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&p<1||this._dropDownPosition===1&&b<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&p+b<1)return this.hideSelectDropDown(!0),!1;g>o&&(u=p*this.getHeight())}else g>a&&(u=b*this.getHeight());return this.selectList.layout(u),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=u+s+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=u+s+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=h,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let i=0,r=0;this.options.forEach((s,o)=>{const a=s.detail?s.detail.length:0,l=s.decoratorRight?s.decoratorRight.length:0,c=s.text.length+a+l;c>r&&(i=o,r=c)}),e.textContent=this.options[i].text+(this.options[i].decoratorRight?this.options[i].decoratorRight+" ":""),t=lA(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=it(e,jg(".select-box-dropdown-list-container")),this.listRenderer=new Tye,this.selectList=this._register(new Cc("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:r=>{let s=r.text;return r.detail&&(s+=`. ${r.detail}`),r.decoratorRight&&(s+=`. ${r.decoratorRight}`),r.description&&(s+=`. ${r.description}`),s},getWidgetAriaLabel:()=>C({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>hi?"":"option",getWidgetRole:()=>"listbox"}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new Zt(this.selectDropDownListContainer,"keydown")),i=Oe.chain(t.event,r=>r.filter(()=>this.selectList.length>0).map(s=>new en(s)));this._register(Oe.chain(i,r=>r.filter(s=>s.keyCode===3))(this.onEnter,this)),this._register(Oe.chain(i,r=>r.filter(s=>s.keyCode===2))(this.onEnter,this)),this._register(Oe.chain(i,r=>r.filter(s=>s.keyCode===9))(this.onEscape,this)),this._register(Oe.chain(i,r=>r.filter(s=>s.keyCode===16))(this.onUpArrow,this)),this._register(Oe.chain(i,r=>r.filter(s=>s.keyCode===18))(this.onDownArrow,this)),this._register(Oe.chain(i,r=>r.filter(s=>s.keyCode===12))(this.onPageDown,this)),this._register(Oe.chain(i,r=>r.filter(s=>s.keyCode===11))(this.onPageUp,this)),this._register(Oe.chain(i,r=>r.filter(s=>s.keyCode===14))(this.onHome,this)),this._register(Oe.chain(i,r=>r.filter(s=>s.keyCode===13))(this.onEnd,this)),this._register(Oe.chain(i,r=>r.filter(s=>s.keyCode>=21&&s.keyCode<=56||s.keyCode>=85&&s.keyCode<=113))(this.onCharacter,this)),this._register(we(this.selectList.getHTMLElement(),Be.POINTER_UP,r=>this.onPointerUp(r))),this._register(this.selectList.onMouseOver(r=>typeof r.index<"u"&&this.selectList.setFocus([r.index]))),this._register(this.selectList.onDidChangeFocus(r=>this.onListFocus(r))),this._register(we(this.selectDropDownContainer,Be.FOCUS_OUT,r=>{!this._isVisible||Dr(r.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;ni.stop(e);const t=e.target;if(!t||t.classList.contains("slider"))return;const i=t.closest(".monaco-list-row");if(!i)return;const r=Number(i.getAttribute("data-index")),s=i.classList.contains("option-disabled");r>=0&&r<this.options.length&&!s&&(this.selected=r,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const i=s=>{for(let o=0;o<s.childNodes.length;o++){const a=s.childNodes.item(o);(a.tagName&&a.tagName.toLowerCase())==="img"?a.remove():i(a)}},r=$A({value:e,supportThemeIcons:!0},{actionHandler:t});return r.element.classList.add("select-box-description-markdown"),i(r.element),r.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){this.selectionDetailsPane.innerText="";const t=this.options[e],i=t?.description??"",r=t?.descriptionIsMarkdown??!1;if(i){if(r){const s=t.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(i,s))}else this.selectionDetailsPane.innerText=i;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){ni.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){ni.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){ni.stop(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(ni.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){ni.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){ni.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){ni.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){ni.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=ou.toString(e.keyCode);let i=-1;for(let r=0;r<this.options.length-1;r++)if(i=(r+this.selected+1)%this.options.length,this.options[i].text.charAt(0).toUpperCase()===t&&!this.options[i].isDisabled){this.select(i),this.selectList.setFocus([i]),this.selectList.reveal(this.selectList.getFocus()[0]),ni.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}};Vc.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32,Vc.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2,Vc.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;let m9=Vc;class Dye extends xe{constructor(e,t,i,r){super(),this.selected=0,this.selectBoxOptions=r||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new de),this.styles=i,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(Zs.addTarget(this.selectElement)),[Ki.Tap].forEach(e=>{this._register(we(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(Er(this.selectElement,"click",e=>{ni.stop(e,!0)})),this._register(Er(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(Er(this.selectElement,"keydown",e=>{let t=!1;hi?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!_r(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((i,r)=>{this.selectElement.add(this.createOption(i.text,r,i.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(e,t,i){const r=document.createElement("option");return r.value=e,r.text=e,r.disabled=!!i,r}}class Eye extends Gu{constructor(e,t,i,r,s){super(),hi&&!s?.useCustomDrawn?this.selectBoxDelegate=new Dye(e,t,r,s):this.selectBoxDelegate=new m9(e,t,i,r,s),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}}class ec extends xe{get action(){return this._action}constructor(e,t,i={}){super(),this.options=i,this._context=e||this,this._action=t,t instanceof xu&&this._register(t.onDidChange(r=>{this.element&&this.handleActionChangeEvent(r)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new km)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Zs.addTarget(e));const i=this.options&&this.options.draggable;i&&(e.draggable=!0,Cl&&this._register(we(e,Be.DRAG_START,r=>r.dataTransfer?.setData(pX.TEXT,this._action.label)))),this._register(we(t,Ki.Tap,r=>this.onClick(r,!0))),this._register(we(t,Be.MOUSE_DOWN,r=>{i||ni.stop(r,!0),this._action.enabled&&r.button===0&&t.classList.add("active")})),hi&&this._register(we(t,Be.CONTEXT_MENU,r=>{r.button===0&&r.ctrlKey===!0&&this.onClick(r)})),this._register(we(t,Be.CLICK,r=>{ni.stop(r,!0),this.options&&this.options.isMenu||this.onClick(r)})),this._register(we(t,Be.DBLCLICK,r=>{ni.stop(r,!0)})),[Be.MOUSE_UP,Be.MOUSE_OUT].forEach(r=>{this._register(we(t,r,s=>{ni.stop(s),t.classList.remove("active")}))})}onClick(e,t=!1){ni.stop(e,!0);const i=pa(this._context)?this.options?.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){if(!this.element)return;const e=this.getTooltip()??"";if(this.updateAriaLabel(),this.options.hoverDelegate?.showNativeHover)this.element.title=e;else if(!this.customHover&&e!==""){const t=this.options.hoverDelegate??Qa("element");this.customHover=this._store.add(ph().setupManagedHover(t,this.element,e))}else this.customHover&&this.customHover.update(e)}updateAriaLabel(){if(this.element){const e=this.getTooltip()??"";this.element.setAttribute("aria-label",e)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class iR extends ec{constructor(e,t,i){super(e,t,i),this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass=""}render(e){super.render(e),tf(this.element);const t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){const i=document.createElement("span");i.classList.add("keybinding"),i.textContent=this.options.keybinding,this.element.appendChild(i)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===Ps.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=C({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label?.classList.remove("codicon")}updateEnabled(){this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element?.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element?.classList.add("disabled"))}updateAriaLabel(){if(this.label){const e=this.getTooltip()??"";this.label.setAttribute("aria-label",e)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class Iye extends ec{constructor(e,t,i,r,s,o,a){super(e,t),this.selectBox=new Eye(i,r,s,o,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){this.selectBox?.focus()}blur(){this.selectBox?.blur()}render(e){this.selectBox.render(e)}}class Nye extends km{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new de),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=it(e,ft(".monaco-dropdown")),this._label=it(this._element,ft(".dropdown-label"));let i=t.labelRenderer;i||(i=s=>(s.textContent=t.label||"",null));for(const s of[Be.CLICK,Be.MOUSE_DOWN,Ki.Tap])this._register(we(this.element,s,o=>ni.stop(o,!0)));for(const s of[Be.MOUSE_DOWN,Ki.Tap])this._register(we(this._label,s,o=>{uA(o)&&(o.detail>1||o.button!==0)||(this.visible?this.hide():this.show())}));this._register(we(this._label,Be.KEY_UP,s=>{const o=new en(s);(o.equals(3)||o.equals(10))&&(ni.stop(s,!0),this.visible?this.hide():this.show())}));const r=i(this._label);r&&this._register(r),this._register(Zs.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class Mye extends Nye{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class dk extends ec{constructor(e,t,i,r=Object.create(null)){super(null,e,r),this.actionItem=null,this._onDidChangeVisibility=this._register(new de),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=i,this.options=r,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=s=>{this.element=it(s,ft("a.action-label"));let o=[];return typeof this.options.classNames=="string"?o=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(o=this.options.classNames),o.find(a=>a==="icon")||o.push("codicon"),this.element.classList.add(...o),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register(ph().setupManagedHover(this.options.hoverDelegate??Qa("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},i=Array.isArray(this.menuActionsOrProvider),r={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:i?this.menuActionsOrProvider:void 0,actionProvider:i?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new Mye(e,r)),this._register(this.dropdownMenu.onDidChangeVisibility(s=>{this.element?.setAttribute("aria-expanded",`${s}`),this._onDidChangeVisibility.fire(s)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const s=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return s.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){this.dropdownMenu?.show()}updateEnabled(){const e=!this.action.enabled;this.actionItem?.classList.toggle("disabled",e),this.element?.classList.toggle("disabled",e)}}function Aye(n){return n?n.condition!==void 0:!1}var q0;(function(n){n[n.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",n[n.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(q0||(q0={}));var m0;(function(n){n[n.None=0]="None",n[n.Initialized=1]="Initialized",n[n.Closed=2]="Closed"})(m0||(m0={}));const fL=class fL extends xe{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new gw),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=m0.None,this.cache=new Map,this.flushDelayer=this._register(new nY(fL.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){this._onDidChangeStorage.pause();try{e.changed?.forEach((t,i)=>this.acceptExternal(i,t)),e.deleted?.forEach(t=>this.acceptExternal(t,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===m0.Closed)return;let i=!1;pa(t)?i=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0),i&&this._onDidChangeStorage.fire({key:e,external:!0})}get(e,t){const i=this.cache.get(e);return pa(i)?t:i}getBoolean(e,t){const i=this.get(e);return pa(i)?t:i==="true"}getNumber(e,t){const i=this.get(e);return pa(i)?t:parseInt(i,10)}async set(e,t,i=!1){if(this.state===m0.Closed)return;if(pa(t))return this.delete(e,i);const r=go(t)||Array.isArray(t)?lve(t):String(t);if(this.cache.get(e)!==r)return this.cache.set(e,r),this.pendingInserts.set(e,r),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:i}),this.doFlush()}async delete(e,t=!1){if(!(this.state===m0.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)this.whenFlushedCallbacks.pop()?.()})}async doFlush(e){return this.options.hint===q0.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),e)}};fL.DEFAULT_FLUSH_DELAY=100;let wv=fL;class f6{constructor(){this.onDidChangeItemsExternal=Oe.None,this.items=new Map}async updateItems(e){e.insert?.forEach((t,i)=>this.items.set(i,t)),e.delete?.forEach(t=>this.items.delete(t))}}const jS="__$__targetStorageMarker",A5=ai("storageService");var GV;(function(n){n[n.NONE=0]="NONE",n[n.SHUTDOWN=1]="SHUTDOWN"})(GV||(GV={}));function Rye(n){const e=n.get(jS);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}const gL=class gL extends xe{constructor(e={flushInterval:gL.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new gw),this._onDidChangeTarget=this._register(new gw),this._onWillSaveState=this._register(new de),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,i){return Oe.filter(this._onDidChangeValue.event,r=>r.scope===e&&(t===void 0||r.key===t),i)}emitDidChangeValue(e,t){const{key:i,external:r}=t;if(i===jS){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:i,target:this.getKeyTargets(e)[i],external:r})}get(e,t,i){return this.getStorage(t)?.get(e,i)}getBoolean(e,t,i){return this.getStorage(t)?.getBoolean(e,i)}getNumber(e,t,i){return this.getStorage(t)?.getNumber(e,i)}store(e,t,i,r,s=!1){if(pa(t)){this.remove(e,i,s);return}this.withPausedEmitters(()=>{this.updateKeyTarget(e,i,r),this.getStorage(i)?.set(e,t,s)})}remove(e,t,i=!1){this.withPausedEmitters(()=>{this.updateKeyTarget(e,t,void 0),this.getStorage(t)?.delete(e,i)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,i,r=!1){const s=this.getKeyTargets(t);typeof i=="number"?s[e]!==i&&(s[e]=i,this.getStorage(t)?.set(jS,JSON.stringify(s),r)):typeof s[e]=="number"&&(delete s[e],this.getStorage(t)?.set(jS,JSON.stringify(s),r))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?Rye(t):Object.create(null)}};gL.DEFAULT_FLUSH_INTERVAL=60*1e3;let p9=gL;class Pye extends p9{constructor(){super(),this.applicationStorage=this._register(new wv(new f6,{hint:q0.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new wv(new f6,{hint:q0.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new wv(new f6,{hint:q0.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}function Oye(n,e){const t={...e};for(const i in n){const r=n[i];t[i]=r!==void 0?Fe(r):void 0}return t}const Bye={keybindingLabelBackground:Fe(Lbe),keybindingLabelForeground:Fe(Tbe),keybindingLabelBorder:Fe(Dbe),keybindingLabelBottomBorder:Fe(Ebe),keybindingLabelShadow:Fe(My)},Fye={buttonForeground:Fe(OZ),buttonSeparator:Fe(dbe),buttonBackground:Fe(V_),buttonHoverBackground:Fe(fbe),buttonSecondaryForeground:Fe(mbe),buttonSecondaryBackground:Fe(H8),buttonSecondaryHoverBackground:Fe(pbe),buttonBorder:Fe(gbe)},Wye={progressBarBackground:Fe(E1e)},kX={inputActiveOptionBorder:Fe(AZ),inputActiveOptionForeground:Fe(PZ),inputActiveOptionBackground:Fe(RZ)};Fe($_),Fe(bbe),Fe(_be),Fe(vbe),Fe(wbe),Fe(ybe),Fe(Cbe);Fe(Sbe),Fe(kbe),Fe(xbe);Fe(ml),Fe(v5),Fe(My),Fe(Ci),Fe($1e),Fe(j1e),Fe(U1e),Fe(T1e);const LX={inputBackground:Fe(Q1e),inputForeground:Fe(J1e),inputBorder:Fe(ebe),inputValidationInfoBorder:Fe(rbe),inputValidationInfoBackground:Fe(ibe),inputValidationInfoForeground:Fe(nbe),inputValidationWarningBorder:Fe(abe),inputValidationWarningBackground:Fe(sbe),inputValidationWarningForeground:Fe(obe),inputValidationErrorBorder:Fe(hbe),inputValidationErrorBackground:Fe(lbe),inputValidationErrorForeground:Fe(cbe)},zye={listFilterWidgetBackground:Fe(Hbe),listFilterWidgetOutline:Fe(Vbe),listFilterWidgetNoMatchesOutline:Fe($be),listFilterWidgetShadow:Fe(jbe),inputBoxStyles:LX,toggleStyles:kX},Hye={badgeBackground:Fe(zS),badgeForeground:Fe(D1e),badgeBorder:Fe(Ci)};Fe(H1e),Fe(z1e),Fe(tV),Fe(tV),Fe(V1e);const lb={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:Fe(Ibe),listFocusForeground:Fe(Nbe),listFocusOutline:Fe(Mbe),listActiveSelectionBackground:Fe(Em),listActiveSelectionForeground:Fe(Lw),listActiveSelectionIconForeground:Fe(BZ),listFocusAndSelectionOutline:Fe(Abe),listFocusAndSelectionBackground:Fe(Em),listFocusAndSelectionForeground:Fe(Lw),listInactiveSelectionBackground:Fe(Rbe),listInactiveSelectionIconForeground:Fe(Obe),listInactiveSelectionForeground:Fe(Pbe),listInactiveFocusBackground:Fe(Bbe),listInactiveFocusOutline:Fe(Fbe),listHoverBackground:Fe(FZ),listHoverForeground:Fe(WZ),listDropOverBackground:Fe(Wbe),listDropBetweenBackground:Fe(zbe),listSelectionOutline:Fe(Hn),listHoverOutline:Fe(Hn),treeIndentGuidesStroke:Fe(zZ),treeInactiveIndentGuidesStroke:Fe(Ube),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:Fe(EA),tableColumnsBorder:Fe(qbe),tableOddRowsBackgroundColor:Fe(Gbe)};function Wy(n){return Oye(n,lb)}const Vye={selectBackground:Fe(w5),selectListBackground:Fe(ube),selectForeground:Fe(MA),decoratorRightForeground:Fe(HZ),selectBorder:Fe(AA),focusBorder:Fe(ah),listFocusBackground:Fe($8),listInactiveSelectionIconForeground:Fe(VZ),listFocusForeground:Fe(V8),listFocusOutline:y1e(Hn,Me.transparent.toString()),listHoverBackground:Fe(FZ),listHoverForeground:Fe(WZ),listHoverOutline:Fe(Hn),selectListBorder:Fe(TZ),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},$ye={shadowColor:Fe(My),borderColor:Fe(Kbe),foregroundColor:Fe(Ybe),backgroundColor:Fe(Zbe),selectionForegroundColor:Fe(Xbe),selectionBackgroundColor:Fe(Qbe),selectionBorderColor:Fe(Jbe),separatorColor:Fe(e_e),scrollbarShadow:Fe(EA),scrollbarSliderBackground:Fe(xZ),scrollbarSliderHoverBackground:Fe(kZ),scrollbarSliderActiveBackground:Fe(LZ)};var R5=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},fo=function(n,e){return function(t,i){e(t,i,n)}};function jye(n,e,t,i){let r,s,o;if(Array.isArray(n))o=n,r=e,s=t;else{const c=e;o=n.getActions(c),r=t,s=i}const a=jd.getInstance(),l=a.keyStatus.altKey||(Go||wo)&&a.keyStatus.shiftKey;TX(o,r,l,s?c=>c===s:c=>c==="navigation")}function Uye(n,e,t,i,r,s){let o,a,l,c,h;if(Array.isArray(n))h=n,o=e,a=t,l=i,c=r;else{const d=e;h=n.getActions(d),o=t,a=i,l=r,c=s}TX(h,o,!1,typeof a=="string"?d=>d===a:a,l,c)}function TX(n,e,t,i=o=>o==="navigation",r=()=>!1,s=!1){let o,a;Array.isArray(e)?(o=e,a=e):(o=e.primary,a=e.secondary);const l=new Set;for(const[c,h]of n){let u;i(c)?(u=o,u.length>0&&s&&u.push(new Ps)):(u=a,u.length>0&&u.push(new Ps));for(let d of h){t&&(d=d instanceof ku&&d.alt?d.alt:d);const g=u.push(d);d instanceof r5&&l.add({group:c,action:d,index:g-1})}}for(const{group:c,action:h,index:u}of l){const d=i(c)?o:a,g=h.actions;r(h,c,d.length)&&d.splice(u,1,...g)}}let Aw=class extends iR{constructor(e,t,i,r,s,o,a,l){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t?.draggable,keybinding:t?.keybinding,hoverDelegate:t?.hoverDelegate}),this._options=t,this._keybindingService=i,this._notificationService=r,this._contextKeyService=s,this._themeService=o,this._contextMenuService=a,this._accessibilityService=l,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new Pu),this._altKey=jd.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const i=()=>{const r=!!this._menuItemAction.alt?.enabled&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);r!==this._wantsAltCommand&&(this._wantsAltCommand=r,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(i)),this._register(we(e,"mouseleave",r=>{t=!1,i()})),this._register(we(e,"mouseenter",r=>{t=!0,i()})),i()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),i=this._commandAction.tooltip||this._commandAction.label;let r=t?C("titleAndKb","{0} ({1})",i,t):i;if(!this._wantsAltCommand&&this._menuItemAction.alt?.enabled){const s=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,o=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),a=o&&o.getLabel(),l=a?C("titleAndKb","{0} ({1})",s,a):s;r=C("titleAndKbAndAlt",`{0}
[{1}] {2}`,r,GA.modifierLabels[gl].altKey,l)}return r}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:i}=this;if(!t||!i)return;const r=this._commandAction.checked&&Aye(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(r)if(gi.isThemeIcon(r)){const s=gi.asClassNameArray(r);i.classList.add(...s),this._itemClassDispose.value=Mt(()=>{i.classList.remove(...s)})}else i.style.backgroundImage=b5(this._themeService.getColorTheme().type)?Bu(r.dark):Bu(r.light),i.classList.add("icon"),this._itemClassDispose.value=ih(Mt(()=>{i.style.backgroundImage="",i.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};Aw=R5([fo(2,ns),fo(3,wc),fo(4,Ei),fo(5,Ml),fo(6,qu),fo(7,yc)],Aw);let b9=class extends dk{constructor(e,t,i,r,s){const o={...t,menuAsChild:t?.menuAsChild??!1,classNames:t?.classNames??(gi.isThemeIcon(e.item.icon)?gi.asClassName(e.item.icon):void 0),keybindingProvider:t?.keybindingProvider??(a=>i.lookupKeybinding(a.id))};super(e,{getActions:()=>e.actions},r,o),this._keybindingService=i,this._contextMenuService=r,this._themeService=s}render(e){super.render(e),tf(this.element),e.classList.add("menu-entry");const t=this._action,{icon:i}=t.item;if(i&&!gi.isThemeIcon(i)){this.element.classList.add("icon");const r=()=>{this.element&&(this.element.style.backgroundImage=b5(this._themeService.getColorTheme().type)?Bu(i.dark):Bu(i.light))};r(),this._register(this._themeService.onDidColorThemeChange(()=>{r()}))}}};b9=R5([fo(2,ns),fo(3,qu),fo(4,Ml)],b9);let _9=class extends ec{constructor(e,t,i,r,s,o,a,l){super(null,e),this._keybindingService=i,this._notificationService=r,this._contextMenuService=s,this._menuService=o,this._instaService=a,this._storageService=l,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let c;const h=t?.persistLastActionId?l.get(this._storageKey,1):void 0;h&&(c=e.actions.find(d=>h===d.id)),c||(c=e.actions[0]),this._defaultAction=this._instaService.createInstance(Aw,c,{keybinding:this._getDefaultActionKeybindingLabel(c)});const u={keybindingProvider:d=>this._keybindingService.lookupKeybinding(d.id),...t,menuAsChild:t?.menuAsChild??!0,classNames:t?.classNames??["codicon","codicon-chevron-down"],actionRunner:t?.actionRunner??new km};this._dropdown=new dk(e,e.actions,this._contextMenuService,u),this._register(this._dropdown.actionRunner.onDidRun(d=>{d.action instanceof ku&&this.update(d.action)}))}update(e){this._options?.persistLastActionId&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(Aw,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends km{async runAction(t,i){await t.run(void 0)}},this._container&&this._defaultAction.render(dA(this._container,ft(".action-container")))}_getDefaultActionKeybindingLabel(e){let t;if(this._options?.renderKeybindingWithDefaultActionLabel){const i=this._keybindingService.lookupKeybinding(e.id);i&&(t=`(${i.getLabel()})`)}return t}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=ft(".action-container");this._defaultAction.render(it(this._container,t)),this._register(we(t,Be.KEY_DOWN,r=>{const s=new en(r);s.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),s.stopPropagation())}));const i=ft(".dropdown-action-container");this._dropdown.render(it(this._container,i)),this._register(we(i,Be.KEY_DOWN,r=>{const s=new en(r);s.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),this._defaultAction.element?.focus(),s.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};_9=R5([fo(2,ns),fo(3,wc),fo(4,qu),fo(5,Ym),fo(6,Ni),fo(7,A5)],_9);let v9=class extends Iye{constructor(e,t){super(null,e,e.actions.map(i=>({text:i.id===Ps.ID?"─────────":i.label,isDisabled:!i.enabled})),0,t,Vye,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(i=>i.checked)))}render(e){super.render(e),e.style.borderColor=Fe(AA)}runAction(e,t){const i=this.action.actions[t];i&&this.actionRunner.run(i)}};v9=R5([fo(1,Ry)],v9);function qye(n,e,t){return e instanceof ku?n.createInstance(Aw,e,t):e instanceof gv?e.item.isSelection?n.createInstance(v9,e):e.item.rememberDefaultAction?n.createInstance(_9,e,{...t,persistLastActionId:!0}):n.createInstance(b9,e,t):void 0}class Tu extends xe{constructor(e,t={}){super(),this._actionRunnerDisposables=this._register(new rt),this.viewItemDisposables=this._register(new jM),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new de),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new de({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new de),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new de),this.onWillRun=this._onWillRun.event,this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:this.options.triggerKeys?.keyDown??!1,keys:this.options.triggerKeys?.keys??[3,10]},this._hoverDelegate=t.hoverDelegate??this._register(tR()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new km,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(s=>this._onDidRun.fire(s))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(s=>this._onWillRun.fire(s))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let i,r;switch(this._orientation){case 0:i=[15],r=[17];break;case 1:i=[16],r=[18],this.domNode.className+=" vertical";break}this._register(we(this.domNode,Be.KEY_DOWN,s=>{const o=new en(s);let a=!0;const l=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;i&&(o.equals(i[0])||o.equals(i[1]))?a=this.focusPrevious():r&&(o.equals(r[0])||o.equals(r[1]))?a=this.focusNext():o.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():o.equals(14)?a=this.focusFirst():o.equals(13)?a=this.focusLast():o.equals(2)&&l instanceof ec&&l.trapsArrowNavigation?a=this.focusNext(void 0,!0):this.isTriggerKeyEvent(o)?this._triggerKeys.keyDown?this.doTrigger(o):this.triggerKeyDown=!0:a=!1,a&&(o.preventDefault(),o.stopPropagation())})),this._register(we(this.domNode,Be.KEY_UP,s=>{const o=new en(s);this.isTriggerKeyEvent(o)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(o)),o.preventDefault(),o.stopPropagation()):(o.equals(2)||o.equals(1026)||o.equals(16)||o.equals(18)||o.equals(15)||o.equals(17))&&this.updateFocusedItem()})),this.focusTracker=this._register(vw(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(Rs()===this.domNode||!Dr(Rs(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(i=>i instanceof ec&&i.isEnabled());t instanceof ec&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof ec&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(i=>{t=t||e.equals(i)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(Dr(Rs(),t)){this.focusedItem=e,this.viewItems[this.focusedItem]?.showHover?.();break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}getAction(e){if(typeof e=="number")return this.viewItems[e]?.action;if($r(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let t=0;t<this.actionsList.childNodes.length;t++)if(this.actionsList.childNodes[t]===e)return this.viewItems[t].action}}push(e,t={}){const i=Array.isArray(e)?e:[e];let r=J1(t.index)?t.index:null;i.forEach(s=>{const o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation");let a;const l={hoverDelegate:this._hoverDelegate,...t,isTabList:this.options.ariaRole==="tablist"};this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(s,l)),a||(a=new iR(this.context,s,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,we(o,Be.CONTEXT_MENU,c=>{ni.stop(c,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(o),this.focusable&&a instanceof ec&&this.viewItems.length===0&&a.setFocusable(!0),r===null||r<0||r>=this.actionsList.children.length?(this.actionsList.appendChild(o),this.viewItems.push(a)):(this.actionsList.insertBefore(o,this.actionsList.children[r]),this.viewItems.splice(r,0,a),r++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=is(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),fc(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,i;if(e===void 0?t=!0:typeof e=="number"?i=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const r=this.viewItems.findIndex(s=>s.isEnabled());this.focusedItem=r===-1?void 0:r,this.updateFocus(void 0,void 0,!0)}else i!==void 0&&(this.focusedItem=i),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e,t){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const i=this.focusedItem;let r;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=i,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,r=this.viewItems[this.focusedItem]}while(this.focusedItem!==i&&(this.options.focusOnlyEnabledItems&&!r.isEnabled()||r.action.id===Ps.ID));return this.updateFocus(void 0,void 0,t),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===Ps.ID));return this.updateFocus(!0),!0}updateFocus(e,t,i=!1){typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&this.viewItems[this.previouslyFocusedItem]?.blur();const r=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(r){let s=!0;Sx(r.focus)||(s=!1),this.options.focusOnlyEnabledItems&&Sx(r.isEnabled)&&!r.isEnabled()&&(s=!1),r.action.id===Ps.ID&&(s=!1),s?(i||this.previouslyFocusedItem!==this.focusedItem)&&(r.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),s&&r.showHover?.()}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof ec){const i=t._context===null||t._context===void 0?e:t._context;this.run(t._action,i)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=is(this.viewItems),this.getContainer().remove(),super.dispose()}}const w9=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,g6=/(&amp;)?(&amp;)([^\s&])/g;var fk;(function(n){n[n.Right=0]="Right",n[n.Left=1]="Left"})(fk||(fk={}));var y9;(function(n){n[n.Above=0]="Above",n[n.Below=1]="Below"})(y9||(y9={}));class G0 extends Tu{constructor(e,t,i,r){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const s=document.createElement("div");s.classList.add("monaco-menu"),s.setAttribute("role","presentation"),super(s,{orientation:1,actionViewItemProvider:c=>this.doGetActionViewItem(c,i,o),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...hi||wo?[10]:[]],keyDown:!0}}),this.menuStyles=r,this.menuElement=s,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,r),this._register(Zs.addTarget(s)),this._register(we(s,Be.KEY_DOWN,c=>{new en(c).equals(2)&&c.preventDefault()})),i.enableMnemonics&&this._register(we(s,Be.KEY_DOWN,c=>{const h=c.key.toLocaleLowerCase();if(this.mnemonics.has(h)){ni.stop(c,!0);const u=this.mnemonics.get(h);if(u.length===1&&(u[0]instanceof KV&&u[0].container&&this.focusItemByElement(u[0].container),u[0].onClick(c)),u.length>1){const d=u.shift();d&&d.container&&(this.focusItemByElement(d.container),u.push(d)),this.mnemonics.set(h,u)}}})),wo&&this._register(we(s,Be.KEY_DOWN,c=>{const h=new en(c);h.equals(14)||h.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),ni.stop(c,!0)):(h.equals(13)||h.equals(12))&&(this.focusedItem=0,this.focusPrevious(),ni.stop(c,!0))})),this._register(we(this.domNode,Be.MOUSE_OUT,c=>{const h=c.relatedTarget;Dr(h,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),c.stopPropagation())})),this._register(we(this.actionsList,Be.MOUSE_OVER,c=>{let h=c.target;if(!(!h||!Dr(h,this.actionsList)||h===this.actionsList)){for(;h.parentElement!==this.actionsList&&h.parentElement!==null;)h=h.parentElement;if(h.classList.contains("action-item")){const u=this.focusedItem;this.setFocusedItem(h),u!==this.focusedItem&&this.updateFocus()}}})),this._register(Zs.addTarget(this.actionsList)),this._register(we(this.actionsList,Ki.Tap,c=>{let h=c.initialTarget;if(!(!h||!Dr(h,this.actionsList)||h===this.actionsList)){for(;h.parentElement!==this.actionsList&&h.parentElement!==null;)h=h.parentElement;if(h.classList.contains("action-item")){const u=this.focusedItem;this.setFocusedItem(h),u!==this.focusedItem&&this.updateFocus()}}}));const o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new PA(s,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position="",this.styleScrollElement(a,r),this._register(we(s,Ki.Change,c=>{ni.stop(c,!0);const h=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:h-c.translationY})})),this._register(we(a,Be.MOUSE_UP,c=>{c.preventDefault()}));const l=lt(e);s.style.maxHeight=`${Math.max(10,l.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter((c,h)=>i.submenuIds?.has(c.id)?(console.warn(`Found submenu cycle: ${c.id}`),!1):!(c instanceof Ps&&(h===t.length-1||h===0||t[h-1]instanceof Ps))),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(c=>!(c instanceof YV)).forEach((c,h,u)=>{c.updatePositionInSet(h+1,u.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(i8(e)?this.styleSheet=xl(e):(G0.globalStyleSheet||(G0.globalStyleSheet=xl()),this.styleSheet=G0.globalStyleSheet)),this.styleSheet.textContent=Kye(t,i8(e))}styleScrollElement(e,t){const i=t.foregroundColor??"",r=t.backgroundColor??"",s=t.borderColor?`1px solid ${t.borderColor}`:"",o="5px",a=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=s,e.style.borderRadius=o,e.style.color=i,e.style.backgroundColor=r,e.style.boxShadow=a}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const i=this.actionsList.children[t];if(e===i){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,i){if(e instanceof Ps)return new YV(t.context,e,{icon:!0},this.menuStyles);if(e instanceof r5){const r=new KV(e,e.actions,i,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){const s=r.getMnemonic();if(s&&r.isEnabled()){let o=[];this.mnemonics.has(s)&&(o=this.mnemonics.get(s)),o.push(r),this.mnemonics.set(s,o)}}return r}else{const r={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const o=t.getKeyBinding(e);if(o){const a=o.getLabel();a&&(r.keybinding=a)}}const s=new DX(t.context,e,r,this.menuStyles);if(t.enableMnemonics){const o=s.getMnemonic();if(o&&s.isEnabled()){let a=[];this.mnemonics.has(o)&&(a=this.mnemonics.get(o)),a.push(s),this.mnemonics.set(o,a)}}return s}}}class DX extends ec{constructor(e,t,i,r){if(i.isMenu=!0,super(t,t,i),this.menuStyle=r,this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass="",this.options.label&&i.enableMnemonics){const s=this.action.label;if(s){const o=w9.exec(s);o&&(this.mnemonic=(o[1]?o[1]:o[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new Gs(()=>{this.element&&(this._register(we(this.element,Be.MOUSE_UP,s=>{if(ni.stop(s,!0),Cl){if(new ac(lt(this.element),s).rightButton)return;this.onClick(s)}else setTimeout(()=>{this.onClick(s)},0)})),this._register(we(this.element,Be.CONTEXT_MENU,s=>{ni.stop(s,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=it(this.element,ft("a.action-menu-item")),this._action.id===Ps.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=it(this.item,ft("span.menu-item-check"+gi.asCSSSelector(Je.menuSelection))),this.check.setAttribute("role","none"),this.label=it(this.item,ft("span.action-label")),this.options.label&&this.options.keybinding&&(it(this.item,ft("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item?.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){if(this.label&&this.options.label){fc(this.label);let e=eX(this.action.label);if(e){const t=Gye(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));const i=w9.exec(e);if(i){e=cv(e),g6.lastIndex=0;let r=g6.exec(e);for(;r&&r[1];)r=g6.exec(e);const s=o=>o.replace(/&amp;&amp;/g,"&amp;");r?this.label.append(QL(s(e.substr(0,r.index))," "),ft("u",{"aria-hidden":"true"},r[3]),xfe(s(e.substr(r.index+r[0].length))," ")):this.label.innerText=s(e).trim(),this.item?.setAttribute("aria-keyshortcuts",(i[1]?i[1]:i[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,r=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",s=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=i??"",this.item.style.outline=r,this.item.style.outlineOffset=s),this.check&&(this.check.style.color=t??"")}}class KV extends DX{constructor(e,t,i,r,s){super(e,e,r,s),this.submenuActions=t,this.parentData=i,this.submenuOptions=r,this.mysubmenu=null,this.submenuDisposables=this._register(new rt),this.mouseOver=!1,this.expandDirection=r&&r.expandDirection!==void 0?r.expandDirection:{horizontal:fk.Right,vertical:y9.Below},this.showScheduler=new Gs(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new Gs(()=>{this.element&&!Dr(Rs(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=it(this.item,ft("span.submenu-indicator"+gi.asCSSSelector(Je.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(we(this.element,Be.KEY_UP,t=>{const i=new en(t);(i.equals(17)||i.equals(3))&&(ni.stop(t,!0),this.createSubmenu(!0))})),this._register(we(this.element,Be.KEY_DOWN,t=>{const i=new en(t);Rs()===this.item&&(i.equals(17)||i.equals(3))&&ni.stop(t,!0)})),this._register(we(this.element,Be.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(we(this.element,Be.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(we(this.element,Be.FOCUS_OUT,t=>{this.element&&!Dr(Rs(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){ni.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,i,r){const s={top:0,left:0};return s.left=u0(e.width,t.width,{position:r.horizontal===fk.Right?0:1,offset:i.left,size:i.width}),s.left>=i.left&&s.left<i.left+i.width&&(i.left+10+t.width<=e.width&&(s.left=i.left+10),i.top+=10,i.height=0),s.top=u0(e.height,t.height,{position:0,offset:i.top,size:0}),s.top+t.height===i.top&&s.top+i.height+t.height<=e.height&&(s.top+=i.height),s}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=it(this.element,ft("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=lt(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),i=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new G0(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new o8],this.submenuOptions,this.menuStyle);const r=this.element.getBoundingClientRect(),s={top:r.top-i,left:r.left,height:r.height+2*i,width:r.width},o=this.submenuContainer.getBoundingClientRect(),a=lt(this.element),{top:l,left:c}=this.calculateSubmenuMenuLayout(new au(a.innerWidth,a.innerHeight),au.lift(o),s,this.expandDirection);this.submenuContainer.style.left=`${c-o.left}px`,this.submenuContainer.style.top=`${l-o.top}px`,this.submenuDisposables.add(we(this.submenuContainer,Be.KEY_UP,h=>{new en(h).equals(15)&&(ni.stop(h,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(we(this.submenuContainer,Be.KEY_DOWN,h=>{new en(h).equals(15)&&ni.stop(h,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){this.item&&this.item?.setAttribute("aria-expanded",e)}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class YV extends iR{constructor(e,t,i,r){super(e,t,i),this.menuStyles=r}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function Gye(n){const e=w9,t=e.exec(n);if(!t)return n;const i=!t[1];return n.replace(e,i?"$2$3":"").trim()}function ZV(n){const e=$K()[n.id];return`.codicon-${n.id}:before { content: '\\${e.toString(16)}'; }`}function Kye(n,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${ZV(Je.menuSelection)}
${ZV(Je.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
	max-height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const i=n.scrollbarShadow;i&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${i} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${i} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${i} 6px 6px 6px -6px inset;
				}
			`);const r=n.scrollbarSliderBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${r};
				}
			`);const s=n.scrollbarSliderHoverBackground;s&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${s};
				}
			`);const o=n.scrollbarSliderActiveBackground;o&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${o};
				}
			`)}return t}class Yye{constructor(e,t,i,r){this.contextViewService=e,this.telemetryService=t,this.notificationService=i,this.keybindingService=r,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=Rs();let i;const r=$r(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:s=>{this.lastContainer=s;const o=e.getMenuClassName?e.getMenuClassName():"";o&&(s.className+=" "+o),this.options.blockMouse&&(this.block=s.appendChild(ft(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",this.blockDisposable?.dispose(),this.blockDisposable=we(this.block,Be.MOUSE_DOWN,h=>h.stopPropagation()));const a=new rt,l=e.actionRunner||new km;l.onWillRun(h=>this.onActionRun(h,!e.skipTelemetry),this,a),l.onDidRun(this.onDidActionRun,this,a),i=new G0(s,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:h=>this.keybindingService.lookupKeybinding(h.id)},$ye),i.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),i.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a);const c=lt(s);return a.add(we(c,Be.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(we(c,Be.MOUSE_DOWN,h=>{if(h.defaultPrevented)return;const u=new ac(c,h);let d=u.target;if(!u.rightButton){for(;d;){if(d===s)return;d=d.parentElement}this.contextViewService.hideContextView(!0)}})),ih(a,i)},focus:()=>{i?.focus(!!e.autoSelectFirstItem)},onHide:s=>{e.onHide?.(!!s),this.block&&(this.block.remove(),this.block=null),this.blockDisposable?.dispose(),this.blockDisposable=null,this.lastContainer&&(Rs()===this.lastContainer||Dr(Rs(),this.lastContainer))&&this.focusToReturn?.focus(),this.lastContainer=null}},r,!!r)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!vy(e.error)&&this.notificationService.error(e.error)}}var Zye=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Hp=function(n,e){return function(t,i){e(t,i,n)}};let C9=class extends xe{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new Yye(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,i,r,s,o){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=i,this.keybindingService=r,this.menuService=s,this.contextKeyService=o,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new de),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new de)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=S9.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...e,onHide:t=>{e.onHide?.(t),this._onDidHideContextMenu.fire()}}),jd.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};C9=Zye([Hp(0,Zm),Hp(1,wc),Hp(2,Ry),Hp(3,ns),Hp(4,Ym),Hp(5,Ei)],C9);var S9;(function(n){function e(i){return i&&i.menuId instanceof es}function t(i,r,s){if(!e(i))return i;const{menuId:o,menuActionOptions:a,contextKeyService:l}=i;return{...i,getActions:()=>{const c=[];if(o){const h=r.getMenuActions(o,l??s,a);jye(h,c)}return i.getActions?Ps.join(i.getActions(),c):c}}}n.transform=t})(S9||(S9={}));var gk;(function(n){n[n.API=0]="API",n[n.USER=1]="USER"})(gk||(gk={}));var nR=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},mk=function(n,e){return function(t,i){e(t,i,n)}};let x9=class{constructor(e){this._commandService=e}async open(e,t){if(!rA(e,Vt.command))return!1;if(!t?.allowCommands||(typeof e=="string"&&(e=Ut.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let i=[];try{i=Y8(decodeURIComponent(e.query))}catch{try{i=Y8(e.query)}catch{}}return Array.isArray(i)||(i=[i]),await this._commandService.executeCommand(e.path,...i),!0}};x9=nR([mk(0,Ta)],x9);let k9=class{constructor(e){this._editorService=e}async open(e,t){typeof e=="string"&&(e=Ut.parse(e));const{selection:i,uri:r}=S_e(e);return e=r,e.scheme===Vt.file&&(e=tve(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:i,source:t?.fromUserGesture?gk.USER:gk.API,...t?.editorOptions}},this._editorService.getFocusedCodeEditor(),t?.openToSide),!0}};k9=nR([mk(0,vr)],k9);let L9=class{constructor(e,t){this._openers=new Wo,this._validators=new Wo,this._resolvers=new Wo,this._resolvedUriTargets=new xa(i=>i.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new Wo,this._defaultExternalOpener={openExternal:async i=>(Oz(i,Vt.http,Vt.https)?xY(i):Vi.location.href=i,!0)},this._openers.push({open:async(i,r)=>r?.openExternal||Oz(i,Vt.mailto,Vt.http,Vt.https,Vt.vsls)?(await this._doOpenExternal(i,r),!0):!1}),this._openers.push(new x9(t)),this._openers.push(new k9(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}async open(e,t){const i=typeof e=="string"?Ut.parse(e):e,r=this._resolvedUriTargets.get(i)??e;for(const s of this._validators)if(!await s.shouldOpen(r,t))return!1;for(const s of this._openers)if(await s.open(e,t))return!0;return!1}async resolveExternalUri(e,t){for(const i of this._resolvers)try{const r=await i.resolveExternalUri(e,t);if(r)return this._resolvedUriTargets.has(r.resolved)||this._resolvedUriTargets.set(r.resolved,e),r}catch{}throw new Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){const i=typeof e=="string"?Ut.parse(e):e;let r;try{r=(await this.resolveExternalUri(i,t)).resolved}catch{r=i}let s;if(typeof e=="string"&&i.toString()===r.toString()?s=e:s=encodeURI(r.toString(!0)),t?.allowContributedOpeners){const o=typeof t?.allowContributedOpeners=="string"?t?.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(await a.openExternal(s,{sourceUri:i,preferredOpenerId:o},yl.None))return!0}return this._defaultExternalOpener.openExternal(s,{sourceUri:i},yl.None)}dispose(){this._validators.clear()}};L9=nR([mk(0,vr),mk(1,Ta)],L9);const zy=ai("editorWorkerService");var $a;(function(n){n[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error"})($a||($a={}));(function(n){function e(o,a){return a-o}n.compare=e;const t=Object.create(null);t[n.Error]=C("sev.error","Error"),t[n.Warning]=C("sev.warning","Warning"),t[n.Info]=C("sev.info","Info");function i(o){return t[o]||""}n.toString=i;function r(o){switch(o){case rr.Error:return n.Error;case rr.Warning:return n.Warning;case rr.Info:return n.Info;case rr.Ignore:return n.Hint}}n.fromSeverity=r;function s(o){switch(o){case n.Error:return rr.Error;case n.Warning:return rr.Warning;case n.Info:return rr.Info;case n.Hint:return rr.Ignore}}n.toSeverity=s})($a||($a={}));var XV;(function(n){const e="";function t(r){return i(r,!0)}n.makeKey=t;function i(r,s){const o=[e];return r.source?o.push(r.source.replace("¦","\\¦")):o.push(e),r.code?typeof r.code=="string"?o.push(r.code.replace("¦","\\¦")):o.push(r.code.value.replace("¦","\\¦")):o.push(e),r.severity!==void 0&&r.severity!==null?o.push($a.toString(r.severity)):o.push(e),r.message&&s?o.push(r.message.replace("¦","\\¦")):o.push(e),r.startLineNumber!==void 0&&r.startLineNumber!==null?o.push(r.startLineNumber.toString()):o.push(e),r.startColumn!==void 0&&r.startColumn!==null?o.push(r.startColumn.toString()):o.push(e),r.endLineNumber!==void 0&&r.endLineNumber!==null?o.push(r.endLineNumber.toString()):o.push(e),r.endColumn!==void 0&&r.endColumn!==null?o.push(r.endColumn.toString()):o.push(e),o.push(e),o.join("¦")}n.makeKeyOptionalMessage=i})(XV||(XV={}));const ep=ai("markerService"),EX=ie("editor.lineHighlightBackground",null,C("lineHighlight","Background color for the highlight of line at the cursor position.")),QV=ie("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:Ci},C("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));ie("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},C("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);ie("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:Hn,hcLight:Hn},C("rangeHighlightBorder","Background color of the border around highlighted ranges."));ie("editor.symbolHighlightBackground",{dark:Ud,light:Ud,hcDark:null,hcLight:null},C("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);ie("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:Hn,hcLight:Hn},C("symbolHighlightBorder","Background color of the border around highlighted symbols."));const P5=ie("editorCursor.foreground",{dark:"#AEAFAD",light:Me.black,hcDark:Me.white,hcLight:"#0F4A85"},C("caret","Color of the editor cursor.")),rR=ie("editorCursor.background",null,C("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),IX=ie("editorMultiCursor.primary.foreground",P5,C("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),Xye=ie("editorMultiCursor.primary.background",rR,C("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),NX=ie("editorMultiCursor.secondary.foreground",P5,C("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),Qye=ie("editorMultiCursor.secondary.background",rR,C("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),sR=ie("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},C("editorWhitespaces","Color of whitespace characters in the editor.")),Jye=ie("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:Me.white,hcLight:"#292929"},C("editorLineNumbers","Color of editor line numbers.")),eCe=ie("editorIndentGuide.background",sR,C("editorIndentGuides","Color of the editor indentation guides."),!1,C("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),tCe=ie("editorIndentGuide.activeBackground",sR,C("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,C("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),Hy=ie("editorIndentGuide.background1",eCe,C("editorIndentGuides1","Color of the editor indentation guides (1).")),iCe=ie("editorIndentGuide.background2","#00000000",C("editorIndentGuides2","Color of the editor indentation guides (2).")),nCe=ie("editorIndentGuide.background3","#00000000",C("editorIndentGuides3","Color of the editor indentation guides (3).")),rCe=ie("editorIndentGuide.background4","#00000000",C("editorIndentGuides4","Color of the editor indentation guides (4).")),sCe=ie("editorIndentGuide.background5","#00000000",C("editorIndentGuides5","Color of the editor indentation guides (5).")),oCe=ie("editorIndentGuide.background6","#00000000",C("editorIndentGuides6","Color of the editor indentation guides (6).")),Vy=ie("editorIndentGuide.activeBackground1",tCe,C("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),aCe=ie("editorIndentGuide.activeBackground2","#00000000",C("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),lCe=ie("editorIndentGuide.activeBackground3","#00000000",C("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),cCe=ie("editorIndentGuide.activeBackground4","#00000000",C("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),hCe=ie("editorIndentGuide.activeBackground5","#00000000",C("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),uCe=ie("editorIndentGuide.activeBackground6","#00000000",C("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),dCe=ie("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:Hn,hcLight:Hn},C("editorActiveLineNumber","Color of editor active line number"),!1,C("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));ie("editorLineNumber.activeForeground",dCe,C("editorActiveLineNumber","Color of editor active line number"));const fCe=ie("editorLineNumber.dimmedForeground",null,C("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));ie("editorRuler.foreground",{dark:"#5A5A5A",light:Me.lightgrey,hcDark:Me.white,hcLight:"#292929"},C("editorRuler","Color of the editor rulers."));ie("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},C("editorCodeLensForeground","Foreground color of editor CodeLens"));ie("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},C("editorBracketMatchBackground","Background color behind matching brackets"));ie("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:Ci,hcLight:Ci},C("editorBracketMatchBorder","Color for matching brackets boxes"));const gCe=ie("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},C("editorOverviewRulerBorder","Color of the overview ruler border.")),mCe=ie("editorOverviewRuler.background",null,C("editorOverviewRulerBackground","Background color of the editor overview ruler."));ie("editorGutter.background",gc,C("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));ie("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:Me.fromHex("#fff").transparent(.8),hcLight:Ci},C("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));const pCe=ie("editorUnnecessaryCode.opacity",{dark:Me.fromHex("#000a"),light:Me.fromHex("#0007"),hcDark:null,hcLight:null},C("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));ie("editorGhostText.border",{dark:null,light:null,hcDark:Me.fromHex("#fff").transparent(.8),hcLight:Me.fromHex("#292929").transparent(.8)},C("editorGhostTextBorder","Border color of ghost text in the editor."));ie("editorGhostText.foreground",{dark:Me.fromHex("#ffffff56"),light:Me.fromHex("#0007"),hcDark:null,hcLight:null},C("editorGhostTextForeground","Foreground color of the ghost text in the editor."));ie("editorGhostText.background",null,C("editorGhostTextBackground","Background color of the ghost text in the editor."));const bCe=new Me(new pi(0,122,204,.6));ie("editorOverviewRuler.rangeHighlightForeground",bCe,C("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const _Ce=ie("editorOverviewRuler.errorForeground",{dark:new Me(new pi(255,18,18,.7)),light:new Me(new pi(255,18,18,.7)),hcDark:new Me(new pi(255,50,50,1)),hcLight:"#B5200D"},C("overviewRuleError","Overview ruler marker color for errors.")),vCe=ie("editorOverviewRuler.warningForeground",{dark:mf,light:mf,hcDark:Xx,hcLight:Xx},C("overviewRuleWarning","Overview ruler marker color for warnings.")),wCe=ie("editorOverviewRuler.infoForeground",{dark:Dm,light:Dm,hcDark:Qx,hcLight:Qx},C("overviewRuleInfo","Overview ruler marker color for infos.")),MX=ie("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},C("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),AX=ie("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},C("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),RX=ie("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},C("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),PX=ie("editorBracketHighlight.foreground4","#00000000",C("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),OX=ie("editorBracketHighlight.foreground5","#00000000",C("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),BX=ie("editorBracketHighlight.foreground6","#00000000",C("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),yCe=ie("editorBracketHighlight.unexpectedBracket.foreground",{dark:new Me(new pi(255,18,18,.8)),light:new Me(new pi(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},C("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),CCe=ie("editorBracketPairGuide.background1","#00000000",C("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),SCe=ie("editorBracketPairGuide.background2","#00000000",C("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),xCe=ie("editorBracketPairGuide.background3","#00000000",C("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),kCe=ie("editorBracketPairGuide.background4","#00000000",C("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),LCe=ie("editorBracketPairGuide.background5","#00000000",C("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),TCe=ie("editorBracketPairGuide.background6","#00000000",C("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),DCe=ie("editorBracketPairGuide.activeBackground1","#00000000",C("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),ECe=ie("editorBracketPairGuide.activeBackground2","#00000000",C("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),ICe=ie("editorBracketPairGuide.activeBackground3","#00000000",C("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),NCe=ie("editorBracketPairGuide.activeBackground4","#00000000",C("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),MCe=ie("editorBracketPairGuide.activeBackground5","#00000000",C("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),ACe=ie("editorBracketPairGuide.activeBackground6","#00000000",C("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));ie("editorUnicodeHighlight.border",mf,C("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));ie("editorUnicodeHighlight.background",I1e,C("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));Uu((n,e)=>{const t=n.getColor(gc),i=n.getColor(EX),r=i&&!i.isTransparent()?i:t;r&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${r}; }`)});function RCe(n,e){const t=[],i=[];for(const r of n)e.has(r)||t.push(r);for(const r of e)n.has(r)||i.push(r);return{removed:t,added:i}}function PCe(n,e){const t=new Set;for(const i of e)n.has(i)&&t.add(i);return t}var OCe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},JV=function(n,e){return function(t,i){e(t,i,n)}};let T9=class extends xe{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new de),this._markerDecorations=new xa,e.getModels().forEach(i=>this._onModelAdded(i)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const i=this._markerDecorations.get(e);return i&&i.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const i=this._markerDecorations.get(t);i&&this._updateDecorations(i)})}_onModelAdded(e){const t=new BCe(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===Vt.inMemory||e.uri.scheme===Vt.internal||e.uri.scheme===Vt.vscode)&&this._markerService?.read({resource:e.uri}).map(i=>i.owner).forEach(i=>this._markerService.remove(i,[e.uri]))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model)}};T9=OCe([JV(0,Qs),JV(1,ep)],T9);class BCe extends xe{constructor(e){super(),this.model=e,this._map=new Mpe,this._register(Mt(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(e){const{added:t,removed:i}=RCe(new Set(this._map.keys()),new Set(e));if(t.length===0&&i.length===0)return!1;const r=i.map(a=>this._map.get(a)),s=t.map(a=>({range:this._createDecorationRange(this.model,a),options:this._createDecorationOption(a)})),o=this.model.deltaDecorations(r,s);for(const a of i)this._map.delete(a);for(let a=0;a<o.length;a++)this._map.set(t[a],o[a]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,t){let i=oe.lift(t);if(t.severity===$a.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),i=e.validateRange(i),i.isEmpty()){const r=e.getLineLastNonWhitespaceColumn(i.startLineNumber)||e.getLineMaxColumn(i.startLineNumber);if(r===1||i.endColumn>=r)return i;const s=e.getWordAtPosition(i.getStartPosition());s&&(i=new oe(i.startLineNumber,s.startColumn,i.endLineNumber,s.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&i.startLineNumber===i.endLineNumber){const r=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);r<i.endColumn&&(i=new oe(i.startLineNumber,r,i.endLineNumber,i.endColumn),t.startColumn=r)}return i}_createDecorationOption(e){let t,i,r,s,o;switch(e.severity){case $a.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",r=0;break;case $a.Info:t="squiggly-info",i=zp(wCe),r=10,o={color:zp(G1e),position:1};break;case $a.Warning:t="squiggly-warning",i=zp(vCe),r=20,o={color:zp(K1e),position:1};break;case $a.Error:default:t="squiggly-error",i=zp(_Ce),r=30,o={color:zp(Y1e),position:1};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(s="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(s="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:i,position:Vx.Right},minimap:o,zIndex:r,inlineClassName:s}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}}const FX=ai("markerDecorationsService");class gr{static _nextVisibleColumn(e,t,i){return e===9?gr.nextRenderTabStop(t,i):hf(e)||tA(e)?t+2:t+1}static visibleColumnFromColumn(e,t,i){const r=Math.min(t-1,e.length),s=e.substring(0,r),o=new Ax(s);let a=0;for(;!o.eol();){const l=Mx(s,r,o.offset);o.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,i)}return a}static columnFromVisibleColumn(e,t,i){if(t<=0)return 1;const r=e.length,s=new Ax(e);let o=0,a=1;for(;!s.eol();){const l=Mx(e,r,s.offset);s.nextGraphemeLength();const c=this._nextVisibleColumn(l,o,i),h=s.offset+1;if(c>=t){const u=t-o;return c-t<u?h:a}o=c,a=h}return r+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}function FCe(n,e,t){let i=0;for(let s=0;s<n.length;s++)n.charAt(s)==="	"?i=gr.nextIndentTabStop(i,e):i++;let r="";if(!t){const s=Math.floor(i/e);i=i%e;for(let o=0;o<s;o++)r+="	"}for(let s=0;s<i;s++)r+=" ";return r}function WX(n,e,t){let i=qo(n);return i===-1&&(i=n.length),FCe(n.substring(0,i),e,t)+n.substring(i)}class e${constructor(e,t,i,r){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=i,this.isInvalid=r}}class WCe{constructor(e,t,i,r,s,o){this.range=e,this.openingBracketRange=t,this.closingBracketRange=i,this.nestingLevel=r,this.nestingLevelOfEqualBracketType=s,this.bracketPairNode=o}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class zCe extends WCe{constructor(e,t,i,r,s,o,a){super(e,t,i,r,s,o),this.minVisibleColumnIndentation=a}}function HCe(n,e,t,i){return n!==t?Bn(t-n,i):Bn(0,i-e)}const po=0;function pk(n){return n===0}const wa=2**26;function Bn(n,e){return n*wa+e}function Ka(n){const e=n,t=Math.floor(e/wa),i=e-t*wa;return new gf(t,i)}function VCe(n){return Math.floor(n/wa)}function Qn(n,e){let t=n+e;return e>=wa&&(t=t-n%wa),t}function $Ce(n,e){return n.reduce((t,i)=>Qn(t,e(i)),po)}function zX(n,e){return n===e}function Rw(n,e){const t=n,i=e;if(i-t<=0)return po;const s=Math.floor(t/wa),o=Math.floor(i/wa),a=i-o*wa;if(s===o){const l=t-s*wa;return Bn(0,a-l)}else return Bn(o-s,a)}function K0(n,e){return n<e}function Y0(n,e){return n<=e}function G_(n,e){return n>=e}function p0(n){return Bn(n.lineNumber-1,n.column-1)}function nm(n,e){const t=n,i=Math.floor(t/wa),r=t-i*wa,s=e,o=Math.floor(s/wa),a=s-o*wa;return new oe(i+1,r+1,o+1,a+1)}function jCe(n){const e=nb(n);return Bn(e.length-1,e[e.length-1].length)}class mu{static fromModelContentChanges(e){return e.map(i=>{const r=oe.lift(i.range);return new mu(p0(r.getStartPosition()),p0(r.getEndPosition()),jCe(i.text))}).reverse()}constructor(e,t,i){this.startOffset=e,this.endOffset=t,this.newLength=i}toString(){return`[${Ka(this.startOffset)}...${Ka(this.endOffset)}) -> ${Ka(this.newLength)}`}}class UCe{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(t=>oR.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],i=t?this.translateOldToCur(t.offsetObj):null;return i===null?null:Rw(e,i)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?Bn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):Bn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=Ka(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?Bn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):Bn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],i=this.translateOldToCur(t.endOffsetAfterObj);if(Y0(i,e)){this.nextEditIdx++;const r=Ka(i),s=Ka(this.translateOldToCur(t.endOffsetBeforeObj)),o=r.lineCount-s.lineCount;this.deltaOldToNewLineCount+=o;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=r.columnCount-s.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class oR{static from(e){return new oR(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,i){this.endOffsetBeforeObj=Ka(t),this.endOffsetAfterObj=Ka(Qn(e,i)),this.offsetObj=Ka(e)}}const z2=[],Oa=class Oa{static create(e,t){if(e<=128&&t.length===0){let i=Oa.cache[e];return i||(i=new Oa(e,t),Oa.cache[e]=i),i}return new Oa(e,t)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const i=t.getKey(e);let r=i>>5;if(r===0){const o=1<<i|this.items;return o===this.items?this:Oa.create(o,this.additionalItems)}r--;const s=this.additionalItems.slice(0);for(;s.length<r;)s.push(0);return s[r]|=1<<(i&31),Oa.create(this.items,s)}merge(e){const t=this.items|e.items;if(this.additionalItems===z2&&e.additionalItems===z2)return t===this.items?this:t===e.items?e:Oa.create(t,z2);const i=[];for(let r=0;r<Math.max(this.additionalItems.length,e.additionalItems.length);r++){const s=this.additionalItems[r]||0,o=e.additionalItems[r]||0;i.push(s|o)}return Oa.create(t,i)}intersects(e){if((this.items&e.items)!==0)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if((this.additionalItems[t]&e.additionalItems[t])!==0)return!0;return!1}};Oa.cache=new Array(129),Oa.empty=Oa.create(0,z2);let Bo=Oa;const t$={getKey(n){return n}};class qCe{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class aR{get length(){return this._length}constructor(e){this._length=e}}class Pw extends aR{static create(e,t,i){let r=e.length;return t&&(r=Qn(r,t.length)),i&&(r=Qn(r,i.length)),new Pw(r,e,t,i,t?t.missingOpeningBracketIds:Bo.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,i,r,s){super(e),this.openingBracket=t,this.child=i,this.closingBracket=r,this.missingOpeningBracketIds=s}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new Pw(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(Qn(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class lh extends aR{static create23(e,t,i,r=!1){let s=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(s=Qn(s,t.length),o=o.merge(t.missingOpeningBracketIds),i){if(e.listHeight!==i.listHeight)throw new Error("Invalid list heights");s=Qn(s,i.length),o=o.merge(i.missingOpeningBracketIds)}return r?new GCe(s,e.listHeight+1,e,t,i,o):new Ow(s,e.listHeight+1,e,t,i,o)}static getEmpty(){return new KCe(po,0,[],Bo.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,i){super(e),this.listHeight=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(e-1,i),i}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(0,i),i}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===4;){const i=t.childrenLength;if(i===0)throw new Ti;t=t.getChild(i-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let r=1;r<e;r++){const s=this.getChild(r);t=Qn(t,s.length),i=i.merge(s.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,r=e;for(let s=0;s<this.childrenLength;s++){const o=this.getChild(s);o&&(i=Math.min(i,o.computeMinIndentation(r,t)),r=Qn(r,o.length))}return this.cachedMinIndentation=i,i}}class Ow extends lh{get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,i,r,s,o){super(e,t,o),this._item1=i,this._item2=r,this._item3=s}deepClone(){return new Ow(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class GCe extends Ow{toMutable(){return new Ow(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class bk extends lh{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,i,r){super(e,t,r),this._children=i}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new bk(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class KCe extends bk{toMutable(){return new bk(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const YCe=[];class lR extends aR{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return YCe}deepClone(){return this}}class Eg extends lR{get kind(){return 0}get missingOpeningBracketIds(){return Bo.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const i=Ka(e),r=(i.columnCount===0?i.lineCount:i.lineCount+1)+1,s=VCe(Qn(e,this.length))+1;let o=Number.MAX_SAFE_INTEGER;for(let a=r;a<=s;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const h=gr.visibleColumnFromColumn(c,l,t.getOptions().tabSize);o=Math.min(o,h)}return o}}class _k extends lR{static create(e,t,i){return new _k(e,t,i)}get kind(){return 1}get missingOpeningBracketIds(){return Bo.getEmpty()}constructor(e,t,i){super(e),this.bracketInfo=t,this.bracketIds=i}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class ZCe extends lR{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}let Fd=class{constructor(e,t,i,r,s){this.length=e,this.kind=t,this.bracketId=i,this.bracketIds=r,this.astNode=s}};class XCe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new QCe(this.textModel,this.bracketTokens),this._offset=po,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return Bn(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=Qn(this._offset,e);const t=Ka(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Qn(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class QCe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const s=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=s.length,s}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let i=0;for(;;){const s=this.lineTokens,o=s.getCount();let a=null;if(this.lineTokenOffset<o){const l=s.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<o&&l===s.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=Jl.getTokenType(l)===0,h=Jl.containsBalancedBrackets(l),u=s.getEndOffset(this.lineTokenOffset);if(h&&c&&this.lineCharOffset<u){const d=s.getLanguageId(this.lineTokenOffset),g=this.line.substring(this.lineCharOffset,u),p=this.bracketTokens.getSingleLanguageBracketTokens(d),b=p.regExpGlobal;if(b){b.lastIndex=0;const _=b.exec(g);_&&(a=p.getToken(_[0]),a&&(this.lineCharOffset+=_.index))}}if(i+=u-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=u}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,i+=33,i>1e3))break;if(i>1500)break}const r=HCe(e,t,this.lineIdx,this.lineCharOffset);return new Fd(r,0,-1,Bo.getEmpty(),new Eg(r))}}class JCe{constructor(e,t){this.text=e,this._offset=po,this.idx=0;const i=t.getRegExpStr(),r=i?new RegExp(i+`|
`,"gi"):null,s=[];let o,a=0,l=0,c=0,h=0;const u=[];for(let p=0;p<60;p++)u.push(new Fd(Bn(0,p),0,-1,Bo.getEmpty(),new Eg(Bn(0,p))));const d=[];for(let p=0;p<60;p++)d.push(new Fd(Bn(1,p),0,-1,Bo.getEmpty(),new Eg(Bn(1,p))));if(r)for(r.lastIndex=0;(o=r.exec(e))!==null;){const p=o.index,b=o[0];if(b===`
`)a++,l=p+1;else{if(c!==p){let _;if(h===a){const w=p-c;if(w<u.length)_=u[w];else{const y=Bn(0,w);_=new Fd(y,0,-1,Bo.getEmpty(),new Eg(y))}}else{const w=a-h,y=p-l;if(w===1&&y<d.length)_=d[y];else{const k=Bn(w,y);_=new Fd(k,0,-1,Bo.getEmpty(),new Eg(k))}}s.push(_)}s.push(t.getToken(b)),c=p+b.length,h=a}}const g=e.length;if(c!==g){const p=h===a?Bn(0,g-c):Bn(a-h,g-l);s.push(new Fd(p,0,-1,Bo.getEmpty(),new Eg(p)))}this.length=Bn(a,g-l),this.tokens=s}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new Mde}}class cR{static createFromLanguage(e,t){function i(s){return t.getKey(`${s.languageId}:::${s.bracketText}`)}const r=new Map;for(const s of e.bracketsNew.openingBrackets){const o=Bn(0,s.bracketText.length),a=i(s),l=Bo.getEmpty().add(a,t$);r.set(s.bracketText,new Fd(o,1,a,l,_k.create(o,s,l)))}for(const s of e.bracketsNew.closingBrackets){const o=Bn(0,s.bracketText.length);let a=Bo.getEmpty();const l=s.getOpeningBrackets();for(const c of l)a=a.add(i(c),t$);r.set(s.bracketText,new Fd(o,2,i(l[0]),a,_k.create(o,s,a)))}return new cR(r)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>e2e(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,i]of this.map)if(i.kind===2&&i.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}function e2e(n){let e=Ou(n);return/^[\w ]+/.test(n)&&(e=`\\b${e}`),/[\w ]+$/.test(n)&&(e=`${e}\\b`),e}class t2e{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=cR.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function i2e(n){if(n.length===0)return null;if(n.length===1)return n[0];let e=0;function t(){if(e>=n.length)return null;const o=e,a=n[o].listHeight;for(e++;e<n.length&&n[e].listHeight===a;)e++;return e-o>=2?HX(o===0&&e===n.length?n:n.slice(o,e),!1):n[o]}let i=t(),r=t();if(!r)return i;for(let o=t();o;o=t())i$(i,r)<=i$(r,o)?(i=m6(i,r),r=o):r=m6(r,o);return m6(i,r)}function HX(n,e=!1){if(n.length===0)return null;if(n.length===1)return n[0];let t=n.length;for(;t>3;){const i=t>>1;for(let r=0;r<i;r++){const s=r<<1;n[r]=lh.create23(n[s],n[s+1],s+3===t?n[s+2]:null,e)}t=i}return lh.create23(n[0],n[1],t>=3?n[2]:null,e)}function i$(n,e){return Math.abs(n.listHeight-e.listHeight)}function m6(n,e){return n.listHeight===e.listHeight?lh.create23(n,e,null,!1):n.listHeight>e.listHeight?n2e(n,e):r2e(e,n)}function n2e(n,e){n=n.toMutable();let t=n;const i=[];let r;for(;;){if(e.listHeight===t.listHeight){r=e;break}if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeLastElementMutable()}for(let s=i.length-1;s>=0;s--){const o=i[s];r?o.childrenLength>=3?r=lh.create23(o.unappendChild(),r,null,!1):(o.appendChildOfSameHeight(r),r=void 0):o.handleChildrenChanged()}return r?lh.create23(n,r,null,!1):n}function r2e(n,e){n=n.toMutable();let t=n;const i=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeFirstElementMutable()}let r=e;for(let s=i.length-1;s>=0;s--){const o=i[s];r?o.childrenLength>=3?r=lh.create23(r,o.unprependChild(),null,!1):(o.prependChildOfSameHeight(r),r=void 0):o.handleChildrenChanged()}return r?lh.create23(r,n,null,!1):n}class s2e{constructor(e){this.lastOffset=po,this.nextNodes=[e],this.offsets=[po],this.idxs=[]}readLongestNodeAt(e,t){if(K0(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const i=b_(this.nextNodes);if(!i)return;const r=b_(this.offsets);if(K0(e,r))return;if(K0(r,e))if(Qn(r,i.length)<=e)this.nextNodeAfterCurrent();else{const s=p6(i);s!==-1?(this.nextNodes.push(i.getChild(s)),this.offsets.push(r),this.idxs.push(s)):this.nextNodeAfterCurrent()}else{if(t(i))return this.nextNodeAfterCurrent(),i;{const s=p6(i);if(s===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(i.getChild(s)),this.offsets.push(r),this.idxs.push(s)}}}}nextNodeAfterCurrent(){for(;;){const e=b_(this.offsets),t=b_(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const i=b_(this.nextNodes),r=p6(i,this.idxs[this.idxs.length-1]);if(r!==-1){this.nextNodes.push(i.getChild(r)),this.offsets.push(Qn(e,t.length)),this.idxs[this.idxs.length-1]=r;break}else this.idxs.pop()}}}function p6(n,e=-1){for(;;){if(e++,e>=n.childrenLength)return-1;if(n.getChild(e))return e}}function b_(n){return n.length>0?n[n.length-1]:void 0}function n$(n,e,t,i){return new o2e(n,e,t,i).parseDocument()}let o2e=class{constructor(e,t,i,r){if(this.tokenizer=e,this.createImmutableLists=r,this._itemsConstructed=0,this._itemsFromCache=0,i&&r)throw new Error("Not supported");this.oldNodeReader=i?new s2e(i):void 0,this.positionMapper=new UCe(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Bo.getEmpty(),0);return e||(e=lh.getEmpty()),e}parseList(e,t){const i=[];for(;;){let s=this.tryReadChildFromCache(e);if(!s){const o=this.tokenizer.peek();if(!o||o.kind===2&&o.bracketIds.intersects(e))break;s=this.parseChild(e,t+1)}s.kind===4&&s.childrenLength===0||i.push(s)}return this.oldNodeReader?i2e(i):HX(i,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!pk(t)){const i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),r=>t!==null&&!K0(r.length,t)?!1:r.canBeReused(e));if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}}parseChild(e,t){this._itemsConstructed++;const i=this.tokenizer.read();switch(i.kind){case 2:return new ZCe(i.bracketIds,i.length);case 0:return i.astNode;case 1:{if(t>300)return new Eg(i.length);const r=e.merge(i.bracketIds),s=this.parseList(r,t+1),o=this.tokenizer.peek();return o&&o.kind===2&&(o.bracketId===i.bracketId||o.bracketIds.intersects(i.bracketIds))?(this.tokenizer.read(),Pw.create(i.astNode,s,o.astNode)):Pw.create(i.astNode,s,null)}default:throw new Error("unexpected")}}};function vk(n,e){if(n.length===0)return e;if(e.length===0)return n;const t=new Ru(r$(n)),i=r$(e);i.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let r=t.dequeue();function s(c){if(c===void 0){const u=t.takeWhile(d=>!0)||[];return r&&u.unshift(r),u}const h=[];for(;r&&!pk(c);){const[u,d]=r.splitAt(c);h.push(u),c=Rw(u.lengthAfter,c),r=d??t.dequeue()}return pk(c)||h.push(new Kd(!1,c,c)),h}const o=[];function a(c,h,u){if(o.length>0&&zX(o[o.length-1].endOffset,c)){const d=o[o.length-1];o[o.length-1]=new mu(d.startOffset,h,Qn(d.newLength,u))}else o.push({startOffset:c,endOffset:h,newLength:u})}let l=po;for(const c of i){const h=s(c.lengthBefore);if(c.modified){const u=$Ce(h,g=>g.lengthBefore),d=Qn(l,u);a(l,d,c.lengthAfter),l=d}else for(const u of h){const d=l;l=Qn(l,u.lengthBefore),u.modified&&a(d,l,u.lengthAfter)}}return o}class Kd{constructor(e,t,i){this.modified=e,this.lengthBefore=t,this.lengthAfter=i}splitAt(e){const t=Rw(e,this.lengthAfter);return zX(t,po)?[this,void 0]:this.modified?[new Kd(this.modified,this.lengthBefore,e),new Kd(this.modified,po,t)]:[new Kd(this.modified,e,e),new Kd(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${Ka(this.lengthBefore)} -> ${Ka(this.lengthAfter)}`}}function r$(n){const e=[];let t=po;for(const i of n){const r=Rw(t,i.startOffset);pk(r)||e.push(new Kd(!1,r,r));const s=Rw(i.startOffset,i.endOffset);e.push(new Kd(!0,s,i.newLength)),t=i.endOffset}return e}class a2e extends xe{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new de,this.denseKeyProvider=new qCe,this.brackets=new t2e(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const i=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),r=new JCe(this.textModel.getValue(),i);this.initialAstWithoutTokens=n$(r,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(i=>new mu(Bn(i.fromLineNumber-1,0),Bn(i.toLineNumber,0),Bn(i.toLineNumber-i.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=mu.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const i=vk(this.queuedTextEdits,e);this.queuedTextEdits=i,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=vk(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,i){const r=t,s=new XCe(this.textModel,this.brackets);return n$(s,e,r,i)}getBracketsInRange(e,t){this.flushQueue();const i=Bn(e.startLineNumber-1,e.startColumn-1),r=Bn(e.endLineNumber-1,e.endColumn-1);return new Jg(s=>{const o=this.initialAstWithoutTokens||this.astWithTokens;D9(o,po,o.length,i,r,s,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();const i=p0(e.getStartPosition()),r=p0(e.getEndPosition());return new Jg(s=>{const o=this.initialAstWithoutTokens||this.astWithTokens,a=new l2e(s,t,this.textModel);E9(o,po,o.length,i,r,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return $X(t,po,t.length,p0(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return VX(t,po,t.length,p0(e))}}function VX(n,e,t,i){if(n.kind===4||n.kind===2){const r=[];for(const s of n.children)t=Qn(e,s.length),r.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let s=r.length-1;s>=0;s--){const{nodeOffsetStart:o,nodeOffsetEnd:a}=r[s];if(K0(o,i)){const l=VX(n.children[s],o,a,i);if(l)return l}}return null}else{if(n.kind===3)return null;if(n.kind===1){const r=nm(e,t);return{bracketInfo:n.bracketInfo,range:r}}}return null}function $X(n,e,t,i){if(n.kind===4||n.kind===2){for(const r of n.children){if(t=Qn(e,r.length),K0(i,t)){const s=$X(r,e,t,i);if(s)return s}e=t}return null}else{if(n.kind===3)return null;if(n.kind===1){const r=nm(e,t);return{bracketInfo:n.bracketInfo,range:r}}}return null}function D9(n,e,t,i,r,s,o,a,l,c,h=!1){if(o>200)return!0;e:for(;;)switch(n.kind){case 4:{const u=n.childrenLength;for(let d=0;d<u;d++){const g=n.getChild(d);if(g){if(t=Qn(e,g.length),Y0(e,r)&&G_(t,i)){if(G_(t,r)){n=g;continue e}if(!D9(g,e,t,i,r,s,o,0,l,c))return!1}e=t}}return!0}case 2:{const u=!c||!n.closingBracket||n.closingBracket.bracketInfo.closesColorized(n.openingBracket.bracketInfo);let d=0;if(l){let p=l.get(n.openingBracket.text);p===void 0&&(p=0),d=p,u&&(p++,l.set(n.openingBracket.text,p))}const g=n.childrenLength;for(let p=0;p<g;p++){const b=n.getChild(p);if(b){if(t=Qn(e,b.length),Y0(e,r)&&G_(t,i)){if(G_(t,r)&&b.kind!==1){n=b,u?(o++,a=d+1):a=d;continue e}if((u||b.kind!==1||!n.closingBracket)&&!D9(b,e,t,i,r,s,u?o+1:o,u?d+1:d,l,c,!n.closingBracket))return!1}e=t}}return l?.set(n.openingBracket.text,d),!0}case 3:{const u=nm(e,t);return s(new e$(u,o-1,0,!0))}case 1:{const u=nm(e,t);return s(new e$(u,o-1,a-1,h))}case 0:return!0}}class l2e{constructor(e,t,i){this.push=e,this.includeMinIndentation=t,this.textModel=i}}function E9(n,e,t,i,r,s,o,a){if(o>200)return!0;let l=!0;if(n.kind===2){let c=0;if(a){let d=a.get(n.openingBracket.text);d===void 0&&(d=0),c=d,d++,a.set(n.openingBracket.text,d)}const h=Qn(e,n.openingBracket.length);let u=-1;if(s.includeMinIndentation&&(u=n.computeMinIndentation(e,s.textModel)),l=s.push(new zCe(nm(e,t),nm(e,h),n.closingBracket?nm(Qn(h,n.child?.length||po),t):void 0,o,c,n,u)),e=h,l&&n.child){const d=n.child;if(t=Qn(e,d.length),Y0(e,r)&&G_(t,i)&&(l=E9(d,e,t,i,r,s,o+1,a),!l))return!1}a?.set(n.openingBracket.text,c)}else{let c=e;for(const h of n.children){const u=c;if(c=Qn(c,h.length),Y0(u,r)&&Y0(i,c)&&(l=E9(h,u,c,i,r,s,o,a),!l))return!1}}return l}class c2e extends xe{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new Pu),this.onDidChangeEmitter=new de,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1}handleLanguageConfigurationServiceChange(e){(!e.languageId||this.bracketPairsTree.value?.object.didLanguageChange(e.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){this.bracketPairsTree.value?.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){this.bracketPairsTree.value?.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){this.bracketPairsTree.value?.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new rt;this.bracketPairsTree.value=h2e(e.add(new a2e(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(e,!1)||Jg.empty}getBracketPairsInRangeWithMinIndentation(e){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(e,!0)||Jg.empty}getBracketsInRange(e,t=!1){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketsInRange(e,t)||Jg.empty}findMatchingBracketUp(e,t,i){const r=this.textModel.validatePosition(t),s=this.textModel.getLanguageIdAtPosition(r.lineNumber,r.column);if(this.canBuildAST){const o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getClosingBracketInfo(e);if(!o)return null;const a=this.getBracketPairsInRange(oe.fromPositions(t,t)).findLast(l=>o.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const o=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!a)return null;const l=a.textIsBracket[o];return l?H2(this._findMatchingBracketUp(l,r,b6(i))):null}}matchBracket(e,t){if(this.canBuildAST){const i=this.getBracketPairsInRange(oe.fromPositions(e,e)).filter(r=>r.closingBracketRange!==void 0&&(r.openingBracketRange.containsPosition(e)||r.closingBracketRange.containsPosition(e))).findLastMaxBy(_l(r=>r.openingBracketRange.containsPosition(e)?r.openingBracketRange:r.closingBracketRange,oe.compareRangesUsingStarts));return i?[i.openingBracketRange,i.closingBracketRange]:null}else{const i=b6(t);return this._matchBracket(this.textModel.validatePosition(e),i)}}_establishBracketSearchOffsets(e,t,i,r){const s=t.getCount(),o=t.getLanguageId(r);let a=Math.max(0,e.column-1-i.maxBracketLength);for(let c=r-1;c>=0;c--){const h=t.getEndOffset(c);if(h<=a)break;if(Pc(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){a=h;break}}let l=Math.min(t.getLineContent().length,e.column-1+i.maxBracketLength);for(let c=r+1;c<s;c++){const h=t.getStartOffset(c);if(h>=l)break;if(Pc(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){l=h;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const i=e.lineNumber,r=this.textModel.tokenization.getLineTokens(i),s=this.textModel.getLineContent(i),o=r.findTokenIndexAtOffset(e.column-1);if(o<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId(o)).brackets;if(a&&!Pc(r.getStandardTokenType(o))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,r,a,o),h=null;for(;;){const u=cl.findNextBracketInRange(a.forwardRegex,i,s,l,c);if(!u)break;if(u.startColumn<=e.column&&e.column<=u.endColumn){const d=s.substring(u.startColumn-1,u.endColumn-1).toLowerCase(),g=this._matchFoundBracket(u,a.textIsBracket[d],a.textIsOpenBracket[d],t);if(g){if(g instanceof nu)return null;h=g}}l=u.endColumn-1}if(h)return h}if(o>0&&r.getStartOffset(o)===e.column-1){const l=o-1,c=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId(l)).brackets;if(c&&!Pc(r.getStandardTokenType(l))){const{searchStartOffset:h,searchEndOffset:u}=this._establishBracketSearchOffsets(e,r,c,l),d=cl.findPrevBracketInRange(c.reversedRegex,i,s,h,u);if(d&&d.startColumn<=e.column&&e.column<=d.endColumn){const g=s.substring(d.startColumn-1,d.endColumn-1).toLowerCase(),p=this._matchFoundBracket(d,c.textIsBracket[g],c.textIsOpenBracket[g],t);if(p)return p instanceof nu?null:p}}}return null}_matchFoundBracket(e,t,i,r){if(!t)return null;const s=i?this._findMatchingBracketDown(t,e.getEndPosition(),r):this._findMatchingBracketUp(t,e.getStartPosition(),r);return s?s instanceof nu?s:[e,s]:null}_findMatchingBracketUp(e,t,i){const r=e.languageId,s=e.reversedRegex;let o=-1,a=0;const l=(c,h,u,d)=>{for(;;){if(i&&++a%100===0&&!i())return nu.INSTANCE;const g=cl.findPrevBracketInRange(s,c,h,u,d);if(!g)break;const p=h.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(e.isOpen(p)?o++:e.isClose(p)&&o--,o===0)return g;d=g.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const h=this.textModel.tokenization.getLineTokens(c),u=h.getCount(),d=this.textModel.getLineContent(c);let g=u-1,p=d.length,b=d.length;c===t.lineNumber&&(g=h.findTokenIndexAtOffset(t.column-1),p=t.column-1,b=t.column-1);let _=!0;for(;g>=0;g--){const w=h.getLanguageId(g)===r&&!Pc(h.getStandardTokenType(g));if(w)_?p=h.getStartOffset(g):(p=h.getStartOffset(g),b=h.getEndOffset(g));else if(_&&p!==b){const y=l(c,d,p,b);if(y)return y}_=w}if(_&&p!==b){const w=l(c,d,p,b);if(w)return w}}return null}_findMatchingBracketDown(e,t,i){const r=e.languageId,s=e.forwardRegex;let o=1,a=0;const l=(h,u,d,g)=>{for(;;){if(i&&++a%100===0&&!i())return nu.INSTANCE;const p=cl.findNextBracketInRange(s,h,u,d,g);if(!p)break;const b=u.substring(p.startColumn-1,p.endColumn-1).toLowerCase();if(e.isOpen(b)?o++:e.isClose(b)&&o--,o===0)return p;d=p.endColumn-1}return null},c=this.textModel.getLineCount();for(let h=t.lineNumber;h<=c;h++){const u=this.textModel.tokenization.getLineTokens(h),d=u.getCount(),g=this.textModel.getLineContent(h);let p=0,b=0,_=0;h===t.lineNumber&&(p=u.findTokenIndexAtOffset(t.column-1),b=t.column-1,_=t.column-1);let w=!0;for(;p<d;p++){const y=u.getLanguageId(p)===r&&!Pc(u.getStandardTokenType(p));if(y)w||(b=u.getStartOffset(p)),_=u.getEndOffset(p);else if(w&&b!==_){const k=l(h,g,b,_);if(k)return k}w=y}if(w&&b!==_){const y=l(h,g,b,_);if(y)return y}}return null}findPrevBracket(e){const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketBefore(t)||null;let i=null,r=null,s=null;for(let o=t.lineNumber;o>=1;o--){const a=this.textModel.tokenization.getLineTokens(o),l=a.getCount(),c=this.textModel.getLineContent(o);let h=l-1,u=c.length,d=c.length;if(o===t.lineNumber){h=a.findTokenIndexAtOffset(t.column-1),u=t.column-1,d=t.column-1;const p=a.getLanguageId(h);i!==p&&(i=p,r=this.languageConfigurationService.getLanguageConfiguration(i).brackets,s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let g=!0;for(;h>=0;h--){const p=a.getLanguageId(h);if(i!==p){if(r&&s&&g&&u!==d){const _=cl.findPrevBracketInRange(r.reversedRegex,o,c,u,d);if(_)return this._toFoundBracket(s,_);g=!1}i=p,r=this.languageConfigurationService.getLanguageConfiguration(i).brackets,s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}const b=!!r&&!Pc(a.getStandardTokenType(h));if(b)g?u=a.getStartOffset(h):(u=a.getStartOffset(h),d=a.getEndOffset(h));else if(s&&r&&g&&u!==d){const _=cl.findPrevBracketInRange(r.reversedRegex,o,c,u,d);if(_)return this._toFoundBracket(s,_)}g=b}if(s&&r&&g&&u!==d){const p=cl.findPrevBracketInRange(r.reversedRegex,o,c,u,d);if(p)return this._toFoundBracket(s,p)}}return null}findNextBracket(e){const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketAfter(t)||null;const i=this.textModel.getLineCount();let r=null,s=null,o=null;for(let a=t.lineNumber;a<=i;a++){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),h=this.textModel.getLineContent(a);let u=0,d=0,g=0;if(a===t.lineNumber){u=l.findTokenIndexAtOffset(t.column-1),d=t.column-1,g=t.column-1;const b=l.getLanguageId(u);r!==b&&(r=b,s=this.languageConfigurationService.getLanguageConfiguration(r).brackets,o=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew)}let p=!0;for(;u<c;u++){const b=l.getLanguageId(u);if(r!==b){if(o&&s&&p&&d!==g){const w=cl.findNextBracketInRange(s.forwardRegex,a,h,d,g);if(w)return this._toFoundBracket(o,w);p=!1}r=b,s=this.languageConfigurationService.getLanguageConfiguration(r).brackets,o=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew}const _=!!s&&!Pc(l.getStandardTokenType(u));if(_)p||(d=l.getStartOffset(u)),g=l.getEndOffset(u);else if(o&&s&&p&&d!==g){const w=cl.findNextBracketInRange(s.forwardRegex,a,h,d,g);if(w)return this._toFoundBracket(o,w)}p=_}if(o&&s&&p&&d!==g){const b=cl.findNextBracketInRange(s.forwardRegex,a,h,d,g);if(b)return this._toFoundBracket(o,b)}}return null}findEnclosingBrackets(e,t){const i=this.textModel.validatePosition(e);if(this.canBuildAST){const g=oe.fromPositions(i),p=this.getBracketPairsInRange(oe.fromPositions(i,i)).findLast(b=>b.closingBracketRange!==void 0&&b.range.strictContainsRange(g));return p?[p.openingBracketRange,p.closingBracketRange]:null}const r=b6(t),s=this.textModel.getLineCount(),o=new Map;let a=[];const l=(g,p)=>{if(!o.has(g)){const b=[];for(let _=0,w=p?p.brackets.length:0;_<w;_++)b[_]=0;o.set(g,b)}a=o.get(g)};let c=0;const h=(g,p,b,_,w)=>{for(;;){if(r&&++c%100===0&&!r())return nu.INSTANCE;const y=cl.findNextBracketInRange(g.forwardRegex,p,b,_,w);if(!y)break;const k=b.substring(y.startColumn-1,y.endColumn-1).toLowerCase(),L=g.textIsBracket[k];if(L&&(L.isOpen(k)?a[L.index]++:L.isClose(k)&&a[L.index]--,a[L.index]===-1))return this._matchFoundBracket(y,L,!1,r);_=y.endColumn-1}return null};let u=null,d=null;for(let g=i.lineNumber;g<=s;g++){const p=this.textModel.tokenization.getLineTokens(g),b=p.getCount(),_=this.textModel.getLineContent(g);let w=0,y=0,k=0;if(g===i.lineNumber){w=p.findTokenIndexAtOffset(i.column-1),y=i.column-1,k=i.column-1;const T=p.getLanguageId(w);u!==T&&(u=T,d=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,d))}let L=!0;for(;w<b;w++){const T=p.getLanguageId(w);if(u!==T){if(d&&L&&y!==k){const D=h(d,g,_,y,k);if(D)return H2(D);L=!1}u=T,d=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,d)}const N=!!d&&!Pc(p.getStandardTokenType(w));if(N)L||(y=p.getStartOffset(w)),k=p.getEndOffset(w);else if(d&&L&&y!==k){const D=h(d,g,_,y,k);if(D)return H2(D)}L=N}if(d&&L&&y!==k){const T=h(d,g,_,y,k);if(T)return H2(T)}}return null}_toFoundBracket(e,t){if(!t)return null;let i=this.textModel.getValueInRange(t);i=i.toLowerCase();const r=e.getBracketInfo(i);return r?{range:t,bracketInfo:r}:null}}function h2e(n,e){return{object:n,dispose:()=>e?.dispose()}}function b6(n){if(typeof n>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=n}}const mL=class mL{constructor(){this._searchCanceledBrand=void 0}};mL.INSTANCE=new mL;let nu=mL;function H2(n){return n instanceof nu?null:n}class u2e extends xe{constructor(e){super(),this.textModel=e,this.colorProvider=new jX,this.onDidChangeEmitter=new de,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,i,r){return r?[]:t===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(e,!0).map(o=>({id:`bracket${o.range.toString()}-${o.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(o,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:o.range})).toArray():[]}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new oe(1,1,this.textModel.getLineCount(),1),e,t):[]}}class jX{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}Uu((n,e)=>{const t=[MX,AX,RX,PX,OX,BX],i=new jX;e.addRule(`.monaco-editor .${i.unexpectedClosingBracketClassName} { color: ${n.getColor(yCe)}; }`);const r=t.map(s=>n.getColor(s)).filter(s=>!!s).filter(s=>!s.isTransparent());for(let s=0;s<30;s++){const o=r[s%r.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(s)} { color: ${o}; }`)}});function V2(n){return n.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class Qr{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,i,r){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=r}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${V2(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${V2(this.oldText)}")`:`(replace@${this.oldPosition} "${V2(this.oldText)}" with "${V2(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){const r=t.length;Yl(e,r,i),i+=4;for(let s=0;s<r;s++)$me(e,t.charCodeAt(s),i),i+=2;return i}static _readString(e,t){const i=Kl(e,t);return t+=4,Ume(e,t,i)}writeSize(){return 8+Qr._writeStringSize(this.oldText)+Qr._writeStringSize(this.newText)}write(e,t){return Yl(e,this.oldPosition,t),t+=4,Yl(e,this.newPosition,t),t+=4,t=Qr._writeString(e,this.oldText,t),t=Qr._writeString(e,this.newText,t),t}static read(e,t,i){const r=Kl(e,t);t+=4;const s=Kl(e,t);t+=4;const o=Qr._readString(e,t);t+=Qr._writeStringSize(o);const a=Qr._readString(e,t);return t+=Qr._writeStringSize(a),i.push(new Qr(r,o,s,a)),t}}function d2e(n,e){return n===null||n.length===0?e:new Wc(n,e).compress()}class Wc{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,i=this._getPrev(e),r=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(i===null){this._acceptCurr(r),r=this._getCurr(++t);continue}if(r===null){this._acceptPrev(i),i=this._getPrev(++e);continue}if(r.oldEnd<=i.newPosition){this._acceptCurr(r),r=this._getCurr(++t);continue}if(i.newEnd<=r.oldPosition){this._acceptPrev(i),i=this._getPrev(++e);continue}if(r.oldPosition<i.newPosition){const[c,h]=Wc._splitCurr(r,i.newPosition-r.oldPosition);this._acceptCurr(c),r=h;continue}if(i.newPosition<r.oldPosition){const[c,h]=Wc._splitPrev(i,r.oldPosition-i.newPosition);this._acceptPrev(c),i=h;continue}let a,l;if(r.oldEnd===i.newEnd)a=i,l=r,i=this._getPrev(++e),r=this._getCurr(++t);else if(r.oldEnd<i.newEnd){const[c,h]=Wc._splitPrev(i,r.oldLength);a=c,l=r,i=h,r=this._getCurr(++t)}else{const[c,h]=Wc._splitCurr(r,i.newLength);a=i,l=c,i=this._getPrev(++e),r=h}this._result[this._resultLen++]=new Qr(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const s=Wc._merge(this._result);return Wc._removeNoOps(s)}_acceptCurr(e){this._result[this._resultLen++]=Wc._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=Wc._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new Qr(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new Qr(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const i=e.newText.substr(0,t),r=e.newText.substr(t);return[new Qr(e.oldPosition,e.oldText,e.newPosition,i),new Qr(e.oldEnd,"",e.newPosition+t,r)]}static _splitCurr(e,t){const i=e.oldText.substr(0,t),r=e.oldText.substr(t);return[new Qr(e.oldPosition,i,e.newPosition,e.newText),new Qr(e.oldPosition+t,r,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let i=0,r=e[0];for(let s=1;s<e.length;s++){const o=e[s];r.oldEnd===o.oldPosition?r=new Qr(r.oldPosition,r.oldText+o.oldText,r.newPosition,r.newText+o.newText):(t[i++]=r,r=o)}return t[i++]=r,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let i=0;for(let r=0;r<e.length;r++){const s=e[r];s.oldText!==s.newText&&(t[i++]=s)}return t}}function Vp(n){return n.toString()}class xr{static create(e,t){const i=e.getAlternativeVersionId(),r=I9(e);return new xr(i,i,r,r,t,t,[])}constructor(e,t,i,r,s,o,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=i,this.afterEOL=r,this.beforeCursorState=s,this.afterCursorState=o,this.changes=a}append(e,t,i,r,s){t.length>0&&(this.changes=d2e(this.changes,t)),this.afterEOL=i,this.afterVersionId=r,this.afterCursorState=s}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,i){if(Yl(e,t?t.length:0,i),i+=4,t)for(const r of t)Yl(e,r.selectionStartLineNumber,i),i+=4,Yl(e,r.selectionStartColumn,i),i+=4,Yl(e,r.positionLineNumber,i),i+=4,Yl(e,r.positionColumn,i),i+=4;return i}static _readSelections(e,t,i){const r=Kl(e,t);t+=4;for(let s=0;s<r;s++){const o=Kl(e,t);t+=4;const a=Kl(e,t);t+=4;const l=Kl(e,t);t+=4;const c=Kl(e,t);t+=4,i.push(new $i(o,a,l,c))}return t}serialize(){let e=10+xr._writeSelectionsSize(this.beforeCursorState)+xr._writeSelectionsSize(this.afterCursorState)+4;for(const r of this.changes)e+=r.writeSize();const t=new Uint8Array(e);let i=0;Yl(t,this.beforeVersionId,i),i+=4,Yl(t,this.afterVersionId,i),i+=4,Jz(t,this.beforeEOL,i),i+=1,Jz(t,this.afterEOL,i),i+=1,i=xr._writeSelections(t,this.beforeCursorState,i),i=xr._writeSelections(t,this.afterCursorState,i),Yl(t,this.changes.length,i),i+=4;for(const r of this.changes)i=r.write(t,i);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let i=0;const r=Kl(t,i);i+=4;const s=Kl(t,i);i+=4;const o=Qz(t,i);i+=1;const a=Qz(t,i);i+=1;const l=[];i=xr._readSelections(t,i,l);const c=[];i=xr._readSelections(t,i,c);const h=Kl(t,i);i+=4;const u=[];for(let d=0;d<h;d++)i=Qr.read(t,i,u);return new xr(r,s,o,a,l,c,u)}}class UX{get type(){return 0}get resource(){return Ut.isUri(this.model)?this.model:this.model.uri}constructor(e,t,i,r){this.label=e,this.code=t,this.model=i,this._data=xr.create(i,r)}toString(){return(this._data instanceof xr?this._data:xr.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(Ut.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof xr}append(e,t,i,r,s){this._data instanceof xr&&this._data.append(e,t,i,r,s)}close(){this._data instanceof xr&&(this._data=this._data.serialize())}open(){this._data instanceof xr||(this._data=xr.deserialize(this._data))}undo(){if(Ut.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof xr&&(this._data=this._data.serialize());const e=xr.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(Ut.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof xr&&(this._data=this._data.serialize());const e=xr.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof xr&&(this._data=this._data.serialize()),this._data.byteLength+168}}class f2e{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,i){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=i.slice(0),this._editStackElementsMap=new Map;for(const r of this._editStackElementsArr){const s=Vp(r.resource);this._editStackElementsMap.set(s,r)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=Vp(e);return this._editStackElementsMap.has(t)}setModel(e){const t=Vp(Ut.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=Vp(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,i,r,s){const o=Vp(e.uri);this._editStackElementsMap.get(o).append(e,t,i,r,s)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=Vp(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${VA(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function I9(n){return n.getEOL()===`
`?0:1}function ru(n){return n?n instanceof UX||n instanceof f2e:!1}class hR{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);ru(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);ru(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const i=this._undoRedoService.getLastElement(this._model.uri);if(ru(i)&&i.canAppend(this._model))return i;const r=new UX(C("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(r,t),r}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],I9(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,i,r){const s=this._getOrCreateEditStackElement(e,r),o=this._model.applyEdits(t,!0),a=hR._computeCursorState(i,o),l=o.map((c,h)=>({index:h,textChange:c.textChange}));return l.sort((c,h)=>c.textChange.oldPosition===h.textChange.oldPosition?c.index-h.index:c.textChange.oldPosition-h.textChange.oldPosition),s.append(this._model,l.map(c=>c.textChange),I9(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(i){return Wi(i),null}}}class qX extends xe{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function g2e(n,e){let t=0,i=0;const r=n.length;for(;i<r;){const s=n.charCodeAt(i);if(s===32)t++;else if(s===9)t=t-t%e+e;else break;i++}return i===r?-1:t}var rm;(function(n){n[n.Disabled=0]="Disabled",n[n.EnabledForActive=1]="EnabledForActive",n[n.Enabled=2]="Enabled"})(rm||(rm={}));class Ug{constructor(e,t,i,r,s,o){if(this.visibleColumn=e,this.column=t,this.className=i,this.horizontalLine=r,this.forWrappedLinesAfterColumn=s,this.forWrappedLinesBeforeOrAtColumn=o,e!==-1==(t!==-1))throw new Error}}class yv{constructor(e,t){this.top=e,this.endColumn=t}}class m2e extends qX{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return g2e(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,i){this.assertNotDisposed();const r=this.textModel.getLineCount();if(e<1||e>r)throw new Ti("Illegal value for lineNumber");const s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(s&&s.offSide);let a=-2,l=-1,c=-2,h=-1;const u=D=>{if(a!==-1&&(a===-2||a>D-1)){a=-1,l=-1;for(let O=D-2;O>=0;O--){const B=this._computeIndentLevel(O);if(B>=0){a=O,l=B;break}}}if(c===-2){c=-1,h=-1;for(let O=D;O<r;O++){const B=this._computeIndentLevel(O);if(B>=0){c=O,h=B;break}}}};let d=-2,g=-1,p=-2,b=-1;const _=D=>{if(d===-2){d=-1,g=-1;for(let O=D-2;O>=0;O--){const B=this._computeIndentLevel(O);if(B>=0){d=O,g=B;break}}}if(p!==-1&&(p===-2||p<D-1)){p=-1,b=-1;for(let O=D;O<r;O++){const B=this._computeIndentLevel(O);if(B>=0){p=O,b=B;break}}}};let w=0,y=!0,k=0,L=!0,T=0,N=0;for(let D=0;y||L;D++){const O=e-D,B=e+D;D>1&&(O<1||O<t)&&(y=!1),D>1&&(B>r||B>i)&&(L=!1),D>5e4&&(y=!1,L=!1);let G=-1;if(y&&O>=1){const q=this._computeIndentLevel(O-1);q>=0?(c=O-1,h=q,G=Math.ceil(q/this.textModel.getOptions().indentSize)):(u(O),G=this._getIndentLevelForWhitespaceLine(o,l,h))}let H=-1;if(L&&B<=r){const q=this._computeIndentLevel(B-1);q>=0?(d=B-1,g=q,H=Math.ceil(q/this.textModel.getOptions().indentSize)):(_(B),H=this._getIndentLevelForWhitespaceLine(o,g,b))}if(D===0){N=G;continue}if(D===1){if(B<=r&&H>=0&&N+1===H){y=!1,w=B,k=B,T=H;continue}if(O>=1&&G>=0&&G-1===N){L=!1,w=O,k=O,T=G;continue}if(w=e,k=e,T=N,T===0)return{startLineNumber:w,endLineNumber:k,indent:T}}y&&(G>=T?w=O:y=!1),L&&(H>=T?k=B:L=!1)}return{startLineNumber:w,endLineNumber:k,indent:T}}getLinesBracketGuides(e,t,i,r){const s=[];for(let u=e;u<=t;u++)s.push([]);const o=!0,a=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new oe(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let l;if(i&&a.length>0){const u=(e<=i.lineNumber&&i.lineNumber<=t?a:this.textModel.bracketPairs.getBracketPairsInRange(oe.fromPositions(i)).toArray()).filter(d=>oe.strictContainsPosition(d.range,i));l=$x(u,d=>o)?.range}const c=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,h=new GX;for(const u of a){if(!u.closingBracketRange)continue;const d=l&&u.range.equalsRange(l);if(!d&&!r.includeInactive)continue;const g=h.getInlineClassName(u.nestingLevel,u.nestingLevelOfEqualBracketType,c)+(r.highlightActive&&d?" "+h.activeClassName:""),p=u.openingBracketRange.getStartPosition(),b=u.closingBracketRange.getStartPosition(),_=r.horizontalGuides===rm.Enabled||r.horizontalGuides===rm.EnabledForActive&&d;if(u.range.startLineNumber===u.range.endLineNumber){_&&s[u.range.startLineNumber-e].push(new Ug(-1,u.openingBracketRange.getEndPosition().column,g,new yv(!1,b.column),-1,-1));continue}const w=this.getVisibleColumnFromPosition(b),y=this.getVisibleColumnFromPosition(u.openingBracketRange.getStartPosition()),k=Math.min(y,w,u.minVisibleColumnIndentation+1);let L=!1;qo(this.textModel.getLineContent(u.closingBracketRange.startLineNumber))<u.closingBracketRange.startColumn-1&&(L=!0);const D=Math.max(p.lineNumber,e),O=Math.min(b.lineNumber,t),B=L?1:0;for(let G=D;G<O+B;G++)s[G-e].push(new Ug(k,-1,g,null,G===p.lineNumber?p.column:-1,G===b.lineNumber?b.column:-1));_&&(p.lineNumber>=e&&y>k&&s[p.lineNumber-e].push(new Ug(k,-1,g,new yv(!1,p.column),-1,-1)),b.lineNumber<=t&&w>k&&s[b.lineNumber-e].push(new Ug(k,-1,g,new yv(!L,b.column),-1,-1)))}for(const u of s)u.sort((d,g)=>d.visibleColumn-g.visibleColumn);return s}getVisibleColumnFromPosition(e){return gr.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Error("Illegal value for startLineNumber");if(t<1||t>i)throw new Error("Illegal value for endLineNumber");const r=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(s&&s.offSide),a=new Array(t-e+1);let l=-2,c=-1,h=-2,u=-1;for(let d=e;d<=t;d++){const g=d-e,p=this._computeIndentLevel(d-1);if(p>=0){l=d-1,c=p,a[g]=Math.ceil(p/r.indentSize);continue}if(l===-2){l=-1,c=-1;for(let b=d-2;b>=0;b--){const _=this._computeIndentLevel(b);if(_>=0){l=b,c=_;break}}}if(h!==-1&&(h===-2||h<d-1)){h=-1,u=-1;for(let b=d;b<i;b++){const _=this._computeIndentLevel(b);if(_>=0){h=b,u=_;break}}}a[g]=this._getIndentLevelForWhitespaceLine(o,c,u)}return a}_getIndentLevelForWhitespaceLine(e,t,i){const r=this.textModel.getOptions();return t===-1||i===-1?0:t<i?1+Math.floor(t/r.indentSize):t===i||e?Math.ceil(i/r.indentSize):1+Math.floor(i/r.indentSize)}}class GX{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,i){return this.getInlineClassNameOfLevel(i?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}class p2e{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function b2e(n,e,t,i,r){r.spacesDiff=0,r.looksLikeAlignment=!1;let s;for(s=0;s<e&&s<i;s++){const d=n.charCodeAt(s),g=t.charCodeAt(s);if(d!==g)break}let o=0,a=0;for(let d=s;d<e;d++)n.charCodeAt(d)===32?o++:a++;let l=0,c=0;for(let d=s;d<i;d++)t.charCodeAt(d)===32?l++:c++;if(o>0&&a>0||l>0&&c>0)return;const h=Math.abs(a-c),u=Math.abs(o-l);if(h===0){r.spacesDiff=u,u>0&&0<=l-1&&l-1<n.length&&l<t.length&&t.charCodeAt(l)!==32&&n.charCodeAt(l-1)===32&&n.charCodeAt(n.length-1)===44&&(r.looksLikeAlignment=!0);return}if(u%h===0){r.spacesDiff=u/h;return}}function s$(n,e,t){const i=Math.min(n.getLineCount(),1e4);let r=0,s=0,o="",a=0;const l=[2,4,6,8,3,5,7],c=8,h=[0,0,0,0,0,0,0,0,0],u=new p2e;for(let p=1;p<=i;p++){const b=n.getLineLength(p),_=n.getLineContent(p),w=b<=65536;let y=!1,k=0,L=0,T=0;for(let D=0,O=b;D<O;D++){const B=w?_.charCodeAt(D):n.getLineCharCode(p,D);if(B===9)T++;else if(B===32)L++;else{y=!0,k=D;break}}if(!y||(T>0?r++:L>1&&s++,b2e(o,a,_,k,u),u.looksLikeAlignment&&!(t&&e===u.spacesDiff)))continue;const N=u.spacesDiff;N<=c&&h[N]++,o=_,a=k}let d=t;r!==s&&(d=r<s);let g=e;if(d){let p=d?0:.1*i;l.forEach(b=>{const _=h[b];_>p&&(p=_,g=b)}),g===4&&h[4]>0&&h[2]>0&&h[2]>=h[4]/2&&(g=2)}return{insertSpaces:d,tabSize:g}}function oo(n){return(n.metadata&1)>>>0}function Xi(n,e){n.metadata=n.metadata&254|e<<0}function ts(n){return(n.metadata&2)>>>1===1}function Yi(n,e){n.metadata=n.metadata&253|(e?1:0)<<1}function KX(n){return(n.metadata&4)>>>2===1}function o$(n,e){n.metadata=n.metadata&251|(e?1:0)<<2}function YX(n){return(n.metadata&64)>>>6===1}function a$(n,e){n.metadata=n.metadata&191|(e?1:0)<<6}function _2e(n){return(n.metadata&24)>>>3}function l$(n,e){n.metadata=n.metadata&231|e<<3}function v2e(n){return(n.metadata&32)>>>5===1}function c$(n,e){n.metadata=n.metadata&223|(e?1:0)<<5}class ZX{constructor(e,t,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,Xi(this,1),this.start=t,this.end=i,this.delta=0,this.maxEnd=i,this.id=e,this.ownerId=0,this.options=null,o$(this,!1),a$(this,!1),l$(this,1),c$(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=null,Yi(this,!1)}reset(e,t,i,r){this.start=t,this.end=i,this.maxEnd=i,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=r}setOptions(e){this.options=e;const t=this.options.className;o$(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),a$(this,this.options.glyphMarginClassName!==null),l$(this,this.options.stickiness),c$(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const zt=new ZX(null,0,0);zt.parent=zt;zt.left=zt;zt.right=zt;Xi(zt,0);class _6{constructor(){this.root=zt,this.requestNormalizeDelta=!1}intervalSearch(e,t,i,r,s,o){return this.root===zt?[]:T2e(this,e,t,i,r,s,o)}search(e,t,i,r){return this.root===zt?[]:L2e(this,e,t,i,r)}collectNodesFromOwner(e){return x2e(this,e)}collectNodesPostOrder(){return k2e(this)}insert(e){h$(this,e),this._normalizeDeltaIfNecessary()}delete(e){u$(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const i=e;let r=0;for(;e!==this.root;)e===e.parent.right&&(r+=e.parent.delta),e=e.parent;const s=i.start+r,o=i.end+r;i.setCachedOffsets(s,o,t)}acceptReplace(e,t,i,r){const s=C2e(this,e,e+t);for(let o=0,a=s.length;o<a;o++){const l=s[o];u$(this,l)}this._normalizeDeltaIfNecessary(),S2e(this,e,e+t,i),this._normalizeDeltaIfNecessary();for(let o=0,a=s.length;o<a;o++){const l=s[o];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,y2e(l,e,e+t,i,r),l.maxEnd=l.end,h$(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,w2e(this))}}function w2e(n){let e=n.root,t=0;for(;e!==zt;){if(e.left!==zt&&!ts(e.left)){e=e.left;continue}if(e.right!==zt&&!ts(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,pf(e),Yi(e,!0),Yi(e.left,!1),Yi(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Yi(n.root,!1)}function $p(n,e,t,i){return n<t?!0:n>t||i===1?!1:i===2?!0:e}function y2e(n,e,t,i,r){const s=_2e(n),o=s===0||s===2,a=s===1||s===2,l=t-e,c=i,h=Math.min(l,c),u=n.start;let d=!1;const g=n.end;let p=!1;e<=u&&g<=t&&v2e(n)&&(n.start=e,d=!0,n.end=e,p=!0);{const _=r?1:l>0?2:0;!d&&$p(u,o,e,_)&&(d=!0),!p&&$p(g,a,e,_)&&(p=!0)}if(h>0&&!r){const _=l>c?2:0;!d&&$p(u,o,e+h,_)&&(d=!0),!p&&$p(g,a,e+h,_)&&(p=!0)}{const _=r?1:0;!d&&$p(u,o,t,_)&&(n.start=e+c,d=!0),!p&&$p(g,a,t,_)&&(n.end=e+c,p=!0)}const b=c-l;d||(n.start=Math.max(0,u+b)),p||(n.end=Math.max(0,g+b)),n.start>n.end&&(n.end=n.start)}function C2e(n,e,t){let i=n.root,r=0,s=0,o=0,a=0;const l=[];let c=0;for(;i!==zt;){if(ts(i)){Yi(i.left,!1),Yi(i.right,!1),i===i.parent.right&&(r-=i.parent.delta),i=i.parent;continue}if(!ts(i.left)){if(s=r+i.maxEnd,s<e){Yi(i,!0);continue}if(i.left!==zt){i=i.left;continue}}if(o=r+i.start,o>t){Yi(i,!0);continue}if(a=r+i.end,a>=e&&(i.setCachedOffsets(o,a,0),l[c++]=i),Yi(i,!0),i.right!==zt&&!ts(i.right)){r+=i.delta,i=i.right;continue}}return Yi(n.root,!1),l}function S2e(n,e,t,i){let r=n.root,s=0,o=0,a=0;const l=i-(t-e);for(;r!==zt;){if(ts(r)){Yi(r.left,!1),Yi(r.right,!1),r===r.parent.right&&(s-=r.parent.delta),pf(r),r=r.parent;continue}if(!ts(r.left)){if(o=s+r.maxEnd,o<e){Yi(r,!0);continue}if(r.left!==zt){r=r.left;continue}}if(a=s+r.start,a>t){r.start+=l,r.end+=l,r.delta+=l,(r.delta<-1073741824||r.delta>1073741824)&&(n.requestNormalizeDelta=!0),Yi(r,!0);continue}if(Yi(r,!0),r.right!==zt&&!ts(r.right)){s+=r.delta,r=r.right;continue}}Yi(n.root,!1)}function x2e(n,e){let t=n.root;const i=[];let r=0;for(;t!==zt;){if(ts(t)){Yi(t.left,!1),Yi(t.right,!1),t=t.parent;continue}if(t.left!==zt&&!ts(t.left)){t=t.left;continue}if(t.ownerId===e&&(i[r++]=t),Yi(t,!0),t.right!==zt&&!ts(t.right)){t=t.right;continue}}return Yi(n.root,!1),i}function k2e(n){let e=n.root;const t=[];let i=0;for(;e!==zt;){if(ts(e)){Yi(e.left,!1),Yi(e.right,!1),e=e.parent;continue}if(e.left!==zt&&!ts(e.left)){e=e.left;continue}if(e.right!==zt&&!ts(e.right)){e=e.right;continue}t[i++]=e,Yi(e,!0)}return Yi(n.root,!1),t}function L2e(n,e,t,i,r){let s=n.root,o=0,a=0,l=0;const c=[];let h=0;for(;s!==zt;){if(ts(s)){Yi(s.left,!1),Yi(s.right,!1),s===s.parent.right&&(o-=s.parent.delta),s=s.parent;continue}if(s.left!==zt&&!ts(s.left)){s=s.left;continue}a=o+s.start,l=o+s.end,s.setCachedOffsets(a,l,i);let u=!0;if(e&&s.ownerId&&s.ownerId!==e&&(u=!1),t&&KX(s)&&(u=!1),r&&!YX(s)&&(u=!1),u&&(c[h++]=s),Yi(s,!0),s.right!==zt&&!ts(s.right)){o+=s.delta,s=s.right;continue}}return Yi(n.root,!1),c}function T2e(n,e,t,i,r,s,o){let a=n.root,l=0,c=0,h=0,u=0;const d=[];let g=0;for(;a!==zt;){if(ts(a)){Yi(a.left,!1),Yi(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!ts(a.left)){if(c=l+a.maxEnd,c<e){Yi(a,!0);continue}if(a.left!==zt){a=a.left;continue}}if(h=l+a.start,h>t){Yi(a,!0);continue}if(u=l+a.end,u>=e){a.setCachedOffsets(h,u,s);let p=!0;i&&a.ownerId&&a.ownerId!==i&&(p=!1),r&&KX(a)&&(p=!1),o&&!YX(a)&&(p=!1),p&&(d[g++]=a)}if(Yi(a,!0),a.right!==zt&&!ts(a.right)){l+=a.delta,a=a.right;continue}}return Yi(n.root,!1),d}function h$(n,e){if(n.root===zt)return e.parent=zt,e.left=zt,e.right=zt,Xi(e,0),n.root=e,n.root;D2e(n,e),Ld(e.parent);let t=e;for(;t!==n.root&&oo(t.parent)===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;oo(i)===1?(Xi(t.parent,0),Xi(i,0),Xi(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,Cv(n,t)),Xi(t.parent,0),Xi(t.parent.parent,1),Sv(n,t.parent.parent))}else{const i=t.parent.parent.left;oo(i)===1?(Xi(t.parent,0),Xi(i,0),Xi(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,Sv(n,t)),Xi(t.parent,0),Xi(t.parent.parent,1),Cv(n,t.parent.parent))}return Xi(n.root,0),e}function D2e(n,e){let t=0,i=n.root;const r=e.start,s=e.end;for(;;)if(I2e(r,s,i.start+t,i.end+t)<0)if(i.left===zt){e.start-=t,e.end-=t,e.maxEnd-=t,i.left=e;break}else i=i.left;else if(i.right===zt){e.start-=t+i.delta,e.end-=t+i.delta,e.maxEnd-=t+i.delta,i.right=e;break}else t+=i.delta,i=i.right;e.parent=i,e.left=zt,e.right=zt,Xi(e,1)}function u$(n,e){let t,i;if(e.left===zt?(t=e.right,i=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===zt?(t=e.left,i=e):(i=E2e(e.right),t=i.right,t.start+=i.delta,t.end+=i.delta,t.delta+=i.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),i.start+=e.delta,i.end+=e.delta,i.delta=e.delta,(i.delta<-1073741824||i.delta>1073741824)&&(n.requestNormalizeDelta=!0)),i===n.root){n.root=t,Xi(t,0),e.detach(),v6(),pf(t),n.root.parent=zt;return}const r=oo(i)===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?t.parent=i.parent:(i.parent===e?t.parent=i:t.parent=i.parent,i.left=e.left,i.right=e.right,i.parent=e.parent,Xi(i,oo(e)),e===n.root?n.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==zt&&(i.left.parent=i),i.right!==zt&&(i.right.parent=i)),e.detach(),r){Ld(t.parent),i!==e&&(Ld(i),Ld(i.parent)),v6();return}Ld(t),Ld(t.parent),i!==e&&(Ld(i),Ld(i.parent));let s;for(;t!==n.root&&oo(t)===0;)t===t.parent.left?(s=t.parent.right,oo(s)===1&&(Xi(s,0),Xi(t.parent,1),Cv(n,t.parent),s=t.parent.right),oo(s.left)===0&&oo(s.right)===0?(Xi(s,1),t=t.parent):(oo(s.right)===0&&(Xi(s.left,0),Xi(s,1),Sv(n,s),s=t.parent.right),Xi(s,oo(t.parent)),Xi(t.parent,0),Xi(s.right,0),Cv(n,t.parent),t=n.root)):(s=t.parent.left,oo(s)===1&&(Xi(s,0),Xi(t.parent,1),Sv(n,t.parent),s=t.parent.left),oo(s.left)===0&&oo(s.right)===0?(Xi(s,1),t=t.parent):(oo(s.left)===0&&(Xi(s.right,0),Xi(s,1),Cv(n,s),s=t.parent.left),Xi(s,oo(t.parent)),Xi(t.parent,0),Xi(s.left,0),Sv(n,t.parent),t=n.root));Xi(t,0),v6()}function E2e(n){for(;n.left!==zt;)n=n.left;return n}function v6(){zt.parent=zt,zt.delta=0,zt.start=0,zt.end=0}function Cv(n,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==zt&&(t.left.parent=e),t.parent=e.parent,e.parent===zt?n.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,pf(e),pf(t)}function Sv(n,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(n.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==zt&&(t.right.parent=e),t.parent=e.parent,e.parent===zt?n.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,pf(e),pf(t)}function XX(n){let e=n.end;if(n.left!==zt){const t=n.left.maxEnd;t>e&&(e=t)}if(n.right!==zt){const t=n.right.maxEnd+n.delta;t>e&&(e=t)}return e}function pf(n){n.maxEnd=XX(n)}function Ld(n){for(;n!==zt;){const e=XX(n);if(n.maxEnd===e)return;n.maxEnd=e,n=n.parent}}function I2e(n,e,t,i){return n===t?e-i:n-t}class N9{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==vt)return uR(this.right);let e=this;for(;e.parent!==vt&&e.parent.left!==e;)e=e.parent;return e.parent===vt?vt:e.parent}prev(){if(this.left!==vt)return QX(this.left);let e=this;for(;e.parent!==vt&&e.parent.right!==e;)e=e.parent;return e.parent===vt?vt:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const vt=new N9(null,0);vt.parent=vt;vt.left=vt;vt.right=vt;vt.color=0;function uR(n){for(;n.left!==vt;)n=n.left;return n}function QX(n){for(;n.right!==vt;)n=n.right;return n}function dR(n){return n===vt?0:n.size_left+n.piece.length+dR(n.right)}function fR(n){return n===vt?0:n.lf_left+n.piece.lineFeedCnt+fR(n.right)}function w6(){vt.parent=vt}function xv(n,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==vt&&(t.left.parent=e),t.parent=e.parent,e.parent===vt?n.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function kv(n,e){const t=e.left;e.left=t.right,t.right!==vt&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===vt?n.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function $2(n,e){let t,i;if(e.left===vt?(i=e,t=i.right):e.right===vt?(i=e,t=i.left):(i=uR(e.right),t=i.right),i===n.root){n.root=t,t.color=0,e.detach(),w6(),n.root.parent=vt;return}const r=i.color===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?(t.parent=i.parent,K_(n,t)):(i.parent===e?t.parent=i:t.parent=i.parent,K_(n,t),i.left=e.left,i.right=e.right,i.parent=e.parent,i.color=e.color,e===n.root?n.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==vt&&(i.left.parent=i),i.right!==vt&&(i.right.parent=i),i.size_left=e.size_left,i.lf_left=e.lf_left,K_(n,i)),e.detach(),t.parent.left===t){const o=dR(t),a=fR(t);if(o!==t.parent.size_left||a!==t.parent.lf_left){const l=o-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=a,Vh(n,t.parent,l,c)}}if(K_(n,t.parent),r){w6();return}let s;for(;t!==n.root&&t.color===0;)t===t.parent.left?(s=t.parent.right,s.color===1&&(s.color=0,t.parent.color=1,xv(n,t.parent),s=t.parent.right),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.right.color===0&&(s.left.color=0,s.color=1,kv(n,s),s=t.parent.right),s.color=t.parent.color,t.parent.color=0,s.right.color=0,xv(n,t.parent),t=n.root)):(s=t.parent.left,s.color===1&&(s.color=0,t.parent.color=1,kv(n,t.parent),s=t.parent.left),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.left.color===0&&(s.right.color=0,s.color=1,xv(n,s),s=t.parent.left),s.color=t.parent.color,t.parent.color=0,s.left.color=0,kv(n,t.parent),t=n.root));t.color=0,w6()}function d$(n,e){for(K_(n,e);e!==n.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,xv(n,e)),e.parent.color=0,e.parent.parent.color=1,kv(n,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,kv(n,e)),e.parent.color=0,e.parent.parent.color=1,xv(n,e.parent.parent))}n.root.color=0}function Vh(n,e,t,i){for(;e!==n.root&&e!==vt;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}function K_(n,e){let t=0,i=0;if(e!==n.root){for(;e!==n.root&&e===e.parent.right;)e=e.parent;if(e!==n.root)for(e=e.parent,t=dR(e.left)-e.size_left,i=fR(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=i;e!==n.root&&(t!==0||i!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}}const Rh=65535;function JX(n){let e;return n[n.length-1]<65536?e=new Uint16Array(n.length):e=new Uint32Array(n.length),e.set(n,0),e}class N2e{constructor(e,t,i,r,s){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=r,this.isBasicASCII=s}}function Gh(n,e=!0){const t=[0];let i=1;for(let r=0,s=n.length;r<s;r++){const o=n.charCodeAt(r);o===13?r+1<s&&n.charCodeAt(r+1)===10?(t[i++]=r+2,r++):t[i++]=r+1:o===10&&(t[i++]=r+1)}return e?JX(t):t}function M2e(n,e){n.length=0,n[0]=0;let t=1,i=0,r=0,s=0,o=!0;for(let l=0,c=e.length;l<c;l++){const h=e.charCodeAt(l);h===13?l+1<c&&e.charCodeAt(l+1)===10?(s++,n[t++]=l+2,l++):(i++,n[t++]=l+1):h===10?(r++,n[t++]=l+1):o&&h!==9&&(h<32||h>126)&&(o=!1)}const a=new N2e(JX(n),i,r,s,o);return n.length=0,a}class No{constructor(e,t,i,r,s){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=r,this.length=s}}class Ig{constructor(e,t){this.buffer=e,this.lineStarts=t}}class A2e{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==vt&&e.iterate(e.root,i=>(i!==vt&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class R2e{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const i=this._cache;for(let r=0;r<i.length;r++){const s=i[r];if(s.node.parent===null||s.nodeStartOffset>=e){i[r]=null,t=!0;continue}}if(t){const r=[];for(const s of i)s!==null&&r.push(s);this._cache=r}}}class P2e{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new Ig("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=vt,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let r=null;for(let s=0,o=e.length;s<o;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=Gh(e[s].buffer));const a=new No(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this._buffers.push(e[s]),r=this.rbInsertRight(r,a)}this._searchCache=new R2e(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=Rh,i=t-Math.floor(t/3),r=i*2;let s="",o=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),h=c.length;if(o<=i||o+h<r)return s+=c,o+=h,!0;const u=s.replace(/\r\n|\r|\n/g,e);return a.push(new Ig(u,Gh(u))),s=c,o=h,!0}),o>0){const l=s.replace(/\r\n|\r|\n/g,e);a.push(new Ig(l,Gh(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new A2e(this,e)}getOffsetAt(e,t){let i=0,r=this.root;for(;r!==vt;)if(r.left!==vt&&r.lf_left+1>=e)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt+1>=e){i+=r.size_left;const s=this.getAccumulatedValue(r,e-r.lf_left-2);return i+=s+t-1}else e-=r.lf_left+r.piece.lineFeedCnt,i+=r.size_left+r.piece.length,r=r.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const r=e;for(;t!==vt;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+s.index,s.index===0){const o=this.getOffsetAt(i+1,1),a=r-o;return new be(i+1,a+1)}return new be(i+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===vt){const s=this.getOffsetAt(i+1,1),o=r-e-s;return new be(i+1,o+1)}else t=t.right;return new be(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.nodeAt2(e.startLineNumber,e.startColumn),r=this.nodeAt2(e.endLineNumber,e.endColumn),s=this.getValueInRange2(i,r);return t?t!==this._EOL||!this._EOLNormalized?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let i=e.node;const r=this._buffers[i.piece.bufferIndex].buffer,s=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let o=r.substring(s+e.remainder,s+i.piece.length);for(i=i.next();i!==vt;){const a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){o+=a.substring(l,l+t.remainder);break}else o+=a.substr(l,i.piece.length);i=i.next()}return o}getLinesContent(){const e=[];let t=0,i="",r=!1;return this.iterate(this.root,s=>{if(s===vt)return!0;const o=s.piece;let a=o.length;if(a===0)return!0;const l=this._buffers[o.bufferIndex].buffer,c=this._buffers[o.bufferIndex].lineStarts,h=o.start.line,u=o.end.line;let d=c[h]+o.start.column;if(r&&(l.charCodeAt(d)===10&&(d++,a--),e[t++]=i,i="",r=!1,a===0))return!0;if(h===u)return!this._EOLNormalized&&l.charCodeAt(d+a-1)===13?(r=!0,i+=l.substr(d,a-1)):i+=l.substr(d,a),!0;i+=this._EOLNormalized?l.substring(d,Math.max(d,c[h+1]-this._EOLLength)):l.substring(d,c[h+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let g=h+1;g<u;g++)i=this._EOLNormalized?l.substring(c[g],c[g+1]-this._EOLLength):l.substring(c[g],c[g+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this._EOLNormalized&&l.charCodeAt(c[u]+o.end.column-1)===13?(r=!0,o.end.column===0?t--:i=l.substr(c[u],o.end.column-1)):i=l.substr(c[u],o.end.column),!0}),r&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this._buffers[t.piece.bufferIndex],r=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(r)}else{const t=this._buffers[e.node.piece.bufferIndex],r=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(r)}}getLineCharCode(e,t){const i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,i,r,s,o,a,l,c,h,u){const d=this._buffers[e.piece.bufferIndex],g=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),p=this.offsetInBuffer(e.piece.bufferIndex,s),b=this.offsetInBuffer(e.piece.bufferIndex,o);let _;const w={line:0,column:0};let y,k;t._wordSeparators?(y=d.buffer.substring(p,b),k=L=>L+p,t.reset(0)):(y=d.buffer,k=L=>L,t.reset(p));do if(_=t.next(y),_){if(k(_.index)>=b)return h;this.positionInBuffer(e,k(_.index)-g,w);const L=this.getLineFeedCnt(e.piece.bufferIndex,s,w),T=w.line===s.line?w.column-s.column+r:w.column+1,N=T+_[0].length;if(u[h++]=xg(new oe(i+L,T,i+L,N),_,l),k(_.index)+_[0].length>=b||h>=c)return h}while(_);return h}findMatchesLineByLine(e,t,i,r){const s=[];let o=0;const a=new a0(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let h=this.positionInBuffer(l.node,l.remainder);const u=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,h,u,t,i,r,o,s),s;let d=e.startLineNumber,g=l.node;for(;g!==c.node;){const b=this.getLineFeedCnt(g.piece.bufferIndex,h,g.piece.end);if(b>=1){const w=this._buffers[g.piece.bufferIndex].lineStarts,y=this.offsetInBuffer(g.piece.bufferIndex,g.piece.start),k=w[h.line+b],L=d===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(g,a,d,L,h,this.positionInBuffer(g,k-y),t,i,r,o,s),o>=r)return s;d+=b}const _=d===e.startLineNumber?e.startColumn-1:0;if(d===e.endLineNumber){const w=this.getLineContent(d).substring(_,e.endColumn-1);return o=this._findMatchesInLine(t,a,w,e.endLineNumber,_,o,s,i,r),s}if(o=this._findMatchesInLine(t,a,this.getLineContent(d).substr(_),d,_,o,s,i,r),o>=r)return s;d++,l=this.nodeAt2(d,1),g=l.node,h=this.positionInBuffer(l.node,l.remainder)}if(d===e.endLineNumber){const b=d===e.startLineNumber?e.startColumn-1:0,_=this.getLineContent(d).substring(b,e.endColumn-1);return o=this._findMatchesInLine(t,a,_,e.endLineNumber,b,o,s,i,r),s}const p=d===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(c.node,a,d,p,h,u,t,i,r,o,s),s}_findMatchesInLine(e,t,i,r,s,o,a,l,c){const h=e.wordSeparators;if(!l&&e.simpleSearch){const d=e.simpleSearch,g=d.length,p=i.length;let b=-g;for(;(b=i.indexOf(d,b+g))!==-1;)if((!h||yA(h,i,p,b,g))&&(a[o++]=new Cw(new oe(r,b+1+s,r,b+1+g+s),null),o>=c))return o;return o}let u;t.reset(0);do if(u=t.next(i),u&&(a[o++]=xg(new oe(r,u.index+1+s,r,u.index+1+u[0].length+s),u,l),o>=c))return o;while(u);return o}insert(e,t,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==vt){const{node:r,remainder:s,nodeStartOffset:o}=this.nodeAt(e),a=r.piece,l=a.bufferIndex,c=this.positionInBuffer(r,s);if(r.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&o+a.length===e&&t.length<Rh){this.appendToNode(r,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,r),this._searchCache.validate(e);else if(o+r.piece.length>e){const h=[];let u=new No(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(r,s)===10){const b={line:u.start.line+1,column:0};u=new No(u.bufferIndex,b,u.end,this.getLineFeedCnt(u.bufferIndex,b,u.end),u.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(r,s-1)===13){const b=this.positionInBuffer(r,s-1);this.deleteNodeTail(r,b),t="\r"+t,r.piece.length===0&&h.push(r)}else this.deleteNodeTail(r,c);else this.deleteNodeTail(r,c);const d=this.createNewPieces(t);u.length>0&&this.rbInsertRight(r,u);let g=r;for(let p=0;p<d.length;p++)g=this.rbInsertRight(g,d[p]);this.deleteNodes(h)}else this.insertContentToNodeRight(t,r)}else{const r=this.createNewPieces(t);let s=this.rbInsertLeft(null,r[0]);for(let o=1;o<r.length;o++)s=this.rbInsertRight(s,r[o])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===vt)return;const i=this.nodeAt(e),r=this.nodeAt(e+t),s=i.node,o=r.node;if(s===o){const d=this.positionInBuffer(s,i.remainder),g=this.positionInBuffer(s,r.remainder);if(i.nodeStartOffset===e){if(t===s.piece.length){const p=s.next();$2(this,s),this.validateCRLFWithPrevNode(p),this.computeBufferMetadata();return}this.deleteNodeHead(s,g),this._searchCache.validate(e),this.validateCRLFWithPrevNode(s),this.computeBufferMetadata();return}if(i.nodeStartOffset+s.piece.length===e+t){this.deleteNodeTail(s,d),this.validateCRLFWithNextNode(s),this.computeBufferMetadata();return}this.shrinkNode(s,d,g),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(s,i.remainder);this.deleteNodeTail(s,l),this._searchCache.validate(e),s.piece.length===0&&a.push(s);const c=this.positionInBuffer(o,r.remainder);this.deleteNodeHead(o,c),o.piece.length===0&&a.push(o);const h=s.next();for(let d=h;d!==vt&&d!==o;d=d.next())a.push(d);const u=s.piece.length===0?s.prev():s;this.deleteNodes(a),this.validateCRLFWithNextNode(u),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const o=t.piece,a={line:o.start.line+1,column:0},l=new No(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),o.length-1);t.piece=l,e+=`
`,Vh(this,t,-1,-1),t.piece.length===0&&i.push(t)}const r=this.createNewPieces(e);let s=this.rbInsertLeft(t,r[r.length-1]);for(let o=r.length-2;o>=0;o--)s=this.rbInsertLeft(s,r[o]);this.validateCRLFWithPrevNode(s),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const i=this.createNewPieces(e),r=this.rbInsertRight(t,i[0]);let s=r;for(let o=1;o<i.length;o++)s=this.rbInsertRight(s,i[o]);this.validateCRLFWithPrevNode(r)}positionInBuffer(e,t,i){const r=e.piece,s=e.piece.bufferIndex,o=this._buffers[s].lineStarts,l=o[r.start.line]+r.start.column+t;let c=r.start.line,h=r.end.line,u=0,d=0,g=0;for(;c<=h&&(u=c+(h-c)/2|0,g=o[u],u!==h);)if(d=o[u+1],l<g)h=u-1;else if(l>=d)c=u+1;else break;return i?(i.line=u,i.column=l-g,null):{line:u,column:l-g}}getLineFeedCnt(e,t,i){if(i.column===0)return i.line-t.line;const r=this._buffers[e].lineStarts;if(i.line===r.length-1)return i.line-t.line;const s=r[i.line+1],o=r[i.line]+i.column;if(s>o+1)return i.line-t.line;const a=o-1;return this._buffers[e].buffer.charCodeAt(a)===13?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)$2(this,e[t])}createNewPieces(e){if(e.length>Rh){const h=[];for(;e.length>Rh;){const d=e.charCodeAt(Rh-1);let g;d===13||d>=55296&&d<=56319?(g=e.substring(0,Rh-1),e=e.substring(Rh-1)):(g=e.substring(0,Rh),e=e.substring(Rh));const p=Gh(g);h.push(new No(this._buffers.length,{line:0,column:0},{line:p.length-1,column:g.length-p[p.length-1]},p.length-1,g.length)),this._buffers.push(new Ig(g,p))}const u=Gh(e);return h.push(new No(this._buffers.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this._buffers.push(new Ig(e,u)),h}let t=this._buffers[0].buffer.length;const i=Gh(e,!1);let r=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},r=this._lastChangeBufferPos;for(let h=0;h<i.length;h++)i[h]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let h=0;h<i.length;h++)i[h]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}const s=this._buffers[0].buffer.length,o=this._buffers[0].lineStarts.length-1,a=s-this._buffers[0].lineStarts[o],l={line:o,column:a},c=new No(0,r,l,this.getLineFeedCnt(0,r,l),s-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let i=this.root,r="";const s=this._searchCache.get2(e);if(s){i=s.node;const o=this.getAccumulatedValue(i,e-s.nodeStartLineNumber-1),a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(s.nodeStartLineNumber+i.piece.lineFeedCnt===e)r=a.substring(l+o,l+i.piece.length);else{const c=this.getAccumulatedValue(i,e-s.nodeStartLineNumber);return a.substring(l+o,l+c-t)}}else{let o=0;const a=e;for(;i!==vt;)if(i.left!==vt&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this.getAccumulatedValue(i,e-i.lf_left-1),h=this._buffers[i.piece.bufferIndex].buffer,u=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return o+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:o,nodeStartLineNumber:a-(e-1-i.lf_left)}),h.substring(u+l,u+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this._buffers[i.piece.bufferIndex].buffer,h=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);r=c.substring(h+l,h+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,o+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==vt;){const o=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(i,0),l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return r+=o.substring(l,l+a-t),r}else{const a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);r+=o.substr(a,i.piece.length)}i=i.next()}return r}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==vt;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){const i=e.piece,r=this.positionInBuffer(e,t),s=r.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){const o=this.getLineFeedCnt(e.piece.bufferIndex,i.start,r);if(o!==s)return{index:o,remainder:0}}return{index:s,remainder:r.column}}getAccumulatedValue(e,t){if(t<0)return 0;const i=e.piece,r=this._buffers[i.bufferIndex].lineStarts,s=i.start.line+t+1;return s>i.end.line?r[i.end.line]+i.end.column-r[i.start.line]-i.start.column:r[s]-r[i.start.line]-i.start.column}deleteNodeTail(e,t){const i=e.piece,r=i.lineFeedCnt,s=this.offsetInBuffer(i.bufferIndex,i.end),o=t,a=this.offsetInBuffer(i.bufferIndex,o),l=this.getLineFeedCnt(i.bufferIndex,i.start,o),c=l-r,h=a-s,u=i.length+h;e.piece=new No(i.bufferIndex,i.start,o,l,u),Vh(this,e,h,c)}deleteNodeHead(e,t){const i=e.piece,r=i.lineFeedCnt,s=this.offsetInBuffer(i.bufferIndex,i.start),o=t,a=this.getLineFeedCnt(i.bufferIndex,o,i.end),l=this.offsetInBuffer(i.bufferIndex,o),c=a-r,h=s-l,u=i.length+h;e.piece=new No(i.bufferIndex,o,i.end,a,u),Vh(this,e,h,c)}shrinkNode(e,t,i){const r=e.piece,s=r.start,o=r.end,a=r.length,l=r.lineFeedCnt,c=t,h=this.getLineFeedCnt(r.bufferIndex,r.start,c),u=this.offsetInBuffer(r.bufferIndex,t)-this.offsetInBuffer(r.bufferIndex,s);e.piece=new No(r.bufferIndex,r.start,c,h,u),Vh(this,e,u-a,h-l);const d=new No(r.bufferIndex,i,o,this.getLineFeedCnt(r.bufferIndex,i,o),this.offsetInBuffer(r.bufferIndex,o)-this.offsetInBuffer(r.bufferIndex,i)),g=this.rbInsertRight(e,d);this.validateCRLFWithPrevNode(g)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),r=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const s=Gh(t,!1);for(let g=0;g<s.length;g++)s[g]+=r;if(i){const g=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:r-g}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1));const o=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[o],l={line:o,column:a},c=e.piece.length+t.length,h=e.piece.lineFeedCnt,u=this.getLineFeedCnt(0,e.piece.start,l),d=u-h;e.piece=new No(e.piece.bufferIndex,e.piece.start,l,u,c),this._lastChangeBufferPos=l,Vh(this,e,t.length,d)}nodeAt(e){let t=this.root;const i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let r=0;for(;t!==vt;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){r+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:r};return this._searchCache.set(s),s}else e-=t.size_left+t.piece.length,r+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let i=this.root,r=0;for(;i!==vt;)if(i.left!==vt&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const s=this.getAccumulatedValue(i,e-i.lf_left-2),o=this.getAccumulatedValue(i,e-i.lf_left-1);return r+=i.size_left,{node:i,remainder:Math.min(s+t-1,o),nodeStartOffset:r}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const s=this.getAccumulatedValue(i,e-i.lf_left-2);if(s+t-1<=i.piece.length)return{node:i,remainder:s+t-1,nodeStartOffset:r};t-=i.piece.length-s;break}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==vt;){if(i.piece.lineFeedCnt>0){const s=this.getAccumulatedValue(i,0),o=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,s),nodeStartOffset:o}}else if(i.piece.length>=t-1){const s=this.offsetOfNode(i);return{node:i,remainder:t-1,nodeStartOffset:s}}else t-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this._buffers[e.piece.bufferIndex],r=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(r)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===vt||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,r=t.start.line,s=i[r]+t.start.column;return r===i.length-1||i[r+1]>s+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(s)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===vt||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const i=[],r=this._buffers[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:r[e.piece.end.line]-r[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new No(e.piece.bufferIndex,e.piece.start,s,a,o),Vh(this,e,-1,-1),e.piece.length===0&&i.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,h=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new No(t.piece.bufferIndex,l,t.piece.end,h,c),Vh(this,t,-1,-1),t.piece.length===0&&i.push(t);const u=this.createNewPieces(`\r
`);this.rbInsertRight(e,u[0]);for(let d=0;d<i.length;d++)$2(this,i[d])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const i=t.next();if(this.startWithLF(i)){if(e+=`
`,i.piece.length===1)$2(this,i);else{const r=i.piece,s={line:r.start.line+1,column:0},o=r.length-1,a=this.getLineFeedCnt(r.bufferIndex,s,r.end);i.piece=new No(r.bufferIndex,s,r.end,a,o),Vh(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===vt)return t(vt);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===vt)return"";const t=this._buffers[e.piece.bufferIndex],i=e.piece,r=this.offsetInBuffer(i.bufferIndex,i.start),s=this.offsetInBuffer(i.bufferIndex,i.end);return t.buffer.substring(r,s)}getPieceContent(e){const t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),r=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,r)}rbInsertRight(e,t){const i=new N9(t,1);if(i.left=vt,i.right=vt,i.parent=vt,i.size_left=0,i.lf_left=0,this.root===vt)this.root=i,i.color=0;else if(e.right===vt)e.right=i,i.parent=e;else{const s=uR(e.right);s.left=i,i.parent=s}return d$(this,i),i}rbInsertLeft(e,t){const i=new N9(t,1);if(i.left=vt,i.right=vt,i.parent=vt,i.size_left=0,i.lf_left=0,this.root===vt)this.root=i,i.color=0;else if(e.left===vt)e.left=i,i.parent=e;else{const r=QX(e.left);r.right=i,i.parent=r}return d$(this,i),i}}class Z0 extends xe{constructor(e,t,i,r,s,o,a){super(),this._onDidChangeContent=this._register(new de),this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=r,this._mightContainUnusualLineTerminators=s,this._pieceTree=new P2e(e,i,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const i=e+t,r=this.getPositionAt(e),s=this.getPositionAt(i);return new oe(r.lineNumber,r.column,s.lineNumber,s.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const i=this.getOffsetAt(e.startLineNumber,e.startColumn),r=this.getOffsetAt(e.endLineNumber,e.endColumn);let s=0;const o=this._getEndOfLine(t),a=this.getEOL();if(o.length!==a.length){const l=o.length-a.length,c=e.endLineNumber-e.startLineNumber;s=l*c}return r-i+s}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let i=0;const r=e.startLineNumber,s=e.endLineNumber;for(let o=r;o<=s;o++){const a=this.getLineContent(o),l=o===r?e.startColumn-1:0,c=o===s?e.endColumn-1:a.length;for(let h=l;h<c;h++)Lr(a.charCodeAt(h))?(i=i+1,h=h+1):i=i+1}return i+=this._getEndOfLine(t).length*(s-r),i}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=qo(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=jm(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let r=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,l=[];for(let b=0;b<e.length;b++){const _=e[b];a&&_._isTracked&&(a=!1);const w=_.range;if(_.text){let N=!0;o||(N=!eA(_.text),o=N),!r&&N&&(r=pw(_.text)),!s&&N&&(s=ZK(_.text))}let y="",k=0,L=0,T=0;if(_.text){let N;[k,L,T,N]=I1(_.text);const D=this.getEOL();N===0||N===(D===`\r
`?2:1)?y=_.text:y=_.text.replace(/\r\n|\r|\n/g,D)}l[b]={sortIndex:b,identifier:_.identifier||null,range:w,rangeOffset:this.getOffsetAt(w.startLineNumber,w.startColumn),rangeLength:this.getValueLengthInRange(w),text:y,eolCount:k,firstLineLength:L,lastLineLength:T,forceMoveMarkers:!!_.forceMoveMarkers,isAutoWhitespaceEdit:_.isAutoWhitespaceEdit||!1}}l.sort(Z0._sortOpsAscending);let c=!1;for(let b=0,_=l.length-1;b<_;b++){const w=l[b].range.getEndPosition(),y=l[b+1].range.getStartPosition();if(y.isBeforeOrEqual(w)){if(y.isBefore(w))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const h=i||t?Z0._getInverseEditRanges(l):[],u=[];if(t)for(let b=0;b<l.length;b++){const _=l[b],w=h[b];if(_.isAutoWhitespaceEdit&&_.range.isEmpty())for(let y=w.startLineNumber;y<=w.endLineNumber;y++){let k="";y===w.startLineNumber&&(k=this.getLineContent(_.range.startLineNumber),qo(k)!==-1)||u.push({lineNumber:y,oldContent:k})}}let d=null;if(i){let b=0;d=[];for(let _=0;_<l.length;_++){const w=l[_],y=h[_],k=this.getValueInRange(w.range),L=w.rangeOffset+b;b+=w.text.length-k.length,d[_]={sortIndex:w.sortIndex,identifier:w.identifier,range:y,text:k,textChange:new Qr(w.rangeOffset,k,L,w.text)}}c||d.sort((_,w)=>_.sortIndex-w.sortIndex)}this._mightContainRTL=r,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=o;const g=this._doApplyEdits(l);let p=null;if(t&&u.length>0){u.sort((b,_)=>_.lineNumber-b.lineNumber),p=[];for(let b=0,_=u.length;b<_;b++){const w=u[b].lineNumber;if(b>0&&u[b-1].lineNumber===w)continue;const y=u[b].oldContent,k=this.getLineContent(w);k.length===0||k===y||qo(k)!==-1||p.push(w)}}return this._onDidChangeContent.fire(),new Ope(d,g,p)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const i=e[0].range,r=e[e.length-1].range,s=new oe(i.startLineNumber,i.startColumn,r.endLineNumber,r.endColumn);let o=i.startLineNumber,a=i.startColumn;const l=[];for(let g=0,p=e.length;g<p;g++){const b=e[g],_=b.range;t=t||b.forceMoveMarkers,l.push(this.getValueInRange(new oe(o,a,_.startLineNumber,_.startColumn))),b.text.length>0&&l.push(b.text),o=_.endLineNumber,a=_.endColumn}const c=l.join(""),[h,u,d]=I1(c);return{sortIndex:0,identifier:e[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:c,eolCount:h,firstLineLength:u,lastLineLength:d,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(Z0._sortOpsDescending);const t=[];for(let i=0;i<e.length;i++){const r=e[i],s=r.range.startLineNumber,o=r.range.startColumn,a=r.range.endLineNumber,l=r.range.endColumn;if(s===a&&o===l&&r.text.length===0)continue;r.text?(this._pieceTree.delete(r.rangeOffset,r.rangeLength),this._pieceTree.insert(r.rangeOffset,r.text,!0)):this._pieceTree.delete(r.rangeOffset,r.rangeLength);const c=new oe(s,o,a,l);t.push({range:c,rangeLength:r.rangeLength,text:r.text,rangeOffset:r.rangeOffset,forceMoveMarkers:r.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,r){return this._pieceTree.findMatchesLineByLine(e,t,i,r)}static _getInverseEditRanges(e){const t=[];let i=0,r=0,s=null;for(let o=0,a=e.length;o<a;o++){const l=e[o];let c,h;s?s.range.endLineNumber===l.range.startLineNumber?(c=i,h=r+(l.range.startColumn-s.range.endColumn)):(c=i+(l.range.startLineNumber-s.range.endLineNumber),h=l.range.startColumn):(c=l.range.startLineNumber,h=l.range.startColumn);let u;if(l.text.length>0){const d=l.eolCount+1;d===1?u=new oe(c,h,c,h+l.firstLineLength):u=new oe(c,h,c+d-1,l.lastLineLength+1)}else u=new oe(c,h,c,h);i=u.endLineNumber,r=u.endColumn,t.push(u),s=l}return t}static _sortOpsAscending(e,t){const i=oe.compareRangesUsingEnds(e.range,t.range);return i===0?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){const i=oe.compareRangesUsingEnds(e.range,t.range);return i===0?t.sortIndex-e.sortIndex:-i}}class O2e{constructor(e,t,i,r,s,o,a,l,c){this._chunks=e,this._bom=t,this._cr=i,this._lf=r,this._crlf=s,this._containsRTL=o,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),i=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let s=0,o=i.length;s<o;s++){const a=i[s].buffer.replace(/\r\n|\r|\n/g,t),l=Gh(a);i[s]=new Ig(a,l)}const r=new Z0(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:r,disposable:r}}}class eQ{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&iA(e)&&(this.BOM=Nfe,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=M2e(this._tmpLineStarts,e);this.chunks.push(new Ig(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=pw(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=ZK(e)))}finish(e=!0){return this._finish(),new O2e(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=Gh(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class B2e{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,i){if(e>=this._store.length)return;if(t===0){this.insert(e,i);return}else if(i===0){this.delete(e,t);return}const r=this._store.slice(0,e),s=this._store.slice(e+t),o=F2e(i,this._default);this._store=r.concat(o,s)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const i=[];for(let r=0;r<t;r++)i[r]=this._default;this._store=KL(this._store,e,i)}}function F2e(n,e){const t=[];for(let i=0;i<n;i++)t[i]=e;return t}class W2e{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class M9{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const i=this._tokens[this._tokens.length-1];if(i.endLineNumber+1===e){i.appendLineTokens(t);return}}this._tokens.push(new W2e(e,[t]))}finalize(){return this._tokens}}class z2e{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new A9(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class H2e extends z2e{constructor(e,t,i,r){super(e,t),this._textModel=i,this._languageIdCodec=r}updateTokensUntilLine(e,t){const i=this._textModel.getLanguageId();for(;;){const r=this.getFirstInvalidLine();if(!r||r.lineNumber>t)break;const s=this._textModel.getLineContent(r.lineNumber),o=__(this._languageIdCodec,i,this.tokenizationSupport,s,!0,r.startState);e.add(r.lineNumber,o.tokens),this.store.setEndState(r.lineNumber,o.endState)}}getTokenTypeIfInsertingCharacter(e,t){const i=this.getStartState(e.lineNumber);if(!i)return 0;const r=this._textModel.getLanguageId(),s=this._textModel.getLineContent(e.lineNumber),o=s.substring(0,e.column-1)+t+s.substring(e.column-1),a=__(this._languageIdCodec,r,this.tokenizationSupport,o,!0,i),l=new jr(a.tokens,o,this._languageIdCodec);if(l.getCount()===0)return 0;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t,i){const r=e.lineNumber,s=e.column,o=this.getStartState(r);if(!o)return null;const a=this._textModel.getLineContent(r),l=a.substring(0,s-1)+i+a.substring(s-1+t),c=this._textModel.getLanguageIdAtPosition(r,0),h=__(this._languageIdCodec,c,this.tokenizationSupport,l,!0,o);return new jr(h.tokens,l,this._languageIdCodec)}hasAccurateTokensForLine(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,i),{heuristicTokens:!1};let r=this.guessStartState(t);const s=this._textModel.getLanguageId();for(let o=t;o<=i;o++){const a=this._textModel.getLineContent(o),l=__(this._languageIdCodec,s,this.tokenizationSupport,a,!0,r);e.add(o,l.tokens),r=l.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const i=[];let r=null;for(let a=e-1;t>1&&a>=1;a--){const l=this._textModel.getLineFirstNonWhitespaceColumn(a);if(l!==0&&l<t&&(i.push(this._textModel.getLineContent(a)),t=l,r=this.getStartState(a),r))break}r||(r=this.tokenizationSupport.getInitialState()),i.reverse();const s=this._textModel.getLanguageId();let o=r;for(const a of i)o=__(this._languageIdCodec,s,this.tokenizationSupport,a,!1,o).endState;return o}}class A9{constructor(e){this.lineCount=e,this._tokenizationStateStore=new V2e,this._invalidEndStatesLineNumbers=new $2e,this._invalidEndStatesLineNumbers.addRange(new Pt(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new Ti("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const i=this._tokenizationStateStore.setEndState(e,t);return i&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new Pt(e+1,e+2)),i}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new Pt(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[i]=I1(t.text);this.acceptChange(new wt(t.range.startLineNumber,t.range.endLineNumber+1),i+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new Pt(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;const i=this.getStartState(t,e);if(!i)throw new Ti("Start state must be defined");return{lineNumber:t,startState:i}}}class V2e{constructor(){this._lineEndStates=new B2e(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const i=this._lineEndStates.get(e);return i&&i.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let i=e.length;t>0&&i>0&&(i--,t--),this._lineEndStates.replace(e.startLineNumber,i,t)}}class $2e{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}delete(e){const t=this._ranges.findIndex(i=>i.contains(e));if(t!==-1){const i=this._ranges[t];i.start===e?i.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new Pt(e+1,i.endExclusive):i.endExclusive===e+1?this._ranges[t]=new Pt(i.start,e):this._ranges.splice(t,1,new Pt(i.start,e),new Pt(e+1,i.endExclusive))}}addRange(e){Pt.addRange(e,this._ranges)}addRangeAndResize(e,t){let i=0;for(;!(i>=this._ranges.length||e.start<=this._ranges[i].endExclusive);)i++;let r=i;for(;!(r>=this._ranges.length||e.endExclusive<this._ranges[r].start);)r++;const s=t-e.length;for(let o=r;o<this._ranges.length;o++)this._ranges[o]=this._ranges[o].delta(s);if(i===r){const o=new Pt(e.start,e.start+t);o.isEmpty||this._ranges.splice(i,0,o)}else{const o=Math.min(e.start,this._ranges[i].start),a=Math.max(e.endExclusive,this._ranges[r-1].endExclusive),l=new Pt(o,a+s);l.isEmpty?this._ranges.splice(i,r-i):this._ranges.splice(i,r-i,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}}function __(n,e,t,i,r,s){let o=null;if(t)try{o=t.tokenizeEncoded(i,r,s.clone())}catch(a){Wi(a)}return o||(o=UA(n.encodeLanguageId(e),s)),jr.convertToEndOffset(o.tokens,i.length),o}class j2e{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,rY(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),i=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?xK(i):this._beginBackgroundTokenization())};i()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new M9,i=$m.create(!1);do if(i.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){const t=this._tokenizerWithStateStore?.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new wt(e,t))}}class U2e{constructor(){this._onDidChangeVisibleRanges=new de,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new q2e(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}class q2e{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const i=e.map(r=>new wt(r.startLineNumber,r.endLineNumber+1));this.handleStateChange({visibleLineRanges:i,stabilized:t})}}class G2e extends xe{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new Gs(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){_r(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}class tQ extends xe{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,i){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=i,this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new de),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new de),this.onDidChangeTokens=this._onDidChangeTokens.event}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}}class f$ extends tQ{constructor(e,t,i,r){super(t,i,r),this._treeSitterService=e,this._tokenizationSupport=null,this._initialize()}_initialize(){const e=this.getLanguageId();(!this._tokenizationSupport||this._lastLanguageId!==e)&&(this._lastLanguageId=e,this._tokenizationSupport=GD.get(e))}getLineTokens(e){const t=this._textModel.getLineContent(e);if(this._tokenizationSupport){const i=this._tokenizationSupport.tokenizeEncoded(e,this._textModel);if(i)return new jr(i,t,this._languageIdCodec)}return jr.createEmpty(t,this._languageIdCodec)}resetTokenization(e=!0){e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]}),this._initialize()}handleDidChangeAttached(){}handleDidChangeContent(e){e.isFlush&&this.resetTokenization(!1)}forceTokenization(e){}hasAccurateTokensForLine(e){return!0}isCheapToTokenize(e){return!0}getTokenTypeIfInsertingCharacter(e,t,i){return 0}tokenizeLineWithEdit(e,t,i){return null}get hasTokens(){return this._treeSitterService.getParseResult(this._textModel)!==void 0}}const iQ=ai("treeSitterParserService"),Kh=new Uint32Array(0).buffer;class $c{static deleteBeginning(e,t){return e===null||e===Kh?e:$c.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===Kh)return e;const i=uu(e),r=i[i.length-2];return $c.delete(e,t,r)}static delete(e,t,i){if(e===null||e===Kh||t===i)return e;const r=uu(e),s=r.length>>>1;if(t===0&&r[r.length-2]===i)return Kh;const o=jr.findIndexInTokensArray(r,t),a=o>0?r[o-1<<1]:0,l=r[o<<1];if(i<l){const g=i-t;for(let p=o;p<s;p++)r[p<<1]-=g;return e}let c,h;a!==t?(r[o<<1]=t,c=o+1<<1,h=t):(c=o<<1,h=a);const u=i-t;for(let g=o+1;g<s;g++){const p=r[g<<1]-u;p>h&&(r[c++]=p,r[c++]=r[(g<<1)+1],h=p)}if(c===r.length)return e;const d=new Uint32Array(c);return d.set(r.subarray(0,c),0),d.buffer}static append(e,t){if(t===Kh)return e;if(e===Kh)return t;if(e===null)return e;if(t===null)return null;const i=uu(e),r=uu(t),s=r.length>>>1,o=new Uint32Array(i.length+r.length);o.set(i,0);let a=i.length;const l=i[i.length-2];for(let c=0;c<s;c++)o[a++]=r[c<<1]+l,o[a++]=r[(c<<1)+1];return o.buffer}static insert(e,t,i){if(e===null||e===Kh)return e;const r=uu(e),s=r.length>>>1;let o=jr.findIndexInTokensArray(r,t);o>0&&r[o-1<<1]===t&&o--;for(let a=o;a<s;a++)r[a<<1]+=i;return e}}function uu(n){return n instanceof Uint32Array?n:new Uint32Array(n)}class Bw{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,i){let r=null;if(t<this._len&&(r=this._lineTokens[t]),r!==null&&r!==Kh)return new jr(uu(r),i,this._languageIdCodec);const s=new Uint32Array(2);return s[0]=i.length,s[1]=g$(this._languageIdCodec.encodeLanguageId(e)),new jr(s,i,this._languageIdCodec)}static _massageTokens(e,t,i){const r=i?uu(i):null;if(t===0){let s=!1;if(r&&r.length>1&&(s=Jl.getLanguageId(r[1])!==e),!s)return Kh}if(!r||r.length===0){const s=new Uint32Array(2);return s[0]=t,s[1]=g$(e),s.buffer}return r[r.length-2]=t,r.byteOffset===0&&r.byteLength===r.buffer.byteLength?r.buffer:r}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const i=[];for(let r=0;r<t;r++)i[r]=null;this._lineTokens=KL(this._lineTokens,e,i),this._len+=t}setTokens(e,t,i,r,s){const o=Bw._massageTokens(this._languageIdCodec.encodeLanguageId(e),i,r);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=o,s?!Bw._equals(a,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const i=uu(e),r=uu(t);if(i.length!==r.length)return!1;for(let s=0,o=i.length;s<o;s++)if(i[s]!==r[s])return!1;return!0}acceptEdit(e,t,i){this._acceptDeleteRange(e),this._acceptInsertText(new be(e.startLineNumber,e.startColumn),t,i)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=$c.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=$c.deleteEnding(this._lineTokens[t],e.startColumn-1);const i=e.endLineNumber-1;let r=null;i<this._len&&(r=$c.deleteBeginning(this._lineTokens[i],e.endColumn-1)),this._lineTokens[t]=$c.append(this._lineTokens[t],r),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,i){if(t===0&&i===0)return;const r=e.lineNumber-1;if(!(r>=this._len)){if(t===0){this._lineTokens[r]=$c.insert(this._lineTokens[r],e.column-1,i);return}this._lineTokens[r]=$c.deleteEnding(this._lineTokens[r],e.column-1),this._lineTokens[r]=$c.insert(this._lineTokens[r],e.column-1,i),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];let a=0,l=0,c=!1;for(let h=o.startLineNumber;h<=o.endLineNumber;h++)c?(this.setTokens(t.getLanguageId(),h-1,t.getLineLength(h),o.getLineTokens(h),!1),l=h):this.setTokens(t.getLanguageId(),h-1,t.getLineLength(h),o.getLineTokens(h),!0)&&(c=!0,a=h,l=h);c&&i.push({fromLineNumber:a,toLineNumber:l})}return{changes:i}}}function g$(n){return(n<<0|0|0|32768|2<<24|1024)>>>0}class gR{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let i=e;if(t.length>0){const s=t[0].getRange(),o=t[t.length-1].getRange();if(!s||!o)return e;i=e.plusRange(s).plusRange(o)}let r=null;for(let s=0,o=this._pieces.length;s<o;s++){const a=this._pieces[s];if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){r=r||{index:s};break}if(a.removeTokens(i),a.isEmpty()){this._pieces.splice(s,1),s--,o--;continue}if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){r=r||{index:s};continue}const[l,c]=a.split(i);if(l.isEmpty()){r=r||{index:s};continue}c.isEmpty()||(this._pieces.splice(s,1,l,c),s++,o++,r=r||{index:s})}return r=r||{index:this._pieces.length},t.length>0&&(this._pieces=KL(this._pieces,r.index,t)),i}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const i=this._pieces;if(i.length===0)return t;const r=gR._findFirstPieceWithLine(i,e),s=i[r].getLineTokens(e);if(!s)return t;const o=t.getCount(),a=s.getCount();let l=0;const c=[];let h=0,u=0;const d=(g,p)=>{g!==u&&(u=g,c[h++]=g,c[h++]=p)};for(let g=0;g<a;g++){const p=s.getStartCharacter(g),b=s.getEndCharacter(g),_=s.getMetadata(g),w=((_&1?2048:0)|(_&2?4096:0)|(_&4?8192:0)|(_&8?16384:0)|(_&16?16744448:0)|(_&32?4278190080:0))>>>0,y=~w>>>0;for(;l<o&&t.getEndOffset(l)<=p;)d(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<o&&t.getStartOffset(l)<p&&d(p,t.getMetadata(l));l<o&&t.getEndOffset(l)<b;)d(t.getEndOffset(l),t.getMetadata(l)&y|_&w),l++;if(l<o)d(b,t.getMetadata(l)&y|_&w),t.getEndOffset(l)===b&&l++;else{const k=Math.min(Math.max(0,l-1),o-1);d(b,t.getMetadata(k)&y|_&w)}}for(;l<o;)d(t.getEndOffset(l),t.getMetadata(l)),l++;return new jr(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let i=0,r=e.length-1;for(;i<r;){let s=i+Math.floor((r-i)/2);if(e[s].endLineNumber<t)i=s+1;else if(e[s].startLineNumber>t)r=s-1;else{for(;s>i&&e[s-1].startLineNumber<=t&&t<=e[s-1].endLineNumber;)s--;return s}}return i}acceptEdit(e,t,i,r,s){for(const o of this._pieces)o.acceptEdit(e,t,i,r,s)}}var K2e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},y6=function(n,e){return function(t,i){e(t,i,n)}},US;let R9=US=class extends qX{constructor(e,t,i,r,s,o,a){super(),this._textModel=e,this._bracketPairsTextModelPart=t,this._languageId=i,this._attachedViews=r,this._languageService=s,this._languageConfigurationService=o,this._treeSitterService=a,this._semanticTokens=new gR(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new de),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new de),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new de),this.onDidChangeTokens=this._onDidChangeTokens.event,this._tokensDisposables=this._register(new rt),this._register(this._languageConfigurationService.onDidChange(l=>{l.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(Oe.filter(GD.onDidChange,l=>l.changedLanguages.includes(this._languageId))(()=>{this.createPreferredTokenProvider()})),this.createPreferredTokenProvider()}createGrammarTokens(){return this._register(new m$(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews))}createTreeSitterTokens(){return this._register(new f$(this._treeSitterService,this._languageService.languageIdCodec,this._textModel,()=>this._languageId))}createTokens(e){const t=this._tokens!==void 0;this._tokens?.dispose(),this._tokens=e?this.createTreeSitterTokens():this.createGrammarTokens(),this._tokensDisposables.clear(),this._tokensDisposables.add(this._tokens.onDidChangeTokens(i=>{this._emitModelTokensChangedEvent(i)})),this._tokensDisposables.add(this._tokens.onDidChangeBackgroundTokenizationState(i=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),t&&this._tokens.resetTokenization()}createPreferredTokenProvider(){GD.get(this._languageId)?this._tokens instanceof f$||this.createTokens(!0):this._tokens instanceof m$||this.createTokens(!1)}handleLanguageConfigurationServiceChange(e){e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[i,r,s]=I1(t.text);this._semanticTokens.acceptEdit(t.range,i,r,s,t.text.length>0?t.text.charCodeAt(0):0)}this._tokens.handleDidChangeContent(e)}handleDidChangeAttached(){this._tokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this._tokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new Ti("Illegal value for lineNumber")}get hasTokens(){return this._tokens.hasTokens}resetTokenization(){this._tokens.resetTokenization()}get backgroundTokenizationState(){return this._tokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this._tokens.forceTokenization(e)}hasAccurateTokensForLine(e){return this.validateLineNumber(e),this._tokens.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this._tokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this._tokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,i){return this._tokens.getTokenTypeIfInsertingCharacter(e,t,i)}tokenizeLineWithEdit(e,t,i){return this._tokens.tokenizeLineWithEdit(e,t,i)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const i=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),i=this._textModel.getLineContent(t.lineNumber),r=this.getLineTokens(t.lineNumber),s=r.findTokenIndexAtOffset(t.column-1),[o,a]=US._findLanguageBoundaries(r,s),l=dw(t.column,this.getLanguageConfiguration(r.getLanguageId(s)).getWordDefinition(),i.substring(o,a),o);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(s>0&&o===t.column-1){const[c,h]=US._findLanguageBoundaries(r,s-1),u=dw(t.column,this.getLanguageConfiguration(r.getLanguageId(s-1)).getWordDefinition(),i.substring(c,h),c);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn)return u}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const i=e.getLanguageId(t);let r=0;for(let o=t;o>=0&&e.getLanguageId(o)===i;o--)r=e.getStartOffset(o);let s=e.getLineContent().length;for(let o=t,a=e.getCount();o<a&&e.getLanguageId(o)===i;o++)s=e.getEndOffset(o);return[r,s]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const i=this._textModel.validatePosition(new be(e,t)),r=this.getLineTokens(i.lineNumber);return r.getLanguageId(r.findTokenIndexAtOffset(i.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const i={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this._tokens.resetTokenization(),this.createPreferredTokenProvider(),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}};R9=US=K2e([y6(4,Ir),y6(5,mh),y6(6,iQ)],R9);class m$ extends tQ{constructor(e,t,i,r){super(e,t,i),this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new Pu),this._tokens=new Bw(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new Pu),this._attachedViewStates=this._register(new jM),this._register(qn.onDidChange(s=>{const o=this.getLanguageId();s.changedLanguages.indexOf(o)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(r.onDidChangeVisibleRanges(({view:s,state:o})=>{if(o){let a=this._attachedViewStates.get(s);a||(a=new G2e(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(s,a)),a.handleStateChange(o)}else this._attachedViewStates.deleteAndDispose(s)}))}resetTokenization(e=!0){this._tokens.flush(),this._debugBackgroundTokens?.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new A9(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const t=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const s=qn.get(this.getLanguageId());if(!s)return[null,null];let o;try{o=s.getInitialState()}catch(a){return Wi(a),[null,null]}return[s,o]},[i,r]=t();if(i&&r?this._tokenizer=new H2e(this._textModel.getLineCount(),i,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const s={setTokens:o=>{this.setTokens(o)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;const o=2;this._backgroundTokenizationState=o,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(o,a)=>{if(!this._tokenizer)return;const l=this._tokenizer.store.getFirstInvalidEndStateLineNumber();l!==null&&o>=l&&this._tokenizer?.store.setEndState(o,a)}};i&&i.createBackgroundTokenizer&&!i.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,s)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new j2e(this._tokenizer,s),this._defaultBackgroundTokenizer.handleChanges()),i?.backgroundTokenizerShouldOnlyVerifyTokens&&i.createBackgroundTokenizer?(this._debugBackgroundTokens=new Bw(this._languageIdCodec),this._debugBackgroundStates=new A9(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,{setTokens:o=>{this._debugBackgroundTokens?.setMultilineTokens(o,this._textModel)},backgroundTokenizationFinished(){},setEndState:(o,a)=>{this._debugBackgroundStates?.setEndState(o,a)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){this._defaultBackgroundTokenizer?.handleChanges()}handleDidChangeContent(e){if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const t of e.changes){const[i,r]=I1(t.text);this._tokens.acceptEdit(t.range,i,r),this._debugBackgroundTokens?.acceptEdit(t.range,i,r)}this._debugBackgroundStates?.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),this._defaultBackgroundTokenizer?.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=wt.joinMany([...this._attachedViewStates].map(([t,i])=>i.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const i=new M9,{heuristicTokens:r}=this._tokenizer.tokenizeHeuristically(i,e,t),s=this.setTokens(i.finalize());if(r)for(const o of s.changes)this._backgroundTokenizer.value?.requestTokens(o.fromLineNumber,o.toLineNumber+1);this._defaultBackgroundTokenizer?.checkFinished()}forceTokenization(e){const t=new M9;this._tokenizer?.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),this._defaultBackgroundTokenizer?.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}getLineTokens(e){const t=this._textModel.getLineContent(e),i=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const r=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!i.equals(r)&&this._debugBackgroundTokenizer.value?.reportMismatchingTokens&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return i}getTokenTypeIfInsertingCharacter(e,t,i){if(!this._tokenizer)return 0;const r=this._textModel.validatePosition(new be(e,t));return this.forceTokenization(r.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(r,i)}tokenizeLineWithEdit(e,t,i){if(!this._tokenizer)return null;const r=this._textModel.validatePosition(e);return this.forceTokenization(r.lineNumber),this._tokenizer.tokenizeLineWithEdit(r,t,i)}get hasTokens(){return this._tokens.hasTokens}}class Y2e{constructor(){this.changeType=1}}class mc{static applyInjectedText(e,t){if(!t||t.length===0)return e;let i="",r=0;for(const s of t)i+=e.substring(r,s.column-1),r=s.column-1,i+=s.options.content;return i+=e.substring(r),i}static fromDecorations(e){const t=[];for(const i of e)i.options.before&&i.options.before.content.length>0&&t.push(new mc(i.ownerId,i.range.startLineNumber,i.range.startColumn,i.options.before,0)),i.options.after&&i.options.after.content.length>0&&t.push(new mc(i.ownerId,i.range.endLineNumber,i.range.endColumn,i.options.after,1));return t.sort((i,r)=>i.lineNumber===r.lineNumber?i.column===r.column?i.order-r.order:i.column-r.column:i.lineNumber-r.lineNumber),t}constructor(e,t,i,r,s){this.ownerId=e,this.lineNumber=t,this.column=i,this.options=r,this.order=s}}class p${constructor(e,t,i){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=i}}class Z2e{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class X2e{constructor(e,t,i,r){this.changeType=4,this.injectedTexts=r,this.fromLineNumber=e,this.toLineNumber=t,this.detail=i}}class Q2e{constructor(){this.changeType=5}}class X0{constructor(e,t,i,r){this.changes=e,this.versionId=t,this.isUndoing=i,this.isRedoing=r,this.resultingSelection=null}containsEvent(e){for(let t=0,i=this.changes.length;t<i;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const i=[].concat(e.changes).concat(t.changes),r=t.versionId,s=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new X0(i,r,s,o)}}class nQ{constructor(e){this.changes=e}}class sm{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=X0.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),i=sm._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new sm(t,i)}static _mergeChangeEvents(e,t){const i=[].concat(e.changes).concat(t.changes),r=t.eol,s=t.versionId,o=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,c=e.isEolChange&&t.isEolChange;return{changes:i,eol:r,isEolChange:c,versionId:s,isUndoing:o,isRedoing:a,isFlush:l}}}var J2e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},j2=function(n,e){return function(t,i){e(t,i,n)}},ug;function eSe(n){const e=new eQ;return e.acceptChunk(n),e.finish()}function tSe(n){const e=new eQ;let t;for(;typeof(t=n.read())=="string";)e.acceptChunk(t);return e.finish()}function b$(n,e){let t;return typeof n=="string"?t=eSe(n):Rpe(n)?t=tSe(n):t=n,t.create(e)}let U2=0;const iSe=999,nSe=1e4;class rSe{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,i=0;do{const r=this._source.read();if(r===null)return this._eos=!0,t===0?null:e.join("");if(r.length>0&&(e[t++]=r,i+=r.length),i>=64*1024)return e.join("")}while(!0)}}const v_=()=>{throw new Error("Invalid change accessor")};var nc;let P9=(nc=class extends xe{static resolveOptions(e,t){if(t.detectIndentation){const i=s$(e,t.tabSize,t.insertSpaces);return new PS({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new PS(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return ih(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,i,r=null,s,o,a,l){super(),this._undoRedoService=s,this._languageService=o,this._languageConfigurationService=a,this.instantiationService=l,this._onWillDispose=this._register(new de),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new hSe(p=>this.handleBeforeFireDecorationsChangedEvent(p))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new de),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new de),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new de),this._eventEmitter=this._register(new uSe),this._languageSelectionListener=this._register(new Pu),this._deltaDecorationCallCnt=0,this._attachedViews=new U2e,U2++,this.id="$model"+U2,this.isForSimpleWidget=i.isForSimpleWidget,typeof r>"u"||r===null?this._associatedResource=Ut.parse("inmemory://model/"+U2):this._associatedResource=r,this._attachedEditorCount=0;const{textBuffer:c,disposable:h}=b$(e,i.defaultEOL);this._buffer=c,this._bufferDisposable=h,this._options=ug.resolveOptions(this._buffer,i);const u=typeof t=="string"?t:t.languageId;typeof t!="string"&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new c2e(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new m2e(this,this._languageConfigurationService)),this._decorationProvider=this._register(new u2e(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(R9,this,this._bracketPairs,u,this._attachedViews);const d=this._buffer.getLineCount(),g=this._buffer.getValueLengthInRange(new oe(1,1,d,this._buffer.getLineLength(d)+1),0);i.largeFileOptimizations?(this._isTooLargeForTokenization=g>ug.LARGE_FILE_SIZE_THRESHOLD||d>ug.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=g>ug.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=g>ug._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=XK(U2),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new _$,this._commandManager=new hR(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(u),this._register(this._languageConfigurationService.onDidChange(p=>{this._bracketPairs.handleLanguageConfigurationServiceChange(p),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(p)}))}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new Z0([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=xe.None}_assertNotDisposed(){if(this._isDisposed)throw new Ti("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new sm(e,t)))}setValue(e){if(this._assertNotDisposed(),e==null)throw ZL();const{textBuffer:t,disposable:i}=b$(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,i)}_createContentChanged2(e,t,i,r,s,o,a,l){return{changes:[{range:e,rangeOffset:t,rangeLength:i,text:r}],eol:this._buffer.getEOL(),isEolChange:l,versionId:this.getVersionId(),isUndoing:s,isRedoing:o,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const i=this.getFullModelRange(),r=this.getValueLengthInRange(i),s=this.getLineCount(),o=this.getLineMaxColumn(s);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new _$,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new X0([new Y2e],this._versionId,!1,!1),this._createContentChanged2(new oe(1,1,s,o),0,r,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const i=this.getFullModelRange(),r=this.getValueLengthInRange(i),s=this.getLineCount(),o=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new X0([new Q2e],this._versionId,!1,!1),this._createContentChanged2(new oe(1,1,s,o),0,r,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let i=0,r=t.length;i<r;i++){const s=t[i],o=s.range,a=s.cachedAbsoluteStart-s.start,l=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),c=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);s.cachedAbsoluteStart=l,s.cachedAbsoluteEnd=c,s.cachedVersionId=e,s.start=l-a,s.end=c-a,pf(s)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const i=this._buffer.getLineCount();for(let r=1;r<=i;r++){const s=this._buffer.getLineLength(r);s>=nSe?t+=s:e+=s}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,i=typeof e.indentSize<"u"?e.indentSize:this._options.originalIndentSize,r=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,s=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new PS({tabSize:t,indentSize:i,insertSpaces:r,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:o});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const i=s$(this._buffer,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),WX(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(YK.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(i=>({range:i.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Ti("Operation would exceed heap memory limits");const i=this.getFullModelRange(),r=this.getValueInRange(i,e);return t?this._buffer.getBOM()+r:r}createSnapshot(e=!1){return new rSe(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const i=this.getFullModelRange(),r=this.getValueLengthInRange(i,e);return t?this._buffer.getBOM().length+r:r}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ti("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ti("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Ti("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ti("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ti("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ti("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),i=e.startLineNumber,r=e.startColumn;let s=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),o=Math.floor(typeof r=="number"&&!isNaN(r)?r:1);if(s<1)s=1,o=1;else if(s>t)s=t,o=this.getLineMaxColumn(s);else if(o<=1)o=1;else{const u=this.getLineMaxColumn(s);o>=u&&(o=u)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),h=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,h=1;else if(c>t)c=t,h=this.getLineMaxColumn(c);else if(h<=1)h=1;else{const u=this.getLineMaxColumn(c);h>=u&&(h=u)}return i===s&&r===o&&a===c&&l===h&&e instanceof oe&&!(e instanceof $i)?e:new oe(s,o,c,h)}_isValidPosition(e,t,i){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const r=this._buffer.getLineCount();if(e>r)return!1;if(t===1)return!0;const s=this.getLineMaxColumn(e);if(t>s)return!1;if(i===1){const o=this._buffer.getLineCharCode(e,t-2);if(Lr(o))return!1}return!0}_validatePosition(e,t,i){const r=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),s=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),o=this._buffer.getLineCount();if(r<1)return new be(1,1);if(r>o)return new be(o,this.getLineMaxColumn(o));if(s<=1)return new be(r,1);const a=this.getLineMaxColumn(r);if(s>=a)return new be(r,a);if(i===1){const l=this._buffer.getLineCharCode(r,s-2);if(Lr(l))return new be(r,s-1)}return new be(r,s)}validatePosition(e){return this._assertNotDisposed(),e instanceof be&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const i=e.startLineNumber,r=e.startColumn,s=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(i,r,0)||!this._isValidPosition(s,o,0))return!1;if(t===1){const a=r>1?this._buffer.getLineCharCode(i,r-2):0,l=o>1&&o<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,o-2):0,c=Lr(a),h=Lr(l);return!c&&!h}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof oe&&!(e instanceof $i)&&this._isValidRange(e,1))return e;const i=this._validatePosition(e.startLineNumber,e.startColumn,0),r=this._validatePosition(e.endLineNumber,e.endColumn,0),s=i.lineNumber,o=i.column,a=r.lineNumber,l=r.column;{const c=o>1?this._buffer.getLineCharCode(s,o-2):0,h=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,u=Lr(c),d=Lr(h);return!u&&!d?new oe(s,o,a,l):s===a&&o===l?new oe(s,o-1,a,l-1):u&&d?new oe(s,o-1,a,l+1):u?new oe(s,o-1,a,l):new oe(s,o,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const i=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new oe(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,i,r){return this._buffer.findMatchesLineByLine(e,t,i,r)}findMatches(e,t,i,r,s,o,a=iSe){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(u=>oe.isIRange(u))&&(l=t.map(u=>this.validateRange(u)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((u,d)=>u.startLineNumber-d.startLineNumber||u.startColumn-d.startColumn);const c=[];c.push(l.reduce((u,d)=>oe.areIntersecting(u,d)?u.plusRange(d):(c.push(u),d)));let h;if(!i&&e.indexOf(`
`)<0){const d=new Fp(e,i,r,s).parseSearchRequest();if(!d)return[];h=g=>this.findMatchesLineByLine(g,d,o,a)}else h=u=>x2.findMatches(this,new Fp(e,i,r,s),u,o,a);return c.map(h).reduce((u,d)=>u.concat(d),[])}findNextMatch(e,t,i,r,s,o){this._assertNotDisposed();const a=this.validatePosition(t);if(!i&&e.indexOf(`
`)<0){const c=new Fp(e,i,r,s).parseSearchRequest();if(!c)return null;const h=this.getLineCount();let u=new oe(a.lineNumber,a.column,h,this.getLineMaxColumn(h)),d=this.findMatchesLineByLine(u,c,o,1);return x2.findNextMatch(this,new Fp(e,i,r,s),a,o),d.length>0||(u=new oe(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),d=this.findMatchesLineByLine(u,c,o,1),d.length>0)?d[0]:null}return x2.findNextMatch(this,new Fp(e,i,r,s),a,o)}findPreviousMatch(e,t,i,r,s,o){this._assertNotDisposed();const a=this.validatePosition(t);return x2.findPreviousMatch(this,new Fp(e,i,r,s),a,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof JT?e:new JT(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let i=0,r=e.length;i<r;i++)t[i]=this._validateEditOperation(e[i]);return t}pushEditOperations(e,t,i,r){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),i,r)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,i,r){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const s=t.map(a=>({range:this.validateRange(a.range),text:a.text}));let o=!0;if(e)for(let a=0,l=e.length;a<l;a++){const c=e[a];let h=!1;for(let u=0,d=s.length;u<d;u++){const g=s[u].range,p=g.startLineNumber>c.endLineNumber,b=c.startLineNumber>g.endLineNumber;if(!p&&!b){h=!0;break}}if(!h){o=!1;break}}if(o)for(let a=0,l=this._trimAutoWhitespaceLines.length;a<l;a++){const c=this._trimAutoWhitespaceLines[a],h=this.getLineMaxColumn(c);let u=!0;for(let d=0,g=s.length;d<g;d++){const p=s[d].range,b=s[d].text;if(!(c<p.startLineNumber||c>p.endLineNumber)&&!(c===p.startLineNumber&&p.startColumn===h&&p.isEmpty()&&b&&b.length>0&&b.charAt(0)===`
`)&&!(c===p.startLineNumber&&p.startColumn===1&&p.isEmpty()&&b&&b.length>0&&b.charAt(b.length-1)===`
`)){u=!1;break}}if(u){const d=new oe(c,1,c,h);t.push(new JT(null,d,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,i,r)}_applyUndo(e,t,i,r){const s=e.map(o=>{const a=this.getPositionAt(o.newPosition),l=this.getPositionAt(o.newEnd);return{range:new oe(a.lineNumber,a.column,l.lineNumber,l.column),text:o.oldText}});this._applyUndoRedoEdits(s,t,!0,!1,i,r)}_applyRedo(e,t,i,r){const s=e.map(o=>{const a=this.getPositionAt(o.oldPosition),l=this.getPositionAt(o.oldEnd);return{range:new oe(a.lineNumber,a.column,l.lineNumber,l.column),text:o.newText}});this._applyUndoRedoEdits(s,t,!1,!0,i,r)}_applyUndoRedoEdits(e,t,i,r,s,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=r,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const i=this._validateEditOperations(e);return this._doApplyEdits(i,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const i=this._buffer.getLineCount(),r=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),s=this._buffer.getLineCount(),o=r.changes;if(this._trimAutoWhitespaceLines=r.trimAutoWhitespaceLineNumbers,o.length!==0){for(let c=0,h=o.length;c<h;c++){const u=o[c];this._decorationsTree.acceptReplace(u.rangeOffset,u.rangeLength,u.text.length,u.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=i;for(let c=0,h=o.length;c<h;c++){const u=o[c],[d]=I1(u.text);this._onDidChangeDecorations.fire();const g=u.range.startLineNumber,p=u.range.endLineNumber,b=p-g,_=d,w=Math.min(b,_),y=_-b,k=s-l-y+g,L=k,T=k+_,N=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new be(L,1)),this.getOffsetAt(new be(T,this.getLineMaxColumn(T))),0),D=mc.fromDecorations(N),O=new Ru(D);for(let B=w;B>=0;B--){const G=g+B,H=k+B;O.takeFromEndWhile(X=>X.lineNumber>H);const q=O.takeFromEndWhile(X=>X.lineNumber===H);a.push(new p$(G,this.getLineContent(H),q))}if(w<b){const B=g+w;a.push(new Z2e(B+1,p))}if(w<_){const B=new Ru(D),G=g+w,H=_-w,q=s-l-H+G+1,X=[],z=[];for(let Q=0;Q<H;Q++){const te=q+Q;z[Q]=this.getLineContent(te),B.takeWhile(se=>se.lineNumber<te),X[Q]=B.takeWhile(se=>se.lineNumber===te)}a.push(new X2e(G+1,g+_,z,X))}l+=y}this._emitContentChangedEvent(new X0(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return r.reverseEdits===null?void 0:r.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const i=Array.from(e).map(r=>new p$(r,this.getLineContent(r),this._getInjectedTextInLine(r)));this._onDidChangeInjectedText.fire(new nQ(i))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const i={addDecoration:(s,o)=>this._deltaDecorationsImpl(e,[],[{range:s,options:o}])[0],changeDecoration:(s,o)=>{this._changeDecorationImpl(s,o)},changeDecorationOptions:(s,o)=>{this._changeDecorationOptionsImpl(s,w$(o))},removeDecoration:s=>{this._deltaDecorationsImpl(e,[s],[])},deltaDecorations:(s,o)=>s.length===0&&o.length===0?[]:this._deltaDecorationsImpl(e,s,o)};let r=null;try{r=t(i)}catch(s){Wi(s)}return i.addDecoration=v_,i.changeDecoration=v_,i.changeDecorationOptions=v_,i.removeDecoration=v_,i.deltaDecorations=v_,r}deltaDecorations(e,t,i=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),Wi(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,i){const r=e?this._decorations[e]:null;if(!r)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:v$[i]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(r),delete this._decorations[r.id],null;const s=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),a=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(r),r.reset(this.getVersionId(),o,a,s),r.setOptions(v$[i]),this._decorationsTree.insert(r),r.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let i=0,r=t.length;i<r;i++){const s=t[i];this._decorationsTree.delete(s),delete this._decorations[s.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,i=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,i)}getLinesDecorations(e,t,i=0,r=!1,s=!1){const o=this.getLineCount(),a=Math.min(o,Math.max(1,e)),l=Math.min(o,Math.max(1,t)),c=this.getLineMaxColumn(l),h=new oe(a,1,l,c),u=this._getDecorationsInRange(h,i,r,s);return AD(u,this._decorationProvider.getDecorationsInRange(h,i,r)),u}getDecorationsInRange(e,t=0,i=!1,r=!1,s=!1){const o=this.validateRange(e),a=this._getDecorationsInRange(o,t,i,s);return AD(a,this._decorationProvider.getDecorationsInRange(o,t,i,r)),a}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),i=t+this._buffer.getLineLength(e),r=this._decorationsTree.getInjectedTextInInterval(this,t,i,0);return mc.fromDecorations(r).filter(s=>s.lineNumber===e)}getAllDecorations(e=0,t=!1){let i=this._decorationsTree.getAll(this,e,t,!1,!1);return i=i.concat(this._decorationProvider.getAllDecorations(e,t)),i}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,i,r){const s=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),o=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,s,o,t,i,r)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const i=this._decorations[e];if(!i)return;if(i.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(i.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const r=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),o=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),s,o,r),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber)}_changeDecorationOptionsImpl(e,t){const i=this._decorations[e];if(!i)return;const r=!!(i.options.overviewRuler&&i.options.overviewRuler.color),s=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(t),i.options.after||t.after){const l=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber)}if(i.options.before||t.before){const l=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}const o=r!==s,a=oSe(t)!==qS(i);o||a?(this._decorationsTree.delete(i),i.setOptions(t),this._decorationsTree.insert(i)):i.setOptions(t)}_deltaDecorationsImpl(e,t,i,r=!1){const s=this.getVersionId(),o=t.length;let a=0;const l=i.length;let c=0;this._onDidChangeDecorations.beginDeferredEmit();try{const h=new Array(l);for(;a<o||c<l;){let u=null;if(a<o){do u=this._decorations[t[a++]];while(!u&&a<o);if(u){if(u.options.after){const d=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.endLineNumber)}if(u.options.before){const d=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.startLineNumber)}this._decorationsTree.delete(u),r||this._onDidChangeDecorations.checkAffectedAndFire(u.options)}}if(c<l){if(!u){const w=++this._lastDecorationId,y=`${this._instanceId};${w}`;u=new ZX(y,0,0),this._decorations[y]=u}const d=i[c],g=this._validateRangeRelaxedNoAllocations(d.range),p=w$(d.options),b=this._buffer.getOffsetAt(g.startLineNumber,g.startColumn),_=this._buffer.getOffsetAt(g.endLineNumber,g.endColumn);u.ownerId=e,u.reset(s,b,_,g),u.setOptions(p),u.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.endLineNumber),u.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.startLineNumber),r||this._onDidChangeDecorations.checkAffectedAndFire(p),this._decorationsTree.insert(u),h[c]=u.id,c++}else u&&delete this._decorations[u.id]}return h}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){typeof e=="string"?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return sSe(this.getLineContent(e))+1}},ug=nc,nc._MODEL_SYNC_LIMIT=50*1024*1024,nc.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024,nc.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3,nc.LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024,nc.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:fs.tabSize,indentSize:fs.indentSize,insertSpaces:fs.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:fs.trimAutoWhitespace,largeFileOptimizations:fs.largeFileOptimizations,bracketPairColorizationOptions:fs.bracketPairColorizationOptions},nc);P9=ug=J2e([j2(4,LA),j2(5,Ir),j2(6,mh),j2(7,Ni)],P9);function sSe(n){let e=0;for(const t of n)if(t===" "||t==="	")e++;else break;return e}function C6(n){return!!(n.options.overviewRuler&&n.options.overviewRuler.color)}function oSe(n){return!!n.after||!!n.before}function qS(n){return!!n.options.after||!!n.options.before}class _${constructor(){this._decorationsTree0=new _6,this._decorationsTree1=new _6,this._injectedTextDecorationsTree=new _6}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const i of t)i.range===null&&(i.range=e.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd));return t}getAllInInterval(e,t,i,r,s,o){const a=e.getVersionId(),l=this._intervalSearch(t,i,r,s,a,o);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,i,r,s,o){const a=this._decorationsTree0.intervalSearch(e,t,i,r,s,o),l=this._decorationsTree1.intervalSearch(e,t,i,r,s,o),c=this._injectedTextDecorationsTree.intervalSearch(e,t,i,r,s,o);return a.concat(l).concat(c)}getInjectedTextInInterval(e,t,i,r){const s=e.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(t,i,r,!1,s,!1);return this._ensureNodesHaveRanges(e,o).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const i=e.getVersionId(),r=this._injectedTextDecorationsTree.search(t,!1,i,!1);return this._ensureNodesHaveRanges(e,r).filter(s=>s.options.showIfCollapsed||!s.range.isEmpty())}getAll(e,t,i,r,s){const o=e.getVersionId(),a=this._search(t,i,r,o,s);return this._ensureNodesHaveRanges(e,a)}_search(e,t,i,r,s){if(i)return this._decorationsTree1.search(e,t,r,s);{const o=this._decorationsTree0.search(e,t,r,s),a=this._decorationsTree1.search(e,t,r,s),l=this._injectedTextDecorationsTree.search(e,t,r,s);return o.concat(a).concat(l)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),i=this._decorationsTree1.collectNodesFromOwner(e),r=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(i).concat(r)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),i=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(i)}insert(e){qS(e)?this._injectedTextDecorationsTree.insert(e):C6(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){qS(e)?this._injectedTextDecorationsTree.delete(e):C6(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const i=e.getVersionId();return t.cachedVersionId!==i&&this._resolveNode(t,i),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){qS(e)?this._injectedTextDecorationsTree.resolveNode(e,t):C6(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,i,r){this._decorationsTree0.acceptReplace(e,t,i,r),this._decorationsTree1.acceptReplace(e,t,i,r),this._injectedTextDecorationsTree.acceptReplace(e,t,i,r)}}function Mc(n){return n.replace(/[^a-z0-9\-_]/gi," ")}class rQ{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class aSe extends rQ{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:Vx.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const i=e?t.getColor(e.id):null;return i?i.toString():""}}class lSe{constructor(e){this.position=e?.position??ff.Center,this.persistLane=e?.persistLane}}class cSe extends rQ{constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?Me.fromHex(e):t.getColor(e.id)}}class Fw{static from(e){return e instanceof Fw?e:new Fw(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class br{static register(e){return new br(e)}static createDynamic(e){return new br(e)}constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?Mc(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?Mc(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new aSe(e.overviewRuler):null,this.minimap=e.minimap?new cSe(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new lSe(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?Mc(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?Mc(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?Mc(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?Sfe(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?Mc(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?Mc(e.marginClassName):null,this.inlineClassName=e.inlineClassName?Mc(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?Mc(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?Mc(e.afterContentClassName):null,this.after=e.after?Fw.from(e.after):null,this.before=e.before?Fw.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}}br.EMPTY=br.register({description:"empty"});const v$=[br.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),br.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),br.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),br.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function w$(n){return n instanceof br?n:br.createDynamic(n)}class hSe extends xe{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new de),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),this._affectedInjectedTextLines?.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||=!!e.minimap?.position,this._affectsOverviewRuler||=!!e.overviewRuler?.color,this._affectsGlyphMargin||=!!e.glyphMarginClassName,this._affectsLineNumber||=!!e.lineNumberClassName,this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class uSe extends xe{constructor(){super(),this._fastEmitter=this._register(new de),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new de),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}var dSe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},q2=function(n,e){return function(t,i){e(t,i,n)}},Xp;function tg(n){return n.toString()}let fSe=class{constructor(e,t,i){this.model=e,this._modelEventListeners=new rt,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(r=>i(e,r)))}dispose(){this._modelEventListeners.dispose()}};const gSe=wo||hi?1:2;class mSe{constructor(e,t,i,r,s,o,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=i,this.sharesUndoRedoStack=r,this.heapSize=s,this.sha1=o,this.versionId=a,this.alternativeVersionId=l}}var hm;let O9=(hm=class extends xe{constructor(e,t,i,r){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=i,this._instantiationService=r,this._onModelAdded=this._register(new de),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new de),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new de),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(s=>this._updateModelOptions(s))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){let i=fs.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const d=parseInt(e.editor.tabSize,10);isNaN(d)||(i=d),i<1&&(i=1)}let r="tabSize";if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const d=parseInt(e.editor.indentSize,10);isNaN(d)||(r=Math.max(d,1))}let s=fs.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(s=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let o=gSe;const a=e.eol;a===`\r
`?o=2:a===`
`&&(o=1);let l=fs.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(l=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let c=fs.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(c=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let h=fs.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(h=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let u=fs.bracketPairColorizationOptions;return e.editor?.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(u={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:i,indentSize:r,insertSpaces:s,detectIndentation:c,defaultEOL:o,trimAutoWhitespace:l,largeFileOptimizations:h,bracketPairColorizationOptions:u}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const i=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return i&&typeof i=="string"&&i!=="auto"?i:gl===3||gl===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,i){const r=typeof e=="string"?e:e.languageId;let s=this._modelCreationOptionsByLanguageAndResource[r+t];if(!s){const o=this._configurationService.getValue("editor",{overrideIdentifier:r,resource:t}),a=this._getEOL(t,r);s=Xp._readModelOptions({editor:o,eol:a},i),this._modelCreationOptionsByLanguageAndResource[r+t]=s}return s}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const i=Object.keys(this._models);for(let r=0,s=i.length;r<s;r++){const o=i[r],a=this._models[o],l=a.model.getLanguageId(),c=a.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:l,resource:c})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:l,resource:c}))continue;const h=t[l+c],u=this.getCreationOptions(l,c,a.model.isForSimpleWidget);Xp._setModelOptionsForModel(a.model,u,h)}}static _setModelOptionsForModel(e,t,i){i&&i.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(i&&i.detectIndentation===t.detectIndentation&&i.insertSpaces===t.insertSpaces&&i.tabSize===t.tabSize&&i.indentSize===t.indentSize&&i.trimAutoWhitespace===t.trimAutoWhitespace&&Uo(i.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(tg(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(tg(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(tg(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(i=>{i.sharesUndoRedoStack||t.push(i)}),t.sort((i,r)=>i.time-r.time);t.length>0&&this._disposedModelsHeapSize>e;){const i=t.shift();this._removeDisposedModel(i.uri),i.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(i.initialUndoRedoSnapshot)}}}_createModelData(e,t,i,r){const s=this.getCreationOptions(t,i,r),o=this._instantiationService.createInstance(P9,e,t,s,i);if(i&&this._disposedModels.has(tg(i))){const c=this._removeDisposedModel(i),h=this._undoRedoService.getElements(i),u=this._getSHA1Computer(),d=u.canComputeSHA1(o)?u.computeSHA1(o)===c.sha1:!1;if(d||c.sharesUndoRedoStack){for(const g of h.past)ru(g)&&g.matchesResource(i)&&g.setModel(o);for(const g of h.future)ru(g)&&g.matchesResource(i)&&g.setModel(o);this._undoRedoService.setElementsValidFlag(i,!0,g=>ru(g)&&g.matchesResource(i)),d&&(o._overwriteVersionId(c.versionId),o._overwriteAlternativeVersionId(c.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=tg(o.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new fSe(o,c=>this._onWillDispose(c),(c,h)=>this._onDidChangeLanguage(c,h));return this._models[a]=l,l}createModel(e,t,i,r=!1){let s;return t?s=this._createModelData(e,t,i,r):s=this._createModelData(e,vl,i,r),this._onModelAdded.fire(s.model),s.model}getModels(){const e=[],t=Object.keys(this._models);for(let i=0,r=t.length;i<r;i++){const s=t[i];e.push(this._models[s].model)}return e}getModel(e){const t=tg(e),i=this._models[t];return i?i.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Vt.file||e.scheme===Vt.vscodeRemote||e.scheme===Vt.vscodeUserData||e.scheme===Vt.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=tg(e.uri),i=this._models[t],r=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let s=!1,o=0;if(r||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const c=this._undoRedoService.getElements(e.uri);if(c.past.length>0||c.future.length>0){for(const h of c.past)ru(h)&&h.matchesResource(e.uri)&&(s=!0,o+=h.heapSize(e.uri),h.setModel(e.uri));for(const h of c.future)ru(h)&&h.matchesResource(e.uri)&&(s=!0,o+=h.heapSize(e.uri),h.setModel(e.uri))}}const a=Xp.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,l=this._getSHA1Computer();if(s)if(!r&&(o>a||!l.canComputeSHA1(e))){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}else this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,c=>ru(c)&&c.matchesResource(e.uri)),this._insertDisposedModel(new mSe(e.uri,i.model.getInitialUndoRedoSnapshot(),Date.now(),r,o,l.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!r){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}delete this._models[t],i.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const i=t.oldLanguage,r=e.getLanguageId(),s=this.getCreationOptions(i,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(r,e.uri,e.isForSimpleWidget);Xp._setModelOptionsForModel(e,o,s),this._onModelModeChanged.fire({model:e,oldLanguageId:i})}_getSHA1Computer(){return new B9}},Xp=hm,hm.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024,hm);O9=Xp=dSe([q2(0,Nn),q2(1,nZ),q2(2,LA),q2(3,Ni)],O9);const pL=class pL{canComputeSHA1(e){return e.getValueLength()<=pL.MAX_MODEL_SIZE}computeSHA1(e){const t=new JE,i=e.createSnapshot();let r;for(;r=i.read();)t.update(r);return t.digest()}};pL.MAX_MODEL_SIZE=10*1024*1024;let B9=pL;var F9;(function(n){n[n.PRESERVE=0]="PRESERVE",n[n.LAST=1]="LAST"})(F9||(F9={}));const sQ={Quickaccess:"workbench.contributions.quickaccess"};class pSe{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,i)=>i.prefix.length-t.prefix.length),Mt(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return PM([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(i=>e.startsWith(i.prefix))||void 0||this.defaultProvider}}Ur.add(sQ.Quickaccess,new pSe);const bSe={ctrlCmd:!1,alt:!1};var B1;(function(n){n[n.Blur=1]="Blur",n[n.Gesture=2]="Gesture",n[n.Other=3]="Other"})(B1||(B1={}));var jc;(function(n){n[n.NONE=0]="NONE",n[n.FIRST=1]="FIRST",n[n.SECOND=2]="SECOND",n[n.LAST=3]="LAST"})(jc||(jc={}));var Gi;(function(n){n[n.First=1]="First",n[n.Second=2]="Second",n[n.Last=3]="Last",n[n.Next=4]="Next",n[n.Previous=5]="Previous",n[n.NextPage=6]="NextPage",n[n.PreviousPage=7]="PreviousPage",n[n.NextSeparator=8]="NextSeparator",n[n.PreviousSeparator=9]="PreviousSeparator"})(Gi||(Gi={}));var wk;(function(n){n[n.Title=1]="Title",n[n.Inline=2]="Inline"})(wk||(wk={}));const O5=ai("quickInputService");var _Se=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},y$=function(n,e){return function(t,i){e(t,i,n)}};let W9=class extends xe{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=Ur.as(sQ.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){const[r,s]=this.getOrInstantiateProvider(e,i?.enabledProviderPrefixes),o=this.visibleQuickAccess,a=o?.descriptor;if(o&&s&&a===s){e!==s.prefix&&!i?.preserveValue&&(o.picker.value=e),this.adjustValueSelection(o.picker,s,i);return}if(s&&!i?.preserveValue){let p;if(o&&a&&a!==s){const b=o.value.substr(a.prefix.length);b&&(p=`${s.prefix}${b}`)}if(!p){const b=r?.defaultFilterValue;b===F9.LAST?p=this.lastAcceptedPickerValues.get(s):typeof b=="string"&&(p=`${s.prefix}${b}`)}typeof p=="string"&&(e=p)}const l=o?.picker?.valueSelection,c=o?.picker?.value,h=new rt,u=h.add(this.quickInputService.createQuickPick({useSeparators:!0}));u.value=e,this.adjustValueSelection(u,s,i),u.placeholder=i?.placeholder??s?.placeholder,u.quickNavigate=i?.quickNavigateConfiguration,u.hideInput=!!u.quickNavigate&&!o,(typeof i?.itemActivation=="number"||i?.quickNavigateConfiguration)&&(u.itemActivation=i?.itemActivation??jc.SECOND),u.contextKey=s?.contextKey,u.filterValue=p=>p.substring(s?s.prefix.length:0);let d;t&&(d=new sY,h.add(Oe.once(u.onWillAccept)(p=>{p.veto(),u.hide()}))),h.add(this.registerPickerListeners(u,r,s,e,i));const g=h.add(new ib);if(r&&h.add(r.provide(u,g.token,i?.providerOptions)),Oe.once(u.onDidHide)(()=>{u.selectedItems.length===0&&g.cancel(),h.dispose(),d?.complete(u.selectedItems.slice(0))}),u.show(),l&&c===e&&(u.valueSelection=l),t)return d?.p}adjustValueSelection(e,t,i){let r;i?.preserveValue?r=[e.value.length,e.value.length]:r=[t?.prefix.length??0,e.value.length],e.valueSelection=r}registerPickerListeners(e,t,i,r,s){const o=new rt,a=this.visibleQuickAccess={picker:e,descriptor:i,value:r};return o.add(Mt(()=>{a===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),o.add(e.onDidChangeValue(l=>{const[c]=this.getOrInstantiateProvider(l,s?.enabledProviderPrefixes);c!==t?this.show(l,{enabledProviderPrefixes:s?.enabledProviderPrefixes,preserveValue:!0,providerOptions:s?.providerOptions}):a.value=l})),i&&o.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(i,e.value)})),o}getOrInstantiateProvider(e,t){const i=this.registry.getQuickAccessProvider(e);if(!i||t&&!t?.includes(i.prefix))return[void 0,void 0];let r=this.mapProviderToDescriptor.get(i);return r||(r=this.instantiationService.createInstance(i.ctor),this.mapProviderToDescriptor.set(i,r)),[r,i]}};W9=_Se([y$(0,O5),y$(1,Ni)],W9);class B5 extends Gu{constructor(e){super(),this._onChange=this._register(new de),this.onChange=this._onChange.event,this._onKeyDown=this._register(new de),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...gi.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(ph().setupManagedHover(e.hoverDelegate??Qa("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,i=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),i.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,i=>{if(i.keyCode===10||i.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),i.preventDefault(),i.stopPropagation();return}this._onKeyDown.fire(i)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}var vSe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s};class oQ{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}}vSe([Mn],oQ.prototype,"toString",null);const wSe=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function ySe(n){const e=[];let t=0,i;for(;i=wSe.exec(n);){i.index-t>0&&e.push(n.substring(t,i.index));const[,r,s,,o]=i;o?e.push({label:r,href:s,title:o}):e.push({label:r,href:s}),t=i.index+i[0].length}return t<n.length&&e.push(n.substring(t)),new oQ(e)}const S6={},CSe=new iX("quick-input-button-icon-");function SSe(n){if(!n)return;let e;const t=n.dark.toString();return S6[t]?e=S6[t]:(e=CSe.nextId(),n8(`.${e}, .hc-light .${e}`,`background-image: ${Bu(n.light||n.dark)}`),n8(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${Bu(n.dark)}`),S6[t]=e),e}function Lv(n,e,t){let i=n.iconClass||SSe(n.iconPath);return n.alwaysVisible&&(i=i?`${i} always-visible`:"always-visible"),{id:e,label:"",tooltip:n.tooltip||"",class:i,enabled:!0,run:t}}function xSe(n,e,t){Ks(e);const i=ySe(n);let r=0;for(const s of i.nodes)if(typeof s=="string")e.append(...tm(s));else{let o=s.title;!o&&s.href.startsWith("command:")?o=C("executeCommand","Click to execute command '{0}'",s.href.substring(8)):o||(o=s.href);const a=ft("a",{href:s.href,title:o,tabIndex:r++},s.label);a.style.textDecoration="underline";const l=g=>{Bge(g)&&ni.stop(g,!0),t.callback(s.href)},c=t.disposables.add(new Zt(a,Be.CLICK)).event,h=t.disposables.add(new Zt(a,Be.KEY_DOWN)).event,u=Oe.chain(h,g=>g.filter(p=>{const b=new en(p);return b.equals(10)||b.equals(3)}));t.disposables.add(Zs.addTarget(a));const d=t.disposables.add(new Zt(a,Ki.Tap)).event;Oe.any(c,d,u)(l,null,t.disposables),e.appendChild(a)}}var kSe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},C$=function(n,e){return function(t,i){e(t,i,n)}};const aQ="inQuickInput",LSe=new st(aQ,!1,C("inQuickInput","Whether keyboard focus is inside the quick input control")),TSe=Si.has(aQ),lQ="quickInputType",DSe=new st(lQ,void 0,C("quickInputType","The type of the currently visible quick input")),cQ="cursorAtEndOfQuickInputBox",ESe=new st(cQ,!1,C("cursorAtEndOfQuickInputBox","Whether the cursor in the quick input is at the end of the input box")),ISe=Si.has(cQ),z9={iconClass:gi.asClassName(Je.quickInputBack),tooltip:C("quickInput.back","Back")},bL=class bL extends xe{constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._leftButtons=[],this._rightButtons=[],this._inlineButtons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=bL.noPromptMessage,this._severity=rr.Ignore,this.onDidTriggerButtonEmitter=this._register(new de),this.onDidHideEmitter=this._register(new de),this.onWillHideEmitter=this._register(new de),this.onDisposeEmitter=this._register(new de),this.visibleDisposables=this._register(new rt),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!ym;this._ignoreFocusOut=e&&!ym,t&&this.update()}get titleButtons(){return this._leftButtons.length?[...this._leftButtons,this._rightButtons]:this._rightButtons}get buttons(){return[...this._leftButtons,...this._rightButtons,...this._inlineButtons]}set buttons(e){this._leftButtons=e.filter(t=>t===z9),this._rightButtons=e.filter(t=>t!==z9&&t.location!==wk.Inline),this._inlineButtons=e.filter(t=>t.location===wk.Inline),this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=B1.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}willHide(e=B1.Other){this.onWillHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText=" ");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?Ks(this.ui.widget,this._widget):Ks(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new Um,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const r=this._leftButtons.map((a,l)=>Lv(a,`id-${l}`,async()=>this.onDidTriggerButtonEmitter.fire(a)));this.ui.leftActionBar.push(r,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const s=this._rightButtons.map((a,l)=>Lv(a,`id-${l}`,async()=>this.onDidTriggerButtonEmitter.fire(a)));this.ui.rightActionBar.push(s,{icon:!0,label:!1}),this.ui.inlineActionBar.clear();const o=this._inlineButtons.map((a,l)=>Lv(a,`id-${l}`,async()=>this.onDidTriggerButtonEmitter.fire(a)));this.ui.inlineActionBar.push(o,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const r=this.toggles?.filter(s=>s instanceof B5)??[];this.ui.inputBox.toggles=r}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const i=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==i&&(this._lastValidationMessage=i,Ks(this.ui.message),xSe(i,this.ui.message,{callback:r=>{this.ui.linkOpenerDelegate(r)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?C("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==rr.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}};bL.noPromptMessage=C("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");let yk=bL;const _L=class _L extends yk{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new de),this.onWillAcceptEmitter=this._register(new de),this.onDidAcceptEmitter=this._register(new de),this.onDidCustomEmitter=this._register(new de),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=jc.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new de),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new de),this.onDidTriggerItemButtonEmitter=this._register(new de),this.onDidTriggerSeparatorButtonEmitter=this._register(new de),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this._focusEventBufferer=new yy,this.type="quickPick",this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?bSe:this.ui.keyMods}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(Gi.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,(e,t)=>t)(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&_r(e,this._activeItems,(t,i)=>t===i)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&_r(e,this._selectedItems,(i,r)=>i===r)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(uA(t)&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||!this.visible||this.selectedItemsToConfirm!==this._selectedItems&&_r(e,this._selectedItems,(t,i)=>t===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return we(this.ui.container,Be.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new en(e),i=t.keyCode;this._quickNavigate.keybindings.some(o=>{const a=o.getChords();return a.length>1?!1:a[0].shiftKey&&i===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a[0].altKey&&i===6||a[0].ctrlKey&&i===5||a[0].metaKey&&i===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,i={title:!!this.title||!!this.step||!!this.titleButtons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(i),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let r=this.ariaLabel;!r&&i.inputBox&&(r=this.placeholder||_L.DEFAULT_ARIA_LABEL,this.title&&(r+=` - ${this.title}`)),this.ui.list.ariaLabel!==r&&(this.ui.list.ariaLabel=r??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents(()=>{switch(this.ui.list.setElements(this.items),this.ui.list.shouldLoop=!this.canSelectMany,this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this._itemActivation){case jc.NONE:this._itemActivation=jc.FIRST;break;case jc.SECOND:this.ui.list.focus(Gi.Second),this._itemActivation=jc.FIRST;break;case jc.LAST:this.ui.list.focus(Gi.Last),this._itemActivation=jc.FIRST;break;default:this.trySelectFirst();break}})),this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",i.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(Gi.First)),this.keepScrollPosition&&(this.scrollTop=e)}focus(e){this.ui.list.focus(e),this.canSelectMany&&this.ui.list.domFocus()}accept(e){e&&!this._canAcceptInBackground||this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(e??!1))}};_L.DEFAULT_ARIA_LABEL=C("quickInputBox.ariaLabel","Type to narrow down results.");let Ck=_L,NSe=class extends yk{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new de),this.onDidAcceptEmitter=this._register(new de),this.type="inputBox",this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}},H9=class extends Tw{constructor(e,t){super("element",!1,i=>this.getOverrideOptions(i),e,t)}getOverrideOptions(e){const t=($r(e.content)?e.content.textContent??"":typeof e.content=="string"?e.content:e.content.value).includes(`
`);return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:t,skipFadeInAnimation:!0}}}};H9=kSe([C$(0,Nn),C$(1,Ay)],H9);Me.white.toString(),Me.white.toString();class V9 extends xe{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new de),this._onDidEscape=this._register(new de),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const i=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,r=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=r||"",this._element.style.backgroundColor=i||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof t.title=="string"&&this.setTitle(t.title),typeof t.ariaLabel=="string"&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(Zs.addTarget(this._element)),[Be.CLICK,Ki.Tap].forEach(s=>{this._register(we(this._element,s,o=>{if(!this.enabled){ni.stop(o);return}this._onDidClick.fire(o)}))}),this._register(we(this._element,Be.KEY_DOWN,s=>{const o=new en(s);let a=!1;this.enabled&&(o.equals(3)||o.equals(10))?(this._onDidClick.fire(s),a=!0):o.equals(9)&&(this._onDidEscape.fire(s),this._element.blur(),a=!0),a&&ni.stop(o,!0)})),this._register(we(this._element,Be.MOUSE_OVER,s=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(we(this._element,Be.MOUSE_OUT,s=>{this.updateBackground(!1)})),this.focusTracker=this._register(vw(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let i of tm(e))if(typeof i=="string"){if(i=i.trim(),i==="")continue;const r=document.createElement("span");r.textContent=i,t.push(r)}else t.push(i);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){if(this._label===e||j0(this._label)&&j0(e)&&ive(this._label,e))return;this._element.classList.add("monaco-text-button");const t=this.options.supportShortLabel?this._labelElement:this._element;if(j0(e)){const r=$A(e,{inline:!0});r.dispose();const s=r.element.querySelector("p")?.innerHTML;if(s){const o=uY(s,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});t.innerHTML=o}else Ks(t)}else this.options.supportIcons?Ks(t,...this.getContentElements(e)):t.textContent=e;let i="";typeof this.options.title=="string"?i=this.options.title:this.options.title&&(i=fve(e)),this.setTitle(i),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",i),this._label=e}get label(){return this._label}set icon(e){this._element.classList.add(...gi.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}setTitle(e){!this._hover&&e!==""?this._hover=this._register(ph().setupManagedHover(this.options.hoverDelegate??Qa("mouse"),this._element,e)):this._hover&&this._hover.update(e)}}class S${constructor(e,t,i){this.options=t,this.styles=i,this.count=0,this.element=it(e,ft(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=zE(this.countFormat,this.count),this.element.title=zE(this.titleFormat,this.count),this.element.style.backgroundColor=this.styles.badgeBackground??"",this.element.style.color=this.styles.badgeForeground??"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}const x$="done",k$="active",x6="infinite",k6="infinite-long-running",L$="discrete",vL=class vL extends xe{constructor(e,t){super(),this.progressSignal=this._register(new Pu),this.workedVal=0,this.showDelayedScheduler=this._register(new Gs(()=>SY(this.element),0)),this.longRunningScheduler=this._register(new Gs(()=>this.infiniteLongRunning(),vL.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=t?.progressBarBackground||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(k$,x6,k6,L$),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(x$),this.element.classList.contains(x6)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(L$,x$,k6),this.element.classList.add(k$,x6),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(k6)}getContainer(){return this.element}};vL.LONG_RUNNING_INFINITE_THRESHOLD=1e4;let $9=vL;const MSe=C("caseDescription","Match Case"),ASe=C("wordsDescription","Match Whole Word"),RSe=C("regexDescription","Use Regular Expression");class PSe extends B5{constructor(e){super({icon:Je.caseSensitive,title:MSe+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Qa("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class OSe extends B5{constructor(e){super({icon:Je.wholeWord,title:ASe+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Qa("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class BSe extends B5{constructor(e){super({icon:Je.regex,title:RSe+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Qa("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class FSe{constructor(e,t=0,i=e.length,r=t-1){this.items=e,this.start=t,this.end=i,this.index=r}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class WSe{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new FSe(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const w_=ft;class zSe extends Gu{constructor(e,t,i){super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new de),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new de),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=i,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=it(e,w_(".monaco-inputbox.idle"));const r=this.options.flexibleHeight?"textarea":"input",s=it(this.element,w_(".ibwrapper"));if(this.input=it(s,w_(r+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=it(s,w_("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new b_e(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),it(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(l=>this.input.scrollTop=l.scrollTop));const o=this._register(new Zt(e.ownerDocument,"selectionchange")),a=Oe.filter(o.event,()=>e.ownerDocument.getSelection()?.anchorNode===s);this._register(a(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new Tu(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover?this.hover.update(e):this.hover=this._register(ph().setupManagedHover(Qa("mouse"),this.input,e))}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:t8(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return cA(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){const e=this.input.selectionStart;if(e===null)return null;const t=this.input.selectionEnd??e;return{start:e,end:t}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:i})}showMessage(e,t){if(this.state==="open"&&Uo(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const i=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${Su(i.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e?.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=lA(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:r=>{if(!this.message)return null;e=it(r,w_(".monaco-inputbox-container")),t();const s={inline:!0,className:"monaco-inputbox-message"},o=this.message.formatContent?k_e(this.message.content,s):x_e(this.message.content,s);o.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return o.style.backgroundColor=a.background??"",o.style.color=a.foreground??"",o.style.border=a.border?`1px solid ${a.border}`:"",it(e,o),null},onHide:()=>{this.state="closed"},layout:t});let i;this.message.type===3?i=C("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?i=C("alertWarningMessage","Warning: {0}",this.message.content):i=C("alertInfoMessage","Info: {0}",this.message.content),Iw(i),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,i=e.charCodeAt(e.length-1)===10?" ":"";(e+i).replace(/\u000c/g,"")?this.mirror.textContent=e+i:this.mirror.innerText=" ",this.layout()}applyStyles(){const e=this.options.inputBoxStyles,t=e.inputBackground??"",i=e.inputForeground??"",r=e.inputBorder??"";this.element.style.backgroundColor=t,this.element.style.color=i,this.input.style.backgroundColor="inherit",this.input.style.color=i,this.element.style.border=`1px solid ${Su(r,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=t8(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,i=t.selectionStart,r=t.selectionEnd,s=t.value;i!==null&&r!==null&&(this.value=s.substr(0,i)+e+s.substr(r),t.setSelectionRange(i+1,i+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar?.dispose(),super.dispose()}}class HSe extends zSe{constructor(e,t,i){const r=C({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is ⇅ to represent the up and down arrow keys.']}," or {0} for history","⇅"),s=C({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is ⇅ to represent the up and down arrow keys.']}," ({0} for history)","⇅");super(e,t,i),this._onDidFocus=this._register(new de),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new de),this.onDidBlur=this._onDidBlur.event,this.history=new WSe(i.history,100);const o=()=>{if(i.showHistoryHint&&i.showHistoryHint()&&!this.placeholder.endsWith(r)&&!this.placeholder.endsWith(s)&&this.history.getHistory().length){const a=this.placeholder.endsWith(")")?r:s,l=this.placeholder+a;i.showPlaceholderOnFocus&&!cA(this.input)?this.placeholder=l:this.setPlaceHolder(l)}};this.observer=new MutationObserver((a,l)=>{a.forEach(c=>{c.target.textContent||o()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>o()),this.onblur(this.input,()=>{const a=l=>{if(this.placeholder.endsWith(l)){const c=this.placeholder.slice(0,this.placeholder.length-l.length);return i.showPlaceholderOnFocus?this.placeholder=c:this.setPlaceHolder(c),!0}else return!1};a(s)||a(r)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",sk(this.value?this.value:C("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,sk(this.value))}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}const VSe=C("defaultLabel","input");class $Se extends Gu{constructor(e,t,i){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new Pu),this.additionalToggles=[],this._onDidOptionChange=this._register(new de),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new de),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new de),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new de),this._onKeyUp=this._register(new de),this._onCaseSensitiveKeyDown=this._register(new de),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new de),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||VSe,this.showCommonFindToggles=!!i.showCommonFindToggles;const r=i.appendCaseSensitiveLabel||"",s=i.appendWholeWordsLabel||"",o=i.appendRegexLabel||"",a=i.history||[],l=!!i.flexibleHeight,c=!!i.flexibleWidth,h=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new HSe(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:i.showHistoryHint,flexibleHeight:l,flexibleWidth:c,flexibleMaxHeight:h,inputBoxStyles:i.inputBoxStyles}));const u=this._register(tR());if(this.showCommonFindToggles){this.regex=this._register(new BSe({appendTitle:o,isChecked:!1,hoverDelegate:u,...i.toggleStyles})),this._register(this.regex.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(g=>{this._onRegexKeyDown.fire(g)})),this.wholeWords=this._register(new OSe({appendTitle:s,isChecked:!1,hoverDelegate:u,...i.toggleStyles})),this._register(this.wholeWords.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new PSe({appendTitle:r,isChecked:!1,hoverDelegate:u,...i.toggleStyles})),this._register(this.caseSensitive.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(g=>{this._onCaseSensitiveKeyDown.fire(g)}));const d=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,g=>{if(g.equals(15)||g.equals(17)||g.equals(9)){const p=d.indexOf(this.domNode.ownerDocument.activeElement);if(p>=0){let b=-1;g.equals(17)?b=(p+1)%d.length:g.equals(15)&&(p===0?b=d.length-1:b=p-1),g.equals(9)?(d[p].blur(),this.inputBox.focus()):b>=0&&d[b].focus(),ni.stop(g,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(i?.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e?.appendChild(this.domNode),this._register(we(this.inputBox.inputElement,"compositionstart",d=>{this.imeSessionInProgress=!0})),this._register(we(this.inputBox.inputElement,"compositionend",d=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,d=>this._onKeyDown.fire(d)),this.onkeyup(this.inputBox.inputElement,d=>this._onKeyUp.fire(d)),this.oninput(this.inputBox.inputElement,d=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,d=>this._onMouseDown.fire(d))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex?.enable(),this.wholeWords?.enable(),this.caseSensitive?.enable();for(const e of this.additionalToggles)e.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex?.disable(),this.wholeWords?.disable(),this.caseSensitive?.disable();for(const e of this.additionalToggles)e.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new rt;for(const t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(i=>{this._onDidOptionChange.fire(i),!i&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(this.caseSensitive?.width()??0)+(this.wholeWords?.width()??0)+(this.regex?.width()??0)+this.additionalToggles.reduce((t,i)=>t+i.width(),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive?.checked??!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){return this.wholeWords?.checked??!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){return this.regex?.checked??!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){this.caseSensitive?.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}const jSe=ft;class USe extends xe{constructor(e,t,i){super(),this.parent=e,this.onKeyDown=s=>Er(this.findInput.inputBox.inputElement,Be.KEY_DOWN,s),this.onDidChange=s=>this.findInput.onDidChange(s),this.container=it(this.parent,jSe(".quick-input-box")),this.findInput=this._register(new $Se(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:i}));const r=this.findInput.inputBox.inputElement;r.role="combobox",r.ariaHasPopup="menu",r.ariaAutoComplete="list",r.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===rr.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===rr.Info?1:e===rr.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===rr.Info?1:e===rr.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}class qSe{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:xe.None}}renderElement(e,t,i,r){if(i.disposable?.dispose(),!i.data)return;const s=this.modelProvider();if(s.isResolved(e))return this.renderer.renderElement(s.get(e),e,i.data,r);const o=new ib,a=s.resolve(e,o.token);i.disposable={dispose:()=>o.cancel()},this.renderer.renderPlaceholder(e,i.data),a.then(l=>this.renderer.renderElement(l,e,i.data,r))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class GSe{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function KSe(n,e){return{...e,accessibilityProvider:e.accessibilityProvider&&new GSe(n,e.accessibilityProvider)}}class YSe{constructor(e,t,i,r,s={}){const o=()=>this.model,a=r.map(l=>new qSe(l,o));this.list=new Cc(e,t,i,a,KSe(o,s))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Oe.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onPointer(){return Oe.map(this.list.onPointer,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onDidChangeSelection(){return Oe.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:i})=>({elements:e.map(r=>this._model.get(r)),indexes:t,browserEvent:i}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,lo(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}var cb=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s};const ZSe=!1;var T$;(function(n){n.North="north",n.South="south",n.East="east",n.West="west"})(T$||(T$={}));let XSe=4;const QSe=new de;let JSe=300;const exe=new de;class mR{constructor(e){this.el=e,this.disposables=new rt}get onPointerMove(){return this.disposables.add(new Zt(lt(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new Zt(lt(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}cb([Mn],mR.prototype,"onPointerMove",null);cb([Mn],mR.prototype,"onPointerUp",null);class pR{get onPointerMove(){return this.disposables.add(new Zt(this.el,Ki.Change)).event}get onPointerUp(){return this.disposables.add(new Zt(this.el,Ki.End)).event}constructor(e){this.el=e,this.disposables=new rt}dispose(){this.disposables.dispose()}}cb([Mn],pR.prototype,"onPointerMove",null);cb([Mn],pR.prototype,"onPointerUp",null);class Sk{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}cb([Mn],Sk.prototype,"onPointerMove",null);cb([Mn],Sk.prototype,"onPointerUp",null);const D$="pointer-events-disabled";class Fa extends xe{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=i=>{this.orthogonalStartDragHandleDisposables.clear(),i!==0&&(this._orthogonalStartDragHandle=it(this.el,ft(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(Mt(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Zt(this._orthogonalStartDragHandle,"mouseenter")).event(()=>Fa.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Zt(this._orthogonalStartDragHandle,"mouseleave")).event(()=>Fa.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=i=>{this.orthogonalEndDragHandleDisposables.clear(),i!==0&&(this._orthogonalEndDragHandle=it(this.el,ft(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(Mt(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Zt(this._orthogonalEndDragHandle,"mouseenter")).event(()=>Fa.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Zt(this._orthogonalEndDragHandle,"mouseleave")).event(()=>Fa.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,i){super(),this.hoverDelay=JSe,this.hoverDelayer=this._register(new xy(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new de),this._onDidStart=this._register(new de),this._onDidChange=this._register(new de),this._onDidReset=this._register(new de),this._onDidEnd=this._register(new de),this.orthogonalStartSashDisposables=this._register(new rt),this.orthogonalStartDragHandleDisposables=this._register(new rt),this.orthogonalEndSashDisposables=this._register(new rt),this.orthogonalEndDragHandleDisposables=this._register(new rt),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=it(e,ft(".monaco-sash")),i.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${i.orthogonalEdge}`),hi&&this.el.classList.add("mac");const r=this._register(new Zt(this.el,"mousedown")).event;this._register(r(u=>this.onPointerStart(u,new mR(e)),this));const s=this._register(new Zt(this.el,"dblclick")).event;this._register(s(this.onPointerDoublePress,this));const o=this._register(new Zt(this.el,"mouseenter")).event;this._register(o(()=>Fa.onMouseEnter(this)));const a=this._register(new Zt(this.el,"mouseleave")).event;this._register(a(()=>Fa.onMouseLeave(this))),this._register(Zs.addTarget(this.el));const l=this._register(new Zt(this.el,Ki.Start)).event;this._register(l(u=>this.onPointerStart(u,new pR(this.el)),this));const c=this._register(new Zt(this.el,Ki.Tap)).event;let h;this._register(c(u=>{if(h){clearTimeout(h),h=void 0,this.onPointerDoublePress(u);return}clearTimeout(h),h=setTimeout(()=>h=void 0,250)},this)),typeof i.size=="number"?(this.size=i.size,i.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=XSe,this._register(QSe.event(u=>{this.size=u,this.layout()}))),this._register(exe.event(u=>this.hoverDelay=u)),this.layoutProvider=t,this.orthogonalStartSash=i.orthogonalStartSash,this.orthogonalEndSash=i.orthogonalEndSash,this.orientation=i.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",ZSe),this.layout()}onPointerStart(e,t){ni.stop(e);let i=!1;if(!e.__orthogonalSashEvent){const p=this.getOrthogonalSash(e);p&&(i=!0,e.__orthogonalSashEvent=!0,p.onPointerStart(e,new Sk(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new Sk(t))),!this.state)return;const r=this.el.ownerDocument.getElementsByTagName("iframe");for(const p of r)p.classList.add(D$);const s=e.pageX,o=e.pageY,a=e.altKey,l={startX:s,currentX:s,startY:o,currentY:o,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=xl(this.el),h=()=>{let p="";i?p="all-scroll":this.orientation===1?this.state===1?p="s-resize":this.state===2?p="n-resize":p=hi?"row-resize":"ns-resize":this.state===1?p="e-resize":this.state===2?p="w-resize":p=hi?"col-resize":"ew-resize",c.textContent=`* { cursor: ${p} !important; }`},u=new rt;h(),i||this.onDidEnablementChange.event(h,null,u);const d=p=>{ni.stop(p,!1);const b={startX:s,currentX:p.pageX,startY:o,currentY:p.pageY,altKey:a};this._onDidChange.fire(b)},g=p=>{ni.stop(p,!1),c.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),u.dispose();for(const b of r)b.classList.remove(D$)};t.onPointerMove(d,null,u),t.onPointerUp(g,null,u),u.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&Fa.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&Fa.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Fa.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){const t=e.initialTarget??e.target;if(!(!t||!$r(t))&&t.classList.contains("orthogonal-drag-handle"))return t.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const txe={separatorBorder:Me.transparent};class hQ{set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){if(e!==this.visible){e?(this.size=ho(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{this.view.setVisible?.(e)}catch(i){console.error("Splitview: Failed to set visible view"),console.error(i)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,i,r){this.container=e,this.view=t,this.disposable=r,this._cachedVisibleSize=void 0,typeof i=="number"?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(i){console.error("Splitview: Failed to layout view"),console.error(i)}}dispose(){this.disposable.dispose()}}class ixe extends hQ{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class nxe extends hQ{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var Yh;(function(n){n[n.Idle=0]="Idle",n[n.Busy=1]="Busy"})(Yh||(Yh={}));var E$;(function(n){n.Distribute={type:"distribute"};function e(r){return{type:"split",index:r}}n.Split=e;function t(r){return{type:"auto",index:r}}n.Auto=t;function i(r){return{type:"invisible",cachedVisibleSize:r}}n.Invisible=i})(E$||(E$={}));class rxe extends xe{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=Yh.Idle,this._onDidSashChange=this._register(new de),this._onDidSashReset=this._register(new de),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=t.orientation??0,this.inverseAltBehavior=t.inverseAltBehavior??!1,this.proportionalLayout=t.proportionalLayout??!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=it(this.el,ft(".sash-container")),this.viewContainer=ft(".split-view-container"),this.scrollable=this._register(new sb({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:r=>Yo(lt(this.el),r)})),this.scrollableElement=this._register(new C5(this.viewContainer,{vertical:this.orientation===0?t.scrollbarVisibility??1:2,horizontal:this.orientation===1?t.scrollbarVisibility??1:2},this.scrollable));const i=this._register(new Zt(this.viewContainer,"scroll")).event;this._register(i(r=>{const s=this.scrollableElement.getScrollPosition(),o=Math.abs(this.viewContainer.scrollLeft-s.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,a=Math.abs(this.viewContainer.scrollTop-s.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(o!==void 0||a!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:o,scrollTop:a})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(r=>{r.scrollTopChanged&&(this.viewContainer.scrollTop=r.scrollTop),r.scrollLeftChanged&&(this.viewContainer.scrollLeft=r.scrollLeft)})),it(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||txe),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((r,s)=>{const o=Ua(r.visible)||r.visible?r.size:{type:"invisible",cachedVisibleSize:r.size},a=r.view;this.doAddView(a,o,s,!0)}),this._contentSize=this.viewItems.reduce((r,s)=>r+s.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,i=this.viewItems.length,r){this.doAddView(e,t,i,r)}layout(e,t){const i=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let r=0;for(let s=0;s<this.viewItems.length;s++){const o=this.viewItems[s],a=this.proportions[s];typeof a=="number"?r+=a:e-=o.size}for(let s=0;s<this.viewItems.length;s++){const o=this.viewItems[s],a=this.proportions[s];typeof a=="number"&&r>0&&(o.size=ho(Math.round(a*e/r),o.minimumSize,o.maximumSize))}}else{const r=lo(this.viewItems.length),s=r.filter(a=>this.viewItems[a].priority===1),o=r.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-i,void 0,s,o)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:i}){for(const a of this.viewItems)a.enabled=!1;const r=this.sashItems.findIndex(a=>a.sash===e),s=ih(we(this.el.ownerDocument.body,"keydown",a=>o(this.sashDragState.current,a.altKey)),we(this.el.ownerDocument.body,"keyup",()=>o(this.sashDragState.current,!1))),o=(a,l)=>{const c=this.viewItems.map(p=>p.size);let h=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(r===this.sashItems.length-1){const b=this.viewItems[r];h=(b.minimumSize-b.size)/2,u=(b.maximumSize-b.size)/2}else{const b=this.viewItems[r+1];h=(b.size-b.maximumSize)/2,u=(b.size-b.minimumSize)/2}let d,g;if(!l){const p=lo(r,-1),b=lo(r+1,this.viewItems.length),_=p.reduce((O,B)=>O+(this.viewItems[B].minimumSize-c[B]),0),w=p.reduce((O,B)=>O+(this.viewItems[B].viewMaximumSize-c[B]),0),y=b.length===0?Number.POSITIVE_INFINITY:b.reduce((O,B)=>O+(c[B]-this.viewItems[B].minimumSize),0),k=b.length===0?Number.NEGATIVE_INFINITY:b.reduce((O,B)=>O+(c[B]-this.viewItems[B].viewMaximumSize),0),L=Math.max(_,k),T=Math.min(y,w),N=this.findFirstSnapIndex(p),D=this.findFirstSnapIndex(b);if(typeof N=="number"){const O=this.viewItems[N],B=Math.floor(O.viewMinimumSize/2);d={index:N,limitDelta:O.visible?L-B:L+B,size:O.size}}if(typeof D=="number"){const O=this.viewItems[D],B=Math.floor(O.viewMinimumSize/2);g={index:D,limitDelta:O.visible?T+B:T-B,size:O.size}}}this.sashDragState={start:a,current:a,index:r,sizes:c,minDelta:h,maxDelta:u,alt:l,snapBefore:d,snapAfter:g,disposable:s}};o(t,i)}onSashChange({current:e}){const{index:t,start:i,sizes:r,alt:s,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const h=e-i,u=this.resize(t,h,r,void 0,void 0,o,a,l,c);if(s){const d=t===this.sashItems.length-1,g=this.viewItems.map(k=>k.size),p=d?t:t+1,b=this.viewItems[p],_=b.size-b.maximumSize,w=b.size-b.minimumSize,y=d?t-1:t+1;this.resize(y,-u,g,void 0,void 0,_,w)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const i=this.viewItems.indexOf(e);i<0||i>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=ho(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([i],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==Yh.Idle)throw new Error("Cant modify splitview");this.state=Yh.Busy;try{const i=lo(this.viewItems.length).filter(a=>a!==e),r=[...i.filter(a=>this.viewItems[a].priority===1),e],s=i.filter(a=>this.viewItems[a].priority===2),o=this.viewItems[e];t=Math.round(t),t=ho(t,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=t,this.relayout(r,s)}finally{this.state=Yh.Idle}}}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const i=Math.floor(t/e.length);for(const a of e)a.size=ho(i,a.minimumSize,a.maximumSize);const r=lo(this.viewItems.length),s=r.filter(a=>this.viewItems[a].priority===1),o=r.filter(a=>this.viewItems[a].priority===2);this.relayout(s,o)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,i=this.viewItems.length,r){if(this.state!==Yh.Idle)throw new Error("Cant modify splitview");this.state=Yh.Busy;try{const s=ft(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(s):this.viewContainer.insertBefore(s,this.viewContainer.children.item(i));const o=e.onDidChange(d=>this.onViewChange(h,d)),a=Mt(()=>s.remove()),l=ih(o,a);let c;typeof t=="number"?c=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize);const h=this.orientation===0?new ixe(s,e,c,l):new nxe(s,e,c,l);if(this.viewItems.splice(i,0,h),this.viewItems.length>1){const d={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},g=this.orientation===0?new Fa(this.sashContainer,{getHorizontalSashTop:O=>this.getSashPosition(O),getHorizontalSashWidth:this.getSashOrthogonalSize},{...d,orientation:1}):new Fa(this.sashContainer,{getVerticalSashLeft:O=>this.getSashPosition(O),getVerticalSashHeight:this.getSashOrthogonalSize},{...d,orientation:0}),p=this.orientation===0?O=>({sash:g,start:O.startY,current:O.currentY,alt:O.altKey}):O=>({sash:g,start:O.startX,current:O.currentX,alt:O.altKey}),_=Oe.map(g.onDidStart,p)(this.onSashStart,this),y=Oe.map(g.onDidChange,p)(this.onSashChange,this),L=Oe.map(g.onDidEnd,()=>this.sashItems.findIndex(O=>O.sash===g))(this.onSashEnd,this),T=g.onDidReset(()=>{const O=this.sashItems.findIndex(X=>X.sash===g),B=lo(O,-1),G=lo(O+1,this.viewItems.length),H=this.findFirstSnapIndex(B),q=this.findFirstSnapIndex(G);typeof H=="number"&&!this.viewItems[H].visible||typeof q=="number"&&!this.viewItems[q].visible||this._onDidSashReset.fire(O)}),N=ih(_,y,L,T,g),D={sash:g,disposable:N};this.sashItems.splice(i-1,0,D)}s.appendChild(e.element);let u;typeof t!="number"&&t.type==="split"&&(u=[t.index]),r||this.relayout([i],u),!r&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}finally{this.state=Yh.Idle}}relayout(e,t){const i=this.viewItems.reduce((r,s)=>r+s.size,0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,i=this.viewItems.map(h=>h.size),r,s,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const h=lo(e,-1),u=lo(e+1,this.viewItems.length);if(s)for(const D of s)kT(h,D),kT(u,D);if(r)for(const D of r)f2(h,D),f2(u,D);const d=h.map(D=>this.viewItems[D]),g=h.map(D=>i[D]),p=u.map(D=>this.viewItems[D]),b=u.map(D=>i[D]),_=h.reduce((D,O)=>D+(this.viewItems[O].minimumSize-i[O]),0),w=h.reduce((D,O)=>D+(this.viewItems[O].maximumSize-i[O]),0),y=u.length===0?Number.POSITIVE_INFINITY:u.reduce((D,O)=>D+(i[O]-this.viewItems[O].minimumSize),0),k=u.length===0?Number.NEGATIVE_INFINITY:u.reduce((D,O)=>D+(i[O]-this.viewItems[O].maximumSize),0),L=Math.max(_,k,o),T=Math.min(y,w,a);let N=!1;if(l){const D=this.viewItems[l.index],O=t>=l.limitDelta;N=O!==D.visible,D.setVisible(O,l.size)}if(!N&&c){const D=this.viewItems[c.index],O=t<c.limitDelta;N=O!==D.visible,D.setVisible(O,c.size)}if(N)return this.resize(e,t,i,r,s,o,a);t=ho(t,L,T);for(let D=0,O=t;D<d.length;D++){const B=d[D],G=ho(g[D]+O,B.minimumSize,B.maximumSize),H=G-g[D];O-=H,B.size=G}for(let D=0,O=t;D<p.length;D++){const B=p[D],G=ho(b[D]-O,B.minimumSize,B.maximumSize),H=G-b[D];O+=H,B.size=G}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let i=this.size-t;const r=lo(this.viewItems.length-1,-1),s=r.filter(a=>this.viewItems[a].priority===1),o=r.filter(a=>this.viewItems[a].priority===2);for(const a of o)kT(r,a);for(const a of s)f2(r,a);typeof e=="number"&&f2(r,e);for(let a=0;i!==0&&a<r.length;a++){const l=this.viewItems[r[a]],c=ho(l.size+i,l.minimumSize,l.maximumSize),h=c-l.size;i-=h,l.size=c}}layoutViews(){this._contentSize=this.viewItems.reduce((t,i)=>t+i.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const i=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),r=[...this.viewItems].reverse();e=!1;const s=r.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const o=r.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],h=this.viewItems[l];a+=h.size;const u=!(t[l]&&o[l+1]),d=!(i[l]&&s[l+1]);if(u&&d){const g=lo(l,-1),p=lo(l+1,this.viewItems.length),b=this.findFirstSnapIndex(g),_=this.findFirstSnapIndex(p),w=typeof b=="number"&&!this.viewItems[b].visible,y=typeof _=="number"&&!this.viewItems[_].visible;w&&s[l]&&(a>0||this.startSnappingEnabled)?c.state=1:y&&t[l]&&(a<this._contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else u&&!d?c.state=1:!u&&d?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const i=this.viewItems[t];if(i.visible&&i.snap)return t}for(const t of e){const i=this.viewItems[t];if(i.visible&&i.maximumSize-i.minimumSize>0)return;if(!i.visible&&i.snap)return t}}areViewsDistributed(){let e,t;for(const i of this.viewItems)if(e=e===void 0?i.size:Math.min(e,i.size),t=t===void 0?i.size:Math.max(t,i.size),t-e>2)return!1;return!0}dispose(){this.sashDragState?.disposable.dispose(),is(this.viewItems),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[],super.dispose()}}const wL=class wL{constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=wL.TemplateId,this.renderedTemplates=new Set;const r=new Map(t.map(s=>[s.templateId,s]));this.renderers=[];for(const s of e){const o=r.get(s.templateId);if(!o)throw new Error(`Table cell renderer for template id ${s.templateId} not found.`);this.renderers.push(o)}}renderTemplate(e){const t=it(e,ft(".monaco-table-tr")),i=[],r=[];for(let o=0;o<this.columns.length;o++){const a=this.renderers[o],l=it(t,ft(".monaco-table-td",{"data-col-index":o}));l.style.width=`${this.getColumnSize(o)}px`,i.push(l),r.push(a.renderTemplate(l))}const s={container:e,cellContainers:i,cellTemplateData:r};return this.renderedTemplates.add(s),s}renderElement(e,t,i,r){for(let s=0;s<this.columns.length;s++){const a=this.columns[s].project(e);this.renderers[s].renderElement(a,t,i.cellTemplateData[s],r)}}disposeElement(e,t,i,r){for(let s=0;s<this.columns.length;s++){const o=this.renderers[s];if(o.disposeElement){const l=this.columns[s].project(e);o.disposeElement(l,t,i.cellTemplateData[s],r)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);fc(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}};wL.TemplateId="row";let xk=wL;function sxe(n){return{getHeight(e){return n.getHeight(e)},getTemplateId(){return xk.TemplateId}}}class oxe extends xe{get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??Number.POSITIVE_INFINITY}get onDidChange(){return this.column.onDidChangeWidthConstraints??Oe.None}constructor(e,t){super(),this.column=e,this.index=t,this._onDidLayout=new de,this.onDidLayout=this._onDidLayout.event,this.element=ft(".monaco-table-th",{"data-col-index":t},e.label),e.tooltip&&this._register(ph().setupManagedHover(Qa("mouse"),this.element,e.tooltip))}layout(e){this._onDidLayout.fire([this.index,e])}}const yL=class yL{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,i,r,s,o){this.virtualDelegate=i,this.columns=r,this.domId=`table_id_${++yL.InstanceCount}`,this.disposables=new rt,this.cachedWidth=0,this.cachedHeight=0,this.domNode=it(t,ft(`.monaco-table.${this.domId}`));const a=r.map((h,u)=>this.disposables.add(new oxe(h,u))),l={size:a.reduce((h,u)=>h+u.column.weight,0),views:a.map(h=>({size:h.column.weight,view:h}))};this.splitview=this.disposables.add(new rxe(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;const c=new xk(r,s,h=>this.splitview.getViewSize(h));this.list=this.disposables.add(new Cc(e,this.domNode,sxe(i),[c],o)),Oe.any(...a.map(h=>h.onDidLayout))(([h,u])=>c.layoutColumn(h,u),null,this.disposables),this.splitview.onDidSashReset(h=>{const u=r.reduce((g,p)=>g+p.weight,0),d=r[h].weight/u*this.cachedWidth;this.splitview.resizeView(h,d)},null,this.disposables),this.styleElement=xl(this.domNode),this.style(wye)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,i=[]){this.list.splice(e,t,i)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}};yL.InstanceCount=0;let j9=yL;var da;(function(n){n[n.Expanded=0]="Expanded",n[n.Collapsed=1]="Collapsed",n[n.PreserveOrExpanded=2]="PreserveOrExpanded",n[n.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(da||(da={}));var qg;(function(n){n[n.Unknown=0]="Unknown",n[n.Twistie=1]="Twistie",n[n.Element=2]="Element",n[n.Filter=3]="Filter"})(qg||(qg={}));class ba extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class bR{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function _R(n){return typeof n=="object"&&"visibility"in n&&"data"in n}function Ww(n){switch(n){case!0:return 1;case!1:return 0;default:return n}}function L6(n){return typeof n.collapsible=="boolean"}class axe{constructor(e,t,i,r={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new yy,this._onDidChangeCollapseState=new de,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new de,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new de,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new xy(tY),this.collapseByDefault=typeof r.collapseByDefault>"u"?!1:r.collapseByDefault,this.allowNonCollapsibleParents=r.allowNonCollapsibleParents??!1,this.filter=r.filter,this.autoExpandSingleChildren=typeof r.autoExpandSingleChildren>"u"?!1:r.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,i=wi.empty(),r={}){if(e.length===0)throw new ba(this.user,"Invalid tree location");r.diffIdentityProvider?this.spliceSmart(r.diffIdentityProvider,e,t,i,r):this.spliceSimple(e,t,i,r)}spliceSmart(e,t,i,r=wi.empty(),s,o=s.diffDepth??0){const{parentNode:a}=this.getParentNodeWithListIndex(t);if(!a.lastDiffIds)return this.spliceSimple(t,i,r,s);const l=[...r],c=t[t.length-1],h=new hu({getElements:()=>a.lastDiffIds},{getElements:()=>[...a.children.slice(0,c),...l,...a.children.slice(c+i)].map(b=>e.getId(b.element).toString())}).ComputeDiff(!1);if(h.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(t,i,l,s);const u=t.slice(0,-1),d=(b,_,w)=>{if(o>0)for(let y=0;y<w;y++)b--,_--,this.spliceSmart(e,[...u,b,0],Number.MAX_SAFE_INTEGER,l[_].children,s,o-1)};let g=Math.min(a.children.length,c+i),p=l.length;for(const b of h.changes.sort((_,w)=>w.originalStart-_.originalStart))d(g,p,g-(b.originalStart+b.originalLength)),g=b.originalStart,p=b.modifiedStart-c,this.spliceSimple([...u,g],b.originalLength,wi.slice(l,p,p+b.modifiedLength),s);d(g,p,g)}spliceSimple(e,t,i=wi.empty(),{onDidCreateNode:r,onDidDeleteNode:s,diffIdentityProvider:o}){const{parentNode:a,listIndex:l,revealed:c,visible:h}=this.getParentNodeWithListIndex(e),u=[],d=wi.map(i,T=>this.createTreeNode(T,a,a.visible?1:0,c,u,r)),g=e[e.length-1];let p=0;for(let T=g;T>=0&&T<a.children.length;T--){const N=a.children[T];if(N.visible){p=N.visibleChildIndex;break}}const b=[];let _=0,w=0;for(const T of d)b.push(T),w+=T.renderNodeCount,T.visible&&(T.visibleChildIndex=p+_++);const y=JW(a.children,g,t,b);o?a.lastDiffIds?JW(a.lastDiffIds,g,t,b.map(T=>o.getId(T.element).toString())):a.lastDiffIds=a.children.map(T=>o.getId(T.element).toString()):a.lastDiffIds=void 0;let k=0;for(const T of y)T.visible&&k++;if(k!==0)for(let T=g+b.length;T<a.children.length;T++){const N=a.children[T];N.visible&&(N.visibleChildIndex-=k)}if(a.visibleChildrenCount+=_-k,c&&h){const T=y.reduce((N,D)=>N+(D.visible?D.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,w-T),this.list.splice(l,T,u)}if(y.length>0&&s){const T=N=>{s(N),N.children.forEach(T)};y.forEach(T)}this._onDidSplice.fire({insertedNodes:b,deletedNodes:y});let L=a;for(;L;){if(L.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}L=L.parent}}rerender(e){if(e.length===0)throw new ba(this.user,"Invalid tree location");const{node:t,listIndex:i,revealed:r}=this.getTreeNodeWithListIndex(e);t.visible&&r&&this.list.splice(i,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:i,revealed:r}=this.getTreeNodeWithListIndex(e);return i&&r?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsible);const r={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){const r=this.getTreeNode(e);typeof t>"u"&&(t=!r.collapsed);const s={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}_setCollapseState(e,t){const{node:i,listIndex:r,revealed:s}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(i,r,s,t);if(i!==this.root&&this.autoExpandSingleChildren&&o&&!L6(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let a=-1;for(let l=0;l<i.children.length;l++)if(i.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return o}_setListNodeCollapseState(e,t,i,r){const s=this._setNodeCollapseState(e,r,!1);if(!i||!e.visible||!s)return s;const o=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=o-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),s}_setNodeCollapseState(e,t,i){let r;if(e===this.root?r=!1:(L6(t)?(r=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(r=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):r=!1,r&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!L6(t)&&t.recursive)for(const s of e.children)r=this._setNodeCollapseState(s,t,!0)||r;return r}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,i,r,s,o){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,i);a.visibility=l,r&&s.push(a);const c=e.children||wi.empty(),h=r&&l!==0&&!a.collapsed;let u=0,d=1;for(const g of c){const p=this.createTreeNode(g,a,l,h,s,o);a.children.push(p),d+=p.renderNodeCount,p.visible&&(p.visibleChildIndex=u++)}return this.allowNonCollapsibleParents||(a.collapsible=a.collapsible||a.children.length>0),a.visibleChildrenCount=u,a.visible=l===2?u>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=d):(a.renderNodeCount=0,r&&s.pop()),o?.(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i,r=!0){let s;if(e!==this.root){if(s=this._filterNode(e,t),s===0)return e.visible=!1,e.renderNodeCount=0,!1;r&&i.push(e)}const o=i.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||s!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,s,i,r&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=s===2?a:s===1,e.visibility=s),e.visible?e.collapsed||(e.renderNodeCount+=i.length-o):(e.renderNodeCount=0,r&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const i=this.filter?this.filter.filter(e.element,t):1;return typeof i=="boolean"?(e.filterData=void 0,i?1:0):_R(i)?(e.filterData=i.data,Ww(i.visibility)):(e.filterData=void 0,Ww(i))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[i,...r]=e;return i<0||i>t.children.length?!1:this.hasTreeNode(r,t.children[i])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[i,...r]=e;if(i<0||i>t.children.length)throw new ba(this.user,"Invalid tree location");return this.getTreeNode(r,t.children[i])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:i,revealed:r,visible:s}=this.getParentNodeWithListIndex(e),o=e[e.length-1];if(o<0||o>t.children.length)throw new ba(this.user,"Invalid tree location");const a=t.children[o];return{node:a,listIndex:i,revealed:r,visible:s&&a.visible}}getParentNodeWithListIndex(e,t=this.root,i=0,r=!0,s=!0){const[o,...a]=e;if(o<0||o>t.children.length)throw new ba(this.user,"Invalid tree location");for(let l=0;l<o;l++)i+=t.children[l].renderNodeCount;return r=r&&!t.collapsed,s=s&&t.visible,a.length===0?{parentNode:t,listIndex:i,revealed:r,visible:s}:this.getParentNodeWithListIndex(a,t.children[o],i+1,r,s)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:lue(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class lxe extends By{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function T6(n){return n instanceof By?new lxe(n):n}class cxe{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=xe.None,this.disposables=new rt}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){this.dnd.onDragStart?.(T6(e),t)}onDragOver(e,t,i,r,s,o=!0){const a=this.dnd.onDragOver(T6(e),t&&t.element,i,r,s),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return a;if(l&&typeof a!="boolean"&&a.autoExpand&&(this.autoExpandDisposable=GE(()=>{const g=this.modelProvider(),p=g.getNodeLocation(t);g.isCollapsed(p)&&g.setCollapsed(p,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof a=="boolean"||!a.accept||typeof a.bubble>"u"||a.feedback){if(!o){const g=typeof a=="boolean"?a:a.accept,p=typeof a=="boolean"?void 0:a.effect;return{accept:g,effect:p,feedback:[i]}}return a}if(a.bubble===1){const g=this.modelProvider(),p=g.getNodeLocation(t),b=g.getParentNodeLocation(p),_=g.getNode(b),w=b&&g.getListIndex(b);return this.onDragOver(e,_,w,r,s,!1)}const c=this.modelProvider(),h=c.getNodeLocation(t),u=c.getListIndex(h),d=c.getListRenderCount(h);return{...a,feedback:lo(u,u+d)}}drop(e,t,i,r,s){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(T6(e),t&&t.element,i,r,s)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function hxe(n,e){return e&&{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new cxe(n,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element})},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})}},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getSetSize(t){const i=n(),r=i.getNodeLocation(t),s=i.getParentNodeLocation(r);return i.getNode(s).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}}}class vR{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight?.(e.element,t)}}var F1;(function(n){n.None="none",n.OnHover="onHover",n.Always="always"})(F1||(F1={}));class uxe{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new rt,this.onDidChange=Oe.forEach(e,i=>this._elements=i,this.disposables)}dispose(){this.disposables.dispose()}}const tw=class tw{constructor(e,t,i,r,s,o={}){this.renderer=e,this.modelProvider=t,this.activeNodes=r,this.renderedIndentGuides=s,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=tw.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=xe.None,this.disposables=new rt,this.templateId=e.templateId,this.updateOptions(o),Oe.map(i,a=>a.node)(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState?.(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"){const t=ho(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[i,r]of this.renderedNodes)this.renderTreeElement(i,r)}}if(typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==F1.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[i,r]of this.renderedNodes)this._renderIndentGuides(i,r);if(this.indentGuidesDisposable.dispose(),t){const i=new rt;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,i),this.indentGuidesDisposable=i,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=it(e,ft(".monaco-tl-row")),i=it(t,ft(".monaco-tl-indent")),r=it(t,ft(".monaco-tl-twistie")),s=it(t,ft(".monaco-tl-contents")),o=this.renderer.renderTemplate(s);return{container:e,indent:i,twistie:r,indentGuidesDisposable:xe.None,templateData:o}}renderElement(e,t,i,r){this.renderedNodes.set(e,i),this.renderedElements.set(e.element,e),this.renderTreeElement(e,i),this.renderer.renderElement(e,t,i.templateData,r)}disposeElement(e,t,i,r){i.indentGuidesDisposable.dispose(),this.renderer.disposeElement?.(e,t,i.templateData,r),typeof r=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const i=tw.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${i}px`,t.indent.style.width=`${i+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...gi.asClassNameArray(Je.treeItemExpanded));let r=!1;this.renderer.renderTwistie&&(r=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(r||t.twistie.classList.add(...gi.asClassNameArray(Je.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(fc(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const i=new rt,r=this.modelProvider();for(;;){const s=r.getNodeLocation(e),o=r.getParentNodeLocation(s);if(!o)break;const a=r.getNode(o),l=ft(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(a)&&l.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(l):t.indent.insertBefore(l,t.indent.firstElementChild),this.renderedIndentGuides.add(a,l),i.add(Mt(()=>this.renderedIndentGuides.delete(a,l))),e=a}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,i=this.modelProvider();e.forEach(r=>{const s=i.getNodeLocation(r);try{const o=i.getParentNodeLocation(s);r.collapsible&&r.children.length>0&&!r.collapsed?t.add(r):o&&t.add(i.getNode(o))}catch{}}),this.activeIndentNodes.forEach(r=>{t.has(r)||this.renderedIndentGuides.forEach(r,s=>s.classList.remove("active"))}),t.forEach(r=>{this.activeIndentNodes.has(r)||this.renderedIndentGuides.forEach(r,s=>s.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),is(this.disposables)}};tw.DefaultIndent=8;let U9=tw;class dxe{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(e,t,i){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new rt,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let i=1;if(this._filter){const o=this._filter.filter(e,t);if(typeof o=="boolean"?i=o?1:0:_R(o)?i=Ww(o.visibility):i=o,i===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:$0.Default,visibility:i};const r=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),s=Array.isArray(r)?r:[r];for(const o of s){const a=o&&o.toString();if(typeof a>"u")return{data:$0.Default,visibility:i};let l;if(this.tree.findMatchType===Im.Contiguous){const c=a.toLowerCase().indexOf(this._lowercasePattern);if(c>-1){l=[Number.MAX_SAFE_INTEGER,0];for(let h=this._lowercasePattern.length;h>0;h--)l.push(c+h-1)}}else l=JZ(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,s.length===1?{data:l,visibility:i}:{data:{label:a,score:l},visibility:i}}return this.tree.findMode===pu.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:$0.Default,visibility:i}}reset(){this._totalCount=0,this._matchCount=0}dispose(){is(this.disposables)}}var pu;(function(n){n[n.Highlight=0]="Highlight",n[n.Filter=1]="Filter"})(pu||(pu={}));var Im;(function(n){n[n.Fuzzy=0]="Fuzzy",n[n.Contiguous=1]="Contiguous"})(Im||(Im={}));class fxe{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,i,r,s,o={}){this.tree=e,this.view=i,this.filter=r,this.contextViewProvider=s,this.options=o,this._pattern="",this.width=0,this._onDidChangeMode=new de,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new de,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new de,this._onDidChangeOpenState=new de,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new rt,this.disposables=new rt,this._mode=e.options.defaultFindMode??pu.Highlight,this._matchType=e.options.defaultFindMatchType??Im.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&e?(Iw(C("replFindNoResults","No results")),this.tree.options.showNotFoundMessage??!0?this.widget?.showMessage({type:2,content:C("not found","No elements found.")}):this.widget?.showMessage({type:2})):(this.widget?.clearMessage(),this.pattern&&Iw(C("replFindResults","{0} results",this.filter.matchCount)))}shouldAllowFocus(e){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!$0.isDefault(e.filterData)}layout(e){this.width=e,this.widget?.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}function gxe(n,e){return n.position===e.position&&uQ(n,e)}function uQ(n,e){return n.node.element===e.node.element&&n.startIndex===e.startIndex&&n.height===e.height&&n.endIndex===e.endIndex}class mxe{constructor(e=[]){this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return _r(this.stickyNodes,e.stickyNodes,gxe)}lastNodePartiallyVisible(){if(this.count===0)return!1;const e=this.stickyNodes[this.count-1];if(this.count===1)return e.position!==0;const t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!_r(this.stickyNodes,e.stickyNodes,uQ)||this.count===0)return!1;const t=this.stickyNodes[this.count-1],i=e.stickyNodes[e.count-1];return t.position!==i.position}}class pxe{constrainStickyScrollNodes(e,t,i){for(let r=0;r<e.length;r++){const s=e[r];if(s.position+s.height>i||r>=t)return e.slice(0,r)}return e}}class I$ extends xe{constructor(e,t,i,r,s,o={}){super(),this.tree=e,this.model=t,this.view=i,this.treeDelegate=s,this.maxWidgetViewRatio=.4;const a=this.validateStickySettings(o);this.stickyScrollMaxItemCount=a.stickyScrollMaxItemCount,this.stickyScrollDelegate=o.stickyScrollDelegate??new pxe,this._widget=this._register(new bxe(i.getScrollableElement(),i,e,r,s,o.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(i.onDidScroll(()=>this.update())),this._register(i.onDidChangeContentHeight(()=>this.update())),this._register(e.onDidChangeCollapseState(()=>this.update())),this.update()}get height(){return this._widget.height}getNodeAtHeight(e){let t;if(e===0?t=this.view.firstVisibleIndex:t=this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){const e=this.getNodeAtHeight(0);if(!e||this.tree.scrollTop===0){this._widget.setState(void 0);return}const t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){const t=[];let i=e,r=0,s=this.getNextStickyNode(i,void 0,r);for(;s&&(t.push(s),r+=s.height,!(t.length<=this.stickyScrollMaxItemCount&&(i=this.getNextVisibleNode(s),!i)));)s=this.getNextStickyNode(i,s.node,r);const o=this.constrainStickyNodes(t);return o.length?new mxe(o):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,i){const r=this.getAncestorUnderPrevious(e,t);if(r&&!(r===e&&(!this.nodeIsUncollapsedParent(e)||this.nodeTopAlignsWithStickyNodesBottom(e,i))))return this.createStickyScrollNode(r,i)}nodeTopAlignsWithStickyNodesBottom(e,t){const i=this.getNodeIndex(e),r=this.view.getElementTop(i),s=t;return this.view.scrollTop===r-s}createStickyScrollNode(e,t){const i=this.treeDelegate.getHeight(e),{startIndex:r,endIndex:s}=this.getNodeRange(e),o=this.calculateStickyNodePosition(s,t,i);return{node:e,position:o,height:i,startIndex:r,endIndex:s}}getAncestorUnderPrevious(e,t=void 0){let i=e,r=this.getParentNode(i);for(;r;){if(r===t)return i;i=r,r=this.getParentNode(i)}if(t===void 0)return i}calculateStickyNodePosition(e,t,i){let r=this.view.getRelativeTop(e);if(r===null&&this.view.firstVisibleIndex===e&&e+1<this.view.length){const c=this.treeDelegate.getHeight(this.view.element(e)),h=this.view.getRelativeTop(e+1);r=h?h-c/this.view.renderHeight:null}if(r===null)return t;const s=this.view.element(e),o=this.treeDelegate.getHeight(s),l=r*this.view.renderHeight+o;return t+i>l&&t<=l?l-i:t}constrainStickyNodes(e){if(e.length===0)return[];const t=this.view.renderHeight*this.maxWidgetViewRatio,i=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&i.position+i.height<=t)return e;const r=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!r.length)return[];const s=r[r.length-1];if(r.length>this.stickyScrollMaxItemCount||s.position+s.height>t)throw new Error("stickyScrollDelegate violates constraints");return r}getParentNode(e){const t=this.model.getNodeLocation(e),i=this.model.getParentNodeLocation(t);return i?this.model.getNode(i):void 0}nodeIsUncollapsedParent(e){const t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){const t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){const t=this.model.getNodeLocation(e),i=this.model.getListIndex(t);if(i<0)throw new Error("Node not found in tree");const r=this.model.getListRenderCount(t),s=i+r-1;return{startIndex:i,endIndex:s}}nodePositionTopBelowWidget(e){const t=[];let i=this.getParentNode(e);for(;i;)t.push(i),i=this.getParentNode(i);let r=0;for(let s=0;s<t.length&&s<this.stickyScrollMaxItemCount;s++)r+=this.treeDelegate.getHeight(t[s]);return r}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(e={}){if(!e.stickyScrollMaxItemCount)return;const t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}validateStickySettings(e){let t=7;return typeof e.stickyScrollMaxItemCount=="number"&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}}class bxe{constructor(e,t,i,r,s,o){this.view=t,this.tree=i,this.treeRenderers=r,this.treeDelegate=s,this.accessibilityProvider=o,this._previousElements=[],this._previousStateDisposables=new rt,this._rootDomNode=ft(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);const a=ft(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(a),this.stickyScrollFocus=new _xe(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;const e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}setState(e){const t=!!this._previousState&&this._previousState.count>0,i=!!e&&e.count>0;if(!t&&!i||t&&i&&this._previousState.equal(e))return;if(t!==i&&this.setVisible(i),!i){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}const r=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${r.position}px`;else{this._previousStateDisposables.clear();const s=Array(e.count);for(let o=e.count-1;o>=0;o--){const a=e.stickyNodes[o],{element:l,disposable:c}=this.createElement(a,o,e.count);s[o]=l,this._rootDomNode.appendChild(l),this._previousStateDisposables.add(c)}this.stickyScrollFocus.updateElements(s,e),this._previousElements=s}this._previousState=e,this._rootDomNode.style.height=`${r.position+r.height}px`}createElement(e,t,i){const r=e.startIndex,s=document.createElement("div");s.style.top=`${e.position}px`,this.tree.options.setRowHeight!==!1&&(s.style.height=`${e.height}px`),this.tree.options.setRowLineHeight!==!1&&(s.style.lineHeight=`${e.height}px`),s.classList.add("monaco-tree-sticky-row"),s.classList.add("monaco-list-row"),s.setAttribute("data-index",`${r}`),s.setAttribute("data-parity",r%2===0?"even":"odd"),s.setAttribute("id",this.view.getElementID(r));const o=this.setAccessibilityAttributes(s,e.node.element,t,i),a=this.treeDelegate.getTemplateId(e.node),l=this.treeRenderers.find(d=>d.templateId===a);if(!l)throw new Error(`No renderer found for template id ${a}`);let c=e.node;c===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(c=new Proxy(e.node,{}));const h=l.renderTemplate(s);l.renderElement(c,e.startIndex,h,e.height);const u=Mt(()=>{o.dispose(),l.disposeElement(c,e.startIndex,h,e.height),l.disposeTemplate(h),s.remove()});return{element:s,disposable:u}}setAccessibilityAttributes(e,t,i,r){if(!this.accessibilityProvider)return xe.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,i,r))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,i))),this.accessibilityProvider.getRole&&e.setAttribute("role",this.accessibilityProvider.getRole(t)??"treeitem");const s=this.accessibilityProvider.getAriaLabel(t),o=s&&typeof s!="string"?s:hk(s),a=yi(c=>{const h=c.readObservable(o);h?e.setAttribute("aria-label",h):e.removeAttribute("aria-label")});typeof s=="string"||s&&e.setAttribute("aria-label",s.get());const l=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return typeof l=="number"&&e.setAttribute("aria-level",`${l}`),e.setAttribute("aria-selected",String(!1)),a}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}}class _xe extends xe{get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new de,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new de,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this._register(we(this.container,"focus",()=>this.onFocus())),this._register(we(this.container,"blur",()=>this.onBlur())),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(i=>this.onKeyDown(i))),this._register(this.view.onMouseDown(i=>this.onMouseDown(i))),this._register(this.view.onContextMenu(i=>this.handleContextMenu(i)))}handleContextMenu(e){const t=e.browserEvent.target;if(!Mw(t)&&!vv(t)){this.focusedLast()&&this.view.domFocus();return}if(!iu(e.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const o=this.state.stickyNodes.findIndex(a=>a.node.element===e.element?.element);if(o===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(o);return}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const r=this.state.stickyNodes[this.focusedIndex].node.element,s=this.elements[this.focusedIndex];this._onContextMenu.fire({element:r,anchor:s,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state){if(e.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if(e.key==="ArrowDown"||e.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){const t=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([t]),this.scrollNodeUnderWidget(t,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}}onMouseDown(e){const t=e.browserEvent.target;!Mw(t)&&!vv(t)||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&t.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw new Error("Sticky scroll focus received illigel state");const i=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){const r=ho(i,0,t.count-1);this.setFocus(r)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){const t=this.state;if(!t)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){const i=t.stickyNodes[e];this.scrollNodeUnderWidget(i.endIndex+1,t)}}scrollNodeUnderWidget(e,t){const i=t.stickyNodes[t.count-1],r=t.count>1?t.stickyNodes[t.count-2]:void 0,s=this.view.getElementTop(e),o=r?r.position+r.height+i.height:i.height;this.view.scrollTop=s-o}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains("sticky-scroll-focused"):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw new Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}toggleCurrentElementActiveFocus(e){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}toggleElementActiveFocus(e,t){e.classList.toggle("focused",t)}toggleElementPassiveFocus(e,t){e.classList.toggle("passive-focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function G2(n){let e=qg.Unknown;return zT(n.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=qg.Twistie:zT(n.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=qg.Element:zT(n.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=qg.Filter),{browserEvent:n.browserEvent,element:n.element?n.element.element:null,target:e}}function vxe(n){const e=Mw(n.browserEvent.target);return{element:n.element?n.element.element:null,browserEvent:n.browserEvent,anchor:n.anchor,isStickyScroll:e}}function GS(n,e){e(n),n.children.forEach(t=>GS(t,e))}class D6{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new de,this.onDidChange=this._onDidChange.event}set(e,t){!t?.__forceEvent&&_r(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const r=this;this._onDidChange.fire({get elements(){return r.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=h=>l.delete(h);t.forEach(h=>GS(h,c)),this.set([...l.values()]);return}const i=new Set,r=l=>i.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>GS(l,r));const s=new Map,o=l=>s.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>GS(l,o));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!i.has(c))a.push(l);else{const u=s.get(c);u&&u.visible&&a.push(u)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class wxe extends CX{constructor(e,t,i){super(e),this.tree=t,this.stickyScrollProvider=i}onViewPointer(e){if(_X(e.browserEvent.target)||of(e.browserEvent.target)||q_(e.browserEvent.target)||e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const i=e.browserEvent.target,r=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,s=vv(e.browserEvent.target);let o=!1;if(s?o=!0:typeof this.tree.expandOnlyOnTwistieClick=="function"?o=this.tree.expandOnlyOnTwistieClick(t.element):o=!!this.tree.expandOnlyOnTwistieClick,s)this.handleStickyScrollMouseEvent(e,t);else{if(o&&!r&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e)}if(t.collapsible&&(!s||r)){const a=this.tree.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),this.tree.toggleCollapsed(a,l),r){e.browserEvent.isHandledByList=!0;return}}s||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(gye(e.browserEvent.target)||mye(e.browserEvent.target))return;const i=this.stickyScrollProvider();if(!i)throw new Error("Sticky scroll controller not found");const r=this.list.indexOf(t),s=this.list.getElementTop(r),o=i.nodePositionTopBelowWidget(t);this.tree.scrollTop=s-o,this.list.domFocus(),this.list.setFocus([r]),this.list.setSelection([r])}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}onMouseDown(e){const t=e.browserEvent.target;if(!Mw(t)&&!vv(t)){super.onMouseDown(e);return}}onContextMenu(e){const t=e.browserEvent.target;if(!Mw(t)&&!vv(t)){super.onContextMenu(e);return}}}class yxe extends Cc{constructor(e,t,i,r,s,o,a,l){super(e,t,i,r,l),this.focusTrait=s,this.selectionTrait=o,this.anchorTrait=a}createMouseController(e){return new wxe(this,e.tree,e.stickyScrollProvider)}splice(e,t,i=[]){if(super.splice(e,t,i),i.length===0)return;const r=[],s=[];let o;i.forEach((a,l)=>{this.focusTrait.has(a)&&r.push(e+l),this.selectionTrait.has(a)&&s.push(e+l),this.anchorTrait.has(a)&&(o=e+l)}),r.length>0&&super.setFocus(wm([...super.getFocus(),...r])),s.length>0&&super.setSelection(wm([...super.getSelection(),...s])),typeof o=="number"&&super.setAnchor(o)}setFocus(e,t,i=!1){super.setFocus(e,t),i||this.focusTrait.set(e.map(r=>this.element(r)),t)}setSelection(e,t,i=!1){super.setSelection(e,t),i||this.selectionTrait.set(e.map(r=>this.element(r)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class dQ{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Oe.filter(Oe.map(this.view.onMouseDblClick,G2),e=>e.target!==qg.Filter)}get onMouseOver(){return Oe.map(this.view.onMouseOver,G2)}get onMouseOut(){return Oe.map(this.view.onMouseOut,G2)}get onContextMenu(){return Oe.any(Oe.filter(Oe.map(this.view.onContextMenu,vxe),e=>!e.isStickyScroll),this.stickyScrollController?.onContextMenu??Oe.None)}get onPointer(){return Oe.map(this.view.onPointer,G2)}get onKeyDown(){return this.view.onKeyDown}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return Oe.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){return this.findController?.mode??pu.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){return this.findController?.matchType??Im.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,i,r,s={}){this._user=e,this._options=s,this.eventBufferer=new yy,this.onDidChangeFindOpenState=Oe.None,this.onDidChangeStickyScrollFocused=Oe.None,this.disposables=new rt,this._onWillRefilter=new de,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new de,this.treeDelegate=new vR(i);const o=new az,a=new az,l=this.disposables.add(new uxe(a.event)),c=new GY;this.renderers=r.map(p=>new U9(p,()=>this.model,o.event,l,c,s));for(const p of this.renderers)this.disposables.add(p);let h;s.keyboardNavigationLabelProvider&&(h=new dxe(this,s.keyboardNavigationLabelProvider,s.filter),s={...s,filter:h},this.disposables.add(h)),this.focus=new D6(()=>this.view.getFocusedElements()[0],s.identityProvider),this.selection=new D6(()=>this.view.getSelectedElements()[0],s.identityProvider),this.anchor=new D6(()=>this.view.getAnchorElement(),s.identityProvider),this.view=new yxe(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...hxe(()=>this.model,s),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(e,this.view,s),o.input=this.model.onDidChangeCollapseState;const u=Oe.forEach(this.model.onDidSplice,p=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(p),this.selection.onDidModelSplice(p)})},this.disposables);u(()=>null,null,this.disposables);const d=this.disposables.add(new de),g=this.disposables.add(new xy(0));if(this.disposables.add(Oe.any(u,this.focus.onDidChange,this.selection.onDidChange)(()=>{g.trigger(()=>{const p=new Set;for(const b of this.focus.getNodes())p.add(b);for(const b of this.selection.getNodes())p.add(b);d.fire([...p.values()])})})),a.input=d.event,s.keyboardSupport!==!1){const p=Oe.chain(this.view.onKeyDown,b=>b.filter(_=>!of(_.target)).map(_=>new en(_)));Oe.chain(p,b=>b.filter(_=>_.keyCode===15))(this.onLeftArrow,this,this.disposables),Oe.chain(p,b=>b.filter(_=>_.keyCode===17))(this.onRightArrow,this,this.disposables),Oe.chain(p,b=>b.filter(_=>_.keyCode===10))(this.onSpace,this,this.disposables)}if((s.findWidgetEnabled??!0)&&s.keyboardNavigationLabelProvider&&s.contextViewProvider){const p=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new fxe(this,this.model,this.view,h,s.contextViewProvider,p),this.focusNavigationFilter=b=>this.findController.shouldAllowFocus(b),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=Oe.None,this.onDidChangeFindMatchType=Oe.None;s.enableStickyScroll&&(this.stickyScrollController=new I$(this,this.model,this.view,this.renderers,this.treeDelegate,s),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=xl(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===F1.Always)}updateOptions(e={}){this._options={...this._options,...e};for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(this._options),this.findController?.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===F1.Always)}get options(){return this._options}updateStickyScroll(e){!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new I$(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=Oe.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),this.stickyScrollController?.updateOptions(e)}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}domFocus(){this.stickyScrollController?.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}layout(e,t){this.view.layout(e,t),J1(t)&&this.findController?.layout(t)}style(e){const t=`.${this.view.domId}`,i=[];e.treeIndentGuidesStroke&&(i.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),i.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`));const r=e.treeStickyScrollBackground??e.listBackground;r&&(i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${r}; }`),i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${r}; }`)),e.treeStickyScrollBorder&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${e.treeStickyScrollBorder}; }`),e.treeStickyScrollShadow&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${e.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),e.listFocusForeground&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const s=Su(e.listFocusAndSelectionOutline,Su(e.listSelectionOutline,e.listFocusOutline??""));s&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${s}; outline-offset: -1px;}`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=i.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(s=>this.model.getNode(s));this.selection.set(i,t);const r=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setSelection(r,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(s=>this.model.getNode(s));this.focus.set(i,t);const r=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setFocus(r,t,!0)})}focusNext(e=1,t=!1,i,r=iu(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(e,t,i,r)}focusPrevious(e=1,t=!1,i,r=iu(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(e,t,i,r)}focusNextPage(e,t=iu(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(e,t)}focusPreviousPage(e,t=iu(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(e,t,()=>this.stickyScrollController?.height??0)}focusLast(e,t=iu(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusLast(e,t)}focusFirst(e,t=iu(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const i=this.model.getListIndex(e);if(i!==-1)if(!this.stickyScrollController)this.view.reveal(i,t);else{const r=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(i,t,r)}}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],r=this.model.getNodeLocation(i);if(!this.model.setCollapsed(r,!0)){const o=this.model.getParentNodeLocation(r);if(!o)return;const a=this.model.getListIndex(o);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],r=this.model.getNodeLocation(i);if(!this.model.setCollapsed(r,!1)){if(!i.children.some(l=>l.visible))return;const[o]=this.view.getFocus(),a=o+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],r=this.model.getNodeLocation(i),s=e.browserEvent.altKey;this.model.setCollapsed(r,void 0,s)}dispose(){is(this.disposables),this.stickyScrollController?.dispose(),this.view.dispose()}}class wR{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new axe(e,t,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare(r,s){return i.sorter.compare(r.element,s.element)}}),this.identityProvider=i.identityProvider}setChildren(e,t=wi.empty(),i={}){const r=this.getElementLocation(e);this._setChildren(r,this.preserveCollapseState(t),i)}_setChildren(e,t=wi.empty(),i){const r=new Set,s=new Set,o=l=>{if(l.element===null)return;const c=l;if(r.add(c.element),this.nodes.set(c.element,c),this.identityProvider){const h=this.identityProvider.getId(c.element).toString();s.add(h),this.nodesByIdentity.set(h,c)}i.onDidCreateNode?.(c)},a=l=>{if(l.element===null)return;const c=l;if(r.has(c.element)||this.nodes.delete(c.element),this.identityProvider){const h=this.identityProvider.getId(c.element).toString();s.has(h)||this.nodesByIdentity.delete(h)}i.onDidDeleteNode?.(c)};this.model.splice([...e,0],Number.MAX_VALUE,t,{...i,onDidCreateNode:o,onDidDeleteNode:a})}preserveCollapseState(e=wi.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),wi.map(e,t=>{let i=this.nodes.get(t.element);if(!i&&this.identityProvider){const o=this.identityProvider.getId(t.element).toString();i=this.nodesByIdentity.get(o)}if(!i){let o;return typeof t.collapsed>"u"?o=void 0:t.collapsed===da.Collapsed||t.collapsed===da.PreserveOrCollapsed?o=!0:t.collapsed===da.Expanded||t.collapsed===da.PreserveOrExpanded?o=!1:o=!!t.collapsed,{...t,children:this.preserveCollapseState(t.children),collapsed:o}}const r=typeof t.collapsible=="boolean"?t.collapsible:i.collapsible;let s;return typeof t.collapsed>"u"||t.collapsed===da.PreserveOrCollapsed||t.collapsed===da.PreserveOrExpanded?s=i.collapsed:t.collapsed===da.Collapsed?s=!0:t.collapsed===da.Expanded?s=!1:s=!!t.collapsed,{...t,collapsible:r,collapsed:s,children:this.preserveCollapseState(t.children)}})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const r=this.getElementLocation(e);return this.model.setCollapsed(r,t,i)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new ba(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new ba(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new ba(this.user,`Tree element not found: ${e}`);const i=this.model.getNodeLocation(t),r=this.model.getParentNodeLocation(i);return this.model.getNode(r).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new ba(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function KS(n){const e=[n.element],t=n.incompressible||!1;return{element:{elements:e,incompressible:t},children:wi.map(wi.from(n.children),KS),collapsible:n.collapsible,collapsed:n.collapsed}}function YS(n){const e=[n.element],t=n.incompressible||!1;let i,r;for(;[r,i]=wi.consume(wi.from(n.children),2),!(r.length!==1||r[0].incompressible);)n=r[0],e.push(n.element);return{element:{elements:e,incompressible:t},children:wi.map(wi.concat(r,i),YS),collapsible:n.collapsible,collapsed:n.collapsed}}function q9(n,e=0){let t;return e<n.element.elements.length-1?t=[q9(n,e+1)]:t=wi.map(wi.from(n.children),i=>q9(i,0)),e===0&&n.element.incompressible?{element:n.element.elements[e],children:t,incompressible:!0,collapsible:n.collapsible,collapsed:n.collapsed}:{element:n.element.elements[e],children:t,collapsible:n.collapsible,collapsed:n.collapsed}}function N$(n){return q9(n,0)}function fQ(n,e,t){return n.element===e?{...n,children:t}:{...n,children:wi.map(wi.from(n.children),i=>fQ(i,e,t))}}const Cxe=n=>({getId(e){return e.elements.map(t=>n.getId(t).toString()).join("\0")}});class Sxe{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new wR(e,t,i),this.enabled=typeof i.compressionEnabled>"u"?!0:i.compressionEnabled,this.identityProvider=i.identityProvider}setChildren(e,t=wi.empty(),i){const r=i.diffIdentityProvider&&Cxe(i.diffIdentityProvider);if(e===null){const p=wi.map(t,this.enabled?YS:KS);this._setChildren(null,p,{diffIdentityProvider:r,diffDepth:1/0});return}const s=this.nodes.get(e);if(!s)throw new ba(this.user,"Unknown compressed tree node");const o=this.model.getNode(s),a=this.model.getParentNodeLocation(s),l=this.model.getNode(a),c=N$(o),h=fQ(c,e,t),u=(this.enabled?YS:KS)(h),d=i.diffIdentityProvider?(p,b)=>i.diffIdentityProvider.getId(p)===i.diffIdentityProvider.getId(b):void 0;if(_r(u.element.elements,o.element.elements,d)){this._setChildren(s,u.children||wi.empty(),{diffIdentityProvider:r,diffDepth:1});return}const g=l.children.map(p=>p===o?u:p);this._setChildren(l.element,g,{diffIdentityProvider:r,diffDepth:o.depth-l.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const i=this.model.getNode().children,r=wi.map(i,N$),s=wi.map(r,e?YS:KS);this._setChildren(null,s,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){const r=new Set,s=a=>{for(const l of a.element.elements)r.add(l),this.nodes.set(l,a.element)},o=a=>{for(const l of a.element.elements)r.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,{...i,onDidCreateNode:s,onDidDeleteNode:o})}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return i===null?null:i.elements[i.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const r=this.getCompressedNode(e);return this.model.setCollapsed(r,t,i)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new ba(this.user,`Tree element not found: ${e}`);return t}}const xxe=n=>n[n.length-1];class yR{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new yR(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}function kxe(n,e){return{splice(t,i,r){e.splice(t,i,r.map(s=>n.map(s)))},updateElementHeight(t,i){e.updateElementHeight(t,i)}}}function Lxe(n,e){return{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(n(t))}},sorter:e.sorter&&{compare(t,i){return e.sorter.compare(t.elements[0],i.elements[0])}},filter:e.filter&&{filter(t,i){return e.filter.filter(n(t),i)}}}}class Txe{get onDidSplice(){return Oe.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(i=>this.nodeMapper.map(i)),deletedNodes:t.map(i=>this.nodeMapper.map(i))}))}get onDidChangeCollapseState(){return Oe.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return Oe.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t,i={}){this.rootRef=null,this.elementMapper=i.elementMapper||xxe;const r=s=>this.elementMapper(s.elements);this.nodeMapper=new bR(s=>new yR(r,s)),this.model=new Sxe(e,kxe(this.nodeMapper,t),Lxe(r,i))}setChildren(e,t=wi.empty(),i={}){this.model.setChildren(e,t,i)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var Dxe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s};class CR extends dQ{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,i,r,s={}){super(e,t,i,r,s),this.user=e}setChildren(e,t=wi.empty(),i){this.model.setChildren(e,t,i)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,i){return new wR(e,t,i)}}class gQ{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,i){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=i,this.templateId=i.templateId,i.onDidChangeTwistieState&&(this.onDidChangeTwistieState=i.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,i,r){let s=this.stickyScrollDelegate.getCompressedNode(e);s||(s=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),s.element.elements.length===1?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,r)):(i.compressedTreeNode=s,this.renderer.renderCompressedElements(s,t,i.data,r))}disposeElement(e,t,i,r){i.compressedTreeNode?this.renderer.disposeCompressedElements?.(i.compressedTreeNode,t,i.data,r):this.renderer.disposeElement?.(e,t,i.data,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}Dxe([Mn],gQ.prototype,"compressedTreeNodeProvider",null);class Exe{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,i){if(this.compressedStickyNodes.clear(),e.length===0)return[];for(let r=0;r<e.length;r++){const s=e[r],o=s.position+s.height;if(r+1<e.length&&o+e[r+1].height>i||r>=t-1&&t<e.length){const l=e.slice(0,r),c=e.slice(r),h=this.compressStickyNodes(c);return[...l,h]}}return e}compressStickyNodes(e){if(e.length===0)throw new Error("Can't compress empty sticky nodes");const t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];const i=[];for(let c=0;c<e.length;c++){const h=e[c],u=t.getCompressedTreeNode(h.node.element);if(u.element){if(c!==0&&u.element.incompressible)break;i.push(...u.element.elements)}}if(i.length<2)return e[0];const r=e[e.length-1],s={elements:i,incompressible:!1},o={...r.node,children:[],element:s},a=new Proxy(e[0].node,{}),l={node:a,startIndex:e[0].startIndex,endIndex:r.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(a,o),l}}function Ixe(n,e){return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let i;try{i=n().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return i.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(i.element.elements)}}}}class mQ extends CR{constructor(e,t,i,r,s={}){const o=()=>this,a=new Exe(()=>this.model),l=r.map(c=>new gQ(o,a,c));super(e,t,i,l,{...Ixe(o,s),stickyScrollDelegate:a})}setChildren(e,t=wi.empty(),i){this.model.setChildren(e,t,i)}createModel(e,t,i){return new Txe(e,t,i)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}function E6(n){return{...n,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function G9(n,e){return e.parent?e.parent===n?!0:G9(n,e.parent):!1}function Nxe(n,e){return n===e||G9(n,e)||G9(e,n)}class SR{get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new SR(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class Mxe{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,r){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,r)}renderTwistie(e,t){return e.slow?(t.classList.add(...gi.asClassNameArray(Je.treeItemLoading)),!0):(t.classList.remove(...gi.asClassNameArray(Je.treeItemLoading)),!1)}disposeElement(e,t,i,r){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,i.templateData,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function M$(n){return{browserEvent:n.browserEvent,elements:n.elements.map(e=>e.element)}}function A$(n){return{browserEvent:n.browserEvent,element:n.element&&n.element.element,target:n.target}}class Axe extends By{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function I6(n){return n instanceof By?new Axe(n):n}class Rxe{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){this.dnd.onDragStart?.(I6(e),t)}onDragOver(e,t,i,r,s,o=!0){return this.dnd.onDragOver(I6(e),t&&t.element,i,r,s)}drop(e,t,i,r,s){this.dnd.drop(I6(e),t&&t.element,i,r,s)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.dnd.dispose()}}function pQ(n){return n&&{...n,collapseByDefault:!0,identityProvider:n.identityProvider&&{getId(e){return n.identityProvider.getId(e.element)}},dnd:n.dnd&&new Rxe(n.dnd),multipleSelectionController:n.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return n.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element})},isSelectionRangeChangeEvent(e){return n.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})}},accessibilityProvider:n.accessibilityProvider&&{...n.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:n.accessibilityProvider.getRole?e=>n.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:n.accessibilityProvider.isChecked?e=>!!n.accessibilityProvider?.isChecked(e.element):void 0,getAriaLabel(e){return n.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return n.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:n.accessibilityProvider.getWidgetRole?()=>n.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:n.accessibilityProvider.getAriaLevel&&(e=>n.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:n.accessibilityProvider.getActiveDescendantId&&(e=>n.accessibilityProvider.getActiveDescendantId(e.element))},filter:n.filter&&{filter(e,t){return n.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:n.keyboardNavigationLabelProvider&&{...n.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(e){return n.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof n.expandOnlyOnTwistieClick>"u"?void 0:typeof n.expandOnlyOnTwistieClick!="function"?n.expandOnlyOnTwistieClick:e=>n.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:e=>e.hasChildren&&e.stale?1:typeof n.defaultFindVisibility=="number"?n.defaultFindVisibility:typeof n.defaultFindVisibility>"u"?2:n.defaultFindVisibility(e.element)}}function K9(n,e){e(n),n.children.forEach(t=>K9(t,e))}class bQ{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return Oe.map(this.tree.onDidChangeFocus,M$)}get onDidChangeSelection(){return Oe.map(this.tree.onDidChangeSelection,M$)}get onMouseDblClick(){return Oe.map(this.tree.onMouseDblClick,A$)}get onPointer(){return Oe.map(this.tree.onPointer,A$)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,i,r,s,o={}){this.user=e,this.dataSource=s,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new de,this._onDidChangeNodeSlowState=new de,this.nodeMapper=new bR(a=>new SR(a)),this.disposables=new rt,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren>"u"?!1:o.autoExpandSingleChildren,this.sorter=o.sorter,this.getDefaultCollapseState=a=>o.collapseByDefault?o.collapseByDefault(a)?da.PreserveOrCollapsed:da.PreserveOrExpanded:void 0,this.tree=this.createTree(e,t,i,r,o),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=E6({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,i,r,s){const o=new vR(i),a=r.map(c=>new Mxe(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=pQ(s)||{};return new CR(e,t,o,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach(r=>r.cancel()),this.refreshPromises.clear(),this.root.element=e;const i=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)}async _updateChildren(e=this.root.element,t=!0,i=!1,r,s){if(typeof this.root.element>"u")throw new ba(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Oe.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(await this.refreshAndRenderNode(o,t,r,s),i)try{this.tree.rerender(o)}catch{}}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(i)}collapse(e,t=!1){const i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}async expand(e,t=!1){if(typeof this.root.element>"u")throw new ba(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Oe.toPromise(this._onDidRender.event));const i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i)||(i.refreshPromise&&(await this.root.refreshPromise,await Oe.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i)))return!1;const r=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(await this.root.refreshPromise,await Oe.toPromise(this._onDidRender.event)),r}setSelection(e,t){const i=e.map(r=>this.getDataNode(r));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const i=e.map(r=>this.getDataNode(r));this.tree.setFocus(i,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getFirstElementChild(t===this.root?null:t);return i&&i.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new ba(this.user,`Data tree node not found: ${e}`);return t}async refreshAndRenderNode(e,t,i,r){await this.refreshNode(e,t,i),!this.disposables.isDisposed&&this.render(e,i,r)}async refreshNode(e,t,i){let r;if(this.subTreeRefreshPromises.forEach((s,o)=>{!r&&Nxe(o,e)&&(r=s.then(()=>this.refreshNode(e,t,i)))}),r)return r;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,this.setChildren(e,[],t,i);return}return this.doRefreshSubTree(e,t,i)}async doRefreshSubTree(e,t,i){let r;e.refreshPromise=new Promise(s=>r=s),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const s=await this.doRefreshNode(e,t,i);e.stale=!1,await KE.settled(s.map(o=>this.doRefreshSubTree(o,t,i)))}finally{r()}}async doRefreshNode(e,t,i){e.hasChildren=!!this.dataSource.hasChildren(e.element);let r;if(!e.hasChildren)r=Promise.resolve(wi.empty());else{const s=this.doGetChildren(e);if(ez(s))r=Promise.resolve(s);else{const o=_w(800);o.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),r=s.finally(()=>o.cancel())}}try{const s=await r;return this.setChildren(e,s,t,i)}catch(s){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),vy(s))return[];throw s}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const i=this.dataSource.getChildren(e.element);return ez(i)?this.processChildren(i):(t=iY(async()=>this.processChildren(await i)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(Wi))}setChildren(e,t,i,r){const s=[...t];if(e.children.length===0&&s.length===0)return[];const o=new Map,a=new Map;for(const h of e.children)o.set(h.element,h),this.identityProvider&&a.set(h.id,{node:h,collapsed:this.tree.hasElement(h)&&this.tree.isCollapsed(h)});const l=[],c=s.map(h=>{const u=!!this.dataSource.hasChildren(h);if(!this.identityProvider){const b=E6({element:h,parent:e,hasChildren:u,defaultCollapseState:this.getDefaultCollapseState(h)});return u&&b.defaultCollapseState===da.PreserveOrExpanded&&l.push(b),b}const d=this.identityProvider.getId(h).toString(),g=a.get(d);if(g){const b=g.node;return o.delete(b.element),this.nodes.delete(b.element),this.nodes.set(h,b),b.element=h,b.hasChildren=u,i?g.collapsed?(b.children.forEach(_=>K9(_,w=>this.nodes.delete(w.element))),b.children.splice(0,b.children.length),b.stale=!0):l.push(b):u&&!g.collapsed&&l.push(b),b}const p=E6({element:h,parent:e,id:d,hasChildren:u,defaultCollapseState:this.getDefaultCollapseState(h)});return r&&r.viewState.focus&&r.viewState.focus.indexOf(d)>-1&&r.focus.push(p),r&&r.viewState.selection&&r.viewState.selection.indexOf(d)>-1&&r.selection.push(p),(r&&r.viewState.expanded&&r.viewState.expanded.indexOf(d)>-1||u&&p.defaultCollapseState===da.PreserveOrExpanded)&&l.push(p),p});for(const h of o.values())K9(h,u=>this.nodes.delete(u.element));for(const h of c)this.nodes.set(h.element,h);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].forceExpanded=!0,l.push(c[0])),l}render(e,t,i){const r=e.children.map(o=>this.asTreeElement(o,t)),s=i&&{...i,diffIdentityProvider:i.diffIdentityProvider&&{getId(o){return i.diffIdentityProvider.getId(o.element)}}};this.tree.setChildren(e===this.root?null:e,r,s),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?i=!1:e.forceExpanded?(i=!1,e.forceExpanded=!1):i=e.defaultCollapseState,{element:e,children:e.hasChildren?wi.map(e.children,r=>this.asTreeElement(r,t)):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose(),this.tree.dispose()}}class xR{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new xR(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class Pxe{constructor(e,t,i,r){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=r,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,r){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,r)}renderCompressedElements(e,t,i,r){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,r)}renderTwistie(e,t){return e.slow?(t.classList.add(...gi.asClassNameArray(Je.treeItemLoading)),!0):(t.classList.remove(...gi.asClassNameArray(Je.treeItemLoading)),!1)}disposeElement(e,t,i,r){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,i.templateData,r)}disposeCompressedElements(e,t,i,r){this.renderer.disposeCompressedElements?.(this.compressibleNodeMapperProvider().map(e),t,i.templateData,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=is(this.disposables)}}function Oxe(n){const e=n&&pQ(n);return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(t){return n.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(i=>i.element))}}}}class Bxe extends bQ{constructor(e,t,i,r,s,o,a={}){super(e,t,i,s,o,a),this.compressionDelegate=r,this.compressibleNodeMapper=new bR(l=>new xR(l)),this.filter=a.filter}createTree(e,t,i,r,s){const o=new vR(i),a=r.map(c=>new Pxe(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=Oxe(s)||{};return new mQ(e,t,o,a,l)}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t,i){if(!this.identityProvider)return super.render(e,t);const r=g=>this.identityProvider.getId(g).toString(),s=g=>{const p=new Set;for(const b of g){const _=this.tree.getCompressedTreeNode(b===this.root?null:b);if(_.element)for(const w of _.element.elements)p.add(r(w.element))}return p},o=s(this.tree.getSelection()),a=s(this.tree.getFocus());super.render(e,t,i);const l=this.getSelection();let c=!1;const h=this.getFocus();let u=!1;const d=g=>{const p=g.element;if(p)for(let b=0;b<p.elements.length;b++){const _=r(p.elements[b].element),w=p.elements[p.elements.length-1].element;o.has(_)&&l.indexOf(w)===-1&&(l.push(w),c=!0),a.has(_)&&h.indexOf(w)===-1&&(h.push(w),u=!0)}g.children.forEach(d)};d(this.tree.getCompressedTreeNode(e===this.root?null:e)),c&&this.setSelection(l),u&&this.setFocus(h)}processChildren(e){return this.filter&&(e=wi.filter(e,t=>{const i=this.filter.filter(t,1),r=Fxe(i);if(r===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return r===1})),super.processChildren(e)}}function Fxe(n){return typeof n=="boolean"?n?1:0:_R(n)?Ww(n.visibility):Ww(n)}class Wxe extends dQ{constructor(e,t,i,r,s,o={}){super(e,t,i,r,o),this.user=e,this.dataSource=s,this.identityProvider=o.identityProvider}createModel(e,t,i){return new wR(e,t,i)}}new st("isMac",hi,C("isMac","Whether the operating system is macOS"));new st("isLinux",wo,C("isLinux","Whether the operating system is Linux"));new st("isWindows",Go,C("isWindows","Whether the operating system is Windows"));new st("isWeb",eb,C("isWeb","Whether the platform is a web browser"));new st("isMacNative",hi&&!eb,C("isMacNative","Whether the operating system is macOS on a non-browser platform"));new st("isIOS",ym,C("isIOS","Whether the operating system is iOS"));new st("isMobile",SK,C("isMobile","Whether the platform is a mobile web browser"));new st("isDevelopment",!1,!0);new st("productQualityType","",C("productQualityType","Quality type of VS Code"));const _Q="inputFocus",zxe=new st(_Q,!1,C("inputFocus","Whether keyboard focus is inside an input box"));var Yu=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Zi=function(n,e){return function(t,i){e(t,i,n)}};const bh=ai("listService");class Hxe{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new rt,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){e!==this._lastFocusedWidget&&(this._lastFocusedWidget?.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,this._lastFocusedWidget?.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new SX(xl(),"").style(lb)),this.lists.some(r=>r.widget===e))throw new Error("Cannot register the same widget multiple times");const i={widget:e,extraContextKeys:t};return this.lists.push(i),cA(e.getHTMLElement())&&this.setLastFocusedList(e),ih(e.onDidFocus(()=>this.setLastFocusedList(e)),Mt(()=>this.lists.splice(this.lists.indexOf(i),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(r=>r!==i),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}const zw=new st("listScrollAtBoundary","none");Si.or(zw.isEqualTo("top"),zw.isEqualTo("both"));Si.or(zw.isEqualTo("bottom"),zw.isEqualTo("both"));const vQ=new st("listFocus",!0),wQ=new st("treestickyScrollFocused",!1),F5=new st("listSupportsMultiselect",!0);Si.and(vQ,Si.not(_Q),wQ.negate());const kR=new st("listHasSelectionOrFocus",!1),LR=new st("listDoubleSelection",!1),TR=new st("listMultiSelection",!1),W5=new st("listSelectionNavigation",!1),Vxe=new st("listSupportsFind",!0),$xe=new st("treeElementCanCollapse",!1),jxe=new st("treeElementHasParent",!1),Uxe=new st("treeElementCanExpand",!1),qxe=new st("treeElementHasChild",!1),Gxe=new st("treeFindOpen",!1),yQ="listTypeNavigationMode",CQ="listAutomaticKeyboardNavigation";function z5(n,e){const t=n.createScoped(e.getHTMLElement());return vQ.bindTo(t),t}function H5(n,e){const t=zw.bindTo(n),i=()=>{const r=e.scrollTop===0,s=e.scrollHeight-e.renderHeight-e.scrollTop<1;r&&s?t.set("both"):r?t.set("top"):s?t.set("bottom"):t.set("none")};return i(),e.onDidScroll(i)}const tp="workbench.list.multiSelectModifier",ZS="workbench.list.openMode",Ya="workbench.list.horizontalScrolling",DR="workbench.list.defaultFindMode",ER="workbench.list.typeNavigationMode",kk="workbench.list.keyboardNavigation",pc="workbench.list.scrollByPage",IR="workbench.list.defaultFindMatchType",Hw="workbench.tree.indent",Lk="workbench.tree.renderIndentGuides",bc="workbench.list.smoothScrolling",ch="workbench.list.mouseWheelScrollSensitivity",hh="workbench.list.fastScrollSensitivity",Tk="workbench.tree.expandMode",Dk="workbench.tree.enableStickyScroll",Ek="workbench.tree.stickyScrollMaxItemCount";function uh(n){return n.getValue(tp)==="alt"}class Kxe extends xe{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=uh(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(tp)&&(this.useAltAsMultipleSelectionModifier=uh(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:wX(e)}isSelectionRangeChangeEvent(e){return yX(e)}}function V5(n,e){const t=n.get(Nn),i=n.get(ns),r=new rt;return[{...e,keyboardNavigationDelegate:{mightProducePrintableCharacter(o){return i.mightProducePrintableCharacter(o)}},smoothScrolling:!!t.getValue(bc),mouseWheelScrollSensitivity:t.getValue(ch),fastScrollSensitivity:t.getValue(hh),multipleSelectionController:e.multipleSelectionController??r.add(new Kxe(t)),keyboardNavigationEventFilter:Xxe(i),scrollByPage:!!t.getValue(pc)},r]}let R$=class extends Cc{constructor(e,t,i,r,s,o,a,l,c){const h=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!l.getValue(Ya),[u,d]=c.invokeFunction(V5,s);super(e,t,i,r,{keyboardSupport:!1,...u,horizontalScrolling:h}),this.disposables.add(d),this.contextKeyService=z5(o,this),this.disposables.add(H5(this.contextKeyService,this)),this.listSupportsMultiSelect=F5.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),W5.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this.listHasSelectionOrFocus=kR.bindTo(this.contextKeyService),this.listDoubleSelection=LR.bindTo(this.contextKeyService),this.listMultiSelection=TR.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=uh(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const p=this.getSelection(),b=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(p.length>0||b.length>0),this.listMultiSelection.set(p.length>1),this.listDoubleSelection.set(p.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const p=this.getSelection(),b=this.getFocus();this.listHasSelectionOrFocus.set(p.length>0||b.length>0)})),this.disposables.add(l.onDidChangeConfiguration(p=>{p.affectsConfiguration(tp)&&(this._useAltAsMultipleSelectionModifier=uh(l));let b={};if(p.affectsConfiguration(Ya)&&this.horizontalScrolling===void 0){const _=!!l.getValue(Ya);b={...b,horizontalScrolling:_}}if(p.affectsConfiguration(pc)){const _=!!l.getValue(pc);b={...b,scrollByPage:_}}if(p.affectsConfiguration(bc)){const _=!!l.getValue(bc);b={...b,smoothScrolling:_}}if(p.affectsConfiguration(ch)){const _=l.getValue(ch);b={...b,mouseWheelScrollSensitivity:_}}if(p.affectsConfiguration(hh)){const _=l.getValue(hh);b={...b,fastScrollSensitivity:_}}Object.keys(b).length>0&&this.updateOptions(b)})),this.navigator=new SQ(this,{configurationService:l,...s}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Wy(e):lb)}};R$=Yu([Zi(5,Ei),Zi(6,bh),Zi(7,Nn),Zi(8,Ni)],R$);let P$=class extends YSe{constructor(e,t,i,r,s,o,a,l,c){const h=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!l.getValue(Ya),[u,d]=c.invokeFunction(V5,s);super(e,t,i,r,{keyboardSupport:!1,...u,horizontalScrolling:h}),this.disposables=new rt,this.disposables.add(d),this.contextKeyService=z5(o,this),this.disposables.add(H5(this.contextKeyService,this.widget)),this.horizontalScrolling=s.horizontalScrolling,this.listSupportsMultiSelect=F5.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),W5.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this._useAltAsMultipleSelectionModifier=uh(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(p=>{p.affectsConfiguration(tp)&&(this._useAltAsMultipleSelectionModifier=uh(l));let b={};if(p.affectsConfiguration(Ya)&&this.horizontalScrolling===void 0){const _=!!l.getValue(Ya);b={...b,horizontalScrolling:_}}if(p.affectsConfiguration(pc)){const _=!!l.getValue(pc);b={...b,scrollByPage:_}}if(p.affectsConfiguration(bc)){const _=!!l.getValue(bc);b={...b,smoothScrolling:_}}if(p.affectsConfiguration(ch)){const _=l.getValue(ch);b={...b,mouseWheelScrollSensitivity:_}}if(p.affectsConfiguration(hh)){const _=l.getValue(hh);b={...b,fastScrollSensitivity:_}}Object.keys(b).length>0&&this.updateOptions(b)})),this.navigator=new SQ(this,{configurationService:l,...s}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Wy(e):lb)}dispose(){this.disposables.dispose(),super.dispose()}};P$=Yu([Zi(5,Ei),Zi(6,bh),Zi(7,Nn),Zi(8,Ni)],P$);let O$=class extends j9{constructor(e,t,i,r,s,o,a,l,c,h){const u=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!c.getValue(Ya),[d,g]=h.invokeFunction(V5,o);super(e,t,i,r,s,{keyboardSupport:!1,...d,horizontalScrolling:u}),this.disposables.add(g),this.contextKeyService=z5(a,this),this.disposables.add(H5(this.contextKeyService,this)),this.listSupportsMultiSelect=F5.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),W5.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=kR.bindTo(this.contextKeyService),this.listDoubleSelection=LR.bindTo(this.contextKeyService),this.listMultiSelection=TR.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=uh(c),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const b=this.getSelection(),_=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(b.length>0||_.length>0),this.listMultiSelection.set(b.length>1),this.listDoubleSelection.set(b.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const b=this.getSelection(),_=this.getFocus();this.listHasSelectionOrFocus.set(b.length>0||_.length>0)})),this.disposables.add(c.onDidChangeConfiguration(b=>{b.affectsConfiguration(tp)&&(this._useAltAsMultipleSelectionModifier=uh(c));let _={};if(b.affectsConfiguration(Ya)&&this.horizontalScrolling===void 0){const w=!!c.getValue(Ya);_={..._,horizontalScrolling:w}}if(b.affectsConfiguration(pc)){const w=!!c.getValue(pc);_={..._,scrollByPage:w}}if(b.affectsConfiguration(bc)){const w=!!c.getValue(bc);_={..._,smoothScrolling:w}}if(b.affectsConfiguration(ch)){const w=c.getValue(ch);_={..._,mouseWheelScrollSensitivity:w}}if(b.affectsConfiguration(hh)){const w=c.getValue(hh);_={..._,fastScrollSensitivity:w}}Object.keys(_).length>0&&this.updateOptions(_)})),this.navigator=new Yxe(this,{configurationService:c,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Wy(e):lb)}dispose(){this.disposables.dispose(),super.dispose()}};O$=Yu([Zi(6,Ei),Zi(7,bh),Zi(8,Nn),Zi(9,Ni)],O$);class NR extends xe{constructor(e,t){super(),this.widget=e,this._onDidOpen=this._register(new de),this.onDidOpen=this._onDidOpen.event,this._register(Oe.filter(this.widget.onDidChangeSelection,i=>iu(i.browserEvent))(i=>this.onSelectionFromKeyboard(i))),this._register(this.widget.onPointer(i=>this.onPointer(i.element,i.browserEvent))),this._register(this.widget.onMouseDblClick(i=>this.onMouseDblClick(i.element,i.browserEvent))),typeof t?.openOnSingleClick!="boolean"&&t?.configurationService?(this.openOnSingleClick=t?.configurationService.getValue(ZS)!=="doubleClick",this._register(t?.configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration(ZS)&&(this.openOnSingleClick=t?.configurationService.getValue(ZS)!=="doubleClick")}))):this.openOnSingleClick=t?.openOnSingleClick??!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,i=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,r=typeof t.pinned=="boolean"?t.pinned:!i;this._open(this.getSelectedElement(),i,r,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const r=t.button===1,s=!0,o=r,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,o,a,t)}onMouseDblClick(e,t){if(!t)return;const i=t.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.offsetX<16)return;const s=!1,o=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,o,a,t)}_open(e,t,i,r,s){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:i,revealIfVisible:!0},sideBySide:r,element:e,browserEvent:s})}}class SQ extends NR{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class Yxe extends NR{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class Zxe extends NR{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}}function Xxe(n){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;const i=n.softDispatch(t,t.target);return i.kind===1?(e=!0,!1):(e=!1,i.kind===0)}}let Y9=class extends CR{constructor(e,t,i,r,s,o,a,l,c){const{options:h,getTypeNavigationMode:u,disposable:d}=o.invokeFunction($y,s);super(e,t,i,r,h),this.disposables.add(d),this.internals=new Nm(this,s,u,s.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};Y9=Yu([Zi(5,Ni),Zi(6,Ei),Zi(7,bh),Zi(8,Nn)],Y9);let B$=class extends mQ{constructor(e,t,i,r,s,o,a,l,c){const{options:h,getTypeNavigationMode:u,disposable:d}=o.invokeFunction($y,s);super(e,t,i,r,h),this.disposables.add(d),this.internals=new Nm(this,s,u,s.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};B$=Yu([Zi(5,Ni),Zi(6,Ei),Zi(7,bh),Zi(8,Nn)],B$);let F$=class extends Wxe{constructor(e,t,i,r,s,o,a,l,c,h){const{options:u,getTypeNavigationMode:d,disposable:g}=a.invokeFunction($y,o);super(e,t,i,r,s,u),this.disposables.add(g),this.internals=new Nm(this,o,d,o.overrideStyles,l,c,h),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};F$=Yu([Zi(6,Ni),Zi(7,Ei),Zi(8,bh),Zi(9,Nn)],F$);let W$=class extends bQ{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,r,s,o,a,l,c,h){const{options:u,getTypeNavigationMode:d,disposable:g}=a.invokeFunction($y,o);super(e,t,i,r,s,u),this.disposables.add(g),this.internals=new Nm(this,o,d,o.overrideStyles,l,c,h),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};W$=Yu([Zi(6,Ni),Zi(7,Ei),Zi(8,bh),Zi(9,Nn)],W$);let z$=class extends Bxe{constructor(e,t,i,r,s,o,a,l,c,h,u){const{options:d,getTypeNavigationMode:g,disposable:p}=l.invokeFunction($y,a);super(e,t,i,r,s,o,d),this.disposables.add(p),this.internals=new Nm(this,a,g,a.overrideStyles,c,h,u),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};z$=Yu([Zi(7,Ni),Zi(8,Ei),Zi(9,bh),Zi(10,Nn)],z$);function xQ(n){const e=n.getValue(DR);if(e==="highlight")return pu.Highlight;if(e==="filter")return pu.Filter;const t=n.getValue(kk);if(t==="simple"||t==="highlight")return pu.Highlight;if(t==="filter")return pu.Filter}function kQ(n){const e=n.getValue(IR);if(e==="fuzzy")return Im.Fuzzy;if(e==="contiguous")return Im.Contiguous}function $y(n,e){const t=n.get(Nn),i=n.get(Ry),r=n.get(Ei),s=n.get(Ni),o=()=>{const d=r.getContextKeyValue(yQ);if(d==="automatic")return Qc.Automatic;if(d==="trigger"||r.getContextKeyValue(CQ)===!1)return Qc.Trigger;const p=t.getValue(ER);if(p==="automatic")return Qc.Automatic;if(p==="trigger")return Qc.Trigger},a=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!t.getValue(Ya),[l,c]=s.invokeFunction(V5,e),h=e.paddingBottom,u=e.renderIndentGuides!==void 0?e.renderIndentGuides:t.getValue(Lk);return{getTypeNavigationMode:o,disposable:c,options:{keyboardSupport:!1,...l,indent:typeof t.getValue(Hw)=="number"?t.getValue(Hw):void 0,renderIndentGuides:u,smoothScrolling:!!t.getValue(bc),defaultFindMode:xQ(t),defaultFindMatchType:kQ(t),horizontalScrolling:a,scrollByPage:!!t.getValue(pc),paddingBottom:h,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:e.expandOnlyOnTwistieClick??t.getValue(Tk)==="doubleClick",contextViewProvider:i,findWidgetStyles:zye,enableStickyScroll:!!t.getValue(Dk),stickyScrollMaxItemCount:Number(t.getValue(Ek))}}}let Nm=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,r,s,o,a){this.tree=e,this.disposables=[],this.contextKeyService=z5(s,e),this.disposables.push(H5(this.contextKeyService,e)),this.listSupportsMultiSelect=F5.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),W5.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=Vxe.bindTo(this.contextKeyService),this.listSupportFindWidget.set(t.findWidgetEnabled??!0),this.hasSelectionOrFocus=kR.bindTo(this.contextKeyService),this.hasDoubleSelection=LR.bindTo(this.contextKeyService),this.hasMultiSelection=TR.bindTo(this.contextKeyService),this.treeElementCanCollapse=$xe.bindTo(this.contextKeyService),this.treeElementHasParent=jxe.bindTo(this.contextKeyService),this.treeElementCanExpand=Uxe.bindTo(this.contextKeyService),this.treeElementHasChild=qxe.bindTo(this.contextKeyService),this.treeFindOpen=Gxe.bindTo(this.contextKeyService),this.treeStickyScrollFocused=wQ.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=uh(a),this.updateStyleOverrides(r);const c=()=>{const u=e.getFocus()[0];if(!u)return;const d=e.getNode(u);this.treeElementCanCollapse.set(d.collapsible&&!d.collapsed),this.treeElementHasParent.set(!!e.getParentElement(u)),this.treeElementCanExpand.set(d.collapsible&&d.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(u))},h=new Set;h.add(yQ),h.add(CQ),this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection(()=>{const u=e.getSelection(),d=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(u.length>0||d.length>0),this.hasMultiSelection.set(u.length>1),this.hasDoubleSelection.set(u.length===2)})}),e.onDidChangeFocus(()=>{const u=e.getSelection(),d=e.getFocus();this.hasSelectionOrFocus.set(u.length>0||d.length>0),c()}),e.onDidChangeCollapseState(c),e.onDidChangeModel(c),e.onDidChangeFindOpenState(u=>this.treeFindOpen.set(u)),e.onDidChangeStickyScrollFocused(u=>this.treeStickyScrollFocused.set(u)),a.onDidChangeConfiguration(u=>{let d={};if(u.affectsConfiguration(tp)&&(this._useAltAsMultipleSelectionModifier=uh(a)),u.affectsConfiguration(Hw)){const g=a.getValue(Hw);d={...d,indent:g}}if(u.affectsConfiguration(Lk)&&t.renderIndentGuides===void 0){const g=a.getValue(Lk);d={...d,renderIndentGuides:g}}if(u.affectsConfiguration(bc)){const g=!!a.getValue(bc);d={...d,smoothScrolling:g}}if(u.affectsConfiguration(DR)||u.affectsConfiguration(kk)){const g=xQ(a);d={...d,defaultFindMode:g}}if(u.affectsConfiguration(ER)||u.affectsConfiguration(kk)){const g=i();d={...d,typeNavigationMode:g}}if(u.affectsConfiguration(IR)){const g=kQ(a);d={...d,defaultFindMatchType:g}}if(u.affectsConfiguration(Ya)&&t.horizontalScrolling===void 0){const g=!!a.getValue(Ya);d={...d,horizontalScrolling:g}}if(u.affectsConfiguration(pc)){const g=!!a.getValue(pc);d={...d,scrollByPage:g}}if(u.affectsConfiguration(Tk)&&t.expandOnlyOnTwistieClick===void 0&&(d={...d,expandOnlyOnTwistieClick:a.getValue(Tk)==="doubleClick"}),u.affectsConfiguration(Dk)){const g=a.getValue(Dk);d={...d,enableStickyScroll:g}}if(u.affectsConfiguration(Ek)){const g=Math.max(1,a.getValue(Ek));d={...d,stickyScrollMaxItemCount:g}}if(u.affectsConfiguration(ch)){const g=a.getValue(ch);d={...d,mouseWheelScrollSensitivity:g}}if(u.affectsConfiguration(hh)){const g=a.getValue(hh);d={...d,fastScrollSensitivity:g}}Object.keys(d).length>0&&e.updateOptions(d)}),this.contextKeyService.onDidChangeContext(u=>{u.affectsSome(h)&&e.updateOptions({typeNavigationMode:i()})})),this.navigator=new Zxe(e,{configurationService:a,...t}),this.disposables.push(this.navigator)}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?Wy(e):lb)}dispose(){this.disposables=is(this.disposables)}};Nm=Yu([Zi(4,Ei),Zi(5,bh),Zi(6,Nn)],Nm);const Qxe=Ur.as(Qm.Configuration);Qxe.registerConfiguration({id:"workbench",order:7,title:C("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[tp]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[C("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),C("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:C({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[ZS]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:C({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Ya]:{type:"boolean",default:!1,description:C("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[pc]:{type:"boolean",default:!1,description:C("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[Hw]:{type:"number",default:8,minimum:4,maximum:40,description:C("tree indent setting","Controls tree indentation in pixels.")},[Lk]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:C("render tree indent guides","Controls whether the tree should render indent guides.")},[bc]:{type:"boolean",default:!1,description:C("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[ch]:{type:"number",default:1,markdownDescription:C("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[hh]:{type:"number",default:5,markdownDescription:C("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[DR]:{type:"string",enum:["highlight","filter"],enumDescriptions:[C("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),C("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:C("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[kk]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[C("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),C("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),C("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:C("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:C("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[IR]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[C("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),C("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:C("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[Tk]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:C("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Dk]:{type:"boolean",default:!0,description:C("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[Ek]:{type:"number",minimum:1,default:7,markdownDescription:C("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")},[ER]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:C("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});class om extends xe{constructor(e,t){super(),this.options=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=t?.supportIcons??!1,this.domNode=it(e,ft("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],i="",r){e||(e=""),r&&(e=om.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===i&&Uo(this.highlights,t))&&(this.text=e,this.title=i,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const i of this.highlights){if(i.end===i.start)continue;if(t<i.start){const o=this.text.substring(t,i.start);this.supportIcons?e.push(...tm(o)):e.push(o),t=i.start}const r=this.text.substring(t,i.end),s=ft("span.highlight",void 0,...this.supportIcons?tm(r):[r]);i.extraClasses&&s.classList.add(...i.extraClasses),e.push(s),t=i.end}if(t<this.text.length){const i=this.text.substring(t);this.supportIcons?e.push(...tm(i)):e.push(i)}if(Ks(this.domNode,...e),this.options?.hoverDelegate?.showNativeHover)this.domNode.title=this.title;else if(!this.customHover&&this.title!==""){const i=this.options?.hoverDelegate??Qa("mouse");this.customHover=this._register(ph().setupManagedHover(i,this.domNode,this.title))}else this.customHover&&this.customHover.update(this.title);this.didEverRender=!0}static escapeNewLines(e,t){let i=0,r=0;return e.replace(/\r\n|\r|\n/g,(s,o)=>{r=s===`\r
`?-1:0,o+=i;for(const a of t)a.end<=o||(a.start>=o&&(a.start+=r),a.end>=o&&(a.end+=r));return i+=r,"⏎"})}}class y_{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set classNames(e){this.disposed||Uo(e,this._classNames)||(this._classNames=e,this._element.classList.value="",this._element.classList.add(...e))}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class H$ extends xe{constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new y_(it(e,ft(".monaco-icon-label")))),this.labelContainer=it(this.domNode.element,ft(".monaco-icon-label-container")),this.nameContainer=it(this.labelContainer,ft("span.monaco-icon-name-container")),t?.supportHighlights||t?.supportIcons?this.nameNode=this._register(new tke(this.nameContainer,!!t.supportIcons)):this.nameNode=new Jxe(this.nameContainer),this.hoverDelegate=t?.hoverDelegate??Qa("mouse")}get element(){return this.domNode.element}setLabel(e,t,i){const r=["monaco-icon-label"],s=["monaco-icon-label-container"];let o="";i&&(i.extraClasses&&r.push(...i.extraClasses),i.italic&&r.push("italic"),i.strikethrough&&r.push("strikethrough"),i.disabledCommand&&s.push("disabled"),i.title&&(typeof i.title=="string"?o+=i.title:o+=e));const a=this.domNode.element.querySelector(".monaco-icon-label-iconpath");if(i?.iconPath){let l;!a||!$r(a)?(l=ft(".monaco-icon-label-iconpath"),this.domNode.element.prepend(l)):l=a,l.style.backgroundImage=Bu(i?.iconPath)}else a&&a.remove();if(this.domNode.classNames=r,this.domNode.element.setAttribute("aria-label",o),this.labelContainer.classList.value="",this.labelContainer.classList.add(...s),this.setupHover(i?.descriptionTitle?this.labelContainer:this.element,i?.title),this.nameNode.setLabel(e,i),t||this.descriptionNode){const l=this.getOrCreateDescriptionNode();l instanceof om?(l.set(t||"",i?i.descriptionMatches:void 0,void 0,i?.labelEscapeNewLines),this.setupHover(l.element,i?.descriptionTitle)):(l.textContent=t&&i?.labelEscapeNewLines?om.escapeNewLines(t,[]):t||"",this.setupHover(l.element,i?.descriptionTitle||""),l.empty=!t)}if(i?.suffix||this.suffixNode){const l=this.getOrCreateSuffixNode();l.textContent=i?.suffix??""}}setupHover(e,t){const i=this.customHovers.get(e);if(i&&(i.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(this.hoverDelegate.showNativeHover)(function(s,o){Ca(o)?s.title=eX(o):o?.markdownNotSupportedFallback?s.title=o.markdownNotSupportedFallback:s.removeAttribute("title")})(e,t);else{const r=ph().setupManagedHover(this.hoverDelegate,e,t);r&&this.customHovers.set(e,r)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const e=this._register(new y_(zge(this.nameContainer,ft("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new y_(it(e.element,ft("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){if(!this.descriptionNode){const e=this._register(new y_(it(this.labelContainer,ft("span.monaco-icon-description-container"))));this.creationOptions?.supportDescriptionHighlights?this.descriptionNode=this._register(new om(it(e.element,ft("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new y_(it(e.element,ft("span.label-description"))))}return this.descriptionNode}}class Jxe{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Uo(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=it(this.container,ft("a.label-name",{id:t?.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<e.length;i++){const r=e[i],s=t?.domId&&`${t?.domId}_${i}`;it(this.container,ft("a.label-name",{id:s,"data-icon-label-count":e.length,"data-icon-label-index":i,role:"treeitem"},r)),i<e.length-1&&it(this.container,ft("span.label-separator",void 0,t?.separator||"/"))}}}}function eke(n,e,t){if(!t)return;let i=0;return n.map(r=>{const s={start:i,end:i+r.length},o=t.map(a=>us.intersect(s,a)).filter(a=>!us.isEmpty(a)).map(({start:a,end:l})=>({start:a-i,end:l-i}));return i=s.end+e.length,o})}class tke extends xe{constructor(e,t){super(),this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Uo(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new om(it(this.container,ft("a.label-name",{id:t?.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(e,t?.matches,void 0,t?.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const i=t?.separator||"/",r=eke(e,i,t?.matches);for(let s=0;s<e.length;s++){const o=e[s],a=r?r[s]:void 0,l=t?.domId&&`${t?.domId}_${s}`,c=ft("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":s,role:"treeitem"});this._register(new om(it(this.container,c),{supportIcons:this.supportIcons})).set(o,a,void 0,t?.labelEscapeNewLines),s<e.length-1&&it(c,ft("span.label-separator",void 0,i))}}}}const K2=ft;class MR extends xe{constructor(e,t,i){super(),this.os=t,this.keyElements=new Set,this.options=i||Object.create(null);const r=this.options.keybindingLabelForeground;this.domNode=it(e,K2(".monaco-keybinding")),r&&(this.domNode.style.color=r),this.hover=this._register(ph().setupManagedHover(Qa("mouse"),this.domNode,"")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&MR.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const e=this.keybinding.getChords();e[0]&&this.renderChord(this.domNode,e[0],this.matches?this.matches.firstPart:null);for(let i=1;i<e.length;i++)it(this.domNode,K2("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,e[i],this.matches?this.matches.chordPart:null);const t=this.options.disableTitle??!1?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(t),this.domNode.setAttribute("aria-label",t||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){fc(this.domNode),this.keyElements.clear()}renderChord(e,t,i){const r=GA.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,r.ctrlKey,!!i?.ctrlKey,r.separator),t.shiftKey&&this.renderKey(e,r.shiftKey,!!i?.shiftKey,r.separator),t.altKey&&this.renderKey(e,r.altKey,!!i?.altKey,r.separator),t.metaKey&&this.renderKey(e,r.metaKey,!!i?.metaKey,r.separator);const s=t.keyLabel;s&&this.renderKey(e,s,!!i?.keyCode,"")}renderKey(e,t,i,r){it(e,this.createKeyElement(t,i?".highlight":"")),r&&it(e,K2("span.monaco-keybinding-key-separator",void 0,r))}renderUnbound(e){it(e,this.createKeyElement(C("unbound","Unbound")))}createKeyElement(e,t=""){const i=K2("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(i),this.options.keybindingLabelBackground&&(i.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(i.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(i.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(i.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),i}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&Uo(e.firstPart,t.firstPart)&&Uo(e.chordPart,t.chordPart)}}const V$=new cf(()=>{const n=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:n,collatorIsNumeric:n.resolvedOptions().numeric}});function ike(n,e,t=!1){const i=n||"",r=e||"",s=V$.value.collator.compare(i,r);return V$.value.collatorIsNumeric&&s===0&&i!==r?i<r?-1:1:s}function nke(n,e,t){const i=n.toLowerCase(),r=e.toLowerCase(),s=rke(n,e,t);if(s)return s;const o=i.endsWith(t),a=r.endsWith(t);if(o!==a)return o?-1:1;const l=ike(i,r);return l!==0?l:i.localeCompare(r)}function rke(n,e,t){const i=n.toLowerCase(),r=e.toLowerCase(),s=i.startsWith(t),o=r.startsWith(t);if(s!==o)return s?-1:1;if(s&&o){if(i.length<r.length)return-1;if(i.length>r.length)return 1}return 0}var $5=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Z9=function(n,e){return function(t,i){e(t,i,n)}},X9;const jl=ft;class LQ{constructor(e,t,i){this.index=e,this.hasCheckbox=t,this._hidden=!1,this._init=new cf(()=>{const r=i.label??"",s=j_(r).text.trim(),o=i.ariaLabel||[r,this.saneDescription,this.saneDetail].map(a=>X_e(a)).filter(a=>!!a).join(", ");return{saneLabel:r,saneSortLabel:s,saneAriaLabel:o}}),this._saneDescription=i.description,this._saneTooltip=i.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get saneDescription(){return this._saneDescription}set saneDescription(e){this._saneDescription=e}get saneDetail(){return this._saneDetail}set saneDetail(e){this._saneDetail=e}get saneTooltip(){return this._saneTooltip}set saneTooltip(e){this._saneTooltip=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class Kr extends LQ{constructor(e,t,i,r,s,o){super(e,t,s),this.fireButtonTriggered=i,this._onChecked=r,this.item=s,this._separator=o,this._checked=!1,this.onChecked=t?Oe.map(Oe.filter(this._onChecked.event,a=>a.element===this),a=>a.checked):Oe.None,this._saneDetail=s.detail,this._labelHighlights=s.highlights?.label,this._descriptionHighlights=s.highlights?.description,this._detailHighlights=s.highlights?.detail}get separator(){return this._separator}set separator(e){this._separator=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}get checkboxDisabled(){return!!this.item.disabled}}var Uc;(function(n){n[n.NONE=0]="NONE",n[n.MOUSE_HOVER=1]="MOUSE_HOVER",n[n.ACTIVE_ITEM=2]="ACTIVE_ITEM"})(Uc||(Uc={}));class dg extends LQ{constructor(e,t,i){super(e,!1,i),this.fireSeparatorButtonTriggered=t,this.separator=i,this.children=new Array,this.focusInsideSeparator=Uc.NONE}}class ske{getHeight(e){return e instanceof dg?30:e.saneDetail?44:22}getTemplateId(e){return e instanceof Kr?Ik.ID:Nk.ID}}class oke{getWidgetAriaLabel(){return C("quickInput","Quick Input")}getAriaLabel(e){return e.separator?.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(!(!e.hasCheckbox||!(e instanceof Kr)))return{get value(){return e.checked},onDidChange:t=>e.onChecked(()=>t())}}}class TQ{constructor(e){this.hoverDelegate=e}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=new rt,t.toDisposeTemplate=new rt,t.entry=it(e,jl(".quick-input-list-entry"));const i=it(t.entry,jl("label.quick-input-list-label"));t.toDisposeTemplate.add(Er(i,Be.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=it(i,jl("input.quick-input-list-checkbox")),t.checkbox.type="checkbox";const r=it(i,jl(".quick-input-list-rows")),s=it(r,jl(".quick-input-list-row")),o=it(r,jl(".quick-input-list-row"));t.label=new H$(s,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=dA(t.label.element,jl(".quick-input-list-icon"));const a=it(s,jl(".quick-input-list-entry-keybinding"));t.keybinding=new MR(a,gl),t.toDisposeTemplate.add(t.keybinding);const l=it(o,jl(".quick-input-list-label-meta"));return t.detail=new H$(l,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=it(t.entry,jl(".quick-input-list-separator")),t.actionBar=new Tu(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.add(t.actionBar),t}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}disposeElement(e,t,i){i.toDisposeElement.clear(),i.actionBar.clear()}}var um;let Ik=(um=class extends TQ{constructor(e,t){super(e),this.themeService=t,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return X9.ID}renderTemplate(e){const t=super.renderTemplate(e);return t.toDisposeTemplate.add(Er(t.checkbox,Be.CHANGE,i=>{t.element.checked=t.checkbox.checked})),t}renderElement(e,t,i){const r=e.element;i.element=r,r.element=i.entry??void 0;const s=r.item;i.checkbox.checked=r.checked,i.toDisposeElement.add(r.onChecked(d=>i.checkbox.checked=d)),i.checkbox.disabled=r.checkboxDisabled;const{labelHighlights:o,descriptionHighlights:a,detailHighlights:l}=r;if(s.iconPath){const d=b5(this.themeService.getColorTheme().type)?s.iconPath.dark:s.iconPath.light??s.iconPath.dark,g=Ut.revive(d);i.icon.className="quick-input-list-icon",i.icon.style.backgroundImage=Bu(g)}else i.icon.style.backgroundImage="",i.icon.className=s.iconClass?`quick-input-list-icon ${s.iconClass}`:"";let c;!r.saneTooltip&&r.saneDescription&&(c={markdown:{value:r.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:r.saneDescription});const h={matches:o||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(h.extraClasses=s.iconClasses,h.italic=s.italic,h.strikethrough=s.strikethrough,i.entry.classList.remove("quick-input-list-separator-as-item"),i.label.setLabel(r.saneLabel,r.saneDescription,h),i.keybinding.set(s.keybinding),r.saneDetail){let d;r.saneTooltip||(d={markdown:{value:r.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:r.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(r.saneDetail,void 0,{matches:l,title:d,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";r.separator?.label?(i.separator.textContent=r.separator.label,i.separator.style.display="",this.addItemWithSeparator(r)):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!r.separator);const u=s.buttons;u&&u.length?(i.actionBar.push(u.map((d,g)=>Lv(d,`id-${g}`,()=>r.fireButtonTriggered({button:d,item:r.item}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){this.removeItemWithSeparator(e.element),super.disposeElement(e,t,i)}isItemWithSeparatorVisible(e){return this._itemsWithSeparatorsFrequency.has(e)}addItemWithSeparator(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}removeItemWithSeparator(e){const t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}},X9=um,um.ID="quickpickitem",um);Ik=X9=$5([Z9(1,Ml)],Ik);const CL=class CL extends TQ{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}get templateId(){return CL.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(e){return this._visibleSeparatorsFrequency.has(e)}renderTemplate(e){const t=super.renderTemplate(e);return t.checkbox.style.display="none",t}renderElement(e,t,i){const r=e.element;i.element=r,r.element=i.entry??void 0,r.element.classList.toggle("focus-inside",!!r.focusInsideSeparator);const s=r.separator,{labelHighlights:o,descriptionHighlights:a,detailHighlights:l}=r;i.icon.style.backgroundImage="",i.icon.className="";let c;!r.saneTooltip&&r.saneDescription&&(c={markdown:{value:r.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:r.saneDescription});const h={matches:o||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(i.entry.classList.add("quick-input-list-separator-as-item"),i.label.setLabel(r.saneLabel,r.saneDescription,h),r.saneDetail){let d;r.saneTooltip||(d={markdown:{value:r.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:r.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(r.saneDetail,void 0,{matches:l,title:d,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";i.separator.style.display="none",i.entry.classList.add("quick-input-list-separator-border");const u=s.buttons;u&&u.length?(i.actionBar.push(u.map((d,g)=>Lv(d,`id-${g}`,()=>r.fireSeparatorButtonTriggered({button:d,separator:r.separator}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions"),this.addSeparator(r)}disposeElement(e,t,i){this.removeSeparator(e.element),this.isSeparatorVisible(e.element)||e.element.element?.classList.remove("focus-inside"),super.disposeElement(e,t,i)}addSeparator(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}removeSeparator(e){const t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}};CL.ID="quickpickseparator";let Nk=CL,Vw=class extends xe{constructor(e,t,i,r,s,o){super(),this.parent=e,this.hoverDelegate=t,this.linkOpenerDelegate=i,this.accessibilityService=o,this._onKeyDown=new de,this._onLeave=new de,this.onLeave=this._onLeave.event,this._visibleCountObservable=fi("VisibleCount",0),this.onChangedVisibleCount=Oe.fromObservable(this._visibleCountObservable,this._store),this._allVisibleCheckedObservable=fi("AllVisibleChecked",!1),this.onChangedAllVisibleChecked=Oe.fromObservable(this._allVisibleCheckedObservable,this._store),this._checkedCountObservable=fi("CheckedCount",0),this.onChangedCheckedCount=Oe.fromObservable(this._checkedCountObservable,this._store),this._checkedElementsObservable=u9({equalsFn:_r},new Array),this.onChangedCheckedElements=Oe.fromObservable(this._checkedElementsObservable,this._store),this._onButtonTriggered=new de,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new de,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._elementChecked=new de,this._elementCheckedEventBufferer=new yy,this._hasCheckboxes=!1,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new rt),this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._shouldLoop=!0,this._container=it(this.parent,jl(".quick-input-list")),this._separatorRenderer=new Nk(t),this._itemRenderer=s.createInstance(Ik,t),this._tree=this._register(s.createInstance(Y9,"QuickInput",this._container,new ske,[this._itemRenderer,this._separatorRenderer],{filter:{filter(a){return a.hidden?0:a instanceof dg?2:1}},sorter:{compare:(a,l)=>{if(!this.sortByLabel||!this._lastQueryString)return 0;const c=this._lastQueryString.toLowerCase();return lke(a,l,c)}},accessibilityProvider:new oke,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:F1.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=r,this._registerListeners()}get onDidChangeFocus(){return Oe.map(this._tree.onDidChangeFocus,e=>e.elements.filter(t=>t instanceof Kr).map(t=>t.item),this._store)}get onDidChangeSelection(){return Oe.map(this._tree.onDidChangeSelection,e=>({items:e.elements.filter(t=>t instanceof Kr).map(t=>t.item),event:e.browserEvent}),this._store)}get displayed(){return this._container.style.display!=="none"}set displayed(e){this._container.style.display=e?"":"none"}get scrollTop(){return this._tree.scrollTop}set scrollTop(e){this._tree.scrollTop=e}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(e){this._tree.ariaLabel=e??""}set enabled(e){this._tree.getHTMLElement().style.pointerEvents=e?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}get shouldLoop(){return this._shouldLoop}set shouldLoop(e){this._shouldLoop=e}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnTreeModelChanged(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown(e=>{const t=new en(e);switch(t.keyCode){case 10:this.toggleCheckbox();break}this._onKeyDown.fire(t)}))}_registerOnContainerClick(){this._register(we(this._container,Be.CLICK,e=>{(e.x||e.y)&&this._onLeave.fire()}))}_registerOnMouseMiddleClick(){this._register(we(this._container,Be.AUXCLICK,e=>{e.button===1&&this._onLeave.fire()}))}_registerOnTreeModelChanged(){this._register(this._tree.onDidChangeModel(()=>{const e=this._itemElements.filter(t=>!t.hidden).length;this._visibleCountObservable.set(e,void 0),this._hasCheckboxes&&this._updateCheckedObservables()}))}_registerOnElementChecked(){this._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event,(e,t)=>t)(e=>this._updateCheckedObservables()))}_registerOnContextMenu(){this._register(this._tree.onContextMenu(e=>{e.element&&(e.browserEvent.preventDefault(),this._tree.setSelection([e.element]))}))}_registerHoverListeners(){const e=this._register(new nY(this.hoverDelegate.delay));this._register(this._tree.onMouseOver(async t=>{if(Wz(t.browserEvent.target)){e.cancel();return}if(!(!Wz(t.browserEvent.relatedTarget)&&Dr(t.browserEvent.relatedTarget,t.element?.element)))try{await e.trigger(async()=>{t.element instanceof Kr&&this.showHover(t.element)})}catch(i){if(!vy(i))throw i}})),this._register(this._tree.onMouseOut(t=>{Dr(t.browserEvent.relatedTarget,t.element?.element)||e.cancel()}))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus(e=>{const t=e.elements[0]?this._tree.getParentElement(e.elements[0]):null;for(const i of this._separatorRenderer.visibleSeparators){const r=i===t;!!(i.focusInsideSeparator&Uc.ACTIVE_ITEM)!==r&&(r?i.focusInsideSeparator|=Uc.ACTIVE_ITEM:i.focusInsideSeparator&=~Uc.ACTIVE_ITEM,this._tree.rerender(i))}})),this._register(this._tree.onMouseOver(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&Uc.MOUSE_HOVER)||(i.focusInsideSeparator|=Uc.MOUSE_HOVER,this._tree.rerender(i))}})),this._register(this._tree.onMouseOut(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&Uc.MOUSE_HOVER)&&(i.focusInsideSeparator&=~Uc.MOUSE_HOVER,this._tree.rerender(i))}}))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection(e=>{const t=e.elements.filter(i=>i instanceof Kr);t.length!==e.elements.length&&(e.elements.length===1&&e.elements[0]instanceof dg&&(this._tree.setFocus([e.elements[0].children[0]]),this._tree.reveal(e.elements[0],0)),this._tree.setSelection(t))}))}setAllVisibleChecked(e){this._elementCheckedEventBufferer.bufferEvents(()=>{this._itemElements.forEach(t=>{!t.hidden&&!t.checkboxDisabled&&(t.checked=e)})})}setElements(e){this._elementDisposable.clear(),this._lastQueryString=void 0,this._inputElements=e,this._hasCheckboxes=this.parent.classList.contains("show-checkboxes");let t;this._itemElements=new Array,this._elementTree=e.reduce((i,r,s)=>{let o;if(r.type==="separator"){if(!r.buttons)return i;t=new dg(s,a=>this._onSeparatorButtonTriggered.fire(a),r),o=t}else{const a=s>0?e[s-1]:void 0;let l;a&&a.type==="separator"&&!a.buttons&&(t=void 0,l=a);const c=new Kr(s,this._hasCheckboxes,h=>this._onButtonTriggered.fire(h),this._elementChecked,r,l);if(this._itemElements.push(c),t)return t.children.push(c),i;o=c}return i.push(o),i},new Array),this._setElementsToTree(this._elementTree),this.accessibilityService.isScreenReaderOptimized()&&setTimeout(()=>{const i=this._tree.getHTMLElement().querySelector(".monaco-list-row.focused"),r=i?.parentNode;if(i&&r){const s=i.nextSibling;i.remove(),r.insertBefore(i,s)}},0)}setFocusedElements(e){const t=e.map(i=>this._itemElements.find(r=>r.item===i)).filter(i=>!!i).filter(i=>!i.hidden);if(this._tree.setFocus(t),e.length>0){const i=this._tree.getFocus()[0];i&&this._tree.reveal(i)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){const t=e.map(i=>this._itemElements.find(r=>r.item===i)).filter(i=>!!i);this._tree.setSelection(t)}getCheckedElements(){return this._itemElements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){this._elementCheckedEventBufferer.bufferEvents(()=>{const t=new Set;for(const i of e)t.add(i);for(const i of this._itemElements)i.checked=t.has(i.item)})}focus(e){if(this._itemElements.length)switch(e===Gi.Second&&this._itemElements.length<2&&(e=Gi.First),e){case Gi.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,t=>t.element instanceof Kr);break;case Gi.Second:{this._tree.scrollTop=0;let t=!1;this._tree.focusFirst(void 0,i=>i.element instanceof Kr?t?!0:(t=!t,!1):!1);break}case Gi.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,t=>t.element instanceof Kr);break;case Gi.Next:{const t=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,r=>r.element instanceof Kr?(this._tree.reveal(r.element),!0):!1);const i=this._tree.getFocus();t.length&&t[0]===i[0]&&t[0]===this._itemElements[this._itemElements.length-1]&&this._onLeave.fire();break}case Gi.Previous:{const t=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,r=>{if(!(r.element instanceof Kr))return!1;const s=this._tree.getParentElement(r.element);return s===null||s.children[0]!==r.element?this._tree.reveal(r.element):this._tree.reveal(s),!0});const i=this._tree.getFocus();t.length&&t[0]===i[0]&&t[0]===this._itemElements[0]&&this._onLeave.fire();break}case Gi.NextPage:this._tree.focusNextPage(void 0,t=>t.element instanceof Kr?(this._tree.reveal(t.element),!0):!1);break;case Gi.PreviousPage:this._tree.focusPreviousPage(void 0,t=>{if(!(t.element instanceof Kr))return!1;const i=this._tree.getParentElement(t.element);return i===null||i.children[0]!==t.element?this._tree.reveal(t.element):this._tree.reveal(i),!0});break;case Gi.NextSeparator:{let t=!1;const i=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,s=>{if(t)return!0;if(s.element instanceof dg)t=!0,this._separatorRenderer.isSeparatorVisible(s.element)?this._tree.reveal(s.element.children[0]):this._tree.reveal(s.element,0);else if(s.element instanceof Kr){if(s.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(s.element)?this._tree.reveal(s.element):this._tree.reveal(s.element,0),!0;if(s.element===this._elementTree[0])return this._tree.reveal(s.element,0),!0}return!1});const r=this._tree.getFocus()[0];i===r&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,s=>s.element instanceof Kr));break}case Gi.PreviousSeparator:{let t,i=!!this._tree.getFocus()[0]?.separator;this._tree.focusPrevious(void 0,!0,void 0,r=>{if(r.element instanceof dg)i?t||(this._separatorRenderer.isSeparatorVisible(r.element)?this._tree.reveal(r.element):this._tree.reveal(r.element,0),t=r.element.children[0]):i=!0;else if(r.element instanceof Kr&&!t){if(r.element.separator)this._itemRenderer.isItemWithSeparatorVisible(r.element)?this._tree.reveal(r.element):this._tree.reveal(r.element,0),t=r.element;else if(r.element===this._elementTree[0])return this._tree.reveal(r.element,0),!0}return!1}),t&&this._tree.setFocus([t]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(e){this._tree.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:"",this._tree.layout()}filter(e){if(this._lastQueryString=e,!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this._itemElements.forEach(i=>{i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!1;const r=i.index&&this._inputElements[i.index-1];i.item&&(i.separator=r&&r.type==="separator"&&!r.buttons?r:void 0)});else{let i;this._itemElements.forEach(r=>{let s;this.matchOnLabelMode==="fuzzy"?s=this.matchOnLabel?l6(e,j_(r.saneLabel))??void 0:void 0:s=this.matchOnLabel?ake(t,j_(r.saneLabel))??void 0:void 0;const o=this.matchOnDescription?l6(e,j_(r.saneDescription||""))??void 0:void 0,a=this.matchOnDetail?l6(e,j_(r.saneDetail||""))??void 0:void 0;if(s||o||a?(r.labelHighlights=s,r.descriptionHighlights=o,r.detailHighlights=a,r.hidden=!1):(r.labelHighlights=void 0,r.descriptionHighlights=void 0,r.detailHighlights=void 0,r.hidden=r.item?!r.item.alwaysShow:!0),r.item?r.separator=void 0:r.separator&&(r.hidden=!0),!this.sortByLabel){const l=r.index&&this._inputElements[r.index-1]||void 0;l?.type==="separator"&&!l.buttons&&(i=l),i&&!r.hidden&&(r.separator=i,i=void 0)}})}return this._setElementsToTree(this._sortByLabel&&e?this._itemElements:this._elementTree),this._tree.layout(),!0}toggleCheckbox(){this._elementCheckedEventBufferer.bufferEvents(()=>{const e=this._tree.getFocus().filter(i=>i instanceof Kr),t=this._allVisibleChecked(e);for(const i of e)i.checkboxDisabled||(i.checked=!t)})}style(e){this._tree.style(e)}toggleHover(){const e=this._tree.getFocus()[0];if(!e?.saneTooltip||!(e instanceof Kr))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}this.showHover(e);const t=new rt;t.add(this._tree.onDidChangeFocus(i=>{i.elements[0]instanceof Kr&&this.showHover(i.elements[0])})),this._lastHover&&t.add(this._lastHover),this._elementDisposable.add(t)}_setElementsToTree(e){const t=new Array;for(const i of e)i instanceof dg?t.push({element:i,collapsible:!1,collapsed:!1,children:i.children.map(r=>({element:r,collapsible:!1,collapsed:!1}))}):t.push({element:i,collapsible:!1,collapsed:!1});this._tree.setChildren(null,t)}_allVisibleChecked(e,t=!0){for(let i=0,r=e.length;i<r;i++){const s=e[i];if(!s.hidden)if(s.checked)t=!0;else return!1}return t}_updateCheckedObservables(){pr(e=>{this._allVisibleCheckedObservable.set(this._allVisibleChecked(this._itemElements,!1),e);const t=this._itemElements.filter(i=>i.checked).length;this._checkedCountObservable.set(t,e),this._checkedElementsObservable.set(this.getCheckedElements(),e)})}showHover(e){this._lastHover&&!this._lastHover.isDisposed&&(this.hoverDelegate.onDidHideHover?.(),this._lastHover?.dispose()),!(!e.element||!e.saneTooltip)&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:t=>{this.linkOpenerDelegate(t)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}};$5([Mn],Vw.prototype,"onDidChangeFocus",null);$5([Mn],Vw.prototype,"onDidChangeSelection",null);Vw=$5([Z9(4,Ni),Z9(5,yc)],Vw);function ake(n,e){const{text:t,iconOffsets:i}=e;if(!i||i.length===0)return $$(n,t);const r=QL(t," "),s=t.length-r.length,o=$$(n,r);if(o)for(const a of o){const l=i[a.start+s]+s;a.start+=l,a.end+=l}return o}function $$(n,e){const t=e.toLowerCase().indexOf(n.toLowerCase());return t!==-1?[{start:t,end:t+n.length}]:null}function lke(n,e,t){const i=n.labelHighlights||[],r=e.labelHighlights||[];return i.length&&!r.length?-1:!i.length&&r.length?1:i.length===0&&r.length===0?0:nke(n.saneSortLabel,e.saneSortLabel,t)}const DQ={weight:200,when:Si.and(Si.equals(lQ,"quickPick"),TSe),metadata:{description:C("quickPick","Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")}};function Oo(n,e={}){Ly.registerCommandAndKeybindingRule({...DQ,...n,secondary:cke(n.primary,n.secondary??[],e)})}const Mk=hi?256:2048;function cke(n,e,t={}){return t.withAltMod&&e.push(512+n),t.withCtrlMod&&(e.push(Mk+n),t.withAltMod&&e.push(512+Mk+n)),t.withCmdMod&&hi&&(e.push(2048+n),t.withCtrlMod&&e.push(2304+n),t.withAltMod&&(e.push(2560+n),t.withCtrlMod&&e.push(2816+n))),e}function fa(n,e){return t=>{const i=t.get(O5).currentQuickInput;if(i)return e&&i.quickNavigate?i.focus(e):i.focus(n)}}Oo({id:"quickInput.pageNext",primary:12,handler:fa(Gi.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});Oo({id:"quickInput.pagePrevious",primary:11,handler:fa(Gi.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});Oo({id:"quickInput.first",primary:Mk+14,handler:fa(Gi.First)},{withAltMod:!0,withCmdMod:!0});Oo({id:"quickInput.last",primary:Mk+13,handler:fa(Gi.Last)},{withAltMod:!0,withCmdMod:!0});Oo({id:"quickInput.next",primary:18,handler:fa(Gi.Next)},{withCtrlMod:!0});Oo({id:"quickInput.previous",primary:16,handler:fa(Gi.Previous)},{withCtrlMod:!0});const j$=C("quickInput.nextSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator."),U$=C("quickInput.previousSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.");hi?(Oo({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:2066,handler:fa(Gi.NextSeparator,Gi.Next),metadata:{description:j$}}),Oo({id:"quickInput.nextSeparator",primary:2578,secondary:[2322],handler:fa(Gi.NextSeparator)},{withCtrlMod:!0}),Oo({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:2064,handler:fa(Gi.PreviousSeparator,Gi.Previous),metadata:{description:U$}}),Oo({id:"quickInput.previousSeparator",primary:2576,secondary:[2320],handler:fa(Gi.PreviousSeparator)},{withCtrlMod:!0})):(Oo({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:530,handler:fa(Gi.NextSeparator,Gi.Next),metadata:{description:j$}}),Oo({id:"quickInput.nextSeparator",primary:2578,handler:fa(Gi.NextSeparator)}),Oo({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:528,handler:fa(Gi.PreviousSeparator,Gi.Previous),metadata:{description:U$}}),Oo({id:"quickInput.previousSeparator",primary:2576,handler:fa(Gi.PreviousSeparator)}));Oo({id:"quickInput.acceptInBackground",when:Si.and(DQ.when,Si.or(zxe.negate(),ISe)),primary:17,weight:250,handler:n=>{n.get(O5).currentQuickInput?.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});var hke=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},N6=function(n,e){return function(t,i){e(t,i,n)}},Q9;const Mo=ft;var dm;let J9=(dm=class extends xe{get currentQuickInput(){return this.controller??void 0}get container(){return this._container}constructor(e,t,i,r){super(),this.options=e,this.layoutService=t,this.instantiationService=i,this.contextKeyService=r,this.enabled=!0,this.onDidAcceptEmitter=this._register(new de),this.onDidCustomEmitter=this._register(new de),this.onDidTriggerButtonEmitter=this._register(new de),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new de),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new de),this.onHide=this.onHideEmitter.event,this.inQuickInputContext=LSe.bindTo(this.contextKeyService),this.quickInputTypeContext=DSe.bindTo(this.contextKeyService),this.endOfQuickInputBoxContext=ESe.bindTo(this.contextKeyService),this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(Oe.runAndSubscribe(i5,({window:s,disposables:o})=>this.registerKeyModsListeners(s,o),{window:Vi,disposables:this._store})),this._register(xge(s=>{this.ui&&lt(this.ui.container)===s&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))}))}registerKeyModsListeners(e,t){const i=r=>{this.keyMods.ctrlCmd=r.ctrlKey||r.metaKey,this.keyMods.alt=r.altKey};for(const r of[Be.KEY_DOWN,Be.KEY_UP,Be.MOUSE_DOWN])t.add(we(e,r,i,!0))}getUI(e){if(this.ui)return e&&lt(this._container)!==lt(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const t=it(this._container,Mo(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";const i=xl(t),r=it(t,Mo(".quick-input-titlebar")),s=this._register(new Tu(r,{hoverDelegate:this.options.hoverDelegate}));s.domNode.classList.add("quick-input-left-action-bar");const o=it(r,Mo(".quick-input-title")),a=this._register(new Tu(r,{hoverDelegate:this.options.hoverDelegate}));a.domNode.classList.add("quick-input-right-action-bar");const l=it(t,Mo(".quick-input-header")),c=it(l,Mo("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",C("quickInput.checkAll","Toggle all checkboxes")),this._register(Er(c,Be.CHANGE,z=>{const Q=c.checked;q.setAllVisibleChecked(Q)})),this._register(we(c,Be.CLICK,z=>{(z.x||z.y)&&g.setFocus()}));const h=it(l,Mo(".quick-input-description")),u=it(l,Mo(".quick-input-and-message")),d=it(u,Mo(".quick-input-filter")),g=this._register(new USe(d,this.styles.inputBox,this.styles.toggle));g.setAttribute("aria-describedby",`${this.idPrefix}message`);const p=it(d,Mo(".quick-input-visible-count"));p.setAttribute("aria-live","polite"),p.setAttribute("aria-atomic","true");const b=new S$(p,{countFormat:C({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),_=it(d,Mo(".quick-input-count"));_.setAttribute("aria-live","polite");const w=new S$(_,{countFormat:C({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),y=this._register(new Tu(l,{hoverDelegate:this.options.hoverDelegate}));y.domNode.classList.add("quick-input-inline-action-bar");const k=it(l,Mo(".quick-input-action")),L=this._register(new V9(k,this.styles.button));L.label=C("ok","OK"),this._register(L.onDidClick(z=>{this.onDidAcceptEmitter.fire()}));const T=it(l,Mo(".quick-input-action")),N=this._register(new V9(T,{...this.styles.button,supportIcons:!0}));N.label=C("custom","Custom"),this._register(N.onDidClick(z=>{this.onDidCustomEmitter.fire()}));const D=it(u,Mo(`#${this.idPrefix}message.quick-input-message`)),O=this._register(new $9(t,this.styles.progressBar));O.getContainer().classList.add("quick-input-progress");const B=it(t,Mo(".quick-input-html-widget"));B.tabIndex=-1;const G=it(t,Mo(".quick-input-description")),H=this.idPrefix+"list",q=this._register(this.instantiationService.createInstance(Vw,t,this.options.hoverDelegate,this.options.linkOpenerDelegate,H));g.setAttribute("aria-controls",H),this._register(q.onDidChangeFocus(()=>{g.setAttribute("aria-activedescendant",q.getActiveDescendant()??"")})),this._register(q.onChangedAllVisibleChecked(z=>{c.checked=z})),this._register(q.onChangedVisibleCount(z=>{b.setCount(z)})),this._register(q.onChangedCheckedCount(z=>{w.setCount(z)})),this._register(q.onLeave(()=>{setTimeout(()=>{this.controller&&(g.setFocus(),this.controller instanceof Ck&&this.controller.canSelectMany&&q.clearFocus())},0)}));const X=vw(t);return this._register(X),this._register(we(t,Be.FOCUS,z=>{const Q=this.getUI();if(Dr(z.relatedTarget,Q.inputContainer)){const te=Q.inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==te&&this.endOfQuickInputBoxContext.set(te)}Dr(z.relatedTarget,Q.container)||(this.inQuickInputContext.set(!0),this.previousFocusElement=$r(z.relatedTarget)?z.relatedTarget:void 0)},!0)),this._register(X.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(B1.Blur),this.inQuickInputContext.set(!1),this.endOfQuickInputBoxContext.set(!1),this.previousFocusElement=void 0})),this._register(g.onKeyDown(z=>{const Q=this.getUI().inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==Q&&this.endOfQuickInputBoxContext.set(Q)})),this._register(we(t,Be.FOCUS,z=>{g.setFocus()})),this._register(Er(t,Be.KEY_DOWN,z=>{if(!Dr(z.target,B))switch(z.keyCode){case 3:ni.stop(z,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:ni.stop(z,!0),this.hide(B1.Gesture);break;case 2:if(!z.altKey&&!z.ctrlKey&&!z.metaKey){const Q=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(t.classList.contains("show-checkboxes")?Q.push("input"):Q.push("input[type=text]"),this.getUI().list.displayed&&Q.push(".monaco-list"),this.getUI().message&&Q.push(".quick-input-message a"),this.getUI().widget){if(Dr(z.target,this.getUI().widget))break;Q.push(".quick-input-html-widget")}const te=t.querySelectorAll(Q.join(", "));z.shiftKey&&z.target===te[0]?(ni.stop(z,!0),q.clearFocus()):!z.shiftKey&&Dr(z.target,te[te.length-1])&&(ni.stop(z,!0),te[0].focus())}break;case 10:z.ctrlKey&&(ni.stop(z,!0),this.getUI().list.toggleHover());break}})),this.ui={container:t,styleSheet:i,leftActionBar:s,titleBar:r,title:o,description1:G,description2:h,widget:B,rightActionBar:a,inlineActionBar:y,checkAll:c,inputContainer:u,filterContainer:d,inputBox:g,visibleCountContainer:p,visibleCount:b,countContainer:_,count:w,okContainer:k,ok:L,message:D,customButtonContainer:T,customButton:N,list:q,progressBar:O,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:z=>this.show(z),hide:()=>this.hide(),setVisibilities:z=>this.setVisibilities(z),setEnabled:z=>this.setEnabled(z),setContextKey:z=>this.options.setContextKey(z),linkOpenerDelegate:z=>this.options.linkOpenerDelegate(z)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this._container=e,it(this._container,this.ui.container))}pick(e,t={},i=yl.None){return new Promise((r,s)=>{let o=h=>{o=r,t.onKeyMods?.(a.keyMods),r(h)};if(i.isCancellationRequested){o(void 0);return}const a=this.createQuickPick({useSeparators:!0});let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)o(a.selectedItems.slice()),a.hide();else{const h=a.activeItems[0];h&&(o(h),a.hide())}}),a.onDidChangeActive(h=>{const u=h[0];u&&t.onDidFocus&&t.onDidFocus(u)}),a.onDidChangeSelection(h=>{if(!a.canSelectMany){const u=h[0];u&&(o(u),a.hide())}}),a.onDidTriggerItemButton(h=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...h,removeItem:()=>{const u=a.items.indexOf(h.item);if(u!==-1){const d=a.items.slice(),g=d.splice(u,1),p=a.activeItems.filter(_=>_!==g[0]),b=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=d,p&&(a.activeItems=p),a.keepScrollPosition=b}}})),a.onDidTriggerSeparatorButton(h=>t.onDidTriggerSeparatorButton?.(h)),a.onDidChangeValue(h=>{l&&!h&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),i.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{is(c),o(void 0)})];a.title=t.title,t.value&&(a.value=t.value),a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([h,u])=>{l=u,a.busy=!1,a.items=h,a.canSelectMany&&(a.selectedItems=h.filter(d=>d.type!=="separator"&&d.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,h=>{s(h),a.hide()})})}createQuickPick(e={useSeparators:!1}){const t=this.getUI(!0);return new Ck(t)}createInputBox(){const e=this.getUI(!0);return new NSe(e)}show(e){const t=this.getUI(!0);this.onShowEmitter.fire();const i=this.controller;this.controller=e,i?.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",Ks(t.widget),t.rightActionBar.clear(),t.inlineActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(rr.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),Ks(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const r=this.options.backKeybindingLabel();z9.tooltip=r?C("quickInput.backWithKeybinding","Back ({0})",r):C("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus(),this.quickInputTypeContext.set(e.type)}isVisible(){return!!this.ui&&this.ui.container.style.display!=="none"}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.displayed=!!e.list,t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){const t=this.controller;if(!t)return;t.willHide(e);const i=this.ui?.container,r=i&&!wY(i);if(this.controller=null,this.onHideEmitter.fire(),i&&(i.style.display="none"),!r){let s=this.previousFocusElement;for(;s&&!s.offsetParent;)s=s.parentElement??void 0;s?.offsetParent?(s.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}t.didHide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,Q9.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,widgetBorder:r,widgetShadow:s}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=i??"",this.ui.container.style.border=r?`1px solid ${r}`:"",this.ui.container.style.boxShadow=s?`0 0 8px 2px ${s}`:"",this.ui.list.style(this.styles.list);const o=[];this.styles.pickerGroup.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const a=o.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}},Q9=dm,dm.MAX_WIDTH=600,dm);J9=Q9=hke([N6(1,Ef),N6(2,Ni),N6(3,Ei)],J9);var uke=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},C_=function(n,e){return function(t,i){e(t,i,n)}};let eI=class extends z0e{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get currentQuickInput(){return this.controller.currentQuickInput}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(W9))),this._quickAccess}constructor(e,t,i,r,s){super(i),this.instantiationService=e,this.contextKeyService=t,this.layoutService=r,this.configurationService=s,this._onShow=this._register(new de),this._onHide=this._register(new de),this.contexts=new Map}createController(e=this.layoutService,t){const i={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:s=>this.setContextKey(s),linkOpenerDelegate:s=>{this.instantiationService.invokeFunction(o=>{o.get(Py).open(s,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(H9))},r=this._register(this.instantiationService.createInstance(J9,{...i,...t}));return r.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer(s=>{lt(e.activeContainer)===lt(r.container)&&r.layout(s,e.activeContainerOffset.quickPickTop)})),this._register(e.onDidChangeActiveContainer(()=>{r.isVisible()||r.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)})),this._register(r.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(r.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),r}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new st(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t?.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t,i=yl.None){return this.controller.pick(e,t,i)}createQuickPick(e={useSeparators:!1}){return this.controller.createQuickPick(e)}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:Fe(oV),quickInputForeground:Fe(t_e),quickInputTitleBackground:Fe(i_e),widgetBorder:Fe(W1e),widgetShadow:Fe(My)},inputBox:LX,toggle:kX,countBadge:Hye,button:Fye,progressBar:Wye,keybindingLabel:Bye,list:Wy({listBackground:oV,listFocusBackground:$8,listFocusForeground:V8,listInactiveFocusForeground:V8,listInactiveSelectionIconForeground:VZ,listInactiveFocusBackground:$8,listFocusOutline:Hn,listInactiveFocusOutline:Hn}),pickerGroup:{pickerGroupBorder:Fe(n_e),pickerGroupForeground:Fe(HZ)}}}};eI=uke([C_(0,Ni),C_(1,Ei),C_(2,Ml),C_(3,Ef),C_(4,Nn)],eI);var EQ=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Ng=function(n,e){return function(t,i){e(t,i,n)}};let tI=class extends eI{constructor(e,t,i,r,s,o){super(t,i,r,new T8(e.getContainerDomNode(),s),o),this.host=void 0;const a=$w.get(e);if(a){const l=a.widget;this.host={_serviceBrand:void 0,get mainContainer(){return l.getDomNode()},getContainer(){return l.getDomNode()},whenContainerStylesLoaded(){},get containers(){return[l.getDomNode()]},get activeContainer(){return l.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return Oe.map(e.onDidLayoutChange,c=>({container:l.getDomNode(),dimension:c}))},get onDidChangeActiveContainer(){return Oe.None},get onDidAddContainer(){return Oe.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};tI=EQ([Ng(1,Ni),Ng(2,Ei),Ng(3,Ml),Ng(4,vr),Ng(5,Nn)],tI);let iI=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const i=t=this.instantiationService.createInstance(tI,e);this.mapEditorToService.set(e,t),C1(e.onDidDispose)(()=>{i.dispose(),this.mapEditorToService.delete(e)})}return t}get currentQuickInput(){return this.activeService.currentQuickInput}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t,i=yl.None){return this.activeService.pick(e,t,i)}createQuickPick(e={useSeparators:!1}){return this.activeService.createQuickPick(e)}createInputBox(){return this.activeService.createInputBox()}};iI=EQ([Ng(0,Ni),Ng(1,vr)],iI);const SL=class SL{static get(e){return e.getContribution(SL.ID)}constructor(e){this.editor=e,this.widget=new nI(this.editor)}dispose(){this.widget.dispose()}};SL.ID="editor.controller.quickInput";let $w=SL;const xL=class xL{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return xL.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}};xL.ID="editor.contrib.quickInputWidget";let nI=xL;NY($w.ID,$w,4);class dke{constructor(e,t,i,r,s){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=i,this.foreground=r,this.background=s}}function fke(n){if(!n||!Array.isArray(n))return[];const e=[];let t=0;for(let i=0,r=n.length;i<r;i++){const s=n[i];let o=-1;if(typeof s.fontStyle=="string"){o=0;const c=s.fontStyle.split(" ");for(let h=0,u=c.length;h<u;h++)switch(c[h]){case"italic":o=o|1;break;case"bold":o=o|2;break;case"underline":o=o|4;break;case"strikethrough":o=o|8;break}}let a=null;typeof s.foreground=="string"&&(a=s.foreground);let l=null;typeof s.background=="string"&&(l=s.background),e[t++]=new dke(s.token||"",i,o,a,l)}return e}function gke(n,e){n.sort((h,u)=>{const d=vke(h.token,u.token);return d!==0?d:h.index-u.index});let t=0,i="000000",r="ffffff";for(;n.length>=1&&n[0].token==="";){const h=n.shift();h.fontStyle!==-1&&(t=h.fontStyle),h.foreground!==null&&(i=h.foreground),h.background!==null&&(r=h.background)}const s=new pke;for(const h of e)s.getId(h);const o=s.getId(i),a=s.getId(r),l=new AR(t,o,a),c=new RR(l);for(let h=0,u=n.length;h<u;h++){const d=n[h];c.insert(d.token,d.fontStyle,s.getId(d.foreground),s.getId(d.background))}return new IQ(s,c)}const mke=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class pke{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(mke);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let i=this._color2id.get(e);return i||(i=++this._lastColorId,this._color2id.set(e,i),this._id2color[i]=Me.fromHex("#"+e),i)}getColorMap(){return this._id2color.slice(0)}}class IQ{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(fke(e),t)}static createFromParsedTokenTheme(e,t){return gke(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let i=this._cache.get(t);if(typeof i>"u"){const r=this._match(t),s=_ke(t);i=(r.metadata|s<<8)>>>0,this._cache.set(t,i)}return(i|e<<0)>>>0}}const bke=/\b(comment|string|regex|regexp)\b/;function _ke(n){const e=n.match(bke);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function vke(n,e){return n<e?-1:n>e?1:0}class AR{constructor(e,t,i){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new AR(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,i){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),i!==0&&(this._background=i),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class RR{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let i,r;t===-1?(i=e,r=""):(i=e.substring(0,t),r=e.substring(t+1));const s=this._children.get(i);return typeof s<"u"?s.match(r):this._mainRule}insert(e,t,i,r){if(e===""){this._mainRule.acceptOverwrite(t,i,r);return}const s=e.indexOf(".");let o,a;s===-1?(o=e,a=""):(o=e.substring(0,s),a=e.substring(s+1));let l=this._children.get(o);typeof l>"u"&&(l=new RR(this._mainRule.clone()),this._children.set(o,l)),l.insert(a,t,i,r)}}function wke(n){const e=[];for(let t=1,i=n.length;t<i;t++){const r=n[t];e[t]=`.mtk${t} { color: ${r}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}const yke={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[gc]:"#FFFFFE",[Ny]:"#000000",[DZ]:"#E5EBF1",[Hy]:"#D3D3D3",[Vy]:"#939393",[EZ]:"#ADD6FF4D"}},Cke={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[gc]:"#1E1E1E",[Ny]:"#D4D4D4",[DZ]:"#3A3D41",[Hy]:"#404040",[Vy]:"#707070",[EZ]:"#ADD6FF26"}},Ske={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[gc]:"#000000",[Ny]:"#FFFFFF",[Hy]:"#FFFFFF",[Vy]:"#FFFFFF"}},xke={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[gc]:"#FFFFFF",[Ny]:"#292929",[Hy]:"#292929",[Vy]:"#292929"}},kke={IconContribution:"base.contributions.icons"};var q$;(function(n){function e(t,i){let r=t.defaults;for(;gi.isThemeIcon(r);){const s=ip.getIcon(r.id);if(!s)return;r=s.defaults}return r}n.getDefinition=e})(q$||(q$={}));var G$;(function(n){function e(i){return{weight:i.weight,style:i.style,src:i.src.map(r=>({format:r.format,location:r.location.toString()}))}}n.toJSONObject=e;function t(i){const r=s=>Ca(s)?s:void 0;if(i&&Array.isArray(i.src)&&i.src.every(s=>Ca(s.format)&&Ca(s.location)))return{weight:r(i.weight),style:r(i.style),src:i.src.map(s=>({format:s.format,location:Ut.parse(s.location)}))}}n.fromJSONObject=t})(G$||(G$={}));class Lke{constructor(){this._onDidChange=new de,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:C("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:C("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${gi.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,r){const s=this.iconsById[e];if(s){if(i&&!s.description){s.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=i),this._onDidChange.fire()}return s}const o={id:e,description:i,defaults:t,deprecationMessage:r};this.iconsById[e]=o;const a={$ref:"#/definitions/icons"};return r&&(a.deprecationMessage=r),i&&(a.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(s,o)=>s.id.localeCompare(o.id),t=s=>{for(;gi.isThemeIcon(s.defaults);)s=this.iconsById[s.defaults.id];return`codicon codicon-${s?s.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const r=Object.keys(this.iconsById).map(s=>this.iconsById[s]);for(const s of r.filter(o=>!!o.description).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|${gi.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const s of r.filter(o=>!gi.isThemeIcon(o.defaults)).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|`);return i.join(`
`)}}const ip=new Lke;Ur.add(kke.IconContribution,ip);function Mf(n,e,t,i){return ip.registerIcon(n,e,t,i)}function NQ(){return ip}function Tke(){const n=$K();for(const e in n){const t="\\"+n[e].toString(16);ip.registerIcon(e,{fontCharacter:t})}}Tke();const MQ="vscode://schemas/icons",AQ=Ur.as(p5.JSONContribution);AQ.registerSchema(MQ,ip.getIconSchema());const K$=new Gs(()=>AQ.notifySchemaChanged(MQ),200);ip.onDidChange(()=>{K$.isScheduled()||K$.schedule()});Mf("widget-close",Je.close,C("widgetClose","Icon for the close action in widgets."));Mf("goto-previous-location",Je.arrowUp,C("previousChangeIcon","Icon for goto previous editor location."));Mf("goto-next-location",Je.arrowDown,C("nextChangeIcon","Icon for goto next editor location."));gi.modify(Je.sync,"spin");gi.modify(Je.loading,"spin");function Dke(n){const e=new rt,t=e.add(new de),i=NQ();return e.add(i.onDidChange(()=>t.fire())),n&&e.add(n.onDidProductIconThemeChange(()=>t.fire())),{dispose:()=>e.dispose(),onDidChange:t.event,getCSS(){const r=n?n.getProductIconTheme():new RQ,s={},o=[],a=[];for(const l of i.getIcons()){const c=r.getIcon(l);if(!c)continue;const h=c.font,u=`--vscode-icon-${l.id}-font-family`,d=`--vscode-icon-${l.id}-content`;h?(s[h.id]=h.definition,a.push(`${u}: ${VT(h.id)};`,`${d}: '${c.fontCharacter}';`),o.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; font-family: ${VT(h.id)}; }`)):(a.push(`${d}: '${c.fontCharacter}'; ${u}: 'codicon';`),o.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; }`))}for(const l in s){const c=s[l],h=c.weight?`font-weight: ${c.weight};`:"",u=c.style?`font-style: ${c.style};`:"",d=c.src.map(g=>`${Bu(g.location)} format('${g.format}')`).join(", ");o.push(`@font-face { src: ${d}; font-family: ${VT(l)};${h}${u} font-display: block; }`)}return o.push(`:root { ${a.join(" ")} }`),o.join(`
`)}}}class RQ{getIcon(e){const t=NQ();let i=e.defaults;for(;gi.isThemeIcon(i);){const r=t.getIcon(i.id);if(!r)return;i=r.defaults}return i}}const Wd="vs",Tv="vs-dark",Q0="hc-black",J0="hc-light",PQ=Ur.as(yZ.ColorContribution),Eke=Ur.as(rZ.ThemingContribution);class OQ{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const i=t.base;e.length>0?(XS(e)?this.id=e:this.id=i+" "+e,this.themeName=e):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,Me.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=rI(this.themeData.base);for(const i in t.colors)e.has(i)||e.set(i,Me.fromHex(t.colors[i]))}this.colors=e}return this.colors}getColor(e,t){const i=this.getColors().get(e);if(i)return i;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=PQ.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case Wd:return Ga.LIGHT;case Q0:return Ga.HIGH_CONTRAST_DARK;case J0:return Ga.HIGH_CONTRAST_LIGHT;default:return Ga.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const s=rI(this.themeData.base);e=s.rules,s.encodedTokensColors&&(t=s.encodedTokensColors)}const i=this.themeData.colors["editor.foreground"],r=this.themeData.colors["editor.background"];if(i||r){const s={token:""};i&&(s.foreground=i),r&&(s.background=r),e.push(s)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=IQ.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,i){const s=this.tokenTheme._match([e].concat(t).join(".")).metadata,o=Jl.getForeground(s),a=Jl.getFontStyle(s);return{foreground:o,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4),strikethrough:!!(a&8)}}}function XS(n){return n===Wd||n===Tv||n===Q0||n===J0}function rI(n){switch(n){case Wd:return yke;case Tv:return Cke;case Q0:return Ske;case J0:return xke}}function Y2(n){const e=rI(n);return new OQ(n,e)}class Ike extends xe{constructor(){super(),this._onColorThemeChange=this._register(new de),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new de),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new RQ,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(Wd,Y2(Wd)),this._knownThemes.set(Tv,Y2(Tv)),this._knownThemes.set(Q0,Y2(Q0)),this._knownThemes.set(J0,Y2(J0));const e=this._register(Dke(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(Wd),this._onOSSchemeChanged(),this._register(e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),QK(Vi,"(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return i8(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=xl(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),xe.None}_registerShadowDomContainer(e){const t=xl(e,i=>{i.className="monaco-colors",i.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let i=0;i<this._styleElements.length;i++)if(this._styleElements[i]===t){this._styleElements.splice(i,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!XS(t.base)&&!XS(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new OQ(e,t)),XS(e)&&this._knownThemes.forEach(i=>{i.base===e&&i.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(Wd),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=Vi.matchMedia("(forced-colors: active)").matches;if(e!==V0(this._theme.type)){let t;b5(this._theme.type)?t=e?Q0:Tv:t=e?J0:Wd,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},i={addRule:o=>{t[o]||(e.push(o),t[o]=!0)}};Eke.getThemingParticipants().forEach(o=>o(this._theme,i,this._environment));const r=[];for(const o of PQ.getColors()){const a=this._theme.getColor(o.id,!0);a&&r.push(`${DA(o.id)}: ${a.toString()};`)}i.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${r.join(`
`)} }`);const s=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(wke(s)),this._themeCSS=e.join(`
`),this._updateCSS(),qn.setColorMap(s),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const Al=ai("themeService");var Nke=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},M6=function(n,e){return function(t,i){e(t,i,n)}};let sI=class extends xe{constructor(e,t,i){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=i,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new de,this._onDidChangeReducedMotion=new de,this._onDidChangeLinkUnderline=new de,this._accessibilityModeEnabledContext=Bve.bindTo(this._contextKeyService);const r=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("editor.accessibilitySupport")&&(r(),this._onDidChangeScreenReaderOptimized.fire()),o.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),r(),this._register(this.onDidChangeScreenReaderOptimized(()=>r()));const s=Vi.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=s.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._linkUnderlinesEnabled=this._configurationService.getValue("accessibility.underlineLinks"),this.initReducedMotionListeners(s),this.initLinkUnderlineListeners()}initReducedMotionListeners(e){this._register(we(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=()=>{const i=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",i),this._layoutService.mainContainer.classList.toggle("enable-motion",!i)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}initLinkUnderlineListeners(){this._register(this._configurationService.onDidChangeConfiguration(t=>{if(t.affectsConfiguration("accessibility.underlineLinks")){const i=this._configurationService.getValue("accessibility.underlineLinks");this._linkUnderlinesEnabled=i,this._onDidChangeLinkUnderline.fire()}}));const e=()=>{const t=this._linkUnderlinesEnabled;this._layoutService.mainContainer.classList.toggle("underline-links",t)};e(),this._register(this.onDidChangeLinkUnderlines(()=>e()))}onDidChangeLinkUnderlines(e){return this._onDidChangeLinkUnderline.event(e)}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};sI=Nke([M6(0,Ei),M6(1,Ef),M6(2,Nn)],sI);var j5=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},rh=function(n,e){return function(t,i){e(t,i,n)}},Qp,Y_;let oI=class{constructor(e,t,i){this._commandService=e,this._keybindingService=t,this._hiddenStates=new aI(i)}createMenu(e,t,i){return new Ak(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t)}getMenuActions(e,t,i){const r=new Ak(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t),s=r.getActions(i);return r.dispose(),s}resetHiddenStates(e){this._hiddenStates.reset(e)}};oI=j5([rh(0,Ta),rh(1,ns),rh(2,A5)],oI);var fm;let aI=(fm=class{constructor(e){this._storageService=e,this._disposables=new rt,this._onDidChange=new de,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(Qp._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,Qp._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const t=e.get(Qp._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){return this._hiddenByDefaultCache.get(`${e.id}/${t}`)??!1}setDefaultState(e,t,i){this._hiddenByDefaultCache.set(`${e.id}/${t}`,i)}isHidden(e,t){const i=this._isHiddenByDefault(e,t),r=this._data[e.id]?.includes(t)??!1;return i?!r:r}updateHidden(e,t,i){this._isHiddenByDefault(e,t)&&(i=!i);const s=this._data[e.id];if(i)s?s.indexOf(t)<0&&s.push(t):this._data[e.id]=[t];else if(s){const o=s.indexOf(t);o>=0&&cue(s,o),s.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(Qp._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}},Qp=fm,fm._key="menu.hiddenCommands",fm);aI=Qp=j5([rh(0,A5)],aI);class Dv{constructor(e,t){this._id=e,this._collectContextKeysForSubmenus=t,this._menuGroups=[],this._allMenuIds=new Set,this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get allMenuIds(){return this._allMenuIds}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=this._sort(k1.getMenuItems(this._id));let t;for(const i of e){const r=i.group||"";(!t||t[0]!==r)&&(t=[r,[]],this._menuGroups.push(t)),t[1].push(i),this._collectContextKeysAndSubmenuIds(i)}this._allMenuIds.add(this._id)}_sort(e){return e}_collectContextKeysAndSubmenuIds(e){if(Dv._fillInKbExprKeys(e.when,this._structureContextKeys),fv(e)){if(e.command.precondition&&Dv._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;Dv._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(k1.getMenuItems(e.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(e.submenu))}static _fillInKbExprKeys(e,t){if(e)for(const i of e.keys())t.add(i)}}let lI=Y_=class extends Dv{constructor(e,t,i,r,s,o){super(e,i),this._hiddenStates=t,this._commandService=r,this._keybindingService=s,this._contextKeyService=o,this.refresh()}createActionGroups(e){const t=[];for(const i of this._menuGroups){const[r,s]=i;let o;for(const a of s)if(this._contextKeyService.contextMatchesRules(a.when)){const l=fv(a);l&&this._hiddenStates.setDefaultState(this._id,a.command.id,!!a.isHiddenByDefault);const c=Mke(this._id,l?a.command:a,this._hiddenStates);if(l){const h=BQ(this._commandService,this._keybindingService,a.command.id,a.when);(o??=[]).push(new ku(a.command,a.alt,e,c,h,this._contextKeyService,this._commandService))}else{const h=new Y_(a.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(e),u=Ps.join(...h.map(d=>d[1]));u.length>0&&(o??=[]).push(new gv(a,c,u))}}o&&o.length>0&&t.push([r,o])}return t}_sort(e){return e.sort(Y_._compareMenuItems)}static _compareMenuItems(e,t){const i=e.group,r=t.group;if(i!==r){if(i){if(!r)return-1}else return 1;if(i==="navigation")return-1;if(r==="navigation")return 1;const a=i.localeCompare(r);if(a!==0)return a}const s=e.order||0,o=t.order||0;return s<o?-1:s>o?1:Y_._compareTitles(fv(e)?e.command.title:e.title,fv(t)?t.command.title:t.title)}static _compareTitles(e,t){const i=typeof e=="string"?e:e.original,r=typeof t=="string"?t:t.original;return i.localeCompare(r)}};lI=Y_=j5([rh(3,Ta),rh(4,ns),rh(5,Ei)],lI);let Ak=class{constructor(e,t,i,r,s,o){this._disposables=new rt,this._menuInfo=new lI(e,t,i.emitEventsForSubmenuChanges,r,s,o);const a=new Gs(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},i.eventDebounceDelay);this._disposables.add(a),this._disposables.add(k1.onDidChangeMenu(u=>{for(const d of this._menuInfo.allMenuIds)if(u.has(d)){a.schedule();break}}));const l=this._disposables.add(new rt),c=u=>{let d=!1,g=!1,p=!1;for(const b of u)if(d=d||b.isStructuralChange,g=g||b.isEnablementChange,p=p||b.isToggleChange,d&&g&&p)break;return{menu:this,isStructuralChange:d,isEnablementChange:g,isToggleChange:p}},h=()=>{l.add(o.onDidChangeContext(u=>{const d=u.affectsSome(this._menuInfo.structureContextKeys),g=u.affectsSome(this._menuInfo.preconditionContextKeys),p=u.affectsSome(this._menuInfo.toggledContextKeys);(d||g||p)&&this._onDidChange.fire({menu:this,isStructuralChange:d,isEnablementChange:g,isToggleChange:p})})),l.add(t.onDidChange(u=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new AK({onWillAddFirstListener:h,onDidRemoveLastListener:l.clear.bind(l),delay:i.eventDebounceDelay,merge:c}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};Ak=j5([rh(3,Ta),rh(4,ns),rh(5,Ei)],Ak);function Mke(n,e,t){const i=wme(e)?e.submenu.id:e.id,r=typeof e.title=="string"?e.title:e.title.value,s=F0({id:`hide/${n.id}/${i}`,label:C("hide.label","Hide '{0}'",r),run(){t.updateHidden(n,i,!0)}}),o=F0({id:`toggle/${n.id}/${i}`,label:r,get checked(){return!t.isHidden(n,i)},run(){t.updateHidden(n,i,!!this.checked)}});return{hide:s,toggle:o,get isHidden(){return!o.checked}}}function BQ(n,e,t,i=void 0,r=!0){return F0({id:`configureKeybinding/${t}`,label:C("configure keybinding","Configure Keybinding"),enabled:r,run(){const o=!!!e.lookupKeybinding(t)&&i?i.serialize():void 0;n.executeCommand("workbench.action.openGlobalKeybindings",`@command:${t}`+(o?` +when:${o}`:""))}})}var Ake=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Y$=function(n,e){return function(t,i){e(t,i,n)}},cI;const Z$="application/vnd.code.resources";var gm;let hI=(gm=class extends xe{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(uf||JK)&&this.installWebKitWriteTextWorkaround(),this._register(Oe.runAndSubscribe(i5,({window:i,disposables:r})=>{r.add(we(i.document,"copy",()=>this.clearResourcesState()))},{window:Vi,disposables:this._store}))}installWebKitWriteTextWorkaround(){const e=()=>{const t=new sY;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,z_().navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(async i=>{(!(i instanceof Error)||i.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(i)})};this._register(Oe.runAndSubscribe(this.layoutService.onDidAddContainer,({container:t,disposables:i})=>{i.add(we(t,"click",e)),i.add(we(t,"keydown",e))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.clearResourcesState(),t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return await z_().navigator.clipboard.writeText(e)}catch(i){console.error(i)}this.fallbackWriteText(e)}fallbackWriteText(e){const t=hA(),i=t.activeElement,r=t.body.appendChild(ft("textarea",{"aria-hidden":!0}));r.style.height="1px",r.style.width="1px",r.style.position="absolute",r.value=e,r.focus(),r.select(),t.execCommand("copy"),$r(i)&&i.focus(),r.remove()}async readText(e){if(e)return this.mapTextToType.get(e)||"";try{return await z_().navigator.clipboard.readText()}catch(t){console.error(t)}return""}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}async readResources(){try{const t=await z_().navigator.clipboard.read();for(const i of t)if(i.types.includes(`web ${Z$}`)){const r=await i.getType(`web ${Z$}`);return JSON.parse(await r.text()).map(o=>Ut.from(o))}}catch{}const e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResourcesState(),this.resources}async computeResourcesStateHash(){if(this.resources.length===0)return;const e=await this.readText();return mY(e.substring(0,cI.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearInternalState(){this.clearResourcesState()}clearResourcesState(){this.resources=[],this.resourcesStateHash=void 0}},cI=gm,gm.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3,gm);hI=cI=Ake([Y$(0,Ef),Y$(1,vc)],hI);const PR=ai("clipboardService");var Rke=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Pke=function(n,e){return function(t,i){e(t,i,n)}};const Ev="data-keybinding-context";class OR{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return{...this._value}}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}}const kL=class kL extends OR{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}};kL.INSTANCE=new kL;let W1=kL;const iw=class iw extends OR{constructor(e,t,i){super(e,null),this._configurationService=t,this._values=_v.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(r=>{if(r.source===7){const s=Array.from(this._values,([o])=>o);this._values.clear(),i.fire(new Q$(s))}else{const s=[];for(const o of r.affectedKeys){const a=`config.${o}`,l=this._values.findSuperstr(a);l!==void 0&&(s.push(...wi.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(s.push(a),this._values.delete(a))}i.fire(new Q$(s))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(iw._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(iw._keyPrefix.length),i=this._configurationService.getValue(t);let r;switch(typeof i){case"number":case"boolean":case"string":r=i;break;default:Array.isArray(i)?r=JSON.stringify(i):r=i}return this._values.set(e,r),r}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}};iw._keyPrefix="config.";let uI=iw;class Oke{constructor(e,t,i){this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class X${constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class Q${constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}class Bke{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}function Fke(n,e){return n.allKeysContainedIn(new Set(Object.keys(e)))}class FQ extends xe{constructor(e){super(),this._onDidChangeContext=this._register(new gw({merge:t=>new Bke(t)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Oke(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Wke(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const i=this.getContextValuesContainer(this._myContextId);i&&i.setValue(e,t)&&this._onDidChangeContext.fire(new X$(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new X$(e))}getContext(e){return this._isDisposed?W1.INSTANCE:this.getContextValuesContainer(zke(e))}dispose(){super.dispose(),this._isDisposed=!0}}let dI=class extends FQ{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0;const t=this._register(new uI(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t)}getContextValuesContainer(e){return this._isDisposed?W1.INSTANCE:this._contexts.get(e)||W1.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new OR(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};dI=Rke([Pke(0,Nn)],dI);class Wke extends FQ{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new Pu),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(Ev)){let i="";this._domNode.classList&&(i=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${i?": "+i:""}`)}this._domNode.setAttribute(Ev,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const i=this._parent.getContextValuesContainer(this._myContextId).value;Fke(e,i)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(Ev),super.dispose())}getContextValuesContainer(e){return this._isDisposed?W1.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function zke(n){for(;n;){if(n.hasAttribute(Ev)){const e=n.getAttribute(Ev);return e?parseInt(e,10):NaN}n=n.parentElement}return 0}function Hke(n,e,t){n.get(Ei).createKey(String(e),Vke(t))}function Vke(n){return vK(n,e=>{if(typeof e=="object"&&e.$mid===1)return Ut.revive(e).toString();if(e instanceof Ut)return e.toString()})}So.registerCommand("_setContext",Hke);So.registerCommand({id:"getContextKeyInfo",handler(){return[...st.all()].sort((n,e)=>n.key.localeCompare(e.key))},metadata:{description:C("getContextKeyInfo","A command that returns information about context keys"),args:[]}});So.registerCommand("_generateContextKeyInfo",function(){const n=[],e=new Set;for(const t of st.all())e.has(t.key)||(e.add(t.key),n.push(t));n.sort((t,i)=>t.key.localeCompare(i.key)),console.log(JSON.stringify(n,void 0,2))});let $ke=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}};class J${constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),r=this.lookupOrInsertNode(t);i.outgoing.set(r.key,r),r.incoming.set(i.key,i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new $ke(t,e),this._nodes.set(t,i)),i}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,i]of this._nodes)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const i=new Set([e]),r=this._findCycle(t,i);if(r)return r}}_findCycle(e,t){for(const[i,r]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const s=this._findCycle(r,t);if(s)return s;t.delete(i)}}}class hb{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}get(e){return this._entries.get(e)}}const jke=!1;class ej extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class Rk{constructor(e=new hb,t=!1,i,r=jke){this._services=e,this._strict=t,this._parent=i,this._enableTracing=r,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(Ni,this),this._globalGraph=r?i?._globalGraph??new J$(s=>s):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,is(this._children),this._children.clear();for(const e of this._servicesToMaybeDispose)NK(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,t){this._throwIfDisposed();const i=this,r=new class extends Rk{dispose(){i._children.delete(r),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(r),t?.add(r),r}invokeFunction(e,...t){this._throwIfDisposed();const i=Iv.traceInvocation(this._enableTracing,e);let r=!1;try{return e({get:o=>{if(r)throw $M("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(o,i);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...t)}finally{r=!0,i.stop()}}createInstance(e,...t){this._throwIfDisposed();let i,r;return e instanceof Gc?(i=Iv.traceCreation(this._enableTracing,e.ctor),r=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=Iv.traceCreation(this._enableTracing,e),r=this._createInstance(e,t,i)),i.stop(),r}_createInstance(e,t=[],i){const r=lc.getServiceDependencies(e).sort((a,l)=>a.index-l.index),s=[];for(const a of r){const l=this._getOrCreateServiceInstance(a.id,i);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),s.push(l)}const o=r.length>0?r[0].index:t.length;if(t.length!==o){console.trace(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);const a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return Reflect.construct(e,t.concat(s))}_setCreatedServiceInstance(e,t){if(this._services.get(e)instanceof Gc)this._services.set(e,t);else if(this._parent)this._parent._setCreatedServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const i=this._getServiceInstanceOrDescriptor(e);return i instanceof Gc?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){const r=new J$(l=>l.id.toString());let s=0;const o=[{id:e,desc:t,_trace:i}],a=new Set;for(;o.length;){const l=o.pop();if(!a.has(String(l.id))){if(a.add(String(l.id)),r.lookupOrInsertNode(l),s++>1e3)throw new ej(r);for(const c of lc.getServiceDependencies(l.desc.ctor)){const h=this._getServiceInstanceOrDescriptor(c.id);if(h||this._throwIfStrict(`[createInstance] ${e} depends on ${c.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(l.id),String(c.id)),h instanceof Gc){const u={id:c.id,desc:h,_trace:l._trace.branch(c.id,!0)};r.insertEdge(l,u),o.push(u)}}}}for(;;){const l=r.roots();if(l.length===0){if(!r.isEmpty())throw new ej(r);break}for(const{data:c}of l){if(this._getServiceInstanceOrDescriptor(c.id)instanceof Gc){const u=this._createServiceInstanceWithOwner(c.id,c.desc.ctor,c.desc.staticArguments,c.desc.supportsDelayedInstantiation,c._trace);this._setCreatedServiceInstance(c.id,u)}r.removeNode(c)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],r,s){if(this._services.get(e)instanceof Gc)return this._createServiceInstance(e,t,i,r,s,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,r,s);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,i=[],r,s,o){if(r){const a=new Rk(void 0,this._strict,this,this._enableTracing);a._globalGraphImplicitDependency=String(e);const l=new Map,c=new Zfe(()=>{const h=a._createInstance(t,i,s);for(const[u,d]of l){const g=h[u];if(typeof g=="function")for(const p of d)p.disposable=g.apply(h,p.listener)}return l.clear(),o.add(h),h});return new Proxy(Object.create(null),{get(h,u){if(!c.isInitialized&&typeof u=="string"&&(u.startsWith("onDid")||u.startsWith("onWill"))){let p=l.get(u);return p||(p=new Wo,l.set(u,p)),(_,w,y)=>{if(c.isInitialized)return c.value[u](_,w,y);{const k={listener:[_,w,y],disposable:void 0},L=p.push(k);return Mt(()=>{L(),k.disposable?.dispose()})}}}if(u in h)return h[u];const d=c.value;let g=d[u];return typeof g!="function"||(g=g.bind(d),h[u]=g),g},set(h,u,d){return c.value[u]=d,!0},getPrototypeOf(h){return t.prototype}})}else{const a=this._createInstance(t,i,s);return o.add(a),a}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}const ca=class ca{static traceInvocation(e,t){return e?new ca(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):ca._None}static traceCreation(e,t){return e?new ca(1,t.name):ca._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const i=new ca(3,e.toString());return this._dep.push([e,t,i]),i}stop(){const e=Date.now()-this._start;ca._totals+=e;let t=!1;function i(s,o){const a=[],l=new Array(s+1).join("	");for(const[c,h,u]of o._dep)if(h&&u){t=!0,a.push(`${l}CREATES -> ${c}`);const d=i(s+1,u);d&&a.push(d)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}const r=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${ca._totals.toFixed(2)}ms)`];(e>2||t)&&ca.all.add(r.join(`
`))}};ca.all=new Set,ca._None=new class extends ca{constructor(){super(0,null)}stop(){}branch(){return this}},ca._totals=0;let Iv=ca;const Uke=new Set([Vt.inMemory,Vt.vscodeSourceControl,Vt.walkThrough,Vt.walkThroughSnippet,Vt.vscodeChatCodeBlock]);class qke{constructor(){this._byResource=new xa,this._byOwner=new Map}set(e,t,i){let r=this._byResource.get(e);r||(r=new Map,this._byResource.set(e,r)),r.set(t,i);let s=this._byOwner.get(t);s||(s=new xa,this._byOwner.set(t,s)),s.set(e,i)}get(e,t){return this._byResource.get(e)?.get(t)}delete(e,t){let i=!1,r=!1;const s=this._byResource.get(e);s&&(i=s.delete(t));const o=this._byOwner.get(t);if(o&&(r=o.delete(e)),i!==r)throw new Error("illegal state");return i&&r}values(e){return typeof e=="string"?this._byOwner.get(e)?.values()??wi.empty():Ut.isUri(e)?this._byResource.get(e)?.values()??wi.empty():wi.map(wi.concat(...this._byOwner.values()),t=>t[1])}}class Gke{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new xa,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const i=this._data.get(t);i&&this._substract(i);const r=this._resourceStats(t);this._add(r),this._data.set(t,r)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(Uke.has(e.scheme))return t;for(const{severity:i}of this._service.read({resource:e}))i===$a.Error?t.errors+=1:i===$a.Warning?t.warnings+=1:i===$a.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class Nd{constructor(){this._onMarkerChanged=new AK({delay:0,merge:Nd._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new qke,this._stats=new Gke(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const i of t||[])this.changeOne(e,i,[])}changeOne(e,t,i){if(fue(i))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const r=[];for(const s of i){const o=Nd._toMarker(e,t,s);o&&r.push(o)}this._data.set(t,e,r),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,i){let{code:r,severity:s,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:h,endColumn:u,relatedInformation:d,tags:g}=i;if(o)return l=l>0?l:1,c=c>0?c:1,h=h>=l?h:l,u=u>0?u:c,{resource:t,owner:e,code:r,severity:s,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:h,endColumn:u,relatedInformation:d,tags:g}}changeAll(e,t){const i=[],r=this._data.values(e);if(r)for(const s of r){const o=wi.first(s);o&&(i.push(o.resource),this._data.delete(o.resource,e))}if(GL(t)){const s=new xa;for(const{resource:o,marker:a}of t){const l=Nd._toMarker(e,o,a);if(!l)continue;const c=s.get(o);c?c.push(l):(s.set(o,[l]),i.push(o))}for(const[o,a]of s)this._data.set(o,e,a)}i.length>0&&this._onMarkerChanged.fire(i)}read(e=Object.create(null)){let{owner:t,resource:i,severities:r,take:s}=e;if((!s||s<0)&&(s=-1),t&&i){const o=this._data.get(i,t);if(o){const a=[];for(const l of o)if(Nd._accept(l,r)){const c=a.push(l);if(s>0&&c===s)break}return a}else return[]}else if(!t&&!i){const o=[];for(const a of this._data.values())for(const l of a)if(Nd._accept(l,r)){const c=o.push(l);if(s>0&&c===s)return o}return o}else{const o=this._data.values(i??t),a=[];for(const l of o)for(const c of l)if(Nd._accept(c,r)){const h=a.push(c);if(s>0&&h===s)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new xa;for(const i of e)for(const r of i)t.set(r,!0);return Array.from(t.keys())}}class Kke extends xe{get configurationModel(){return this._configurationModel}constructor(e){super(),this.logService=e,this._configurationModel=zr.createEmptyModel(this.logService)}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=zr.createEmptyModel(this.logService);const e=Ur.as(Qm.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const i=this.getConfigurationDefaultOverrides();for(const r of e){const s=i[r],o=t[r];s!==void 0?this._configurationModel.setValue(r,s):o?this._configurationModel.setValue(r,o.default):this._configurationModel.removeValue(r)}}}const U5=ai("accessibilitySignalService"),ri=class ri{static register(e){return new ri(e.fileName)}constructor(e){this.fileName=e}};ri.error=ri.register({fileName:"error.mp3"}),ri.warning=ri.register({fileName:"warning.mp3"}),ri.success=ri.register({fileName:"success.mp3"}),ri.foldedArea=ri.register({fileName:"foldedAreas.mp3"}),ri.break=ri.register({fileName:"break.mp3"}),ri.quickFixes=ri.register({fileName:"quickFixes.mp3"}),ri.taskCompleted=ri.register({fileName:"taskCompleted.mp3"}),ri.taskFailed=ri.register({fileName:"taskFailed.mp3"}),ri.terminalBell=ri.register({fileName:"terminalBell.mp3"}),ri.diffLineInserted=ri.register({fileName:"diffLineInserted.mp3"}),ri.diffLineDeleted=ri.register({fileName:"diffLineDeleted.mp3"}),ri.diffLineModified=ri.register({fileName:"diffLineModified.mp3"}),ri.chatRequestSent=ri.register({fileName:"chatRequestSent.mp3"}),ri.chatResponseReceived1=ri.register({fileName:"chatResponseReceived1.mp3"}),ri.chatResponseReceived2=ri.register({fileName:"chatResponseReceived2.mp3"}),ri.chatResponseReceived3=ri.register({fileName:"chatResponseReceived3.mp3"}),ri.chatResponseReceived4=ri.register({fileName:"chatResponseReceived4.mp3"}),ri.clear=ri.register({fileName:"clear.mp3"}),ri.save=ri.register({fileName:"save.mp3"}),ri.format=ri.register({fileName:"format.mp3"}),ri.voiceRecordingStarted=ri.register({fileName:"voiceRecordingStarted.mp3"}),ri.voiceRecordingStopped=ri.register({fileName:"voiceRecordingStopped.mp3"}),ri.progress=ri.register({fileName:"progress.mp3"});let on=ri;class Yke{constructor(e){this.randomOneOf=e}}const Nt=class Nt{constructor(e,t,i,r,s,o){this.sound=e,this.name=t,this.legacySoundSettingsKey=i,this.settingsKey=r,this.legacyAnnouncementSettingsKey=s,this.announcementMessage=o}static register(e){const t=new Yke("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),i=new Nt(t,e.name,e.legacySoundSettingsKey,e.settingsKey,e.legacyAnnouncementSettingsKey,e.announcementMessage);return Nt._signals.add(i),i}};Nt._signals=new Set,Nt.errorAtPosition=Nt.register({name:C("accessibilitySignals.positionHasError.name","Error at Position"),sound:on.error,announcementMessage:C("accessibility.signals.positionHasError","Error"),settingsKey:"accessibility.signals.positionHasError",delaySettingsKey:"accessibility.signalOptions.delays.errorAtPosition"}),Nt.warningAtPosition=Nt.register({name:C("accessibilitySignals.positionHasWarning.name","Warning at Position"),sound:on.warning,announcementMessage:C("accessibility.signals.positionHasWarning","Warning"),settingsKey:"accessibility.signals.positionHasWarning",delaySettingsKey:"accessibility.signalOptions.delays.warningAtPosition"}),Nt.errorOnLine=Nt.register({name:C("accessibilitySignals.lineHasError.name","Error on Line"),sound:on.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:C("accessibility.signals.lineHasError","Error on Line"),settingsKey:"accessibility.signals.lineHasError"}),Nt.warningOnLine=Nt.register({name:C("accessibilitySignals.lineHasWarning.name","Warning on Line"),sound:on.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:C("accessibility.signals.lineHasWarning","Warning on Line"),settingsKey:"accessibility.signals.lineHasWarning"}),Nt.foldedArea=Nt.register({name:C("accessibilitySignals.lineHasFoldedArea.name","Folded Area on Line"),sound:on.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:C("accessibility.signals.lineHasFoldedArea","Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"}),Nt.break=Nt.register({name:C("accessibilitySignals.lineHasBreakpoint.name","Breakpoint on Line"),sound:on.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:C("accessibility.signals.lineHasBreakpoint","Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"}),Nt.inlineSuggestion=Nt.register({name:C("accessibilitySignals.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:on.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"}),Nt.terminalQuickFix=Nt.register({name:C("accessibilitySignals.terminalQuickFix.name","Terminal Quick Fix"),sound:on.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:C("accessibility.signals.terminalQuickFix","Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"}),Nt.onDebugBreak=Nt.register({name:C("accessibilitySignals.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:on.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:C("accessibility.signals.onDebugBreak","Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"}),Nt.noInlayHints=Nt.register({name:C("accessibilitySignals.noInlayHints","No Inlay Hints on Line"),sound:on.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:C("accessibility.signals.noInlayHints","No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"}),Nt.taskCompleted=Nt.register({name:C("accessibilitySignals.taskCompleted","Task Completed"),sound:on.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:C("accessibility.signals.taskCompleted","Task Completed"),settingsKey:"accessibility.signals.taskCompleted"}),Nt.taskFailed=Nt.register({name:C("accessibilitySignals.taskFailed","Task Failed"),sound:on.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:C("accessibility.signals.taskFailed","Task Failed"),settingsKey:"accessibility.signals.taskFailed"}),Nt.terminalCommandFailed=Nt.register({name:C("accessibilitySignals.terminalCommandFailed","Terminal Command Failed"),sound:on.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:C("accessibility.signals.terminalCommandFailed","Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"}),Nt.terminalCommandSucceeded=Nt.register({name:C("accessibilitySignals.terminalCommandSucceeded","Terminal Command Succeeded"),sound:on.success,announcementMessage:C("accessibility.signals.terminalCommandSucceeded","Command Succeeded"),settingsKey:"accessibility.signals.terminalCommandSucceeded"}),Nt.terminalBell=Nt.register({name:C("accessibilitySignals.terminalBell","Terminal Bell"),sound:on.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:C("accessibility.signals.terminalBell","Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"}),Nt.notebookCellCompleted=Nt.register({name:C("accessibilitySignals.notebookCellCompleted","Notebook Cell Completed"),sound:on.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:C("accessibility.signals.notebookCellCompleted","Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"}),Nt.notebookCellFailed=Nt.register({name:C("accessibilitySignals.notebookCellFailed","Notebook Cell Failed"),sound:on.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:C("accessibility.signals.notebookCellFailed","Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"}),Nt.diffLineInserted=Nt.register({name:C("accessibilitySignals.diffLineInserted","Diff Line Inserted"),sound:on.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"}),Nt.diffLineDeleted=Nt.register({name:C("accessibilitySignals.diffLineDeleted","Diff Line Deleted"),sound:on.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"}),Nt.diffLineModified=Nt.register({name:C("accessibilitySignals.diffLineModified","Diff Line Modified"),sound:on.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"}),Nt.chatRequestSent=Nt.register({name:C("accessibilitySignals.chatRequestSent","Chat Request Sent"),sound:on.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:C("accessibility.signals.chatRequestSent","Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"}),Nt.chatResponseReceived=Nt.register({name:C("accessibilitySignals.chatResponseReceived","Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[on.chatResponseReceived1,on.chatResponseReceived2,on.chatResponseReceived3,on.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"}),Nt.progress=Nt.register({name:C("accessibilitySignals.progress","Progress"),sound:on.progress,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.progress",announcementMessage:C("accessibility.signals.progress","Progress"),settingsKey:"accessibility.signals.progress"}),Nt.clear=Nt.register({name:C("accessibilitySignals.clear","Clear"),sound:on.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:C("accessibility.signals.clear","Clear"),settingsKey:"accessibility.signals.clear"}),Nt.save=Nt.register({name:C("accessibilitySignals.save","Save"),sound:on.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:C("accessibility.signals.save","Save"),settingsKey:"accessibility.signals.save"}),Nt.format=Nt.register({name:C("accessibilitySignals.format","Format"),sound:on.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:C("accessibility.signals.format","Format"),settingsKey:"accessibility.signals.format"}),Nt.voiceRecordingStarted=Nt.register({name:C("accessibilitySignals.voiceRecordingStarted","Voice Recording Started"),sound:on.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"}),Nt.voiceRecordingStopped=Nt.register({name:C("accessibilitySignals.voiceRecordingStopped","Voice Recording Stopped"),sound:on.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"});let Kc=Nt;class Zke extends xe{constructor(e,t=[]){super(),this.logger=new Cme([e,...t]),this._register(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}}const Xke=[];function Qke(){return Xke.slice(0)}class Jke{getParseResult(e){}}var _h=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Wn=function(n,e){return function(t,i){e(t,i,n)}};class e4e{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new de}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let fI=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new Ade(new e4e(t))):Promise.reject(new Error("Model not found"))}};fI=_h([Wn(0,Qs)],fI);const LL=class LL{show(){return LL.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}};LL.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};let gI=LL;class t4e{withProgress(e,t,i){return t({report:()=>{}})}}class i4e{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}}class n4e{async confirm(e){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}}doConfirm(e,t){let i=e;return t&&(i=i+`

`+t),Vi.confirm(i)}async prompt(e){let t;if(this.doConfirm(e.message,e.detail)){const r=[...e.buttons??[]];e.cancelButton&&typeof e.cancelButton!="string"&&typeof e.cancelButton!="boolean"&&r.push(e.cancelButton),t=await r[0]?.run({checkboxChecked:!1})}return{result:t}}async error(e,t){await this.prompt({type:rr.Error,message:e,detail:t})}}const nw=class nw{info(e){return this.notify({severity:rr.Info,message:e})}warn(e){return this.notify({severity:rr.Warning,message:e})}error(e){return this.notify({severity:rr.Error,message:e})}notify(e){switch(e.severity){case rr.Error:console.error(e.message);break;case rr.Warning:console.warn(e.message);break;default:console.log(e.message);break}return nw.NO_OP}prompt(e,t,i,r){return nw.NO_OP}status(e,t){return xe.None}};nw.NO_OP=new U0e;let mI=nw,pI=class{constructor(e){this._onWillExecuteCommand=new de,this._onDidExecuteCommand=new de,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const i=So.getCommand(e);if(!i)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const r=this._instantiationService.invokeFunction.apply(this._instantiationService,[i.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(r)}catch(r){return Promise.reject(r)}}};pI=_h([Wn(0,Ni)],pI);let z1=class extends cwe{constructor(e,t,i,r,s,o){super(e,t,i,r,s),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=g=>{const p=new rt;p.add(we(g,Be.KEY_DOWN,b=>{const _=new en(b);this._dispatch(_,_.target)&&(_.preventDefault(),_.stopPropagation())})),p.add(we(g,Be.KEY_UP,b=>{const _=new en(b);this._singleModifierDispatch(_,_.target)&&_.preventDefault()})),this._domNodeListeners.push(new r4e(g,p))},l=g=>{for(let p=0;p<this._domNodeListeners.length;p++){const b=this._domNodeListeners[p];b.domNode===g&&(this._domNodeListeners.splice(p,1),b.dispose())}},c=g=>{g.getOption(61)||a(g.getContainerDomNode())},h=g=>{g.getOption(61)||l(g.getContainerDomNode())};this._register(o.onCodeEditorAdd(c)),this._register(o.onCodeEditorRemove(h)),o.listCodeEditors().forEach(c);const u=g=>{a(g.getContainerDomNode())},d=g=>{l(g.getContainerDomNode())};this._register(o.onDiffEditorAdd(u)),this._register(o.onDiffEditorRemove(d)),o.listDiffEditors().forEach(u)}addDynamicKeybinding(e,t,i,r){return ih(So.registerCommand(e,i),this.addDynamicKeybindings([{keybinding:t,command:e,when:r}]))}addDynamicKeybindings(e){const t=e.map(i=>({keybinding:UE(i.keybinding,gl),command:i.command??null,commandArgs:i.commandArgs,when:i.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}));return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),Mt(()=>{for(let i=0;i<this._dynamicKeybindings.length;i++)if(this._dynamicKeybindings[i]===t[0]){this._dynamicKeybindings.splice(i,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(Ly.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new bv(e,t,i=>this._log(i))}return this._cachedResolver}_documentHasFocus(){return Vi.document.hasFocus()}_toNormalizedKeybindingItems(e,t){const i=[];let r=0;for(const s of e){const o=s.when||void 0,a=s.keybinding;if(!a)i[r++]=new EV(void 0,s.command,s.commandArgs,o,t,null,!1);else{const l=Nw.resolveKeybinding(a,gl);for(const c of l)i[r++]=new EV(c,s.command,s.commandArgs,o,t,null,!1)}}return i}resolveKeyboardEvent(e){const t=new Sm(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new Nw([t],gl)}};z1=_h([Wn(0,Ei),Wn(1,Ta),Wn(2,Zm),Wn(3,wc),Wn(4,vc),Wn(5,vr)],z1);class r4e extends xe{constructor(e,t){super(),this.domNode=e,this._register(t)}}function tj(n){return n&&typeof n=="object"&&(!n.overrideIdentifier||typeof n.overrideIdentifier=="string")&&(!n.resource||n.resource instanceof Ut)}let Pk=class{constructor(e){this.logService=e,this._onDidChangeConfiguration=new de,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const t=new Kke(e);this._configuration=new k5(t.reload(),zr.createEmptyModel(e),zr.createEmptyModel(e),zr.createEmptyModel(e),zr.createEmptyModel(e),zr.createEmptyModel(e),new xa,zr.createEmptyModel(e),new xa,e),t.dispose()}getValue(e,t){const i=typeof e=="string"?e:void 0,r=tj(e)?e:tj(t)?t:{};return this._configuration.getValue(i,r,void 0)}updateValues(e){const t={data:this._configuration.toData()},i=[];for(const r of e){const[s,o]=r;this.getValue(s)!==o&&(this._configuration.updateValue(s,o),i.push(s))}if(i.length>0){const r=new rwe({keys:i,overrides:[]},t,this._configuration,void 0,this.logService);r.source=8,this._onDidChangeConfiguration.fire(r)}return Promise.resolve()}updateValue(e,t,i,r){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}};Pk=_h([Wn(0,vc)],Pk);let bI=class{constructor(e,t,i){this.configurationService=e,this.modelService=t,this.languageService=i,this._onDidChangeConfiguration=new de,this.configurationService.onDidChangeConfiguration(r=>{this._onDidChangeConfiguration.fire({affectedKeys:r.affectedKeys,affectsConfiguration:(s,o)=>r.affectsConfiguration(o)})})}getValue(e,t,i){const r=be.isIPosition(t)?t:null,s=r?typeof i=="string"?i:void 0:typeof t=="string"?t:void 0,o=e?this.getLanguage(e,r):void 0;return typeof s>"u"?this.configurationService.getValue({resource:e,overrideIdentifier:o}):this.configurationService.getValue(s,{resource:e,overrideIdentifier:o})}getLanguage(e,t){const i=this.modelService.getModel(e);return i?t?i.getLanguageIdAtPosition(t.lineNumber,t.column):i.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}};bI=_h([Wn(0,Nn),Wn(1,Qs),Wn(2,Ir)],bI);let _I=class{constructor(e){this.configurationService=e}getEOL(e,t){const i=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return i&&typeof i=="string"&&i!=="auto"?i:wo||hi?`
`:`\r
`}};_I=_h([Wn(0,Nn)],_I);class s4e{publicLog2(){}}const rw=class rw{constructor(){const e=Ut.from({scheme:rw.SCHEME,authority:"model",path:"/"});this.workspace={id:xwe,folders:[new Cwe({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===rw.SCHEME?this.workspace.folders[0]:null}};rw.SCHEME="inmemory";let vI=rw;function Ok(n,e,t){if(!e||!(n instanceof Pk))return;const i=[];Object.keys(e).forEach(r=>{Qve(r)&&i.push([`editor.${r}`,e[r]]),t&&Jve(r)&&i.push([`diffEditor.${r}`,e[r]])}),i.length>0&&n.updateValues(i)}let wI=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}async apply(e,t){const i=Array.isArray(e)?e:qA.convert(e),r=new Map;for(const a of i){if(!(a instanceof im))throw new Error("bad edit - only text edits are supported");const l=this._modelService.getModel(a.resource);if(!l)throw new Error("bad edit - model not found");if(typeof a.versionId=="number"&&l.getVersionId()!==a.versionId)throw new Error("bad state - model changed in the meantime");let c=r.get(l);c||(c=[],r.set(l,c)),c.push(twe.replaceMove(oe.lift(a.textEdit.range),a.textEdit.text))}let s=0,o=0;for(const[a,l]of r)a.pushStackElement(),a.pushEditOperations([],l,()=>[]),a.pushStackElement(),o+=1,s+=l.length;return{ariaSummary:zE(a9.bulkEditServiceSummary,s,o),isApplied:s>0}}};wI=_h([Wn(0,Qs)],wI);class o4e{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return VA(e)}}let yI=class extends Uve{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,i){if(!t){const r=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();r&&(t=r.getContainerDomNode())}return super.showContextView(e,t,i)}};yI=_h([Wn(0,Ef),Wn(1,vr)],yI);class a4e{constructor(){this._neverEmitter=new de,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class l4e extends d9{constructor(){super()}}class c4e extends Zke{constructor(){super(new yme)}}let CI=class extends C9{constructor(e,t,i,r,s,o){super(e,t,i,r,s,o),this.configure({blockMouse:!1})}};CI=_h([Wn(0,Zm),Wn(1,wc),Wn(2,Ry),Wn(3,ns),Wn(4,Ym),Wn(5,Ei)],CI);const SI={amdModuleId:"vs/editor/common/services/editorSimpleWorker",esmModuleLocation:void 0,label:"editorWorkerService"};let xI=class extends S8{constructor(e,t,i,r,s){super(SI,e,t,i,r,s)}};xI=_h([Wn(0,Qs),Wn(1,xA),Wn(2,vc),Wn(3,mh),Wn(4,ji)],xI);class h4e{async playSignal(e,t){}}_i(vc,c4e,0);_i(Nn,Pk,0);_i(xA,bI,0);_i(nZ,_I,0);_i(ywe,vI,0);_i(mwe,o4e,0);_i(Zm,s4e,0);_i(lZ,n4e,0);_i(gZ,i4e,0);_i(wc,mI,0);_i(ep,Nd,0);_i(Ir,l4e,0);_i(Al,Ike,0);_i(Qs,O9,0);_i(FX,T9,0);_i(Ei,dI,0);_i(pwe,t4e,0);_i(KA,gI,0);_i(A5,Pye,0);_i(zy,xI,0);_i(Yve,wI,0);_i(kwe,a4e,0);_i(n5,fI,0);_i(yc,sI,0);_i(bh,Hxe,0);_i(Ta,pI,0);_i(ns,z1,0);_i(O5,iI,0);_i(Ry,yI,0);_i(Py,L9,0);_i(PR,hI,0);_i(qu,CI,0);_i(Ym,oI,0);_i(U5,h4e,0);_i(iQ,Jke,0);var ut;(function(n){const e=new hb;for(const[l,c]of tH())e.set(l,c);const t=new Rk(e,!0);e.set(Ni,t);function i(l){r||o({});const c=e.get(l);if(!c)throw new Error("Missing service "+l);return c instanceof Gc?t.invokeFunction(h=>h.get(l)):c}n.get=i;let r=!1;const s=new de;function o(l){if(r)return t;r=!0;for(const[h,u]of tH())e.get(h)||e.set(h,u);for(const h in l)if(l.hasOwnProperty(h)){const u=ai(h);e.get(u)instanceof Gc&&e.set(u,l[h])}const c=Qke();for(const h of c)try{t.createInstance(h)}catch(u){Wi(u)}return s.fire(),t}n.initialize=o;function a(l){if(r)return l();const c=new rt,h=c.add(s.event(()=>{h.dispose(),c.add(l())}));return c}n.withServices=a})(ut||(ut={}));function u4e(n,e){return new d4e(n,e)}class d4e extends Gx{constructor(e,t){const i={amdModuleId:SI.amdModuleId,esmModuleLocation:SI.esmModuleLocation,label:t.label};super(i,t.keepIdleModels||!1,e),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(i){return Promise.reject(i)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?PD(this._foreignModuleHost):[];return e.$loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(i=>{this._foreignModuleCreateData=null;const r=(a,l)=>e.$fmr(a,l),s=(a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)},o={};for(const a of i)o[a]=s(a,r);return o})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this.workerWithSyncedResources(e).then(t=>this.getProxy())}}const BR={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};class pl{constructor(e,t,i,r){this.startColumn=e,this.endColumn=t,this.className=i,this.type=r,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const i=e.length,r=t.length;if(i!==r)return!1;for(let s=0;s<i;s++)if(!pl._equals(e[s],t[s]))return!1;return!0}static extractWrapped(e,t,i){if(e.length===0)return e;const r=t+1,s=i+1,o=i-t,a=[];let l=0;for(const c of e)c.endColumn<=r||c.startColumn>=s||(a[l++]=new pl(Math.max(1,c.startColumn-r+1),Math.min(o+1,c.endColumn-r+1),c.className,c.type));return a}static filter(e,t,i,r){if(e.length===0)return[];const s=[];let o=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],h=c.range;if(h.endLineNumber<t||h.startLineNumber>t||h.isEmpty()&&(c.type===0||c.type===3))continue;const u=h.startLineNumber===t?h.startColumn:i,d=h.endLineNumber===t?h.endColumn:r;s[o++]=new pl(u,d,c.inlineClassName,c.type)}return s}static _typeCompare(e,t){const i=[2,0,1,3];return i[e]-i[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const i=pl._typeCompare(e.type,t.type);return i!==0?i:e.className!==t.className?e.className<t.className?-1:1:0}}class ij{constructor(e,t,i,r){this.startOffset=e,this.endOffset=t,this.className=i,this.metadata=r}}let f4e=class kI{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let i=0,r=e.length;i<r;i++)t|=e[i];return t}consumeLowerThan(e,t,i){for(;this.count>0&&this.stopOffsets[0]<e;){let r=0;for(;r+1<this.count&&this.stopOffsets[r]===this.stopOffsets[r+1];)r++;i.push(new ij(t,this.stopOffsets[r],this.classNames.join(" "),kI._metadata(this.metadata))),t=this.stopOffsets[r]+1,this.stopOffsets.splice(0,r+1),this.classNames.splice(0,r+1),this.metadata.splice(0,r+1),this.count-=r+1}return this.count>0&&t<e&&(i.push(new ij(t,e-1,this.classNames.join(" "),kI._metadata(this.metadata))),t=e),t}insert(e,t,i){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(i);else for(let r=0;r<this.count;r++)if(this.stopOffsets[r]>=e){this.stopOffsets.splice(r,0,e),this.classNames.splice(r,0,t),this.metadata.splice(r,0,i);break}this.count++}};class g4e{static normalize(e,t){if(t.length===0)return[];const i=[],r=new f4e;let s=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];let c=l.startColumn,h=l.endColumn;const u=l.className,d=l.type===1?2:l.type===2?4:0;if(c>1){const b=e.charCodeAt(c-2);Lr(b)&&c--}if(h>1){const b=e.charCodeAt(h-2);Lr(b)&&h--}const g=c-1,p=h-2;s=r.consumeLowerThan(g,s,i),r.count===0&&(s=g),r.insert(p,u,d)}return r.consumeLowerThan(1073741824,s,i),i}}class Tr{constructor(e,t,i,r){this.endIndex=e,this.type=t,this.metadata=i,this.containsRTL=r,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class WQ{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class ub{constructor(e,t,i,r,s,o,a,l,c,h,u,d,g,p,b,_,w,y,k){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.continuesWithWrappedLine=r,this.isBasicASCII=s,this.containsRTL=o,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(pl.compare),this.tabSize=h,this.startVisibleColumn=u,this.spaceWidth=d,this.stopRenderingLineAfter=b,this.renderWhitespace=_==="all"?4:_==="boundary"?1:_==="selection"?2:_==="trailing"?3:0,this.renderControlCharacters=w,this.fontLigatures=y,this.selectionsOnLine=k&&k.sort((N,D)=>N.startOffset<D.startOffset?-1:1);const L=Math.abs(p-d),T=Math.abs(g-d);L<T?(this.renderSpaceWidth=p,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=g,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&pl.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class zQ{constructor(e,t){this.partIndex=e,this.charIndex=t}}class Yc{static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,i,r){const s=(t<<16|i<<0)>>>0;this._data[e-1]=s,this._horizontalOffset[e-1]=r}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),i=Yc.getPartIndex(t),r=Yc.getCharIndex(t);return new zQ(i,r)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,i){if(this.length===0)return 0;const r=(e<<16|i<<0)>>>0;let s=0,o=this.length-1;for(;s+1<o;){const b=s+o>>>1,_=this._data[b];if(_===r)return b;_>r?o=b:s=b}if(s===o)return s;const a=this._data[s],l=this._data[o];if(a===r)return s;if(l===r)return o;const c=Yc.getPartIndex(a),h=Yc.getCharIndex(a),u=Yc.getPartIndex(l);let d;c!==u?d=t:d=Yc.getCharIndex(l);const g=i-h,p=d-i;return g<=p?s:o}}class LI{constructor(e,t,i){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=i}}function FR(n,e){if(n.lineContent.length===0){if(n.lineDecorations.length>0){e.appendString("<span>");let t=0,i=0,r=0;for(const o of n.lineDecorations)(o.type===1||o.type===2)&&(e.appendString('<span class="'),e.appendString(o.className),e.appendString('"></span>'),o.type===1&&(r|=1,t++),o.type===2&&(r|=2,i++));e.appendString("</span>");const s=new Yc(1,t+i);return s.setColumnInfo(1,t,0,0),new LI(s,!1,r)}return e.appendString("<span><span></span></span>"),new LI(new Yc(0,0),!1,0)}return S4e(b4e(n),e)}class m4e{constructor(e,t,i,r){this.characterMapping=e,this.html=t,this.containsRTL=i,this.containsForeignElements=r}}function q5(n){const e=new g5(1e4),t=FR(n,e);return new m4e(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class p4e{constructor(e,t,i,r,s,o,a,l,c,h,u,d,g,p,b,_){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.len=r,this.isOverflowing=s,this.overflowingCharCount=o,this.parts=a,this.containsForeignElements=l,this.fauxIndentLength=c,this.tabSize=h,this.startVisibleColumn=u,this.containsRTL=d,this.spaceWidth=g,this.renderSpaceCharCode=p,this.renderWhitespace=b,this.renderControlCharacters=_}}function b4e(n){const e=n.lineContent;let t,i,r;n.stopRenderingLineAfter!==-1&&n.stopRenderingLineAfter<e.length?(t=!0,i=e.length-n.stopRenderingLineAfter,r=n.stopRenderingLineAfter):(t=!1,i=0,r=e.length);let s=_4e(e,n.containsRTL,n.lineTokens,n.fauxIndentLength,r);n.renderControlCharacters&&!n.isBasicASCII&&(s=w4e(e,s)),(n.renderWhitespace===4||n.renderWhitespace===1||n.renderWhitespace===2&&n.selectionsOnLine||n.renderWhitespace===3&&!n.continuesWithWrappedLine)&&(s=y4e(n,e,r,s));let o=0;if(n.lineDecorations.length>0){for(let a=0,l=n.lineDecorations.length;a<l;a++){const c=n.lineDecorations[a];c.type===3||c.type===1?o|=1:c.type===2&&(o|=2)}s=C4e(e,r,s,n.lineDecorations)}return n.containsRTL||(s=v4e(e,s,!n.isBasicASCII||n.fontLigatures)),new p4e(n.useMonospaceOptimizations,n.canUseHalfwidthRightwardsArrow,e,r,t,i,s,o,n.fauxIndentLength,n.tabSize,n.startVisibleColumn,n.containsRTL,n.spaceWidth,n.renderSpaceCharCode,n.renderWhitespace,n.renderControlCharacters)}function _4e(n,e,t,i,r){const s=[];let o=0;i>0&&(s[o++]=new Tr(i,"",0,!1));let a=i;for(let l=0,c=t.getCount();l<c;l++){const h=t.getEndOffset(l);if(h<=i)continue;const u=t.getClassName(l);if(h>=r){const g=e?pw(n.substring(a,r)):!1;s[o++]=new Tr(r,u,0,g);break}const d=e?pw(n.substring(a,h)):!1;s[o++]=new Tr(h,u,0,d),a=h}return s}function v4e(n,e,t){let i=0;const r=[];let s=0;if(t)for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex;if(i+50<c){const h=l.type,u=l.metadata,d=l.containsRTL;let g=-1,p=i;for(let b=i;b<c;b++)n.charCodeAt(b)===32&&(g=b),g!==-1&&b-p>=50&&(r[s++]=new Tr(g+1,h,u,d),p=g+1,g=-1);p!==c&&(r[s++]=new Tr(c,h,u,d))}else r[s++]=l;i=c}else for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex,h=c-i;if(h>50){const u=l.type,d=l.metadata,g=l.containsRTL,p=Math.ceil(h/50);for(let b=1;b<p;b++){const _=i+b*50;r[s++]=new Tr(_,u,d,g)}r[s++]=new Tr(c,u,d,g)}else r[s++]=l;i=c}return r}function HQ(n){return n<32?n!==9:n===127||n>=8234&&n<=8238||n>=8294&&n<=8297||n>=8206&&n<=8207||n===1564}function w4e(n,e){const t=[];let i=new Tr(0,"",0,!1),r=0;for(const s of e){const o=s.endIndex;for(;r<o;r++){const a=n.charCodeAt(r);HQ(a)&&(r>i.endIndex&&(i=new Tr(r,s.type,s.metadata,s.containsRTL),t.push(i)),i=new Tr(r+1,"mtkcontrol",s.metadata,!1),t.push(i))}r>i.endIndex&&(i=new Tr(o,s.type,s.metadata,s.containsRTL),t.push(i))}return t}function y4e(n,e,t,i){const r=n.continuesWithWrappedLine,s=n.fauxIndentLength,o=n.tabSize,a=n.startVisibleColumn,l=n.useMonospaceOptimizations,c=n.selectionsOnLine,h=n.renderWhitespace===1,u=n.renderWhitespace===3,d=n.renderSpaceWidth!==n.spaceWidth,g=[];let p=0,b=0,_=i[b].type,w=i[b].containsRTL,y=i[b].endIndex;const k=i.length;let L=!1,T=qo(e),N;T===-1?(L=!0,T=t,N=t):N=jm(e);let D=!1,O=0,B=c&&c[O],G=a%o;for(let q=s;q<t;q++){const X=e.charCodeAt(q);B&&q>=B.endOffset&&(O++,B=c&&c[O]);let z;if(q<T||q>N)z=!0;else if(X===9)z=!0;else if(X===32)if(h)if(D)z=!0;else{const Q=q+1<t?e.charCodeAt(q+1):0;z=Q===32||Q===9}else z=!0;else z=!1;if(z&&c&&(z=!!B&&B.startOffset<=q&&B.endOffset>q),z&&u&&(z=L||q>N),z&&w&&q>=T&&q<=N&&(z=!1),D){if(!z||!l&&G>=o){if(d){const Q=p>0?g[p-1].endIndex:s;for(let te=Q+1;te<=q;te++)g[p++]=new Tr(te,"mtkw",1,!1)}else g[p++]=new Tr(q,"mtkw",1,!1);G=G%o}}else(q===y||z&&q>s)&&(g[p++]=new Tr(q,_,0,w),G=G%o);for(X===9?G=o:hf(X)?G+=2:G++,D=z;q===y&&(b++,b<k);)_=i[b].type,w=i[b].containsRTL,y=i[b].endIndex}let H=!1;if(D)if(r&&h){const q=t>0?e.charCodeAt(t-1):0,X=t>1?e.charCodeAt(t-2):0;q===32&&X!==32&&X!==9||(H=!0)}else H=!0;if(H)if(d){const q=p>0?g[p-1].endIndex:s;for(let X=q+1;X<=t;X++)g[p++]=new Tr(X,"mtkw",1,!1)}else g[p++]=new Tr(t,"mtkw",1,!1);else g[p++]=new Tr(t,_,0,w);return g}function C4e(n,e,t,i){i.sort(pl.compare);const r=g4e.normalize(n,i),s=r.length;let o=0;const a=[];let l=0,c=0;for(let u=0,d=t.length;u<d;u++){const g=t[u],p=g.endIndex,b=g.type,_=g.metadata,w=g.containsRTL;for(;o<s&&r[o].startOffset<p;){const y=r[o];if(y.startOffset>c&&(c=y.startOffset,a[l++]=new Tr(c,b,_,w)),y.endOffset+1<=p)c=y.endOffset+1,a[l++]=new Tr(c,b+" "+y.className,_|y.metadata,w),o++;else{c=p,a[l++]=new Tr(c,b+" "+y.className,_|y.metadata,w);break}}p>c&&(c=p,a[l++]=new Tr(c,b,_,w))}const h=t[t.length-1].endIndex;if(o<s&&r[o].startOffset===h)for(;o<s&&r[o].startOffset===h;){const u=r[o];a[l++]=new Tr(c,u.className,u.metadata,!1),o++}return a}function S4e(n,e){const t=n.fontIsMonospace,i=n.canUseHalfwidthRightwardsArrow,r=n.containsForeignElements,s=n.lineContent,o=n.len,a=n.isOverflowing,l=n.overflowingCharCount,c=n.parts,h=n.fauxIndentLength,u=n.tabSize,d=n.startVisibleColumn,g=n.containsRTL,p=n.spaceWidth,b=n.renderSpaceCharCode,_=n.renderWhitespace,w=n.renderControlCharacters,y=new Yc(o+1,c.length);let k=!1,L=0,T=d,N=0,D=0,O=0;g?e.appendString('<span dir="ltr">'):e.appendString("<span>");for(let B=0,G=c.length;B<G;B++){const H=c[B],q=H.endIndex,X=H.type,z=H.containsRTL,Q=_!==0&&H.isWhitespace(),te=Q&&!t&&(X==="mtkw"||!r),se=L===q&&H.isPseudoAfter();if(N=0,e.appendString("<span "),z&&e.appendString('style="unicode-bidi:isolate" '),e.appendString('class="'),e.appendString(te?"mtkz":X),e.appendASCIICharCode(34),Q){let Y=0;{let ae=L,fe=T;for(;ae<q;ae++){const ge=(s.charCodeAt(ae)===9?u-fe%u:1)|0;Y+=ge,ae>=h&&(fe+=ge)}}for(te&&(e.appendString(' style="width:'),e.appendString(String(p*Y)),e.appendString('px"')),e.appendASCIICharCode(62);L<q;L++){y.setColumnInfo(L+1,B-O,N,D),O=0;const ae=s.charCodeAt(L);let fe,J;if(ae===9){fe=u-T%u|0,J=fe,!i||J>1?e.appendCharCode(8594):e.appendCharCode(65515);for(let ge=2;ge<=J;ge++)e.appendCharCode(160)}else fe=2,J=1,e.appendCharCode(b),e.appendCharCode(8204);N+=fe,D+=J,L>=h&&(T+=J)}}else for(e.appendASCIICharCode(62);L<q;L++){y.setColumnInfo(L+1,B-O,N,D),O=0;const Y=s.charCodeAt(L);let ae=1,fe=1;switch(Y){case 9:ae=u-T%u,fe=ae;for(let J=1;J<=ae;J++)e.appendCharCode(160);break;case 32:e.appendCharCode(160);break;case 60:e.appendString("&lt;");break;case 62:e.appendString("&gt;");break;case 38:e.appendString("&amp;");break;case 0:w?e.appendCharCode(9216):e.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.appendCharCode(65533);break;default:hf(Y)&&fe++,w&&Y<32?e.appendCharCode(9216+Y):w&&Y===127?e.appendCharCode(9249):w&&HQ(Y)?(e.appendString("[U+"),e.appendString(x4e(Y)),e.appendString("]"),ae=8,fe=ae):e.appendCharCode(Y)}N+=ae,D+=fe,L>=h&&(T+=fe)}se?O++:O=0,L>=o&&!k&&H.isPseudoAfter()&&(k=!0,y.setColumnInfo(L+1,B,N,D)),e.appendString("</span>")}return k||y.setColumnInfo(o+1,c.length-1,N,D),a&&(e.appendString('<span class="mtkoverflow">'),e.appendString(C("showMore","Show more ({0})",k4e(l))),e.appendString("</span>")),e.appendString("</span>"),new LI(y,g,r)}function x4e(n){return n.toString(16).toUpperCase().padStart(4,"0")}function k4e(n){return n<1024?C("overflow.chars","{0} chars",n):n<1024*1024?`${(n/1024).toFixed(1)} KB`:`${(n/1024/1024).toFixed(1)} MB`}class nj{constructor(e,t,i,r){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=i|0,this.height=r|0}}class L4e{constructor(e,t){this.tabSize=e,this.data=t}}class WR{constructor(e,t,i,r,s,o,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=i,this.maxColumn=r,this.startVisibleColumn=s,this.tokens=o,this.inlineDecorations=a}}class La{constructor(e,t,i,r,s,o,a,l,c,h){this.minColumn=e,this.maxColumn=t,this.content=i,this.continuesWithWrappedLine=r,this.isBasicASCII=La.isBasicASCII(i,o),this.containsRTL=La.containsRTL(i,this.isBasicASCII,s),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=h}static isBasicASCII(e,t){return t?eA(e):!0}static containsRTL(e,t,i){return!t&&i?pw(e):!1}}class Nv{constructor(e,t,i){this.range=e,this.inlineClassName=t,this.type=i}}class T4e{constructor(e,t,i,r){this.startOffset=e,this.endOffset=t,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=r}toInlineDecoration(e){return new Nv(new oe(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class VQ{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class jw{constructor(e,t,i){this.color=e,this.zIndex=t,this.data=i}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&_r(e.data,t.data)}static equalsArr(e,t){return _r(e,t,jw.equals)}}function D4e(n){return Array.isArray(n)}function E4e(n){return!D4e(n)}function $Q(n){return typeof n=="string"}function rj(n){return!$Q(n)}function Mg(n){return!n}function Du(n,e){return n.ignoreCase&&e?e.toLowerCase():e}function sj(n){return n.replace(/[&<>'"_]/g,"-")}function I4e(n,e){console.log(`${n.languageId}: ${e}`)}function Qi(n,e){return new Error(`${n.languageId}: ${e}`)}function zd(n,e,t,i,r){const s=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let o=null;return e.replace(s,function(a,l,c,h,u,d,g,p,b){return Mg(c)?Mg(h)?!Mg(u)&&u<i.length?Du(n,i[u]):!Mg(g)&&n&&typeof n[g]=="string"?n[g]:(o===null&&(o=r.split("."),o.unshift(r)),!Mg(d)&&d<o.length?Du(n,o[d]):""):Du(n,t):"$"})}function N4e(n,e,t){const i=/\$[sS](\d\d?)/g;let r=null;return e.replace(i,function(s,o){return r===null&&(r=t.split("."),r.unshift(t)),!Mg(o)&&o<r.length?Du(n,r[o]):""})}function Z2(n,e){let t=e;for(;t&&t.length>0;){const i=n.tokenizer[t];if(i)return i;const r=t.lastIndexOf(".");r<0?t=null:t=t.substr(0,r)}return null}function M4e(n,e){let t=e;for(;t&&t.length>0;){if(n.stateNames[t])return!0;const r=t.lastIndexOf(".");r<0?t=null:t=t.substr(0,r)}return!1}var A4e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},R4e=function(n,e){return function(t,i){e(t,i,n)}},TI;const jQ=5,TL=class TL{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new e1(e,t);let i=e1.getStackElementId(e);i.length>0&&(i+="|"),i+=t;let r=this._entries[i];return r||(r=new e1(e,t),this._entries[i]=r,r)}};TL._INSTANCE=new TL(jQ);let Uw=TL;class e1{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return e1._equals(this,e)}push(e){return Uw.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return Uw.create(this.parent,e)}}class b0{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new b0(this.languageId,this.state)}}const DL=class DL{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(t!==null)return new Mv(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new Mv(e,t);const i=e1.getStackElementId(e);let r=this._entries[i];return r||(r=new Mv(e,null),this._entries[i]=r,r)}};DL._INSTANCE=new DL(jQ);let Hd=DL;class Mv{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:Hd.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof Mv)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}class P4e{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new mw(e,t,this._languageId)))}nestedLanguageTokenize(e,t,i,r){const s=i.languageId,o=i.state,a=qn.get(s);if(!a)return this.enterLanguage(s),this.emit(r,""),o;const l=a.tokenize(e,t,o);if(r!==0)for(const c of l.tokens)this._tokens.push(new mw(c.offset+r,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new KM(this._tokens,e)}}class Bk{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const i=this._theme.match(this._currentLanguageId,t)|1024;this._lastTokenMetadata!==i&&(this._lastTokenMetadata=i,this._tokens.push(e),this._tokens.push(i))}static _merge(e,t,i){const r=e!==null?e.length:0,s=t.length,o=i!==null?i.length:0;if(r===0&&s===0&&o===0)return new Uint32Array(0);if(r===0&&s===0)return i;if(s===0&&o===0)return e;const a=new Uint32Array(r+s+o);e!==null&&a.set(e);for(let l=0;l<s;l++)a[r+l]=t[l];return i!==null&&a.set(i,r+s),a}nestedLanguageTokenize(e,t,i,r){const s=i.languageId,o=i.state,a=qn.get(s);if(!a)return this.enterLanguage(s),this.emit(r,""),o;const l=a.tokenizeEncoded(e,t,o);if(r!==0)for(let c=0,h=l.tokens.length;c<h;c+=2)l.tokens[c]+=r;return this._prependTokens=Bk._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new XL(Bk._merge(this._prependTokens,this._tokens,null),e)}}let qw=TI=class extends xe{constructor(e,t,i,r,s){super(),this._configurationService=s,this._languageService=e,this._standaloneThemeService=t,this._languageId=i,this._lexer=r,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let o=!1;this._register(qn.onDidChange(a=>{if(o)return;let l=!1;for(let c=0,h=a.changedLanguages.length;c<h;c++){const u=a.changedLanguages[c];if(this._embeddedLanguages[u]){l=!0;break}}l&&(o=!0,qn.handleChange([this._languageId]),o=!1)})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))}))}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const i=qn.get(t);if(i){if(i instanceof TI){const r=i.getLoadStatus();r.loaded===!1&&e.push(r.promise)}continue}qn.isResolved(t)||e.push(qn.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=Uw.create(null,this._lexer.start);return Hd.create(e,null)}tokenize(e,t,i){if(e.length>=this._maxTokenizationLineLength)return oX(this._languageId,i);const r=new P4e,s=this._tokenize(e,t,i,r);return r.finalize(s)}tokenizeEncoded(e,t,i){if(e.length>=this._maxTokenizationLineLength)return UA(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),i);const r=new Bk(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),s=this._tokenize(e,t,i,r);return r.finalize(s)}_tokenize(e,t,i,r){return i.embeddedLanguageData?this._nestedTokenize(e,t,i,0,r):this._myTokenize(e,t,i,0,r)}_findLeavingNestedLanguageOffset(e,t){let i=this._lexer.tokenizer[t.stack.state];if(!i&&(i=Z2(this._lexer,t.stack.state),!i))throw Qi(this._lexer,"tokenizer state is not defined: "+t.stack.state);let r=-1,s=!1;for(const o of i){if(!rj(o.action)||o.action.nextEmbedded!=="@pop")continue;s=!0;let a=o.resolveRegex(t.stack.state);const l=a.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const h=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),h)}const c=e.search(a);c===-1||c!==0&&o.matchOnlyAtLineStart||(r===-1||c<r)&&(r=c)}if(!s)throw Qi(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return r}_nestedTokenize(e,t,i,r,s){const o=this._findLeavingNestedLanguageOffset(e,i);if(o===-1){const c=s.nestedLanguageTokenize(e,t,i.embeddedLanguageData,r);return Hd.create(i.stack,new b0(i.embeddedLanguageData.languageId,c))}const a=e.substring(0,o);a.length>0&&s.nestedLanguageTokenize(a,!1,i.embeddedLanguageData,r);const l=e.substring(o);return this._myTokenize(l,t,i,r+o,s)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,i,r,s){s.enterLanguage(this._languageId);const o=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=i.embeddedLanguageData,h=i.stack,u=0,d=null,g=!0;for(;g||u<l;){const p=u,b=h.depth,_=d?d.groups.length:0,w=h.state;let y=null,k=null,L=null,T=null,N=null;if(d){y=d.matches;const B=d.groups.shift();k=B.matched,L=B.action,T=d.rule,d.groups.length===0&&(d=null)}else{if(!g&&u>=l)break;g=!1;let B=this._lexer.tokenizer[w];if(!B&&(B=Z2(this._lexer,w),!B))throw Qi(this._lexer,"tokenizer state is not defined: "+w);const G=a.substr(u);for(const H of B)if((u===0||!H.matchOnlyAtLineStart)&&(y=G.match(H.resolveRegex(w)),y)){k=y[0],L=H.action;break}}if(y||(y=[""],k=""),L||(u<l&&(y=[a.charAt(u)],k=y[0]),L=this._lexer.defaultToken),k===null)break;for(u+=k.length;E4e(L)&&rj(L)&&L.test;)L=L.test(k,y,w,u===l);let D=null;if(typeof L=="string"||Array.isArray(L))D=L;else if(L.group)D=L.group;else if(L.token!==null&&L.token!==void 0){if(L.tokenSubst?D=zd(this._lexer,L.token,k,y,w):D=L.token,L.nextEmbedded)if(L.nextEmbedded==="@pop"){if(!c)throw Qi(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw Qi(this._lexer,"cannot enter embedded language from within an embedded language");N=zd(this._lexer,L.nextEmbedded,k,y,w)}if(L.goBack&&(u=Math.max(0,u-L.goBack)),L.switchTo&&typeof L.switchTo=="string"){let B=zd(this._lexer,L.switchTo,k,y,w);if(B[0]==="@"&&(B=B.substr(1)),Z2(this._lexer,B))h=h.switchTo(B);else throw Qi(this._lexer,"trying to switch to a state '"+B+"' that is undefined in rule: "+this._safeRuleName(T))}else{if(L.transform&&typeof L.transform=="function")throw Qi(this._lexer,"action.transform not supported");if(L.next)if(L.next==="@push"){if(h.depth>=this._lexer.maxStack)throw Qi(this._lexer,"maximum tokenizer stack size reached: ["+h.state+","+h.parent.state+",...]");h=h.push(w)}else if(L.next==="@pop"){if(h.depth<=1)throw Qi(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(T));h=h.pop()}else if(L.next==="@popall")h=h.popall();else{let B=zd(this._lexer,L.next,k,y,w);if(B[0]==="@"&&(B=B.substr(1)),Z2(this._lexer,B))h=h.push(B);else throw Qi(this._lexer,"trying to set a next state '"+B+"' that is undefined in rule: "+this._safeRuleName(T))}}L.log&&typeof L.log=="string"&&I4e(this._lexer,this._lexer.languageId+": "+zd(this._lexer,L.log,k,y,w))}if(D===null)throw Qi(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(T));const O=B=>{const G=this._languageService.getLanguageIdByLanguageName(B)||this._languageService.getLanguageIdByMimeType(B)||B,H=this._getNestedEmbeddedLanguageData(G);if(u<l){const q=e.substr(u);return this._nestedTokenize(q,t,Hd.create(h,H),r+u,s)}else return Hd.create(h,H)};if(Array.isArray(D)){if(d&&d.groups.length>0)throw Qi(this._lexer,"groups cannot be nested: "+this._safeRuleName(T));if(y.length!==D.length+1)throw Qi(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(T));let B=0;for(let G=1;G<y.length;G++)B+=y[G].length;if(B!==k.length)throw Qi(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(T));d={rule:T,matches:y,groups:[]};for(let G=0;G<D.length;G++)d.groups[G]={action:D[G],matched:y[G+1]};u-=k.length;continue}else{if(D==="@rematch"&&(u-=k.length,k="",y=null,D="",N!==null))return O(N);if(k.length===0){if(l===0||b!==h.depth||w!==h.state||(d?d.groups.length:0)!==_)continue;throw Qi(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(T))}let B=null;if($Q(D)&&D.indexOf("@brackets")===0){const G=D.substr(9),H=O4e(this._lexer,k);if(!H)throw Qi(this._lexer,"@brackets token returned but no bracket defined as: "+k);B=sj(H.token+G)}else{const G=D===""?"":D+this._lexer.tokenPostfix;B=sj(G)}p<o&&s.emit(p+r,B)}if(N!==null)return O(N)}return Hd.create(h,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new b0(e,Ew);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),qn.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=qn.get(e);return t?new b0(e,t.getInitialState()):new b0(e,Ew)}};qw=TI=A4e([R4e(4,Nn)],qw);function O4e(n,e){if(!e)return null;e=Du(n,e);const t=n.brackets;for(const i of t){if(i.open===e)return{token:i.token,bracketType:1};if(i.close===e)return{token:i.token,bracketType:-1}}return null}const B4e=Xm("standaloneColorizer",{createHTML:n=>n});class zR{static colorizeElement(e,t,i,r){r=r||{};const s=r.theme||"vs",o=r.mimeType||i.getAttribute("lang")||i.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(o)||o;e.setTheme(s);const l=i.firstChild?i.firstChild.nodeValue:"";i.className+=" "+s;const c=h=>{const u=B4e?.createHTML(h)??h;i.innerHTML=u};return this.colorize(t,l||"",a,r).then(c,h=>console.error(h))}static async colorize(e,t,i,r){const s=e.languageIdCodec;let o=4;r&&typeof r.tabSize=="number"&&(o=r.tabSize),iA(t)&&(t=t.substr(1));const a=nb(t);if(!e.isRegisteredLanguageId(i))return oj(a,o,s);const l=await qn.getOrCreate(i);return l?F4e(a,o,l,s):oj(a,o,s)}static colorizeLine(e,t,i,r,s=4){const o=La.isBasicASCII(e,t),a=La.containsRTL(e,o,i);return q5(new ub(!1,!0,e,!1,o,a,0,r,[],s,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,i=4){const r=e.getLineContent(t);e.tokenization.forceTokenization(t);const o=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(r,e.mightContainNonBasicASCII(),e.mightContainRTL(),o,i)}}function F4e(n,e,t,i){return new Promise((r,s)=>{const o=()=>{const a=W4e(n,e,t,i);if(t instanceof qw){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(o,s);return}}r(a)};o()})}function oj(n,e,t){let i=[];const s=new Uint32Array(2);s[0]=0,s[1]=33587200;for(let o=0,a=n.length;o<a;o++){const l=n[o];s[0]=l.length;const c=new jr(s,l,t),h=La.isBasicASCII(l,!0),u=La.containsRTL(l,h,!0),d=q5(new ub(!1,!0,l,!1,h,u,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(d.html),i.push("<br/>")}return i.join("")}function W4e(n,e,t,i){let r=[],s=t.getInitialState();for(let o=0,a=n.length;o<a;o++){const l=n[o],c=t.tokenizeEncoded(l,!0,s);jr.convertToEndOffset(c.tokens,l.length);const h=new jr(c.tokens,l,i),u=La.isBasicASCII(l,!0),d=La.containsRTL(l,u,!0),g=q5(new ub(!1,!0,l,!1,u,d,0,h.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));r=r.concat(g.html),r.push("<br/>"),s=c.endState}return r.join("")}var z4e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},H4e=function(n,e){return function(t,i){e(t,i,n)}},c1;let Fk=(c1=class{constructor(e,t){}dispose(){}},c1.ID="editor.contrib.markerDecorations",c1);Fk=z4e([H4e(1,FX)],Fk);NY(Fk.ID,Fk,0);class UQ extends xe{constructor(e,t){super(),this._onDidChange=this._register(new de),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()};let i=!1,r=!1;const s=()=>{if(i&&!r)try{i=!1,r=!0,t()}finally{Yo(lt(this._referenceDomElement),()=>{r=!1,s()})}};this._resizeObserver=new ResizeObserver(o=>{o&&o[0]&&o[0].contentRect?e={width:o[0].contentRect.width,height:o[0].contentRect.height}:e=null,i=!0,s()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let i=0,r=0;t?(i=t.width,r=t.height):this._referenceDomElement&&(i=this._referenceDomElement.clientWidth,r=this._referenceDomElement.clientHeight),i=Math.max(5,i),r=Math.max(5,r),(this._width!==i||this._height!==r)&&(this._width=i,this._height=r,e&&this._onDidChange.fire())}}const M0=class M0{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=M0._read(e,this.key),i=s=>M0._read(e,s),r=(s,o)=>M0._write(e,s,o);this.migrate(t,i,r)}static _read(e,t){if(typeof e>"u")return;const i=t.indexOf(".");if(i>=0){const r=t.substring(0,i);return this._read(e[r],t.substring(i+1))}return e[t]}static _write(e,t,i){const r=t.indexOf(".");if(r>=0){const s=t.substring(0,r);e[s]=e[s]||{},this._write(e[s],t.substring(r+1),i);return}e[t]=i}};M0.items=[];let Gw=M0;function Sc(n,e){Gw.items.push(new Gw(n,e))}function Qo(n,e){Sc(n,(t,i,r)=>{if(typeof t<"u"){for(const[s,o]of e)if(t===s){r(n,o);return}}})}function V4e(n){Gw.items.forEach(e=>e.apply(n))}Qo("wordWrap",[[!0,"on"],[!1,"off"]]);Qo("lineNumbers",[[!0,"on"],[!1,"off"]]);Qo("cursorBlinking",[["visible","solid"]]);Qo("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);Qo("renderLineHighlight",[[!0,"line"],[!1,"none"]]);Qo("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);Qo("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);Qo("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Qo("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Qo("autoIndent",[[!1,"advanced"],[!0,"full"]]);Qo("matchBrackets",[[!0,"always"],[!1,"never"]]);Qo("renderFinalNewline",[[!0,"on"],[!1,"off"]]);Qo("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);Qo("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]);Qo("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]);Sc("autoClosingBrackets",(n,e,t)=>{n===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});Sc("renderIndentGuides",(n,e,t)=>{typeof n<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!n))});Sc("highlightActiveIndentGuide",(n,e,t)=>{typeof n<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!n))});const $4e={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};Sc("suggest.filteredTypes",(n,e,t)=>{if(n&&typeof n=="object"){for(const i of Object.entries($4e))n[i[0]]===!1&&typeof e(`suggest.${i[1]}`)>"u"&&t(`suggest.${i[1]}`,!1);t("suggest.filteredTypes",void 0)}});Sc("quickSuggestions",(n,e,t)=>{if(typeof n=="boolean"){const i=n?"on":"off";t("quickSuggestions",{comments:i,strings:i,other:i})}});Sc("experimental.stickyScroll.enabled",(n,e,t)=>{typeof n=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",n))});Sc("experimental.stickyScroll.maxLineCount",(n,e,t)=>{typeof n=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",n))});Sc("codeActionsOnSave",(n,e,t)=>{if(n&&typeof n=="object"){let i=!1;const r={};for(const s of Object.entries(n))typeof s[1]=="boolean"?(i=!0,r[s[0]]=s[1]?"explicit":"never"):r[s[0]]=s[1];i&&t("codeActionsOnSave",r)}});Sc("codeActionWidget.includeNearbyQuickfixes",(n,e,t)=>{typeof n=="boolean"&&(t("codeActionWidget.includeNearbyQuickfixes",void 0),typeof e("codeActionWidget.includeNearbyQuickFixes")>"u"&&t("codeActionWidget.includeNearbyQuickFixes",n))});Sc("lightbulb.enabled",(n,e,t)=>{typeof n=="boolean"&&t("lightbulb.enabled",n?void 0:"off")});class j4e{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new de,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}}const Wk=new j4e;var U4e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},q4e=function(n,e){return function(t,i){e(t,i,n)}};let DI=class extends xe{constructor(e,t,i,r,s){super(),this._accessibilityService=s,this._onDidChange=this._register(new de),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new de),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new EK,this.isSimpleWidget=e,this.contextMenuId=t,this._containerObserver=this._register(new UQ(r,i.dimension)),this._targetWindowId=lt(r).vscodeWindowId,this._rawOptions=aj(i),this._validatedOptions=Vd.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(Bd.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(Wk.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(s8.onDidChange(()=>this._recomputeOptions())),this._register(Bx.getInstance(lt(r)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=Vd.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=em.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(t),r={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:Wk.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return Vd.computeOptions(this._validatedOptions,r)}_readEnvConfiguration(){return{extraEditorClassName:K4e(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:JL||Cl,pixelRatio:Bx.getInstance(Fz(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return s8.readFontInfo(Fz(this._targetWindowId,!0).window,e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=aj(e);Vd.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=Vd.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=G4e(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}};DI=U4e([q4e(4,yc)],DI);function G4e(n){let e=0;for(;n;)n=Math.floor(n/10),e++;return e||1}function K4e(){let n="";return!uf&&!JK&&(n+="no-user-select "),uf&&(n+="no-minimap-shadow ",n+="enable-user-select "),hi&&(n+="mac "),n}class Y4e{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class Z4e{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class Vd{static validateOptions(e){const t=new Y4e;for(const i of i0){const r=i.name==="_never_"?void 0:e[i.name];t._write(i.id,i.validate(r))}return t}static computeOptions(e,t){const i=new Z4e;for(const r of i0)i._write(r.id,r.compute(t,i,e._read(r.id)));return i}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?_r(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!Vd._deepEquals(e[i],t[i]))return!1;return!0}static checkEquals(e,t){const i=[];let r=!1;for(const s of i0){const o=!Vd._deepEquals(e._read(s.id),t._read(s.id));i[s.id]=o,o&&(r=!0)}return r?new DK(i):null}static applyUpdate(e,t){let i=!1;for(const r of i0)if(t.hasOwnProperty(r.name)){const s=r.applyUpdate(e[r.name],t[r.name]);e[r.name]=s.newValue,i=i||s.didChange}return i}}function aj(n){const e=Ed(n);return V4e(e),e}var Yd;(function(n){const e={total:0,min:Number.MAX_VALUE,max:0},t={...e},i={...e},r={...e};let s=0;const o={keydown:0,input:0,render:0};function a(){w(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),o.keydown=1,queueMicrotask(l)}n.onKeyDown=a;function l(){o.keydown===1&&(performance.mark("keydown/end"),o.keydown=2)}function c(){performance.mark("input/start"),o.input=1,_()}n.onBeforeInput=c;function h(){o.input===0&&c(),queueMicrotask(u)}n.onInput=h;function u(){o.input===1&&(performance.mark("input/end"),o.input=2)}function d(){w()}n.onKeyUp=d;function g(){w()}n.onSelectionChange=g;function p(){o.keydown===2&&o.input===2&&o.render===0&&(performance.mark("render/start"),o.render=1,queueMicrotask(b),_())}n.onRenderStart=p;function b(){o.render===1&&(performance.mark("render/end"),o.render=2)}function _(){setTimeout(w)}function w(){o.keydown===2&&o.input===2&&o.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),y("keydown",e),y("input",t),y("render",i),y("inputlatency",r),s++,k())}function y(D,O){const B=performance.getEntriesByName(D)[0].duration;O.total+=B,O.min=Math.min(O.min,B),O.max=Math.max(O.max,B)}function k(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),o.keydown=0,o.input=0,o.render=0}function L(){if(s===0)return;const D={keydown:T(e),input:T(t),render:T(i),total:T(r),sampleCount:s};return N(e),N(t),N(i),N(r),s=0,D}n.getAndClearMeasurements=L;function T(D){return{average:D.total/s,max:D.max,min:D.min}}function N(D){D.total=0,D.min=Number.MAX_VALUE,D.max=0}})(Yd||(Yd={}));class G5{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(e){return new qQ(this.x-e.scrollX,this.y-e.scrollY)}}class qQ{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(e){return new G5(this.clientX+e.scrollX,this.clientY+e.scrollY)}}class X4e{constructor(e,t,i,r){this.x=e,this.y=t,this.width=i,this.height=r,this._editorPagePositionBrand=void 0}}class Q4e{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function HR(n){const e=qa(n);return new X4e(e.left,e.top,e.width,e.height)}function VR(n,e,t){const i=e.width/n.offsetWidth,r=e.height/n.offsetHeight,s=(t.x-e.x)/i,o=(t.y-e.y)/r;return new Q4e(s,o)}class bf extends ac{constructor(e,t,i){super(lt(i),e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new G5(this.posx,this.posy),this.editorPos=HR(i),this.relativePos=VR(i,this.editorPos,this.pos)}}class J4e{constructor(e){this._editorViewDomNode=e}_create(e){return new bf(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return we(e,"contextmenu",i=>{t(this._create(i))})}onMouseUp(e,t){return we(e,"mouseup",i=>{t(this._create(i))})}onMouseDown(e,t){return we(e,Be.MOUSE_DOWN,i=>{t(this._create(i))})}onPointerDown(e,t){return we(e,Be.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onMouseLeave(e,t){return we(e,Be.MOUSE_LEAVE,i=>{t(this._create(i))})}onMouseMove(e,t){return we(e,"mousemove",i=>t(this._create(i)))}}class eLe{constructor(e){this._editorViewDomNode=e}_create(e){return new bf(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return we(e,"pointerup",i=>{t(this._create(i))})}onPointerDown(e,t){return we(e,Be.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onPointerLeave(e,t){return we(e,Be.POINTER_LEAVE,i=>{t(this._create(i))})}onPointerMove(e,t){return we(e,"pointermove",i=>t(this._create(i)))}}class tLe extends xe{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new y5),this._keydownListener=null}startMonitoring(e,t,i,r,s){this._keydownListener=Er(e.ownerDocument,"keydown",o=>{o.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,o.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,i,o=>{r(new bf(o,!0,this._editorViewDomNode))},o=>{this._keydownListener.dispose(),s(o)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}class jy extends xe{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let i=0,r=e.length;i<r;i++){const s=e[i];switch(s.type){case 0:this.onCompositionStart(s)&&(t=!0);break;case 1:this.onCompositionEnd(s)&&(t=!0);break;case 2:this.onConfigurationChanged(s)&&(t=!0);break;case 3:this.onCursorStateChanged(s)&&(t=!0);break;case 4:this.onDecorationsChanged(s)&&(t=!0);break;case 5:this.onFlushed(s)&&(t=!0);break;case 6:this.onFocusChanged(s)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(s)&&(t=!0);break;case 8:this.onLineMappingChanged(s)&&(t=!0);break;case 9:this.onLinesChanged(s)&&(t=!0);break;case 10:this.onLinesDeleted(s)&&(t=!0);break;case 11:this.onLinesInserted(s)&&(t=!0);break;case 12:this.onRevealRangeRequest(s)&&(t=!0);break;case 13:this.onScrollChanged(s)&&(t=!0);break;case 15:this.onTokensChanged(s)&&(t=!0);break;case 14:this.onThemeChanged(s)&&(t=!0);break;case 16:this.onTokensColorsChanged(s)&&(t=!0);break;case 17:this.onZonesChanged(s)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(s)}}t&&(this._shouldRender=!0)}}class Jo extends jy{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class _c{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const i=[];let r=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[r++]=this.read(e)),e=e.parentElement;const s=new Uint8Array(r);for(let o=0;o<r;o++)s[o]=i[r-o-1];return s}}class iLe{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class nLe extends iLe{constructor(e,t,i){super(e,t),this._renderingContextBrand=void 0,this._viewLines=i}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class rLe{constructor(e,t,i,r){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=i,this.continuesOnNextLine=r}}class K5{static from(e){const t=new Array(e.length);for(let i=0,r=e.length;i<r;i++){const s=e[i];t[i]=new K5(s.left,s.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}class am{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class sLe{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class lj{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class QS{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,i,r,s){const o=this._createRange();try{return o.setStart(e,t),o.setEnd(i,r),o.getClientRects()}catch{return null}finally{this._detachRange(o,s)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(am.compare);const t=[];let i=0,r=e[0];for(let s=1,o=e.length;s<o;s++){const a=e[s];r.left+r.width+.9>=a.left?r.width=Math.max(r.width,a.left+a.width-r.left):(t[i++]=r,r=a)}return t[i++]=r,t}static _createHorizontalRangesFromClientRects(e,t,i){if(!e||e.length===0)return null;const r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s];r[s]=new am(Math.max(0,(a.left-t)/i),a.width/i)}return this._mergeAdjacentRanges(r)}static readHorizontalRanges(e,t,i,r,s,o){const l=e.children.length-1;if(0>l)return null;if(t=Math.min(l,Math.max(0,t)),r=Math.min(l,Math.max(0,r)),t===r&&i===s&&i===0&&!e.children[t].firstChild){const d=e.children[t].getClientRects();return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(d,o.clientRectDeltaLeft,o.clientRectScale)}t!==r&&r>0&&s===0&&(r--,s=1073741824);let c=e.children[t].firstChild,h=e.children[r].firstChild;if((!c||!h)&&(!c&&i===0&&t>0&&(c=e.children[t-1].firstChild,i=1073741824),!h&&s===0&&r>0&&(h=e.children[r-1].firstChild,s=1073741824)),!c||!h)return null;i=Math.min(c.textContent.length,Math.max(0,i)),s=Math.min(h.textContent.length,Math.max(0,s));const u=this._readClientRects(c,i,h,s,o.endNode);return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(u,o.clientRectDeltaLeft,o.clientRectScale)}}const oLe=function(){return Lx?!0:!(wo||Cl||uf)}();let t1=!0;class cj{constructor(e,t){this.themeType=t;const i=e.options,r=i.get(50);i.get(38)==="off"?this.renderWhitespace=i.get(100):this.renderWhitespace="none",this.renderControlCharacters=i.get(95),this.spaceWidth=r.spaceWidth,this.middotWidth=r.middotWidth,this.wsmiddotWidth=r.wsmiddotWidth,this.useMonospaceOptimizations=r.isMonospace&&!i.get(33),this.canUseHalfwidthRightwardsArrow=r.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(67),this.stopRenderingLineAfter=i.get(118),this.fontLigatures=i.get(51)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}const EL=class EL{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=bi(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return V0(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,i,r,s){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const o=r.getViewLineRenderingData(e),a=this._options,l=pl.filter(o.inlineDecorations,e,o.minColumn,o.maxColumn);let c=null;if(V0(a.themeType)||this._options.renderWhitespace==="selection"){const g=r.selections;for(const p of g){if(p.endLineNumber<e||p.startLineNumber>e)continue;const b=p.startLineNumber===e?p.startColumn:o.minColumn,_=p.endLineNumber===e?p.endColumn:o.maxColumn;b<_&&(V0(a.themeType)&&l.push(new pl(b,_,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(c||(c=[]),c.push(new WQ(b-1,_-1))))}}const h=new ub(a.useMonospaceOptimizations,a.canUseHalfwidthRightwardsArrow,o.content,o.continuesWithWrappedLine,o.isBasicASCII,o.containsRTL,o.minColumn-1,o.tokens,l,o.tabSize,o.startVisibleColumn,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,a.stopRenderingLineAfter,a.renderWhitespace,a.renderControlCharacters,a.fontLigatures!==Cm.OFF,c);if(this._renderedViewLine&&this._renderedViewLine.input.equals(h))return!1;s.appendString('<div style="top:'),s.appendString(String(t)),s.appendString("px;height:"),s.appendString(String(i)),s.appendString('px;" class="'),s.appendString(EL.CLASS_NAME),s.appendString('">');const u=FR(h,s);s.appendString("</div>");let d=null;return t1&&oLe&&o.isBasicASCII&&a.useMonospaceOptimizations&&u.containsForeignElements===0&&(d=new X2(this._renderedViewLine?this._renderedViewLine.domNode:null,h,u.characterMapping)),d||(d=KQ(this._renderedViewLine?this._renderedViewLine.domNode:null,h,u.characterMapping,u.containsRTL,u.containsForeignElements)),this._renderedViewLine=d,!0}layoutLine(e,t,i){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(i))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof X2:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof X2?this._renderedViewLine.monospaceAssumptionsAreValid():t1}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof X2&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,i,r){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));const s=this._renderedViewLine.input.stopRenderingLineAfter;if(s!==-1&&t>s+1&&i>s+1)return new lj(!0,[new am(this.getWidth(r),0)]);s!==-1&&t>s+1&&(t=s+1),s!==-1&&i>s+1&&(i=s+1);const o=this._renderedViewLine.getVisibleRangesForRange(e,t,i,r);return o&&o.length>0?new lj(!1,o):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}};EL.CLASS_NAME="view-line";let du=EL;class X2{constructor(e,t,i){this._cachedWidth=-1,this.domNode=e,this.input=t;const r=Math.floor(t.lineContent.length/300);if(r>0){this._keyColumnPixelOffsetCache=new Float32Array(r);for(let s=0;s<r;s++)this._keyColumnPixelOffsetCache[s]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=i,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e?.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return t1;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),t1=!1)}return t1}toSlowRenderedLine(){return KQ(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,i,r){const s=this._getColumnPixelOffset(e,t,r),o=this._getColumnPixelOffset(e,i,r);return[new am(s,o-s)]}_getColumnPixelOffset(e,t,i){if(t<=300){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const r=Math.floor((t-1)/300)-1,s=(r+1)*300+1;let o=-1;if(this._keyColumnPixelOffsetCache&&(o=this._keyColumnPixelOffsetCache[r],o===-1&&(o=this._actualReadPixelOffset(e,s,i),this._keyColumnPixelOffsetCache[r]=o)),o===-1){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const a=this._characterMapping.getHorizontalOffset(s),l=this._characterMapping.getHorizontalOffset(t);return o+this._charWidth*(l-a)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,i){if(!this.domNode)return-1;const r=this._characterMapping.getDomPosition(t),s=QS.readHorizontalRanges(this._getReadingTarget(this.domNode),r.partIndex,r.charIndex,r.partIndex,r.charIndex,i);return!s||s.length===0?-1:s[0].left}getColumnOfNodeOffset(e,t){return YQ(this._characterMapping,e,t)}}class GQ{constructor(e,t,i,r,s){if(this.domNode=e,this.input=t,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=s,this._cachedWidth=-1,this._pixelOffsetCache=null,!r||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let o=0,a=this._characterMapping.length;o<=a;o++)this._pixelOffsetCache[o]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e?.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,i,r){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const s=this._readPixelOffset(this.domNode,e,t,r);if(s===-1)return null;const o=this._readPixelOffset(this.domNode,e,i,r);return o===-1?null:[new am(s,o-s)]}return this._readVisibleRangesForRange(this.domNode,e,t,i,r)}_readVisibleRangesForRange(e,t,i,r,s){if(i===r){const o=this._readPixelOffset(e,t,i,s);return o===-1?null:[new am(o,0)]}else return this._readRawVisibleRangesForRange(e,i,r,s)}_readPixelOffset(e,t,i,r){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(r);const s=this._getReadingTarget(e);return s.firstChild?(r.markDidDomLayout(),s.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const s=this._pixelOffsetCache[i];if(s!==-1)return s;const o=this._actualReadPixelOffset(e,t,i,r);return this._pixelOffsetCache[i]=o,o}return this._actualReadPixelOffset(e,t,i,r)}_actualReadPixelOffset(e,t,i,r){if(this._characterMapping.length===0){const l=QS.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,r);return!l||l.length===0?-1:l[0].left}if(i===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(r);const s=this._characterMapping.getDomPosition(i),o=QS.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,s.partIndex,s.charIndex,r);if(!o||o.length===0)return-1;const a=o[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(i),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,i,r){if(t===1&&i===this._characterMapping.length)return[new am(0,this.getWidth(r))];const s=this._characterMapping.getDomPosition(t),o=this._characterMapping.getDomPosition(i);return QS.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,o.partIndex,o.charIndex,r)}getColumnOfNodeOffset(e,t){return YQ(this._characterMapping,e,t)}}class aLe extends GQ{_readVisibleRangesForRange(e,t,i,r,s){const o=super._readVisibleRangesForRange(e,t,i,r,s);if(!o||o.length===0||i===r||i===1&&r===this._characterMapping.length)return o;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,r,s);if(a!==-1){const l=o[o.length-1];l.left<a&&(l.width=a-l.left)}}return o}}const KQ=function(){return JL?lLe:cLe}();function lLe(n,e,t,i,r){return new aLe(n,e,t,i,r)}function cLe(n,e,t,i,r){return new GQ(n,e,t,i,r)}function YQ(n,e,t){const i=e.textContent.length;let r=-1;for(;e;)e=e.previousSibling,r++;return n.getColumn(new zQ(r,t),i)}class Kw{static whitespaceVisibleColumn(e,t,i){const r=e.length;let s=0,o=-1,a=-1;for(let l=0;l<r;l++){if(l===t)return[o,a,s];switch(s%i===0&&(o=l,a=s),e.charCodeAt(l)){case 32:s+=1;break;case 9:s=gr.nextRenderTabStop(s,i);break;default:return[-1,-1,-1]}}return t===r?[o,a,s]:[-1,-1,-1]}static atomicPosition(e,t,i,r){const s=e.length,[o,a,l]=Kw.whitespaceVisibleColumn(e,t,i);if(l===-1)return-1;let c;switch(r){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%i===0)return t;c=l%i<=i/2;break}if(c){if(o===-1)return-1;let d=a;for(let g=o;g<s;++g){if(d===a+i)return o;switch(e.charCodeAt(g)){case 32:d+=1;break;case 9:d=gr.nextRenderTabStop(d,i);break;default:return-1}}return d===a+i?o:-1}const h=gr.nextRenderTabStop(l,i);let u=l;for(let d=t;d<s;d++){if(u===h)return d;switch(e.charCodeAt(d)){case 32:u+=1;break;case 9:u=gr.nextRenderTabStop(u,i);break;default:return-1}}return u===h?s:-1}}class Td{constructor(e=null){this.hitTarget=e,this.type=0}}class ZQ{get hitTarget(){return this.spanNode}constructor(e,t,i){this.position=e,this.spanNode=t,this.injectedText=i,this.type=1}}var Ag;(function(n){function e(t,i,r){const s=t.getPositionFromDOMInfo(i,r);return s?new ZQ(s,i,null):new Td(i)}n.createFromDOMInfo=e})(Ag||(Ag={}));class hLe{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class Is{static _deduceRage(e,t=null){return!t&&e?new oe(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,i){return{type:0,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,i,r,s,o){return{type:e,element:t,mouseColumn:i,position:r,range:s,detail:o}}static createViewZone(e,t,i,r,s){return{type:e,element:t,mouseColumn:i,position:r,range:this._deduceRage(r),detail:s}}static createContentText(e,t,i,r,s){return{type:6,element:e,mouseColumn:t,position:i,range:this._deduceRage(i,r),detail:s}}static createContentEmpty(e,t,i,r){return{type:7,element:e,mouseColumn:t,position:i,range:this._deduceRage(i),detail:r}}static createContentWidget(e,t,i){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createScrollbar(e,t,i){return{type:11,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createOverlayWidget(e,t,i){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createOutsideEditor(e,t,i,r){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:i,outsideDistance:r}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class Hs{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===7}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===8}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===8}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===6}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===9}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowGuard(e){return e.length>=1&&e[0]===3}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}static isChildOfOverflowingOverlayWidgets(e){return e.length>=1&&e[0]===5}}class H1{constructor(e,t,i){this.viewModel=e.viewModel;const r=e.configuration.options;this.layoutInfo=r.get(146),this.viewDomNode=t.viewDomNode,this.lineHeight=r.get(67),this.stickyTabStops=r.get(117),this.typicalHalfwidthCharacterWidth=r.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return H1.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const i=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(i){const r=i.verticalOffset+i.height/2,s=e.viewModel.getLineCount();let o=null,a,l=null;return i.afterLineNumber!==s&&(l=new be(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(o=new be(i.afterLineNumber,e.viewModel.getLineMaxColumn(i.afterLineNumber))),l===null?a=o:o===null?a=l:t<r?a=o:a=l,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:o,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const r=this._context.viewModel.getLineCount(),s=this._context.viewModel.getLineMaxColumn(r);return{range:new oe(r,s,r,s),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),i=this._context.viewModel.getLineMaxColumn(t);return{range:new oe(t,1,t,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return H1._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,i){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===i)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class uLe{constructor(e,t,i,r){this.editorPos=t,this.pos=i,this.relativePos=r,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,Es._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class dLe extends uLe{get target(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}get targetPath(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=_c.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue}constructor(e,t,i,r,s){super(e,t,i,r),this.hitTestResult=new cf(()=>Es.doHitTest(this._ctx,this)),this._targetPathCacheElement=null,this._targetPathCacheValue=new Uint8Array(0),this._ctx=e,this._eventTarget=s;const o=!!this._eventTarget;this._useHitTestTarget=!o}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}get wouldBenefitFromHitTestTargetSwitch(){return!this._useHitTestTarget&&this.hitTestResult.value.hitTarget!==null&&this.target!==this.hitTestResult.value.hitTarget}switchToHitTestTarget(){this._useHitTestTarget=!0}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?gr.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return Is.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return Is.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,i,r){return Is.createMargin(e,this.target,this._getMouseColumn(t),t,i,r)}fulfillViewZone(e,t,i){return Is.createViewZone(e,this.target,this._getMouseColumn(t),t,i)}fulfillContentText(e,t,i){return Is.createContentText(this.target,this._getMouseColumn(e),e,t,i)}fulfillContentEmpty(e,t){return Is.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return Is.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return Is.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return Is.createOverlayWidget(this.target,this._getMouseColumn(),e)}}const hj={isAfterLines:!0};function A6(n){return{isAfterLines:!1,horizontalDistanceToText:n}}class Es{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,i=_c.collect(t,this._viewHelper.viewDomNode);return!!(Hs.isChildOfContentWidgets(i)||Hs.isChildOfOverflowingContentWidgets(i)||Hs.isChildOfOverlayWidgets(i)||Hs.isChildOfOverflowingOverlayWidgets(i))}createMouseTarget(e,t,i,r,s){const o=new H1(this._context,this._viewHelper,e),a=new dLe(o,t,i,r,s);try{const l=Es._createMouseTarget(o,a);if(l.type===6&&o.stickyTabStops&&l.position!==null){const c=Es._snapToSoftTabBoundary(l.position,o.viewModel),h=oe.fromPositions(c,c).plusRange(l.range);return a.fulfillContentText(c,h,l.detail)}return l}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t){if(t.target===null)return t.fulfillUnknown();const i=t;let r=null;return!Hs.isChildOfOverflowGuard(t.targetPath)&&!Hs.isChildOfOverflowingContentWidgets(t.targetPath)&&!Hs.isChildOfOverflowingOverlayWidgets(t.targetPath)&&(r=r||t.fulfillUnknown()),r=r||Es._hitTestContentWidget(e,i),r=r||Es._hitTestOverlayWidget(e,i),r=r||Es._hitTestMinimap(e,i),r=r||Es._hitTestScrollbarSlider(e,i),r=r||Es._hitTestViewZone(e,i),r=r||Es._hitTestMargin(e,i),r=r||Es._hitTestViewCursor(e,i),r=r||Es._hitTestTextArea(e,i),r=r||Es._hitTestViewLines(e,i),r=r||Es._hitTestScrollbar(e,i),r||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(Hs.isChildOfContentWidgets(t.targetPath)||Hs.isChildOfOverflowingContentWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillContentWidget(i):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(Hs.isChildOfOverlayWidgets(t.targetPath)||Hs.isChildOfOverflowingOverlayWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillOverlayWidget(i):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const i=e.lastRenderData.lastViewCursorsRenderData;for(const r of i)if(t.target===r.domNode)return t.fulfillContentText(r.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const i=e.lastRenderData.lastViewCursorsRenderData,r=t.mouseContentHorizontalOffset,s=t.mouseVerticalOffset;for(const o of i){if(r<o.contentLeft||r>o.contentLeft+o.width)continue;const a=e.getVerticalOffsetForLineNumber(o.position.lineNumber);if(a<=s&&s<=a+o.height)return t.fulfillContentText(o.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const i=e.getZoneAtCoord(t.mouseVerticalOffset);if(i){const r=t.isInContentArea?8:5;return t.fulfillViewZone(r,i.position,i)}return null}static _hitTestTextArea(e,t){return Hs.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const i=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),r=i.range.getStartPosition();let s=Math.abs(t.relativePos.x);const o={isAfterLines:i.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:s};if(s-=e.layoutInfo.glyphMarginLeft,s<=e.layoutInfo.glyphMarginWidth){const a=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(i.range.getStartPosition()),l=e.viewModel.glyphLanes.getLanesAtLine(a.lineNumber);return o.glyphMarginLane=l[Math.floor(s/e.lineHeight)],t.fulfillMargin(2,r,i.range,o)}return s-=e.layoutInfo.glyphMarginWidth,s<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,r,i.range,o):(s-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,r,i.range,o))}return null}static _hitTestViewLines(e,t){if(!Hs.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new be(1,1),hj);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const r=e.viewModel.getLineCount(),s=e.viewModel.getLineMaxColumn(r);return t.fulfillContentEmpty(new be(r,s),hj)}if(Hs.isStrictChildOfViewLines(t.targetPath)){const r=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(r)===0){const o=e.getLineWidth(r),a=A6(t.mouseContentHorizontalOffset-o);return t.fulfillContentEmpty(new be(r,1),a)}const s=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>=s){const o=A6(t.mouseContentHorizontalOffset-s),a=new be(r,e.viewModel.getLineMaxColumn(r));return t.fulfillContentEmpty(a,o)}}const i=t.hitTestResult.value;return i.type===1?Es.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):t.wouldBenefitFromHitTestTargetSwitch?(t.switchToHitTestTarget(),this._createMouseTarget(e,t)):t.fulfillUnknown()}static _hitTestMinimap(e,t){if(Hs.isChildOfMinimap(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new be(i,r))}return null}static _hitTestScrollbarSlider(e,t){if(Hs.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const i=t.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){const r=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(r);return t.fulfillScrollbar(new be(r,s))}}return null}static _hitTestScrollbar(e,t){if(Hs.isChildOfScrollableElement(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new be(i,r))}return null}getMouseColumn(e){const t=this._context.configuration.options,i=t.get(146),r=this._context.viewLayout.getCurrentScrollLeft()+e.x-i.contentLeft;return Es._getMouseColumn(r,t.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,i,r,s){const o=r.lineNumber,a=r.column,l=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>l){const w=A6(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(r,w)}const c=e.visibleRangeForPosition(o,a);if(!c)return t.fulfillUnknown(r);const h=c.left;if(Math.abs(t.mouseContentHorizontalOffset-h)<1)return t.fulfillContentText(r,null,{mightBeForeignElement:!!s,injectedText:s});const u=[];if(u.push({offset:c.left,column:a}),a>1){const w=e.visibleRangeForPosition(o,a-1);w&&u.push({offset:w.left,column:a-1})}const d=e.viewModel.getLineMaxColumn(o);if(a<d){const w=e.visibleRangeForPosition(o,a+1);w&&u.push({offset:w.left,column:a+1})}u.sort((w,y)=>w.offset-y.offset);const g=t.pos.toClientCoordinates(lt(e.viewDomNode)),p=i.getBoundingClientRect(),b=p.left<=g.clientX&&g.clientX<=p.right;let _=null;for(let w=1;w<u.length;w++){const y=u[w-1],k=u[w];if(y.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=k.offset){_=new oe(o,y.column,o,k.column);const L=Math.abs(y.offset-t.mouseContentHorizontalOffset),T=Math.abs(k.offset-t.mouseContentHorizontalOffset);r=L<T?new be(o,y.column):new be(o,k.column);break}}return t.fulfillContentText(r,_,{mightBeForeignElement:!b||!!s,injectedText:s})}static _doHitTestWithCaretRangeFromPoint(e,t){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.getVerticalOffsetForLineNumber(i),s=r+e.lineHeight;if(!(i===e.viewModel.getLineCount()&&t.mouseVerticalOffset>s)){const a=Math.floor((r+s)/2);let l=t.pos.y+(a-t.mouseVerticalOffset);l<=t.editorPos.y&&(l=t.editorPos.y+1),l>=t.editorPos.y+t.editorPos.height&&(l=t.editorPos.y+t.editorPos.height-1);const c=new G5(t.pos.x,l),h=this._actualDoHitTestWithCaretRangeFromPoint(e,c.toClientCoordinates(lt(e.viewDomNode)));if(h.type===1)return h}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates(lt(e.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const i=x1(e.viewDomNode);let r;if(i?typeof i.caretRangeFromPoint>"u"?r=fLe(i,t.clientX,t.clientY):r=i.caretRangeFromPoint(t.clientX,t.clientY):r=e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!r||!r.startContainer)return new Td;const s=r.startContainer;if(s.nodeType===s.TEXT_NODE){const o=s.parentNode,a=o?o.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===du.CLASS_NAME?Ag.createFromDOMInfo(e,o,r.startOffset):new Td(s.parentNode)}else if(s.nodeType===s.ELEMENT_NODE){const o=s.parentNode,a=o?o.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===du.CLASS_NAME?Ag.createFromDOMInfo(e,s,s.textContent.length):new Td(s)}return new Td}static _doHitTestWithCaretPositionFromPoint(e,t){const i=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){const r=i.offsetNode.parentNode,s=r?r.parentNode:null,o=s?s.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===du.CLASS_NAME?Ag.createFromDOMInfo(e,i.offsetNode.parentNode,i.offset):new Td(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){const r=i.offsetNode.parentNode,s=r&&r.nodeType===r.ELEMENT_NODE?r.className:null,o=r?r.parentNode:null,a=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;if(s===du.CLASS_NAME){const l=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(l)return Ag.createFromDOMInfo(e,l,0)}else if(a===du.CLASS_NAME)return Ag.createFromDOMInfo(e,i.offsetNode,0)}return new Td(i.offsetNode)}static _snapToSoftTabBoundary(e,t){const i=t.getLineContent(e.lineNumber),{tabSize:r}=t.model.getOptions(),s=Kw.atomicPosition(i,e.column-1,r,2);return s!==-1?new be(e.lineNumber,s+1):e}static doHitTest(e,t){let i=new Td;if(typeof e.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?i=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates(lt(e.viewDomNode)))),i.type===1){const r=e.viewModel.getInjectedTextAt(i.position),s=e.viewModel.normalizePosition(i.position,2);(r||!s.equals(i.position))&&(i=new ZQ(s,i.spanNode,r))}return i}}function fLe(n,e,t){const i=document.createRange();let r=n.elementFromPoint(e,t);if(r!==null){for(;r&&r.firstChild&&r.firstChild.nodeType!==r.firstChild.TEXT_NODE&&r.lastChild&&r.lastChild.firstChild;)r=r.lastChild;const s=r.getBoundingClientRect(),o=lt(r),a=o.getComputedStyle(r,null).getPropertyValue("font-style"),l=o.getComputedStyle(r,null).getPropertyValue("font-variant"),c=o.getComputedStyle(r,null).getPropertyValue("font-weight"),h=o.getComputedStyle(r,null).getPropertyValue("font-size"),u=o.getComputedStyle(r,null).getPropertyValue("line-height"),d=o.getComputedStyle(r,null).getPropertyValue("font-family"),g=`${a} ${l} ${c} ${h}/${u} ${d}`,p=r.innerText;let b=s.left,_=0,w;if(e>s.left+s.width)_=p.length;else{const y=EI.getInstance();for(let k=0;k<p.length+1;k++){if(w=y.getCharWidth(p.charAt(k),g)/2,b+=w,e<b){_=k;break}b+=w}}i.setStart(r.firstChild,_),i.setEnd(r.firstChild,_)}return i}const zg=class zg{static getInstance(){return zg._INSTANCE||(zg._INSTANCE=new zg),zg._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const i=e+t;if(this._cache[i])return this._cache[i];const r=this._canvas.getContext("2d");r.font=t;const o=r.measureText(e).width;return this._cache[i]=o,o}};zg._INSTANCE=null;let EI=zg;class $R extends jy{constructor(e,t,i){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new Es(this._context,i),this._mouseDownOperation=this._register(new gLe(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(o,a)=>this._createMouseTarget(o,a),o=>this._getMouseColumn(o))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(146).height;const r=new J4e(this.viewHelper.viewDomNode);this._register(r.onContextMenu(this.viewHelper.viewDomNode,o=>this._onContextMenu(o,!0))),this._register(r.onMouseMove(this.viewHelper.viewDomNode,o=>{this._onMouseMove(o),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=we(this.viewHelper.viewDomNode.ownerDocument,"mousemove",a=>{this.viewHelper.viewDomNode.contains(a.target)||this._onMouseLeave(new bf(a,!1,this.viewHelper.viewDomNode))}))})),this._register(r.onMouseUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(r.onMouseLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o)));let s=0;this._register(r.onPointerDown(this.viewHelper.viewDomNode,(o,a)=>{s=a})),this._register(we(this.viewHelper.viewDomNode,Be.POINTER_UP,o=>{this._mouseDownOperation.onPointerUp()})),this._register(r.onMouseDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o,s))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=ek.INSTANCE;let t=0,i=Bd.getZoomLevel(),r=!1,s=0;const o=l=>{if(this.viewController.emitMouseWheel(l),!this._context.configuration.options.get(76))return;const c=new xm(l);if(e.acceptStandardWheelEvent(c),e.isPhysicalMouseWheel()){if(a(l)){const h=Bd.getZoomLevel(),u=c.deltaY>0?1:-1;Bd.setZoomLevel(h+u),c.preventDefault(),c.stopPropagation()}}else Date.now()-t>50&&(i=Bd.getZoomLevel(),r=a(l),s=0),t=Date.now(),s+=c.deltaY,r&&(Bd.setZoomLevel(i+s/5),c.preventDefault(),c.stopPropagation())};this._register(we(this.viewHelper.viewDomNode,Be.MOUSE_WHEEL,o,{capture:!0,passive:!1}));function a(l){return hi?(l.metaKey||l.ctrlKey)&&!l.shiftKey&&!l.altKey:l.ctrlKey&&!l.metaKey&&!l.shiftKey&&!l.altKey}}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(146)){const t=this._context.configuration.options.get(146).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const r=new qQ(e,t).toPageCoordinates(lt(this.viewHelper.viewDomNode)),s=HR(this.viewHelper.viewDomNode);if(r.y<s.y||r.y>s.y+s.height||r.x<s.x||r.x>s.x+s.width)return null;const o=VR(this.viewHelper.viewDomNode,s,r);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),s,r,o,null)}_createMouseTarget(e,t){let i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){const r=x1(this.viewHelper.viewDomNode);r&&(i=r.elementsFromPoint(e.posx,e.posy).find(s=>this.viewHelper.viewDomNode.contains(s)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?i:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const i=this._createMouseTarget(e,!0),r=i.type===6||i.type===7,s=i.type===2||i.type===3||i.type===4,o=i.type===3,a=this._context.configuration.options.get(110),l=i.type===8||i.type===5,c=i.type===9;let h=e.leftButton||e.middleButton;hi&&e.leftButton&&e.ctrlKey&&(h=!1);const u=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(h&&(r||o&&a))u(),this._mouseDownOperation.start(i.type,e,t);else if(s)e.preventDefault();else if(l){const d=i.detail;h&&this.viewHelper.shouldSuppressMouseDownOnViewZone(d.viewZoneId)&&(u(),this._mouseDownOperation.start(i.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(i.detail)&&(u(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:i})}}class gLe extends xe{constructor(e,t,i,r,s,o){super(),this._context=e,this._viewController=t,this._viewHelper=i,this._mouseTargetFactory=r,this._createMouseTarget=s,this._getMouseColumn=o,this._mouseMoveMonitor=this._register(new tLe(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new mLe(this._context,this._viewHelper,this._mouseTargetFactory,(a,l,c)=>this._dispatchMouse(a,l,c))),this._mouseState=new II,this._currentSelection=new $i(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):t.type===13&&(t.outsidePosition==="above"||t.outsidePosition==="below")?this._topBottomDragScrolling.start(t,e):(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)))}start(e,t,i){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const r=this._findMousePosition(t,!0);if(!r||!r.position)return;this._mouseState.trySetCount(t.detail,r.position),t.detail=this._mouseState.count;const s=this._context.configuration.options;if(!s.get(92)&&s.get(35)&&!s.get(22)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&r.type===6&&r.position&&this._currentSelection.containsPosition(r.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,o=>this._onMouseDownThenMove(o),o=>{const a=this._findMousePosition(this._lastMouseEvent,!1);iu(o)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(r,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,o=>this._onMouseDownThenMove(o),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,i=this._context.viewModel,r=this._context.viewLayout,s=this._getMouseColumn(e);if(e.posy<t.y){const a=t.y-e.posy,l=Math.max(r.getCurrentScrollTop()-a,0),c=H1.getZoneAtCoord(this._context,l);if(c){const u=this._helpPositionJumpOverViewZone(c);if(u)return Is.createOutsideEditor(s,u,"above",a)}const h=r.getLineNumberAtVerticalOffset(l);return Is.createOutsideEditor(s,new be(h,1),"above",a)}if(e.posy>t.y+t.height){const a=e.posy-t.y-t.height,l=r.getCurrentScrollTop()+e.relativePos.y,c=H1.getZoneAtCoord(this._context,l);if(c){const u=this._helpPositionJumpOverViewZone(c);if(u)return Is.createOutsideEditor(s,u,"below",a)}const h=r.getLineNumberAtVerticalOffset(l);return Is.createOutsideEditor(s,new be(h,i.getLineMaxColumn(h)),"below",a)}const o=r.getLineNumberAtVerticalOffset(r.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const a=t.x-e.posx;return Is.createOutsideEditor(s,new be(o,1),"left",a)}if(e.posx>t.x+t.width){const a=e.posx-t.x-t.width;return Is.createOutsideEditor(s,new be(o,i.getLineMaxColumn(o)),"right",a)}return null}_findMousePosition(e,t){const i=this._getPositionOutsideEditor(e);if(i)return i;const r=this._createMouseTarget(e,t);if(!r.position)return null;if(r.type===8||r.type===5){const o=this._helpPositionJumpOverViewZone(r.detail);if(o)return Is.createViewZone(r.type,r.element,r.mouseColumn,o,r.detail)}return r}_helpPositionJumpOverViewZone(e){const t=new be(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=e.positionBefore,r=e.positionAfter;return i&&r?i.isBefore(t)?i:r:null}_dispatchMouse(e,t,i){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:i,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}class mLe extends xe{constructor(e,t,i,r){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=r,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new pLe(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class pLe extends xe{constructor(e,t,i,r,s,o){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=r,this._position=s,this._mouseEvent=o,this._lastTime=Date.now(),this._animationFrameDisposable=Yo(lt(o.browserEvent),()=>this._execute())}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(67),t=this._context.configuration.options.get(146).height/e,i=this._position.outsideDistance/e;return i<=1.5?Math.max(30,t*(1+i)):i<=3?Math.max(60,t*(2+i)):Math.max(200,t*(7+i))}_execute(){const e=this._context.configuration.options.get(67),t=this._getScrollSpeed(),i=this._tick(),r=t*(i/1e3)*e,s=this._position.outsidePosition==="above"?-r:r;this._context.viewModel.viewLayout.deltaScrollNow(0,s),this._viewHelper.renderNow();const o=this._context.viewLayout.getLinesViewportData(),a=this._position.outsidePosition==="above"?o.startLineNumber:o.endLineNumber;let l;{const c=HR(this._viewHelper.viewDomNode),h=this._context.configuration.options.get(146).horizontalScrollbarHeight,u=new G5(this._mouseEvent.pos.x,c.y+c.height-h-.1),d=VR(this._viewHelper.viewDomNode,c,u);l=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),c,u,d,null)}(!l.position||l.position.lineNumber!==a)&&(this._position.outsidePosition==="above"?l=Is.createOutsideEditor(this._position.mouseColumn,new be(a,1),"above",this._position.outsideDistance):l=Is.createOutsideEditor(this._position.mouseColumn,new be(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(l,!0,2),this._animationFrameDisposable=Yo(lt(l.element),()=>this._execute())}}const IL=class IL{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const i=new Date().getTime();i-this._lastSetMouseDownCountTime>IL.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};IL.CLEAR_MOUSE_DOWN_COUNT_TIME=400;let II=IL;const A0=class A0{constructor(e,t,i,r,s){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selection=r,this.newlineCountBeforeSelection=s}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const i=e.getValue(),r=e.getSelectionStart(),s=e.getSelectionEnd();let o;if(t){const a=i.substring(0,r),l=t.value.substring(0,t.selectionStart);a===l&&(o=t.newlineCountBeforeSelection)}return new A0(i,r,s,null,o)}collapseSelection(){return this.selectionStart===this.value.length?this:new A0(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,i){t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const r=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selection?.getStartPosition()??null,r,-1)}if(e>=this.selectionEnd){const r=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selection?.getEndPosition()??null,r,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf("…")===-1)return this._finishDeduceEditorPosition(this.selection?.getStartPosition()??null,t,1);const i=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selection?.getEndPosition()??null,i,-1)}_finishDeduceEditorPosition(e,t,i){let r=0,s=-1;for(;(s=t.indexOf(`
`,s+1))!==-1;)r++;return[e,i*t.length,r]}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const r=Math.min(VE(e.value,t.value),e.selectionStart,t.selectionStart),s=Math.min($E(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(r,e.value.length-s);const o=t.value.substring(r,t.value.length-s),a=e.selectionStart-r,l=e.selectionEnd-r,c=t.selectionStart-r,h=t.selectionEnd-r;if(c===h){const d=e.selectionStart-r;return{text:o,replacePrevCharCnt:d,replaceNextCharCnt:0,positionDelta:0}}const u=l-a;return{text:o,replacePrevCharCnt:u,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min(VE(e.value,t.value),e.selectionEnd),r=Math.min($E(e.value,t.value),e.value.length-e.selectionEnd),s=e.value.substring(i,e.value.length-r),o=t.value.substring(i,t.value.length-r);e.selectionStart-i;const a=e.selectionEnd-i;t.selectionStart-i;const l=t.selectionEnd-i;return{text:o,replacePrevCharCnt:a,replaceNextCharCnt:s.length-a,positionDelta:l-o.length}}};A0.EMPTY=new A0("",0,0,null,void 0);let Ns=A0;class _0{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const i=e*t,r=i+1,s=i+t;return new oe(r,1,s+1,1)}static fromEditorSelection(e,t,i,r){const o=_0._getPageOfLine(t.startLineNumber,i),a=_0._getRangeForPage(o,i),l=_0._getPageOfLine(t.endLineNumber,i),c=_0._getRangeForPage(l,i);let h=a.intersectRanges(new oe(1,1,t.startLineNumber,t.startColumn));if(r&&e.getValueLengthInRange(h,1)>500){const w=e.modifyPosition(h.getEndPosition(),-500);h=oe.fromPositions(w,h.getEndPosition())}const u=e.getValueInRange(h,1),d=e.getLineCount(),g=e.getLineMaxColumn(d);let p=c.intersectRanges(new oe(t.endLineNumber,t.endColumn,d,g));if(r&&e.getValueLengthInRange(p,1)>500){const w=e.modifyPosition(p.getStartPosition(),500);p=oe.fromPositions(p.getStartPosition(),w)}const b=e.getValueInRange(p,1);let _;if(o===l||o+1===l)_=e.getValueInRange(t,1);else{const w=a.intersectRanges(t),y=c.intersectRanges(t);_=e.getValueInRange(w,1)+"…"+e.getValueInRange(y,1)}return r&&_.length>2*500&&(_=_.substring(0,500)+"…"+_.substring(_.length-500,_.length)),new Ns(u+_+b,u.length,u.length+_.length,t,h.endLineNumber-h.startLineNumber)}}var bLe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},uj=function(n,e){return function(t,i){e(t,i,n)}},zk;(function(n){n.Tap="-monaco-textarea-synthetic-tap"})(zk||(zk={}));const NL=class NL{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}};NL.INSTANCE=new NL;let Hk=NL;class _Le{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}let NI=class extends xe{get textAreaState(){return this._textAreaState}constructor(e,t,i,r,s,o){super(),this._host=e,this._textArea=t,this._OS=i,this._browser=r,this._accessibilityService=s,this._logService=o,this._onFocus=this._register(new de),this.onFocus=this._onFocus.event,this._onBlur=this._register(new de),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new de),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new de),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new de),this.onCut=this._onCut.event,this._onPaste=this._register(new de),this.onPaste=this._onPaste.event,this._onType=this._register(new de),this.onType=this._onType.event,this._onCompositionStart=this._register(new de),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new de),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new de),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new de),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new Pu),this._asyncTriggerCut=this._register(new Gs(()=>this._onCut.fire(),0)),this._textAreaState=Ns.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(Oe.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new Gs(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)):this._asyncFocusGainWriteScreenReaderContent.clear()})),this._hasFocus=!1,this._currentComposition=null;let a=null;this._register(this._textArea.onKeyDown(l=>{const c=new en(l);(c.keyCode===114||this._currentComposition&&c.keyCode===1)&&c.stopPropagation(),c.equals(9)&&c.preventDefault(),a=c,this._onKeyDown.fire(c)})),this._register(this._textArea.onKeyUp(l=>{const c=new en(l);this._onKeyUp.fire(c)})),this._register(this._textArea.onCompositionStart(l=>{const c=new _Le;if(this._currentComposition){this._currentComposition=c;return}if(this._currentComposition=c,this._OS===2&&a&&a.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===l.data&&(a.code==="ArrowRight"||a.code==="ArrowLeft")){c.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:l.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:l.data});return}this._onCompositionStart.fire({data:l.data})})),this._register(this._textArea.onCompositionUpdate(l=>{const c=this._currentComposition;if(!c)return;if(this._browser.isAndroid){const u=Ns.readFromTextArea(this._textArea,this._textAreaState),d=Ns.deduceAndroidCompositionInput(this._textAreaState,u);this._textAreaState=u,this._onType.fire(d),this._onCompositionUpdate.fire(l);return}const h=c.handleCompositionUpdate(l.data);this._textAreaState=Ns.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(h),this._onCompositionUpdate.fire(l)})),this._register(this._textArea.onCompositionEnd(l=>{const c=this._currentComposition;if(!c)return;if(this._currentComposition=null,this._browser.isAndroid){const u=Ns.readFromTextArea(this._textArea,this._textAreaState),d=Ns.deduceAndroidCompositionInput(this._textAreaState,u);this._textAreaState=u,this._onType.fire(d),this._onCompositionEnd.fire();return}const h=c.handleCompositionUpdate(l.data);this._textAreaState=Ns.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(h),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const c=Ns.readFromTextArea(this._textArea,this._textAreaState),h=Ns.deduceInput(this._textAreaState,c,this._OS===2);h.replacePrevCharCnt===0&&h.text.length===1&&(Lr(h.text.charCodeAt(0))||h.text.charCodeAt(0)===127)||(this._textAreaState=c,(h.text!==""||h.replacePrevCharCnt!==0||h.replaceNextCharCnt!==0||h.positionDelta!==0)&&this._onType.fire(h))})),this._register(this._textArea.onCut(l=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(l),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(l=>{this._ensureClipboardGetsEditorSelection(l)})),this._register(this._textArea.onPaste(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),l.preventDefault(),!l.clipboardData)return;let[c,h]=dj.getTextData(l.clipboardData);c&&(h=h||Hk.INSTANCE.get(c),this._onPaste.fire({text:c,metadata:h}))})),this._register(this._textArea.onFocus(()=>{const l=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!l&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new Gs(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return we(this._textArea.ownerDocument,"selectionchange",t=>{if(Yd.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const i=Date.now(),r=i-e;if(e=i,r<5)return;const s=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),s<100||!this._textAreaState.selection)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),h=this._host.deduceModelPosition(c[0],c[1],c[2]),u=this._textAreaState.deduceEditorPosition(l),d=this._host.deduceModelPosition(u[0],u[1],u[2]),g=new $i(h.lineNumber,h.column,d.lineNumber,d.column);this._onSelectionChangeRequest.fire(g)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeNativeTextAreaContent(e){!this._accessibilityService.isScreenReaderOptimized()&&e==="render"||this._currentComposition||(this._logService.trace(`writeTextAreaState(reason: ${e})`),this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),i={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};Hk.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,i),e.preventDefault(),e.clipboardData&&dj.setTextData(e.clipboardData,t.text,t.html,i)}};NI=bLe([uj(4,yc),uj(5,vc)],NI);const dj={getTextData(n){const e=n.getData(cu.text);let t=null;const i=n.getData("vscode-editor-data");if(typeof i=="string")try{t=JSON.parse(i),t.version!==1&&(t=null)}catch{}return e.length===0&&t===null&&n.files.length>0?[Array.prototype.slice.call(n.files,0).map(s=>s.name).join(`
`),null]:[e,t]},setTextData(n,e,t,i){n.setData(cu.text,e),typeof t=="string"&&n.setData("text/html",t),n.setData("vscode-editor-data",JSON.stringify(i))}};class vLe extends xe{get ownerDocument(){return this._actual.ownerDocument}constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new Zt(this._actual,"keydown")).event,this.onKeyUp=this._register(new Zt(this._actual,"keyup")).event,this.onCompositionStart=this._register(new Zt(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new Zt(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new Zt(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new Zt(this._actual,"beforeinput")).event,this.onInput=this._register(new Zt(this._actual,"input")).event,this.onCut=this._register(new Zt(this._actual,"cut")).event,this.onCopy=this._register(new Zt(this._actual,"copy")).event,this.onPaste=this._register(new Zt(this._actual,"paste")).event,this.onFocus=this._register(new Zt(this._actual,"focus")).event,this.onBlur=this._register(new Zt(this._actual,"blur")).event,this._onSyntheticTap=this._register(new de),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>Yd.onKeyDown())),this._register(this.onBeforeInput(()=>Yd.onBeforeInput())),this._register(this.onInput(()=>Yd.onInput())),this._register(this.onKeyUp(()=>Yd.onKeyUp())),this._register(we(this._actual,zk.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=x1(this._actual);return e?e.activeElement===this._actual:this._actual.isConnected?Rs()===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const i=this._actual;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,i){const r=this._actual;let s=null;const o=x1(r);o?s=o.activeElement:s=Rs();const a=lt(s),l=s===r,c=r.selectionStart,h=r.selectionEnd;if(l&&c===t&&h===i){Cl&&a.parent!==a&&r.focus();return}if(l){this.setIgnoreSelectionChangeTime("setSelectionRange"),r.setSelectionRange(t,i),Cl&&a.parent!==a&&r.focus();return}try{const u=Fge(r);this.setIgnoreSelectionChangeTime("setSelectionRange"),r.focus(),r.setSelectionRange(t,i),Wge(r,u)}catch{}}}class wLe extends $R{constructor(e,t,i){super(e,t,i),this._register(Zs.addTarget(this.viewHelper.linesContentDomNode)),this._register(we(this.viewHelper.linesContentDomNode,Ki.Tap,s=>this.onTap(s))),this._register(we(this.viewHelper.linesContentDomNode,Ki.Change,s=>this.onChange(s))),this._register(we(this.viewHelper.linesContentDomNode,Ki.Contextmenu,s=>this._onContextMenu(new bf(s,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(we(this.viewHelper.linesContentDomNode,"pointerdown",s=>{const o=s.pointerType;if(o==="mouse"){this._lastPointerType="mouse";return}else o==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const r=new eLe(this.viewHelper.viewDomNode);this._register(r.onPointerMove(this.viewHelper.viewDomNode,s=>this._onMouseMove(s))),this._register(r.onPointerUp(this.viewHelper.viewDomNode,s=>this._onMouseUp(s))),this._register(r.onPointerLeave(this.viewHelper.viewDomNode,s=>this._onMouseLeave(s))),this._register(r.onPointerDown(this.viewHelper.viewDomNode,(s,o)=>this._onMouseDown(s,o)))}onTap(e){!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget)||(e.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(e,!1))}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY),this._lastPointerType==="pen"&&this._dispatchGesture(e,!0)}_dispatchGesture(e,t){const i=this._createMouseTarget(new bf(e,!1,this.viewHelper.viewDomNode),!1);i.position&&this.viewController.dispatchMouse({position:i.position,mouseColumn:i.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:t,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:i.type===6&&i.detail.injectedText!==null})}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}class yLe extends $R{constructor(e,t,i){super(e,t,i),this._register(Zs.addTarget(this.viewHelper.linesContentDomNode)),this._register(we(this.viewHelper.linesContentDomNode,Ki.Tap,r=>this.onTap(r))),this._register(we(this.viewHelper.linesContentDomNode,Ki.Change,r=>this.onChange(r))),this._register(we(this.viewHelper.linesContentDomNode,Ki.Contextmenu,r=>this._onContextMenu(new bf(r,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new bf(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const i=document.createEvent("CustomEvent");i.initEvent(zk.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(i),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class CLe extends xe{constructor(e,t,i){super(),(ym||Oue&&SK)&&eY.pointerEvents?this.handler=this._register(new wLe(e,t,i)):Vi.TouchEvent?this.handler=this._register(new yLe(e,t,i)):this.handler=this._register(new $R(e,t,i))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class np extends jy{}const ML=class ML extends np{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new be(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(67);const t=e.get(68);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(96);const i=e.get(146);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let i=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,i=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(i=!0),i}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return e.affectsLineNumber}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new be(e,1));if(t.column!==1)return"";const i=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(this._renderLineNumbers===2){const r=Math.abs(this._lastCursorModelPosition.lineNumber-i);return r===0?'<span class="relative-current-line-number">'+i+"</span>":String(r)}if(this._renderLineNumbers===3){if(this._lastCursorModelPosition.lineNumber===i||i%10===0)return String(i);const r=this._context.viewModel.getLineCount();return i===r?String(i):""}return String(i)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=wo?this._lineHeight%2===0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,s=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter(c=>!!c.options.lineNumberClassName);s.sort((c,h)=>oe.compareRangesUsingEnds(c.range,h.range));let o=0;const a=this._context.viewModel.getLineCount(),l=[];for(let c=i;c<=r;c++){const h=c-i;let u=this._getLineRenderLineNumber(c),d="";for(;o<s.length&&s[o].range.endLineNumber<c;)o++;for(let g=o;g<s.length;g++){const{range:p,options:b}=s[g];p.startLineNumber<=c&&(d+=" "+b.lineNumberClassName)}if(!u&&!d){l[h]="";continue}c===a&&this._context.viewModel.getLineLength(c)===0&&(this._renderFinalNewline==="off"&&(u=""),this._renderFinalNewline==="dimmed"&&(d+=" dimmed-line-number")),c===this._activeLineNumber&&(d+=" active-line-number"),l[h]=`<div class="${ML.CLASS_NAME}${t}${d}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${u}</div>`}this._renderResult=l}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};ML.CLASS_NAME="line-numbers";let Vk=ML;Uu((n,e)=>{const t=n.getColor(Jye),i=n.getColor(fCe);i?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${i}; }`):t&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${t.transparent(.4)}; }`)});const R0=class R0 extends Jo{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._domNode=bi(document.createElement("div")),this._domNode.setClassName(R0.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=bi(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(R0.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}};R0.CLASS_NAME="glyph-margin",R0.OUTER_CLASS_NAME="margin";let $k=R0;const i1="monaco-mouse-cursor-text";var SLe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},fj=function(n,e){return function(t,i){e(t,i,n)}};class xLe{constructor(e,t,i,r,s){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=r,this.distanceToModelLineEnd=s,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new be(this.modelLineNumber,this.distanceToModelLineStart+1),i=new be(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const R6=Cl;let MI=class extends Jo{constructor(e,t,i,r,s){super(e),this._keybindingService=r,this._instantiationService=s,this._primaryCursorPosition=new be(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=i,this._scrollLeft=0,this._scrollTop=0;const o=this._context.configuration.options,a=o.get(146);this._setAccessibilityOptions(o),this._contentLeft=a.contentLeft,this._contentWidth=a.contentWidth,this._contentHeight=a.height,this._fontInfo=o.get(50),this._lineHeight=o.get(67),this._emptySelectionClipboard=o.get(37),this._copyWithSyntaxHighlighting=o.get(25),this._visibleTextArea=null,this._selections=[new $i(1,1,1,1)],this._modelSelections=[new $i(1,1,1,1)],this._lastRenderPosition=null,this.textArea=bi(document.createElement("textarea")),_c.write(this.textArea,7),this.textArea.setClassName(`inputarea ${i1}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:l}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${l*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(o)),this.textArea.setAttribute("aria-required",o.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(o.get(125))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",C("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",o.get(92)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=bi(document.createElement("div")),this.textAreaCover.setPosition("absolute");const c={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:d=>this._context.viewModel.getLineMaxColumn(d),getValueInRange:(d,g)=>this._context.viewModel.getValueInRange(d,g),getValueLengthInRange:(d,g)=>this._context.viewModel.getValueLengthInRange(d,g),modifyPosition:(d,g)=>this._context.viewModel.modifyPosition(d,g)},h={getDataToCopy:()=>{const d=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,Go),g=this._context.viewModel.model.getEOL(),p=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),b=Array.isArray(d)?d:null,_=Array.isArray(d)?d.join(g):d;let w,y=null;if(this._copyWithSyntaxHighlighting&&_.length<65536){const k=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);k&&(w=k.html,y=k.mode)}return{isFromEmptySelection:p,multicursorText:b,text:_,html:w,mode:y}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const d=this._selections[0];if(hi&&d.isEmpty()){const p=d.getStartPosition();let b=this._getWordBeforePosition(p);if(b.length===0&&(b=this._getCharacterBeforePosition(p)),b.length>0)return new Ns(b,b.length,b.length,oe.fromPositions(p),0)}if(hi&&!d.isEmpty()&&c.getValueLengthInRange(d,0)<500){const p=c.getValueInRange(d,0);return new Ns(p,0,p.length,d,0)}if(uf&&!d.isEmpty()){const p="vscode-placeholder";return new Ns(p,0,p.length,null,void 0)}return Ns.EMPTY}if(kz){const d=this._selections[0];if(d.isEmpty()){const g=d.getStartPosition(),[p,b]=this._getAndroidWordAtPosition(g);if(p.length>0)return new Ns(p,b,b,oe.fromPositions(g),0)}return Ns.EMPTY}return _0.fromEditorSelection(c,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(d,g,p)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(d,g,p)},u=this._register(new vLe(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(NI,h,u,gl,{isAndroid:kz,isChrome:Sy,isFirefox:Cl,isSafari:uf})),this._register(this._textAreaInput.onKeyDown(d=>{this._viewController.emitKeyDown(d)})),this._register(this._textAreaInput.onKeyUp(d=>{this._viewController.emitKeyUp(d)})),this._register(this._textAreaInput.onPaste(d=>{let g=!1,p=null,b=null;d.metadata&&(g=this._emptySelectionClipboard&&!!d.metadata.isFromEmptySelection,p=typeof d.metadata.multicursorText<"u"?d.metadata.multicursorText:null,b=d.metadata.mode),this._viewController.paste(d.text,g,p,b)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(d=>{d.replacePrevCharCnt||d.replaceNextCharCnt||d.positionDelta?this._viewController.compositionType(d.text,d.replacePrevCharCnt,d.replaceNextCharCnt,d.positionDelta):this._viewController.type(d.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(d=>{this._viewController.setSelection(d)})),this._register(this._textAreaInput.onCompositionStart(d=>{const g=this.textArea.domNode,p=this._modelSelections[0],{distanceToModelLineStart:b,widthOfHiddenTextBefore:_}=(()=>{const y=g.value.substring(0,Math.min(g.selectionStart,g.selectionEnd)),k=y.lastIndexOf(`
`),L=y.substring(k+1),T=L.lastIndexOf("	"),N=L.length-T-1,D=p.getStartPosition(),O=Math.min(D.column-1,N),B=D.column-1-O,G=L.substring(0,L.length-O),{tabSize:H}=this._context.viewModel.model.getOptions(),q=kLe(this.textArea.domNode.ownerDocument,G,this._fontInfo,H);return{distanceToModelLineStart:B,widthOfHiddenTextBefore:q}})(),{distanceToModelLineEnd:w}=(()=>{const y=g.value.substring(Math.max(g.selectionStart,g.selectionEnd)),k=y.indexOf(`
`),L=k===-1?y:y.substring(0,k),T=L.indexOf("	"),N=T===-1?L.length:L.length-T-1,D=p.getEndPosition(),O=Math.min(this._context.viewModel.model.getLineMaxColumn(D.lineNumber)-D.column,N);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(D.lineNumber)-D.column-O}})();this._context.viewModel.revealRange("keyboard",!0,oe.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new xLe(this._context,p.startLineNumber,b,_,w),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${i1} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(d=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${i1}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(pv.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(e){this._textAreaInput.writeNativeTextAreaContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',i=this._context.viewModel.getLineContent(e.lineNumber),r=T1(t,[]);let s=!0,o=e.column,a=!0,l=e.column,c=0;for(;c<50&&(s||a);){if(s&&o<=1&&(s=!1),s){const h=i.charCodeAt(o-2);r.get(h)!==0?s=!1:o--}if(a&&l>i.length&&(a=!1),a){const h=i.charCodeAt(l-1);r.get(h)!==0?a=!1:l++}c++}return[i.substring(o-1,l-1),e.column-o]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),i=T1(this._context.configuration.options.get(132),[]);let r=e.column,s=0;for(;r>1;){const o=t.charCodeAt(r-2);if(i.get(o)!==0||s>50)return t.substring(r-1,e.column-1);s++,r--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const i=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!Lr(i.charCodeAt(0)))return i}return""}_getAriaLabel(e){if(e.get(2)===1){const i=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode")?.getAriaLabel(),r=this._keybindingService.lookupKeybinding("workbench.action.showCommands")?.getAriaLabel(),s=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings")?.getAriaLabel(),o=C("accessibilityModeOff","The editor is not accessible at this time.");return i?C("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",o,i):r?C("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",o,r):s?C("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",o,s):o}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===Vm.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const r=e.get(146).wrappingColumn;if(r!==-1&&this._accessibilitySupport!==1){const s=e.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(r*s.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=R6?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(50),this._lineHeight=t.get(67),this._emptySelectionClipboard=t.get(37),this._copyWithSyntaxHighlighting=t.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:r}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${r*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(125))),(e.hasChanged(34)||e.hasChanged(92))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!pv.enabled||e.get(34)&&e.get(92)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){this._primaryCursorPosition=new be(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),this._visibleTextArea?.prepareRender(e)}render(e){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){if(this._visibleTextArea){const i=this._visibleTextArea.visibleTextareaStart,r=this._visibleTextArea.visibleTextareaEnd,s=this._visibleTextArea.startPosition,o=this._visibleTextArea.endPosition;if(s&&o&&i&&r&&r.left>=this._scrollLeft&&i.left<=this._scrollLeft+this._contentWidth){const a=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,l=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let c=this._visibleTextArea.widthOfHiddenLineTextBefore,h=this._contentLeft+i.left-this._scrollLeft,u=r.left-i.left+1;if(h<this._contentLeft){const w=this._contentLeft-h;h+=w,c+=w,u-=w}u>this._contentWidth&&(u=this._contentWidth);const d=this._context.viewModel.getViewLineData(s.lineNumber),g=d.tokens.findTokenIndexAtOffset(s.column-1),p=d.tokens.findTokenIndexAtOffset(o.column-1),b=g===p,_=this._visibleTextArea.definePresentation(b?d.tokens.getPresentation(g):null);this.textArea.domNode.scrollTop=l*this._lineHeight,this.textArea.domNode.scrollLeft=c,this._doRender({lastRenderPosition:null,top:a,left:h,width:u,height:this._lineHeight,useCover:!1,color:(qn.getColorMap()||[])[_.foreground],italic:_.italic,bold:_.bold,underline:_.underline,strikethrough:_.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(hi||this._accessibilitySupport===2){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const i=this._textAreaInput.textAreaState.newlineCountBeforeSelection??this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=i*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:R6?0:1,useCover:!1})}_newlinecount(e){let t=0,i=-1;do{if(i=e.indexOf(`
`,i+1),i===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:R6?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,i=this.textAreaCover;ps(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?Me.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),i.setTop(e.useCover?e.top:0),i.setLeft(e.useCover?e.left:0),i.setWidth(e.useCover?e.width:0),i.setHeight(e.useCover?e.height:0);const r=this._context.configuration.options;r.get(57)?i.setClassName("monaco-editor-background textAreaCover "+$k.OUTER_CLASS_NAME):r.get(68).renderType!==0?i.setClassName("monaco-editor-background textAreaCover "+Vk.CLASS_NAME):i.setClassName("monaco-editor-background textAreaCover")}};MI=SLe([fj(3,ns),fj(4,Ni)],MI);function kLe(n,e,t,i){if(e.length===0)return 0;const r=n.createElement("div");r.style.position="absolute",r.style.top="-50000px",r.style.width="50000px";const s=n.createElement("span");ps(s,t),s.style.whiteSpace="pre",s.style.tabSize=`${i*t.spaceWidth}px`,s.append(e),r.appendChild(s),n.body.appendChild(r);const o=s.offsetWidth;return r.remove(),o}const LLe=()=>!0,TLe=()=>!1,DLe=n=>n===" "||n==="	";class jp{static shouldRecreate(e){return e.hasChanged(146)||e.hasChanged(132)||e.hasChanged(37)||e.hasChanged(77)||e.hasChanged(79)||e.hasChanged(80)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(129)||e.hasChanged(50)||e.hasChanged(92)||e.hasChanged(131)}constructor(e,t,i,r){this.languageConfigurationService=r,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const s=i.options,o=s.get(146),a=s.get(50);this.readOnly=s.get(92),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=s.get(117),this.lineHeight=a.lineHeight,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(o.height/this.lineHeight)-2),this.useTabStops=s.get(129),this.wordSeparators=s.get(132),this.emptySelectionClipboard=s.get(37),this.copyWithSyntaxHighlighting=s.get(25),this.multiCursorMergeOverlapping=s.get(77),this.multiCursorPaste=s.get(79),this.multiCursorLimit=s.get(80),this.autoClosingBrackets=s.get(6),this.autoClosingComments=s.get(7),this.autoClosingQuotes=s.get(11),this.autoClosingDelete=s.get(9),this.autoClosingOvertype=s.get(10),this.autoSurround=s.get(14),this.autoIndent=s.get(12),this.wordSegmenterLocales=s.get(131),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const l=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(l)for(const h of l)this.surroundingPairs[h.open]=h.close;const c=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=c?.blockCommentStartToken??null}get electricChars(){if(!this._electricChars){this._electricChars={};const e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter?.getElectricCharacters();if(e)for(const t of e)this._electricChars[t]=!0}return this._electricChars}onElectricCharacter(e,t,i){const r=$g(t,i-1),s=this.languageConfigurationService.getLanguageConfiguration(r.languageId).electricCharacter;return s?s.onElectricCharacter(e,r,i-r.firstCharOffset):null}normalizeIndentation(e){return WX(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,i){switch(t){case"beforeWhitespace":return DLe;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,i);case"always":return LLe;case"never":return TLe}}_getLanguageDefinedShouldAutoClose(e,t){const i=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return r=>i.indexOf(r)!==-1}visibleColumnFromColumn(e,t){return gr.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,i){const r=gr.columnFromVisibleColumn(e.getLineContent(t),i,this.tabSize),s=e.getLineMinColumn(t);if(r<s)return s;const o=e.getLineMaxColumn(t);return r>o?o:r}}class ei{static fromModelState(e){return new ELe(e)}static fromViewState(e){return new ILe(e)}static fromModelSelection(e){const t=$i.liftSelection(e),i=new Fr(oe.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return ei.fromModelState(i)}static fromModelSelections(e){const t=[];for(let i=0,r=e.length;i<r;i++)t[i]=this.fromModelSelection(e[i]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class ELe{constructor(e){this.modelState=e,this.viewState=null}}class ILe{constructor(e){this.modelState=null,this.viewState=e}}class Fr{constructor(e,t,i,r,s){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=i,this.position=r,this.leftoverVisibleColumns=s,this._singleCursorStateBrand=void 0,this.selection=Fr._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,i,r){return e?new Fr(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new be(t,i),r):new Fr(new oe(t,i,t,i),0,r,new be(t,i),r)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?$i.fromPositions(e.getStartPosition(),t):$i.fromPositions(e.getEndPosition(),t)}}class Co{constructor(e,t,i){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter}}function _f(n){return n==="'"||n==='"'||n==="`"}class Rg{static columnSelect(e,t,i,r,s,o){const a=Math.abs(s-i)+1,l=i>s,c=r>o,h=r<o,u=[];for(let d=0;d<a;d++){const g=i+(l?-d:d),p=e.columnFromVisibleColumn(t,g,r),b=e.columnFromVisibleColumn(t,g,o),_=e.visibleColumnFromColumn(t,new be(g,p)),w=e.visibleColumnFromColumn(t,new be(g,b));h&&(_>o||w<r)||c&&(w>r||_<o)||u.push(new Fr(new oe(g,p,g,p),0,0,new be(g,b),0))}if(u.length===0)for(let d=0;d<a;d++){const g=i+(l?-d:d),p=t.getLineMaxColumn(g);u.push(new Fr(new oe(g,p,g,p),0,0,new be(g,p),0))}return{viewStates:u,reversed:l,fromLineNumber:i,fromVisualColumn:r,toLineNumber:s,toVisualColumn:o}}static columnSelectLeft(e,t,i){let r=i.toViewVisualColumn;return r>0&&r--,Rg.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,r)}static columnSelectRight(e,t,i){let r=0;const s=Math.min(i.fromViewLineNumber,i.toViewLineNumber),o=Math.max(i.fromViewLineNumber,i.toViewLineNumber);for(let l=s;l<=o;l++){const c=t.getLineMaxColumn(l),h=e.visibleColumnFromColumn(t,new be(l,c));r=Math.max(r,h)}let a=i.toViewVisualColumn;return a<r&&a++,this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,a)}static columnSelectUp(e,t,i,r){const s=r?e.pageSize:1,o=Math.max(1,i.toViewLineNumber-s);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,o,i.toViewVisualColumn)}static columnSelectDown(e,t,i,r){const s=r?e.pageSize:1,o=Math.min(t.getLineCount(),i.toViewLineNumber+s);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,o,i.toViewVisualColumn)}}class Fo{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return $i.fromPositions(r.getEndPosition())}}class JS{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return $i.fromPositions(r.getStartPosition())}}class jk{constructor(e,t,i,r,s=!1){this._range=e,this._text=t,this._columnDeltaOffset=r,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=s}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return $i.fromPositions(r.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class NLe{constructor(e,t,i,r=!1){this._range=e,this._text=t,this._initialSelection=i,this._forceMoveMarkers=r,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class P6{constructor(e,t,i){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=i}}class Ii{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-KK(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const i=t.lineNumber-1;return new be(i,e.getLineMaxColumn(i))}else return t}static leftPositionAtomicSoftTabs(e,t,i){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const r=e.getLineMinColumn(t.lineNumber),s=e.getLineContent(t.lineNumber),o=Kw.atomicPosition(s,t.column-1,i,0);if(o!==-1&&o+1>=r)return new be(t.lineNumber,o+1)}return this.leftPosition(e,t)}static left(e,t,i){const r=e.stickyTabStops?Ii.leftPositionAtomicSoftTabs(t,i,e.tabSize):Ii.leftPosition(t,i);return new P6(r.lineNumber,r.column,0)}static moveLeft(e,t,i,r,s){let o,a;if(i.hasSelection()&&!r)o=i.selection.startLineNumber,a=i.selection.startColumn;else{const l=i.position.delta(void 0,-(s-1)),c=t.normalizePosition(Ii.clipPositionColumn(l,t),0),h=Ii.left(e,t,c);o=h.lineNumber,a=h.column}return i.move(r,o,a,0)}static clipPositionColumn(e,t){return new be(e.lineNumber,Ii.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,i){return e<t?t:e>i?i:e}static rightPosition(e,t,i){return i<e.getLineMaxColumn(t)?i=i+JM(e.getLineContent(t),i-1):t<e.getLineCount()&&(t=t+1,i=e.getLineMinColumn(t)),new be(t,i)}static rightPositionAtomicSoftTabs(e,t,i,r,s){if(i<e.getLineIndentColumn(t)){const o=e.getLineContent(t),a=Kw.atomicPosition(o,i-1,r,1);if(a!==-1)return new be(t,a+1)}return this.rightPosition(e,t,i)}static right(e,t,i){const r=e.stickyTabStops?Ii.rightPositionAtomicSoftTabs(t,i.lineNumber,i.column,e.tabSize,e.indentSize):Ii.rightPosition(t,i.lineNumber,i.column);return new P6(r.lineNumber,r.column,0)}static moveRight(e,t,i,r,s){let o,a;if(i.hasSelection()&&!r)o=i.selection.endLineNumber,a=i.selection.endColumn;else{const l=i.position.delta(void 0,s-1),c=t.normalizePosition(Ii.clipPositionColumn(l,t),1),h=Ii.right(e,t,c);o=h.lineNumber,a=h.column}return i.move(r,o,a,0)}static vertical(e,t,i,r,s,o,a,l){const c=gr.visibleColumnFromColumn(t.getLineContent(i),r,e.tabSize)+s,h=t.getLineCount(),u=i===1&&r===1,d=i===h&&r===t.getLineMaxColumn(i),g=o<i?u:d;if(i=o,i<1?(i=1,a?r=t.getLineMinColumn(i):r=Math.min(t.getLineMaxColumn(i),r)):i>h?(i=h,a?r=t.getLineMaxColumn(i):r=Math.min(t.getLineMaxColumn(i),r)):r=e.columnFromVisibleColumn(t,i,c),g?s=0:s=c-gr.visibleColumnFromColumn(t.getLineContent(i),r,e.tabSize),l!==void 0){const p=new be(i,r),b=t.normalizePosition(p,l);s=s+(r-b.column),i=b.lineNumber,r=b.column}return new P6(i,r,s)}static down(e,t,i,r,s,o,a){return this.vertical(e,t,i,r,s,i+o,a,4)}static moveDown(e,t,i,r,s){let o,a;i.hasSelection()&&!r?(o=i.selection.endLineNumber,a=i.selection.endColumn):(o=i.position.lineNumber,a=i.position.column);let l=0,c;do if(c=Ii.down(e,t,o+l,a,i.leftoverVisibleColumns,s,!0),t.normalizePosition(new be(c.lineNumber,c.column),2).lineNumber>o)break;while(l++<10&&o+l<t.getLineCount());return i.move(r,c.lineNumber,c.column,c.leftoverVisibleColumns)}static translateDown(e,t,i){const r=i.selection,s=Ii.down(e,t,r.selectionStartLineNumber,r.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),o=Ii.down(e,t,r.positionLineNumber,r.positionColumn,i.leftoverVisibleColumns,1,!1);return new Fr(new oe(s.lineNumber,s.column,s.lineNumber,s.column),0,s.leftoverVisibleColumns,new be(o.lineNumber,o.column),o.leftoverVisibleColumns)}static up(e,t,i,r,s,o,a){return this.vertical(e,t,i,r,s,i-o,a,3)}static moveUp(e,t,i,r,s){let o,a;i.hasSelection()&&!r?(o=i.selection.startLineNumber,a=i.selection.startColumn):(o=i.position.lineNumber,a=i.position.column);const l=Ii.up(e,t,o,a,i.leftoverVisibleColumns,s,!0);return i.move(r,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,i){const r=i.selection,s=Ii.up(e,t,r.selectionStartLineNumber,r.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),o=Ii.up(e,t,r.positionLineNumber,r.positionColumn,i.leftoverVisibleColumns,1,!1);return new Fr(new oe(s.lineNumber,s.column,s.lineNumber,s.column),0,s.leftoverVisibleColumns,new be(o.lineNumber,o.column),o.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,i,r){let s=i.position.lineNumber;for(;s>1&&this._isBlankLine(t,s);)s--;for(;s>1&&!this._isBlankLine(t,s);)s--;return i.move(r,s,t.getLineMinColumn(s),0)}static moveToNextBlankLine(e,t,i,r){const s=t.getLineCount();let o=i.position.lineNumber;for(;o<s&&this._isBlankLine(t,o);)o++;for(;o<s&&!this._isBlankLine(t,o);)o++;return i.move(r,o,t.getLineMinColumn(o),0)}static moveToBeginningOfLine(e,t,i,r){const s=i.position.lineNumber,o=t.getLineMinColumn(s),a=t.getLineFirstNonWhitespaceColumn(s)||o;let l;return i.position.column===a?l=o:l=a,i.move(r,s,l,0)}static moveToEndOfLine(e,t,i,r,s){const o=i.position.lineNumber,a=t.getLineMaxColumn(o);return i.move(r,o,a,s?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,i,r){return i.move(r,1,1,0)}static moveToEndOfBuffer(e,t,i,r){const s=t.getLineCount(),o=t.getLineMaxColumn(s);return i.move(r,s,o,0)}}class Mm{static deleteRight(e,t,i,r){const s=[];let o=e!==3;for(let a=0,l=r.length;a<l;a++){const c=r[a];let h=c;if(h.isEmpty()){const u=c.getPosition(),d=Ii.right(t,i,u);h=new oe(d.lineNumber,d.column,u.lineNumber,u.column)}if(h.isEmpty()){s[a]=null;continue}h.startLineNumber!==h.endLineNumber&&(o=!0),s[a]=new Fo(h,"")}return[o,s]}static isAutoClosingPairDelete(e,t,i,r,s,o,a){if(t==="never"&&i==="never"||e==="never")return!1;for(let l=0,c=o.length;l<c;l++){const h=o[l],u=h.getPosition();if(!h.isEmpty())return!1;const d=s.getLineContent(u.lineNumber);if(u.column<2||u.column>=d.length+1)return!1;const g=d.charAt(u.column-2),p=r.get(g);if(!p)return!1;if(_f(g)){if(i==="never")return!1}else if(t==="never")return!1;const b=d.charAt(u.column-1);let _=!1;for(const w of p)w.open===g&&w.close===b&&(_=!0);if(!_)return!1;if(e==="auto"){let w=!1;for(let y=0,k=a.length;y<k;y++){const L=a[y];if(u.lineNumber===L.startLineNumber&&u.column===L.startColumn){w=!0;break}}if(!w)return!1}}return!0}static _runAutoClosingPairDelete(e,t,i){const r=[];for(let s=0,o=i.length;s<o;s++){const a=i[s].getPosition(),l=new oe(a.lineNumber,a.column-1,a.lineNumber,a.column+1);r[s]=new Fo(l,"")}return[!0,r]}static deleteLeft(e,t,i,r,s){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,i,r,s))return this._runAutoClosingPairDelete(t,i,r);const o=[];let a=e!==2;for(let l=0,c=r.length;l<c;l++){const h=Mm.getDeleteRange(r[l],i,t);if(h.isEmpty()){o[l]=null;continue}h.startLineNumber!==h.endLineNumber&&(a=!0),o[l]=new Fo(h,"")}return[a,o]}static getDeleteRange(e,t,i){if(!e.isEmpty())return e;const r=e.getPosition();if(i.useTabStops&&r.column>1){const s=t.getLineContent(r.lineNumber),o=qo(s),a=o===-1?s.length+1:o+1;if(r.column<=a){const l=i.visibleColumnFromColumn(t,r),c=gr.prevIndentTabStop(l,i.indentSize),h=i.columnFromVisibleColumn(t,r.lineNumber,c);return new oe(r.lineNumber,h,r.lineNumber,r.column)}}return oe.fromPositions(Mm.getPositionAfterDeleteLeft(r,t),r)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const i=Afe(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,i+1)}else if(e.lineNumber>1){const i=e.lineNumber-1;return new be(i,t.getLineMaxColumn(i))}else return e}static cut(e,t,i){const r=[];let s=null;i.sort((o,a)=>be.compare(o.getStartPosition(),a.getEndPosition()));for(let o=0,a=i.length;o<a;o++){const l=i[o];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let h,u,d,g;c.lineNumber<t.getLineCount()?(h=c.lineNumber,u=1,d=c.lineNumber+1,g=1):c.lineNumber>1&&s?.endLineNumber!==c.lineNumber?(h=c.lineNumber-1,u=t.getLineMaxColumn(c.lineNumber-1),d=c.lineNumber,g=t.getLineMaxColumn(c.lineNumber)):(h=c.lineNumber,u=1,d=c.lineNumber,g=t.getLineMaxColumn(c.lineNumber));const p=new oe(h,u,d,g);s=p,p.isEmpty()?r[o]=null:r[o]=new Fo(p,"")}else r[o]=null;else r[o]=new Fo(l,"")}return new Co(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class On{static _createWord(e,t,i,r,s){return{start:r,end:s,wordType:t,nextCharClass:i}}static _createIntlWord(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(e,t,i){const r=t.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(r,e,i)}static _doFindPreviousWordOnLine(e,t,i){let r=0;const s=t.findPrevIntlWordBeforeOrAtOffset(e,i.column-2);for(let o=i.column-2;o>=0;o--){const a=e.charCodeAt(o),l=t.get(a);if(s&&o===s.index)return this._createIntlWord(s,l);if(l===0){if(r===2)return this._createWord(e,r,l,o+1,this._findEndOfWord(e,t,r,o+1));r=1}else if(l===2){if(r===1)return this._createWord(e,r,l,o+1,this._findEndOfWord(e,t,r,o+1));r=2}else if(l===1&&r!==0)return this._createWord(e,r,l,o+1,this._findEndOfWord(e,t,r,o+1))}return r!==0?this._createWord(e,r,1,0,this._findEndOfWord(e,t,r,0)):null}static _findEndOfWord(e,t,i,r){const s=t.findNextIntlWordAtOrAfterOffset(e,r),o=e.length;for(let a=r;a<o;a++){const l=e.charCodeAt(a),c=t.get(l);if(s&&a===s.index+s.segment.length||c===1||i===1&&c===2||i===2&&c===0)return a}return o}static _findNextWordOnLine(e,t,i){const r=t.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(r,e,i)}static _doFindNextWordOnLine(e,t,i){let r=0;const s=e.length,o=t.findNextIntlWordAtOrAfterOffset(e,i.column-1);for(let a=i.column-1;a<s;a++){const l=e.charCodeAt(a),c=t.get(l);if(o&&a===o.index)return this._createIntlWord(o,c);if(c===0){if(r===2)return this._createWord(e,r,c,this._findStartOfWord(e,t,r,a-1),a);r=1}else if(c===2){if(r===1)return this._createWord(e,r,c,this._findStartOfWord(e,t,r,a-1),a);r=2}else if(c===1&&r!==0)return this._createWord(e,r,c,this._findStartOfWord(e,t,r,a-1),a)}return r!==0?this._createWord(e,r,1,this._findStartOfWord(e,t,r,s-1),s):null}static _findStartOfWord(e,t,i,r){const s=t.findPrevIntlWordBeforeOrAtOffset(e,r);for(let o=r;o>=0;o--){const a=e.charCodeAt(o),l=t.get(a);if(s&&o===s.index)return o;if(l===1||i===1&&l===2||i===2&&l===0)return o+1}return 0}static moveWordLeft(e,t,i,r,s){let o=i.lineNumber,a=i.column;a===1&&o>1&&(o=o-1,a=t.getLineMaxColumn(o));let l=On._findPreviousWordOnLine(e,t,new be(o,a));if(r===0)return new be(o,l?l.start+1:1);if(r===1)return!s&&l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=On._findPreviousWordOnLine(e,t,new be(o,l.start+1))),new be(o,l?l.start+1:1);if(r===3){for(;l&&l.wordType===2;)l=On._findPreviousWordOnLine(e,t,new be(o,l.start+1));return new be(o,l?l.start+1:1)}return l&&a<=l.end+1&&(l=On._findPreviousWordOnLine(e,t,new be(o,l.start+1))),new be(o,l?l.end+1:1)}static _moveWordPartLeft(e,t){const i=t.lineNumber,r=e.getLineMaxColumn(i);if(t.column===1)return i>1?new be(i-1,e.getLineMaxColumn(i-1)):t;const s=e.getLineContent(i);for(let o=t.column-1;o>1;o--){const a=s.charCodeAt(o-2),l=s.charCodeAt(o-1);if(a===95&&l!==95)return new be(i,o);if(a===45&&l!==45)return new be(i,o);if((n0(a)||b2(a))&&Id(l))return new be(i,o);if(Id(a)&&Id(l)&&o+1<r){const c=s.charCodeAt(o);if(n0(c)||b2(c))return new be(i,o)}}return new be(i,1)}static moveWordRight(e,t,i,r){let s=i.lineNumber,o=i.column,a=!1;o===t.getLineMaxColumn(s)&&s<t.getLineCount()&&(a=!0,s=s+1,o=1);let l=On._findNextWordOnLine(e,t,new be(s,o));if(r===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=On._findNextWordOnLine(e,t,new be(s,l.end+1))),l?o=l.end+1:o=t.getLineMaxColumn(s);else if(r===3){for(a&&(o=0);l&&(l.wordType===2||l.start+1<=o);)l=On._findNextWordOnLine(e,t,new be(s,l.end+1));l?o=l.start+1:o=t.getLineMaxColumn(s)}else l&&!a&&o>=l.start+1&&(l=On._findNextWordOnLine(e,t,new be(s,l.end+1))),l?o=l.start+1:o=t.getLineMaxColumn(s);return new be(s,o)}static _moveWordPartRight(e,t){const i=t.lineNumber,r=e.getLineMaxColumn(i);if(t.column===r)return i<e.getLineCount()?new be(i+1,1):t;const s=e.getLineContent(i);for(let o=t.column+1;o<r;o++){const a=s.charCodeAt(o-2),l=s.charCodeAt(o-1);if(a!==95&&l===95)return new be(i,o);if(a!==45&&l===45)return new be(i,o);if((n0(a)||b2(a))&&Id(l))return new be(i,o);if(Id(a)&&Id(l)&&o+1<r){const c=s.charCodeAt(o);if(n0(c)||b2(c))return new be(i,o)}}return new be(i,r)}static _deleteWordLeftWhitespace(e,t){const i=e.getLineContent(t.lineNumber),r=t.column-2,s=jm(i,r);return s+1<r?new oe(t.lineNumber,s+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const i=e.wordSeparators,r=e.model,s=e.selection,o=e.whitespaceHeuristics;if(!s.isEmpty())return s;if(Mm.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const u=e.selection.getPosition();return new oe(u.lineNumber,u.column-1,u.lineNumber,u.column+1)}const a=new be(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(o){const u=this._deleteWordLeftWhitespace(r,a);if(u)return u}let h=On._findPreviousWordOnLine(i,r,a);return t===0?h?c=h.start+1:c>1?c=1:(l--,c=r.getLineMaxColumn(l)):(h&&c<=h.end+1&&(h=On._findPreviousWordOnLine(i,r,new be(l,h.start+1))),h?c=h.end+1:c>1?c=1:(l--,c=r.getLineMaxColumn(l))),new oe(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,i){if(!i.isEmpty())return i;const r=new be(i.positionLineNumber,i.positionColumn),s=this._deleteInsideWordWhitespace(t,r);return s||this._deleteInsideWordDetermineDeleteRange(e,t,r)}static _charAtIsWhitespace(e,t){const i=e.charCodeAt(t);return i===32||i===9}static _deleteInsideWordWhitespace(e,t){const i=e.getLineContent(t.lineNumber),r=i.length;if(r===0)return null;let s=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(i,s))return null;let o=Math.min(t.column-1,r-1);if(!this._charAtIsWhitespace(i,o))return null;for(;s>0&&this._charAtIsWhitespace(i,s-1);)s--;for(;o+1<r&&this._charAtIsWhitespace(i,o+1);)o++;return new oe(t.lineNumber,s+1,t.lineNumber,o+2)}static _deleteInsideWordDetermineDeleteRange(e,t,i){const r=t.getLineContent(i.lineNumber),s=r.length;if(s===0)return i.lineNumber>1?new oe(i.lineNumber-1,t.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1):i.lineNumber<t.getLineCount()?new oe(i.lineNumber,1,i.lineNumber+1,1):new oe(i.lineNumber,1,i.lineNumber,1);const o=u=>u.start+1<=i.column&&i.column<=u.end+1,a=(u,d)=>(u=Math.min(u,i.column),d=Math.max(d,i.column),new oe(i.lineNumber,u,i.lineNumber,d)),l=u=>{let d=u.start+1,g=u.end+1,p=!1;for(;g-1<s&&this._charAtIsWhitespace(r,g-1);)p=!0,g++;if(!p)for(;d>1&&this._charAtIsWhitespace(r,d-2);)d--;return a(d,g)},c=On._findPreviousWordOnLine(e,t,i);if(c&&o(c))return l(c);const h=On._findNextWordOnLine(e,t,i);return h&&o(h)?l(h):c&&h?a(c.end+1,h.start+1):c?a(c.start+1,c.end+1):h?a(h.start+1,h.end+1):a(1,s+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),r=On._moveWordPartLeft(e,i);return new oe(i.lineNumber,i.column,r.lineNumber,r.column)}static _findFirstNonWhitespaceChar(e,t){const i=e.length;for(let r=t;r<i;r++){const s=e.charAt(r);if(s!==" "&&s!=="	")return r}return i}static _deleteWordRightWhitespace(e,t){const i=e.getLineContent(t.lineNumber),r=t.column-1,s=this._findFirstNonWhitespaceChar(i,r);return r+1<s?new oe(t.lineNumber,t.column,t.lineNumber,s+1):null}static deleteWordRight(e,t){const i=e.wordSeparators,r=e.model,s=e.selection,o=e.whitespaceHeuristics;if(!s.isEmpty())return s;const a=new be(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,c=a.column;const h=r.getLineCount(),u=r.getLineMaxColumn(l);if(l===h&&c===u)return null;if(o){const g=this._deleteWordRightWhitespace(r,a);if(g)return g}let d=On._findNextWordOnLine(i,r,a);return t===2?d?c=d.end+1:c<u||l===h?c=u:(l++,d=On._findNextWordOnLine(i,r,new be(l,1)),d?c=d.start+1:c=r.getLineMaxColumn(l)):(d&&c>=d.start+1&&(d=On._findNextWordOnLine(i,r,new be(l,d.end+1))),d?c=d.start+1:c<u||l===h?c=u:(l++,d=On._findNextWordOnLine(i,r,new be(l,1)),d?c=d.start+1:c=r.getLineMaxColumn(l))),new oe(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),r=On._moveWordPartRight(e,i);return new oe(i.lineNumber,i.column,r.lineNumber,r.column)}static _createWordAtPosition(e,t,i){const r=new oe(t,i.start+1,t,i.end+1);return{word:e.getValueInRange(r),startColumn:r.startColumn,endColumn:r.endColumn}}static getWordAtPosition(e,t,i,r){const s=T1(t,i),o=On._findPreviousWordOnLine(s,e,r);if(o&&o.wordType===1&&o.start<=r.column-1&&r.column-1<=o.end)return On._createWordAtPosition(e,r.lineNumber,o);const a=On._findNextWordOnLine(s,e,r);return a&&a.wordType===1&&a.start<=r.column-1&&r.column-1<=a.end?On._createWordAtPosition(e,r.lineNumber,a):null}static word(e,t,i,r,s){const o=T1(e.wordSeparators,e.wordSegmenterLocales),a=On._findPreviousWordOnLine(o,t,s),l=On._findNextWordOnLine(o,t,s);if(!r){let g,p;return a&&a.wordType===1&&a.start<=s.column-1&&s.column-1<=a.end?(g=a.start+1,p=a.end+1):l&&l.wordType===1&&l.start<=s.column-1&&s.column-1<=l.end?(g=l.start+1,p=l.end+1):(a?g=a.end+1:g=1,l?p=l.start+1:p=t.getLineMaxColumn(s.lineNumber)),new Fr(new oe(s.lineNumber,g,s.lineNumber,p),1,0,new be(s.lineNumber,p),0)}let c,h;a&&a.wordType===1&&a.start<s.column-1&&s.column-1<a.end?(c=a.start+1,h=a.end+1):l&&l.wordType===1&&l.start<s.column-1&&s.column-1<l.end?(c=l.start+1,h=l.end+1):(c=s.column,h=s.column);const u=s.lineNumber;let d;if(i.selectionStart.containsPosition(s))d=i.selectionStart.endColumn;else if(s.isBeforeOrEqual(i.selectionStart.getStartPosition())){d=c;const g=new be(u,d);i.selectionStart.containsPosition(g)&&(d=i.selectionStart.endColumn)}else{d=h;const g=new be(u,d);i.selectionStart.containsPosition(g)&&(d=i.selectionStart.startColumn)}return i.move(!0,u,d,0)}}class Ls{static addCursorDown(e,t,i){const r=[];let s=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];r[s++]=new ei(l.modelState,l.viewState),i?r[s++]=ei.fromModelState(Ii.translateDown(e.cursorConfig,e.model,l.modelState)):r[s++]=ei.fromViewState(Ii.translateDown(e.cursorConfig,e,l.viewState))}return r}static addCursorUp(e,t,i){const r=[];let s=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];r[s++]=new ei(l.modelState,l.viewState),i?r[s++]=ei.fromModelState(Ii.translateUp(e.cursorConfig,e.model,l.modelState)):r[s++]=ei.fromViewState(Ii.translateUp(e.cursorConfig,e,l.viewState))}return r}static moveToBeginningOfLine(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];r[s]=this._moveToLineStart(e,a,i)}return r}static _moveToLineStart(e,t,i){const r=t.viewState.position.column,s=t.modelState.position.column,o=r===s,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!o&&!(r===l)?this._moveToLineStartByView(e,t,i):this._moveToLineStartByModel(e,t,i)}static _moveToLineStartByView(e,t,i){return ei.fromViewState(Ii.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,i))}static _moveToLineStartByModel(e,t,i){return ei.fromModelState(Ii.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,i))}static moveToEndOfLine(e,t,i,r){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=this._moveToLineEnd(e,l,i,r)}return s}static _moveToLineEnd(e,t,i,r){const s=t.viewState.position,o=e.getLineMaxColumn(s.lineNumber),a=s.column===o,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),h=o-s.column===c-l.column;return a||h?this._moveToLineEndByModel(e,t,i,r):this._moveToLineEndByView(e,t,i,r)}static _moveToLineEndByView(e,t,i,r){return ei.fromViewState(Ii.moveToEndOfLine(e.cursorConfig,e,t.viewState,i,r))}static _moveToLineEndByModel(e,t,i,r){return ei.fromModelState(Ii.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,i,r))}static expandLineSelection(e,t){const i=[];for(let r=0,s=t.length;r<s;r++){const o=t[r],a=o.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=o.modelState.selection.endLineNumber,h;c===l?h=e.model.getLineMaxColumn(l):(c++,h=1),i[r]=ei.fromModelState(new Fr(new oe(a,1,a,1),0,0,new be(c,h),0))}return i}static moveToBeginningOfBuffer(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];r[s]=ei.fromModelState(Ii.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return r}static moveToEndOfBuffer(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];r[s]=ei.fromModelState(Ii.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return r}static selectAll(e,t){const i=e.model.getLineCount(),r=e.model.getLineMaxColumn(i);return ei.fromModelState(new Fr(new oe(1,1,1,1),0,0,new be(i,r),0))}static line(e,t,i,r,s){const o=e.model.validatePosition(r),a=s?e.coordinatesConverter.validateViewPosition(new be(s.lineNumber,s.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);if(!i){const c=e.model.getLineCount();let h=o.lineNumber+1,u=1;return h>c&&(h=c,u=e.model.getLineMaxColumn(h)),ei.fromModelState(new Fr(new oe(o.lineNumber,1,h,u),2,0,new be(h,u),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<l)return ei.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(o.lineNumber>l){const c=e.getLineCount();let h=a.lineNumber+1,u=1;return h>c&&(h=c,u=e.getLineMaxColumn(h)),ei.fromViewState(t.viewState.move(!0,h,u,0))}else{const c=t.modelState.selectionStart.getEndPosition();return ei.fromModelState(t.modelState.move(!0,c.lineNumber,c.column,0))}}static word(e,t,i,r){const s=e.model.validatePosition(r);return ei.fromModelState(On.word(e.cursorConfig,e.model,t.modelState,i,s))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new ei(t.modelState,t.viewState);const i=t.viewState.position.lineNumber,r=t.viewState.position.column;return ei.fromViewState(new Fr(new oe(i,r,i,r),0,0,new be(i,r),0))}static moveTo(e,t,i,r,s){if(i){if(t.modelState.selectionStartKind===1)return this.word(e,t,i,r);if(t.modelState.selectionStartKind===2)return this.line(e,t,i,r,s)}const o=e.model.validatePosition(r),a=s?e.coordinatesConverter.validateViewPosition(new be(s.lineNumber,s.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);return ei.fromViewState(t.viewState.move(i,a.lineNumber,a.column,0))}static simpleMove(e,t,i,r,s,o){switch(i){case 0:return o===4?this._moveHalfLineLeft(e,t,r):this._moveLeft(e,t,r,s);case 1:return o===4?this._moveHalfLineRight(e,t,r):this._moveRight(e,t,r,s);case 2:return o===2?this._moveUpByViewLines(e,t,r,s):this._moveUpByModelLines(e,t,r,s);case 3:return o===2?this._moveDownByViewLines(e,t,r,s):this._moveDownByModelLines(e,t,r,s);case 4:return o===2?t.map(a=>ei.fromViewState(Ii.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,r))):t.map(a=>ei.fromModelState(Ii.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,r)));case 5:return o===2?t.map(a=>ei.fromViewState(Ii.moveToNextBlankLine(e.cursorConfig,e,a.viewState,r))):t.map(a=>ei.fromModelState(Ii.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,r)));case 6:return this._moveToViewMinColumn(e,t,r);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,r);case 8:return this._moveToViewCenterColumn(e,t,r);case 9:return this._moveToViewMaxColumn(e,t,r);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,r);default:return null}}static viewportMove(e,t,i,r,s){const o=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(o);switch(i){case 11:{const l=this._firstLineNumberInRange(e.model,a,s),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],r,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,s),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],r,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],r,l,c)]}case 14:{const l=[];for(let c=0,h=t.length;c<h;c++){const u=t[c];l[c]=this.findPositionInViewportIfOutside(e,u,o,r)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,i,r){const s=t.viewState.position.lineNumber;if(i.startLineNumber<=s&&s<=i.endLineNumber-1)return new ei(t.modelState,t.viewState);{let o;s>i.endLineNumber-1?o=i.endLineNumber-1:s<i.startLineNumber?o=i.startLineNumber:o=s;const a=Ii.vertical(e.cursorConfig,e,s,t.viewState.position.column,t.viewState.leftoverVisibleColumns,o,!1);return ei.fromViewState(t.viewState.move(r,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,i){let r=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(r)&&r++,Math.min(t.endLineNumber,r+i-1)}static _lastLineNumberInRange(e,t,i){let r=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(r)&&r++,Math.max(r,t.endLineNumber-i+1)}static _moveLeft(e,t,i,r){return t.map(s=>ei.fromViewState(Ii.moveLeft(e.cursorConfig,e,s.viewState,i,r)))}static _moveHalfLineLeft(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);r[s]=ei.fromViewState(Ii.moveLeft(e.cursorConfig,e,a.viewState,i,c))}return r}static _moveRight(e,t,i,r){return t.map(s=>ei.fromViewState(Ii.moveRight(e.cursorConfig,e,s.viewState,i,r)))}static _moveHalfLineRight(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);r[s]=ei.fromViewState(Ii.moveRight(e.cursorConfig,e,a.viewState,i,c))}return r}static _moveDownByViewLines(e,t,i,r){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=ei.fromViewState(Ii.moveDown(e.cursorConfig,e,l.viewState,i,r))}return s}static _moveDownByModelLines(e,t,i,r){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=ei.fromModelState(Ii.moveDown(e.cursorConfig,e.model,l.modelState,i,r))}return s}static _moveUpByViewLines(e,t,i,r){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=ei.fromViewState(Ii.moveUp(e.cursorConfig,e,l.viewState,i,r))}return s}static _moveUpByModelLines(e,t,i,r){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=ei.fromModelState(Ii.moveUp(e.cursorConfig,e.model,l.modelState,i,r))}return s}static _moveToViewPosition(e,t,i,r,s){return ei.fromViewState(t.viewState.move(i,r,s,0))}static _moveToModelPosition(e,t,i,r,s){return ei.fromModelState(t.modelState.move(i,r,s,0))}static _moveToViewMinColumn(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);r[s]=this._moveToViewPosition(e,a,i,l,c)}return r}static _moveToViewFirstNonWhitespaceColumn(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);r[s]=this._moveToViewPosition(e,a,i,l,c)}return r}static _moveToViewCenterColumn(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);r[s]=this._moveToViewPosition(e,a,i,l,c)}return r}static _moveToViewMaxColumn(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);r[s]=this._moveToViewPosition(e,a,i,l,c)}return r}static _moveToViewLastNonWhitespaceColumn(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);r[s]=this._moveToViewPosition(e,a,i,l,c)}return r}}var Uk;(function(n){const e=function(i){if(!go(i))return!1;const r=i;return!(!Ca(r.to)||!Ua(r.select)&&!pK(r.select)||!Ua(r.by)&&!Ca(r.by)||!Ua(r.value)&&!J1(r.value))};n.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},n.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},n.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(i){if(!i.to)return null;let r;switch(i.to){case n.RawDirection.Left:r=0;break;case n.RawDirection.Right:r=1;break;case n.RawDirection.Up:r=2;break;case n.RawDirection.Down:r=3;break;case n.RawDirection.PrevBlankLine:r=4;break;case n.RawDirection.NextBlankLine:r=5;break;case n.RawDirection.WrappedLineStart:r=6;break;case n.RawDirection.WrappedLineFirstNonWhitespaceCharacter:r=7;break;case n.RawDirection.WrappedLineColumnCenter:r=8;break;case n.RawDirection.WrappedLineEnd:r=9;break;case n.RawDirection.WrappedLineLastNonWhitespaceCharacter:r=10;break;case n.RawDirection.ViewPortTop:r=11;break;case n.RawDirection.ViewPortBottom:r=13;break;case n.RawDirection.ViewPortCenter:r=12;break;case n.RawDirection.ViewPortIfOutside:r=14;break;default:return null}let s=0;switch(i.by){case n.RawUnit.Line:s=1;break;case n.RawUnit.WrappedLine:s=2;break;case n.RawUnit.Character:s=3;break;case n.RawUnit.HalfLine:s=4;break}return{direction:r,unit:s,select:!!i.select,value:i.value||1}}n.parse=t})(Uk||(Uk={}));class MLe{constructor(e,t,i){this._indentRulesSupport=t,this._indentationLineProcessor=new XQ(e,i)}shouldIncrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIncrease(i)}shouldDecrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldDecrease(i)}shouldIgnore(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIgnore(i)}shouldIndentNextLine(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIndentNextLine(i)}}class jR{constructor(e,t){this.model=e,this.indentationLineProcessor=new XQ(e,t)}getProcessedTokenContextAroundRange(e){const t=this._getProcessedTokensBeforeRange(e),i=this._getProcessedTokensAfterRange(e),r=this._getProcessedPreviousLineTokens(e);return{beforeRangeProcessedTokens:t,afterRangeProcessedTokens:i,previousLineProcessedTokens:r}}_getProcessedTokensBeforeRange(e){this.model.tokenization.forceTokenization(e.startLineNumber);const t=this.model.tokenization.getLineTokens(e.startLineNumber),i=$g(t,e.startColumn-1);let r;if(UR(this.model,e.getStartPosition())){const o=e.startColumn-1-i.firstCharOffset,a=i.firstCharOffset,l=a+o;r=t.sliceAndInflate(a,l,0)}else{const o=e.startColumn-1;r=t.sliceAndInflate(0,o,0)}return this.indentationLineProcessor.getProcessedTokens(r)}_getProcessedTokensAfterRange(e){const t=e.isEmpty()?e.getStartPosition():e.getEndPosition();this.model.tokenization.forceTokenization(t.lineNumber);const i=this.model.tokenization.getLineTokens(t.lineNumber),r=$g(i,t.column-1),s=t.column-1-r.firstCharOffset,o=r.firstCharOffset+s,a=r.firstCharOffset+r.getLineLength(),l=i.sliceAndInflate(o,a,0);return this.indentationLineProcessor.getProcessedTokens(l)}_getProcessedPreviousLineTokens(e){const t=g=>{this.model.tokenization.forceTokenization(g);const p=this.model.tokenization.getLineTokens(g),b=this.model.getLineMaxColumn(g)-1;return $g(p,b)};this.model.tokenization.forceTokenization(e.startLineNumber);const i=this.model.tokenization.getLineTokens(e.startLineNumber),r=$g(i,e.startColumn-1),s=jr.createEmpty("",r.languageIdCodec),o=e.startLineNumber-1;if(o===0||!(r.firstCharOffset===0))return s;const c=t(o);if(!(r.languageId===c.languageId))return s;const u=c.toIViewLineTokens();return this.indentationLineProcessor.getProcessedTokens(u)}}class XQ{constructor(e,t){this.model=e,this.languageConfigurationService=t}getProcessedLine(e,t){const i=(o,a)=>{const l=js(o);return a+o.substring(l.length)};this.model.tokenization.forceTokenization?.(e);const r=this.model.tokenization.getLineTokens(e);let s=this.getProcessedTokens(r).getLineContent();return t!==void 0&&(s=i(s,t)),s}getProcessedTokens(e){const t=l=>l===2||l===3||l===1,i=e.getLanguageId(0),s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew.getBracketRegExp({global:!0}),o=[];return e.forEach(l=>{const c=e.getStandardTokenType(l);let h=e.getTokenText(l);t(c)&&(h=h.replace(s,""));const u=e.getMetadata(l);o.push({text:h,metadata:u})}),jr.createFromTextAndMetadata(o,e.languageIdCodec)}}function UR(n,e){n.tokenization.forceTokenization(e.lineNumber);const t=n.tokenization.getLineTokens(e.lineNumber),i=$g(t,e.column-1),r=i.firstCharOffset===0,s=t.getLanguageId(0)===i.languageId;return!r&&!s}function qR(n,e,t,i){e.tokenization.forceTokenization(t.startLineNumber);const r=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),s=i.getLanguageConfiguration(r);if(!s)return null;const a=new jR(e,i).getProcessedTokenContextAroundRange(t),l=a.previousLineProcessedTokens.getLineContent(),c=a.beforeRangeProcessedTokens.getLineContent(),h=a.afterRangeProcessedTokens.getLineContent(),u=s.onEnter(n,l,c,h);if(!u)return null;const d=u.indentAction;let g=u.appendText;const p=u.removeText||0;g?d===qs.Indent&&(g="	"+g):d===qs.Indent||d===qs.IndentOutdent?g="	":g="";let b=UY(e,t.startLineNumber,t.startColumn);return p&&(b=b.substring(0,b.length-p)),{indentAction:d,appendText:g,removeText:p,indentation:b}}var ALe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},RLe=function(n,e){return function(t,i){e(t,i,n)}},ex;const O6=Object.create(null);function ig(n,e){if(e<=0)return"";O6[n]||(O6[n]=["",n]);const t=O6[n];for(let i=t.length;i<=e;i++)t[i]=t[i-1]+n;return t[e]}let Am=ex=class{static unshiftIndent(e,t,i,r,s){const o=gr.visibleColumnFromColumn(e,t,i);if(s){const a=ig(" ",r),c=gr.prevIndentTabStop(o,r)/r;return ig(a,c)}else{const a="	",c=gr.prevRenderTabStop(o,i)/i;return ig(a,c)}}static shiftIndent(e,t,i,r,s){const o=gr.visibleColumnFromColumn(e,t,i);if(s){const a=ig(" ",r),c=gr.nextIndentTabStop(o,r)/r;return ig(a,c)}else{const a="	",c=gr.nextRenderTabStop(o,i)/i;return ig(a,c)}}constructor(e,t,i){this._languageConfigurationService=i,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,i){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,i):e.addEditOperation(t,i)}getEditOperations(e,t){const i=this._selection.startLineNumber;let r=this._selection.endLineNumber;this._selection.endColumn===1&&i!==r&&(r=r-1);const{tabSize:s,indentSize:o,insertSpaces:a}=this._opts,l=i===r;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(i))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,h=0;for(let u=i;u<=r;u++,c=h){h=0;const d=e.getLineContent(u);let g=qo(d);if(this._opts.isUnshift&&(d.length===0||g===0)||!l&&!this._opts.isUnshift&&d.length===0)continue;if(g===-1&&(g=d.length),u>1&&gr.visibleColumnFromColumn(d,g+1,s)%o!==0&&e.tokenization.isCheapToTokenize(u-1)){const _=qR(this._opts.autoIndent,e,new oe(u-1,e.getLineMaxColumn(u-1),u-1,e.getLineMaxColumn(u-1)),this._languageConfigurationService);if(_){if(h=c,_.appendText)for(let w=0,y=_.appendText.length;w<y&&h<o&&_.appendText.charCodeAt(w)===32;w++)h++;_.removeText&&(h=Math.max(0,h-_.removeText));for(let w=0;w<h&&!(g===0||d.charCodeAt(g-1)!==32);w++)g--}}if(this._opts.isUnshift&&g===0)continue;let p;this._opts.isUnshift?p=ex.unshiftIndent(d,g+1,s,o,a):p=ex.shiftIndent(d,g+1,s,o,a),this._addEditOperation(t,new oe(u,1,u,g+1),p),u===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=g+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(i)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?ig(" ",o):"	";for(let h=i;h<=r;h++){const u=e.getLineContent(h);let d=qo(u);if(!(this._opts.isUnshift&&(u.length===0||d===0))&&!(!l&&!this._opts.isUnshift&&u.length===0)&&(d===-1&&(d=u.length),!(this._opts.isUnshift&&d===0)))if(this._opts.isUnshift){d=Math.min(d,o);for(let g=0;g<d;g++)if(u.charCodeAt(g)===9){d=g+1;break}this._addEditOperation(t,new oe(h,1,h,d+1),"")}else this._addEditOperation(t,new oe(h,1,h,1),c),h===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const r=t.getInverseEditOperations()[0];return new $i(r.range.endLineNumber,r.range.endColumn,r.range.endLineNumber,r.range.endColumn)}const i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const r=this._selection.startColumn;return i.startColumn<=r?i:i.getDirection()===0?new $i(i.startLineNumber,r,i.endLineNumber,i.endColumn):new $i(i.endLineNumber,i.endColumn,i.startLineNumber,r)}return i}};Am=ex=ALe([RLe(2,mh)],Am);class PLe{constructor(e,t,i){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=i}getEditOperations(e,t){t.addTrackedEditOperation(new oe(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new oe(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const i=t.getInverseEditOperations(),r=i[0].range,s=i[1].range;return new $i(r.endLineNumber,r.endColumn,s.endLineNumber,s.endColumn-this._charAfterSelection.length)}}class OLe{constructor(e,t,i){this._position=e,this._text=t,this._charAfter=i}getEditOperations(e,t){t.addTrackedEditOperation(new oe(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return new $i(r.endLineNumber,r.startColumn,r.endLineNumber,r.endColumn-this._charAfter.length)}}function BLe(n,e,t){const i=n.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let r,s=-1;for(r=e-1;r>=1;r--){if(n.tokenization.getLanguageIdAtPosition(r,0)!==i)return s;const o=n.getLineContent(r);if(t.shouldIgnore(r)||/^\s+$/.test(o)||o===""){s=r;continue}return r}}return-1}function qk(n,e,t,i=!0,r){if(n<4)return null;const s=r.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!s)return null;const o=new MLe(e,s,r);if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};const a=BLe(e,t,o);if(a<0)return null;if(a<1)return{indentation:"",action:null};if(o.shouldIncrease(a)||o.shouldIndentNextLine(a)){const l=e.getLineContent(a);return{indentation:js(l),action:qs.Indent,line:a}}else if(o.shouldDecrease(a)){const l=e.getLineContent(a);return{indentation:js(l),action:null,line:a}}else{if(a===1)return{indentation:js(e.getLineContent(a)),action:null,line:a};const l=a-1,c=s.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let h=0;for(let u=l-1;u>0;u--)if(!o.shouldIndentNextLine(u)){h=u;break}return{indentation:js(e.getLineContent(h+1)),action:null,line:h+1}}if(i)return{indentation:js(e.getLineContent(a)),action:null,line:a};for(let h=a;h>0;h--){if(o.shouldIncrease(h))return{indentation:js(e.getLineContent(h)),action:qs.Indent,line:h};if(o.shouldIndentNextLine(h)){let u=0;for(let d=h-1;d>0;d--)if(!o.shouldIndentNextLine(h)){u=d;break}return{indentation:js(e.getLineContent(u+1)),action:null,line:u+1}}else if(o.shouldDecrease(h))return{indentation:js(e.getLineContent(h)),action:null,line:h}}return{indentation:js(e.getLineContent(1)),action:null,line:1}}}function FLe(n,e,t,i,r){if(n<4)return null;const s=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),o=r.getLanguageConfiguration(s).indentRulesSupport;if(!o)return null;e.tokenization.forceTokenization(t.startLineNumber);const l=new jR(e,r).getProcessedTokenContextAroundRange(t),c=l.afterRangeProcessedTokens,h=l.beforeRangeProcessedTokens,u=js(h.getLineContent()),d=zLe(e,t.startLineNumber,h),g=UR(e,t.getStartPosition()),p=e.getLineContent(t.startLineNumber),b=js(p),_=qk(n,d,t.startLineNumber+1,void 0,r);if(!_){const y=g?b:u;return{beforeEnter:y,afterEnter:y}}let w=g?b:_.indentation;return _.action===qs.Indent&&(w=i.shiftIndent(w)),o.shouldDecrease(c.getLineContent())&&(w=i.unshiftIndent(w)),{beforeEnter:g?b:u,afterEnter:w}}function WLe(n,e,t,i,r,s){const o=n.autoIndent;if(o<4||UR(e,t.getStartPosition()))return null;const l=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),c=s.getLanguageConfiguration(l).indentRulesSupport;if(!c)return null;const u=new jR(e,s).getProcessedTokenContextAroundRange(t),d=u.beforeRangeProcessedTokens.getLineContent(),g=u.afterRangeProcessedTokens.getLineContent(),p=d+g,b=d+i+g;if(!c.shouldDecrease(p)&&c.shouldDecrease(b)){const w=qk(o,e,t.startLineNumber,!1,s);if(!w)return null;let y=w.indentation;return w.action!==qs.Indent&&(y=r.unshiftIndent(y)),y}const _=t.startLineNumber-1;if(_>0){const w=e.getLineContent(_);if(c.shouldIndentNextLine(w)&&c.shouldIncrease(b)){const k=qk(o,e,t.startLineNumber,!1,s)?.indentation;if(k!==void 0){const L=e.getLineContent(t.startLineNumber),T=js(L),D=r.shiftIndent(k)===T,O=/^\s*$/.test(p),B=n.autoClosingPairs.autoClosingPairsOpenByEnd.get(i),H=B&&B.length>0&&O;if(D&&H)return k}}}return null}function zLe(n,e,t){return{tokenization:{getLineTokens:r=>r===e?t:n.tokenization.getLineTokens(r),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(r,s)=>n.getLanguageIdAtPosition(r,s)},getLineContent:r=>r===e?t.getLineContent():n.getLineContent(r)}}class HLe{static getEdits(e,t,i,r,s){if(!s&&this._isAutoIndentType(e,t,i)){const o=[];for(const l of i){const c=this._findActualIndentationForSelection(e,t,l,r);if(c===null)return;o.push({selection:l,indentation:c})}const a=AI.getAutoClosingPairClose(e,t,i,r,!1);return this._getIndentationAndAutoClosingPairEdits(e,t,o,r,a)}}static _isAutoIndentType(e,t,i){if(e.autoIndent<4)return!1;for(let r=0,s=i.length;r<s;r++)if(!t.tokenization.isCheapToTokenize(i[r].getEndPosition().lineNumber))return!1;return!0}static _findActualIndentationForSelection(e,t,i,r){const s=WLe(e,t,i,r,{shiftIndent:a=>YR(e,a),unshiftIndent:a=>Gk(e,a)},e.languageConfigurationService);if(s===null)return null;const o=UY(t,i.startLineNumber,i.startColumn);return s===e.normalizeIndentation(o)?null:s}static _getIndentationAndAutoClosingPairEdits(e,t,i,r,s){const o=i.map(({selection:l,indentation:c})=>{if(s!==null){const h=this._getEditFromIndentationAndSelection(e,t,c,l,r,!1);return new QLe(h,l,r,s)}else{const h=this._getEditFromIndentationAndSelection(e,t,c,l,r,!0);return fg(h.range,h.text,!1)}}),a={shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1};return new Co(4,o,a)}static _getEditFromIndentationAndSelection(e,t,i,r,s,o=!0){const a=r.startLineNumber,l=t.getLineFirstNonWhitespaceColumn(a);let c=e.normalizeIndentation(i);if(l!==0){const u=t.getLineContent(a);c+=u.substring(l-1,r.startColumn-1)}return c+=o?s:"",{range:new oe(a,1,r.endLineNumber,r.endColumn),text:c}}}class VLe{static getEdits(e,t,i,r,s,o){if(JQ(t,i,r,s,o))return this._runAutoClosingOvertype(e,r,o)}static _runAutoClosingOvertype(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const l=t[s].getPosition(),c=new oe(l.lineNumber,l.column,l.lineNumber,l.column+1);r[s]=new Fo(c,i)}return new Co(4,r,{shouldPushStackElementBefore:Y5(e,4),shouldPushStackElementAfter:!1})}}class $Le{static getEdits(e,t,i,r,s){if(JQ(e,t,i,r,s)){const o=i.map(a=>new Fo(new oe(a.positionLineNumber,a.positionColumn,a.positionLineNumber,a.positionColumn+1),"",!1));return new Co(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}}class AI{static getEdits(e,t,i,r,s,o){if(!o){const a=this.getAutoClosingPairClose(e,t,i,r,s);if(a!==null)return this._runAutoClosingOpenCharType(i,r,s,a)}}static _runAutoClosingOpenCharType(e,t,i,r){const s=[];for(let o=0,a=e.length;o<a;o++){const l=e[o];s[o]=new XLe(l,t,!i,r)}return new Co(4,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static getAutoClosingPairClose(e,t,i,r,s){for(const p of i)if(!p.isEmpty())return null;const o=i.map(p=>{const b=p.getPosition();return s?{lineNumber:b.lineNumber,beforeColumn:b.column-r.length,afterColumn:b.column}:{lineNumber:b.lineNumber,beforeColumn:b.column,afterColumn:b.column}}),a=this._findAutoClosingPairOpen(e,t,o.map(p=>new be(p.lineNumber,p.beforeColumn)),r);if(!a)return null;let l,c;if(_f(r)?(l=e.autoClosingQuotes,c=e.shouldAutoCloseBefore.quote):(e.blockCommentStartToken?a.open.includes(e.blockCommentStartToken):!1)?(l=e.autoClosingComments,c=e.shouldAutoCloseBefore.comment):(l=e.autoClosingBrackets,c=e.shouldAutoCloseBefore.bracket),l==="never")return null;const u=this._findContainedAutoClosingPair(e,a),d=u?u.close:"";let g=!0;for(const p of o){const{lineNumber:b,beforeColumn:_,afterColumn:w}=p,y=t.getLineContent(b),k=y.substring(0,_-1),L=y.substring(w-1);if(L.startsWith(d)||(g=!1),L.length>0){const O=L.charAt(0);if(!this._isBeforeClosingBrace(e,L)&&!c(O))return null}if(a.open.length===1&&(r==="'"||r==='"')&&l!=="always"){const O=T1(e.wordSeparators,[]);if(k.length>0){const B=k.charCodeAt(k.length-1);if(O.get(B)===0)return null}}if(!t.tokenization.isCheapToTokenize(b))return null;t.tokenization.forceTokenization(b);const T=t.tokenization.getLineTokens(b),N=$g(T,_-1);if(!a.shouldAutoClose(N,_-N.firstCharOffset))return null;const D=a.findNeutralCharacter();if(D){const O=t.tokenization.getTokenTypeIfInsertingCharacter(b,_,D);if(!a.isOK(O))return null}}return g?a.close.substring(0,a.close.length-d.length):a.close}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const i=t.close.charAt(t.close.length-1),r=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(i)||[];let s=null;for(const o of r)o.open!==t.open&&t.open.includes(o.open)&&t.close.endsWith(o.close)&&(!s||o.open.length>s.open.length)&&(s=o);return s}static _findAutoClosingPairOpen(e,t,i,r){const s=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(r);if(!s)return null;let o=null;for(const a of s)if(o===null||a.open.length>o.open.length){let l=!0;for(const c of i)if(t.getValueInRange(new oe(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+r!==a.open){l=!1;break}l&&(o=a)}return o}static _isBeforeClosingBrace(e,t){const i=t.charAt(0),r=e.autoClosingPairs.autoClosingPairsOpenByStart.get(i)||[],s=e.autoClosingPairs.autoClosingPairsCloseByStart.get(i)||[],o=r.some(l=>t.startsWith(l.open)),a=s.some(l=>t.startsWith(l.close));return!o&&a}}class jLe{static getEdits(e,t,i,r,s){if(!s&&this._isSurroundSelectionType(e,t,i,r))return this._runSurroundSelectionType(e,i,r)}static _runSurroundSelectionType(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=e.surroundingPairs[i];r[s]=new PLe(a,i,l)}return new Co(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isSurroundSelectionType(e,t,i,r){if(!eJ(e,r)||!e.surroundingPairs.hasOwnProperty(r))return!1;const s=_f(r);for(const o of i){if(o.isEmpty())return!1;let a=!0;for(let l=o.startLineNumber;l<=o.endLineNumber;l++){const c=t.getLineContent(l),h=l===o.startLineNumber?o.startColumn-1:0,u=l===o.endLineNumber?o.endColumn-1:c.length,d=c.substring(h,u);if(/[^ \t]/.test(d)){a=!1;break}}if(a)return!1;if(s&&o.startLineNumber===o.endLineNumber&&o.startColumn+1===o.endColumn){const l=t.getValueInRange(o);if(_f(l))return!1}}return!0}}class ULe{static getEdits(e,t,i,r,s,o){if(!o&&this._isTypeInterceptorElectricChar(t,i,r)){const a=this._typeInterceptorElectricChar(e,t,i,r[0],s);if(a)return a}}static _isTypeInterceptorElectricChar(e,t,i){return!!(i.length===1&&t.tokenization.isCheapToTokenize(i[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,i,r,s){if(!t.electricChars.hasOwnProperty(s)||!r.isEmpty())return null;const o=r.getPosition();i.tokenization.forceTokenization(o.lineNumber);const a=i.tokenization.getLineTokens(o.lineNumber);let l;try{l=t.onElectricCharacter(s,a,o.column)}catch(c){return Wi(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+s).lastIndexOf(l.matchOpenBracket)+1,h=i.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:o.lineNumber,column:c},500);if(h){if(h.startLineNumber===o.lineNumber)return null;const u=i.getLineContent(h.startLineNumber),d=js(u),g=t.normalizeIndentation(d),p=i.getLineContent(o.lineNumber),b=i.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,_=p.substring(b-1,o.column-1),w=g+_+s,y=new oe(o.lineNumber,1,o.lineNumber,o.column),k=new Fo(y,w);return new Co(KR(w,e),[k],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}}class qLe{static getEdits(e,t,i){const r=[];for(let o=0,a=t.length;o<a;o++)r[o]=new Fo(t[o],i);const s=KR(i,e);return new Co(s,r,{shouldPushStackElementBefore:Y5(e,s),shouldPushStackElementAfter:!1})}}class QQ{static getEdits(e,t,i,r,s){if(!s&&r===`
`){const o=[];for(let a=0,l=i.length;a<l;a++)o[a]=this._enter(e,t,!1,i[a]);return new Co(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}static _enter(e,t,i,r){if(e.autoIndent===0)return fg(r,`
`,i);if(!t.tokenization.isCheapToTokenize(r.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(r.startLineNumber),c=js(l).substring(0,r.startColumn-1);return fg(r,`
`+e.normalizeIndentation(c),i)}const s=qR(e.autoIndent,t,r,e.languageConfigurationService);if(s){if(s.indentAction===qs.None)return fg(r,`
`+e.normalizeIndentation(s.indentation+s.appendText),i);if(s.indentAction===qs.Indent)return fg(r,`
`+e.normalizeIndentation(s.indentation+s.appendText),i);if(s.indentAction===qs.IndentOutdent){const l=e.normalizeIndentation(s.indentation),c=e.normalizeIndentation(s.indentation+s.appendText),h=`
`+c+`
`+l;return i?new JS(r,h,!0):new jk(r,h,-1,c.length-l.length,!0)}else if(s.indentAction===qs.Outdent){const l=Gk(e,s.indentation);return fg(r,`
`+e.normalizeIndentation(l+s.appendText),i)}}const o=t.getLineContent(r.startLineNumber),a=js(o).substring(0,r.startColumn-1);if(e.autoIndent>=4){const l=FLe(e.autoIndent,t,r,{unshiftIndent:c=>Gk(e,c),shiftIndent:c=>YR(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,r.getEndPosition());const h=r.endColumn,u=t.getLineContent(r.endLineNumber),d=qo(u);if(d>=0?r=r.setEndPosition(r.endLineNumber,Math.max(r.endColumn,d+1)):r=r.setEndPosition(r.endLineNumber,t.getLineMaxColumn(r.endLineNumber)),i)return new JS(r,`
`+e.normalizeIndentation(l.afterEnter),!0);{let g=0;return h<=d+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),g=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new jk(r,`
`+e.normalizeIndentation(l.afterEnter),0,g,!0)}}}return fg(r,`
`+e.normalizeIndentation(a),i)}static lineInsertBefore(e,t,i){if(t===null||i===null)return[];const r=[];for(let s=0,o=i.length;s<o;s++){let a=i[s].positionLineNumber;if(a===1)r[s]=new JS(new oe(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);r[s]=this._enter(e,t,!1,new oe(a,l,a,l))}}return r}static lineInsertAfter(e,t,i){if(t===null||i===null)return[];const r=[];for(let s=0,o=i.length;s<o;s++){const a=i[s].positionLineNumber,l=t.getLineMaxColumn(a);r[s]=this._enter(e,t,!1,new oe(a,l,a,l))}return r}static lineBreakInsert(e,t,i){const r=[];for(let s=0,o=i.length;s<o;s++)r[s]=this._enter(e,t,!0,i[s]);return r}}class GLe{static getEdits(e,t,i,r,s,o){const a=this._distributePasteToCursors(e,i,r,s,o);return a?(i=i.sort(oe.compareRangesUsingStarts),this._distributedPaste(e,t,i,a)):this._simplePaste(e,t,i,r,s)}static _distributePasteToCursors(e,t,i,r,s){if(r||t.length===1)return null;if(s&&s.length===t.length)return s;if(e.multiCursorPaste==="spread"){i.charCodeAt(i.length-1)===10&&(i=i.substring(0,i.length-1)),i.charCodeAt(i.length-1)===13&&(i=i.substring(0,i.length-1));const o=nb(i);if(o.length===t.length)return o}return null}static _distributedPaste(e,t,i,r){const s=[];for(let o=0,a=i.length;o<a;o++)s[o]=new Fo(i[o],r[o]);return new Co(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,i,r,s){const o=[];for(let a=0,l=i.length;a<l;a++){const c=i[a],h=c.getPosition();if(s&&!c.isEmpty()&&(s=!1),s&&r.indexOf(`
`)!==r.length-1&&(s=!1),s){const u=new oe(h.lineNumber,1,h.lineNumber,1);o[a]=new NLe(u,r,c,!0)}else o[a]=new Fo(c,r)}return new Co(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class KLe{static getEdits(e,t,i,r,s,o,a,l){const c=r.map(h=>this._compositionType(i,h,s,o,a,l));return new Co(4,c,{shouldPushStackElementBefore:Y5(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,i,r,s,o){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-r),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+s),h=new oe(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(h)===i&&o===0?null:new jk(h,i,0,o)}}class YLe{static getEdits(e,t,i){const r=[];for(let o=0,a=t.length;o<a;o++)r[o]=new Fo(t[o],i);const s=KR(i,e);return new Co(s,r,{shouldPushStackElementBefore:Y5(e,s),shouldPushStackElementAfter:!1})}}class ZLe{static getCommands(e,t,i){const r=[];for(let s=0,o=i.length;s<o;s++){const a=i[s];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const h=e.normalizeIndentation(c);if(!l.startsWith(h)){r[s]=new Fo(new oe(a.startLineNumber,1,a.startLineNumber,l.length+1),h,!0);continue}}r[s]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){r[s]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}r[s]=new Am(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return r}static _goodIndentForLine(e,t,i){let r=null,s="";const o=qk(e.autoIndent,t,i,!1,e.languageConfigurationService);if(o)r=o.action,s=o.indentation;else if(i>1){let a;for(a=i-1;a>=1;a--){const h=t.getLineContent(a);if(jm(h)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=qR(e.autoIndent,t,new oe(a,l,a,l),e.languageConfigurationService);c&&(s=c.indentation+c.appendText)}return r&&(r===qs.Indent&&(s=YR(e,s)),r===qs.Outdent&&(s=Gk(e,s)),s=e.normalizeIndentation(s)),s||null}static _replaceJumpToNextIndent(e,t,i,r){let s="";const o=i.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,o),l=e.indentSize,c=l-a%l;for(let h=0;h<c;h++)s+=" "}else s="	";return new Fo(i,s,r)}}class GR extends jk{constructor(e,t,i,r,s,o){super(e,t,i,r),this._openCharacter=s,this._closeCharacter=o,this.closeCharacterRange=null,this.enclosingRange=null}_computeCursorStateWithRange(e,t,i){return this.closeCharacterRange=new oe(t.startLineNumber,t.endColumn-this._closeCharacter.length,t.endLineNumber,t.endColumn),this.enclosingRange=new oe(t.startLineNumber,t.endColumn-this._openCharacter.length-this._closeCharacter.length,t.endLineNumber,t.endColumn),super.computeCursorState(e,i)}}class XLe extends GR{constructor(e,t,i,r){const s=(i?t:"")+r,o=0,a=-r.length;super(e,s,o,a,t,r)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(e,r,t)}}class QLe extends GR{constructor(e,t,i,r){const s=i+r,o=0,a=i.length;super(t,s,o,a,i,r),this._autoIndentationEdit=e,this._autoClosingEdit={range:t,text:s}}getEditOperations(e,t){t.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),t.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(i.length!==2)throw new Error("There should be two inverse edit operations!");const r=i[0].range,s=i[1].range,o=r.plusRange(s);return this._computeCursorStateWithRange(e,o,t)}}function KR(n,e){return n===" "?e===5||e===6?6:5:4}function Y5(n,e){return mj(n)&&!mj(e)?!0:n===5?!1:gj(n)!==gj(e)}function gj(n){return n===6||n===5?"space":n}function mj(n){return n===4||n===5||n===6}function JQ(n,e,t,i,r){if(n.autoClosingOvertype==="never"||!n.autoClosingPairs.autoClosingPairsCloseSingleChar.has(r))return!1;for(let s=0,o=t.length;s<o;s++){const a=t[s];if(!a.isEmpty())return!1;const l=a.getPosition(),c=e.getLineContent(l.lineNumber);if(c.charAt(l.column-1)!==r)return!1;const u=_f(r);if((l.column>2?c.charCodeAt(l.column-2):0)===92&&u)return!1;if(n.autoClosingOvertype==="auto"){let g=!1;for(let p=0,b=i.length;p<b;p++){const _=i[p];if(l.lineNumber===_.startLineNumber&&l.column===_.startColumn){g=!0;break}}if(!g)return!1}}return!0}function fg(n,e,t){return t?new JS(n,e,!0):new Fo(n,e,!0)}function YR(n,e,t){return t=t||1,Am.shiftIndent(e,e.length+t,n.tabSize,n.indentSize,n.insertSpaces)}function Gk(n,e,t){return t=t||1,Am.unshiftIndent(e,e.length+t,n.tabSize,n.indentSize,n.insertSpaces)}function eJ(n,e){return _f(e)?n.autoSurround==="quotes"||n.autoSurround==="languageDefined":n.autoSurround==="brackets"||n.autoSurround==="languageDefined"}class Pg{static indent(e,t,i){if(t===null||i===null)return[];const r=[];for(let s=0,o=i.length;s<o;s++)r[s]=new Am(i[s],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return r}static outdent(e,t,i){const r=[];for(let s=0,o=i.length;s<o;s++)r[s]=new Am(i[s],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return r}static paste(e,t,i,r,s,o){return GLe.getEdits(e,t,i,r,s,o)}static tab(e,t,i){return ZLe.getCommands(e,t,i)}static compositionType(e,t,i,r,s,o,a,l){return KLe.getEdits(e,t,i,r,s,o,a,l)}static compositionEndWithInterceptors(e,t,i,r,s,o){if(!r)return null;let a=null;for(const d of r)if(a===null)a=d.insertedText;else if(a!==d.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let c=!1;for(const d of r)if(d.deletedText.length!==0){c=!0;break}if(c){if(!eJ(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const d=_f(l);for(const b of r)if(b.deletedSelectionStart!==0||b.deletedSelectionEnd!==b.deletedText.length||/^[ \t]+$/.test(b.deletedText)||d&&_f(b.deletedText))return null;const g=[];for(const b of s){if(!b.isEmpty())return null;g.push(b.getPosition())}if(g.length!==r.length)return null;const p=[];for(let b=0,_=g.length;b<_;b++)p.push(new OLe(g[b],r[b].deletedText,t.surroundingPairs[l]));return new Co(4,p,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const h=$Le.getEdits(t,i,s,o,l);if(h!==void 0)return h;const u=AI.getEdits(t,i,s,l,!0,!1);return u!==void 0?u:null}static typeWithInterceptors(e,t,i,r,s,o,a){const l=QQ.getEdits(i,r,s,a,e);if(l!==void 0)return l;const c=HLe.getEdits(i,r,s,a,e);if(c!==void 0)return c;const h=VLe.getEdits(t,i,r,s,o,a);if(h!==void 0)return h;const u=AI.getEdits(i,r,s,a,!1,e);if(u!==void 0)return u;const d=jLe.getEdits(i,r,s,a,e);if(d!==void 0)return d;const g=ULe.getEdits(t,i,r,s,a,e);return g!==void 0?g:qLe.getEdits(t,s,a)}static typeWithoutInterceptors(e,t,i,r,s){return YLe.getEdits(e,r,s)}}class JLe{constructor(e,t,i,r,s,o){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=i,this.insertedText=r,this.insertedSelectionStart=s,this.insertedSelectionEnd=o}}var Ge;(function(n){n.editorSimpleInput=new st("editorSimpleInput",!1,!0),n.editorTextFocus=new st("editorTextFocus",!1,C("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),n.focus=new st("editorFocus",!1,C("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),n.textInputFocus=new st("textInputFocus",!1,C("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),n.readOnly=new st("editorReadonly",!1,C("editorReadonly","Whether the editor is read-only")),n.inDiffEditor=new st("inDiffEditor",!1,C("inDiffEditor","Whether the context is a diff editor")),n.isEmbeddedDiffEditor=new st("isEmbeddedDiffEditor",!1,C("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),n.inMultiDiffEditor=new st("inMultiDiffEditor",!1,C("inMultiDiffEditor","Whether the context is a multi diff editor")),n.multiDiffEditorAllCollapsed=new st("multiDiffEditorAllCollapsed",void 0,C("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),n.hasChanges=new st("diffEditorHasChanges",!1,C("diffEditorHasChanges","Whether the diff editor has changes")),n.comparingMovedCode=new st("comparingMovedCode",!1,C("comparingMovedCode","Whether a moved code block is selected for comparison")),n.accessibleDiffViewerVisible=new st("accessibleDiffViewerVisible",!1,C("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),n.diffEditorRenderSideBySideInlineBreakpointReached=new st("diffEditorRenderSideBySideInlineBreakpointReached",!1,C("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),n.diffEditorInlineMode=new st("diffEditorInlineMode",!1,C("diffEditorInlineMode","Whether inline mode is active")),n.diffEditorOriginalWritable=new st("diffEditorOriginalWritable",!1,C("diffEditorOriginalWritable","Whether modified is writable in the diff editor")),n.diffEditorModifiedWritable=new st("diffEditorModifiedWritable",!1,C("diffEditorModifiedWritable","Whether modified is writable in the diff editor")),n.diffEditorOriginalUri=new st("diffEditorOriginalUri","",C("diffEditorOriginalUri","The uri of the original document")),n.diffEditorModifiedUri=new st("diffEditorModifiedUri","",C("diffEditorModifiedUri","The uri of the modified document")),n.columnSelection=new st("editorColumnSelection",!1,C("editorColumnSelection","Whether `editor.columnSelection` is enabled")),n.writable=n.readOnly.toNegated(),n.hasNonEmptySelection=new st("editorHasSelection",!1,C("editorHasSelection","Whether the editor has text selected")),n.hasOnlyEmptySelection=n.hasNonEmptySelection.toNegated(),n.hasMultipleSelections=new st("editorHasMultipleSelections",!1,C("editorHasMultipleSelections","Whether the editor has multiple selections")),n.hasSingleSelection=n.hasMultipleSelections.toNegated(),n.tabMovesFocus=new st("editorTabMovesFocus",!1,C("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),n.tabDoesNotMoveFocus=n.tabMovesFocus.toNegated(),n.isInEmbeddedEditor=new st("isInEmbeddedEditor",!1,!0),n.canUndo=new st("canUndo",!1,!0),n.canRedo=new st("canRedo",!1,!0),n.hoverVisible=new st("editorHoverVisible",!1,C("editorHoverVisible","Whether the editor hover is visible")),n.hoverFocused=new st("editorHoverFocused",!1,C("editorHoverFocused","Whether the editor hover is focused")),n.stickyScrollFocused=new st("stickyScrollFocused",!1,C("stickyScrollFocused","Whether the sticky scroll is focused")),n.stickyScrollVisible=new st("stickyScrollVisible",!1,C("stickyScrollVisible","Whether the sticky scroll is visible")),n.standaloneColorPickerVisible=new st("standaloneColorPickerVisible",!1,C("standaloneColorPickerVisible","Whether the standalone color picker is visible")),n.standaloneColorPickerFocused=new st("standaloneColorPickerFocused",!1,C("standaloneColorPickerFocused","Whether the standalone color picker is focused")),n.inCompositeEditor=new st("inCompositeEditor",void 0,C("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),n.notInCompositeEditor=n.inCompositeEditor.toNegated(),n.languageId=new st("editorLangId","",C("editorLangId","The language identifier of the editor")),n.hasCompletionItemProvider=new st("editorHasCompletionItemProvider",!1,C("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),n.hasCodeActionsProvider=new st("editorHasCodeActionsProvider",!1,C("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),n.hasCodeLensProvider=new st("editorHasCodeLensProvider",!1,C("editorHasCodeLensProvider","Whether the editor has a code lens provider")),n.hasDefinitionProvider=new st("editorHasDefinitionProvider",!1,C("editorHasDefinitionProvider","Whether the editor has a definition provider")),n.hasDeclarationProvider=new st("editorHasDeclarationProvider",!1,C("editorHasDeclarationProvider","Whether the editor has a declaration provider")),n.hasImplementationProvider=new st("editorHasImplementationProvider",!1,C("editorHasImplementationProvider","Whether the editor has an implementation provider")),n.hasTypeDefinitionProvider=new st("editorHasTypeDefinitionProvider",!1,C("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),n.hasHoverProvider=new st("editorHasHoverProvider",!1,C("editorHasHoverProvider","Whether the editor has a hover provider")),n.hasDocumentHighlightProvider=new st("editorHasDocumentHighlightProvider",!1,C("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),n.hasDocumentSymbolProvider=new st("editorHasDocumentSymbolProvider",!1,C("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),n.hasReferenceProvider=new st("editorHasReferenceProvider",!1,C("editorHasReferenceProvider","Whether the editor has a reference provider")),n.hasRenameProvider=new st("editorHasRenameProvider",!1,C("editorHasRenameProvider","Whether the editor has a rename provider")),n.hasSignatureHelpProvider=new st("editorHasSignatureHelpProvider",!1,C("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),n.hasInlayHintsProvider=new st("editorHasInlayHintsProvider",!1,C("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),n.hasDocumentFormattingProvider=new st("editorHasDocumentFormattingProvider",!1,C("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),n.hasDocumentSelectionFormattingProvider=new st("editorHasDocumentSelectionFormattingProvider",!1,C("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),n.hasMultipleDocumentFormattingProvider=new st("editorHasMultipleDocumentFormattingProvider",!1,C("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),n.hasMultipleDocumentSelectionFormattingProvider=new st("editorHasMultipleDocumentSelectionFormattingProvider",!1,C("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(Ge||(Ge={}));const ui=0;class xn extends Tm{runEditorCommand(e,t,i){const r=t._getViewModel();r&&this.runCoreEditorCommand(r,i||{})}}var Yr;(function(n){const e=function(i){if(!go(i))return!1;const r=i;return!(!Ca(r.to)||!Ua(r.by)&&!Ca(r.by)||!Ua(r.value)&&!J1(r.value)||!Ua(r.revealCursor)&&!pK(r.revealCursor))};n.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},n.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},n.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function t(i){let r;switch(i.to){case n.RawDirection.Up:r=1;break;case n.RawDirection.Right:r=2;break;case n.RawDirection.Down:r=3;break;case n.RawDirection.Left:r=4;break;default:return null}let s;switch(i.by){case n.RawUnit.Line:s=1;break;case n.RawUnit.WrappedLine:s=2;break;case n.RawUnit.Page:s=3;break;case n.RawUnit.HalfPage:s=4;break;case n.RawUnit.Editor:s=5;break;case n.RawUnit.Column:s=6;break;default:s=2}const o=Math.floor(i.value||1),a=!!i.revealCursor;return{direction:r,unit:s,value:o,revealCursor:a,select:!!i.select}}n.parse=t})(Yr||(Yr={}));var v0;(function(n){const e=function(t){if(!go(t))return!1;const i=t;return!(!J1(i.lineNumber)&&!Ca(i.lineNumber)||!Ua(i.at)&&!Ca(i.at))};n.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},n.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(v0||(v0={}));class RI{constructor(e){e.addImplementation(1e4,"code-editor",(t,i)=>{const r=t.get(vr).getFocusedCodeEditor();return r&&r.hasTextFocus()?this._runEditorCommand(t,r,i):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,i)=>{const r=Rs();return r&&["input","textarea"].indexOf(r.tagName.toLowerCase())>=0?(this.runDOMCommand(r),!0):!1}),e.addImplementation(0,"generic-dom",(t,i)=>{const r=t.get(vr).getActiveCodeEditor();return r?(r.focus(),this._runEditorCommand(t,r,i)):!1})}_runEditorCommand(e,t,i){const r=this.runEditorCommand(e,t,i);return r||!0}}var Sr;(function(n){class e extends xn{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,k){if(!k.position)return;y.model.pushStackElement(),y.setCursorStates(k.source,3,[Ls.moveTo(y,y.getPrimaryCursorState(),this._inSelectionMode,k.position,k.viewPosition)])&&k.revealType!==2&&y.revealAllCursors(k.source,!0,!0)}}n.MoveTo=Dt(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),n.MoveToSelect=Dt(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends xn{runCoreEditorCommand(y,k){y.model.pushStackElement();const L=this._getColumnSelectResult(y,y.getPrimaryCursorState(),y.getCursorColumnSelectData(),k);L!==null&&(y.setCursorStates(k.source,3,L.viewStates.map(T=>ei.fromViewState(T))),y.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:L.fromLineNumber,fromViewVisualColumn:L.fromVisualColumn,toViewLineNumber:L.toLineNumber,toViewVisualColumn:L.toVisualColumn}),L.reversed?y.revealTopMostCursor(k.source):y.revealBottomMostCursor(k.source))}}n.ColumnSelect=Dt(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(w,y,k,L){if(typeof L.position>"u"||typeof L.viewPosition>"u"||typeof L.mouseColumn>"u")return null;const T=w.model.validatePosition(L.position),N=w.coordinatesConverter.validateViewPosition(new be(L.viewPosition.lineNumber,L.viewPosition.column),T),D=L.doColumnSelect?k.fromViewLineNumber:N.lineNumber,O=L.doColumnSelect?k.fromViewVisualColumn:L.mouseColumn-1;return Rg.columnSelect(w.cursorConfig,w,D,O,N.lineNumber,L.mouseColumn-1)}}),n.CursorColumnSelectLeft=Dt(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(w,y,k,L){return Rg.columnSelectLeft(w.cursorConfig,w,k)}}),n.CursorColumnSelectRight=Dt(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(w,y,k,L){return Rg.columnSelectRight(w.cursorConfig,w,k)}});class i extends t{constructor(y){super(y),this._isPaged=y.isPaged}_getColumnSelectResult(y,k,L,T){return Rg.columnSelectUp(y.cursorConfig,y,L,this._isPaged)}}n.CursorColumnSelectUp=Dt(new i({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:3600,linux:{primary:0}}})),n.CursorColumnSelectPageUp=Dt(new i({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:3595,linux:{primary:0}}}));class r extends t{constructor(y){super(y),this._isPaged=y.isPaged}_getColumnSelectResult(y,k,L,T){return Rg.columnSelectDown(y.cursorConfig,y,L,this._isPaged)}}n.CursorColumnSelectDown=Dt(new r({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:3602,linux:{primary:0}}})),n.CursorColumnSelectPageDown=Dt(new r({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:3596,linux:{primary:0}}}));class s extends xn{constructor(){super({id:"cursorMove",precondition:void 0,metadata:Uk.metadata})}runCoreEditorCommand(y,k){const L=Uk.parse(k);L&&this._runCursorMove(y,k.source,L)}_runCursorMove(y,k,L){y.model.pushStackElement(),y.setCursorStates(k,3,s._move(y,y.getCursorStates(),L)),y.revealAllCursors(k,!0)}static _move(y,k,L){const T=L.select,N=L.value;switch(L.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return Ls.simpleMove(y,k,L.direction,T,N,L.unit);case 11:case 13:case 12:case 14:return Ls.viewportMove(y,k,L.direction,T,N);default:return null}}}n.CursorMoveImpl=s,n.CursorMove=Dt(new s);class o extends xn{constructor(y){super(y),this._staticArgs=y.args}runCoreEditorCommand(y,k){let L=this._staticArgs;this._staticArgs.value===-1&&(L={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:k.pageSize||y.cursorConfig.pageSize}),y.model.pushStackElement(),y.setCursorStates(k.source,3,Ls.simpleMove(y,y.getCursorStates(),L.direction,L.select,L.value,L.unit)),y.revealAllCursors(k.source,!0)}}n.CursorLeft=Dt(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),n.CursorLeftSelect=Dt(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:1039}})),n.CursorRight=Dt(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),n.CursorRightSelect=Dt(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:1041}})),n.CursorUp=Dt(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),n.CursorUpSelect=Dt(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),n.CursorPageUp=Dt(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:11}})),n.CursorPageUpSelect=Dt(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:1035}})),n.CursorDown=Dt(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),n.CursorDownSelect=Dt(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),n.CursorPageDown=Dt(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:12}})),n.CursorPageDownSelect=Dt(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:1036}})),n.CreateCursor=Dt(new class extends xn{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(w,y){if(!y.position)return;let k;y.wholeLine?k=Ls.line(w,w.getPrimaryCursorState(),!1,y.position,y.viewPosition):k=Ls.moveTo(w,w.getPrimaryCursorState(),!1,y.position,y.viewPosition);const L=w.getCursorStates();if(L.length>1){const T=k.modelState?k.modelState.position:null,N=k.viewState?k.viewState.position:null;for(let D=0,O=L.length;D<O;D++){const B=L[D];if(!(T&&!B.modelState.selection.containsPosition(T))&&!(N&&!B.viewState.selection.containsPosition(N))){L.splice(D,1),w.model.pushStackElement(),w.setCursorStates(y.source,3,L);return}}}L.push(k),w.model.pushStackElement(),w.setCursorStates(y.source,3,L)}}),n.LastCursorMoveToSelect=Dt(new class extends xn{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(w,y){if(!y.position)return;const k=w.getLastAddedCursorIndex(),L=w.getCursorStates(),T=L.slice(0);T[k]=Ls.moveTo(w,L[k],!0,y.position,y.viewPosition),w.model.pushStackElement(),w.setCursorStates(y.source,3,T)}});class a extends xn{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,k){y.model.pushStackElement(),y.setCursorStates(k.source,3,Ls.moveToBeginningOfLine(y,y.getCursorStates(),this._inSelectionMode)),y.revealAllCursors(k.source,!0)}}n.CursorHome=Dt(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),n.CursorHomeSelect=Dt(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends xn{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,k){y.model.pushStackElement(),y.setCursorStates(k.source,3,this._exec(y.getCursorStates())),y.revealAllCursors(k.source,!0)}_exec(y){const k=[];for(let L=0,T=y.length;L<T;L++){const N=y[L],D=N.modelState.position.lineNumber;k[L]=ei.fromModelState(N.modelState.move(this._inSelectionMode,D,1,0))}return k}}n.CursorLineStart=Dt(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:0,mac:{primary:287}}})),n.CursorLineStartSelect=Dt(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends xn{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,k){y.model.pushStackElement(),y.setCursorStates(k.source,3,Ls.moveToEndOfLine(y,y.getCursorStates(),this._inSelectionMode,k.sticky||!1)),y.revealAllCursors(k.source,!0)}}n.CursorEnd=Dt(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:ui,kbExpr:Ge.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:C("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),n.CursorEndSelect=Dt(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:ui,kbExpr:Ge.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:C("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class h extends xn{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,k){y.model.pushStackElement(),y.setCursorStates(k.source,3,this._exec(y,y.getCursorStates())),y.revealAllCursors(k.source,!0)}_exec(y,k){const L=[];for(let T=0,N=k.length;T<N;T++){const D=k[T],O=D.modelState.position.lineNumber,B=y.model.getLineMaxColumn(O);L[T]=ei.fromModelState(D.modelState.move(this._inSelectionMode,O,B,0))}return L}}n.CursorLineEnd=Dt(new h({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:0,mac:{primary:291}}})),n.CursorLineEndSelect=Dt(new h({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:0,mac:{primary:1315}}}));class u extends xn{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,k){y.model.pushStackElement(),y.setCursorStates(k.source,3,Ls.moveToBeginningOfBuffer(y,y.getCursorStates(),this._inSelectionMode)),y.revealAllCursors(k.source,!0)}}n.CursorTop=Dt(new u({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:2062,mac:{primary:2064}}})),n.CursorTopSelect=Dt(new u({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:3086,mac:{primary:3088}}}));class d extends xn{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,k){y.model.pushStackElement(),y.setCursorStates(k.source,3,Ls.moveToEndOfBuffer(y,y.getCursorStates(),this._inSelectionMode)),y.revealAllCursors(k.source,!0)}}n.CursorBottom=Dt(new d({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:2061,mac:{primary:2066}}})),n.CursorBottomSelect=Dt(new d({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:3085,mac:{primary:3090}}}));class g extends xn{constructor(){super({id:"editorScroll",precondition:void 0,metadata:Yr.metadata})}determineScrollMethod(y){const k=[6],L=[1,2,3,4,5,6],T=[4,2],N=[1,3];return k.includes(y.unit)&&T.includes(y.direction)?this._runHorizontalEditorScroll.bind(this):L.includes(y.unit)&&N.includes(y.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(y,k){const L=Yr.parse(k);if(!L)return;const T=this.determineScrollMethod(L);T&&T(y,k.source,L)}_runVerticalEditorScroll(y,k,L){const T=this._computeDesiredScrollTop(y,L);if(L.revealCursor){const N=y.getCompletelyVisibleViewRangeAtScrollTop(T);y.setCursorStates(k,3,[Ls.findPositionInViewportIfOutside(y,y.getPrimaryCursorState(),N,L.select)])}y.viewLayout.setScrollPosition({scrollTop:T},0)}_computeDesiredScrollTop(y,k){if(k.unit===1){const N=y.viewLayout.getFutureViewport(),D=y.getCompletelyVisibleViewRangeAtScrollTop(N.top),O=y.coordinatesConverter.convertViewRangeToModelRange(D);let B;k.direction===1?B=Math.max(1,O.startLineNumber-k.value):B=Math.min(y.model.getLineCount(),O.startLineNumber+k.value);const G=y.coordinatesConverter.convertModelPositionToViewPosition(new be(B,1));return y.viewLayout.getVerticalOffsetForLineNumber(G.lineNumber)}if(k.unit===5){let N=0;return k.direction===3&&(N=y.model.getLineCount()-y.cursorConfig.pageSize),y.viewLayout.getVerticalOffsetForLineNumber(N)}let L;k.unit===3?L=y.cursorConfig.pageSize*k.value:k.unit===4?L=Math.round(y.cursorConfig.pageSize/2)*k.value:L=k.value;const T=(k.direction===1?-1:1)*L;return y.viewLayout.getCurrentScrollTop()+T*y.cursorConfig.lineHeight}_runHorizontalEditorScroll(y,k,L){const T=this._computeDesiredScrollLeft(y,L);y.viewLayout.setScrollPosition({scrollLeft:T},0)}_computeDesiredScrollLeft(y,k){const L=(k.direction===4?-1:1)*k.value;return y.viewLayout.getCurrentScrollLeft()+L*y.cursorConfig.typicalHalfwidthCharacterWidth}}n.EditorScrollImpl=g,n.EditorScroll=Dt(new g),n.ScrollLineUp=Dt(new class extends xn{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(w,y){n.EditorScroll.runCoreEditorCommand(w,{to:Yr.RawDirection.Up,by:Yr.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:y.source})}}),n.ScrollPageUp=Dt(new class extends xn{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(w,y){n.EditorScroll.runCoreEditorCommand(w,{to:Yr.RawDirection.Up,by:Yr.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:y.source})}}),n.ScrollEditorTop=Dt(new class extends xn{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus}})}runCoreEditorCommand(w,y){n.EditorScroll.runCoreEditorCommand(w,{to:Yr.RawDirection.Up,by:Yr.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:y.source})}}),n.ScrollLineDown=Dt(new class extends xn{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(w,y){n.EditorScroll.runCoreEditorCommand(w,{to:Yr.RawDirection.Down,by:Yr.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:y.source})}}),n.ScrollPageDown=Dt(new class extends xn{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(w,y){n.EditorScroll.runCoreEditorCommand(w,{to:Yr.RawDirection.Down,by:Yr.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:y.source})}}),n.ScrollEditorBottom=Dt(new class extends xn{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus}})}runCoreEditorCommand(w,y){n.EditorScroll.runCoreEditorCommand(w,{to:Yr.RawDirection.Down,by:Yr.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:y.source})}}),n.ScrollLeft=Dt(new class extends xn{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus}})}runCoreEditorCommand(w,y){n.EditorScroll.runCoreEditorCommand(w,{to:Yr.RawDirection.Left,by:Yr.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:y.source})}}),n.ScrollRight=Dt(new class extends xn{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus}})}runCoreEditorCommand(w,y){n.EditorScroll.runCoreEditorCommand(w,{to:Yr.RawDirection.Right,by:Yr.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:y.source})}});class p extends xn{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,k){k.position&&(y.model.pushStackElement(),y.setCursorStates(k.source,3,[Ls.word(y,y.getPrimaryCursorState(),this._inSelectionMode,k.position)]),k.revealType!==2&&y.revealAllCursors(k.source,!0,!0))}}n.WordSelect=Dt(new p({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),n.WordSelectDrag=Dt(new p({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),n.LastCursorWordSelect=Dt(new class extends xn{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(w,y){if(!y.position)return;const k=w.getLastAddedCursorIndex(),L=w.getCursorStates(),T=L.slice(0),N=L[k];T[k]=Ls.word(w,N,N.modelState.hasSelection(),y.position),w.model.pushStackElement(),w.setCursorStates(y.source,3,T)}});class b extends xn{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,k){k.position&&(y.model.pushStackElement(),y.setCursorStates(k.source,3,[Ls.line(y,y.getPrimaryCursorState(),this._inSelectionMode,k.position,k.viewPosition)]),k.revealType!==2&&y.revealAllCursors(k.source,!1,!0))}}n.LineSelect=Dt(new b({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),n.LineSelectDrag=Dt(new b({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class _ extends xn{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,k){if(!k.position)return;const L=y.getLastAddedCursorIndex(),T=y.getCursorStates(),N=T.slice(0);N[L]=Ls.line(y,T[L],this._inSelectionMode,k.position,k.viewPosition),y.model.pushStackElement(),y.setCursorStates(k.source,3,N)}}n.LastCursorLineSelect=Dt(new _({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),n.LastCursorLineSelectDrag=Dt(new _({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),n.CancelSelection=Dt(new class extends xn{constructor(){super({id:"cancelSelection",precondition:Ge.hasNonEmptySelection,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,[Ls.cancelSelection(w,w.getPrimaryCursorState())]),w.revealAllCursors(y.source,!0)}}),n.RemoveSecondaryCursors=Dt(new class extends xn{constructor(){super({id:"removeSecondaryCursors",precondition:Ge.hasMultipleSelections,kbOpts:{weight:ui+1,kbExpr:Ge.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,[w.getPrimaryCursorState()]),w.revealAllCursors(y.source,!0),sk(C("removedCursor","Removed secondary cursors"))}}),n.RevealLine=Dt(new class extends xn{constructor(){super({id:"revealLine",precondition:void 0,metadata:v0.metadata})}runCoreEditorCommand(w,y){const k=y,L=k.lineNumber||0;let T=typeof L=="number"?L+1:parseInt(L)+1;T<1&&(T=1);const N=w.model.getLineCount();T>N&&(T=N);const D=new oe(T,1,T,w.model.getLineMaxColumn(T));let O=0;if(k.at)switch(k.at){case v0.RawAtArgument.Top:O=3;break;case v0.RawAtArgument.Center:O=1;break;case v0.RawAtArgument.Bottom:O=4;break}const B=w.coordinatesConverter.convertModelRangeToViewRange(D);w.revealRange(y.source,!1,B,O,0)}}),n.SelectAll=new class extends RI{constructor(){super(kme)}runDOMCommand(w){Cl&&(w.focus(),w.select()),w.ownerDocument.execCommand("selectAll")}runEditorCommand(w,y,k){const L=y._getViewModel();L&&this.runCoreEditorCommand(L,k)}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates("keyboard",3,[Ls.selectAll(w,w.getPrimaryCursorState())])}},n.SetSelection=Dt(new class extends xn{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(w,y){y.selection&&(w.model.pushStackElement(),w.setCursorStates(y.source,3,[ei.fromModelSelection(y.selection)]))}})})(Sr||(Sr={}));const e5e=Si.and(Ge.textInputFocus,Ge.columnSelection);function db(n,e){Ly.registerKeybindingRule({id:n,primary:e,when:e5e,weight:ui+1})}db(Sr.CursorColumnSelectLeft.id,1039);db(Sr.CursorColumnSelectRight.id,1041);db(Sr.CursorColumnSelectUp.id,1040);db(Sr.CursorColumnSelectPageUp.id,1035);db(Sr.CursorColumnSelectDown.id,1042);db(Sr.CursorColumnSelectPageDown.id,1036);function pj(n){return n.register(),n}var bj;(function(n){class e extends Tm{runEditorCommand(i,r,s){const o=r._getViewModel();o&&this.runCoreEditingCommand(r,o,s||{})}}n.CoreEditingCommand=e,n.LineBreakInsert=Dt(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:Ge.writable,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,i,r){t.pushUndoStop(),t.executeCommands(this.id,QQ.lineBreakInsert(i.cursorConfig,i.model,i.getCursorStates().map(s=>s.modelState.selection)))}}),n.Outdent=Dt(new class extends e{constructor(){super({id:"outdent",precondition:Ge.writable,kbOpts:{weight:ui,kbExpr:Si.and(Ge.editorTextFocus,Ge.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,i,r){t.pushUndoStop(),t.executeCommands(this.id,Pg.outdent(i.cursorConfig,i.model,i.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),n.Tab=Dt(new class extends e{constructor(){super({id:"tab",precondition:Ge.writable,kbOpts:{weight:ui,kbExpr:Si.and(Ge.editorTextFocus,Ge.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,i,r){t.pushUndoStop(),t.executeCommands(this.id,Pg.tab(i.cursorConfig,i.model,i.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),n.DeleteLeft=Dt(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,i,r){const[s,o]=Mm.deleteLeft(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection),i.getCursorAutoClosedCharacters());s&&t.pushUndoStop(),t.executeCommands(this.id,o),i.setPrevEditOperationType(2)}}),n.DeleteRight=Dt(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:ui,kbExpr:Ge.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,i,r){const[s,o]=Mm.deleteRight(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection));s&&t.pushUndoStop(),t.executeCommands(this.id,o),i.setPrevEditOperationType(3)}}),n.Undo=new class extends RI{constructor(){super(MY)}runDOMCommand(t){t.ownerDocument.execCommand("undo")}runEditorCommand(t,i,r){if(!(!i.hasModel()||i.getOption(92)===!0))return i.getModel().undo()}},n.Redo=new class extends RI{constructor(){super(AY)}runDOMCommand(t){t.ownerDocument.execCommand("redo")}runEditorCommand(t,i,r){if(!(!i.hasModel()||i.getOption(92)===!0))return i.getModel().redo()}}})(bj||(bj={}));class _j extends f5{constructor(e,t,i){super({id:e,precondition:void 0,metadata:i}),this._handlerId=t}runCommand(e,t){const i=e.get(vr).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,t)}}function rp(n,e){pj(new _j("default:"+n,n)),pj(new _j(n,n,e))}rp("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});rp("replacePreviousChar");rp("compositionType");rp("compositionStart");rp("compositionEnd");rp("paste");rp("cut");class t5e{constructor(e,t,i,r){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=r}paste(e,t,i,r){this.commandDelegate.paste(e,t,i,r)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,r){this.commandDelegate.compositionType(e,t,i,r)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Sr.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new be(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,i=wo&&t.get(108),r=t.get(22);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):r?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){Sr.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){Sr.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,i){e=this._validateViewColumn(e),Sr.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),Sr.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){Sr.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){Sr.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){Sr.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){Sr.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){Sr.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){Sr.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){Sr.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){Sr.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){Sr.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class tJ{constructor(e){this._lineFactory=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Ti("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const i=this.getStartLineNumber(),r=this.getEndLineNumber();if(t<i){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>r)return null;let s=0,o=0;for(let l=i;l<=r;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(o===0?(s=c,o=1):o++)}if(e<i){let l=0;t<i?l=t-e+1:l=i-e,this._rendLineNumberStart-=l}return this._lines.splice(s,o)}onLinesChanged(e,t){const i=e+t-1;if(this.getCount()===0)return!1;const r=this.getStartLineNumber(),s=this.getEndLineNumber();let o=!1;for(let a=e;a<=i;a++)a>=r&&a<=s&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),o=!0);return o}onLinesInserted(e,t){if(this.getCount()===0)return null;const i=t-e+1,r=this.getStartLineNumber(),s=this.getEndLineNumber();if(e<=r)return this._rendLineNumberStart+=i,null;if(e>s)return null;if(i+e>s)return this._lines.splice(e-this._rendLineNumberStart,s-e+1);const o=[];for(let u=0;u<i;u++)o[u]=this._lineFactory.createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-i),h=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=l.concat(o).concat(c),h}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),i=this.getEndLineNumber();let r=!1;for(let s=0,o=e.length;s<o;s++){const a=e[s];if(a.toLineNumber<t||a.fromLineNumber>i)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(i,a.toLineNumber);for(let h=l;h<=c;h++){const u=h-this._rendLineNumberStart;this._lines[u].onTokensChanged(),r=!0}}return r}}class iJ{constructor(e){this._lineFactory=e,this.domNode=this._createDomNode(),this._linesCollection=new tJ(this._lineFactory)}_createDomNode(){const e=bi(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(146)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,r=t.length;i<r;i++)t[i].getDomNode()?.remove();return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,r=t.length;i<r;i++)t[i].getDomNode()?.remove();return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),i=new PI(this.domNode.domNode,this._lineFactory,e),r={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},s=i.render(r,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(s.rendLineNumberStart,s.lines)}}const tu=class tu{constructor(e,t,i){this._domNode=e,this._lineFactory=t,this._viewportData=i}render(e,t,i,r){const s={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(s.rendLineNumberStart+s.linesLength-1<t||i<s.rendLineNumberStart){s.rendLineNumberStart=t,s.linesLength=i-t+1,s.lines=[];for(let o=t;o<=i;o++)s.lines[o-t]=this._lineFactory.createLine();return this._finishRendering(s,!0,r),s}if(this._renderUntouchedLines(s,Math.max(t-s.rendLineNumberStart,0),Math.min(i-s.rendLineNumberStart,s.linesLength-1),r,t),s.rendLineNumberStart>t){const o=t,a=Math.min(i,s.rendLineNumberStart-1);o<=a&&(this._insertLinesBefore(s,o,a,r,t),s.linesLength+=a-o+1)}else if(s.rendLineNumberStart<t){const o=Math.min(s.linesLength,t-s.rendLineNumberStart);o>0&&(this._removeLinesBefore(s,o),s.linesLength-=o)}if(s.rendLineNumberStart=t,s.rendLineNumberStart+s.linesLength-1<i){const o=s.rendLineNumberStart+s.linesLength,a=i;o<=a&&(this._insertLinesAfter(s,o,a,r,t),s.linesLength+=a-o+1)}else if(s.rendLineNumberStart+s.linesLength-1>i){const o=Math.max(0,i-s.rendLineNumberStart+1),l=s.linesLength-1-o+1;l>0&&(this._removeLinesAfter(s,l),s.linesLength-=l)}return this._finishRendering(s,!1,r),s}_renderUntouchedLines(e,t,i,r,s){const o=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=i;l++){const c=o+l;a[l].layoutLine(c,r[c-s],this._viewportData.lineHeight)}}_insertLinesBefore(e,t,i,r,s){const o=[];let a=0;for(let l=t;l<=i;l++)o[a++]=this._lineFactory.createLine();e.lines=o.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++)e.lines[i].getDomNode()?.remove();e.lines.splice(0,t)}_insertLinesAfter(e,t,i,r,s){const o=[];let a=0;for(let l=t;l<=i;l++)o[a++]=this._lineFactory.createLine();e.lines=e.lines.concat(o)}_removeLinesAfter(e,t){const i=e.linesLength-t;for(let r=0;r<t;r++)e.lines[i+r].getDomNode()?.remove();e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,r){tu._ttPolicy&&(i=tu._ttPolicy.createHTML(i));const s=this._domNode.lastChild;t||!s?this._domNode.innerHTML=i:s.insertAdjacentHTML("afterend",i);let o=this._domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];r[a]&&(l.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(e,t,i){const r=document.createElement("div");tu._ttPolicy&&(t=tu._ttPolicy.createHTML(t)),r.innerHTML=t;for(let s=0;s<e.linesLength;s++){const o=e.lines[s];if(i[s]){const a=r.firstChild,l=o.getDomNode();l.parentNode.replaceChild(a,l),o.setDomNode(a)}}}_finishRendering(e,t,i){const r=tu._sb,s=e.linesLength,o=e.lines,a=e.rendLineNumberStart,l=[];{r.reset();let c=!1;for(let h=0;h<s;h++){const u=o[h];l[h]=!1,!(u.getDomNode()||!u.renderLine(h+a,i[h],this._viewportData.lineHeight,this._viewportData,r))&&(l[h]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,r.build(),l)}{r.reset();let c=!1;const h=[];for(let u=0;u<s;u++){const d=o[u];h[u]=!1,!(l[u]||!d.renderLine(u+a,i[u],this._viewportData.lineHeight,this._viewportData,r))&&(h[u]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,r.build(),h)}}};tu._ttPolicy=Xm("editorViewLayer",{createHTML:e=>e}),tu._sb=new g5(1e5);let PI=tu;class nJ extends Jo{constructor(e){super(e),this._dynamicOverlays=[],this._isFocused=!1,this._visibleLines=new iJ({createLine:()=>new i5e(this._dynamicOverlays)}),this.domNode=this._visibleLines.domNode;const i=this._context.configuration.options.get(50);ps(this.domNode,i),this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const i=this._context.configuration.options.get(50);return ps(this.domNode,i),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(i=>i.shouldRender());for(let i=0,r=t.length;i<r;i++){const s=t[i];s.prepareRender(e),s.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class i5e{constructor(e){this._dynamicOverlays=e,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=bi(e)}onContentChanged(){}onTokensChanged(){}renderLine(e,t,i,r,s){let o="";for(let a=0,l=this._dynamicOverlays.length;a<l;a++){const c=this._dynamicOverlays[a];o+=c.render(r.startLineNumber,e)}return this._renderedContent===o?!1:(this._renderedContent=o,s.appendString('<div style="top:'),s.appendString(String(t)),s.appendString("px;height:"),s.appendString(String(i)),s.appendString('px;">'),s.appendString(o),s.appendString("</div>"),!0)}layoutLine(e,t,i){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(i))}}class n5e extends nJ{constructor(e){super(e);const i=this._context.configuration.options.get(146);this._contentWidth=i.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._contentWidth=i.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class r5e extends nJ{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),ps(this.domNode,t.get(50))}onConfigurationChanged(e){const t=this._context.configuration.options;ps(this.domNode,t.get(50));const i=t.get(146);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class Z5{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown?.(e)}emitKeyUp(e){this.onKeyUp?.(e)}emitContextMenu(e){this.onContextMenu?.(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove?.(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave?.(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown?.(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp?.(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag?.(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop?.(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled?.()}emitMouseWheel(e){this.onMouseWheel?.(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return Z5.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const i={...e};return i.position&&(i.position=t.convertViewPositionToModelPosition(i.position)),i.range&&(i.range=t.convertViewRangeToModelRange(i.range)),(i.type===5||i.type===8)&&(i.detail=this.convertViewToModelViewZoneData(i.detail,t)),i}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new be(e.afterLineNumber,1)).lineNumber}}}class s5e extends Jo{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=bi(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const i=this._context.configuration.options.get(146),r=i.contentWidth-i.verticalScrollbarWidth;this.contentWidth!==r&&(this.contentWidth=r,e=!0);const s=i.contentLeft;return this.contentLeft!==s&&(this.contentLeft=s,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let t=0;const i=e.getDecorationsInViewport();for(const r of i){if(!r.options.blockClassName)continue;let s=this.blocks[t];s||(s=this.blocks[t]=bi(document.createElement("div")),this.domNode.appendChild(s));let o,a;r.options.blockIsAfterEnd?(o=e.getVerticalOffsetAfterLineNumber(r.range.endLineNumber,!1),a=e.getVerticalOffsetAfterLineNumber(r.range.endLineNumber,!0)):(o=e.getVerticalOffsetForLineNumber(r.range.startLineNumber,!0),a=r.range.isEmpty()&&!r.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(r.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(r.range.endLineNumber,!0));const[l,c,h,u]=r.options.blockPadding??[0,0,0,0];s.setClassName("blockDecorations-block "+r.options.blockClassName),s.setLeft(this.contentLeft-u),s.setWidth(this.contentWidth+u+c),s.setTop(o-e.scrollTop-l),s.setHeight(a-o+l+h),t++}for(let r=t;r<this.blocks.length;r++)this.blocks[r].domNode.remove();this.blocks.length=t}}class o5e extends Jo{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=bi(document.createElement("div")),_c.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=bi(document.createElement("div")),_c.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new a5e(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,i,r,s){this._widgets[e.getId()].setPosition(t,i,r,s),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t];delete this._widgets[t];const r=i.domNode.domNode;r.remove(),r.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].render(e)}}class a5e{constructor(e,t,i){this._primaryAnchor=new S_(null,null),this._secondaryAnchor=new S_(null,null),this._context=e,this._viewDomNode=t,this._actual=i,this.domNode=bi(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const r=this._context.configuration.options,s=r.get(146);this._fixedOverflowWidgets=r.get(42),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,this._lineHeight=r.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(67),e.hasChanged(146)){const i=t.get(146);this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,i){this._affinity=e,this._primaryAnchor=r(t,this._context.viewModel,this._affinity),this._secondaryAnchor=r(i,this._context.viewModel,this._affinity);function r(s,o,a){if(!s)return new S_(null,null);const l=o.model.validatePosition(s);if(o.coordinatesConverter.modelPositionIsVisible(l)){const c=o.coordinatesConverter.convertModelPositionToViewPosition(l,a??void 0);return new S_(s,c)}return new S_(s,null)}}_getMaxWidth(){const e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?t?.innerWidth||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,i,r){this._setPosition(r,e,t),this._preference=i,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,i,r){const s=e.top,o=s,a=e.top+e.height,l=r.viewportHeight-a,c=s-i,h=o>=i,u=a,d=l>=i;let g=e.left;return g+t>r.scrollLeft+r.viewportWidth&&(g=r.scrollLeft+r.viewportWidth-t),g<r.scrollLeft&&(g=r.scrollLeft),{fitsAbove:h,aboveTop:c,fitsBelow:d,belowTop:u,left:g}}_layoutHorizontalSegmentInPage(e,t,i,r){const a=Math.max(15,t.left-r),l=Math.min(t.left+t.width+r,e.width-15),h=this._viewDomNode.domNode.ownerDocument.defaultView;let u=t.left+i-(h?.scrollX??0);if(u+r>l){const d=u-(l-r);u-=d,i-=d}if(u<a){const d=u-a;u-=d,i-=d}return[i,u]}_layoutBoxInPage(e,t,i,r){const s=e.top-i,o=e.top+e.height,a=qa(this._viewDomNode.domNode),l=this._viewDomNode.domNode.ownerDocument,c=l.defaultView,h=a.top+s-(c?.scrollY??0),u=a.top+o-(c?.scrollY??0),d=e8(l.body),[g,p]=this._layoutHorizontalSegmentInPage(d,a,e.left-r.scrollLeft+this._contentLeft,t),b=22,_=22,w=h>=b,y=u+i<=d.height-_;return this._fixedOverflowWidgets?{fitsAbove:w,aboveTop:Math.max(h,b),fitsBelow:y,belowTop:u,left:p}:{fitsAbove:w,aboveTop:s,fitsBelow:y,belowTop:o,left:g}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new x_(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){const t=s(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),i=this._secondaryAnchor.viewPosition?.lineNumber===this._primaryAnchor.viewPosition?.lineNumber?this._secondaryAnchor.viewPosition:null,r=s(i,this._affinity,this._lineHeight);return{primary:t,secondary:r};function s(o,a,l){if(!o)return null;const c=e.visibleRangeForPosition(o);if(!c)return null;const h=o.column===1&&a===3?0:c.left,u=e.getVerticalOffsetForLineNumber(o.lineNumber)-e.scrollTop;return new vj(u,h,l)}}_reduceAnchorCoordinates(e,t,i){if(!t)return e;const r=this._context.configuration.options.get(50);let s=t.left;return s<e.left?s=Math.max(s,e.left-i+r.typicalFullwidthCharacterWidth):s=Math.min(s,e.left+i-r.typicalFullwidthCharacterWidth),new vj(e.top,s,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const{primary:t,secondary:i}=this._getAnchorsCoordinates(e);if(!t)return{kind:"offViewport",preserveFocus:this.domNode.domNode.contains(this.domNode.domNode.ownerDocument.activeElement)};if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let o=null;if(typeof this._actual.beforeRender=="function"&&(o=B6(this._actual.beforeRender,this._actual)),o)this._cachedDomNodeOffsetWidth=o.width,this._cachedDomNodeOffsetHeight=o.height;else{const l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}const r=this._reduceAnchorCoordinates(t,i,this._cachedDomNodeOffsetWidth);let s;this.allowEditorOverflow?s=this._layoutBoxInPage(r,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):s=this._layoutBoxInViewport(r,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let o=1;o<=2;o++)for(const a of this._preference)if(a===1){if(!s)return null;if(o===2||s.fitsAbove)return{kind:"inViewport",coordinate:new x_(s.aboveTop,s.left),position:1}}else if(a===2){if(!s)return null;if(o===2||s.fitsBelow)return{kind:"inViewport",coordinate:new x_(s.belowTop,s.left),position:2}}else return this.allowEditorOverflow?{kind:"inViewport",coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new x_(r.top,r.left)),position:0}:{kind:"inViewport",coordinate:new x_(r.top,r.left),position:0};return null}onBeforeRender(e){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData||this._renderData.kind==="offViewport"){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this._renderData?.kind==="offViewport"&&this._renderData.preserveFocus?this.domNode.setTop(-1e3):this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&B6(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&B6(this._actual.afterRender,this._actual,this._renderData.position)}}class S_{constructor(e,t){this.modelPosition=e,this.viewPosition=t}}class x_{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}}class vj{constructor(e,t,i){this.top=e,this.left=t,this.height=i,this._anchorCoordinateBrand=void 0}}function B6(n,e,...t){try{return n.call(e,...t)}catch{return null}}class rJ extends np{constructor(e){super(),this._context=e;const t=this._context.configuration.options,i=t.get(146);this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new $i(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=new Set;for(const s of this._selections)t.add(s.positionLineNumber);const i=Array.from(t);i.sort((s,o)=>s-o),_r(this._cursorLineNumbers,i)||(this._cursorLineNumbers=i,e=!0);const r=this._selections.every(s=>s.isEmpty());return this._selectionIsEmpty!==r&&(this._selectionIsEmpty=r,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,r=[];for(let o=t;o<=i;o++){const a=o-t;r[a]=""}if(this._wordWrap){const o=this._renderOne(e,!1);for(const a of this._cursorLineNumbers){const l=this._context.viewModel.coordinatesConverter,c=l.convertViewPositionToModelPosition(new be(a,1)).lineNumber,h=l.convertModelPositionToViewPosition(new be(c,1)).lineNumber,u=l.convertModelPositionToViewPosition(new be(c,this._context.viewModel.model.getLineMaxColumn(c))).lineNumber,d=Math.max(h,t),g=Math.min(u,i);for(let p=d;p<=g;p++){const b=p-t;r[b]=o}}}const s=this._renderOne(e,!0);for(const o of this._cursorLineNumbers){if(o<t||o>i)continue;const a=o-t;r[a]=s}this._renderData=r}render(e,t){if(!this._renderData)return"";const i=t-e;return i>=this._renderData.length?"":this._renderData[i]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class l5e extends rJ{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class c5e extends rJ{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}Uu((n,e)=>{const t=n.getColor(EX);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||n.defines(QV)){const i=n.getColor(QV);i&&(e.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${i}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${i}; }`),V0(n.type)&&(e.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}});class h5e extends np{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let i=[],r=0;for(let l=0,c=t.length;l<c;l++){const h=t[l];h.options.className&&(i[r++]=h)}i=i.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const h=l.options.className,u=c.options.className;return h<u?-1:h>u?1:oe.compareRangesUsingStarts(l.range,c.range)});const s=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=[];for(let l=s;l<=o;l++){const c=l-s;a[c]=""}this._renderWholeLineDecorations(e,i,a),this._renderNormalDecorations(e,i,a),this._renderResult=a}_renderWholeLineDecorations(e,t,i){const r=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let o=0,a=t.length;o<a;o++){const l=t[o];if(!l.options.isWholeLine)continue;const c='<div class="cdr '+l.options.className+'" style="left:0;width:100%;"></div>',h=Math.max(l.range.startLineNumber,r),u=Math.min(l.range.endLineNumber,s);for(let d=h;d<=u;d++){const g=d-r;i[g]+=c}}}_renderNormalDecorations(e,t,i){const r=e.visibleRange.startLineNumber;let s=null,o=!1,a=null,l=!1;for(let c=0,h=t.length;c<h;c++){const u=t[c];if(u.options.isWholeLine)continue;const d=u.options.className,g=!!u.options.showIfCollapsed;let p=u.range;if(g&&p.endColumn===1&&p.endLineNumber!==p.startLineNumber&&(p=new oe(p.startLineNumber,p.startColumn,p.endLineNumber-1,this._context.viewModel.getLineMaxColumn(p.endLineNumber-1))),s===d&&o===g&&oe.areIntersectingOrTouching(a,p)){a=oe.plusRange(a,p);continue}s!==null&&this._renderNormalDecoration(e,a,s,l,o,r,i),s=d,o=g,a=p,l=u.options.shouldFillLineOnLineBreak??!1}s!==null&&this._renderNormalDecoration(e,a,s,l,o,r,i)}_renderNormalDecoration(e,t,i,r,s,o,a){const l=e.linesVisibleRangesForRange(t,i==="findMatch");if(l)for(let c=0,h=l.length;c<h;c++){const u=l[c];if(u.outsideRenderedLine)continue;const d=u.lineNumber-o;if(s&&u.ranges.length===1){const g=u.ranges[0];if(g.width<this._typicalHalfwidthCharacterWidth){const p=Math.round(g.left+g.width/2),b=Math.max(0,Math.round(p-this._typicalHalfwidthCharacterWidth/2));u.ranges[0]=new K5(b,this._typicalHalfwidthCharacterWidth)}}for(let g=0,p=u.ranges.length;g<p;g++){const b=r&&u.continuesOnNextLine&&p===1,_=u.ranges[g],w='<div class="cdr '+i+'" style="left:'+String(_.left)+"px;width:"+(b?"100%;":String(_.width)+"px;")+'"></div>';a[d]+=w}}}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class u5e extends Jo{constructor(e,t,i,r){super(e);const s=this._context.configuration.options,o=s.get(104),a=s.get(75),l=s.get(40),c=s.get(107),h={listenOnDomNode:i.domNode,className:"editor-scrollable "+k8(e.theme.type),useShadows:!1,lazyRender:!0,vertical:o.vertical,horizontal:o.horizontal,verticalHasArrows:o.verticalHasArrows,horizontalHasArrows:o.horizontalHasArrows,verticalScrollbarSize:o.verticalScrollbarSize,verticalSliderSize:o.verticalSliderSize,horizontalScrollbarSize:o.horizontalScrollbarSize,horizontalSliderSize:o.horizontalSliderSize,handleMouseWheel:o.handleMouseWheel,alwaysConsumeMouseWheel:o.alwaysConsumeMouseWheel,arrowSize:o.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:o.scrollByPage};this.scrollbar=this._register(new C5(t.domNode,h,this._context.viewLayout.getScrollable())),_c.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=bi(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const u=(d,g,p)=>{const b={};{const _=d.scrollTop;_&&(b.scrollTop=this._context.viewLayout.getCurrentScrollTop()+_,d.scrollTop=0)}if(p){const _=d.scrollLeft;_&&(b.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+_,d.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(b,1)};this._register(we(i.domNode,"scroll",d=>u(i.domNode,!0,!0))),this._register(we(t.domNode,"scroll",d=>u(t.domNode,!0,!1))),this._register(we(r.domNode,"scroll",d=>u(r.domNode,!0,!1))),this._register(we(this.scrollbarDomNode.domNode,"scroll",d=>u(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(146);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(73).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(104)||e.hasChanged(75)||e.hasChanged(40)){const t=this._context.configuration.options,i=t.get(104),r=t.get(75),s=t.get(40),o=t.get(107),a={vertical:i.vertical,horizontal:i.horizontal,verticalScrollbarSize:i.verticalScrollbarSize,horizontalScrollbarSize:i.horizontalScrollbarSize,scrollByPage:i.scrollByPage,handleMouseWheel:i.handleMouseWheel,mouseWheelScrollSensitivity:r,fastScrollSensitivity:s,scrollPredominantAxis:o};this.scrollbar.updateOptions(a)}return e.hasChanged(146)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+k8(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}class OI{constructor(e,t,i,r,s){this.startLineNumber=e,this.endLineNumber=t,this.className=i,this.tooltip=r,this._decorationToRenderBrand=void 0,this.zIndex=s??0}}class d5e{constructor(e,t,i){this.className=e,this.zIndex=t,this.tooltip=i}}class f5e{constructor(){this.decorations=[]}add(e){this.decorations.push(e)}getDecorations(){return this.decorations}}class sJ extends np{_render(e,t,i){const r=[];for(let a=e;a<=t;a++){const l=a-e;r[l]=new f5e}if(i.length===0)return r;i.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let s=null,o=0;for(let a=0,l=i.length;a<l;a++){const c=i[a],h=c.className,u=c.zIndex;let d=Math.max(c.startLineNumber,e)-e;const g=Math.min(c.endLineNumber,t)-e;s===h?(d=Math.max(o+1,d),o=Math.max(o,g)):(s=h,o=g);for(let p=d;p<=o;p++)r[p].add(new d5e(h,u,c.tooltip))}return r}}class g5e extends Jo{constructor(e){super(e),this._widgets={},this._context=e;const t=this._context.configuration.options,i=t.get(146);this.domNode=bi(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){const t=bi(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const i=this._widgets[e.getId()];return i.preference.lane===t.lane&&i.preference.zIndex===t.zIndex&&oe.equalsRange(i.preference.range,t.range)?!1:(i.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets[t]){const r=this._widgets[t].domNode.domNode;delete this._widgets[t],r.remove(),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){const i=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,s=e.getDecorationsInViewport();for(const o of s){const a=o.options.glyphMarginClassName;if(!a)continue;const l=Math.max(o.range.startLineNumber,i),c=Math.min(o.range.endLineNumber,r),h=o.options.glyphMargin?.position??ff.Center,u=o.options.zIndex??0;for(let d=l;d<=c;d++){const g=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new be(d,0)),p=this._context.viewModel.glyphLanes.getLanesAtLine(g.lineNumber).indexOf(h);t.push(new m5e(d,p,u,a))}}}_collectWidgetBasedGlyphRenderRequest(e,t){const i=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(const s of Object.values(this._widgets)){const o=s.preference.range,{startLineNumber:a,endLineNumber:l}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(oe.lift(o));if(!a||!l||l<i||a>r)continue;const c=Math.max(a,i),h=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new be(c,0)),u=this._context.viewModel.glyphLanes.getLanesAtLine(h.lineNumber).indexOf(s.preference.lane);t.push(new p5e(c,u,s.preference.zIndex,s))}}_collectSortedGlyphRenderRequests(e){const t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((i,r)=>i.lineNumber===r.lineNumber?i.laneIndex===r.laneIndex?i.zIndex===r.zIndex?r.type===i.type?i.type===0&&r.type===0?i.className<r.className?-1:1:0:r.type-i.type:r.zIndex-i.zIndex:i.laneIndex-r.laneIndex:i.lineNumber-r.lineNumber),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(const r of Object.values(this._widgets))r.renderInfo=null;const t=new Ru(this._collectSortedGlyphRenderRequests(e)),i=[];for(;t.length>0;){const r=t.peek();if(!r)break;const s=t.takeWhile(a=>a.lineNumber===r.lineNumber&&a.laneIndex===r.laneIndex);if(!s||s.length===0)break;const o=s[0];if(o.type===0){const a=[];for(const l of s){if(l.zIndex!==o.zIndex||l.type!==o.type)break;(a.length===0||a[a.length-1]!==l.className)&&a.push(l.className)}i.push(o.accept(a.join(" ")))}else o.widget.renderInfo={lineNumber:o.lineNumber,laneIndex:o.laneIndex}}this._decorationGlyphsToRender=i}render(e){if(!this._glyphMargin){for(const i of Object.values(this._widgets))i.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;)this._managedDomNodes.pop()?.domNode.remove();return}const t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const i of Object.values(this._widgets))if(!i.renderInfo)i.domNode.setDisplay("none");else{const r=e.viewportData.relativeVerticalOffset[i.renderInfo.lineNumber-e.viewportData.startLineNumber],s=this._glyphMarginLeft+i.renderInfo.laneIndex*this._lineHeight;i.domNode.setDisplay("block"),i.domNode.setTop(r),i.domNode.setLeft(s),i.domNode.setWidth(t),i.domNode.setHeight(this._lineHeight)}for(let i=0;i<this._decorationGlyphsToRender.length;i++){const r=this._decorationGlyphsToRender[i],s=e.viewportData.relativeVerticalOffset[r.lineNumber-e.viewportData.startLineNumber],o=this._glyphMarginLeft+r.laneIndex*this._lineHeight;let a;i<this._managedDomNodes.length?a=this._managedDomNodes[i]:(a=bi(document.createElement("div")),this._managedDomNodes.push(a),this.domNode.appendChild(a)),a.setClassName("cgmr codicon "+r.combinedClassName),a.setPosition("absolute"),a.setTop(s),a.setLeft(o),a.setWidth(t),a.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;)this._managedDomNodes.pop()?.domNode.remove()}}class m5e{constructor(e,t,i,r){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.className=r,this.type=0}accept(e){return new b5e(this.lineNumber,this.laneIndex,e)}}class p5e{constructor(e,t,i,r){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.widget=r,this.type=1}}class b5e{constructor(e,t,i){this.lineNumber=e,this.laneIndex=t,this.combinedClassName=i}}class _5e extends np{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,i=t.get(147),r=t.get(50);this._spaceWidth=r.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*r.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(147),r=t.get(50);return this._spaceWidth=r.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*r.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),!0}onCursorStateChanged(e){const i=e.selections[0].getPosition();return this._primaryPosition?.equals(i)?!1:(this._primaryPosition=i,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,r=e.scrollWidth,s=this._primaryPosition,o=this.getGuidesByLine(t,Math.min(i+1,this._context.viewModel.getLineCount()),s),a=[];for(let l=t;l<=i;l++){const c=l-t,h=o[c];let u="";const d=e.visibleRangeForPosition(new be(l,1))?.left??0;for(const g of h){const p=g.column===-1?d+(g.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new be(l,g.column)).left;if(p>r||this._maxIndentLeft>0&&p>this._maxIndentLeft)break;const b=g.horizontalLine?g.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",_=g.horizontalLine?(e.visibleRangeForPosition(new be(l,g.horizontalLine.endColumn))?.left??p+this._spaceWidth)-p:this._spaceWidth;u+=`<div class="core-guide ${g.className} ${b}" style="left:${p}px;width:${_}px"></div>`}a[c]=u}this._renderResult=a}getGuidesByLine(e,t,i){const r=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?rm.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?rm.EnabledForActive:rm.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,s=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let o=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&i){const u=this._context.viewModel.getActiveIndentGuide(i.lineNumber,e,t);o=u.startLineNumber,a=u.endLineNumber,l=u.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),h=[];for(let u=e;u<=t;u++){const d=new Array;h.push(d);const g=r?r[u-e]:[],p=new Ru(g),b=s?s[u-e]:0;for(let _=1;_<=b;_++){const w=(_-1)*c+1,y=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||g.length===0)&&o<=u&&u<=a&&_===l;d.push(...p.takeWhile(L=>L.visibleColumn<w)||[]);const k=p.peek();(!k||k.visibleColumn!==w||k.horizontalLine)&&d.push(new Ug(w,-1,`core-guide-indent lvl-${(_-1)%30}`+(y?" indent-active":""),null,-1,-1))}d.push(...p.takeWhile(_=>!0)||[])}return h}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}function Up(n){if(!(n&&n.isTransparent()))return n}Uu((n,e)=>{const t=[{bracketColor:MX,guideColor:CCe,guideColorActive:DCe},{bracketColor:AX,guideColor:SCe,guideColorActive:ECe},{bracketColor:RX,guideColor:xCe,guideColorActive:ICe},{bracketColor:PX,guideColor:kCe,guideColorActive:NCe},{bracketColor:OX,guideColor:LCe,guideColorActive:MCe},{bracketColor:BX,guideColor:TCe,guideColorActive:ACe}],i=new GX,r=[{indentColor:Hy,indentColorActive:Vy},{indentColor:iCe,indentColorActive:aCe},{indentColor:nCe,indentColorActive:lCe},{indentColor:rCe,indentColorActive:cCe},{indentColor:sCe,indentColorActive:hCe},{indentColor:oCe,indentColorActive:uCe}],s=t.map(a=>{const l=n.getColor(a.bracketColor),c=n.getColor(a.guideColor),h=n.getColor(a.guideColorActive),u=Up(Up(c)??l?.transparent(.3)),d=Up(Up(h)??l);if(!(!u||!d))return{guideColor:u,guideColorActive:d}}).filter(w1),o=r.map(a=>{const l=n.getColor(a.indentColor),c=n.getColor(a.indentColorActive),h=Up(l),u=Up(c);if(!(!h||!u))return{indentColor:h,indentColorActive:u}}).filter(w1);if(s.length>0){for(let a=0;a<30;a++){const l=s[a%s.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${i.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${i.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${i.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${a} { --indent-color: ${l.indentColor}; --indent-color-active: ${l.indentColorActive}; }`)}e.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),e.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});class F6{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class v5e{constructor(){this._currentVisibleRange=new oe(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class w5e{constructor(e,t,i,r,s,o,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=i,this.endColumn=r,this.startScrollTop=s,this.stopScrollTop=o,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class y5e{constructor(e,t,i,r,s){this.minimalReveal=e,this.selections=t,this.startScrollTop=i,this.stopScrollTop=r,this.scrollType=s,this.type="selections";let o=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const h=t[l];o=Math.min(o,h.startLineNumber),a=Math.max(a,h.endLineNumber)}this.minLineNumber=o,this.maxLineNumber=a}}const AL=class AL extends Jo{constructor(e,t){super(e);const i=this._context.configuration,r=this._context.configuration.options,s=r.get(50),o=r.get(147);this._lineHeight=r.get(67),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._isViewportWrapping=o.isViewportWrapping,this._revealHorizontalRightPadding=r.get(101),this._cursorSurroundingLines=r.get(29),this._cursorSurroundingLinesStyle=r.get(30),this._canUseLayerHinting=!r.get(32),this._viewLineOptions=new cj(i,this._context.theme.type),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new iJ({createLine:()=>new du(this._viewLineOptions)}),this.domNode=this._visibleLines.domNode,_c.write(this.domNode,8),this.domNode.setClassName(`view-lines ${i1}`),ps(this.domNode,s),this._maxLineWidth=0,this._asyncUpdateLineWidths=new Gs(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new Gs(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new v5e,this._horizontalRevealRequest=null,this._stickyScrollEnabled=r.get(116).enabled,this._maxNumberStickyLines=r.get(116).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(147)&&(this._maxLineWidth=0);const t=this._context.configuration.options,i=t.get(50),r=t.get(147);return this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=t.get(101),this._cursorSurroundingLines=t.get(29),this._cursorSurroundingLinesStyle=t.get(30),this._canUseLayerHinting=!t.get(32),this._stickyScrollEnabled=t.get(116).enabled,this._maxNumberStickyLines=t.get(116).maxLineCount,ps(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(146)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new cj(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const i=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let s=i;s<=r;s++)this._visibleLines.getVisibleLine(s).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let r=!1;for(let s=t;s<=i;s++)r=this._visibleLines.getVisibleLine(s).onSelectionChanged()||r;return r}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let r=t;r<=i;r++)this._visibleLines.getVisibleLine(r).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new w5e(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new y5e(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const s=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(i,s),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const i=this._getViewLineDomNode(e);if(i===null)return null;const r=this._getLineNumberFor(i);if(r===-1||r<1||r>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(r)===1)return new be(r,1);const s=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(r<s||r>o)return null;let a=this._visibleLines.getVisibleLine(r).getColumnOfNodeOffset(e,t);const l=this._context.viewModel.getLineMinColumn(r);return a<l&&(a=l),new be(r,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===du.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let r=t;r<=i;r++){const s=this._visibleLines.getVisibleLine(r);if(e===s.getDomNode())return r}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();if(e<t||e>i)return-1;const r=new F6(this.domNode.domNode,this._textRangeRestingSpot),s=this._visibleLines.getVisibleLine(e).getWidth(r);return this._updateLineWidthsSlowIfDomDidLayout(r),s}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const i=e.endLineNumber,r=oe.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!r)return null;const s=[];let o=0;const a=new F6(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new be(r.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),h=this._visibleLines.getEndLineNumber();for(let u=r.startLineNumber;u<=r.endLineNumber;u++){if(u<c||u>h)continue;const d=u===r.startLineNumber?r.startColumn:1,g=u!==r.endLineNumber,p=g?this._context.viewModel.getLineMaxColumn(u):r.endColumn,b=this._visibleLines.getVisibleLine(u).getVisibleRangesForRange(u,d,p,a);if(b){if(t&&u<i){const _=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new be(u+1,1)).lineNumber,_!==l&&(b.ranges[b.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}s[o++]=new rLe(b.outsideRenderedLine,u,K5.from(b.ranges),g)}}return this._updateLineWidthsSlowIfDomDidLayout(a),o===0?null:s}_visibleRangesForLineRange(e,t,i){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const r=new F6(this.domNode.domNode,this._textRangeRestingSpot),s=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,i,r);return this._updateLineWidthsSlowIfDomDidLayout(r),s}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new sLe(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let r=1,s=!0;for(let o=t;o<=i;o++){const a=this._visibleLines.getVisibleLine(o);if(e&&!a.getWidthIsFast()){s=!1;continue}r=Math.max(r,a.getWidth(null))}return s&&t===1&&i===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(r),s}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const i=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let s=i;s<=r;s++){const o=this._visibleLines.getVisibleLine(s);if(o.needsMonospaceFontCheck()){const a=o.getWidth(null);a>t&&(t=a,e=s)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let s=i;s<=r;s++)this._visibleLines.getVisibleLine(s).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const i=this._horizontalRevealRequest;if(e.startLineNumber<=i.minLineNumber&&i.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const r=this._computeScrollLeftToReveal(i);r&&(this._isViewportWrapping||this._ensureMaxLineWidth(r.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:r.scrollLeft},i.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),wo&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const i=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let s=i;s<=r;s++)if(this._visibleLines.getVisibleLine(s).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,i,r,s,o){const a=e.top,l=e.height,c=a+l;let h,u,d;if(s&&s.length>0){let w=s[0].startLineNumber,y=s[0].endLineNumber;for(let k=1,L=s.length;k<L;k++){const T=s[k];w=Math.min(w,T.startLineNumber),y=Math.max(y,T.endLineNumber)}h=!1,u=this._context.viewLayout.getVerticalOffsetForLineNumber(w),d=this._context.viewLayout.getVerticalOffsetForLineNumber(y)+this._lineHeight}else if(r)h=!0,u=this._context.viewLayout.getVerticalOffsetForLineNumber(r.startLineNumber),d=this._context.viewLayout.getVerticalOffsetForLineNumber(r.endLineNumber)+this._lineHeight;else return-1;const g=(t==="mouse"||i)&&this._cursorSurroundingLinesStyle==="default";let p=0,b=0;if(g)i||(p=this._lineHeight);else{const w=l/this._lineHeight,y=Math.max(this._cursorSurroundingLines,this._stickyScrollEnabled?this._maxNumberStickyLines:0),k=Math.min(w/2,y);p=k*this._lineHeight,b=Math.max(0,k-1)*this._lineHeight}i||(o===0||o===4)&&(b+=this._lineHeight),u-=p,d+=b;let _;if(d-u>l){if(!h)return-1;_=u}else if(o===5||o===6)if(o===6&&a<=u&&d<=c)_=a;else{const w=Math.max(5*this._lineHeight,l*.2),y=u-w,k=d-l;_=Math.max(k,y)}else if(o===1||o===2)if(o===2&&a<=u&&d<=c)_=a;else{const w=(u+d)/2;_=Math.max(0,w-l/2)}else _=this._computeMinimumScrolling(a,c,u,d,o===3,o===4);return _}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),i=this._context.configuration.options.get(146),r=t.left,s=r+t.width-i.verticalScrollbarWidth;let o=1073741824,a=0;if(e.type==="range"){const c=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!c)return null;for(const h of c.ranges)o=Math.min(o,Math.round(h.left)),a=Math.max(a,Math.round(h.left+h.width))}else for(const c of e.selections){if(c.startLineNumber!==c.endLineNumber)return null;const h=this._visibleRangesForLineRange(c.startLineNumber,c.startColumn,c.endColumn);if(!h)return null;for(const u of h.ranges)o=Math.min(o,Math.round(u.left)),a=Math.max(a,Math.round(u.left+u.width))}return e.minimalReveal||(o=Math.max(0,o-AL.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),e.type==="selections"&&a-o>t.width?null:{scrollLeft:this._computeMinimumScrolling(r,s,o,a),maxHorizontalOffset:a}}_computeMinimumScrolling(e,t,i,r,s,o){e=e|0,t=t|0,i=i|0,r=r|0,s=!!s,o=!!o;const a=t-e;if(r-i<a){if(s)return i;if(o)return Math.max(0,r-a);if(i<e)return i;if(r>t)return Math.max(0,r-a)}else return i;return e}};AL.HORIZONTAL_EXTRA_PX=30;let BI=AL;class C5e extends sJ{constructor(e){super(),this._context=e;const i=this._context.configuration.options.get(146);this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let r=0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.options.linesDecorationsClassName,c=a.options.zIndex;l&&(i[r++]=new OI(a.range.startLineNumber,a.range.endLineNumber,l,a.options.linesDecorationsTooltip??null,c));const h=a.options.firstLineDecorationClassName;h&&(i[r++]=new OI(a.range.startLineNumber,a.range.startLineNumber,h,a.options.linesDecorationsTooltip??null,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,r=this._render(t,i,this._getDecorations(e)),s=this._decorationsLeft.toString(),o=this._decorationsWidth.toString(),a='" style="left:'+s+"px;width:"+o+'px;"></div>',l=[];for(let c=t;c<=i;c++){const h=c-t,u=r[h].getDecorations();let d="";for(const g of u){let p='<div class="cldr '+g.className;g.tooltip!==null&&(p+='" title="'+g.tooltip),p+=a,d+=p}l[h]=d}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class S5e extends sJ{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let r=0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.options.marginClassName,c=a.options.zIndex;l&&(i[r++]=new OI(a.range.startLineNumber,a.range.endLineNumber,l,null,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,r=this._render(t,i,this._getDecorations(e)),s=[];for(let o=t;o<=i;o++){const a=o-t,l=r[a].getDecorations();let c="";for(const h of l)c+='<div class="cmdr '+h.className+'" style=""></div>';s[a]=c}this._renderResult=s}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}const Rd=class Rd{constructor(e,t,i,r){this._rgba8Brand=void 0,this.r=Rd._clamp(e),this.g=Rd._clamp(t),this.b=Rd._clamp(i),this.a=Rd._clamp(r)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}};Rd.Empty=new Rd(0,0,0,0);let Eu=Rd;const RL=class RL extends xe{static getInstance(){return this._INSTANCE||(this._INSTANCE=new RL),this._INSTANCE}constructor(){super(),this._onDidChange=new de,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(qn.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const e=qn.getColorMap();if(!e){this._colors=[Eu.Empty],this._backgroundIsLight=!0;return}this._colors=[Eu.Empty];for(let i=1;i<e.length;i++){const r=e[i].rgba;this._colors[i]=new Eu(r.r,r.g,r.b,Math.round(r.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}};RL._INSTANCE=null;let Kk=RL;const x5e=(()=>{const n=[];for(let e=32;e<=126;e++)n.push(e);return n.push(65533),n})(),k5e=(n,e)=>(n-=32,n<0||n>96?e<=2?(n+96)%96:95:n);class Yw{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=Yw.soften(e,12/15),this.charDataLight=Yw.soften(e,50/60)}static soften(e,t){const i=new Uint8ClampedArray(e.length);for(let r=0,s=e.length;r<s;r++)i[r]=zx(e[r]*t);return i}renderChar(e,t,i,r,s,o,a,l,c,h,u){const d=1*this.scale,g=2*this.scale,p=u?1:g;if(t+d>e.width||i+p>e.height){console.warn("bad render request outside image data");return}const b=h?this.charDataLight:this.charDataNormal,_=k5e(r,c),w=e.width*4,y=a.r,k=a.g,L=a.b,T=s.r-y,N=s.g-k,D=s.b-L,O=Math.max(o,l),B=e.data;let G=_*d*g,H=i*w+t*4;for(let q=0;q<p;q++){let X=H;for(let z=0;z<d;z++){const Q=b[G++]/255*(o/255);B[X++]=y+T*Q,B[X++]=k+N*Q,B[X++]=L+D*Q,B[X++]=O}H+=w}}blockRenderChar(e,t,i,r,s,o,a,l){const c=1*this.scale,h=2*this.scale,u=l?1:h;if(t+c>e.width||i+u>e.height){console.warn("bad render request outside image data");return}const d=e.width*4,g=.5*(s/255),p=o.r,b=o.g,_=o.b,w=r.r-p,y=r.g-b,k=r.b-_,L=p+w*g,T=b+y*g,N=_+k*g,D=Math.max(s,a),O=e.data;let B=i*d+t*4;for(let G=0;G<u;G++){let H=B;for(let q=0;q<c;q++)O[H++]=L,O[H++]=T,O[H++]=N,O[H++]=D;B+=d}}}const wj={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},yj=n=>{const e=new Uint8ClampedArray(n.length/2);for(let t=0;t<n.length;t+=2)e[t>>1]=wj[n[t]]<<4|wj[n[t+1]]&15;return e},Cj={1:C1(()=>yj("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:C1(()=>yj("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class Av{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let i;return Cj[e]?i=new Yw(Cj[e](),e):i=Av.createFromSampleData(Av.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=i,i}static createSampleData(e){const t=document.createElement("canvas"),i=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",i.fillStyle="#ffffff",i.font=`bold 16px ${e}`,i.textBaseline="middle";let r=0;for(const s of x5e)i.fillText(String.fromCharCode(s),r,16/2),r+=10;return i.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const r=Av._downsample(e,t);return new Yw(r,t)}static _downsampleChar(e,t,i,r,s){const o=1*s,a=2*s;let l=r,c=0;for(let h=0;h<a;h++){const u=h/a*16,d=(h+1)/a*16;for(let g=0;g<o;g++){const p=g/o*10,b=(g+1)/o*10;let _=0,w=0;for(let k=u;k<d;k++){const L=t+Math.floor(k)*3840,T=1-(k-Math.floor(k));for(let N=p;N<b;N++){const D=1-(N-Math.floor(N)),O=L+Math.floor(N)*4,B=D*T;w+=B,_+=e[O]*e[O+3]/255*B}}const y=_/w;c=Math.max(c,y),i[l++]=zx(y)}}return c}static _downsample(e,t){const i=2*t*1*t,r=i*96,s=new Uint8ClampedArray(r);let o=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,s,o,t)),o+=i,a+=10*4;if(l>0){const c=255/l;for(let h=0;h<r;h++)s[h]*=c}return s}}const L5e=Go?'"Segoe WPC", "Segoe UI", sans-serif':hi?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif',T5e=140,D5e=2;class n1{constructor(e,t,i){const r=e.options,s=r.get(144),o=r.get(146),a=o.minimap,l=r.get(50),c=r.get(73);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=r.get(106),this.paddingTop=r.get(84).top,this.paddingBottom=r.get(84).bottom,this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=s,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=r.get(67),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=o.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=L5e,this.sectionHeaderFontSize=c.sectionHeaderFontSize*s,this.sectionHeaderLetterSpacing=c.sectionHeaderLetterSpacing,this.sectionHeaderFontColor=n1._getSectionHeaderColor(t,i.getColor(1)),this.charRenderer=C1(()=>Av.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=i.getColor(2),this.backgroundColor=n1._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=n1._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const i=e.getColor(Z1e);return i?new Eu(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(X1e);return t?Eu._clamp(Math.round(255*t.rgba.a)):255}static _getSectionHeaderColor(e,t){const i=e.getColor(Ny);return i?new Eu(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.sectionHeaderFontSize===e.sectionHeaderFontSize&&this.sectionHeaderLetterSpacing===e.sectionHeaderLetterSpacing&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class Rv{constructor(e,t,i,r,s,o,a,l,c){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=i,this._computedSliderRatio=r,this.sliderTop=s,this.sliderHeight=o,this.topPaddingLineCount=a,this.startLineNumber=l,this.endLineNumber=c}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumber,e.endLineNumber);return t>i?null:[t,i]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,i,r,s,o,a,l,c,h,u){const d=e.pixelRatio,g=e.minimapLineHeight,p=Math.floor(e.canvasInnerHeight/g),b=e.lineHeight;if(e.minimapHeightIsEditorHeight){let N=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(N+=Math.max(0,s-e.lineHeight-e.paddingBottom));const D=Math.max(1,Math.floor(s*s/N)),O=Math.max(0,e.minimapHeight-D),B=O/(h-s),G=c*B,H=O>0,q=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),X=Math.floor(e.paddingTop/e.lineHeight);return new Rv(c,h,H,B,G,D,X,1,Math.min(a,q))}let _;if(o&&i!==a){const N=i-t+1;_=Math.floor(N*g/d)}else{const N=s/b;_=Math.floor(N*g/d)}const w=Math.floor(e.paddingTop/b);let y=Math.floor(e.paddingBottom/b);if(e.scrollBeyondLastLine){const N=s/b;y=Math.max(y,N-1)}let k;if(y>0){const N=s/b;k=(w+a+y-N-1)*g/d}else k=Math.max(0,(w+a)*g/d-_);k=Math.min(e.minimapHeight-_,k);const L=k/(h-s),T=c*L;if(p>=w+a+y){const N=k>0;return new Rv(c,h,N,L,T,_,w,1,a)}else{let N;t>1?N=t+w:N=Math.max(1,c/b);let D,O=Math.max(1,Math.floor(N-T*d/g));O<w?(D=w-O+1,O=1):(D=0,O=Math.max(1,O-w)),u&&u.scrollHeight===h&&(u.scrollTop>c&&(O=Math.min(O,u.startLineNumber),D=Math.max(D,u.topPaddingLineCount)),u.scrollTop<c&&(O=Math.max(O,u.startLineNumber),D=Math.min(D,u.topPaddingLineCount)));const B=Math.min(a,O-D+p-1),G=(c-r)/b;let H;return c>=e.paddingTop?H=(t-O+D+G)*g/d:H=c/e.paddingTop*(D+G)*g/d,new Rv(c,h,!0,L,H,_,D,O,B)}}}const PL=class PL{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}};PL.INVALID=new PL(-1);let Yk=PL;class Sj{constructor(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new tJ({createLine:()=>Yk.INVALID}),this._renderedLines._set(e.startLineNumber,i)}linesEquals(e){if(!this.scrollEquals(e))return!1;const i=this._renderedLines._get().lines;for(let r=0,s=i.length;r<s;r++)if(i[r].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class ZR{constructor(e,t,i,r){this._backgroundFillData=ZR._createBackgroundFillData(t,i,r),this._buffers=[e.createImageData(t,i),e.createImageData(t,i)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,i){const r=i.r,s=i.g,o=i.b,a=i.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let h=0;h<t;h++)for(let u=0;u<e;u++)l[c]=r,l[c+1]=s,l[c+2]=o,l[c+3]=a,c+=4;return l}}class Zw{static compute(e,t,i){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const{minimapLineCount:r}=P0.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),s=t/r,o=s/2;if(!i||i.minimapLines.length===0){const _=[];if(_[0]=1,r>1){for(let w=0,y=r-1;w<y;w++)_[w]=Math.round(w*s+o);_[r-1]=t}return[new Zw(s,_),[]]}const a=i.minimapLines,l=a.length,c=[];let h=0,u=0,d=1;const g=10;let p=[],b=null;for(let _=0;_<r;_++){const w=Math.max(d,Math.round(_*s)),y=Math.max(w,Math.round((_+1)*s));for(;h<l&&a[h]<w;){if(p.length<g){const L=h+1+u;b&&b.type==="deleted"&&b._oldIndex===h-1?b.deleteToLineNumber++:(b={type:"deleted",_oldIndex:h,deleteFromLineNumber:L,deleteToLineNumber:L},p.push(b)),u--}h++}let k;if(h<l&&a[h]<=y)k=a[h],h++;else if(_===0?k=1:_+1===r?k=t:k=Math.round(_*s+o),p.length<g){const L=h+1+u;b&&b.type==="inserted"&&b._i===_-1?b.insertToLineNumber++:(b={type:"inserted",_i:_,insertFromLineNumber:L,insertToLineNumber:L},p.push(b)),u++}c[_]=k,d=k}if(p.length<g)for(;h<l;){const _=h+1+u;b&&b.type==="deleted"&&b._oldIndex===h-1?b.deleteToLineNumber++:(b={type:"deleted",_oldIndex:h,deleteFromLineNumber:_,deleteToLineNumber:_},p.push(b)),u--,h++}else p=[{type:"flush"}];return[new Zw(s,c),p]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e)-1;for(;i>0&&this.minimapLines[i-1]>=e;)i--;let r=this.modelLineToMinimapLine(t)-1;for(;r+1<this.minimapLines.length&&this.minimapLines[r+1]<=t;)r++;if(i===r){const s=this.minimapLines[i];if(s<e||s>t)return null}return[i+1,r+1]}decorationLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e),r=this.modelLineToMinimapLine(t);return e!==t&&r===i&&(r===this.minimapLines.length?i>1&&i--:r++),[i,r]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let i=this.minimapLines.length,r=0;for(let s=this.minimapLines.length-1;s>=0&&!(this.minimapLines[s]<e.fromLineNumber);s--)this.minimapLines[s]<=e.toLineNumber?(this.minimapLines[s]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,s),r=Math.max(r,s)):this.minimapLines[s]-=t;return[i,r]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}}class E5e extends Jo{constructor(e){super(e),this._sectionHeaderCache=new Iy(10,1.5),this.tokensColorTracker=Kk.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new n1(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=Zw.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new w0(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new n1(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,i]=this._samplingState.onLinesDeleted(e);return t<=i&&this._actual.onLinesChanged(t+1,i-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const i of e.ranges){const r=this._samplingState.modelLineRangeToMinimapLineRange(i.fromLineNumber,i.toLineNumber);r&&t.push({fromLineNumber:r[0],toLineNumber:r[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));const r={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(r)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,i]=Zw.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const r of i)switch(r.type){case"deleted":this._actual.onLinesDeleted(r.deleteFromLineNumber,r.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(r.insertFromLineNumber,r.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,i){if(this._samplingState){const r=[];for(let s=0,o=t-e+1;s<o;s++)i[s]?r[s]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+s-1]):r[s]=null;return r}return this._context.viewModel.getMinimapLinesRenderingData(e,t,i).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,i]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new $i(t,e.startColumn,i,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){const i=this._getMinimapDecorationsInViewport(e,t).filter(r=>!r.options.minimap?.sectionHeaderStyle);if(this._samplingState){const r=[];for(const s of i){if(!s.options.minimap)continue;const o=s.range,a=this._samplingState.modelLineToMinimapLine(o.startLineNumber),l=this._samplingState.modelLineToMinimapLine(o.endLineNumber);r.push(new VQ(new oe(a,o.startColumn,l,o.endColumn),s.options))}return r}return i}getSectionHeaderDecorationsInViewport(e,t){const i=this.options.minimapLineHeight,s=this.options.sectionHeaderFontSize/i;return e=Math.floor(Math.max(1,e-s)),this._getMinimapDecorationsInViewport(e,t).filter(o=>!!o.options.minimap?.sectionHeaderStyle)}_getMinimapDecorationsInViewport(e,t){let i;if(this._samplingState){const r=this._samplingState.minimapLines[e-1],s=this._samplingState.minimapLines[t-1];i=new oe(r,1,s,this._context.viewModel.getLineMaxColumn(s))}else i=new oe(e,1,t,this._context.viewModel.getLineMaxColumn(t));return this._context.viewModel.getMinimapDecorationsInRange(i)}getSectionHeaderText(e,t){const i=e.options.minimap?.sectionHeaderText;if(!i)return null;const r=this._sectionHeaderCache.get(i);if(r)return r;const s=t(i);return this._sectionHeaderCache.set(i,s),s}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new oe(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class w0 extends xe{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(sV),this._domNode=bi(document.createElement("div")),_c.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=bi(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=bi(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=bi(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=bi(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=bi(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=Er(this._domNode.domNode,Be.POINTER_DOWN,i=>{if(i.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(i.button===0&&this._lastRenderData){const c=qa(this._slider.domNode),h=c.top+c.height/2;this._startSliderDragging(i,h,this._lastRenderData.renderedLayout)}return}const s=this._model.options.minimapLineHeight,o=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*i.offsetY;let l=Math.floor(o/s)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new y5,this._sliderPointerDownListener=Er(this._slider.domNode,Be.POINTER_DOWN,i=>{i.preventDefault(),i.stopPropagation(),i.button===0&&this._lastRenderData&&this._startSliderDragging(i,i.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Zs.addTarget(this._domNode.domNode),this._sliderTouchStartListener=we(this._domNode.domNode,Ki.Start,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(i))},{passive:!1}),this._sliderTouchMoveListener=we(this._domNode.domNode,Ki.Change,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(i)},{passive:!1}),this._sliderTouchEndListener=Er(this._domNode.domNode,Ki.End,i=>{i.preventDefault(),i.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,i){if(!e.target||!(e.target instanceof Element))return;const r=e.pageX;this._slider.toggleClassName("active",!0);const s=(o,a)=>{const l=qa(this._domNode.domNode),c=Math.min(Math.abs(a-r),Math.abs(a-l.left),Math.abs(a-l.left-l.width));if(Go&&c>T5e){this._model.setScrollTop(i.scrollTop);return}const h=o-t;this._model.setScrollTop(i.getDesiredScrollTopFromDelta(h))};e.pageY!==t&&s(e.pageY,r),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>s(o.pageY,o.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new ZR(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){return this._lastRenderData?.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData?.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(sV),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const i=Rv.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(i.sliderNeeded?"block":"none"),this._slider.setTop(i.sliderTop),this._slider.setHeight(i.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(i.sliderHeight),this.renderDecorations(i),this._lastRenderData=this.renderLines(i)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(oe.compareRangesUsingStarts);const i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);i.sort((d,g)=>(d.options.zIndex||0)-(g.options.zIndex||0));const{canvasInnerWidth:r,canvasInnerHeight:s}=this._model.options,o=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,r,s);const h=new xj(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,h,e,o),this._renderDecorationsLineHighlights(c,i,h,e,o);const u=new xj(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,u,e,o,l,a,r),this._renderDecorationsHighlights(c,i,u,e,o,l,a,r),this._renderSectionHeaders(e)}}_renderSelectionLineHighlights(e,t,i,r,s){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let o=0,a=0;for(const l of t){const c=r.intersectWithViewport(l);if(!c)continue;const[h,u]=c;for(let p=h;p<=u;p++)i.set(p,!0);const d=r.getYForLineNumber(h,s),g=r.getYForLineNumber(u,s);a>=d||(a>o&&e.fillRect(Rc,o,e.canvas.width,a-o),o=d),a=g}a>o&&e.fillRect(Rc,o,e.canvas.width,a-o)}_renderDecorationsLineHighlights(e,t,i,r,s){const o=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==1)continue;const h=r.intersectWithViewport(l.range);if(!h)continue;const[u,d]=h,g=c.getColor(this._theme.value);if(!g||g.isTransparent())continue;let p=o.get(g.toString());p||(p=g.transparent(.5).toString(),o.set(g.toString(),p)),e.fillStyle=p;for(let b=u;b<=d;b++){if(i.has(b))continue;i.set(b,!0);const _=r.getYForLineNumber(u,s);e.fillRect(Rc,_,e.canvas.width,s)}}}_renderSelectionsHighlights(e,t,i,r,s,o,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const h=r.intersectWithViewport(c);if(!h)continue;const[u,d]=h;for(let g=u;g<=d;g++)this.renderDecorationOnLine(e,i,c,this._selectionColor,r,g,s,s,o,a,l)}}_renderDecorationsHighlights(e,t,i,r,s,o,a,l){for(const c of t){const h=c.options.minimap;if(!h)continue;const u=r.intersectWithViewport(c.range);if(!u)continue;const[d,g]=u,p=h.getColor(this._theme.value);if(!(!p||p.isTransparent()))for(let b=d;b<=g;b++)switch(h.position){case 1:this.renderDecorationOnLine(e,i,c.range,p,r,b,s,s,o,a,l);continue;case 2:{const _=r.getYForLineNumber(b,s);this.renderDecoration(e,p,2,_,D5e,s);continue}}}}renderDecorationOnLine(e,t,i,r,s,o,a,l,c,h,u){const d=s.getYForLineNumber(o,l);if(d+a<0||d>this._model.options.canvasInnerHeight)return;const{startLineNumber:g,endLineNumber:p}=i,b=g===o?i.startColumn:1,_=p===o?i.endColumn:this._model.getLineMaxColumn(o),w=this.getXOffsetForPosition(t,o,b,c,h,u),y=this.getXOffsetForPosition(t,o,_,c,h,u);this.renderDecoration(e,r,w,d,y-w,a)}getXOffsetForPosition(e,t,i,r,s,o){if(i===1)return Rc;if((i-1)*s>=o)return o;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[Rc];let h=Rc;for(let u=1;u<c.length+1;u++){const d=c.charCodeAt(u-1),g=d===9?r*s:hf(d)?2*s:s,p=h+g;if(p>=o){l[u]=o;break}l[u]=p,h=p}e.set(t,l)}return i-1<l.length?l[i-1]:o}renderDecoration(e,t,i,r,s,o){e.fillStyle=t&&t.toString()||"",e.fillRect(i,r,s,o)}_renderSectionHeaders(e){const t=this._model.options.minimapLineHeight,i=this._model.options.sectionHeaderFontSize,r=this._model.options.sectionHeaderLetterSpacing,s=i*1.5,{canvasInnerWidth:o}=this._model.options,a=this._model.options.backgroundColor,l=`rgb(${a.r} ${a.g} ${a.b} / .7)`,c=this._model.options.sectionHeaderFontColor,h=`rgb(${c.r} ${c.g} ${c.b})`,u=h,d=this._decorationsCanvas.domNode.getContext("2d");d.letterSpacing=r+"px",d.font="500 "+i+"px "+this._model.options.sectionHeaderFontFamily,d.strokeStyle=u,d.lineWidth=.2;const g=this._model.getSectionHeaderDecorationsInViewport(e.startLineNumber,e.endLineNumber);g.sort((b,_)=>b.range.startLineNumber-_.range.startLineNumber);const p=w0._fitSectionHeader.bind(null,d,o-Rc);for(const b of g){const _=e.getYForLineNumber(b.range.startLineNumber,t)+i,w=_-i,y=w+2,k=this._model.getSectionHeaderText(b,p);w0._renderSectionLabel(d,k,b.options.minimap?.sectionHeaderStyle===2,l,h,o,w,s,_,y)}}static _fitSectionHeader(e,t,i){if(!i)return i;const r="…",s=e.measureText(i).width,o=e.measureText(r).width;if(s<=t||s<=o)return i;const a=i.length,l=s/i.length,c=Math.floor((t-o)/l)-1;let h=Math.ceil(c/2);for(;h>0&&/\s/.test(i[h-1]);)--h;return i.substring(0,h)+r+i.substring(a-(c-h))}static _renderSectionLabel(e,t,i,r,s,o,a,l,c,h){t&&(e.fillStyle=r,e.fillRect(0,a,o,l),e.fillStyle=s,e.fillText(t,Rc,c)),i&&(e.beginPath(),e.moveTo(0,h),e.lineTo(o,h),e.closePath(),e.stroke())}renderLines(e){const t=e.startLineNumber,i=e.endLineNumber,r=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const Q=this._lastRenderData._get();return new Sj(e,Q.imageData,Q.lines)}const s=this._getBuffer();if(!s)return null;const[o,a,l]=w0._renderUntouchedLines(s,e.topPaddingLineCount,t,i,r,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,i,l),h=this._model.getOptions().tabSize,u=this._model.options.defaultBackgroundColor,d=this._model.options.backgroundColor,g=this._model.options.foregroundAlpha,p=this._model.tokensColorTracker,b=p.backgroundIsLight(),_=this._model.options.renderMinimap,w=this._model.options.charRenderer(),y=this._model.options.fontScale,k=this._model.options.minimapCharWidth,T=(_===1?2:3)*y,N=r>T?Math.floor((r-T)/2):0,D=d.a/255,O=new Eu(Math.round((d.r-u.r)*D+u.r),Math.round((d.g-u.g)*D+u.g),Math.round((d.b-u.b)*D+u.b),255);let B=e.topPaddingLineCount*r;const G=[];for(let Q=0,te=i-t+1;Q<te;Q++)l[Q]&&w0._renderLine(s,O,d.a,b,_,k,p,g,w,B,N,h,c[Q],y,r),G[Q]=new Yk(B),B+=r;const H=o===-1?0:o,X=(a===-1?s.height:a)-H;return this._canvas.domNode.getContext("2d").putImageData(s,0,0,0,H,s.width,X),new Sj(e,s,G)}static _renderUntouchedLines(e,t,i,r,s,o){const a=[];if(!o){for(let B=0,G=r-i+1;B<G;B++)a[B]=!0;return[-1,-1,a]}const l=o._get(),c=l.imageData.data,h=l.rendLineNumberStart,u=l.lines,d=u.length,g=e.width,p=e.data,b=(r-i+1)*s*g*4;let _=-1,w=-1,y=-1,k=-1,L=-1,T=-1,N=t*s;for(let B=i;B<=r;B++){const G=B-i,H=B-h,q=H>=0&&H<d?u[H].dy:-1;if(q===-1){a[G]=!0,N+=s;continue}const X=q*g*4,z=(q+s)*g*4,Q=N*g*4,te=(N+s)*g*4;k===X&&T===Q?(k=z,T=te):(y!==-1&&(p.set(c.subarray(y,k),L),_===-1&&y===0&&y===L&&(_=k),w===-1&&k===b&&y===L&&(w=y)),y=X,k=z,L=Q,T=te),a[G]=!1,N+=s}y!==-1&&(p.set(c.subarray(y,k),L),_===-1&&y===0&&y===L&&(_=k),w===-1&&k===b&&y===L&&(w=y));const D=_===-1?-1:_/(g*4),O=w===-1?-1:w/(g*4);return[D,O,a]}static _renderLine(e,t,i,r,s,o,a,l,c,h,u,d,g,p,b){const _=g.content,w=g.tokens,y=e.width-o,k=b===1;let L=Rc,T=0,N=0;for(let D=0,O=w.getCount();D<O;D++){const B=w.getEndOffset(D),G=w.getForeground(D),H=a.getColor(G);for(;T<B;T++){if(L>y)return;const q=_.charCodeAt(T);if(q===9){const X=d-(T+N)%d;N+=X-1,L+=X*o}else if(q===32)L+=o;else{const X=hf(q)?2:1;for(let z=0;z<X;z++)if(s===2?c.blockRenderChar(e,L,h+u,H,l,t,i,k):c.renderChar(e,L,h+u,q,H,l,t,i,p,r,k),L+=o,L>y)return}}}}}class xj{constructor(e,t,i){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=i,this._values=[];for(let r=0,s=this._endLineNumber-this._startLineNumber+1;r<s;r++)this._values[r]=i}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}class I5e extends Jo{constructor(e,t){super(e),this._viewDomNode=t;const r=this._context.configuration.options.get(146);this._widgets={},this._verticalScrollbarWidth=r.verticalScrollbarWidth,this._minimapWidth=r.minimap.minimapWidth,this._horizontalScrollbarHeight=r.horizontalScrollbarHeight,this._editorHeight=r.height,this._editorWidth=r.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=bi(document.createElement("div")),_c.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=bi(document.createElement("div")),_c.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,!0}addWidget(e){const t=bi(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const i=this._widgets[e.getId()],r=t?t.preference:null,s=t?.stackOridinal;return i.preference===r&&i.stack===s?(this._updateMaxMinWidth(),!1):(i.preference=r,i.stack=s,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const r=this._widgets[t].domNode.domNode;delete this._widgets[t],r.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){let e=0;const t=Object.keys(this._widgets);for(let i=0,r=t.length;i<r;i++){const s=t[i],a=this._widgets[s].widget.getMinContentWidthInPx?.();typeof a<"u"&&(e=Math.max(e,a))}this._context.viewLayout.setOverlayWidgetsMinWidth(e)}_renderWidget(e,t){const i=e.domNode;if(e.preference===null){i.setTop("");return}const r=2*this._verticalScrollbarWidth+this._minimapWidth;if(e.preference===0||e.preference===1){if(e.preference===1){const s=i.domNode.clientHeight;i.setTop(this._editorHeight-s-2*this._horizontalScrollbarHeight)}else i.setTop(0);e.stack!==void 0?(i.setTop(t[e.preference]),t[e.preference]+=i.domNode.clientWidth):i.setRight(r)}else if(e.preference===2)i.domNode.style.right="50%",e.stack!==void 0?(i.setTop(t[2]),t[2]+=i.domNode.clientHeight):i.setTop(0);else{const{top:s,left:o}=e.preference;if(this._context.configuration.options.get(42)&&e.widget.allowEditorOverflow){const l=this._viewDomNodeRect;i.setTop(s+l.top),i.setLeft(o+l.left),i.setPosition("fixed")}else i.setTop(s),i.setLeft(o),i.setPosition("absolute")}}prepareRender(e){this._viewDomNodeRect=qa(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets),i=Array.from({length:3},()=>0);t.sort((r,s)=>(this._widgets[r].stack||0)-(this._widgets[s].stack||0));for(let r=0,s=t.length;r<s;r++){const o=t[r];this._renderWidget(this._widgets[o],i)}}}let N5e=class{constructor(e,t){const i=e.options;this.lineHeight=i.get(67),this.pixelRatio=i.get(144),this.overviewRulerLanes=i.get(83),this.renderBorder=i.get(82);const r=t.getColor(gCe);this.borderColor=r?r.toString():null,this.hideCursor=i.get(59);const s=t.getColor(P5);this.cursorColorSingle=s?s.transparent(.7).toString():null;const o=t.getColor(IX);this.cursorColorPrimary=o?o.transparent(.7).toString():null;const a=t.getColor(NX);this.cursorColorSecondary=a?a.transparent(.7).toString():null,this.themeType=t.type;const l=i.get(73),c=l.enabled,h=l.side,u=t.getColor(mCe),d=qn.getDefaultBackground();u?this.backgroundColor=u:c&&h==="right"?this.backgroundColor=d:this.backgroundColor=null;const p=i.get(146).overviewRuler;this.top=p.top,this.right=p.right,this.domWidth=p.width,this.domHeight=p.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[b,_]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=b,this.w=_}_initLanes(e,t,i){const r=t-e;if(i>=3){const s=Math.floor(r/3),o=Math.floor(r/3),a=r-s-o,l=e,c=l+s,h=l+s+a;return[[0,l,c,l,h,l,c,l],[0,s,a,s+a,o,s+a+o,a+o,s+a+o]]}else if(i===2){const s=Math.floor(r/2),o=r-s,a=e,l=a+s;return[[0,a,a,a,l,a,a,a],[0,s,s,s,o,s+o,s+o,s+o]]}else{const s=e,o=r;return[[0,s,s,s,s,s,s,s],[0,o,o,o,o,o,o,o]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColorSingle===e.cursorColorSingle&&this.cursorColorPrimary===e.cursorColorPrimary&&this.cursorColorSecondary===e.cursorColorSecondary&&this.themeType===e.themeType&&Me.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}};class M5e extends Jo{constructor(e){super(e),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=bi(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=qn.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[{position:new be(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new N5e(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++){let r=this._settings.cursorColorSingle;i>1&&(r=t===0?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:e.selections[t].getPosition(),color:r})}return this._cursorPositions.sort((t,i)=>be.compare(t.position,i.position)),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return e.affectsOverviewRuler?this._markRenderingIsMaybeNeeded():!1}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return e.scrollHeightChanged?this._markRenderingIsNeeded():!1}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){const e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(e?Me.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}const t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(jw.compareByRenderingProps),this._actualShouldRender===1&&!jw.equalsArr(this._renderedDecorations,t)&&(this._actualShouldRender=2),this._actualShouldRender===1&&!_r(this._renderedCursorPositions,this._cursorPositions,(p,b)=>p.position.lineNumber===b.position.lineNumber&&p.color===b.color)&&(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const i=this._settings.canvasWidth,r=this._settings.canvasHeight,s=this._settings.lineHeight,o=this._context.viewLayout,a=this._context.viewLayout.getScrollHeight(),l=r/a,c=6*this._settings.pixelRatio|0,h=c/2|0,u=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(u.fillStyle=Me.Format.CSS.formatHexA(e),u.fillRect(0,0,i,r)):(u.clearRect(0,0,i,r),u.fillStyle=Me.Format.CSS.formatHexA(e),u.fillRect(0,0,i,r)):u.clearRect(0,0,i,r);const d=this._settings.x,g=this._settings.w;for(const p of t){const b=p.color,_=p.data;u.fillStyle=b;let w=0,y=0,k=0;for(let L=0,T=_.length/3;L<T;L++){const N=_[3*L],D=_[3*L+1],O=_[3*L+2];let B=o.getVerticalOffsetForLineNumber(D)*l|0,G=(o.getVerticalOffsetForLineNumber(O)+s)*l|0;if(G-B<c){let q=(B+G)/2|0;q<h?q=h:q+h>r&&(q=r-h),B=q-h,G=q+h}B>k+1||N!==w?(L!==0&&u.fillRect(d[w],y,g[w],k-y),w=N,y=B,k=G):G>k&&(k=G)}u.fillRect(d[w],y,g[w],k-y)}if(!this._settings.hideCursor){const p=2*this._settings.pixelRatio|0,b=p/2|0,_=this._settings.x[7],w=this._settings.w[7];let y=-100,k=-100,L=null;for(let T=0,N=this._cursorPositions.length;T<N;T++){const D=this._cursorPositions[T].color;if(!D)continue;const O=this._cursorPositions[T].position;let B=o.getVerticalOffsetForLineNumber(O.lineNumber)*l|0;B<b?B=b:B+b>r&&(B=r-b);const G=B-b,H=G+p;G>k+1||D!==L?(T!==0&&L&&u.fillRect(_,y,w,k-y),y=G,k=H):H>k&&(k=H),L=D,u.fillStyle=D}L&&u.fillRect(_,y,w,k-y)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(u.beginPath(),u.lineWidth=1,u.strokeStyle=this._settings.borderColor,u.moveTo(0,0),u.lineTo(0,r),u.moveTo(1,0),u.lineTo(i,0),u.stroke())}}class kj{constructor(e,t,i){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=i|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class oJ{constructor(e,t,i,r){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=i,this.color=r,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class A5e{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(oJ.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),i=Math.floor(this.getCanvasHeight()),r=Math.floor(this._outerHeight),s=i/r,o=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const h=this._zones[l];if(!e){const L=h.getColorZones();if(L){a.push(L);continue}}const u=this._getVerticalOffsetForLine(h.startLineNumber),d=h.heightInLines===0?this._getVerticalOffsetForLine(h.endLineNumber)+t:u+h.heightInLines*t,g=Math.floor(s*u),p=Math.floor(s*d);let b=Math.floor((g+p)/2),_=p-b;_<o&&(_=o),b-_<0&&(b=_),b+_>i&&(b=i-_);const w=h.color;let y=this._color2Id[w];y||(y=++this._lastAssignedId,this._color2Id[w]=y,this._id2Color[y]=w);const k=new kj(b-_,b+_,y);h.setColorZone(k),a.push(k)}return this._colorZonesInvalid=!1,a.sort(kj.compare),a}}class R5e extends jy{constructor(e,t){super(),this._context=e;const i=this._context.configuration.options;this._domNode=bi(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new A5e(r=>this._context.viewLayout.getVerticalOffsetForLineNumber(r)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(67)),this._zoneManager.setPixelRatio(i.get(144)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(67)&&(this._zoneManager.setLineHeight(t.get(67)),this._render()),e.hasChanged(144)&&(this._zoneManager.setPixelRatio(t.get(144)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),r=this._zoneManager.getId2Color(),s=this._domNode.domNode.getContext("2d");return s.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(s,i,r,e),!0}_renderOneLane(e,t,i,r){let s=0,o=0,a=0;for(const l of t){const c=l.colorId,h=l.from,u=l.to;c!==s?(e.fillRect(0,o,r,a-o),s=c,e.fillStyle=i[s],o=h,a=u):a>=h?a=Math.max(a,u):(e.fillRect(0,o,r,a-o),o=h,a=u)}e.fillRect(0,o,r,a-o)}}class P5e extends Jo{constructor(e){super(e),this.domNode=bi(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:r}=this._context.viewModel.model.getOptions(),s=r;let o=t-e;for(;o>0;){const a=bi(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(s),this.domNode.appendChild(a),this._renderedRulers.push(a),o--}return}let i=e-t;for(;i>0;){const r=this._renderedRulers.pop();this.domNode.removeChild(r),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){const r=this._renderedRulers[t],s=this._rulers[t];r.setBoxShadow(s.color?`1px 0 0 0 ${s.color} inset`:""),r.setHeight(Math.min(e.scrollHeight,1e6)),r.setLeft(s.column*this._typicalHalfwidthCharacterWidth)}}}class O5e extends Jo{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const i=this._context.configuration.options.get(104);this._useShadows=i.useShadows,this._domNode=bi(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(146);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const i=this._context.configuration.options.get(104);return this._useShadows=i.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class B5e{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class F5e{constructor(e,t){this.lineNumber=e,this.ranges=t}}function W5e(n){return new B5e(n)}function z5e(n){return new F5e(n.lineNumber,n.ranges.map(W5e))}const Dn=class Dn extends np{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,i=e.length;t<i;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,i){const r=this._typicalHalfwidthCharacterWidth/4;let s=null,o=null;if(i&&i.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!s&&c<i.length;c++)i[c].lineNumber===a&&(s=i[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=i.length-1;!o&&c>=0;c--)i[c].lineNumber===l&&(o=i[c].ranges[0]);s&&!s.startStyle&&(s=null),o&&!o.startStyle&&(o=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],h=c.left,u=c.left+c.width,d={top:0,bottom:0},g={top:0,bottom:0};if(a>0){const p=t[a-1].ranges[0].left,b=t[a-1].ranges[0].left+t[a-1].ranges[0].width;Q2(h-p)<r?d.top=2:h>p&&(d.top=1),Q2(u-b)<r?g.top=2:p<u&&u<b&&(g.top=1)}else s&&(d.top=s.startStyle.top,g.top=s.endStyle.top);if(a+1<l){const p=t[a+1].ranges[0].left,b=t[a+1].ranges[0].left+t[a+1].ranges[0].width;Q2(h-p)<r?d.bottom=2:p<h&&h<b&&(d.bottom=1),Q2(u-b)<r?g.bottom=2:u<b&&(g.bottom=1)}else o&&(d.bottom=o.startStyle.bottom,g.bottom=o.endStyle.bottom);c.startStyle=d,c.endStyle=g}}_getVisibleRangesWithStyle(e,t,i){const s=(t.linesVisibleRangesForRange(e,!0)||[]).map(z5e);return!this._visibleRangesHaveGaps(s)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,s,i),s}_createSelectionPiece(e,t,i,r,s){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;bottom:"+t.toString()+"px;left:"+r.toString()+"px;width:"+s.toString()+'px;"></div>'}_actualRenderOneSelection(e,t,i,r){if(r.length===0)return;const s=!!r[0].ranges[0].startStyle,o=r[0].lineNumber,a=r[r.length-1].lineNumber;for(let l=0,c=r.length;l<c;l++){const h=r[l],u=h.lineNumber,d=u-t,g=i&&u===o?1:0,p=i&&u!==o&&u===a?1:0;let b="",_="";for(let w=0,y=h.ranges.length;w<y;w++){const k=h.ranges[w];if(s){const T=k.startStyle,N=k.endStyle;if(T.top===1||T.bottom===1){b+=this._createSelectionPiece(g,p,Dn.SELECTION_CLASS_NAME,k.left-Dn.ROUNDED_PIECE_WIDTH,Dn.ROUNDED_PIECE_WIDTH);let D=Dn.EDITOR_BACKGROUND_CLASS_NAME;T.top===1&&(D+=" "+Dn.SELECTION_TOP_RIGHT),T.bottom===1&&(D+=" "+Dn.SELECTION_BOTTOM_RIGHT),b+=this._createSelectionPiece(g,p,D,k.left-Dn.ROUNDED_PIECE_WIDTH,Dn.ROUNDED_PIECE_WIDTH)}if(N.top===1||N.bottom===1){b+=this._createSelectionPiece(g,p,Dn.SELECTION_CLASS_NAME,k.left+k.width,Dn.ROUNDED_PIECE_WIDTH);let D=Dn.EDITOR_BACKGROUND_CLASS_NAME;N.top===1&&(D+=" "+Dn.SELECTION_TOP_LEFT),N.bottom===1&&(D+=" "+Dn.SELECTION_BOTTOM_LEFT),b+=this._createSelectionPiece(g,p,D,k.left+k.width,Dn.ROUNDED_PIECE_WIDTH)}}let L=Dn.SELECTION_CLASS_NAME;if(s){const T=k.startStyle,N=k.endStyle;T.top===0&&(L+=" "+Dn.SELECTION_TOP_LEFT),T.bottom===0&&(L+=" "+Dn.SELECTION_BOTTOM_LEFT),N.top===0&&(L+=" "+Dn.SELECTION_TOP_RIGHT),N.bottom===0&&(L+=" "+Dn.SELECTION_BOTTOM_RIGHT)}_+=this._createSelectionPiece(g,p,L,k.left,k.width)}e[d][0]+=b,e[d][1]+=_}}prepareRender(e){const t=[],i=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let o=i;o<=r;o++){const a=o-i;t[a]=["",""]}const s=[];for(let o=0,a=this._selections.length;o<a;o++){const l=this._selections[o];if(l.isEmpty()){s[o]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[o]);s[o]=c,this._actualRenderOneSelection(t,i,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=s,this._renderResult=t.map(([o,a])=>o+a)}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};Dn.SELECTION_CLASS_NAME="selected-text",Dn.SELECTION_TOP_LEFT="top-left-radius",Dn.SELECTION_BOTTOM_LEFT="bottom-left-radius",Dn.SELECTION_TOP_RIGHT="top-right-radius",Dn.SELECTION_BOTTOM_RIGHT="bottom-right-radius",Dn.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",Dn.ROUNDED_PIECE_WIDTH=10;let FI=Dn;Uu((n,e)=>{const t=n.getColor(M1e);t&&!t.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function Q2(n){return n<0?-n:n}class Lj{constructor(e,t,i,r,s,o,a){this.top=e,this.left=t,this.paddingLeft=i,this.width=r,this.height=s,this.textContent=o,this.textContentClassName=a}}var bu;(function(n){n[n.Single=0]="Single",n[n.MultiPrimary=1]="MultiPrimary",n[n.MultiSecondary=2]="MultiSecondary"})(bu||(bu={}));class Tj{constructor(e,t){this._context=e;const i=this._context.configuration.options,r=i.get(50);this._cursorStyle=i.get(28),this._lineHeight=i.get(67),this._typicalHalfwidthCharacterWidth=r.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(i.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=bi(document.createElement("div")),this._domNode.setClassName(`cursor ${i1}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),ps(this._domNode,r),this._domNode.setDisplay("none"),this._position=new be(1,1),this._pluralityClass="",this.setPlurality(t),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(e){switch(e){default:case bu.Single:this._pluralityClass="";break;case bu.MultiPrimary:this._pluralityClass="cursor-primary";break;case bu.MultiSecondary:this._pluralityClass="cursor-secondary";break}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(50);return this._cursorStyle=t.get(28),this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),ps(this._domNode,i),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,i=this._context.viewModel.getLineContent(e),[r,s]=Dfe(i,t-1);return[new be(e,r+1),i.substring(r,s)]}_prepareRender(e){let t="",i="";const[r,s]=this._getGraphemeAwarePosition();if(this._cursorStyle===Wr.Line||this._cursorStyle===Wr.LineThin){const d=e.visibleRangeForPosition(r);if(!d||d.outsideRenderedLine)return null;const g=lt(this._domNode.domNode);let p;this._cursorStyle===Wr.Line?(p=Hz(g,this._lineCursorWidth>0?this._lineCursorWidth:2),p>2&&(t=s,i=this._getTokenClassName(r))):p=Hz(g,1);let b=d.left,_=0;p>=2&&b>=1&&(_=1,b-=_);const w=e.getVerticalOffsetForLineNumber(r.lineNumber)-e.bigNumbersDelta;return new Lj(w,b,_,p,this._lineHeight,t,i)}const o=e.linesVisibleRangesForRange(new oe(r.lineNumber,r.column,r.lineNumber,r.column+s.length),!1);if(!o||o.length===0)return null;const a=o[0];if(a.outsideRenderedLine||a.ranges.length===0)return null;const l=a.ranges[0],c=s==="	"?this._typicalHalfwidthCharacterWidth:l.width<1?this._typicalHalfwidthCharacterWidth:l.width;this._cursorStyle===Wr.Block&&(t=s,i=this._getTokenClassName(r));let h=e.getVerticalOffsetForLineNumber(r.lineNumber)-e.bigNumbersDelta,u=this._lineHeight;return(this._cursorStyle===Wr.Underline||this._cursorStyle===Wr.UnderlineThin)&&(h+=this._lineHeight-2,u=2),new Lj(h,l.left,0,c,u,t,i)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),i=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(i)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${i1} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}const sw=class sw extends Jo{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new Tj(this._context,bu.Single),this._secondaryCursors=[],this._renderData=[],this._domNode=bi(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new Um,this._cursorFlatBlinkInterval=new oA,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let i=0,r=this._secondaryCursors.length;i<r;i++)this._secondaryCursors[i].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,i){const r=this._secondaryCursors.length!==t.length||this._cursorSmoothCaretAnimation==="explicit"&&i!==3;if(this._primaryCursor.setPlurality(t.length?bu.MultiPrimary:bu.Single),this._primaryCursor.onCursorPositionChanged(e,r),this._updateBlinking(),this._secondaryCursors.length<t.length){const s=t.length-this._secondaryCursors.length;for(let o=0;o<s;o++){const a=new Tj(this._context,bu.MultiSecondary);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>t.length){const s=this._secondaryCursors.length-t.length;for(let o=0;o<s;o++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let s=0;s<t.length;s++)this._secondaryCursors[s].onCursorPositionChanged(t[s],r)}onCursorStateChanged(e){const t=[];for(let r=0,s=e.selections.length;r<s;r++)t[r]=e.selections[r].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const i=e.selections[0].isEmpty();return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=i=>{for(let r=0,s=e.ranges.length;r<s;r++)if(e.ranges[r].fromLineNumber<=i.lineNumber&&i.lineNumber<=e.ranges[r].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const i of this._secondaryCursors)if(t(i.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,i=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!i&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},sw.BLINK_INTERVAL,lt(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},sw.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case Wr.Line:e+=" cursor-line-style";break;case Wr.Block:e+=" cursor-block-style";break;case Wr.Underline:e+=" cursor-underline-style";break;case Wr.LineThin:e+=" cursor-line-thin-style";break;case Wr.BlockOutline:e+=" cursor-block-outline-style";break;case Wr.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let i=0;const r=this._primaryCursor.render(e);r&&(t[i++]=r);for(let s=0,o=this._secondaryCursors.length;s<o;s++){const a=this._secondaryCursors[s].render(e);a&&(t[i++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}};sw.BLINK_INTERVAL=500;let WI=sw;Uu((n,e)=>{const t=[{class:".cursor",foreground:P5,background:rR},{class:".cursor-primary",foreground:IX,background:Xye},{class:".cursor-secondary",foreground:NX,background:Qye}];for(const i of t){const r=n.getColor(i.foreground);if(r){let s=n.getColor(i.background);s||(s=r.opposite()),e.addRule(`.monaco-editor .cursors-layer ${i.class} { background-color: ${r}; border-color: ${r}; color: ${s}; }`),V0(n.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection ${i.class} { border-left: 1px solid ${s}; border-right: 1px solid ${s}; }`)}}});const W6=()=>{throw new Error("Invalid change accessor")};class H5e extends Jo{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this.domNode=bi(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=bi(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const r of e)t.set(r.id,r);let i=!1;return this._context.viewModel.changeWhitespace(r=>{const s=Object.keys(this._zones);for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._zones[l],h=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=h.isInHiddenArea;const u=t.get(l);u&&(u.afterLineNumber!==h.afterViewLineNumber||u.height!==h.heightInPx)&&(r.changeOneWhitespace(l,h.afterViewLineNumber,h.heightInPx),this._safeCallOnComputedHeight(c.delegate,h.heightInPx),i=!0)}}),i}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(67)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return e.ordinal??e.afterColumn??1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const o=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new be(o,this._context.viewModel.model.getLineMaxColumn(o))}let i;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const r=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),s=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!s,afterViewLineNumber:r.lineNumber,heightInPx:s?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(i=>{const r={addZone:s=>(t=!0,this._addZone(i,s)),removeZone:s=>{s&&(t=this._removeZone(i,s)||t)},layoutZone:s=>{s&&(t=this._layoutZone(i,s)||t)}};V5e(e,r),r.addZone=W6,r.removeZone=W6,r.layoutZone=W6}),t}_addZone(e,t){const i=this._computeWhitespaceProps(t),s={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:bi(t.domNode),marginDomNode:t.marginDomNode?bi(t.marginDomNode):null};return this._safeCallOnComputedHeight(s.delegate,i.heightInPx),s.domNode.setPosition("absolute"),s.domNode.domNode.style.width="100%",s.domNode.setDisplay("none"),s.domNode.setAttribute("monaco-view-zone",s.whitespaceId),this.domNode.appendChild(s.domNode),s.marginDomNode&&(s.marginDomNode.setPosition("absolute"),s.marginDomNode.domNode.style.width="100%",s.marginDomNode.setDisplay("none"),s.marginDomNode.setAttribute("monaco-view-zone",s.whitespaceId),this.marginDomNode.appendChild(s.marginDomNode)),this._zones[s.whitespaceId]=s,this.setShouldRender(),s.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.remove(),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.remove()),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t],r=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=r.isInHiddenArea,e.changeOneWhitespace(i.whitespaceId,r.afterViewLineNumber,r.heightInPx),this._safeCallOnComputedHeight(i.delegate,r.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(i){Wi(i)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(i){Wi(i)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,i={};let r=!1;for(const o of t)this._zones[o.id].isInHiddenArea||(i[o.id]=o,r=!0);const s=Object.keys(this._zones);for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._zones[l];let h=0,u=0,d="none";i.hasOwnProperty(l)?(h=i[l].verticalOffset-e.bigNumbersDelta,u=i[l].height,d="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(i[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(h),c.domNode.setHeight(u),c.domNode.setDisplay(d),c.marginDomNode&&(c.marginDomNode.setTop(h),c.marginDomNode.setHeight(u),c.marginDomNode.setDisplay(d))}r&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function V5e(n,e){try{return n(e)}catch(t){Wi(t)}}class $5e extends np{constructor(e){super(),this._context=e,this._options=new Dj(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new Dj(this._context.configuration);return this._options.equals(t)?e.hasChanged(146):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber-t+1,s=new Array(r);for(let a=0;a<r;a++)s[a]=!0;const o=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,s);this._renderResult=[];for(let a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){const l=a-e.viewportData.startLineNumber,c=o.data[l];let h=null;if(this._options.renderWhitespace==="selection"){const u=this._selection;for(const d of u){if(d.endLineNumber<a||d.startLineNumber>a)continue;const g=d.startLineNumber===a?d.startColumn:c.minColumn,p=d.endLineNumber===a?d.endColumn:c.maxColumn;g<p&&(h||(h=[]),h.push(new WQ(g-1,p-1)))}}this._renderResult[l]=this._applyRenderWhitespace(e,a,h,c)}}_applyRenderWhitespace(e,t,i,r){if(this._options.renderWhitespace==="selection"&&!i||this._options.renderWhitespace==="trailing"&&r.continuesWithWrappedLine)return"";const s=this._context.theme.getColor(sR),o=this._options.renderWithSVG,a=r.content,l=this._options.stopRenderingLineAfter===-1?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),c=r.continuesWithWrappedLine,h=r.minColumn-1,u=this._options.renderWhitespace==="boundary",d=this._options.renderWhitespace==="trailing",g=this._options.lineHeight,p=this._options.middotWidth,b=this._options.wsmiddotWidth,_=this._options.spaceWidth,w=Math.abs(b-_),y=Math.abs(p-_),k=w<y?11825:183,L=this._options.canUseHalfwidthRightwardsArrow;let T="",N=!1,D=qo(a),O;D===-1?(N=!0,D=l,O=l):O=jm(a);let B=0,G=i&&i[B],H=0;for(let q=h;q<l;q++){const X=a.charCodeAt(q);if(G&&q>=G.endOffset&&(B++,G=i&&i[B]),X!==9&&X!==32||d&&!N&&q<=O)continue;if(u&&q>=D&&q<=O&&X===32){const Q=q-1>=0?a.charCodeAt(q-1):0,te=q+1<l?a.charCodeAt(q+1):0;if(Q!==32&&te!==32)continue}if(u&&c&&q===l-1){const Q=q-1>=0?a.charCodeAt(q-1):0;if(X===32&&Q!==32&&Q!==9)continue}if(i&&(!G||G.startOffset>q||G.endOffset<=q))continue;const z=e.visibleRangeForPosition(new be(t,q+1));z&&(o?(H=Math.max(H,z.left),X===9?T+=this._renderArrow(g,_,z.left):T+=`<circle cx="${(z.left+_/2).toFixed(2)}" cy="${(g/2).toFixed(2)}" r="${(_/7).toFixed(2)}" />`):X===9?T+=`<div class="mwh" style="left:${z.left}px;height:${g}px;">${L?"￫":"→"}</div>`:T+=`<div class="mwh" style="left:${z.left}px;height:${g}px;">${String.fromCharCode(k)}</div>`)}return o?(H=Math.round(H+_),`<svg style="bottom:0;position:absolute;width:${H}px;height:${g}px" viewBox="0 0 ${H} ${g}" xmlns="http://www.w3.org/2000/svg" fill="${s}">`+T+"</svg>"):T}_renderArrow(e,t,i){const r=t/7,s=t,o=e/2,a=i,l={x:0,y:r/2},c={x:100/125*s,y:l.y},h={x:c.x-.2*c.x,y:c.y+.2*c.x},u={x:h.x+.1*c.x,y:h.y+.1*c.x},d={x:u.x+.35*c.x,y:u.y-.35*c.x},g={x:d.x,y:-d.y},p={x:u.x,y:-u.y},b={x:h.x,y:-h.y},_={x:c.x,y:-c.y},w={x:l.x,y:-l.y};return`<path d="M ${[l,c,h,u,d,g,p,b,_,w].map(L=>`${(a+L.x).toFixed(2)} ${(o+L.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class Dj{constructor(e){const t=e.options,i=t.get(50),r=t.get(38);r==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):r==="svg"?(this.renderWhitespace=t.get(100),this.renderWithSVG=!0):(this.renderWhitespace=t.get(100),this.renderWithSVG=!1),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(67),this.stopRenderingLineAfter=t.get(118)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}class j5e{constructor(e,t,i,r){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.lineHeight=t.lineHeight|0,this.whitespaceViewportData=i,this._model=r,this.visibleRange=new oe(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class U5e{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class q5e{constructor(e,t,i){this.configuration=e,this.theme=new U5e(t),this.viewModel=i,this.viewLayout=i.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}var G5e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},K5e=function(n,e){return function(t,i){e(t,i,n)}};let zI=class extends jy{constructor(e,t,i,r,s,o,a){super(),this._instantiationService=a,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new $i(1,1,1,1)],this._renderAnimationFrame=null;const l=new t5e(t,r,s,e);this._context=new q5e(t,i,r),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(MI,this._context,l,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=bi(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=bi(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=bi(document.createElement("div")),_c.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new u5e(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new BI(this._context,this._linesContent),this._viewZones=new H5e(this._context),this._viewParts.push(this._viewZones);const c=new M5e(this._context);this._viewParts.push(c);const h=new O5e(this._context);this._viewParts.push(h);const u=new n5e(this._context);this._viewParts.push(u),u.addDynamicOverlay(new l5e(this._context)),u.addDynamicOverlay(new FI(this._context)),u.addDynamicOverlay(new _5e(this._context)),u.addDynamicOverlay(new h5e(this._context)),u.addDynamicOverlay(new $5e(this._context));const d=new r5e(this._context);this._viewParts.push(d),d.addDynamicOverlay(new c5e(this._context)),d.addDynamicOverlay(new S5e(this._context)),d.addDynamicOverlay(new C5e(this._context)),d.addDynamicOverlay(new Vk(this._context)),this._glyphMarginWidgets=new g5e(this._context),this._viewParts.push(this._glyphMarginWidgets);const g=new $k(this._context);g.getDomNode().appendChild(this._viewZones.marginDomNode),g.getDomNode().appendChild(d.getDomNode()),g.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(g),this._contentWidgets=new o5e(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new WI(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new I5e(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);const p=new P5e(this._context);this._viewParts.push(p);const b=new s5e(this._context);this._viewParts.push(b);const _=new E5e(this._context);if(this._viewParts.push(_),c){const w=this._scrollbar.getOverviewRulerLayoutInfo();w.parent.insertBefore(c.getDomNode(),w.insertBefore)}this._linesContent.appendChild(u.getDomNode()),this._linesContent.appendChild(p.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(g.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(h.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(_.getDomNode()),this._overflowGuardContainer.appendChild(b.domNode),this.domNode.appendChild(this._overflowGuardContainer),o?(o.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),o.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new CLe(this._context,l,this._createPointerHandlerHelper()))}_computeGlyphMarginLanes(){const e=this._context.viewModel.model,t=this._context.viewModel.glyphLanes;let i=[],r=0;i=i.concat(e.getAllMarginDecorations().map(s=>{const o=s.options.glyphMargin?.position??ff.Center;return r=Math.max(r,s.range.endLineNumber),{range:s.range,lane:o,persist:s.options.glyphMargin?.persistLane}})),i=i.concat(this._glyphMarginWidgets.getWidgets().map(s=>{const o=e.validateRange(s.preference.range);return r=Math.max(r,o.endLineNumber),{range:o,lane:s.preference.lane}})),i.sort((s,o)=>oe.compareRangesUsingStarts(s.range,o.range)),t.reset(r);for(const s of i)t.push(s.lane,s.range,s.persist);return t}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new hLe(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new be(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(146);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(143)+" "+k8(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){if(this._store.isDisposed)throw new Ti;if(this._renderAnimationFrame===null){const e=this._createCoordinatedRendering();this._renderAnimationFrame=HI.INSTANCE.scheduleCoordinatedRendering({window:lt(this.domNode?.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new Ti;try{return e.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new Ti;return e.renderText()},prepareRender:(t,i)=>{if(this._store.isDisposed)throw new Ti;return e.prepareRender(t,i)},render:(t,i)=>{if(this._store.isDisposed)throw new Ti;return e.render(t,i)}})}}_flushAccumulatedAndRenderNow(){const e=this._createCoordinatedRendering();Zd(()=>e.prepareRenderText());const t=Zd(()=>e.renderText());if(t){const[i,r]=t;Zd(()=>e.prepareRender(i,r)),Zd(()=>e.render(i,r))}}_getViewPartsToRender(){const e=[];let t=0;for(const i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;const e=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(e.requiredLanes)}Yd.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return null;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const i=new j5e(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender()),[e,new nLe(this._context.viewLayout,i,this._viewLines)]},prepareRender:(e,t)=>{for(const i of e)i.prepareRender(t)},render:(e,t)=>{for(const i of e)i.render(t),i.onDidRender()}}}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const i=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),r=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();const s=this._viewLines.visibleRangeForPosition(new be(r.lineNumber,r.column));return s?s.left:-1}getTargetAtClientPoint(e,t){const i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?Z5.convertViewToModelMouseTarget(i,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new R5e(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const i of this._viewParts)i.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){this._contentWidgets.setWidgetPosition(e.widget,e.position?.position??null,e.position?.secondaryPosition??null,e.position?.preference??null,e.position?.positionAffinity??null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){this._overlayWidgets.setWidgetPosition(e.widget,e.position)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){const t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};zI=G5e([K5e(6,Ni)],zI);function Zd(n){try{return n()}catch(e){return Wi(e),null}}const OL=class OL{constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(e){return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:()=>{const t=this._coordinatedRenderings.indexOf(e);if(t!==-1&&(this._coordinatedRenderings.splice(t,1),this._coordinatedRenderings.length===0)){for(const[i,r]of this._animationFrameRunners)r.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(e){if(!this._animationFrameRunners.has(e)){const t=()=>{this._animationFrameRunners.delete(e),this._onRenderScheduled()};this._animationFrameRunners.set(e,bY(e,t,100))}}_onRenderScheduled(){const e=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(const i of e)Zd(()=>i.prepareRenderText());const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t[i]=Zd(()=>s.renderText())}for(let i=0,r=e.length;i<r;i++){const s=e[i],o=t[i];if(!o)continue;const[a,l]=o;Zd(()=>s.prepareRender(a,l))}for(let i=0,r=e.length;i<r;i++){const s=e[i],o=t[i];if(!o)continue;const[a,l]=o;Zd(()=>s.render(a,l))}}};OL.INSTANCE=new OL;let HI=OL;class Pv{constructor(e,t,i,r,s){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=i,this.breakOffsetsVisibleColumn=r,this.wrappedTextIndentLength=s}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let r=this.breakOffsets[e]-t;return e>0&&(r+=this.wrappedTextIndentLength),r}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let r=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&r>this.injectionOffsets[s];s++)r<this.injectionOffsets[s]+this.injectionOptions[s].content.length?r=this.injectionOffsets[s]:r-=this.injectionOptions[s].content.length;return r}translateToOutputPosition(e,t=2){let i=e;if(this.injectionOffsets!==null)for(let r=0;r<this.injectionOffsets.length&&!(e<this.injectionOffsets[r]||t!==1&&e===this.injectionOffsets[r]);r++)i+=this.injectionOptions[r].content.length;return this.offsetInInputWithInjectionsToOutputPosition(i,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let i=0,r=this.breakOffsets.length-1,s=0,o=0;for(;i<=r;){s=i+(r-i)/2|0;const l=this.breakOffsets[s];if(o=s>0?this.breakOffsets[s-1]:0,t===0)if(e<=o)r=s-1;else if(e>l)i=s+1;else break;else if(e<o)r=s-1;else if(e>=l)i=s+1;else break}let a=e-o;return s>0&&(a+=this.wrappedTextIndentLength),new J2(s,a)}normalizeOutputPosition(e,t,i){if(this.injectionOffsets!==null){const r=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.normalizeOffsetInInputWithInjectionsAroundInjections(r,i);if(s!==r)return this.offsetInInputWithInjectionsToOutputPosition(s,i)}if(i===0){if(e>0&&t===this.getMinOutputOffset(e))return new J2(e-1,this.getMaxOutputOffset(e-1))}else if(i===1){const r=this.getOutputLineCount()-1;if(e<r&&t===this.getMaxOutputOffset(e))return new J2(e+1,this.getMinOutputOffset(e+1))}return new J2(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const i=this.getInjectedTextAtOffset(e);if(!i)return e;if(t===2){if(e===i.offsetInInputWithInjections+i.length&&Ej(this.injectionOptions[i.injectedTextIndex].cursorStops))return i.offsetInInputWithInjections+i.length;{let r=i.offsetInInputWithInjections;if(Ij(this.injectionOptions[i.injectedTextIndex].cursorStops))return r;let s=i.injectedTextIndex-1;for(;s>=0&&this.injectionOffsets[s]===this.injectionOffsets[i.injectedTextIndex]&&!(Ej(this.injectionOptions[s].cursorStops)||(r-=this.injectionOptions[s].content.length,Ij(this.injectionOptions[s].cursorStops)));)s--;return r}}else if(t===1||t===4){let r=i.offsetInInputWithInjections+i.length,s=i.injectedTextIndex;for(;s+1<this.injectionOffsets.length&&this.injectionOffsets[s+1]===this.injectionOffsets[s];)r+=this.injectionOptions[s+1].content.length,s++;return r}else if(t===0||t===3){let r=i.offsetInInputWithInjections,s=i.injectedTextIndex;for(;s-1>=0&&this.injectionOffsets[s-1]===this.injectionOffsets[s];)r-=this.injectionOptions[s-1].content.length,s--;return r}mA()}getInjectedText(e,t){const i=this.outputPositionToOffsetInInputWithInjections(e,t),r=this.getInjectedTextAtOffset(i);return r?{options:this.injectionOptions[r.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,i=this.injectionOptions;if(t!==null){let r=0;for(let s=0;s<t.length;s++){const o=i[s].content.length,a=t[s]+r,l=t[s]+r+o;if(a>e)break;if(e<=l)return{injectedTextIndex:s,offsetInInputWithInjections:a,length:o};r+=o}}}}function Ej(n){return n==null?!0:n===D1.Right||n===D1.Both}function Ij(n){return n==null?!0:n===D1.Left||n===D1.Both}class J2{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new be(e+this.outputLineIndex,this.outputOffset+1)}}const Y5e=Xm("domLineBreaksComputer",{createHTML:n=>n});class XR{static create(e){return new XR(new WeakRef(e))}constructor(e){this.targetWindow=e}createLineBreaksComputer(e,t,i,r,s){const o=[],a=[];return{addRequest:(l,c,h)=>{o.push(l),a.push(c)},finalize:()=>Z5e(bK(this.targetWindow.deref()),o,e,t,i,r,s,a)}}}function Z5e(n,e,t,i,r,s,o,a){function l(B){const G=a[B];if(G){const H=mc.applyInjectedText(e[B],G),q=G.map(z=>z.options),X=G.map(z=>z.column-1);return new Pv(X,q,[H.length],[],0)}else return null}if(r===-1){const B=[];for(let G=0,H=e.length;G<H;G++)B[G]=l(G);return B}const c=Math.round(r*t.typicalHalfwidthCharacterWidth),u=Math.round(i*(s===3?2:s===2?1:0)),d=Math.ceil(t.spaceWidth*u),g=document.createElement("div");ps(g,t);const p=new g5(1e4),b=[],_=[],w=[],y=[],k=[];for(let B=0;B<e.length;B++){const G=mc.applyInjectedText(e[B],a[B]);let H=0,q=0,X=c;if(s!==0)if(H=qo(G),H===-1)H=0;else{for(let se=0;se<H;se++){const Y=G.charCodeAt(se)===9?i-q%i:1;q+=Y}const te=Math.ceil(t.spaceWidth*q);te+t.typicalFullwidthCharacterWidth>c?(H=0,q=0):X=c-te}const z=G.substr(H),Q=X5e(z,q,i,X,p,d);b[B]=H,_[B]=q,w[B]=z,y[B]=Q[0],k[B]=Q[1]}const L=p.build(),T=Y5e?.createHTML(L)??L;g.innerHTML=T,g.style.position="absolute",g.style.top="10000",o==="keepAll"?(g.style.wordBreak="keep-all",g.style.overflowWrap="anywhere"):(g.style.wordBreak="inherit",g.style.overflowWrap="break-word"),n.document.body.appendChild(g);const N=document.createRange(),D=Array.prototype.slice.call(g.children,0),O=[];for(let B=0;B<e.length;B++){const G=D[B],H=Q5e(N,G,w[B],y[B]);if(H===null){O[B]=l(B);continue}const q=b[B],X=_[B]+u,z=k[B],Q=[];for(let ae=0,fe=H.length;ae<fe;ae++)Q[ae]=z[H[ae]];if(q!==0)for(let ae=0,fe=H.length;ae<fe;ae++)H[ae]+=q;let te,se;const Y=a[B];Y?(te=Y.map(ae=>ae.options),se=Y.map(ae=>ae.column-1)):(te=null,se=null),O[B]=new Pv(se,te,H,Q,X)}return g.remove(),O}function X5e(n,e,t,i,r,s){if(s!==0){const d=String(s);r.appendString('<div style="text-indent: -'),r.appendString(d),r.appendString("px; padding-left: "),r.appendString(d),r.appendString("px; box-sizing: border-box; width:")}else r.appendString('<div style="width:');r.appendString(String(i)),r.appendString('px;">');const o=n.length;let a=e,l=0;const c=[],h=[];let u=0<o?n.charCodeAt(0):0;r.appendString("<span>");for(let d=0;d<o;d++){d!==0&&d%16384===0&&r.appendString("</span><span>"),c[d]=l,h[d]=a;const g=u;u=d+1<o?n.charCodeAt(d+1):0;let p=1,b=1;switch(g){case 9:p=t-a%t,b=p;for(let _=1;_<=p;_++)_<p?r.appendCharCode(160):r.appendASCIICharCode(32);break;case 32:u===32?r.appendCharCode(160):r.appendASCIICharCode(32);break;case 60:r.appendString("&lt;");break;case 62:r.appendString("&gt;");break;case 38:r.appendString("&amp;");break;case 0:r.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:r.appendCharCode(65533);break;default:hf(g)&&b++,g<32?r.appendCharCode(9216+g):r.appendCharCode(g)}l+=p,a+=b}return r.appendString("</span>"),c[n.length]=l,h[n.length]=a,r.appendString("</div>"),[c,h]}function Q5e(n,e,t,i){if(t.length<=1)return null;const r=Array.prototype.slice.call(e.children,0),s=[];try{VI(n,r,i,0,null,t.length-1,null,s)}catch(o){return console.log(o),null}return s.length===0?null:(s.push(t.length),s)}function VI(n,e,t,i,r,s,o,a){if(i===s||(r=r||z6(n,e,t[i],t[i+1]),o=o||z6(n,e,t[s],t[s+1]),Math.abs(r[0].top-o[0].top)<=.1))return;if(i+1===s){a.push(s);return}const l=i+(s-i)/2|0,c=z6(n,e,t[l],t[l+1]);VI(n,e,t,i,r,l,c,a),VI(n,e,t,l,c,s,o,a)}function z6(n,e,t,i){return n.setStart(e[t/16384|0].firstChild,t%16384),n.setEnd(e[i/16384|0].firstChild,i%16384),n.getClientRects()}class J5e extends xe{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new jM),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,i){this._editor=e,this._instantiationService=i;for(const r of t){if(this._pending.has(r.id)){Wi(new Error(`Cannot have two contributions with the same id ${r.id}`));continue}this._pending.set(r.id,r)}this._instantiateSome(0),this._register(y2(lt(this._editor.getDomNode()),()=>{this._instantiateSome(1)})),this._register(y2(lt(this._editor.getDomNode()),()=>{this._instantiateSome(2)})),this._register(y2(lt(this._editor.getDomNode()),()=>{this._instantiateSome(3)},5e3))}saveViewState(){const e={};for(const[t,i]of this._instances)typeof i.saveViewState=="function"&&(e[t]=i.saveViewState());return e}restoreViewState(e){for(const[t,i]of this._instances)typeof i.restoreViewState=="function"&&i.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){return y2(lt(this._editor?.getDomNode()),()=>{this._instantiateSome(1)},50)}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const i of t)this._instantiateById(i.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,i]of this._pending)i.instantiation===e&&t.push(i);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const i=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,i),typeof i.restoreViewState=="function"&&t.instantiation!==0&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(i){Wi(i)}}}}class aJ{constructor(e,t,i,r,s,o,a){this.id=e,this.label=t,this.alias=i,this.metadata=r,this._precondition=s,this._run=o,this._contextKeyService=a}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}class QR{static create(e){return new QR(e.get(135),e.get(134))}constructor(e,t){this.classifier=new e3e(e,t)}createLineBreaksComputer(e,t,i,r,s){const o=[],a=[],l=[];return{addRequest:(c,h,u)=>{o.push(c),a.push(h),l.push(u)},finalize:()=>{const c=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,h=[];for(let u=0,d=o.length;u<d;u++){const g=a[u],p=l[u];p&&!p.injectionOptions&&!g?h[u]=t3e(this.classifier,p,o[u],t,i,c,r,s):h[u]=i3e(this.classifier,o[u],g,t,i,c,r,s)}return $I.length=0,jI.length=0,h}}}}class e3e extends Ey{constructor(e,t){super(0);for(let i=0;i<e.length;i++)this.set(e.charCodeAt(i),1);for(let i=0;i<t.length;i++)this.set(t.charCodeAt(i),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let $I=[],jI=[];function t3e(n,e,t,i,r,s,o,a){if(r===-1)return null;const l=t.length;if(l<=1)return null;const c=a==="keepAll",h=e.breakOffsets,u=e.breakOffsetsVisibleColumn,d=lJ(t,i,r,s,o),g=r-d,p=$I,b=jI;let _=0,w=0,y=0,k=r;const L=h.length;let T=0;if(T>=0){let N=Math.abs(u[T]-k);for(;T+1<L;){const D=Math.abs(u[T+1]-k);if(D>=N)break;N=D,T++}}for(;T<L;){let N=T<0?0:h[T],D=T<0?0:u[T];w>N&&(N=w,D=y);let O=0,B=0,G=0,H=0;if(D<=k){let X=D,z=N===0?0:t.charCodeAt(N-1),Q=N===0?0:n.get(z),te=!0;for(let se=N;se<l;se++){const Y=se,ae=t.charCodeAt(se);let fe,J;if(Lr(ae)?(se++,fe=0,J=2):(fe=n.get(ae),J=Ov(ae,X,i,s)),Y>w&&UI(z,Q,ae,fe,c)&&(O=Y,B=X),X+=J,X>k){Y>w?(G=Y,H=X-J):(G=se+1,H=X),X-B>g&&(O=0),te=!1;break}z=ae,Q=fe}if(te){_>0&&(p[_]=h[h.length-1],b[_]=u[h.length-1],_++);break}}if(O===0){let X=D,z=t.charCodeAt(N),Q=n.get(z),te=!1;for(let se=N-1;se>=w;se--){const Y=se+1,ae=t.charCodeAt(se);if(ae===9){te=!0;break}let fe,J;if(S1(ae)?(se--,fe=0,J=2):(fe=n.get(ae),J=hf(ae)?s:1),X<=k){if(G===0&&(G=Y,H=X),X<=k-g)break;if(UI(ae,fe,z,Q,c)){O=Y,B=X;break}}X-=J,z=ae,Q=fe}if(O!==0){const se=g-(H-B);if(se<=i){const Y=t.charCodeAt(G);let ae;Lr(Y)?ae=2:ae=Ov(Y,H,i,s),se-ae<0&&(O=0)}}if(te){T--;continue}}if(O===0&&(O=G,B=H),O<=w){const X=t.charCodeAt(w);Lr(X)?(O=w+2,B=y+2):(O=w+1,B=y+Ov(X,y,i,s))}for(w=O,p[_]=O,y=B,b[_]=B,_++,k=B+g;T<0||T<L&&u[T]<B;)T++;let q=Math.abs(u[T]-k);for(;T+1<L;){const X=Math.abs(u[T+1]-k);if(X>=q)break;q=X,T++}}return _===0?null:(p.length=_,b.length=_,$I=e.breakOffsets,jI=e.breakOffsetsVisibleColumn,e.breakOffsets=p,e.breakOffsetsVisibleColumn=b,e.wrappedTextIndentLength=d,e)}function i3e(n,e,t,i,r,s,o,a){const l=mc.applyInjectedText(e,t);let c,h;if(t&&t.length>0?(c=t.map(B=>B.options),h=t.map(B=>B.column-1)):(c=null,h=null),r===-1)return c?new Pv(h,c,[l.length],[],0):null;const u=l.length;if(u<=1)return c?new Pv(h,c,[l.length],[],0):null;const d=a==="keepAll",g=lJ(l,i,r,s,o),p=r-g,b=[],_=[];let w=0,y=0,k=0,L=r,T=l.charCodeAt(0),N=n.get(T),D=Ov(T,0,i,s),O=1;Lr(T)&&(D+=1,T=l.charCodeAt(1),N=n.get(T),O++);for(let B=O;B<u;B++){const G=B,H=l.charCodeAt(B);let q,X;Lr(H)?(B++,q=0,X=2):(q=n.get(H),X=Ov(H,D,i,s)),UI(T,N,H,q,d)&&(y=G,k=D),D+=X,D>L&&((y===0||D-k>p)&&(y=G,k=D-X),b[w]=y,_[w]=k,w++,L=k+p,y=0),T=H,N=q}return w===0&&(!t||t.length===0)?null:(b[w]=u,_[w]=D,new Pv(h,c,b,_,g))}function Ov(n,e,t,i){return n===9?t-e%t:hf(n)||n<32?i:1}function Nj(n,e){return e-n%e}function UI(n,e,t,i,r){return t!==32&&(e===2&&i!==2||e!==1&&i===1||!r&&e===3&&i!==2||!r&&i===3&&e!==1)}function lJ(n,e,t,i,r){let s=0;if(r!==0){const o=qo(n);if(o!==-1){for(let l=0;l<o;l++){const c=n.charCodeAt(l)===9?Nj(s,e):1;s+=c}const a=r===3?2:r===2?1:0;for(let l=0;l<a;l++){const c=Nj(s,e);s+=c}s+i>t&&(s=0)}}return s}class Zk{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new Fr(new oe(1,1,1,1),0,0,new be(1,1),0),new Fr(new oe(1,1,1,1),0,0,new be(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new ei(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?$i.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):$i.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,i){this._setState(e,t,i)}static _validatePositionWithCache(e,t,i,r){return t.equals(i)?r:e.normalizePosition(t,2)}static _validateViewState(e,t){const i=t.position,r=t.selectionStart.getStartPosition(),s=t.selectionStart.getEndPosition(),o=e.normalizePosition(i,2),a=this._validatePositionWithCache(e,r,i,o),l=this._validatePositionWithCache(e,s,r,a);return i.equals(o)&&r.equals(a)&&s.equals(l)?t:new Fr(oe.fromPositions(a,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+r.column-a.column,o,t.leftoverVisibleColumns+i.column-o.column)}_setState(e,t,i){if(i&&(i=Zk._validateViewState(e.viewModel,i)),t){const r=e.model.validateRange(t.selectionStart),s=t.selectionStart.equalsRange(r)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),a=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new Fr(r,t.selectionStartKind,s,o,a)}else{if(!i)return;const r=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(i.selectionStart)),s=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(i.position));t=new Fr(r,i.selectionStartKind,i.selectionStartLeftoverVisibleColumns,s,i.leftoverVisibleColumns)}if(i){const r=e.coordinatesConverter.validateViewRange(i.selectionStart,t.selectionStart),s=e.coordinatesConverter.validateViewPosition(i.position,t.position);i=new Fr(r,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,s,t.leftoverVisibleColumns)}else{const r=e.coordinatesConverter.convertModelPositionToViewPosition(new be(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),s=e.coordinatesConverter.convertModelPositionToViewPosition(new be(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),o=new oe(r.lineNumber,r.column,s.lineNumber,s.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);i=new Fr(o,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=i,this._updateTrackedRange(e)}}class Mj{constructor(e){this.context=e,this.cursors=[new Zk(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return Gpe(this.cursors,_l(e=>e.viewState.position,be.compare)).viewState.position}getBottomMostViewPosition(){return qpe(this.cursors,_l(e=>e.viewState.position,be.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(ei.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,i=e.length;if(t<i){const r=i-t;for(let s=0;s<r;s++)this._addSecondaryCursor()}else if(t>i){const r=t-i;for(let s=0;s<r;s++)this._removeSecondaryCursor(this.cursors.length-2)}for(let r=0;r<i;r++)this.cursors[r+1].setState(this.context,e[r].modelState,e[r].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new Zk(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let i=0,r=e.length;i<r;i++)t.push({index:i,selection:e[i].modelState.selection});t.sort(_l(i=>i.selection,oe.compareRangesUsingStarts));for(let i=0;i<t.length-1;i++){const r=t[i],s=t[i+1],o=r.selection,a=s.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||o.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(o.getEndPosition()):l=a.getStartPosition().isBefore(o.getEndPosition()),l){const c=r.index<s.index?i:i+1,h=r.index<s.index?i+1:i,u=t[h].index,d=t[c].index,g=t[h].selection,p=t[c].selection;if(!g.equalsSelection(p)){const b=g.plusRange(p),_=g.selectionStartLineNumber===g.startLineNumber&&g.selectionStartColumn===g.startColumn,w=p.selectionStartLineNumber===p.startLineNumber&&p.selectionStartColumn===p.startColumn;let y;u===this.lastAddedCursorIndex?(y=_,this.lastAddedCursorIndex=d):y=w;let k;y?k=new $i(b.startLineNumber,b.startColumn,b.endLineNumber,b.endColumn):k=new $i(b.endLineNumber,b.endColumn,b.startLineNumber,b.startColumn),t[c].selection=k;const L=ei.fromModelSelection(k);e[d].setState(this.context,L.modelState,L.viewState)}for(const b of t)b.index>u&&b.index--;e.splice(u,1),t.splice(h,1),this._removeSecondaryCursor(u-1),i--}}}}class Aj{constructor(e,t,i,r){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=i,this.cursorConfig=r}}class n3e{constructor(){this.type=0}}class r3e{constructor(){this.type=1}}class s3e{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class o3e{constructor(e,t,i){this.selections=e,this.modelSelections=t,this.reason=i,this.type=3}}class ng{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin,this.affectsLineNumber=e.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}class eS{constructor(){this.type=5}}class a3e{constructor(e){this.type=6,this.isFocused=e}}class l3e{constructor(){this.type=7}}class tS{constructor(){this.type=8}}class cJ{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class qI{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class GI{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class Bv{constructor(e,t,i,r,s,o,a){this.source=e,this.minimalReveal=t,this.range=i,this.selections=r,this.verticalType=s,this.revealHorizontal=o,this.scrollType=a,this.type=12}}class c3e{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class h3e{constructor(e){this.theme=e,this.type=14}}class u3e{constructor(e){this.type=15,this.ranges=e}}class d3e{constructor(){this.type=16}}let f3e=class{constructor(){this.type=17}};class g3e extends xe{constructor(){super(),this._onEvent=this._register(new de),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,i=this._outgoingEvents.length;t<i;t++){const r=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(r){this._outgoingEvents[t]=r;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,i=this._eventHandlers.length;t<i;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new m3e),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const i of e)this._addOutgoingEvent(i);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const i of t)i.handleEvents(e)}}}class m3e{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class JR{constructor(e,t,i,r){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=i,this.contentHeight=r,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new JR(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class eP{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new eP(this.oldHasFocus,e.hasFocus)}}class tP{constructor(e,t,i,r,s,o,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=i,this._oldScrollTop=r,this.scrollWidth=s,this.scrollLeft=o,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new tP(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class p3e{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class b3e{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class Xk{constructor(e,t,i,r,s,o,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=i,this.modelVersionId=r,this.source=s,this.reason=o,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const i=e.length,r=t.length;if(i!==r)return!1;for(let s=0;s<i;s++)if(!e[s].equalsSelection(t[s]))return!1;return!0}isNoOp(){return Xk._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new Xk(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class _3e{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class v3e{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class w3e{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class y3e{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class C3e{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class S3e{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class x3e{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class k3e extends xe{constructor(e,t,i,r){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=i,this.context=new Aj(this._model,this._viewModel,this._coordinatesConverter,r),this._cursors=new Mj(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=is(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new Aj(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const i=this._autoClosedActions[t];i.isValid(e)||(i.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,i,r){let s=!1;const o=this.context.cursorConfig.multiCursorLimit;r!==null&&r.length>o&&(r=r.slice(0,o),s=!0);const a=Fv.from(this._model,this);return this._cursors.setStates(r),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,i,a,s)}setCursorColumnSelectData(e){this._columnSelectData=e}revealAll(e,t,i,r,s,o){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=oe.fromPositions(a[0],a[0]),e.emitViewEvent(new Bv(t,i,l,c,r,s,o))}revealPrimary(e,t,i,r,s,o){const l=[this._cursors.getPrimaryCursor().viewState.selection];e.emitViewEvent(new Bv(t,i,null,l,r,s,o))}saveState(){const e=[],t=this._cursors.getSelections();for(let i=0,r=t.length;i<r;i++){const s=t[i];e.push({inSelectionMode:!s.isEmpty(),selectionStart:{lineNumber:s.selectionStartLineNumber,column:s.selectionStartColumn},position:{lineNumber:s.positionLineNumber,column:s.positionColumn}})}return e}restoreState(e,t){const i=[];for(let r=0,s=t.length;r<s;r++){const o=t[r];let a=1,l=1;o.position&&o.position.lineNumber&&(a=o.position.lineNumber),o.position&&o.position.column&&(l=o.position.column);let c=a,h=l;o.selectionStart&&o.selectionStart.lineNumber&&(c=o.selectionStart.lineNumber),o.selectionStart&&o.selectionStart.column&&(h=o.selectionStart.column),i.push({selectionStartLineNumber:c,selectionStartColumn:h,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,ei.fromModelSelections(i)),this.revealAll(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof nQ){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const i=t.rawContentChangedEvent;if(this._knownModelVersionId=i.versionId,this._isHandling)return;const r=i.containsEvent(1);if(this._prevEditOperationType=0,r)this._cursors.dispose(),this._cursors=new Mj(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&i.resultingSelection&&i.resultingSelection.length>0){const s=ei.fromModelSelections(i.resultingSelection);this.setStates(e,"modelChange",i.isUndoing?5:i.isRedoing?6:2,s)&&this.revealAll(e,"modelChange",!1,0,!0,0)}else{const s=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,ei.fromModelSelections(s))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),i=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:i.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,i)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,i,r){this.setStates(e,t,r,ei.fromModelSelections(i))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const i=[],r=[];for(let a=0,l=e.length;a<l;a++)i.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),r.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const s=this._model.deltaDecorations([],i),o=this._model.deltaDecorations([],r);this._autoClosedActions.push(new Rj(this._model,s,o))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=L3e.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const i=[],r=[];for(let s=0;s<e.commands.length;s++){const o=e.commands[s];o instanceof GR&&o.enclosingRange&&o.closeCharacterRange&&(i.push(o.closeCharacterRange),r.push(o.enclosingRange))}i.length>0&&this._pushAutoClosedAction(i,r),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,i,r,s){const o=Fv.from(this._model,this);if(o.equals(r))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new o3e(l,a,i)),!r||r.cursorState.length!==o.cursorState.length||o.cursorState.some((c,h)=>!c.modelState.equals(r.cursorState[h].modelState))){const c=r?r.cursorState.map(u=>u.modelState.selection):null,h=r?r.modelVersionId:0;e.emitOutgoingEvent(new Xk(c,a,h,o.modelVersionId,t||"keyboard",i,s))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];if(!s.text||s.text.indexOf(`
`)>=0)return null;const o=s.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;const a=o[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,h=s.text.length-o[2].length-1,u=s.text.lastIndexOf(c,h-1);if(u===-1)return null;t.push([u,h])}return t}executeEdits(e,t,i,r){let s=null;t==="snippet"&&(s=this._findAutoClosingPairs(i)),s&&(i[0]._isTracked=!0);const o=[],a=[],l=this._model.pushEditOperations(this.getSelections(),i,c=>{if(s)for(let u=0,d=s.length;u<d;u++){const[g,p]=s[u],b=c[u],_=b.range.startLineNumber,w=b.range.startColumn-1+g,y=b.range.startColumn-1+p;o.push(new oe(_,y+1,_,y+2)),a.push(new oe(_,w+1,_,y+2))}const h=r(c);return h&&(this._isHandling=!0),h});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),o.length>0&&this._pushAutoClosedAction(o,a)}_executeEdit(e,t,i,r=0){if(this.context.cursorConfig.readOnly)return;const s=Fv.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(o){Wi(o)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,i,r,s,!1)&&this.revealAll(t,i,!1,0,!0,0)}getAutoClosedCharacters(){return Rj.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new Wv(this._model,this.getSelections())}endComposition(e,t){const i=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(Pg.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,i,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,i){this._executeEdit(()=>{if(i==="keyboard"){const r=t.length;let s=0;for(;s<r;){const o=JM(t,s),a=t.substr(s,o);this._executeEditOperation(Pg.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),s+=o}}else this._executeEditOperation(Pg.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,i)}compositionType(e,t,i,r,s,o){if(t.length===0&&i===0&&r===0){if(s!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new $i(c.lineNumber,c.column+s,c.lineNumber,c.column+s)});this.setSelections(e,o,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(Pg.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,i,r,s))},e,o)}paste(e,t,i,r,s){this._executeEdit(()=>{this._executeEditOperation(Pg.paste(this.context.cursorConfig,this._model,this.getSelections(),t,i,r||[]))},e,s,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(Mm.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,i){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Co(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}executeCommands(e,t,i){this._executeEdit(()=>{this._executeEditOperation(new Co(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}}class Fv{static from(e,t){return new Fv(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,i=this.cursorState.length;t<i;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class Rj{static getAllAutoClosedCharacters(e){let t=[];for(const i of e)t=t.concat(i.getAutoClosedCharactersRanges());return t}constructor(e,t,i){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=i}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const i=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);i&&e.push(i)}return e}isValid(e){const t=[];for(let i=0;i<this._autoClosedEnclosingDecorations.length;i++){const r=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[i]);if(r&&(t.push(r),r.startLineNumber!==r.endLineNumber))return!1}t.sort(oe.compareRangesUsingStarts),e.sort(oe.compareRangesUsingStarts);for(let i=0;i<e.length;i++)if(i>=t.length||!t[i].strictContainsRange(e[i]))return!1;return!0}}class L3e{static executeCommands(e,t,i){const r={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},s=this._innerExecuteCommands(r,i);for(let o=0,a=r.trackedRanges.length;o<a;o++)r.model._setTrackedRange(r.trackedRanges[o],null,0);return s}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const i=this._getEditOperations(e,t);if(i.operations.length===0)return null;const r=i.operations,s=this._getLoserCursorMap(r);if(s.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const o=[];for(let c=0,h=r.length;c<h;c++)s.hasOwnProperty(r[c].identifier.major.toString())||o.push(r[c]);i.hadTrackedEditOperation&&o.length>0&&(o[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,o,c=>{const h=[];for(let g=0;g<e.selectionsBefore.length;g++)h[g]=[];for(const g of c)g.identifier&&h[g.identifier.major].push(g);const u=(g,p)=>g.identifier.minor-p.identifier.minor,d=[];for(let g=0;g<e.selectionsBefore.length;g++)h[g].length>0?(h[g].sort(u),d[g]=t[g].computeCursorState(e.model,{getInverseEditOperations:()=>h[g],getTrackedSelection:p=>{const b=parseInt(p,10),_=e.model._getTrackedRange(e.trackedRanges[b]);return e.trackedRangesDirection[b]===0?new $i(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn):new $i(_.endLineNumber,_.endColumn,_.startLineNumber,_.startColumn)}})):d[g]=e.selectionsBefore[g];return d});a||(a=e.selectionsBefore);const l=[];for(const c in s)s.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,h)=>h-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,i=e.length;t<i;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let i=[],r=!1;for(let s=0,o=t.length;s<o;s++){const a=t[s];if(a){const l=this._getEditOperationsFromCommand(e,s,a);i=i.concat(l.operations),r=r||l.hadTrackedEditOperation}}return{operations:i,hadTrackedEditOperation:r}}static _getEditOperationsFromCommand(e,t,i){const r=[];let s=0;const o=(u,d,g=!1)=>{oe.isEmpty(u)&&d===""||r.push({identifier:{major:t,minor:s++},range:u,text:d,forceMoveMarkers:g,isAutoWhitespaceEdit:i.insertsAutoWhitespace})};let a=!1;const h={addEditOperation:o,addTrackedEditOperation:(u,d,g)=>{a=!0,o(u,d,g)},trackSelection:(u,d)=>{const g=$i.liftSelection(u);let p;if(g.isEmpty())if(typeof d=="boolean")d?p=2:p=3;else{const w=e.model.getLineMaxColumn(g.startLineNumber);g.startColumn===w?p=2:p=3}else p=1;const b=e.trackedRanges.length,_=e.model._setTrackedRange(null,g,p);return e.trackedRanges[b]=_,e.trackedRangesDirection[b]=g.getDirection(),b.toString()}};try{i.getEditOperations(e.model,h)}catch(u){return Wi(u),{operations:[],hadTrackedEditOperation:!1}}return{operations:r,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((i,r)=>-oe.compareRangesUsingEnds(i.range,r.range));const t={};for(let i=1;i<e.length;i++){const r=e[i-1],s=e[i];if(oe.getStartPosition(r.range).isBefore(oe.getEndPosition(s.range))){let o;r.identifier.major>s.identifier.major?o=r.identifier.major:o=s.identifier.major,t[o.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===o&&(e.splice(a,1),a<i&&i--,a--);i>0&&i--}}return t}}class T3e{constructor(e,t,i){this.text=e,this.startSelection=t,this.endSelection=i}}class Wv{static _capture(e,t){const i=[];for(const r of t){if(r.startLineNumber!==r.endLineNumber)return null;i.push(new T3e(e.getLineContent(r.startLineNumber),r.startColumn-1,r.endColumn-1))}return i}constructor(e,t){this._original=Wv._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const i=Wv._capture(e,t);if(!i||this._original.length!==i.length)return null;const r=[];for(let s=0,o=this._original.length;s<o;s++)r.push(Wv._deduceOutcome(this._original[s],i[s]));return r}static _deduceOutcome(e,t){const i=Math.min(e.startSelection,t.startSelection,VE(e.text,t.text)),r=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,$E(e.text,t.text)),s=e.text.substring(i,e.text.length-r),o=t.text.substring(i,t.text.length-r);return new JLe(s,e.startSelection-i,e.endSelection-i,o,t.startSelection-i,t.endSelection-i)}}class D3e{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,i=this._changes,r=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,i,r)}}class E3e{constructor(e,t,i,r,s){this.id=e,this.afterLineNumber=t,this.ordinal=i,this.height=r,this.minWidth=s,this.prefixSum=0}}var lf;let I3e=(lf=class{constructor(e,t,i,r){this._instanceId=XK(++lf.INSTANCE_COUNT),this._pendingChanges=new D3e,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=i,this._paddingBottom=r}static findInsertionIndex(e,t,i){let r=0,s=e.length;for(;r<s;){const o=r+s>>>1;t===e[o].afterLineNumber?i<e[o].ordinal?s=o:r=o+1:t<e[o].afterLineNumber?s=o:r=o+1}return r}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(r,s,o,a)=>{t=!0,r=r|0,s=s|0,o=o|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new E3e(l,r,s,o,a)),l},changeOneWhitespace:(r,s,o)=>{t=!0,s=s|0,o=o|0,this._pendingChanges.change({id:r,newAfterLineNumber:s,newHeight:o})},removeWhitespace:r=>{t=!0,this._pendingChanges.remove({id:r})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,i){if((e.length>0||i.length>0)&&(this._minWidth=-1),e.length+t.length+i.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of i){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const r=new Set;for(const l of i)r.add(l.id);const s=new Map;for(const l of t)s.set(l.id,l);const o=l=>{const c=[];for(const h of l)if(!r.has(h.id)){if(s.has(h.id)){const u=s.get(h.id);h.afterLineNumber=u.newAfterLineNumber,h.height=u.newHeight}c.push(h)}return c},a=o(this._arr).concat(o(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=lf.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let i=0,r=t.length;i<r;i++)if(t[i].id===e)return i;return-1}_changeOneWhitespace(e,t,i){const r=this._findWhitespaceIndex(e);if(r!==-1&&(this._arr[r].height!==i&&(this._arr[r].height=i,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,r-1)),this._arr[r].afterLineNumber!==t)){const s=this._arr[r];this._removeWhitespace(r),s.afterLineNumber=t,this._insertWhitespace(s)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let i=0,r=this._arr.length;i<r;i++){const s=this._arr[i].afterLineNumber;e<=s&&s<=t?this._arr[i].afterLineNumber=e-1:s>t&&(this._arr[i].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let i=0,r=this._arr.length;i<r;i++){const s=this._arr[i].afterLineNumber;e<=s&&(this._arr[i].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let i=t;i<=e;i++)this._arr[i].prefixSum=this._arr[i-1].prefixSum+this._arr[i].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let i=0,r=t.length-1;for(;i<=r;){const o=(r-i|0)/2|0,a=i+o|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;i=a+1|0}else r=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const i=this._findLastWhitespaceBeforeLineNumber(e)+1;return i<this._arr.length?i:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let i;e>1?i=this._lineHeight*(e-1):i=0;const r=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return i+r+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const i=this._lineHeight*e,r=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return i+r+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,i=this._arr.length;t<i;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,i=this._lineHeight;let r=1,s=t;for(;r<s;){const o=(r+s)/2|0,a=this.getVerticalOffsetForLineNumber(o)|0;if(e>=a+i)r=o+1;else{if(e>=a)return o;s=o}}return r>t?t:r}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this._lineHeight,r=this.getLineNumberAtOrAfterVerticalOffset(e)|0,s=this.getVerticalOffsetForLineNumber(r)|0;let o=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(r)|0;const l=this.getWhitespacesCount()|0;let c,h;a===-1?(a=l,h=o+1,c=0):(h=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let u=s,d=u;const g=5e5;let p=0;s>=g&&(p=Math.floor(s/g)*g,p=Math.floor(p/i)*i,d-=p);const b=[],_=e+(t-e)/2;let w=-1;for(let T=r;T<=o;T++){if(w===-1){const N=u,D=u+i;(N<=_&&_<D||N>_)&&(w=T)}for(u+=i,b[T-r]=d,d+=i;h===T;)d+=c,u+=c,a++,a>=l?h=o+1:(h=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(u>=t){o=T;break}}w===-1&&(w=o);const y=this.getVerticalOffsetForLineNumber(o)|0;let k=r,L=o;return k<L&&s<e&&k++,k<L&&y+i>t&&L--,{bigNumbersDelta:p,startLineNumber:r,endLineNumber:o,relativeVerticalOffset:b,centeredLineNumber:w,completelyVisibleStartLineNumber:k,completelyVisibleEndLineNumber:L,lineHeight:this._lineHeight}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let i;t>=1?i=this._lineHeight*t:i=0;let r;return e>0?r=this.getWhitespacesAccumulatedHeight(e-1):r=0,i+r+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,i=this.getWhitespacesCount()-1;if(i<0)return-1;const r=this.getVerticalOffsetForWhitespaceIndex(i),s=this.getHeightForWhitespaceIndex(i);if(e>=r+s)return-1;for(;t<i;){const o=Math.floor((t+i)/2),a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(e>=a+l)t=o+1;else{if(e>=a)return o;i=o}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const i=this.getVerticalOffsetForWhitespaceIndex(t);if(i>e)return null;const r=this.getHeightForWhitespaceIndex(t),s=this.getIdForWhitespaceIndex(t),o=this.getAfterLineNumberForWhitespaceIndex(t);return{id:s,afterLineNumber:o,verticalOffset:i,height:r}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),r=this.getWhitespacesCount()-1;if(i<0)return[];const s=[];for(let o=i;o<=r;o++){const a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(a>=t)break;s.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:a,height:l})}return s}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}},lf.INSTANCE_COUNT=0,lf);const N3e=125;class Z_{constructor(e,t,i,r){e=e|0,t=t|0,i=i|0,r=r|0,e<0&&(e=0),t<0&&(t=0),i<0&&(i=0),r<0&&(r=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=i,this.contentHeight=r,this.scrollHeight=Math.max(i,r)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class M3e extends xe{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new de),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new Z_(0,0,0,0),this._scrollable=this._register(new sb({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const i=t.contentWidth!==e.contentWidth,r=t.contentHeight!==e.contentHeight;(i||r)&&this._onDidContentSizeChange.fire(new JR(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class A3e extends xe{constructor(e,t,i){super(),this._configuration=e;const r=this._configuration.options,s=r.get(146),o=r.get(84);this._linesLayout=new I3e(t,r.get(67),o.top,o.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new M3e(0,i)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new Z_(s.contentWidth,0,s.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(115)?N3e:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(67)&&this._linesLayout.setLineHeight(t.get(67)),e.hasChanged(84)){const i=t.get(84);this._linesLayout.setPadding(i.top,i.bottom)}if(e.hasChanged(146)){const i=t.get(146),r=i.contentWidth,s=i.height,o=this._scrollable.getScrollDimensions(),a=o.contentWidth;this._scrollable.setScrollDimensions(new Z_(r,o.contentWidth,s,this._getContentHeight(r,s,a)))}else this._updateHeight();e.hasChanged(115)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const r=this._configuration.options.get(104);return r.horizontal===2||e>=t?0:r.horizontalScrollbarSize}_getContentHeight(e,t,i){const r=this._configuration.options;let s=this._linesLayout.getLinesTotalHeight();return r.get(106)?s+=Math.max(0,t-r.get(67)-r.get(84).bottom):r.get(104).ignoreHorizontalScrollbarInContentHeight||(s+=this._getHorizontalScrollbarHeight(e,i)),s}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,i=e.height,r=e.contentWidth;this._scrollable.setScrollDimensions(new Z_(t,e.contentWidth,i,this._getContentHeight(t,i,r)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new nj(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new nj(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,i=e.get(147),r=e.get(50),s=e.get(146);if(i.isViewportWrapping){const o=e.get(73);return t>s.contentWidth+r.typicalHalfwidthCharacterWidth&&o.enabled&&o.side==="right"?t+s.verticalScrollbarWidth:t}else{const o=e.get(105)*r.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+o+s.verticalScrollbarWidth,a,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new Z_(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,i=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),r=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(i);return{scrollTop:t,scrollTopWithoutViewZones:t-r,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const i=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:i.scrollLeft+e,scrollTop:i.scrollTop+t})}}class R3e{constructor(e,t,i,r,s){this.editorId=e,this.model=t,this.configuration=i,this._linesCollection=r,this._coordinatesConverter=s,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let i=this._decorationsCache[t];if(!i){const r=e.range,s=e.options;let o;if(s.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new be(r.startLineNumber,1),0,!1,!0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new be(r.endLineNumber,this.model.getLineMaxColumn(r.endLineNumber)),1);o=new oe(a.lineNumber,a.column,l.lineNumber,l.column)}else o=this._coordinatesConverter.convertModelRangeToViewRange(r,1);i=new VQ(o,s),this._decorationsCache[t]=i}return i}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e,t=!1,i=!1){const r=new oe(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(r,t,i).inlineDecorations[0]}_getDecorationsInRange(e,t,i){const r=this._linesCollection.getDecorationsInRange(e,this.editorId,Tx(this.configuration.options),t,i),s=e.startLineNumber,o=e.endLineNumber,a=[];let l=0;const c=[];for(let h=s;h<=o;h++)c[h-s]=[];for(let h=0,u=r.length;h<u;h++){const d=r[h],g=d.options;if(!P3e(this.model,d))continue;const p=this._getOrCreateViewModelDecoration(d),b=p.range;if(a[l++]=p,g.inlineClassName){const _=new Nv(b,g.inlineClassName,g.inlineClassNameAffectsLetterSpacing?3:0),w=Math.max(s,b.startLineNumber),y=Math.min(o,b.endLineNumber);for(let k=w;k<=y;k++)c[k-s].push(_)}if(g.beforeContentClassName&&s<=b.startLineNumber&&b.startLineNumber<=o){const _=new Nv(new oe(b.startLineNumber,b.startColumn,b.startLineNumber,b.startColumn),g.beforeContentClassName,1);c[b.startLineNumber-s].push(_)}if(g.afterContentClassName&&s<=b.endLineNumber&&b.endLineNumber<=o){const _=new Nv(new oe(b.endLineNumber,b.endColumn,b.endLineNumber,b.endColumn),g.afterContentClassName,2);c[b.endLineNumber-s].push(_)}}return{decorations:a,inlineDecorations:c}}}function P3e(n,e){return!(e.options.hideInCommentTokens&&O3e(n,e)||e.options.hideInStringTokens&&B3e(n,e))}function O3e(n,e){return hJ(n,e.range,t=>t===1)}function B3e(n,e){return hJ(n,e.range,t=>t===2)}function hJ(n,e,t){for(let i=e.startLineNumber;i<=e.endLineNumber;i++){const r=n.tokenization.getLineTokens(i),s=i===e.startLineNumber,o=i===e.endLineNumber;let a=s?r.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<r.getCount()&&!(o&&r.getStartOffset(a)>e.endColumn-1);){if(!t(r.getStandardTokenType(a)))return!1;a++}}return!0}function H6(n,e){return n===null?e?Qk.INSTANCE:Jk.INSTANCE:new F3e(n,e)}class F3e{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,i){this._assertVisible();const r=i>0?this._projectionData.breakOffsets[i-1]:0,s=this._projectionData.breakOffsets[i];let o;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,h)=>new mc(0,0,c+1,this._projectionData.injectionOptions[h],0));o=mc.applyInjectedText(e.getLineContent(t),a).substring(r,s)}else o=e.getValueInRange({startLineNumber:t,startColumn:r+1,endLineNumber:t,endColumn:s+1});return i>0&&(o=Pj(this._projectionData.wrappedTextIndentLength)+o),o}getViewLineLength(e,t,i){return this._assertVisible(),this._projectionData.getLineLength(i)}getViewLineMinColumn(e,t,i){return this._assertVisible(),this._projectionData.getMinOutputOffset(i)+1}getViewLineMaxColumn(e,t,i){return this._assertVisible(),this._projectionData.getMaxOutputOffset(i)+1}getViewLineData(e,t,i){const r=new Array;return this.getViewLinesData(e,t,i,1,0,[!0],r),r[0]}getViewLinesData(e,t,i,r,s,o,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,h=l.injectionOptions;let u=null;if(c){u=[];let g=0,p=0;for(let b=0;b<l.getOutputLineCount();b++){const _=new Array;u[b]=_;const w=b>0?l.breakOffsets[b-1]:0,y=l.breakOffsets[b];for(;p<c.length;){const k=h[p].content.length,L=c[p]+g,T=L+k;if(L>y)break;if(w<T){const N=h[p];if(N.inlineClassName){const D=b>0?l.wrappedTextIndentLength:0,O=D+Math.max(L-w,0),B=D+Math.min(T-w,y-w);O!==B&&_.push(new T4e(O,B,N.inlineClassName,N.inlineClassNameAffectsLetterSpacing))}}if(T<=y)g+=k,p++;else break}}}let d;c?d=e.tokenization.getLineTokens(t).withInserted(c.map((g,p)=>({offset:g,text:h[p].content,tokenMetadata:jr.defaultTokenMetadata}))):d=e.tokenization.getLineTokens(t);for(let g=i;g<i+r;g++){const p=s+g-i;if(!o[p]){a[p]=null;continue}a[p]=this._getViewLineData(d,u?u[g]:null,g)}}_getViewLineData(e,t,i){this._assertVisible();const r=this._projectionData,s=i>0?r.wrappedTextIndentLength:0,o=i>0?r.breakOffsets[i-1]:0,a=r.breakOffsets[i],l=e.sliceAndInflate(o,a,s);let c=l.getLineContent();i>0&&(c=Pj(r.wrappedTextIndentLength)+c);const h=this._projectionData.getMinOutputOffset(i)+1,u=c.length+1,d=i+1<this.getViewLineCount(),g=i===0?0:r.breakOffsetsVisibleColumn[i-1];return new WR(c,d,h,u,g,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,i=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,i).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const i=this._projectionData.translateToOutputPosition(t-1);return e+i.outputLineIndex}normalizePosition(e,t,i){const r=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,i).toPosition(r)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}const BL=class BL{constructor(){}isVisible(){return!0}setVisible(e){return e?this:Jk.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,i){return e.getLineContent(t)}getViewLineLength(e,t,i){return e.getLineLength(t)}getViewLineMinColumn(e,t,i){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,i){return e.getLineMaxColumn(t)}getViewLineData(e,t,i){const r=e.tokenization.getLineTokens(t),s=r.getLineContent();return new WR(s,!1,1,s.length+1,0,r.inflate(),null)}getViewLinesData(e,t,i,r,s,o,a){if(!o[s]){a[s]=null;return}a[s]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new be(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,i){return t}getInjectedTextAt(e,t){return null}};BL.INSTANCE=new BL;let Qk=BL;const FL=class FL{constructor(){}isVisible(){return!1}setVisible(e){return e?Qk.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,i){throw new Error("Not supported")}getViewLineLength(e,t,i){throw new Error("Not supported")}getViewLineMinColumn(e,t,i){throw new Error("Not supported")}getViewLineMaxColumn(e,t,i){throw new Error("Not supported")}getViewLineData(e,t,i){throw new Error("Not supported")}getViewLinesData(e,t,i,r,s,o,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,i){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}};FL.INSTANCE=new FL;let Jk=FL;const V6=[""];function Pj(n){if(n>=V6.length)for(let e=1;e<=n;e++)V6[e]=W3e(e);return V6[n]}function W3e(n){return new Array(n+1).join(" ")}class z3e{constructor(e,t,i,r,s,o,a,l,c,h){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=r,this.fontInfo=s,this.tabSize=o,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this.wordBreak=h,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new V3e(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const i=this.model.getLinesContent(),r=this.model.getInjectedTextDecorations(this._editorId),s=i.length,o=this.createLineBreaksComputer(),a=new Ru(mc.fromDecorations(r));for(let b=0;b<s;b++){const _=a.takeWhile(w=>w.lineNumber===b+1);o.addRequest(i[b],_,t?t[b]:null)}const l=o.finalize(),c=[],h=this.hiddenAreasDecorationIds.map(b=>this.model.getDecorationRange(b)).sort(oe.compareRangesUsingStarts);let u=1,d=0,g=-1,p=g+1<h.length?d+1:s+2;for(let b=0;b<s;b++){const _=b+1;_===p&&(g++,u=h[g].startLineNumber,d=h[g].endLineNumber,p=g+1<h.length?d+1:s+2);const w=_>=u&&_<=d,y=H6(l[b],!w);c[b]=y.getViewLineCount(),this.modelLineProjections[b]=y}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new M0e(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(d=>this.model.validateRange(d)),i=H3e(t),r=this.hiddenAreasDecorationIds.map(d=>this.model.getDecorationRange(d)).sort(oe.compareRangesUsingStarts);if(i.length===r.length){let d=!1;for(let g=0;g<i.length;g++)if(!i[g].equalsRange(r[g])){d=!0;break}if(!d)return!1}const s=i.map(d=>({range:d,options:br.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,s);const o=i;let a=1,l=0,c=-1,h=c+1<o.length?l+1:this.modelLineProjections.length+2,u=!1;for(let d=0;d<this.modelLineProjections.length;d++){const g=d+1;g===h&&(c++,a=o[c].startLineNumber,l=o[c].endLineNumber,h=c+1<o.length?l+1:this.modelLineProjections.length+2);let p=!1;if(g>=a&&g<=l?this.modelLineProjections[d].isVisible()&&(this.modelLineProjections[d]=this.modelLineProjections[d].setVisible(!1),p=!0):(u=!0,this.modelLineProjections[d].isVisible()||(this.modelLineProjections[d]=this.modelLineProjections[d].setVisible(!0),p=!0)),p){const b=this.modelLineProjections[d].getViewLineCount();this.projectedModelLineLineCounts.setValue(d,b)}}return u||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,i,r,s){const o=this.fontInfo.equals(e),a=this.wrappingStrategy===t,l=this.wrappingColumn===i,c=this.wrappingIndent===r,h=this.wordBreak===s;if(o&&a&&l&&c&&h)return!1;const u=o&&a&&!l&&c&&h;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=i,this.wrappingIndent=r,this.wordBreak=s;let d=null;if(u){d=[];for(let g=0,p=this.modelLineProjections.length;g<p;g++)d[g]=this.modelLineProjections[g].getProjectionData()}return this._constructLines(!1,d),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,i){if(!e||e<=this._validModelVersionId)return null;const r=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,s=this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections.splice(t-1,i-t+1),this.projectedModelLineLineCounts.removeValues(t-1,i-t+1),new qI(r,s)}onModelLinesInserted(e,t,i,r){if(!e||e<=this._validModelVersionId)return null;const s=t>2&&!this.modelLineProjections[t-2].isVisible(),o=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let h=0,u=r.length;h<u;h++){const d=H6(r[h],!s);l.push(d);const g=d.getViewLineCount();a+=g,c[h]=g}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new GI(o,o+a-1)}onModelLineChanged(e,t,i){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const r=t-1,s=this.modelLineProjections[r].getViewLineCount(),o=this.modelLineProjections[r].isVisible(),a=H6(i,o);this.modelLineProjections[r]=a;const l=this.modelLineProjections[r].getViewLineCount();let c=!1,h=0,u=-1,d=0,g=-1,p=0,b=-1;s>l?(h=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=h+l-1,p=u+1,b=p+(s-l)-1,c=!0):s<l?(h=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=h+s-1,d=u+1,g=d+(l-s)-1,c=!0):(h=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=h+l-1),this.projectedModelLineLineCounts.setValue(r,l);const _=h<=u?new cJ(h,u-h+1):null,w=d<=g?new GI(d,g):null,y=p<=b?new qI(p,b):null;return[c,_,w,y]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i);const r=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),a=this.model.guides.getActiveIndentGuide(r.lineNumber,s.lineNumber,o.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),i=t.index,r=t.remainder;return new Oj(i+1,r)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),r=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new be(e.modelLineNumber,r)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),r=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new be(e.modelLineNumber,r)}getViewLineInfosGroupedByModelRanges(e,t){const i=this.getViewLineInfo(e),r=this.getViewLineInfo(t),s=new Array;let o=this.getModelStartPositionOfViewLine(i),a=new Array;for(let l=i.modelLineNumber;l<=r.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const h=l===i.modelLineNumber?i.modelLineWrappedLineIdx:0,u=l===r.modelLineNumber?r.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let d=h;d<u;d++)a.push(new Oj(l,d))}if(!c.isVisible()&&o){const h=new be(l-1,this.model.getLineMaxColumn(l-1)+1),u=oe.fromPositions(o,h);s.push(new Bj(u,a)),a=[],o=null}else c.isVisible()&&!o&&(o=new be(l,1))}if(o){const l=oe.fromPositions(o,this.getModelEndPositionOfViewLine(r));s.push(new Bj(l,a))}return s}getViewLinesBracketGuides(e,t,i,r){const s=i?this.convertViewPositionToModelPosition(i.lineNumber,i.column):null,o=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,s,r);for(const h of a.viewLines){const d=c[h.modelLineNumber-l].map(g=>{if(g.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[h.modelLineNumber-1].getViewPositionOfModelPosition(0,g.forWrappedLinesAfterColumn).lineNumber>=h.modelLineWrappedLineIdx||g.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[h.modelLineNumber-1].getViewPositionOfModelPosition(0,g.forWrappedLinesBeforeOrAtColumn).lineNumber<h.modelLineWrappedLineIdx)return;if(!g.horizontalLine)return g;let p=-1;if(g.column!==-1){const w=this.modelLineProjections[h.modelLineNumber-1].getViewPositionOfModelPosition(0,g.column);if(w.lineNumber===h.modelLineWrappedLineIdx)p=w.column;else if(w.lineNumber<h.modelLineWrappedLineIdx)p=this.getMinColumnOfViewLine(h);else if(w.lineNumber>h.modelLineWrappedLineIdx)return}const b=this.convertModelPositionToViewPosition(h.modelLineNumber,g.horizontalLine.endColumn),_=this.modelLineProjections[h.modelLineNumber-1].getViewPositionOfModelPosition(0,g.horizontalLine.endColumn);return _.lineNumber===h.modelLineWrappedLineIdx?new Ug(g.visibleColumn,p,g.className,new yv(g.horizontalLine.top,b.column),-1,-1):_.lineNumber<h.modelLineWrappedLineIdx||g.visibleColumn!==-1?void 0:new Ug(g.visibleColumn,p,g.className,new yv(g.horizontalLine.top,this.getMaxColumnOfViewLine(h)),-1,-1)});o.push(d.filter(g=>!!g))}}return o}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let s=[];const o=[],a=[],l=i.lineNumber-1,c=r.lineNumber-1;let h=null;for(let p=l;p<=c;p++){const b=this.modelLineProjections[p];if(b.isVisible()){const _=b.getViewLineNumberOfModelPosition(0,p===l?i.column:1),w=b.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(p+1)),y=w-_+1;let k=0;y>1&&b.getViewLineMinColumn(this.model,p+1,w)===1&&(k=_===0?1:2),o.push(y),a.push(k),h===null&&(h=new be(p+1,0))}else h!==null&&(s=s.concat(this.model.guides.getLinesIndentGuides(h.lineNumber,p)),h=null)}h!==null&&(s=s.concat(this.model.guides.getLinesIndentGuides(h.lineNumber,r.lineNumber)),h=null);const u=t-e+1,d=new Array(u);let g=0;for(let p=0,b=s.length;p<b;p++){let _=s[p];const w=Math.min(u-g,o[p]),y=a[p];let k;y===2?k=0:y===1?k=1:k=w;for(let L=0;L<w;L++)L===k&&(_=0),d[g++]=_}return d}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const r=this.projectedModelLineLineCounts.getIndexOf(e-1);let s=e;const o=r.index,a=r.remainder,l=[];for(let c=o,h=this.model.getLineCount();c<h;c++){const u=this.modelLineProjections[c];if(!u.isVisible())continue;const d=c===o?a:0;let g=u.getViewLineCount()-d,p=!1;if(s+g>t&&(p=!0,g=t-s+1),u.getViewLinesData(this.model,c+1,d,g,s-e,i,l),s+=g,p)break}return l}validateViewPosition(e,t,i){e=this._toValidViewLineNumber(e);const r=this.projectedModelLineLineCounts.getIndexOf(e-1),s=r.index,o=r.remainder,a=this.modelLineProjections[s],l=a.getViewLineMinColumn(this.model,s+1,o),c=a.getViewLineMaxColumn(this.model,s+1,o);t<l&&(t=l),t>c&&(t=c);const h=a.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new be(s+1,h)).equals(i)?new be(e,t):this.convertModelPositionToViewPosition(i.lineNumber,i.column)}validateViewRange(e,t){const i=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),r=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new oe(i.lineNumber,i.column,r.lineNumber,r.column)}convertViewPositionToModelPosition(e,t){const i=this.getViewLineInfo(e),r=this.modelLineProjections[i.modelLineNumber-1].getModelColumnOfViewPosition(i.modelLineWrappedLineIdx,t);return this.model.validatePosition(new be(i.modelLineNumber,r))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),i=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new oe(t.lineNumber,t.column,i.lineNumber,i.column)}convertModelPositionToViewPosition(e,t,i=2,r=!1,s=!1){const o=this.model.validatePosition(new be(e,t)),a=o.lineNumber,l=o.column;let c=a-1,h=!1;if(s)for(;c<this.modelLineProjections.length&&!this.modelLineProjections[c].isVisible();)c++,h=!0;else for(;c>0&&!this.modelLineProjections[c].isVisible();)c--,h=!0;if(c===0&&!this.modelLineProjections[c].isVisible())return new be(r?0:1,1);const u=1+this.projectedModelLineLineCounts.getPrefixSum(c);let d;return h?s?d=this.modelLineProjections[c].getViewPositionOfModelPosition(u,1,i):d=this.modelLineProjections[c].getViewPositionOfModelPosition(u,this.model.getLineMaxColumn(c+1),i):d=this.modelLineProjections[a-1].getViewPositionOfModelPosition(u,l,i),d}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return oe.fromPositions(i)}else{const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),r=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new oe(i.lineNumber,i.column,r.lineNumber,r.column)}}getViewLineNumberOfModelPosition(e,t){let i=e-1;if(this.modelLineProjections[i].isVisible()){const s=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(s,t)}for(;i>0&&!this.modelLineProjections[i].isVisible();)i--;if(i===0&&!this.modelLineProjections[i].isVisible())return 1;const r=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(r,this.model.getLineMaxColumn(i+1))}getDecorationsInRange(e,t,i,r,s){const o=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),a=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(a.lineNumber-o.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new oe(o.lineNumber,1,a.lineNumber,a.column),t,i,r,s);let l=[];const c=o.lineNumber-1,h=a.lineNumber-1;let u=null;for(let b=c;b<=h;b++)if(this.modelLineProjections[b].isVisible())u===null&&(u=new be(b+1,b===c?o.column:1));else if(u!==null){const w=this.model.getLineMaxColumn(b);l=l.concat(this.model.getDecorationsInRange(new oe(u.lineNumber,u.column,b,w),t,i,r)),u=null}u!==null&&(l=l.concat(this.model.getDecorationsInRange(new oe(u.lineNumber,u.column,a.lineNumber,a.column),t,i,r)),u=null),l.sort((b,_)=>{const w=oe.compareRangesUsingStarts(b.range,_.range);return w===0?b.id<_.id?-1:b.id>_.id?1:0:w});const d=[];let g=0,p=null;for(const b of l){const _=b.id;p!==_&&(p=_,d[g++]=b)}return d}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const i=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[i.modelLineNumber-1].normalizePosition(i.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function H3e(n){if(n.length===0)return[];const e=n.slice();e.sort(oe.compareRangesUsingStarts);const t=[];let i=e[0].startLineNumber,r=e[0].endLineNumber;for(let s=1,o=e.length;s<o;s++){const a=e[s];a.startLineNumber>r+1?(t.push(new oe(i,1,r,1)),i=a.startLineNumber,r=a.endLineNumber):a.endLineNumber>r&&(r=a.endLineNumber)}return t.push(new oe(i,1,r,1)),t}class Oj{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class Bj{constructor(e,t){this.modelRange=e,this.viewLines=t}}class V3e{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,i,r){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,i,r)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class $3e{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new j3e(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,i,r){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,i,r)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,i){return new qI(t,i)}onModelLinesInserted(e,t,i,r){return new GI(t,i)}onModelLineChanged(e,t,i){return[!1,new cJ(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,i){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,i){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const i=t-e+1,r=new Array(i);for(let s=0;s<i;s++)r[s]=0;return r}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),i=t.getLineContent();return new WR(i,!1,1,i.length+1,0,t.inflate(),null)}getViewLinesData(e,t,i){const r=this.model.getLineCount();e=Math.min(Math.max(1,e),r),t=Math.min(Math.max(1,t),r);const s=[];for(let o=e;o<=t;o++){const a=o-e;s[a]=i[a]?this.getViewLineData(o):null}return s}getDecorationsInRange(e,t,i,r,s){return this.model.getDecorationsInRange(e,t,i,r,s)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class j3e{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}const rg=ff.Right;class U3e{constructor(e){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((e+1)*rg/8))}reset(e){const t=Math.ceil((e+1)*rg/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(e,t,i){i&&(this.persist|=1<<e-1);for(let r=t.startLineNumber;r<=t.endLineNumber;r++){const s=rg*r+(e-1);this.lanes[s>>>3]|=1<<s%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(r))}}getLanesAtLine(e){const t=[];let i=rg*e;for(let r=0;r<rg;r++)(this.persist&1<<r||this.lanes[i>>>3]&1<<i%8)&&t.push(r+1),i++;return t.length?t:[ff.Center]}countAtLine(e){let t=rg*e,i=0;for(let r=0;r<rg;r++)(this.persist&1<<r||this.lanes[t>>>3]&1<<t%8)&&i++,t++;return i}}let q3e=class extends xe{constructor(e,t,i,r,s,o,a,l,c,h){if(super(),this.languageConfigurationService=a,this._themeService=l,this._attachedView=c,this._transactionalTarget=h,this.hiddenAreasModel=new K3e,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=i,this._eventDispatcher=new g3e,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new jp(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new Gs(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=iP.create(this.model),this.glyphLanes=new U3e(0),this.model.isTooLargeForTokenization())this._lines=new $3e(this.model);else{const u=this._configuration.options,d=u.get(50),g=u.get(140),p=u.get(147),b=u.get(139),_=u.get(130);this._lines=new z3e(this._editorId,this.model,r,s,d,this.model.getOptions().tabSize,g,p.wrappingColumn,b,_)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new k3e(i,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new A3e(this._configuration,this.getLineCount(),o)),this._register(this.viewLayout.onDidScroll(u=>{u.scrollTopChanged&&this._handleVisibleLinesChanged(),u.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new c3e(u)),this._eventDispatcher.emitOutgoingEvent(new tP(u.oldScrollWidth,u.oldScrollLeft,u.oldScrollHeight,u.oldScrollTop,u.scrollWidth,u.scrollLeft,u.scrollHeight,u.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(u=>{this._eventDispatcher.emitOutgoingEvent(u)})),this._decorations=new R3e(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(u=>{try{const d=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(d,u)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(Kk.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new d3e)})),this._register(this._themeService.onDidColorThemeChange(u=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new h3e(u))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new oe(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new a3e(e)),this._eventDispatcher.emitOutgoingEvent(new eP(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new n3e)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new r3e)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new be(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new Wj(t,this._viewportStart.startLineDelta)}return new Wj(null,0)}_onConfigurationChanged(e,t){const i=this._captureStableViewport(),r=this._configuration.options,s=r.get(50),o=r.get(140),a=r.get(147),l=r.get(139),c=r.get(130);this._lines.setWrappingSettings(s,o,a.wrappingColumn,l,c)&&(e.emitViewEvent(new eS),e.emitViewEvent(new tS),e.emitViewEvent(new ng(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(92)&&(this._decorations.reset(),e.emitViewEvent(new ng(null))),t.hasChanged(99)&&(this._decorations.reset(),e.emitViewEvent(new ng(null))),e.emitViewEvent(new s3e(t)),this.viewLayout.onConfigurationChanged(t),i.recoverViewportStart(this.coordinatesConverter,this.viewLayout),jp.shouldRecreate(t)&&(this.cursorConfig=new jp(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const i=this._eventDispatcher.beginEmitViewEvents();let r=!1,s=!1;const o=e instanceof sm?e.rawContentChangedEvent.changes:e.changes,a=e instanceof sm?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const u of o)switch(u.changeType){case 4:{for(let d=0;d<u.detail.length;d++){const g=u.detail[d];let p=u.injectedTexts[d];p&&(p=p.filter(b=>!b.ownerId||b.ownerId===this._editorId)),l.addRequest(g,p,null)}break}case 2:{let d=null;u.injectedText&&(d=u.injectedText.filter(g=>!g.ownerId||g.ownerId===this._editorId)),l.addRequest(u.detail,d,null);break}}const c=l.finalize(),h=new Ru(c);for(const u of o)switch(u.changeType){case 1:{this._lines.onModelFlushed(),i.emitViewEvent(new eS),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),r=!0;break}case 3:{const d=this._lines.onModelLinesDeleted(a,u.fromLineNumber,u.toLineNumber);d!==null&&(i.emitViewEvent(d),this.viewLayout.onLinesDeleted(d.fromLineNumber,d.toLineNumber)),r=!0;break}case 4:{const d=h.takeCount(u.detail.length),g=this._lines.onModelLinesInserted(a,u.fromLineNumber,u.toLineNumber,d);g!==null&&(i.emitViewEvent(g),this.viewLayout.onLinesInserted(g.fromLineNumber,g.toLineNumber)),r=!0;break}case 2:{const d=h.dequeue(),[g,p,b,_]=this._lines.onModelLineChanged(a,u.lineNumber,d);s=g,p&&i.emitViewEvent(p),b&&(i.emitViewEvent(b),this.viewLayout.onLinesInserted(b.fromLineNumber,b.toLineNumber)),_&&(i.emitViewEvent(_),this.viewLayout.onLinesDeleted(_.fromLineNumber,_.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!r&&s&&(i.emitViewEvent(new tS),i.emitViewEvent(new ng(null)),this._cursor.onLineMappingChanged(i),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const i=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(i){const r=this.coordinatesConverter.convertModelPositionToViewPosition(i.getStartPosition()),s=this.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber);this.viewLayout.setScrollPosition({scrollTop:s+this._viewportStart.startLineDelta},1)}}try{const i=this._eventDispatcher.beginEmitViewEvents();e instanceof sm&&i.emitOutgoingEvent(new C3e(e.contentChangedEvent)),this._cursor.onModelContentChanged(i,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let i=0,r=e.ranges.length;i<r;i++){const s=e.ranges[i],o=this.coordinatesConverter.convertModelPositionToViewPosition(new be(s.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new be(s.toLineNumber,this.model.getLineMaxColumn(s.toLineNumber))).lineNumber;t[i]={fromLineNumber:o,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new u3e(t)),this._eventDispatcher.emitOutgoingEvent(new x3e(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new l3e),this.cursorConfig=new jp(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new y3e(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new jp(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new w3e(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new eS),t.emitViewEvent(new tS),t.emitViewEvent(new ng(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new jp(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new S3e(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new ng(e)),this._eventDispatcher.emitOutgoingEvent(new v3e(e))}))}setHiddenAreas(e,t){this.hiddenAreasModel.setHiddenAreas(t,e);const i=this.hiddenAreasModel.getMergedRanges();if(i===this.previousHiddenAreas)return;this.previousHiddenAreas=i;const r=this._captureStableViewport();let s=!1;try{const o=this._eventDispatcher.beginEmitViewEvents();s=this._lines.setHiddenAreas(i),s&&(o.emitViewEvent(new eS),o.emitViewEvent(new tS),o.emitViewEvent(new ng(null)),this._cursor.onLineMappingChanged(o),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());const a=r.viewportStartModelPosition?.lineNumber;a&&i.some(c=>c.startLineNumber<=a&&a<=c.endLineNumber)||r.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),s&&this._eventDispatcher.emitOutgoingEvent(new b3e)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(146),t=this._configuration.options.get(67),i=Math.max(20,Math.round(e.height/t)),r=this.viewLayout.getLinesViewportData(),s=Math.max(1,r.completelyVisibleStartLineNumber-i),o=Math.min(this.getLineCount(),r.completelyVisibleEndLineNumber+i);return this._toModelVisibleRanges(new oe(s,this.getLineMinColumn(s),o,this.getLineMaxColumn(o)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),i=this._lines.getHiddenAreas();if(i.length===0)return[t];const r=[];let s=0,o=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let h=0,u=i.length;h<u;h++){const d=i[h].startLineNumber,g=i[h].endLineNumber;g<o||d>l||(o<d&&(r[s++]=new oe(o,a,d-1,this.model.getLineMaxColumn(d-1))),o=g+1,a=1)}return(o<l||o===l&&a<c)&&(r[s++]=new oe(o,a,l,c)),r}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,i=e.completelyVisibleEndLineNumber;return new oe(t,this.getLineMinColumn(t),i,this.getLineMaxColumn(i))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),i=t.completelyVisibleStartLineNumber,r=t.completelyVisibleEndLineNumber;return new oe(i,this.getLineMinColumn(i),r,this.getLineMaxColumn(r))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(t),r=this.coordinatesConverter.convertViewPositionToModelPosition(new be(i,this.getLineMinColumn(i))),s=this.viewLayout.getVerticalOffsetForLineNumber(i)-t;return{scrollLeft:e.scrollLeft,firstPosition:r,firstPositionDeltaTop:s}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(t),r=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:r}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,i){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,i){return this._lines.getActiveIndentGuide(e,t,i)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,i,r){return this._lines.getViewLinesBracketGuides(e,t,i,r)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=qo(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=jm(this.getLineContent(e));return t===-1?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const r=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,r)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const i=this.model.mightContainRTL(),r=this.model.mightContainNonBasicASCII(),s=this.getTabSize(),o=this._lines.getViewLineData(e);return o.inlineDecorations&&(t=[...t,...o.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new La(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,i,r,o.tokens,t,s,o.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,i){const r=this._lines.getViewLinesData(e,t,i);return new L4e(this.getTabSize(),r)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,Tx(this._configuration.options)),i=new G3e;for(const r of t){const s=r.options,o=s.overviewRuler;if(!o)continue;const a=o.position;if(a===0)continue;const l=o.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(r.range.startLineNumber,r.range.startColumn),h=this.coordinatesConverter.getViewLineNumberOfModelPosition(r.range.endLineNumber,r.range.endColumn);i.accept(l,s.zIndex,c,h,a)}return i.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e)t.options.overviewRuler?.invalidateCachedColor(),t.options.minimap?.invalidateCachedColor()}getValueInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(i,t)}getValueLengthInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(i,t)}modifyPosition(e,t){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e),r=this.model.modifyPosition(i,t);return this.coordinatesConverter.convertModelPositionToViewPosition(r)}deduceModelPositionRelativeToViewPosition(e,t,i){const r=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=i:t+=i);const o=this.model.getOffsetAt(r)+t;return this.model.getPositionAt(o)}getPlainTextToCopy(e,t,i){const r=i?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(oe.compareRangesUsingStarts);let s=!1,o=!1;for(const l of e)l.isEmpty()?s=!0:o=!0;if(!o){if(!t)return"";const l=e.map(h=>h.startLineNumber);let c="";for(let h=0;h<l.length;h++)h>0&&l[h-1]===l[h]||(c+=this.model.getLineContent(l[h])+r);return c}if(s&&t){const l=[];let c=0;for(const h of e){const u=h.startLineNumber;h.isEmpty()?u!==c&&l.push(this.model.getLineContent(u)):l.push(this.model.getValueInRange(h,i?2:0)),c=u}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,i?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const i=this.model.getLanguageId();if(i===vl||e.length!==1)return null;let r=e[0];if(r.isEmpty()){if(!t)return null;const h=r.startLineNumber;r=new oe(h,this.model.getLineMinColumn(h),h,this.model.getLineMaxColumn(h))}const s=this._configuration.options.get(50),o=this._getColorMap(),l=/[:;\\\/<>]/.test(s.fontFamily)||s.fontFamily===Sa.fontFamily;let c;return l?c=Sa.fontFamily:(c=s.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${Sa.fontFamily}`),{mode:i,html:`<div style="color: ${o[1]};background-color: ${o[2]};font-family: ${c};font-weight: ${s.fontWeight};font-size: ${s.fontSize}px;line-height: ${s.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(r,o)+"</div>"}}_getHTMLToCopy(e,t){const i=e.startLineNumber,r=e.startColumn,s=e.endLineNumber,o=e.endColumn,a=this.getTabSize();let l="";for(let c=i;c<=s;c++){const h=this.model.tokenization.getLineTokens(c),u=h.getLineContent(),d=c===i?r-1:0,g=c===s?o-1:u.length;u===""?l+="<br>":l+=Rve(u,h.inflate(),t,d,g,a,Go)}return l}_getColorMap(){const e=qn.getColorMap(),t=["#000000"];if(e)for(let i=1,r=e.length;i<r;i++)t[i]=Me.Format.CSS.formatHex(e[i]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,i){return this._withViewEventsCollector(r=>this._cursor.setStates(r,e,t,i))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,i=0){this._withViewEventsCollector(r=>this._cursor.setSelections(r,e,t,i))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new _3e);return}this._withViewEventsCollector(e)}executeEdits(e,t,i){this._executeCursorEdit(r=>this._cursor.executeEdits(r,e,t,i))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(i=>this._cursor.type(i,e,t))}compositionType(e,t,i,r,s){this._executeCursorEdit(o=>this._cursor.compositionType(o,e,t,i,r,s))}paste(e,t,i,r){this._executeCursorEdit(s=>this._cursor.paste(s,e,t,i,r))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(i=>this._cursor.executeCommand(i,e,t))}executeCommands(e,t){this._executeCursorEdit(i=>this._cursor.executeCommands(i,e,t))}revealAllCursors(e,t,i=!1){this._withViewEventsCollector(r=>this._cursor.revealAll(r,e,i,0,t,0))}revealPrimaryCursor(e,t,i=!1){this._withViewEventsCollector(r=>this._cursor.revealPrimary(r,e,i,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),i=new oe(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(r=>r.emitViewEvent(new Bv(e,!1,i,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),i=new oe(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(r=>r.emitViewEvent(new Bv(e,!1,i,null,0,!0,0)))}revealRange(e,t,i,r,s){this._withViewEventsCollector(o=>o.emitViewEvent(new Bv(e,!1,i,null,r,t,s)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new f3e),this._eventDispatcher.emitOutgoingEvent(new p3e))}_withViewEventsCollector(e){return this._transactionalTarget.batchChanges(()=>{try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}})}batchEvents(e){this._withViewEventsCollector(()=>{e()})}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}};class iP{static create(e){const t=e._setTrackedRange(null,new oe(1,1,1,1),1);return new iP(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,i,r,s){this._model=e,this._viewLineNumber=t,this._isValid=i,this._modelTrackedRange=r,this._startLineDelta=s}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const i=e.coordinatesConverter.convertViewPositionToModelPosition(new be(t,e.getLineMinColumn(t))),r=e.model._setTrackedRange(this._modelTrackedRange,new oe(i.lineNumber,i.column,i.lineNumber,i.column),1),s=e.viewLayout.getVerticalOffsetForLineNumber(t),o=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=r,this._startLineDelta=o-s}invalidate(){this._isValid=!1}}class G3e{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,i,r,s){const o=this._asMap[e];if(o){const a=o.data,l=a[a.length-3],c=a[a.length-1];if(l===s&&c+1>=i){r>c&&(a[a.length-1]=r);return}a.push(s,i,r)}else{const a=new jw(e,t,[s,i,r]);this._asMap[e]=a,this.asArray.push(a)}}}class K3e{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const i=this.hiddenAreas.get(e);i&&Fj(i,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce((t,i)=>Y3e(t,i),[]);return Fj(this.ranges,e)?this.ranges:(this.ranges=e,this.ranges)}}function Y3e(n,e){const t=[];let i=0,r=0;for(;i<n.length&&r<e.length;){const s=n[i],o=e[r];if(s.endLineNumber<o.startLineNumber-1)t.push(n[i++]);else if(o.endLineNumber<s.startLineNumber-1)t.push(e[r++]);else{const a=Math.min(s.startLineNumber,o.startLineNumber),l=Math.max(s.endLineNumber,o.endLineNumber);t.push(new oe(a,1,l,1)),i++,r++}}for(;i<n.length;)t.push(n[i++]);for(;r<e.length;)t.push(e[r++]);return t}function Fj(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].equalsRange(e[t]))return!1;return!0}class Wj{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const i=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),r=t.getVerticalOffsetForLineNumber(i.lineNumber);t.setScrollPosition({scrollTop:r+this.startLineDelta},1)}}var Z3e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Ph=function(n,e){return function(t,i){e(t,i,n)}},gg,mm;let e4=(mm=class extends xe{get isSimpleWidget(){return this._configuration.isSimpleWidget}get contextMenuId(){return this._configuration.contextMenuId}constructor(e,t,i,r,s,o,a,l,c,h,u,d){super(),this.languageConfigurationService=u,this._deliveryQueue=Wde(),this._contributions=this._register(new J5e),this._onDidDispose=this._register(new de),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new Ts(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new zj({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new zj({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new Ts(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new Ts(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new Ts(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new Ts(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new Ts(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new Ts(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new Ts(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new Ts(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new Ts(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new Ts(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new Ts(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new Ts(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new Ts(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new Ts(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new Ts(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new Ts(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new Ts(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new de({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._updateCounter=0,this._onBeginUpdate=this._register(new de),this.onBeginUpdate=this._onBeginUpdate.event,this._onEndUpdate=this._register(new de),this.onEndUpdate=this._onEndUpdate.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),s.willCreateCodeEditor();const g={...t};this._domElement=e,this._overflowWidgetsDomNode=g.overflowWidgetsDomNode,delete g.overflowWidgetsDomNode,this._id=++X3e,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(i.isSimpleWidget||!1,i.contextMenuId??(i.isSimpleWidget?es.SimpleEditorContext:es.EditorContext),g,h)),this._register(this._configuration.onDidChange(_=>{this._onDidChangeConfiguration.fire(_);const w=this._configuration.options;if(_.hasChanged(146)){const y=w.get(146);this._onDidLayoutChange.fire(y)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=s,this._commandService=o,this._themeService=l,this._register(new J3e(this,this._contextKeyService)),this._register(new e7e(this,this._contextKeyService,d)),this._instantiationService=this._register(r.createChild(new hb([Ei,this._contextKeyService]))),this._modelData=null,this._focusTracker=new t7e(e,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let p;Array.isArray(i.contributions)?p=i.contributions:p=W0.getEditorContributions(),this._contributions.initialize(this,p,this._instantiationService);for(const _ of W0.getEditorActions()){if(this._actions.has(_.id)){Wi(new Error(`Cannot have two actions with the same id ${_.id}`));continue}const w=new aJ(_.id,_.label,_.alias,_.metadata,_.precondition??void 0,y=>this._instantiationService.invokeFunction(k=>Promise.resolve(_.runEditorCommand(k,this,y))),this._contextKeyService);this._actions.set(w.id,w)}const b=()=>!this._configuration.options.get(92)&&this._configuration.options.get(36).enabled;this._register(new Uge(this._domElement,{onDragOver:_=>{if(!b())return;const w=this.getTargetAtClientPoint(_.clientX,_.clientY);w?.position&&this.showDropIndicatorAt(w.position)},onDrop:async _=>{if(!b()||(this.removeDropIndicator(),!_.dataTransfer))return;const w=this.getTargetAtClientPoint(_.clientX,_.clientY);w?.position&&this._onDropIntoEditor.fire({position:w.position,event:_})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){this._modelData?.view.writeScreenReaderContent(e)}_createConfiguration(e,t,i,r){return new DI(e,t,i,this._domElement,r)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return BR.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?On.getWordAtPosition(this._modelData.model,this._configuration.options.get(132),this._configuration.options.get(131),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let i=0;return e&&e.lineEnding&&e.lineEnding===`
`?i=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){try{if(this._beginUpdate(),!this._modelData)return;this._modelData.model.setValue(e)}finally{this._endUpdate()}}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){try{this._beginUpdate();const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const i={oldModelUrl:this._modelData?.model.uri||null,newModelUrl:t?.uri||null};this._onWillChangeModel.fire(i);const r=this.hasTextFocus(),s=this._detachModel();this._attachModel(t),r&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(i),this._postDetachModelCleanup(s),this._contributionsDisposable=this._contributions.onAfterModelAttached()}finally{this._endUpdate()}}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,i,r){const s=e.model.validatePosition({lineNumber:t,column:i}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(o.lineNumber,r)}getTopForLineNumber(e,t=!1){return this._modelData?gg._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?gg._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,i,r=!1){const s=e.model.validatePosition({lineNumber:t,column:i}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber,r)}getBottomForLineNumber(e,t=!1){if(!this._modelData)return-1;const i=this._modelData.model.getLineMaxColumn(e);return gg._getVerticalOffsetAfterPosition(this._modelData,e,i,t)}setHiddenAreas(e,t){this._modelData?.viewModel.setHiddenAreas(e.map(i=>oe.lift(i)),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return gr.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!be.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,r){if(!this._modelData)return;if(!oe.isIRange(e))throw new Error("Invalid arguments");const s=this._modelData.model.validateRange(e),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(s);this._modelData.viewModel.revealRange("api",i,o,t,r)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,i){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new oe(e,1,e,1),t,!1,i)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,r){if(!be.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new oe(e.lineNumber,e.column,e.lineNumber,e.column),t,i,r)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const i=$i.isISelection(e),r=oe.isIRange(e);if(!i&&!r)throw new Error("Invalid arguments");if(i)this._setSelectionImpl(e,t);else if(r){const s={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(s,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const i=new $i(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[i])}revealLines(e,t,i=0){this._revealLines(e,t,0,i)}revealLinesInCenter(e,t,i=0){this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._revealLines(e,t,2,i)}revealLinesNearTop(e,t,i=0){this._revealLines(e,t,5,i)}_revealLines(e,t,i,r){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new oe(e,1,t,1),i,!1,r)}revealRange(e,t=0,i=!1,r=!0){this._revealRange(e,i?1:0,r,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,i,r){if(!oe.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(oe.lift(e),t,i,r)}setSelections(e,t="api",i=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let r=0,s=e.length;r<s;r++)if(!$i.isISelection(e[r]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState(),t=this._modelData.viewModel.saveCursorState(),i=this._modelData.viewModel.saveState();return{cursorState:t,viewState:i,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const i=t.cursorState;Array.isArray(i)?i.length>0&&this._modelData.viewModel.restoreCursorState(i):this._modelData.viewModel.restoreCursorState([i]),this._contributions.restoreViewState(t.contributionsState||{});const r=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(r)}}handleInitialized(){this._getViewModel()?.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions.get(e)||null}trigger(e,t,i){i=i||{};try{switch(this._beginUpdate(),t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const s=i;this._type(e,s.text||"");return}case"replacePreviousChar":{const s=i;this._compositionType(e,s.text||"",s.replaceCharCnt||0,0,0);return}case"compositionType":{const s=i;this._compositionType(e,s.text||"",s.replacePrevCharCnt||0,s.replaceNextCharCnt||0,s.positionDelta||0);return}case"paste":{const s=i;this._paste(e,s.text||"",s.pasteOnNewLine||!1,s.multicursorText||null,s.mode||null,s.clipboardEvent);return}case"cut":this._cut(e);return}const r=this.getAction(t);if(r){Promise.resolve(r.run(i)).then(void 0,Wi);return}if(!this._modelData||this._triggerEditorCommand(e,t,i))return;this._triggerCommand(t,i)}finally{this._endUpdate()}}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,i,r,s){this._modelData&&this._modelData.viewModel.compositionType(t,i,r,s,e)}_paste(e,t,i,r,s,o){if(!this._modelData)return;const a=this._modelData.viewModel,l=a.getSelection().getStartPosition();a.paste(t,i,r,e);const c=a.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({clipboardEvent:o,range:new oe(l.lineNumber,l.column,c.lineNumber,c.column),languageId:s})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){const r=W0.getEditorCommand(t);return r?(i=i||{},i.source=e,this._instantiationService.invokeFunction(s=>{Promise.resolve(r.runEditorCommand(s,this,i)).then(void 0,Wi)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,i){if(!this._modelData||this._configuration.options.get(92))return!1;let r;return i?Array.isArray(i)?r=()=>i:r=i:r=()=>null,this._modelData.viewModel.executeEdits(e,t,r),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new i7e(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,Tx(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,Tx(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.changeDecorations(i=>i.deltaDecorations(t,[])),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(146)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e,t=!1){this._configuration.observeContainer(e),t||this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id:"+e.getId()),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(i)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(i)}}addGlyphMarginWidget(e){const t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(i)}}removeGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(i)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),i=this._configuration.options,r=i.get(146),s=gg._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),o=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+r.glyphMarginWidth+r.lineNumbersWidth+r.decorationsWidth-this.getScrollLeft();return{top:s,left:o,height:i.get(67)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.viewModel.batchEvents(()=>{this._modelData.view.render(!0,e)})}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){ps(e,this._configuration.options.get(50))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const i=e.onBeforeAttached(),r=new q3e(this._id,this._configuration,e,XR.create(lt(this._domElement)),QR.create(this._configuration.options),a=>Yo(lt(this._domElement),a),this.languageConfigurationService,this._themeService,i,{batchChanges:a=>{try{return this._beginUpdate(),a()}finally{this._endUpdate()}}});t.push(e.onWillDispose(()=>this.setModel(null))),t.push(r.onEvent(a=>{switch(a.kind){case 0:this._onDidContentSizeChange.fire(a);break;case 1:this._editorTextFocus.setValue(a.hasFocus);break;case 2:this._onDidScrollChange.fire(a);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(a.reachedMaxCursorCount){const u=this.getOption(80),d=C("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",u);this._notificationService.prompt(j0e.Warning,d,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:C("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const l=[];for(let u=0,d=a.selections.length;u<d;u++)l[u]=a.selections[u].getPosition();const c={position:l[0],secondaryPositions:l.slice(1),reason:a.reason,source:a.source};this._onDidChangeCursorPosition.fire(c);const h={selection:a.selections[0],secondarySelections:a.selections.slice(1),modelVersionId:a.modelVersionId,oldSelections:a.oldSelections,oldModelVersionId:a.oldModelVersionId,source:a.source,reason:a.reason};this._onDidChangeCursorSelection.fire(h);break}case 7:this._onDidChangeModelDecorations.fire(a.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(a.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(a.event);break;case 10:this._onDidChangeModelContent.fire(a.event);break;case 11:this._onDidChangeModelOptions.fire(a.event);break;case 12:this._onDidChangeModelTokens.fire(a.event);break}}));const[s,o]=this._createView(r);if(o){this._domElement.appendChild(s.domNode.domNode);let a=Object.keys(this._contentWidgets);for(let l=0,c=a.length;l<c;l++){const h=a[l];s.addContentWidget(this._contentWidgets[h])}a=Object.keys(this._overlayWidgets);for(let l=0,c=a.length;l<c;l++){const h=a[l];s.addOverlayWidget(this._overlayWidgets[h])}a=Object.keys(this._glyphMarginWidgets);for(let l=0,c=a.length;l<c;l++){const h=a[l];s.addGlyphMarginWidget(this._glyphMarginWidgets[h])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new Q3e(e,r,s,o,t,i)}_createView(e){let t;this.isSimpleWidget?t={paste:(s,o,a,l)=>{this._paste("keyboard",s,o,a,l)},type:s=>{this._type("keyboard",s)},compositionType:(s,o,a,l)=>{this._compositionType("keyboard",s,o,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(s,o,a,l)=>{const c={text:s,pasteOnNewLine:o,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:s=>{const o={text:s};this._commandService.executeCommand("type",o)},compositionType:(s,o,a,l)=>{if(a||l){const c={text:s,replacePrevCharCnt:o,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:s,replaceCharCnt:o};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const i=new Z5(e.coordinatesConverter);return i.onKeyDown=s=>this._onKeyDown.fire(s),i.onKeyUp=s=>this._onKeyUp.fire(s),i.onContextMenu=s=>this._onContextMenu.fire(s),i.onMouseMove=s=>this._onMouseMove.fire(s),i.onMouseLeave=s=>this._onMouseLeave.fire(s),i.onMouseDown=s=>this._onMouseDown.fire(s),i.onMouseUp=s=>this._onMouseUp.fire(s),i.onMouseDrag=s=>this._onMouseDrag.fire(s),i.onMouseDrop=s=>this._onMouseDrop.fire(s),i.onMouseDropCanceled=s=>this._onMouseDropCanceled.fire(s),i.onMouseWheel=s=>this._onMouseWheel.fire(s),[new zI(t,this._configuration,this._themeService.getColorTheme(),e,i,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){e?.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(this._contributionsDisposable?.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&t.remove(),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new oe(e.lineNumber,e.column,e.lineNumber,e.column),options:gg.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,t){this._contextKeyService.createKey(e,t)}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&this._onBeginUpdate.fire()}_endUpdate(){this._updateCounter--,this._updateCounter===0&&this._onEndUpdate.fire()}},gg=mm,mm.dropIntoEditorDecorationOptions=br.register({description:"workbench-dnd-target",className:"dnd-target"}),mm);e4=gg=Z3e([Ph(3,Ni),Ph(4,vr),Ph(5,Ta),Ph(6,Ei),Ph(7,Ml),Ph(8,wc),Ph(9,yc),Ph(10,mh),Ph(11,ji)],e4);let X3e=0;class Q3e{constructor(e,t,i,r,s,o){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=r,this.listenersToRemove=s,this.attachedView=o}dispose(){is(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}class zj extends xe{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new de(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new de(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class Ts extends de{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class J3e extends xe{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=Ge.editorSimpleInput.bindTo(t),this._editorFocus=Ge.focus.bindTo(t),this._textInputFocus=Ge.textInputFocus.bindTo(t),this._editorTextFocus=Ge.editorTextFocus.bindTo(t),this._tabMovesFocus=Ge.tabMovesFocus.bindTo(t),this._editorReadonly=Ge.readOnly.bindTo(t),this._inDiffEditor=Ge.inDiffEditor.bindTo(t),this._editorColumnSelection=Ge.columnSelection.bindTo(t),this._hasMultipleSelections=Ge.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=Ge.hasNonEmptySelection.bindTo(t),this._canUndo=Ge.canUndo.bindTo(t),this._canRedo=Ge.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(Wk.onDidChangeTabFocus(i=>this._tabMovesFocus.set(i))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._tabMovesFocus.set(Wk.getTabFocusMode()),this._editorReadonly.set(e.get(92)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class e7e extends xe{constructor(e,t,i){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=i,this._langId=Ge.languageId.bindTo(t),this._hasCompletionItemProvider=Ge.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=Ge.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=Ge.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=Ge.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=Ge.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=Ge.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=Ge.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=Ge.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=Ge.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=Ge.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=Ge.hasReferenceProvider.bindTo(t),this._hasRenameProvider=Ge.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=Ge.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=Ge.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=Ge.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=Ge.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=Ge.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=Ge.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInEmbeddedEditor=Ge.isInEmbeddedEditor.bindTo(t);const r=()=>this._update();this._register(e.onDidChangeModel(r)),this._register(e.onDidChangeModelLanguage(r)),this._register(i.completionProvider.onDidChange(r)),this._register(i.codeActionProvider.onDidChange(r)),this._register(i.codeLensProvider.onDidChange(r)),this._register(i.definitionProvider.onDidChange(r)),this._register(i.declarationProvider.onDidChange(r)),this._register(i.implementationProvider.onDidChange(r)),this._register(i.typeDefinitionProvider.onDidChange(r)),this._register(i.hoverProvider.onDidChange(r)),this._register(i.documentHighlightProvider.onDidChange(r)),this._register(i.documentSymbolProvider.onDidChange(r)),this._register(i.referenceProvider.onDidChange(r)),this._register(i.renameProvider.onDidChange(r)),this._register(i.documentFormattingEditProvider.onDidChange(r)),this._register(i.documentRangeFormattingEditProvider.onDidChange(r)),this._register(i.signatureHelpProvider.onDidChange(r)),this._register(i.inlayHintsProvider.onDidChange(r)),r()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInEmbeddedEditor.set(e.uri.scheme===Vt.walkThroughSnippet||e.uri.scheme===Vt.vscodeChatCodeBlock)})}}class t7e extends xe{constructor(e,t){super(),this._onChange=this._register(new de),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(vw(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),t&&(this._overflowWidgetsDomNode=this._register(vw(t)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()})))}_update(){const e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){return this._hadFocus??!1}}class i7e{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,i){return this._editor.onDidChangeModelDecorations(r=>{this._isChangingDecorations||e.call(t,r)},i)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const i of this._decorationIds){const r=e.getDecorationRange(i);r&&t.push(r)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let t=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations(i=>{t=i.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(t)})}finally{this._isChangingDecorations=!1}return t}}const n7e=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),r7e=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function $6(n){return n7e+encodeURIComponent(n.toString())+r7e}const s7e=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),o7e=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function a7e(n){return s7e+encodeURIComponent(n.toString())+o7e}Uu((n,e)=>{const t=n.getColor(IA);t&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${$6(t)}") repeat-x bottom left; }`);const i=n.getColor(mf);i&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${$6(i)}") repeat-x bottom left; }`);const r=n.getColor(Dm);r&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${$6(r)}") repeat-x bottom left; }`);const s=n.getColor(N1e);s&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${a7e(s)}") no-repeat bottom left; }`);const o=n.getColor(pCe);o&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${o.rgba.a}; }`)});class t4{static capture(e){if(e.getScrollTop()===0||e.hasPendingScrollAnimation())return new t4(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,i=0;const r=e.getVisibleRanges();if(r.length>0){t=r[0].getStartPosition();const s=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-s}return new t4(e.getScrollTop(),e.getContentHeight(),t,i,e.getPosition())}constructor(e,t,i,r,s){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=i,this._visiblePositionScrollDelta=r,this._cursorPosition=s}restore(e){if(!(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i,1)}}function l7e(n,e,t,i){if(n.length===0)return e;if(e.length===0)return n;const r=[];let s=0,o=0;for(;s<n.length&&o<e.length;){const a=n[s],l=e[o],c=t(a),h=t(l);c<h?(r.push(a),s++):c>h?(r.push(l),o++):(r.push(i(a,l)),s++,o++)}for(;s<n.length;)r.push(n[s]),s++;for(;o<e.length;)r.push(e[o]),o++;return r}function i4(n,e){const t=new rt,i=n.createDecorationsCollection();return t.add(D5({debugName:()=>`Apply decorations from ${e.debugName}`},r=>{const s=e.read(r);i.set(s)})),t.add({dispose:()=>{i.clear()}}),t}function X_(n,e){return n.appendChild(e),Mt(()=>{e.remove()})}function c7e(n,e){return n.prepend(e),Mt(()=>{e.remove()})}class uJ extends xe{get width(){return this._width}get height(){return this._height}get automaticLayout(){return this._automaticLayout}constructor(e,t){super(),this._automaticLayout=!1,this.elementSizeObserver=this._register(new UQ(e,t)),this._width=fi(this,this.elementSizeObserver.getWidth()),this._height=fi(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(i=>pr(r=>{this._width.set(this.elementSizeObserver.getWidth(),r),this._height.set(this.elementSizeObserver.getHeight(),r)})))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){this._automaticLayout=e,e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function Hj(n,e,t){let i=e.get(),r=i,s=i;const o=fi("animatedValue",i);let a=-1;const l=300;let c;t.add(E5({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(u,d)=>(u.didChange(e)&&(d.animate=d.animate||u.change),!0)},(u,d)=>{c!==void 0&&(n.cancelAnimationFrame(c),c=void 0),r=s,i=e.read(u),a=Date.now()-(d.animate?0:l),h()}));function h(){const u=Date.now()-a;s=Math.floor(h7e(u,r,i-r,l)),u<l?c=n.requestAnimationFrame(h):s=i,o.set(s,void 0)}return o}function h7e(n,e,t,i){return n===i?e+t:t*(-Math.pow(2,-10*n/i)+1)+e}class nP extends xe{constructor(e,t,i){super(),this._register(new KI(e,i)),this._register(vf(i,{height:t.actualHeight,top:t.actualTop}))}}class y0{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=fi(this,void 0),this._actualHeight=fi(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=i=>{this._actualTop.set(i,void 0)},this.onComputedHeight=i=>{this._actualHeight.set(i,void 0)}}}const WL=class WL{constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId=`managedOverlayWidget-${WL._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}};WL._counter=0;let KI=WL;function vf(n,e){return yi(t=>{for(let[i,r]of Object.entries(e))r&&typeof r=="object"&&"read"in r&&(r=r.read(t)),typeof r=="number"&&(r=`${r}px`),i=i.replace(/[A-Z]/g,s=>"-"+s.toLowerCase()),n.style[i]=r})}function n4(n,e,t,i){const r=new rt,s=[];return r.add(hc((o,a)=>{const l=e.read(o),c=new Map,h=new Map;t&&t(!0),n.changeViewZones(u=>{for(const d of s)u.removeZone(d),i?.delete(d);s.length=0;for(const d of l){const g=u.addZone(d);d.setZoneId&&d.setZoneId(g),s.push(g),i?.add(g),c.set(d,g)}}),t&&t(!1),a.add(E5({createEmptyChangeSummary(){return{zoneIds:[]}},handleChange(u,d){const g=h.get(u.changedObservable);return g!==void 0&&d.zoneIds.push(g),!0}},(u,d)=>{for(const g of l)g.onChange&&(h.set(g.onChange,c.get(g)),g.onChange.read(u));t&&t(!0),n.changeViewZones(g=>{for(const p of d.zoneIds)g.layoutZone(p)}),t&&t(!1)}))})),r.add({dispose(){t&&t(!0),n.changeViewZones(o=>{for(const a of s)o.removeZone(a)}),i?.clear(),t&&t(!1)}}),r}function Vj(n,e){const t=$x(e,r=>r.original.startLineNumber<=n.lineNumber);if(!t)return oe.fromPositions(n);if(t.original.endLineNumberExclusive<=n.lineNumber){const r=n.lineNumber-t.original.endLineNumberExclusive+t.modified.endLineNumberExclusive;return oe.fromPositions(new be(r,n.column))}if(!t.innerChanges)return oe.fromPositions(new be(t.modified.startLineNumber,1));const i=$x(t.innerChanges,r=>r.originalRange.getStartPosition().isBeforeOrEqual(n));if(!i){const r=n.lineNumber-t.original.startLineNumber+t.modified.startLineNumber;return oe.fromPositions(new be(r,n.column))}if(i.originalRange.containsPosition(n))return i.modifiedRange;{const r=u7e(i.originalRange.getEndPosition(),n);return oe.fromPositions(r.addToPosition(i.modifiedRange.getEndPosition()))}}function u7e(n,e){return n.lineNumber===e.lineNumber?new gf(0,e.column-n.column):new gf(e.lineNumber-n.lineNumber,e.column-1)}function d7e(n,e){let t;return n.filter(i=>{const r=e(i,t);return t=i,r})}class r4{static create(e,t=void 0){return new $j(e,e,t)}static createWithDisposable(e,t,i=void 0){const r=new rt;return r.add(t),r.add(e),new $j(e,r,i)}}class $j extends r4{constructor(e,t,i){super(),this.object=e,this._disposable=t,this._debugOwner=i,this._refCount=1,this._isDisposed=!1,this._owners=[],i&&this._addOwner(i)}_addOwner(e){e&&this._owners.push(e)}createNewRef(e){return this._refCount++,e&&this._addOwner(e),new f7e(this,e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._decreaseRefCount(this._debugOwner))}_decreaseRefCount(e){if(this._refCount--,this._refCount===0&&this._disposable.dispose(),e){const t=this._owners.indexOf(e);t!==-1&&this._owners.splice(t,1)}}}class f7e extends r4{constructor(e,t){super(),this._base=e,this._debugOwner=t,this._isDisposed=!1}get object(){return this._base.object}createNewRef(e){return this._base.createNewRef(e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._base._decreaseRefCount(this._debugOwner))}}var rP=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},sP=function(n,e){return function(t,i){e(t,i,n)}};const g7e=Mf("diff-review-insert",Je.add,C("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),m7e=Mf("diff-review-remove",Je.remove,C("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),p7e=Mf("diff-review-close",Je.close,C("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));var h1;let Gg=(h1=class extends xe{constructor(e,t,i,r,s,o,a,l,c){super(),this._parentNode=e,this._visible=t,this._setVisible=i,this._canClose=r,this._width=s,this._height=o,this._diffs=a,this._models=l,this._instantiationService=c,this._state=ab(this,(h,u)=>{const d=this._visible.read(h);if(this._parentNode.style.visibility=d?"visible":"hidden",!d)return null;const g=u.add(this._instantiationService.createInstance(YI,this._diffs,this._models,this._setVisible,this._canClose)),p=u.add(this._instantiationService.createInstance(ZI,this._parentNode,g,this._width,this._height,this._models));return{model:g,view:p}}).recomputeInitiallyAndOnChange(this._store)}next(){pr(e=>{const t=this._visible.get();this._setVisible(!0,e),t&&this._state.get().model.nextGroup(e)})}prev(){pr(e=>{this._setVisible(!0,e),this._state.get().model.previousGroup(e)})}close(){pr(e=>{this._setVisible(!1,e)})}},h1._ttPolicy=Xm("diffReview",{createHTML:e=>e}),h1);Gg=rP([sP(8,Ni)],Gg);let YI=class extends xe{constructor(e,t,i,r,s){super(),this._diffs=e,this._models=t,this._setVisible=i,this.canClose=r,this._accessibilitySignalService=s,this._groups=fi(this,[]),this._currentGroupIdx=fi(this,0),this._currentElementIdx=fi(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((o,a)=>this._groups.read(a)[o]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((o,a)=>this.currentGroup.read(a)?.lines[o]),this._register(yi(o=>{const a=this._diffs.read(o);if(!a){this._groups.set([],void 0);return}const l=b7e(a,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());pr(c=>{const h=this._models.getModifiedPosition();if(h){const u=l.findIndex(d=>h?.lineNumber<d.range.modified.endLineNumberExclusive);u!==-1&&this._currentGroupIdx.set(u,c)}this._groups.set(l,c)})})),this._register(yi(o=>{const a=this.currentElement.read(o);a?.type===Us.Deleted?this._accessibilitySignalService.playSignal(Kc.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):a?.type===Us.Added&&this._accessibilitySignalService.playSignal(Kc.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register(yi(o=>{const a=this.currentElement.read(o);if(a&&a.type!==Us.Header){const l=a.modifiedLineNumber??a.diff.modified.startLineNumber;this._models.modifiedSetSelection(oe.fromPositions(new be(l,1)))}}))}_goToGroupDelta(e,t){const i=this.groups.get();!i||i.length<=1||XA(t,r=>{this._currentGroupIdx.set(Pt.ofLength(i.length).clipCyclic(this._currentGroupIdx.get()+e),r),this._currentElementIdx.set(0,r)})}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const t=this.currentGroup.get();!t||t.lines.length<=1||pr(i=>{this._currentElementIdx.set(Pt.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),i)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const t=this.currentGroup.get();if(!t)return;const i=t.lines.indexOf(e);i!==-1&&pr(r=>{this._currentElementIdx.set(i,r)})}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===Us.Deleted?this._models.originalReveal(oe.fromPositions(new be(e.originalLineNumber,1))):this._models.modifiedReveal(e.type!==Us.Header?oe.fromPositions(new be(e.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};YI=rP([sP(4,U5)],YI);const k_=3;function b7e(n,e,t){const i=[];for(const r of RM(n,(s,o)=>o.modified.startLineNumber-s.modified.endLineNumberExclusive<2*k_)){const s=[];s.push(new v7e);const o=new wt(Math.max(1,r[0].original.startLineNumber-k_),Math.min(r[r.length-1].original.endLineNumberExclusive+k_,e+1)),a=new wt(Math.max(1,r[0].modified.startLineNumber-k_),Math.min(r[r.length-1].modified.endLineNumberExclusive+k_,t+1));gK(r,(h,u)=>{const d=new wt(h?h.original.endLineNumberExclusive:o.startLineNumber,u?u.original.startLineNumber:o.endLineNumberExclusive),g=new wt(h?h.modified.endLineNumberExclusive:a.startLineNumber,u?u.modified.startLineNumber:a.endLineNumberExclusive);d.forEach(p=>{s.push(new C7e(p,g.startLineNumber+(p-d.startLineNumber)))}),u&&(u.original.forEach(p=>{s.push(new w7e(u,p))}),u.modified.forEach(p=>{s.push(new y7e(u,p))}))});const l=r[0].modified.join(r[r.length-1].modified),c=r[0].original.join(r[r.length-1].original);i.push(new _7e(new As(l,c),s))}return i}var Us;(function(n){n[n.Header=0]="Header",n[n.Unchanged=1]="Unchanged",n[n.Deleted=2]="Deleted",n[n.Added=3]="Added"})(Us||(Us={}));class _7e{constructor(e,t){this.range=e,this.lines=t}}class v7e{constructor(){this.type=Us.Header}}class w7e{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=Us.Deleted,this.modifiedLineNumber=void 0}}class y7e{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=Us.Added,this.originalLineNumber=void 0}}class C7e{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=Us.Unchanged}}let ZI=class extends xe{constructor(e,t,i,r,s,o){super(),this._element=e,this._model=t,this._width=i,this._height=r,this._models=s,this._languageService=o,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const a=document.createElement("div");a.className="diff-review-actions",this._actionBar=this._register(new Tu(a)),this._register(yi(l=>{this._actionBar.clear(),this._model.canClose.read(l)&&this._actionBar.push(new xu("diffreview.close",C("label.close","Close"),"close-diff-review "+gi.asClassName(p7e),!0,async()=>t.close()),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new PA(this._content,{})),Ks(this.domNode,this._scrollbar.getDomNode(),a),this._register(yi(l=>{this._height.read(l),this._width.read(l),this._scrollbar.scanDomNode()})),this._register(Mt(()=>{Ks(this.domNode)})),this._register(vf(this.domNode,{width:this._width,height:this._height})),this._register(vf(this._content,{width:this._width,height:this._height})),this._register(hc((l,c)=>{this._model.currentGroup.read(l),this._render(c)})),this._register(Er(this.domNode,"keydown",l=>{(l.equals(18)||l.equals(2066)||l.equals(530))&&(l.preventDefault(),this._model.goToNextLine()),(l.equals(16)||l.equals(2064)||l.equals(528))&&(l.preventDefault(),this._model.goToPreviousLine()),(l.equals(9)||l.equals(2057)||l.equals(521)||l.equals(1033))&&(l.preventDefault(),this._model.close()),(l.equals(10)||l.equals(3))&&(l.preventDefault(),this._model.revealCurrentElementInEditor())}))}_render(e){const t=this._models.getOriginalOptions(),i=this._models.getModifiedOptions(),r=document.createElement("div");r.className="diff-review-table",r.setAttribute("role","list"),r.setAttribute("aria-label",C("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),ps(r,i.get(50)),Ks(this._content,r);const s=this._models.getOriginalModel(),o=this._models.getModifiedModel();if(!s||!o)return;const a=s.getOptions(),l=o.getOptions(),c=i.get(67),h=this._model.currentGroup.get();for(const u of h?.lines||[]){if(!h)break;let d;if(u.type===Us.Header){const p=document.createElement("div");p.className="diff-review-row",p.setAttribute("role","listitem");const b=h.range,_=this._model.currentGroupIndex.get(),w=this._model.groups.get().length,y=N=>N===0?C("no_lines_changed","no lines changed"):N===1?C("one_line_changed","1 line changed"):C("more_lines_changed","{0} lines changed",N),k=y(b.original.length),L=y(b.modified.length);p.setAttribute("aria-label",C({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",_+1,w,b.original.startLineNumber,k,b.modified.startLineNumber,L));const T=document.createElement("div");T.className="diff-review-cell diff-review-summary",T.appendChild(document.createTextNode(`${_+1}/${w}: @@ -${b.original.startLineNumber},${b.original.length} +${b.modified.startLineNumber},${b.modified.length} @@`)),p.appendChild(T),d=p}else d=this._createRow(u,c,this._width.get(),t,s,a,i,o,l);r.appendChild(d);const g=Et(p=>this._model.currentElement.read(p)===u);e.add(yi(p=>{const b=g.read(p);d.tabIndex=b?0:-1,b&&d.focus()})),e.add(we(d,"focus",()=>{this._model.goToLine(u)}))}this._scrollbar.scanDomNode()}_createRow(e,t,i,r,s,o,a,l,c){const h=r.get(146),u=h.glyphMarginWidth+h.lineNumbersWidth,d=a.get(146),g=10+d.glyphMarginWidth+d.lineNumbersWidth;let p="diff-review-row",b="";const _="diff-review-spacer";let w=null;switch(e.type){case Us.Added:p="diff-review-row line-insert",b=" char-insert",w=g7e;break;case Us.Deleted:p="diff-review-row line-delete",b=" char-delete",w=m7e;break}const y=document.createElement("div");y.style.minWidth=i+"px",y.className=p,y.setAttribute("role","listitem"),y.ariaLevel="";const k=document.createElement("div");k.className="diff-review-cell",k.style.height=`${t}px`,y.appendChild(k);const L=document.createElement("span");L.style.width=u+"px",L.style.minWidth=u+"px",L.className="diff-review-line-number"+b,e.originalLineNumber!==void 0?L.appendChild(document.createTextNode(String(e.originalLineNumber))):L.innerText=" ",k.appendChild(L);const T=document.createElement("span");T.style.width=g+"px",T.style.minWidth=g+"px",T.style.paddingRight="10px",T.className="diff-review-line-number"+b,e.modifiedLineNumber!==void 0?T.appendChild(document.createTextNode(String(e.modifiedLineNumber))):T.innerText=" ",k.appendChild(T);const N=document.createElement("span");if(N.className=_,w){const B=document.createElement("span");B.className=gi.asClassName(w),B.innerText="  ",N.appendChild(B)}else N.innerText="  ";k.appendChild(N);let D;if(e.modifiedLineNumber!==void 0){let B=this._getLineHtml(l,a,c.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);Gg._ttPolicy&&(B=Gg._ttPolicy.createHTML(B)),k.insertAdjacentHTML("beforeend",B),D=l.getLineContent(e.modifiedLineNumber)}else{let B=this._getLineHtml(s,r,o.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);Gg._ttPolicy&&(B=Gg._ttPolicy.createHTML(B)),k.insertAdjacentHTML("beforeend",B),D=s.getLineContent(e.originalLineNumber)}D.length===0&&(D=C("blankLine","blank"));let O="";switch(e.type){case Us.Unchanged:e.originalLineNumber===e.modifiedLineNumber?O=C({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",D,e.originalLineNumber):O=C("equalLine","{0} original line {1} modified line {2}",D,e.originalLineNumber,e.modifiedLineNumber);break;case Us.Added:O=C("insertLine","+ {0} modified line {1}",D,e.modifiedLineNumber);break;case Us.Deleted:O=C("deleteLine","- {0} original line {1}",D,e.originalLineNumber);break}return y.setAttribute("aria-label",O),y}_getLineHtml(e,t,i,r,s){const o=e.getLineContent(r),a=t.get(50),l=jr.createEmpty(o,s),c=La.isBasicASCII(o,e.mightContainNonBasicASCII()),h=La.containsRTL(o,c,e.mightContainRTL());return q5(new ub(a.isMonospace&&!t.get(33),a.canUseHalfwidthRightwardsArrow,o,!1,c,h,0,l,[],i,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(118),t.get(100),t.get(95),t.get(51)!==Cm.OFF,null)).html}};ZI=rP([sP(5,Ir)],ZI);class S7e{constructor(e){this.editors=e}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}modifiedSetSelection(e){this.editors.modified.setSelection(e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){return this.editors.modified.getPosition()??void 0}}ie("diffEditor.move.border","#8b8b8b9c",C("diffEditor.move.border","The border color for text that got moved in the diff editor."));ie("diffEditor.moveActive.border","#FFA500",C("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor."));ie("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},C("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));const x7e=Mf("diff-insert",Je.add,C("diffInsertIcon","Line decoration for inserts in the diff editor.")),dJ=Mf("diff-remove",Je.remove,C("diffRemoveIcon","Line decoration for removals in the diff editor.")),jj=br.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+gi.asClassName(x7e),marginClassName:"gutter-insert"}),Uj=br.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+gi.asClassName(dJ),marginClassName:"gutter-delete"}),qj=br.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),Gj=br.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),Kj=br.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),k7e=br.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),L7e=br.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),XI=br.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),T7e=br.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),D7e=br.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"});var fJ=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},QI=function(n,e){return function(t,i){e(t,i,n)}},mg;const gJ=ai("diffProviderFactoryService");let JI=class{constructor(e){this.instantiationService=e}createDiffProvider(e){return this.instantiationService.createInstance(eN,e)}};JI=fJ([QI(0,Ni)],JI);_i(gJ,JI,1);var pm;let eN=(pm=class{constructor(e,t,i){this.editorWorkerService=t,this.telemetryService=i,this.onDidChangeEventEmitter=new de,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){this.diffAlgorithmOnDidChangeSubscription?.dispose()}async computeDiff(e,t,i,r){if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(e,t,i,r);if(e.isDisposed()||t.isDisposed())return{changes:[],identical:!0,quitEarly:!1,moves:[]};if(e.getLineCount()===1&&e.getLineMaxColumn(1)===1)return t.getLineCount()===1&&t.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new ka(new wt(1,2),new wt(1,t.getLineCount()+1),[new ga(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const s=JSON.stringify([e.uri.toString(),t.uri.toString()]),o=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(i)]),a=mg.diffCache.get(s);if(a&&a.context===o)return a.result;const l=$m.create(),c=await this.editorWorkerService.computeDiff(e.uri,t.uri,i,this.diffAlgorithm),h=l.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:h,timedOut:c?.quitEarly??!0,detectedMoves:i.computeMoves?c?.moves.length??0:-1}),r.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!c)throw new Error("no diff result available");return mg.diffCache.size>10&&mg.diffCache.delete(mg.diffCache.keys().next().value),mg.diffCache.set(s,{result:c,context:o}),c}setOptions(e){let t=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&(this.diffAlgorithmOnDidChangeSubscription?.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,typeof e.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),t=!0),t&&this.onDidChangeEventEmitter.fire()}},mg=pm,pm.diffCache=new Map,pm);eN=mg=fJ([QI(1,zy),QI(2,Zm)],eN);function oP(){return HD&&!!HD.VSCODE_DEV}function mJ(n){if(oP()){const e=E7e();return e.add(n),{dispose(){e.delete(n)}}}else return{dispose(){}}}function E7e(){iS||(iS=new Set);const n=globalThis;return n.$hotReload_applyNewExports||(n.$hotReload_applyNewExports=e=>{const t={config:{mode:void 0},...e},i=[];for(const r of iS){const s=r(t);s&&i.push(s)}if(i.length>0)return r=>{let s=!1;for(const o of i)o(r)&&(s=!0);return s}}),iS}let iS;oP()&&mJ(({oldExports:n,newSrc:e,config:t})=>{if(t.mode==="patch-prototype")return i=>{for(const r in i){const s=i[r];if(console.log(`[hot-reload] Patching prototype methods of '${r}'`,{exportedItem:s}),typeof s=="function"&&s.prototype){const o=n[r];if(o){for(const a of Object.getOwnPropertyNames(s.prototype)){const l=Object.getOwnPropertyDescriptor(s.prototype,a),c=Object.getOwnPropertyDescriptor(o.prototype,a);l?.value?.toString()!==c?.value?.toString()&&console.log(`[hot-reload] Patching prototype method '${r}.${a}'`),Object.defineProperty(o.prototype,a,l)}i[r]=o}}}return!0}});function ul(n,e){return I7e([n],e),n}function I7e(n,e){oP()&&Va("reload",i=>mJ(({oldExports:r})=>{if([...Object.values(r)].some(s=>n.includes(s)))return s=>(i(void 0),!0)})).read(e)}var N7e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},M7e=function(n,e){return function(t,i){e(t,i,n)}};let tN=class extends xe{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,t,i){super(),this.model=e,this._options=t,this._diffProviderFactoryService=i,this._isDiffUpToDate=fi(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=fi(this,void 0),this.diff=this._diff,this._unchangedRegions=fi(this,void 0),this.unchangedRegions=Et(this,a=>this._options.hideUnchangedRegions.read(a)?this._unchangedRegions.read(a)?.regions??[]:(pr(l=>{for(const c of this._unchangedRegions.get()?.regions||[])c.collapseAll(l)}),[])),this.movedTextToCompare=fi(this,void 0),this._activeMovedText=fi(this,void 0),this._hoveredMovedText=fi(this,void 0),this.activeMovedText=Et(this,a=>this.movedTextToCompare.read(a)??this._hoveredMovedText.read(a)??this._activeMovedText.read(a)),this._cancellationTokenSource=new ib,this._diffProvider=Et(this,a=>{const l=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(a)}),c=Va("onDidChange",l.onDidChange);return{diffProvider:l,onChangeSignal:c}}),this._register(Mt(()=>this._cancellationTokenSource.cancel()));const r=eR("contentChangedSignal"),s=this._register(new Gs(()=>r.trigger(void 0),200));this._register(yi(a=>{const l=this._unchangedRegions.read(a);if(!l||l.regions.some(p=>p.isDragged.read(a)))return;const c=l.originalDecorationIds.map(p=>e.original.getDecorationRange(p)).map(p=>p?wt.fromRangeInclusive(p):void 0),h=l.modifiedDecorationIds.map(p=>e.modified.getDecorationRange(p)).map(p=>p?wt.fromRangeInclusive(p):void 0),u=l.regions.map((p,b)=>!c[b]||!h[b]?void 0:new Xd(c[b].startLineNumber,h[b].startLineNumber,c[b].length,p.visibleLineCountTop.read(a),p.visibleLineCountBottom.read(a))).filter(w1),d=[];let g=!1;for(const p of RM(u,(b,_)=>b.getHiddenModifiedRange(a).endLineNumberExclusive===_.getHiddenModifiedRange(a).startLineNumber))if(p.length>1){g=!0;const b=p.reduce((w,y)=>w+y.lineCount,0),_=new Xd(p[0].originalLineNumber,p[0].modifiedLineNumber,b,p[0].visibleLineCountTop.get(),p[p.length-1].visibleLineCountBottom.get());d.push(_)}else d.push(p[0]);if(g){const p=e.original.deltaDecorations(l.originalDecorationIds,d.map(_=>({range:_.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),b=e.modified.deltaDecorations(l.modifiedDecorationIds,d.map(_=>({range:_.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));pr(_=>{this._unchangedRegions.set({regions:d,originalDecorationIds:p,modifiedDecorationIds:b},_)})}}));const o=(a,l,c)=>{const h=Xd.fromDiffs(a.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(c),this._options.hideUnchangedRegionsContextLineCount.read(c));let u;const d=this._unchangedRegions.get();if(d){const _=d.originalDecorationIds.map(L=>e.original.getDecorationRange(L)).map(L=>L?wt.fromRangeInclusive(L):void 0),w=d.modifiedDecorationIds.map(L=>e.modified.getDecorationRange(L)).map(L=>L?wt.fromRangeInclusive(L):void 0);let k=d7e(d.regions.map((L,T)=>{if(!_[T]||!w[T])return;const N=_[T].length;return new Xd(_[T].startLineNumber,w[T].startLineNumber,N,Math.min(L.visibleLineCountTop.get(),N),Math.min(L.visibleLineCountBottom.get(),N-L.visibleLineCountTop.get()))}).filter(w1),(L,T)=>!T||L.modifiedLineNumber>=T.modifiedLineNumber+T.lineCount&&L.originalLineNumber>=T.originalLineNumber+T.lineCount).map(L=>new As(L.getHiddenOriginalRange(c),L.getHiddenModifiedRange(c)));k=As.clip(k,wt.ofLength(1,e.original.getLineCount()),wt.ofLength(1,e.modified.getLineCount())),u=As.inverse(k,e.original.getLineCount(),e.modified.getLineCount())}const g=[];if(u)for(const _ of h){const w=u.filter(y=>y.original.intersectsStrict(_.originalUnchangedRange)&&y.modified.intersectsStrict(_.modifiedUnchangedRange));g.push(..._.setVisibleRanges(w,l))}else g.push(...h);const p=e.original.deltaDecorations(d?.originalDecorationIds||[],g.map(_=>({range:_.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),b=e.modified.deltaDecorations(d?.modifiedDecorationIds||[],g.map(_=>({range:_.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));this._unchangedRegions.set({regions:g,originalDecorationIds:p,modifiedDecorationIds:b},l)};this._register(e.modified.onDidChangeContent(a=>{if(this._diff.get()){const c=mu.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),s.schedule()})),this._register(e.original.onDidChangeContent(a=>{if(this._diff.get()){const c=mu.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),s.schedule()})),this._register(hc(async(a,l)=>{this._options.hideUnchangedRegionsMinimumLineCount.read(a),this._options.hideUnchangedRegionsContextLineCount.read(a),s.cancel(),r.read(a);const c=this._diffProvider.read(a);c.onChangeSignal.read(a),ul(JY,a),ul(y8,a),this._isDiffUpToDate.set(!1,void 0);let h=[];l.add(e.original.onDidChangeContent(g=>{const p=mu.fromModelContentChanges(g.changes);h=vk(h,p)}));let u=[];l.add(e.modified.onDidChangeContent(g=>{const p=mu.fromModelContentChanges(g.changes);u=vk(u,p)}));let d=await c.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(a),maxComputationTimeMs:this._options.maxComputationTimeMs.read(a),computeMoves:this._options.showMoves.read(a)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||e.original.isDisposed()||e.modified.isDisposed()||(d=A7e(d,e.original,e.modified),d=(e.original,e.modified,void 0)??d,d=(e.original,e.modified,void 0)??d,pr(g=>{o(d,g),this._lastDiff=d;const p=aP.fromDiffResult(d);this._diff.set(p,g),this._isDiffUpToDate.set(!0,g);const b=this.movedTextToCompare.get();this.movedTextToCompare.set(b?this._lastDiff.moves.find(_=>_.lineRangeMapping.modified.intersect(b.lineRangeMapping.modified)):void 0,g)}))}))}ensureModifiedLineIsVisible(e,t,i){if(this.diff.get()?.mappings.length===0)return;const r=this._unchangedRegions.get()?.regions||[];for(const s of r)if(s.getHiddenModifiedRange(void 0).contains(e)){s.showModifiedLine(e,t,i);return}}ensureOriginalLineIsVisible(e,t,i){if(this.diff.get()?.mappings.length===0)return;const r=this._unchangedRegions.get()?.regions||[];for(const s of r)if(s.getHiddenOriginalRange(void 0).contains(e)){s.showOriginalLine(e,t,i);return}}async waitForDiff(){await Zwe(this.isDiffUpToDate,e=>e)}serializeState(){return{collapsedRegions:this._unchangedRegions.get()?.regions.map(t=>({range:t.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(e){const t=e.collapsedRegions?.map(r=>wt.deserialize(r.range)),i=this._unchangedRegions.get();!i||!t||pr(r=>{for(const s of i.regions)for(const o of t)if(s.modifiedUnchangedRange.intersect(o)){s.setHiddenModifiedRange(o,r);break}})}};tN=N7e([M7e(2,gJ)],tN);function A7e(n,e,t){return{changes:n.changes.map(i=>new ka(i.original,i.modified,i.innerChanges?i.innerChanges.map(r=>R7e(r,e,t)):void 0)),moves:n.moves,identical:n.identical,quitEarly:n.quitEarly}}function R7e(n,e,t){let i=n.originalRange,r=n.modifiedRange;return i.startColumn===1&&r.startColumn===1&&(i.endColumn!==1||r.endColumn!==1)&&i.endColumn===e.getLineMaxColumn(i.endLineNumber)&&r.endColumn===t.getLineMaxColumn(r.endLineNumber)&&i.endLineNumber<e.getLineCount()&&r.endLineNumber<t.getLineCount()&&(i=i.setEndPosition(i.endLineNumber+1,1),r=r.setEndPosition(r.endLineNumber+1,1)),new ga(i,r)}class aP{static fromDiffResult(e){return new aP(e.changes.map(t=>new pJ(t)),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,i,r){this.mappings=e,this.movedTexts=t,this.identical=i,this.quitEarly=r}}class pJ{constructor(e){this.lineRangeMapping=e}}class Xd{static fromDiffs(e,t,i,r,s){const o=ka.inverse(e,t,i),a=[];for(const l of o){let c=l.original.startLineNumber,h=l.modified.startLineNumber,u=l.original.length;const d=c===1&&h===1,g=c+u===t+1&&h+u===i+1;(d||g)&&u>=s+r?(d&&!g&&(u-=s),g&&!d&&(c+=s,h+=s,u-=s),a.push(new Xd(c,h,u,0,0))):u>=s*2+r&&(c+=s,h+=s,u-=s*2,a.push(new Xd(c,h,u,0,0)))}return a}get originalUnchangedRange(){return wt.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return wt.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,t,i,r,s){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=i,this._visibleLineCountTop=fi(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=fi(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=Et(this,l=>this.visibleLineCountTop.read(l)+this.visibleLineCountBottom.read(l)===this.lineCount&&!this.isDragged.read(l)),this.isDragged=fi(this,void 0);const o=Math.max(Math.min(r,this.lineCount),0),a=Math.max(Math.min(s,this.lineCount-r),0);qz(r===o),qz(s===a),this._visibleLineCountTop.set(o,void 0),this._visibleLineCountBottom.set(a,void 0)}setVisibleRanges(e,t){const i=[],r=new Ha(e.map(l=>l.modified)).subtractFrom(this.modifiedUnchangedRange);let s=this.originalLineNumber,o=this.modifiedLineNumber;const a=this.modifiedLineNumber+this.lineCount;if(r.ranges.length===0)this.showAll(t),i.push(this);else{let l=0;for(const c of r.ranges){const h=l===r.ranges.length-1;l++;const u=(h?a:c.endLineNumberExclusive)-o,d=new Xd(s,o,u,0,0);d.setHiddenModifiedRange(c,t),i.push(d),s=d.originalUnchangedRange.endLineNumberExclusive,o=d.modifiedUnchangedRange.endLineNumberExclusive}}return i}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return wt.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return wt.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){const i=e.startLineNumber-this.modifiedLineNumber,r=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(i,r,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(e=10,t){const i=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,i),t)}showMoreBelow(e=10,t){const i=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,i),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t,i){const r=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),s=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;t===0&&r<s||t===1?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+r,i):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+s,i)}showOriginalLine(e,t,i){const r=e-this.originalLineNumber,s=this.originalLineNumber+this.lineCount-e;t===0&&r<s||t===1?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+s-r,this.getMaxVisibleLineCountTop()),i):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+r-s,this.getMaxVisibleLineCountBottom()),i)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,i){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,i),this._visibleLineCountBottom.set(t,i)}}class P7e extends xe{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,t,i,r,s,o,a,l,c){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=i,this._diff=r,this._editor=s,this._viewLineCounts=o,this._originalTextModel=a,this._contextMenuService=l,this._clipboardService=c,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=gi.asClassName(Je.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const h=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${h}px`,this._diffActions.style.lineHeight=`${h}px`,this._marginDomNode.appendChild(this._diffActions);let u=0;const d=i.getOption(128)&&!ym,g=(p,b)=>{this._contextMenuService.showContextMenu({domForShadowRoot:d?i.getDomNode()??void 0:void 0,getAnchor:()=>({x:p,y:b}),getActions:()=>{const _=[],w=r.modified.isEmpty;return _.push(new xu("diff.clipboard.copyDeletedContent",w?r.original.length>1?C("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):C("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):r.original.length>1?C("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):C("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,async()=>{const k=this._originalTextModel.getValueInRange(r.original.toExclusiveRange());await this._clipboardService.writeText(k)})),r.original.length>1&&_.push(new xu("diff.clipboard.copyDeletedLineContent",w?C("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",r.original.startLineNumber+u):C("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",r.original.startLineNumber+u),void 0,!0,async()=>{let k=this._originalTextModel.getLineContent(r.original.startLineNumber+u);k===""&&(k=this._originalTextModel.getEndOfLineSequence()===0?`
`:`\r
`),await this._clipboardService.writeText(k)})),i.getOption(92)||_.push(new xu("diff.inline.revertChange",C("diff.inline.revertChange.label","Revert this change"),void 0,!0,async()=>{this._editor.revert(this._diff)})),_},autoSelectFirstItem:!0})};this._register(Er(this._diffActions,"mousedown",p=>{if(!p.leftButton)return;const{top:b,height:_}=qa(this._diffActions),w=Math.floor(h/3);p.preventDefault(),g(p.posx,b+_+w)})),this._register(i.onMouseMove(p=>{(p.target.type===8||p.target.type===5)&&p.target.detail.viewZoneId===this._getViewZoneId()?(u=this._updateLightBulbPosition(this._marginDomNode,p.event.browserEvent.y,h),this.visibility=!0):this.visibility=!1})),this._register(i.onMouseDown(p=>{p.event.leftButton&&(p.target.type===8||p.target.type===5)&&p.target.detail.viewZoneId===this._getViewZoneId()&&(p.event.preventDefault(),u=this._updateLightBulbPosition(this._marginDomNode,p.event.browserEvent.y,h),g(p.event.posx,p.event.posy+h))}))}_updateLightBulbPosition(e,t,i){const{top:r}=qa(e),s=t-r,o=Math.floor(s/i),a=o*i;if(this._diffActions.style.top=`${a}px`,this._viewLineCounts){let l=0;for(let c=0;c<this._viewLineCounts.length;c++)if(l+=this._viewLineCounts[c],o<l)return c}return o}}const Yj=Xm("diffEditorWidget",{createHTML:n=>n});function O7e(n,e,t,i){ps(i,e.fontInfo);const r=t.length>0,s=new g5(1e4);let o=0,a=0;const l=[];for(let d=0;d<n.lineTokens.length;d++){const g=d+1,p=n.lineTokens[d],b=n.lineBreakData[d],_=pl.filter(t,g,1,Number.MAX_SAFE_INTEGER);if(b){let w=0;for(const y of b.breakOffsets){const k=p.sliceAndInflate(w,y,0);o=Math.max(o,Zj(a,k,pl.extractWrapped(_,w,y),r,n.mightContainNonBasicASCII,n.mightContainRTL,e,s)),a++,w=y}l.push(b.breakOffsets.length)}else l.push(1),o=Math.max(o,Zj(a,p,_,r,n.mightContainNonBasicASCII,n.mightContainRTL,e,s)),a++}o+=e.scrollBeyondLastColumn;const c=s.build(),h=Yj?Yj.createHTML(c):c;i.innerHTML=h;const u=o*e.typicalHalfwidthCharacterWidth;return{heightInLines:a,minWidthInPx:u,viewLineCounts:l}}class B7e{constructor(e,t,i,r){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=i,this.mightContainRTL=r}}class lP{static fromEditor(e){const t=e.getOptions(),i=t.get(50),r=t.get(146);return new lP(e.getModel()?.getOptions().tabSize||0,i,t.get(33),i.typicalHalfwidthCharacterWidth,t.get(105),t.get(67),r.decorationsWidth,t.get(118),t.get(100),t.get(95),t.get(51))}constructor(e,t,i,r,s,o,a,l,c,h,u){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=i,this.typicalHalfwidthCharacterWidth=r,this.scrollBeyondLastColumn=s,this.lineHeight=o,this.lineDecorationsWidth=a,this.stopRenderingLineAfter=l,this.renderWhitespace=c,this.renderControlCharacters=h,this.fontLigatures=u}}function Zj(n,e,t,i,r,s,o,a){a.appendString('<div class="view-line'),i||a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(n*o.lineHeight)),a.appendString('px;width:1000000px;">');const l=e.getLineContent(),c=La.isBasicASCII(l,r),h=La.containsRTL(l,c,s),u=FR(new ub(o.fontInfo.isMonospace&&!o.disableMonospaceOptimizations,o.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,c,h,0,e,t,o.tabSize,0,o.fontInfo.spaceWidth,o.fontInfo.middotWidth,o.fontInfo.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==Cm.OFF,null),a);return a.appendString("</div>"),u.characterMapping.getHorizontalOffset(u.characterMapping.length)}var F7e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Xj=function(n,e){return function(t,i){e(t,i,n)}};let iN=class extends xe{constructor(e,t,i,r,s,o,a,l,c,h){super(),this._targetWindow=e,this._editors=t,this._diffModel=i,this._options=r,this._diffEditorWidget=s,this._canIgnoreViewZoneUpdateEvent=o,this._origViewZonesToIgnore=a,this._modViewZonesToIgnore=l,this._clipboardService=c,this._contextMenuService=h,this._originalTopPadding=fi(this,0),this._originalScrollOffset=fi(this,0),this._originalScrollOffsetAnimated=Hj(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=fi(this,0),this._modifiedScrollOffset=fi(this,0),this._modifiedScrollOffsetAnimated=Hj(this._targetWindow,this._modifiedScrollOffset,this._store);const u=fi("invalidateAlignmentsState",0),d=this._register(new Gs(()=>{u.set(u.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(k=>{this._canIgnoreViewZoneUpdateEvent()||d.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(k=>{this._canIgnoreViewZoneUpdateEvent()||d.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(k=>{(k.hasChanged(147)||k.hasChanged(67))&&d.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(k=>{(k.hasChanged(147)||k.hasChanged(67))&&d.schedule()}));const g=this._diffModel.map(k=>k?In(this,k.model.original.onDidChangeTokens,()=>k.model.original.tokenization.backgroundTokenizationState===2):void 0).map((k,L)=>k?.read(L)),p=Et(k=>{const L=this._diffModel.read(k),T=L?.diff.read(k);if(!L||!T)return null;u.read(k);const D=this._options.renderSideBySide.read(k);return Qj(this._editors.original,this._editors.modified,T.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,D)}),b=Et(k=>{const L=this._diffModel.read(k)?.movedTextToCompare.read(k);if(!L)return null;u.read(k);const T=L.changes.map(N=>new pJ(N));return Qj(this._editors.original,this._editors.modified,T,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)});function _(){const k=document.createElement("div");return k.className="diagonal-fill",k}const w=this._register(new rt);this.viewZones=ab(this,(k,L)=>{w.clear();const T=p.read(k)||[],N=[],D=[],O=this._modifiedTopPadding.read(k);O>0&&D.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:O,showInHiddenAreas:!0,suppressMouseDown:!0});const B=this._originalTopPadding.read(k);B>0&&N.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:B,showInHiddenAreas:!0,suppressMouseDown:!0});const G=this._options.renderSideBySide.read(k),H=G?void 0:this._editors.modified._getViewModel()?.createLineBreaksComputer();if(H){const ae=this._editors.original.getModel();for(const fe of T)if(fe.diff)for(let J=fe.originalRange.startLineNumber;J<fe.originalRange.endLineNumberExclusive;J++){if(J>ae.getLineCount())return{orig:N,mod:D};H?.addRequest(ae.getLineContent(J),null,null)}}const q=H?.finalize()??[];let X=0;const z=this._editors.modified.getOption(67),Q=this._diffModel.read(k)?.movedTextToCompare.read(k),te=this._editors.original.getModel()?.mightContainNonBasicASCII()??!1,se=this._editors.original.getModel()?.mightContainRTL()??!1,Y=lP.fromEditor(this._editors.modified);for(const ae of T)if(ae.diff&&!G&&(!this._options.useTrueInlineDiffRendering.read(k)||!cP(ae.diff))){if(!ae.originalRange.isEmpty){g.read(k);const J=document.createElement("div");J.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const ge=this._editors.original.getModel();if(ae.originalRange.endLineNumberExclusive-1>ge.getLineCount())return{orig:N,mod:D};const Le=new B7e(ae.originalRange.mapToLineArray(ot=>ge.tokenization.getLineTokens(ot)),ae.originalRange.mapToLineArray(ot=>q[X++]),te,se),We=[];for(const ot of ae.diff.innerChanges||[])We.push(new Nv(ot.originalRange.delta(-(ae.diff.original.startLineNumber-1)),XI.className,0));const Ie=O7e(Le,Y,We,J),Ze=document.createElement("div");if(Ze.className="inline-deleted-margin-view-zone",ps(Ze,Y.fontInfo),this._options.renderIndicators.read(k))for(let ot=0;ot<Ie.heightInLines;ot++){const Ot=document.createElement("div");Ot.className=`delete-sign ${gi.asClassName(dJ)}`,Ot.setAttribute("style",`position:absolute;top:${ot*z}px;width:${Y.lineDecorationsWidth}px;height:${z}px;right:0;`),Ze.appendChild(Ot)}let ct;w.add(new P7e(()=>bK(ct),Ze,this._editors.modified,ae.diff,this._diffEditorWidget,Ie.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let ot=0;ot<Ie.viewLineCounts.length;ot++){const Ot=Ie.viewLineCounts[ot];Ot>1&&N.push({afterLineNumber:ae.originalRange.startLineNumber+ot,domNode:_(),heightInPx:(Ot-1)*z,showInHiddenAreas:!0,suppressMouseDown:!0})}D.push({afterLineNumber:ae.modifiedRange.startLineNumber-1,domNode:J,heightInPx:Ie.heightInLines*z,minWidthInPx:Ie.minWidthInPx,marginDomNode:Ze,setZoneId(ot){ct=ot},showInHiddenAreas:!0,suppressMouseDown:!0})}const fe=document.createElement("div");fe.className="gutter-delete",N.push({afterLineNumber:ae.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:ae.modifiedHeightInPx,marginDomNode:fe,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const fe=ae.modifiedHeightInPx-ae.originalHeightInPx;if(fe>0){if(Q?.lineRangeMapping.original.delta(-1).deltaLength(2).contains(ae.originalRange.endLineNumberExclusive-1))continue;N.push({afterLineNumber:ae.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:fe,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let J=function(){const Le=document.createElement("div");return Le.className="arrow-revert-change "+gi.asClassName(Je.arrowRight),L.add(we(Le,"mousedown",We=>We.stopPropagation())),L.add(we(Le,"click",We=>{We.stopPropagation(),s.revert(ae.diff)})),ft("div",{},Le)};if(Q?.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(ae.modifiedRange.endLineNumberExclusive-1))continue;let ge;ae.diff&&ae.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(k)&&(ge=J()),D.push({afterLineNumber:ae.modifiedRange.endLineNumberExclusive-1,domNode:_(),heightInPx:-fe,marginDomNode:ge,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const ae of b.read(k)??[]){if(!Q?.lineRangeMapping.original.intersect(ae.originalRange)||!Q?.lineRangeMapping.modified.intersect(ae.modifiedRange))continue;const fe=ae.modifiedHeightInPx-ae.originalHeightInPx;fe>0?N.push({afterLineNumber:ae.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:fe,showInHiddenAreas:!0,suppressMouseDown:!0}):D.push({afterLineNumber:ae.modifiedRange.endLineNumberExclusive-1,domNode:_(),heightInPx:-fe,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:N,mod:D}});let y=!1;this._register(this._editors.original.onDidScrollChange(k=>{k.scrollLeftChanged&&!y&&(y=!0,this._editors.modified.setScrollLeft(k.scrollLeft),y=!1)})),this._register(this._editors.modified.onDidScrollChange(k=>{k.scrollLeftChanged&&!y&&(y=!0,this._editors.original.setScrollLeft(k.scrollLeft),y=!1)})),this._originalScrollTop=In(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=In(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register(yi(k=>{const L=this._originalScrollTop.read(k)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(k))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(k));L!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(L,1)})),this._register(yi(k=>{const L=this._modifiedScrollTop.read(k)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(k))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(k));L!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(L,1)})),this._register(yi(k=>{const L=this._diffModel.read(k)?.movedTextToCompare.read(k);let T=0;if(L){const N=this._editors.original.getTopForLineNumber(L.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();T=this._editors.modified.getTopForLineNumber(L.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-N}T>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(T,void 0)):T<0?(this._modifiedTopPadding.set(-T,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-T,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+T,void 0,!0)}))}};iN=F7e([Xj(8,PR),Xj(9,qu)],iN);function Qj(n,e,t,i,r,s){const o=new Ru(Jj(n,i)),a=new Ru(Jj(e,r)),l=n.getOption(67),c=e.getOption(67),h=[];let u=0,d=0;function g(p,b){for(;;){let _=o.peek(),w=a.peek();if(_&&_.lineNumber>=p&&(_=void 0),w&&w.lineNumber>=b&&(w=void 0),!_&&!w)break;const y=_?_.lineNumber-u:Number.MAX_VALUE,k=w?w.lineNumber-d:Number.MAX_VALUE;y<k?(o.dequeue(),w={lineNumber:_.lineNumber-u+d,heightInPx:0}):y>k?(a.dequeue(),_={lineNumber:w.lineNumber-d+u,heightInPx:0}):(o.dequeue(),a.dequeue()),h.push({originalRange:wt.ofLength(_.lineNumber,1),modifiedRange:wt.ofLength(w.lineNumber,1),originalHeightInPx:l+_.heightInPx,modifiedHeightInPx:c+w.heightInPx,diff:void 0})}}for(const p of t){let k=function(L,T,N=!1){if(L<y||T<w)return;if(_)_=!1;else if(!N&&(L===y||T===w))return;const D=new wt(y,L),O=new wt(w,T);if(D.isEmpty&&O.isEmpty)return;const B=o.takeWhile(H=>H.lineNumber<L)?.reduce((H,q)=>H+q.heightInPx,0)??0,G=a.takeWhile(H=>H.lineNumber<T)?.reduce((H,q)=>H+q.heightInPx,0)??0;h.push({originalRange:D,modifiedRange:O,originalHeightInPx:D.length*l+B,modifiedHeightInPx:O.length*c+G,diff:p.lineRangeMapping}),y=L,w=T};const b=p.lineRangeMapping;g(b.original.startLineNumber,b.modified.startLineNumber);let _=!0,w=b.modified.startLineNumber,y=b.original.startLineNumber;if(s)for(const L of b.innerChanges||[]){L.originalRange.startColumn>1&&L.modifiedRange.startColumn>1&&k(L.originalRange.startLineNumber,L.modifiedRange.startLineNumber);const T=n.getModel(),N=L.originalRange.endLineNumber<=T.getLineCount()?T.getLineMaxColumn(L.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;L.originalRange.endColumn<N&&k(L.originalRange.endLineNumber,L.modifiedRange.endLineNumber)}k(b.original.endLineNumberExclusive,b.modified.endLineNumberExclusive,!0),u=b.original.endLineNumberExclusive,d=b.modified.endLineNumberExclusive}return g(Number.MAX_VALUE,Number.MAX_VALUE),h}function Jj(n,e){const t=[],i=[],r=n.getOption(147).wrappingColumn!==-1,s=n._getViewModel().coordinatesConverter,o=n.getOption(67);if(r)for(let l=1;l<=n.getModel().getLineCount();l++){const c=s.getModelLineViewLineCount(l);c>1&&i.push({lineNumber:l,heightInPx:o*(c-1)})}for(const l of n.getWhitespaces()){if(e.has(l.id))continue;const c=l.afterLineNumber===0?0:s.convertViewPositionToModelPosition(new be(l.afterLineNumber,1)).lineNumber;t.push({lineNumber:c,heightInPx:l.height})}return l7e(t,i,l=>l.lineNumber,(l,c)=>({lineNumber:l.lineNumber,heightInPx:l.heightInPx+c.heightInPx}))}function cP(n){return n.innerChanges?n.innerChanges.every(e=>eU(e.modifiedRange)&&eU(e.originalRange)||e.originalRange.equalsRange(new oe(1,1,1,1))):!1}function eU(n){return n.startLineNumber===n.endLineNumber}const ow=class ow extends xe{constructor(e,t,i,r,s){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=i,this._modifiedEditorLayoutInfo=r,this._editors=s,this._originalScrollTop=In(this,this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=In(this,this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=Va("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=fi(this,0),this._modifiedViewZonesChangedSignal=Va("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=Va("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=ab(this,(h,u)=>{this._element.replaceChildren();const d=this._diffModel.read(h),g=d?.diff.read(h)?.movedTexts;if(!g||g.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(h);const p=this._originalEditorLayoutInfo.read(h),b=this._modifiedEditorLayoutInfo.read(h);if(!p||!b){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(h),this._originalViewZonesChangedSignal.read(h);const _=g.map(D=>{function O(se,Y){const ae=Y.getTopForLineNumber(se.startLineNumber,!0),fe=Y.getTopForLineNumber(se.endLineNumberExclusive,!0);return(ae+fe)/2}const B=O(D.lineRangeMapping.original,this._editors.original),G=this._originalScrollTop.read(h),H=O(D.lineRangeMapping.modified,this._editors.modified),q=this._modifiedScrollTop.read(h),X=B-G,z=H-q,Q=Math.min(B,H),te=Math.max(B,H);return{range:new Pt(Q,te),from:X,to:z,fromWithoutScroll:B,toWithoutScroll:H,move:D}});_.sort(mue(_l(D=>D.fromWithoutScroll>D.toWithoutScroll,pue),_l(D=>D.fromWithoutScroll>D.toWithoutScroll?D.fromWithoutScroll:-D.toWithoutScroll,ef)));const w=hP.compute(_.map(D=>D.range)),y=10,k=p.verticalScrollbarWidth,L=(w.getTrackCount()-1)*10+y*2,T=k+L+(b.contentLeft-ow.movedCodeBlockPadding);let N=0;for(const D of _){const O=w.getTrack(N),B=k+y+O*10,G=15,H=15,q=T,X=b.glyphMarginWidth+b.lineNumbersWidth,z=18,Q=document.createElementNS("http://www.w3.org/2000/svg","rect");Q.classList.add("arrow-rectangle"),Q.setAttribute("x",`${q-X}`),Q.setAttribute("y",`${D.to-z/2}`),Q.setAttribute("width",`${X}`),Q.setAttribute("height",`${z}`),this._element.appendChild(Q);const te=document.createElementNS("http://www.w3.org/2000/svg","g"),se=document.createElementNS("http://www.w3.org/2000/svg","path");se.setAttribute("d",`M 0 ${D.from} L ${B} ${D.from} L ${B} ${D.to} L ${q-H} ${D.to}`),se.setAttribute("fill","none"),te.appendChild(se);const Y=document.createElementNS("http://www.w3.org/2000/svg","polygon");Y.classList.add("arrow"),u.add(yi(ae=>{se.classList.toggle("currentMove",D.move===d.activeMovedText.read(ae)),Y.classList.toggle("currentMove",D.move===d.activeMovedText.read(ae))})),Y.setAttribute("points",`${q-H},${D.to-G/2} ${q},${D.to} ${q-H},${D.to+G/2}`),te.appendChild(Y),this._element.appendChild(te),N++}this.width.set(L,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(Mt(()=>this._element.remove())),this._register(yi(h=>{const u=this._originalEditorLayoutInfo.read(h),d=this._modifiedEditorLayoutInfo.read(h);!u||!d||(this._element.style.left=`${u.width-u.verticalScrollbarWidth}px`,this._element.style.height=`${u.height}px`,this._element.style.width=`${u.verticalScrollbarWidth+u.contentLeft-ow.movedCodeBlockPadding+this.width.read(h)}px`)})),this._register(N5(this._state));const o=Et(h=>{const d=this._diffModel.read(h)?.diff.read(h);return d?d.movedTexts.map(g=>({move:g,original:new y0(hk(g.lineRangeMapping.original.startLineNumber-1),18),modified:new y0(hk(g.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register(n4(this._editors.original,o.map(h=>h.map(u=>u.original)))),this._register(n4(this._editors.modified,o.map(h=>h.map(u=>u.modified)))),this._register(hc((h,u)=>{const d=o.read(h);for(const g of d)u.add(new tU(this._editors.original,g.original,g.move,"original",this._diffModel.get())),u.add(new tU(this._editors.modified,g.modified,g.move,"modified",this._diffModel.get()))}));const a=Va("original.onDidFocusEditorWidget",h=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>h(void 0),0))),l=Va("modified.onDidFocusEditorWidget",h=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>h(void 0),0)));let c="modified";this._register(E5({createEmptyChangeSummary:()=>{},handleChange:(h,u)=>(h.didChange(a)&&(c="original"),h.didChange(l)&&(c="modified"),!0)},h=>{a.read(h),l.read(h);const u=this._diffModel.read(h);if(!u)return;const d=u.diff.read(h);let g;if(d&&c==="original"){const p=this._editors.originalCursor.read(h);p&&(g=d.movedTexts.find(b=>b.lineRangeMapping.original.contains(p.lineNumber)))}if(d&&c==="modified"){const p=this._editors.modifiedCursor.read(h);p&&(g=d.movedTexts.find(b=>b.lineRangeMapping.modified.contains(p.lineNumber)))}g!==u.movedTextToCompare.get()&&u.movedTextToCompare.set(void 0,void 0),u.setActiveMovedText(g)}))}};ow.movedCodeBlockPadding=4;let r1=ow;class hP{static compute(e){const t=[],i=[];for(const r of e){let s=t.findIndex(o=>!o.intersectsStrict(r));s===-1&&(t.length>=6?s=Kpe(t,_l(a=>a.intersectWithRangeLength(r),ef)):(s=t.length,t.push(new CA))),t[s].addRange(r),i.push(s)}return new hP(t.length,i)}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class tU extends nP{constructor(e,t,i,r,s){const o=di("div.diff-hidden-lines-widget");super(e,t,o.root),this._editor=e,this._move=i,this._kind=r,this._diffModel=s,this._nodes=di("div.diff-moved-code-block",{style:{marginRight:"4px"}},[di("div.text-content@textContent"),di("div.action-bar@actionBar")]),o.root.appendChild(this._nodes.root);const a=In(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register(vf(this._nodes.root,{paddingRight:a.map(d=>d.verticalScrollbarWidth)}));let l;i.changes.length>0?l=this._kind==="original"?C("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):C("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):l=this._kind==="original"?C("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):C("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const c=this._register(new Tu(this._nodes.actionBar,{highlightToggledItems:!0})),h=new xu("",l,"",!1);c.push(h,{icon:!1,label:!0});const u=new xu("","Compare",gi.asClassName(Je.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===i?void 0:this._move,void 0)});this._register(yi(d=>{const g=this._diffModel.movedTextToCompare.read(d)===i;u.checked=g})),c.push(u,{icon:!1,label:!0})}}class W7e extends xe{constructor(e,t,i,r){super(),this._editors=e,this._diffModel=t,this._options=i,this._decorations=Et(this,s=>{const o=this._diffModel.read(s),a=o?.diff.read(s);if(!a)return null;const l=this._diffModel.read(s).movedTextToCompare.read(s),c=this._options.renderIndicators.read(s),h=this._options.showEmptyDecorations.read(s),u=[],d=[];if(!l)for(const p of a.mappings)if(p.lineRangeMapping.original.isEmpty||u.push({range:p.lineRangeMapping.original.toInclusiveRange(),options:c?Uj:Gj}),p.lineRangeMapping.modified.isEmpty||d.push({range:p.lineRangeMapping.modified.toInclusiveRange(),options:c?jj:qj}),p.lineRangeMapping.modified.isEmpty||p.lineRangeMapping.original.isEmpty)p.lineRangeMapping.original.isEmpty||u.push({range:p.lineRangeMapping.original.toInclusiveRange(),options:T7e}),p.lineRangeMapping.modified.isEmpty||d.push({range:p.lineRangeMapping.modified.toInclusiveRange(),options:k7e});else{const b=this._options.useTrueInlineDiffRendering.read(s)&&cP(p.lineRangeMapping);for(const _ of p.lineRangeMapping.innerChanges||[])if(p.lineRangeMapping.original.contains(_.originalRange.startLineNumber)&&u.push({range:_.originalRange,options:_.originalRange.isEmpty()&&h?D7e:XI}),p.lineRangeMapping.modified.contains(_.modifiedRange.startLineNumber)&&d.push({range:_.modifiedRange,options:_.modifiedRange.isEmpty()&&h&&!b?L7e:Kj}),b){const w=o.model.original.getValueInRange(_.originalRange);d.push({range:_.modifiedRange,options:{description:"deleted-text",before:{content:w,inlineClassName:"inline-deleted-text"},zIndex:1e5,showIfCollapsed:!0}})}}if(l)for(const p of l.changes){const b=p.original.toInclusiveRange();b&&u.push({range:b,options:c?Uj:Gj});const _=p.modified.toInclusiveRange();_&&d.push({range:_,options:c?jj:qj});for(const w of p.innerChanges||[])u.push({range:w.originalRange,options:XI}),d.push({range:w.modifiedRange,options:Kj})}const g=this._diffModel.read(s).activeMovedText.read(s);for(const p of a.movedTexts)u.push({range:p.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(p===g?" currentMove":""),blockPadding:[r1.movedCodeBlockPadding,0,r1.movedCodeBlockPadding,r1.movedCodeBlockPadding]}}),d.push({range:p.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(p===g?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:u,modifiedDecorations:d}}),this._register(i4(this._editors.original,this._decorations.map(s=>s?.originalDecorations||[]))),this._register(i4(this._editors.modified,this._decorations.map(s=>s?.modifiedDecorations||[])))}}class z7e{resetSash(){this._sashRatio.set(void 0,void 0)}constructor(e,t){this._options=e,this.dimensions=t,this.sashLeft=JA(this,i=>{const r=this._sashRatio.read(i)??this._options.splitViewDefaultRatio.read(i);return this._computeSashLeft(r,i)},(i,r)=>{const s=this.dimensions.width.get();this._sashRatio.set(i/s,r)}),this._sashRatio=fi(this,void 0)}_computeSashLeft(e,t){const i=this.dimensions.width.read(t),r=Math.floor(this._options.splitViewDefaultRatio.read(t)*i),s=this._options.enableSplitViewResizing.read(t)?Math.floor(e*i):r,o=100;return i<=o*2?r:s<o?o:s>i-o?i-o:s}}class bJ extends xe{constructor(e,t,i,r,s,o){super(),this._domNode=e,this._dimensions=t,this._enabled=i,this._boundarySashes=r,this.sashLeft=s,this._resetSash=o,this._sash=this._register(new Fa(this._domNode,{getVerticalSashTop:a=>0,getVerticalSashLeft:a=>this.sashLeft.get(),getVerticalSashHeight:a=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(a=>{this.sashLeft.set(this._startSashPosition+(a.currentX-a.startX),void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._resetSash())),this._register(yi(a=>{const l=this._boundarySashes.read(a);l&&(this._sash.orthogonalEndSash=l.bottom)})),this._register(yi(a=>{const l=this._enabled.read(a);this._sash.state=l?3:0,this.sashLeft.read(a),this._dimensions.height.read(a),this._sash.layout()}))}}class H7e extends xe{constructor(e,t,i){super(),this._editor=e,this._domNode=t,this.itemProvider=i,this.scrollTop=In(this,this._editor.onDidScrollChange,o=>this._editor.getScrollTop()),this.isScrollTopZero=this.scrollTop.map(o=>o===0),this.modelAttached=In(this,this._editor.onDidChangeModel,o=>this._editor.hasModel()),this.editorOnDidChangeViewZones=Va("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=Va("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=eR("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const r=this._domNode.appendChild(di("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),s=new ResizeObserver(()=>{pr(o=>{this.domNodeSizeChanged.trigger(o)})});s.observe(this._domNode),this._register(Mt(()=>s.disconnect())),this._register(yi(o=>{r.className=this.isScrollTopZero.read(o)?"":"scroll-decoration"})),this._register(yi(o=>this.render(o)))}dispose(){super.dispose(),Ks(this._domNode)}render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);const t=this.scrollTop.read(e),i=this._editor.getVisibleRanges(),r=new Set(this.views.keys()),s=Pt.ofStartAndLength(0,this._domNode.clientHeight);if(!s.isEmpty)for(const o of i){const a=new wt(o.startLineNumber,o.endLineNumber+1),l=this.itemProvider.getIntersectingGutterItems(a,e);pr(c=>{for(const h of l){if(!h.range.intersect(a))continue;r.delete(h.id);let u=this.views.get(h.id);if(u)u.item.set(h,c);else{const b=document.createElement("div");this._domNode.appendChild(b);const _=fi("item",h),w=this.itemProvider.createView(_,b);u=new V7e(_,w,b),this.views.set(h.id,u)}const d=h.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(h.range.startLineNumber,!0)-t:this._editor.getBottomForLineNumber(h.range.startLineNumber-1,!1)-t,p=(h.range.endLineNumberExclusive===1?Math.max(d,this._editor.getTopForLineNumber(h.range.startLineNumber,!1)-t):Math.max(d,this._editor.getBottomForLineNumber(h.range.endLineNumberExclusive-1,!0)-t))-d;u.domNode.style.top=`${d}px`,u.domNode.style.height=`${p}px`,u.gutterItemView.layout(Pt.ofStartAndLength(d,p),s)}})}for(const o of r){const a=this.views.get(o);a.gutterItemView.dispose(),a.domNode.remove(),this.views.delete(o)}}}class V7e{constructor(e,t,i){this.item=e,this.gutterItemView=t,this.domNode=i}}class _J extends km{constructor(e){super(),this._getContext=e}runAction(e,t){const i=this._getContext();return super.runAction(e,i)}}class iU extends ZY{constructor(e){super(),this._textModel=e}getValueOfRange(e){return this._textModel.getValueInRange(e)}get length(){const e=this._textModel.getLineCount(),t=this._textModel.getLineLength(e);return new gf(e-1,t)}}class $7e extends xe{constructor(e,t,i={orientation:0}){super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new Hde),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new rt),i.hoverDelegate=i.hoverDelegate??this._register(tR()),this.options=i,this.toggleMenuAction=this._register(new Xw(()=>this.toggleMenuActionViewItem?.show(),i.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new Tu(this.element,{orientation:i.orientation,ariaLabel:i.ariaLabel,actionRunner:i.actionRunner,allowContextMenu:i.allowContextMenu,highlightToggledItems:i.highlightToggledItems,hoverDelegate:i.hoverDelegate,actionViewItemProvider:(r,s)=>{if(r.id===Xw.ID)return this.toggleMenuActionViewItem=new dk(r,r.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:gi.asClassNameArray(i.moreIcon??Je.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(i.actionViewItemProvider){const o=i.actionViewItemProvider(r,s);if(o)return o}if(r instanceof r5){const o=new dk(r,r.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:r.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return o.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(o),this.disposables.add(this._onDidChangeDropdownVisibility.add(o.onDidChangeVisibility)),o}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(e){return this.actionBar.getAction(e)}setActions(e,t){this.clear();const i=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),i.push(this.toggleMenuAction)),i.forEach(r=>{this.actionBar.push(r,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(r)})})}getKeybindingLabel(e){return this.options.getKeyBinding?.(e)?.getLabel()??void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}const zL=class zL extends xu{constructor(e,t){t=t||C("moreActions","More Actions..."),super(zL.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}};zL.ID="toolbar.toggle.more";let Xw=zL;var vJ=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},fl=function(n,e){return function(t,i){e(t,i,n)}};let nN=class extends $7e{constructor(e,t,i,r,s,o,a,l){super(e,s,{getKeyBinding:h=>o.lookupKeybinding(h.id)??void 0,...t,allowContextMenu:!0,skipTelemetry:typeof t?.telemetrySource=="string"}),this._options=t,this._menuService=i,this._contextKeyService=r,this._contextMenuService=s,this._keybindingService=o,this._commandService=a,this._sessionDisposables=this._store.add(new rt);const c=t?.telemetrySource;c&&this._store.add(this.actionBar.onDidRun(h=>l.publicLog2("workbenchActionExecuted",{id:h.action.id,from:c})))}setActions(e,t=[],i){this._sessionDisposables.clear();const r=e.slice(),s=t.slice(),o=[];let a=0;const l=[];let c=!1;if(this._options?.hiddenItemStrategy!==-1)for(let h=0;h<r.length;h++){const u=r[h];!(u instanceof ku)&&!(u instanceof gv)||u.hideActions&&(o.push(u.hideActions.toggle),u.hideActions.toggle.checked&&a++,u.hideActions.isHidden&&(c=!0,r[h]=void 0,this._options?.hiddenItemStrategy!==0&&(l[h]=u)))}if(this._options?.overflowBehavior!==void 0){const h=PCe(new Set(this._options.overflowBehavior.exempted),wi.map(r,g=>g?.id)),u=this._options.overflowBehavior.maxItems-h.size;let d=0;for(let g=0;g<r.length;g++){const p=r[g];p&&(d++,!h.has(p.id)&&d>=u&&(r[g]=void 0,l[g]=p))}}QW(r),QW(l),super.setActions(r,Ps.join(l,s)),(o.length>0||r.length>0)&&this._sessionDisposables.add(we(this.getElement(),"contextmenu",h=>{const u=new ac(lt(this.getElement()),h),d=this.getItemAction(u.target);if(!d)return;u.preventDefault(),u.stopPropagation();const g=[];if(d instanceof ku&&d.menuKeybinding)g.push(d.menuKeybinding);else if(!(d instanceof gv||d instanceof Xw)){const b=!!this._keybindingService.lookupKeybinding(d.id);g.push(BQ(this._commandService,this._keybindingService,d.id,void 0,b))}if(o.length>0){let b=!1;if(a===1&&this._options?.hiddenItemStrategy===0){b=!0;for(let _=0;_<o.length;_++)if(o[_].checked){o[_]=F0({id:d.id,label:d.label,checked:!0,enabled:!1,run(){}});break}}if(!b&&(d instanceof ku||d instanceof gv)){if(!d.hideActions)return;g.push(d.hideActions.hide)}else g.push(F0({id:"label",label:C("hide","Hide"),enabled:!1,run(){}}))}const p=Ps.join(g,o);this._options?.resetMenu&&!i&&(i=[this._options.resetMenu]),c&&i&&(p.push(new Ps),p.push(F0({id:"resetThisMenu",label:C("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(i)}))),p.length!==0&&this._contextMenuService.showContextMenu({getAnchor:()=>u,getActions:()=>p,menuId:this._options?.contextMenu,menuActionOptions:{renderShortTitle:!0,...this._options?.menuOptions},skipTelemetry:typeof this._options?.telemetrySource=="string",contextKeyService:this._contextKeyService})}))}};nN=vJ([fl(2,Ym),fl(3,Ei),fl(4,qu),fl(5,ns),fl(6,Ta),fl(7,Zm)],nN);let s4=class extends nN{constructor(e,t,i,r,s,o,a,l,c){super(e,{resetMenu:t,...i},r,s,o,a,l,c),this._onDidChangeMenuItems=this._store.add(new de),this.onDidChangeMenuItems=this._onDidChangeMenuItems.event;const h=this._store.add(r.createMenu(t,s,{emitEventsForSubmenuChanges:!0})),u=()=>{const d=[],g=[];Uye(h,i?.menuOptions,{primary:d,secondary:g},i?.toolbarOptions?.primaryGroup,i?.toolbarOptions?.shouldInlineSubmenu,i?.toolbarOptions?.useSeparatorsInPrimaryActions),e.classList.toggle("has-no-actions",d.length===0&&g.length===0),super.setActions(d,g)};this._store.add(h.onDidChange(()=>{u(),this._onDidChangeMenuItems.fire(this)})),u()}setActions(){throw new Ti("This toolbar is populated from a menu.")}};s4=vJ([fl(3,Ym),fl(4,Ei),fl(5,qu),fl(6,ns),fl(7,Ta),fl(8,Zm)],s4);var wJ=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},tx=function(n,e){return function(t,i){e(t,i,n)}};const j6=[],nS=35;let rN=class extends xe{constructor(e,t,i,r,s,o,a,l,c){super(),this._diffModel=t,this._editors=i,this._options=r,this._sashLayout=s,this._boundarySashes=o,this._instantiationService=a,this._contextKeyService=l,this._menuService=c,this._menu=this._register(this._menuService.createMenu(es.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=In(this,this._menu.onDidChange,()=>this._menu.getActions()),this._hasActions=this._actions.map(h=>h.length>0),this._showSash=Et(this,h=>this._options.renderSideBySide.read(h)&&this._hasActions.read(h)),this.width=Et(this,h=>this._hasActions.read(h)?nS:0),this.elements=di("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:nS+"px"}},[]),this._currentDiff=Et(this,h=>{const u=this._diffModel.read(h);if(!u)return;const d=u.diff.read(h)?.mappings,g=this._editors.modifiedCursor.read(h);if(g)return d?.find(p=>p.lineRangeMapping.modified.contains(g.lineNumber))}),this._selectedDiffs=Et(this,h=>{const d=this._diffModel.read(h)?.diff.read(h);if(!d)return j6;const g=this._editors.modifiedSelections.read(h);if(g.every(w=>w.isEmpty()))return j6;const p=new Ha(g.map(w=>wt.fromRangeInclusive(w))),_=d.mappings.filter(w=>w.lineRangeMapping.innerChanges&&p.intersects(w.lineRangeMapping.modified)).map(w=>({mapping:w,rangeMappings:w.lineRangeMapping.innerChanges.filter(y=>g.some(k=>oe.areIntersecting(y.modifiedRange,k)))}));return _.length===0||_.every(w=>w.rangeMappings.length===0)?j6:_}),this._register(c7e(e,this.elements.root)),this._register(we(this.elements.root,"click",()=>{this._editors.modified.focus()})),this._register(vf(this.elements.root,{display:this._hasActions.map(h=>h?"block":"none")})),Fc(this,h=>this._showSash.read(h)?new bJ(e,this._sashLayout.dimensions,this._options.enableSplitViewResizing,this._boundarySashes,JA(this,d=>this._sashLayout.sashLeft.read(d)-nS,(d,g)=>this._sashLayout.sashLeft.set(d+nS,g)),()=>this._sashLayout.resetSash()):void 0).recomputeInitiallyAndOnChange(this._store),this._register(new H7e(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(h,u)=>{const d=this._diffModel.read(u);if(!d)return[];const g=d.diff.read(u);if(!g)return[];const p=this._selectedDiffs.read(u);if(p.length>0){const _=ka.fromRangeMappings(p.flatMap(w=>w.rangeMappings));return[new nU(_,!0,es.DiffEditorSelectionToolbar,void 0,d.model.original.uri,d.model.modified.uri)]}const b=this._currentDiff.read(u);return g.mappings.map(_=>new nU(_.lineRangeMapping.withInnerChangesFromLineRanges(),_.lineRangeMapping===b?.lineRangeMapping,es.DiffEditorHunkToolbar,void 0,d.model.original.uri,d.model.modified.uri))},createView:(h,u)=>this._instantiationService.createInstance(sN,h,u,this)})),this._register(we(this.elements.gutter,Be.MOUSE_WHEEL,h=>{this._editors.modified.getOption(104).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(h)},{passive:!1}))}computeStagedValue(e){const t=e.innerChanges??[],i=new iU(this._editors.modifiedModel.get()),r=new iU(this._editors.original.getModel());return new Zpe(t.map(a=>a.toTextEdit(i))).apply(r)}layout(e){this.elements.gutter.style.left=e+"px"}};rN=wJ([tx(6,Ni),tx(7,Ei),tx(8,Ym)],rN);class nU{constructor(e,t,i,r,s,o){this.mapping=e,this.showAlways=t,this.menuId=i,this.rangeOverride=r,this.originalUri=s,this.modifiedUri=o}get id(){return this.mapping.modified.toString()}get range(){return this.rangeOverride??this.mapping.modified}}let sN=class extends xe{constructor(e,t,i,r){super(),this._item=e,this._elements=di("div.gutterItem",{style:{height:"20px",width:"34px"}},[di("div.background@background",{},[]),di("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,o=>o.showAlways),this._menuId=this._item.map(this,o=>o.menuId),this._isSmall=fi(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;const s=this._register(r.createInstance(Tw,"element",!0,{position:{hoverPosition:1}}));this._register(X_(t,this._elements.root)),this._register(yi(o=>{const a=this._showAlways.read(o);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",a),setTimeout(()=>{this._elements.root.classList.toggle("noTransition",!1)},0)})),this._register(hc((o,a)=>{this._elements.buttons.replaceChildren();const l=a.add(r.createInstance(s4,this._elements.buttons,this._menuId.read(o),{orientation:1,hoverDelegate:s,toolbarOptions:{primaryGroup:c=>c.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(o)?1:3},hiddenItemStrategy:0,actionRunner:new _J(()=>{const c=this._item.get(),h=c.mapping;return{mapping:h,originalWithModifiedChanges:i.computeStagedValue(h),originalUri:c.originalUri,modifiedUri:c.modifiedUri}}),menuOptions:{shouldForwardArgs:!0}}));a.add(l.onDidChangeMenuItems(()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)}))}))}layout(e,t){this._lastItemRange=e,this._lastViewRange=t;let i=this._elements.buttons.clientHeight;this._isSmall.set(this._item.get().mapping.original.startLineNumber===1&&e.length<30,void 0),i=this._elements.buttons.clientHeight;const r=e.length/2-i/2,s=i;let o=e.start+r;const a=Pt.tryCreate(s,t.endExclusive-s-i),l=Pt.tryCreate(e.start+s,e.endExclusive-i-s);l&&a&&l.start<l.endExclusive&&(o=a.clip(o),o=l.clip(o)),this._elements.buttons.style.top=`${o-e.start}px`}};sN=wJ([tx(3,Ni)],sN);function Qw(n){return oN.get(n)}const Pd=class Pd extends xe{static get(e){let t=Pd._map.get(e);if(!t){t=new Pd(e),Pd._map.set(e,t);const i=e.onDidDispose(()=>{const r=Pd._map.get(e);r&&(Pd._map.delete(e),r.dispose(),i.dispose())})}return t}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&(this._currentTransaction=new Oy(()=>{}))}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){const e=this._currentTransaction;this._currentTransaction=void 0,e.finish()}}constructor(e){super(),this.editor=e,this._updateCounter=0,this._currentTransaction=void 0,this._model=fi(this,this.editor.getModel()),this.model=this._model,this.isReadonly=In(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(92)),this._versionId=u9({owner:this,lazy:!0},this.editor.getModel()?.getVersionId()??null),this.versionId=this._versionId,this._selections=u9({owner:this,equalsFn:FV(Awe($i.selectionsEqual)),lazy:!0},this.editor.getSelections()??null),this.selections=this._selections,this.isFocused=In(this,t=>{const i=this.editor.onDidFocusEditorWidget(t),r=this.editor.onDidBlurEditorWidget(t);return{dispose(){i.dispose(),r.dispose()}}},()=>this.editor.hasWidgetFocus()),this.value=JA(this,t=>(this.versionId.read(t),this.model.read(t)?.getValue()??""),(t,i)=>{const r=this.model.get();r!==null&&t!==r.getValue()&&r.setValue(t)}),this.valueIsEmpty=Et(this,t=>(this.versionId.read(t),this.editor.getModel()?.getValueLength()===0)),this.cursorSelection=T5({owner:this,equalsFn:FV($i.selectionsEqual)},t=>this.selections.read(t)?.[0]??null),this.onDidType=eR(this),this.scrollTop=In(this.editor.onDidScrollChange,()=>this.editor.getScrollTop()),this.scrollLeft=In(this.editor.onDidScrollChange,()=>this.editor.getScrollLeft()),this.layoutInfo=In(this.editor.onDidLayoutChange,()=>this.editor.getLayoutInfo()),this.layoutInfoContentLeft=this.layoutInfo.map(t=>t.contentLeft),this.layoutInfoDecorationsLeft=this.layoutInfo.map(t=>t.decorationsLeft),this.contentWidth=In(this.editor.onDidContentSizeChange,()=>this.editor.getContentWidth()),this._overlayWidgetCounter=0,this._register(this.editor.onBeginUpdate(()=>this._beginUpdate())),this._register(this.editor.onEndUpdate(()=>this._endUpdate())),this._register(this.editor.onDidChangeModel(()=>{this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidType(t=>{this._beginUpdate();try{this._forceUpdate(),this.onDidType.trigger(this._currentTransaction,t)}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeModelContent(t=>{this._beginUpdate();try{this._versionId.set(this.editor.getModel()?.getVersionId()??null,this._currentTransaction,t),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeCursorSelection(t=>{this._beginUpdate();try{this._selections.set(this.editor.getSelections(),this._currentTransaction,t),this._forceUpdate()}finally{this._endUpdate()}}))}forceUpdate(e){this._beginUpdate();try{return this._forceUpdate(),e?e(this._currentTransaction):void 0}finally{this._endUpdate()}}_forceUpdate(){this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._versionId.set(this.editor.getModel()?.getVersionId()??null,this._currentTransaction,void 0),this._selections.set(this.editor.getSelections(),this._currentTransaction,void 0)}finally{this._endUpdate()}}getOption(e){return In(this,t=>this.editor.onDidChangeConfiguration(i=>{i.hasChanged(e)&&t(void 0)}),()=>this.editor.getOption(e))}setDecorations(e){const t=new rt,i=this.editor.createDecorationsCollection();return t.add(D5({owner:this,debugName:()=>`Apply decorations from ${e.debugName}`},r=>{const s=e.read(r);i.set(s)})),t.add({dispose:()=>{i.clear()}}),t}createOverlayWidget(e){const t="observableOverlayWidget"+this._overlayWidgetCounter++,i={getDomNode:()=>e.domNode,getPosition:()=>e.position.get(),getId:()=>t,allowEditorOverflow:e.allowEditorOverflow,getMinContentWidthInPx:()=>e.minContentWidthInPx.get()};this.editor.addOverlayWidget(i);const r=yi(s=>{e.position.read(s),e.minContentWidthInPx.read(s),this.editor.layoutOverlayWidget(i)});return Mt(()=>{r.dispose(),this.editor.removeOverlayWidget(i)})}};Pd._map=new Map;let oN=Pd;var j7e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},U7e=function(n,e){return function(t,i){e(t,i,n)}},ix,bm;let aN=(bm=class extends xe{static setBreadcrumbsSourceFactory(e){this._breadcrumbsSourceFactory.set(e,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(e,t,i,r){super(),this._editors=e,this._diffModel=t,this._options=i,this._instantiationService=r,this._modifiedOutlineSource=Fc(this,l=>{const c=this._editors.modifiedModel.read(l),h=ix._breadcrumbsSourceFactory.read(l);return!c||!h?void 0:h(c,this._instantiationService)}),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();pr(h=>{for(const u of this._editors.original.getSelections()||[])c?.ensureOriginalLineIsVisible(u.getStartPosition().lineNumber,0,h),c?.ensureOriginalLineIsVisible(u.getEndPosition().lineNumber,0,h)})})),this._register(this._editors.modified.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();pr(h=>{for(const u of this._editors.modified.getSelections()||[])c?.ensureModifiedLineIsVisible(u.getStartPosition().lineNumber,0,h),c?.ensureModifiedLineIsVisible(u.getEndPosition().lineNumber,0,h)})}));const s=this._diffModel.map((l,c)=>{const h=l?.unchangedRegions.read(c)??[];return h.length===1&&h[0].modifiedLineNumber===1&&h[0].lineCount===this._editors.modifiedModel.read(c)?.getLineCount()?[]:h});this.viewZones=ab(this,(l,c)=>{const h=this._modifiedOutlineSource.read(l);if(!h)return{origViewZones:[],modViewZones:[]};const u=[],d=[],g=this._options.renderSideBySide.read(l),p=this._options.compactMode.read(l),b=s.read(l);for(let _=0;_<b.length;_++){const w=b[_];if(!w.shouldHideControls(l)&&!(p&&(_===0||_===b.length-1)))if(p){{const y=Et(this,L=>w.getHiddenOriginalRange(L).startLineNumber-1),k=new y0(y,12);u.push(k),c.add(new rU(this._editors.original,k,w,!g))}{const y=Et(this,L=>w.getHiddenModifiedRange(L).startLineNumber-1),k=new y0(y,12);d.push(k),c.add(new rU(this._editors.modified,k,w))}}else{{const y=Et(this,L=>w.getHiddenOriginalRange(L).startLineNumber-1),k=new y0(y,24);u.push(k),c.add(new sU(this._editors.original,k,w,w.originalUnchangedRange,!g,h,L=>this._diffModel.get().ensureModifiedLineIsVisible(L,2,void 0),this._options))}{const y=Et(this,L=>w.getHiddenModifiedRange(L).startLineNumber-1),k=new y0(y,24);d.push(k),c.add(new sU(this._editors.modified,k,w,w.modifiedUnchangedRange,!1,h,L=>this._diffModel.get().ensureModifiedLineIsVisible(L,2,void 0),this._options))}}}return{origViewZones:u,modViewZones:d}});const o={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},a={description:"Fold Unchanged",glyphMarginHoverMessage:new tX(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(C("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+gi.asClassName(Je.fold),zIndex:10001};this._register(i4(this._editors.original,Et(this,l=>{const c=s.read(l),h=c.map(u=>({range:u.originalUnchangedRange.toInclusiveRange(),options:o}));for(const u of c)u.shouldHideControls(l)&&h.push({range:oe.fromPositions(new be(u.originalLineNumber,1)),options:a});return h}))),this._register(i4(this._editors.modified,Et(this,l=>{const c=s.read(l),h=c.map(u=>({range:u.modifiedUnchangedRange.toInclusiveRange(),options:o}));for(const u of c)u.shouldHideControls(l)&&h.push({range:wt.ofLength(u.modifiedLineNumber,1).toInclusiveRange(),options:a});return h}))),this._register(yi(l=>{const c=s.read(l);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(c.map(h=>h.getHiddenOriginalRange(l).toInclusiveRange()).filter(w1)),this._editors.modified.setHiddenAreas(c.map(h=>h.getHiddenModifiedRange(l).toInclusiveRange()).filter(w1))}finally{this._isUpdatingHiddenAreas=!1}})),this._register(this._editors.modified.onMouseUp(l=>{if(!l.event.rightButton&&l.target.position&&l.target.element?.className.includes("fold-unchanged")){const c=l.target.position.lineNumber,h=this._diffModel.get();if(!h)return;const u=h.unchangedRegions.get().find(d=>d.modifiedUnchangedRange.includes(c));if(!u)return;u.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(l=>{if(!l.event.rightButton&&l.target.position&&l.target.element?.className.includes("fold-unchanged")){const c=l.target.position.lineNumber,h=this._diffModel.get();if(!h)return;const u=h.unchangedRegions.get().find(d=>d.originalUnchangedRange.includes(c));if(!u)return;u.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}}))}},ix=bm,bm._breadcrumbsSourceFactory=fi(ix,()=>({dispose(){},getBreadcrumbItems(e,t){return[]}})),bm);aN=ix=j7e([U7e(3,Ni)],aN);class rU extends nP{constructor(e,t,i,r=!1){const s=di("div.diff-hidden-lines-widget");super(e,t,s.root),this._unchangedRegion=i,this._hide=r,this._nodes=di("div.diff-hidden-lines-compact",[di("div.line-left",[]),di("div.text@text",[]),di("div.line-right",[])]),s.root.appendChild(this._nodes.root),this._hide&&this._nodes.root.replaceChildren(),this._register(yi(o=>{if(!this._hide){const a=this._unchangedRegion.getHiddenModifiedRange(o).length,l=C("hiddenLines","{0} hidden lines",a);this._nodes.text.innerText=l}}))}}class sU extends nP{constructor(e,t,i,r,s,o,a,l){const c=di("div.diff-hidden-lines-widget");super(e,t,c.root),this._editor=e,this._unchangedRegion=i,this._unchangedRegionRange=r,this._hide=s,this._modifiedOutlineSource=o,this._revealModifiedHiddenLine=a,this._options=l,this._nodes=di("div.diff-hidden-lines",[di("div.top@top",{title:C("diff.hiddenLines.top","Click or drag to show more above")}),di("div.center@content",{style:{display:"flex"}},[di("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[ft("a",{title:C("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...tm("$(unfold)"))]),di("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),di("div.bottom@bottom",{title:C("diff.bottom","Click or drag to show more below"),role:"button"})]),c.root.appendChild(this._nodes.root),this._hide?Ks(this._nodes.first):this._register(vf(this._nodes.first,{width:Qw(this._editor).layoutInfoContentLeft})),this._register(yi(u=>{const d=this._unchangedRegion.visibleLineCountTop.read(u)+this._unchangedRegion.visibleLineCountBottom.read(u)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!d),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(u)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(u)>0),this._nodes.top.classList.toggle("canMoveBottom",!d);const g=this._unchangedRegion.isDragged.read(u),p=this._editor.getDomNode();p&&(p.classList.toggle("draggingUnchangedRegion",!!g),g==="top"?(p.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(u)>0),p.classList.toggle("canMoveBottom",!d)):g==="bottom"?(p.classList.toggle("canMoveTop",!d),p.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(u)>0)):(p.classList.toggle("canMoveTop",!1),p.classList.toggle("canMoveBottom",!1)))}));const h=this._editor;this._register(we(this._nodes.top,"mousedown",u=>{if(u.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),u.preventDefault();const d=u.clientY;let g=!1;const p=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const b=lt(this._nodes.top),_=we(b,"mousemove",y=>{const L=y.clientY-d;g=g||Math.abs(L)>2;const T=Math.round(L/h.getOption(67)),N=Math.max(0,Math.min(p+T,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(N,void 0)}),w=we(b,"mouseup",y=>{g||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),_.dispose(),w.dispose()})})),this._register(we(this._nodes.bottom,"mousedown",u=>{if(u.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),u.preventDefault();const d=u.clientY;let g=!1;const p=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const b=lt(this._nodes.bottom),_=we(b,"mousemove",y=>{const L=y.clientY-d;g=g||Math.abs(L)>2;const T=Math.round(L/h.getOption(67)),N=Math.max(0,Math.min(p-T,this._unchangedRegion.getMaxVisibleLineCountBottom())),D=this._unchangedRegionRange.endLineNumberExclusive>h.getModel().getLineCount()?h.getContentHeight():h.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(N,void 0);const O=this._unchangedRegionRange.endLineNumberExclusive>h.getModel().getLineCount()?h.getContentHeight():h.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);h.setScrollTop(h.getScrollTop()+(O-D))}),w=we(b,"mouseup",y=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!g){const k=h.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const L=h.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);h.setScrollTop(h.getScrollTop()+(L-k))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),_.dispose(),w.dispose()})})),this._register(yi(u=>{const d=[];if(!this._hide){const g=i.getHiddenModifiedRange(u).length,p=C("hiddenLines","{0} hidden lines",g),b=ft("span",{title:C("diff.hiddenLines.expandAll","Double click to unfold")},p);b.addEventListener("dblclick",y=>{y.button===0&&(y.preventDefault(),this._unchangedRegion.showAll(void 0))}),d.push(b);const _=this._unchangedRegion.getHiddenModifiedRange(u),w=this._modifiedOutlineSource.getBreadcrumbItems(_,u);if(w.length>0){d.push(ft("span",void 0,"  |  "));for(let y=0;y<w.length;y++){const k=w[y],L=UD.toIcon(k.kind),T=di("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[tk(L)," ",k.name,...y===w.length-1?[]:[tk(Je.chevronRight)]]).root;d.push(T),T.onclick=()=>{this._revealModifiedHiddenLine(k.startLineNumber)}}}}Ks(this._nodes.others,...d)}))}}var q7e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},G7e=function(n,e){return function(t,i){e(t,i,n)}},Ul,wu;let Jw=(wu=class extends xe{constructor(e,t,i,r,s,o,a){super(),this._editors=e,this._rootElement=t,this._diffModel=i,this._rootWidth=r,this._rootHeight=s,this._modifiedEditorLayoutInfo=o,this._themeService=a,this.width=Ul.ENTIRE_DIFF_OVERVIEW_WIDTH;const l=In(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),c=Et(d=>{const g=l.read(d),p=g.getColor(B1e)||(g.getColor(P1e)||O8).transparent(2),b=g.getColor(F1e)||(g.getColor(O1e)||B8).transparent(2);return{insertColor:p,removeColor:b}}),h=bi(document.createElement("div"));h.setClassName("diffViewport"),h.setPosition("absolute");const u=di("div.diffOverview",{style:{position:"absolute",top:"0px",width:Ul.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register(X_(u,h.domNode)),this._register(Er(u,Be.POINTER_DOWN,d=>{this._editors.modified.delegateVerticalScrollbarPointerDown(d)})),this._register(we(u,Be.MOUSE_WHEEL,d=>{this._editors.modified.delegateScrollFromMouseWheelEvent(d)},{passive:!1})),this._register(X_(this._rootElement,u)),this._register(hc((d,g)=>{const p=this._diffModel.read(d),b=this._editors.original.createOverviewRuler("original diffOverviewRuler");b&&(g.add(b),g.add(X_(u,b.getDomNode())));const _=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(_&&(g.add(_),g.add(X_(u,_.getDomNode()))),!b||!_)return;const w=Va("viewZoneChanged",this._editors.original.onDidChangeViewZones),y=Va("viewZoneChanged",this._editors.modified.onDidChangeViewZones),k=Va("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),L=Va("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);g.add(yi(T=>{w.read(T),y.read(T),k.read(T),L.read(T);const N=c.read(T),D=p?.diff.read(T)?.mappings;function O(H,q,X){const z=X._getViewModel();return z?H.filter(Q=>Q.length>0).map(Q=>{const te=z.coordinatesConverter.convertModelPositionToViewPosition(new be(Q.startLineNumber,1)),se=z.coordinatesConverter.convertModelPositionToViewPosition(new be(Q.endLineNumberExclusive,1)),Y=se.lineNumber-te.lineNumber;return new oJ(te.lineNumber,se.lineNumber,Y,q.toString())}):[]}const B=O((D||[]).map(H=>H.lineRangeMapping.original),N.removeColor,this._editors.original),G=O((D||[]).map(H=>H.lineRangeMapping.modified),N.insertColor,this._editors.modified);b?.setZones(B),_?.setZones(G)})),g.add(yi(T=>{const N=this._rootHeight.read(T),D=this._rootWidth.read(T),O=this._modifiedEditorLayoutInfo.read(T);if(O){const B=Ul.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Ul.ONE_OVERVIEW_WIDTH;b.setLayout({top:0,height:N,right:B+Ul.ONE_OVERVIEW_WIDTH,width:Ul.ONE_OVERVIEW_WIDTH}),_.setLayout({top:0,height:N,right:0,width:Ul.ONE_OVERVIEW_WIDTH});const G=this._editors.modifiedScrollTop.read(T),H=this._editors.modifiedScrollHeight.read(T),q=this._editors.modified.getOption(104),X=new R1(q.verticalHasArrows?q.arrowSize:0,q.verticalScrollbarSize,0,O.height,H,G);h.setTop(X.getSliderPosition()),h.setHeight(X.getSliderSize())}else h.setTop(0),h.setHeight(0);u.style.height=N+"px",u.style.left=D-Ul.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",h.setWidth(Ul.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}},Ul=wu,wu.ONE_OVERVIEW_WIDTH=15,wu.ENTIRE_DIFF_OVERVIEW_WIDTH=wu.ONE_OVERVIEW_WIDTH*2,wu);Jw=Ul=q7e([G7e(6,Ml)],Jw);const U6=[];class K7e extends xe{constructor(e,t,i,r){super(),this._editors=e,this._diffModel=t,this._options=i,this._widget=r,this._selectedDiffs=Et(this,s=>{const a=this._diffModel.read(s)?.diff.read(s);if(!a)return U6;const l=this._editors.modifiedSelections.read(s);if(l.every(d=>d.isEmpty()))return U6;const c=new Ha(l.map(d=>wt.fromRangeInclusive(d))),u=a.mappings.filter(d=>d.lineRangeMapping.innerChanges&&c.intersects(d.lineRangeMapping.modified)).map(d=>({mapping:d,rangeMappings:d.lineRangeMapping.innerChanges.filter(g=>l.some(p=>oe.areIntersecting(g.modifiedRange,p)))}));return u.length===0||u.every(d=>d.rangeMappings.length===0)?U6:u}),this._register(hc((s,o)=>{if(!this._options.shouldRenderOldRevertArrows.read(s))return;const a=this._diffModel.read(s),l=a?.diff.read(s);if(!a||!l||a.movedTextToCompare.read(s))return;const c=[],h=this._selectedDiffs.read(s),u=new Set(h.map(d=>d.mapping));if(h.length>0){const d=this._editors.modifiedSelections.read(s),g=o.add(new o4(d[d.length-1].positionLineNumber,this._widget,h.flatMap(p=>p.rangeMappings),!0));this._editors.modified.addGlyphMarginWidget(g),c.push(g)}for(const d of l.mappings)if(!u.has(d)&&!d.lineRangeMapping.modified.isEmpty&&d.lineRangeMapping.innerChanges){const g=o.add(new o4(d.lineRangeMapping.modified.startLineNumber,this._widget,d.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(g),c.push(g)}o.add(Mt(()=>{for(const d of c)this._editors.modified.removeGlyphMarginWidget(d)}))}))}}const HL=class HL extends xe{getId(){return this._id}constructor(e,t,i,r){super(),this._lineNumber=e,this._widget=t,this._diffs=i,this._revertSelection=r,this._id=`revertButton${HL.counter++}`,this._domNode=di("div.revertButton",{title:this._revertSelection?C("revertSelectedChanges","Revert Selected Changes"):C("revertChange","Revert Change")},[tk(Je.arrowRight)]).root,this._register(we(this._domNode,Be.MOUSE_DOWN,s=>{s.button!==2&&(s.stopPropagation(),s.preventDefault())})),this._register(we(this._domNode,Be.MOUSE_UP,s=>{s.stopPropagation(),s.preventDefault()})),this._register(we(this._domNode,Be.CLICK,s=>{this._diffs instanceof As?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),s.stopPropagation(),s.preventDefault()}))}getDomNode(){return this._domNode}getPosition(){return{lane:ff.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}};HL.counter=0;let o4=HL;function Oh(n,e,t){const i=n.bindTo(e);return D5({debugName:()=>`Set Context Key "${n.key}"`},r=>{i.set(t(r))})}var Y7e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},oU=function(n,e){return function(t,i){e(t,i,n)}};let lN=class extends xe{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(e,t,i,r,s,o,a){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=i,this._argCodeEditorWidgetOptions=r,this._createInnerEditor=s,this._instantiationService=o,this._keybindingService=a,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new de),this.modifiedScrollTop=In(this,this.modified.onDidScrollChange,()=>this.modified.getScrollTop()),this.modifiedScrollHeight=In(this,this.modified.onDidScrollChange,()=>this.modified.getScrollHeight()),this.modifiedObs=Qw(this.modified),this.originalObs=Qw(this.original),this.modifiedModel=this.modifiedObs.model,this.modifiedSelections=In(this,this.modified.onDidChangeCursorSelection,()=>this.modified.getSelections()??[]),this.modifiedCursor=T5({owner:this,equalsFn:be.equals},l=>this.modifiedSelections.read(l)[0]?.getPosition()??new be(1,1)),this.originalCursor=In(this,this.original.onDidChangeCursorPosition,()=>this.original.getPosition()??new be(1,1)),this._argCodeEditorWidgetOptions=null,this._register(E5({createEmptyChangeSummary:()=>({}),handleChange:(l,c)=>(l.didChange(i.editorOptions)&&Object.assign(c,l.change.changedOptions),!0)},(l,c)=>{i.editorOptions.read(l),this._options.renderSideBySide.read(l),this.modified.updateOptions(this._adjustOptionsForRightHandSide(l,c)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(l,c))}))}_createLeftHandSideEditor(e,t){const i=this._adjustOptionsForLeftHandSide(void 0,e),r=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,i,t);return r.setContextValue("isInDiffLeftEditor",!0),r}_createRightHandSideEditor(e,t){const i=this._adjustOptionsForRightHandSide(void 0,e),r=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,i,t);return r.setContextValue("isInDiffRightEditor",!0),r}_constructInnerEditor(e,t,i,r){const s=this._createInnerEditor(e,t,i,r);return this._register(s.onDidContentSizeChange(o=>{const a=this.original.getContentWidth()+this.modified.getContentWidth()+Jw.ENTIRE_DIFF_OVERVIEW_WIDTH,l=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:l,contentWidth:a,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),s}_adjustOptionsForLeftHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(i.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},i.wordWrapOverride1=this._options.diffWordWrap.get()):(i.wordWrapOverride1="off",i.wordWrapOverride2="off",i.stickyScroll={enabled:!1},i.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),i.glyphMargin=this._options.renderSideBySide.get(),t.originalAriaLabel&&(i.ariaLabel=t.originalAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.readOnly=!this._options.originalEditable.get(),i.dropIntoEditor={enabled:!i.readOnly},i.extraEditorClassName="original-in-monaco-diff-editor",i}_adjustOptionsForRightHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(i.ariaLabel=t.modifiedAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.wordWrapOverride1=this._options.diffWordWrap.get(),i.revealHorizontalRightPadding=Vm.revealHorizontalRightPadding.defaultValue+Jw.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",i}_adjustOptionsForSubEditor(e){const t={...e,dimension:{height:0,width:0}};return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar={...t.scrollbar||{}},t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap={...t.minimap||{}},t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){e||(e="");const t=C("diff-aria-navigation-tip"," use {0} to open the accessibility help.",this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp")?.getAriaLabel());return this._options.accessibilityVerbose.get()?e+t:e?e.replaceAll(t,""):""}};lN=Y7e([oU(5,Ni),oU(6,ns)],lN);const VL=class VL extends xe{constructor(){super(...arguments),this._id=++VL.idCounter,this._onDidDispose=this._register(new de),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e,t="api"){this._targetEditor.setPosition(e,t)}revealLine(e,t=0){this._targetEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._targetEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e,t="api"){this._targetEditor.setSelection(e,t)}setSelections(e,t="api"){this._targetEditor.setSelections(e,t)}revealLines(e,t,i=0){this._targetEditor.revealLines(e,t,i)}revealLinesInCenter(e,t,i=0){this._targetEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t,i=0){this._targetEditor.revealLinesNearTop(e,t,i)}revealRange(e,t=0,i=!1,r=!0){this._targetEditor.revealRange(e,t,i,r)}revealRangeInCenter(e,t=0){this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,i){this._targetEditor.trigger(e,t,i)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}};VL.idCounter=0;let cN=VL;var Z7e=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},X7e=function(n,e){return function(t,i){e(t,i,n)}};let hN=class{get editorOptions(){return this._options}constructor(e,t){this._accessibilityService=t,this._diffEditorWidth=fi(this,0),this._screenReaderMode=In(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this.couldShowInlineViewBecauseOfSize=Et(this,r=>this._options.read(r).renderSideBySide&&this._diffEditorWidth.read(r)<=this._options.read(r).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=Et(this,r=>this._options.read(r).renderOverviewRuler),this.renderSideBySide=Et(this,r=>this.compactMode.read(r)&&this.shouldRenderInlineViewInSmartMode.read(r)?!1:this._options.read(r).renderSideBySide&&!(this._options.read(r).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(r)&&!this._screenReaderMode.read(r))),this.readOnly=Et(this,r=>this._options.read(r).readOnly),this.shouldRenderOldRevertArrows=Et(this,r=>!(!this._options.read(r).renderMarginRevertIcon||!this.renderSideBySide.read(r)||this.readOnly.read(r)||this.shouldRenderGutterMenu.read(r))),this.shouldRenderGutterMenu=Et(this,r=>this._options.read(r).renderGutterMenu),this.renderIndicators=Et(this,r=>this._options.read(r).renderIndicators),this.enableSplitViewResizing=Et(this,r=>this._options.read(r).enableSplitViewResizing),this.splitViewDefaultRatio=Et(this,r=>this._options.read(r).splitViewDefaultRatio),this.ignoreTrimWhitespace=Et(this,r=>this._options.read(r).ignoreTrimWhitespace),this.maxComputationTimeMs=Et(this,r=>this._options.read(r).maxComputationTime),this.showMoves=Et(this,r=>this._options.read(r).experimental.showMoves&&this.renderSideBySide.read(r)),this.isInEmbeddedEditor=Et(this,r=>this._options.read(r).isInEmbeddedEditor),this.diffWordWrap=Et(this,r=>this._options.read(r).diffWordWrap),this.originalEditable=Et(this,r=>this._options.read(r).originalEditable),this.diffCodeLens=Et(this,r=>this._options.read(r).diffCodeLens),this.accessibilityVerbose=Et(this,r=>this._options.read(r).accessibilityVerbose),this.diffAlgorithm=Et(this,r=>this._options.read(r).diffAlgorithm),this.showEmptyDecorations=Et(this,r=>this._options.read(r).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=Et(this,r=>this._options.read(r).onlyShowAccessibleDiffViewer),this.compactMode=Et(this,r=>this._options.read(r).compactMode),this.trueInlineDiffRenderingEnabled=Et(this,r=>this._options.read(r).experimental.useTrueInlineView),this.useTrueInlineDiffRendering=Et(this,r=>!this.renderSideBySide.read(r)&&this.trueInlineDiffRenderingEnabled.read(r)),this.hideUnchangedRegions=Et(this,r=>this._options.read(r).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=Et(this,r=>this._options.read(r).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=Et(this,r=>this._options.read(r).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsMinimumLineCount=Et(this,r=>this._options.read(r).hideUnchangedRegions.minimumLineCount),this._model=fi(this,void 0),this.shouldRenderInlineViewInSmartMode=this._model.map(this,r=>Ywe(this,s=>{const o=r?.diff.read(s);return o?Q7e(o,this.trueInlineDiffRenderingEnabled.read(s)):void 0})).flatten().map(this,r=>!!r),this.inlineViewHideOriginalLineNumbers=this.compactMode;const i={...e,...aU(e,Gr)};this._options=fi(this,i)}updateOptions(e){const t=aU(e,this._options.get()),i={...this._options.get(),...e,...t};this._options.set(i,void 0,{changedOptions:e})}setWidth(e){this._diffEditorWidth.set(e,void 0)}setModel(e){this._model.set(e,void 0)}};hN=Z7e([X7e(1,yc)],hN);function Q7e(n,e){return n.mappings.every(t=>J7e(t.lineRangeMapping)||eTe(t.lineRangeMapping)||e&&cP(t.lineRangeMapping))}function J7e(n){return n.original.length===0}function eTe(n){return n.modified.length===0}function aU(n,e){return{enableSplitViewResizing:Ye(n.enableSplitViewResizing,e.enableSplitViewResizing),splitViewDefaultRatio:Wue(n.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:Ye(n.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:Ye(n.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:lg(n.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:lg(n.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:Ye(n.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:Ye(n.renderIndicators,e.renderIndicators),originalEditable:Ye(n.originalEditable,e.originalEditable),diffCodeLens:Ye(n.diffCodeLens,e.diffCodeLens),renderOverviewRuler:Ye(n.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:_n(n.diffWordWrap,e.diffWordWrap,["off","on","inherit"]),diffAlgorithm:_n(n.diffAlgorithm,e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:Ye(n.accessibilityVerbose,e.accessibilityVerbose),experimental:{showMoves:Ye(n.experimental?.showMoves,e.experimental.showMoves),showEmptyDecorations:Ye(n.experimental?.showEmptyDecorations,e.experimental.showEmptyDecorations),useTrueInlineView:Ye(n.experimental?.useTrueInlineView,e.experimental.useTrueInlineView)},hideUnchangedRegions:{enabled:Ye(n.hideUnchangedRegions?.enabled??n.experimental?.collapseUnchangedRegions,e.hideUnchangedRegions.enabled),contextLineCount:lg(n.hideUnchangedRegions?.contextLineCount,e.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:lg(n.hideUnchangedRegions?.minimumLineCount,e.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:lg(n.hideUnchangedRegions?.revealLineCount,e.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:Ye(n.isInEmbeddedEditor,e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:Ye(n.onlyShowAccessibleDiffViewer,e.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:lg(n.renderSideBySideInlineBreakpoint,e.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:Ye(n.useInlineViewWhenSpaceIsLimited,e.useInlineViewWhenSpaceIsLimited),renderGutterMenu:Ye(n.renderGutterMenu,e.renderGutterMenu),compactMode:Ye(n.compactMode,e.compactMode)}}var tTe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},L_=function(n,e){return function(t,i){e(t,i,n)}};let a4=class extends cN{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(e,t,i,r,s,o,a,l){super(),this._domElement=e,this._parentContextKeyService=r,this._parentInstantiationService=s,this._accessibilitySignalService=a,this._editorProgressService=l,this.elements=di("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[di("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),di("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),di("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModelSrc=this._register(gX(this,void 0)),this._diffModel=Et(this,L=>this._diffModelSrc.read(L)?.object),this.onDidChangeModel=Oe.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new hb([Ei,this._contextKeyService]))),this._boundarySashes=fi(this,void 0),this._accessibleDiffViewerShouldBeVisible=fi(this,!1),this._accessibleDiffViewerVisible=Et(this,L=>this._options.onlyShowAccessibleDiffViewer.read(L)?!0:this._accessibleDiffViewerShouldBeVisible.read(L)),this._movedBlocksLinesPart=fi(this,void 0),this._layoutInfo=Et(this,L=>{const T=this._rootSizeObserver.width.read(L),N=this._rootSizeObserver.height.read(L);this._rootSizeObserver.automaticLayout?this.elements.root.style.height="100%":this.elements.root.style.height=N+"px";const D=this._sash.read(L),O=this._gutter.read(L),B=O?.width.read(L)??0,G=this._overviewRulerPart.read(L)?.width??0;let H,q,X,z,Q;if(!!D){const se=D.sashLeft.read(L),Y=this._movedBlocksLinesPart.read(L)?.width.read(L)??0;H=0,q=se-B-Y,Q=se-B,X=se,z=T-X-G}else{Q=0;const se=this._options.inlineViewHideOriginalLineNumbers.read(L);H=B,se?q=0:q=Math.max(5,this._editors.originalObs.layoutInfoDecorationsLeft.read(L)),X=B+q,z=T-X-G}return this.elements.original.style.left=H+"px",this.elements.original.style.width=q+"px",this._editors.original.layout({width:q,height:N},!0),O?.layout(Q),this.elements.modified.style.left=X+"px",this.elements.modified.style.width=z+"px",this._editors.modified.layout({width:z,height:N},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((L,T)=>L?.diff.read(T)),this.onDidUpdateDiff=Oe.fromObservableLight(this._diffValue),o.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register(Mt(()=>this.elements.root.remove())),this._rootSizeObserver=this._register(new uJ(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout(t.automaticLayout??!1),this._options=this._instantiationService.createInstance(hN,t),this._register(yi(L=>{this._options.setWidth(this._rootSizeObserver.width.read(L))})),this._contextKeyService.createKey(Ge.isEmbeddedDiffEditor.key,!1),this._register(Oh(Ge.isEmbeddedDiffEditor,this._contextKeyService,L=>this._options.isInEmbeddedEditor.read(L))),this._register(Oh(Ge.comparingMovedCode,this._contextKeyService,L=>!!this._diffModel.read(L)?.movedTextToCompare.read(L))),this._register(Oh(Ge.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,L=>this._options.couldShowInlineViewBecauseOfSize.read(L))),this._register(Oh(Ge.diffEditorInlineMode,this._contextKeyService,L=>!this._options.renderSideBySide.read(L))),this._register(Oh(Ge.hasChanges,this._contextKeyService,L=>(this._diffModel.read(L)?.diff.read(L)?.mappings.length??0)>0)),this._editors=this._register(this._instantiationService.createInstance(lN,this.elements.original,this.elements.modified,this._options,i,(L,T,N,D)=>this._createInnerEditor(L,T,N,D))),this._register(Oh(Ge.diffEditorOriginalWritable,this._contextKeyService,L=>this._options.originalEditable.read(L))),this._register(Oh(Ge.diffEditorModifiedWritable,this._contextKeyService,L=>!this._options.readOnly.read(L))),this._register(Oh(Ge.diffEditorOriginalUri,this._contextKeyService,L=>this._diffModel.read(L)?.model.original.uri.toString()??"")),this._register(Oh(Ge.diffEditorModifiedUri,this._contextKeyService,L=>this._diffModel.read(L)?.model.modified.uri.toString()??"")),this._overviewRulerPart=Fc(this,L=>this._options.renderOverviewRuler.read(L)?this._instantiationService.createInstance(ul(Jw,L),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(T=>T.modifiedEditor)):void 0).recomputeInitiallyAndOnChange(this._store);const c={height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((L,T)=>L-(this._overviewRulerPart.read(T)?.width??0))};this._sashLayout=new z7e(this._options,c),this._sash=Fc(this,L=>{const T=this._options.renderSideBySide.read(L);return this.elements.root.classList.toggle("side-by-side",T),T?new bJ(this.elements.root,c,this._options.enableSplitViewResizing,this._boundarySashes,this._sashLayout.sashLeft,()=>this._sashLayout.resetSash()):void 0}).recomputeInitiallyAndOnChange(this._store);const h=Fc(this,L=>this._instantiationService.createInstance(ul(aN,L),this._editors,this._diffModel,this._options)).recomputeInitiallyAndOnChange(this._store);Fc(this,L=>this._instantiationService.createInstance(ul(W7e,L),this._editors,this._diffModel,this._options,this)).recomputeInitiallyAndOnChange(this._store);const u=new Set,d=new Set;let g=!1;const p=Fc(this,L=>this._instantiationService.createInstance(ul(iN,L),lt(this._domElement),this._editors,this._diffModel,this._options,this,()=>g||h.get().isUpdatingHiddenAreas,u,d)).recomputeInitiallyAndOnChange(this._store),b=Et(this,L=>{const T=p.read(L).viewZones.read(L).orig,N=h.read(L).viewZones.read(L).origViewZones;return T.concat(N)}),_=Et(this,L=>{const T=p.read(L).viewZones.read(L).mod,N=h.read(L).viewZones.read(L).modViewZones;return T.concat(N)});this._register(n4(this._editors.original,b,L=>{g=L},u));let w;this._register(n4(this._editors.modified,_,L=>{g=L,g?w=t4.capture(this._editors.modified):(w?.restore(this._editors.modified),w=void 0)},d)),this._accessibleDiffViewer=Fc(this,L=>this._instantiationService.createInstance(ul(Gg,L),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(T,N)=>this._accessibleDiffViewerShouldBeVisible.set(T,N),this._options.onlyShowAccessibleDiffViewer.map(T=>!T),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((T,N)=>T?.diff.read(N)?.mappings.map(D=>D.lineRangeMapping)),new S7e(this._editors))).recomputeInitiallyAndOnChange(this._store);const y=this._accessibleDiffViewerVisible.map(L=>L?"hidden":"visible");this._register(vf(this.elements.modified,{visibility:y})),this._register(vf(this.elements.original,{visibility:y})),this._createDiffEditorContributions(),o.addDiffEditor(this),this._gutter=Fc(this,L=>this._options.shouldRenderGutterMenu.read(L)?this._instantiationService.createInstance(ul(rN,L),this.elements.root,this._diffModel,this._editors,this._options,this._sashLayout,this._boundarySashes):void 0),this._register(N5(this._layoutInfo)),Fc(this,L=>new(ul(r1,L))(this.elements.root,this._diffModel,this._layoutInfo.map(T=>T.originalEditor),this._layoutInfo.map(T=>T.modifiedEditor),this._editors)).recomputeInitiallyAndOnChange(this._store,L=>{this._movedBlocksLinesPart.set(L,void 0)}),this._register(Oe.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,L=>this._handleCursorPositionChange(L,!0))),this._register(Oe.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,L=>this._handleCursorPositionChange(L,!1)));const k=this._diffModel.map(this,(L,T)=>{if(L)return L.diff.read(T)===void 0&&!L.isDiffUpToDate.read(T)});this._register(hc((L,T)=>{if(k.read(L)===!0){const N=this._editorProgressService.show(!0,1e3);T.add(Mt(()=>N.done()))}})),this._register(hc((L,T)=>{T.add(new(ul(K7e,L))(this._editors,this._diffModel,this._options,this))})),this._register(hc((L,T)=>{const N=this._diffModel.read(L);if(N)for(const D of[N.model.original,N.model.modified])T.add(D.onWillDispose(O=>{Wi(new Ti("TextModel got disposed before DiffEditorWidget model got reset")),this.setModel(null)}))})),this._register(yi(L=>{this._options.setModel(this._diffModel.read(L))}))}_createInnerEditor(e,t,i,r){return e.createInstance(e4,t,i,r)}_createDiffEditorContributions(){const e=W0.getDiffEditorContributions();for(const t of e)try{this._register(this._instantiationService.createInstance(t.ctor,this))}catch(i){Wi(i)}}get _targetEditor(){return this._editors.modified}getEditorType(){return BR.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){const e=this._editors.original.saveViewState(),t=this._editors.modified.saveViewState();return{original:e,modified:t,modelState:this._diffModel.get()?.serializeState()}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._editors.original.restoreViewState(t.original),this._editors.modified.restoreViewState(t.modified),t.modelState&&this._diffModel.get()?.restoreSerializedState(t.modelState)}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(e){return this._instantiationService.createInstance(tN,e,this._options)}getModel(){return this._diffModel.get()?.model??null}setModel(e){const t=e?"model"in e?r4.create(e).createNewRef(this):r4.create(this.createViewModel(e),this):null;this.setDiffModel(t)}setDiffModel(e,t){const i=this._diffModel.get();!e&&i&&this._accessibleDiffViewer.get().close(),this._diffModel.get()!==e?.object&&XA(t,r=>{const s=e?.object;In.batchEventsGlobally(r,()=>{this._editors.original.setModel(s?s.model.original:null),this._editors.modified.setModel(s?s.model.modified:null)});const o=this._diffModelSrc.get()?.createNewRef(this);this._diffModelSrc.set(e?.createNewRef(this),r),setTimeout(()=>{o?.dispose()},0)})}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){const e=this._diffModel.get()?.diff.get();return e?iTe(e):null}revert(e){const t=this._diffModel.get();!t||!t.isDiffUpToDate.get()||this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:t.model.original.getValueInRange(e.original.toExclusiveRange())}])}revertRangeMappings(e){const t=this._diffModel.get();if(!t||!t.isDiffUpToDate.get())return;const i=e.map(r=>({range:r.modifiedRange,text:t.model.original.getValueInRange(r.originalRange)}));this._editors.modified.executeEdits("diffEditor",i)}_goTo(e){this._editors.modified.setPosition(new be(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(e){const t=this._diffModel.get()?.diff.get()?.mappings;if(!t||t.length===0)return;const i=this._editors.modified.getPosition().lineNumber;let r;e==="next"?r=t.find(s=>s.lineRangeMapping.modified.startLineNumber>i)??t[0]:r=$x(t,s=>s.lineRangeMapping.modified.startLineNumber<i)??t[t.length-1],this._goTo(r),r.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Kc.diffLineDeleted,{source:"diffEditor.goToDiff"}):r.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Kc.diffLineInserted,{source:"diffEditor.goToDiff"}):r&&this._accessibilitySignalService.playSignal(Kc.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const e=this._diffModel.get();e&&this.waitForDiff().then(()=>{const t=e.diff.get()?.mappings;!t||t.length===0||this._goTo(t[0])})}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const e=this._diffModel.get();e&&await e.waitForDiff()}mapToOtherSide(){const e=this._editors.modified.hasWidgetFocus(),t=e?this._editors.modified:this._editors.original,i=e?this._editors.original:this._editors.modified;let r;const s=t.getSelection();if(s){const o=this._diffModel.get()?.diff.get()?.mappings.map(a=>e?a.lineRangeMapping.flip():a.lineRangeMapping);if(o){const a=Vj(s.getStartPosition(),o),l=Vj(s.getEndPosition(),o);r=oe.plusRange(a,l)}}return{destination:i,destinationSelection:r}}switchSide(){const{destination:e,destinationSelection:t}=this.mapToOtherSide();e.focus(),t&&e.setSelection(t)}exitCompareMove(){const e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){const e=this._diffModel.get()?.unchangedRegions.get();e&&pr(t=>{for(const i of e)i.collapseAll(t)})}showAllUnchangedRegions(){const e=this._diffModel.get()?.unchangedRegions.get();e&&pr(t=>{for(const i of e)i.showAll(t)})}_handleCursorPositionChange(e,t){if(e?.reason===3){const i=this._diffModel.get()?.diff.get()?.mappings.find(r=>t?r.lineRangeMapping.modified.contains(e.position.lineNumber):r.lineRangeMapping.original.contains(e.position.lineNumber));i?.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Kc.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):i?.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Kc.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):i&&this._accessibilitySignalService.playSignal(Kc.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};a4=tTe([L_(3,Ei),L_(4,Ni),L_(5,vr),L_(6,U5),L_(7,KA)],a4);function iTe(n){return n.mappings.map(e=>{const t=e.lineRangeMapping;let i,r,s,o,a=t.innerChanges;return t.original.isEmpty?(i=t.original.startLineNumber-1,r=0,a=void 0):(i=t.original.startLineNumber,r=t.original.endLineNumberExclusive-1),t.modified.isEmpty?(s=t.modified.startLineNumber-1,o=0,a=void 0):(s=t.modified.startLineNumber,o=t.modified.endLineNumberExclusive-1),{originalStartLineNumber:i,originalEndLineNumber:r,modifiedStartLineNumber:s,modifiedEndLineNumber:o,charChanges:a?.map(l=>({originalStartLineNumber:l.originalRange.startLineNumber,originalStartColumn:l.originalRange.startColumn,originalEndLineNumber:l.originalRange.endLineNumber,originalEndColumn:l.originalRange.endColumn,modifiedStartLineNumber:l.modifiedRange.startLineNumber,modifiedStartColumn:l.modifiedRange.startColumn,modifiedEndLineNumber:l.modifiedRange.endLineNumber,modifiedEndColumn:l.modifiedRange.endColumn}))}})}var uP=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},qi=function(n,e){return function(t,i){e(t,i,n)}};let nTe=0,lU=!1;function rTe(n){if(!n){if(lU)return;lU=!0}Fve(n||Vi.document.body)}let l4=class extends e4{constructor(e,t,i,r,s,o,a,l,c,h,u,d,g){const p={...t};p.ariaLabel=p.ariaLabel||o9.editorViewAccessibleLabel,super(e,p,{},i,r,s,o,c,h,u,d,g),l instanceof z1?this._standaloneKeybindingService=l:this._standaloneKeybindingService=null,rTe(p.ariaContainerElement),tye((b,_)=>i.createInstance(Tw,b,_,{})),iye(a)}addCommand(e,t,i){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const r="DYNAMIC_"+ ++nTe,s=Si.deserialize(i);return this._standaloneKeybindingService.addDynamicKeybinding(r,e,t,s),r}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),xe.None;const t=e.id,i=e.label,r=Si.and(Si.equals("editorId",this.getId()),Si.deserialize(e.precondition)),s=e.keybindings,o=Si.and(r,Si.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(g,...p)=>Promise.resolve(e.run(this,...p)),h=new rt,u=this.getId()+":"+t;if(h.add(So.registerCommand(u,c)),a){const g={command:{id:u,title:i},when:r,group:a,order:l};h.add(k1.appendMenuItem(es.EditorContext,g))}if(Array.isArray(s))for(const g of s)h.add(this._standaloneKeybindingService.addDynamicKeybinding(u,g,c,o));const d=new aJ(u,i,i,void 0,r,(...g)=>Promise.resolve(e.run(this,...g)),this._contextKeyService);return this._actions.set(t,d),h.add(Mt(()=>{this._actions.delete(t)})),h}_triggerCommand(e,t){if(this._codeEditorService instanceof Kx)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};l4=uP([qi(2,Ni),qi(3,vr),qi(4,Ta),qi(5,Ei),qi(6,Ay),qi(7,ns),qi(8,Ml),qi(9,wc),qi(10,yc),qi(11,mh),qi(12,ji)],l4);let uN=class extends l4{constructor(e,t,i,r,s,o,a,l,c,h,u,d,g,p,b,_){const w={...t};Ok(u,w,!1);const y=c.registerEditorContainer(e);typeof w.theme=="string"&&c.setTheme(w.theme),typeof w.autoDetectHighContrast<"u"&&c.setAutoDetectHighContrast(!!w.autoDetectHighContrast);const k=w.model;delete w.model,super(e,w,i,r,s,o,a,l,c,h,d,b,_),this._configurationService=u,this._standaloneThemeService=c,this._register(y);let L;if(typeof k>"u"){const T=p.getLanguageIdByMimeType(w.language)||w.language||vl;L=yJ(g,p,w.value||"",T,void 0),this._ownsModel=!0}else L=k,this._ownsModel=!1;if(this._attachModel(L),L){const T={oldModelUrl:null,newModelUrl:L.uri};this._onDidChangeModel.fire(T)}}dispose(){super.dispose()}updateOptions(e){Ok(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};uN=uP([qi(2,Ni),qi(3,vr),qi(4,Ta),qi(5,Ei),qi(6,Ay),qi(7,ns),qi(8,Al),qi(9,wc),qi(10,Nn),qi(11,yc),qi(12,Qs),qi(13,Ir),qi(14,mh),qi(15,ji)],uN);let dN=class extends a4{constructor(e,t,i,r,s,o,a,l,c,h,u,d){const g={...t};Ok(l,g,!0);const p=o.registerEditorContainer(e);typeof g.theme=="string"&&o.setTheme(g.theme),typeof g.autoDetectHighContrast<"u"&&o.setAutoDetectHighContrast(!!g.autoDetectHighContrast),super(e,g,{},r,i,s,d,h),this._configurationService=l,this._standaloneThemeService=o,this._register(p)}dispose(){super.dispose()}updateOptions(e){Ok(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,i){return e.createInstance(l4,t,i)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,i){return this.getModifiedEditor().addCommand(e,t,i)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};dN=uP([qi(2,Ni),qi(3,Ei),qi(4,vr),qi(5,Al),qi(6,wc),qi(7,Nn),qi(8,qu),qi(9,KA),qi(10,PR),qi(11,U5)],dN);function yJ(n,e,t,i,r){if(t=t||"",!i){const s=t.indexOf(`
`);let o=t;return s!==-1&&(o=t.substring(0,s)),cU(n,t,e.createByFilepathOrFirstLine(r||null,o),r)}return cU(n,t,e.createById(i),r)}function cU(n,e,t,i){return n.createModel(e,t,i)}var sTe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},hU=function(n,e){return function(t,i){e(t,i,n)}};class oTe{constructor(e,t){this.viewModel=e,this.deltaScrollVertical=t}getId(){return this.viewModel}}let c4=class extends xe{constructor(e,t,i,r,s){super(),this._container=e,this._overflowWidgetsDomNode=t,this._workbenchUIElementFactory=i,this._instantiationService=r,this._viewModel=fi(this,void 0),this._collapsed=Et(this,l=>this._viewModel.read(l)?.collapsed.read(l)),this._editorContentHeight=fi(this,500),this.contentHeight=Et(this,l=>(this._collapsed.read(l)?0:this._editorContentHeight.read(l))+this._outerEditorHeight),this._modifiedContentWidth=fi(this,0),this._modifiedWidth=fi(this,0),this._originalContentWidth=fi(this,0),this._originalWidth=fi(this,0),this.maxScroll=Et(this,l=>{const c=this._modifiedContentWidth.read(l)-this._modifiedWidth.read(l),h=this._originalContentWidth.read(l)-this._originalWidth.read(l);return c>h?{maxScroll:c,width:this._modifiedWidth.read(l)}:{maxScroll:h,width:this._originalWidth.read(l)}}),this._elements=di("div.multiDiffEntry",[di("div.header@header",[di("div.header-content",[di("div.collapse-button@collapseButton"),di("div.file-path",[di("div.title.modified.show-file-icons@primaryPath",[]),di("div.status.deleted@status",["R"]),di("div.title.original.show-file-icons@secondaryPath",[])]),di("div.actions@actions")])]),di("div.editorParent",[di("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(a4,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=Qw(this.editor.getModifiedEditor()).isFocused,this.isOriginalFocused=Qw(this.editor.getOriginalEditor()).isFocused,this.isFocused=Et(this,l=>this.isModifedFocused.read(l)||this.isOriginalFocused.read(l)),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=this._register(new rt),this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;const o=new V9(this._elements.collapseButton,{});this._register(yi(l=>{o.element.className="",o.icon=this._collapsed.read(l)?Je.chevronRight:Je.chevronDown})),this._register(o.onDidClick(()=>{this._viewModel.get()?.collapsed.set(!this._collapsed.get(),void 0)})),this._register(yi(l=>{this._elements.editor.style.display=this._collapsed.read(l)?"none":"block"})),this._register(this.editor.getModifiedEditor().onDidLayoutChange(l=>{const c=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(c,void 0)})),this._register(this.editor.getOriginalEditor().onDidLayoutChange(l=>{const c=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(c,void 0)})),this._register(this.editor.onDidContentSizeChange(l=>{U_(c=>{this._editorContentHeight.set(l.contentHeight,c),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),c),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),c)})})),this._register(this.editor.getOriginalEditor().onDidScrollChange(l=>{if(this._isSettingScrollTop||!l.scrollTopChanged||!this._data)return;const c=l.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(c)})),this._register(yi(l=>{const c=this._viewModel.read(l)?.isActive.read(l);this._elements.root.classList.toggle("active",c)})),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._contextKeyService=this._register(s.createScoped(this._elements.actions));const a=this._register(this._instantiationService.createChild(new hb([Ei,this._contextKeyService])));this._register(a.createInstance(s4,this._elements.actions,es.MultiDiffEditorFileToolbar,{actionRunner:this._register(new _J(()=>this._viewModel.get()?.modifiedUri)),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:l=>l.startsWith("navigation")},actionViewItemProvider:(l,c)=>qye(a,l,c)}))}setScrollLeft(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}setData(e){this._data=e;function t(r){return{...r,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}if(!e){U_(r=>{this._viewModel.set(void 0,r),this.editor.setDiffModel(null,r),this._dataStore.clear()});return}const i=e.viewModel.documentDiffItem;if(U_(r=>{this._resourceLabel?.setUri(e.viewModel.modifiedUri??e.viewModel.originalUri,{strikethrough:e.viewModel.modifiedUri===void 0});let s=!1,o=!1,a=!1,l="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(l="R",s=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(l="A",a=!0):(l="D",o=!0),this._elements.status.classList.toggle("renamed",s),this._elements.status.classList.toggle("deleted",o),this._elements.status.classList.toggle("added",a),this._elements.status.innerText=l,this._resourceLabel2?.setUri(s?e.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(e.viewModel,r),this.editor.setDiffModel(e.viewModel.diffEditorViewModelRef,r),this.editor.updateOptions(t(i.options??{}))}),i.onOptionsDidChange&&this._dataStore.add(i.onOptionsDidChange(()=>{this.editor.updateOptions(t(i.options??{}))})),e.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore,r=>{r||this.setData(void 0)}),e.viewModel.documentDiffItem.contextKeys)for(const[r,s]of Object.entries(e.viewModel.documentDiffItem.contextKeys))this._contextKeyService.createKey(r,s)}render(e,t,i,r){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${e.start}px`,this._elements.root.style.height=`${e.length}px`,this._elements.root.style.width=`${t}px`,this._elements.root.style.position="absolute";const s=e.length-this._headerHeight,o=Math.max(0,Math.min(r.start-e.start,s));this._elements.header.style.transform=`translateY(${o}px)`,U_(a=>{this.editor.layout({width:t-2*8-2*1,height:e.length-this._outerEditorHeight})});try{this._isSettingScrollTop=!0,this._lastScrollTop=i,this.editor.getOriginalEditor().setScrollTop(i)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",o>0||i>0),this._elements.header.classList.toggle("collapsed",o===s)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};c4=sTe([hU(3,Ni),hU(4,Ei)],c4);class aTe{constructor(e){this._create=e,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(e){let t;if(this._unused.size===0)t=this._create(e),this._itemData.set(t,e);else{const i=[...this._unused.values()];t=i.find(r=>this._itemData.get(r).getId()===e.getId())??i[0],this._unused.delete(t),this._itemData.set(t,e),t.setData(e)}return this._used.add(t),{object:t,dispose:()=>{this._used.delete(t),this._unused.size>5?t.dispose():this._unused.add(t)}}}dispose(){for(const e of this._used)e.dispose();for(const e of this._unused)e.dispose();this._used.clear(),this._unused.clear()}}var lTe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},uU=function(n,e){return function(t,i){e(t,i,n)}};let fN=class extends xe{constructor(e,t,i,r,s,o){super(),this._element=e,this._dimension=t,this._viewModel=i,this._workbenchUIElementFactory=r,this._parentContextKeyService=s,this._parentInstantiationService=o,this._scrollableElements=di("div.scrollContent",[di("div@content",{style:{overflow:"hidden"}}),di("div.monaco-editor@overflowWidgetsDomNode",{})]),this._scrollable=this._register(new sb({forceIntegerValues:!1,scheduleAtNextAnimationFrame:l=>Yo(lt(this._element),l),smoothScrollDuration:100})),this._scrollableElement=this._register(new C5(this._scrollableElements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this._elements=di("div.monaco-component.multiDiffEditor",{},[di("div",{},[this._scrollableElement.getDomNode()]),di("div.placeholder@placeholder",{},[di("div",[C("noChangedFiles","No Changed Files")])])]),this._sizeObserver=this._register(new uJ(this._element,void 0)),this._objectPool=this._register(new aTe(l=>{const c=this._instantiationService.createInstance(c4,this._scrollableElements.content,this._scrollableElements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return c.setData(l),c})),this.scrollTop=In(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollTop),this.scrollLeft=In(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollLeft),this._viewItemsInfo=ab(this,(l,c)=>{const h=this._viewModel.read(l);if(!h)return{items:[],getItem:p=>{throw new Ti}};const u=h.items.read(l),d=new Map;return{items:u.map(p=>{const b=c.add(new cTe(p,this._objectPool,this.scrollLeft,w=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+w})})),_=this._lastDocStates?.[b.getKey()];return _&&pr(w=>{b.setViewState(_,w)}),d.set(p,b),b}),getItem:p=>d.get(p)}}),this._viewItems=this._viewItemsInfo.map(this,l=>l.items),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,(l,c)=>l.reduce((h,u)=>h+u.contentHeight.read(c)+this._spaceBetweenPx,0)),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new hb([Ei,this._contextKeyService]))),this._lastDocStates={},this._contextKeyService.createKey(Ge.inMultiDiffEditor.key,!0),this._register(hc((l,c)=>{const h=this._viewModel.read(l);if(h&&h.contextKeys)for(const[u,d]of Object.entries(h.contextKeys)){const g=this._contextKeyService.createKey(u,void 0);g.set(d),c.add(Mt(()=>g.reset()))}}));const a=this._parentContextKeyService.createKey(Ge.multiDiffEditorAllCollapsed.key,!1);this._register(yi(l=>{const c=this._viewModel.read(l);if(c){const h=c.items.read(l).every(u=>u.collapsed.read(l));a.set(h)}})),this._register(yi(l=>{const c=this._dimension.read(l);this._sizeObserver.observe(c)})),this._register(yi(l=>{const c=this._viewItems.read(l);this._elements.placeholder.classList.toggle("visible",c.length===0)})),this._scrollableElements.content.style.position="relative",this._register(yi(l=>{const c=this._sizeObserver.height.read(l);this._scrollableElements.root.style.height=`${c}px`;const h=this._totalHeight.read(l);this._scrollableElements.content.style.height=`${h}px`;const u=this._sizeObserver.width.read(l);let d=u;const g=this._viewItems.read(l),p=YY(g,_l(b=>b.maxScroll.read(l).maxScroll,ef));if(p){const b=p.maxScroll.read(l);d=u+b.maxScroll}this._scrollableElement.setScrollDimensions({width:u,height:c,scrollHeight:h,scrollWidth:d})})),e.replaceChildren(this._elements.root),this._register(Mt(()=>{e.replaceChildren()})),this._register(this._register(yi(l=>{U_(c=>{this.render(l)})})))}render(e){const t=this.scrollTop.read(e);let i=0,r=0,s=0;const o=this._sizeObserver.height.read(e),a=Pt.ofStartAndLength(t,o),l=this._sizeObserver.width.read(e);for(const c of this._viewItems.read(e)){const h=c.contentHeight.read(e),u=Math.min(h,o),d=Pt.ofStartAndLength(r,u),g=Pt.ofStartAndLength(s,h);if(g.isBefore(a))i-=h-u,c.hide();else if(g.isAfter(a))c.hide();else{const p=Math.max(0,Math.min(a.start-g.start,h-u));i-=p;const b=Pt.ofStartAndLength(t+i,o);c.render(d,p,l,b)}r+=u+this._spaceBetweenPx,s+=h+this._spaceBetweenPx}this._scrollableElements.content.style.transform=`translateY(${-(t+i)}px)`}};fN=lTe([uU(4,Ei),uU(5,Ni)],fN);class cTe extends xe{constructor(e,t,i,r){super(),this.viewModel=e,this._objectPool=t,this._scrollLeft=i,this._deltaScrollVertical=r,this._templateRef=this._register(gX(this,void 0)),this.contentHeight=Et(this,s=>this._templateRef.read(s)?.object.contentHeight?.read(s)??this.viewModel.lastTemplateData.read(s).contentHeight),this.maxScroll=Et(this,s=>this._templateRef.read(s)?.object.maxScroll.read(s)??{maxScroll:0,scrollWidth:0}),this.template=Et(this,s=>this._templateRef.read(s)?.object),this._isHidden=fi(this,!1),this._isFocused=Et(this,s=>this.template.read(s)?.isFocused.read(s)??!1),this.viewModel.setIsFocused(this._isFocused,void 0),this._register(yi(s=>{const o=this._scrollLeft.read(s);this._templateRef.read(s)?.object.setScrollLeft(o)})),this._register(yi(s=>{const o=this._templateRef.read(s);!o||!this._isHidden.read(s)||o.object.isFocused.read(s)||this._clear()}))}dispose(){this._clear(),super.dispose()}toString(){return`VirtualViewItem(${this.viewModel.documentDiffItem.modified?.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(e,t){this.viewModel.collapsed.set(e.collapsed,t),this._updateTemplateData(t);const i=this.viewModel.lastTemplateData.get(),r=e.selections?.map($i.liftSelection);this.viewModel.lastTemplateData.set({...i,selections:r},t);const s=this._templateRef.get();s&&r&&s.object.editor.setSelections(r)}_updateTemplateData(e){const t=this._templateRef.get();t&&this.viewModel.lastTemplateData.set({contentHeight:t.object.contentHeight.get(),selections:t.object.editor.getSelections()??void 0},e)}_clear(){const e=this._templateRef.get();e&&pr(t=>{this._updateTemplateData(t),e.object.hide(),this._templateRef.set(void 0,t)})}hide(){this._isHidden.set(!0,void 0)}render(e,t,i,r){this._isHidden.set(!1,void 0);let s=this._templateRef.get();if(!s){s=this._objectPool.getUnusedObj(new oTe(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(s,void 0);const o=this.viewModel.lastTemplateData.get().selections;o&&s.object.editor.setSelections(o)}s.object.render(e,i,t,r)}}ie("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},C("multiDiffEditor.headerBackground","The background color of the diff editor's header"));ie("multiDiffEditor.background",gc,C("multiDiffEditor.background","The background color of the multi file diff editor"));ie("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},C("multiDiffEditor.border","The border color of the multi file diff editor"));var hTe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},uTe=function(n,e){return function(t,i){e(t,i,n)}};let gN=class extends xe{constructor(e,t,i){super(),this._element=e,this._workbenchUIElementFactory=t,this._instantiationService=i,this._dimension=fi(this,void 0),this._viewModel=fi(this,void 0),this._widgetImpl=ab(this,(r,s)=>(ul(c4,r),s.add(this._instantiationService.createInstance(ul(fN,r),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory)))),this._register(N5(this._widgetImpl))}};gN=hTe([uTe(2,Ni)],gN);function dTe(n,e,t){return ut.initialize(t||{}).createInstance(uN,n,e)}function fTe(n){return ut.get(vr).onCodeEditorAdd(t=>{n(t)})}function gTe(n){return ut.get(vr).onDiffEditorAdd(t=>{n(t)})}function mTe(){return ut.get(vr).listCodeEditors()}function pTe(){return ut.get(vr).listDiffEditors()}function bTe(n,e,t){return ut.initialize(t||{}).createInstance(dN,n,e)}function _Te(n,e){const t=ut.initialize(e||{});return new gN(n,{},t)}function vTe(n){if(typeof n.id!="string"||typeof n.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return So.registerCommand(n.id,n.run)}function wTe(n){if(typeof n.id!="string"||typeof n.label!="string"||typeof n.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=Si.deserialize(n.precondition),t=(r,...s)=>Tm.runEditorCommand(r,s,e,(o,a,l)=>Promise.resolve(n.run(a,...l))),i=new rt;if(i.add(So.registerCommand(n.id,t)),n.contextMenuGroupId){const r={command:{id:n.id,title:n.label},when:e,group:n.contextMenuGroupId,order:n.contextMenuOrder||0};i.add(k1.appendMenuItem(es.EditorContext,r))}if(Array.isArray(n.keybindings)){const r=ut.get(ns);if(!(r instanceof z1))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const s=Si.and(e,Si.deserialize(n.keybindingContext));i.add(r.addDynamicKeybindings(n.keybindings.map(o=>({keybinding:o,command:n.id,when:s}))))}}return i}function yTe(n){return CJ([n])}function CJ(n){const e=ut.get(ns);return e instanceof z1?e.addDynamicKeybindings(n.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:Si.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),xe.None)}function CTe(n,e,t){const i=ut.get(Ir),r=i.getLanguageIdByMimeType(e)||e;return yJ(ut.get(Qs),i,n,r,t)}function STe(n,e){const t=ut.get(Ir),i=t.getLanguageIdByMimeType(e)||e||vl;n.setLanguage(t.createById(i))}function xTe(n,e,t){n&&ut.get(ep).changeOne(e,n.uri,t)}function kTe(n){ut.get(ep).changeAll(n,[])}function LTe(n){return ut.get(ep).read(n)}function TTe(n){return ut.get(ep).onMarkerChanged(n)}function DTe(n){return ut.get(Qs).getModel(n)}function ETe(){return ut.get(Qs).getModels()}function ITe(n){return ut.get(Qs).onModelAdded(n)}function NTe(n){return ut.get(Qs).onModelRemoved(n)}function MTe(n){return ut.get(Qs).onModelLanguageChanged(t=>{n({model:t.model,oldLanguage:t.oldLanguageId})})}function ATe(n){return u4e(ut.get(Qs),n)}function RTe(n,e){const t=ut.get(Ir),i=ut.get(Al);return zR.colorizeElement(i,t,n,e).then(()=>{i.registerEditorContainer(n)})}function PTe(n,e,t){const i=ut.get(Ir);return ut.get(Al).registerEditorContainer(Vi.document.body),zR.colorize(i,n,e,t)}function OTe(n,e,t=4){return ut.get(Al).registerEditorContainer(Vi.document.body),zR.colorizeModelLine(n,e,t)}function BTe(n){const e=qn.get(n);return e||{getInitialState:()=>Ew,tokenize:(t,i,r)=>oX(n,r)}}function FTe(n,e){qn.getOrCreate(e);const t=BTe(e),i=nb(n),r=[];let s=t.getInitialState();for(let o=0,a=i.length;o<a;o++){const l=i[o],c=t.tokenize(l,!0,s);r[o]=c.tokens,s=c.endState}return r}function WTe(n,e){ut.get(Al).defineTheme(n,e)}function zTe(n){ut.get(Al).setTheme(n)}function HTe(){s8.clearAllFontInfos()}function VTe(n,e){return So.registerCommand({id:n,handler:e})}function $Te(n){return ut.get(Py).registerOpener({async open(t){return typeof t=="string"&&(t=Ut.parse(t)),n.open(t)}})}function jTe(n){return ut.get(vr).registerCodeEditorOpenHandler(async(t,i,r)=>{if(!i)return null;const s=t.options?.selection;let o;return s&&typeof s.endLineNumber=="number"&&typeof s.endColumn=="number"?o=s:s&&(o={lineNumber:s.startLineNumber,column:s.startColumn}),await n.openCodeEditor(i,t.resource,o)?i:null})}function UTe(){return{create:dTe,getEditors:mTe,getDiffEditors:pTe,onDidCreateEditor:fTe,onDidCreateDiffEditor:gTe,createDiffEditor:bTe,addCommand:vTe,addEditorAction:wTe,addKeybindingRule:yTe,addKeybindingRules:CJ,createModel:CTe,setModelLanguage:STe,setModelMarkers:xTe,getModelMarkers:LTe,removeAllMarkers:kTe,onDidChangeMarkers:TTe,getModels:ETe,getModel:DTe,onDidCreateModel:ITe,onWillDisposeModel:NTe,onDidChangeModelLanguage:MTe,createWebWorker:ATe,colorizeElement:RTe,colorize:PTe,colorizeModelLine:OTe,tokenize:FTe,defineTheme:WTe,setTheme:zTe,remeasureFonts:HTe,registerCommand:VTe,registerLinkOpener:$Te,registerEditorOpener:jTe,AccessibilitySupport:KD,ContentWidgetPositionPreference:eE,CursorChangeReason:tE,DefaultEndOfLine:iE,EditorAutoIndentStrategy:rE,EditorOption:sE,EndOfLinePreference:oE,EndOfLineSequence:aE,MinimapPosition:_E,MinimapSectionHeaderStyle:vE,MouseTargetType:wE,OverlayWidgetPositionPreference:SE,OverviewRulerLane:xE,GlyphMarginLane:lE,RenderLineNumbersType:TE,RenderMinimap:DE,ScrollbarVisibility:IE,ScrollType:EE,TextEditorCursorBlinkingStyle:OE,TextEditorCursorStyle:BE,TrackedRangeStickiness:FE,WrappingIndent:WE,InjectedTextCursorStops:uE,PositionAffinity:LE,ShowLightbulbIconMode:ME,ConfigurationChangedEvent:DK,BareFontInfo:em,FontInfo:r8,TextModelResolvedOptions:PS,FindMatch:Cw,ApplyUpdateResult:lv,EditorZoom:Bd,createMultiFileDiffEditor:_Te,EditorType:BR,EditorOptions:Vm}}function qTe(n,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!n(t))return!1;return!0}function rS(n,e){return typeof n=="boolean"?n:e}function dU(n,e){return typeof n=="string"?n:e}function GTe(n){const e={};for(const t of n)e[t]=!0;return e}function fU(n,e=!1){e&&(n=n.map(function(i){return i.toLowerCase()}));const t=GTe(n);return e?function(i){return t[i.toLowerCase()]!==void 0&&t.hasOwnProperty(i.toLowerCase())}:function(i){return t[i]!==void 0&&t.hasOwnProperty(i)}}function mN(n,e,t){e=e.replace(/@@/g,"");let i=0,r;do r=!1,e=e.replace(/@(\w+)/g,function(o,a){r=!0;let l="";if(typeof n[a]=="string")l=n[a];else if(n[a]&&n[a]instanceof RegExp)l=n[a].source;else throw n[a]===void 0?Qi(n,"language definition does not contain attribute '"+a+"', used at: "+e):Qi(n,"attribute reference '"+a+"' must be a string, used at: "+e);return Mg(l)?"":"(?:"+l+")"}),i++;while(r&&i<5);e=e.replace(/\x01/g,"@");const s=(n.ignoreCase?"i":"")+(n.unicode?"u":"");if(t&&e.match(/\$[sS](\d\d?)/g)){let a=null,l=null;return c=>(l&&a===c||(a=c,l=new RegExp(N4e(n,e,c),s)),l)}return new RegExp(e,s)}function KTe(n,e,t,i){if(i<0)return n;if(i<e.length)return e[i];if(i>=100){i=i-100;const r=t.split(".");if(r.unshift(t),i<r.length)return r[i]}return null}function YTe(n,e,t,i){let r=-1,s=t,o=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(r=parseInt(o[3]),o[2]&&(r=r+100)),s=o[4]);let a="~",l=s;!s||s.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(o=s.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(a=o[1],l=o[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const h=fU(l.split("|"),n.ignoreCase);c=function(u){return a==="~"?h(u):!h(u)}}else if(a==="@"||a==="!@"){const h=n[l];if(!h)throw Qi(n,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!qTe(function(d){return typeof d=="string"},h))throw Qi(n,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const u=fU(h,n.ignoreCase);c=function(d){return a==="@"?u(d):!u(d)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const h=mN(n,"^"+l+"$",!1);c=function(u){return a==="~"?h.test(u):!h.test(u)}}else c=function(h,u,d,g){return mN(n,"^"+zd(n,l,u,d,g)+"$",!1).test(h)};else if(l.indexOf("$")<0){const h=Du(n,l);c=function(u){return a==="=="?u===h:u!==h}}else{const h=Du(n,l);c=function(u,d,g,p,b){const _=zd(n,h,d,g,p);return a==="=="?u===_:u!==_}}return r===-1?{name:t,value:i,test:function(h,u,d,g){return c(h,h,u,d,g)}}:{name:t,value:i,test:function(h,u,d,g){const p=KTe(h,u,d,r);return c(p||"",h,u,d,g)}}}function pN(n,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw Qi(n,"a 'token' attribute must be of type string, in rule: "+e);{const i={token:t.token};if(t.token.indexOf("$")>=0&&(i.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")i.bracket=1;else if(t.bracket==="@close")i.bracket=-1;else throw Qi(n,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw Qi(n,"the next state must be a string value in rule: "+e);{let r=t.next;if(!/^(@pop|@push|@popall)$/.test(r)&&(r[0]==="@"&&(r=r.substr(1)),r.indexOf("$")<0&&!M4e(n,zd(n,r,"",[],""))))throw Qi(n,"the next state '"+t.next+"' is not defined in rule: "+e);i.next=r}}return typeof t.goBack=="number"&&(i.goBack=t.goBack),typeof t.switchTo=="string"&&(i.switchTo=t.switchTo),typeof t.log=="string"&&(i.log=t.log),typeof t.nextEmbedded=="string"&&(i.nextEmbedded=t.nextEmbedded,n.usesEmbedded=!0),i}}else if(Array.isArray(t)){const i=[];for(let r=0,s=t.length;r<s;r++)i[r]=pN(n,e,t[r]);return{group:i}}else if(t.cases){const i=[];for(const s in t.cases)if(t.cases.hasOwnProperty(s)){const o=pN(n,e,t.cases[s]);s==="@default"||s==="@"||s===""?i.push({test:void 0,value:o,name:s}):s==="@eos"?i.push({test:function(a,l,c,h){return h},value:o,name:s}):i.push(YTe(n,e,s,o))}const r=n.defaultToken;return{test:function(s,o,a,l){for(const c of i)if(!c.test||c.test(s,o,a,l))return c.value;return r}}}else throw Qi(n,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class ZTe{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let i;if(typeof t=="string")i=t;else if(t instanceof RegExp)i=t.source;else throw Qi(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=i.length>0&&i[0]==="^",this.name=this.name+": "+i,this.regex=mN(e,"^(?:"+(this.matchOnlyAtLineStart?i.substr(1):i)+")",!0)}setAction(e,t){this.action=pN(e,this.name,t)}resolveRegex(e){return this.regex instanceof RegExp?this.regex:this.regex(e)}}function SJ(n,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={languageId:n,includeLF:rS(e.includeLF,!1),noThrow:!1,maxStack:100,start:typeof e.start=="string"?e.start:null,ignoreCase:rS(e.ignoreCase,!1),unicode:rS(e.unicode,!1),tokenPostfix:dU(e.tokenPostfix,"."+n),defaultToken:dU(e.defaultToken,"source"),usesEmbedded:!1,stateNames:{},tokenizer:{},brackets:[]},i=e;i.languageId=n,i.includeLF=t.includeLF,i.ignoreCase=t.ignoreCase,i.unicode=t.unicode,i.noThrow=t.noThrow,i.usesEmbedded=t.usesEmbedded,i.stateNames=e.tokenizer,i.defaultToken=t.defaultToken;function r(o,a,l){for(const c of l){let h=c.include;if(h){if(typeof h!="string")throw Qi(t,"an 'include' attribute must be a string at: "+o);if(h[0]==="@"&&(h=h.substr(1)),!e.tokenizer[h])throw Qi(t,"include target '"+h+"' is not defined at: "+o);r(o+"."+h,a,e.tokenizer[h])}else{const u=new ZTe(o);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(u.setRegex(i,c[0]),c.length>=3)if(typeof c[1]=="string")u.setAction(i,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const d=c[1];d.next=c[2],u.setAction(i,d)}else throw Qi(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+o);else u.setAction(i,c[1]);else{if(!c.regex)throw Qi(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+o);c.name&&typeof c.name=="string"&&(u.name=c.name),c.matchOnlyAtStart&&(u.matchOnlyAtLineStart=rS(c.matchOnlyAtLineStart,!1)),u.setRegex(i,c.regex),u.setAction(i,c.action)}a.push(u)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw Qi(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const o in e.tokenizer)if(e.tokenizer.hasOwnProperty(o)){t.start||(t.start=o);const a=e.tokenizer[o];t.tokenizer[o]=new Array,r("tokenizer."+o,t.tokenizer[o],a)}if(t.usesEmbedded=i.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw Qi(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const s=[];for(const o of e.brackets){let a=o;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw Qi(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")s.push({token:a.token+t.tokenPostfix,open:Du(t,a.open),close:Du(t,a.close)});else throw Qi(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=s,t.noThrow=!0,t}function XTe(n){L1.registerLanguage(n)}function QTe(){let n=[];return n=n.concat(L1.getLanguages()),n}function JTe(n){return ut.get(Ir).languageIdCodec.encodeLanguageId(n)}function e6e(n,e){return ut.withServices(()=>{const i=ut.get(Ir).onDidRequestRichLanguageFeatures(r=>{r===n&&(i.dispose(),e())});return i})}function t6e(n,e){return ut.withServices(()=>{const i=ut.get(Ir).onDidRequestBasicLanguageFeatures(r=>{r===n&&(i.dispose(),e())});return i})}function i6e(n,e){if(!ut.get(Ir).isRegisteredLanguageId(n))throw new Error(`Cannot set configuration for unknown language ${n}`);return ut.get(mh).register(n,e,100)}class n6e{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,i){if(typeof this._actual.tokenize=="function")return ey.adaptTokenize(this._languageId,this._actual,e,i);throw new Error("Not supported!")}tokenizeEncoded(e,t,i){const r=this._actual.tokenizeEncoded(e,i);return new XL(r.tokens,r.endState)}}class ey{constructor(e,t,i,r){this._languageId=e,this._actual=t,this._languageService=i,this._standaloneThemeService=r}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const i=[];let r=0;for(let s=0,o=e.length;s<o;s++){const a=e[s];let l=a.startIndex;s===0?l=0:l<r&&(l=r),i[s]=new mw(l,a.scopes,t),r=l}return i}static adaptTokenize(e,t,i,r){const s=t.tokenize(i,r),o=ey._toClassicTokens(s.tokens,e);let a;return s.endState.equals(r)?a=r:a=s.endState,new KM(o,a)}tokenize(e,t,i){return ey.adaptTokenize(this._languageId,this._actual,e,i)}_toBinaryTokens(e,t){const i=e.encodeLanguageId(this._languageId),r=this._standaloneThemeService.getColorTheme().tokenTheme,s=[];let o=0,a=0;for(let c=0,h=t.length;c<h;c++){const u=t[c],d=r.match(i,u.scopes)|1024;if(o>0&&s[o-1]===d)continue;let g=u.startIndex;c===0?g=0:g<a&&(g=a),s[o++]=g,s[o++]=d,a=g}const l=new Uint32Array(o);for(let c=0;c<o;c++)l[c]=s[c];return l}tokenizeEncoded(e,t,i){const r=this._actual.tokenize(e,i),s=this._toBinaryTokens(this._languageService.languageIdCodec,r.tokens);let o;return r.endState.equals(i)?o=i:o=r.endState,new XL(s,o)}}function r6e(n){return typeof n.getInitialState=="function"}function s6e(n){return"tokenizeEncoded"in n}function xJ(n){return n&&typeof n.then=="function"}function o6e(n){const e=ut.get(Al);if(n){const t=[null];for(let i=1,r=n.length;i<r;i++)t[i]=Me.fromHex(n[i]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}function kJ(n,e){return s6e(e)?new n6e(n,e):new ey(n,e,ut.get(Ir),ut.get(Al))}function dP(n,e){const t=new bfe(async()=>{const i=await Promise.resolve(e.create());return i?r6e(i)?kJ(n,i):new qw(ut.get(Ir),ut.get(Al),n,SJ(n,i),ut.get(Nn)):null});return qn.registerFactory(n,t)}function a6e(n,e){if(!ut.get(Ir).isRegisteredLanguageId(n))throw new Error(`Cannot set tokens provider for unknown language ${n}`);return xJ(e)?dP(n,{create:()=>e}):qn.register(n,kJ(n,e))}function l6e(n,e){const t=i=>new qw(ut.get(Ir),ut.get(Al),n,SJ(n,i),ut.get(Nn));return xJ(e)?dP(n,{create:()=>e}):qn.register(n,t(e))}function c6e(n,e){return ut.get(ji).referenceProvider.register(n,e)}function h6e(n,e){return ut.get(ji).renameProvider.register(n,e)}function u6e(n,e){return ut.get(ji).newSymbolNamesProvider.register(n,e)}function d6e(n,e){return ut.get(ji).signatureHelpProvider.register(n,e)}function f6e(n,e){return ut.get(ji).hoverProvider.register(n,{provideHover:async(i,r,s,o)=>{const a=i.getWordAtPosition(r);return Promise.resolve(e.provideHover(i,r,s,o)).then(l=>{if(l)return!l.range&&a&&(l.range=new oe(r.lineNumber,a.startColumn,r.lineNumber,a.endColumn)),l.range||(l.range=new oe(r.lineNumber,r.column,r.lineNumber,r.column)),l})}})}function g6e(n,e){return ut.get(ji).documentSymbolProvider.register(n,e)}function m6e(n,e){return ut.get(ji).documentHighlightProvider.register(n,e)}function p6e(n,e){return ut.get(ji).linkedEditingRangeProvider.register(n,e)}function b6e(n,e){return ut.get(ji).definitionProvider.register(n,e)}function _6e(n,e){return ut.get(ji).implementationProvider.register(n,e)}function v6e(n,e){return ut.get(ji).typeDefinitionProvider.register(n,e)}function w6e(n,e){return ut.get(ji).codeLensProvider.register(n,e)}function y6e(n,e,t){return ut.get(ji).codeActionProvider.register(n,{providedCodeActionKinds:t?.providedCodeActionKinds,documentation:t?.documentation,provideCodeActions:(r,s,o,a)=>{const c=ut.get(ep).read({resource:r.uri}).filter(h=>oe.areIntersectingOrTouching(h,s));return e.provideCodeActions(r,s,{markers:c,only:o.only,trigger:o.trigger},a)},resolveCodeAction:e.resolveCodeAction})}function C6e(n,e){return ut.get(ji).documentFormattingEditProvider.register(n,e)}function S6e(n,e){return ut.get(ji).documentRangeFormattingEditProvider.register(n,e)}function x6e(n,e){return ut.get(ji).onTypeFormattingEditProvider.register(n,e)}function k6e(n,e){return ut.get(ji).linkProvider.register(n,e)}function L6e(n,e){return ut.get(ji).completionProvider.register(n,e)}function T6e(n,e){return ut.get(ji).colorProvider.register(n,e)}function D6e(n,e){return ut.get(ji).foldingRangeProvider.register(n,e)}function E6e(n,e){return ut.get(ji).declarationProvider.register(n,e)}function I6e(n,e){return ut.get(ji).selectionRangeProvider.register(n,e)}function N6e(n,e){return ut.get(ji).documentSemanticTokensProvider.register(n,e)}function M6e(n,e){return ut.get(ji).documentRangeSemanticTokensProvider.register(n,e)}function A6e(n,e){return ut.get(ji).inlineCompletionsProvider.register(n,e)}function R6e(n,e){return ut.get(ji).inlineEditProvider.register(n,e)}function P6e(n,e){return ut.get(ji).inlayHintsProvider.register(n,e)}function O6e(){return{register:XTe,getLanguages:QTe,onLanguage:e6e,onLanguageEncountered:t6e,getEncodedLanguageId:JTe,setLanguageConfiguration:i6e,setColorMap:o6e,registerTokensProviderFactory:dP,setTokensProvider:a6e,setMonarchTokensProvider:l6e,registerReferenceProvider:c6e,registerRenameProvider:h6e,registerNewSymbolNameProvider:u6e,registerCompletionItemProvider:L6e,registerSignatureHelpProvider:d6e,registerHoverProvider:f6e,registerDocumentSymbolProvider:g6e,registerDocumentHighlightProvider:m6e,registerLinkedEditingRangeProvider:p6e,registerDefinitionProvider:b6e,registerImplementationProvider:_6e,registerTypeDefinitionProvider:v6e,registerCodeLensProvider:w6e,registerCodeActionProvider:y6e,registerDocumentFormattingEditProvider:C6e,registerDocumentRangeFormattingEditProvider:S6e,registerOnTypeFormattingEditProvider:x6e,registerLinkProvider:k6e,registerColorProvider:T6e,registerFoldingRangeProvider:D6e,registerDeclarationProvider:E6e,registerSelectionRangeProvider:I6e,registerDocumentSemanticTokensProvider:N6e,registerDocumentRangeSemanticTokensProvider:M6e,registerInlineCompletionsProvider:A6e,registerInlineEditProvider:R6e,registerInlayHintsProvider:P6e,DocumentHighlightKind:nE,CompletionItemKind:XD,CompletionItemTag:QD,CompletionItemInsertTextRule:ZD,SymbolKind:RE,SymbolTag:PE,IndentAction:hE,CompletionTriggerKind:JD,SignatureHelpTriggerKind:AE,InlayHintKind:dE,InlineCompletionTriggerKind:fE,InlineEditTriggerKind:gE,CodeActionTriggerType:YD,NewSymbolNameTag:yE,NewSymbolNameTriggerKind:CE,PartialAcceptTriggerKind:kE,HoverVerbosityAction:cE,FoldingRangeKind:qD,SelectedSuggestionInfo:pfe}}const LJ=ai("IEditorCancelService"),TJ=new st("cancellableOperation",!1,C("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));_i(LJ,class{constructor(){this._tokens=new WeakMap}add(n,e){let t=this._tokens.get(n);t||(t=n.invokeWithinContext(r=>{const s=TJ.bindTo(r.get(Ei)),o=new Wo;return{key:s,tokens:o}}),this._tokens.set(n,t));let i;return t.key.set(!0),i=t.tokens.push(e),()=>{i&&(i(),t.key.set(!t.tokens.isEmpty()),i=void 0)}}cancel(n){const e=this._tokens.get(n);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},1);Dt(new class extends Tm{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:TJ})}runEditorCommand(n,e){n.get(LJ).cancel(e)}});class gU{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}class B6e{constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(gU.toKey(e))}has(e){return this._set.has(gU.toKey(e))}}function F6e(n,e,t){const i=[],r=new B6e,s=n.ordered(t);for(const a of s)i.push(a),a.extensionId&&r.add(a.extensionId);const o=e.ordered(t);for(const a of o){if(a.extensionId){if(r.has(a.extensionId))continue;r.add(a.extensionId)}i.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,h){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,h)}})}return i}const aw=class aw{static setFormatterSelector(e){return{dispose:aw._selectors.unshift(e)}}static async select(e,t,i,r){if(e.length===0)return;const s=wi.first(aw._selectors);if(s)return await s(e,t,i,r)}};aw._selectors=new Wo;let bN=aw;async function W6e(n,e,t,i,r,s){const o=e.documentRangeFormattingEditProvider.ordered(t);for(const a of o){const l=await Promise.resolve(a.provideDocumentRangeFormattingEdits(t,i,r,s)).catch(VM);if(GL(l))return await n.computeMoreMinimalEdits(t.uri,l)}}async function z6e(n,e,t,i,r){const s=F6e(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const o of s){const a=await Promise.resolve(o.provideDocumentFormattingEdits(t,i,r)).catch(VM);if(GL(a))return await n.computeMoreMinimalEdits(t.uri,a)}}function H6e(n,e,t,i,r,s,o){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(r)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,i,r,s,o)).catch(VM).then(l=>n.computeMoreMinimalEdits(t.uri,l))}So.registerCommand("_executeFormatRangeProvider",async function(n,...e){const[t,i,r]=e;tf(Ut.isUri(t)),tf(oe.isIRange(i));const s=n.get(n5),o=n.get(zy),a=n.get(ji),l=await s.createModelReference(t);try{return W6e(o,a,l.object.textEditorModel,oe.lift(i),r,yl.None)}finally{l.dispose()}});So.registerCommand("_executeFormatDocumentProvider",async function(n,...e){const[t,i]=e;tf(Ut.isUri(t));const r=n.get(n5),s=n.get(zy),o=n.get(ji),a=await r.createModelReference(t);try{return z6e(s,o,a.object.textEditorModel,i,yl.None)}finally{a.dispose()}});So.registerCommand("_executeFormatOnTypeProvider",async function(n,...e){const[t,i,r,s]=e;tf(Ut.isUri(t)),tf(be.isIPosition(i)),tf(typeof r=="string");const o=n.get(n5),a=n.get(zy),l=n.get(ji),c=await o.createModelReference(t);try{return H6e(a,l,c.object.textEditorModel,be.lift(i),r,s,yl.None)}finally{c.dispose()}});Vm.wrappingIndent.defaultValue=0;Vm.glyphMargin.defaultValue=!1;Vm.autoIndent.defaultValue=3;Vm.overviewRulerLanes.defaultValue=2;bN.setFormatterSelector((n,e,t)=>Promise.resolve(n[0]));const Js=UK();Js.editor=UTe();Js.languages=O6e();const V6e=Js.CancellationTokenSource,$6e=Js.Emitter,j6e=Js.KeyCode,U6e=Js.KeyMod,q6e=Js.Position,G6e=Js.Range,K6e=Js.Selection,Y6e=Js.SelectionDirection,Z6e=Js.MarkerSeverity,X6e=Js.MarkerTag,Q6e=Js.Uri,J6e=Js.Token,pg=Js.editor,eDe=Js.languages,tDe=globalThis.MonacoEnvironment;(tDe?.globalAPI||typeof define=="function"&&define.amd)&&(globalThis.monaco=Js);typeof globalThis.require<"u"&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const sS=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:V6e,Emitter:$6e,KeyCode:j6e,KeyMod:U6e,MarkerSeverity:Z6e,MarkerTag:X6e,Position:q6e,Range:G6e,Selection:K6e,SelectionDirection:Y6e,Token:J6e,Uri:Q6e,editor:pg,languages:eDe},Symbol.toStringTag,{value:"Module"}));function mU(n){return/^\d+$/.test(n)?"".concat(n,"px"):n}function oS(){}var Zh=function(){return Zh=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Zh.apply(this,arguments)},iDe=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};function Uy(n){var e=n.width,t=n.height,i=n.value,r=n.defaultValue,s=n.language,o=n.theme,a=n.options,l=n.overrideServices,c=n.editorWillMount,h=n.editorDidMount,u=n.editorWillUnmount,d=n.onChange,g=n.className,p=n.uri,b=Pe.useRef(null),_=Pe.useRef(null),w=Pe.useRef(null),y=Pe.useRef(null),k=mU(e),L=mU(t),T=Pe.useRef(d);T.current=d;var N=Pe.useMemo(function(){return{width:k,height:L}},[k,L]),D=function(){var H=c(sS);return H||{}},O=function(){h(_.current,sS),w.current=_.current.onDidChangeModelContent(function(H){var q;y.current||(q=T.current)===null||q===void 0||q.call(T,_.current.getValue(),H)})},B=function(){u(_.current,sS)},G=function(){var H=i!==null?i:r;if(b.current){var q=Zh(Zh({},a),D()),X=p?.(sS),z=X&&pg.getModel(X);z?(z.setValue(H),pg.setModelLanguage(z,s)):z=pg.createModel(H,s,X),_.current=pg.create(b.current,Zh(Zh(Zh({model:z},g?{extraEditorClassName:g}:{}),q),o?{theme:o}:{}),l),O()}};return Pe.useEffect(G,[]),Pe.useEffect(function(){if(_.current){if(i===_.current.getValue())return;var H=_.current.getModel();y.current=!0,_.current.pushUndoStop(),H.pushEditOperations([],[{range:H.getFullModelRange(),text:i}],void 0),_.current.pushUndoStop(),y.current=!1}},[i]),Pe.useEffect(function(){if(_.current){var H=_.current.getModel();pg.setModelLanguage(H,s)}},[s]),Pe.useEffect(function(){if(_.current){a.model;var H=iDe(a,["model"]);_.current.updateOptions(Zh(Zh({},g?{extraEditorClassName:g}:{}),H))}},[g,a]),Pe.useEffect(function(){_.current&&_.current.layout()},[e,t]),Pe.useEffect(function(){pg.setTheme(o)},[o]),Pe.useEffect(function(){return function(){_.current&&(B(),_.current.dispose()),w.current&&w.current.dispose()}},[]),Pe.createElement("div",{ref:b,style:N,className:"react-monaco-editor-container"})}Uy.defaultProps={width:"100%",height:"100%",value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:oS,editorDidMount:oS,editorWillUnmount:oS,onChange:oS,className:null};Uy.displayName="MonacoEditor";function nDe({ppmS:n}){const[e,t]=Pe.useState(n),i=Pe.useRef(null),r=16;Pe.useEffect(()=>{if(!e)return;const o=e.split(`
`),[a,l,c,h]=o.slice(0,4);if(a!=="P3"){console.error("Unsupported PPM format");return}const u=o.slice(4).join(" ").split(" ").map(k=>parseInt(k,r)),d=i.current,g=d.getContext("2d");g.clearRect(0,0,d.width,d.height),g.imageSmoothingEnabled=!1;const p=parseInt(l,r)||1,b=parseInt(c,r)||1,_=g.createImageData(p,b);for(let k=0,L=0;k<u.length;k+=3,L+=4)_.data[L]=parseInt(u[k],r),_.data[L+1]=parseInt(u[k+1],r),_.data[L+2]=parseInt(u[k+2],r),_.data[L+3]=255;const w=document.createElement("canvas");w.width=p,w.height=b,w.getContext("2d").putImageData(_,0,0),g.drawImage(w,0,0,p,b,0,0,d.width,d.height)},[e]);const s=o=>{t(o)};return S.jsxs("div",{style:{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"center",width:"100%",gap:"1em"},children:[S.jsx(Uy,{language:"json",value:e,height:"300px",theme:"vs-dark",onChange:s}),S.jsx("canvas",{ref:i,style:{border:"1px solid white",width:"300px",height:"300px",imageRendering:"pixelated"}})]})}function pU(n){const e={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...n.components};return S.jsxs(S.Fragment,{children:[S.jsx(e.h2,{children:"Farben"}),`
`,S.jsxs(e.p,{children:["Da ein Computer nur mit ",S.jsx(e.code,{children:"Bits"}),` arbeiten kann, müssen wir dem Computer
beibringen wie er `,S.jsx(e.code,{children:"Bits"}),` zusammen gruppieren kann, damit wir diese Daten weiter
interpretieren können. Wir haben bereits gesehen das wir mit dem `,S.jsx(e.code,{children:"Byte 0110 0001"})," den Buchstaben ",S.jsx(e.code,{children:"a"})," abbilden können. Wir können also mit ",S.jsx(e.code,{children:"Bytes"}),` bereits
Text abbilden. Nun möchten wir aber noch Bilder beschreiben können. Dafür
müssen wir die `,S.jsx(e.code,{children:"Bits"}),` so gruppieren, das wir die Farben von einzelnen Pixeln
beschreiben können. Das kommt daher, das Computerdisplays pro Pixel 3 LEDs
haben, die jeweils `,S.jsx(e.code,{children:"rot"}),", ",S.jsx(e.code,{children:"grün"})," und ",S.jsx(e.code,{children:"blau"}),` sind. Wenn Sie das Licht von diesen
LEDs mischen, dann können Sie jede beliebige Farbe darstellen. Sie müssen nur
sagen wie stark jedes LED leuchten soll. Aus dieser Idee ergibt sich das
`,S.jsx(e.code,{children:"RBG"}),"-Farbschema."]}),`
`,S.jsxs(e.p,{children:["Wir müssen nun also die Intensitäten von ",S.jsx(e.code,{children:"rot"}),", ",S.jsx(e.code,{children:"grün"})," und ",S.jsx(e.code,{children:"blau"}),` jeweils in
`,S.jsx(e.code,{children:"Bits"}),` angeben. Damit mir möglichst feine Abstufungen haben, hat man sich für
256 Werte pro Farbe entschieden. Wir können ein Pixel also mit genau 3 `,S.jsx(e.code,{children:"Bytes"}),`
beschreiben. Wenn wir also nur Rot möchten, dann können wir das mit den
folgenden 3 `,S.jsx(e.code,{children:"Bytes"})," beschreiben."]}),`
`,S.jsx(e.pre,{children:S.jsx(e.code,{className:"language-text",children:`11111111 00000000 00000000
`})}),`
`,S.jsxs(e.p,{children:[`Das ist aber unglaublich aufwendig und Fehler können schnell passieren, wenn
man mal in einer Stelle verrutscht. Deshalb nehmen wir das Hexadezimalsystem
zur Hilfe und können die gleiche Farbe dann einfach so schreiben: `,S.jsx(e.code,{children:"FF 00 00"}),`.
Dieses Format ist so verbreitet, das man dafür eine eigene Schreibweise
eingeführt hat: `,S.jsx(e.code,{children:"#FF0000"}),"."]}),`
`,S.jsx(e.p,{children:"Hier finden Sie eine Anwendung die Ihnen die Farbe direkt darstellen kann."}),`
`,S.jsx(aue,{}),`
`,S.jsxs(jo,{title:"Farben mischen",children:[S.jsx(e.p,{children:`Sie kennen bereits das mischen von Wasserfarben. Diese Art von Farben
mischen, nennt man Farbsubtraktion, da die unterschiedlichen Farbpigmente
das Licht absorbieren. Also jede weitere Farbe absorbiert mehr Licht.`}),S.jsxs(e.p,{children:[`Die Mischung von Farben die wir auf dem Bildschirm haben, funktioniert ganz
anders. Da kommt immer mehr Licht dazu, deshalb sagt man zu dieser Art
Farbaddition. Mit Farbaddition kommen Sie auf ganz andere Farben wie mit
der Farbsubtraktion. Zum Beispiel erreichen Sie weiss, indem Sie alle
Farben voll aktivieren, also mit `,S.jsx(e.code,{children:"#FFFFFF"}),`. Und schwarz erhalten Sie wenn
Sie alle Farben komplett deaktivieren, also `,S.jsx(e.code,{children:"#000000"}),"."]}),S.jsxs(e.p,{children:["Finden Sie heraus was die folgenden ",S.jsx(e.code,{children:"Bytes"}),` für eine Farbe ergeben.
Versuchen Sie zuerst zu raten, geben Sie es dann in den Farbrechner oben
ein.`]}),S.jsxs(e.ul,{children:[`
`,S.jsx(e.li,{children:S.jsx(e.code,{children:"#FF00FF"})}),`
`,S.jsx(e.li,{children:S.jsx(e.code,{children:"#00FFFF"})}),`
`,S.jsx(e.li,{children:S.jsx(e.code,{children:"#A33ECE"})}),`
`,S.jsx(e.li,{children:S.jsx(e.code,{children:"#626262"})}),`
`]}),S.jsx(e.p,{children:"Versuchen Sie die Hexwerte für die folgenden Farben zu finden:"}),S.jsxs(e.ul,{children:[`
`,S.jsxs(e.li,{children:[`
`,S.jsx(r_,{hex:"#FFFF00"}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(r_,{hex:"#FF00FF"}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(r_,{hex:"#00FFFF"}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(r_,{hex:"#000000"}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(r_,{hex:"#FFFFFF"}),`
`]}),`
`]})]}),`
`,S.jsx(e.h3,{children:"Bilder"}),`
`,S.jsxs(e.p,{children:[`Wir wissen nun wie man Farben beschreiben kann, jetzt möchten wir aber Bilder
beschreiben. Wir schauen uns dafür ein Bildformat an, das so eigentlich nicht
mehr verwendet wird, das aber praktisch zum lernen ist. Das Format heisst `,S.jsx(e.code,{children:"PPM"}),`
und steht für `,S.jsx(e.code,{children:"Portable Pixmap Format"}),`. Im Gegensatz zu den häufig verwendeten
Formaten wir `,S.jsx(e.code,{children:"JPG"})," oder ",S.jsx(e.code,{children:"PNG"}),", ist ",S.jsx(e.code,{children:"PPM"}),` nicht komprimiert. Das bedeutet das
jedes einzelne Pixel mit all seinen Farbwerten beschrieben wird. Das Format
selber ist sehr einfach aufgebaut, hier finden Sie ein Beispiel dazu:`]}),`
`,S.jsx(e.pre,{children:S.jsx(e.code,{className:"language-text",children:`P3
2
2
FF
00 FF 00 FF 00 00
A2 B5 18 3F 3F 3F
`})}),`
`,S.jsxs(e.p,{children:[`Die erste Zeile beschreibt welche Version von dem Format verwendet werden soll.
`,S.jsx(e.code,{children:"P1"})," und ",S.jsx(e.code,{children:"P2"}),` wären Binär oder nur Graustufen. Daher arbeiten wir nur mit dem
`,S.jsx(e.code,{children:"P3"}),` Format. In unserer Anwendung sind die anderen Formate gar nicht definiert.
Die nächsten beiden Zeilen geben die `,S.jsx(e.code,{children:"Breite"})," und die ",S.jsx(e.code,{children:"Höhe"}),` des Bildes in
Pixeln an. Die Zeile 4 gibt den maximalen Wert an. Der ist bei uns immer `,S.jsx(e.code,{children:"FF"}),`,
angeben müssen wir ihn dennoch. Alles was danach kommt, sind die einzelnen
Pixel. Hier spielt es keine Rolle ob Sie diese auf einer Zeile oder auf
mehreren verteilt schreiben. Hier wird einfach ein `,S.jsx(e.code,{children:"Byte"}),` nach dem anderen
gelesen und als Farbkanal für den entsprechenden Pixel interpretiert. Das
Format das hier gewählt wurde, soll das ganze ein wenig übersichtlicher machen.
So entspricht das Format genau der Anordnung der Pixel im Bild selber.`]}),`
`,S.jsx(nDe,{ppmS:String.raw`P3
2
2
FF
00 FF 00 FF 00 00
A2 B5 18 3F 3F 3F`}),`
`,S.jsxs(jo,{title:"Aufgaben: Bilder erstellen",children:[S.jsx(e.p,{children:"Erstellen Sie eigene Bilder mit diesem Format."}),S.jsxs(e.ul,{children:[`
`,S.jsxs(e.li,{children:["Erstellen Sie ein ",S.jsx(e.code,{children:"2x2"})," Bild, das alle Grundfarben und weiss enhält."]}),`
`,S.jsxs(e.li,{children:["Erstellen Sie ein ",S.jsx(e.code,{children:"2x2"})," Bild, das 4 unterschiedliche Grüntöne enthält."]}),`
`,S.jsxs(e.li,{children:["Erstellen Sie ein ",S.jsx(e.code,{children:"3x3"})," Bild, mit 9 unterschiedlichen Farben."]}),`
`,S.jsxs(e.li,{children:["Erstellen Sie ein ",S.jsx(e.code,{children:"4x4"}),` Bild, mit einem Farbverlauf. Starten Sie oben
links mit Ihrer Lieblingsfarbe und unten rechts mit einer weiteren Farbe.
Der Farbverlauf soll diagnal sein, von Ihrer Lieblingsfarbe zur zweiten
Farbe.`]}),`
`]})]})]})}function rDe(n={}){const{wrapper:e}=n.components||{};return e?S.jsx(e,{...n,children:S.jsx(pU,{...n})}):pU(n)}function bU(n){const e={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...n.components};return S.jsxs(S.Fragment,{children:[S.jsx(e.h2,{children:"Daten und Informationen"}),`
`,S.jsxs(e.p,{children:["In der Informatik unterscheiden wir zwischen ",S.jsx(e.strong,{children:"Daten"})," und ",S.jsx(e.strong,{children:"Informationen"}),`.
Das einfachste Beispiel das Sie bereits kennen, ist das `,S.jsx(e.code,{children:"Bit"}),". Das ",S.jsx(e.code,{children:"Bit"}),` selbst
sind die `,S.jsx(e.strong,{children:"Daten"}),`, also das was im Computer gespeichert ist, und die
`,S.jsx(e.strong,{children:"Informationen"}),` die wir damit abbilden können, ist unsere Interpretation vom
Zustand des `,S.jsx(e.code,{children:"Bit"}),". In einem ",S.jsx(e.code,{children:"Bit"}),` können wir genau 2 Zustände speichern, die
`,S.jsx(e.code,{children:"0"})," und die ",S.jsx(e.code,{children:"1"}),". Damit können wir 2 ",S.jsx(e.strong,{children:"Informationen"}),` abbilden, diese aber
unterschiedlich interpretieren. Wir können die Zahlen `,S.jsx(e.code,{children:"0"})," und ",S.jsx(e.code,{children:"1"}),`
interpretieren, oder die Wahrheitswerte `,S.jsx(e.code,{children:"false"})," und ",S.jsx(e.code,{children:"true"}),`. Das ganze können
wir aber noch auf sehr viel mehr Arten Interpretieren. Wir können damit auch
`,S.jsx(e.code,{children:"Tag"})," oder ",S.jsx(e.code,{children:"Nacht"}),", sowie ",S.jsx(e.code,{children:"Innen"})," oder ",S.jsx(e.code,{children:"Aussen"}),` oder alle anderen möglichen
Binären Unterscheidungen interpretieren. Bei der Interpretation sind wir sehr
frei, wir müssen dafür nur den Kontext kennen. Die Anzahl der Interpretationen
ist aber von den Daten vorgegeben, mit einem `,S.jsx(e.code,{children:"Bit"}),` können also nur 2 Zustände
abgebildet werden.`]}),`
`,S.jsxs(e.h3,{children:["Informationen in einem ",S.jsx(e.code,{children:"Byte"})]}),`
`,S.jsxs(e.p,{children:["Wie wir bereits wissen, besteht ein ",S.jsx(e.code,{children:"Byte"})," aus genau 8 ",S.jsx(e.code,{children:"Bits"}),`. Die Daten sind
hier also diese 8 `,S.jsx(e.code,{children:"Bits"}),` in der gegebenen Reihenfolge. Wie wir diese Daten
jetzt aber interpretieren möchten, ist uns überlassen. Wir können ganz einfach
das `,S.jsx(e.code,{children:"Byte"})," als Binärzahl interpretieren, und dann alle Zahlen von ",S.jsx(e.code,{children:"0b0000 0000"}),`
bis `,S.jsx(e.code,{children:"0b1111 1111"}),", also von ",S.jsx(e.code,{children:"0"})," bis ",S.jsx(e.code,{children:"255"}),` abbilden. Damit könnten wir aber nur
mit den Zahlen rechnen, und der Raum der Zahlen ist auch sehr begrenzt. Eine
weitere Interpretation von einem `,S.jsx(e.code,{children:"Byte"})," können wir mit Hilfe des ",S.jsx(e.code,{children:"ASCII"}),`-Codes
machen. So können wir jedem `,S.jsx(e.code,{children:"Byte"}),` ein Symbol aus dem Alphabet zuweisen, und
noch weitere, wie Sonderzeichen und Zahlen. Dank des `,S.jsx(e.code,{children:"ASCII"}),`-Codes, können wir
also Texte auf dem Computer verfassen.`]}),`
`,S.jsx(e.h3,{children:"Andere Arten von Informationen"}),`
`,S.jsxs(e.p,{children:[`Mit Texten können wir bereits sehr viele Informationen abbilden. Manchmal ist
es aber besser ein Bild zu haben. Eine Art ein Bild zu beschreiben, ist jeder
einzelne Bildpunkt genau zu beschreiben. Also die Farbe von jedem Bildpunkt
anzugeben. Die Frage die wir uns nun stellen, ist die folgende: Welche
Informationen möchten wir abbilden und welche Daten brauchen wir dafür. Um eine
Farbe zu beschreiben können wir das einfache `,S.jsx(e.code,{children:"RGB"}),`-Format wählen. Wir geben
dabei die Intensität der Teilfarben `,S.jsx(e.code,{children:"rot"}),", ",S.jsx(e.code,{children:"grün"})," und ",S.jsx(e.code,{children:"blau"}),` an. Eine
Möglichkeit wäre es einfach nur 3 `,S.jsx(e.code,{children:"Bits"}),` zu wählen. Damit können wir sagen ob
eine der Farben vorkommt oder gar nicht. Damit lassen sich aber nicht so viele
Farben erstellen. Es würde also mehr Sinn ergeben, wenn wir mehr `,S.jsx(e.code,{children:"Bits"}),` pro
Farbkanal verwenden. Nehmen wir also einfach ein `,S.jsx(e.code,{children:"Byte"}),` pro Farbkanal. So
brauchen wir also 3 `,S.jsx(e.code,{children:"Bytes"}),` pro Pixel, und können damit jedes beliebige Bild
erklären.`]}),`
`,S.jsxs(jo,{title:"Daten vs. Informationen",children:[S.jsxs(e.p,{children:["Die ",S.jsx(e.strong,{children:"Daten"}),` sind das was physikalisch auf dem Computer hinterlegt ist.
Also eine Speicherzelle die entweder geladen und nichtgeladen ist.`]}),S.jsxs(e.p,{children:["Die ",S.jsx(e.strong,{children:"Informationen"}),` sind unsere Interpretation der Daten. Die Anzahl der
Informationen die gespeichert werden können, ist die Anzahl der Zustände
die mit den Daten beschrieben werden können.`]})]}),`
`,S.jsx(e.h3,{children:"Informationsformate"}),`
`,S.jsxs(e.p,{children:[`Die Informationen auf dem Computer sind immer in Dateien organisiert. Jede
Datei folgt einem bestimmten Format. Eine ganze gewöhnliche Textdatei, folgt
einfach nur dem `,S.jsx(e.code,{children:"ASCII"}),"-Code. Da wird jedes ",S.jsx(e.code,{children:"Byte"}),` als eigenes Zeichen gelesen.
Mehr Informationen zum Dateiformat braucht es da nicht.`]}),`
`,S.jsxs(e.p,{children:["Bei einer Bilddatei, wird jedes Pixel in genau 3 ",S.jsx(e.code,{children:"Bytes"}),` gespeichert. Das
reicht aber noch nicht um das Bild zu beschreiben. Wir brauchen noch
zusätzliche Informationen über die Höhe und die Breite des Bildes. Das wird in
der Regel ganz am Anfang der Datei angegeben.`]}),`
`,S.jsx(e.p,{children:`Auch bei PDF-Dateien und anderen Dateiformaten kommt es häufig vor das eine
Version des Dateiformats ganz am Anfang gespeichert wird. Das braucht man damit
das Anzeigeprogramm weiss welche Features in der Datei vorkommen, bzw. wie die
Daten zu lesen sind.`}),`
`,S.jsxs(e.p,{children:[`Sehr häufig werden Textformate verwendet, um die Informationen in einer Datei
abzubilden. Das wird eigentlich immer gemacht wenn wir Programmcode schreiben.
Aber auch wenn wir die Struktur von einer Webseite beschreiben, wir alles in
Text gemacht, und dann vom Webbrowser interpretiert. So sieht ein Titel in
`,S.jsx(e.code,{children:"HTML"})," zum Beispiel so aus:"]}),`
`,S.jsx(e.pre,{children:S.jsx(e.code,{className:"language-html",children:`<h1>Titel</h1>
`})}),`
`,S.jsxs(e.p,{children:["Sehr ähnlich wird es in ",S.jsx(e.code,{children:"Markdown"}),` gemacht. Auch dort nutzen wir die
Schriftzeichen um mehr Informationen in den Text zu bekommen. Ein Titel im
`,S.jsx(e.code,{children:"Markdown"})," schreiben wir so:"]}),`
`,S.jsx(e.pre,{children:S.jsx(e.code,{className:"language-markdown",children:`# Titel
`})}),`
`,S.jsxs(e.p,{children:["Die Daten die darunter liegen, sind einfach wieder eine folge von ",S.jsx(e.code,{children:"Bytes"}),`, mehr
brauchen wir ja nicht um Text darzustellen.`]})]})}function sDe(n={}){const{wrapper:e}=n.components||{};return e?S.jsx(e,{...n,children:S.jsx(bU,{...n})}):bU(n)}function oDe(){const[n,e]=Pe.useState("48 65 6c 6c 6f 20 57 6f 72 6c 64 21"),[t,i]=Pe.useState(""),r=Pe.useRef(null);Pe.useEffect(()=>{s(n)},[n]);const s=l=>{a(l),o(l)};function o(l){const c=l.split(" ").map(h=>String.fromCharCode(parseInt(h,16)));i(c)}function a(l){const c=r.current.getContext("2d"),u=l.split("").filter(y=>{const k=y.toUpperCase().charCodeAt(0);return k>=48&&k<=57?!0:k>=65&&k<=70}).map((y,k)=>k%2===1?y.toUpperCase()+" ":y.toUpperCase()).join("");if(l.length===0){c.clearRect(0,0,c.canvas.width,c.canvas.height);return}const d=u.split(" ").filter(y=>y!==""),g=Math.ceil(d.length/4),p=new Array(g*4).fill(255);for(let y=0;y<l.length;y++){const k=parseInt(d[y],16);p[y]=isNaN(k)?255:k}const b=Math.ceil(Math.sqrt(g));r.current.width=b,r.current.height=b;const _=c.createImageData(b,b),w=_.data;for(let y=0;y<p.length;y++)w[y]=p[y];c.clearRect(0,0,c.canvas.width,c.canvas.height),c.putImageData(_,0,0),e(y=>u)}return S.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[S.jsx("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"1rem"}}),S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",gap:"1em"},children:[S.jsx(Uy,{language:"json",value:n,height:"300px",theme:"vs-dark",onChange:s}),S.jsxs("div",{style:{},children:[S.jsx("h4",{children:"ASCII"}),S.jsx("pre",{children:t}),S.jsx("h4",{children:"Bild"}),S.jsx("canvas",{ref:r,style:{border:"1px solid black",width:"200px",height:"200px",imageRendering:"pixelated"}})]})]})]})}class za{constructor(e,t,i){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=i}static range(e,t){return t?!e||!e.loc||!t.loc||e.loc.lexer!==t.loc.lexer?null:new za(e.loc.lexer,e.loc.start,t.loc.end):e&&e.loc}}class wl{constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}range(e,t){return new wl(t,za.range(this,e))}}class et{constructor(e,t){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var i="KaTeX parse error: "+e,r,s,o=t&&t.loc;if(o&&o.start<=o.end){var a=o.lexer.input;r=o.start,s=o.end,r===a.length?i+=" at end of input: ":i+=" at position "+(r+1)+": ";var l=a.slice(r,s).replace(/[^]/g,"$&̲"),c;r>15?c="…"+a.slice(r-15,r):c=a.slice(0,r);var h;s+15<a.length?h=a.slice(s,s+15)+"…":h=a.slice(s),i+=c+l+h}var u=new Error(i);return u.name="ParseError",u.__proto__=et.prototype,u.position=r,r!=null&&s!=null&&(u.length=s-r),u.rawMessage=e,u}}et.prototype.__proto__=Error.prototype;var aDe=function(e,t){return e.indexOf(t)!==-1},lDe=function(e,t){return e===void 0?t:e},cDe=/([A-Z])/g,hDe=function(e){return e.replace(cDe,"-$1").toLowerCase()},uDe={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},dDe=/[&><"']/g;function fDe(n){return String(n).replace(dDe,e=>uDe[e])}var DJ=function n(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?n(e.body[0]):e:e.type==="font"?n(e.body):e},gDe=function(e){var t=DJ(e);return t.type==="mathord"||t.type==="textord"||t.type==="atom"},mDe=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},pDe=function(e){var t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?t[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?null:t[1].toLowerCase():"_relative"},qt={contains:aDe,deflt:lDe,escape:fDe,hyphenate:hDe,getBaseElem:DJ,isCharacterBox:gDe,protocolFromUrl:pDe},zv={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:n=>"#"+n},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(n,e)=>(e.push(n),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:n=>Math.max(0,n),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:n=>Math.max(0,n),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:n=>Math.max(0,n),cli:"-e, --max-expand <n>",cliProcessor:n=>n==="Infinity"?1/0:parseInt(n)},globalGroup:{type:"boolean",cli:!1}};function bDe(n){if(n.default)return n.default;var e=n.type,t=Array.isArray(e)?e[0]:e;if(typeof t!="string")return t.enum[0];switch(t){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class fP{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var t in zv)if(zv.hasOwnProperty(t)){var i=zv[t];this[t]=e[t]!==void 0?i.processor?i.processor(e[t]):e[t]:bDe(i)}}reportNonstrict(e,t,i){var r=this.strict;if(typeof r=="function"&&(r=r(e,t,i)),!(!r||r==="ignore")){if(r===!0||r==="error")throw new et("LaTeX-incompatible input and strict mode is set to 'error': "+(t+" ["+e+"]"),i);r==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+r+"': "+t+" ["+e+"]"))}}useStrictBehavior(e,t,i){var r=this.strict;if(typeof r=="function")try{r=r(e,t,i)}catch{r="error"}return!r||r==="ignore"?!1:r===!0||r==="error"?!0:r==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+r+"': "+t+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var t=qt.protocolFromUrl(e.url);if(t==null)return!1;e.protocol=t}var i=typeof this.trust=="function"?this.trust(e):this.trust;return!!i}}class yd{constructor(e,t,i){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=i}sup(){return Zc[_De[this.id]]}sub(){return Zc[vDe[this.id]]}fracNum(){return Zc[wDe[this.id]]}fracDen(){return Zc[yDe[this.id]]}cramp(){return Zc[CDe[this.id]]}text(){return Zc[SDe[this.id]]}isTight(){return this.size>=2}}var gP=0,h4=1,s1=2,Iu=3,ty=4,bl=5,V1=6,zo=7,Zc=[new yd(gP,0,!1),new yd(h4,0,!0),new yd(s1,1,!1),new yd(Iu,1,!0),new yd(ty,2,!1),new yd(bl,2,!0),new yd(V1,3,!1),new yd(zo,3,!0)],_De=[ty,bl,ty,bl,V1,zo,V1,zo],vDe=[bl,bl,bl,bl,zo,zo,zo,zo],wDe=[s1,Iu,ty,bl,V1,zo,V1,zo],yDe=[Iu,Iu,bl,bl,zo,zo,zo,zo],CDe=[h4,h4,Iu,Iu,bl,bl,zo,zo],SDe=[gP,h4,s1,Iu,s1,Iu,s1,Iu],Qt={DISPLAY:Zc[gP],TEXT:Zc[s1],SCRIPT:Zc[ty],SCRIPTSCRIPT:Zc[V1]},_N=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function xDe(n){for(var e=0;e<_N.length;e++)for(var t=_N[e],i=0;i<t.blocks.length;i++){var r=t.blocks[i];if(n>=r[0]&&n<=r[1])return t.name}return null}var nx=[];_N.forEach(n=>n.blocks.forEach(e=>nx.push(...e)));function EJ(n){for(var e=0;e<nx.length;e+=2)if(n>=nx[e]&&n<=nx[e+1])return!0;return!1}var qp=80,kDe=function(e,t){return"M95,"+(622+e+t)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},LDe=function(e,t){return"M263,"+(601+e+t)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},TDe=function(e,t){return"M983 "+(10+e+t)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},DDe=function(e,t){return"M424,"+(2398+e+t)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+t+`
h400000v`+(40+e)+"h-400000z"},EDe=function(e,t){return"M473,"+(2713+e+t)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+t+"h400000v"+(40+e)+"H1017.7z"},IDe=function(e){var t=e/2;return"M400000 "+e+" H0 L"+t+" 0 l65 45 L145 "+(e-80)+" H400000z"},NDe=function(e,t,i){var r=i-54-t-e;return"M702 "+(e+t)+"H400000"+(40+e)+`
H742v`+r+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+t+"H400000v"+(40+e)+"H742z"},MDe=function(e,t,i){t=1e3*t;var r="";switch(e){case"sqrtMain":r=kDe(t,qp);break;case"sqrtSize1":r=LDe(t,qp);break;case"sqrtSize2":r=TDe(t,qp);break;case"sqrtSize3":r=DDe(t,qp);break;case"sqrtSize4":r=EDe(t,qp);break;case"sqrtTall":r=NDe(t,qp,i)}return r},ADe=function(e,t){switch(e){case"⎜":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"∣":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"∥":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z"+("M367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z");case"⎟":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"⎢":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"⎥":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"⎪":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"⏐":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"‖":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257z"+("M478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z");default:return""}},_U={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},RDe=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+` v585 h43z
M367 15 v585 v`+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v602 h84z
M403 1759 V0 H319 V1759 v`+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v602 h84z
M347 1759 V0 h-84 V1759 v`+t+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(t+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(t+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(t+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(t+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class qy{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return qt.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){var e=t=>t.toText();return this.children.map(e).join("")}}var eh={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},aS={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},vU={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function IJ(n,e){eh[n]=e}function mP(n,e,t){if(!eh[e])throw new Error("Font metrics not found for font: "+e+".");var i=n.charCodeAt(0),r=eh[e][i];if(!r&&n[0]in vU&&(i=vU[n[0]].charCodeAt(0),r=eh[e][i]),!r&&t==="text"&&EJ(i)&&(r=eh[e][77]),r)return{depth:r[0],height:r[1],italic:r[2],skew:r[3],width:r[4]}}var q6={};function PDe(n){var e;if(n>=5?e=0:n>=3?e=1:e=2,!q6[e]){var t=q6[e]={cssEmPerMu:aS.quad[e]/18};for(var i in aS)aS.hasOwnProperty(i)&&(t[i]=aS[i][e])}return q6[e]}var ODe=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],wU=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],yU=function(e,t){return t.size<2?e:ODe[e-1][t.size-1]};class su{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||su.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=wU[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return new su(t)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:yU(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:wU[e-1]})}havingBaseStyle(e){e=e||this.style.text();var t=yU(su.BASESIZE,e);return this.size===t&&this.textSize===su.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==su.BASESIZE?["sizing","reset-size"+this.size,"size"+su.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=PDe(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}su.BASESIZE=6;var vN={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},BDe={ex:!0,em:!0,mu:!0},NJ=function(e){return typeof e!="string"&&(e=e.unit),e in vN||e in BDe||e==="ex"},mr=function(e,t){var i;if(e.unit in vN)i=vN[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if(e.unit==="mu")i=t.fontMetrics().cssEmPerMu;else{var r;if(t.style.isTight()?r=t.havingStyle(t.style.text()):r=t,e.unit==="ex")i=r.fontMetrics().xHeight;else if(e.unit==="em")i=r.fontMetrics().quad;else throw new et("Invalid unit: '"+e.unit+"'");r!==t&&(i*=r.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*i,t.maxSize)},at=function(e){return+e.toFixed(4)+"em"},wf=function(e){return e.filter(t=>t).join(" ")},MJ=function(e,t,i){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=i||{},t){t.style.isTight()&&this.classes.push("mtight");var r=t.getColor();r&&(this.style.color=r)}},AJ=function(e){var t=document.createElement(e);t.className=wf(this.classes);for(var i in this.style)this.style.hasOwnProperty(i)&&(t.style[i]=this.style[i]);for(var r in this.attributes)this.attributes.hasOwnProperty(r)&&t.setAttribute(r,this.attributes[r]);for(var s=0;s<this.children.length;s++)t.appendChild(this.children[s].toNode());return t},FDe=/[\s"'>/=\x00-\x1f]/,RJ=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+qt.escape(wf(this.classes))+'"');var i="";for(var r in this.style)this.style.hasOwnProperty(r)&&(i+=qt.hyphenate(r)+":"+this.style[r]+";");i&&(t+=' style="'+qt.escape(i)+'"');for(var s in this.attributes)if(this.attributes.hasOwnProperty(s)){if(FDe.test(s))throw new et("Invalid attribute name '"+s+"'");t+=" "+s+'="'+qt.escape(this.attributes[s])+'"'}t+=">";for(var o=0;o<this.children.length;o++)t+=this.children[o].toMarkup();return t+="</"+e+">",t};class Gy{constructor(e,t,i,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,MJ.call(this,e,i,r),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return qt.contains(this.classes,e)}toNode(){return AJ.call(this,"span")}toMarkup(){return RJ.call(this,"span")}}class pP{constructor(e,t,i,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,MJ.call(this,t,r),this.children=i||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return qt.contains(this.classes,e)}toNode(){return AJ.call(this,"a")}toMarkup(){return RJ.call(this,"a")}}let WDe=class{constructor(e,t,i){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=i}hasClass(e){return qt.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var t in this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e='<img src="'+qt.escape(this.src)+'"'+(' alt="'+qt.escape(this.alt)+'"'),t="";for(var i in this.style)this.style.hasOwnProperty(i)&&(t+=qt.hyphenate(i)+":"+this.style[i]+";");return t&&(e+=' style="'+qt.escape(t)+'"'),e+="'/>",e}};var zDe={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"};class Tl{constructor(e,t,i,r,s,o,a,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=i||0,this.italic=r||0,this.skew=s||0,this.width=o||0,this.classes=a||[],this.style=l||{},this.maxFontSize=0;var c=xDe(this.text.charCodeAt(0));c&&this.classes.push(c+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=zDe[this.text])}hasClass(e){return qt.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),t=null;this.italic>0&&(t=document.createElement("span"),t.style.marginRight=at(this.italic)),this.classes.length>0&&(t=t||document.createElement("span"),t.className=wf(this.classes));for(var i in this.style)this.style.hasOwnProperty(i)&&(t=t||document.createElement("span"),t.style[i]=this.style[i]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=qt.escape(wf(this.classes)),t+='"');var i="";this.italic>0&&(i+="margin-right:"+this.italic+"em;");for(var r in this.style)this.style.hasOwnProperty(r)&&(i+=qt.hyphenate(r)+":"+this.style[r]+";");i&&(e=!0,t+=' style="'+qt.escape(i)+'"');var s=qt.escape(this.text);return e?(t+=">",t+=s,t+="</span>",t):s}}class Fu{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");for(var i in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,i)&&t.setAttribute(i,this.attributes[i]);for(var r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+qt.escape(this.attributes[t])+'"');e+=">";for(var i=0;i<this.children.length;i++)e+=this.children[i].toMarkup();return e+="</svg>",e}}class yf{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"path");return this.alternate?t.setAttribute("d",this.alternate):t.setAttribute("d",_U[this.pathName]),t}toMarkup(){return this.alternate?'<path d="'+qt.escape(this.alternate)+'"/>':'<path d="'+qt.escape(_U[this.pathName])+'"/>'}}class wN{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"line");for(var i in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,i)&&t.setAttribute(i,this.attributes[i]);return t}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+qt.escape(this.attributes[t])+'"');return e+="/>",e}}function CU(n){if(n instanceof Tl)return n;throw new Error("Expected symbolNode but got "+String(n)+".")}function HDe(n){if(n instanceof Gy)return n;throw new Error("Expected span<HtmlDomNode> but got "+String(n)+".")}var VDe={bin:1,close:1,inner:1,open:1,punct:1,rel:1},$De={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Gn={math:{},text:{}};function I(n,e,t,i,r,s){Gn[n][r]={font:e,group:t,replace:i},s&&i&&(Gn[n][i]=Gn[n][r])}var P="math",Ue="text",V="main",ce="ams",sr="accent-token",bt="bin",ea="close",fb="inner",Xt="mathord",rs="op-token",Ja="open",X5="punct",ue="rel",Zu="spacing",_e="textord";I(P,V,ue,"≡","\\equiv",!0);I(P,V,ue,"≺","\\prec",!0);I(P,V,ue,"≻","\\succ",!0);I(P,V,ue,"∼","\\sim",!0);I(P,V,ue,"⊥","\\perp");I(P,V,ue,"⪯","\\preceq",!0);I(P,V,ue,"⪰","\\succeq",!0);I(P,V,ue,"≃","\\simeq",!0);I(P,V,ue,"∣","\\mid",!0);I(P,V,ue,"≪","\\ll",!0);I(P,V,ue,"≫","\\gg",!0);I(P,V,ue,"≍","\\asymp",!0);I(P,V,ue,"∥","\\parallel");I(P,V,ue,"⋈","\\bowtie",!0);I(P,V,ue,"⌣","\\smile",!0);I(P,V,ue,"⊑","\\sqsubseteq",!0);I(P,V,ue,"⊒","\\sqsupseteq",!0);I(P,V,ue,"≐","\\doteq",!0);I(P,V,ue,"⌢","\\frown",!0);I(P,V,ue,"∋","\\ni",!0);I(P,V,ue,"∝","\\propto",!0);I(P,V,ue,"⊢","\\vdash",!0);I(P,V,ue,"⊣","\\dashv",!0);I(P,V,ue,"∋","\\owns");I(P,V,X5,".","\\ldotp");I(P,V,X5,"⋅","\\cdotp");I(P,V,_e,"#","\\#");I(Ue,V,_e,"#","\\#");I(P,V,_e,"&","\\&");I(Ue,V,_e,"&","\\&");I(P,V,_e,"ℵ","\\aleph",!0);I(P,V,_e,"∀","\\forall",!0);I(P,V,_e,"ℏ","\\hbar",!0);I(P,V,_e,"∃","\\exists",!0);I(P,V,_e,"∇","\\nabla",!0);I(P,V,_e,"♭","\\flat",!0);I(P,V,_e,"ℓ","\\ell",!0);I(P,V,_e,"♮","\\natural",!0);I(P,V,_e,"♣","\\clubsuit",!0);I(P,V,_e,"℘","\\wp",!0);I(P,V,_e,"♯","\\sharp",!0);I(P,V,_e,"♢","\\diamondsuit",!0);I(P,V,_e,"ℜ","\\Re",!0);I(P,V,_e,"♡","\\heartsuit",!0);I(P,V,_e,"ℑ","\\Im",!0);I(P,V,_e,"♠","\\spadesuit",!0);I(P,V,_e,"§","\\S",!0);I(Ue,V,_e,"§","\\S");I(P,V,_e,"¶","\\P",!0);I(Ue,V,_e,"¶","\\P");I(P,V,_e,"†","\\dag");I(Ue,V,_e,"†","\\dag");I(Ue,V,_e,"†","\\textdagger");I(P,V,_e,"‡","\\ddag");I(Ue,V,_e,"‡","\\ddag");I(Ue,V,_e,"‡","\\textdaggerdbl");I(P,V,ea,"⎱","\\rmoustache",!0);I(P,V,Ja,"⎰","\\lmoustache",!0);I(P,V,ea,"⟯","\\rgroup",!0);I(P,V,Ja,"⟮","\\lgroup",!0);I(P,V,bt,"∓","\\mp",!0);I(P,V,bt,"⊖","\\ominus",!0);I(P,V,bt,"⊎","\\uplus",!0);I(P,V,bt,"⊓","\\sqcap",!0);I(P,V,bt,"∗","\\ast");I(P,V,bt,"⊔","\\sqcup",!0);I(P,V,bt,"◯","\\bigcirc",!0);I(P,V,bt,"∙","\\bullet",!0);I(P,V,bt,"‡","\\ddagger");I(P,V,bt,"≀","\\wr",!0);I(P,V,bt,"⨿","\\amalg");I(P,V,bt,"&","\\And");I(P,V,ue,"⟵","\\longleftarrow",!0);I(P,V,ue,"⇐","\\Leftarrow",!0);I(P,V,ue,"⟸","\\Longleftarrow",!0);I(P,V,ue,"⟶","\\longrightarrow",!0);I(P,V,ue,"⇒","\\Rightarrow",!0);I(P,V,ue,"⟹","\\Longrightarrow",!0);I(P,V,ue,"↔","\\leftrightarrow",!0);I(P,V,ue,"⟷","\\longleftrightarrow",!0);I(P,V,ue,"⇔","\\Leftrightarrow",!0);I(P,V,ue,"⟺","\\Longleftrightarrow",!0);I(P,V,ue,"↦","\\mapsto",!0);I(P,V,ue,"⟼","\\longmapsto",!0);I(P,V,ue,"↗","\\nearrow",!0);I(P,V,ue,"↩","\\hookleftarrow",!0);I(P,V,ue,"↪","\\hookrightarrow",!0);I(P,V,ue,"↘","\\searrow",!0);I(P,V,ue,"↼","\\leftharpoonup",!0);I(P,V,ue,"⇀","\\rightharpoonup",!0);I(P,V,ue,"↙","\\swarrow",!0);I(P,V,ue,"↽","\\leftharpoondown",!0);I(P,V,ue,"⇁","\\rightharpoondown",!0);I(P,V,ue,"↖","\\nwarrow",!0);I(P,V,ue,"⇌","\\rightleftharpoons",!0);I(P,ce,ue,"≮","\\nless",!0);I(P,ce,ue,"","\\@nleqslant");I(P,ce,ue,"","\\@nleqq");I(P,ce,ue,"⪇","\\lneq",!0);I(P,ce,ue,"≨","\\lneqq",!0);I(P,ce,ue,"","\\@lvertneqq");I(P,ce,ue,"⋦","\\lnsim",!0);I(P,ce,ue,"⪉","\\lnapprox",!0);I(P,ce,ue,"⊀","\\nprec",!0);I(P,ce,ue,"⋠","\\npreceq",!0);I(P,ce,ue,"⋨","\\precnsim",!0);I(P,ce,ue,"⪹","\\precnapprox",!0);I(P,ce,ue,"≁","\\nsim",!0);I(P,ce,ue,"","\\@nshortmid");I(P,ce,ue,"∤","\\nmid",!0);I(P,ce,ue,"⊬","\\nvdash",!0);I(P,ce,ue,"⊭","\\nvDash",!0);I(P,ce,ue,"⋪","\\ntriangleleft");I(P,ce,ue,"⋬","\\ntrianglelefteq",!0);I(P,ce,ue,"⊊","\\subsetneq",!0);I(P,ce,ue,"","\\@varsubsetneq");I(P,ce,ue,"⫋","\\subsetneqq",!0);I(P,ce,ue,"","\\@varsubsetneqq");I(P,ce,ue,"≯","\\ngtr",!0);I(P,ce,ue,"","\\@ngeqslant");I(P,ce,ue,"","\\@ngeqq");I(P,ce,ue,"⪈","\\gneq",!0);I(P,ce,ue,"≩","\\gneqq",!0);I(P,ce,ue,"","\\@gvertneqq");I(P,ce,ue,"⋧","\\gnsim",!0);I(P,ce,ue,"⪊","\\gnapprox",!0);I(P,ce,ue,"⊁","\\nsucc",!0);I(P,ce,ue,"⋡","\\nsucceq",!0);I(P,ce,ue,"⋩","\\succnsim",!0);I(P,ce,ue,"⪺","\\succnapprox",!0);I(P,ce,ue,"≆","\\ncong",!0);I(P,ce,ue,"","\\@nshortparallel");I(P,ce,ue,"∦","\\nparallel",!0);I(P,ce,ue,"⊯","\\nVDash",!0);I(P,ce,ue,"⋫","\\ntriangleright");I(P,ce,ue,"⋭","\\ntrianglerighteq",!0);I(P,ce,ue,"","\\@nsupseteqq");I(P,ce,ue,"⊋","\\supsetneq",!0);I(P,ce,ue,"","\\@varsupsetneq");I(P,ce,ue,"⫌","\\supsetneqq",!0);I(P,ce,ue,"","\\@varsupsetneqq");I(P,ce,ue,"⊮","\\nVdash",!0);I(P,ce,ue,"⪵","\\precneqq",!0);I(P,ce,ue,"⪶","\\succneqq",!0);I(P,ce,ue,"","\\@nsubseteqq");I(P,ce,bt,"⊴","\\unlhd");I(P,ce,bt,"⊵","\\unrhd");I(P,ce,ue,"↚","\\nleftarrow",!0);I(P,ce,ue,"↛","\\nrightarrow",!0);I(P,ce,ue,"⇍","\\nLeftarrow",!0);I(P,ce,ue,"⇏","\\nRightarrow",!0);I(P,ce,ue,"↮","\\nleftrightarrow",!0);I(P,ce,ue,"⇎","\\nLeftrightarrow",!0);I(P,ce,ue,"△","\\vartriangle");I(P,ce,_e,"ℏ","\\hslash");I(P,ce,_e,"▽","\\triangledown");I(P,ce,_e,"◊","\\lozenge");I(P,ce,_e,"Ⓢ","\\circledS");I(P,ce,_e,"®","\\circledR");I(Ue,ce,_e,"®","\\circledR");I(P,ce,_e,"∡","\\measuredangle",!0);I(P,ce,_e,"∄","\\nexists");I(P,ce,_e,"℧","\\mho");I(P,ce,_e,"Ⅎ","\\Finv",!0);I(P,ce,_e,"⅁","\\Game",!0);I(P,ce,_e,"‵","\\backprime");I(P,ce,_e,"▲","\\blacktriangle");I(P,ce,_e,"▼","\\blacktriangledown");I(P,ce,_e,"■","\\blacksquare");I(P,ce,_e,"⧫","\\blacklozenge");I(P,ce,_e,"★","\\bigstar");I(P,ce,_e,"∢","\\sphericalangle",!0);I(P,ce,_e,"∁","\\complement",!0);I(P,ce,_e,"ð","\\eth",!0);I(Ue,V,_e,"ð","ð");I(P,ce,_e,"╱","\\diagup");I(P,ce,_e,"╲","\\diagdown");I(P,ce,_e,"□","\\square");I(P,ce,_e,"□","\\Box");I(P,ce,_e,"◊","\\Diamond");I(P,ce,_e,"¥","\\yen",!0);I(Ue,ce,_e,"¥","\\yen",!0);I(P,ce,_e,"✓","\\checkmark",!0);I(Ue,ce,_e,"✓","\\checkmark");I(P,ce,_e,"ℶ","\\beth",!0);I(P,ce,_e,"ℸ","\\daleth",!0);I(P,ce,_e,"ℷ","\\gimel",!0);I(P,ce,_e,"ϝ","\\digamma",!0);I(P,ce,_e,"ϰ","\\varkappa");I(P,ce,Ja,"┌","\\@ulcorner",!0);I(P,ce,ea,"┐","\\@urcorner",!0);I(P,ce,Ja,"└","\\@llcorner",!0);I(P,ce,ea,"┘","\\@lrcorner",!0);I(P,ce,ue,"≦","\\leqq",!0);I(P,ce,ue,"⩽","\\leqslant",!0);I(P,ce,ue,"⪕","\\eqslantless",!0);I(P,ce,ue,"≲","\\lesssim",!0);I(P,ce,ue,"⪅","\\lessapprox",!0);I(P,ce,ue,"≊","\\approxeq",!0);I(P,ce,bt,"⋖","\\lessdot");I(P,ce,ue,"⋘","\\lll",!0);I(P,ce,ue,"≶","\\lessgtr",!0);I(P,ce,ue,"⋚","\\lesseqgtr",!0);I(P,ce,ue,"⪋","\\lesseqqgtr",!0);I(P,ce,ue,"≑","\\doteqdot");I(P,ce,ue,"≓","\\risingdotseq",!0);I(P,ce,ue,"≒","\\fallingdotseq",!0);I(P,ce,ue,"∽","\\backsim",!0);I(P,ce,ue,"⋍","\\backsimeq",!0);I(P,ce,ue,"⫅","\\subseteqq",!0);I(P,ce,ue,"⋐","\\Subset",!0);I(P,ce,ue,"⊏","\\sqsubset",!0);I(P,ce,ue,"≼","\\preccurlyeq",!0);I(P,ce,ue,"⋞","\\curlyeqprec",!0);I(P,ce,ue,"≾","\\precsim",!0);I(P,ce,ue,"⪷","\\precapprox",!0);I(P,ce,ue,"⊲","\\vartriangleleft");I(P,ce,ue,"⊴","\\trianglelefteq");I(P,ce,ue,"⊨","\\vDash",!0);I(P,ce,ue,"⊪","\\Vvdash",!0);I(P,ce,ue,"⌣","\\smallsmile");I(P,ce,ue,"⌢","\\smallfrown");I(P,ce,ue,"≏","\\bumpeq",!0);I(P,ce,ue,"≎","\\Bumpeq",!0);I(P,ce,ue,"≧","\\geqq",!0);I(P,ce,ue,"⩾","\\geqslant",!0);I(P,ce,ue,"⪖","\\eqslantgtr",!0);I(P,ce,ue,"≳","\\gtrsim",!0);I(P,ce,ue,"⪆","\\gtrapprox",!0);I(P,ce,bt,"⋗","\\gtrdot");I(P,ce,ue,"⋙","\\ggg",!0);I(P,ce,ue,"≷","\\gtrless",!0);I(P,ce,ue,"⋛","\\gtreqless",!0);I(P,ce,ue,"⪌","\\gtreqqless",!0);I(P,ce,ue,"≖","\\eqcirc",!0);I(P,ce,ue,"≗","\\circeq",!0);I(P,ce,ue,"≜","\\triangleq",!0);I(P,ce,ue,"∼","\\thicksim");I(P,ce,ue,"≈","\\thickapprox");I(P,ce,ue,"⫆","\\supseteqq",!0);I(P,ce,ue,"⋑","\\Supset",!0);I(P,ce,ue,"⊐","\\sqsupset",!0);I(P,ce,ue,"≽","\\succcurlyeq",!0);I(P,ce,ue,"⋟","\\curlyeqsucc",!0);I(P,ce,ue,"≿","\\succsim",!0);I(P,ce,ue,"⪸","\\succapprox",!0);I(P,ce,ue,"⊳","\\vartriangleright");I(P,ce,ue,"⊵","\\trianglerighteq");I(P,ce,ue,"⊩","\\Vdash",!0);I(P,ce,ue,"∣","\\shortmid");I(P,ce,ue,"∥","\\shortparallel");I(P,ce,ue,"≬","\\between",!0);I(P,ce,ue,"⋔","\\pitchfork",!0);I(P,ce,ue,"∝","\\varpropto");I(P,ce,ue,"◀","\\blacktriangleleft");I(P,ce,ue,"∴","\\therefore",!0);I(P,ce,ue,"∍","\\backepsilon");I(P,ce,ue,"▶","\\blacktriangleright");I(P,ce,ue,"∵","\\because",!0);I(P,ce,ue,"⋘","\\llless");I(P,ce,ue,"⋙","\\gggtr");I(P,ce,bt,"⊲","\\lhd");I(P,ce,bt,"⊳","\\rhd");I(P,ce,ue,"≂","\\eqsim",!0);I(P,V,ue,"⋈","\\Join");I(P,ce,ue,"≑","\\Doteq",!0);I(P,ce,bt,"∔","\\dotplus",!0);I(P,ce,bt,"∖","\\smallsetminus");I(P,ce,bt,"⋒","\\Cap",!0);I(P,ce,bt,"⋓","\\Cup",!0);I(P,ce,bt,"⩞","\\doublebarwedge",!0);I(P,ce,bt,"⊟","\\boxminus",!0);I(P,ce,bt,"⊞","\\boxplus",!0);I(P,ce,bt,"⋇","\\divideontimes",!0);I(P,ce,bt,"⋉","\\ltimes",!0);I(P,ce,bt,"⋊","\\rtimes",!0);I(P,ce,bt,"⋋","\\leftthreetimes",!0);I(P,ce,bt,"⋌","\\rightthreetimes",!0);I(P,ce,bt,"⋏","\\curlywedge",!0);I(P,ce,bt,"⋎","\\curlyvee",!0);I(P,ce,bt,"⊝","\\circleddash",!0);I(P,ce,bt,"⊛","\\circledast",!0);I(P,ce,bt,"⋅","\\centerdot");I(P,ce,bt,"⊺","\\intercal",!0);I(P,ce,bt,"⋒","\\doublecap");I(P,ce,bt,"⋓","\\doublecup");I(P,ce,bt,"⊠","\\boxtimes",!0);I(P,ce,ue,"⇢","\\dashrightarrow",!0);I(P,ce,ue,"⇠","\\dashleftarrow",!0);I(P,ce,ue,"⇇","\\leftleftarrows",!0);I(P,ce,ue,"⇆","\\leftrightarrows",!0);I(P,ce,ue,"⇚","\\Lleftarrow",!0);I(P,ce,ue,"↞","\\twoheadleftarrow",!0);I(P,ce,ue,"↢","\\leftarrowtail",!0);I(P,ce,ue,"↫","\\looparrowleft",!0);I(P,ce,ue,"⇋","\\leftrightharpoons",!0);I(P,ce,ue,"↶","\\curvearrowleft",!0);I(P,ce,ue,"↺","\\circlearrowleft",!0);I(P,ce,ue,"↰","\\Lsh",!0);I(P,ce,ue,"⇈","\\upuparrows",!0);I(P,ce,ue,"↿","\\upharpoonleft",!0);I(P,ce,ue,"⇃","\\downharpoonleft",!0);I(P,V,ue,"⊶","\\origof",!0);I(P,V,ue,"⊷","\\imageof",!0);I(P,ce,ue,"⊸","\\multimap",!0);I(P,ce,ue,"↭","\\leftrightsquigarrow",!0);I(P,ce,ue,"⇉","\\rightrightarrows",!0);I(P,ce,ue,"⇄","\\rightleftarrows",!0);I(P,ce,ue,"↠","\\twoheadrightarrow",!0);I(P,ce,ue,"↣","\\rightarrowtail",!0);I(P,ce,ue,"↬","\\looparrowright",!0);I(P,ce,ue,"↷","\\curvearrowright",!0);I(P,ce,ue,"↻","\\circlearrowright",!0);I(P,ce,ue,"↱","\\Rsh",!0);I(P,ce,ue,"⇊","\\downdownarrows",!0);I(P,ce,ue,"↾","\\upharpoonright",!0);I(P,ce,ue,"⇂","\\downharpoonright",!0);I(P,ce,ue,"⇝","\\rightsquigarrow",!0);I(P,ce,ue,"⇝","\\leadsto");I(P,ce,ue,"⇛","\\Rrightarrow",!0);I(P,ce,ue,"↾","\\restriction");I(P,V,_e,"‘","`");I(P,V,_e,"$","\\$");I(Ue,V,_e,"$","\\$");I(Ue,V,_e,"$","\\textdollar");I(P,V,_e,"%","\\%");I(Ue,V,_e,"%","\\%");I(P,V,_e,"_","\\_");I(Ue,V,_e,"_","\\_");I(Ue,V,_e,"_","\\textunderscore");I(P,V,_e,"∠","\\angle",!0);I(P,V,_e,"∞","\\infty",!0);I(P,V,_e,"′","\\prime");I(P,V,_e,"△","\\triangle");I(P,V,_e,"Γ","\\Gamma",!0);I(P,V,_e,"Δ","\\Delta",!0);I(P,V,_e,"Θ","\\Theta",!0);I(P,V,_e,"Λ","\\Lambda",!0);I(P,V,_e,"Ξ","\\Xi",!0);I(P,V,_e,"Π","\\Pi",!0);I(P,V,_e,"Σ","\\Sigma",!0);I(P,V,_e,"Υ","\\Upsilon",!0);I(P,V,_e,"Φ","\\Phi",!0);I(P,V,_e,"Ψ","\\Psi",!0);I(P,V,_e,"Ω","\\Omega",!0);I(P,V,_e,"A","Α");I(P,V,_e,"B","Β");I(P,V,_e,"E","Ε");I(P,V,_e,"Z","Ζ");I(P,V,_e,"H","Η");I(P,V,_e,"I","Ι");I(P,V,_e,"K","Κ");I(P,V,_e,"M","Μ");I(P,V,_e,"N","Ν");I(P,V,_e,"O","Ο");I(P,V,_e,"P","Ρ");I(P,V,_e,"T","Τ");I(P,V,_e,"X","Χ");I(P,V,_e,"¬","\\neg",!0);I(P,V,_e,"¬","\\lnot");I(P,V,_e,"⊤","\\top");I(P,V,_e,"⊥","\\bot");I(P,V,_e,"∅","\\emptyset");I(P,ce,_e,"∅","\\varnothing");I(P,V,Xt,"α","\\alpha",!0);I(P,V,Xt,"β","\\beta",!0);I(P,V,Xt,"γ","\\gamma",!0);I(P,V,Xt,"δ","\\delta",!0);I(P,V,Xt,"ϵ","\\epsilon",!0);I(P,V,Xt,"ζ","\\zeta",!0);I(P,V,Xt,"η","\\eta",!0);I(P,V,Xt,"θ","\\theta",!0);I(P,V,Xt,"ι","\\iota",!0);I(P,V,Xt,"κ","\\kappa",!0);I(P,V,Xt,"λ","\\lambda",!0);I(P,V,Xt,"μ","\\mu",!0);I(P,V,Xt,"ν","\\nu",!0);I(P,V,Xt,"ξ","\\xi",!0);I(P,V,Xt,"ο","\\omicron",!0);I(P,V,Xt,"π","\\pi",!0);I(P,V,Xt,"ρ","\\rho",!0);I(P,V,Xt,"σ","\\sigma",!0);I(P,V,Xt,"τ","\\tau",!0);I(P,V,Xt,"υ","\\upsilon",!0);I(P,V,Xt,"ϕ","\\phi",!0);I(P,V,Xt,"χ","\\chi",!0);I(P,V,Xt,"ψ","\\psi",!0);I(P,V,Xt,"ω","\\omega",!0);I(P,V,Xt,"ε","\\varepsilon",!0);I(P,V,Xt,"ϑ","\\vartheta",!0);I(P,V,Xt,"ϖ","\\varpi",!0);I(P,V,Xt,"ϱ","\\varrho",!0);I(P,V,Xt,"ς","\\varsigma",!0);I(P,V,Xt,"φ","\\varphi",!0);I(P,V,bt,"∗","*",!0);I(P,V,bt,"+","+");I(P,V,bt,"−","-",!0);I(P,V,bt,"⋅","\\cdot",!0);I(P,V,bt,"∘","\\circ",!0);I(P,V,bt,"÷","\\div",!0);I(P,V,bt,"±","\\pm",!0);I(P,V,bt,"×","\\times",!0);I(P,V,bt,"∩","\\cap",!0);I(P,V,bt,"∪","\\cup",!0);I(P,V,bt,"∖","\\setminus",!0);I(P,V,bt,"∧","\\land");I(P,V,bt,"∨","\\lor");I(P,V,bt,"∧","\\wedge",!0);I(P,V,bt,"∨","\\vee",!0);I(P,V,_e,"√","\\surd");I(P,V,Ja,"⟨","\\langle",!0);I(P,V,Ja,"∣","\\lvert");I(P,V,Ja,"∥","\\lVert");I(P,V,ea,"?","?");I(P,V,ea,"!","!");I(P,V,ea,"⟩","\\rangle",!0);I(P,V,ea,"∣","\\rvert");I(P,V,ea,"∥","\\rVert");I(P,V,ue,"=","=");I(P,V,ue,":",":");I(P,V,ue,"≈","\\approx",!0);I(P,V,ue,"≅","\\cong",!0);I(P,V,ue,"≥","\\ge");I(P,V,ue,"≥","\\geq",!0);I(P,V,ue,"←","\\gets");I(P,V,ue,">","\\gt",!0);I(P,V,ue,"∈","\\in",!0);I(P,V,ue,"","\\@not");I(P,V,ue,"⊂","\\subset",!0);I(P,V,ue,"⊃","\\supset",!0);I(P,V,ue,"⊆","\\subseteq",!0);I(P,V,ue,"⊇","\\supseteq",!0);I(P,ce,ue,"⊈","\\nsubseteq",!0);I(P,ce,ue,"⊉","\\nsupseteq",!0);I(P,V,ue,"⊨","\\models");I(P,V,ue,"←","\\leftarrow",!0);I(P,V,ue,"≤","\\le");I(P,V,ue,"≤","\\leq",!0);I(P,V,ue,"<","\\lt",!0);I(P,V,ue,"→","\\rightarrow",!0);I(P,V,ue,"→","\\to");I(P,ce,ue,"≱","\\ngeq",!0);I(P,ce,ue,"≰","\\nleq",!0);I(P,V,Zu," ","\\ ");I(P,V,Zu," ","\\space");I(P,V,Zu," ","\\nobreakspace");I(Ue,V,Zu," ","\\ ");I(Ue,V,Zu," "," ");I(Ue,V,Zu," ","\\space");I(Ue,V,Zu," ","\\nobreakspace");I(P,V,Zu,null,"\\nobreak");I(P,V,Zu,null,"\\allowbreak");I(P,V,X5,",",",");I(P,V,X5,";",";");I(P,ce,bt,"⊼","\\barwedge",!0);I(P,ce,bt,"⊻","\\veebar",!0);I(P,V,bt,"⊙","\\odot",!0);I(P,V,bt,"⊕","\\oplus",!0);I(P,V,bt,"⊗","\\otimes",!0);I(P,V,_e,"∂","\\partial",!0);I(P,V,bt,"⊘","\\oslash",!0);I(P,ce,bt,"⊚","\\circledcirc",!0);I(P,ce,bt,"⊡","\\boxdot",!0);I(P,V,bt,"△","\\bigtriangleup");I(P,V,bt,"▽","\\bigtriangledown");I(P,V,bt,"†","\\dagger");I(P,V,bt,"⋄","\\diamond");I(P,V,bt,"⋆","\\star");I(P,V,bt,"◃","\\triangleleft");I(P,V,bt,"▹","\\triangleright");I(P,V,Ja,"{","\\{");I(Ue,V,_e,"{","\\{");I(Ue,V,_e,"{","\\textbraceleft");I(P,V,ea,"}","\\}");I(Ue,V,_e,"}","\\}");I(Ue,V,_e,"}","\\textbraceright");I(P,V,Ja,"{","\\lbrace");I(P,V,ea,"}","\\rbrace");I(P,V,Ja,"[","\\lbrack",!0);I(Ue,V,_e,"[","\\lbrack",!0);I(P,V,ea,"]","\\rbrack",!0);I(Ue,V,_e,"]","\\rbrack",!0);I(P,V,Ja,"(","\\lparen",!0);I(P,V,ea,")","\\rparen",!0);I(Ue,V,_e,"<","\\textless",!0);I(Ue,V,_e,">","\\textgreater",!0);I(P,V,Ja,"⌊","\\lfloor",!0);I(P,V,ea,"⌋","\\rfloor",!0);I(P,V,Ja,"⌈","\\lceil",!0);I(P,V,ea,"⌉","\\rceil",!0);I(P,V,_e,"\\","\\backslash");I(P,V,_e,"∣","|");I(P,V,_e,"∣","\\vert");I(Ue,V,_e,"|","\\textbar",!0);I(P,V,_e,"∥","\\|");I(P,V,_e,"∥","\\Vert");I(Ue,V,_e,"∥","\\textbardbl");I(Ue,V,_e,"~","\\textasciitilde");I(Ue,V,_e,"\\","\\textbackslash");I(Ue,V,_e,"^","\\textasciicircum");I(P,V,ue,"↑","\\uparrow",!0);I(P,V,ue,"⇑","\\Uparrow",!0);I(P,V,ue,"↓","\\downarrow",!0);I(P,V,ue,"⇓","\\Downarrow",!0);I(P,V,ue,"↕","\\updownarrow",!0);I(P,V,ue,"⇕","\\Updownarrow",!0);I(P,V,rs,"∐","\\coprod");I(P,V,rs,"⋁","\\bigvee");I(P,V,rs,"⋀","\\bigwedge");I(P,V,rs,"⨄","\\biguplus");I(P,V,rs,"⋂","\\bigcap");I(P,V,rs,"⋃","\\bigcup");I(P,V,rs,"∫","\\int");I(P,V,rs,"∫","\\intop");I(P,V,rs,"∬","\\iint");I(P,V,rs,"∭","\\iiint");I(P,V,rs,"∏","\\prod");I(P,V,rs,"∑","\\sum");I(P,V,rs,"⨂","\\bigotimes");I(P,V,rs,"⨁","\\bigoplus");I(P,V,rs,"⨀","\\bigodot");I(P,V,rs,"∮","\\oint");I(P,V,rs,"∯","\\oiint");I(P,V,rs,"∰","\\oiiint");I(P,V,rs,"⨆","\\bigsqcup");I(P,V,rs,"∫","\\smallint");I(Ue,V,fb,"…","\\textellipsis");I(P,V,fb,"…","\\mathellipsis");I(Ue,V,fb,"…","\\ldots",!0);I(P,V,fb,"…","\\ldots",!0);I(P,V,fb,"⋯","\\@cdots",!0);I(P,V,fb,"⋱","\\ddots",!0);I(P,V,_e,"⋮","\\varvdots");I(Ue,V,_e,"⋮","\\varvdots");I(P,V,sr,"ˊ","\\acute");I(P,V,sr,"ˋ","\\grave");I(P,V,sr,"¨","\\ddot");I(P,V,sr,"~","\\tilde");I(P,V,sr,"ˉ","\\bar");I(P,V,sr,"˘","\\breve");I(P,V,sr,"ˇ","\\check");I(P,V,sr,"^","\\hat");I(P,V,sr,"⃗","\\vec");I(P,V,sr,"˙","\\dot");I(P,V,sr,"˚","\\mathring");I(P,V,Xt,"","\\@imath");I(P,V,Xt,"","\\@jmath");I(P,V,_e,"ı","ı");I(P,V,_e,"ȷ","ȷ");I(Ue,V,_e,"ı","\\i",!0);I(Ue,V,_e,"ȷ","\\j",!0);I(Ue,V,_e,"ß","\\ss",!0);I(Ue,V,_e,"æ","\\ae",!0);I(Ue,V,_e,"œ","\\oe",!0);I(Ue,V,_e,"ø","\\o",!0);I(Ue,V,_e,"Æ","\\AE",!0);I(Ue,V,_e,"Œ","\\OE",!0);I(Ue,V,_e,"Ø","\\O",!0);I(Ue,V,sr,"ˊ","\\'");I(Ue,V,sr,"ˋ","\\`");I(Ue,V,sr,"ˆ","\\^");I(Ue,V,sr,"˜","\\~");I(Ue,V,sr,"ˉ","\\=");I(Ue,V,sr,"˘","\\u");I(Ue,V,sr,"˙","\\.");I(Ue,V,sr,"¸","\\c");I(Ue,V,sr,"˚","\\r");I(Ue,V,sr,"ˇ","\\v");I(Ue,V,sr,"¨",'\\"');I(Ue,V,sr,"˝","\\H");I(Ue,V,sr,"◯","\\textcircled");var PJ={"--":!0,"---":!0,"``":!0,"''":!0};I(Ue,V,_e,"–","--",!0);I(Ue,V,_e,"–","\\textendash");I(Ue,V,_e,"—","---",!0);I(Ue,V,_e,"—","\\textemdash");I(Ue,V,_e,"‘","`",!0);I(Ue,V,_e,"‘","\\textquoteleft");I(Ue,V,_e,"’","'",!0);I(Ue,V,_e,"’","\\textquoteright");I(Ue,V,_e,"“","``",!0);I(Ue,V,_e,"“","\\textquotedblleft");I(Ue,V,_e,"”","''",!0);I(Ue,V,_e,"”","\\textquotedblright");I(P,V,_e,"°","\\degree",!0);I(Ue,V,_e,"°","\\degree");I(Ue,V,_e,"°","\\textdegree",!0);I(P,V,_e,"£","\\pounds");I(P,V,_e,"£","\\mathsterling",!0);I(Ue,V,_e,"£","\\pounds");I(Ue,V,_e,"£","\\textsterling",!0);I(P,ce,_e,"✠","\\maltese");I(Ue,ce,_e,"✠","\\maltese");var SU='0123456789/@."';for(var G6=0;G6<SU.length;G6++){var xU=SU.charAt(G6);I(P,V,_e,xU,xU)}var kU='0123456789!@*()-=+";:?/.,';for(var K6=0;K6<kU.length;K6++){var LU=kU.charAt(K6);I(Ue,V,_e,LU,LU)}var u4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var Y6=0;Y6<u4.length;Y6++){var lS=u4.charAt(Y6);I(P,V,Xt,lS,lS),I(Ue,V,_e,lS,lS)}I(P,ce,_e,"C","ℂ");I(Ue,ce,_e,"C","ℂ");I(P,ce,_e,"H","ℍ");I(Ue,ce,_e,"H","ℍ");I(P,ce,_e,"N","ℕ");I(Ue,ce,_e,"N","ℕ");I(P,ce,_e,"P","ℙ");I(Ue,ce,_e,"P","ℙ");I(P,ce,_e,"Q","ℚ");I(Ue,ce,_e,"Q","ℚ");I(P,ce,_e,"R","ℝ");I(Ue,ce,_e,"R","ℝ");I(P,ce,_e,"Z","ℤ");I(Ue,ce,_e,"Z","ℤ");I(P,V,Xt,"h","ℎ");I(Ue,V,Xt,"h","ℎ");var oi="";for(var Ao=0;Ao<u4.length;Ao++){var Cr=u4.charAt(Ao);oi=String.fromCharCode(55349,56320+Ao),I(P,V,Xt,Cr,oi),I(Ue,V,_e,Cr,oi),oi=String.fromCharCode(55349,56372+Ao),I(P,V,Xt,Cr,oi),I(Ue,V,_e,Cr,oi),oi=String.fromCharCode(55349,56424+Ao),I(P,V,Xt,Cr,oi),I(Ue,V,_e,Cr,oi),oi=String.fromCharCode(55349,56580+Ao),I(P,V,Xt,Cr,oi),I(Ue,V,_e,Cr,oi),oi=String.fromCharCode(55349,56684+Ao),I(P,V,Xt,Cr,oi),I(Ue,V,_e,Cr,oi),oi=String.fromCharCode(55349,56736+Ao),I(P,V,Xt,Cr,oi),I(Ue,V,_e,Cr,oi),oi=String.fromCharCode(55349,56788+Ao),I(P,V,Xt,Cr,oi),I(Ue,V,_e,Cr,oi),oi=String.fromCharCode(55349,56840+Ao),I(P,V,Xt,Cr,oi),I(Ue,V,_e,Cr,oi),oi=String.fromCharCode(55349,56944+Ao),I(P,V,Xt,Cr,oi),I(Ue,V,_e,Cr,oi),Ao<26&&(oi=String.fromCharCode(55349,56632+Ao),I(P,V,Xt,Cr,oi),I(Ue,V,_e,Cr,oi),oi=String.fromCharCode(55349,56476+Ao),I(P,V,Xt,Cr,oi),I(Ue,V,_e,Cr,oi))}oi="𝕜";I(P,V,Xt,"k",oi);I(Ue,V,_e,"k",oi);for(var sg=0;sg<10;sg++){var Cd=sg.toString();oi=String.fromCharCode(55349,57294+sg),I(P,V,Xt,Cd,oi),I(Ue,V,_e,Cd,oi),oi=String.fromCharCode(55349,57314+sg),I(P,V,Xt,Cd,oi),I(Ue,V,_e,Cd,oi),oi=String.fromCharCode(55349,57324+sg),I(P,V,Xt,Cd,oi),I(Ue,V,_e,Cd,oi),oi=String.fromCharCode(55349,57334+sg),I(P,V,Xt,Cd,oi),I(Ue,V,_e,Cd,oi)}var yN="ÐÞþ";for(var Z6=0;Z6<yN.length;Z6++){var cS=yN.charAt(Z6);I(P,V,Xt,cS,cS),I(Ue,V,_e,cS,cS)}var hS=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],TU=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],jDe=function(e,t){var i=e.charCodeAt(0),r=e.charCodeAt(1),s=(i-55296)*1024+(r-56320)+65536,o=t==="math"?0:1;if(119808<=s&&s<120484){var a=Math.floor((s-119808)/26);return[hS[a][2],hS[a][o]]}else if(120782<=s&&s<=120831){var l=Math.floor((s-120782)/10);return[TU[l][2],TU[l][o]]}else{if(s===120485||s===120486)return[hS[0][2],hS[0][o]];if(120486<s&&s<120782)return["",""];throw new et("Unsupported character: "+e)}},Q5=function(e,t,i){return Gn[i][e]&&Gn[i][e].replace&&(e=Gn[i][e].replace),{value:e,metrics:mP(e,t,i)}},Xl=function(e,t,i,r,s){var o=Q5(e,t,i),a=o.metrics;e=o.value;var l;if(a){var c=a.italic;(i==="text"||r&&r.font==="mathit")&&(c=0),l=new Tl(e,a.height,a.depth,c,a.skew,a.width,s)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+t+"' and mode '"+i+"'")),l=new Tl(e,0,0,0,0,0,s);if(r){l.maxFontSize=r.sizeMultiplier,r.style.isTight()&&l.classes.push("mtight");var h=r.getColor();h&&(l.style.color=h)}return l},UDe=function(e,t,i,r){return r===void 0&&(r=[]),i.font==="boldsymbol"&&Q5(e,"Main-Bold",t).metrics?Xl(e,"Main-Bold",t,i,r.concat(["mathbf"])):e==="\\"||Gn[t][e].font==="main"?Xl(e,"Main-Regular",t,i,r):Xl(e,"AMS-Regular",t,i,r.concat(["amsrm"]))},qDe=function(e,t,i,r,s){return s!=="textord"&&Q5(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},GDe=function(e,t,i){var r=e.mode,s=e.text,o=["mord"],a=r==="math"||r==="text"&&t.font,l=a?t.font:t.fontFamily,c="",h="";if(s.charCodeAt(0)===55349&&([c,h]=jDe(s,r)),c.length>0)return Xl(s,c,r,t,o.concat(h));if(l){var u,d;if(l==="boldsymbol"){var g=qDe(s,r,t,o,i);u=g.fontName,d=[g.fontClass]}else a?(u=FJ[l].fontName,d=[l]):(u=uS(l,t.fontWeight,t.fontShape),d=[l,t.fontWeight,t.fontShape]);if(Q5(s,u,r).metrics)return Xl(s,u,r,t,o.concat(d));if(PJ.hasOwnProperty(s)&&u.slice(0,10)==="Typewriter"){for(var p=[],b=0;b<s.length;b++)p.push(Xl(s[b],u,r,t,o.concat(d)));return BJ(p)}}if(i==="mathord")return Xl(s,"Math-Italic",r,t,o.concat(["mathnormal"]));if(i==="textord"){var _=Gn[r][s]&&Gn[r][s].font;if(_==="ams"){var w=uS("amsrm",t.fontWeight,t.fontShape);return Xl(s,w,r,t,o.concat("amsrm",t.fontWeight,t.fontShape))}else if(_==="main"||!_){var y=uS("textrm",t.fontWeight,t.fontShape);return Xl(s,y,r,t,o.concat(t.fontWeight,t.fontShape))}else{var k=uS(_,t.fontWeight,t.fontShape);return Xl(s,k,r,t,o.concat(k,t.fontWeight,t.fontShape))}}else throw new Error("unexpected type: "+i+" in makeOrd")},KDe=(n,e)=>{if(wf(n.classes)!==wf(e.classes)||n.skew!==e.skew||n.maxFontSize!==e.maxFontSize)return!1;if(n.classes.length===1){var t=n.classes[0];if(t==="mbin"||t==="mord")return!1}for(var i in n.style)if(n.style.hasOwnProperty(i)&&n.style[i]!==e.style[i])return!1;for(var r in e.style)if(e.style.hasOwnProperty(r)&&n.style[r]!==e.style[r])return!1;return!0},YDe=n=>{for(var e=0;e<n.length-1;e++){var t=n[e],i=n[e+1];t instanceof Tl&&i instanceof Tl&&KDe(t,i)&&(t.text+=i.text,t.height=Math.max(t.height,i.height),t.depth=Math.max(t.depth,i.depth),t.italic=i.italic,n.splice(e+1,1),e--)}return n},bP=function(e){for(var t=0,i=0,r=0,s=0;s<e.children.length;s++){var o=e.children[s];o.height>t&&(t=o.height),o.depth>i&&(i=o.depth),o.maxFontSize>r&&(r=o.maxFontSize)}e.height=t,e.depth=i,e.maxFontSize=r},ua=function(e,t,i,r){var s=new Gy(e,t,i,r);return bP(s),s},OJ=(n,e,t,i)=>new Gy(n,e,t,i),ZDe=function(e,t,i){var r=ua([e],[],t);return r.height=Math.max(i||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),r.style.borderBottomWidth=at(r.height),r.maxFontSize=1,r},XDe=function(e,t,i,r){var s=new pP(e,t,i,r);return bP(s),s},BJ=function(e){var t=new qy(e);return bP(t),t},QDe=function(e,t){return e instanceof qy?ua([],[e],t):e},JDe=function(e){if(e.positionType==="individualShift"){for(var t=e.children,i=[t[0]],r=-t[0].shift-t[0].elem.depth,s=r,o=1;o<t.length;o++){var a=-t[o].shift-s-t[o].elem.depth,l=a-(t[o-1].elem.height+t[o-1].elem.depth);s=s+a,i.push({type:"kern",size:l}),i.push(t[o])}return{children:i,depth:r}}var c;if(e.positionType==="top"){for(var h=e.positionData,u=0;u<e.children.length;u++){var d=e.children[u];h-=d.type==="kern"?d.size:d.elem.height+d.elem.depth}c=h}else if(e.positionType==="bottom")c=-e.positionData;else{var g=e.children[0];if(g.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")c=-g.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")c=-g.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:c}},eEe=function(e,t){for(var{children:i,depth:r}=JDe(e),s=0,o=0;o<i.length;o++){var a=i[o];if(a.type==="elem"){var l=a.elem;s=Math.max(s,l.maxFontSize,l.height)}}s+=2;var c=ua(["pstrut"],[]);c.style.height=at(s);for(var h=[],u=r,d=r,g=r,p=0;p<i.length;p++){var b=i[p];if(b.type==="kern")g+=b.size;else{var _=b.elem,w=b.wrapperClasses||[],y=b.wrapperStyle||{},k=ua(w,[c,_],void 0,y);k.style.top=at(-s-g-_.depth),b.marginLeft&&(k.style.marginLeft=b.marginLeft),b.marginRight&&(k.style.marginRight=b.marginRight),h.push(k),g+=_.height+_.depth}u=Math.min(u,g),d=Math.max(d,g)}var L=ua(["vlist"],h);L.style.height=at(d);var T;if(u<0){var N=ua([],[]),D=ua(["vlist"],[N]);D.style.height=at(-u);var O=ua(["vlist-s"],[new Tl("​")]);T=[ua(["vlist-r"],[L,O]),ua(["vlist-r"],[D])]}else T=[ua(["vlist-r"],[L])];var B=ua(["vlist-t"],T);return T.length===2&&B.classes.push("vlist-t2"),B.height=d,B.depth=-u,B},tEe=(n,e)=>{var t=ua(["mspace"],[],e),i=mr(n,e);return t.style.marginRight=at(i),t},uS=function(e,t,i){var r="";switch(e){case"amsrm":r="AMS";break;case"textrm":r="Main";break;case"textsf":r="SansSerif";break;case"texttt":r="Typewriter";break;default:r=e}var s;return t==="textbf"&&i==="textit"?s="BoldItalic":t==="textbf"?s="Bold":t==="textit"?s="Italic":s="Regular",r+"-"+s},FJ={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},WJ={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},iEe=function(e,t){var[i,r,s]=WJ[e],o=new yf(i),a=new Fu([o],{width:at(r),height:at(s),style:"width:"+at(r),viewBox:"0 0 "+1e3*r+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),l=OJ(["overlay"],[a],t);return l.height=s,l.style.height=at(s),l.style.width=at(r),l},ke={fontMap:FJ,makeSymbol:Xl,mathsym:UDe,makeSpan:ua,makeSvgSpan:OJ,makeLineSpan:ZDe,makeAnchor:XDe,makeFragment:BJ,wrapFragment:QDe,makeVList:eEe,makeOrd:GDe,makeGlue:tEe,staticSvg:iEe,svgData:WJ,tryCombineChars:YDe},dr={number:3,unit:"mu"},og={number:4,unit:"mu"},Bh={number:5,unit:"mu"},nEe={mord:{mop:dr,mbin:og,mrel:Bh,minner:dr},mop:{mord:dr,mop:dr,mrel:Bh,minner:dr},mbin:{mord:og,mop:og,mopen:og,minner:og},mrel:{mord:Bh,mop:Bh,mopen:Bh,minner:Bh},mopen:{},mclose:{mop:dr,mbin:og,mrel:Bh,minner:dr},mpunct:{mord:dr,mop:dr,mrel:Bh,mopen:dr,mclose:dr,mpunct:dr,minner:dr},minner:{mord:dr,mop:dr,mbin:og,mrel:Bh,mopen:dr,mpunct:dr,minner:dr}},rEe={mord:{mop:dr},mop:{mord:dr,mop:dr},mbin:{},mrel:{},mopen:{},mclose:{mop:dr},mpunct:{},minner:{mop:dr}},zJ={},d4={},f4={};function dt(n){for(var{type:e,names:t,props:i,handler:r,htmlBuilder:s,mathmlBuilder:o}=n,a={type:e,numArgs:i.numArgs,argTypes:i.argTypes,allowedInArgument:!!i.allowedInArgument,allowedInText:!!i.allowedInText,allowedInMath:i.allowedInMath===void 0?!0:i.allowedInMath,numOptionalArgs:i.numOptionalArgs||0,infix:!!i.infix,primitive:!!i.primitive,handler:r},l=0;l<t.length;++l)zJ[t[l]]=a;e&&(s&&(d4[e]=s),o&&(f4[e]=o))}function sp(n){var{type:e,htmlBuilder:t,mathmlBuilder:i}=n;dt({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:t,mathmlBuilder:i})}var g4=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},Vr=function(e){return e.type==="ordgroup"?e.body:[e]},Wu=ke.makeSpan,sEe=["leftmost","mbin","mopen","mrel","mop","mpunct"],oEe=["rightmost","mrel","mclose","mpunct"],aEe={display:Qt.DISPLAY,text:Qt.TEXT,script:Qt.SCRIPT,scriptscript:Qt.SCRIPTSCRIPT},lEe={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},_s=function(e,t,i,r){r===void 0&&(r=[null,null]);for(var s=[],o=0;o<e.length;o++){var a=an(e[o],t);if(a instanceof qy){var l=a.children;s.push(...l)}else s.push(a)}if(ke.tryCombineChars(s),!i)return s;var c=t;if(e.length===1){var h=e[0];h.type==="sizing"?c=t.havingSize(h.size):h.type==="styling"&&(c=t.havingStyle(aEe[h.style]))}var u=Wu([r[0]||"leftmost"],[],t),d=Wu([r[1]||"rightmost"],[],t),g=i==="root";return DU(s,(p,b)=>{var _=b.classes[0],w=p.classes[0];_==="mbin"&&qt.contains(oEe,w)?b.classes[0]="mord":w==="mbin"&&qt.contains(sEe,_)&&(p.classes[0]="mord")},{node:u},d,g),DU(s,(p,b)=>{var _=CN(b),w=CN(p),y=_&&w?p.hasClass("mtight")?rEe[_][w]:nEe[_][w]:null;if(y)return ke.makeGlue(y,c)},{node:u},d,g),s},DU=function n(e,t,i,r,s){r&&e.push(r);for(var o=0;o<e.length;o++){var a=e[o],l=HJ(a);if(l){n(l.children,t,i,null,s);continue}var c=!a.hasClass("mspace");if(c){var h=t(a,i.node);h&&(i.insertAfter?i.insertAfter(h):(e.unshift(h),o++))}c?i.node=a:s&&a.hasClass("newline")&&(i.node=Wu(["leftmost"])),i.insertAfter=(u=>d=>{e.splice(u+1,0,d),o++})(o)}r&&e.pop()},HJ=function(e){return e instanceof qy||e instanceof pP||e instanceof Gy&&e.hasClass("enclosing")?e:null},cEe=function n(e,t){var i=HJ(e);if(i){var r=i.children;if(r.length){if(t==="right")return n(r[r.length-1],"right");if(t==="left")return n(r[0],"left")}}return e},CN=function(e,t){return e?(t&&(e=cEe(e,t)),lEe[e.classes[0]]||null):null},iy=function(e,t){var i=["nulldelimiter"].concat(e.baseSizingClasses());return Wu(t.concat(i))},an=function(e,t,i){if(!e)return Wu();if(d4[e.type]){var r=d4[e.type](e,t);if(i&&t.size!==i.size){r=Wu(t.sizingClasses(i),[r],t);var s=t.sizeMultiplier/i.sizeMultiplier;r.height*=s,r.depth*=s}return r}else throw new et("Got group of unknown type: '"+e.type+"'")};function dS(n,e){var t=Wu(["base"],n,e),i=Wu(["strut"]);return i.style.height=at(t.height+t.depth),t.depth&&(i.style.verticalAlign=at(-t.depth)),t.children.unshift(i),t}function SN(n,e){var t=null;n.length===1&&n[0].type==="tag"&&(t=n[0].tag,n=n[0].body);var i=_s(n,e,"root"),r;i.length===2&&i[1].hasClass("tag")&&(r=i.pop());for(var s=[],o=[],a=0;a<i.length;a++)if(o.push(i[a]),i[a].hasClass("mbin")||i[a].hasClass("mrel")||i[a].hasClass("allowbreak")){for(var l=!1;a<i.length-1&&i[a+1].hasClass("mspace")&&!i[a+1].hasClass("newline");)a++,o.push(i[a]),i[a].hasClass("nobreak")&&(l=!0);l||(s.push(dS(o,e)),o=[])}else i[a].hasClass("newline")&&(o.pop(),o.length>0&&(s.push(dS(o,e)),o=[]),s.push(i[a]));o.length>0&&s.push(dS(o,e));var c;t?(c=dS(_s(t,e,!0)),c.classes=["tag"],s.push(c)):r&&s.push(r);var h=Wu(["katex-html"],s);if(h.setAttribute("aria-hidden","true"),c){var u=c.children[0];u.style.height=at(h.height+h.depth),h.depth&&(u.style.verticalAlign=at(-h.depth))}return h}function VJ(n){return new qy(n)}class ja{constructor(e,t,i){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=i||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=wf(this.classes));for(var i=0;i<this.children.length;i++)if(this.children[i]instanceof th&&this.children[i+1]instanceof th){for(var r=this.children[i].toText()+this.children[++i].toText();this.children[i+1]instanceof th;)r+=this.children[++i].toText();e.appendChild(new th(r).toNode())}else e.appendChild(this.children[i].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=qt.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+qt.escape(wf(this.classes))+'"'),e+=">";for(var i=0;i<this.children.length;i++)e+=this.children[i].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class th{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return qt.escape(this.toText())}toText(){return this.text}}class hEe{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character=" ":e>=.1666&&e<=.1667?this.character=" ":e>=.2222&&e<=.2223?this.character=" ":e>=.2777&&e<=.2778?this.character="  ":e>=-.05556&&e<=-.05555?this.character=" ⁣":e>=-.1667&&e<=-.1666?this.character=" ⁣":e>=-.2223&&e<=-.2222?this.character=" ⁣":e>=-.2778&&e<=-.2777?this.character=" ⁣":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",at(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+at(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Qe={MathNode:ja,TextNode:th,SpaceNode:hEe,newDocumentFragment:VJ},Dl=function(e,t,i){return Gn[t][e]&&Gn[t][e].replace&&e.charCodeAt(0)!==55349&&!(PJ.hasOwnProperty(e)&&i&&(i.fontFamily&&i.fontFamily.slice(4,6)==="tt"||i.font&&i.font.slice(4,6)==="tt"))&&(e=Gn[t][e].replace),new Qe.TextNode(e)},_P=function(e){return e.length===1?e[0]:new Qe.MathNode("mrow",e)},vP=function(e,t){if(t.fontFamily==="texttt")return"monospace";if(t.fontFamily==="textsf")return t.fontShape==="textit"&&t.fontWeight==="textbf"?"sans-serif-bold-italic":t.fontShape==="textit"?"sans-serif-italic":t.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(t.fontShape==="textit"&&t.fontWeight==="textbf")return"bold-italic";if(t.fontShape==="textit")return"italic";if(t.fontWeight==="textbf")return"bold";var i=t.font;if(!i||i==="mathnormal")return null;var r=e.mode;if(i==="mathit")return"italic";if(i==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(i==="mathbf")return"bold";if(i==="mathbb")return"double-struck";if(i==="mathsfit")return"sans-serif-italic";if(i==="mathfrak")return"fraktur";if(i==="mathscr"||i==="mathcal")return"script";if(i==="mathsf")return"sans-serif";if(i==="mathtt")return"monospace";var s=e.text;if(qt.contains(["\\imath","\\jmath"],s))return null;Gn[r][s]&&Gn[r][s].replace&&(s=Gn[r][s].replace);var o=ke.fontMap[i].fontName;return mP(s,o,r)?ke.fontMap[i].variant:null};function X6(n){if(!n)return!1;if(n.type==="mi"&&n.children.length===1){var e=n.children[0];return e instanceof th&&e.text==="."}else if(n.type==="mo"&&n.children.length===1&&n.getAttribute("separator")==="true"&&n.getAttribute("lspace")==="0em"&&n.getAttribute("rspace")==="0em"){var t=n.children[0];return t instanceof th&&t.text===","}else return!1}var Da=function(e,t,i){if(e.length===1){var r=zn(e[0],t);return i&&r instanceof ja&&r.type==="mo"&&(r.setAttribute("lspace","0em"),r.setAttribute("rspace","0em")),[r]}for(var s=[],o,a=0;a<e.length;a++){var l=zn(e[a],t);if(l instanceof ja&&o instanceof ja){if(l.type==="mtext"&&o.type==="mtext"&&l.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...l.children);continue}else if(l.type==="mn"&&o.type==="mn"){o.children.push(...l.children);continue}else if(X6(l)&&o.type==="mn"){o.children.push(...l.children);continue}else if(l.type==="mn"&&X6(o))l.children=[...o.children,...l.children],s.pop();else if((l.type==="msup"||l.type==="msub")&&l.children.length>=1&&(o.type==="mn"||X6(o))){var c=l.children[0];c instanceof ja&&c.type==="mn"&&(c.children=[...o.children,...c.children],s.pop())}else if(o.type==="mi"&&o.children.length===1){var h=o.children[0];if(h instanceof th&&h.text==="̸"&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var u=l.children[0];u instanceof th&&u.text.length>0&&(u.text=u.text.slice(0,1)+"̸"+u.text.slice(1),s.pop())}}}s.push(l),o=l}return s},Cf=function(e,t,i){return _P(Da(e,t,i))},zn=function(e,t){if(!e)return new Qe.MathNode("mrow");if(f4[e.type]){var i=f4[e.type](e,t);return i}else throw new et("Got group of unknown type: '"+e.type+"'")};function EU(n,e,t,i,r){var s=Da(n,t),o;s.length===1&&s[0]instanceof ja&&qt.contains(["mrow","mtable"],s[0].type)?o=s[0]:o=new Qe.MathNode("mrow",s);var a=new Qe.MathNode("annotation",[new Qe.TextNode(e)]);a.setAttribute("encoding","application/x-tex");var l=new Qe.MathNode("semantics",[o,a]),c=new Qe.MathNode("math",[l]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),i&&c.setAttribute("display","block");var h=r?"katex":"katex-mathml";return ke.makeSpan([h],[c])}var $J=function(e){return new su({style:e.displayMode?Qt.DISPLAY:Qt.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},jJ=function(e,t){if(t.displayMode){var i=["katex-display"];t.leqno&&i.push("leqno"),t.fleqn&&i.push("fleqn"),e=ke.makeSpan(i,[e])}return e},uEe=function(e,t,i){var r=$J(i),s;if(i.output==="mathml")return EU(e,t,r,i.displayMode,!0);if(i.output==="html"){var o=SN(e,r);s=ke.makeSpan(["katex"],[o])}else{var a=EU(e,t,r,i.displayMode,!1),l=SN(e,r);s=ke.makeSpan(["katex"],[a,l])}return jJ(s,i)},dEe=function(e,t,i){var r=$J(i),s=SN(e,r),o=ke.makeSpan(["katex"],[s]);return jJ(o,i)},fEe={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},gEe=function(e){var t=new Qe.MathNode("mo",[new Qe.TextNode(fEe[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},mEe={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},pEe=function(e){return e.type==="ordgroup"?e.body.length:1},bEe=function(e,t){function i(){var a=4e5,l=e.label.slice(1);if(qt.contains(["widehat","widecheck","widetilde","utilde"],l)){var c=e,h=pEe(c.base),u,d,g;if(h>5)l==="widehat"||l==="widecheck"?(u=420,a=2364,g=.42,d=l+"4"):(u=312,a=2340,g=.34,d="tilde4");else{var p=[1,1,2,2,3,3][h];l==="widehat"||l==="widecheck"?(a=[0,1062,2364,2364,2364][p],u=[0,239,300,360,420][p],g=[0,.24,.3,.3,.36,.42][p],d=l+p):(a=[0,600,1033,2339,2340][p],u=[0,260,286,306,312][p],g=[0,.26,.286,.3,.306,.34][p],d="tilde"+p)}var b=new yf(d),_=new Fu([b],{width:"100%",height:at(g),viewBox:"0 0 "+a+" "+u,preserveAspectRatio:"none"});return{span:ke.makeSvgSpan([],[_],t),minWidth:0,height:g}}else{var w=[],y=mEe[l],[k,L,T]=y,N=T/1e3,D=k.length,O,B;if(D===1){var G=y[3];O=["hide-tail"],B=[G]}else if(D===2)O=["halfarrow-left","halfarrow-right"],B=["xMinYMin","xMaxYMin"];else if(D===3)O=["brace-left","brace-center","brace-right"],B=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+D+" children.");for(var H=0;H<D;H++){var q=new yf(k[H]),X=new Fu([q],{width:"400em",height:at(N),viewBox:"0 0 "+a+" "+T,preserveAspectRatio:B[H]+" slice"}),z=ke.makeSvgSpan([O[H]],[X],t);if(D===1)return{span:z,minWidth:L,height:N};z.style.height=at(N),w.push(z)}return{span:ke.makeSpan(["stretchy"],w,t),minWidth:L,height:N}}}var{span:r,minWidth:s,height:o}=i();return r.height=o,r.style.height=at(o),s>0&&(r.style.minWidth=at(s)),r},_Ee=function(e,t,i,r,s){var o,a=e.height+e.depth+i+r;if(/fbox|color|angl/.test(t)){if(o=ke.makeSpan(["stretchy",t],[],s),t==="fbox"){var l=s.color&&s.getColor();l&&(o.style.borderColor=l)}}else{var c=[];/^[bx]cancel$/.test(t)&&c.push(new wN({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&c.push(new wN({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var h=new Fu(c,{width:"100%",height:at(a)});o=ke.makeSvgSpan([],[h],s)}return o.height=a,o.style.height=at(a),o},zu={encloseSpan:_Ee,mathMLnode:gEe,svgSpan:bEe};function Di(n,e){if(!n||n.type!==e)throw new Error("Expected node of type "+e+", but got "+(n?"node of type "+n.type:String(n)));return n}function wP(n){var e=J5(n);if(!e)throw new Error("Expected node of symbol group type, but got "+(n?"node of type "+n.type:String(n)));return e}function J5(n){return n&&(n.type==="atom"||$De.hasOwnProperty(n.type))?n:null}var yP=(n,e)=>{var t,i,r;n&&n.type==="supsub"?(i=Di(n.base,"accent"),t=i.base,n.base=t,r=HDe(an(n,e)),n.base=i):(i=Di(n,"accent"),t=i.base);var s=an(t,e.havingCrampedStyle()),o=i.isShifty&&qt.isCharacterBox(t),a=0;if(o){var l=qt.getBaseElem(t),c=an(l,e.havingCrampedStyle());a=CU(c).skew}var h=i.label==="\\c",u=h?s.height+s.depth:Math.min(s.height,e.fontMetrics().xHeight),d;if(i.isStretchy)d=zu.svgSpan(i,e),d=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:d,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+at(2*a)+")",marginLeft:at(2*a)}:void 0}]},e);else{var g,p;i.label==="\\vec"?(g=ke.staticSvg("vec",e),p=ke.svgData.vec[1]):(g=ke.makeOrd({mode:i.mode,text:i.label},e,"textord"),g=CU(g),g.italic=0,p=g.width,h&&(u+=g.depth)),d=ke.makeSpan(["accent-body"],[g]);var b=i.label==="\\textcircled";b&&(d.classes.push("accent-full"),u=s.height);var _=a;b||(_-=p/2),d.style.left=at(_),i.label==="\\textcircled"&&(d.style.top=".2em"),d=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-u},{type:"elem",elem:d}]},e)}var w=ke.makeSpan(["mord","accent"],[d],e);return r?(r.children[0]=w,r.height=Math.max(w.height,r.height),r.classes[0]="mord",r):w},UJ=(n,e)=>{var t=n.isStretchy?zu.mathMLnode(n.label):new Qe.MathNode("mo",[Dl(n.label,n.mode)]),i=new Qe.MathNode("mover",[zn(n.base,e),t]);return i.setAttribute("accent","true"),i},vEe=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(n=>"\\"+n).join("|"));dt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(n,e)=>{var t=g4(e[0]),i=!vEe.test(n.funcName),r=!i||n.funcName==="\\widehat"||n.funcName==="\\widetilde"||n.funcName==="\\widecheck";return{type:"accent",mode:n.parser.mode,label:n.funcName,isStretchy:i,isShifty:r,base:t}},htmlBuilder:yP,mathmlBuilder:UJ});dt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(n,e)=>{var t=e[0],i=n.parser.mode;return i==="math"&&(n.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+n.funcName+" works only in text mode"),i="text"),{type:"accent",mode:i,label:n.funcName,isStretchy:!1,isShifty:!0,base:t}},htmlBuilder:yP,mathmlBuilder:UJ});dt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(n,e)=>{var{parser:t,funcName:i}=n,r=e[0];return{type:"accentUnder",mode:t.mode,label:i,base:r}},htmlBuilder:(n,e)=>{var t=an(n.base,e),i=zu.svgSpan(n,e),r=n.label==="\\utilde"?.12:0,s=ke.makeVList({positionType:"top",positionData:t.height,children:[{type:"elem",elem:i,wrapperClasses:["svg-align"]},{type:"kern",size:r},{type:"elem",elem:t}]},e);return ke.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:(n,e)=>{var t=zu.mathMLnode(n.label),i=new Qe.MathNode("munder",[zn(n.base,e),t]);return i.setAttribute("accentunder","true"),i}});var fS=n=>{var e=new Qe.MathNode("mpadded",n?[n]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};dt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(n,e,t){var{parser:i,funcName:r}=n;return{type:"xArrow",mode:i.mode,label:r,body:e[0],below:t[0]}},htmlBuilder(n,e){var t=e.style,i=e.havingStyle(t.sup()),r=ke.wrapFragment(an(n.body,i,e),e),s=n.label.slice(0,2)==="\\x"?"x":"cd";r.classes.push(s+"-arrow-pad");var o;n.below&&(i=e.havingStyle(t.sub()),o=ke.wrapFragment(an(n.below,i,e),e),o.classes.push(s+"-arrow-pad"));var a=zu.svgSpan(n,e),l=-e.fontMetrics().axisHeight+.5*a.height,c=-e.fontMetrics().axisHeight-.5*a.height-.111;(r.depth>.25||n.label==="\\xleftequilibrium")&&(c-=r.depth);var h;if(o){var u=-e.fontMetrics().axisHeight+o.height+.5*a.height+.111;h=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:c},{type:"elem",elem:a,shift:l},{type:"elem",elem:o,shift:u}]},e)}else h=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:c},{type:"elem",elem:a,shift:l}]},e);return h.children[0].children[0].children[1].classes.push("svg-align"),ke.makeSpan(["mrel","x-arrow"],[h],e)},mathmlBuilder(n,e){var t=zu.mathMLnode(n.label);t.setAttribute("minsize",n.label.charAt(0)==="x"?"1.75em":"3.0em");var i;if(n.body){var r=fS(zn(n.body,e));if(n.below){var s=fS(zn(n.below,e));i=new Qe.MathNode("munderover",[t,s,r])}else i=new Qe.MathNode("mover",[t,r])}else if(n.below){var o=fS(zn(n.below,e));i=new Qe.MathNode("munder",[t,o])}else i=fS(),i=new Qe.MathNode("mover",[t,i]);return i}});var wEe=ke.makeSpan;function qJ(n,e){var t=_s(n.body,e,!0);return wEe([n.mclass],t,e)}function GJ(n,e){var t,i=Da(n.body,e);return n.mclass==="minner"?t=new Qe.MathNode("mpadded",i):n.mclass==="mord"?n.isCharacterBox?(t=i[0],t.type="mi"):t=new Qe.MathNode("mi",i):(n.isCharacterBox?(t=i[0],t.type="mo"):t=new Qe.MathNode("mo",i),n.mclass==="mbin"?(t.attributes.lspace="0.22em",t.attributes.rspace="0.22em"):n.mclass==="mpunct"?(t.attributes.lspace="0em",t.attributes.rspace="0.17em"):n.mclass==="mopen"||n.mclass==="mclose"?(t.attributes.lspace="0em",t.attributes.rspace="0em"):n.mclass==="minner"&&(t.attributes.lspace="0.0556em",t.attributes.width="+0.1111em")),t}dt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(n,e){var{parser:t,funcName:i}=n,r=e[0];return{type:"mclass",mode:t.mode,mclass:"m"+i.slice(5),body:Vr(r),isCharacterBox:qt.isCharacterBox(r)}},htmlBuilder:qJ,mathmlBuilder:GJ});var e3=n=>{var e=n.type==="ordgroup"&&n.body.length?n.body[0]:n;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};dt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(n,e){var{parser:t}=n;return{type:"mclass",mode:t.mode,mclass:e3(e[0]),body:Vr(e[1]),isCharacterBox:qt.isCharacterBox(e[1])}}});dt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(n,e){var{parser:t,funcName:i}=n,r=e[1],s=e[0],o;i!=="\\stackrel"?o=e3(r):o="mrel";var a={type:"op",mode:r.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:i!=="\\stackrel",body:Vr(r)},l={type:"supsub",mode:s.mode,base:a,sup:i==="\\underset"?null:s,sub:i==="\\underset"?s:null};return{type:"mclass",mode:t.mode,mclass:o,body:[l],isCharacterBox:qt.isCharacterBox(l)}},htmlBuilder:qJ,mathmlBuilder:GJ});dt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(n,e){var{parser:t}=n;return{type:"pmb",mode:t.mode,mclass:e3(e[0]),body:Vr(e[0])}},htmlBuilder(n,e){var t=_s(n.body,e,!0),i=ke.makeSpan([n.mclass],t,e);return i.style.textShadow="0.02em 0.01em 0.04px",i},mathmlBuilder(n,e){var t=Da(n.body,e),i=new Qe.MathNode("mstyle",t);return i.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),i}});var yEe={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},IU=()=>({type:"styling",body:[],mode:"math",style:"display"}),NU=n=>n.type==="textord"&&n.text==="@",CEe=(n,e)=>(n.type==="mathord"||n.type==="atom")&&n.text===e;function SEe(n,e,t){var i=yEe[n];switch(i){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return t.callFunction(i,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var r=t.callFunction("\\\\cdleft",[e[0]],[]),s={type:"atom",text:i,mode:"math",family:"rel"},o=t.callFunction("\\Big",[s],[]),a=t.callFunction("\\\\cdright",[e[1]],[]),l={type:"ordgroup",mode:"math",body:[r,o,a]};return t.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return t.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var c={type:"textord",text:"\\Vert",mode:"math"};return t.callFunction("\\Big",[c],[])}default:return{type:"textord",text:" ",mode:"math"}}}function xEe(n){var e=[];for(n.gullet.beginGroup(),n.gullet.macros.set("\\cr","\\\\\\relax"),n.gullet.beginGroup();;){e.push(n.parseExpression(!1,"\\\\")),n.gullet.endGroup(),n.gullet.beginGroup();var t=n.fetch().text;if(t==="&"||t==="\\\\")n.consume();else if(t==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new et("Expected \\\\ or \\cr or \\end",n.nextToken)}for(var i=[],r=[i],s=0;s<e.length;s++){for(var o=e[s],a=IU(),l=0;l<o.length;l++)if(!NU(o[l]))a.body.push(o[l]);else{i.push(a),l+=1;var c=wP(o[l]).text,h=new Array(2);if(h[0]={type:"ordgroup",mode:"math",body:[]},h[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(c)>-1))if("<>AV".indexOf(c)>-1)for(var u=0;u<2;u++){for(var d=!0,g=l+1;g<o.length;g++){if(CEe(o[g],c)){d=!1,l=g;break}if(NU(o[g]))throw new et("Missing a "+c+" character to complete a CD arrow.",o[g]);h[u].body.push(o[g])}if(d)throw new et("Missing a "+c+" character to complete a CD arrow.",o[l])}else throw new et('Expected one of "<>AV=|." after @',o[l]);var p=SEe(c,h,n),b={type:"styling",body:[p],mode:"math",style:"display"};i.push(b),a=IU()}s%2===0?i.push(a):i.shift(),i=[],r.push(i)}n.gullet.endGroup(),n.gullet.endGroup();var _=new Array(r[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:r,arraystretch:1,addJot:!0,rowGaps:[null],cols:_,colSeparationType:"CD",hLinesBeforeRow:new Array(r.length+1).fill([])}}dt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(n,e){var{parser:t,funcName:i}=n;return{type:"cdlabel",mode:t.mode,side:i.slice(4),label:e[0]}},htmlBuilder(n,e){var t=e.havingStyle(e.style.sup()),i=ke.wrapFragment(an(n.label,t,e),e);return i.classes.push("cd-label-"+n.side),i.style.bottom=at(.8-i.depth),i.height=0,i.depth=0,i},mathmlBuilder(n,e){var t=new Qe.MathNode("mrow",[zn(n.label,e)]);return t=new Qe.MathNode("mpadded",[t]),t.setAttribute("width","0"),n.side==="left"&&t.setAttribute("lspace","-1width"),t.setAttribute("voffset","0.7em"),t=new Qe.MathNode("mstyle",[t]),t.setAttribute("displaystyle","false"),t.setAttribute("scriptlevel","1"),t}});dt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(n,e){var{parser:t}=n;return{type:"cdlabelparent",mode:t.mode,fragment:e[0]}},htmlBuilder(n,e){var t=ke.wrapFragment(an(n.fragment,e),e);return t.classes.push("cd-vert-arrow"),t},mathmlBuilder(n,e){return new Qe.MathNode("mrow",[zn(n.fragment,e)])}});dt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(n,e){for(var{parser:t}=n,i=Di(e[0],"ordgroup"),r=i.body,s="",o=0;o<r.length;o++){var a=Di(r[o],"textord");s+=a.text}var l=parseInt(s),c;if(isNaN(l))throw new et("\\@char has non-numeric argument "+s);if(l<0||l>=1114111)throw new et("\\@char with invalid code point "+s);return l<=65535?c=String.fromCharCode(l):(l-=65536,c=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:t.mode,text:c}}});var KJ=(n,e)=>{var t=_s(n.body,e.withColor(n.color),!1);return ke.makeFragment(t)},YJ=(n,e)=>{var t=Da(n.body,e.withColor(n.color)),i=new Qe.MathNode("mstyle",t);return i.setAttribute("mathcolor",n.color),i};dt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(n,e){var{parser:t}=n,i=Di(e[0],"color-token").color,r=e[1];return{type:"color",mode:t.mode,color:i,body:Vr(r)}},htmlBuilder:KJ,mathmlBuilder:YJ});dt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(n,e){var{parser:t,breakOnTokenText:i}=n,r=Di(e[0],"color-token").color;t.gullet.macros.set("\\current@color",r);var s=t.parseExpression(!0,i);return{type:"color",mode:t.mode,color:r,body:s}},htmlBuilder:KJ,mathmlBuilder:YJ});dt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(n,e,t){var{parser:i}=n,r=i.gullet.future().text==="["?i.parseSizeGroup(!0):null,s=!i.settings.displayMode||!i.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:i.mode,newLine:s,size:r&&Di(r,"size").value}},htmlBuilder(n,e){var t=ke.makeSpan(["mspace"],[],e);return n.newLine&&(t.classes.push("newline"),n.size&&(t.style.marginTop=at(mr(n.size,e)))),t},mathmlBuilder(n,e){var t=new Qe.MathNode("mspace");return n.newLine&&(t.setAttribute("linebreak","newline"),n.size&&t.setAttribute("height",at(mr(n.size,e)))),t}});var xN={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},ZJ=n=>{var e=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new et("Expected a control sequence",n);return e},kEe=n=>{var e=n.gullet.popToken();return e.text==="="&&(e=n.gullet.popToken(),e.text===" "&&(e=n.gullet.popToken())),e},XJ=(n,e,t,i)=>{var r=n.gullet.macros.get(t.text);r==null&&(t.noexpand=!0,r={tokens:[t],numArgs:0,unexpandable:!n.gullet.isExpandable(t.text)}),n.gullet.macros.set(e,r,i)};dt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(n){var{parser:e,funcName:t}=n;e.consumeSpaces();var i=e.fetch();if(xN[i.text])return(t==="\\global"||t==="\\\\globallong")&&(i.text=xN[i.text]),Di(e.parseFunction(),"internal");throw new et("Invalid token after macro prefix",i)}});dt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n){var{parser:e,funcName:t}=n,i=e.gullet.popToken(),r=i.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(r))throw new et("Expected a control sequence",i);for(var s=0,o,a=[[]];e.gullet.future().text!=="{";)if(i=e.gullet.popToken(),i.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),a[s].push("{");break}if(i=e.gullet.popToken(),!/^[1-9]$/.test(i.text))throw new et('Invalid argument number "'+i.text+'"');if(parseInt(i.text)!==s+1)throw new et('Argument number "'+i.text+'" out of order');s++,a.push([])}else{if(i.text==="EOF")throw new et("Expected a macro definition");a[s].push(i.text)}var{tokens:l}=e.gullet.consumeArg();return o&&l.unshift(o),(t==="\\edef"||t==="\\xdef")&&(l=e.gullet.expandTokens(l),l.reverse()),e.gullet.macros.set(r,{tokens:l,numArgs:s,delimiters:a},t===xN[t]),{type:"internal",mode:e.mode}}});dt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n){var{parser:e,funcName:t}=n,i=ZJ(e.gullet.popToken());e.gullet.consumeSpaces();var r=kEe(e);return XJ(e,i,r,t==="\\\\globallet"),{type:"internal",mode:e.mode}}});dt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n){var{parser:e,funcName:t}=n,i=ZJ(e.gullet.popToken()),r=e.gullet.popToken(),s=e.gullet.popToken();return XJ(e,i,s,t==="\\\\globalfuture"),e.gullet.pushToken(s),e.gullet.pushToken(r),{type:"internal",mode:e.mode}}});var Q_=function(e,t,i){var r=Gn.math[e]&&Gn.math[e].replace,s=mP(r||e,t,i);if(!s)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return s},CP=function(e,t,i,r){var s=i.havingBaseStyle(t),o=ke.makeSpan(r.concat(s.sizingClasses(i)),[e],i),a=s.sizeMultiplier/i.sizeMultiplier;return o.height*=a,o.depth*=a,o.maxFontSize=s.sizeMultiplier,o},QJ=function(e,t,i){var r=t.havingBaseStyle(i),s=(1-t.sizeMultiplier/r.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=at(s),e.height-=s,e.depth+=s},LEe=function(e,t,i,r,s,o){var a=ke.makeSymbol(e,"Main-Regular",s,r),l=CP(a,t,r,o);return i&&QJ(l,r,t),l},TEe=function(e,t,i,r){return ke.makeSymbol(e,"Size"+t+"-Regular",i,r)},JJ=function(e,t,i,r,s,o){var a=TEe(e,t,s,r),l=CP(ke.makeSpan(["delimsizing","size"+t],[a],r),Qt.TEXT,r,o);return i&&QJ(l,r,Qt.TEXT),l},Q6=function(e,t,i){var r;t==="Size1-Regular"?r="delim-size1":r="delim-size4";var s=ke.makeSpan(["delimsizinginner",r],[ke.makeSpan([],[ke.makeSymbol(e,t,i)])]);return{type:"elem",elem:s}},J6=function(e,t,i){var r=eh["Size4-Regular"][e.charCodeAt(0)]?eh["Size4-Regular"][e.charCodeAt(0)][4]:eh["Size1-Regular"][e.charCodeAt(0)][4],s=new yf("inner",ADe(e,Math.round(1e3*t))),o=new Fu([s],{width:at(r),height:at(t),style:"width:"+at(r),viewBox:"0 0 "+1e3*r+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),a=ke.makeSvgSpan([],[o],i);return a.height=t,a.style.height=at(t),a.style.width=at(r),{type:"elem",elem:a}},kN=.008,gS={type:"kern",size:-1*kN},DEe=["|","\\lvert","\\rvert","\\vert"],EEe=["\\|","\\lVert","\\rVert","\\Vert"],eee=function(e,t,i,r,s,o){var a,l,c,h,u="",d=0;a=c=h=e,l=null;var g="Size1-Regular";e==="\\uparrow"?c=h="⏐":e==="\\Uparrow"?c=h="‖":e==="\\downarrow"?a=c="⏐":e==="\\Downarrow"?a=c="‖":e==="\\updownarrow"?(a="\\uparrow",c="⏐",h="\\downarrow"):e==="\\Updownarrow"?(a="\\Uparrow",c="‖",h="\\Downarrow"):qt.contains(DEe,e)?(c="∣",u="vert",d=333):qt.contains(EEe,e)?(c="∥",u="doublevert",d=556):e==="["||e==="\\lbrack"?(a="⎡",c="⎢",h="⎣",g="Size4-Regular",u="lbrack",d=667):e==="]"||e==="\\rbrack"?(a="⎤",c="⎥",h="⎦",g="Size4-Regular",u="rbrack",d=667):e==="\\lfloor"||e==="⌊"?(c=a="⎢",h="⎣",g="Size4-Regular",u="lfloor",d=667):e==="\\lceil"||e==="⌈"?(a="⎡",c=h="⎢",g="Size4-Regular",u="lceil",d=667):e==="\\rfloor"||e==="⌋"?(c=a="⎥",h="⎦",g="Size4-Regular",u="rfloor",d=667):e==="\\rceil"||e==="⌉"?(a="⎤",c=h="⎥",g="Size4-Regular",u="rceil",d=667):e==="("||e==="\\lparen"?(a="⎛",c="⎜",h="⎝",g="Size4-Regular",u="lparen",d=875):e===")"||e==="\\rparen"?(a="⎞",c="⎟",h="⎠",g="Size4-Regular",u="rparen",d=875):e==="\\{"||e==="\\lbrace"?(a="⎧",l="⎨",h="⎩",c="⎪",g="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(a="⎫",l="⎬",h="⎭",c="⎪",g="Size4-Regular"):e==="\\lgroup"||e==="⟮"?(a="⎧",h="⎩",c="⎪",g="Size4-Regular"):e==="\\rgroup"||e==="⟯"?(a="⎫",h="⎭",c="⎪",g="Size4-Regular"):e==="\\lmoustache"||e==="⎰"?(a="⎧",h="⎭",c="⎪",g="Size4-Regular"):(e==="\\rmoustache"||e==="⎱")&&(a="⎫",h="⎩",c="⎪",g="Size4-Regular");var p=Q_(a,g,s),b=p.height+p.depth,_=Q_(c,g,s),w=_.height+_.depth,y=Q_(h,g,s),k=y.height+y.depth,L=0,T=1;if(l!==null){var N=Q_(l,g,s);L=N.height+N.depth,T=2}var D=b+k+L,O=Math.max(0,Math.ceil((t-D)/(T*w))),B=D+O*T*w,G=r.fontMetrics().axisHeight;i&&(G*=r.sizeMultiplier);var H=B/2-G,q=[];if(u.length>0){var X=B-b-k,z=Math.round(B*1e3),Q=RDe(u,Math.round(X*1e3)),te=new yf(u,Q),se=(d/1e3).toFixed(3)+"em",Y=(z/1e3).toFixed(3)+"em",ae=new Fu([te],{width:se,height:Y,viewBox:"0 0 "+d+" "+z}),fe=ke.makeSvgSpan([],[ae],r);fe.height=z/1e3,fe.style.width=se,fe.style.height=Y,q.push({type:"elem",elem:fe})}else{if(q.push(Q6(h,g,s)),q.push(gS),l===null){var J=B-b-k+2*kN;q.push(J6(c,J,r))}else{var ge=(B-b-k-L)/2+2*kN;q.push(J6(c,ge,r)),q.push(gS),q.push(Q6(l,g,s)),q.push(gS),q.push(J6(c,ge,r))}q.push(gS),q.push(Q6(a,g,s))}var Le=r.havingBaseStyle(Qt.TEXT),We=ke.makeVList({positionType:"bottom",positionData:H,children:q},Le);return CP(ke.makeSpan(["delimsizing","mult"],[We],Le),Qt.TEXT,r,o)},eD=80,tD=.08,iD=function(e,t,i,r,s){var o=MDe(e,r,i),a=new yf(e,o),l=new Fu([a],{width:"400em",height:at(t),viewBox:"0 0 400000 "+i,preserveAspectRatio:"xMinYMin slice"});return ke.makeSvgSpan(["hide-tail"],[l],s)},IEe=function(e,t){var i=t.havingBaseSizing(),r=ree("\\surd",e*i.sizeMultiplier,nee,i),s=i.sizeMultiplier,o=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),a,l=0,c=0,h=0,u;return r.type==="small"?(h=1e3+1e3*o+eD,e<1?s=1:e<1.4&&(s=.7),l=(1+o+tD)/s,c=(1+o)/s,a=iD("sqrtMain",l,h,o,t),a.style.minWidth="0.853em",u=.833/s):r.type==="large"?(h=(1e3+eD)*Hv[r.size],c=(Hv[r.size]+o)/s,l=(Hv[r.size]+o+tD)/s,a=iD("sqrtSize"+r.size,l,h,o,t),a.style.minWidth="1.02em",u=1/s):(l=e+o+tD,c=e+o,h=Math.floor(1e3*e+o)+eD,a=iD("sqrtTall",l,h,o,t),a.style.minWidth="0.742em",u=1.056),a.height=c,a.style.height=at(l),{span:a,advanceWidth:u,ruleWidth:(t.fontMetrics().sqrtRuleThickness+o)*s}},tee=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],NEe=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],iee=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Hv=[0,1.2,1.8,2.4,3],MEe=function(e,t,i,r,s){if(e==="<"||e==="\\lt"||e==="⟨"?e="\\langle":(e===">"||e==="\\gt"||e==="⟩")&&(e="\\rangle"),qt.contains(tee,e)||qt.contains(iee,e))return JJ(e,t,!1,i,r,s);if(qt.contains(NEe,e))return eee(e,Hv[t],!1,i,r,s);throw new et("Illegal delimiter: '"+e+"'")},AEe=[{type:"small",style:Qt.SCRIPTSCRIPT},{type:"small",style:Qt.SCRIPT},{type:"small",style:Qt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],REe=[{type:"small",style:Qt.SCRIPTSCRIPT},{type:"small",style:Qt.SCRIPT},{type:"small",style:Qt.TEXT},{type:"stack"}],nee=[{type:"small",style:Qt.SCRIPTSCRIPT},{type:"small",style:Qt.SCRIPT},{type:"small",style:Qt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],PEe=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},ree=function(e,t,i,r){for(var s=Math.min(2,3-r.style.size),o=s;o<i.length&&i[o].type!=="stack";o++){var a=Q_(e,PEe(i[o]),"math"),l=a.height+a.depth;if(i[o].type==="small"){var c=r.havingBaseStyle(i[o].style);l*=c.sizeMultiplier}if(l>t)return i[o]}return i[i.length-1]},see=function(e,t,i,r,s,o){e==="<"||e==="\\lt"||e==="⟨"?e="\\langle":(e===">"||e==="\\gt"||e==="⟩")&&(e="\\rangle");var a;qt.contains(iee,e)?a=AEe:qt.contains(tee,e)?a=nee:a=REe;var l=ree(e,t,a,r);return l.type==="small"?LEe(e,l.style,i,r,s,o):l.type==="large"?JJ(e,l.size,i,r,s,o):eee(e,t,i,r,s,o)},OEe=function(e,t,i,r,s,o){var a=r.fontMetrics().axisHeight*r.sizeMultiplier,l=901,c=5/r.fontMetrics().ptPerEm,h=Math.max(t-a,i+a),u=Math.max(h/500*l,2*h-c);return see(e,u,!0,r,s,o)},Nu={sqrtImage:IEe,sizedDelim:MEe,sizeToMaxHeight:Hv,customSizedDelim:see,leftRightDelim:OEe},MU={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},BEe=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function t3(n,e){var t=J5(n);if(t&&qt.contains(BEe,t.text))return t;throw t?new et("Invalid delimiter '"+t.text+"' after '"+e.funcName+"'",n):new et("Invalid delimiter type '"+n.type+"'",n)}dt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(n,e)=>{var t=t3(e[0],n);return{type:"delimsizing",mode:n.parser.mode,size:MU[n.funcName].size,mclass:MU[n.funcName].mclass,delim:t.text}},htmlBuilder:(n,e)=>n.delim==="."?ke.makeSpan([n.mclass]):Nu.sizedDelim(n.delim,n.size,e,n.mode,[n.mclass]),mathmlBuilder:n=>{var e=[];n.delim!=="."&&e.push(Dl(n.delim,n.mode));var t=new Qe.MathNode("mo",e);n.mclass==="mopen"||n.mclass==="mclose"?t.setAttribute("fence","true"):t.setAttribute("fence","false"),t.setAttribute("stretchy","true");var i=at(Nu.sizeToMaxHeight[n.size]);return t.setAttribute("minsize",i),t.setAttribute("maxsize",i),t}});function AU(n){if(!n.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}dt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var t=n.parser.gullet.macros.get("\\current@color");if(t&&typeof t!="string")throw new et("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:n.parser.mode,delim:t3(e[0],n).text,color:t}}});dt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var t=t3(e[0],n),i=n.parser;++i.leftrightDepth;var r=i.parseExpression(!1);--i.leftrightDepth,i.expect("\\right",!1);var s=Di(i.parseFunction(),"leftright-right");return{type:"leftright",mode:i.mode,body:r,left:t.text,right:s.delim,rightColor:s.color}},htmlBuilder:(n,e)=>{AU(n);for(var t=_s(n.body,e,!0,["mopen","mclose"]),i=0,r=0,s=!1,o=0;o<t.length;o++)t[o].isMiddle?s=!0:(i=Math.max(t[o].height,i),r=Math.max(t[o].depth,r));i*=e.sizeMultiplier,r*=e.sizeMultiplier;var a;if(n.left==="."?a=iy(e,["mopen"]):a=Nu.leftRightDelim(n.left,i,r,e,n.mode,["mopen"]),t.unshift(a),s)for(var l=1;l<t.length;l++){var c=t[l],h=c.isMiddle;h&&(t[l]=Nu.leftRightDelim(h.delim,i,r,h.options,n.mode,[]))}var u;if(n.right===".")u=iy(e,["mclose"]);else{var d=n.rightColor?e.withColor(n.rightColor):e;u=Nu.leftRightDelim(n.right,i,r,d,n.mode,["mclose"])}return t.push(u),ke.makeSpan(["minner"],t,e)},mathmlBuilder:(n,e)=>{AU(n);var t=Da(n.body,e);if(n.left!=="."){var i=new Qe.MathNode("mo",[Dl(n.left,n.mode)]);i.setAttribute("fence","true"),t.unshift(i)}if(n.right!=="."){var r=new Qe.MathNode("mo",[Dl(n.right,n.mode)]);r.setAttribute("fence","true"),n.rightColor&&r.setAttribute("mathcolor",n.rightColor),t.push(r)}return _P(t)}});dt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var t=t3(e[0],n);if(!n.parser.leftrightDepth)throw new et("\\middle without preceding \\left",t);return{type:"middle",mode:n.parser.mode,delim:t.text}},htmlBuilder:(n,e)=>{var t;if(n.delim===".")t=iy(e,[]);else{t=Nu.sizedDelim(n.delim,1,e,n.mode,[]);var i={delim:n.delim,options:e};t.isMiddle=i}return t},mathmlBuilder:(n,e)=>{var t=n.delim==="\\vert"||n.delim==="|"?Dl("|","text"):Dl(n.delim,n.mode),i=new Qe.MathNode("mo",[t]);return i.setAttribute("fence","true"),i.setAttribute("lspace","0.05em"),i.setAttribute("rspace","0.05em"),i}});var SP=(n,e)=>{var t=ke.wrapFragment(an(n.body,e),e),i=n.label.slice(1),r=e.sizeMultiplier,s,o=0,a=qt.isCharacterBox(n.body);if(i==="sout")s=ke.makeSpan(["stretchy","sout"]),s.height=e.fontMetrics().defaultRuleThickness/r,o=-.5*e.fontMetrics().xHeight;else if(i==="phase"){var l=mr({number:.6,unit:"pt"},e),c=mr({number:.35,unit:"ex"},e),h=e.havingBaseSizing();r=r/h.sizeMultiplier;var u=t.height+t.depth+l+c;t.style.paddingLeft=at(u/2+l);var d=Math.floor(1e3*u*r),g=IDe(d),p=new Fu([new yf("phase",g)],{width:"400em",height:at(d/1e3),viewBox:"0 0 400000 "+d,preserveAspectRatio:"xMinYMin slice"});s=ke.makeSvgSpan(["hide-tail"],[p],e),s.style.height=at(u),o=t.depth+l+c}else{/cancel/.test(i)?a||t.classes.push("cancel-pad"):i==="angl"?t.classes.push("anglpad"):t.classes.push("boxpad");var b=0,_=0,w=0;/box/.test(i)?(w=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),b=e.fontMetrics().fboxsep+(i==="colorbox"?0:w),_=b):i==="angl"?(w=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),b=4*w,_=Math.max(0,.25-t.depth)):(b=a?.2:0,_=b),s=zu.encloseSpan(t,i,b,_,e),/fbox|boxed|fcolorbox/.test(i)?(s.style.borderStyle="solid",s.style.borderWidth=at(w)):i==="angl"&&w!==.049&&(s.style.borderTopWidth=at(w),s.style.borderRightWidth=at(w)),o=t.depth+_,n.backgroundColor&&(s.style.backgroundColor=n.backgroundColor,n.borderColor&&(s.style.borderColor=n.borderColor))}var y;if(n.backgroundColor)y=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:o},{type:"elem",elem:t,shift:0}]},e);else{var k=/cancel|phase/.test(i)?["svg-align"]:[];y=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:t,shift:0},{type:"elem",elem:s,shift:o,wrapperClasses:k}]},e)}return/cancel/.test(i)&&(y.height=t.height,y.depth=t.depth),/cancel/.test(i)&&!a?ke.makeSpan(["mord","cancel-lap"],[y],e):ke.makeSpan(["mord"],[y],e)},xP=(n,e)=>{var t=0,i=new Qe.MathNode(n.label.indexOf("colorbox")>-1?"mpadded":"menclose",[zn(n.body,e)]);switch(n.label){case"\\cancel":i.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":i.setAttribute("notation","downdiagonalstrike");break;case"\\phase":i.setAttribute("notation","phasorangle");break;case"\\sout":i.setAttribute("notation","horizontalstrike");break;case"\\fbox":i.setAttribute("notation","box");break;case"\\angl":i.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(t=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,i.setAttribute("width","+"+2*t+"pt"),i.setAttribute("height","+"+2*t+"pt"),i.setAttribute("lspace",t+"pt"),i.setAttribute("voffset",t+"pt"),n.label==="\\fcolorbox"){var r=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);i.setAttribute("style","border: "+r+"em solid "+String(n.borderColor))}break;case"\\xcancel":i.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return n.backgroundColor&&i.setAttribute("mathbackground",n.backgroundColor),i};dt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(n,e,t){var{parser:i,funcName:r}=n,s=Di(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:i.mode,label:r,backgroundColor:s,body:o}},htmlBuilder:SP,mathmlBuilder:xP});dt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(n,e,t){var{parser:i,funcName:r}=n,s=Di(e[0],"color-token").color,o=Di(e[1],"color-token").color,a=e[2];return{type:"enclose",mode:i.mode,label:r,backgroundColor:o,borderColor:s,body:a}},htmlBuilder:SP,mathmlBuilder:xP});dt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(n,e){var{parser:t}=n;return{type:"enclose",mode:t.mode,label:"\\fbox",body:e[0]}}});dt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(n,e){var{parser:t,funcName:i}=n,r=e[0];return{type:"enclose",mode:t.mode,label:i,body:r}},htmlBuilder:SP,mathmlBuilder:xP});dt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(n,e){var{parser:t}=n;return{type:"enclose",mode:t.mode,label:"\\angl",body:e[0]}}});var oee={};function vh(n){for(var{type:e,names:t,props:i,handler:r,htmlBuilder:s,mathmlBuilder:o}=n,a={type:e,numArgs:i.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:r},l=0;l<t.length;++l)oee[t[l]]=a;s&&(d4[e]=s),o&&(f4[e]=o)}var aee={};function Z(n,e){aee[n]=e}function RU(n){var e=[];n.consumeSpaces();var t=n.fetch().text;for(t==="\\relax"&&(n.consume(),n.consumeSpaces(),t=n.fetch().text);t==="\\hline"||t==="\\hdashline";)n.consume(),e.push(t==="\\hdashline"),n.consumeSpaces(),t=n.fetch().text;return e}var i3=n=>{var e=n.parser.settings;if(!e.displayMode)throw new et("{"+n.envName+"} can be used only in display mode.")};function kP(n){if(n.indexOf("ed")===-1)return n.indexOf("*")===-1}function Af(n,e,t){var{hskipBeforeAndAfter:i,addJot:r,cols:s,arraystretch:o,colSeparationType:a,autoTag:l,singleRow:c,emptySingleRow:h,maxNumCols:u,leqno:d}=e;if(n.gullet.beginGroup(),c||n.gullet.macros.set("\\cr","\\\\\\relax"),!o){var g=n.gullet.expandMacroAsText("\\arraystretch");if(g==null)o=1;else if(o=parseFloat(g),!o||o<0)throw new et("Invalid \\arraystretch: "+g)}n.gullet.beginGroup();var p=[],b=[p],_=[],w=[],y=l!=null?[]:void 0;function k(){l&&n.gullet.macros.set("\\@eqnsw","1",!0)}function L(){y&&(n.gullet.macros.get("\\df@tag")?(y.push(n.subparse([new wl("\\df@tag")])),n.gullet.macros.set("\\df@tag",void 0,!0)):y.push(!!l&&n.gullet.macros.get("\\@eqnsw")==="1"))}for(k(),w.push(RU(n));;){var T=n.parseExpression(!1,c?"\\end":"\\\\");n.gullet.endGroup(),n.gullet.beginGroup(),T={type:"ordgroup",mode:n.mode,body:T},t&&(T={type:"styling",mode:n.mode,style:t,body:[T]}),p.push(T);var N=n.fetch().text;if(N==="&"){if(u&&p.length===u){if(c||a)throw new et("Too many tab characters: &",n.nextToken);n.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}n.consume()}else if(N==="\\end"){L(),p.length===1&&T.type==="styling"&&T.body[0].body.length===0&&(b.length>1||!h)&&b.pop(),w.length<b.length+1&&w.push([]);break}else if(N==="\\\\"){n.consume();var D=void 0;n.gullet.future().text!==" "&&(D=n.parseSizeGroup(!0)),_.push(D?D.value:null),L(),w.push(RU(n)),p=[],b.push(p),k()}else throw new et("Expected & or \\\\ or \\cr or \\end",n.nextToken)}return n.gullet.endGroup(),n.gullet.endGroup(),{type:"array",mode:n.mode,addJot:r,arraystretch:o,body:b,cols:s,rowGaps:_,hskipBeforeAndAfter:i,hLinesBeforeRow:w,colSeparationType:a,tags:y,leqno:d}}function LP(n){return n.slice(0,1)==="d"?"display":"text"}var wh=function(e,t){var i,r,s=e.body.length,o=e.hLinesBeforeRow,a=0,l=new Array(s),c=[],h=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),u=1/t.fontMetrics().ptPerEm,d=5*u;if(e.colSeparationType&&e.colSeparationType==="small"){var g=t.havingStyle(Qt.SCRIPT).sizeMultiplier;d=.2778*(g/t.sizeMultiplier)}var p=e.colSeparationType==="CD"?mr({number:3,unit:"ex"},t):12*u,b=3*u,_=e.arraystretch*p,w=.7*_,y=.3*_,k=0;function L(Nr){for(var or=0;or<Nr.length;++or)or>0&&(k+=.25),c.push({pos:k,isDashed:Nr[or]})}for(L(o[0]),i=0;i<e.body.length;++i){var T=e.body[i],N=w,D=y;a<T.length&&(a=T.length);var O=new Array(T.length);for(r=0;r<T.length;++r){var B=an(T[r],t);D<B.depth&&(D=B.depth),N<B.height&&(N=B.height),O[r]=B}var G=e.rowGaps[i],H=0;G&&(H=mr(G,t),H>0&&(H+=y,D<H&&(D=H),H=0)),e.addJot&&(D+=b),O.height=N,O.depth=D,k+=N,O.pos=k,k+=D+H,l[i]=O,L(o[i+1])}var q=k/2+t.fontMetrics().axisHeight,X=e.cols||[],z=[],Q,te,se=[];if(e.tags&&e.tags.some(Nr=>Nr))for(i=0;i<s;++i){var Y=l[i],ae=Y.pos-q,fe=e.tags[i],J=void 0;fe===!0?J=ke.makeSpan(["eqn-num"],[],t):fe===!1?J=ke.makeSpan([],[],t):J=ke.makeSpan([],_s(fe,t,!0),t),J.depth=Y.depth,J.height=Y.height,se.push({type:"elem",elem:J,shift:ae})}for(r=0,te=0;r<a||te<X.length;++r,++te){for(var ge=X[te]||{},Le=!0;ge.type==="separator";){if(Le||(Q=ke.makeSpan(["arraycolsep"],[]),Q.style.width=at(t.fontMetrics().doubleRuleSep),z.push(Q)),ge.separator==="|"||ge.separator===":"){var We=ge.separator==="|"?"solid":"dashed",Ie=ke.makeSpan(["vertical-separator"],[],t);Ie.style.height=at(k),Ie.style.borderRightWidth=at(h),Ie.style.borderRightStyle=We,Ie.style.margin="0 "+at(-h/2);var Ze=k-q;Ze&&(Ie.style.verticalAlign=at(-Ze)),z.push(Ie)}else throw new et("Invalid separator type: "+ge.separator);te++,ge=X[te]||{},Le=!1}if(!(r>=a)){var ct=void 0;(r>0||e.hskipBeforeAndAfter)&&(ct=qt.deflt(ge.pregap,d),ct!==0&&(Q=ke.makeSpan(["arraycolsep"],[]),Q.style.width=at(ct),z.push(Q)));var ot=[];for(i=0;i<s;++i){var Ot=l[i],$t=Ot[r];if($t){var yn=Ot.pos-q;$t.depth=Ot.depth,$t.height=Ot.height,ot.push({type:"elem",elem:$t,shift:yn})}}ot=ke.makeVList({positionType:"individualShift",children:ot},t),ot=ke.makeSpan(["col-align-"+(ge.align||"c")],[ot]),z.push(ot),(r<a-1||e.hskipBeforeAndAfter)&&(ct=qt.deflt(ge.postgap,d),ct!==0&&(Q=ke.makeSpan(["arraycolsep"],[]),Q.style.width=at(ct),z.push(Q)))}}if(l=ke.makeSpan(["mtable"],z),c.length>0){for(var vi=ke.makeLineSpan("hline",t,h),nn=ke.makeLineSpan("hdashline",t,h),rn=[{type:"elem",elem:l,shift:0}];c.length>0;){var ss=c.pop(),Vn=ss.pos-q;ss.isDashed?rn.push({type:"elem",elem:nn,shift:Vn}):rn.push({type:"elem",elem:vi,shift:Vn})}l=ke.makeVList({positionType:"individualShift",children:rn},t)}if(se.length===0)return ke.makeSpan(["mord"],[l],t);var Kn=ke.makeVList({positionType:"individualShift",children:se},t);return Kn=ke.makeSpan(["tag"],[Kn],t),ke.makeFragment([l,Kn])},FEe={c:"center ",l:"left ",r:"right "},yh=function(e,t){for(var i=[],r=new Qe.MathNode("mtd",[],["mtr-glue"]),s=new Qe.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var a=e.body[o],l=[],c=0;c<a.length;c++)l.push(new Qe.MathNode("mtd",[zn(a[c],t)]));e.tags&&e.tags[o]&&(l.unshift(r),l.push(r),e.leqno?l.unshift(s):l.push(s)),i.push(new Qe.MathNode("mtr",l))}var h=new Qe.MathNode("mtable",i),u=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);h.setAttribute("rowspacing",at(u));var d="",g="";if(e.cols&&e.cols.length>0){var p=e.cols,b="",_=!1,w=0,y=p.length;p[0].type==="separator"&&(d+="top ",w=1),p[p.length-1].type==="separator"&&(d+="bottom ",y-=1);for(var k=w;k<y;k++)p[k].type==="align"?(g+=FEe[p[k].align],_&&(b+="none "),_=!0):p[k].type==="separator"&&_&&(b+=p[k].separator==="|"?"solid ":"dashed ",_=!1);h.setAttribute("columnalign",g.trim()),/[sd]/.test(b)&&h.setAttribute("columnlines",b.trim())}if(e.colSeparationType==="align"){for(var L=e.cols||[],T="",N=1;N<L.length;N++)T+=N%2?"0em ":"1em ";h.setAttribute("columnspacing",T.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?h.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?h.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?h.setAttribute("columnspacing","0.5em"):h.setAttribute("columnspacing","1em");var D="",O=e.hLinesBeforeRow;d+=O[0].length>0?"left ":"",d+=O[O.length-1].length>0?"right ":"";for(var B=1;B<O.length-1;B++)D+=O[B].length===0?"none ":O[B][0]?"dashed ":"solid ";return/[sd]/.test(D)&&h.setAttribute("rowlines",D.trim()),d!==""&&(h=new Qe.MathNode("menclose",[h]),h.setAttribute("notation",d.trim())),e.arraystretch&&e.arraystretch<1&&(h=new Qe.MathNode("mstyle",[h]),h.setAttribute("scriptlevel","1")),h},lee=function(e,t){e.envName.indexOf("ed")===-1&&i3(e);var i=[],r=e.envName.indexOf("at")>-1?"alignat":"align",s=e.envName==="split",o=Af(e.parser,{cols:i,addJot:!0,autoTag:s?void 0:kP(e.envName),emptySingleRow:!0,colSeparationType:r,maxNumCols:s?2:void 0,leqno:e.parser.settings.leqno},"display"),a,l=0,c={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&t[0].type==="ordgroup"){for(var h="",u=0;u<t[0].body.length;u++){var d=Di(t[0].body[u],"textord");h+=d.text}a=Number(h),l=a*2}var g=!l;o.body.forEach(function(w){for(var y=1;y<w.length;y+=2){var k=Di(w[y],"styling"),L=Di(k.body[0],"ordgroup");L.body.unshift(c)}if(g)l<w.length&&(l=w.length);else{var T=w.length/2;if(a<T)throw new et("Too many math in a row: "+("expected "+a+", but got "+T),w[0])}});for(var p=0;p<l;++p){var b="r",_=0;p%2===1?b="l":p>0&&g&&(_=1),i[p]={type:"align",align:b,pregap:_,postgap:0}}return o.colSeparationType=g?"align":"alignat",o};vh({type:"array",names:["array","darray"],props:{numArgs:1},handler(n,e){var t=J5(e[0]),i=t?[e[0]]:Di(e[0],"ordgroup").body,r=i.map(function(o){var a=wP(o),l=a.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new et("Unknown column alignment: "+l,o)}),s={cols:r,hskipBeforeAndAfter:!0,maxNumCols:r.length};return Af(n.parser,s,LP(n.envName))},htmlBuilder:wh,mathmlBuilder:yh});vh({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(n){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[n.envName.replace("*","")],t="c",i={hskipBeforeAndAfter:!1,cols:[{type:"align",align:t}]};if(n.envName.charAt(n.envName.length-1)==="*"){var r=n.parser;if(r.consumeSpaces(),r.fetch().text==="["){if(r.consume(),r.consumeSpaces(),t=r.fetch().text,"lcr".indexOf(t)===-1)throw new et("Expected l or c or r",r.nextToken);r.consume(),r.consumeSpaces(),r.expect("]"),r.consume(),i.cols=[{type:"align",align:t}]}}var s=Af(n.parser,i,LP(n.envName)),o=Math.max(0,...s.body.map(a=>a.length));return s.cols=new Array(o).fill({type:"align",align:t}),e?{type:"leftright",mode:n.mode,body:[s],left:e[0],right:e[1],rightColor:void 0}:s},htmlBuilder:wh,mathmlBuilder:yh});vh({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(n){var e={arraystretch:.5},t=Af(n.parser,e,"script");return t.colSeparationType="small",t},htmlBuilder:wh,mathmlBuilder:yh});vh({type:"array",names:["subarray"],props:{numArgs:1},handler(n,e){var t=J5(e[0]),i=t?[e[0]]:Di(e[0],"ordgroup").body,r=i.map(function(o){var a=wP(o),l=a.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new et("Unknown column alignment: "+l,o)});if(r.length>1)throw new et("{subarray} can contain only one column");var s={cols:r,hskipBeforeAndAfter:!1,arraystretch:.5};if(s=Af(n.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new et("{subarray} can contain only one column");return s},htmlBuilder:wh,mathmlBuilder:yh});vh({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(n){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},t=Af(n.parser,e,LP(n.envName));return{type:"leftright",mode:n.mode,body:[t],left:n.envName.indexOf("r")>-1?".":"\\{",right:n.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:wh,mathmlBuilder:yh});vh({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:lee,htmlBuilder:wh,mathmlBuilder:yh});vh({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(n){qt.contains(["gather","gather*"],n.envName)&&i3(n);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:kP(n.envName),emptySingleRow:!0,leqno:n.parser.settings.leqno};return Af(n.parser,e,"display")},htmlBuilder:wh,mathmlBuilder:yh});vh({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:lee,htmlBuilder:wh,mathmlBuilder:yh});vh({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(n){i3(n);var e={autoTag:kP(n.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:n.parser.settings.leqno};return Af(n.parser,e,"display")},htmlBuilder:wh,mathmlBuilder:yh});vh({type:"array",names:["CD"],props:{numArgs:0},handler(n){return i3(n),xEe(n.parser)},htmlBuilder:wh,mathmlBuilder:yh});Z("\\nonumber","\\gdef\\@eqnsw{0}");Z("\\notag","\\nonumber");dt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(n,e){throw new et(n.funcName+" valid only within array environment")}});var PU=oee;dt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(n,e){var{parser:t,funcName:i}=n,r=e[0];if(r.type!=="ordgroup")throw new et("Invalid environment name",r);for(var s="",o=0;o<r.body.length;++o)s+=Di(r.body[o],"textord").text;if(i==="\\begin"){if(!PU.hasOwnProperty(s))throw new et("No such environment: "+s,r);var a=PU[s],{args:l,optArgs:c}=t.parseArguments("\\begin{"+s+"}",a),h={mode:t.mode,envName:s,parser:t},u=a.handler(h,l,c);t.expect("\\end",!1);var d=t.nextToken,g=Di(t.parseFunction(),"environment");if(g.name!==s)throw new et("Mismatch: \\begin{"+s+"} matched by \\end{"+g.name+"}",d);return u}return{type:"environment",mode:t.mode,name:s,nameGroup:r}}});var cee=(n,e)=>{var t=n.font,i=e.withFont(t);return an(n.body,i)},hee=(n,e)=>{var t=n.font,i=e.withFont(t);return zn(n.body,i)},OU={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};dt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(n,e)=>{var{parser:t,funcName:i}=n,r=g4(e[0]),s=i;return s in OU&&(s=OU[s]),{type:"font",mode:t.mode,font:s.slice(1),body:r}},htmlBuilder:cee,mathmlBuilder:hee});dt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(n,e)=>{var{parser:t}=n,i=e[0],r=qt.isCharacterBox(i);return{type:"mclass",mode:t.mode,mclass:e3(i),body:[{type:"font",mode:t.mode,font:"boldsymbol",body:i}],isCharacterBox:r}}});dt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(n,e)=>{var{parser:t,funcName:i,breakOnTokenText:r}=n,{mode:s}=t,o=t.parseExpression(!0,r),a="math"+i.slice(1);return{type:"font",mode:s,font:a,body:{type:"ordgroup",mode:t.mode,body:o}}},htmlBuilder:cee,mathmlBuilder:hee});var uee=(n,e)=>{var t=e;return n==="display"?t=t.id>=Qt.SCRIPT.id?t.text():Qt.DISPLAY:n==="text"&&t.size===Qt.DISPLAY.size?t=Qt.TEXT:n==="script"?t=Qt.SCRIPT:n==="scriptscript"&&(t=Qt.SCRIPTSCRIPT),t},TP=(n,e)=>{var t=uee(n.size,e.style),i=t.fracNum(),r=t.fracDen(),s;s=e.havingStyle(i);var o=an(n.numer,s,e);if(n.continued){var a=8.5/e.fontMetrics().ptPerEm,l=3.5/e.fontMetrics().ptPerEm;o.height=o.height<a?a:o.height,o.depth=o.depth<l?l:o.depth}s=e.havingStyle(r);var c=an(n.denom,s,e),h,u,d;n.hasBarLine?(n.barSize?(u=mr(n.barSize,e),h=ke.makeLineSpan("frac-line",e,u)):h=ke.makeLineSpan("frac-line",e),u=h.height,d=h.height):(h=null,u=0,d=e.fontMetrics().defaultRuleThickness);var g,p,b;t.size===Qt.DISPLAY.size||n.size==="display"?(g=e.fontMetrics().num1,u>0?p=3*d:p=7*d,b=e.fontMetrics().denom1):(u>0?(g=e.fontMetrics().num2,p=d):(g=e.fontMetrics().num3,p=3*d),b=e.fontMetrics().denom2);var _;if(h){var y=e.fontMetrics().axisHeight;g-o.depth-(y+.5*u)<p&&(g+=p-(g-o.depth-(y+.5*u))),y-.5*u-(c.height-b)<p&&(b+=p-(y-.5*u-(c.height-b)));var k=-(y-.5*u);_=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:b},{type:"elem",elem:h,shift:k},{type:"elem",elem:o,shift:-g}]},e)}else{var w=g-o.depth-(c.height-b);w<p&&(g+=.5*(p-w),b+=.5*(p-w)),_=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:b},{type:"elem",elem:o,shift:-g}]},e)}s=e.havingStyle(t),_.height*=s.sizeMultiplier/e.sizeMultiplier,_.depth*=s.sizeMultiplier/e.sizeMultiplier;var L;t.size===Qt.DISPLAY.size?L=e.fontMetrics().delim1:t.size===Qt.SCRIPTSCRIPT.size?L=e.havingStyle(Qt.SCRIPT).fontMetrics().delim2:L=e.fontMetrics().delim2;var T,N;return n.leftDelim==null?T=iy(e,["mopen"]):T=Nu.customSizedDelim(n.leftDelim,L,!0,e.havingStyle(t),n.mode,["mopen"]),n.continued?N=ke.makeSpan([]):n.rightDelim==null?N=iy(e,["mclose"]):N=Nu.customSizedDelim(n.rightDelim,L,!0,e.havingStyle(t),n.mode,["mclose"]),ke.makeSpan(["mord"].concat(s.sizingClasses(e)),[T,ke.makeSpan(["mfrac"],[_]),N],e)},DP=(n,e)=>{var t=new Qe.MathNode("mfrac",[zn(n.numer,e),zn(n.denom,e)]);if(!n.hasBarLine)t.setAttribute("linethickness","0px");else if(n.barSize){var i=mr(n.barSize,e);t.setAttribute("linethickness",at(i))}var r=uee(n.size,e.style);if(r.size!==e.style.size){t=new Qe.MathNode("mstyle",[t]);var s=r.size===Qt.DISPLAY.size?"true":"false";t.setAttribute("displaystyle",s),t.setAttribute("scriptlevel","0")}if(n.leftDelim!=null||n.rightDelim!=null){var o=[];if(n.leftDelim!=null){var a=new Qe.MathNode("mo",[new Qe.TextNode(n.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),o.push(a)}if(o.push(t),n.rightDelim!=null){var l=new Qe.MathNode("mo",[new Qe.TextNode(n.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),o.push(l)}return _P(o)}return t};dt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(n,e)=>{var{parser:t,funcName:i}=n,r=e[0],s=e[1],o,a=null,l=null,c="auto";switch(i){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,a="(",l=")";break;case"\\\\bracefrac":o=!1,a="\\{",l="\\}";break;case"\\\\brackfrac":o=!1,a="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(i){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text";break}return{type:"genfrac",mode:t.mode,continued:!1,numer:r,denom:s,hasBarLine:o,leftDelim:a,rightDelim:l,size:c,barSize:null}},htmlBuilder:TP,mathmlBuilder:DP});dt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(n,e)=>{var{parser:t,funcName:i}=n,r=e[0],s=e[1];return{type:"genfrac",mode:t.mode,continued:!0,numer:r,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});dt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(n){var{parser:e,funcName:t,token:i}=n,r;switch(t){case"\\over":r="\\frac";break;case"\\choose":r="\\binom";break;case"\\atop":r="\\\\atopfrac";break;case"\\brace":r="\\\\bracefrac";break;case"\\brack":r="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:r,token:i}}});var BU=["display","text","script","scriptscript"],FU=function(e){var t=null;return e.length>0&&(t=e,t=t==="."?null:t),t};dt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(n,e){var{parser:t}=n,i=e[4],r=e[5],s=g4(e[0]),o=s.type==="atom"&&s.family==="open"?FU(s.text):null,a=g4(e[1]),l=a.type==="atom"&&a.family==="close"?FU(a.text):null,c=Di(e[2],"size"),h,u=null;c.isBlank?h=!0:(u=c.value,h=u.number>0);var d="auto",g=e[3];if(g.type==="ordgroup"){if(g.body.length>0){var p=Di(g.body[0],"textord");d=BU[Number(p.text)]}}else g=Di(g,"textord"),d=BU[Number(g.text)];return{type:"genfrac",mode:t.mode,numer:i,denom:r,continued:!1,hasBarLine:h,barSize:u,leftDelim:o,rightDelim:l,size:d}},htmlBuilder:TP,mathmlBuilder:DP});dt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(n,e){var{parser:t,funcName:i,token:r}=n;return{type:"infix",mode:t.mode,replaceWith:"\\\\abovefrac",size:Di(e[0],"size").value,token:r}}});dt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(n,e)=>{var{parser:t,funcName:i}=n,r=e[0],s=mDe(Di(e[1],"infix").size),o=e[2],a=s.number>0;return{type:"genfrac",mode:t.mode,numer:r,denom:o,continued:!1,hasBarLine:a,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:TP,mathmlBuilder:DP});var dee=(n,e)=>{var t=e.style,i,r;n.type==="supsub"?(i=n.sup?an(n.sup,e.havingStyle(t.sup()),e):an(n.sub,e.havingStyle(t.sub()),e),r=Di(n.base,"horizBrace")):r=Di(n,"horizBrace");var s=an(r.base,e.havingBaseStyle(Qt.DISPLAY)),o=zu.svgSpan(r,e),a;if(r.isOver?(a=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:o}]},e),a.children[0].children[0].children[1].classes.push("svg-align")):(a=ke.makeVList({positionType:"bottom",positionData:s.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:s}]},e),a.children[0].children[0].children[0].classes.push("svg-align")),i){var l=ke.makeSpan(["mord",r.isOver?"mover":"munder"],[a],e);r.isOver?a=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:i}]},e):a=ke.makeVList({positionType:"bottom",positionData:l.depth+.2+i.height+i.depth,children:[{type:"elem",elem:i},{type:"kern",size:.2},{type:"elem",elem:l}]},e)}return ke.makeSpan(["mord",r.isOver?"mover":"munder"],[a],e)},WEe=(n,e)=>{var t=zu.mathMLnode(n.label);return new Qe.MathNode(n.isOver?"mover":"munder",[zn(n.base,e),t])};dt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(n,e){var{parser:t,funcName:i}=n;return{type:"horizBrace",mode:t.mode,label:i,isOver:/^\\over/.test(i),base:e[0]}},htmlBuilder:dee,mathmlBuilder:WEe});dt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,i=e[1],r=Di(e[0],"url").url;return t.settings.isTrusted({command:"\\href",url:r})?{type:"href",mode:t.mode,href:r,body:Vr(i)}:t.formatUnsupportedCmd("\\href")},htmlBuilder:(n,e)=>{var t=_s(n.body,e,!1);return ke.makeAnchor(n.href,[],t,e)},mathmlBuilder:(n,e)=>{var t=Cf(n.body,e);return t instanceof ja||(t=new ja("mrow",[t])),t.setAttribute("href",n.href),t}});dt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,i=Di(e[0],"url").url;if(!t.settings.isTrusted({command:"\\url",url:i}))return t.formatUnsupportedCmd("\\url");for(var r=[],s=0;s<i.length;s++){var o=i[s];o==="~"&&(o="\\textasciitilde"),r.push({type:"textord",mode:"text",text:o})}var a={type:"text",mode:t.mode,font:"\\texttt",body:r};return{type:"href",mode:t.mode,href:i,body:Vr(a)}}});dt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(n,e){var{parser:t}=n;return{type:"hbox",mode:t.mode,body:Vr(e[0])}},htmlBuilder(n,e){var t=_s(n.body,e,!1);return ke.makeFragment(t)},mathmlBuilder(n,e){return new Qe.MathNode("mrow",Da(n.body,e))}});dt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(n,e)=>{var{parser:t,funcName:i,token:r}=n,s=Di(e[0],"raw").string,o=e[1];t.settings.strict&&t.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var a,l={};switch(i){case"\\htmlClass":l.class=s,a={command:"\\htmlClass",class:s};break;case"\\htmlId":l.id=s,a={command:"\\htmlId",id:s};break;case"\\htmlStyle":l.style=s,a={command:"\\htmlStyle",style:s};break;case"\\htmlData":{for(var c=s.split(","),h=0;h<c.length;h++){var u=c[h].split("=");if(u.length!==2)throw new et("Error parsing key-value for \\htmlData");l["data-"+u[0].trim()]=u[1].trim()}a={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return t.settings.isTrusted(a)?{type:"html",mode:t.mode,attributes:l,body:Vr(o)}:t.formatUnsupportedCmd(i)},htmlBuilder:(n,e)=>{var t=_s(n.body,e,!1),i=["enclosing"];n.attributes.class&&i.push(...n.attributes.class.trim().split(/\s+/));var r=ke.makeSpan(i,t,e);for(var s in n.attributes)s!=="class"&&n.attributes.hasOwnProperty(s)&&r.setAttribute(s,n.attributes[s]);return r},mathmlBuilder:(n,e)=>Cf(n.body,e)});dt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(n,e)=>{var{parser:t}=n;return{type:"htmlmathml",mode:t.mode,html:Vr(e[0]),mathml:Vr(e[1])}},htmlBuilder:(n,e)=>{var t=_s(n.html,e,!1);return ke.makeFragment(t)},mathmlBuilder:(n,e)=>Cf(n.mathml,e)});var nD=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new et("Invalid size: '"+e+"' in \\includegraphics");var i={number:+(t[1]+t[2]),unit:t[3]};if(!NJ(i))throw new et("Invalid unit: '"+i.unit+"' in \\includegraphics.");return i};dt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(n,e,t)=>{var{parser:i}=n,r={number:0,unit:"em"},s={number:.9,unit:"em"},o={number:0,unit:"em"},a="";if(t[0])for(var l=Di(t[0],"raw").string,c=l.split(","),h=0;h<c.length;h++){var u=c[h].split("=");if(u.length===2){var d=u[1].trim();switch(u[0].trim()){case"alt":a=d;break;case"width":r=nD(d);break;case"height":s=nD(d);break;case"totalheight":o=nD(d);break;default:throw new et("Invalid key: '"+u[0]+"' in \\includegraphics.")}}}var g=Di(e[0],"url").url;return a===""&&(a=g,a=a.replace(/^.*[\\/]/,""),a=a.substring(0,a.lastIndexOf("."))),i.settings.isTrusted({command:"\\includegraphics",url:g})?{type:"includegraphics",mode:i.mode,alt:a,width:r,height:s,totalheight:o,src:g}:i.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(n,e)=>{var t=mr(n.height,e),i=0;n.totalheight.number>0&&(i=mr(n.totalheight,e)-t);var r=0;n.width.number>0&&(r=mr(n.width,e));var s={height:at(t+i)};r>0&&(s.width=at(r)),i>0&&(s.verticalAlign=at(-i));var o=new WDe(n.src,n.alt,s);return o.height=t,o.depth=i,o},mathmlBuilder:(n,e)=>{var t=new Qe.MathNode("mglyph",[]);t.setAttribute("alt",n.alt);var i=mr(n.height,e),r=0;if(n.totalheight.number>0&&(r=mr(n.totalheight,e)-i,t.setAttribute("valign",at(-r))),t.setAttribute("height",at(i+r)),n.width.number>0){var s=mr(n.width,e);t.setAttribute("width",at(s))}return t.setAttribute("src",n.src),t}});dt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(n,e){var{parser:t,funcName:i}=n,r=Di(e[0],"size");if(t.settings.strict){var s=i[1]==="m",o=r.value.unit==="mu";s?(o||t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" supports only mu units, "+("not "+r.value.unit+" units")),t.mode!=="math"&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" works only in math mode")):o&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" doesn't support mu units")}return{type:"kern",mode:t.mode,dimension:r.value}},htmlBuilder(n,e){return ke.makeGlue(n.dimension,e)},mathmlBuilder(n,e){var t=mr(n.dimension,e);return new Qe.SpaceNode(t)}});dt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:t,funcName:i}=n,r=e[0];return{type:"lap",mode:t.mode,alignment:i.slice(5),body:r}},htmlBuilder:(n,e)=>{var t;n.alignment==="clap"?(t=ke.makeSpan([],[an(n.body,e)]),t=ke.makeSpan(["inner"],[t],e)):t=ke.makeSpan(["inner"],[an(n.body,e)]);var i=ke.makeSpan(["fix"],[]),r=ke.makeSpan([n.alignment],[t,i],e),s=ke.makeSpan(["strut"]);return s.style.height=at(r.height+r.depth),r.depth&&(s.style.verticalAlign=at(-r.depth)),r.children.unshift(s),r=ke.makeSpan(["thinbox"],[r],e),ke.makeSpan(["mord","vbox"],[r],e)},mathmlBuilder:(n,e)=>{var t=new Qe.MathNode("mpadded",[zn(n.body,e)]);if(n.alignment!=="rlap"){var i=n.alignment==="llap"?"-1":"-0.5";t.setAttribute("lspace",i+"width")}return t.setAttribute("width","0px"),t}});dt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(n,e){var{funcName:t,parser:i}=n,r=i.mode;i.switchMode("math");var s=t==="\\("?"\\)":"$",o=i.parseExpression(!1,s);return i.expect(s),i.switchMode(r),{type:"styling",mode:i.mode,style:"text",body:o}}});dt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(n,e){throw new et("Mismatched "+n.funcName)}});var WU=(n,e)=>{switch(e.style.size){case Qt.DISPLAY.size:return n.display;case Qt.TEXT.size:return n.text;case Qt.SCRIPT.size:return n.script;case Qt.SCRIPTSCRIPT.size:return n.scriptscript;default:return n.text}};dt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(n,e)=>{var{parser:t}=n;return{type:"mathchoice",mode:t.mode,display:Vr(e[0]),text:Vr(e[1]),script:Vr(e[2]),scriptscript:Vr(e[3])}},htmlBuilder:(n,e)=>{var t=WU(n,e),i=_s(t,e,!1);return ke.makeFragment(i)},mathmlBuilder:(n,e)=>{var t=WU(n,e);return Cf(t,e)}});var fee=(n,e,t,i,r,s,o)=>{n=ke.makeSpan([],[n]);var a=t&&qt.isCharacterBox(t),l,c;if(e){var h=an(e,i.havingStyle(r.sup()),i);c={elem:h,kern:Math.max(i.fontMetrics().bigOpSpacing1,i.fontMetrics().bigOpSpacing3-h.depth)}}if(t){var u=an(t,i.havingStyle(r.sub()),i);l={elem:u,kern:Math.max(i.fontMetrics().bigOpSpacing2,i.fontMetrics().bigOpSpacing4-u.height)}}var d;if(c&&l){var g=i.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+n.depth+o;d=ke.makeVList({positionType:"bottom",positionData:g,children:[{type:"kern",size:i.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:at(-s)},{type:"kern",size:l.kern},{type:"elem",elem:n},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:at(s)},{type:"kern",size:i.fontMetrics().bigOpSpacing5}]},i)}else if(l){var p=n.height-o;d=ke.makeVList({positionType:"top",positionData:p,children:[{type:"kern",size:i.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:at(-s)},{type:"kern",size:l.kern},{type:"elem",elem:n}]},i)}else if(c){var b=n.depth+o;d=ke.makeVList({positionType:"bottom",positionData:b,children:[{type:"elem",elem:n},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:at(s)},{type:"kern",size:i.fontMetrics().bigOpSpacing5}]},i)}else return n;var _=[d];if(l&&s!==0&&!a){var w=ke.makeSpan(["mspace"],[],i);w.style.marginRight=at(s),_.unshift(w)}return ke.makeSpan(["mop","op-limits"],_,i)},gee=["\\smallint"],gb=(n,e)=>{var t,i,r=!1,s;n.type==="supsub"?(t=n.sup,i=n.sub,s=Di(n.base,"op"),r=!0):s=Di(n,"op");var o=e.style,a=!1;o.size===Qt.DISPLAY.size&&s.symbol&&!qt.contains(gee,s.name)&&(a=!0);var l;if(s.symbol){var c=a?"Size2-Regular":"Size1-Regular",h="";if((s.name==="\\oiint"||s.name==="\\oiiint")&&(h=s.name.slice(1),s.name=h==="oiint"?"\\iint":"\\iiint"),l=ke.makeSymbol(s.name,c,"math",e,["mop","op-symbol",a?"large-op":"small-op"]),h.length>0){var u=l.italic,d=ke.staticSvg(h+"Size"+(a?"2":"1"),e);l=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:d,shift:a?.08:0}]},e),s.name="\\"+h,l.classes.unshift("mop"),l.italic=u}}else if(s.body){var g=_s(s.body,e,!0);g.length===1&&g[0]instanceof Tl?(l=g[0],l.classes[0]="mop"):l=ke.makeSpan(["mop"],g,e)}else{for(var p=[],b=1;b<s.name.length;b++)p.push(ke.mathsym(s.name[b],s.mode,e));l=ke.makeSpan(["mop"],p,e)}var _=0,w=0;return(l instanceof Tl||s.name==="\\oiint"||s.name==="\\oiiint")&&!s.suppressBaseShift&&(_=(l.height-l.depth)/2-e.fontMetrics().axisHeight,w=l.italic),r?fee(l,t,i,e,o,w,_):(_&&(l.style.position="relative",l.style.top=at(_)),l)},Ky=(n,e)=>{var t;if(n.symbol)t=new ja("mo",[Dl(n.name,n.mode)]),qt.contains(gee,n.name)&&t.setAttribute("largeop","false");else if(n.body)t=new ja("mo",Da(n.body,e));else{t=new ja("mi",[new th(n.name.slice(1))]);var i=new ja("mo",[Dl("⁡","text")]);n.parentIsSupSub?t=new ja("mrow",[t,i]):t=VJ([t,i])}return t},zEe={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};dt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:(n,e)=>{var{parser:t,funcName:i}=n,r=i;return r.length===1&&(r=zEe[r]),{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:gb,mathmlBuilder:Ky});dt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var{parser:t}=n,i=e[0];return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Vr(i)}},htmlBuilder:gb,mathmlBuilder:Ky});var HEe={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};dt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(n){var{parser:e,funcName:t}=n;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:gb,mathmlBuilder:Ky});dt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(n){var{parser:e,funcName:t}=n;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:gb,mathmlBuilder:Ky});dt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler(n){var{parser:e,funcName:t}=n,i=t;return i.length===1&&(i=HEe[i]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:gb,mathmlBuilder:Ky});var mee=(n,e)=>{var t,i,r=!1,s;n.type==="supsub"?(t=n.sup,i=n.sub,s=Di(n.base,"operatorname"),r=!0):s=Di(n,"operatorname");var o;if(s.body.length>0){for(var a=s.body.map(u=>{var d=u.text;return typeof d=="string"?{type:"textord",mode:u.mode,text:d}:u}),l=_s(a,e.withFont("mathrm"),!0),c=0;c<l.length;c++){var h=l[c];h instanceof Tl&&(h.text=h.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=ke.makeSpan(["mop"],l,e)}else o=ke.makeSpan(["mop"],[],e);return r?fee(o,t,i,e,e.style,0,0):o},VEe=(n,e)=>{for(var t=Da(n.body,e.withFont("mathrm")),i=!0,r=0;r<t.length;r++){var s=t[r];if(!(s instanceof Qe.SpaceNode))if(s instanceof Qe.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=s.children[0];s.children.length===1&&o instanceof Qe.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):i=!1;break}default:i=!1}else i=!1}if(i){var a=t.map(h=>h.toText()).join("");t=[new Qe.TextNode(a)]}var l=new Qe.MathNode("mi",t);l.setAttribute("mathvariant","normal");var c=new Qe.MathNode("mo",[Dl("⁡","text")]);return n.parentIsSupSub?new Qe.MathNode("mrow",[l,c]):Qe.newDocumentFragment([l,c])};dt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(n,e)=>{var{parser:t,funcName:i}=n,r=e[0];return{type:"operatorname",mode:t.mode,body:Vr(r),alwaysHandleSupSub:i==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:mee,mathmlBuilder:VEe});Z("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");sp({type:"ordgroup",htmlBuilder(n,e){return n.semisimple?ke.makeFragment(_s(n.body,e,!1)):ke.makeSpan(["mord"],_s(n.body,e,!0),e)},mathmlBuilder(n,e){return Cf(n.body,e,!0)}});dt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(n,e){var{parser:t}=n,i=e[0];return{type:"overline",mode:t.mode,body:i}},htmlBuilder(n,e){var t=an(n.body,e.havingCrampedStyle()),i=ke.makeLineSpan("overline-line",e),r=e.fontMetrics().defaultRuleThickness,s=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t},{type:"kern",size:3*r},{type:"elem",elem:i},{type:"kern",size:r}]},e);return ke.makeSpan(["mord","overline"],[s],e)},mathmlBuilder(n,e){var t=new Qe.MathNode("mo",[new Qe.TextNode("‾")]);t.setAttribute("stretchy","true");var i=new Qe.MathNode("mover",[zn(n.body,e),t]);return i.setAttribute("accent","true"),i}});dt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,i=e[0];return{type:"phantom",mode:t.mode,body:Vr(i)}},htmlBuilder:(n,e)=>{var t=_s(n.body,e.withPhantom(),!1);return ke.makeFragment(t)},mathmlBuilder:(n,e)=>{var t=Da(n.body,e);return new Qe.MathNode("mphantom",t)}});dt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,i=e[0];return{type:"hphantom",mode:t.mode,body:i}},htmlBuilder:(n,e)=>{var t=ke.makeSpan([],[an(n.body,e.withPhantom())]);if(t.height=0,t.depth=0,t.children)for(var i=0;i<t.children.length;i++)t.children[i].height=0,t.children[i].depth=0;return t=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e),ke.makeSpan(["mord"],[t],e)},mathmlBuilder:(n,e)=>{var t=Da(Vr(n.body),e),i=new Qe.MathNode("mphantom",t),r=new Qe.MathNode("mpadded",[i]);return r.setAttribute("height","0px"),r.setAttribute("depth","0px"),r}});dt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,i=e[0];return{type:"vphantom",mode:t.mode,body:i}},htmlBuilder:(n,e)=>{var t=ke.makeSpan(["inner"],[an(n.body,e.withPhantom())]),i=ke.makeSpan(["fix"],[]);return ke.makeSpan(["mord","rlap"],[t,i],e)},mathmlBuilder:(n,e)=>{var t=Da(Vr(n.body),e),i=new Qe.MathNode("mphantom",t),r=new Qe.MathNode("mpadded",[i]);return r.setAttribute("width","0px"),r}});dt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(n,e){var{parser:t}=n,i=Di(e[0],"size").value,r=e[1];return{type:"raisebox",mode:t.mode,dy:i,body:r}},htmlBuilder(n,e){var t=an(n.body,e),i=mr(n.dy,e);return ke.makeVList({positionType:"shift",positionData:-i,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(n,e){var t=new Qe.MathNode("mpadded",[zn(n.body,e)]),i=n.dy.number+n.dy.unit;return t.setAttribute("voffset",i),t}});dt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(n){var{parser:e}=n;return{type:"internal",mode:e.mode}}});dt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(n,e,t){var{parser:i}=n,r=t[0],s=Di(e[0],"size"),o=Di(e[1],"size");return{type:"rule",mode:i.mode,shift:r&&Di(r,"size").value,width:s.value,height:o.value}},htmlBuilder(n,e){var t=ke.makeSpan(["mord","rule"],[],e),i=mr(n.width,e),r=mr(n.height,e),s=n.shift?mr(n.shift,e):0;return t.style.borderRightWidth=at(i),t.style.borderTopWidth=at(r),t.style.bottom=at(s),t.width=i,t.height=r+s,t.depth=-s,t.maxFontSize=r*1.125*e.sizeMultiplier,t},mathmlBuilder(n,e){var t=mr(n.width,e),i=mr(n.height,e),r=n.shift?mr(n.shift,e):0,s=e.color&&e.getColor()||"black",o=new Qe.MathNode("mspace");o.setAttribute("mathbackground",s),o.setAttribute("width",at(t)),o.setAttribute("height",at(i));var a=new Qe.MathNode("mpadded",[o]);return r>=0?a.setAttribute("height",at(r)):(a.setAttribute("height",at(r)),a.setAttribute("depth",at(-r))),a.setAttribute("voffset",at(r)),a}});function pee(n,e,t){for(var i=_s(n,e,!1),r=e.sizeMultiplier/t.sizeMultiplier,s=0;s<i.length;s++){var o=i[s].classes.indexOf("sizing");o<0?Array.prototype.push.apply(i[s].classes,e.sizingClasses(t)):i[s].classes[o+1]==="reset-size"+e.size&&(i[s].classes[o+1]="reset-size"+t.size),i[s].height*=r,i[s].depth*=r}return ke.makeFragment(i)}var zU=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],$Ee=(n,e)=>{var t=e.havingSize(n.size);return pee(n.body,t,e)};dt({type:"sizing",names:zU,props:{numArgs:0,allowedInText:!0},handler:(n,e)=>{var{breakOnTokenText:t,funcName:i,parser:r}=n,s=r.parseExpression(!1,t);return{type:"sizing",mode:r.mode,size:zU.indexOf(i)+1,body:s}},htmlBuilder:$Ee,mathmlBuilder:(n,e)=>{var t=e.havingSize(n.size),i=Da(n.body,t),r=new Qe.MathNode("mstyle",i);return r.setAttribute("mathsize",at(t.sizeMultiplier)),r}});dt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(n,e,t)=>{var{parser:i}=n,r=!1,s=!1,o=t[0]&&Di(t[0],"ordgroup");if(o)for(var a="",l=0;l<o.body.length;++l){var c=o.body[l];if(a=c.text,a==="t")r=!0;else if(a==="b")s=!0;else{r=!1,s=!1;break}}else r=!0,s=!0;var h=e[0];return{type:"smash",mode:i.mode,body:h,smashHeight:r,smashDepth:s}},htmlBuilder:(n,e)=>{var t=ke.makeSpan([],[an(n.body,e)]);if(!n.smashHeight&&!n.smashDepth)return t;if(n.smashHeight&&(t.height=0,t.children))for(var i=0;i<t.children.length;i++)t.children[i].height=0;if(n.smashDepth&&(t.depth=0,t.children))for(var r=0;r<t.children.length;r++)t.children[r].depth=0;var s=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e);return ke.makeSpan(["mord"],[s],e)},mathmlBuilder:(n,e)=>{var t=new Qe.MathNode("mpadded",[zn(n.body,e)]);return n.smashHeight&&t.setAttribute("height","0px"),n.smashDepth&&t.setAttribute("depth","0px"),t}});dt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(n,e,t){var{parser:i}=n,r=t[0],s=e[0];return{type:"sqrt",mode:i.mode,body:s,index:r}},htmlBuilder(n,e){var t=an(n.body,e.havingCrampedStyle());t.height===0&&(t.height=e.fontMetrics().xHeight),t=ke.wrapFragment(t,e);var i=e.fontMetrics(),r=i.defaultRuleThickness,s=r;e.style.id<Qt.TEXT.id&&(s=e.fontMetrics().xHeight);var o=r+s/4,a=t.height+t.depth+o+r,{span:l,ruleWidth:c,advanceWidth:h}=Nu.sqrtImage(a,e),u=l.height-c;u>t.height+t.depth+o&&(o=(o+u-t.height-t.depth)/2);var d=l.height-t.height-o-c;t.style.paddingLeft=at(h);var g=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t,wrapperClasses:["svg-align"]},{type:"kern",size:-(t.height+d)},{type:"elem",elem:l},{type:"kern",size:c}]},e);if(n.index){var p=e.havingStyle(Qt.SCRIPTSCRIPT),b=an(n.index,p,e),_=.6*(g.height-g.depth),w=ke.makeVList({positionType:"shift",positionData:-_,children:[{type:"elem",elem:b}]},e),y=ke.makeSpan(["root"],[w]);return ke.makeSpan(["mord","sqrt"],[y,g],e)}else return ke.makeSpan(["mord","sqrt"],[g],e)},mathmlBuilder(n,e){var{body:t,index:i}=n;return i?new Qe.MathNode("mroot",[zn(t,e),zn(i,e)]):new Qe.MathNode("msqrt",[zn(t,e)])}});var HU={display:Qt.DISPLAY,text:Qt.TEXT,script:Qt.SCRIPT,scriptscript:Qt.SCRIPTSCRIPT};dt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n,e){var{breakOnTokenText:t,funcName:i,parser:r}=n,s=r.parseExpression(!0,t),o=i.slice(1,i.length-5);return{type:"styling",mode:r.mode,style:o,body:s}},htmlBuilder(n,e){var t=HU[n.style],i=e.havingStyle(t).withFont("");return pee(n.body,i,e)},mathmlBuilder(n,e){var t=HU[n.style],i=e.havingStyle(t),r=Da(n.body,i),s=new Qe.MathNode("mstyle",r),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},a=o[n.style];return s.setAttribute("scriptlevel",a[0]),s.setAttribute("displaystyle",a[1]),s}});var jEe=function(e,t){var i=e.base;if(i)if(i.type==="op"){var r=i.limits&&(t.style.size===Qt.DISPLAY.size||i.alwaysHandleSupSub);return r?gb:null}else if(i.type==="operatorname"){var s=i.alwaysHandleSupSub&&(t.style.size===Qt.DISPLAY.size||i.limits);return s?mee:null}else{if(i.type==="accent")return qt.isCharacterBox(i.base)?yP:null;if(i.type==="horizBrace"){var o=!e.sub;return o===i.isOver?dee:null}else return null}else return null};sp({type:"supsub",htmlBuilder(n,e){var t=jEe(n,e);if(t)return t(n,e);var{base:i,sup:r,sub:s}=n,o=an(i,e),a,l,c=e.fontMetrics(),h=0,u=0,d=i&&qt.isCharacterBox(i);if(r){var g=e.havingStyle(e.style.sup());a=an(r,g,e),d||(h=o.height-g.fontMetrics().supDrop*g.sizeMultiplier/e.sizeMultiplier)}if(s){var p=e.havingStyle(e.style.sub());l=an(s,p,e),d||(u=o.depth+p.fontMetrics().subDrop*p.sizeMultiplier/e.sizeMultiplier)}var b;e.style===Qt.DISPLAY?b=c.sup1:e.style.cramped?b=c.sup3:b=c.sup2;var _=e.sizeMultiplier,w=at(.5/c.ptPerEm/_),y=null;if(l){var k=n.base&&n.base.type==="op"&&n.base.name&&(n.base.name==="\\oiint"||n.base.name==="\\oiiint");(o instanceof Tl||k)&&(y=at(-o.italic))}var L;if(a&&l){h=Math.max(h,b,a.depth+.25*c.xHeight),u=Math.max(u,c.sub2);var T=c.defaultRuleThickness,N=4*T;if(h-a.depth-(l.height-u)<N){u=N-(h-a.depth)+l.height;var D=.8*c.xHeight-(h-a.depth);D>0&&(h+=D,u-=D)}var O=[{type:"elem",elem:l,shift:u,marginRight:w,marginLeft:y},{type:"elem",elem:a,shift:-h,marginRight:w}];L=ke.makeVList({positionType:"individualShift",children:O},e)}else if(l){u=Math.max(u,c.sub1,l.height-.8*c.xHeight);var B=[{type:"elem",elem:l,marginLeft:y,marginRight:w}];L=ke.makeVList({positionType:"shift",positionData:u,children:B},e)}else if(a)h=Math.max(h,b,a.depth+.25*c.xHeight),L=ke.makeVList({positionType:"shift",positionData:-h,children:[{type:"elem",elem:a,marginRight:w}]},e);else throw new Error("supsub must have either sup or sub.");var G=CN(o,"right")||"mord";return ke.makeSpan([G],[o,ke.makeSpan(["msupsub"],[L])],e)},mathmlBuilder(n,e){var t=!1,i,r;n.base&&n.base.type==="horizBrace"&&(r=!!n.sup,r===n.base.isOver&&(t=!0,i=n.base.isOver)),n.base&&(n.base.type==="op"||n.base.type==="operatorname")&&(n.base.parentIsSupSub=!0);var s=[zn(n.base,e)];n.sub&&s.push(zn(n.sub,e)),n.sup&&s.push(zn(n.sup,e));var o;if(t)o=i?"mover":"munder";else if(n.sub)if(n.sup){var c=n.base;c&&c.type==="op"&&c.limits&&e.style===Qt.DISPLAY||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(e.style===Qt.DISPLAY||c.limits)?o="munderover":o="msubsup"}else{var l=n.base;l&&l.type==="op"&&l.limits&&(e.style===Qt.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===Qt.DISPLAY)?o="munder":o="msub"}else{var a=n.base;a&&a.type==="op"&&a.limits&&(e.style===Qt.DISPLAY||a.alwaysHandleSupSub)||a&&a.type==="operatorname"&&a.alwaysHandleSupSub&&(a.limits||e.style===Qt.DISPLAY)?o="mover":o="msup"}return new Qe.MathNode(o,s)}});sp({type:"atom",htmlBuilder(n,e){return ke.mathsym(n.text,n.mode,e,["m"+n.family])},mathmlBuilder(n,e){var t=new Qe.MathNode("mo",[Dl(n.text,n.mode)]);if(n.family==="bin"){var i=vP(n,e);i==="bold-italic"&&t.setAttribute("mathvariant",i)}else n.family==="punct"?t.setAttribute("separator","true"):(n.family==="open"||n.family==="close")&&t.setAttribute("stretchy","false");return t}});var bee={mi:"italic",mn:"normal",mtext:"normal"};sp({type:"mathord",htmlBuilder(n,e){return ke.makeOrd(n,e,"mathord")},mathmlBuilder(n,e){var t=new Qe.MathNode("mi",[Dl(n.text,n.mode,e)]),i=vP(n,e)||"italic";return i!==bee[t.type]&&t.setAttribute("mathvariant",i),t}});sp({type:"textord",htmlBuilder(n,e){return ke.makeOrd(n,e,"textord")},mathmlBuilder(n,e){var t=Dl(n.text,n.mode,e),i=vP(n,e)||"normal",r;return n.mode==="text"?r=new Qe.MathNode("mtext",[t]):/[0-9]/.test(n.text)?r=new Qe.MathNode("mn",[t]):n.text==="\\prime"?r=new Qe.MathNode("mo",[t]):r=new Qe.MathNode("mi",[t]),i!==bee[r.type]&&r.setAttribute("mathvariant",i),r}});var rD={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},sD={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};sp({type:"spacing",htmlBuilder(n,e){if(sD.hasOwnProperty(n.text)){var t=sD[n.text].className||"";if(n.mode==="text"){var i=ke.makeOrd(n,e,"textord");return i.classes.push(t),i}else return ke.makeSpan(["mspace",t],[ke.mathsym(n.text,n.mode,e)],e)}else{if(rD.hasOwnProperty(n.text))return ke.makeSpan(["mspace",rD[n.text]],[],e);throw new et('Unknown type of space "'+n.text+'"')}},mathmlBuilder(n,e){var t;if(sD.hasOwnProperty(n.text))t=new Qe.MathNode("mtext",[new Qe.TextNode(" ")]);else{if(rD.hasOwnProperty(n.text))return new Qe.MathNode("mspace");throw new et('Unknown type of space "'+n.text+'"')}return t}});var VU=()=>{var n=new Qe.MathNode("mtd",[]);return n.setAttribute("width","50%"),n};sp({type:"tag",mathmlBuilder(n,e){var t=new Qe.MathNode("mtable",[new Qe.MathNode("mtr",[VU(),new Qe.MathNode("mtd",[Cf(n.body,e)]),VU(),new Qe.MathNode("mtd",[Cf(n.tag,e)])])]);return t.setAttribute("width","100%"),t}});var $U={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},jU={"\\textbf":"textbf","\\textmd":"textmd"},UEe={"\\textit":"textit","\\textup":"textup"},UU=(n,e)=>{var t=n.font;if(t){if($U[t])return e.withTextFontFamily($U[t]);if(jU[t])return e.withTextFontWeight(jU[t]);if(t==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(UEe[t])};dt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(n,e){var{parser:t,funcName:i}=n,r=e[0];return{type:"text",mode:t.mode,body:Vr(r),font:i}},htmlBuilder(n,e){var t=UU(n,e),i=_s(n.body,t,!0);return ke.makeSpan(["mord","text"],i,t)},mathmlBuilder(n,e){var t=UU(n,e);return Cf(n.body,t)}});dt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(n,e){var{parser:t}=n;return{type:"underline",mode:t.mode,body:e[0]}},htmlBuilder(n,e){var t=an(n.body,e),i=ke.makeLineSpan("underline-line",e),r=e.fontMetrics().defaultRuleThickness,s=ke.makeVList({positionType:"top",positionData:t.height,children:[{type:"kern",size:r},{type:"elem",elem:i},{type:"kern",size:3*r},{type:"elem",elem:t}]},e);return ke.makeSpan(["mord","underline"],[s],e)},mathmlBuilder(n,e){var t=new Qe.MathNode("mo",[new Qe.TextNode("‾")]);t.setAttribute("stretchy","true");var i=new Qe.MathNode("munder",[zn(n.body,e),t]);return i.setAttribute("accentunder","true"),i}});dt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(n,e){var{parser:t}=n;return{type:"vcenter",mode:t.mode,body:e[0]}},htmlBuilder(n,e){var t=an(n.body,e),i=e.fontMetrics().axisHeight,r=.5*(t.height-i-(t.depth+i));return ke.makeVList({positionType:"shift",positionData:r,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(n,e){return new Qe.MathNode("mpadded",[zn(n.body,e)],["vcenter"])}});dt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(n,e,t){throw new et("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(n,e){for(var t=qU(n),i=[],r=e.havingStyle(e.style.text()),s=0;s<t.length;s++){var o=t[s];o==="~"&&(o="\\textasciitilde"),i.push(ke.makeSymbol(o,"Typewriter-Regular",n.mode,r,["mord","texttt"]))}return ke.makeSpan(["mord","text"].concat(r.sizingClasses(e)),ke.tryCombineChars(i),r)},mathmlBuilder(n,e){var t=new Qe.TextNode(qU(n)),i=new Qe.MathNode("mtext",[t]);return i.setAttribute("mathvariant","monospace"),i}});var qU=n=>n.body.replace(/ /g,n.star?"␣":" "),Qd=zJ,_ee=`[ \r
	]`,qEe="\\\\[a-zA-Z@]+",GEe="\\\\[^\uD800-\uDFFF]",KEe="("+qEe+")"+_ee+"*",YEe=`\\\\(
|[ \r	]+
?)[ \r	]*`,LN="[̀-ͯ]",ZEe=new RegExp(LN+"+$"),XEe="("+_ee+"+)|"+(YEe+"|")+"([!-\\[\\]-‧‪-퟿豈-￿]"+(LN+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(LN+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+KEe)+("|"+GEe+")");class GU{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp(XEe,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new wl("EOF",new za(this,t,t));var i=this.tokenRegex.exec(e);if(i===null||i.index!==t)throw new et("Unexpected character: '"+e[t]+"'",new wl(e[t],new za(this,t,t+1)));var r=i[6]||i[3]||(i[2]?"\\ ":" ");if(this.catcodes[r]===14){var s=e.indexOf(`
`,this.tokenRegex.lastIndex);return s===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new wl(r,new za(this,t,this.tokenRegex.lastIndex))}}class QEe{constructor(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new et("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(e[t]==null?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,i){if(i===void 0&&(i=!1),i){for(var r=0;r<this.undefStack.length;r++)delete this.undefStack[r][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var s=this.undefStack[this.undefStack.length-1];s&&!s.hasOwnProperty(e)&&(s[e]=this.current[e])}t==null?delete this.current[e]:this.current[e]=t}}var JEe=aee;Z("\\noexpand",function(n){var e=n.popToken();return n.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});Z("\\expandafter",function(n){var e=n.popToken();return n.expandOnce(!0),{tokens:[e],numArgs:0}});Z("\\@firstoftwo",function(n){var e=n.consumeArgs(2);return{tokens:e[0],numArgs:0}});Z("\\@secondoftwo",function(n){var e=n.consumeArgs(2);return{tokens:e[1],numArgs:0}});Z("\\@ifnextchar",function(n){var e=n.consumeArgs(3);n.consumeSpaces();var t=n.future();return e[0].length===1&&e[0][0].text===t.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});Z("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");Z("\\TextOrMath",function(n){var e=n.consumeArgs(2);return n.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var KU={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Z("\\char",function(n){var e=n.popToken(),t,i="";if(e.text==="'")t=8,e=n.popToken();else if(e.text==='"')t=16,e=n.popToken();else if(e.text==="`")if(e=n.popToken(),e.text[0]==="\\")i=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new et("\\char` missing argument");i=e.text.charCodeAt(0)}else t=10;if(t){if(i=KU[e.text],i==null||i>=t)throw new et("Invalid base-"+t+" digit "+e.text);for(var r;(r=KU[n.future().text])!=null&&r<t;)i*=t,i+=r,n.popToken()}return"\\@char{"+i+"}"});var EP=(n,e,t,i)=>{var r=n.consumeArg().tokens;if(r.length!==1)throw new et("\\newcommand's first argument must be a macro name");var s=r[0].text,o=n.isDefined(s);if(o&&!e)throw new et("\\newcommand{"+s+"} attempting to redefine "+(s+"; use \\renewcommand"));if(!o&&!t)throw new et("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var a=0;if(r=n.consumeArg().tokens,r.length===1&&r[0].text==="["){for(var l="",c=n.expandNextToken();c.text!=="]"&&c.text!=="EOF";)l+=c.text,c=n.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new et("Invalid number of arguments: "+l);a=parseInt(l),r=n.consumeArg().tokens}return o&&i||n.macros.set(s,{tokens:r,numArgs:a}),""};Z("\\newcommand",n=>EP(n,!1,!0,!1));Z("\\renewcommand",n=>EP(n,!0,!1,!1));Z("\\providecommand",n=>EP(n,!0,!0,!0));Z("\\message",n=>{var e=n.consumeArgs(1)[0];return console.log(e.reverse().map(t=>t.text).join("")),""});Z("\\errmessage",n=>{var e=n.consumeArgs(1)[0];return console.error(e.reverse().map(t=>t.text).join("")),""});Z("\\show",n=>{var e=n.popToken(),t=e.text;return console.log(e,n.macros.get(t),Qd[t],Gn.math[t],Gn.text[t]),""});Z("\\bgroup","{");Z("\\egroup","}");Z("~","\\nobreakspace");Z("\\lq","`");Z("\\rq","'");Z("\\aa","\\r a");Z("\\AA","\\r A");Z("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}");Z("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");Z("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}");Z("ℬ","\\mathscr{B}");Z("ℰ","\\mathscr{E}");Z("ℱ","\\mathscr{F}");Z("ℋ","\\mathscr{H}");Z("ℐ","\\mathscr{I}");Z("ℒ","\\mathscr{L}");Z("ℳ","\\mathscr{M}");Z("ℛ","\\mathscr{R}");Z("ℭ","\\mathfrak{C}");Z("ℌ","\\mathfrak{H}");Z("ℨ","\\mathfrak{Z}");Z("\\Bbbk","\\Bbb{k}");Z("·","\\cdotp");Z("\\llap","\\mathllap{\\textrm{#1}}");Z("\\rlap","\\mathrlap{\\textrm{#1}}");Z("\\clap","\\mathclap{\\textrm{#1}}");Z("\\mathstrut","\\vphantom{(}");Z("\\underbar","\\underline{\\text{#1}}");Z("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');Z("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}");Z("\\ne","\\neq");Z("≠","\\neq");Z("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}");Z("∉","\\notin");Z("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}");Z("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}");Z("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}");Z("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}");Z("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}");Z("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}");Z("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}");Z("⟂","\\perp");Z("‼","\\mathclose{!\\mkern-0.8mu!}");Z("∌","\\notni");Z("⌜","\\ulcorner");Z("⌝","\\urcorner");Z("⌞","\\llcorner");Z("⌟","\\lrcorner");Z("©","\\copyright");Z("®","\\textregistered");Z("️","\\textregistered");Z("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');Z("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');Z("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');Z("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');Z("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");Z("⋮","\\vdots");Z("\\varGamma","\\mathit{\\Gamma}");Z("\\varDelta","\\mathit{\\Delta}");Z("\\varTheta","\\mathit{\\Theta}");Z("\\varLambda","\\mathit{\\Lambda}");Z("\\varXi","\\mathit{\\Xi}");Z("\\varPi","\\mathit{\\Pi}");Z("\\varSigma","\\mathit{\\Sigma}");Z("\\varUpsilon","\\mathit{\\Upsilon}");Z("\\varPhi","\\mathit{\\Phi}");Z("\\varPsi","\\mathit{\\Psi}");Z("\\varOmega","\\mathit{\\Omega}");Z("\\substack","\\begin{subarray}{c}#1\\end{subarray}");Z("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");Z("\\boxed","\\fbox{$\\displaystyle{#1}$}");Z("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");Z("\\implies","\\DOTSB\\;\\Longrightarrow\\;");Z("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");Z("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");Z("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var YU={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Z("\\dots",function(n){var e="\\dotso",t=n.expandAfterFuture().text;return t in YU?e=YU[t]:(t.slice(0,4)==="\\not"||t in Gn.math&&qt.contains(["bin","rel"],Gn.math[t].group))&&(e="\\dotsb"),e});var IP={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Z("\\dotso",function(n){var e=n.future().text;return e in IP?"\\ldots\\,":"\\ldots"});Z("\\dotsc",function(n){var e=n.future().text;return e in IP&&e!==","?"\\ldots\\,":"\\ldots"});Z("\\cdots",function(n){var e=n.future().text;return e in IP?"\\@cdots\\,":"\\@cdots"});Z("\\dotsb","\\cdots");Z("\\dotsm","\\cdots");Z("\\dotsi","\\!\\cdots");Z("\\dotsx","\\ldots\\,");Z("\\DOTSI","\\relax");Z("\\DOTSB","\\relax");Z("\\DOTSX","\\relax");Z("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");Z("\\,","\\tmspace+{3mu}{.1667em}");Z("\\thinspace","\\,");Z("\\>","\\mskip{4mu}");Z("\\:","\\tmspace+{4mu}{.2222em}");Z("\\medspace","\\:");Z("\\;","\\tmspace+{5mu}{.2777em}");Z("\\thickspace","\\;");Z("\\!","\\tmspace-{3mu}{.1667em}");Z("\\negthinspace","\\!");Z("\\negmedspace","\\tmspace-{4mu}{.2222em}");Z("\\negthickspace","\\tmspace-{5mu}{.277em}");Z("\\enspace","\\kern.5em ");Z("\\enskip","\\hskip.5em\\relax");Z("\\quad","\\hskip1em\\relax");Z("\\qquad","\\hskip2em\\relax");Z("\\tag","\\@ifstar\\tag@literal\\tag@paren");Z("\\tag@paren","\\tag@literal{({#1})}");Z("\\tag@literal",n=>{if(n.macros.get("\\df@tag"))throw new et("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});Z("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");Z("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");Z("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");Z("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");Z("\\newline","\\\\\\relax");Z("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var vee=at(eh["Main-Regular"][84][1]-.7*eh["Main-Regular"][65][1]);Z("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+vee+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");Z("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+vee+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");Z("\\hspace","\\@ifstar\\@hspacer\\@hspace");Z("\\@hspace","\\hskip #1\\relax");Z("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");Z("\\ordinarycolon",":");Z("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");Z("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');Z("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');Z("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');Z("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');Z("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');Z("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');Z("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');Z("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');Z("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');Z("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');Z("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');Z("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');Z("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');Z("∷","\\dblcolon");Z("∹","\\eqcolon");Z("≔","\\coloneqq");Z("≕","\\eqqcolon");Z("⩴","\\Coloneqq");Z("\\ratio","\\vcentcolon");Z("\\coloncolon","\\dblcolon");Z("\\colonequals","\\coloneqq");Z("\\coloncolonequals","\\Coloneqq");Z("\\equalscolon","\\eqqcolon");Z("\\equalscoloncolon","\\Eqqcolon");Z("\\colonminus","\\coloneq");Z("\\coloncolonminus","\\Coloneq");Z("\\minuscolon","\\eqcolon");Z("\\minuscoloncolon","\\Eqcolon");Z("\\coloncolonapprox","\\Colonapprox");Z("\\coloncolonsim","\\Colonsim");Z("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Z("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");Z("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Z("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");Z("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}");Z("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");Z("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");Z("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");Z("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");Z("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");Z("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");Z("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");Z("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");Z("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}");Z("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}");Z("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}");Z("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}");Z("\\nleqq","\\html@mathml{\\@nleqq}{≰}");Z("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}");Z("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}");Z("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}");Z("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}");Z("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}");Z("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}");Z("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}");Z("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}");Z("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}");Z("\\imath","\\html@mathml{\\@imath}{ı}");Z("\\jmath","\\html@mathml{\\@jmath}{ȷ}");Z("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}");Z("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}");Z("⟦","\\llbracket");Z("⟧","\\rrbracket");Z("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}");Z("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}");Z("⦃","\\lBrace");Z("⦄","\\rBrace");Z("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}");Z("⦵","\\minuso");Z("\\darr","\\downarrow");Z("\\dArr","\\Downarrow");Z("\\Darr","\\Downarrow");Z("\\lang","\\langle");Z("\\rang","\\rangle");Z("\\uarr","\\uparrow");Z("\\uArr","\\Uparrow");Z("\\Uarr","\\Uparrow");Z("\\N","\\mathbb{N}");Z("\\R","\\mathbb{R}");Z("\\Z","\\mathbb{Z}");Z("\\alef","\\aleph");Z("\\alefsym","\\aleph");Z("\\Alpha","\\mathrm{A}");Z("\\Beta","\\mathrm{B}");Z("\\bull","\\bullet");Z("\\Chi","\\mathrm{X}");Z("\\clubs","\\clubsuit");Z("\\cnums","\\mathbb{C}");Z("\\Complex","\\mathbb{C}");Z("\\Dagger","\\ddagger");Z("\\diamonds","\\diamondsuit");Z("\\empty","\\emptyset");Z("\\Epsilon","\\mathrm{E}");Z("\\Eta","\\mathrm{H}");Z("\\exist","\\exists");Z("\\harr","\\leftrightarrow");Z("\\hArr","\\Leftrightarrow");Z("\\Harr","\\Leftrightarrow");Z("\\hearts","\\heartsuit");Z("\\image","\\Im");Z("\\infin","\\infty");Z("\\Iota","\\mathrm{I}");Z("\\isin","\\in");Z("\\Kappa","\\mathrm{K}");Z("\\larr","\\leftarrow");Z("\\lArr","\\Leftarrow");Z("\\Larr","\\Leftarrow");Z("\\lrarr","\\leftrightarrow");Z("\\lrArr","\\Leftrightarrow");Z("\\Lrarr","\\Leftrightarrow");Z("\\Mu","\\mathrm{M}");Z("\\natnums","\\mathbb{N}");Z("\\Nu","\\mathrm{N}");Z("\\Omicron","\\mathrm{O}");Z("\\plusmn","\\pm");Z("\\rarr","\\rightarrow");Z("\\rArr","\\Rightarrow");Z("\\Rarr","\\Rightarrow");Z("\\real","\\Re");Z("\\reals","\\mathbb{R}");Z("\\Reals","\\mathbb{R}");Z("\\Rho","\\mathrm{P}");Z("\\sdot","\\cdot");Z("\\sect","\\S");Z("\\spades","\\spadesuit");Z("\\sub","\\subset");Z("\\sube","\\subseteq");Z("\\supe","\\supseteq");Z("\\Tau","\\mathrm{T}");Z("\\thetasym","\\vartheta");Z("\\weierp","\\wp");Z("\\Zeta","\\mathrm{Z}");Z("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");Z("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");Z("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");Z("\\bra","\\mathinner{\\langle{#1}|}");Z("\\ket","\\mathinner{|{#1}\\rangle}");Z("\\braket","\\mathinner{\\langle{#1}\\rangle}");Z("\\Bra","\\left\\langle#1\\right|");Z("\\Ket","\\left|#1\\right\\rangle");var wee=n=>e=>{var t=e.consumeArg().tokens,i=e.consumeArg().tokens,r=e.consumeArg().tokens,s=e.consumeArg().tokens,o=e.macros.get("|"),a=e.macros.get("\\|");e.macros.beginGroup();var l=u=>d=>{n&&(d.macros.set("|",o),r.length&&d.macros.set("\\|",a));var g=u;if(!u&&r.length){var p=d.future();p.text==="|"&&(d.popToken(),g=!0)}return{tokens:g?r:i,numArgs:0}};e.macros.set("|",l(!1)),r.length&&e.macros.set("\\|",l(!0));var c=e.consumeArg().tokens,h=e.expandTokens([...s,...c,...t]);return e.macros.endGroup(),{tokens:h.reverse(),numArgs:0}};Z("\\bra@ket",wee(!1));Z("\\bra@set",wee(!0));Z("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");Z("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");Z("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");Z("\\angln","{\\angl n}");Z("\\blue","\\textcolor{##6495ed}{#1}");Z("\\orange","\\textcolor{##ffa500}{#1}");Z("\\pink","\\textcolor{##ff00af}{#1}");Z("\\red","\\textcolor{##df0030}{#1}");Z("\\green","\\textcolor{##28ae7b}{#1}");Z("\\gray","\\textcolor{gray}{#1}");Z("\\purple","\\textcolor{##9d38bd}{#1}");Z("\\blueA","\\textcolor{##ccfaff}{#1}");Z("\\blueB","\\textcolor{##80f6ff}{#1}");Z("\\blueC","\\textcolor{##63d9ea}{#1}");Z("\\blueD","\\textcolor{##11accd}{#1}");Z("\\blueE","\\textcolor{##0c7f99}{#1}");Z("\\tealA","\\textcolor{##94fff5}{#1}");Z("\\tealB","\\textcolor{##26edd5}{#1}");Z("\\tealC","\\textcolor{##01d1c1}{#1}");Z("\\tealD","\\textcolor{##01a995}{#1}");Z("\\tealE","\\textcolor{##208170}{#1}");Z("\\greenA","\\textcolor{##b6ffb0}{#1}");Z("\\greenB","\\textcolor{##8af281}{#1}");Z("\\greenC","\\textcolor{##74cf70}{#1}");Z("\\greenD","\\textcolor{##1fab54}{#1}");Z("\\greenE","\\textcolor{##0d923f}{#1}");Z("\\goldA","\\textcolor{##ffd0a9}{#1}");Z("\\goldB","\\textcolor{##ffbb71}{#1}");Z("\\goldC","\\textcolor{##ff9c39}{#1}");Z("\\goldD","\\textcolor{##e07d10}{#1}");Z("\\goldE","\\textcolor{##a75a05}{#1}");Z("\\redA","\\textcolor{##fca9a9}{#1}");Z("\\redB","\\textcolor{##ff8482}{#1}");Z("\\redC","\\textcolor{##f9685d}{#1}");Z("\\redD","\\textcolor{##e84d39}{#1}");Z("\\redE","\\textcolor{##bc2612}{#1}");Z("\\maroonA","\\textcolor{##ffbde0}{#1}");Z("\\maroonB","\\textcolor{##ff92c6}{#1}");Z("\\maroonC","\\textcolor{##ed5fa6}{#1}");Z("\\maroonD","\\textcolor{##ca337c}{#1}");Z("\\maroonE","\\textcolor{##9e034e}{#1}");Z("\\purpleA","\\textcolor{##ddd7ff}{#1}");Z("\\purpleB","\\textcolor{##c6b9fc}{#1}");Z("\\purpleC","\\textcolor{##aa87ff}{#1}");Z("\\purpleD","\\textcolor{##7854ab}{#1}");Z("\\purpleE","\\textcolor{##543b78}{#1}");Z("\\mintA","\\textcolor{##f5f9e8}{#1}");Z("\\mintB","\\textcolor{##edf2df}{#1}");Z("\\mintC","\\textcolor{##e0e5cc}{#1}");Z("\\grayA","\\textcolor{##f6f7f7}{#1}");Z("\\grayB","\\textcolor{##f0f1f2}{#1}");Z("\\grayC","\\textcolor{##e3e5e6}{#1}");Z("\\grayD","\\textcolor{##d6d8da}{#1}");Z("\\grayE","\\textcolor{##babec2}{#1}");Z("\\grayF","\\textcolor{##888d93}{#1}");Z("\\grayG","\\textcolor{##626569}{#1}");Z("\\grayH","\\textcolor{##3b3e40}{#1}");Z("\\grayI","\\textcolor{##21242c}{#1}");Z("\\kaBlue","\\textcolor{##314453}{#1}");Z("\\kaGreen","\\textcolor{##71B307}{#1}");var yee={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class e8e{constructor(e,t,i){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new QEe(JEe,t.macros),this.mode=i,this.stack=[]}feed(e){this.lexer=new GU(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,i,r;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;t=this.popToken(),{tokens:r,end:i}=this.consumeArg(["]"])}else({tokens:r,start:t,end:i}=this.consumeArg());return this.pushToken(new wl("EOF",i.loc)),this.pushTokens(r),t.range(i,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var t=[],i=e&&e.length>0;i||this.consumeSpaces();var r=this.future(),s,o=0,a=0;do{if(s=this.popToken(),t.push(s),s.text==="{")++o;else if(s.text==="}"){if(--o,o===-1)throw new et("Extra }",s)}else if(s.text==="EOF")throw new et("Unexpected end of input in a macro argument, expected '"+(e&&i?e[a]:"}")+"'",s);if(e&&i)if((o===0||o===1&&e[a]==="{")&&s.text===e[a]){if(++a,a===e.length){t.splice(-a,a);break}}else a=0}while(o!==0||i);return r.text==="{"&&t[t.length-1].text==="}"&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:r,end:s}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new et("The length of delimiters doesn't match the number of args!");for(var i=t[0],r=0;r<i.length;r++){var s=this.popToken();if(i[r]!==s.text)throw new et("Use of the macro doesn't match its definition",s)}}for(var o=[],a=0;a<e;a++)o.push(this.consumeArg(t&&t[a+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new et("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var t=this.popToken(),i=t.text,r=t.noexpand?null:this._getExpansion(i);if(r==null||e&&r.unexpandable){if(e&&r==null&&i[0]==="\\"&&!this.isDefined(i))throw new et("Undefined control sequence: "+i);return this.pushToken(t),!1}this.countExpansion(1);var s=r.tokens,o=this.consumeArgs(r.numArgs,r.delimiters);if(r.numArgs){s=s.slice();for(var a=s.length-1;a>=0;--a){var l=s[a];if(l.text==="#"){if(a===0)throw new et("Incomplete placeholder at end of macro body",l);if(l=s[--a],l.text==="#")s.splice(a+1,1);else if(/^[1-9]$/.test(l.text))s.splice(a,2,...o[+l.text-1]);else throw new et("Not a valid argument number",l)}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new wl(e)]):void 0}expandTokens(e){var t=[],i=this.stack.length;for(this.pushTokens(e);this.stack.length>i;)if(this.expandOnce(!0)===!1){var r=this.stack.pop();r.treatAsRelax&&(r.noexpand=!1,r.treatAsRelax=!1),t.push(r)}return this.countExpansion(t.length),t}expandMacroAsText(e){var t=this.expandMacro(e);return t&&t.map(i=>i.text).join("")}_getExpansion(e){var t=this.macros.get(e);if(t==null)return t;if(e.length===1){var i=this.lexer.catcodes[e];if(i!=null&&i!==13)return}var r=typeof t=="function"?t(this):t;if(typeof r=="string"){var s=0;if(r.indexOf("#")!==-1)for(var o=r.replace(/##/g,"");o.indexOf("#"+(s+1))!==-1;)++s;for(var a=new GU(r,this.settings),l=[],c=a.lex();c.text!=="EOF";)l.push(c),c=a.lex();l.reverse();var h={tokens:l,numArgs:s};return h}return r}isDefined(e){return this.macros.has(e)||Qd.hasOwnProperty(e)||Gn.math.hasOwnProperty(e)||Gn.text.hasOwnProperty(e)||yee.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return t!=null?typeof t=="string"||typeof t=="function"||!t.unexpandable:Qd.hasOwnProperty(e)&&!Qd[e].primitive}}var ZU=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,mS=Object.freeze({"₊":"+","₋":"-","₌":"=","₍":"(","₎":")","₀":"0","₁":"1","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9","ₐ":"a","ₑ":"e","ₕ":"h","ᵢ":"i","ⱼ":"j","ₖ":"k","ₗ":"l","ₘ":"m","ₙ":"n","ₒ":"o","ₚ":"p","ᵣ":"r","ₛ":"s","ₜ":"t","ᵤ":"u","ᵥ":"v","ₓ":"x","ᵦ":"β","ᵧ":"γ","ᵨ":"ρ","ᵩ":"ϕ","ᵪ":"χ","⁺":"+","⁻":"-","⁼":"=","⁽":"(","⁾":")","⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","ᴬ":"A","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ⱽ":"V","ᵂ":"W","ᵃ":"a","ᵇ":"b","ᶜ":"c","ᵈ":"d","ᵉ":"e","ᶠ":"f","ᵍ":"g",ʰ:"h","ⁱ":"i",ʲ:"j","ᵏ":"k",ˡ:"l","ᵐ":"m",ⁿ:"n","ᵒ":"o","ᵖ":"p",ʳ:"r",ˢ:"s","ᵗ":"t","ᵘ":"u","ᵛ":"v",ʷ:"w",ˣ:"x",ʸ:"y","ᶻ":"z","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"ϕ","ᵡ":"χ","ᶿ":"θ"}),oD={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},XU={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"};class n3{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new e8e(e,t,this.mode),this.settings=t,this.leftrightDepth=0}expect(e,t){if(t===void 0&&(t=!0),this.fetch().text!==e)throw new et("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new wl("}")),this.gullet.pushTokens(e);var i=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,i}parseExpression(e,t){for(var i=[];;){this.mode==="math"&&this.consumeSpaces();var r=this.fetch();if(n3.endOfExpression.indexOf(r.text)!==-1||t&&r.text===t||e&&Qd[r.text]&&Qd[r.text].infix)break;var s=this.parseAtom(t);if(s){if(s.type==="internal")continue}else break;i.push(s)}return this.mode==="text"&&this.formLigatures(i),this.handleInfixNodes(i)}handleInfixNodes(e){for(var t=-1,i,r=0;r<e.length;r++)if(e[r].type==="infix"){if(t!==-1)throw new et("only one infix operator per group",e[r].token);t=r,i=e[r].replaceWith}if(t!==-1&&i){var s,o,a=e.slice(0,t),l=e.slice(t+1);a.length===1&&a[0].type==="ordgroup"?s=a[0]:s={type:"ordgroup",mode:this.mode,body:a},l.length===1&&l[0].type==="ordgroup"?o=l[0]:o={type:"ordgroup",mode:this.mode,body:l};var c;return i==="\\\\abovefrac"?c=this.callFunction(i,[s,e[t],o],[]):c=this.callFunction(i,[s,o],[]),[c]}else return e}handleSupSubscript(e){var t=this.fetch(),i=t.text;this.consume(),this.consumeSpaces();var r;do{var s;r=this.parseGroup(e)}while(((s=r)==null?void 0:s.type)==="internal");if(!r)throw new et("Expected group after '"+i+"'",t);return r}formatUnsupportedCmd(e){for(var t=[],i=0;i<e.length;i++)t.push({type:"textord",mode:"text",text:e[i]});var r={type:"text",mode:this.mode,body:t},s={type:"color",mode:this.mode,color:this.settings.errorColor,body:[r]};return s}parseAtom(e){var t=this.parseGroup("atom",e);if(t?.type==="internal"||this.mode==="text")return t;for(var i,r;;){this.consumeSpaces();var s=this.fetch();if(s.text==="\\limits"||s.text==="\\nolimits"){if(t&&t.type==="op"){var o=s.text==="\\limits";t.limits=o,t.alwaysHandleSupSub=!0}else if(t&&t.type==="operatorname")t.alwaysHandleSupSub&&(t.limits=s.text==="\\limits");else throw new et("Limit controls must follow a math operator",s);this.consume()}else if(s.text==="^"){if(i)throw new et("Double superscript",s);i=this.handleSupSubscript("superscript")}else if(s.text==="_"){if(r)throw new et("Double subscript",s);r=this.handleSupSubscript("subscript")}else if(s.text==="'"){if(i)throw new et("Double superscript",s);var a={type:"textord",mode:this.mode,text:"\\prime"},l=[a];for(this.consume();this.fetch().text==="'";)l.push(a),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),i={type:"ordgroup",mode:this.mode,body:l}}else if(mS[s.text]){var c=ZU.test(s.text),h=[];for(h.push(new wl(mS[s.text])),this.consume();;){var u=this.fetch().text;if(!mS[u]||ZU.test(u)!==c)break;h.unshift(new wl(mS[u])),this.consume()}var d=this.subparse(h);c?r={type:"ordgroup",mode:"math",body:d}:i={type:"ordgroup",mode:"math",body:d}}else break}return i||r?{type:"supsub",mode:this.mode,base:t,sup:i,sub:r}:t}parseFunction(e,t){var i=this.fetch(),r=i.text,s=Qd[r];if(!s)return null;if(this.consume(),t&&t!=="atom"&&!s.allowedInArgument)throw new et("Got function '"+r+"' with no arguments"+(t?" as "+t:""),i);if(this.mode==="text"&&!s.allowedInText)throw new et("Can't use function '"+r+"' in text mode",i);if(this.mode==="math"&&s.allowedInMath===!1)throw new et("Can't use function '"+r+"' in math mode",i);var{args:o,optArgs:a}=this.parseArguments(r,s);return this.callFunction(r,o,a,i,e)}callFunction(e,t,i,r,s){var o={funcName:e,parser:this,token:r,breakOnTokenText:s},a=Qd[e];if(a&&a.handler)return a.handler(o,t,i);throw new et("No function handler for "+e)}parseArguments(e,t){var i=t.numArgs+t.numOptionalArgs;if(i===0)return{args:[],optArgs:[]};for(var r=[],s=[],o=0;o<i;o++){var a=t.argTypes&&t.argTypes[o],l=o<t.numOptionalArgs;(t.primitive&&a==null||t.type==="sqrt"&&o===1&&s[0]==null)&&(a="primitive");var c=this.parseGroupOfType("argument to '"+e+"'",a,l);if(l)s.push(c);else if(c!=null)r.push(c);else throw new et("Null argument, please report this as a bug")}return{args:r,optArgs:s}}parseGroupOfType(e,t,i){switch(t){case"color":return this.parseColorGroup(i);case"size":return this.parseSizeGroup(i);case"url":return this.parseUrlGroup(i);case"math":case"text":return this.parseArgumentGroup(i,t);case"hbox":{var r=this.parseArgumentGroup(i,"text");return r!=null?{type:"styling",mode:r.mode,body:[r],style:"text"}:null}case"raw":{var s=this.parseStringGroup("raw",i);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(i)throw new et("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new et("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(i);default:throw new et("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,t){var i=this.gullet.scanArgument(t);if(i==null)return null;for(var r="",s;(s=this.fetch()).text!=="EOF";)r+=s.text,this.consume();return this.consume(),i.text=r,i}parseRegexGroup(e,t){for(var i=this.fetch(),r=i,s="",o;(o=this.fetch()).text!=="EOF"&&e.test(s+o.text);)r=o,s+=r.text,this.consume();if(s==="")throw new et("Invalid "+t+": '"+i.text+"'",i);return i.range(r,s)}parseColorGroup(e){var t=this.parseStringGroup("color",e);if(t==null)return null;var i=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!i)throw new et("Invalid color: '"+t.text+"'",t);var r=i[0];return/^[0-9a-f]{6}$/i.test(r)&&(r="#"+r),{type:"color-token",mode:this.mode,color:r}}parseSizeGroup(e){var t,i=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?t=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):t=this.parseStringGroup("size",e),!t)return null;!e&&t.text.length===0&&(t.text="0pt",i=!0);var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!r)throw new et("Invalid size: '"+t.text+"'",t);var s={number:+(r[1]+r[2]),unit:r[3]};if(!NJ(s))throw new et("Invalid unit: '"+s.unit+"'",t);return{type:"size",mode:this.mode,value:s,isBlank:i}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),t==null)return null;var i=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:i}}parseArgumentGroup(e,t){var i=this.gullet.scanArgument(e);if(i==null)return null;var r=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:i.loc,body:s};return t&&this.switchMode(r),o}parseGroup(e,t){var i=this.fetch(),r=i.text,s;if(r==="{"||r==="\\begingroup"){this.consume();var o=r==="{"?"}":"\\endgroup";this.gullet.beginGroup();var a=this.parseExpression(!1,o),l=this.fetch();this.expect(o),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:za.range(i,l),body:a,semisimple:r==="\\begingroup"||void 0}}else if(s=this.parseFunction(t,e)||this.parseSymbol(),s==null&&r[0]==="\\"&&!yee.hasOwnProperty(r)){if(this.settings.throwOnError)throw new et("Undefined control sequence: "+r,i);s=this.formatUnsupportedCmd(r),this.consume()}return s}formLigatures(e){for(var t=e.length-1,i=0;i<t;++i){var r=e[i],s=r.text;s==="-"&&e[i+1].text==="-"&&(i+1<t&&e[i+2].text==="-"?(e.splice(i,3,{type:"textord",mode:"text",loc:za.range(r,e[i+2]),text:"---"}),t-=2):(e.splice(i,2,{type:"textord",mode:"text",loc:za.range(r,e[i+1]),text:"--"}),t-=1)),(s==="'"||s==="`")&&e[i+1].text===s&&(e.splice(i,2,{type:"textord",mode:"text",loc:za.range(r,e[i+1]),text:s+s}),t-=1)}}parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var i=t.slice(5),r=i.charAt(0)==="*";if(r&&(i=i.slice(1)),i.length<2||i.charAt(0)!==i.slice(-1))throw new et(`\\verb assertion failed --
                    please report what input caused this bug`);return i=i.slice(1,-1),{type:"verb",mode:"text",body:i,star:r}}XU.hasOwnProperty(t[0])&&!Gn[this.mode][t[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=XU[t[0]]+t.slice(1));var s=ZEe.exec(t);s&&(t=t.substring(0,s.index),t==="i"?t="ı":t==="j"&&(t="ȷ"));var o;if(Gn[this.mode][t]){this.settings.strict&&this.mode==="math"&&yN.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var a=Gn[this.mode][t].group,l=za.range(e),c;if(VDe.hasOwnProperty(a)){var h=a;c={type:"atom",mode:this.mode,family:h,loc:l,text:t}}else c={type:a,mode:this.mode,loc:l,text:t};o=c}else if(t.charCodeAt(0)>=128)this.settings.strict&&(EJ(t.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'"'+(" ("+t.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:za.range(e),text:t};else return null;if(this.consume(),s)for(var u=0;u<s[0].length;u++){var d=s[0][u];if(!oD[d])throw new et("Unknown accent ' "+d+"'",e);var g=oD[d][this.mode]||oD[d].text;if(!g)throw new et("Accent "+d+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:za.range(e),label:g,isStretchy:!1,isShifty:!0,base:o}}return o}}n3.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var NP=function(e,t){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var i=new n3(e,t);delete i.gullet.macros.current["\\df@tag"];var r=i.parse();if(delete i.gullet.macros.current["\\current@color"],delete i.gullet.macros.current["\\color"],i.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new et("\\tag works only in display equations");r=[{type:"tag",mode:"text",body:r,tag:i.subparse([new wl("\\df@tag")])}]}return r},MP=function(e,t,i){t.textContent="";var r=r3(e,i).toNode();t.appendChild(r)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),MP=function(){throw new et("KaTeX doesn't work in quirks mode.")});var Cee=function(e,t){var i=r3(e,t).toMarkup();return i},See=function(e,t){var i=new fP(t);return NP(e,i)},xee=function(e,t,i){if(i.throwOnError||!(e instanceof et))throw e;var r=ke.makeSpan(["katex-error"],[new Tl(t)]);return r.setAttribute("title",e.toString()),r.setAttribute("style","color:"+i.errorColor),r},r3=function(e,t){var i=new fP(t);try{var r=NP(e,i);return uEe(r,e,i)}catch(s){return xee(s,e,i)}},kee=function(e,t){var i=new fP(t);try{var r=NP(e,i);return dEe(r,e,i)}catch(s){return xee(s,e,i)}},Lee="0.16.22",Tee={Span:Gy,Anchor:pP,SymbolNode:Tl,SvgNode:Fu,PathNode:yf,LineNode:wN},AP={version:Lee,render:MP,renderToString:Cee,ParseError:et,SETTINGS_SCHEMA:zv,__parse:See,__renderToDomTree:r3,__renderToHTMLTree:kee,__setFontMetrics:IJ,__defineSymbol:I,__defineFunction:dt,__defineMacro:Z,__domTree:Tee};const t8e=Object.freeze(Object.defineProperty({__proto__:null,ParseError:et,SETTINGS_SCHEMA:zv,__defineFunction:dt,__defineMacro:Z,__defineSymbol:I,__domTree:Tee,__parse:See,__renderToDomTree:r3,__renderToHTMLTree:kee,__setFontMetrics:IJ,default:AP,get render(){return MP},renderToString:Cee,version:Lee},Symbol.toStringTag,{value:"Module"})),i8e="_inline_1yelo_1",n8e="_display_1yelo_5",r8e="_wrapper_1yelo_9",TN={inline:i8e,display:n8e,wrapper:r8e};function Ft({children:n}){const e=Pe.useRef(null);return Pe.useEffect(()=>{AP.render(n,e.current,{throwOnError:!1})},[e]),S.jsx("span",{className:TN.inline,ref:e,children:n})}function rc({children:n}){const e=Pe.useRef(null);return Pe.useEffect(()=>{AP.render(n,e.current,{displayMode:!0,throwOnError:!1})},[e]),S.jsx("div",{className:TN.wrapper,children:S.jsx("div",{ref:e,className:TN.display,children:n})})}function QU(n){const e={code:"code",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...n.components};return S.jsxs(S.Fragment,{children:[S.jsx(e.h2,{children:"Sprachen"}),`
`,S.jsxs(e.p,{children:["In den vorherigen Kapiteln, haben wir gelernt dass der Computer alle Daten in ",S.jsx(e.code,{children:"Bits"})," abspeichert. Sobald wir diese ",S.jsx(e.code,{children:"Bits"})," zusammen gruppieren und zu einem ",S.jsx(e.code,{children:"Byte"})," fassen, können wir bereits sehr viele Informationen damit repräsentieren. Das haben wir beim ",S.jsx(e.code,{children:"ASCII"}),"-Code gesehen, aber auch bei den Bildern, bei denen wir jeweils ein Pixel mit 3 Farbkanälen dargestellt haben. Wir haben also die Daten die im Computer gespeichert sind, auf eine ganz bestimmte Art und Weise ",S.jsx(e.strong,{children:"interpretiert"}),". Diese ",S.jsx(e.strong,{children:"Interpretation"})," können wir auf dem Computer als ",S.jsx(e.strong,{children:"Sprache"})," bezeichnen."]}),`
`,S.jsxs(e.p,{children:["Diese ",S.jsx(e.strong,{children:"Sprachen"})," können unterschiedlich kompliziert oder auch sehr einfach sein. Wichtig dabei ist, dass diese ",S.jsx(e.strong,{children:"Sprachen"})," immer irgendwo festgelegt sind. Der Computer verwendet diese ",S.jsx(e.strong,{children:"Sprachen"})," dann um einen Speicherblock zu ",S.jsx(e.strong,{children:"interpretieren"})," und damit etwas vernünftiges anzufangen. Ganz wichtig dabei ist, der Computer kann nicht wissen was wir meinen, und unpräzise Aussagen von uns korrigieren. Der Computer kann nur ganz genau einer ",S.jsx(e.strong,{children:"Sprache"})," folgen, wie zum Beispiel dem ",S.jsx(e.code,{children:"ASCII"}),"-Code."]}),`
`,S.jsxs(jo,{title:"ASCII vs Bild",children:[S.jsxs(e.p,{children:["Der Computer kann jeden Speicherblock mit jeder beliebigen Sprache interpretieren. Manchmal geht es sogar auf, das der gleiche Speicherblock mit verschiedenen Sprachen Sinn ergibt. Meist ist dies aber nicht der Fall. Wir schauen und als Beispiel einen Speicherblock im ",S.jsx(e.code,{children:"ASCII"}),"-Code an. Dann interpretieren wir den gleichen Speicherblock als Bild."]}),S.jsx(oDe,{}),S.jsxs(e.p,{children:["An dem Beispiel können Sie ganz gut erkennen, das der Computer einfach nur versucht einen Speicherblock mit der angegebenen Sprache zu ",S.jsx(e.strong,{children:"interpretieren"}),". Manchmal geht das recht gut auf, aber schon in dem Beispiel hier, funktioniert es oftmals nicht, da wir nicht immer genügend Zeichen haben, um alle Pixel zu füllen."]})]}),`
`,S.jsx(e.h2,{children:"Verschiedene Sprachen"}),`
`,S.jsxs(e.p,{children:["Es gibt unzählige ",S.jsx(e.strong,{children:"Sprachen"})," die wir auf dem Computer verwenden können. Wir können auch unsere ganz eigene Sprache erfinden, wenn wir das möchten. Eine eigene Sprache macht allerdings nicht so viel Sinn, denn andere Personen oder Programme werden diese nicht verstehen, ausser diese Sprache wird in das neue Programm implementiert. Das wäre aber ein sehr grosser Aufwand, deshalb hat man sich auf einige Standarts geeinigt, die dann als Sprachen überall verwendet werden. Ein besserer Begriff für ",S.jsx(e.strong,{children:"Sprachen"})," wäre in unserem Fall: ",S.jsx(e.strong,{children:"Dateiformat"}),". Es wirkt ein wenig merkwürdig wenn wir bei Bildern von ",S.jsx(e.strong,{children:"Sprache"})," reden, das ganze soll aber zeigen wie wichtig die ",S.jsx(e.strong,{children:"Sprachen"})," in der Informatik überhaupt sind. Hier finden Sie eine kurze Liste von ",S.jsx(e.strong,{children:"Sprachen"})," von denen wir uns einige anschauen werden."]}),`
`,S.jsxs(e.ul,{children:[`
`,S.jsxs(e.li,{children:[S.jsx(e.code,{children:"ASCII"})," (Text)"]}),`
`,S.jsxs(e.li,{children:[S.jsx(e.code,{children:"PPM"})," (Portable Pixmap Format)"]}),`
`,S.jsxs(e.li,{children:[S.jsx(e.code,{children:"Markdown"})," (wird in Obsidian verwendet)"]}),`
`,S.jsxs(e.li,{children:[S.jsx(e.code,{children:"XML"})," (",S.jsx(e.code,{children:"HTML"})," und ",S.jsx(e.code,{children:"SVG"}),")"]}),`
`,S.jsxs(e.li,{children:[S.jsx(e.code,{children:"CSS"})," (wird verwendet um ",S.jsx(e.code,{children:"HTML"})," zu gestalten)"]}),`
`,S.jsxs(e.li,{children:[S.jsx(e.code,{children:"Javascript"})," (Programmiersprache für das Web)"]}),`
`,S.jsxs(e.li,{children:[S.jsx(e.code,{children:"Latex"})," (Beschreibungssprache für PDF-Dokumente)"]}),`
`,S.jsxs(e.li,{children:[S.jsx(e.code,{children:"JSON"})," (Objektbeschreibungssprache)"]}),`
`]}),`
`,S.jsx(e.h2,{children:"Syntax"}),`
`,S.jsxs(e.p,{children:["Für den Computer ist es enorm wichtig dass wir eine korrekte ",S.jsx(e.strong,{children:"Syntax"})," einhalten. Ohne eine ",S.jsx(e.strong,{children:"Syntax"})," kann der Computer die ",S.jsx(e.strong,{children:"Sprache"})," nicht lesen, denn wie wir weiter oben bereits beschrieben haben, kann der Computer nicht für uns mitdenken. Jede ",S.jsx(e.strong,{children:"Sprache"})," hat eine ",S.jsx(e.strong,{children:"Syntax"})," und diese muss exakt eingehalten werden, ansonsten ist der aktuelle Speicherblock, nicht von der gegebenen ",S.jsx(e.strong,{children:"Sprache"}),"."]}),`
`,S.jsxs(e.p,{children:["Die ",S.jsx(e.strong,{children:"Syntax"})," beschreibt die Form der ",S.jsx(e.strong,{children:"Sprache"})," sowie die Regeln die darauf angewendet werden. Sie kennen ",S.jsx(e.strong,{children:"Syntax"})," bereits aus anderen Bereichen, zum Beispiel in den natürlichen Sprachen, verwenden wir einen ",S.jsx(e.code,{children:"."})," um einen Satz zu beenden. In der Mathematik finden Sie sehr viel ",S.jsx(e.strong,{children:"Syntax"}),", da jedes Zeichen in der Mathematik eine spezielle Bedeutung hat. Zum Beispiel bei Funktionen wird häufig die folgende Syntax verwendet: ",S.jsx(Ft,{children:String.raw`f(x)=x + 2`}),". Dieser Ausdruck hat sehr viel Bedeutung in sich, zum Beispiel wird hier der Name der Funktion festgelegt - das was vor den Klammern steht. Weiterhin sagen wir, was das Argument ist - was in den Klammern steht. Auf der rechten Seite sagen wir welche Regel angewendet wird, um den Wert der Funktion für ein bestimmtes ",S.jsx(Ft,{children:String.raw`x`})," zu bestimmen. Für Sie wirkt diese Syntax wahrscheinlich sehr mühsam und unnötig, wir müssen uns aber exakt an diese Syntax halten, damit wir auch genau das richtige meinen. Bei natürlicher Sprache und aber auch in der Mathematik, wird der Text immer von einem Menschen gelesen und interpretiert. Ein Mensch kann herausfinden wenn ein Fehler passiert ist, und diesen dann korrigieren. Das braucht aber immer zusätzlichen Aufwand, und gerade in der Mathematik, kann es später auch dazu führen, dass etwas anders interpretiert wird, wie Sie es gemeint haben. Deshalb ist es ganz wichtig, sich so genau wie möglich an die Syntax zu halten."]}),`
`,S.jsx(e.p,{children:"Beim Computer ist es aber noch wichtiger. Denn der Computer kann ihre Fehler nicht interpretieren und korrigieren. Nehmen wir dafür wieder ein einfaches Beispiel aus der Mathematik. Hier ist es üblich dass Sie vergessen die Klammern richtig zu schliessen. Schauen Sie sich mal das folgende Beispiel an:"}),`
`,S.jsx(rc,{children:String.raw`(15 - 4 \cdot 3 = 33`}),`
`,S.jsxs(e.p,{children:["Hier ist es aus mindestens 2 Grunden leicht ersichtlich, dass Sie die Klammer nach der 4 schliessen sollten. Zumindest ist es für uns einfach ersichtlich. Für den Computer ist dies aber nicht so klar. Der Computer weiss dank der ",S.jsx(e.strong,{children:"Syntax"})," nur, dass es vor dem ",S.jsx(e.code,{children:"="}),"-Zeichen, noch sicher eine schliessende Klammer braucht. Aber von der ",S.jsx(e.strong,{children:"Syntax"})," her, wären diese beiden Möglichkeiten korrekt: ",S.jsx(Ft,{children:String.raw`(15 - 4 \cdot 3)`})," und ",S.jsx(Ft,{children:String.raw`(15 - 4) \cdot 3`}),". Aber nur das zweite ist korrekt. Für uns als Menschen, macht es Sinn die Klammer dort zu schliessen, denn sonst hätten wir die Klammer gar nicht schreiben müssen. Der Computer kann aber nicht so denken. Wir könnten nun dem Computer so eine Korrekturregel beibringen, dann ist die Sprache aber nicht mehr komplett eindeutig, das möchte man vermeiden, denn so treten Fehler auf, die man nie wieder findet. Der Computer soll sich immer genau so verhalten, wie das ursprünglich vorgesehen ist. Bei modernen Sprachen, gibt der Computer aber einen Hinweis auf diesen Fehler, damit man diesen schnell korrigieren kann. Dafür muss man allerdings die Sprache und die Fehlermeldungen verstehen."]}),`
`,S.jsx(jo,{title:"Syntax und Grammatik",children:S.jsxs(e.p,{children:["Bei ",S.jsx(e.strong,{children:"Computersprachen"})," beschreibt die Grammatik wie die Syntax für eine ",S.jsx(e.strong,{children:"Sprache"})," funktioniert. Bei den natürlichen Sprachen beschreibt die Grammatik wie eine Sprache aufgebaut ist und berücksichtigt die Entwicklung der Sprache, es ist keine Vorschrift wie die Sprache genau verwendet wird. Daher gibt es auch so viele Ausnahmen. Bei ",S.jsx(e.strong,{children:"Computersprachen"})," ist dies ganz anders. Da kommt die Grammatik zuerst und diese muss exakt eingehalten werden, damit die Syntax der Sprache korrekt ist. In den weiteren Kapiteln, schauen wir uns einige Sprachen und deren Grammatik genauer an."]})})]})}function s8e(n={}){const{wrapper:e}=n.components||{};return e?S.jsx(e,{...n,children:S.jsx(QU,{...n})}):QU(n)}function JU({children:n,classes:e=""}){return S.jsx("div",{className:`full-width content-grid highlight ${e}`,children:n})}var eq={name:"mermaid",version:"11.12.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},rx={exports:{}},o8e=rx.exports,tq;function a8e(){return tq||(tq=1,function(n,e){(function(t,i){n.exports=i()})(o8e,function(){var t=1e3,i=6e4,r=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",h="week",u="month",d="quarter",g="year",p="date",b="Invalid Date",_=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,w=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(z){var Q=["th","st","nd","rd"],te=z%100;return"["+z+(Q[(te-20)%10]||Q[te]||Q[0])+"]"}},k=function(z,Q,te){var se=String(z);return!se||se.length>=Q?z:""+Array(Q+1-se.length).join(te)+z},L={s:k,z:function(z){var Q=-z.utcOffset(),te=Math.abs(Q),se=Math.floor(te/60),Y=te%60;return(Q<=0?"+":"-")+k(se,2,"0")+":"+k(Y,2,"0")},m:function z(Q,te){if(Q.date()<te.date())return-z(te,Q);var se=12*(te.year()-Q.year())+(te.month()-Q.month()),Y=Q.clone().add(se,u),ae=te-Y<0,fe=Q.clone().add(se+(ae?-1:1),u);return+(-(se+(te-Y)/(ae?Y-fe:fe-Y))||0)},a:function(z){return z<0?Math.ceil(z)||0:Math.floor(z)},p:function(z){return{M:u,y:g,w:h,d:c,D:p,h:l,m:a,s:o,ms:s,Q:d}[z]||String(z||"").toLowerCase().replace(/s$/,"")},u:function(z){return z===void 0}},T="en",N={};N[T]=y;var D="$isDayjsObject",O=function(z){return z instanceof q||!(!z||!z[D])},B=function z(Q,te,se){var Y;if(!Q)return T;if(typeof Q=="string"){var ae=Q.toLowerCase();N[ae]&&(Y=ae),te&&(N[ae]=te,Y=ae);var fe=Q.split("-");if(!Y&&fe.length>1)return z(fe[0])}else{var J=Q.name;N[J]=Q,Y=J}return!se&&Y&&(T=Y),Y||!se&&T},G=function(z,Q){if(O(z))return z.clone();var te=typeof Q=="object"?Q:{};return te.date=z,te.args=arguments,new q(te)},H=L;H.l=B,H.i=O,H.w=function(z,Q){return G(z,{locale:Q.$L,utc:Q.$u,x:Q.$x,$offset:Q.$offset})};var q=function(){function z(te){this.$L=B(te.locale,null,!0),this.parse(te),this.$x=this.$x||te.x||{},this[D]=!0}var Q=z.prototype;return Q.parse=function(te){this.$d=function(se){var Y=se.date,ae=se.utc;if(Y===null)return new Date(NaN);if(H.u(Y))return new Date;if(Y instanceof Date)return new Date(Y);if(typeof Y=="string"&&!/Z$/i.test(Y)){var fe=Y.match(_);if(fe){var J=fe[2]-1||0,ge=(fe[7]||"0").substring(0,3);return ae?new Date(Date.UTC(fe[1],J,fe[3]||1,fe[4]||0,fe[5]||0,fe[6]||0,ge)):new Date(fe[1],J,fe[3]||1,fe[4]||0,fe[5]||0,fe[6]||0,ge)}}return new Date(Y)}(te),this.init()},Q.init=function(){var te=this.$d;this.$y=te.getFullYear(),this.$M=te.getMonth(),this.$D=te.getDate(),this.$W=te.getDay(),this.$H=te.getHours(),this.$m=te.getMinutes(),this.$s=te.getSeconds(),this.$ms=te.getMilliseconds()},Q.$utils=function(){return H},Q.isValid=function(){return this.$d.toString()!==b},Q.isSame=function(te,se){var Y=G(te);return this.startOf(se)<=Y&&Y<=this.endOf(se)},Q.isAfter=function(te,se){return G(te)<this.startOf(se)},Q.isBefore=function(te,se){return this.endOf(se)<G(te)},Q.$g=function(te,se,Y){return H.u(te)?this[se]:this.set(Y,te)},Q.unix=function(){return Math.floor(this.valueOf()/1e3)},Q.valueOf=function(){return this.$d.getTime()},Q.startOf=function(te,se){var Y=this,ae=!!H.u(se)||se,fe=H.p(te),J=function(Ot,$t){var yn=H.w(Y.$u?Date.UTC(Y.$y,$t,Ot):new Date(Y.$y,$t,Ot),Y);return ae?yn:yn.endOf(c)},ge=function(Ot,$t){return H.w(Y.toDate()[Ot].apply(Y.toDate("s"),(ae?[0,0,0,0]:[23,59,59,999]).slice($t)),Y)},Le=this.$W,We=this.$M,Ie=this.$D,Ze="set"+(this.$u?"UTC":"");switch(fe){case g:return ae?J(1,0):J(31,11);case u:return ae?J(1,We):J(0,We+1);case h:var ct=this.$locale().weekStart||0,ot=(Le<ct?Le+7:Le)-ct;return J(ae?Ie-ot:Ie+(6-ot),We);case c:case p:return ge(Ze+"Hours",0);case l:return ge(Ze+"Minutes",1);case a:return ge(Ze+"Seconds",2);case o:return ge(Ze+"Milliseconds",3);default:return this.clone()}},Q.endOf=function(te){return this.startOf(te,!1)},Q.$set=function(te,se){var Y,ae=H.p(te),fe="set"+(this.$u?"UTC":""),J=(Y={},Y[c]=fe+"Date",Y[p]=fe+"Date",Y[u]=fe+"Month",Y[g]=fe+"FullYear",Y[l]=fe+"Hours",Y[a]=fe+"Minutes",Y[o]=fe+"Seconds",Y[s]=fe+"Milliseconds",Y)[ae],ge=ae===c?this.$D+(se-this.$W):se;if(ae===u||ae===g){var Le=this.clone().set(p,1);Le.$d[J](ge),Le.init(),this.$d=Le.set(p,Math.min(this.$D,Le.daysInMonth())).$d}else J&&this.$d[J](ge);return this.init(),this},Q.set=function(te,se){return this.clone().$set(te,se)},Q.get=function(te){return this[H.p(te)]()},Q.add=function(te,se){var Y,ae=this;te=Number(te);var fe=H.p(se),J=function(We){var Ie=G(ae);return H.w(Ie.date(Ie.date()+Math.round(We*te)),ae)};if(fe===u)return this.set(u,this.$M+te);if(fe===g)return this.set(g,this.$y+te);if(fe===c)return J(1);if(fe===h)return J(7);var ge=(Y={},Y[a]=i,Y[l]=r,Y[o]=t,Y)[fe]||1,Le=this.$d.getTime()+te*ge;return H.w(Le,this)},Q.subtract=function(te,se){return this.add(-1*te,se)},Q.format=function(te){var se=this,Y=this.$locale();if(!this.isValid())return Y.invalidDate||b;var ae=te||"YYYY-MM-DDTHH:mm:ssZ",fe=H.z(this),J=this.$H,ge=this.$m,Le=this.$M,We=Y.weekdays,Ie=Y.months,Ze=Y.meridiem,ct=function($t,yn,vi,nn){return $t&&($t[yn]||$t(se,ae))||vi[yn].slice(0,nn)},ot=function($t){return H.s(J%12||12,$t,"0")},Ot=Ze||function($t,yn,vi){var nn=$t<12?"AM":"PM";return vi?nn.toLowerCase():nn};return ae.replace(w,function($t,yn){return yn||function(vi){switch(vi){case"YY":return String(se.$y).slice(-2);case"YYYY":return H.s(se.$y,4,"0");case"M":return Le+1;case"MM":return H.s(Le+1,2,"0");case"MMM":return ct(Y.monthsShort,Le,Ie,3);case"MMMM":return ct(Ie,Le);case"D":return se.$D;case"DD":return H.s(se.$D,2,"0");case"d":return String(se.$W);case"dd":return ct(Y.weekdaysMin,se.$W,We,2);case"ddd":return ct(Y.weekdaysShort,se.$W,We,3);case"dddd":return We[se.$W];case"H":return String(J);case"HH":return H.s(J,2,"0");case"h":return ot(1);case"hh":return ot(2);case"a":return Ot(J,ge,!0);case"A":return Ot(J,ge,!1);case"m":return String(ge);case"mm":return H.s(ge,2,"0");case"s":return String(se.$s);case"ss":return H.s(se.$s,2,"0");case"SSS":return H.s(se.$ms,3,"0");case"Z":return fe}return null}($t)||fe.replace(":","")})},Q.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Q.diff=function(te,se,Y){var ae,fe=this,J=H.p(se),ge=G(te),Le=(ge.utcOffset()-this.utcOffset())*i,We=this-ge,Ie=function(){return H.m(fe,ge)};switch(J){case g:ae=Ie()/12;break;case u:ae=Ie();break;case d:ae=Ie()/3;break;case h:ae=(We-Le)/6048e5;break;case c:ae=(We-Le)/864e5;break;case l:ae=We/r;break;case a:ae=We/i;break;case o:ae=We/t;break;default:ae=We}return Y?ae:H.a(ae)},Q.daysInMonth=function(){return this.endOf(u).$D},Q.$locale=function(){return N[this.$L]},Q.locale=function(te,se){if(!te)return this.$L;var Y=this.clone(),ae=B(te,se,!0);return ae&&(Y.$L=ae),Y},Q.clone=function(){return H.w(this.$d,this)},Q.toDate=function(){return new Date(this.valueOf())},Q.toJSON=function(){return this.isValid()?this.toISOString():null},Q.toISOString=function(){return this.$d.toISOString()},Q.toString=function(){return this.$d.toUTCString()},z}(),X=q.prototype;return G.prototype=X,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",u],["$y",g],["$D",p]].forEach(function(z){X[z[1]]=function(Q){return this.$g(Q,z[0],z[1])}}),G.extend=function(z,Q){return z.$i||(z(Q,q,G),z.$i=!0),G},G.locale=B,G.isDayjs=O,G.unix=function(z){return G(1e3*z)},G.en=N[T],G.Ls=N,G.p={},G})}(rx)),rx.exports}var l8e=a8e();const c8e=$L(l8e);var Dee=Object.defineProperty,R=(n,e)=>Dee(n,"name",{value:e,configurable:!0}),h8e=(n,e)=>{for(var t in e)Dee(n,t,{get:e[t],enumerable:!0})},Fh={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},ze={trace:R((...n)=>{},"trace"),debug:R((...n)=>{},"debug"),info:R((...n)=>{},"info"),warn:R((...n)=>{},"warn"),error:R((...n)=>{},"error"),fatal:R((...n)=>{},"fatal")},RP=R(function(n="fatal"){let e=Fh.fatal;typeof n=="string"?n.toLowerCase()in Fh&&(e=Fh[n]):typeof n=="number"&&(e=n),ze.trace=()=>{},ze.debug=()=>{},ze.info=()=>{},ze.warn=()=>{},ze.error=()=>{},ze.fatal=()=>{},e<=Fh.fatal&&(ze.fatal=console.error?console.error.bind(console,al("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",al("FATAL"))),e<=Fh.error&&(ze.error=console.error?console.error.bind(console,al("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",al("ERROR"))),e<=Fh.warn&&(ze.warn=console.warn?console.warn.bind(console,al("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",al("WARN"))),e<=Fh.info&&(ze.info=console.info?console.info.bind(console,al("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",al("INFO"))),e<=Fh.debug&&(ze.debug=console.debug?console.debug.bind(console,al("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",al("DEBUG"))),e<=Fh.trace&&(ze.trace=console.debug?console.debug.bind(console,al("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",al("TRACE")))},"setLogLevel"),al=R(n=>`%c${c8e().format("ss.SSS")} : ${n} : `,"format");const sx={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:n=>n>=255?255:n<0?0:n,g:n=>n>=255?255:n<0?0:n,b:n=>n>=255?255:n<0?0:n,h:n=>n%360,s:n=>n>=100?100:n<0?0:n,l:n=>n>=100?100:n<0?0:n,a:n=>n>=1?1:n<0?0:n},toLinear:n=>{const e=n/255;return n>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92},hue2rgb:(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n),hsl2rgb:({h:n,s:e,l:t},i)=>{if(!e)return t*2.55;n/=360,e/=100,t/=100;const r=t<.5?t*(1+e):t+e-t*e,s=2*t-r;switch(i){case"r":return sx.hue2rgb(s,r,n+1/3)*255;case"g":return sx.hue2rgb(s,r,n)*255;case"b":return sx.hue2rgb(s,r,n-1/3)*255}},rgb2hsl:({r:n,g:e,b:t},i)=>{n/=255,e/=255,t/=255;const r=Math.max(n,e,t),s=Math.min(n,e,t),o=(r+s)/2;if(i==="l")return o*100;if(r===s)return 0;const a=r-s,l=o>.5?a/(2-r-s):a/(r+s);if(i==="s")return l*100;switch(r){case n:return((e-t)/a+(e<t?6:0))*60;case e:return((t-n)/a+2)*60;case t:return((n-e)/a+4)*60;default:return-1}}},u8e={clamp:(n,e,t)=>e>t?Math.min(e,Math.max(t,n)):Math.min(t,Math.max(e,n)),round:n=>Math.round(n*1e10)/1e10},d8e={dec2hex:n=>{const e=Math.round(n).toString(16);return e.length>1?e:`0${e}`}},ci={channel:sx,lang:u8e,unit:d8e},Dd={};for(let n=0;n<=255;n++)Dd[n]=ci.unit.dec2hex(n);const ao={ALL:0,RGB:1,HSL:2};class f8e{constructor(){this.type=ao.ALL}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=ao.ALL}is(e){return this.type===e}}class g8e{constructor(e,t){this.color=t,this.changed=!1,this.data=e,this.type=new f8e}set(e,t){return this.color=t,this.changed=!1,this.data=e,this.type.type=ao.ALL,this}_ensureHSL(){const e=this.data,{h:t,s:i,l:r}=e;t===void 0&&(e.h=ci.channel.rgb2hsl(e,"h")),i===void 0&&(e.s=ci.channel.rgb2hsl(e,"s")),r===void 0&&(e.l=ci.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r:t,g:i,b:r}=e;t===void 0&&(e.r=ci.channel.hsl2rgb(e,"r")),i===void 0&&(e.g=ci.channel.hsl2rgb(e,"g")),r===void 0&&(e.b=ci.channel.hsl2rgb(e,"b"))}get r(){const e=this.data,t=e.r;return!this.type.is(ao.HSL)&&t!==void 0?t:(this._ensureHSL(),ci.channel.hsl2rgb(e,"r"))}get g(){const e=this.data,t=e.g;return!this.type.is(ao.HSL)&&t!==void 0?t:(this._ensureHSL(),ci.channel.hsl2rgb(e,"g"))}get b(){const e=this.data,t=e.b;return!this.type.is(ao.HSL)&&t!==void 0?t:(this._ensureHSL(),ci.channel.hsl2rgb(e,"b"))}get h(){const e=this.data,t=e.h;return!this.type.is(ao.RGB)&&t!==void 0?t:(this._ensureRGB(),ci.channel.rgb2hsl(e,"h"))}get s(){const e=this.data,t=e.s;return!this.type.is(ao.RGB)&&t!==void 0?t:(this._ensureRGB(),ci.channel.rgb2hsl(e,"s"))}get l(){const e=this.data,t=e.l;return!this.type.is(ao.RGB)&&t!==void 0?t:(this._ensureRGB(),ci.channel.rgb2hsl(e,"l"))}get a(){return this.data.a}set r(e){this.type.set(ao.RGB),this.changed=!0,this.data.r=e}set g(e){this.type.set(ao.RGB),this.changed=!0,this.data.g=e}set b(e){this.type.set(ao.RGB),this.changed=!0,this.data.b=e}set h(e){this.type.set(ao.HSL),this.changed=!0,this.data.h=e}set s(e){this.type.set(ao.HSL),this.changed=!0,this.data.s=e}set l(e){this.type.set(ao.HSL),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}}const s3=new g8e({r:0,g:0,b:0,a:0},"transparent"),o1={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:n=>{if(n.charCodeAt(0)!==35)return;const e=n.match(o1.re);if(!e)return;const t=e[1],i=parseInt(t,16),r=t.length,s=r%4===0,o=r>4,a=o?1:17,l=o?8:4,c=s?0:-1,h=o?255:15;return s3.set({r:(i>>l*(c+3)&h)*a,g:(i>>l*(c+2)&h)*a,b:(i>>l*(c+1)&h)*a,a:s?(i&h)*a/255:1},n)},stringify:n=>{const{r:e,g:t,b:i,a:r}=n;return r<1?`#${Dd[Math.round(e)]}${Dd[Math.round(t)]}${Dd[Math.round(i)]}${Dd[Math.round(r*255)]}`:`#${Dd[Math.round(e)]}${Dd[Math.round(t)]}${Dd[Math.round(i)]}`}},Kg={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:n=>{const e=n.match(Kg.hueRe);if(e){const[,t,i]=e;switch(i){case"grad":return ci.channel.clamp.h(parseFloat(t)*.9);case"rad":return ci.channel.clamp.h(parseFloat(t)*180/Math.PI);case"turn":return ci.channel.clamp.h(parseFloat(t)*360)}}return ci.channel.clamp.h(parseFloat(n))},parse:n=>{const e=n.charCodeAt(0);if(e!==104&&e!==72)return;const t=n.match(Kg.re);if(!t)return;const[,i,r,s,o,a]=t;return s3.set({h:Kg._hue2deg(i),s:ci.channel.clamp.s(parseFloat(r)),l:ci.channel.clamp.l(parseFloat(s)),a:o?ci.channel.clamp.a(a?parseFloat(o)/100:parseFloat(o)):1},n)},stringify:n=>{const{h:e,s:t,l:i,a:r}=n;return r<1?`hsla(${ci.lang.round(e)}, ${ci.lang.round(t)}%, ${ci.lang.round(i)}%, ${r})`:`hsl(${ci.lang.round(e)}, ${ci.lang.round(t)}%, ${ci.lang.round(i)}%)`}},Vv={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:n=>{n=n.toLowerCase();const e=Vv.colors[n];if(e)return o1.parse(e)},stringify:n=>{const e=o1.stringify(n);for(const t in Vv.colors)if(Vv.colors[t]===e)return t}},J_={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:n=>{const e=n.charCodeAt(0);if(e!==114&&e!==82)return;const t=n.match(J_.re);if(!t)return;const[,i,r,s,o,a,l,c,h]=t;return s3.set({r:ci.channel.clamp.r(r?parseFloat(i)*2.55:parseFloat(i)),g:ci.channel.clamp.g(o?parseFloat(s)*2.55:parseFloat(s)),b:ci.channel.clamp.b(l?parseFloat(a)*2.55:parseFloat(a)),a:c?ci.channel.clamp.a(h?parseFloat(c)/100:parseFloat(c)):1},n)},stringify:n=>{const{r:e,g:t,b:i,a:r}=n;return r<1?`rgba(${ci.lang.round(e)}, ${ci.lang.round(t)}, ${ci.lang.round(i)}, ${ci.lang.round(r)})`:`rgb(${ci.lang.round(e)}, ${ci.lang.round(t)}, ${ci.lang.round(i)})`}},dh={format:{keyword:Vv,hex:o1,rgb:J_,rgba:J_,hsl:Kg,hsla:Kg},parse:n=>{if(typeof n!="string")return n;const e=o1.parse(n)||J_.parse(n)||Kg.parse(n)||Vv.parse(n);if(e)return e;throw new Error(`Unsupported color format: "${n}"`)},stringify:n=>!n.changed&&n.color?n.color:n.type.is(ao.HSL)||n.data.r===void 0?Kg.stringify(n):n.a<1||!Number.isInteger(n.r)||!Number.isInteger(n.g)||!Number.isInteger(n.b)?J_.stringify(n):o1.stringify(n)},Eee=(n,e)=>{const t=dh.parse(n);for(const i in e)t[i]=ci.channel.clamp[i](e[i]);return dh.stringify(t)},$v=(n,e,t=0,i=1)=>{if(typeof n!="number")return Eee(n,{a:e});const r=s3.set({r:ci.channel.clamp.r(n),g:ci.channel.clamp.g(e),b:ci.channel.clamp.b(t),a:ci.channel.clamp.a(i)});return dh.stringify(r)},m8e=n=>{const{r:e,g:t,b:i}=dh.parse(n),r=.2126*ci.channel.toLinear(e)+.7152*ci.channel.toLinear(t)+.0722*ci.channel.toLinear(i);return ci.lang.round(r)},p8e=n=>m8e(n)>=.5,Yy=n=>!p8e(n),Iee=(n,e,t)=>{const i=dh.parse(n),r=i[e],s=ci.channel.clamp[e](r+t);return r!==s&&(i[e]=s),dh.stringify(i)},Ct=(n,e)=>Iee(n,"l",e),Ht=(n,e)=>Iee(n,"l",-e),ye=(n,e)=>{const t=dh.parse(n),i={};for(const r in e)e[r]&&(i[r]=t[r]+e[r]);return Eee(n,i)},b8e=(n,e,t=50)=>{const{r:i,g:r,b:s,a:o}=dh.parse(n),{r:a,g:l,b:c,a:h}=dh.parse(e),u=t/100,d=u*2-1,g=o-h,b=((d*g===-1?d:(d+g)/(1+d*g))+1)/2,_=1-b,w=i*b+a*_,y=r*b+l*_,k=s*b+c*_,L=o*u+h*(1-u);return $v(w,y,k,L)},ht=(n,e=100)=>{const t=dh.parse(n);return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,b8e(t,n,e)};/*! @license DOMPurify 3.2.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.7/LICENSE */const{entries:Nee,setPrototypeOf:iq,isFrozen:_8e,getPrototypeOf:v8e,getOwnPropertyDescriptor:w8e}=Object;let{freeze:Zo,seal:El,create:Mee}=Object,{apply:DN,construct:EN}=typeof Reflect<"u"&&Reflect;Zo||(Zo=function(e){return e});El||(El=function(e){return e});DN||(DN=function(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];return e.apply(t,r)});EN||(EN=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return new e(...i)});const pS=Xo(Array.prototype.forEach),y8e=Xo(Array.prototype.lastIndexOf),nq=Xo(Array.prototype.pop),T_=Xo(Array.prototype.push),C8e=Xo(Array.prototype.splice),ox=Xo(String.prototype.toLowerCase),aD=Xo(String.prototype.toString),lD=Xo(String.prototype.match),D_=Xo(String.prototype.replace),S8e=Xo(String.prototype.indexOf),x8e=Xo(String.prototype.trim),Gl=Xo(Object.prototype.hasOwnProperty),Ro=Xo(RegExp.prototype.test),E_=k8e(TypeError);function Xo(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return DN(n,e,i)}}function k8e(n){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return EN(n,t)}}function Oi(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ox;iq&&iq(n,null);let i=e.length;for(;i--;){let r=e[i];if(typeof r=="string"){const s=t(r);s!==r&&(_8e(e)||(e[i]=s),r=s)}n[r]=!0}return n}function L8e(n){for(let e=0;e<n.length;e++)Gl(n,e)||(n[e]=null);return n}function $h(n){const e=Mee(null);for(const[t,i]of Nee(n))Gl(n,t)&&(Array.isArray(i)?e[t]=L8e(i):i&&typeof i=="object"&&i.constructor===Object?e[t]=$h(i):e[t]=i);return e}function I_(n,e){for(;n!==null;){const i=w8e(n,e);if(i){if(i.get)return Xo(i.get);if(typeof i.value=="function")return Xo(i.value)}n=v8e(n)}function t(){return null}return t}const rq=Zo(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),cD=Zo(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","slot","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),hD=Zo(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),T8e=Zo(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),uD=Zo(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),D8e=Zo(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),sq=Zo(["#text"]),oq=Zo(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),dD=Zo(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),aq=Zo(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),bS=Zo(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),E8e=El(/\{\{[\w\W]*|[\w\W]*\}\}/gm),I8e=El(/<%[\w\W]*|[\w\W]*%>/gm),N8e=El(/\$\{[\w\W]*/gm),M8e=El(/^data-[\-\w.\u00B7-\uFFFF]+$/),A8e=El(/^aria-[\-\w]+$/),Aee=El(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),R8e=El(/^(?:\w+script|data):/i),P8e=El(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ree=El(/^html$/i),O8e=El(/^[a-z][.\w]*(-[.\w]+)+$/i);var lq=Object.freeze({__proto__:null,ARIA_ATTR:A8e,ATTR_WHITESPACE:P8e,CUSTOM_ELEMENT:O8e,DATA_ATTR:M8e,DOCTYPE_NAME:Ree,ERB_EXPR:I8e,IS_ALLOWED_URI:Aee,IS_SCRIPT_OR_DATA:R8e,MUSTACHE_EXPR:E8e,TMPLIT_EXPR:N8e});const N_={element:1,text:3,progressingInstruction:7,comment:8,document:9},B8e=function(){return typeof window>"u"?null:window},F8e=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(i=t.getAttribute(r));const s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},cq=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Pee(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:B8e();const e=Ne=>Pee(Ne);if(e.version="3.2.7",e.removed=[],!n||!n.document||n.document.nodeType!==N_.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const i=t,r=i.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:h=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:u,DOMParser:d,trustedTypes:g}=n,p=l.prototype,b=I_(p,"cloneNode"),_=I_(p,"remove"),w=I_(p,"nextSibling"),y=I_(p,"childNodes"),k=I_(p,"parentNode");if(typeof o=="function"){const Ne=t.createElement("template");Ne.content&&Ne.content.ownerDocument&&(t=Ne.content.ownerDocument)}let L,T="";const{implementation:N,createNodeIterator:D,createDocumentFragment:O,getElementsByTagName:B}=t,{importNode:G}=i;let H=cq();e.isSupported=typeof Nee=="function"&&typeof k=="function"&&N&&N.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:q,ERB_EXPR:X,TMPLIT_EXPR:z,DATA_ATTR:Q,ARIA_ATTR:te,IS_SCRIPT_OR_DATA:se,ATTR_WHITESPACE:Y,CUSTOM_ELEMENT:ae}=lq;let{IS_ALLOWED_URI:fe}=lq,J=null;const ge=Oi({},[...rq,...cD,...hD,...uD,...sq]);let Le=null;const We=Oi({},[...oq,...dD,...aq,...bS]);let Ie=Object.seal(Mee(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ze=null,ct=null,ot=!0,Ot=!0,$t=!1,yn=!0,vi=!1,nn=!0,rn=!1,ss=!1,Vn=!1,Kn=!1,Nr=!1,or=!1,ys=!0,eo=!1;const el="user-content-";let ko=!0,Jn=!1,$n={},Mr=null;const Os=Oi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ar=null;const ar=Oi({},["audio","video","img","source","image","track"]);let wr=null;const Ln=Oi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),os="http://www.w3.org/1998/Math/MathML",jn="http://www.w3.org/2000/svg",Ai="http://www.w3.org/1999/xhtml";let er=Ai,Bs=!1,Rr=null;const xi=Oi({},[os,jn,Ai],aD);let Pr=Oi({},["mi","mo","mn","ms","mtext"]),Lo=Oi({},["annotation-xml"]);const to=Oi({},["title","style","font","a","script"]);let Ri=null;const To=["application/xhtml+xml","text/html"],Rl="text/html";let Tn=null,Cs=null;const At=t.createElement("form"),K=function(W){return W instanceof RegExp||W instanceof Function},ee=function(){let W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Cs&&Cs===W)){if((!W||typeof W!="object")&&(W={}),W=$h(W),Ri=To.indexOf(W.PARSER_MEDIA_TYPE)===-1?Rl:W.PARSER_MEDIA_TYPE,Tn=Ri==="application/xhtml+xml"?aD:ox,J=Gl(W,"ALLOWED_TAGS")?Oi({},W.ALLOWED_TAGS,Tn):ge,Le=Gl(W,"ALLOWED_ATTR")?Oi({},W.ALLOWED_ATTR,Tn):We,Rr=Gl(W,"ALLOWED_NAMESPACES")?Oi({},W.ALLOWED_NAMESPACES,aD):xi,wr=Gl(W,"ADD_URI_SAFE_ATTR")?Oi($h(Ln),W.ADD_URI_SAFE_ATTR,Tn):Ln,Ar=Gl(W,"ADD_DATA_URI_TAGS")?Oi($h(ar),W.ADD_DATA_URI_TAGS,Tn):ar,Mr=Gl(W,"FORBID_CONTENTS")?Oi({},W.FORBID_CONTENTS,Tn):Os,Ze=Gl(W,"FORBID_TAGS")?Oi({},W.FORBID_TAGS,Tn):$h({}),ct=Gl(W,"FORBID_ATTR")?Oi({},W.FORBID_ATTR,Tn):$h({}),$n=Gl(W,"USE_PROFILES")?W.USE_PROFILES:!1,ot=W.ALLOW_ARIA_ATTR!==!1,Ot=W.ALLOW_DATA_ATTR!==!1,$t=W.ALLOW_UNKNOWN_PROTOCOLS||!1,yn=W.ALLOW_SELF_CLOSE_IN_ATTR!==!1,vi=W.SAFE_FOR_TEMPLATES||!1,nn=W.SAFE_FOR_XML!==!1,rn=W.WHOLE_DOCUMENT||!1,Kn=W.RETURN_DOM||!1,Nr=W.RETURN_DOM_FRAGMENT||!1,or=W.RETURN_TRUSTED_TYPE||!1,Vn=W.FORCE_BODY||!1,ys=W.SANITIZE_DOM!==!1,eo=W.SANITIZE_NAMED_PROPS||!1,ko=W.KEEP_CONTENT!==!1,Jn=W.IN_PLACE||!1,fe=W.ALLOWED_URI_REGEXP||Aee,er=W.NAMESPACE||Ai,Pr=W.MATHML_TEXT_INTEGRATION_POINTS||Pr,Lo=W.HTML_INTEGRATION_POINTS||Lo,Ie=W.CUSTOM_ELEMENT_HANDLING||{},W.CUSTOM_ELEMENT_HANDLING&&K(W.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ie.tagNameCheck=W.CUSTOM_ELEMENT_HANDLING.tagNameCheck),W.CUSTOM_ELEMENT_HANDLING&&K(W.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ie.attributeNameCheck=W.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),W.CUSTOM_ELEMENT_HANDLING&&typeof W.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ie.allowCustomizedBuiltInElements=W.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),vi&&(Ot=!1),Nr&&(Kn=!0),$n&&(J=Oi({},sq),Le=[],$n.html===!0&&(Oi(J,rq),Oi(Le,oq)),$n.svg===!0&&(Oi(J,cD),Oi(Le,dD),Oi(Le,bS)),$n.svgFilters===!0&&(Oi(J,hD),Oi(Le,dD),Oi(Le,bS)),$n.mathMl===!0&&(Oi(J,uD),Oi(Le,aq),Oi(Le,bS))),W.ADD_TAGS&&(J===ge&&(J=$h(J)),Oi(J,W.ADD_TAGS,Tn)),W.ADD_ATTR&&(Le===We&&(Le=$h(Le)),Oi(Le,W.ADD_ATTR,Tn)),W.ADD_URI_SAFE_ATTR&&Oi(wr,W.ADD_URI_SAFE_ATTR,Tn),W.FORBID_CONTENTS&&(Mr===Os&&(Mr=$h(Mr)),Oi(Mr,W.FORBID_CONTENTS,Tn)),ko&&(J["#text"]=!0),rn&&Oi(J,["html","head","body"]),J.table&&(Oi(J,["tbody"]),delete Ze.tbody),W.TRUSTED_TYPES_POLICY){if(typeof W.TRUSTED_TYPES_POLICY.createHTML!="function")throw E_('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof W.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw E_('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');L=W.TRUSTED_TYPES_POLICY,T=L.createHTML("")}else L===void 0&&(L=F8e(g,r)),L!==null&&typeof T=="string"&&(T=L.createHTML(""));Zo&&Zo(W),Cs=W}},re=Oi({},[...cD,...hD,...T8e]),F=Oi({},[...uD,...D8e]),j=function(W){let pe=k(W);(!pe||!pe.tagName)&&(pe={namespaceURI:er,tagName:"template"});const Ae=ox(W.tagName),Bt=ox(pe.tagName);return Rr[W.namespaceURI]?W.namespaceURI===jn?pe.namespaceURI===Ai?Ae==="svg":pe.namespaceURI===os?Ae==="svg"&&(Bt==="annotation-xml"||Pr[Bt]):!!re[Ae]:W.namespaceURI===os?pe.namespaceURI===Ai?Ae==="math":pe.namespaceURI===jn?Ae==="math"&&Lo[Bt]:!!F[Ae]:W.namespaceURI===Ai?pe.namespaceURI===jn&&!Lo[Bt]||pe.namespaceURI===os&&!Pr[Bt]?!1:!F[Ae]&&(to[Ae]||!re[Ae]):!!(Ri==="application/xhtml+xml"&&Rr[W.namespaceURI]):!1},ne=function(W){T_(e.removed,{element:W});try{k(W).removeChild(W)}catch{_(W)}},he=function(W,pe){try{T_(e.removed,{attribute:pe.getAttributeNode(W),from:pe})}catch{T_(e.removed,{attribute:null,from:pe})}if(pe.removeAttribute(W),W==="is")if(Kn||Nr)try{ne(pe)}catch{}else try{pe.setAttribute(W,"")}catch{}},Ce=function(W){let pe=null,Ae=null;if(Vn)W="<remove></remove>"+W;else{const gt=lD(W,/^[\r\n\t ]+/);Ae=gt&&gt[0]}Ri==="application/xhtml+xml"&&er===Ai&&(W='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+W+"</body></html>");const Bt=L?L.createHTML(W):W;if(er===Ai)try{pe=new d().parseFromString(Bt,Ri)}catch{}if(!pe||!pe.documentElement){pe=N.createDocument(er,"template",null);try{pe.documentElement.innerHTML=Bs?T:Bt}catch{}}const mi=pe.body||pe.documentElement;return W&&Ae&&mi.insertBefore(t.createTextNode(Ae),mi.childNodes[0]||null),er===Ai?B.call(pe,rn?"html":"body")[0]:rn?pe.documentElement:mi},Re=function(W){return D.call(W.ownerDocument||W,W,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Ve=function(W){return W instanceof u&&(typeof W.nodeName!="string"||typeof W.textContent!="string"||typeof W.removeChild!="function"||!(W.attributes instanceof h)||typeof W.removeAttribute!="function"||typeof W.setAttribute!="function"||typeof W.namespaceURI!="string"||typeof W.insertBefore!="function"||typeof W.hasChildNodes!="function")},$e=function(W){return typeof a=="function"&&W instanceof a};function He(Ne,W,pe){pS(Ne,Ae=>{Ae.call(e,W,pe,Cs)})}const tt=function(W){let pe=null;if(He(H.beforeSanitizeElements,W,null),Ve(W))return ne(W),!0;const Ae=Tn(W.nodeName);if(He(H.uponSanitizeElement,W,{tagName:Ae,allowedTags:J}),nn&&W.hasChildNodes()&&!$e(W.firstElementChild)&&Ro(/<[/\w!]/g,W.innerHTML)&&Ro(/<[/\w!]/g,W.textContent)||W.nodeType===N_.progressingInstruction||nn&&W.nodeType===N_.comment&&Ro(/<[/\w]/g,W.data))return ne(W),!0;if(!J[Ae]||Ze[Ae]){if(!Ze[Ae]&&xt(Ae)&&(Ie.tagNameCheck instanceof RegExp&&Ro(Ie.tagNameCheck,Ae)||Ie.tagNameCheck instanceof Function&&Ie.tagNameCheck(Ae)))return!1;if(ko&&!Mr[Ae]){const Bt=k(W)||W.parentNode,mi=y(W)||W.childNodes;if(mi&&Bt){const gt=mi.length;for(let Ui=gt-1;Ui>=0;--Ui){const mn=b(mi[Ui],!0);mn.__removalCount=(W.__removalCount||0)+1,Bt.insertBefore(mn,w(W))}}}return ne(W),!0}return W instanceof l&&!j(W)||(Ae==="noscript"||Ae==="noembed"||Ae==="noframes")&&Ro(/<\/no(script|embed|frames)/i,W.innerHTML)?(ne(W),!0):(vi&&W.nodeType===N_.text&&(pe=W.textContent,pS([q,X,z],Bt=>{pe=D_(pe,Bt," ")}),W.textContent!==pe&&(T_(e.removed,{element:W.cloneNode()}),W.textContent=pe)),He(H.afterSanitizeElements,W,null),!1)},Ke=function(W,pe,Ae){if(ys&&(pe==="id"||pe==="name")&&(Ae in t||Ae in At))return!1;if(!(Ot&&!ct[pe]&&Ro(Q,pe))){if(!(ot&&Ro(te,pe))){if(!Le[pe]||ct[pe]){if(!(xt(W)&&(Ie.tagNameCheck instanceof RegExp&&Ro(Ie.tagNameCheck,W)||Ie.tagNameCheck instanceof Function&&Ie.tagNameCheck(W))&&(Ie.attributeNameCheck instanceof RegExp&&Ro(Ie.attributeNameCheck,pe)||Ie.attributeNameCheck instanceof Function&&Ie.attributeNameCheck(pe,W))||pe==="is"&&Ie.allowCustomizedBuiltInElements&&(Ie.tagNameCheck instanceof RegExp&&Ro(Ie.tagNameCheck,Ae)||Ie.tagNameCheck instanceof Function&&Ie.tagNameCheck(Ae))))return!1}else if(!wr[pe]){if(!Ro(fe,D_(Ae,Y,""))){if(!((pe==="src"||pe==="xlink:href"||pe==="href")&&W!=="script"&&S8e(Ae,"data:")===0&&Ar[W])){if(!($t&&!Ro(se,D_(Ae,Y,"")))){if(Ae)return!1}}}}}}return!0},xt=function(W){return W!=="annotation-xml"&&lD(W,ae)},jt=function(W){He(H.beforeSanitizeAttributes,W,null);const{attributes:pe}=W;if(!pe||Ve(W))return;const Ae={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Le,forceKeepAttr:void 0};let Bt=pe.length;for(;Bt--;){const mi=pe[Bt],{name:gt,namespaceURI:Ui,value:mn}=mi,lr=Tn(gt),Cn=mn;let Rn=gt==="value"?Cn:x8e(Cn);if(Ae.attrName=lr,Ae.attrValue=Rn,Ae.keepAttr=!0,Ae.forceKeepAttr=void 0,He(H.uponSanitizeAttribute,W,Ae),Rn=Ae.attrValue,eo&&(lr==="id"||lr==="name")&&(he(gt,W),Rn=el+Rn),nn&&Ro(/((--!?|])>)|<\/(style|title|textarea)/i,Rn)){he(gt,W);continue}if(lr==="attributename"&&lD(Rn,"href")){he(gt,W);continue}if(Ae.forceKeepAttr)continue;if(!Ae.keepAttr){he(gt,W);continue}if(!yn&&Ro(/\/>/i,Rn)){he(gt,W);continue}vi&&pS([q,X,z],pn=>{Rn=D_(Rn,pn," ")});const ki=Tn(W.nodeName);if(!Ke(ki,lr,Rn)){he(gt,W);continue}if(L&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!Ui)switch(g.getAttributeType(ki,lr)){case"TrustedHTML":{Rn=L.createHTML(Rn);break}case"TrustedScriptURL":{Rn=L.createScriptURL(Rn);break}}if(Rn!==Cn)try{Ui?W.setAttributeNS(Ui,gt,Rn):W.setAttribute(gt,Rn),Ve(W)?ne(W):nq(e.removed)}catch{he(gt,W)}}He(H.afterSanitizeAttributes,W,null)},An=function Ne(W){let pe=null;const Ae=Re(W);for(He(H.beforeSanitizeShadowDOM,W,null);pe=Ae.nextNode();)He(H.uponSanitizeShadowNode,pe,null),tt(pe),jt(pe),pe.content instanceof s&&Ne(pe.content);He(H.afterSanitizeShadowDOM,W,null)};return e.sanitize=function(Ne){let W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=null,Ae=null,Bt=null,mi=null;if(Bs=!Ne,Bs&&(Ne="<!-->"),typeof Ne!="string"&&!$e(Ne))if(typeof Ne.toString=="function"){if(Ne=Ne.toString(),typeof Ne!="string")throw E_("dirty is not a string, aborting")}else throw E_("toString is not a function");if(!e.isSupported)return Ne;if(ss||ee(W),e.removed=[],typeof Ne=="string"&&(Jn=!1),Jn){if(Ne.nodeName){const mn=Tn(Ne.nodeName);if(!J[mn]||Ze[mn])throw E_("root node is forbidden and cannot be sanitized in-place")}}else if(Ne instanceof a)pe=Ce("<!---->"),Ae=pe.ownerDocument.importNode(Ne,!0),Ae.nodeType===N_.element&&Ae.nodeName==="BODY"||Ae.nodeName==="HTML"?pe=Ae:pe.appendChild(Ae);else{if(!Kn&&!vi&&!rn&&Ne.indexOf("<")===-1)return L&&or?L.createHTML(Ne):Ne;if(pe=Ce(Ne),!pe)return Kn?null:or?T:""}pe&&Vn&&ne(pe.firstChild);const gt=Re(Jn?Ne:pe);for(;Bt=gt.nextNode();)tt(Bt),jt(Bt),Bt.content instanceof s&&An(Bt.content);if(Jn)return Ne;if(Kn){if(Nr)for(mi=O.call(pe.ownerDocument);pe.firstChild;)mi.appendChild(pe.firstChild);else mi=pe;return(Le.shadowroot||Le.shadowrootmode)&&(mi=G.call(i,mi,!0)),mi}let Ui=rn?pe.outerHTML:pe.innerHTML;return rn&&J["!doctype"]&&pe.ownerDocument&&pe.ownerDocument.doctype&&pe.ownerDocument.doctype.name&&Ro(Ree,pe.ownerDocument.doctype.name)&&(Ui="<!DOCTYPE "+pe.ownerDocument.doctype.name+`>
`+Ui),vi&&pS([q,X,z],mn=>{Ui=D_(Ui,mn," ")}),L&&or?L.createHTML(Ui):Ui},e.setConfig=function(){let Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ee(Ne),ss=!0},e.clearConfig=function(){Cs=null,ss=!1},e.isValidAttribute=function(Ne,W,pe){Cs||ee({});const Ae=Tn(Ne),Bt=Tn(W);return Ke(Ae,Bt,pe)},e.addHook=function(Ne,W){typeof W=="function"&&T_(H[Ne],W)},e.removeHook=function(Ne,W){if(W!==void 0){const pe=y8e(H[Ne],W);return pe===-1?void 0:C8e(H[Ne],pe,1)[0]}return nq(H[Ne])},e.removeHooks=function(Ne){H[Ne]=[]},e.removeAllHooks=function(){H=cq()},e}var $1=Pee(),Oee=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,jv=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,W8e=/\s*%%.*\n/gm,u1,Bee=(u1=class extends Error{constructor(e){super(e),this.name="UnknownDiagramError"}},R(u1,"UnknownDiagramError"),u1),Rm={},PP=R(function(n,e){n=n.replace(Oee,"").replace(jv,"").replace(W8e,`
`);for(const[t,{detector:i}]of Object.entries(Rm))if(i(n,e))return t;throw new Bee(`No diagram type detected matching given configuration for text: ${n}`)},"detectType"),IN=R((...n)=>{for(const{id:e,detector:t,loader:i}of n)Fee(e,t,i)},"registerLazyLoadedDiagrams"),Fee=R((n,e,t)=>{Rm[n]&&ze.warn(`Detector with key ${n} already exists. Overwriting.`),Rm[n]={detector:e,loader:t},ze.debug(`Detector with key ${n} added${t?" with loader":""}`)},"addDetector"),z8e=R(n=>Rm[n].loader,"getDiagramLoader"),NN=R((n,e,{depth:t=2,clobber:i=!1}={})=>{const r={depth:t,clobber:i};return Array.isArray(e)&&!Array.isArray(n)?(e.forEach(s=>NN(n,s,r)),n):Array.isArray(e)&&Array.isArray(n)?(e.forEach(s=>{n.includes(s)||n.push(s)}),n):n===void 0||t<=0?n!=null&&typeof n=="object"&&typeof e=="object"?Object.assign(n,e):e:(e!==void 0&&typeof n=="object"&&typeof e=="object"&&Object.keys(e).forEach(s=>{typeof e[s]=="object"&&(n[s]===void 0||typeof n[s]=="object")?(n[s]===void 0&&(n[s]=Array.isArray(e[s])?[]:{}),n[s]=NN(n[s],e[s],{depth:t-1,clobber:i})):(i||typeof n[s]!="object"&&typeof e[s]!="object")&&(n[s]=e[s])}),n)},"assignWithDepth"),gs=NN,o3="#ffffff",a3="#f2f2f2",Ho=R((n,e)=>e?ye(n,{s:-40,l:10}):ye(n,{s:-40,l:-10}),"mkBorder"),d1,H8e=(d1=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||ye(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||ye(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Ho(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Ho(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Ho(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Ho(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||ht(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||ht(this.tertiaryColor),this.lineColor=this.lineColor||ht(this.background),this.arrowheadColor=this.arrowheadColor||ht(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?Ht(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||Ht(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||ht(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||Ct(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||Ht(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Ht(this.mainBkg,10)):(this.rowOdd=this.rowOdd||Ct(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Ct(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ye(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ye(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ye(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ye(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ye(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ye(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||ye(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ye(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ye(this.primaryColor,{h:330}),this.darkMode)for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=Ht(this["cScale"+t],75);else for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=Ht(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||ht(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||Ct(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||Ht(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;const e=this.darkMode?-4:-1;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||ye(this.mainBkg,{h:180,s:-15,l:e*(5+t*3)}),this["surfacePeer"+t]=this["surfacePeer"+t]||ye(this.mainBkg,{h:180,s:-15,l:e*(8+t*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||ye(this.primaryColor,{h:64}),this.fillType3=this.fillType3||ye(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||ye(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||ye(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||ye(this.primaryColor,{h:128}),this.fillType7=this.fillType7||ye(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||ye(this.primaryColor,{l:-10}),this.pie5=this.pie5||ye(this.secondaryColor,{l:-10}),this.pie6=this.pie6||ye(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||ye(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||ye(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||ye(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||ye(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||ye(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||ye(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ye(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ye(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ye(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ye(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ye(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ye(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Yy(this.quadrant1Fill)?Ct(this.quadrant1Fill):Ht(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Ht(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ye(this.primaryColor,{h:-30}),this.git4=this.git4||ye(this.primaryColor,{h:-60}),this.git5=this.git5||ye(this.primaryColor,{h:-90}),this.git6=this.git6||ye(this.primaryColor,{h:60}),this.git7=this.git7||ye(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ct(this.git0,25),this.git1=Ct(this.git1,25),this.git2=Ct(this.git2,25),this.git3=Ct(this.git3,25),this.git4=Ct(this.git4,25),this.git5=Ct(this.git5,25),this.git6=Ct(this.git6,25),this.git7=Ct(this.git7,25)):(this.git0=Ht(this.git0,25),this.git1=Ht(this.git1,25),this.git2=Ht(this.git2,25),this.git3=Ht(this.git3,25),this.git4=Ht(this.git4,25),this.git5=Ht(this.git5,25),this.git6=Ht(this.git6,25),this.git7=Ht(this.git7,25)),this.gitInv0=this.gitInv0||ht(this.git0),this.gitInv1=this.gitInv1||ht(this.git1),this.gitInv2=this.gitInv2||ht(this.git2),this.gitInv3=this.gitInv3||ht(this.git3),this.gitInv4=this.gitInv4||ht(this.git4),this.gitInv5=this.gitInv5||ht(this.git5),this.gitInv6=this.gitInv6||ht(this.git6),this.gitInv7=this.gitInv7||ht(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||o3,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||a3}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(i=>{this[i]=e[i]}),this.updateColors(),t.forEach(i=>{this[i]=e[i]})}},R(d1,"Theme"),d1),V8e=R(n=>{const e=new H8e;return e.calculate(n),e},"getThemeVariables"),f1,$8e=(f1=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=Ct(this.primaryColor,16),this.tertiaryColor=ye(this.primaryColor,{h:-160}),this.primaryBorderColor=ht(this.background),this.secondaryBorderColor=Ho(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ho(this.tertiaryColor,this.darkMode),this.primaryTextColor=ht(this.primaryColor),this.secondaryTextColor=ht(this.secondaryColor),this.tertiaryTextColor=ht(this.tertiaryColor),this.lineColor=ht(this.background),this.textColor=ht(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=Ct(ht("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=$v(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=Ht("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=Ht(this.sectionBkgColor,10),this.taskBorderColor=$v(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=$v(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Ct(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Ht(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=Ct(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=Ct(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=Ct(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ye(this.primaryColor,{h:64}),this.fillType3=ye(this.secondaryColor,{h:64}),this.fillType4=ye(this.primaryColor,{h:-64}),this.fillType5=ye(this.secondaryColor,{h:-64}),this.fillType6=ye(this.primaryColor,{h:128}),this.fillType7=ye(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ye(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ye(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ye(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ye(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ye(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ye(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ye(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ye(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ye(this.primaryColor,{h:330});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||ht(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScalePeer"+e]=this["cScalePeer"+e]||Ct(this["cScale"+e],10);for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||ye(this.mainBkg,{h:30,s:-30,l:-(-10+e*4)}),this["surfacePeer"+e]=this["surfacePeer"+e]||ye(this.mainBkg,{h:30,s:-30,l:-(-7+e*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ye(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ye(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ye(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ye(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ye(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ye(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Yy(this.quadrant1Fill)?Ct(this.quadrant1Fill):Ht(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Ht(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Ct(this.secondaryColor,20),this.git1=Ct(this.pie2||this.secondaryColor,20),this.git2=Ct(this.pie3||this.tertiaryColor,20),this.git3=Ct(this.pie4||ye(this.primaryColor,{h:-30}),20),this.git4=Ct(this.pie5||ye(this.primaryColor,{h:-60}),20),this.git5=Ct(this.pie6||ye(this.primaryColor,{h:-90}),10),this.git6=Ct(this.pie7||ye(this.primaryColor,{h:60}),10),this.git7=Ct(this.pie8||ye(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||ht(this.git0),this.gitInv1=this.gitInv1||ht(this.git1),this.gitInv2=this.gitInv2||ht(this.git2),this.gitInv3=this.gitInv3||ht(this.git3),this.gitInv4=this.gitInv4||ht(this.git4),this.gitInv5=this.gitInv5||ht(this.git5),this.gitInv6=this.gitInv6||ht(this.git6),this.gitInv7=this.gitInv7||ht(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ht(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ht(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ct(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ct(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(i=>{this[i]=e[i]}),this.updateColors(),t.forEach(i=>{this[i]=e[i]})}},R(f1,"Theme"),f1),j8e=R(n=>{const e=new $8e;return e.calculate(n),e},"getThemeVariables"),g1,U8e=(g1=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=ye(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=ye(this.primaryColor,{h:-160}),this.primaryBorderColor=Ho(this.primaryColor,this.darkMode),this.secondaryBorderColor=Ho(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ho(this.tertiaryColor,this.darkMode),this.primaryTextColor=ht(this.primaryColor),this.secondaryTextColor=ht(this.secondaryColor),this.tertiaryTextColor=ht(this.tertiaryColor),this.lineColor=ht(this.background),this.textColor=ht(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=$v(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ye(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ye(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ye(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ye(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ye(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ye(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ye(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ye(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ye(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Ht(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Ht(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=Ht(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||Ht(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||ye(this["cScale"+e],{h:180});for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||ye(this.mainBkg,{h:30,l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||ye(this.mainBkg,{h:30,l:-(7+e*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||ht(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||ht(this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=Ct(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Ct(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||Ct(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ye(this.primaryColor,{h:64}),this.fillType3=ye(this.secondaryColor,{h:64}),this.fillType4=ye(this.primaryColor,{h:-64}),this.fillType5=ye(this.secondaryColor,{h:-64}),this.fillType6=ye(this.primaryColor,{h:128}),this.fillType7=ye(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||ye(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||ye(this.primaryColor,{l:-10}),this.pie5=this.pie5||ye(this.secondaryColor,{l:-30}),this.pie6=this.pie6||ye(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||ye(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||ye(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||ye(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||ye(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||ye(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||ye(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ye(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ye(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ye(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ye(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ye(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ye(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Yy(this.quadrant1Fill)?Ct(this.quadrant1Fill):Ht(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ye(this.primaryColor,{h:-30}),this.git4=this.git4||ye(this.primaryColor,{h:-60}),this.git5=this.git5||ye(this.primaryColor,{h:-90}),this.git6=this.git6||ye(this.primaryColor,{h:60}),this.git7=this.git7||ye(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ct(this.git0,25),this.git1=Ct(this.git1,25),this.git2=Ct(this.git2,25),this.git3=Ct(this.git3,25),this.git4=Ct(this.git4,25),this.git5=Ct(this.git5,25),this.git6=Ct(this.git6,25),this.git7=Ct(this.git7,25)):(this.git0=Ht(this.git0,25),this.git1=Ht(this.git1,25),this.git2=Ht(this.git2,25),this.git3=Ht(this.git3,25),this.git4=Ht(this.git4,25),this.git5=Ht(this.git5,25),this.git6=Ht(this.git6,25),this.git7=Ht(this.git7,25)),this.gitInv0=this.gitInv0||Ht(ht(this.git0),25),this.gitInv1=this.gitInv1||ht(this.git1),this.gitInv2=this.gitInv2||ht(this.git2),this.gitInv3=this.gitInv3||ht(this.git3),this.gitInv4=this.gitInv4||ht(this.git4),this.gitInv5=this.gitInv5||ht(this.git5),this.gitInv6=this.gitInv6||ht(this.git6),this.gitInv7=this.gitInv7||ht(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ht(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ht(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||o3,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||a3}calculate(e){if(Object.keys(this).forEach(i=>{this[i]==="calculated"&&(this[i]=void 0)}),typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(i=>{this[i]=e[i]}),this.updateColors(),t.forEach(i=>{this[i]=e[i]})}},R(g1,"Theme"),g1),q8e=R(n=>{const e=new U8e;return e.calculate(n),e},"getThemeVariables"),m1,G8e=(m1=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=Ct("#cde498",10),this.primaryBorderColor=Ho(this.primaryColor,this.darkMode),this.secondaryBorderColor=Ho(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ho(this.tertiaryColor,this.darkMode),this.primaryTextColor=ht(this.primaryColor),this.secondaryTextColor=ht(this.secondaryColor),this.tertiaryTextColor=ht(this.primaryColor),this.lineColor=ht(this.background),this.textColor=ht(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=Ht(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ye(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ye(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ye(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ye(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ye(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ye(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ye(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ye(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ye(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Ht(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Ht(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=Ht(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||Ht(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||ye(this["cScale"+e],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||ye(this.mainBkg,{h:30,s:-30,l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||ye(this.mainBkg,{h:30,s:-30,l:-(8+e*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Ct(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Ct(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ye(this.primaryColor,{h:64}),this.fillType3=ye(this.secondaryColor,{h:64}),this.fillType4=ye(this.primaryColor,{h:-64}),this.fillType5=ye(this.secondaryColor,{h:-64}),this.fillType6=ye(this.primaryColor,{h:128}),this.fillType7=ye(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||ye(this.primaryColor,{l:-30}),this.pie5=this.pie5||ye(this.secondaryColor,{l:-30}),this.pie6=this.pie6||ye(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||ye(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||ye(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||ye(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||ye(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||ye(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||ye(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ye(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ye(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ye(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ye(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ye(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ye(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Yy(this.quadrant1Fill)?Ct(this.quadrant1Fill):Ht(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ye(this.primaryColor,{h:-30}),this.git4=this.git4||ye(this.primaryColor,{h:-60}),this.git5=this.git5||ye(this.primaryColor,{h:-90}),this.git6=this.git6||ye(this.primaryColor,{h:60}),this.git7=this.git7||ye(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ct(this.git0,25),this.git1=Ct(this.git1,25),this.git2=Ct(this.git2,25),this.git3=Ct(this.git3,25),this.git4=Ct(this.git4,25),this.git5=Ct(this.git5,25),this.git6=Ct(this.git6,25),this.git7=Ct(this.git7,25)):(this.git0=Ht(this.git0,25),this.git1=Ht(this.git1,25),this.git2=Ht(this.git2,25),this.git3=Ht(this.git3,25),this.git4=Ht(this.git4,25),this.git5=Ht(this.git5,25),this.git6=Ht(this.git6,25),this.git7=Ht(this.git7,25)),this.gitInv0=this.gitInv0||ht(this.git0),this.gitInv1=this.gitInv1||ht(this.git1),this.gitInv2=this.gitInv2||ht(this.git2),this.gitInv3=this.gitInv3||ht(this.git3),this.gitInv4=this.gitInv4||ht(this.git4),this.gitInv5=this.gitInv5||ht(this.git5),this.gitInv6=this.gitInv6||ht(this.git6),this.gitInv7=this.gitInv7||ht(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ht(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ht(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||o3,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||a3}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(i=>{this[i]=e[i]}),this.updateColors(),t.forEach(i=>{this[i]=e[i]})}},R(m1,"Theme"),m1),K8e=R(n=>{const e=new G8e;return e.calculate(n),e},"getThemeVariables"),p1,Y8e=(p1=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=Ct(this.contrast,55),this.background="#ffffff",this.tertiaryColor=ye(this.primaryColor,{h:-160}),this.primaryBorderColor=Ho(this.primaryColor,this.darkMode),this.secondaryBorderColor=Ho(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ho(this.tertiaryColor,this.darkMode),this.primaryTextColor=ht(this.primaryColor),this.secondaryTextColor=ht(this.secondaryColor),this.tertiaryTextColor=ht(this.tertiaryColor),this.lineColor=ht(this.background),this.textColor=ht(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Ct(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=Ct(this.contrast,55),this.border2=this.contrast,this.actorBorder=Ct(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||ht(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||Ct(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||Ht(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||ye(this.mainBkg,{l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||ye(this.mainBkg,{l:-(8+e*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=Ct(this.contrast,30),this.sectionBkgColor2=Ct(this.contrast,30),this.taskBorderColor=Ht(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=Ct(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=Ht(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ye(this.primaryColor,{h:64}),this.fillType3=ye(this.secondaryColor,{h:64}),this.fillType4=ye(this.primaryColor,{h:-64}),this.fillType5=ye(this.secondaryColor,{h:-64}),this.fillType6=ye(this.primaryColor,{h:128}),this.fillType7=ye(this.secondaryColor,{h:128});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ye(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ye(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ye(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ye(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ye(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ye(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Yy(this.quadrant1Fill)?Ct(this.quadrant1Fill):Ht(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Ht(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||ye(this.primaryColor,{h:-30}),this.git4=this.pie5||ye(this.primaryColor,{h:-60}),this.git5=this.pie6||ye(this.primaryColor,{h:-90}),this.git6=this.pie7||ye(this.primaryColor,{h:60}),this.git7=this.pie8||ye(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||ht(this.git0),this.gitInv1=this.gitInv1||ht(this.git1),this.gitInv2=this.gitInv2||ht(this.git2),this.gitInv3=this.gitInv3||ht(this.git3),this.gitInv4=this.gitInv4||ht(this.git4),this.gitInv5=this.gitInv5||ht(this.git5),this.gitInv6=this.gitInv6||ht(this.git6),this.gitInv7=this.gitInv7||ht(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||o3,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||a3}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(i=>{this[i]=e[i]}),this.updateColors(),t.forEach(i=>{this[i]=e[i]})}},R(p1,"Theme"),p1),Z8e=R(n=>{const e=new Y8e;return e.calculate(n),e},"getThemeVariables"),Mu={base:{getThemeVariables:V8e},dark:{getThemeVariables:j8e},default:{getThemeVariables:q8e},forest:{getThemeVariables:K8e},neutral:{getThemeVariables:Z8e}},Ac={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},Wee={...Ac,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:Mu.default.getThemeVariables(),sequence:{...Ac.sequence,messageFont:R(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:R(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:R(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...Ac.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Ac.c4,useWidth:void 0,personFont:R(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...Ac.flowchart,inheritDir:!1},external_personFont:R(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:R(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:R(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:R(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:R(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:R(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:R(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:R(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:R(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:R(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:R(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:R(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:R(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:R(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:R(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:R(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:R(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:R(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:R(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:R(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:R(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...Ac.pie,useWidth:984},xyChart:{...Ac.xyChart,useWidth:void 0},requirement:{...Ac.requirement,useWidth:void 0},packet:{...Ac.packet},radar:{...Ac.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},zee=R((n,e="")=>Object.keys(n).reduce((t,i)=>Array.isArray(n[i])?t:typeof n[i]=="object"&&n[i]!==null?[...t,e+i,...zee(n[i],"")]:[...t,e+i],[]),"keyify"),X8e=new Set(zee(Wee,"")),Hee=Wee,m4=R(n=>{if(ze.debug("sanitizeDirective called with",n),!(typeof n!="object"||n==null)){if(Array.isArray(n)){n.forEach(e=>m4(e));return}for(const e of Object.keys(n)){if(ze.debug("Checking key",e),e.startsWith("__")||e.includes("proto")||e.includes("constr")||!X8e.has(e)||n[e]==null){ze.debug("sanitize deleting key: ",e),delete n[e];continue}if(typeof n[e]=="object"){ze.debug("sanitizing object",e),m4(n[e]);continue}const t=["themeCSS","fontFamily","altFontFamily"];for(const i of t)e.includes(i)&&(ze.debug("sanitizing css option",e),n[e]=Q8e(n[e]))}if(n.themeVariables)for(const e of Object.keys(n.themeVariables)){const t=n.themeVariables[e];t?.match&&!t.match(/^[\d "#%(),.;A-Za-z]+$/)&&(n.themeVariables[e]="")}ze.debug("After sanitization",n)}},"sanitizeDirective"),Q8e=R(n=>{let e=0,t=0;for(const i of n){if(e<t)return"{ /* ERROR: Unbalanced CSS */ }";i==="{"?e++:i==="}"&&t++}return e!==t?"{ /* ERROR: Unbalanced CSS */ }":n},"sanitizeCss"),j1=Object.freeze(Hee),ma=gs({},j1),p4,Pm=[],Uv=gs({},j1),l3=R((n,e)=>{let t=gs({},n),i={};for(const r of e)jee(r),i=gs(i,r);if(t=gs(t,i),i.theme&&i.theme in Mu){const r=gs({},p4),s=gs(r.themeVariables||{},i.themeVariables);t.theme&&t.theme in Mu&&(t.themeVariables=Mu[t.theme].getThemeVariables(s))}return Uv=t,Uee(Uv),Uv},"updateCurrentConfig"),J8e=R(n=>(ma=gs({},j1),ma=gs(ma,n),n.theme&&Mu[n.theme]&&(ma.themeVariables=Mu[n.theme].getThemeVariables(n.themeVariables)),l3(ma,Pm),ma),"setSiteConfig"),e9e=R(n=>{p4=gs({},n)},"saveConfigFromInitialize"),t9e=R(n=>(ma=gs(ma,n),l3(ma,Pm),ma),"updateSiteConfig"),Vee=R(()=>gs({},ma),"getSiteConfig"),$ee=R(n=>(Uee(n),gs(Uv,n),bo()),"setConfig"),bo=R(()=>gs({},Uv),"getConfig"),jee=R(n=>{n&&(["secure",...ma.secure??[]].forEach(e=>{Object.hasOwn(n,e)&&(ze.debug(`Denied attempt to modify a secure key ${e}`,n[e]),delete n[e])}),Object.keys(n).forEach(e=>{e.startsWith("__")&&delete n[e]}),Object.keys(n).forEach(e=>{typeof n[e]=="string"&&(n[e].includes("<")||n[e].includes(">")||n[e].includes("url(data:"))&&delete n[e],typeof n[e]=="object"&&jee(n[e])}))},"sanitize"),i9e=R(n=>{m4(n),n.fontFamily&&!n.themeVariables?.fontFamily&&(n.themeVariables={...n.themeVariables,fontFamily:n.fontFamily}),Pm.push(n),l3(ma,Pm)},"addDirective"),b4=R((n=ma)=>{Pm=[],l3(n,Pm)},"reset"),n9e={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},hq={},r9e=R(n=>{hq[n]||(ze.warn(n9e[n]),hq[n]=!0)},"issueWarning"),Uee=R(n=>{n&&(n.lazyLoadedDiagrams||n.loadExternalDiagramsAtStartup)&&r9e("LAZY_LOAD_DEPRECATED")},"checkConfig"),dUe=R(()=>{let n={};p4&&(n=gs(n,p4));for(const e of Pm)n=gs(n,e);return n},"getUserDefinedConfig"),Zy=/<br\s*\/?>/gi,s9e=R(n=>n?Kee(n).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),o9e=(()=>{let n=!1;return()=>{n||(qee(),n=!0)}})();function qee(){const n="data-temp-href-target";$1.addHook("beforeSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute("target")&&e.setAttribute(n,e.getAttribute("target")??"")}),$1.addHook("afterSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute(n)&&(e.setAttribute("target",e.getAttribute(n)??""),e.removeAttribute(n),e.getAttribute("target")==="_blank"&&e.setAttribute("rel","noopener"))})}R(qee,"setupDompurifyHooks");var Gee=R(n=>(o9e(),$1.sanitize(n)),"removeScript"),uq=R((n,e)=>{if(e.flowchart?.htmlLabels!==!1){const t=e.securityLevel;t==="antiscript"||t==="strict"?n=Gee(n):t!=="loose"&&(n=Kee(n),n=n.replace(/</g,"&lt;").replace(/>/g,"&gt;"),n=n.replace(/=/g,"&equals;"),n=h9e(n))}return n},"sanitizeMore"),Il=R((n,e)=>n&&(e.dompurifyConfig?n=$1.sanitize(uq(n,e),e.dompurifyConfig).toString():n=$1.sanitize(uq(n,e),{FORBID_TAGS:["style"]}).toString(),n),"sanitizeText"),a9e=R((n,e)=>typeof n=="string"?Il(n,e):n.flat().map(t=>Il(t,e)),"sanitizeTextOrArray"),l9e=R(n=>Zy.test(n),"hasBreaks"),c9e=R(n=>n.split(Zy),"splitBreaks"),h9e=R(n=>n.replace(/#br#/g,"<br/>"),"placeholderToBreak"),Kee=R(n=>n.replace(Zy,"#br#"),"breakToPlaceholder"),u9e=R(n=>{let e="";return n&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=CSS.escape(e)),e},"getUrl"),vs=R(n=>!(n===!1||["false","null","0"].includes(String(n).trim().toLowerCase())),"evaluate"),d9e=R(function(...n){const e=n.filter(t=>!isNaN(t));return Math.max(...e)},"getMax"),f9e=R(function(...n){const e=n.filter(t=>!isNaN(t));return Math.min(...e)},"getMin"),dq=R(function(n){const e=n.split(/(,)/),t=[];for(let i=0;i<e.length;i++){let r=e[i];if(r===","&&i>0&&i+1<e.length){const s=e[i-1],o=e[i+1];g9e(s,o)&&(r=s+","+o,i++,t.pop())}t.push(m9e(r))}return t.join("")},"parseGenericTypes"),MN=R((n,e)=>Math.max(0,n.split(e).length-1),"countOccurrence"),g9e=R((n,e)=>{const t=MN(n,"~"),i=MN(e,"~");return t===1&&i===1},"shouldCombineSets"),m9e=R(n=>{const e=MN(n,"~");let t=!1;if(e<=1)return n;e%2!==0&&n.startsWith("~")&&(n=n.substring(1),t=!0);const i=[...n];let r=i.indexOf("~"),s=i.lastIndexOf("~");for(;r!==-1&&s!==-1&&r!==s;)i[r]="<",i[s]=">",r=i.indexOf("~"),s=i.lastIndexOf("~");return t&&i.unshift("~"),i.join("")},"processSet"),fq=R(()=>window.MathMLElement!==void 0,"isMathMLSupported"),AN=/\$\$(.*)\$\$/g,U1=R(n=>(n.match(AN)?.length??0)>0,"hasKatex"),fUe=R(async(n,e)=>{const t=document.createElement("div");t.innerHTML=await OP(n,e),t.id="katex-temp",t.style.visibility="hidden",t.style.position="absolute",t.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",t);const r={width:t.clientWidth,height:t.clientHeight};return t.remove(),r},"calculateMathMLDimensions"),p9e=R(async(n,e)=>{if(!U1(n))return n;if(!(fq()||e.legacyMathML||e.forceLegacyMathML))return n.replace(AN,"MathML is unsupported in this environment.");{const{default:t}=await fn(async()=>{const{default:r}=await Promise.resolve().then(()=>t8e);return{default:r}},void 0),i=e.forceLegacyMathML||!fq()&&e.legacyMathML?"htmlAndMathml":"mathml";return n.split(Zy).map(r=>U1(r)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${r}</div>`:`<div>${r}</div>`).join("").replace(AN,(r,s)=>t.renderToString(s,{throwOnError:!0,displayMode:!0,output:i}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatexUnsanitized"),OP=R(async(n,e)=>Il(await p9e(n,e),e),"renderKatexSanitized"),mb={getRows:s9e,sanitizeText:Il,sanitizeTextOrArray:a9e,hasBreaks:l9e,splitBreaks:c9e,lineBreakRegex:Zy,removeScript:Gee,getUrl:u9e,evaluate:vs,getMax:d9e,getMin:f9e},b9e=R(function(n,e){for(let t of e)n.attr(t[0],t[1])},"d3Attrs"),_9e=R(function(n,e,t){let i=new Map;return t?(i.set("width","100%"),i.set("style",`max-width: ${e}px;`)):(i.set("height",n),i.set("width",e)),i},"calculateSvgSizeAttrs"),Yee=R(function(n,e,t,i){const r=_9e(e,t,i);b9e(n,r)},"configureSvgSize"),v9e=R(function(n,e,t,i){const r=e.node().getBBox(),s=r.width,o=r.height;ze.info(`SVG bounds: ${s}x${o}`,r);let a=0,l=0;ze.info(`Graph bounds: ${a}x${l}`,n),a=s+t*2,l=o+t*2,ze.info(`Calculated bounds: ${a}x${l}`),Yee(e,l,a,i);const c=`${r.x-t} ${r.y-t} ${r.width+2*t} ${r.height+2*t}`;e.attr("viewBox",c)},"setupGraphViewbox"),ax={},w9e=R((n,e,t)=>{let i="";return n in ax&&ax[n]?i=ax[n](t):ze.warn(`No theme found for ${n}`),` & {
    font-family: ${t.fontFamily};
    font-size: ${t.fontSize};
    fill: ${t.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${t.errorBkgColor};
  }
  & .error-text {
    fill: ${t.errorTextColor};
    stroke: ${t.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${t.lineColor};
    stroke: ${t.lineColor};
  }
  & .marker.cross {
    stroke: ${t.lineColor};
  }

  & svg {
    font-family: ${t.fontFamily};
    font-size: ${t.fontSize};
  }
   & p {
    margin: 0
   }

  ${i}

  ${e}
`},"getStyles"),y9e=R((n,e)=>{e!==void 0&&(ax[n]=e)},"addStylesForDiagram"),C9e=w9e,Zee={};h8e(Zee,{clear:()=>S9e,getAccDescription:()=>T9e,getAccTitle:()=>k9e,getDiagramTitle:()=>E9e,setAccDescription:()=>L9e,setAccTitle:()=>x9e,setDiagramTitle:()=>D9e});var BP="",FP="",WP="",zP=R(n=>Il(n,bo()),"sanitizeText"),S9e=R(()=>{BP="",WP="",FP=""},"clear"),x9e=R(n=>{BP=zP(n).replace(/^\s+/g,"")},"setAccTitle"),k9e=R(()=>BP,"getAccTitle"),L9e=R(n=>{WP=zP(n).replace(/\n\s+/g,`
`)},"setAccDescription"),T9e=R(()=>WP,"getAccDescription"),D9e=R(n=>{FP=zP(n)},"setDiagramTitle"),E9e=R(()=>FP,"getDiagramTitle"),gq=ze,I9e=RP,vn=bo,gUe=$ee,mUe=j1,HP=R(n=>Il(n,vn()),"sanitizeText"),N9e=v9e,M9e=R(()=>Zee,"getCommonDb"),_4={},v4=R((n,e,t)=>{_4[n]&&gq.warn(`Diagram with id ${n} already registered. Overwriting.`),_4[n]=e,t&&Fee(n,t),y9e(n,e.styles),e.injectUtils?.(gq,I9e,vn,HP,N9e,M9e(),()=>{})},"registerDiagram"),RN=R(n=>{if(n in _4)return _4[n];throw new A9e(n)},"getDiagram"),b1,A9e=(b1=class extends Error{constructor(e){super(`Diagram ${e} not found.`)}},R(b1,"DiagramNotFoundError"),b1),R9e={value:()=>{}};function Xee(){for(var n=0,e=arguments.length,t={},i;n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new lx(t)}function lx(n){this._=n}function P9e(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");if(r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}lx.prototype=Xee.prototype={constructor:lx,on:function(n,e){var t=this._,i=P9e(n+"",t),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(n=i[s]).type)&&(r=O9e(t[r],n.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(n=i[s]).type)t[r]=mq(t[r],n.name,e);else if(e==null)for(r in t)t[r]=mq(t[r],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new lx(n)},call:function(n,e){if((r=arguments.length-2)>0)for(var t=new Array(r),i=0,r,s;i<r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],i=0,r=s.length;i<r;++i)s[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],r=0,s=i.length;r<s;++r)i[r].value.apply(e,t)}};function O9e(n,e){for(var t=0,i=n.length,r;t<i;++t)if((r=n[t]).name===e)return r.value}function mq(n,e,t){for(var i=0,r=n.length;i<r;++i)if(n[i].name===e){n[i]=R9e,n=n.slice(0,i).concat(n.slice(i+1));break}return t!=null&&n.push({name:e,value:t}),n}var PN="http://www.w3.org/1999/xhtml";const pq={svg:"http://www.w3.org/2000/svg",xhtml:PN,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function c3(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),pq.hasOwnProperty(e)?{space:pq[e],local:n}:n}function B9e(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===PN&&e.documentElement.namespaceURI===PN?e.createElement(n):e.createElementNS(t,n)}}function F9e(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Qee(n){var e=c3(n);return(e.local?F9e:B9e)(e)}function W9e(){}function VP(n){return n==null?W9e:function(){return this.querySelector(n)}}function z9e(n){typeof n!="function"&&(n=VP(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,a=i[r]=new Array(o),l,c,h=0;h<o;++h)(l=s[h])&&(c=n.call(l,l.__data__,h,s))&&("__data__"in l&&(c.__data__=l.__data__),a[h]=c);return new Xa(i,this._parents)}function H9e(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function V9e(){return[]}function Jee(n){return n==null?V9e:function(){return this.querySelectorAll(n)}}function $9e(n){return function(){return H9e(n.apply(this,arguments))}}function j9e(n){typeof n=="function"?n=$9e(n):n=Jee(n);for(var e=this._groups,t=e.length,i=[],r=[],s=0;s<t;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(i.push(n.call(l,l.__data__,c,o)),r.push(l));return new Xa(i,r)}function ete(n){return function(){return this.matches(n)}}function tte(n){return function(e){return e.matches(n)}}var U9e=Array.prototype.find;function q9e(n){return function(){return U9e.call(this.children,n)}}function G9e(){return this.firstElementChild}function K9e(n){return this.select(n==null?G9e:q9e(typeof n=="function"?n:tte(n)))}var Y9e=Array.prototype.filter;function Z9e(){return Array.from(this.children)}function X9e(n){return function(){return Y9e.call(this.children,n)}}function Q9e(n){return this.selectAll(n==null?Z9e:X9e(typeof n=="function"?n:tte(n)))}function J9e(n){typeof n!="function"&&(n=ete(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&n.call(l,l.__data__,c,s)&&a.push(l);return new Xa(i,this._parents)}function ite(n){return new Array(n.length)}function eIe(){return new Xa(this._enter||this._groups.map(ite),this._parents)}function w4(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}w4.prototype={constructor:w4,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function tIe(n){return function(){return n}}function iIe(n,e,t,i,r,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],i[o]=a):t[o]=new w4(n,s[o]);for(;o<l;++o)(a=e[o])&&(r[o]=a)}function nIe(n,e,t,i,r,s,o){var a,l,c=new Map,h=e.length,u=s.length,d=new Array(h),g;for(a=0;a<h;++a)(l=e[a])&&(d[a]=g=o.call(l,l.__data__,a,e)+"",c.has(g)?r[a]=l:c.set(g,l));for(a=0;a<u;++a)g=o.call(n,s[a],a,s)+"",(l=c.get(g))?(i[a]=l,l.__data__=s[a],c.delete(g)):t[a]=new w4(n,s[a]);for(a=0;a<h;++a)(l=e[a])&&c.get(d[a])===l&&(r[a]=l)}function rIe(n){return n.__data__}function sIe(n,e){if(!arguments.length)return Array.from(this,rIe);var t=e?nIe:iIe,i=this._parents,r=this._groups;typeof n!="function"&&(n=tIe(n));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var h=i[c],u=r[c],d=u.length,g=oIe(n.call(h,h&&h.__data__,c,i)),p=g.length,b=a[c]=new Array(p),_=o[c]=new Array(p),w=l[c]=new Array(d);t(h,u,b,_,w,g,e);for(var y=0,k=0,L,T;y<p;++y)if(L=b[y]){for(y>=k&&(k=y+1);!(T=_[k])&&++k<p;);L._next=T||null}}return o=new Xa(o,i),o._enter=a,o._exit=l,o}function oIe(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function aIe(){return new Xa(this._exit||this._groups.map(ite),this._parents)}function lIe(n,e,t){var i=this.enter(),r=this,s=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(r=e(r),r&&(r=r.selection())),t==null?s.remove():t(s),i&&r?i.merge(r).order():r}function cIe(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,r=t.length,s=i.length,o=Math.min(r,s),a=new Array(r),l=0;l<o;++l)for(var c=t[l],h=i[l],u=c.length,d=a[l]=new Array(u),g,p=0;p<u;++p)(g=c[p]||h[p])&&(d[p]=g);for(;l<r;++l)a[l]=t[l];return new Xa(a,this._parents)}function hIe(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var i=n[e],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function uIe(n){n||(n=dIe);function e(u,d){return u&&d?n(u.__data__,d.__data__):!u-!d}for(var t=this._groups,i=t.length,r=new Array(i),s=0;s<i;++s){for(var o=t[s],a=o.length,l=r[s]=new Array(a),c,h=0;h<a;++h)(c=o[h])&&(l[h]=c);l.sort(e)}return new Xa(r,this._parents).order()}function dIe(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function fIe(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function gIe(){return Array.from(this)}function mIe(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function pIe(){let n=0;for(const e of this)++n;return n}function bIe(){return!this.node()}function _Ie(n){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var r=e[t],s=0,o=r.length,a;s<o;++s)(a=r[s])&&n.call(a,a.__data__,s,r);return this}function vIe(n){return function(){this.removeAttribute(n)}}function wIe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function yIe(n,e){return function(){this.setAttribute(n,e)}}function CIe(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function SIe(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function xIe(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function kIe(n,e){var t=c3(n);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((e==null?t.local?wIe:vIe:typeof e=="function"?t.local?xIe:SIe:t.local?CIe:yIe)(t,e))}function nte(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function LIe(n){return function(){this.style.removeProperty(n)}}function TIe(n,e,t){return function(){this.style.setProperty(n,e,t)}}function DIe(n,e,t){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function EIe(n,e,t){return arguments.length>1?this.each((e==null?LIe:typeof e=="function"?DIe:TIe)(n,e,t??"")):q1(this.node(),n)}function q1(n,e){return n.style.getPropertyValue(e)||nte(n).getComputedStyle(n,null).getPropertyValue(e)}function IIe(n){return function(){delete this[n]}}function NIe(n,e){return function(){this[n]=e}}function MIe(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function AIe(n,e){return arguments.length>1?this.each((e==null?IIe:typeof e=="function"?MIe:NIe)(n,e)):this.node()[n]}function rte(n){return n.trim().split(/^|\s+/)}function $P(n){return n.classList||new ste(n)}function ste(n){this._node=n,this._names=rte(n.getAttribute("class")||"")}ste.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function ote(n,e){for(var t=$P(n),i=-1,r=e.length;++i<r;)t.add(e[i])}function ate(n,e){for(var t=$P(n),i=-1,r=e.length;++i<r;)t.remove(e[i])}function RIe(n){return function(){ote(this,n)}}function PIe(n){return function(){ate(this,n)}}function OIe(n,e){return function(){(e.apply(this,arguments)?ote:ate)(this,n)}}function BIe(n,e){var t=rte(n+"");if(arguments.length<2){for(var i=$P(this.node()),r=-1,s=t.length;++r<s;)if(!i.contains(t[r]))return!1;return!0}return this.each((typeof e=="function"?OIe:e?RIe:PIe)(t,e))}function FIe(){this.textContent=""}function WIe(n){return function(){this.textContent=n}}function zIe(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function HIe(n){return arguments.length?this.each(n==null?FIe:(typeof n=="function"?zIe:WIe)(n)):this.node().textContent}function VIe(){this.innerHTML=""}function $Ie(n){return function(){this.innerHTML=n}}function jIe(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function UIe(n){return arguments.length?this.each(n==null?VIe:(typeof n=="function"?jIe:$Ie)(n)):this.node().innerHTML}function qIe(){this.nextSibling&&this.parentNode.appendChild(this)}function GIe(){return this.each(qIe)}function KIe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function YIe(){return this.each(KIe)}function ZIe(n){var e=typeof n=="function"?n:Qee(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function XIe(){return null}function QIe(n,e){var t=typeof n=="function"?n:Qee(n),i=e==null?XIe:typeof e=="function"?e:VP(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})}function JIe(){var n=this.parentNode;n&&n.removeChild(this)}function eNe(){return this.each(JIe)}function tNe(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function iNe(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function nNe(n){return this.select(n?iNe:tNe)}function rNe(n){return arguments.length?this.property("__data__",n):this.node().__data__}function sNe(n){return function(e){n.call(this,e,this.__data__)}}function oNe(n){return n.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function aNe(n){return function(){var e=this.__on;if(e){for(var t=0,i=-1,r=e.length,s;t<r;++t)s=e[t],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function lNe(n,e,t){return function(){var i=this.__on,r,s=sNe(e);if(i){for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===n.type&&r.name===n.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=t),r.value=e;return}}this.addEventListener(n.type,s,t),r={type:n.type,name:n.name,value:e,listener:s,options:t},i?i.push(r):this.__on=[r]}}function cNe(n,e,t){var i=oNe(n+""),r,s=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,h;l<c;++l)for(r=0,h=a[l];r<s;++r)if((o=i[r]).type===h.type&&o.name===h.name)return h.value}return}for(a=e?lNe:aNe,r=0;r<s;++r)this.each(a(i[r],e,t));return this}function lte(n,e,t){var i=nte(n),r=i.CustomEvent;typeof r=="function"?r=new r(e,t):(r=i.document.createEvent("Event"),t?(r.initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(e,!1,!1)),n.dispatchEvent(r)}function hNe(n,e){return function(){return lte(this,n,e)}}function uNe(n,e){return function(){return lte(this,n,e.apply(this,arguments))}}function dNe(n,e){return this.each((typeof e=="function"?uNe:hNe)(n,e))}function*fNe(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var cte=[null];function Xa(n,e){this._groups=n,this._parents=e}function Xy(){return new Xa([[document.documentElement]],cte)}function gNe(){return this}Xa.prototype=Xy.prototype={constructor:Xa,select:z9e,selectAll:j9e,selectChild:K9e,selectChildren:Q9e,filter:J9e,data:sIe,enter:eIe,exit:aIe,join:lIe,merge:cIe,selection:gNe,order:hIe,sort:uIe,call:fIe,nodes:gIe,node:mIe,size:pIe,empty:bIe,each:_Ie,attr:kIe,style:EIe,property:AIe,classed:BIe,text:HIe,html:UIe,raise:GIe,lower:YIe,append:ZIe,insert:QIe,remove:eNe,clone:nNe,datum:rNe,on:cNe,dispatch:dNe,[Symbol.iterator]:fNe};function Ji(n){return typeof n=="string"?new Xa([[document.querySelector(n)]],[document.documentElement]):new Xa([[n]],cte)}function jP(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function hte(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function Qy(){}var ny=.7,y4=1/ny,a1="\\s*([+-]?\\d+)\\s*",ry="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mNe=/^#([0-9a-f]{3,8})$/,pNe=new RegExp(`^rgb\\(${a1},${a1},${a1}\\)$`),bNe=new RegExp(`^rgb\\(${sh},${sh},${sh}\\)$`),_Ne=new RegExp(`^rgba\\(${a1},${a1},${a1},${ry}\\)$`),vNe=new RegExp(`^rgba\\(${sh},${sh},${sh},${ry}\\)$`),wNe=new RegExp(`^hsl\\(${ry},${sh},${sh}\\)$`),yNe=new RegExp(`^hsla\\(${ry},${sh},${sh},${ry}\\)$`),bq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jP(Qy,sy,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:_q,formatHex:_q,formatHex8:CNe,formatHsl:SNe,formatRgb:vq,toString:vq});function _q(){return this.rgb().formatHex()}function CNe(){return this.rgb().formatHex8()}function SNe(){return ute(this).formatHsl()}function vq(){return this.rgb().formatRgb()}function sy(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=mNe.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?wq(e):t===3?new ya(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?_S(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?_S(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=pNe.exec(n))?new ya(e[1],e[2],e[3],1):(e=bNe.exec(n))?new ya(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=_Ne.exec(n))?_S(e[1],e[2],e[3],e[4]):(e=vNe.exec(n))?_S(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=wNe.exec(n))?Sq(e[1],e[2]/100,e[3]/100,1):(e=yNe.exec(n))?Sq(e[1],e[2]/100,e[3]/100,e[4]):bq.hasOwnProperty(n)?wq(bq[n]):n==="transparent"?new ya(NaN,NaN,NaN,0):null}function wq(n){return new ya(n>>16&255,n>>8&255,n&255,1)}function _S(n,e,t,i){return i<=0&&(n=e=t=NaN),new ya(n,e,t,i)}function xNe(n){return n instanceof Qy||(n=sy(n)),n?(n=n.rgb(),new ya(n.r,n.g,n.b,n.opacity)):new ya}function ON(n,e,t,i){return arguments.length===1?xNe(n):new ya(n,e,t,i??1)}function ya(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}jP(ya,ON,hte(Qy,{brighter(n){return n=n==null?y4:Math.pow(y4,n),new ya(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?ny:Math.pow(ny,n),new ya(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new ya(lm(this.r),lm(this.g),lm(this.b),C4(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yq,formatHex:yq,formatHex8:kNe,formatRgb:Cq,toString:Cq}));function yq(){return`#${Yg(this.r)}${Yg(this.g)}${Yg(this.b)}`}function kNe(){return`#${Yg(this.r)}${Yg(this.g)}${Yg(this.b)}${Yg((isNaN(this.opacity)?1:this.opacity)*255)}`}function Cq(){const n=C4(this.opacity);return`${n===1?"rgb(":"rgba("}${lm(this.r)}, ${lm(this.g)}, ${lm(this.b)}${n===1?")":`, ${n})`}`}function C4(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function lm(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Yg(n){return n=lm(n),(n<16?"0":"")+n.toString(16)}function Sq(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new sc(n,e,t,i)}function ute(n){if(n instanceof sc)return new sc(n.h,n.s,n.l,n.opacity);if(n instanceof Qy||(n=sy(n)),!n)return new sc;if(n instanceof sc)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(t-i)/a+(t<i)*6:t===s?o=(i-e)/a+2:o=(e-t)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new sc(o,a,l,n.opacity)}function LNe(n,e,t,i){return arguments.length===1?ute(n):new sc(n,e,t,i??1)}function sc(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}jP(sc,LNe,hte(Qy,{brighter(n){return n=n==null?y4:Math.pow(y4,n),new sc(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?ny:Math.pow(ny,n),new sc(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new ya(fD(n>=240?n-240:n+120,r,i),fD(n,r,i),fD(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new sc(xq(this.h),vS(this.s),vS(this.l),C4(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=C4(this.opacity);return`${n===1?"hsl(":"hsla("}${xq(this.h)}, ${vS(this.s)*100}%, ${vS(this.l)*100}%${n===1?")":`, ${n})`}`}}));function xq(n){return n=(n||0)%360,n<0?n+360:n}function vS(n){return Math.max(0,Math.min(1,n||0))}function fD(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const UP=n=>()=>n;function dte(n,e){return function(t){return n+t*e}}function TNe(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function pUe(n,e){var t=e-n;return t?dte(n,t>180||t<-180?t-360*Math.round(t/360):t):UP(isNaN(n)?e:n)}function DNe(n){return(n=+n)==1?fte:function(e,t){return t-e?TNe(e,t,n):UP(isNaN(e)?t:e)}}function fte(n,e){var t=e-n;return t?dte(n,t):UP(isNaN(n)?e:n)}const kq=function n(e){var t=DNe(e);function i(r,s){var o=t((r=ON(r)).r,(s=ON(s)).r),a=t(r.g,s.g),l=t(r.b,s.b),c=fte(r.opacity,s.opacity);return function(h){return r.r=o(h),r.g=a(h),r.b=l(h),r.opacity=c(h),r+""}}return i.gamma=n,i}(1);function Md(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var BN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gD=new RegExp(BN.source,"g");function ENe(n){return function(){return n}}function INe(n){return function(e){return n(e)+""}}function NNe(n,e){var t=BN.lastIndex=gD.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(n=n+"",e=e+"";(i=BN.exec(n))&&(r=gD.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:Md(i,r)})),t=gD.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?INe(l[0].x):ENe(e):(e=l.length,function(c){for(var h=0,u;h<e;++h)a[(u=l[h]).i]=u.x(c);return a.join("")})}var Lq=180/Math.PI,FN={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function gte(n,e,t,i,r,s){var o,a,l;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(l=n*t+e*i)&&(t-=n*l,i-=e*l),(a=Math.sqrt(t*t+i*i))&&(t/=a,i/=a,l/=a),n*i<e*t&&(n=-n,e=-e,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,n)*Lq,skewX:Math.atan(l)*Lq,scaleX:o,scaleY:a}}var wS;function MNe(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?FN:gte(e.a,e.b,e.c,e.d,e.e,e.f)}function ANe(n){return n==null||(wS||(wS=document.createElementNS("http://www.w3.org/2000/svg","g")),wS.setAttribute("transform",n),!(n=wS.transform.baseVal.consolidate()))?FN:(n=n.matrix,gte(n.a,n.b,n.c,n.d,n.e,n.f))}function mte(n,e,t,i){function r(c){return c.length?c.pop()+" ":""}function s(c,h,u,d,g,p){if(c!==u||h!==d){var b=g.push("translate(",null,e,null,t);p.push({i:b-4,x:Md(c,u)},{i:b-2,x:Md(h,d)})}else(u||d)&&g.push("translate("+u+e+d+t)}function o(c,h,u,d){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),d.push({i:u.push(r(u)+"rotate(",null,i)-2,x:Md(c,h)})):h&&u.push(r(u)+"rotate("+h+i)}function a(c,h,u,d){c!==h?d.push({i:u.push(r(u)+"skewX(",null,i)-2,x:Md(c,h)}):h&&u.push(r(u)+"skewX("+h+i)}function l(c,h,u,d,g,p){if(c!==u||h!==d){var b=g.push(r(g)+"scale(",null,",",null,")");p.push({i:b-4,x:Md(c,u)},{i:b-2,x:Md(h,d)})}else(u!==1||d!==1)&&g.push(r(g)+"scale("+u+","+d+")")}return function(c,h){var u=[],d=[];return c=n(c),h=n(h),s(c.translateX,c.translateY,h.translateX,h.translateY,u,d),o(c.rotate,h.rotate,u,d),a(c.skewX,h.skewX,u,d),l(c.scaleX,c.scaleY,h.scaleX,h.scaleY,u,d),c=h=null,function(g){for(var p=-1,b=d.length,_;++p<b;)u[(_=d[p]).i]=_.x(g);return u.join("")}}}var RNe=mte(MNe,"px, ","px)","deg)"),PNe=mte(ANe,", ",")",")"),G1=0,ev=0,M_=0,pte=1e3,S4,tv,x4=0,Om=0,h3=0,oy=typeof performance=="object"&&performance.now?performance:Date,bte=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function qP(){return Om||(bte(ONe),Om=oy.now()+h3)}function ONe(){Om=0}function k4(){this._call=this._time=this._next=null}k4.prototype=_te.prototype={constructor:k4,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?qP():+t)+(e==null?0:+e),!this._next&&tv!==this&&(tv?tv._next=this:S4=this,tv=this),this._call=n,this._time=t,WN()},stop:function(){this._call&&(this._call=null,this._time=1/0,WN())}};function _te(n,e,t){var i=new k4;return i.restart(n,e,t),i}function BNe(){qP(),++G1;for(var n=S4,e;n;)(e=Om-n._time)>=0&&n._call.call(void 0,e),n=n._next;--G1}function Tq(){Om=(x4=oy.now())+h3,G1=ev=0;try{BNe()}finally{G1=0,WNe(),Om=0}}function FNe(){var n=oy.now(),e=n-x4;e>pte&&(h3-=e,x4=n)}function WNe(){for(var n,e=S4,t,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:S4=t);tv=n,WN(i)}function WN(n){if(!G1){ev&&(ev=clearTimeout(ev));var e=n-Om;e>24?(n<1/0&&(ev=setTimeout(Tq,n-oy.now()-h3)),M_&&(M_=clearInterval(M_))):(M_||(x4=oy.now(),M_=setInterval(FNe,pte)),G1=1,bte(Tq))}}function Dq(n,e,t){var i=new k4;return e=e==null?0:+e,i.restart(r=>{i.stop(),n(r+e)},e,t),i}var zNe=Xee("start","end","cancel","interrupt"),HNe=[],vte=0,Eq=1,zN=2,cx=3,Iq=4,HN=5,hx=6;function u3(n,e,t,i,r,s){var o=n.__transition;if(!o)n.__transition={};else if(t in o)return;VNe(n,t,{name:e,index:i,group:r,on:zNe,tween:HNe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:vte})}function GP(n,e){var t=xc(n,e);if(t.state>vte)throw new Error("too late; already scheduled");return t}function Ch(n,e){var t=xc(n,e);if(t.state>cx)throw new Error("too late; already running");return t}function xc(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function VNe(n,e,t){var i=n.__transition,r;i[e]=t,t.timer=_te(s,0,t.time);function s(c){t.state=Eq,t.timer.restart(o,t.delay,t.time),t.delay<=c&&o(c-t.delay)}function o(c){var h,u,d,g;if(t.state!==Eq)return l();for(h in i)if(g=i[h],g.name===t.name){if(g.state===cx)return Dq(o);g.state===Iq?(g.state=hx,g.timer.stop(),g.on.call("interrupt",n,n.__data__,g.index,g.group),delete i[h]):+h<e&&(g.state=hx,g.timer.stop(),g.on.call("cancel",n,n.__data__,g.index,g.group),delete i[h])}if(Dq(function(){t.state===cx&&(t.state=Iq,t.timer.restart(a,t.delay,t.time),a(c))}),t.state=zN,t.on.call("start",n,n.__data__,t.index,t.group),t.state===zN){for(t.state=cx,r=new Array(d=t.tween.length),h=0,u=-1;h<d;++h)(g=t.tween[h].value.call(n,n.__data__,t.index,t.group))&&(r[++u]=g);r.length=u+1}}function a(c){for(var h=c<t.duration?t.ease.call(null,c/t.duration):(t.timer.restart(l),t.state=HN,1),u=-1,d=r.length;++u<d;)r[u].call(n,h);t.state===HN&&(t.on.call("end",n,n.__data__,t.index,t.group),l())}function l(){t.state=hx,t.timer.stop(),delete i[e];for(var c in i)return;delete n.__transition}}function $Ne(n,e){var t=n.__transition,i,r,s=!0,o;if(t){e=e==null?null:e+"";for(o in t){if((i=t[o]).name!==e){s=!1;continue}r=i.state>zN&&i.state<HN,i.state=hx,i.timer.stop(),i.on.call(r?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete t[o]}s&&delete n.__transition}}function jNe(n){return this.each(function(){$Ne(this,n)})}function UNe(n,e){var t,i;return function(){var r=Ch(this,n),s=r.tween;if(s!==t){i=t=s;for(var o=0,a=i.length;o<a;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function qNe(n,e,t){var i,r;if(typeof t!="function")throw new Error;return function(){var s=Ch(this,n),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:e,value:t},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=a;break}l===c&&r.push(a)}s.tween=r}}function GNe(n,e){var t=this._id;if(n+="",arguments.length<2){for(var i=xc(this.node(),t).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===n)return o.value;return null}return this.each((e==null?UNe:qNe)(t,n,e))}function KP(n,e,t){var i=n._id;return n.each(function(){var r=Ch(this,i);(r.value||(r.value={}))[e]=t.apply(this,arguments)}),function(r){return xc(r,i).value[e]}}function wte(n,e){var t;return(typeof e=="number"?Md:e instanceof sy?kq:(t=sy(e))?(e=t,kq):NNe)(n,e)}function KNe(n){return function(){this.removeAttribute(n)}}function YNe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function ZNe(n,e,t){var i,r=t+"",s;return function(){var o=this.getAttribute(n);return o===r?null:o===i?s:s=e(i=o,t)}}function XNe(n,e,t){var i,r=t+"",s;return function(){var o=this.getAttributeNS(n.space,n.local);return o===r?null:o===i?s:s=e(i=o,t)}}function QNe(n,e,t){var i,r,s;return function(){var o,a=t(this),l;return a==null?void this.removeAttribute(n):(o=this.getAttribute(n),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,a)))}}function JNe(n,e,t){var i,r,s;return function(){var o,a=t(this),l;return a==null?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,a)))}}function eMe(n,e){var t=c3(n),i=t==="transform"?PNe:wte;return this.attrTween(n,typeof e=="function"?(t.local?JNe:QNe)(t,i,KP(this,"attr."+n,e)):e==null?(t.local?YNe:KNe)(t):(t.local?XNe:ZNe)(t,i,e))}function tMe(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function iMe(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function nMe(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&iMe(n,s)),t}return r._value=e,r}function rMe(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&tMe(n,s)),t}return r._value=e,r}function sMe(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var i=c3(n);return this.tween(t,(i.local?nMe:rMe)(i,e))}function oMe(n,e){return function(){GP(this,n).delay=+e.apply(this,arguments)}}function aMe(n,e){return e=+e,function(){GP(this,n).delay=e}}function lMe(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?oMe:aMe)(e,n)):xc(this.node(),e).delay}function cMe(n,e){return function(){Ch(this,n).duration=+e.apply(this,arguments)}}function hMe(n,e){return e=+e,function(){Ch(this,n).duration=e}}function uMe(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?cMe:hMe)(e,n)):xc(this.node(),e).duration}function dMe(n,e){if(typeof e!="function")throw new Error;return function(){Ch(this,n).ease=e}}function fMe(n){var e=this._id;return arguments.length?this.each(dMe(e,n)):xc(this.node(),e).ease}function gMe(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;Ch(this,n).ease=t}}function mMe(n){if(typeof n!="function")throw new Error;return this.each(gMe(this._id,n))}function pMe(n){typeof n!="function"&&(n=ete(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&n.call(l,l.__data__,c,s)&&a.push(l);return new Hu(i,this._parents,this._name,this._id)}function bMe(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,i=e.length,r=t.length,s=Math.min(i,r),o=new Array(i),a=0;a<s;++a)for(var l=e[a],c=t[a],h=l.length,u=o[a]=new Array(h),d,g=0;g<h;++g)(d=l[g]||c[g])&&(u[g]=d);for(;a<i;++a)o[a]=e[a];return new Hu(o,this._parents,this._name,this._id)}function _Me(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function vMe(n,e,t){var i,r,s=_Me(e)?GP:Ch;return function(){var o=s(this,n),a=o.on;a!==i&&(r=(i=a).copy()).on(e,t),o.on=r}}function wMe(n,e){var t=this._id;return arguments.length<2?xc(this.node(),t).on.on(n):this.each(vMe(t,n,e))}function yMe(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function CMe(){return this.on("end.remove",yMe(this._id))}function SMe(n){var e=this._name,t=this._id;typeof n!="function"&&(n=VP(n));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var a=i[o],l=a.length,c=s[o]=new Array(l),h,u,d=0;d<l;++d)(h=a[d])&&(u=n.call(h,h.__data__,d,a))&&("__data__"in h&&(u.__data__=h.__data__),c[d]=u,u3(c[d],e,t,d,c,xc(h,t)));return new Hu(s,this._parents,e,t)}function xMe(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Jee(n));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var l=i[a],c=l.length,h,u=0;u<c;++u)if(h=l[u]){for(var d=n.call(h,h.__data__,u,l),g,p=xc(h,t),b=0,_=d.length;b<_;++b)(g=d[b])&&u3(g,e,t,b,d,p);s.push(d),o.push(h)}return new Hu(s,o,e,t)}var kMe=Xy.prototype.constructor;function LMe(){return new kMe(this._groups,this._parents)}function TMe(n,e){var t,i,r;return function(){var s=q1(this,n),o=(this.style.removeProperty(n),q1(this,n));return s===o?null:s===t&&o===i?r:r=e(t=s,i=o)}}function yte(n){return function(){this.style.removeProperty(n)}}function DMe(n,e,t){var i,r=t+"",s;return function(){var o=q1(this,n);return o===r?null:o===i?s:s=e(i=o,t)}}function EMe(n,e,t){var i,r,s;return function(){var o=q1(this,n),a=t(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(n),q1(this,n))),o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,a))}}function IMe(n,e){var t,i,r,s="style."+e,o="end."+s,a;return function(){var l=Ch(this,n),c=l.on,h=l.value[s]==null?a||(a=yte(e)):void 0;(c!==t||r!==h)&&(i=(t=c).copy()).on(o,r=h),l.on=i}}function NMe(n,e,t){var i=(n+="")=="transform"?RNe:wte;return e==null?this.styleTween(n,TMe(n,i)).on("end.style."+n,yte(n)):typeof e=="function"?this.styleTween(n,EMe(n,i,KP(this,"style."+n,e))).each(IMe(this._id,n)):this.styleTween(n,DMe(n,i,e),t).on("end.style."+n,null)}function MMe(n,e,t){return function(i){this.style.setProperty(n,e.call(this,i),t)}}function AMe(n,e,t){var i,r;function s(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&MMe(n,o,t)),i}return s._value=e,s}function RMe(n,e,t){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,AMe(n,e,t??""))}function PMe(n){return function(){this.textContent=n}}function OMe(n){return function(){var e=n(this);this.textContent=e??""}}function BMe(n){return this.tween("text",typeof n=="function"?OMe(KP(this,"text",n)):PMe(n==null?"":n+""))}function FMe(n){return function(e){this.textContent=n.call(this,e)}}function WMe(n){var e,t;function i(){var r=n.apply(this,arguments);return r!==t&&(e=(t=r)&&FMe(r)),e}return i._value=n,i}function zMe(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,WMe(n))}function HMe(){for(var n=this._name,e=this._id,t=Cte(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var h=xc(l,e);u3(l,n,t,c,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Hu(i,this._parents,n,t)}function VMe(){var n,e,t=this,i=t._id,r=t.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--r===0&&s()}};t.each(function(){var c=Ch(this,i),h=c.on;h!==n&&(e=(n=h).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),r===0&&s()})}var $Me=0;function Hu(n,e,t,i){this._groups=n,this._parents=e,this._name=t,this._id=i}function Cte(){return++$Me}var Wh=Xy.prototype;Hu.prototype={constructor:Hu,select:SMe,selectAll:xMe,selectChild:Wh.selectChild,selectChildren:Wh.selectChildren,filter:pMe,merge:bMe,selection:LMe,transition:HMe,call:Wh.call,nodes:Wh.nodes,node:Wh.node,size:Wh.size,empty:Wh.empty,each:Wh.each,on:wMe,attr:eMe,attrTween:sMe,style:NMe,styleTween:RMe,text:BMe,textTween:zMe,remove:CMe,tween:GNe,delay:lMe,duration:uMe,ease:fMe,easeVarying:mMe,end:VMe,[Symbol.iterator]:Wh[Symbol.iterator]};function jMe(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var UMe={time:null,delay:0,duration:250,ease:jMe};function qMe(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function GMe(n){var e,t;n instanceof Hu?(e=n._id,n=n._name):(e=Cte(),(t=UMe).time=qP(),n=n==null?null:n+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&u3(l,n,e,c,o,t||qMe(l,e));return new Hu(i,this._parents,n,e)}Xy.prototype.interrupt=jNe;Xy.prototype.transition=GMe;const VN=Math.PI,$N=2*VN,bg=1e-6,KMe=$N-bg;function Ste(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function YMe(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return Ste;const t=10**e;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*t)/t+i[r]}}class ZMe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ste:YMe(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,i,r){this._append`Q${+e},${+t},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,t,i,r,s,o){this._append`C${+e},${+t},${+i},${+r},${this._x1=+s},${this._y1=+o}`}arcTo(e,t,i,r,s){if(e=+e,t=+t,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=i-e,c=r-t,h=o-e,u=a-t,d=h*h+u*u;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(d>bg)if(!(Math.abs(u*l-c*h)>bg)||!s)this._append`L${this._x1=e},${this._y1=t}`;else{let g=i-o,p=r-a,b=l*l+c*c,_=g*g+p*p,w=Math.sqrt(b),y=Math.sqrt(d),k=s*Math.tan((VN-Math.acos((b+d-_)/(2*w*y)))/2),L=k/y,T=k/w;Math.abs(L-1)>bg&&this._append`L${e+L*h},${t+L*u}`,this._append`A${s},${s},0,0,${+(u*g>h*p)},${this._x1=e+T*l},${this._y1=t+T*c}`}}arc(e,t,i,r,s,o){if(e=+e,t=+t,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),c=e+a,h=t+l,u=1^o,d=o?r-s:s-r;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>bg||Math.abs(this._y1-h)>bg)&&this._append`L${c},${h}`,i&&(d<0&&(d=d%$N+$N),d>KMe?this._append`A${i},${i},0,1,${u},${e-a},${t-l}A${i},${i},0,1,${u},${this._x1=c},${this._y1=h}`:d>bg&&this._append`A${i},${i},0,${+(d>=VN)},${u},${this._x1=e+i*Math.cos(s)},${this._y1=t+i*Math.sin(s)}`)}rect(e,t,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function Gp(n){return function(){return n}}const bUe=Math.abs,_Ue=Math.atan2,vUe=Math.cos,wUe=Math.max,yUe=Math.min,CUe=Math.sin,SUe=Math.sqrt,Nq=1e-12,YP=Math.PI,Mq=YP/2,xUe=2*YP;function kUe(n){return n>1?0:n<-1?YP:Math.acos(n)}function LUe(n){return n>=1?Mq:n<=-1?-Mq:Math.asin(n)}function XMe(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const i=Math.floor(t);if(!(i>=0))throw new RangeError(`invalid digits: ${t}`);e=i}return n},()=>new ZMe(e)}function QMe(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function xte(n){this._context=n}xte.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function L4(n){return new xte(n)}function JMe(n){return n[0]}function eAe(n){return n[1]}function tAe(n,e){var t=Gp(!0),i=null,r=L4,s=null,o=XMe(a);n=typeof n=="function"?n:n===void 0?JMe:Gp(n),e=typeof e=="function"?e:e===void 0?eAe:Gp(e);function a(l){var c,h=(l=QMe(l)).length,u,d=!1,g;for(i==null&&(s=r(g=o())),c=0;c<=h;++c)!(c<h&&t(u=l[c],c,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+n(u,c,l),+e(u,c,l));if(g)return s=null,g+""||null}return a.x=function(l){return arguments.length?(n=typeof l=="function"?l:Gp(+l),a):n},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Gp(+l),a):e},a.defined=function(l){return arguments.length?(t=typeof l=="function"?l:Gp(!!l),a):t},a.curve=function(l){return arguments.length?(r=l,i!=null&&(s=r(i)),a):r},a.context=function(l){return arguments.length?(l==null?i=s=null:s=r(i=l),a):i},a}class kte{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function Lte(n){return new kte(n,!0)}function Tte(n){return new kte(n,!1)}function Sf(){}function T4(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function d3(n){this._context=n}d3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:T4(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:T4(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function ux(n){return new d3(n)}function Dte(n){this._context=n}Dte.prototype={areaStart:Sf,areaEnd:Sf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:T4(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function iAe(n){return new Dte(n)}function Ete(n){this._context=n}Ete.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 3:this._point=4;default:T4(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function nAe(n){return new Ete(n)}function Ite(n,e){this._basis=new d3(n),this._beta=e}Ite.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var n=this._x,e=this._y,t=n.length-1;if(t>0)for(var i=n[0],r=e[0],s=n[t]-i,o=e[t]-r,a=-1,l;++a<=t;)l=a/t,this._basis.point(this._beta*n[a]+(1-this._beta)*(i+l*s),this._beta*e[a]+(1-this._beta)*(r+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(n,e){this._x.push(+n),this._y.push(+e)}};const rAe=function n(e){function t(i){return e===1?new d3(i):new Ite(i,e)}return t.beta=function(i){return n(+i)},t}(.85);function D4(n,e,t){n._context.bezierCurveTo(n._x1+n._k*(n._x2-n._x0),n._y1+n._k*(n._y2-n._y0),n._x2+n._k*(n._x1-e),n._y2+n._k*(n._y1-t),n._x2,n._y2)}function ZP(n,e){this._context=n,this._k=(1-e)/6}ZP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:D4(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2,this._x1=n,this._y1=e;break;case 2:this._point=3;default:D4(this,n,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Nte=function n(e){function t(i){return new ZP(i,e)}return t.tension=function(i){return n(+i)},t}(0);function XP(n,e){this._context=n,this._k=(1-e)/6}XP.prototype={areaStart:Sf,areaEnd:Sf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x3=n,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=n,this._y4=e);break;case 2:this._point=3,this._x5=n,this._y5=e;break;default:D4(this,n,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const sAe=function n(e){function t(i){return new XP(i,e)}return t.tension=function(i){return n(+i)},t}(0);function QP(n,e){this._context=n,this._k=(1-e)/6}QP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:D4(this,n,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const oAe=function n(e){function t(i){return new QP(i,e)}return t.tension=function(i){return n(+i)},t}(0);function JP(n,e,t){var i=n._x1,r=n._y1,s=n._x2,o=n._y2;if(n._l01_a>Nq){var a=2*n._l01_2a+3*n._l01_a*n._l12_a+n._l12_2a,l=3*n._l01_a*(n._l01_a+n._l12_a);i=(i*a-n._x0*n._l12_2a+n._x2*n._l01_2a)/l,r=(r*a-n._y0*n._l12_2a+n._y2*n._l01_2a)/l}if(n._l23_a>Nq){var c=2*n._l23_2a+3*n._l23_a*n._l12_a+n._l12_2a,h=3*n._l23_a*(n._l23_a+n._l12_a);s=(s*c+n._x1*n._l23_2a-e*n._l12_2a)/h,o=(o*c+n._y1*n._l23_2a-t*n._l12_2a)/h}n._context.bezierCurveTo(i,r,s,o,n._x2,n._y2)}function Mte(n,e){this._context=n,this._alpha=e}Mte.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){if(n=+n,e=+e,this._point){var t=this._x2-n,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3;default:JP(this,n,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Ate=function n(e){function t(i){return e?new Mte(i,e):new ZP(i,0)}return t.alpha=function(i){return n(+i)},t}(.5);function Rte(n,e){this._context=n,this._alpha=e}Rte.prototype={areaStart:Sf,areaEnd:Sf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(n,e){if(n=+n,e=+e,this._point){var t=this._x2-n,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=n,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=n,this._y4=e);break;case 2:this._point=3,this._x5=n,this._y5=e;break;default:JP(this,n,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const aAe=function n(e){function t(i){return e?new Rte(i,e):new XP(i,0)}return t.alpha=function(i){return n(+i)},t}(.5);function Pte(n,e){this._context=n,this._alpha=e}Pte.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){if(n=+n,e=+e,this._point){var t=this._x2-n,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:JP(this,n,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const lAe=function n(e){function t(i){return e?new Pte(i,e):new QP(i,0)}return t.alpha=function(i){return n(+i)},t}(.5);function Ote(n){this._context=n}Ote.prototype={areaStart:Sf,areaEnd:Sf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function cAe(n){return new Ote(n)}function Aq(n){return n<0?-1:1}function Rq(n,e,t){var i=n._x1-n._x0,r=e-n._x1,s=(n._y1-n._y0)/(i||r<0&&-0),o=(t-n._y1)/(r||i<0&&-0),a=(s*r+o*i)/(i+r);return(Aq(s)+Aq(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Pq(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function mD(n,e,t){var i=n._x0,r=n._y0,s=n._x1,o=n._y1,a=(s-i)/3;n._context.bezierCurveTo(i+a,r+a*e,s-a,o-a*t,s,o)}function E4(n){this._context=n}E4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:mD(this,this._t0,Pq(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,mD(this,Pq(this,t=Rq(this,n,e)),t);break;default:mD(this,this._t0,t=Rq(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}};function Bte(n){this._context=new Fte(n)}(Bte.prototype=Object.create(E4.prototype)).point=function(n,e){E4.prototype.point.call(this,e,n)};function Fte(n){this._context=n}Fte.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,i,r,s){this._context.bezierCurveTo(e,n,i,t,s,r)}};function Wte(n){return new E4(n)}function zte(n){return new Bte(n)}function Hte(n){this._context=n}Hte.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var i=Oq(n),r=Oq(e),s=0,o=1;o<t;++s,++o)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],n[o],e[o]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function Oq(n){var e,t=n.length-1,i,r=new Array(t),s=new Array(t),o=new Array(t);for(r[0]=0,s[0]=2,o[0]=n[0]+2*n[1],e=1;e<t-1;++e)r[e]=1,s[e]=4,o[e]=4*n[e]+2*n[e+1];for(r[t-1]=2,s[t-1]=7,o[t-1]=8*n[t-1]+n[t],e=1;e<t;++e)i=r[e]/s[e-1],s[e]-=i,o[e]-=i*o[e-1];for(r[t-1]=o[t-1]/s[t-1],e=t-2;e>=0;--e)r[e]=(o[e]-r[e+1])/s[e];for(s[t-1]=(n[t]+r[t-1])/2,e=0;e<t-1;++e)s[e]=2*n[e+1]-r[e+1];return[r,s]}function Vte(n){return new Hte(n)}function f3(n,e){this._context=n,this._t=e}f3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=n,this._y=e}};function $te(n){return new f3(n,.5)}function jte(n){return new f3(n,0)}function Ute(n){return new f3(n,1)}function iv(n,e,t){this.k=n,this.x=e,this.y=t}iv.prototype={constructor:iv,scale:function(n){return n===1?this:new iv(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new iv(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};iv.prototype;var hAe=R(n=>{const{securityLevel:e}=vn();let t=Ji("body");if(e==="sandbox"){const s=Ji(`#i${n}`).node()?.contentDocument??document;t=Ji(s.body)}return t.select(`#${n}`)},"selectSvgElement");function eO(n){return typeof n>"u"||n===null}R(eO,"isNothing");function qte(n){return typeof n=="object"&&n!==null}R(qte,"isObject");function Gte(n){return Array.isArray(n)?n:eO(n)?[]:[n]}R(Gte,"toArray");function Kte(n,e){var t,i,r,s;if(e)for(s=Object.keys(e),t=0,i=s.length;t<i;t+=1)r=s[t],n[r]=e[r];return n}R(Kte,"extend");function Yte(n,e){var t="",i;for(i=0;i<e;i+=1)t+=n;return t}R(Yte,"repeat");function Zte(n){return n===0&&Number.NEGATIVE_INFINITY===1/n}R(Zte,"isNegativeZero");var uAe=eO,dAe=qte,fAe=Gte,gAe=Yte,mAe=Zte,pAe=Kte,ms={isNothing:uAe,isObject:dAe,toArray:fAe,repeat:gAe,isNegativeZero:mAe,extend:pAe};function tO(n,e){var t="",i=n.reason||"(unknown reason)";return n.mark?(n.mark.name&&(t+='in "'+n.mark.name+'" '),t+="("+(n.mark.line+1)+":"+(n.mark.column+1)+")",!e&&n.mark.snippet&&(t+=`

`+n.mark.snippet),i+" "+t):i}R(tO,"formatError");function K1(n,e){Error.call(this),this.name="YAMLException",this.reason=n,this.mark=e,this.message=tO(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}R(K1,"YAMLException$1");K1.prototype=Object.create(Error.prototype);K1.prototype.constructor=K1;K1.prototype.toString=R(function(e){return this.name+": "+tO(this,e)},"toString");var _a=K1;function dx(n,e,t,i,r){var s="",o="",a=Math.floor(r/2)-1;return i-e>a&&(s=" ... ",e=i-a+s.length),t-i>a&&(o=" ...",t=i+a-o.length),{str:s+n.slice(e,t).replace(/\t/g,"→")+o,pos:i-e+s.length}}R(dx,"getLine");function fx(n,e){return ms.repeat(" ",e-n.length)+n}R(fx,"padStart");function Xte(n,e){if(e=Object.create(e||null),!n.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var t=/\r?\n|\r|\0/g,i=[0],r=[],s,o=-1;s=t.exec(n.buffer);)r.push(s.index),i.push(s.index+s[0].length),n.position<=s.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var a="",l,c,h=Math.min(n.line+e.linesAfter,r.length).toString().length,u=e.maxLength-(e.indent+h+3);for(l=1;l<=e.linesBefore&&!(o-l<0);l++)c=dx(n.buffer,i[o-l],r[o-l],n.position-(i[o]-i[o-l]),u),a=ms.repeat(" ",e.indent)+fx((n.line-l+1).toString(),h)+" | "+c.str+`
`+a;for(c=dx(n.buffer,i[o],r[o],n.position,u),a+=ms.repeat(" ",e.indent)+fx((n.line+1).toString(),h)+" | "+c.str+`
`,a+=ms.repeat("-",e.indent+h+3+c.pos)+`^
`,l=1;l<=e.linesAfter&&!(o+l>=r.length);l++)c=dx(n.buffer,i[o+l],r[o+l],n.position-(i[o]-i[o+l]),u),a+=ms.repeat(" ",e.indent)+fx((n.line+l+1).toString(),h)+" | "+c.str+`
`;return a.replace(/\n$/,"")}R(Xte,"makeSnippet");var bAe=Xte,_Ae=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],vAe=["scalar","sequence","mapping"];function Qte(n){var e={};return n!==null&&Object.keys(n).forEach(function(t){n[t].forEach(function(i){e[String(i)]=t})}),e}R(Qte,"compileStyleAliases");function Jte(n,e){if(e=e||{},Object.keys(e).forEach(function(t){if(_Ae.indexOf(t)===-1)throw new _a('Unknown option "'+t+'" is met in definition of "'+n+'" YAML type.')}),this.options=e,this.tag=n,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Qte(e.styleAliases||null),vAe.indexOf(this.kind)===-1)throw new _a('Unknown kind "'+this.kind+'" is specified for "'+n+'" YAML type.')}R(Jte,"Type$1");var _o=Jte;function jN(n,e){var t=[];return n[e].forEach(function(i){var r=t.length;t.forEach(function(s,o){s.tag===i.tag&&s.kind===i.kind&&s.multi===i.multi&&(r=o)}),t[r]=i}),t}R(jN,"compileList");function eie(){var n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,t;function i(r){r.multi?(n.multi[r.kind].push(r),n.multi.fallback.push(r)):n[r.kind][r.tag]=n.fallback[r.tag]=r}for(R(i,"collectType"),e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(i);return n}R(eie,"compileMap");function I4(n){return this.extend(n)}R(I4,"Schema$1");I4.prototype.extend=R(function(e){var t=[],i=[];if(e instanceof _o)i.push(e);else if(Array.isArray(e))i=i.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(i=i.concat(e.explicit));else throw new _a("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(s){if(!(s instanceof _o))throw new _a("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new _a("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new _a("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(s){if(!(s instanceof _o))throw new _a("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(I4.prototype);return r.implicit=(this.implicit||[]).concat(t),r.explicit=(this.explicit||[]).concat(i),r.compiledImplicit=jN(r,"implicit"),r.compiledExplicit=jN(r,"explicit"),r.compiledTypeMap=eie(r.compiledImplicit,r.compiledExplicit),r},"extend");var wAe=I4,yAe=new _o("tag:yaml.org,2002:str",{kind:"scalar",construct:R(function(n){return n!==null?n:""},"construct")}),CAe=new _o("tag:yaml.org,2002:seq",{kind:"sequence",construct:R(function(n){return n!==null?n:[]},"construct")}),SAe=new _o("tag:yaml.org,2002:map",{kind:"mapping",construct:R(function(n){return n!==null?n:{}},"construct")}),xAe=new wAe({explicit:[yAe,CAe,SAe]});function tie(n){if(n===null)return!0;var e=n.length;return e===1&&n==="~"||e===4&&(n==="null"||n==="Null"||n==="NULL")}R(tie,"resolveYamlNull");function iie(){return null}R(iie,"constructYamlNull");function nie(n){return n===null}R(nie,"isNull");var kAe=new _o("tag:yaml.org,2002:null",{kind:"scalar",resolve:tie,construct:iie,predicate:nie,represent:{canonical:R(function(){return"~"},"canonical"),lowercase:R(function(){return"null"},"lowercase"),uppercase:R(function(){return"NULL"},"uppercase"),camelcase:R(function(){return"Null"},"camelcase"),empty:R(function(){return""},"empty")},defaultStyle:"lowercase"});function rie(n){if(n===null)return!1;var e=n.length;return e===4&&(n==="true"||n==="True"||n==="TRUE")||e===5&&(n==="false"||n==="False"||n==="FALSE")}R(rie,"resolveYamlBoolean");function sie(n){return n==="true"||n==="True"||n==="TRUE"}R(sie,"constructYamlBoolean");function oie(n){return Object.prototype.toString.call(n)==="[object Boolean]"}R(oie,"isBoolean");var LAe=new _o("tag:yaml.org,2002:bool",{kind:"scalar",resolve:rie,construct:sie,predicate:oie,represent:{lowercase:R(function(n){return n?"true":"false"},"lowercase"),uppercase:R(function(n){return n?"TRUE":"FALSE"},"uppercase"),camelcase:R(function(n){return n?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function aie(n){return 48<=n&&n<=57||65<=n&&n<=70||97<=n&&n<=102}R(aie,"isHexCode");function lie(n){return 48<=n&&n<=55}R(lie,"isOctCode");function cie(n){return 48<=n&&n<=57}R(cie,"isDecCode");function hie(n){if(n===null)return!1;var e=n.length,t=0,i=!1,r;if(!e)return!1;if(r=n[t],(r==="-"||r==="+")&&(r=n[++t]),r==="0"){if(t+1===e)return!0;if(r=n[++t],r==="b"){for(t++;t<e;t++)if(r=n[t],r!=="_"){if(r!=="0"&&r!=="1")return!1;i=!0}return i&&r!=="_"}if(r==="x"){for(t++;t<e;t++)if(r=n[t],r!=="_"){if(!aie(n.charCodeAt(t)))return!1;i=!0}return i&&r!=="_"}if(r==="o"){for(t++;t<e;t++)if(r=n[t],r!=="_"){if(!lie(n.charCodeAt(t)))return!1;i=!0}return i&&r!=="_"}}if(r==="_")return!1;for(;t<e;t++)if(r=n[t],r!=="_"){if(!cie(n.charCodeAt(t)))return!1;i=!0}return!(!i||r==="_")}R(hie,"resolveYamlInteger");function uie(n){var e=n,t=1,i;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),i=e[0],(i==="-"||i==="+")&&(i==="-"&&(t=-1),e=e.slice(1),i=e[0]),e==="0")return 0;if(i==="0"){if(e[1]==="b")return t*parseInt(e.slice(2),2);if(e[1]==="x")return t*parseInt(e.slice(2),16);if(e[1]==="o")return t*parseInt(e.slice(2),8)}return t*parseInt(e,10)}R(uie,"constructYamlInteger");function die(n){return Object.prototype.toString.call(n)==="[object Number]"&&n%1===0&&!ms.isNegativeZero(n)}R(die,"isInteger");var TAe=new _o("tag:yaml.org,2002:int",{kind:"scalar",resolve:hie,construct:uie,predicate:die,represent:{binary:R(function(n){return n>=0?"0b"+n.toString(2):"-0b"+n.toString(2).slice(1)},"binary"),octal:R(function(n){return n>=0?"0o"+n.toString(8):"-0o"+n.toString(8).slice(1)},"octal"),decimal:R(function(n){return n.toString(10)},"decimal"),hexadecimal:R(function(n){return n>=0?"0x"+n.toString(16).toUpperCase():"-0x"+n.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),DAe=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function fie(n){return!(n===null||!DAe.test(n)||n[n.length-1]==="_")}R(fie,"resolveYamlFloat");function gie(n){var e,t;return e=n.replace(/_/g,"").toLowerCase(),t=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:t*parseFloat(e,10)}R(gie,"constructYamlFloat");var EAe=/^[-+]?[0-9]+e/;function mie(n,e){var t;if(isNaN(n))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===n)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===n)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ms.isNegativeZero(n))return"-0.0";return t=n.toString(10),EAe.test(t)?t.replace("e",".e"):t}R(mie,"representYamlFloat");function pie(n){return Object.prototype.toString.call(n)==="[object Number]"&&(n%1!==0||ms.isNegativeZero(n))}R(pie,"isFloat");var IAe=new _o("tag:yaml.org,2002:float",{kind:"scalar",resolve:fie,construct:gie,predicate:pie,represent:mie,defaultStyle:"lowercase"}),bie=xAe.extend({implicit:[kAe,LAe,TAe,IAe]}),NAe=bie,_ie=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),vie=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function wie(n){return n===null?!1:_ie.exec(n)!==null||vie.exec(n)!==null}R(wie,"resolveYamlTimestamp");function yie(n){var e,t,i,r,s,o,a,l=0,c=null,h,u,d;if(e=_ie.exec(n),e===null&&(e=vie.exec(n)),e===null)throw new Error("Date resolve error");if(t=+e[1],i=+e[2]-1,r=+e[3],!e[4])return new Date(Date.UTC(t,i,r));if(s=+e[4],o=+e[5],a=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(h=+e[10],u=+(e[11]||0),c=(h*60+u)*6e4,e[9]==="-"&&(c=-c)),d=new Date(Date.UTC(t,i,r,s,o,a,l)),c&&d.setTime(d.getTime()-c),d}R(yie,"constructYamlTimestamp");function Cie(n){return n.toISOString()}R(Cie,"representYamlTimestamp");var MAe=new _o("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:wie,construct:yie,instanceOf:Date,represent:Cie});function Sie(n){return n==="<<"||n===null}R(Sie,"resolveYamlMerge");var AAe=new _o("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Sie}),iO=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function xie(n){if(n===null)return!1;var e,t,i=0,r=n.length,s=iO;for(t=0;t<r;t++)if(e=s.indexOf(n.charAt(t)),!(e>64)){if(e<0)return!1;i+=6}return i%8===0}R(xie,"resolveYamlBinary");function kie(n){var e,t,i=n.replace(/[\r\n=]/g,""),r=i.length,s=iO,o=0,a=[];for(e=0;e<r;e++)e%4===0&&e&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(i.charAt(e));return t=r%4*6,t===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):t===18?(a.push(o>>10&255),a.push(o>>2&255)):t===12&&a.push(o>>4&255),new Uint8Array(a)}R(kie,"constructYamlBinary");function Lie(n){var e="",t=0,i,r,s=n.length,o=iO;for(i=0;i<s;i++)i%3===0&&i&&(e+=o[t>>18&63],e+=o[t>>12&63],e+=o[t>>6&63],e+=o[t&63]),t=(t<<8)+n[i];return r=s%3,r===0?(e+=o[t>>18&63],e+=o[t>>12&63],e+=o[t>>6&63],e+=o[t&63]):r===2?(e+=o[t>>10&63],e+=o[t>>4&63],e+=o[t<<2&63],e+=o[64]):r===1&&(e+=o[t>>2&63],e+=o[t<<4&63],e+=o[64],e+=o[64]),e}R(Lie,"representYamlBinary");function Tie(n){return Object.prototype.toString.call(n)==="[object Uint8Array]"}R(Tie,"isBinary");var RAe=new _o("tag:yaml.org,2002:binary",{kind:"scalar",resolve:xie,construct:kie,predicate:Tie,represent:Lie}),PAe=Object.prototype.hasOwnProperty,OAe=Object.prototype.toString;function Die(n){if(n===null)return!0;var e=[],t,i,r,s,o,a=n;for(t=0,i=a.length;t<i;t+=1){if(r=a[t],o=!1,OAe.call(r)!=="[object Object]")return!1;for(s in r)if(PAe.call(r,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}R(Die,"resolveYamlOmap");function Eie(n){return n!==null?n:[]}R(Eie,"constructYamlOmap");var BAe=new _o("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Die,construct:Eie}),FAe=Object.prototype.toString;function Iie(n){if(n===null)return!0;var e,t,i,r,s,o=n;for(s=new Array(o.length),e=0,t=o.length;e<t;e+=1){if(i=o[e],FAe.call(i)!=="[object Object]"||(r=Object.keys(i),r.length!==1))return!1;s[e]=[r[0],i[r[0]]]}return!0}R(Iie,"resolveYamlPairs");function Nie(n){if(n===null)return[];var e,t,i,r,s,o=n;for(s=new Array(o.length),e=0,t=o.length;e<t;e+=1)i=o[e],r=Object.keys(i),s[e]=[r[0],i[r[0]]];return s}R(Nie,"constructYamlPairs");var WAe=new _o("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Iie,construct:Nie}),zAe=Object.prototype.hasOwnProperty;function Mie(n){if(n===null)return!0;var e,t=n;for(e in t)if(zAe.call(t,e)&&t[e]!==null)return!1;return!0}R(Mie,"resolveYamlSet");function Aie(n){return n!==null?n:{}}R(Aie,"constructYamlSet");var HAe=new _o("tag:yaml.org,2002:set",{kind:"mapping",resolve:Mie,construct:Aie}),Rie=NAe.extend({implicit:[MAe,AAe],explicit:[RAe,BAe,WAe,HAe]}),xf=Object.prototype.hasOwnProperty,N4=1,Pie=2,Oie=3,M4=4,pD=1,VAe=2,Bq=3,$Ae=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,jAe=/[\x85\u2028\u2029]/,UAe=/[,\[\]\{\}]/,Bie=/^(?:!|!!|![a-z\-]+!)$/i,Fie=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function UN(n){return Object.prototype.toString.call(n)}R(UN,"_class");function uc(n){return n===10||n===13}R(uc,"is_EOL");function af(n){return n===9||n===32}R(af,"is_WHITE_SPACE");function Vo(n){return n===9||n===32||n===10||n===13}R(Vo,"is_WS_OR_EOL");function Zg(n){return n===44||n===91||n===93||n===123||n===125}R(Zg,"is_FLOW_INDICATOR");function Wie(n){var e;return 48<=n&&n<=57?n-48:(e=n|32,97<=e&&e<=102?e-97+10:-1)}R(Wie,"fromHexCode");function zie(n){return n===120?2:n===117?4:n===85?8:0}R(zie,"escapedHexLen");function Hie(n){return 48<=n&&n<=57?n-48:-1}R(Hie,"fromDecimalCode");function qN(n){return n===48?"\0":n===97?"\x07":n===98?"\b":n===116||n===9?"	":n===110?`
`:n===118?"\v":n===102?"\f":n===114?"\r":n===101?"\x1B":n===32?" ":n===34?'"':n===47?"/":n===92?"\\":n===78?"":n===95?" ":n===76?"\u2028":n===80?"\u2029":""}R(qN,"simpleEscapeSequence");function Vie(n){return n<=65535?String.fromCharCode(n):String.fromCharCode((n-65536>>10)+55296,(n-65536&1023)+56320)}R(Vie,"charFromCodepoint");var $ie=new Array(256),jie=new Array(256);for(ag=0;ag<256;ag++)$ie[ag]=qN(ag)?1:0,jie[ag]=qN(ag);var ag;function Uie(n,e){this.input=n,this.filename=e.filename||null,this.schema=e.schema||Rie,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=n.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}R(Uie,"State$1");function nO(n,e){var t={name:n.filename,buffer:n.input.slice(0,-1),position:n.position,line:n.line,column:n.position-n.lineStart};return t.snippet=bAe(t),new _a(e,t)}R(nO,"generateError");function Wt(n,e){throw nO(n,e)}R(Wt,"throwError");function ay(n,e){n.onWarning&&n.onWarning.call(null,nO(n,e))}R(ay,"throwWarning");var Fq={YAML:R(function(e,t,i){var r,s,o;e.version!==null&&Wt(e,"duplication of %YAML directive"),i.length!==1&&Wt(e,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),r===null&&Wt(e,"ill-formed argument of the YAML directive"),s=parseInt(r[1],10),o=parseInt(r[2],10),s!==1&&Wt(e,"unacceptable YAML version of the document"),e.version=i[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&ay(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:R(function(e,t,i){var r,s;i.length!==2&&Wt(e,"TAG directive accepts exactly two arguments"),r=i[0],s=i[1],Bie.test(r)||Wt(e,"ill-formed tag handle (first argument) of the TAG directive"),xf.call(e.tagMap,r)&&Wt(e,'there is a previously declared suffix for "'+r+'" tag handle'),Fie.test(s)||Wt(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{Wt(e,"tag prefix is malformed: "+s)}e.tagMap[r]=s},"handleTagDirective")};function Au(n,e,t,i){var r,s,o,a;if(e<t){if(a=n.input.slice(e,t),i)for(r=0,s=a.length;r<s;r+=1)o=a.charCodeAt(r),o===9||32<=o&&o<=1114111||Wt(n,"expected valid JSON character");else $Ae.test(a)&&Wt(n,"the stream contains non-printable characters");n.result+=a}}R(Au,"captureSegment");function GN(n,e,t,i){var r,s,o,a;for(ms.isObject(t)||Wt(n,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(t),o=0,a=r.length;o<a;o+=1)s=r[o],xf.call(e,s)||(e[s]=t[s],i[s]=!0)}R(GN,"mergeMappings");function Xg(n,e,t,i,r,s,o,a,l){var c,h;if(Array.isArray(r))for(r=Array.prototype.slice.call(r),c=0,h=r.length;c<h;c+=1)Array.isArray(r[c])&&Wt(n,"nested arrays are not supported inside keys"),typeof r=="object"&&UN(r[c])==="[object Object]"&&(r[c]="[object Object]");if(typeof r=="object"&&UN(r)==="[object Object]"&&(r="[object Object]"),r=String(r),e===null&&(e={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,h=s.length;c<h;c+=1)GN(n,e,s[c],t);else GN(n,e,s,t);else!n.json&&!xf.call(t,r)&&xf.call(e,r)&&(n.line=o||n.line,n.lineStart=a||n.lineStart,n.position=l||n.position,Wt(n,"duplicated mapping key")),r==="__proto__"?Object.defineProperty(e,r,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[r]=s,delete t[r];return e}R(Xg,"storeMappingPair");function g3(n){var e;e=n.input.charCodeAt(n.position),e===10?n.position++:e===13?(n.position++,n.input.charCodeAt(n.position)===10&&n.position++):Wt(n,"a line break is expected"),n.line+=1,n.lineStart=n.position,n.firstTabInLine=-1}R(g3,"readLineBreak");function Hr(n,e,t){for(var i=0,r=n.input.charCodeAt(n.position);r!==0;){for(;af(r);)r===9&&n.firstTabInLine===-1&&(n.firstTabInLine=n.position),r=n.input.charCodeAt(++n.position);if(e&&r===35)do r=n.input.charCodeAt(++n.position);while(r!==10&&r!==13&&r!==0);if(uc(r))for(g3(n),r=n.input.charCodeAt(n.position),i++,n.lineIndent=0;r===32;)n.lineIndent++,r=n.input.charCodeAt(++n.position);else break}return t!==-1&&i!==0&&n.lineIndent<t&&ay(n,"deficient indentation"),i}R(Hr,"skipSeparationSpace");function Jy(n){var e=n.position,t;return t=n.input.charCodeAt(e),!!((t===45||t===46)&&t===n.input.charCodeAt(e+1)&&t===n.input.charCodeAt(e+2)&&(e+=3,t=n.input.charCodeAt(e),t===0||Vo(t)))}R(Jy,"testDocumentSeparator");function m3(n,e){e===1?n.result+=" ":e>1&&(n.result+=ms.repeat(`
`,e-1))}R(m3,"writeFoldedLines");function qie(n,e,t){var i,r,s,o,a,l,c,h,u=n.kind,d=n.result,g;if(g=n.input.charCodeAt(n.position),Vo(g)||Zg(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(r=n.input.charCodeAt(n.position+1),Vo(r)||t&&Zg(r)))return!1;for(n.kind="scalar",n.result="",s=o=n.position,a=!1;g!==0;){if(g===58){if(r=n.input.charCodeAt(n.position+1),Vo(r)||t&&Zg(r))break}else if(g===35){if(i=n.input.charCodeAt(n.position-1),Vo(i))break}else{if(n.position===n.lineStart&&Jy(n)||t&&Zg(g))break;if(uc(g))if(l=n.line,c=n.lineStart,h=n.lineIndent,Hr(n,!1,-1),n.lineIndent>=e){a=!0,g=n.input.charCodeAt(n.position);continue}else{n.position=o,n.line=l,n.lineStart=c,n.lineIndent=h;break}}a&&(Au(n,s,o,!1),m3(n,n.line-l),s=o=n.position,a=!1),af(g)||(o=n.position+1),g=n.input.charCodeAt(++n.position)}return Au(n,s,o,!1),n.result?!0:(n.kind=u,n.result=d,!1)}R(qie,"readPlainScalar");function Gie(n,e){var t,i,r;if(t=n.input.charCodeAt(n.position),t!==39)return!1;for(n.kind="scalar",n.result="",n.position++,i=r=n.position;(t=n.input.charCodeAt(n.position))!==0;)if(t===39)if(Au(n,i,n.position,!0),t=n.input.charCodeAt(++n.position),t===39)i=n.position,n.position++,r=n.position;else return!0;else uc(t)?(Au(n,i,r,!0),m3(n,Hr(n,!1,e)),i=r=n.position):n.position===n.lineStart&&Jy(n)?Wt(n,"unexpected end of the document within a single quoted scalar"):(n.position++,r=n.position);Wt(n,"unexpected end of the stream within a single quoted scalar")}R(Gie,"readSingleQuotedScalar");function Kie(n,e){var t,i,r,s,o,a;if(a=n.input.charCodeAt(n.position),a!==34)return!1;for(n.kind="scalar",n.result="",n.position++,t=i=n.position;(a=n.input.charCodeAt(n.position))!==0;){if(a===34)return Au(n,t,n.position,!0),n.position++,!0;if(a===92){if(Au(n,t,n.position,!0),a=n.input.charCodeAt(++n.position),uc(a))Hr(n,!1,e);else if(a<256&&$ie[a])n.result+=jie[a],n.position++;else if((o=zie(a))>0){for(r=o,s=0;r>0;r--)a=n.input.charCodeAt(++n.position),(o=Wie(a))>=0?s=(s<<4)+o:Wt(n,"expected hexadecimal character");n.result+=Vie(s),n.position++}else Wt(n,"unknown escape sequence");t=i=n.position}else uc(a)?(Au(n,t,i,!0),m3(n,Hr(n,!1,e)),t=i=n.position):n.position===n.lineStart&&Jy(n)?Wt(n,"unexpected end of the document within a double quoted scalar"):(n.position++,i=n.position)}Wt(n,"unexpected end of the stream within a double quoted scalar")}R(Kie,"readDoubleQuotedScalar");function Yie(n,e){var t=!0,i,r,s,o=n.tag,a,l=n.anchor,c,h,u,d,g,p=Object.create(null),b,_,w,y;if(y=n.input.charCodeAt(n.position),y===91)h=93,g=!1,a=[];else if(y===123)h=125,g=!0,a={};else return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=a),y=n.input.charCodeAt(++n.position);y!==0;){if(Hr(n,!0,e),y=n.input.charCodeAt(n.position),y===h)return n.position++,n.tag=o,n.anchor=l,n.kind=g?"mapping":"sequence",n.result=a,!0;t?y===44&&Wt(n,"expected the node content, but found ','"):Wt(n,"missed comma between flow collection entries"),_=b=w=null,u=d=!1,y===63&&(c=n.input.charCodeAt(n.position+1),Vo(c)&&(u=d=!0,n.position++,Hr(n,!0,e))),i=n.line,r=n.lineStart,s=n.position,Bm(n,e,N4,!1,!0),_=n.tag,b=n.result,Hr(n,!0,e),y=n.input.charCodeAt(n.position),(d||n.line===i)&&y===58&&(u=!0,y=n.input.charCodeAt(++n.position),Hr(n,!0,e),Bm(n,e,N4,!1,!0),w=n.result),g?Xg(n,a,p,_,b,w,i,r,s):u?a.push(Xg(n,null,p,_,b,w,i,r,s)):a.push(b),Hr(n,!0,e),y=n.input.charCodeAt(n.position),y===44?(t=!0,y=n.input.charCodeAt(++n.position)):t=!1}Wt(n,"unexpected end of the stream within a flow collection")}R(Yie,"readFlowCollection");function Zie(n,e){var t,i,r=pD,s=!1,o=!1,a=e,l=0,c=!1,h,u;if(u=n.input.charCodeAt(n.position),u===124)i=!1;else if(u===62)i=!0;else return!1;for(n.kind="scalar",n.result="";u!==0;)if(u=n.input.charCodeAt(++n.position),u===43||u===45)pD===r?r=u===43?Bq:VAe:Wt(n,"repeat of a chomping mode identifier");else if((h=Hie(u))>=0)h===0?Wt(n,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?Wt(n,"repeat of an indentation width identifier"):(a=e+h-1,o=!0);else break;if(af(u)){do u=n.input.charCodeAt(++n.position);while(af(u));if(u===35)do u=n.input.charCodeAt(++n.position);while(!uc(u)&&u!==0)}for(;u!==0;){for(g3(n),n.lineIndent=0,u=n.input.charCodeAt(n.position);(!o||n.lineIndent<a)&&u===32;)n.lineIndent++,u=n.input.charCodeAt(++n.position);if(!o&&n.lineIndent>a&&(a=n.lineIndent),uc(u)){l++;continue}if(n.lineIndent<a){r===Bq?n.result+=ms.repeat(`
`,s?1+l:l):r===pD&&s&&(n.result+=`
`);break}for(i?af(u)?(c=!0,n.result+=ms.repeat(`
`,s?1+l:l)):c?(c=!1,n.result+=ms.repeat(`
`,l+1)):l===0?s&&(n.result+=" "):n.result+=ms.repeat(`
`,l):n.result+=ms.repeat(`
`,s?1+l:l),s=!0,o=!0,l=0,t=n.position;!uc(u)&&u!==0;)u=n.input.charCodeAt(++n.position);Au(n,t,n.position,!1)}return!0}R(Zie,"readBlockScalar");function KN(n,e){var t,i=n.tag,r=n.anchor,s=[],o,a=!1,l;if(n.firstTabInLine!==-1)return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=s),l=n.input.charCodeAt(n.position);l!==0&&(n.firstTabInLine!==-1&&(n.position=n.firstTabInLine,Wt(n,"tab characters must not be used in indentation")),!(l!==45||(o=n.input.charCodeAt(n.position+1),!Vo(o))));){if(a=!0,n.position++,Hr(n,!0,-1)&&n.lineIndent<=e){s.push(null),l=n.input.charCodeAt(n.position);continue}if(t=n.line,Bm(n,e,Oie,!1,!0),s.push(n.result),Hr(n,!0,-1),l=n.input.charCodeAt(n.position),(n.line===t||n.lineIndent>e)&&l!==0)Wt(n,"bad indentation of a sequence entry");else if(n.lineIndent<e)break}return a?(n.tag=i,n.anchor=r,n.kind="sequence",n.result=s,!0):!1}R(KN,"readBlockSequence");function Xie(n,e,t){var i,r,s,o,a,l,c=n.tag,h=n.anchor,u={},d=Object.create(null),g=null,p=null,b=null,_=!1,w=!1,y;if(n.firstTabInLine!==-1)return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=u),y=n.input.charCodeAt(n.position);y!==0;){if(!_&&n.firstTabInLine!==-1&&(n.position=n.firstTabInLine,Wt(n,"tab characters must not be used in indentation")),i=n.input.charCodeAt(n.position+1),s=n.line,(y===63||y===58)&&Vo(i))y===63?(_&&(Xg(n,u,d,g,p,null,o,a,l),g=p=b=null),w=!0,_=!0,r=!0):_?(_=!1,r=!0):Wt(n,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),n.position+=1,y=i;else{if(o=n.line,a=n.lineStart,l=n.position,!Bm(n,t,Pie,!1,!0))break;if(n.line===s){for(y=n.input.charCodeAt(n.position);af(y);)y=n.input.charCodeAt(++n.position);if(y===58)y=n.input.charCodeAt(++n.position),Vo(y)||Wt(n,"a whitespace character is expected after the key-value separator within a block mapping"),_&&(Xg(n,u,d,g,p,null,o,a,l),g=p=b=null),w=!0,_=!1,r=!1,g=n.tag,p=n.result;else if(w)Wt(n,"can not read an implicit mapping pair; a colon is missed");else return n.tag=c,n.anchor=h,!0}else if(w)Wt(n,"can not read a block mapping entry; a multiline key may not be an implicit key");else return n.tag=c,n.anchor=h,!0}if((n.line===s||n.lineIndent>e)&&(_&&(o=n.line,a=n.lineStart,l=n.position),Bm(n,e,M4,!0,r)&&(_?p=n.result:b=n.result),_||(Xg(n,u,d,g,p,b,o,a,l),g=p=b=null),Hr(n,!0,-1),y=n.input.charCodeAt(n.position)),(n.line===s||n.lineIndent>e)&&y!==0)Wt(n,"bad indentation of a mapping entry");else if(n.lineIndent<e)break}return _&&Xg(n,u,d,g,p,null,o,a,l),w&&(n.tag=c,n.anchor=h,n.kind="mapping",n.result=u),w}R(Xie,"readBlockMapping");function Qie(n){var e,t=!1,i=!1,r,s,o;if(o=n.input.charCodeAt(n.position),o!==33)return!1;if(n.tag!==null&&Wt(n,"duplication of a tag property"),o=n.input.charCodeAt(++n.position),o===60?(t=!0,o=n.input.charCodeAt(++n.position)):o===33?(i=!0,r="!!",o=n.input.charCodeAt(++n.position)):r="!",e=n.position,t){do o=n.input.charCodeAt(++n.position);while(o!==0&&o!==62);n.position<n.length?(s=n.input.slice(e,n.position),o=n.input.charCodeAt(++n.position)):Wt(n,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Vo(o);)o===33&&(i?Wt(n,"tag suffix cannot contain exclamation marks"):(r=n.input.slice(e-1,n.position+1),Bie.test(r)||Wt(n,"named tag handle cannot contain such characters"),i=!0,e=n.position+1)),o=n.input.charCodeAt(++n.position);s=n.input.slice(e,n.position),UAe.test(s)&&Wt(n,"tag suffix cannot contain flow indicator characters")}s&&!Fie.test(s)&&Wt(n,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{Wt(n,"tag name is malformed: "+s)}return t?n.tag=s:xf.call(n.tagMap,r)?n.tag=n.tagMap[r]+s:r==="!"?n.tag="!"+s:r==="!!"?n.tag="tag:yaml.org,2002:"+s:Wt(n,'undeclared tag handle "'+r+'"'),!0}R(Qie,"readTagProperty");function Jie(n){var e,t;if(t=n.input.charCodeAt(n.position),t!==38)return!1;for(n.anchor!==null&&Wt(n,"duplication of an anchor property"),t=n.input.charCodeAt(++n.position),e=n.position;t!==0&&!Vo(t)&&!Zg(t);)t=n.input.charCodeAt(++n.position);return n.position===e&&Wt(n,"name of an anchor node must contain at least one character"),n.anchor=n.input.slice(e,n.position),!0}R(Jie,"readAnchorProperty");function ene(n){var e,t,i;if(i=n.input.charCodeAt(n.position),i!==42)return!1;for(i=n.input.charCodeAt(++n.position),e=n.position;i!==0&&!Vo(i)&&!Zg(i);)i=n.input.charCodeAt(++n.position);return n.position===e&&Wt(n,"name of an alias node must contain at least one character"),t=n.input.slice(e,n.position),xf.call(n.anchorMap,t)||Wt(n,'unidentified alias "'+t+'"'),n.result=n.anchorMap[t],Hr(n,!0,-1),!0}R(ene,"readAlias");function Bm(n,e,t,i,r){var s,o,a,l=1,c=!1,h=!1,u,d,g,p,b,_;if(n.listener!==null&&n.listener("open",n),n.tag=null,n.anchor=null,n.kind=null,n.result=null,s=o=a=M4===t||Oie===t,i&&Hr(n,!0,-1)&&(c=!0,n.lineIndent>e?l=1:n.lineIndent===e?l=0:n.lineIndent<e&&(l=-1)),l===1)for(;Qie(n)||Jie(n);)Hr(n,!0,-1)?(c=!0,a=s,n.lineIndent>e?l=1:n.lineIndent===e?l=0:n.lineIndent<e&&(l=-1)):a=!1;if(a&&(a=c||r),(l===1||M4===t)&&(N4===t||Pie===t?b=e:b=e+1,_=n.position-n.lineStart,l===1?a&&(KN(n,_)||Xie(n,_,b))||Yie(n,b)?h=!0:(o&&Zie(n,b)||Gie(n,b)||Kie(n,b)?h=!0:ene(n)?(h=!0,(n.tag!==null||n.anchor!==null)&&Wt(n,"alias node should not have any properties")):qie(n,b,N4===t)&&(h=!0,n.tag===null&&(n.tag="?")),n.anchor!==null&&(n.anchorMap[n.anchor]=n.result)):l===0&&(h=a&&KN(n,_))),n.tag===null)n.anchor!==null&&(n.anchorMap[n.anchor]=n.result);else if(n.tag==="?"){for(n.result!==null&&n.kind!=="scalar"&&Wt(n,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+n.kind+'"'),u=0,d=n.implicitTypes.length;u<d;u+=1)if(p=n.implicitTypes[u],p.resolve(n.result)){n.result=p.construct(n.result),n.tag=p.tag,n.anchor!==null&&(n.anchorMap[n.anchor]=n.result);break}}else if(n.tag!=="!"){if(xf.call(n.typeMap[n.kind||"fallback"],n.tag))p=n.typeMap[n.kind||"fallback"][n.tag];else for(p=null,g=n.typeMap.multi[n.kind||"fallback"],u=0,d=g.length;u<d;u+=1)if(n.tag.slice(0,g[u].tag.length)===g[u].tag){p=g[u];break}p||Wt(n,"unknown tag !<"+n.tag+">"),n.result!==null&&p.kind!==n.kind&&Wt(n,"unacceptable node kind for !<"+n.tag+'> tag; it should be "'+p.kind+'", not "'+n.kind+'"'),p.resolve(n.result,n.tag)?(n.result=p.construct(n.result,n.tag),n.anchor!==null&&(n.anchorMap[n.anchor]=n.result)):Wt(n,"cannot resolve a node with !<"+n.tag+"> explicit tag")}return n.listener!==null&&n.listener("close",n),n.tag!==null||n.anchor!==null||h}R(Bm,"composeNode");function tne(n){var e=n.position,t,i,r,s=!1,o;for(n.version=null,n.checkLineBreaks=n.legacy,n.tagMap=Object.create(null),n.anchorMap=Object.create(null);(o=n.input.charCodeAt(n.position))!==0&&(Hr(n,!0,-1),o=n.input.charCodeAt(n.position),!(n.lineIndent>0||o!==37));){for(s=!0,o=n.input.charCodeAt(++n.position),t=n.position;o!==0&&!Vo(o);)o=n.input.charCodeAt(++n.position);for(i=n.input.slice(t,n.position),r=[],i.length<1&&Wt(n,"directive name must not be less than one character in length");o!==0;){for(;af(o);)o=n.input.charCodeAt(++n.position);if(o===35){do o=n.input.charCodeAt(++n.position);while(o!==0&&!uc(o));break}if(uc(o))break;for(t=n.position;o!==0&&!Vo(o);)o=n.input.charCodeAt(++n.position);r.push(n.input.slice(t,n.position))}o!==0&&g3(n),xf.call(Fq,i)?Fq[i](n,i,r):ay(n,'unknown document directive "'+i+'"')}if(Hr(n,!0,-1),n.lineIndent===0&&n.input.charCodeAt(n.position)===45&&n.input.charCodeAt(n.position+1)===45&&n.input.charCodeAt(n.position+2)===45?(n.position+=3,Hr(n,!0,-1)):s&&Wt(n,"directives end mark is expected"),Bm(n,n.lineIndent-1,M4,!1,!0),Hr(n,!0,-1),n.checkLineBreaks&&jAe.test(n.input.slice(e,n.position))&&ay(n,"non-ASCII line breaks are interpreted as content"),n.documents.push(n.result),n.position===n.lineStart&&Jy(n)){n.input.charCodeAt(n.position)===46&&(n.position+=3,Hr(n,!0,-1));return}if(n.position<n.length-1)Wt(n,"end of the stream or a document separator is expected");else return}R(tne,"readDocument");function rO(n,e){n=String(n),e=e||{},n.length!==0&&(n.charCodeAt(n.length-1)!==10&&n.charCodeAt(n.length-1)!==13&&(n+=`
`),n.charCodeAt(0)===65279&&(n=n.slice(1)));var t=new Uie(n,e),i=n.indexOf("\0");for(i!==-1&&(t.position=i,Wt(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)tne(t);return t.documents}R(rO,"loadDocuments");function qAe(n,e,t){e!==null&&typeof e=="object"&&typeof t>"u"&&(t=e,e=null);var i=rO(n,t);if(typeof e!="function")return i;for(var r=0,s=i.length;r<s;r+=1)e(i[r])}R(qAe,"loadAll$1");function ine(n,e){var t=rO(n,e);if(t.length!==0){if(t.length===1)return t[0];throw new _a("expected a single document in the stream, but found more")}}R(ine,"load$1");var GAe=ine,KAe={load:GAe},nne=Object.prototype.toString,rne=Object.prototype.hasOwnProperty,sO=65279,YAe=9,ly=10,ZAe=13,XAe=32,QAe=33,JAe=34,YN=35,eRe=37,tRe=38,iRe=39,nRe=42,sne=44,rRe=45,A4=58,sRe=61,oRe=62,aRe=63,lRe=64,one=91,ane=93,cRe=96,lne=123,hRe=124,cne=125,xo={};xo[0]="\\0";xo[7]="\\a";xo[8]="\\b";xo[9]="\\t";xo[10]="\\n";xo[11]="\\v";xo[12]="\\f";xo[13]="\\r";xo[27]="\\e";xo[34]='\\"';xo[92]="\\\\";xo[133]="\\N";xo[160]="\\_";xo[8232]="\\L";xo[8233]="\\P";var uRe=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],dRe=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function hne(n,e){var t,i,r,s,o,a,l;if(e===null)return{};for(t={},i=Object.keys(e),r=0,s=i.length;r<s;r+=1)o=i[r],a=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=n.compiledTypeMap.fallback[o],l&&rne.call(l.styleAliases,a)&&(a=l.styleAliases[a]),t[o]=a;return t}R(hne,"compileStyleMap");function une(n){var e,t,i;if(e=n.toString(16).toUpperCase(),n<=255)t="x",i=2;else if(n<=65535)t="u",i=4;else if(n<=4294967295)t="U",i=8;else throw new _a("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+ms.repeat("0",i-e.length)+e}R(une,"encodeHex");var fRe=1,cy=2;function dne(n){this.schema=n.schema||Rie,this.indent=Math.max(1,n.indent||2),this.noArrayIndent=n.noArrayIndent||!1,this.skipInvalid=n.skipInvalid||!1,this.flowLevel=ms.isNothing(n.flowLevel)?-1:n.flowLevel,this.styleMap=hne(this.schema,n.styles||null),this.sortKeys=n.sortKeys||!1,this.lineWidth=n.lineWidth||80,this.noRefs=n.noRefs||!1,this.noCompatMode=n.noCompatMode||!1,this.condenseFlow=n.condenseFlow||!1,this.quotingType=n.quotingType==='"'?cy:fRe,this.forceQuotes=n.forceQuotes||!1,this.replacer=typeof n.replacer=="function"?n.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}R(dne,"State");function ZN(n,e){for(var t=ms.repeat(" ",e),i=0,r=-1,s="",o,a=n.length;i<a;)r=n.indexOf(`
`,i),r===-1?(o=n.slice(i),i=a):(o=n.slice(i,r+1),i=r+1),o.length&&o!==`
`&&(s+=t),s+=o;return s}R(ZN,"indentString");function R4(n,e){return`
`+ms.repeat(" ",n.indent*e)}R(R4,"generateNextLine");function fne(n,e){var t,i,r;for(t=0,i=n.implicitTypes.length;t<i;t+=1)if(r=n.implicitTypes[t],r.resolve(e))return!0;return!1}R(fne,"testImplicitResolving");function hy(n){return n===XAe||n===YAe}R(hy,"isWhitespace");function Y1(n){return 32<=n&&n<=126||161<=n&&n<=55295&&n!==8232&&n!==8233||57344<=n&&n<=65533&&n!==sO||65536<=n&&n<=1114111}R(Y1,"isPrintable");function XN(n){return Y1(n)&&n!==sO&&n!==ZAe&&n!==ly}R(XN,"isNsCharOrWhitespace");function QN(n,e,t){var i=XN(n),r=i&&!hy(n);return(t?i:i&&n!==sne&&n!==one&&n!==ane&&n!==lne&&n!==cne)&&n!==YN&&!(e===A4&&!r)||XN(e)&&!hy(e)&&n===YN||e===A4&&r}R(QN,"isPlainSafe");function gne(n){return Y1(n)&&n!==sO&&!hy(n)&&n!==rRe&&n!==aRe&&n!==A4&&n!==sne&&n!==one&&n!==ane&&n!==lne&&n!==cne&&n!==YN&&n!==tRe&&n!==nRe&&n!==QAe&&n!==hRe&&n!==sRe&&n!==oRe&&n!==iRe&&n!==JAe&&n!==eRe&&n!==lRe&&n!==cRe}R(gne,"isPlainSafeFirst");function mne(n){return!hy(n)&&n!==A4}R(mne,"isPlainSafeLast");function C0(n,e){var t=n.charCodeAt(e),i;return t>=55296&&t<=56319&&e+1<n.length&&(i=n.charCodeAt(e+1),i>=56320&&i<=57343)?(t-55296)*1024+i-56320+65536:t}R(C0,"codePointAt");function oO(n){var e=/^\n* /;return e.test(n)}R(oO,"needIndentIndicator");var pne=1,JN=2,bne=3,_ne=4,Jp=5;function vne(n,e,t,i,r,s,o,a){var l,c=0,h=null,u=!1,d=!1,g=i!==-1,p=-1,b=gne(C0(n,0))&&mne(C0(n,n.length-1));if(e||o)for(l=0;l<n.length;c>=65536?l+=2:l++){if(c=C0(n,l),!Y1(c))return Jp;b=b&&QN(c,h,a),h=c}else{for(l=0;l<n.length;c>=65536?l+=2:l++){if(c=C0(n,l),c===ly)u=!0,g&&(d=d||l-p-1>i&&n[p+1]!==" ",p=l);else if(!Y1(c))return Jp;b=b&&QN(c,h,a),h=c}d=d||g&&l-p-1>i&&n[p+1]!==" "}return!u&&!d?b&&!o&&!r(n)?pne:s===cy?Jp:JN:t>9&&oO(n)?Jp:o?s===cy?Jp:JN:d?_ne:bne}R(vne,"chooseScalarStyle");function wne(n,e,t,i,r){n.dump=function(){if(e.length===0)return n.quotingType===cy?'""':"''";if(!n.noCompatMode&&(uRe.indexOf(e)!==-1||dRe.test(e)))return n.quotingType===cy?'"'+e+'"':"'"+e+"'";var s=n.indent*Math.max(1,t),o=n.lineWidth===-1?-1:Math.max(Math.min(n.lineWidth,40),n.lineWidth-s),a=i||n.flowLevel>-1&&t>=n.flowLevel;function l(c){return fne(n,c)}switch(R(l,"testAmbiguity"),vne(e,a,n.indent,o,l,n.quotingType,n.forceQuotes&&!i,r)){case pne:return e;case JN:return"'"+e.replace(/'/g,"''")+"'";case bne:return"|"+eM(e,n.indent)+tM(ZN(e,s));case _ne:return">"+eM(e,n.indent)+tM(ZN(yne(e,o),s));case Jp:return'"'+Cne(e)+'"';default:throw new _a("impossible error: invalid scalar style")}}()}R(wne,"writeScalar");function eM(n,e){var t=oO(n)?String(e):"",i=n[n.length-1]===`
`,r=i&&(n[n.length-2]===`
`||n===`
`),s=r?"+":i?"":"-";return t+s+`
`}R(eM,"blockHeader");function tM(n){return n[n.length-1]===`
`?n.slice(0,-1):n}R(tM,"dropEndingNewline");function yne(n,e){for(var t=/(\n+)([^\n]*)/g,i=function(){var c=n.indexOf(`
`);return c=c!==-1?c:n.length,t.lastIndex=c,iM(n.slice(0,c),e)}(),r=n[0]===`
`||n[0]===" ",s,o;o=t.exec(n);){var a=o[1],l=o[2];s=l[0]===" ",i+=a+(!r&&!s&&l!==""?`
`:"")+iM(l,e),r=s}return i}R(yne,"foldString");function iM(n,e){if(n===""||n[0]===" ")return n;for(var t=/ [^ ]/g,i,r=0,s,o=0,a=0,l="";i=t.exec(n);)a=i.index,a-r>e&&(s=o>r?o:a,l+=`
`+n.slice(r,s),r=s+1),o=a;return l+=`
`,n.length-r>e&&o>r?l+=n.slice(r,o)+`
`+n.slice(o+1):l+=n.slice(r),l.slice(1)}R(iM,"foldLine");function Cne(n){for(var e="",t=0,i,r=0;r<n.length;t>=65536?r+=2:r++)t=C0(n,r),i=xo[t],!i&&Y1(t)?(e+=n[r],t>=65536&&(e+=n[r+1])):e+=i||une(t);return e}R(Cne,"escapeString");function Sne(n,e,t){var i="",r=n.tag,s,o,a;for(s=0,o=t.length;s<o;s+=1)a=t[s],n.replacer&&(a=n.replacer.call(t,String(s),a)),(fh(n,e,a,!1,!1)||typeof a>"u"&&fh(n,e,null,!1,!1))&&(i!==""&&(i+=","+(n.condenseFlow?"":" ")),i+=n.dump);n.tag=r,n.dump="["+i+"]"}R(Sne,"writeFlowSequence");function nM(n,e,t,i){var r="",s=n.tag,o,a,l;for(o=0,a=t.length;o<a;o+=1)l=t[o],n.replacer&&(l=n.replacer.call(t,String(o),l)),(fh(n,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&fh(n,e+1,null,!0,!0,!1,!0))&&((!i||r!=="")&&(r+=R4(n,e)),n.dump&&ly===n.dump.charCodeAt(0)?r+="-":r+="- ",r+=n.dump);n.tag=s,n.dump=r||"[]"}R(nM,"writeBlockSequence");function xne(n,e,t){var i="",r=n.tag,s=Object.keys(t),o,a,l,c,h;for(o=0,a=s.length;o<a;o+=1)h="",i!==""&&(h+=", "),n.condenseFlow&&(h+='"'),l=s[o],c=t[l],n.replacer&&(c=n.replacer.call(t,l,c)),fh(n,e,l,!1,!1)&&(n.dump.length>1024&&(h+="? "),h+=n.dump+(n.condenseFlow?'"':"")+":"+(n.condenseFlow?"":" "),fh(n,e,c,!1,!1)&&(h+=n.dump,i+=h));n.tag=r,n.dump="{"+i+"}"}R(xne,"writeFlowMapping");function kne(n,e,t,i){var r="",s=n.tag,o=Object.keys(t),a,l,c,h,u,d;if(n.sortKeys===!0)o.sort();else if(typeof n.sortKeys=="function")o.sort(n.sortKeys);else if(n.sortKeys)throw new _a("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)d="",(!i||r!=="")&&(d+=R4(n,e)),c=o[a],h=t[c],n.replacer&&(h=n.replacer.call(t,c,h)),fh(n,e+1,c,!0,!0,!0)&&(u=n.tag!==null&&n.tag!=="?"||n.dump&&n.dump.length>1024,u&&(n.dump&&ly===n.dump.charCodeAt(0)?d+="?":d+="? "),d+=n.dump,u&&(d+=R4(n,e)),fh(n,e+1,h,!0,u)&&(n.dump&&ly===n.dump.charCodeAt(0)?d+=":":d+=": ",d+=n.dump,r+=d));n.tag=s,n.dump=r||"{}"}R(kne,"writeBlockMapping");function rM(n,e,t){var i,r,s,o,a,l;for(r=t?n.explicitTypes:n.implicitTypes,s=0,o=r.length;s<o;s+=1)if(a=r[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(t?a.multi&&a.representName?n.tag=a.representName(e):n.tag=a.tag:n.tag="?",a.represent){if(l=n.styleMap[a.tag]||a.defaultStyle,nne.call(a.represent)==="[object Function]")i=a.represent(e,l);else if(rne.call(a.represent,l))i=a.represent[l](e,l);else throw new _a("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');n.dump=i}return!0}return!1}R(rM,"detectType");function fh(n,e,t,i,r,s,o){n.tag=null,n.dump=t,rM(n,t,!1)||rM(n,t,!0);var a=nne.call(n.dump),l=i,c;i&&(i=n.flowLevel<0||n.flowLevel>e);var h=a==="[object Object]"||a==="[object Array]",u,d;if(h&&(u=n.duplicates.indexOf(t),d=u!==-1),(n.tag!==null&&n.tag!=="?"||d||n.indent!==2&&e>0)&&(r=!1),d&&n.usedDuplicates[u])n.dump="*ref_"+u;else{if(h&&d&&!n.usedDuplicates[u]&&(n.usedDuplicates[u]=!0),a==="[object Object]")i&&Object.keys(n.dump).length!==0?(kne(n,e,n.dump,r),d&&(n.dump="&ref_"+u+n.dump)):(xne(n,e,n.dump),d&&(n.dump="&ref_"+u+" "+n.dump));else if(a==="[object Array]")i&&n.dump.length!==0?(n.noArrayIndent&&!o&&e>0?nM(n,e-1,n.dump,r):nM(n,e,n.dump,r),d&&(n.dump="&ref_"+u+n.dump)):(Sne(n,e,n.dump),d&&(n.dump="&ref_"+u+" "+n.dump));else if(a==="[object String]")n.tag!=="?"&&wne(n,n.dump,e,s,l);else{if(a==="[object Undefined]")return!1;if(n.skipInvalid)return!1;throw new _a("unacceptable kind of an object to dump "+a)}n.tag!==null&&n.tag!=="?"&&(c=encodeURI(n.tag[0]==="!"?n.tag.slice(1):n.tag).replace(/!/g,"%21"),n.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",n.dump=c+" "+n.dump)}return!0}R(fh,"writeNode");function Lne(n,e){var t=[],i=[],r,s;for(P4(n,t,i),r=0,s=i.length;r<s;r+=1)e.duplicates.push(t[i[r]]);e.usedDuplicates=new Array(s)}R(Lne,"getDuplicateReferences");function P4(n,e,t){var i,r,s;if(n!==null&&typeof n=="object")if(r=e.indexOf(n),r!==-1)t.indexOf(r)===-1&&t.push(r);else if(e.push(n),Array.isArray(n))for(r=0,s=n.length;r<s;r+=1)P4(n[r],e,t);else for(i=Object.keys(n),r=0,s=i.length;r<s;r+=1)P4(n[i[r]],e,t)}R(P4,"inspectNode");function gRe(n,e){e=e||{};var t=new dne(e);t.noRefs||Lne(n,t);var i=n;return t.replacer&&(i=t.replacer.call({"":i},"",i)),fh(t,0,i,!0,!0)?t.dump+`
`:""}R(gRe,"dump$1");function mRe(n,e){return function(){throw new Error("Function yaml."+n+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}R(mRe,"renamed");var pRe=bie,bRe=KAe.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var co={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},Wq={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function nv(n,e){if(n===void 0||e===void 0)return{angle:0,deltaX:0,deltaY:0};n=ir(n),e=ir(e);const[t,i]=[n.x,n.y],[r,s]=[e.x,e.y],o=r-t,a=s-i;return{angle:Math.atan(a/o),deltaX:o,deltaY:a}}R(nv,"calculateDeltaAndAngle");var ir=R(n=>Array.isArray(n)?{x:n[0],y:n[1]}:n,"pointTransformer"),_Re=R(n=>({x:R(function(e,t,i){let r=0;const s=ir(i[0]).x<ir(i[i.length-1]).x?"left":"right";if(t===0&&Object.hasOwn(co,n.arrowTypeStart)){const{angle:g,deltaX:p}=nv(i[0],i[1]);r=co[n.arrowTypeStart]*Math.cos(g)*(p>=0?1:-1)}else if(t===i.length-1&&Object.hasOwn(co,n.arrowTypeEnd)){const{angle:g,deltaX:p}=nv(i[i.length-1],i[i.length-2]);r=co[n.arrowTypeEnd]*Math.cos(g)*(p>=0?1:-1)}const o=Math.abs(ir(e).x-ir(i[i.length-1]).x),a=Math.abs(ir(e).y-ir(i[i.length-1]).y),l=Math.abs(ir(e).x-ir(i[0]).x),c=Math.abs(ir(e).y-ir(i[0]).y),h=co[n.arrowTypeStart],u=co[n.arrowTypeEnd],d=1;if(o<u&&o>0&&a<u){let g=u+d-o;g*=s==="right"?-1:1,r-=g}if(l<h&&l>0&&c<h){let g=h+d-l;g*=s==="right"?-1:1,r+=g}return ir(e).x+r},"x"),y:R(function(e,t,i){let r=0;const s=ir(i[0]).y<ir(i[i.length-1]).y?"down":"up";if(t===0&&Object.hasOwn(co,n.arrowTypeStart)){const{angle:g,deltaY:p}=nv(i[0],i[1]);r=co[n.arrowTypeStart]*Math.abs(Math.sin(g))*(p>=0?1:-1)}else if(t===i.length-1&&Object.hasOwn(co,n.arrowTypeEnd)){const{angle:g,deltaY:p}=nv(i[i.length-1],i[i.length-2]);r=co[n.arrowTypeEnd]*Math.abs(Math.sin(g))*(p>=0?1:-1)}const o=Math.abs(ir(e).y-ir(i[i.length-1]).y),a=Math.abs(ir(e).x-ir(i[i.length-1]).x),l=Math.abs(ir(e).y-ir(i[0]).y),c=Math.abs(ir(e).x-ir(i[0]).x),h=co[n.arrowTypeStart],u=co[n.arrowTypeEnd],d=1;if(o<u&&o>0&&a<u){let g=u+d-o;g*=s==="up"?-1:1,r-=g}if(l<h&&l>0&&c<h){let g=h+d-l;g*=s==="up"?-1:1,r+=g}return ir(e).y+r},"y")}),"getLineFunctionsWithOffset"),aO=R(({flowchart:n})=>{const e=n?.subGraphTitleMargin?.top??0,t=n?.subGraphTitleMargin?.bottom??0,i=e+t;return{subGraphTitleTopMargin:e,subGraphTitleBottomMargin:t,subGraphTitleTotalMargin:i}},"getSubGraphTitleMargins"),vRe=R(n=>{const{handDrawnSeed:e}=vn();return{fill:n,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:n,seed:e}},"solidStateFill"),pb=R(n=>{const e=wRe([...n.cssCompiledStyles||[],...n.cssStyles||[],...n.labelStyle||[]]);return{stylesMap:e,stylesArray:[...e]}},"compileStyles"),wRe=R(n=>{const e=new Map;return n.forEach(t=>{const[i,r]=t.split(":");e.set(i.trim(),r?.trim())}),e},"styles2Map"),Tne=R(n=>n==="color"||n==="font-size"||n==="font-family"||n==="font-weight"||n==="font-style"||n==="text-decoration"||n==="text-align"||n==="text-transform"||n==="line-height"||n==="letter-spacing"||n==="word-spacing"||n==="text-shadow"||n==="text-overflow"||n==="white-space"||n==="word-wrap"||n==="word-break"||n==="overflow-wrap"||n==="hyphens","isLabelStyle"),Lt=R(n=>{const{stylesArray:e}=pb(n),t=[],i=[],r=[],s=[];return e.forEach(o=>{const a=o[0];Tne(a)?t.push(o.join(":")+" !important"):(i.push(o.join(":")+" !important"),a.includes("stroke")&&r.push(o.join(":")+" !important"),a==="fill"&&s.push(o.join(":")+" !important"))}),{labelStyles:t.join(";"),nodeStyles:i.join(";"),stylesArray:e,borderStyles:r,backgroundStyles:s}},"styles2String"),kt=R((n,e)=>{const{themeVariables:t,handDrawnSeed:i}=vn(),{nodeBorder:r,mainBkg:s}=t,{stylesMap:o}=pb(n);return Object.assign({roughness:.7,fill:o.get("fill")||s,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:o.get("stroke")||r,seed:i,strokeWidth:o.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0],strokeLineDash:yRe(o.get("stroke-dasharray"))},e)},"userNodeOverrides"),yRe=R(n=>{if(!n)return[0,0];const e=n.trim().split(/\s+/).map(Number);if(e.length===1){const r=isNaN(e[0])?0:e[0];return[r,r]}const t=isNaN(e[0])?0:e[0],i=isNaN(e[1])?0:e[1];return[t,i]},"getStrokeDashArray"),A_={},hs={},zq;function CRe(){return zq||(zq=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.BLANK_URL=hs.relativeFirstCharacters=hs.whitespaceEscapeCharsRegex=hs.urlSchemeRegex=hs.ctrlCharactersRegex=hs.htmlCtrlEntityRegex=hs.htmlEntitiesRegex=hs.invalidProtocolRegex=void 0,hs.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,hs.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,hs.htmlCtrlEntityRegex=/&(newline|tab);/gi,hs.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,hs.urlSchemeRegex=/^.+(:|&colon;)/gim,hs.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,hs.relativeFirstCharacters=[".","/"],hs.BLANK_URL="about:blank"),hs}var Hq;function SRe(){if(Hq)return A_;Hq=1,Object.defineProperty(A_,"__esModule",{value:!0}),A_.sanitizeUrl=void 0;var n=CRe();function e(o){return n.relativeFirstCharacters.indexOf(o[0])>-1}function t(o){var a=o.replace(n.ctrlCharactersRegex,"");return a.replace(n.htmlEntitiesRegex,function(l,c){return String.fromCharCode(c)})}function i(o){return URL.canParse(o)}function r(o){try{return decodeURIComponent(o)}catch{return o}}function s(o){if(!o)return n.BLANK_URL;var a,l=r(o.trim());do l=t(l).replace(n.htmlCtrlEntityRegex,"").replace(n.ctrlCharactersRegex,"").replace(n.whitespaceEscapeCharsRegex,"").trim(),l=r(l),a=l.match(n.ctrlCharactersRegex)||l.match(n.htmlEntitiesRegex)||l.match(n.htmlCtrlEntityRegex)||l.match(n.whitespaceEscapeCharsRegex);while(a&&a.length>0);var c=l;if(!c)return n.BLANK_URL;if(e(c))return c;var h=c.trimStart(),u=h.match(n.urlSchemeRegex);if(!u)return c;var d=u[0].toLowerCase().trim();if(n.invalidProtocolRegex.test(d))return n.BLANK_URL;var g=h.replace(/\\/g,"/");if(d==="mailto:"||d.includes("://"))return g;if(d==="http:"||d==="https:"){if(!i(g))return n.BLANK_URL;var p=new URL(g);return p.protocol=p.protocol.toLowerCase(),p.hostname=p.hostname.toLowerCase(),p.toString()}return g}return A_.sanitizeUrl=s,A_}var xRe=SRe(),Dne=typeof global=="object"&&global&&global.Object===Object&&global,kRe=typeof self=="object"&&self&&self.Object===Object&&self,Sh=Dne||kRe||Function("return this")(),O4=Sh.Symbol,Ene=Object.prototype,LRe=Ene.hasOwnProperty,TRe=Ene.toString,R_=O4?O4.toStringTag:void 0;function DRe(n){var e=LRe.call(n,R_),t=n[R_];try{n[R_]=void 0;var i=!0}catch{}var r=TRe.call(n);return i&&(e?n[R_]=t:delete n[R_]),r}var ERe=Object.prototype,IRe=ERe.toString;function NRe(n){return IRe.call(n)}var MRe="[object Null]",ARe="[object Undefined]",Vq=O4?O4.toStringTag:void 0;function bb(n){return n==null?n===void 0?ARe:MRe:Vq&&Vq in Object(n)?DRe(n):NRe(n)}function op(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var RRe="[object AsyncFunction]",PRe="[object Function]",ORe="[object GeneratorFunction]",BRe="[object Proxy]";function lO(n){if(!op(n))return!1;var e=bb(n);return e==PRe||e==ORe||e==RRe||e==BRe}var bD=Sh["__core-js_shared__"],$q=function(){var n=/[^.]+$/.exec(bD&&bD.keys&&bD.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function FRe(n){return!!$q&&$q in n}var WRe=Function.prototype,zRe=WRe.toString;function ap(n){if(n!=null){try{return zRe.call(n)}catch{}try{return n+""}catch{}}return""}var HRe=/[\\^$.*+?()[\]{}|]/g,VRe=/^\[object .+?Constructor\]$/,$Re=Function.prototype,jRe=Object.prototype,URe=$Re.toString,qRe=jRe.hasOwnProperty,GRe=RegExp("^"+URe.call(qRe).replace(HRe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function KRe(n){if(!op(n)||FRe(n))return!1;var e=lO(n)?GRe:VRe;return e.test(ap(n))}function YRe(n,e){return n?.[e]}function lp(n,e){var t=YRe(n,e);return KRe(t)?t:void 0}var uy=lp(Object,"create");function ZRe(){this.__data__=uy?uy(null):{},this.size=0}function XRe(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var QRe="__lodash_hash_undefined__",JRe=Object.prototype,ePe=JRe.hasOwnProperty;function tPe(n){var e=this.__data__;if(uy){var t=e[n];return t===QRe?void 0:t}return ePe.call(e,n)?e[n]:void 0}var iPe=Object.prototype,nPe=iPe.hasOwnProperty;function rPe(n){var e=this.__data__;return uy?e[n]!==void 0:nPe.call(e,n)}var sPe="__lodash_hash_undefined__";function oPe(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=uy&&e===void 0?sPe:e,this}function Fm(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Fm.prototype.clear=ZRe;Fm.prototype.delete=XRe;Fm.prototype.get=tPe;Fm.prototype.has=rPe;Fm.prototype.set=oPe;function aPe(){this.__data__=[],this.size=0}function p3(n,e){return n===e||n!==n&&e!==e}function b3(n,e){for(var t=n.length;t--;)if(p3(n[t][0],e))return t;return-1}var lPe=Array.prototype,cPe=lPe.splice;function hPe(n){var e=this.__data__,t=b3(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():cPe.call(e,t,1),--this.size,!0}function uPe(n){var e=this.__data__,t=b3(e,n);return t<0?void 0:e[t][1]}function dPe(n){return b3(this.__data__,n)>-1}function fPe(n,e){var t=this.__data__,i=b3(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}function Xu(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Xu.prototype.clear=aPe;Xu.prototype.delete=hPe;Xu.prototype.get=uPe;Xu.prototype.has=dPe;Xu.prototype.set=fPe;var dy=lp(Sh,"Map");function gPe(){this.size=0,this.__data__={hash:new Fm,map:new(dy||Xu),string:new Fm}}function mPe(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function _3(n,e){var t=n.__data__;return mPe(e)?t[typeof e=="string"?"string":"hash"]:t.map}function pPe(n){var e=_3(this,n).delete(n);return this.size-=e?1:0,e}function bPe(n){return _3(this,n).get(n)}function _Pe(n){return _3(this,n).has(n)}function vPe(n,e){var t=_3(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}function Rf(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Rf.prototype.clear=gPe;Rf.prototype.delete=pPe;Rf.prototype.get=bPe;Rf.prototype.has=_Pe;Rf.prototype.set=vPe;var wPe="Expected a function";function eC(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(wPe);var t=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=t.cache;if(s.has(r))return s.get(r);var o=n.apply(this,i);return t.cache=s.set(r,o)||s,o};return t.cache=new(eC.Cache||Rf),t}eC.Cache=Rf;function yPe(){this.__data__=new Xu,this.size=0}function CPe(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function SPe(n){return this.__data__.get(n)}function xPe(n){return this.__data__.has(n)}var kPe=200;function LPe(n,e){var t=this.__data__;if(t instanceof Xu){var i=t.__data__;if(!dy||i.length<kPe-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new Rf(i)}return t.set(n,e),this.size=t.size,this}function _b(n){var e=this.__data__=new Xu(n);this.size=e.size}_b.prototype.clear=yPe;_b.prototype.delete=CPe;_b.prototype.get=SPe;_b.prototype.has=xPe;_b.prototype.set=LPe;var B4=function(){try{var n=lp(Object,"defineProperty");return n({},"",{}),n}catch{}}();function cO(n,e,t){e=="__proto__"&&B4?B4(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function sM(n,e,t){(t!==void 0&&!p3(n[e],t)||t===void 0&&!(e in n))&&cO(n,e,t)}function TPe(n){return function(e,t,i){for(var r=-1,s=Object(e),o=i(e),a=o.length;a--;){var l=o[++r];if(t(s[l],l,s)===!1)break}return e}}var DPe=TPe(),Ine=typeof exports=="object"&&exports&&!exports.nodeType&&exports,jq=Ine&&typeof module=="object"&&module&&!module.nodeType&&module,EPe=jq&&jq.exports===Ine,Uq=EPe?Sh.Buffer:void 0,qq=Uq?Uq.allocUnsafe:void 0;function IPe(n,e){if(e)return n.slice();var t=n.length,i=qq?qq(t):new n.constructor(t);return n.copy(i),i}var Gq=Sh.Uint8Array;function NPe(n){var e=new n.constructor(n.byteLength);return new Gq(e).set(new Gq(n)),e}function MPe(n,e){var t=e?NPe(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}function APe(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var Kq=Object.create,RPe=function(){function n(){}return function(e){if(!op(e))return{};if(Kq)return Kq(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();function Nne(n,e){return function(t){return n(e(t))}}var Mne=Nne(Object.getPrototypeOf,Object),PPe=Object.prototype;function v3(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||PPe;return n===t}function OPe(n){return typeof n.constructor=="function"&&!v3(n)?RPe(Mne(n)):{}}function tC(n){return n!=null&&typeof n=="object"}var BPe="[object Arguments]";function Yq(n){return tC(n)&&bb(n)==BPe}var Ane=Object.prototype,FPe=Ane.hasOwnProperty,WPe=Ane.propertyIsEnumerable,F4=Yq(function(){return arguments}())?Yq:function(n){return tC(n)&&FPe.call(n,"callee")&&!WPe.call(n,"callee")},W4=Array.isArray,zPe=9007199254740991;function Rne(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=zPe}function w3(n){return n!=null&&Rne(n.length)&&!lO(n)}function HPe(n){return tC(n)&&w3(n)}function VPe(){return!1}var Pne=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Zq=Pne&&typeof module=="object"&&module&&!module.nodeType&&module,$Pe=Zq&&Zq.exports===Pne,Xq=$Pe?Sh.Buffer:void 0,jPe=Xq?Xq.isBuffer:void 0,hO=jPe||VPe,UPe="[object Object]",qPe=Function.prototype,GPe=Object.prototype,One=qPe.toString,KPe=GPe.hasOwnProperty,YPe=One.call(Object);function ZPe(n){if(!tC(n)||bb(n)!=UPe)return!1;var e=Mne(n);if(e===null)return!0;var t=KPe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&One.call(t)==YPe}var XPe="[object Arguments]",QPe="[object Array]",JPe="[object Boolean]",eOe="[object Date]",tOe="[object Error]",iOe="[object Function]",nOe="[object Map]",rOe="[object Number]",sOe="[object Object]",oOe="[object RegExp]",aOe="[object Set]",lOe="[object String]",cOe="[object WeakMap]",hOe="[object ArrayBuffer]",uOe="[object DataView]",dOe="[object Float32Array]",fOe="[object Float64Array]",gOe="[object Int8Array]",mOe="[object Int16Array]",pOe="[object Int32Array]",bOe="[object Uint8Array]",_Oe="[object Uint8ClampedArray]",vOe="[object Uint16Array]",wOe="[object Uint32Array]",Xn={};Xn[dOe]=Xn[fOe]=Xn[gOe]=Xn[mOe]=Xn[pOe]=Xn[bOe]=Xn[_Oe]=Xn[vOe]=Xn[wOe]=!0;Xn[XPe]=Xn[QPe]=Xn[hOe]=Xn[JPe]=Xn[uOe]=Xn[eOe]=Xn[tOe]=Xn[iOe]=Xn[nOe]=Xn[rOe]=Xn[sOe]=Xn[oOe]=Xn[aOe]=Xn[lOe]=Xn[cOe]=!1;function yOe(n){return tC(n)&&Rne(n.length)&&!!Xn[bb(n)]}function COe(n){return function(e){return n(e)}}var Bne=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qv=Bne&&typeof module=="object"&&module&&!module.nodeType&&module,SOe=qv&&qv.exports===Bne,_D=SOe&&Dne.process,Qq=function(){try{var n=qv&&qv.require&&qv.require("util").types;return n||_D&&_D.binding&&_D.binding("util")}catch{}}(),Jq=Qq&&Qq.isTypedArray,uO=Jq?COe(Jq):yOe;function oM(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var xOe=Object.prototype,kOe=xOe.hasOwnProperty;function LOe(n,e,t){var i=n[e];(!(kOe.call(n,e)&&p3(i,t))||t===void 0&&!(e in n))&&cO(n,e,t)}function TOe(n,e,t,i){var r=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=void 0;l===void 0&&(l=n[a]),r?cO(t,a,l):LOe(t,a,l)}return t}function DOe(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var EOe=9007199254740991,IOe=/^(?:0|[1-9]\d*)$/;function Fne(n,e){var t=typeof n;return e=e??EOe,!!e&&(t=="number"||t!="symbol"&&IOe.test(n))&&n>-1&&n%1==0&&n<e}var NOe=Object.prototype,MOe=NOe.hasOwnProperty;function AOe(n,e){var t=W4(n),i=!t&&F4(n),r=!t&&!i&&hO(n),s=!t&&!i&&!r&&uO(n),o=t||i||r||s,a=o?DOe(n.length,String):[],l=a.length;for(var c in n)(e||MOe.call(n,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Fne(c,l)))&&a.push(c);return a}function ROe(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var POe=Object.prototype,OOe=POe.hasOwnProperty;function BOe(n){if(!op(n))return ROe(n);var e=v3(n),t=[];for(var i in n)i=="constructor"&&(e||!OOe.call(n,i))||t.push(i);return t}function Wne(n){return w3(n)?AOe(n,!0):BOe(n)}function FOe(n){return TOe(n,Wne(n))}function WOe(n,e,t,i,r,s,o){var a=oM(n,t),l=oM(e,t),c=o.get(l);if(c){sM(n,t,c);return}var h=s?s(a,l,t+"",n,e,o):void 0,u=h===void 0;if(u){var d=W4(l),g=!d&&hO(l),p=!d&&!g&&uO(l);h=l,d||g||p?W4(a)?h=a:HPe(a)?h=APe(a):g?(u=!1,h=IPe(l,!0)):p?(u=!1,h=MPe(l,!0)):h=[]:ZPe(l)||F4(l)?(h=a,F4(a)?h=FOe(a):(!op(a)||lO(a))&&(h=OPe(l))):u=!1}u&&(o.set(l,h),r(h,l,i,s,o),o.delete(l)),sM(n,t,h)}function zne(n,e,t,i,r){n!==e&&DPe(e,function(s,o){if(r||(r=new _b),op(s))WOe(n,e,o,t,zne,i,r);else{var a=i?i(oM(n,o),s,o+"",n,e,r):void 0;a===void 0&&(a=s),sM(n,o,a)}},Wne)}function Hne(n){return n}function zOe(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var eG=Math.max;function HOe(n,e,t){return e=eG(e===void 0?n.length-1:e,0),function(){for(var i=arguments,r=-1,s=eG(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=t(o),zOe(n,this,a)}}function VOe(n){return function(){return n}}var $Oe=B4?function(n,e){return B4(n,"toString",{configurable:!0,enumerable:!1,value:VOe(e),writable:!0})}:Hne,jOe=800,UOe=16,qOe=Date.now;function GOe(n){var e=0,t=0;return function(){var i=qOe(),r=UOe-(i-t);if(t=i,r>0){if(++e>=jOe)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var KOe=GOe($Oe);function YOe(n,e){return KOe(HOe(n,e,Hne),n+"")}function ZOe(n,e,t){if(!op(t))return!1;var i=typeof e;return(i=="number"?w3(t)&&Fne(e,t.length):i=="string"&&e in t)?p3(t[e],n):!1}function XOe(n){return YOe(function(e,t){var i=-1,r=t.length,s=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(r--,s):void 0,o&&ZOe(t[0],t[1],o)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var a=t[i];a&&n(e,a,i,s)}return e})}var QOe=XOe(function(n,e,t){zne(n,e,t)}),JOe="​",eBe={curveBasis:ux,curveBasisClosed:iAe,curveBasisOpen:nAe,curveBumpX:Lte,curveBumpY:Tte,curveBundle:rAe,curveCardinalClosed:sAe,curveCardinalOpen:oAe,curveCardinal:Nte,curveCatmullRomClosed:aAe,curveCatmullRomOpen:lAe,curveCatmullRom:Ate,curveLinear:L4,curveLinearClosed:cAe,curveMonotoneX:Wte,curveMonotoneY:zte,curveNatural:Vte,curveStep:$te,curveStepAfter:Ute,curveStepBefore:jte},tBe=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,iBe=R(function(n,e){const t=Vne(n,/(?:init\b)|(?:initialize\b)/);let i={};if(Array.isArray(t)){const o=t.map(a=>a.args);m4(o),i=gs(i,[...o])}else i=t.args;if(!i)return;let r=PP(n,e);const s="config";return i[s]!==void 0&&(r==="flowchart-v2"&&(r="flowchart"),i[r]=i[s],delete i[s]),i},"detectInit"),Vne=R(function(n,e=null){try{const t=new RegExp(`[%]{2}(?![{]${tBe.source})(?=[}][%]{2}).*
`,"ig");n=n.trim().replace(t,"").replace(/'/gm,'"'),ze.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${n}`);let i;const r=[];for(;(i=jv.exec(n))!==null;)if(i.index===jv.lastIndex&&jv.lastIndex++,i&&!e||e&&i[1]?.match(e)||e&&i[2]?.match(e)){const s=i[1]?i[1]:i[2],o=i[3]?i[3].trim():i[4]?JSON.parse(i[4].trim()):null;r.push({type:s,args:o})}return r.length===0?{type:n,args:null}:r.length===1?r[0]:r}catch(t){return ze.error(`ERROR: ${t.message} - Unable to parse directive type: '${e}' based on the text: '${n}'`),{type:void 0,args:null}}},"detectDirective"),nBe=R(function(n){return n.replace(jv,"")},"removeDirectives"),rBe=R(function(n,e){for(const[t,i]of e.entries())if(i.match(n))return t;return-1},"isSubstringInArray");function dO(n,e){if(!n)return e;const t=`curve${n.charAt(0).toUpperCase()+n.slice(1)}`;return eBe[t]??e}R(dO,"interpolateToCurve");function $ne(n,e){const t=n.trim();if(t)return e.securityLevel!=="loose"?xRe.sanitizeUrl(t):t}R($ne,"formatUrl");var sBe=R((n,...e)=>{const t=n.split("."),i=t.length-1,r=t[i];let s=window;for(let o=0;o<i;o++)if(s=s[t[o]],!s){ze.error(`Function name: ${n} not found in window`);return}s[r](...e)},"runFunc");function fO(n,e){return!n||!e?0:Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}R(fO,"distance");function jne(n){let e,t=0;n.forEach(r=>{t+=fO(r,e),e=r});const i=t/2;return gO(n,i)}R(jne,"traverseEdge");function Une(n){return n.length===1?n[0]:jne(n)}R(Une,"calcLabelPosition");var tG=R((n,e=2)=>{const t=Math.pow(10,e);return Math.round(n*t)/t},"roundNumber"),gO=R((n,e)=>{let t,i=e;for(const r of n){if(t){const s=fO(r,t);if(s===0)return t;if(s<i)i-=s;else{const o=i/s;if(o<=0)return t;if(o>=1)return{x:r.x,y:r.y};if(o>0&&o<1)return{x:tG((1-o)*t.x+o*r.x,5),y:tG((1-o)*t.y+o*r.y,5)}}}t=r}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),oBe=R((n,e,t)=>{ze.info(`our points ${JSON.stringify(e)}`),e[0]!==t&&(e=e.reverse());const r=gO(e,25),s=n?10:5,o=Math.atan2(e[0].y-r.y,e[0].x-r.x),a={x:0,y:0};return a.x=Math.sin(o)*s+(e[0].x+r.x)/2,a.y=-Math.cos(o)*s+(e[0].y+r.y)/2,a},"calcCardinalityPosition");function qne(n,e,t){const i=structuredClone(t);ze.info("our points",i),e!=="start_left"&&e!=="start_right"&&i.reverse();const r=25+n,s=gO(i,r),o=10+n*.5,a=Math.atan2(i[0].y-s.y,i[0].x-s.x),l={x:0,y:0};return e==="start_left"?(l.x=Math.sin(a+Math.PI)*o+(i[0].x+s.x)/2,l.y=-Math.cos(a+Math.PI)*o+(i[0].y+s.y)/2):e==="end_right"?(l.x=Math.sin(a-Math.PI)*o+(i[0].x+s.x)/2-5,l.y=-Math.cos(a-Math.PI)*o+(i[0].y+s.y)/2-5):e==="end_left"?(l.x=Math.sin(a)*o+(i[0].x+s.x)/2-5,l.y=-Math.cos(a)*o+(i[0].y+s.y)/2-5):(l.x=Math.sin(a)*o+(i[0].x+s.x)/2,l.y=-Math.cos(a)*o+(i[0].y+s.y)/2),l}R(qne,"calcTerminalLabelPosition");function Gne(n){let e="",t="";for(const i of n)i!==void 0&&(i.startsWith("color:")||i.startsWith("text-align:")?t=t+i+";":e=e+i+";");return{style:e,labelStyle:t}}R(Gne,"getStylesFromArray");var iG=0,aBe=R(()=>(iG++,"id-"+Math.random().toString(36).substr(2,12)+"-"+iG),"generateId");function Kne(n){let e="";const t="0123456789abcdef",i=t.length;for(let r=0;r<n;r++)e+=t.charAt(Math.floor(Math.random()*i));return e}R(Kne,"makeRandomHex");var lBe=R(n=>Kne(n.length),"random"),cBe=R(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),hBe=R(function(n,e){const t=e.text.replace(mb.lineBreakRegex," "),[,i]=y3(e.fontSize),r=n.append("text");r.attr("x",e.x),r.attr("y",e.y),r.style("text-anchor",e.anchor),r.style("font-family",e.fontFamily),r.style("font-size",i),r.style("font-weight",e.fontWeight),r.attr("fill",e.fill),e.class!==void 0&&r.attr("class",e.class);const s=r.append("tspan");return s.attr("x",e.x+e.textMargin*2),s.attr("fill",e.fill),s.text(t),r},"drawSimpleText"),uBe=eC((n,e,t)=>{if(!n||(t=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},t),mb.lineBreakRegex.test(n)))return n;const i=n.split(" ").filter(Boolean),r=[];let s="";return i.forEach((o,a)=>{const l=Vu(`${o} `,t),c=Vu(s,t);if(l>e){const{hyphenatedStrings:d,remainingWord:g}=dBe(o,e,"-",t);r.push(s,...d),s=g}else c+l>=e?(r.push(s),s=o):s=[s,o].filter(Boolean).join(" ");a+1===i.length&&r.push(s)}),r.filter(o=>o!=="").join(t.joinWith)},(n,e,t)=>`${n}${e}${t.fontSize}${t.fontWeight}${t.fontFamily}${t.joinWith}`),dBe=eC((n,e,t="-",i)=>{i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},i);const r=[...n],s=[];let o="";return r.forEach((a,l)=>{const c=`${o}${a}`;if(Vu(c,i)>=e){const u=l+1,d=r.length===u,g=`${c}${t}`;s.push(d?c:g),o=""}else o=c}),{hyphenatedStrings:s,remainingWord:o}},(n,e,t="-",i)=>`${n}${e}${t}${i.fontSize}${i.fontWeight}${i.fontFamily}`);function Yne(n,e){return mO(n,e).height}R(Yne,"calculateTextHeight");function Vu(n,e){return mO(n,e).width}R(Vu,"calculateTextWidth");var mO=eC((n,e)=>{const{fontSize:t=12,fontFamily:i="Arial",fontWeight:r=400}=e;if(!n)return{width:0,height:0};const[,s]=y3(t),o=["sans-serif",i],a=n.split(mb.lineBreakRegex),l=[],c=Ji("body");if(!c.remove)return{width:0,height:0,lineHeight:0};const h=c.append("svg");for(const d of o){let g=0;const p={width:0,height:0,lineHeight:0};for(const b of a){const _=cBe();_.text=b||JOe;const w=hBe(h,_).style("font-size",s).style("font-weight",r).style("font-family",d),y=(w._groups||w)[0][0].getBBox();if(y.width===0&&y.height===0)throw new Error("svg element not in render tree");p.width=Math.round(Math.max(p.width,y.width)),g=Math.round(y.height),p.height+=g,p.lineHeight=Math.round(Math.max(p.lineHeight,g))}l.push(p)}h.remove();const u=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[u]},(n,e)=>`${n}${e.fontSize}${e.fontWeight}${e.fontFamily}`),_1,fBe=(_1=class{constructor(e=!1,t){this.count=0,this.count=t?t.length:0,this.next=e?()=>this.count++:()=>Date.now()}},R(_1,"InitIDGenerator"),_1),yS,gBe=R(function(n){return yS=yS||document.createElement("div"),n=escape(n).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),yS.innerHTML=n,unescape(yS.textContent)},"entityDecode");function pO(n){return"str"in n}R(pO,"isDetailedError");var mBe=R((n,e,t,i)=>{if(!i)return;const r=n.node()?.getBBox();r&&n.append("text").text(i).attr("text-anchor","middle").attr("x",r.x+r.width/2).attr("y",-t).attr("class",e)},"insertTitle"),y3=R(n=>{if(typeof n=="number")return[n,n+"px"];const e=parseInt(n??"",10);return Number.isNaN(e)?[void 0,void 0]:n===String(e)?[e,n+"px"]:[e,n]},"parseFontSize");function bO(n,e){return QOe({},n,e)}R(bO,"cleanAndMerge");var oc={assignWithDepth:gs,wrapLabel:uBe,calculateTextHeight:Yne,calculateTextWidth:Vu,calculateTextDimensions:mO,cleanAndMerge:bO,detectInit:iBe,detectDirective:Vne,isSubstringInArray:rBe,interpolateToCurve:dO,calcLabelPosition:Une,calcCardinalityPosition:oBe,calcTerminalLabelPosition:qne,formatUrl:$ne,getStylesFromArray:Gne,generateId:aBe,random:lBe,runFunc:sBe,entityDecode:gBe,insertTitle:mBe,isLabelCoordinateInPath:Zne,parseFontSize:y3,InitIDGenerator:fBe},pBe=R(function(n){let e=n;return e=e.replace(/style.*:\S*#.*;/g,function(t){return t.substring(0,t.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(t){return t.substring(0,t.length-1)}),e=e.replace(/#\w+;/g,function(t){const i=t.substring(1,t.length-1);return/^\+?\d+$/.test(i)?"ﬂ°°"+i+"¶ß":"ﬂ°"+i+"¶ß"}),e},"encodeEntities"),cp=R(function(n){return n.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},"decodeEntities"),TUe=R((n,e,{counter:t=0,prefix:i,suffix:r},s)=>s||`${i?`${i}_`:""}${n}_${e}_${t}${r?`_${r}`:""}`,"getEdgeId");function vo(n){return n??null}R(vo,"handleUndefinedAttr");function Zne(n,e){const t=Math.round(n.x),i=Math.round(n.y),r=e.replace(/(\d+\.\d+)/g,s=>Math.round(parseFloat(s)).toString());return r.includes(t.toString())||r.includes(i.toString())}R(Zne,"isLabelCoordinateInPath");const bBe=Object.freeze({left:0,top:0,width:16,height:16}),z4=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Xne=Object.freeze({...bBe,...z4}),_Be=Object.freeze({...Xne,body:"",hidden:!1}),vBe=Object.freeze({width:null,height:null}),wBe=Object.freeze({...vBe,...z4}),yBe=(n,e,t,i="")=>{const r=n.split(":");if(n.slice(0,1)==="@"){if(r.length<2||r.length>3)return null;i=r.shift().slice(1)}if(r.length>3||!r.length)return null;if(r.length>1){const a=r.pop(),l=r.pop(),c={provider:r.length>0?r[0]:i,prefix:l,name:a};return vD(c)?c:null}const s=r[0],o=s.split("-");if(o.length>1){const a={provider:i,prefix:o.shift(),name:o.join("-")};return vD(a)?a:null}if(t&&i===""){const a={provider:i,prefix:"",name:s};return vD(a,t)?a:null}return null},vD=(n,e)=>n?!!((e&&n.prefix===""||n.prefix)&&n.name):!1;function CBe(n,e){const t={};!n.hFlip!=!e.hFlip&&(t.hFlip=!0),!n.vFlip!=!e.vFlip&&(t.vFlip=!0);const i=((n.rotate||0)+(e.rotate||0))%4;return i&&(t.rotate=i),t}function nG(n,e){const t=CBe(n,e);for(const i in _Be)i in z4?i in n&&!(i in t)&&(t[i]=z4[i]):i in e?t[i]=e[i]:i in n&&(t[i]=n[i]);return t}function SBe(n,e){const t=n.icons,i=n.aliases||Object.create(null),r=Object.create(null);function s(o){if(t[o])return r[o]=[];if(!(o in r)){r[o]=null;const a=i[o]&&i[o].parent,l=a&&s(a);l&&(r[o]=[a].concat(l))}return r[o]}return(e||Object.keys(t).concat(Object.keys(i))).forEach(s),r}function rG(n,e,t){const i=n.icons,r=n.aliases||Object.create(null);let s={};function o(a){s=nG(i[a]||r[a],s)}return o(e),t.forEach(o),nG(n,s)}function xBe(n,e){if(n.icons[e])return rG(n,e,[]);const t=SBe(n,[e])[e];return t?rG(n,e,t):null}const kBe=/(-?[0-9.]*[0-9]+[0-9.]*)/g,LBe=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function sG(n,e,t){if(e===1)return n;if(t=t||100,typeof n=="number")return Math.ceil(n*e*t)/t;if(typeof n!="string")return n;const i=n.split(kBe);if(i===null||!i.length)return n;const r=[];let s=i.shift(),o=LBe.test(s);for(;;){if(o){const a=parseFloat(s);isNaN(a)?r.push(s):r.push(Math.ceil(a*e*t)/t)}else r.push(s);if(s=i.shift(),s===void 0)return r.join("");o=!o}}function TBe(n,e="defs"){let t="";const i=n.indexOf("<"+e);for(;i>=0;){const r=n.indexOf(">",i),s=n.indexOf("</"+e);if(r===-1||s===-1)break;const o=n.indexOf(">",s);if(o===-1)break;t+=n.slice(r+1,s).trim(),n=n.slice(0,i).trim()+n.slice(o+1)}return{defs:t,content:n}}function DBe(n,e){return n?"<defs>"+n+"</defs>"+e:e}function EBe(n,e,t){const i=TBe(n);return DBe(i.defs,e+i.content+t)}const IBe=n=>n==="unset"||n==="undefined"||n==="none";function NBe(n,e){const t={...Xne,...n},i={...wBe,...e},r={left:t.left,top:t.top,width:t.width,height:t.height};let s=t.body;[t,i].forEach(b=>{const _=[],w=b.hFlip,y=b.vFlip;let k=b.rotate;w?y?k+=2:(_.push("translate("+(r.width+r.left).toString()+" "+(0-r.top).toString()+")"),_.push("scale(-1 1)"),r.top=r.left=0):y&&(_.push("translate("+(0-r.left).toString()+" "+(r.height+r.top).toString()+")"),_.push("scale(1 -1)"),r.top=r.left=0);let L;switch(k<0&&(k-=Math.floor(k/4)*4),k=k%4,k){case 1:L=r.height/2+r.top,_.unshift("rotate(90 "+L.toString()+" "+L.toString()+")");break;case 2:_.unshift("rotate(180 "+(r.width/2+r.left).toString()+" "+(r.height/2+r.top).toString()+")");break;case 3:L=r.width/2+r.left,_.unshift("rotate(-90 "+L.toString()+" "+L.toString()+")");break}k%2===1&&(r.left!==r.top&&(L=r.left,r.left=r.top,r.top=L),r.width!==r.height&&(L=r.width,r.width=r.height,r.height=L)),_.length&&(s=EBe(s,'<g transform="'+_.join(" ")+'">',"</g>"))});const o=i.width,a=i.height,l=r.width,c=r.height;let h,u;o===null?(u=a===null?"1em":a==="auto"?c:a,h=sG(u,l/c)):(h=o==="auto"?l:o,u=a===null?sG(h,c/l):a==="auto"?c:a);const d={},g=(b,_)=>{IBe(_)||(d[b]=_.toString())};g("width",h),g("height",u);const p=[r.left,r.top,l,c];return d.viewBox=p.join(" "),{attributes:d,viewBox:p,body:s}}const MBe=/\sid="(\S+)"/g,ABe="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let RBe=0;function PBe(n,e=ABe){const t=[];let i;for(;i=MBe.exec(n);)t.push(i[1]);if(!t.length)return n;const r="suffix"+(Math.random()*16777216|Date.now()).toString(16);return t.forEach(s=>{const o=typeof e=="function"?e(s):e+(RBe++).toString(),a=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");n=n.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+o+r+"$3")}),n=n.replace(new RegExp(r,"g"),""),n}function OBe(n,e){let t=n.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const i in e)t+=" "+i+'="'+e[i]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+n+"</svg>"}function _O(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var hp=_O();function Qne(n){hp=n}var Gv={exec:()=>null};function gn(n,e=""){let t=typeof n=="string"?n:n.source,i={replace:(r,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace($o.caret,"$1"),t=t.replace(r,o),i},getRegex:()=>new RegExp(t,e)};return i}var $o={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},BBe=/^(?:[ \t]*(?:\n|$))+/,FBe=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,WBe=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,iC=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,zBe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,vO=/(?:[*+-]|\d{1,9}[.)])/,Jne=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,ere=gn(Jne).replace(/bull/g,vO).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),HBe=gn(Jne).replace(/bull/g,vO).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),wO=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,VBe=/^[^\n]+/,yO=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,$Be=gn(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",yO).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),jBe=gn(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,vO).getRegex(),C3="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",CO=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,UBe=gn("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",CO).replace("tag",C3).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),tre=gn(wO).replace("hr",iC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",C3).getRegex(),qBe=gn(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",tre).getRegex(),SO={blockquote:qBe,code:FBe,def:$Be,fences:WBe,heading:zBe,hr:iC,html:UBe,lheading:ere,list:jBe,newline:BBe,paragraph:tre,table:Gv,text:VBe},oG=gn("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",iC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",C3).getRegex(),GBe={...SO,lheading:HBe,table:oG,paragraph:gn(wO).replace("hr",iC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",oG).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",C3).getRegex()},KBe={...SO,html:gn(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",CO).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Gv,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:gn(wO).replace("hr",iC).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ere).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},YBe=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,ZBe=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ire=/^( {2,}|\\)\n(?!\s*$)/,XBe=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,S3=/[\p{P}\p{S}]/u,xO=/[\s\p{P}\p{S}]/u,nre=/[^\s\p{P}\p{S}]/u,QBe=gn(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,xO).getRegex(),rre=/(?!~)[\p{P}\p{S}]/u,JBe=/(?!~)[\s\p{P}\p{S}]/u,eFe=/(?:[^\s\p{P}\p{S}]|~)/u,tFe=/\[(?:[^\[\]`]|`[^`]*?`)*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,sre=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,iFe=gn(sre,"u").replace(/punct/g,S3).getRegex(),nFe=gn(sre,"u").replace(/punct/g,rre).getRegex(),ore="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",rFe=gn(ore,"gu").replace(/notPunctSpace/g,nre).replace(/punctSpace/g,xO).replace(/punct/g,S3).getRegex(),sFe=gn(ore,"gu").replace(/notPunctSpace/g,eFe).replace(/punctSpace/g,JBe).replace(/punct/g,rre).getRegex(),oFe=gn("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,nre).replace(/punctSpace/g,xO).replace(/punct/g,S3).getRegex(),aFe=gn(/\\(punct)/,"gu").replace(/punct/g,S3).getRegex(),lFe=gn(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),cFe=gn(CO).replace("(?:-->|$)","-->").getRegex(),hFe=gn("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",cFe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),H4=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,uFe=gn(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",H4).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),are=gn(/^!?\[(label)\]\[(ref)\]/).replace("label",H4).replace("ref",yO).getRegex(),lre=gn(/^!?\[(ref)\](?:\[\])?/).replace("ref",yO).getRegex(),dFe=gn("reflink|nolink(?!\\()","g").replace("reflink",are).replace("nolink",lre).getRegex(),aG=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,kO={_backpedal:Gv,anyPunctuation:aFe,autolink:lFe,blockSkip:tFe,br:ire,code:ZBe,del:Gv,emStrongLDelim:iFe,emStrongRDelimAst:rFe,emStrongRDelimUnd:oFe,escape:YBe,link:uFe,nolink:lre,punctuation:QBe,reflink:are,reflinkSearch:dFe,tag:hFe,text:XBe,url:Gv},fFe={...kO,link:gn(/^!?\[(label)\]\((.*?)\)/).replace("label",H4).getRegex(),reflink:gn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",H4).getRegex()},aM={...kO,emStrongRDelimAst:sFe,emStrongLDelim:nFe,url:gn(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",aG).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:gn(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",aG).getRegex()},gFe={...aM,br:gn(ire).replace("{2,}","*").getRegex(),text:gn(aM.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},CS={normal:SO,gfm:GBe,pedantic:KBe},P_={normal:kO,gfm:aM,breaks:gFe,pedantic:fFe},mFe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},lG=n=>mFe[n];function Oc(n,e){if(e){if($o.escapeTest.test(n))return n.replace($o.escapeReplace,lG)}else if($o.escapeTestNoEncode.test(n))return n.replace($o.escapeReplaceNoEncode,lG);return n}function cG(n){try{n=encodeURI(n).replace($o.percentDecode,"%")}catch{return null}return n}function hG(n,e){let t=n.replace($o.findPipe,(s,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),i=t.split($o.splitPipe),r=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace($o.slashPipe,"|");return i}function O_(n,e,t){let i=n.length;if(i===0)return"";let r=0;for(;r<i&&n.charAt(i-r-1)===e;)r++;return n.slice(0,i-r)}function pFe(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let i=0;i<n.length;i++)if(n[i]==="\\")i++;else if(n[i]===e[0])t++;else if(n[i]===e[1]&&(t--,t<0))return i;return t>0?-2:-1}function uG(n,e,t,i,r){let s=e.href,o=e.title||null,a=n[1].replace(r.other.outputLinkReplace,"$1");i.state.inLink=!0;let l={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:s,title:o,text:a,tokens:i.inlineTokens(a)};return i.state.inLink=!1,l}function bFe(n,e,t){let i=n.match(t.other.indentCodeCompensation);if(i===null)return e;let r=i[1];return e.split(`
`).map(s=>{let o=s.match(t.other.beginningSpace);if(o===null)return s;let[a]=o;return a.length>=r.length?s.slice(r.length):s}).join(`
`)}var V4=class{options;rules;lexer;constructor(e){this.options=e||hp}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let i=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:O_(i,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let i=t[0],r=bFe(i,t[3]||"",this.rules);return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(this.rules.other.endingHash.test(i)){let r=O_(i,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(i=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:O_(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let i=O_(t[0],`
`).split(`
`),r="",s="",o=[];for(;i.length>0;){let a=!1,l=[],c;for(c=0;c<i.length;c++)if(this.rules.other.blockquoteStart.test(i[c]))l.push(i[c]),a=!0;else if(!a)l.push(i[c]);else break;i=i.slice(c);let h=l.join(`
`),u=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${h}`:h,s=s?`${s}
${u}`:u;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,o,!0),this.lexer.state.top=d,i.length===0)break;let g=o.at(-1);if(g?.type==="code")break;if(g?.type==="blockquote"){let p=g,b=p.raw+`
`+i.join(`
`),_=this.blockquote(b);o[o.length-1]=_,r=r.substring(0,r.length-p.raw.length)+_.raw,s=s.substring(0,s.length-p.text.length)+_.text;break}else if(g?.type==="list"){let p=g,b=p.raw+`
`+i.join(`
`),_=this.list(b);o[o.length-1]=_,r=r.substring(0,r.length-g.raw.length)+_.raw,s=s.substring(0,s.length-p.raw.length)+_.raw,i=b.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:o,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim(),r=i.length>1,s={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");let o=this.rules.other.listItemRegex(i),a=!1;for(;e;){let c=!1,h="",u="";if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;h=t[0],e=e.substring(h.length);let d=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,y=>" ".repeat(3*y.length)),g=e.split(`
`,1)[0],p=!d.trim(),b=0;if(this.options.pedantic?(b=2,u=d.trimStart()):p?b=t[1].length+1:(b=t[2].search(this.rules.other.nonSpaceChar),b=b>4?1:b,u=d.slice(b),b+=t[1].length),p&&this.rules.other.blankLine.test(g)&&(h+=g+`
`,e=e.substring(g.length+1),c=!0),!c){let y=this.rules.other.nextBulletRegex(b),k=this.rules.other.hrRegex(b),L=this.rules.other.fencesBeginRegex(b),T=this.rules.other.headingBeginRegex(b),N=this.rules.other.htmlBeginRegex(b);for(;e;){let D=e.split(`
`,1)[0],O;if(g=D,this.options.pedantic?(g=g.replace(this.rules.other.listReplaceNesting,"  "),O=g):O=g.replace(this.rules.other.tabCharGlobal,"    "),L.test(g)||T.test(g)||N.test(g)||y.test(g)||k.test(g))break;if(O.search(this.rules.other.nonSpaceChar)>=b||!g.trim())u+=`
`+O.slice(b);else{if(p||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||L.test(d)||T.test(d)||k.test(d))break;u+=`
`+g}!p&&!g.trim()&&(p=!0),h+=D+`
`,e=e.substring(D.length+1),d=O.slice(b)}}s.loose||(a?s.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(a=!0));let _=null,w;this.options.gfm&&(_=this.rules.other.listIsTask.exec(u),_&&(w=_[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:h,task:!!_,checked:w,loose:!1,text:u,tokens:[]}),s.raw+=h}let l=s.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let c=0;c<s.items.length;c++)if(this.lexer.state.top=!1,s.items[c].tokens=this.lexer.blockTokens(s.items[c].text,[]),!s.loose){let h=s.items[c].tokens.filter(d=>d.type==="space"),u=h.length>0&&h.some(d=>this.rules.other.anyLine.test(d.raw));s.loose=u}if(s.loose)for(let c=0;c<s.items.length;c++)s.items[c].loose=!0;return s}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let i=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:r,title:s}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let i=hG(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(i.length===r.length){for(let a of r)this.rules.other.tableAlignRight.test(a)?o.align.push("right"):this.rules.other.tableAlignCenter.test(a)?o.align.push("center"):this.rules.other.tableAlignLeft.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<i.length;a++)o.header.push({text:i[a],tokens:this.lexer.inline(i[a]),header:!0,align:o.align[a]});for(let a of s)o.rows.push(hG(a,o.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[c]})));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let i=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let i=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(i)){if(!this.rules.other.endAngleBracket.test(i))return;let o=O_(i.slice(0,-1),"\\");if((i.length-o.length)%2===0)return}else{let o=pFe(t[2],"()");if(o===-2)return;if(o>-1){let a=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let r=t[2],s="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(r);o&&(r=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(i)?r=r.slice(1):r=r.slice(1,-1)),uG(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=t[r.toLowerCase()];if(!s){let o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return uG(i,s,i[0],this.lexer,this.rules)}}emStrong(e,t,i=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!(!r||r[3]&&i.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!i||this.rules.inline.punctuation.exec(i))){let s=[...r[0]].length-1,o,a,l=s,c=0,h=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+s);(r=h.exec(t))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(a=[...o].length,r[3]||r[4]){l+=a;continue}else if((r[5]||r[6])&&s%3&&!((s+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);let u=[...r[0]][0].length,d=e.slice(0,s+r.index+u+a);if(Math.min(s,a)%2){let p=d.slice(1,-1);return{type:"em",raw:d,text:p,tokens:this.lexer.inlineTokens(p)}}let g=d.slice(2,-2);return{type:"strong",raw:d,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(i),s=this.rules.other.startingSpaceChar.test(i)&&this.rules.other.endingSpaceChar.test(i);return r&&s&&(i=i.substring(1,i.length-1)),{type:"codespan",raw:t[0],text:i}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let i,r;return t[2]==="@"?(i=t[1],r="mailto:"+i):(i=t[1],r=i),{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let i,r;if(t[2]==="@")i=t[0],r="mailto:"+i;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);i=t[0],t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let i=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:i}}}},tc=class lM{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||hp,this.options.tokenizer=this.options.tokenizer||new V4,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:$o,block:CS.normal,inline:P_.normal};this.options.pedantic?(t.block=CS.pedantic,t.inline=P_.pedantic):this.options.gfm&&(t.block=CS.gfm,this.options.breaks?t.inline=P_.breaks:t.inline=P_.gfm),this.tokenizer.rules=t}static get rules(){return{block:CS,inline:P_}}static lex(e,t){return new lM(t).lex(e)}static lexInline(e,t){return new lM(t).inlineTokens(e)}lex(e){e=e.replace($o.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let i=this.inlineQueue[t];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],i=!1){for(this.options.pedantic&&(e=e.replace($o.tabCharGlobal,"    ").replace($o.spaceLine,""));e;){let r;if(this.options.extensions?.block?.some(o=>(r=o.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))continue;if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length);let o=t.at(-1);r.raw.length===1&&o!==void 0?o.raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length);let o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.at(-1).src=o.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length);let o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},t.push(r));continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}let s=e;if(this.options.extensions?.startBlock){let o=1/0,a=e.slice(1),l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},a),typeof l=="number"&&l>=0&&(o=Math.min(o,l))}),o<1/0&&o>=0&&(s=e.substring(0,o+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){let o=t.at(-1);i&&o?.type==="paragraph"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(r),i=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length);let o=t.at(-1);o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(r);continue}if(e){let o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let i=e,r=null;if(this.tokens.links){let a=Object.keys(this.tokens.links);if(a.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)a.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,r.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);i=this.options.hooks?.emStrongMask?.call({lexer:this},i)??i;let s=!1,o="";for(;e;){s||(o=""),s=!1;let a;if(this.options.extensions?.inline?.some(c=>(a=c.call({lexer:this},e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))continue;if(a=this.tokenizer.escape(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.tag(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.link(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(a.raw.length);let c=t.at(-1);a.type==="text"&&c?.type==="text"?(c.raw+=a.raw,c.text+=a.text):t.push(a);continue}if(a=this.tokenizer.emStrong(e,i,o)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.codespan(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.br(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.del(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.autolink(e)){e=e.substring(a.raw.length),t.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(e))){e=e.substring(a.raw.length),t.push(a);continue}let l=e;if(this.options.extensions?.startInline){let c=1/0,h=e.slice(1),u;this.options.extensions.startInline.forEach(d=>{u=d.call({lexer:this},h),typeof u=="number"&&u>=0&&(c=Math.min(c,u))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(a=this.tokenizer.inlineText(l)){e=e.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(o=a.raw.slice(-1)),s=!0;let c=t.at(-1);c?.type==="text"?(c.raw+=a.raw,c.text+=a.text):t.push(a);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return t}},$4=class{options;parser;constructor(e){this.options=e||hp}space(e){return""}code({text:e,lang:t,escaped:i}){let r=(t||"").match($o.notSpaceStart)?.[0],s=e.replace($o.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Oc(r)+'">'+(i?s:Oc(s,!0))+`</code></pre>
`:"<pre><code>"+(i?s:Oc(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,i=e.start,r="";for(let a=0;a<e.items.length;a++){let l=e.items[a];r+=this.listitem(l)}let s=t?"ol":"ul",o=t&&i!==1?' start="'+i+'"':"";return"<"+s+o+`>
`+r+"</"+s+`>
`}listitem(e){let t="";if(e.task){let i=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+Oc(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",i="";for(let s=0;s<e.header.length;s++)i+=this.tablecell(e.header[s]);t+=this.tablerow({text:i});let r="";for(let s=0;s<e.rows.length;s++){let o=e.rows[s];i="";for(let a=0;a<o.length;a++)i+=this.tablecell(o[a]);r+=this.tablerow({text:i})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+t+`</${i}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Oc(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:i}){let r=this.parser.parseInline(i),s=cG(e);if(s===null)return r;e=s;let o='<a href="'+e+'"';return t&&(o+=' title="'+Oc(t)+'"'),o+=">"+r+"</a>",o}image({href:e,title:t,text:i,tokens:r}){r&&(i=this.parser.parseInline(r,this.parser.textRenderer));let s=cG(e);if(s===null)return Oc(i);e=s;let o=`<img src="${e}" alt="${i}"`;return t&&(o+=` title="${Oc(t)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Oc(e.text)}},LO=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},ic=class cM{options;renderer;textRenderer;constructor(e){this.options=e||hp,this.options.renderer=this.options.renderer||new $4,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new LO}static parse(e,t){return new cM(t).parse(e)}static parseInline(e,t){return new cM(t).parseInline(e)}parse(e,t=!0){let i="";for(let r=0;r<e.length;r++){let s=e[r];if(this.options.extensions?.renderers?.[s.type]){let a=s,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(a.type)){i+=l||"";continue}}let o=s;switch(o.type){case"space":{i+=this.renderer.space(o);continue}case"hr":{i+=this.renderer.hr(o);continue}case"heading":{i+=this.renderer.heading(o);continue}case"code":{i+=this.renderer.code(o);continue}case"table":{i+=this.renderer.table(o);continue}case"blockquote":{i+=this.renderer.blockquote(o);continue}case"list":{i+=this.renderer.list(o);continue}case"html":{i+=this.renderer.html(o);continue}case"def":{i+=this.renderer.def(o);continue}case"paragraph":{i+=this.renderer.paragraph(o);continue}case"text":{let a=o,l=this.renderer.text(a);for(;r+1<e.length&&e[r+1].type==="text";)a=e[++r],l+=`
`+this.renderer.text(a);t?i+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):i+=l;continue}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}parseInline(e,t=this.renderer){let i="";for(let r=0;r<e.length;r++){let s=e[r];if(this.options.extensions?.renderers?.[s.type]){let a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=a||"";continue}}let o=s;switch(o.type){case"escape":{i+=t.text(o);break}case"html":{i+=t.html(o);break}case"link":{i+=t.link(o);break}case"image":{i+=t.image(o);break}case"strong":{i+=t.strong(o);break}case"em":{i+=t.em(o);break}case"codespan":{i+=t.codespan(o);break}case"br":{i+=t.br(o);break}case"del":{i+=t.del(o);break}case"text":{i+=t.text(o);break}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}},rv=class{options;block;constructor(e){this.options=e||hp}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?tc.lex:tc.lexInline}provideParser(){return this.block?ic.parse:ic.parseInline}},_Fe=class{defaults=_O();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=ic;Renderer=$4;TextRenderer=LO;Lexer=tc;Tokenizer=V4;Hooks=rv;constructor(...e){this.use(...e)}walkTokens(e,t){let i=[];for(let r of e)switch(i=i.concat(t.call(this,r)),r.type){case"table":{let s=r;for(let o of s.header)i=i.concat(this.walkTokens(o.tokens,t));for(let o of s.rows)for(let a of o)i=i.concat(this.walkTokens(a.tokens,t));break}case"list":{let s=r;i=i.concat(this.walkTokens(s.items,t));break}default:{let s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{let a=s[o].flat(1/0);i=i.concat(this.walkTokens(a,t))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,t)))}}return i}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{let r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let o=t.renderers[s.name];o?t.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=t[s.level];o?o.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),r.extensions=t),i.renderer){let s=this.defaults.renderer||new $4(this.defaults);for(let o in i.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let a=o,l=i.renderer[a],c=s[a];s[a]=(...h)=>{let u=l.apply(s,h);return u===!1&&(u=c.apply(s,h)),u||""}}r.renderer=s}if(i.tokenizer){let s=this.defaults.tokenizer||new V4(this.defaults);for(let o in i.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,l=i.tokenizer[a],c=s[a];s[a]=(...h)=>{let u=l.apply(s,h);return u===!1&&(u=c.apply(s,h)),u}}r.tokenizer=s}if(i.hooks){let s=this.defaults.hooks||new rv;for(let o in i.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let a=o,l=i.hooks[a],c=s[a];rv.passThroughHooks.has(o)?s[a]=h=>{if(this.defaults.async&&rv.passThroughHooksRespectAsync.has(o))return(async()=>{let d=await l.call(s,h);return c.call(s,d)})();let u=l.call(s,h);return c.call(s,u)}:s[a]=(...h)=>{if(this.defaults.async)return(async()=>{let d=await l.apply(s,h);return d===!1&&(d=await c.apply(s,h)),d})();let u=l.apply(s,h);return u===!1&&(u=c.apply(s,h)),u}}r.hooks=s}if(i.walkTokens){let s=this.defaults.walkTokens,o=i.walkTokens;r.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return tc.lex(e,t??this.defaults)}parser(e,t){return ic.parse(e,t??this.defaults)}parseMarkdown(e){return(t,i)=>{let r={...i},s={...this.defaults,...r},o=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&r.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(s.hooks&&(s.hooks.options=s,s.hooks.block=e),s.async)return(async()=>{let a=s.hooks?await s.hooks.preprocess(t):t,l=await(s.hooks?await s.hooks.provideLexer():e?tc.lex:tc.lexInline)(a,s),c=s.hooks?await s.hooks.processAllTokens(l):l;s.walkTokens&&await Promise.all(this.walkTokens(c,s.walkTokens));let h=await(s.hooks?await s.hooks.provideParser():e?ic.parse:ic.parseInline)(c,s);return s.hooks?await s.hooks.postprocess(h):h})().catch(o);try{s.hooks&&(t=s.hooks.preprocess(t));let a=(s.hooks?s.hooks.provideLexer():e?tc.lex:tc.lexInline)(t,s);s.hooks&&(a=s.hooks.processAllTokens(a)),s.walkTokens&&this.walkTokens(a,s.walkTokens);let l=(s.hooks?s.hooks.provideParser():e?ic.parse:ic.parseInline)(a,s);return s.hooks&&(l=s.hooks.postprocess(l)),l}catch(a){return o(a)}}}onError(e,t){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let r="<p>An error occurred:</p><pre>"+Oc(i.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(i);throw i}}},Wm=new _Fe;function wn(n,e){return Wm.parse(n,e)}wn.options=wn.setOptions=function(n){return Wm.setOptions(n),wn.defaults=Wm.defaults,Qne(wn.defaults),wn};wn.getDefaults=_O;wn.defaults=hp;wn.use=function(...n){return Wm.use(...n),wn.defaults=Wm.defaults,Qne(wn.defaults),wn};wn.walkTokens=function(n,e){return Wm.walkTokens(n,e)};wn.parseInline=Wm.parseInline;wn.Parser=ic;wn.parser=ic.parse;wn.Renderer=$4;wn.TextRenderer=LO;wn.Lexer=tc;wn.lexer=tc.lex;wn.Tokenizer=V4;wn.Hooks=rv;wn.parse=wn;wn.options;wn.setOptions;wn.use;wn.walkTokens;wn.parseInline;ic.parse;tc.lex;function cre(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var i=Array.from(typeof n=="string"?[n]:n);i[i.length-1]=i[i.length-1].replace(/\r?\n([\t ]*)$/,"");var r=i.reduce(function(a,l){var c=l.match(/\n([\t ]+|(?!\s).)/g);return c?a.concat(c.map(function(h){var u,d;return(d=(u=h.match(/[\t ]/g))===null||u===void 0?void 0:u.length)!==null&&d!==void 0?d:0})):a},[]);if(r.length){var s=new RegExp(`
[	 ]{`+Math.min.apply(Math,r)+"}","g");i=i.map(function(a){return a.replace(s,`
`)})}i[0]=i[0].replace(/^\r?\n/,"");var o=i[0];return e.forEach(function(a,l){var c=o.match(/(?:^|\n)( *)$/),h=c?c[1]:"",u=a;typeof a=="string"&&a.includes(`
`)&&(u=String(a).split(`
`).map(function(d,g){return g===0?d:""+h+d}).join(`
`)),o+=u+i[l+1]}),o}var vFe={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},hM=new Map,hre=new Map,wFe=R(n=>{for(const e of n){if(!e.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(ze.debug("Registering icon pack:",e.name),"loader"in e)hre.set(e.name,e.loader);else if("icons"in e)hM.set(e.name,e.icons);else throw ze.error("Invalid icon loader:",e),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),ure=R(async(n,e)=>{const t=yBe(n,!0,e!==void 0);if(!t)throw new Error(`Invalid icon name: ${n}`);const i=t.prefix||e;if(!i)throw new Error(`Icon name must contain a prefix: ${n}`);let r=hM.get(i);if(!r){const o=hre.get(i);if(!o)throw new Error(`Icon set not found: ${t.prefix}`);try{r={...await o(),prefix:i},hM.set(i,r)}catch(a){throw ze.error(a),new Error(`Failed to load icon set: ${t.prefix}`)}}const s=xBe(r,t.name);if(!s)throw new Error(`Icon not found: ${n}`);return s},"getRegisteredIconData"),yFe=R(async n=>{try{return await ure(n),!0}catch{return!1}},"isIconAvailable"),nC=R(async(n,e,t)=>{let i;try{i=await ure(n,e?.fallbackPrefix)}catch(o){ze.error(o),i=vFe}const r=NBe(i,e),s=OBe(PBe(r.body),{...r.attributes,...t});return Il(s,bo())},"getIconSVG");function dre(n,{markdownAutoWrap:e}){const i=n.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),r=cre(i);return e===!1?r.replace(/ /g,"&nbsp;"):r}R(dre,"preprocessMarkdown");function fre(n,e={}){const t=dre(n,e),i=wn.lexer(t),r=[[]];let s=0;function o(a,l="normal"){a.type==="text"?a.text.split(`
`).forEach((h,u)=>{u!==0&&(s++,r.push([])),h.split(" ").forEach(d=>{d=d.replace(/&#39;/g,"'"),d&&r[s].push({content:d,type:l})})}):a.type==="strong"||a.type==="em"?a.tokens.forEach(c=>{o(c,a.type)}):a.type==="html"&&r[s].push({content:a.text,type:"normal"})}return R(o,"processNode"),i.forEach(a=>{a.type==="paragraph"?a.tokens?.forEach(l=>{o(l)}):a.type==="html"?r[s].push({content:a.text,type:"normal"}):r[s].push({content:a.raw,type:"normal"})}),r}R(fre,"markdownToLines");function gre(n,{markdownAutoWrap:e}={}){const t=wn.lexer(n);function i(r){return r.type==="text"?e===!1?r.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):r.text.replace(/\n */g,"<br/>"):r.type==="strong"?`<strong>${r.tokens?.map(i).join("")}</strong>`:r.type==="em"?`<em>${r.tokens?.map(i).join("")}</em>`:r.type==="paragraph"?`<p>${r.tokens?.map(i).join("")}</p>`:r.type==="space"?"":r.type==="html"?`${r.text}`:r.type==="escape"?r.text:(ze.warn(`Unsupported markdown: ${r.type}`),r.raw)}return R(i,"output"),t.map(i).join("")}R(gre,"markdownToHTML");function mre(n){return Intl.Segmenter?[...new Intl.Segmenter().segment(n)].map(e=>e.segment):[...n]}R(mre,"splitTextToChars");function pre(n,e){const t=mre(e.content);return TO(n,[],t,e.type)}R(pre,"splitWordToFitWidth");function TO(n,e,t,i){if(t.length===0)return[{content:e.join(""),type:i},{content:"",type:i}];const[r,...s]=t,o=[...e,r];return n([{content:o.join(""),type:i}])?TO(n,o,s,i):(e.length===0&&r&&(e.push(r),t.shift()),[{content:e.join(""),type:i},{content:t.join(""),type:i}])}R(TO,"splitWordToFitWidthRecursion");function bre(n,e){if(n.some(({content:t})=>t.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return j4(n,e)}R(bre,"splitLineToFitWidth");function j4(n,e,t=[],i=[]){if(n.length===0)return i.length>0&&t.push(i),t.length>0?t:[];let r="";n[0].content===" "&&(r=" ",n.shift());const s=n.shift()??{content:" ",type:"normal"},o=[...i];if(r!==""&&o.push({content:r,type:"normal"}),o.push(s),e(o))return j4(n,e,t,o);if(i.length>0)t.push(i),n.unshift(s);else if(s.content){const[a,l]=pre(e,s);t.push([a]),l.content&&n.unshift(l)}return j4(n,e,t)}R(j4,"splitLineToFitWidthRecursion");function uM(n,e){e&&n.attr("style",e)}R(uM,"applyStyle");async function _re(n,e,t,i,r=!1,s=bo()){const o=n.append("foreignObject");o.attr("width",`${10*t}px`),o.attr("height",`${10*t}px`);const a=o.append("xhtml:div"),l=U1(e.label)?await OP(e.label.replace(mb.lineBreakRegex,`
`),s):Il(e.label,s),c=e.isNode?"nodeLabel":"edgeLabel",h=a.append("span");h.html(l),uM(h,e.labelStyle),h.attr("class",`${c} ${i}`),uM(a,e.labelStyle),a.style("display","table-cell"),a.style("white-space","nowrap"),a.style("line-height","1.5"),a.style("max-width",t+"px"),a.style("text-align","center"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),r&&a.attr("class","labelBkg");let u=a.node().getBoundingClientRect();return u.width===t&&(a.style("display","table"),a.style("white-space","break-spaces"),a.style("width",t+"px"),u=a.node().getBoundingClientRect()),o.node()}R(_re,"addHtmlSpan");function x3(n,e,t){return n.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*t-.1+"em").attr("dy",t+"em")}R(x3,"createTspan");function vre(n,e,t){const i=n.append("text"),r=x3(i,1,e);k3(r,t);const s=r.node().getComputedTextLength();return i.remove(),s}R(vre,"computeWidthOfText");function CFe(n,e,t){const i=n.append("text"),r=x3(i,1,e);k3(r,[{content:t,type:"normal"}]);const s=r.node()?.getBoundingClientRect();return s&&i.remove(),s}R(CFe,"computeDimensionOfText");function wre(n,e,t,i=!1){const s=e.append("g"),o=s.insert("rect").attr("class","background").attr("style","stroke: none"),a=s.append("text").attr("y","-10.1");let l=0;for(const c of t){const h=R(d=>vre(s,1.1,d)<=n,"checkWidth"),u=h(c)?[c]:bre(c,h);for(const d of u){const g=x3(a,l,1.1);k3(g,d),l++}}if(i){const c=a.node().getBBox(),h=2;return o.attr("x",c.x-h).attr("y",c.y-h).attr("width",c.width+2*h).attr("height",c.height+2*h),s.node()}else return a.node()}R(wre,"createFormattedText");function k3(n,e){n.text(""),e.forEach((t,i)=>{const r=n.append("tspan").attr("font-style",t.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",t.type==="strong"?"bold":"normal");i===0?r.text(t.content):r.text(" "+t.content)})}R(k3,"updateTextContentAndStyles");async function yre(n,e={}){const t=[];n.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(r,s,o)=>(t.push((async()=>{const a=`${s}:${o}`;return await yFe(a)?await nC(a,void 0,{class:"label-icon"}):`<i class='${Il(r,e).replace(":"," ")}'></i>`})()),r));const i=await Promise.all(t);return n.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>i.shift()??"")}R(yre,"replaceIconSubstring");var Pf=R(async(n,e="",{style:t="",isTitle:i=!1,classes:r="",useHtmlLabels:s=!0,isNode:o=!0,width:a=200,addSvgBackground:l=!1}={},c)=>{if(ze.debug("XYZ createText",e,t,i,r,s,o,"addSvgBackground: ",l),s){const h=gre(e,c),u=await yre(cp(h),c),d=e.replace(/\\\\/g,"\\"),g={isNode:o,label:U1(e)?d:u,labelStyle:t.replace("fill:","color:")};return await _re(n,g,a,r,l,c)}else{const h=e.replace(/<br\s*\/?>/g,"<br/>"),u=fre(h.replace("<br>","<br/>"),c),d=wre(a,n,u,e?l:!1);if(o){/stroke:/.exec(t)&&(t=t.replace("stroke:","lineColor:"));const g=t.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Ji(d).attr("style",g)}else{const g=t.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");Ji(d).select("rect").attr("style",g.replace(/background:/g,"fill:"));const p=t.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Ji(d).select("text").attr("style",p)}return d}},"createText");function wD(n,e,t){if(n&&n.length){const[i,r]=e,s=Math.PI/180*t,o=Math.cos(s),a=Math.sin(s);for(const l of n){const[c,h]=l;l[0]=(c-i)*o-(h-r)*a+i,l[1]=(c-i)*a+(h-r)*o+r}}}function SFe(n,e){return n[0]===e[0]&&n[1]===e[1]}function xFe(n,e,t,i=1){const r=t,s=Math.max(e,.1),o=n[0]&&n[0][0]&&typeof n[0][0]=="number"?[n]:n,a=[0,0];if(r)for(const c of o)wD(c,a,r);const l=function(c,h,u){const d=[];for(const y of c){const k=[...y];SFe(k[0],k[k.length-1])||k.push([k[0][0],k[0][1]]),k.length>2&&d.push(k)}const g=[];h=Math.max(h,.1);const p=[];for(const y of d)for(let k=0;k<y.length-1;k++){const L=y[k],T=y[k+1];if(L[1]!==T[1]){const N=Math.min(L[1],T[1]);p.push({ymin:N,ymax:Math.max(L[1],T[1]),x:N===L[1]?L[0]:T[0],islope:(T[0]-L[0])/(T[1]-L[1])})}}if(p.sort((y,k)=>y.ymin<k.ymin?-1:y.ymin>k.ymin?1:y.x<k.x?-1:y.x>k.x?1:y.ymax===k.ymax?0:(y.ymax-k.ymax)/Math.abs(y.ymax-k.ymax)),!p.length)return g;let b=[],_=p[0].ymin,w=0;for(;b.length||p.length;){if(p.length){let y=-1;for(let k=0;k<p.length&&!(p[k].ymin>_);k++)y=k;p.splice(0,y+1).forEach(k=>{b.push({s:_,edge:k})})}if(b=b.filter(y=>!(y.edge.ymax<=_)),b.sort((y,k)=>y.edge.x===k.edge.x?0:(y.edge.x-k.edge.x)/Math.abs(y.edge.x-k.edge.x)),(u!==1||w%h==0)&&b.length>1)for(let y=0;y<b.length;y+=2){const k=y+1;if(k>=b.length)break;const L=b[y].edge,T=b[k].edge;g.push([[Math.round(L.x),_],[Math.round(T.x),_]])}_+=u,b.forEach(y=>{y.edge.x=y.edge.x+u*y.edge.islope}),w++}return g}(o,s,i);if(r){for(const c of o)wD(c,a,-r);(function(c,h,u){const d=[];c.forEach(g=>d.push(...g)),wD(d,h,u)})(l,a,-r)}return l}function rC(n,e){var t;const i=e.hachureAngle+90;let r=e.hachureGap;r<0&&(r=4*e.strokeWidth),r=Math.round(Math.max(r,.1));let s=1;return e.roughness>=1&&(((t=e.randomizer)===null||t===void 0?void 0:t.next())||Math.random())>.7&&(s=r),xFe(n,r,i,s||1)}class DO{constructor(e){this.helper=e}fillPolygons(e,t){return this._fillPolygons(e,t)}_fillPolygons(e,t){const i=rC(e,t);return{type:"fillSketch",ops:this.renderLines(i,t)}}renderLines(e,t){const i=[];for(const r of e)i.push(...this.helper.doubleLineOps(r[0][0],r[0][1],r[1][0],r[1][1],t));return i}}function L3(n){const e=n[0],t=n[1];return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}class kFe extends DO{fillPolygons(e,t){let i=t.hachureGap;i<0&&(i=4*t.strokeWidth),i=Math.max(i,.1);const r=rC(e,Object.assign({},t,{hachureGap:i})),s=Math.PI/180*t.hachureAngle,o=[],a=.5*i*Math.cos(s),l=.5*i*Math.sin(s);for(const[c,h]of r)L3([c,h])&&o.push([[c[0]-a,c[1]+l],[...h]],[[c[0]+a,c[1]-l],[...h]]);return{type:"fillSketch",ops:this.renderLines(o,t)}}}class LFe extends DO{fillPolygons(e,t){const i=this._fillPolygons(e,t),r=Object.assign({},t,{hachureAngle:t.hachureAngle+90}),s=this._fillPolygons(e,r);return i.ops=i.ops.concat(s.ops),i}}class TFe{constructor(e){this.helper=e}fillPolygons(e,t){const i=rC(e,t=Object.assign({},t,{hachureAngle:0}));return this.dotsOnLines(i,t)}dotsOnLines(e,t){const i=[];let r=t.hachureGap;r<0&&(r=4*t.strokeWidth),r=Math.max(r,.1);let s=t.fillWeight;s<0&&(s=t.strokeWidth/2);const o=r/4;for(const a of e){const l=L3(a),c=l/r,h=Math.ceil(c)-1,u=l-h*r,d=(a[0][0]+a[1][0])/2-r/4,g=Math.min(a[0][1],a[1][1]);for(let p=0;p<h;p++){const b=g+u+p*r,_=d-o+2*Math.random()*o,w=b-o+2*Math.random()*o,y=this.helper.ellipse(_,w,s,s,t);i.push(...y.ops)}}return{type:"fillSketch",ops:i}}}class DFe{constructor(e){this.helper=e}fillPolygons(e,t){const i=rC(e,t);return{type:"fillSketch",ops:this.dashedLine(i,t)}}dashedLine(e,t){const i=t.dashOffset<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashOffset,r=t.dashGap<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashGap,s=[];return e.forEach(o=>{const a=L3(o),l=Math.floor(a/(i+r)),c=(a+r-l*(i+r))/2;let h=o[0],u=o[1];h[0]>u[0]&&(h=o[1],u=o[0]);const d=Math.atan((u[1]-h[1])/(u[0]-h[0]));for(let g=0;g<l;g++){const p=g*(i+r),b=p+i,_=[h[0]+p*Math.cos(d)+c*Math.cos(d),h[1]+p*Math.sin(d)+c*Math.sin(d)],w=[h[0]+b*Math.cos(d)+c*Math.cos(d),h[1]+b*Math.sin(d)+c*Math.sin(d)];s.push(...this.helper.doubleLineOps(_[0],_[1],w[0],w[1],t))}}),s}}class EFe{constructor(e){this.helper=e}fillPolygons(e,t){const i=t.hachureGap<0?4*t.strokeWidth:t.hachureGap,r=t.zigzagOffset<0?i:t.zigzagOffset,s=rC(e,t=Object.assign({},t,{hachureGap:i+r}));return{type:"fillSketch",ops:this.zigzagLines(s,r,t)}}zigzagLines(e,t,i){const r=[];return e.forEach(s=>{const o=L3(s),a=Math.round(o/(2*t));let l=s[0],c=s[1];l[0]>c[0]&&(l=s[1],c=s[0]);const h=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let u=0;u<a;u++){const d=2*u*t,g=2*(u+1)*t,p=Math.sqrt(2*Math.pow(t,2)),b=[l[0]+d*Math.cos(h),l[1]+d*Math.sin(h)],_=[l[0]+g*Math.cos(h),l[1]+g*Math.sin(h)],w=[b[0]+p*Math.cos(h+Math.PI/4),b[1]+p*Math.sin(h+Math.PI/4)];r.push(...this.helper.doubleLineOps(b[0],b[1],w[0],w[1],i),...this.helper.doubleLineOps(w[0],w[1],_[0],_[1],i))}}),r}}const aa={};class IFe{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const NFe=0,yD=1,dG=2,SS={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function CD(n,e){return n.type===e}function EO(n){const e=[],t=function(o){const a=new Array;for(;o!=="";)if(o.match(/^([ \t\r\n,]+)/))o=o.substr(RegExp.$1.length);else if(o.match(/^([aAcChHlLmMqQsStTvVzZ])/))a[a.length]={type:NFe,text:RegExp.$1},o=o.substr(RegExp.$1.length);else{if(!o.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];a[a.length]={type:yD,text:`${parseFloat(RegExp.$1)}`},o=o.substr(RegExp.$1.length)}return a[a.length]={type:dG,text:""},a}(n);let i="BOD",r=0,s=t[r];for(;!CD(s,dG);){let o=0;const a=[];if(i==="BOD"){if(s.text!=="M"&&s.text!=="m")return EO("M0,0"+n);r++,o=SS[s.text],i=s.text}else CD(s,yD)?o=SS[i]:(r++,o=SS[s.text],i=s.text);if(!(r+o<t.length))throw new Error("Path data ended short");for(let l=r;l<r+o;l++){const c=t[l];if(!CD(c,yD))throw new Error("Param not a number: "+i+","+c.text);a[a.length]=+c.text}if(typeof SS[i]!="number")throw new Error("Bad segment: "+i);{const l={key:i,data:a};e.push(l),r+=o,s=t[r],i==="M"&&(i="L"),i==="m"&&(i="l")}}return e}function Cre(n){let e=0,t=0,i=0,r=0;const s=[];for(const{key:o,data:a}of n)switch(o){case"M":s.push({key:"M",data:[...a]}),[e,t]=a,[i,r]=a;break;case"m":e+=a[0],t+=a[1],s.push({key:"M",data:[e,t]}),i=e,r=t;break;case"L":s.push({key:"L",data:[...a]}),[e,t]=a;break;case"l":e+=a[0],t+=a[1],s.push({key:"L",data:[e,t]});break;case"C":s.push({key:"C",data:[...a]}),e=a[4],t=a[5];break;case"c":{const l=a.map((c,h)=>h%2?c+t:c+e);s.push({key:"C",data:l}),e=l[4],t=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),e=a[2],t=a[3];break;case"q":{const l=a.map((c,h)=>h%2?c+t:c+e);s.push({key:"Q",data:l}),e=l[2],t=l[3];break}case"A":s.push({key:"A",data:[...a]}),e=a[5],t=a[6];break;case"a":e+=a[5],t+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],e,t]});break;case"H":s.push({key:"H",data:[...a]}),e=a[0];break;case"h":e+=a[0],s.push({key:"H",data:[e]});break;case"V":s.push({key:"V",data:[...a]}),t=a[0];break;case"v":t+=a[0],s.push({key:"V",data:[t]});break;case"S":s.push({key:"S",data:[...a]}),e=a[2],t=a[3];break;case"s":{const l=a.map((c,h)=>h%2?c+t:c+e);s.push({key:"S",data:l}),e=l[2],t=l[3];break}case"T":s.push({key:"T",data:[...a]}),e=a[0],t=a[1];break;case"t":e+=a[0],t+=a[1],s.push({key:"T",data:[e,t]});break;case"Z":case"z":s.push({key:"Z",data:[]}),e=i,t=r}return s}function Sre(n){const e=[];let t="",i=0,r=0,s=0,o=0,a=0,l=0;for(const{key:c,data:h}of n){switch(c){case"M":e.push({key:"M",data:[...h]}),[i,r]=h,[s,o]=h;break;case"C":e.push({key:"C",data:[...h]}),i=h[4],r=h[5],a=h[2],l=h[3];break;case"L":e.push({key:"L",data:[...h]}),[i,r]=h;break;case"H":i=h[0],e.push({key:"L",data:[i,r]});break;case"V":r=h[0],e.push({key:"L",data:[i,r]});break;case"S":{let u=0,d=0;t==="C"||t==="S"?(u=i+(i-a),d=r+(r-l)):(u=i,d=r),e.push({key:"C",data:[u,d,...h]}),a=h[0],l=h[1],i=h[2],r=h[3];break}case"T":{const[u,d]=h;let g=0,p=0;t==="Q"||t==="T"?(g=i+(i-a),p=r+(r-l)):(g=i,p=r);const b=i+2*(g-i)/3,_=r+2*(p-r)/3,w=u+2*(g-u)/3,y=d+2*(p-d)/3;e.push({key:"C",data:[b,_,w,y,u,d]}),a=g,l=p,i=u,r=d;break}case"Q":{const[u,d,g,p]=h,b=i+2*(u-i)/3,_=r+2*(d-r)/3,w=g+2*(u-g)/3,y=p+2*(d-p)/3;e.push({key:"C",data:[b,_,w,y,g,p]}),a=u,l=d,i=g,r=p;break}case"A":{const u=Math.abs(h[0]),d=Math.abs(h[1]),g=h[2],p=h[3],b=h[4],_=h[5],w=h[6];u===0||d===0?(e.push({key:"C",data:[i,r,_,w,_,w]}),i=_,r=w):(i!==_||r!==w)&&(xre(i,r,_,w,u,d,g,p,b).forEach(function(y){e.push({key:"C",data:y})}),i=_,r=w);break}case"Z":e.push({key:"Z",data:[]}),i=s,r=o}t=c}return e}function B_(n,e,t){return[n*Math.cos(t)-e*Math.sin(t),n*Math.sin(t)+e*Math.cos(t)]}function xre(n,e,t,i,r,s,o,a,l,c){const h=(u=o,Math.PI*u/180);var u;let d=[],g=0,p=0,b=0,_=0;if(c)[g,p,b,_]=c;else{[n,e]=B_(n,e,-h),[t,i]=B_(t,i,-h);const X=(n-t)/2,z=(e-i)/2;let Q=X*X/(r*r)+z*z/(s*s);Q>1&&(Q=Math.sqrt(Q),r*=Q,s*=Q);const te=r*r,se=s*s,Y=te*se-te*z*z-se*X*X,ae=te*z*z+se*X*X,fe=(a===l?-1:1)*Math.sqrt(Math.abs(Y/ae));b=fe*r*z/s+(n+t)/2,_=fe*-s*X/r+(e+i)/2,g=Math.asin(parseFloat(((e-_)/s).toFixed(9))),p=Math.asin(parseFloat(((i-_)/s).toFixed(9))),n<b&&(g=Math.PI-g),t<b&&(p=Math.PI-p),g<0&&(g=2*Math.PI+g),p<0&&(p=2*Math.PI+p),l&&g>p&&(g-=2*Math.PI),!l&&p>g&&(p-=2*Math.PI)}let w=p-g;if(Math.abs(w)>120*Math.PI/180){const X=p,z=t,Q=i;p=l&&p>g?g+120*Math.PI/180*1:g+120*Math.PI/180*-1,d=xre(t=b+r*Math.cos(p),i=_+s*Math.sin(p),z,Q,r,s,o,0,l,[p,X,b,_])}w=p-g;const y=Math.cos(g),k=Math.sin(g),L=Math.cos(p),T=Math.sin(p),N=Math.tan(w/4),D=4/3*r*N,O=4/3*s*N,B=[n,e],G=[n+D*k,e-O*y],H=[t+D*T,i-O*L],q=[t,i];if(G[0]=2*B[0]-G[0],G[1]=2*B[1]-G[1],c)return[G,H,q].concat(d);{d=[G,H,q].concat(d);const X=[];for(let z=0;z<d.length;z+=3){const Q=B_(d[z][0],d[z][1],h),te=B_(d[z+1][0],d[z+1][1],h),se=B_(d[z+2][0],d[z+2][1],h);X.push([Q[0],Q[1],te[0],te[1],se[0],se[1]])}return X}}const MFe={randOffset:function(n,e){return si(n,e)},randOffsetWithRange:function(n,e,t){return U4(n,e,t)},ellipse:function(n,e,t,i,r){const s=Lre(t,i,r);return dM(n,e,r,s).opset},doubleLineOps:function(n,e,t,i,r){return kf(n,e,t,i,r,!0)}};function kre(n,e,t,i,r){return{type:"path",ops:kf(n,e,t,i,r)}}function gx(n,e,t){const i=(n||[]).length;if(i>2){const r=[];for(let s=0;s<i-1;s++)r.push(...kf(n[s][0],n[s][1],n[s+1][0],n[s+1][1],t));return e&&r.push(...kf(n[i-1][0],n[i-1][1],n[0][0],n[0][1],t)),{type:"path",ops:r}}return i===2?kre(n[0][0],n[0][1],n[1][0],n[1][1],t):{type:"path",ops:[]}}function AFe(n,e,t,i,r){return function(s,o){return gx(s,!0,o)}([[n,e],[n+t,e],[n+t,e+i],[n,e+i]],r)}function fG(n,e){if(n.length){const t=typeof n[0][0]=="number"?[n]:n,i=xS(t[0],1*(1+.2*e.roughness),e),r=e.disableMultiStroke?[]:xS(t[0],1.5*(1+.22*e.roughness),pG(e));for(let s=1;s<t.length;s++){const o=t[s];if(o.length){const a=xS(o,1*(1+.2*e.roughness),e),l=e.disableMultiStroke?[]:xS(o,1.5*(1+.22*e.roughness),pG(e));for(const c of a)c.op!=="move"&&i.push(c);for(const c of l)c.op!=="move"&&r.push(c)}}return{type:"path",ops:i.concat(r)}}return{type:"path",ops:[]}}function Lre(n,e,t){const i=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(n/2,2)+Math.pow(e/2,2))/2)),r=Math.ceil(Math.max(t.curveStepCount,t.curveStepCount/Math.sqrt(200)*i)),s=2*Math.PI/r;let o=Math.abs(n/2),a=Math.abs(e/2);const l=1-t.curveFitting;return o+=si(o*l,t),a+=si(a*l,t),{increment:s,rx:o,ry:a}}function dM(n,e,t,i){const[r,s]=bG(i.increment,n,e,i.rx,i.ry,1,i.increment*U4(.1,U4(.4,1,t),t),t);let o=q4(r,null,t);if(!t.disableMultiStroke&&t.roughness!==0){const[a]=bG(i.increment,n,e,i.rx,i.ry,1.5,0,t),l=q4(a,null,t);o=o.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function gG(n,e,t,i,r,s,o,a,l){const c=n,h=e;let u=Math.abs(t/2),d=Math.abs(i/2);u+=si(.01*u,l),d+=si(.01*d,l);let g=r,p=s;for(;g<0;)g+=2*Math.PI,p+=2*Math.PI;p-g>2*Math.PI&&(g=0,p=2*Math.PI);const b=2*Math.PI/l.curveStepCount,_=Math.min(b/2,(p-g)/2),w=_G(_,c,h,u,d,g,p,1,l);if(!l.disableMultiStroke){const y=_G(_,c,h,u,d,g,p,1.5,l);w.push(...y)}return o&&(a?w.push(...kf(c,h,c+u*Math.cos(g),h+d*Math.sin(g),l),...kf(c,h,c+u*Math.cos(p),h+d*Math.sin(p),l)):w.push({op:"lineTo",data:[c,h]},{op:"lineTo",data:[c+u*Math.cos(g),h+d*Math.sin(g)]})),{type:"path",ops:w}}function mG(n,e){const t=Sre(Cre(EO(n))),i=[];let r=[0,0],s=[0,0];for(const{key:o,data:a}of t)switch(o){case"M":s=[a[0],a[1]],r=[a[0],a[1]];break;case"L":i.push(...kf(s[0],s[1],a[0],a[1],e)),s=[a[0],a[1]];break;case"C":{const[l,c,h,u,d,g]=a;i.push(...RFe(l,c,h,u,d,g,s,e)),s=[d,g];break}case"Z":i.push(...kf(s[0],s[1],r[0],r[1],e)),s=[r[0],r[1]]}return{type:"path",ops:i}}function SD(n,e){const t=[];for(const i of n)if(i.length){const r=e.maxRandomnessOffset||0,s=i.length;if(s>2){t.push({op:"move",data:[i[0][0]+si(r,e),i[0][1]+si(r,e)]});for(let o=1;o<s;o++)t.push({op:"lineTo",data:[i[o][0]+si(r,e),i[o][1]+si(r,e)]})}}return{type:"fillPath",ops:t}}function Kp(n,e){return function(t,i){let r=t.fillStyle||"hachure";if(!aa[r])switch(r){case"zigzag":aa[r]||(aa[r]=new kFe(i));break;case"cross-hatch":aa[r]||(aa[r]=new LFe(i));break;case"dots":aa[r]||(aa[r]=new TFe(i));break;case"dashed":aa[r]||(aa[r]=new DFe(i));break;case"zigzag-line":aa[r]||(aa[r]=new EFe(i));break;default:r="hachure",aa[r]||(aa[r]=new DO(i))}return aa[r]}(e,MFe).fillPolygons(n,e)}function pG(n){const e=Object.assign({},n);return e.randomizer=void 0,n.seed&&(e.seed=n.seed+1),e}function Tre(n){return n.randomizer||(n.randomizer=new IFe(n.seed||0)),n.randomizer.next()}function U4(n,e,t,i=1){return t.roughness*i*(Tre(t)*(e-n)+n)}function si(n,e,t=1){return U4(-n,n,e,t)}function kf(n,e,t,i,r,s=!1){const o=s?r.disableMultiStrokeFill:r.disableMultiStroke,a=fM(n,e,t,i,r,!0,!1);if(o)return a;const l=fM(n,e,t,i,r,!0,!0);return a.concat(l)}function fM(n,e,t,i,r,s,o){const a=Math.pow(n-t,2)+Math.pow(e-i,2),l=Math.sqrt(a);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let h=r.maxRandomnessOffset||0;h*h*100>a&&(h=l/10);const u=h/2,d=.2+.2*Tre(r);let g=r.bowing*r.maxRandomnessOffset*(i-e)/200,p=r.bowing*r.maxRandomnessOffset*(n-t)/200;g=si(g,r,c),p=si(p,r,c);const b=[],_=()=>si(u,r,c),w=()=>si(h,r,c),y=r.preserveVertices;return o?b.push({op:"move",data:[n+(y?0:_()),e+(y?0:_())]}):b.push({op:"move",data:[n+(y?0:si(h,r,c)),e+(y?0:si(h,r,c))]}),o?b.push({op:"bcurveTo",data:[g+n+(t-n)*d+_(),p+e+(i-e)*d+_(),g+n+2*(t-n)*d+_(),p+e+2*(i-e)*d+_(),t+(y?0:_()),i+(y?0:_())]}):b.push({op:"bcurveTo",data:[g+n+(t-n)*d+w(),p+e+(i-e)*d+w(),g+n+2*(t-n)*d+w(),p+e+2*(i-e)*d+w(),t+(y?0:w()),i+(y?0:w())]}),b}function xS(n,e,t){if(!n.length)return[];const i=[];i.push([n[0][0]+si(e,t),n[0][1]+si(e,t)]),i.push([n[0][0]+si(e,t),n[0][1]+si(e,t)]);for(let r=1;r<n.length;r++)i.push([n[r][0]+si(e,t),n[r][1]+si(e,t)]),r===n.length-1&&i.push([n[r][0]+si(e,t),n[r][1]+si(e,t)]);return q4(i,null,t)}function q4(n,e,t){const i=n.length,r=[];if(i>3){const s=[],o=1-t.curveTightness;r.push({op:"move",data:[n[1][0],n[1][1]]});for(let a=1;a+2<i;a++){const l=n[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*n[a+1][0]-o*n[a-1][0])/6,l[1]+(o*n[a+1][1]-o*n[a-1][1])/6],s[2]=[n[a+1][0]+(o*n[a][0]-o*n[a+2][0])/6,n[a+1][1]+(o*n[a][1]-o*n[a+2][1])/6],s[3]=[n[a+1][0],n[a+1][1]],r.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else i===3?(r.push({op:"move",data:[n[1][0],n[1][1]]}),r.push({op:"bcurveTo",data:[n[1][0],n[1][1],n[2][0],n[2][1],n[2][0],n[2][1]]})):i===2&&r.push(...fM(n[0][0],n[0][1],n[1][0],n[1][1],t,!0,!0));return r}function bG(n,e,t,i,r,s,o,a){const l=[],c=[];if(a.roughness===0){n/=4,c.push([e+i*Math.cos(-n),t+r*Math.sin(-n)]);for(let h=0;h<=2*Math.PI;h+=n){const u=[e+i*Math.cos(h),t+r*Math.sin(h)];l.push(u),c.push(u)}c.push([e+i*Math.cos(0),t+r*Math.sin(0)]),c.push([e+i*Math.cos(n),t+r*Math.sin(n)])}else{const h=si(.5,a)-Math.PI/2;c.push([si(s,a)+e+.9*i*Math.cos(h-n),si(s,a)+t+.9*r*Math.sin(h-n)]);const u=2*Math.PI+h-.01;for(let d=h;d<u;d+=n){const g=[si(s,a)+e+i*Math.cos(d),si(s,a)+t+r*Math.sin(d)];l.push(g),c.push(g)}c.push([si(s,a)+e+i*Math.cos(h+2*Math.PI+.5*o),si(s,a)+t+r*Math.sin(h+2*Math.PI+.5*o)]),c.push([si(s,a)+e+.98*i*Math.cos(h+o),si(s,a)+t+.98*r*Math.sin(h+o)]),c.push([si(s,a)+e+.9*i*Math.cos(h+.5*o),si(s,a)+t+.9*r*Math.sin(h+.5*o)])}return[c,l]}function _G(n,e,t,i,r,s,o,a,l){const c=s+si(.1,l),h=[];h.push([si(a,l)+e+.9*i*Math.cos(c-n),si(a,l)+t+.9*r*Math.sin(c-n)]);for(let u=c;u<=o;u+=n)h.push([si(a,l)+e+i*Math.cos(u),si(a,l)+t+r*Math.sin(u)]);return h.push([e+i*Math.cos(o),t+r*Math.sin(o)]),h.push([e+i*Math.cos(o),t+r*Math.sin(o)]),q4(h,null,l)}function RFe(n,e,t,i,r,s,o,a){const l=[],c=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let h=[0,0];const u=a.disableMultiStroke?1:2,d=a.preserveVertices;for(let g=0;g<u;g++)g===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(d?0:si(c[0],a)),o[1]+(d?0:si(c[0],a))]}),h=d?[r,s]:[r+si(c[g],a),s+si(c[g],a)],l.push({op:"bcurveTo",data:[n+si(c[g],a),e+si(c[g],a),t+si(c[g],a),i+si(c[g],a),h[0],h[1]]});return l}function F_(n){return[...n]}function vG(n,e=0){const t=n.length;if(t<3)throw new Error("A curve must have at least three points.");const i=[];if(t===3)i.push(F_(n[0]),F_(n[1]),F_(n[2]),F_(n[2]));else{const r=[];r.push(n[0],n[0]);for(let a=1;a<n.length;a++)r.push(n[a]),a===n.length-1&&r.push(n[a]);const s=[],o=1-e;i.push(F_(r[0]));for(let a=1;a+2<r.length;a++){const l=r[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*r[a+1][0]-o*r[a-1][0])/6,l[1]+(o*r[a+1][1]-o*r[a-1][1])/6],s[2]=[r[a+1][0]+(o*r[a][0]-o*r[a+2][0])/6,r[a+1][1]+(o*r[a][1]-o*r[a+2][1])/6],s[3]=[r[a+1][0],r[a+1][1]],i.push(s[1],s[2],s[3])}}return i}function mx(n,e){return Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2)}function PFe(n,e,t){const i=mx(e,t);if(i===0)return mx(n,e);let r=((n[0]-e[0])*(t[0]-e[0])+(n[1]-e[1])*(t[1]-e[1]))/i;return r=Math.max(0,Math.min(1,r)),mx(n,_g(e,t,r))}function _g(n,e,t){return[n[0]+(e[0]-n[0])*t,n[1]+(e[1]-n[1])*t]}function gM(n,e,t,i){const r=i||[];if(function(a,l){const c=a[l+0],h=a[l+1],u=a[l+2],d=a[l+3];let g=3*h[0]-2*c[0]-d[0];g*=g;let p=3*h[1]-2*c[1]-d[1];p*=p;let b=3*u[0]-2*d[0]-c[0];b*=b;let _=3*u[1]-2*d[1]-c[1];return _*=_,g<b&&(g=b),p<_&&(p=_),g+p}(n,e)<t){const a=n[e+0];r.length?(s=r[r.length-1],o=a,Math.sqrt(mx(s,o))>1&&r.push(a)):r.push(a),r.push(n[e+3])}else{const l=n[e+0],c=n[e+1],h=n[e+2],u=n[e+3],d=_g(l,c,.5),g=_g(c,h,.5),p=_g(h,u,.5),b=_g(d,g,.5),_=_g(g,p,.5),w=_g(b,_,.5);gM([l,d,b,w],0,t,r),gM([w,_,p,u],0,t,r)}var s,o;return r}function OFe(n,e){return G4(n,0,n.length,e)}function G4(n,e,t,i,r){const s=r||[],o=n[e],a=n[t-1];let l=0,c=1;for(let h=e+1;h<t-1;++h){const u=PFe(n[h],o,a);u>l&&(l=u,c=h)}return Math.sqrt(l)>i?(G4(n,e,c+1,i,s),G4(n,c,t,i,s)):(s.length||s.push(o),s.push(a)),s}function xD(n,e=.15,t){const i=[],r=(n.length-1)/3;for(let s=0;s<r;s++)gM(n,3*s,e,i);return t&&t>0?G4(i,0,i.length,t):i}const Pa="none";class K4{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,t,i){return{shape:e,sets:t||[],options:i||this.defaultOptions}}line(e,t,i,r,s){const o=this._o(s);return this._d("line",[kre(e,t,i,r,o)],o)}rectangle(e,t,i,r,s){const o=this._o(s),a=[],l=AFe(e,t,i,r,o);if(o.fill){const c=[[e,t],[e+i,t],[e+i,t+r],[e,t+r]];o.fillStyle==="solid"?a.push(SD([c],o)):a.push(Kp([c],o))}return o.stroke!==Pa&&a.push(l),this._d("rectangle",a,o)}ellipse(e,t,i,r,s){const o=this._o(s),a=[],l=Lre(i,r,o),c=dM(e,t,o,l);if(o.fill)if(o.fillStyle==="solid"){const h=dM(e,t,o,l).opset;h.type="fillPath",a.push(h)}else a.push(Kp([c.estimatedPoints],o));return o.stroke!==Pa&&a.push(c.opset),this._d("ellipse",a,o)}circle(e,t,i,r){const s=this.ellipse(e,t,i,i,r);return s.shape="circle",s}linearPath(e,t){const i=this._o(t);return this._d("linearPath",[gx(e,!1,i)],i)}arc(e,t,i,r,s,o,a=!1,l){const c=this._o(l),h=[],u=gG(e,t,i,r,s,o,a,!0,c);if(a&&c.fill)if(c.fillStyle==="solid"){const d=Object.assign({},c);d.disableMultiStroke=!0;const g=gG(e,t,i,r,s,o,!0,!1,d);g.type="fillPath",h.push(g)}else h.push(function(d,g,p,b,_,w,y){const k=d,L=g;let T=Math.abs(p/2),N=Math.abs(b/2);T+=si(.01*T,y),N+=si(.01*N,y);let D=_,O=w;for(;D<0;)D+=2*Math.PI,O+=2*Math.PI;O-D>2*Math.PI&&(D=0,O=2*Math.PI);const B=(O-D)/y.curveStepCount,G=[];for(let H=D;H<=O;H+=B)G.push([k+T*Math.cos(H),L+N*Math.sin(H)]);return G.push([k+T*Math.cos(O),L+N*Math.sin(O)]),G.push([k,L]),Kp([G],y)}(e,t,i,r,s,o,c));return c.stroke!==Pa&&h.push(u),this._d("arc",h,c)}curve(e,t){const i=this._o(t),r=[],s=fG(e,i);if(i.fill&&i.fill!==Pa)if(i.fillStyle==="solid"){const o=fG(e,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=[],a=e;if(a.length){const l=typeof a[0][0]=="number"?[a]:a;for(const c of l)c.length<3?o.push(...c):c.length===3?o.push(...xD(vG([c[0],c[0],c[1],c[2]]),10,(1+i.roughness)/2)):o.push(...xD(vG(c),10,(1+i.roughness)/2))}o.length&&r.push(Kp([o],i))}return i.stroke!==Pa&&r.push(s),this._d("curve",r,i)}polygon(e,t){const i=this._o(t),r=[],s=gx(e,!0,i);return i.fill&&(i.fillStyle==="solid"?r.push(SD([e],i)):r.push(Kp([e],i))),i.stroke!==Pa&&r.push(s),this._d("polygon",r,i)}path(e,t){const i=this._o(t),r=[];if(!e)return this._d("path",r,i);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=i.fill&&i.fill!=="transparent"&&i.fill!==Pa,o=i.stroke!==Pa,a=!!(i.simplification&&i.simplification<1),l=function(h,u,d){const g=Sre(Cre(EO(h))),p=[];let b=[],_=[0,0],w=[];const y=()=>{w.length>=4&&b.push(...xD(w,u)),w=[]},k=()=>{y(),b.length&&(p.push(b),b=[])};for(const{key:T,data:N}of g)switch(T){case"M":k(),_=[N[0],N[1]],b.push(_);break;case"L":y(),b.push([N[0],N[1]]);break;case"C":if(!w.length){const D=b.length?b[b.length-1]:_;w.push([D[0],D[1]])}w.push([N[0],N[1]]),w.push([N[2],N[3]]),w.push([N[4],N[5]]);break;case"Z":y(),b.push([_[0],_[1]])}if(k(),!d)return p;const L=[];for(const T of p){const N=OFe(T,d);N.length&&L.push(N)}return L}(e,1,a?4-4*(i.simplification||1):(1+i.roughness)/2),c=mG(e,i);if(s)if(i.fillStyle==="solid")if(l.length===1){const h=mG(e,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(h.ops)})}else r.push(SD(l,i));else r.push(Kp(l,i));return o&&(a?l.forEach(h=>{r.push(gx(h,!1,i))}):r.push(c)),this._d("path",r,i)}opsToPath(e,t){let i="";for(const r of e.ops){const s=typeof t=="number"&&t>=0?r.data.map(o=>+o.toFixed(t)):r.data;switch(r.op){case"move":i+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":i+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":i+=`L${s[0]} ${s[1]} `}}return i.trim()}toPaths(e){const t=e.sets||[],i=e.options||this.defaultOptions,r=[];for(const s of t){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:i.stroke,strokeWidth:i.strokeWidth,fill:Pa};break;case"fillPath":o={d:this.opsToPath(s),stroke:Pa,strokeWidth:0,fill:i.fill||Pa};break;case"fillSketch":o=this.fillSketch(s,i)}o&&r.push(o)}return r}fillSketch(e,t){let i=t.fillWeight;return i<0&&(i=t.strokeWidth/2),{d:this.opsToPath(e),stroke:t.fill||Pa,strokeWidth:i,fill:Pa}}_mergedShape(e){return e.filter((t,i)=>i===0||t.op!=="move")}}class BFe{constructor(e,t){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new K4(t)}draw(e){const t=e.sets||[],i=e.options||this.getDefaultOptions(),r=this.ctx,s=e.options.fixedDecimalPlaceDigits;for(const o of t)switch(o.type){case"path":r.save(),r.strokeStyle=i.stroke==="none"?"transparent":i.stroke,r.lineWidth=i.strokeWidth,i.strokeLineDash&&r.setLineDash(i.strokeLineDash),i.strokeLineDashOffset&&(r.lineDashOffset=i.strokeLineDashOffset),this._drawToContext(r,o,s),r.restore();break;case"fillPath":{r.save(),r.fillStyle=i.fill||"";const a=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(r,o,s,a),r.restore();break}case"fillSketch":this.fillSketch(r,o,i)}}fillSketch(e,t,i){let r=i.fillWeight;r<0&&(r=i.strokeWidth/2),e.save(),i.fillLineDash&&e.setLineDash(i.fillLineDash),i.fillLineDashOffset&&(e.lineDashOffset=i.fillLineDashOffset),e.strokeStyle=i.fill||"",e.lineWidth=r,this._drawToContext(e,t,i.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,t,i,r="nonzero"){e.beginPath();for(const s of t.ops){const o=typeof i=="number"&&i>=0?s.data.map(a=>+a.toFixed(i)):s.data;switch(s.op){case"move":e.moveTo(o[0],o[1]);break;case"bcurveTo":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":e.lineTo(o[0],o[1])}}t.type==="fillPath"?e.fill(r):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,t,i,r,s){const o=this.gen.line(e,t,i,r,s);return this.draw(o),o}rectangle(e,t,i,r,s){const o=this.gen.rectangle(e,t,i,r,s);return this.draw(o),o}ellipse(e,t,i,r,s){const o=this.gen.ellipse(e,t,i,r,s);return this.draw(o),o}circle(e,t,i,r){const s=this.gen.circle(e,t,i,r);return this.draw(s),s}linearPath(e,t){const i=this.gen.linearPath(e,t);return this.draw(i),i}polygon(e,t){const i=this.gen.polygon(e,t);return this.draw(i),i}arc(e,t,i,r,s,o,a=!1,l){const c=this.gen.arc(e,t,i,r,s,o,a,l);return this.draw(c),c}curve(e,t){const i=this.gen.curve(e,t);return this.draw(i),i}path(e,t){const i=this.gen.path(e,t);return this.draw(i),i}}const kS="http://www.w3.org/2000/svg";class FFe{constructor(e,t){this.svg=e,this.gen=new K4(t)}draw(e){const t=e.sets||[],i=e.options||this.getDefaultOptions(),r=this.svg.ownerDocument||window.document,s=r.createElementNS(kS,"g"),o=e.options.fixedDecimalPlaceDigits;for(const a of t){let l=null;switch(a.type){case"path":l=r.createElementNS(kS,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",i.stroke),l.setAttribute("stroke-width",i.strokeWidth+""),l.setAttribute("fill","none"),i.strokeLineDash&&l.setAttribute("stroke-dasharray",i.strokeLineDash.join(" ").trim()),i.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${i.strokeLineDashOffset}`);break;case"fillPath":l=r.createElementNS(kS,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",i.fill||""),e.shape!=="curve"&&e.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(r,a,i)}l&&s.appendChild(l)}return s}fillSketch(e,t,i){let r=i.fillWeight;r<0&&(r=i.strokeWidth/2);const s=e.createElementNS(kS,"path");return s.setAttribute("d",this.opsToPath(t,i.fixedDecimalPlaceDigits)),s.setAttribute("stroke",i.fill||""),s.setAttribute("stroke-width",r+""),s.setAttribute("fill","none"),i.fillLineDash&&s.setAttribute("stroke-dasharray",i.fillLineDash.join(" ").trim()),i.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${i.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,t){return this.gen.opsToPath(e,t)}line(e,t,i,r,s){const o=this.gen.line(e,t,i,r,s);return this.draw(o)}rectangle(e,t,i,r,s){const o=this.gen.rectangle(e,t,i,r,s);return this.draw(o)}ellipse(e,t,i,r,s){const o=this.gen.ellipse(e,t,i,r,s);return this.draw(o)}circle(e,t,i,r){const s=this.gen.circle(e,t,i,r);return this.draw(s)}linearPath(e,t){const i=this.gen.linearPath(e,t);return this.draw(i)}polygon(e,t){const i=this.gen.polygon(e,t);return this.draw(i)}arc(e,t,i,r,s,o,a=!1,l){const c=this.gen.arc(e,t,i,r,s,o,a,l);return this.draw(c)}curve(e,t){const i=this.gen.curve(e,t);return this.draw(i)}path(e,t){const i=this.gen.path(e,t);return this.draw(i)}}var St={canvas:(n,e)=>new BFe(n,e),svg:(n,e)=>new FFe(n,e),generator:n=>new K4(n),newSeed:()=>K4.newSeed()},ti=R(async(n,e,t)=>{let i;const r=e.useHtmlLabels||vs(vn()?.htmlLabels);t?i=t:i="node default";const s=n.insert("g").attr("class",i).attr("id",e.domId||e.id),o=s.insert("g").attr("class","label").attr("style",vo(e.labelStyle));let a;e.label===void 0?a="":a=typeof e.label=="string"?e.label:e.label[0];const l=await Pf(o,Il(cp(a),vn()),{useHtmlLabels:r,width:e.width||vn().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img});let c=l.getBBox();const h=(e?.padding??0)/2;if(r){const u=l.children[0],d=Ji(l),g=u.getElementsByTagName("img");if(g){const p=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...g].map(b=>new Promise(_=>{function w(){if(b.style.display="flex",b.style.flexDirection="column",p){const y=vn().fontSize?vn().fontSize:window.getComputedStyle(document.body).fontSize,k=5,[L=Hee.fontSize]=y3(y),T=L*k+"px";b.style.minWidth=T,b.style.maxWidth=T}else b.style.width="100%";_(b)}R(w,"setupImage"),setTimeout(()=>{b.complete&&w()}),b.addEventListener("error",w),b.addEventListener("load",w)})))}c=u.getBoundingClientRect(),d.attr("width",c.width),d.attr("height",c.height)}return r?o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"):o.attr("transform","translate(0, "+-c.height/2+")"),e.centerLabel&&o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:s,bbox:c,halfPadding:h,label:o}},"labelHelper"),kD=R(async(n,e,t)=>{const i=t.useHtmlLabels||vs(vn()?.flowchart?.htmlLabels),r=n.insert("g").attr("class","label").attr("style",t.labelStyle||""),s=await Pf(r,Il(cp(e),vn()),{useHtmlLabels:i,width:t.width||vn()?.flowchart?.wrappingWidth,style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img});let o=s.getBBox();const a=t.padding/2;if(vs(vn()?.flowchart?.htmlLabels)){const l=s.children[0],c=Ji(s);o=l.getBoundingClientRect(),c.attr("width",o.width),c.attr("height",o.height)}return i?r.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"):r.attr("transform","translate(0, "+-o.height/2+")"),t.centerLabel&&r.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),r.insert("rect",":first-child"),{shapeSvg:n,bbox:o,halfPadding:a,label:r}},"insertLabel"),It=R((n,e)=>{const t=e.node().getBBox();n.width=t.width,n.height=t.height},"updateNodeBounds"),Gt=R((n,e)=>(n.look==="handDrawn"?"rough-node":"node")+" "+n.cssClasses+" "+(e||""),"getNodeClasses");function zi(n){const e=n.map((t,i)=>`${i===0?"M":"L"}${t.x},${t.y}`);return e.push("Z"),e.join(" ")}R(zi,"createPathFromPoints");function Lf(n,e,t,i,r,s){const o=[],l=t-n,c=i-e,h=l/s,u=2*Math.PI/h,d=e+c/2;for(let g=0;g<=50;g++){const p=g/50,b=n+p*l,_=d+r*Math.sin(u*(b-n));o.push({x:b,y:_})}return o}R(Lf,"generateFullSineWavePoints");function fy(n,e,t,i,r,s){const o=[],a=r*Math.PI/180,h=(s*Math.PI/180-a)/(i-1);for(let u=0;u<i;u++){const d=a+u*h,g=n+t*Math.cos(d),p=e+t*Math.sin(d);o.push({x:-g,y:-p})}return o}R(fy,"generateCirclePoints");var WFe=R((n,e)=>{var t=n.x,i=n.y,r=e.x-t,s=e.y-i,o=n.width/2,a=n.height/2,l,c;return Math.abs(s)*o>Math.abs(r)*a?(s<0&&(a=-a),l=s===0?0:a*r/s,c=a):(r<0&&(o=-o),l=o,c=r===0?0:o*s/r),{x:t+l,y:i+c}},"intersectRect"),vb=WFe;function Dre(n,e){e&&n.attr("style",e)}R(Dre,"applyStyle");async function Ere(n){const e=Ji(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),t=e.append("xhtml:div"),i=vn();let r=n.label;n.label&&U1(n.label)&&(r=await OP(n.label.replace(mb.lineBreakRegex,`
`),i));const o='<span class="'+(n.isNode?"nodeLabel":"edgeLabel")+'" '+(n.labelStyle?'style="'+n.labelStyle+'"':"")+">"+r+"</span>";return t.html(Il(o,i)),Dre(t,n.labelStyle),t.style("display","inline-block"),t.style("padding-right","1px"),t.style("white-space","nowrap"),t.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}R(Ere,"addHtmlLabel");var zFe=R(async(n,e,t,i)=>{let r=n||"";if(typeof r=="object"&&(r=r[0]),vs(vn().flowchart.htmlLabels)){r=r.replace(/\\n|\n/g,"<br />"),ze.info("vertexText"+r);const s={isNode:i,label:cp(r).replace(/fa[blrs]?:fa-[\w-]+/g,a=>`<i class='${a.replace(":"," ")}'></i>`),labelStyle:e&&e.replace("fill:","color:")};return await Ere(s)}else{const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("style",e.replace("color:","fill:"));let o=[];typeof r=="string"?o=r.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(r)?o=r:o=[];for(const a of o){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),t?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=a.trim(),s.appendChild(l)}return s}},"createLabel"),Qg=zFe,Of=R((n,e,t,i,r)=>["M",n+r,e,"H",n+t-r,"A",r,r,0,0,1,n+t,e+r,"V",e+i-r,"A",r,r,0,0,1,n+t-r,e+i,"H",n+r,"A",r,r,0,0,1,n,e+i-r,"V",e+r,"A",r,r,0,0,1,n+r,e,"Z"].join(" "),"createRoundedRectPathD"),Ire=R(async(n,e)=>{ze.info("Creating subgraph rect for ",e.id,e);const t=vn(),{themeVariables:i,handDrawnSeed:r}=t,{clusterBkg:s,clusterBorder:o}=i,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:h}=Lt(e),u=n.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),d=vs(t.flowchart.htmlLabels),g=u.insert("g").attr("class","cluster-label "),p=await Pf(g,e.label,{style:e.labelStyle,useHtmlLabels:d,isNode:!0});let b=p.getBBox();if(vs(t.flowchart.htmlLabels)){const D=p.children[0],O=Ji(p);b=D.getBoundingClientRect(),O.attr("width",b.width),O.attr("height",b.height)}const _=e.width<=b.width+e.padding?b.width+e.padding:e.width;e.width<=b.width+e.padding?e.diff=(_-e.width)/2-e.padding:e.diff=-e.padding;const w=e.height,y=e.x-_/2,k=e.y-w/2;ze.trace("Data ",e,JSON.stringify(e));let L;if(e.look==="handDrawn"){const D=St.svg(u),O=kt(e,{roughness:.7,fill:s,stroke:o,fillWeight:3,seed:r}),B=D.path(Of(y,k,_,w,0),O);L=u.insert(()=>(ze.debug("Rough node insert CXC",B),B),":first-child"),L.select("path:nth-child(2)").attr("style",c.join(";")),L.select("path").attr("style",h.join(";").replace("fill","stroke"))}else L=u.insert("rect",":first-child"),L.attr("style",l).attr("rx",e.rx).attr("ry",e.ry).attr("x",y).attr("y",k).attr("width",_).attr("height",w);const{subGraphTitleTopMargin:T}=aO(t);if(g.attr("transform",`translate(${e.x-b.width/2}, ${e.y-e.height/2+T})`),a){const D=g.select("span");D&&D.attr("style",a)}const N=L.node().getBBox();return e.offsetX=0,e.width=N.width,e.height=N.height,e.offsetY=b.height-e.padding/2,e.intersect=function(D){return vb(e,D)},{cluster:u,labelBBox:b}},"rect"),HFe=R((n,e)=>{const t=n.insert("g").attr("class","note-cluster").attr("id",e.id),i=t.insert("rect",":first-child"),r=0*e.padding,s=r/2;i.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-s).attr("y",e.y-e.height/2-s).attr("width",e.width+r).attr("height",e.height+r).attr("fill","none");const o=i.node().getBBox();return e.width=o.width,e.height=o.height,e.intersect=function(a){return vb(e,a)},{cluster:t,labelBBox:{width:0,height:0}}},"noteGroup"),VFe=R(async(n,e)=>{const t=vn(),{themeVariables:i,handDrawnSeed:r}=t,{altBackground:s,compositeBackground:o,compositeTitleBackground:a,nodeBorder:l}=i,c=n.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),h=c.insert("g",":first-child"),u=c.insert("g").attr("class","cluster-label");let d=c.append("rect");const g=u.node().appendChild(await Qg(e.label,e.labelStyle,void 0,!0));let p=g.getBBox();if(vs(t.flowchart.htmlLabels)){const B=g.children[0],G=Ji(g);p=B.getBoundingClientRect(),G.attr("width",p.width),G.attr("height",p.height)}const b=0*e.padding,_=b/2,w=(e.width<=p.width+e.padding?p.width+e.padding:e.width)+b;e.width<=p.width+e.padding?e.diff=(w-e.width)/2-e.padding:e.diff=-e.padding;const y=e.height+b,k=e.height+b-p.height-6,L=e.x-w/2,T=e.y-y/2;e.width=w;const N=e.y-e.height/2-_+p.height+2;let D;if(e.look==="handDrawn"){const B=e.cssClasses.includes("statediagram-cluster-alt"),G=St.svg(c),H=e.rx||e.ry?G.path(Of(L,T,w,y,10),{roughness:.7,fill:a,fillStyle:"solid",stroke:l,seed:r}):G.rectangle(L,T,w,y,{seed:r});D=c.insert(()=>H,":first-child");const q=G.rectangle(L,N,w,k,{fill:B?s:o,fillStyle:B?"hachure":"solid",stroke:l,seed:r});D=c.insert(()=>H,":first-child"),d=c.insert(()=>q)}else D=h.insert("rect",":first-child"),D.attr("class","outer").attr("x",L).attr("y",T).attr("width",w).attr("height",y).attr("data-look",e.look),d.attr("class","inner").attr("x",L).attr("y",N).attr("width",w).attr("height",k);u.attr("transform",`translate(${e.x-p.width/2}, ${T+1-(vs(t.flowchart.htmlLabels)?0:3)})`);const O=D.node().getBBox();return e.height=O.height,e.offsetX=0,e.offsetY=p.height-e.padding/2,e.labelBBox=p,e.intersect=function(B){return vb(e,B)},{cluster:c,labelBBox:p}},"roundedWithTitle"),$Fe=R(async(n,e)=>{ze.info("Creating subgraph rect for ",e.id,e);const t=vn(),{themeVariables:i,handDrawnSeed:r}=t,{clusterBkg:s,clusterBorder:o}=i,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:h}=Lt(e),u=n.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),d=vs(t.flowchart.htmlLabels),g=u.insert("g").attr("class","cluster-label "),p=await Pf(g,e.label,{style:e.labelStyle,useHtmlLabels:d,isNode:!0,width:e.width});let b=p.getBBox();if(vs(t.flowchart.htmlLabels)){const D=p.children[0],O=Ji(p);b=D.getBoundingClientRect(),O.attr("width",b.width),O.attr("height",b.height)}const _=e.width<=b.width+e.padding?b.width+e.padding:e.width;e.width<=b.width+e.padding?e.diff=(_-e.width)/2-e.padding:e.diff=-e.padding;const w=e.height,y=e.x-_/2,k=e.y-w/2;ze.trace("Data ",e,JSON.stringify(e));let L;if(e.look==="handDrawn"){const D=St.svg(u),O=kt(e,{roughness:.7,fill:s,stroke:o,fillWeight:4,seed:r}),B=D.path(Of(y,k,_,w,e.rx),O);L=u.insert(()=>(ze.debug("Rough node insert CXC",B),B),":first-child"),L.select("path:nth-child(2)").attr("style",c.join(";")),L.select("path").attr("style",h.join(";").replace("fill","stroke"))}else L=u.insert("rect",":first-child"),L.attr("style",l).attr("rx",e.rx).attr("ry",e.ry).attr("x",y).attr("y",k).attr("width",_).attr("height",w);const{subGraphTitleTopMargin:T}=aO(t);if(g.attr("transform",`translate(${e.x-b.width/2}, ${e.y-e.height/2+T})`),a){const D=g.select("span");D&&D.attr("style",a)}const N=L.node().getBBox();return e.offsetX=0,e.width=N.width,e.height=N.height,e.offsetY=b.height-e.padding/2,e.intersect=function(D){return vb(e,D)},{cluster:u,labelBBox:b}},"kanbanSection"),jFe=R((n,e)=>{const t=vn(),{themeVariables:i,handDrawnSeed:r}=t,{nodeBorder:s}=i,o=n.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),a=o.insert("g",":first-child"),l=0*e.padding,c=e.width+l;e.diff=-e.padding;const h=e.height+l,u=e.x-c/2,d=e.y-h/2;e.width=c;let g;if(e.look==="handDrawn"){const _=St.svg(o).rectangle(u,d,c,h,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:s,seed:r});g=o.insert(()=>_,":first-child")}else g=a.insert("rect",":first-child"),g.attr("class","divider").attr("x",u).attr("y",d).attr("width",c).attr("height",h).attr("data-look",e.look);const p=g.node().getBBox();return e.height=p.height,e.offsetX=0,e.offsetY=0,e.intersect=function(b){return vb(e,b)},{cluster:o,labelBBox:{}}},"divider"),UFe=Ire,qFe={rect:Ire,squareRect:UFe,roundedWithTitle:VFe,noteGroup:HFe,divider:jFe,kanbanSection:$Fe},Nre=new Map,GFe=R(async(n,e)=>{const t=e.shape||"rect",i=await qFe[t](n,e);return Nre.set(e.id,i),i},"insertCluster"),AUe=R(()=>{Nre=new Map},"clear");function Mre(n,e){return n.intersect(e)}R(Mre,"intersectNode");var KFe=Mre;function Are(n,e,t,i){var r=n.x,s=n.y,o=r-i.x,a=s-i.y,l=Math.sqrt(e*e*a*a+t*t*o*o),c=Math.abs(e*t*o/l);i.x<r&&(c=-c);var h=Math.abs(e*t*a/l);return i.y<s&&(h=-h),{x:r+c,y:s+h}}R(Are,"intersectEllipse");var Rre=Are;function Pre(n,e,t){return Rre(n,e,e,t)}R(Pre,"intersectCircle");var YFe=Pre;function Ore(n,e,t,i){{const r=e.y-n.y,s=n.x-e.x,o=e.x*n.y-n.x*e.y,a=r*t.x+s*t.y+o,l=r*i.x+s*i.y+o,c=1e-6;if(a!==0&&l!==0&&mM(a,l))return;const h=i.y-t.y,u=t.x-i.x,d=i.x*t.y-t.x*i.y,g=h*n.x+u*n.y+d,p=h*e.x+u*e.y+d;if(Math.abs(g)<c&&Math.abs(p)<c&&mM(g,p))return;const b=r*u-h*s;if(b===0)return;const _=Math.abs(b/2);let w=s*d-u*o;const y=w<0?(w-_)/b:(w+_)/b;w=h*o-r*d;const k=w<0?(w-_)/b:(w+_)/b;return{x:y,y:k}}}R(Ore,"intersectLine");function mM(n,e){return n*e>0}R(mM,"sameSign");var ZFe=Ore;function Bre(n,e,t){let i=n.x,r=n.y,s=[],o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(h){o=Math.min(o,h.x),a=Math.min(a,h.y)}):(o=Math.min(o,e.x),a=Math.min(a,e.y));let l=i-n.width/2-o,c=r-n.height/2-a;for(let h=0;h<e.length;h++){let u=e[h],d=e[h<e.length-1?h+1:0],g=ZFe(n,t,{x:l+u.x,y:c+u.y},{x:l+d.x,y:c+d.y});g&&s.push(g)}return s.length?(s.length>1&&s.sort(function(h,u){let d=h.x-t.x,g=h.y-t.y,p=Math.sqrt(d*d+g*g),b=u.x-t.x,_=u.y-t.y,w=Math.sqrt(b*b+_*_);return p<w?-1:p===w?0:1}),s[0]):n}R(Bre,"intersectPolygon");var XFe=Bre,mt={node:KFe,circle:YFe,ellipse:Rre,polygon:XFe,rect:vb};function Fre(n,e){const{labelStyles:t}=Lt(e);e.labelStyle=t;const i=Gt(e);let r=i;i||(r="anchor");const s=n.insert("g").attr("class",r).attr("id",e.domId||e.id),o=1,{cssStyles:a}=e,l=St.svg(s),c=kt(e,{fill:"black",stroke:"none",fillStyle:"solid"});e.look!=="handDrawn"&&(c.roughness=0);const h=l.circle(0,0,o*2,c),u=s.insert(()=>h,":first-child");return u.attr("class","anchor").attr("style",vo(a)),It(e,u),e.intersect=function(d){return ze.info("Circle intersect",e,o,d),mt.circle(e,o,d)},s}R(Fre,"anchor");function pM(n,e,t,i,r,s,o){const l=(n+t)/2,c=(e+i)/2,h=Math.atan2(i-e,t-n),u=(t-n)/2,d=(i-e)/2,g=u/r,p=d/s,b=Math.sqrt(g**2+p**2);if(b>1)throw new Error("The given radii are too small to create an arc between the points.");const _=Math.sqrt(1-b**2),w=l+_*s*Math.sin(h)*(o?-1:1),y=c-_*r*Math.cos(h)*(o?-1:1),k=Math.atan2((e-y)/s,(n-w)/r);let T=Math.atan2((i-y)/s,(t-w)/r)-k;o&&T<0&&(T+=2*Math.PI),!o&&T>0&&(T-=2*Math.PI);const N=[];for(let D=0;D<20;D++){const O=D/19,B=k+O*T,G=w+r*Math.cos(B),H=y+s*Math.sin(B);N.push({x:G,y:H})}return N}R(pM,"generateArcPoints");async function Wre(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s}=await ti(n,e,Gt(e)),o=s.width+e.padding+20,a=s.height+e.padding,l=a/2,c=l/(2.5+a/50),{cssStyles:h}=e,u=[{x:o/2,y:-a/2},{x:-o/2,y:-a/2},...pM(-o/2,-a/2,-o/2,a/2,c,l,!1),{x:o/2,y:a/2},...pM(o/2,a/2,o/2,-a/2,c,l,!0)],d=St.svg(r),g=kt(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const p=zi(u),b=d.path(p,g),_=r.insert(()=>b,":first-child");return _.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",h),i&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",i),_.attr("transform",`translate(${c/2}, 0)`),It(e,_),e.intersect=function(w){return mt.polygon(e,u,w)},r}R(Wre,"bowTieRect");function Bf(n,e,t,i){return n.insert("polygon",":first-child").attr("points",i.map(function(r){return r.x+","+r.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+t/2+")")}R(Bf,"insertPolygonShape");async function zre(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s}=await ti(n,e,Gt(e)),o=s.height+e.padding,a=12,l=s.width+e.padding+a,c=0,h=l,u=-o,d=0,g=[{x:c+a,y:u},{x:h,y:u},{x:h,y:d},{x:c,y:d},{x:c,y:u+a},{x:c+a,y:u}];let p;const{cssStyles:b}=e;if(e.look==="handDrawn"){const _=St.svg(r),w=kt(e,{}),y=zi(g),k=_.path(y,w);p=r.insert(()=>k,":first-child").attr("transform",`translate(${-l/2}, ${o/2})`),b&&p.attr("style",b)}else p=Bf(r,l,o,g);return i&&p.attr("style",i),It(e,p),e.intersect=function(_){return mt.polygon(e,g,_)},r}R(zre,"card");function Hre(n,e){const{nodeStyles:t}=Lt(e);e.label="";const i=n.insert("g").attr("class",Gt(e)).attr("id",e.domId??e.id),{cssStyles:r}=e,s=Math.max(28,e.width??0),o=[{x:0,y:s/2},{x:s/2,y:0},{x:0,y:-s/2},{x:-s/2,y:0}],a=St.svg(i),l=kt(e,{});e.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=zi(o),h=a.path(c,l),u=i.insert(()=>h,":first-child");return r&&e.look!=="handDrawn"&&u.selectAll("path").attr("style",r),t&&e.look!=="handDrawn"&&u.selectAll("path").attr("style",t),e.width=28,e.height=28,e.intersect=function(d){return mt.polygon(e,o,d)},i}R(Hre,"choice");async function IO(n,e,t){const{labelStyles:i,nodeStyles:r}=Lt(e);e.labelStyle=i;const{shapeSvg:s,bbox:o,halfPadding:a}=await ti(n,e,Gt(e)),l=t?.padding??a,c=o.width/2+l;let h;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=St.svg(s),g=kt(e,{}),p=d.circle(0,0,c*2,g);h=s.insert(()=>p,":first-child"),h.attr("class","basic label-container").attr("style",vo(u))}else h=s.insert("circle",":first-child").attr("class","basic label-container").attr("style",r).attr("r",c).attr("cx",0).attr("cy",0);return It(e,h),e.calcIntersect=function(d,g){const p=d.width/2;return mt.circle(d,p,g)},e.intersect=function(d){return ze.info("Circle intersect",e,c,d),mt.circle(e,c,d)},s}R(IO,"circle");function Vre(n){const e=Math.cos(Math.PI/4),t=Math.sin(Math.PI/4),i=n*2,r={x:i/2*e,y:i/2*t},s={x:-(i/2)*e,y:i/2*t},o={x:-(i/2)*e,y:-(i/2)*t},a={x:i/2*e,y:-(i/2)*t};return`M ${s.x},${s.y} L ${a.x},${a.y}
                   M ${r.x},${r.y} L ${o.x},${o.y}`}R(Vre,"createLine");function $re(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t,e.label="";const r=n.insert("g").attr("class",Gt(e)).attr("id",e.domId??e.id),s=Math.max(30,e?.width??0),{cssStyles:o}=e,a=St.svg(r),l=kt(e,{});e.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=a.circle(0,0,s*2,l),h=Vre(s),u=a.path(h,l),d=r.insert(()=>c,":first-child");return d.insert(()=>u),o&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",o),i&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",i),It(e,d),e.intersect=function(g){return ze.info("crossedCircle intersect",e,{radius:s,point:g}),mt.circle(e,s,g)},r}R($re,"crossedCircle");function jh(n,e,t,i=100,r=0,s=180){const o=[],a=r*Math.PI/180,h=(s*Math.PI/180-a)/(i-1);for(let u=0;u<i;u++){const d=a+u*h,g=n+t*Math.cos(d),p=e+t*Math.sin(d);o.push({x:-g,y:-p})}return o}R(jh,"generateCirclePoints");async function jre(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,label:o}=await ti(n,e,Gt(e)),a=s.width+(e.padding??0),l=s.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=e,u=[...jh(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...jh(a/2+c*2,-c,c,20,-180,-270),...jh(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...jh(a/2,l/2,c,20,0,90)],d=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...jh(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...jh(a/2+a*.1,-c,c,20,-180,-270),...jh(a/2+a*.1,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...jh(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2,y:l/2+c}],g=St.svg(r),p=kt(e,{fill:"none"});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const _=zi(u).replace("Z",""),w=g.path(_,p),y=zi(d),k=g.path(y,{...p}),L=r.insert("g",":first-child");return L.insert(()=>k,":first-child").attr("stroke-opacity",0),L.insert(()=>w,":first-child"),L.attr("class","text"),h&&e.look!=="handDrawn"&&L.selectAll("path").attr("style",h),i&&e.look!=="handDrawn"&&L.selectAll("path").attr("style",i),L.attr("transform",`translate(${c}, 0)`),o.attr("transform",`translate(${-a/2+c-(s.x-(s.left??0))},${-l/2+(e.padding??0)/2-(s.y-(s.top??0))})`),It(e,L),e.intersect=function(T){return mt.polygon(e,d,T)},r}R(jre,"curlyBraceLeft");function Uh(n,e,t,i=100,r=0,s=180){const o=[],a=r*Math.PI/180,h=(s*Math.PI/180-a)/(i-1);for(let u=0;u<i;u++){const d=a+u*h,g=n+t*Math.cos(d),p=e+t*Math.sin(d);o.push({x:g,y:p})}return o}R(Uh,"generateCirclePoints");async function Ure(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,label:o}=await ti(n,e,Gt(e)),a=s.width+(e.padding??0),l=s.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=e,u=[...Uh(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...Uh(a/2+c*2,-c,c,20,-180,-270),...Uh(a/2+c*2,c,c,20,-90,-180),{x:a/2+c,y:l/2},...Uh(a/2,l/2,c,20,0,90)],d=[{x:-a/2,y:-l/2-c},{x:a/2,y:-l/2-c},...Uh(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...Uh(a/2+c*2,-c,c,20,-180,-270),...Uh(a/2+c*2,c,c,20,-90,-180),{x:a/2+c,y:l/2},...Uh(a/2,l/2,c,20,0,90),{x:a/2,y:l/2+c},{x:-a/2,y:l/2+c}],g=St.svg(r),p=kt(e,{fill:"none"});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const _=zi(u).replace("Z",""),w=g.path(_,p),y=zi(d),k=g.path(y,{...p}),L=r.insert("g",":first-child");return L.insert(()=>k,":first-child").attr("stroke-opacity",0),L.insert(()=>w,":first-child"),L.attr("class","text"),h&&e.look!=="handDrawn"&&L.selectAll("path").attr("style",h),i&&e.look!=="handDrawn"&&L.selectAll("path").attr("style",i),L.attr("transform",`translate(${-c}, 0)`),o.attr("transform",`translate(${-a/2+(e.padding??0)/2-(s.x-(s.left??0))},${-l/2+(e.padding??0)/2-(s.y-(s.top??0))})`),It(e,L),e.intersect=function(T){return mt.polygon(e,d,T)},r}R(Ure,"curlyBraceRight");function Vs(n,e,t,i=100,r=0,s=180){const o=[],a=r*Math.PI/180,h=(s*Math.PI/180-a)/(i-1);for(let u=0;u<i;u++){const d=a+u*h,g=n+t*Math.cos(d),p=e+t*Math.sin(d);o.push({x:-g,y:-p})}return o}R(Vs,"generateCirclePoints");async function qre(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,label:o}=await ti(n,e,Gt(e)),a=s.width+(e.padding??0),l=s.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=e,u=[...Vs(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...Vs(a/2+c*2,-c,c,20,-180,-270),...Vs(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...Vs(a/2,l/2,c,20,0,90)],d=[...Vs(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...Vs(-a/2-c/2,-c,c,20,0,90),...Vs(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...Vs(-a/2+c+c/2,l/2,c,30,-180,-270)],g=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...Vs(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...Vs(a/2+c*2,-c,c,20,-180,-270),...Vs(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...Vs(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2-c-c/2,y:l/2+c},...Vs(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...Vs(-a/2-c/2,-c,c,20,0,90),...Vs(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...Vs(-a/2+c+c/2,l/2,c,30,-180,-270)],p=St.svg(r),b=kt(e,{fill:"none"});e.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const w=zi(u).replace("Z",""),y=p.path(w,b),L=zi(d).replace("Z",""),T=p.path(L,b),N=zi(g),D=p.path(N,{...b}),O=r.insert("g",":first-child");return O.insert(()=>D,":first-child").attr("stroke-opacity",0),O.insert(()=>y,":first-child"),O.insert(()=>T,":first-child"),O.attr("class","text"),h&&e.look!=="handDrawn"&&O.selectAll("path").attr("style",h),i&&e.look!=="handDrawn"&&O.selectAll("path").attr("style",i),O.attr("transform",`translate(${c-c/4}, 0)`),o.attr("transform",`translate(${-a/2+(e.padding??0)/2-(s.x-(s.left??0))},${-l/2+(e.padding??0)/2-(s.y-(s.top??0))})`),It(e,O),e.intersect=function(B){return mt.polygon(e,g,B)},r}R(qre,"curlyBraces");async function Gre(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s}=await ti(n,e,Gt(e)),o=80,a=20,l=Math.max(o,(s.width+(e.padding??0)*2)*1.25,e?.width??0),c=Math.max(a,s.height+(e.padding??0)*2,e?.height??0),h=c/2,{cssStyles:u}=e,d=St.svg(r),g=kt(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const p=l,b=c,_=p-h,w=b/4,y=[{x:_,y:0},{x:w,y:0},{x:0,y:b/2},{x:w,y:b},{x:_,y:b},...fy(-_,-b/2,h,50,270,90)],k=zi(y),L=d.path(k,g),T=r.insert(()=>L,":first-child");return T.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&T.selectChildren("path").attr("style",u),i&&e.look!=="handDrawn"&&T.selectChildren("path").attr("style",i),T.attr("transform",`translate(${-l/2}, ${-c/2})`),It(e,T),e.intersect=function(N){return mt.polygon(e,y,N)},r}R(Gre,"curvedTrapezoid");var QFe=R((n,e,t,i,r,s)=>[`M${n},${e+s}`,`a${r},${s} 0,0,0 ${t},0`,`a${r},${s} 0,0,0 ${-t},0`,`l0,${i}`,`a${r},${s} 0,0,0 ${t},0`,`l0,${-i}`].join(" "),"createCylinderPathD"),JFe=R((n,e,t,i,r,s)=>[`M${n},${e+s}`,`M${n+t},${e+s}`,`a${r},${s} 0,0,0 ${-t},0`,`l0,${i}`,`a${r},${s} 0,0,0 ${t},0`,`l0,${-i}`].join(" "),"createOuterCylinderPathD"),eWe=R((n,e,t,i,r,s)=>[`M${n-t/2},${-i/2}`,`a${r},${s} 0,0,0 ${t},0`].join(" "),"createInnerCylinderPathD");async function Kre(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,label:o}=await ti(n,e,Gt(e)),a=Math.max(s.width+e.padding,e.width??0),l=a/2,c=l/(2.5+a/50),h=Math.max(s.height+c+e.padding,e.height??0);let u;const{cssStyles:d}=e;if(e.look==="handDrawn"){const g=St.svg(r),p=JFe(0,0,a,h,l,c),b=eWe(0,c,a,h,l,c),_=g.path(p,kt(e,{})),w=g.path(b,kt(e,{fill:"none"}));u=r.insert(()=>w,":first-child"),u=r.insert(()=>_,":first-child"),u.attr("class","basic label-container"),d&&u.attr("style",d)}else{const g=QFe(0,0,a,h,l,c);u=r.insert("path",":first-child").attr("d",g).attr("class","basic label-container").attr("style",vo(d)).attr("style",i)}return u.attr("label-offset-y",c),u.attr("transform",`translate(${-a/2}, ${-(h/2+c)})`),It(e,u),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+(e.padding??0)/1.5-(s.y-(s.top??0))})`),e.intersect=function(g){const p=mt.rect(e,g),b=p.x-(e.x??0);if(l!=0&&(Math.abs(b)<(e.width??0)/2||Math.abs(b)==(e.width??0)/2&&Math.abs(p.y-(e.y??0))>(e.height??0)/2-c)){let _=c*c*(1-b*b/(l*l));_>0&&(_=Math.sqrt(_)),_=c-_,g.y-(e.y??0)>0&&(_=-_),p.y+=_}return p},r}R(Kre,"cylinder");async function Yre(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,label:o}=await ti(n,e,Gt(e)),a=s.width+e.padding,l=s.height+e.padding,c=l*.2,h=-a/2,u=-l/2-c/2,{cssStyles:d}=e,g=St.svg(r),p=kt(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const b=[{x:h,y:u+c},{x:-h,y:u+c},{x:-h,y:-u},{x:h,y:-u},{x:h,y:u},{x:-h,y:u},{x:-h,y:u+c}],_=g.polygon(b.map(y=>[y.x,y.y]),p),w=r.insert(()=>_,":first-child");return w.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",d),i&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",i),o.attr("transform",`translate(${h+(e.padding??0)/2-(s.x-(s.left??0))}, ${u+c+(e.padding??0)/2-(s.y-(s.top??0))})`),It(e,w),e.intersect=function(y){return mt.rect(e,y)},r}R(Yre,"dividedRectangle");async function Zre(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,halfPadding:o}=await ti(n,e,Gt(e)),l=s.width/2+o+5,c=s.width/2+o;let h;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=St.svg(r),g=kt(e,{roughness:.2,strokeWidth:2.5}),p=kt(e,{roughness:.2,strokeWidth:1.5}),b=d.circle(0,0,l*2,g),_=d.circle(0,0,c*2,p);h=r.insert("g",":first-child"),h.attr("class",vo(e.cssClasses)).attr("style",vo(u)),h.node()?.appendChild(b),h.node()?.appendChild(_)}else{h=r.insert("g",":first-child");const d=h.insert("circle",":first-child"),g=h.insert("circle");h.attr("class","basic label-container").attr("style",i),d.attr("class","outer-circle").attr("style",i).attr("r",l).attr("cx",0).attr("cy",0),g.attr("class","inner-circle").attr("style",i).attr("r",c).attr("cx",0).attr("cy",0)}return It(e,h),e.intersect=function(d){return ze.info("DoubleCircle intersect",e,l,d),mt.circle(e,l,d)},r}R(Zre,"doublecircle");function Xre(n,e,{config:{themeVariables:t}}){const{labelStyles:i,nodeStyles:r}=Lt(e);e.label="",e.labelStyle=i;const s=n.insert("g").attr("class",Gt(e)).attr("id",e.domId??e.id),o=7,{cssStyles:a}=e,l=St.svg(s),{nodeBorder:c}=t,h=kt(e,{fillStyle:"solid"});e.look!=="handDrawn"&&(h.roughness=0);const u=l.circle(0,0,o*2,h),d=s.insert(()=>u,":first-child");return d.selectAll("path").attr("style",`fill: ${c} !important;`),a&&a.length>0&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",a),r&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",r),It(e,d),e.intersect=function(g){return ze.info("filledCircle intersect",e,{radius:o,point:g}),mt.circle(e,o,g)},s}R(Xre,"filledCircle");async function Qre(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,label:o}=await ti(n,e,Gt(e)),a=s.width+(e.padding??0),l=a+s.height,c=a+s.height,h=[{x:0,y:-l},{x:c,y:-l},{x:c/2,y:0}],{cssStyles:u}=e,d=St.svg(r),g=kt(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const p=zi(h),b=d.path(p,g),_=r.insert(()=>b,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return u&&e.look!=="handDrawn"&&_.selectChildren("path").attr("style",u),i&&e.look!=="handDrawn"&&_.selectChildren("path").attr("style",i),e.width=a,e.height=l,It(e,_),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-l/2+(e.padding??0)/2+(s.y-(s.top??0))})`),e.intersect=function(w){return ze.info("Triangle intersect",e,h,w),mt.polygon(e,h,w)},r}R(Qre,"flippedTriangle");function Jre(n,e,{dir:t,config:{state:i,themeVariables:r}}){const{nodeStyles:s}=Lt(e);e.label="";const o=n.insert("g").attr("class",Gt(e)).attr("id",e.domId??e.id),{cssStyles:a}=e;let l=Math.max(70,e?.width??0),c=Math.max(10,e?.height??0);t==="LR"&&(l=Math.max(10,e?.width??0),c=Math.max(70,e?.height??0));const h=-1*l/2,u=-1*c/2,d=St.svg(o),g=kt(e,{stroke:r.lineColor,fill:r.lineColor});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const p=d.rectangle(h,u,l,c,g),b=o.insert(()=>p,":first-child");a&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",a),s&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",s),It(e,b);const _=i?.padding??0;return e.width&&e.height&&(e.width+=_/2||0,e.height+=_/2||0),e.intersect=function(w){return mt.rect(e,w)},o}R(Jre,"forkJoin");async function ese(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const r=80,s=50,{shapeSvg:o,bbox:a}=await ti(n,e,Gt(e)),l=Math.max(r,a.width+(e.padding??0)*2,e?.width??0),c=Math.max(s,a.height+(e.padding??0)*2,e?.height??0),h=c/2,{cssStyles:u}=e,d=St.svg(o),g=kt(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const p=[{x:-l/2,y:-c/2},{x:l/2-h,y:-c/2},...fy(-l/2+h,0,h,50,90,270),{x:l/2-h,y:c/2},{x:-l/2,y:c/2}],b=zi(p),_=d.path(b,g),w=o.insert(()=>_,":first-child");return w.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&w.selectChildren("path").attr("style",u),i&&e.look!=="handDrawn"&&w.selectChildren("path").attr("style",i),It(e,w),e.intersect=function(y){return ze.info("Pill intersect",e,{radius:h,point:y}),mt.polygon(e,p,y)},o}R(ese,"halfRoundedRectangle");async function tse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s}=await ti(n,e,Gt(e)),o=s.height+(e.padding??0),a=s.width+(e.padding??0)*2.5,{cssStyles:l}=e,c=St.svg(r),h=kt(e,{});e.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");let u=a/2;const d=u/6;u=u+d;const g=o/2,p=g/2,b=u-p,_=[{x:-b,y:-g},{x:0,y:-g},{x:b,y:-g},{x:u,y:0},{x:b,y:g},{x:0,y:g},{x:-b,y:g},{x:-u,y:0}],w=zi(_),y=c.path(w,h),k=r.insert(()=>y,":first-child");return k.attr("class","basic label-container"),l&&e.look!=="handDrawn"&&k.selectChildren("path").attr("style",l),i&&e.look!=="handDrawn"&&k.selectChildren("path").attr("style",i),e.width=a,e.height=o,It(e,k),e.intersect=function(L){return mt.polygon(e,_,L)},r}R(tse,"hexagon");async function ise(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.label="",e.labelStyle=t;const{shapeSvg:r}=await ti(n,e,Gt(e)),s=Math.max(30,e?.width??0),o=Math.max(30,e?.height??0),{cssStyles:a}=e,l=St.svg(r),c=kt(e,{});e.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const h=[{x:0,y:0},{x:s,y:0},{x:0,y:o},{x:s,y:o}],u=zi(h),d=l.path(u,c),g=r.insert(()=>d,":first-child");return g.attr("class","basic label-container"),a&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",a),i&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",i),g.attr("transform",`translate(${-s/2}, ${-o/2})`),It(e,g),e.intersect=function(p){return ze.info("Pill intersect",e,{points:h}),mt.polygon(e,h,p)},r}R(ise,"hourglass");async function nse(n,e,{config:{themeVariables:t,flowchart:i}}){const{labelStyles:r}=Lt(e);e.labelStyle=r;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=i?.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,label:u}=await ti(n,e,"icon-shape default"),d=e.pos==="t",g=a,p=a,{nodeBorder:b}=t,{stylesMap:_}=pb(e),w=-p/2,y=-g/2,k=e.label?8:0,L=St.svg(c),T=kt(e,{stroke:"none",fill:"none"});e.look!=="handDrawn"&&(T.roughness=0,T.fillStyle="solid");const N=L.rectangle(w,y,p,g,T),D=Math.max(p,h.width),O=g+h.height+k,B=L.rectangle(-D/2,-O/2,D,O,{...T,fill:"transparent",stroke:"none"}),G=c.insert(()=>N,":first-child"),H=c.insert(()=>B);if(e.icon){const q=c.append("g");q.html(`<g>${await nC(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const X=q.node().getBBox(),z=X.width,Q=X.height,te=X.x,se=X.y;q.attr("transform",`translate(${-z/2-te},${d?h.height/2+k/2-Q/2-se:-h.height/2-k/2-Q/2-se})`),q.attr("style",`color: ${_.get("stroke")??b};`)}return u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${d?-O/2:O/2-h.height})`),G.attr("transform",`translate(0,${d?h.height/2+k/2:-h.height/2-k/2})`),It(e,H),e.intersect=function(q){if(ze.info("iconSquare intersect",e,q),!e.label)return mt.rect(e,q);const X=e.x??0,z=e.y??0,Q=e.height??0;let te=[];return d?te=[{x:X-h.width/2,y:z-Q/2},{x:X+h.width/2,y:z-Q/2},{x:X+h.width/2,y:z-Q/2+h.height+k},{x:X+p/2,y:z-Q/2+h.height+k},{x:X+p/2,y:z+Q/2},{x:X-p/2,y:z+Q/2},{x:X-p/2,y:z-Q/2+h.height+k},{x:X-h.width/2,y:z-Q/2+h.height+k}]:te=[{x:X-p/2,y:z-Q/2},{x:X+p/2,y:z-Q/2},{x:X+p/2,y:z-Q/2+g},{x:X+h.width/2,y:z-Q/2+g},{x:X+h.width/2/2,y:z+Q/2},{x:X-h.width/2,y:z+Q/2},{x:X-h.width/2,y:z-Q/2+g},{x:X-p/2,y:z-Q/2+g}],mt.polygon(e,te,q)},c}R(nse,"icon");async function rse(n,e,{config:{themeVariables:t,flowchart:i}}){const{labelStyles:r}=Lt(e);e.labelStyle=r;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=i?.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,label:u}=await ti(n,e,"icon-shape default"),d=20,g=e.label?8:0,p=e.pos==="t",{nodeBorder:b,mainBkg:_}=t,{stylesMap:w}=pb(e),y=St.svg(c),k=kt(e,{});e.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const L=w.get("fill");k.stroke=L??_;const T=c.append("g");e.icon&&T.html(`<g>${await nC(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const N=T.node().getBBox(),D=N.width,O=N.height,B=N.x,G=N.y,H=Math.max(D,O)*Math.SQRT2+d*2,q=y.circle(0,0,H,k),X=Math.max(H,h.width),z=H+h.height+g,Q=y.rectangle(-X/2,-z/2,X,z,{...k,fill:"transparent",stroke:"none"}),te=c.insert(()=>q,":first-child"),se=c.insert(()=>Q);return T.attr("transform",`translate(${-D/2-B},${p?h.height/2+g/2-O/2-G:-h.height/2-g/2-O/2-G})`),T.attr("style",`color: ${w.get("stroke")??b};`),u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${p?-z/2:z/2-h.height})`),te.attr("transform",`translate(0,${p?h.height/2+g/2:-h.height/2-g/2})`),It(e,se),e.intersect=function(Y){return ze.info("iconSquare intersect",e,Y),mt.rect(e,Y)},c}R(rse,"iconCircle");async function sse(n,e,{config:{themeVariables:t,flowchart:i}}){const{labelStyles:r}=Lt(e);e.labelStyle=r;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=i?.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,halfPadding:u,label:d}=await ti(n,e,"icon-shape default"),g=e.pos==="t",p=a+u*2,b=a+u*2,{nodeBorder:_,mainBkg:w}=t,{stylesMap:y}=pb(e),k=-b/2,L=-p/2,T=e.label?8:0,N=St.svg(c),D=kt(e,{});e.look!=="handDrawn"&&(D.roughness=0,D.fillStyle="solid");const O=y.get("fill");D.stroke=O??w;const B=N.path(Of(k,L,b,p,5),D),G=Math.max(b,h.width),H=p+h.height+T,q=N.rectangle(-G/2,-H/2,G,H,{...D,fill:"transparent",stroke:"none"}),X=c.insert(()=>B,":first-child").attr("class","icon-shape2"),z=c.insert(()=>q);if(e.icon){const Q=c.append("g");Q.html(`<g>${await nC(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const te=Q.node().getBBox(),se=te.width,Y=te.height,ae=te.x,fe=te.y;Q.attr("transform",`translate(${-se/2-ae},${g?h.height/2+T/2-Y/2-fe:-h.height/2-T/2-Y/2-fe})`),Q.attr("style",`color: ${y.get("stroke")??_};`)}return d.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${g?-H/2:H/2-h.height})`),X.attr("transform",`translate(0,${g?h.height/2+T/2:-h.height/2-T/2})`),It(e,z),e.intersect=function(Q){if(ze.info("iconSquare intersect",e,Q),!e.label)return mt.rect(e,Q);const te=e.x??0,se=e.y??0,Y=e.height??0;let ae=[];return g?ae=[{x:te-h.width/2,y:se-Y/2},{x:te+h.width/2,y:se-Y/2},{x:te+h.width/2,y:se-Y/2+h.height+T},{x:te+b/2,y:se-Y/2+h.height+T},{x:te+b/2,y:se+Y/2},{x:te-b/2,y:se+Y/2},{x:te-b/2,y:se-Y/2+h.height+T},{x:te-h.width/2,y:se-Y/2+h.height+T}]:ae=[{x:te-b/2,y:se-Y/2},{x:te+b/2,y:se-Y/2},{x:te+b/2,y:se-Y/2+p},{x:te+h.width/2,y:se-Y/2+p},{x:te+h.width/2/2,y:se+Y/2},{x:te-h.width/2,y:se+Y/2},{x:te-h.width/2,y:se-Y/2+p},{x:te-b/2,y:se-Y/2+p}],mt.polygon(e,ae,Q)},c}R(sse,"iconRounded");async function ose(n,e,{config:{themeVariables:t,flowchart:i}}){const{labelStyles:r}=Lt(e);e.labelStyle=r;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=i?.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,halfPadding:u,label:d}=await ti(n,e,"icon-shape default"),g=e.pos==="t",p=a+u*2,b=a+u*2,{nodeBorder:_,mainBkg:w}=t,{stylesMap:y}=pb(e),k=-b/2,L=-p/2,T=e.label?8:0,N=St.svg(c),D=kt(e,{});e.look!=="handDrawn"&&(D.roughness=0,D.fillStyle="solid");const O=y.get("fill");D.stroke=O??w;const B=N.path(Of(k,L,b,p,.1),D),G=Math.max(b,h.width),H=p+h.height+T,q=N.rectangle(-G/2,-H/2,G,H,{...D,fill:"transparent",stroke:"none"}),X=c.insert(()=>B,":first-child"),z=c.insert(()=>q);if(e.icon){const Q=c.append("g");Q.html(`<g>${await nC(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const te=Q.node().getBBox(),se=te.width,Y=te.height,ae=te.x,fe=te.y;Q.attr("transform",`translate(${-se/2-ae},${g?h.height/2+T/2-Y/2-fe:-h.height/2-T/2-Y/2-fe})`),Q.attr("style",`color: ${y.get("stroke")??_};`)}return d.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${g?-H/2:H/2-h.height})`),X.attr("transform",`translate(0,${g?h.height/2+T/2:-h.height/2-T/2})`),It(e,z),e.intersect=function(Q){if(ze.info("iconSquare intersect",e,Q),!e.label)return mt.rect(e,Q);const te=e.x??0,se=e.y??0,Y=e.height??0;let ae=[];return g?ae=[{x:te-h.width/2,y:se-Y/2},{x:te+h.width/2,y:se-Y/2},{x:te+h.width/2,y:se-Y/2+h.height+T},{x:te+b/2,y:se-Y/2+h.height+T},{x:te+b/2,y:se+Y/2},{x:te-b/2,y:se+Y/2},{x:te-b/2,y:se-Y/2+h.height+T},{x:te-h.width/2,y:se-Y/2+h.height+T}]:ae=[{x:te-b/2,y:se-Y/2},{x:te+b/2,y:se-Y/2},{x:te+b/2,y:se-Y/2+p},{x:te+h.width/2,y:se-Y/2+p},{x:te+h.width/2/2,y:se+Y/2},{x:te-h.width/2,y:se+Y/2},{x:te-h.width/2,y:se-Y/2+p},{x:te-b/2,y:se-Y/2+p}],mt.polygon(e,ae,Q)},c}R(ose,"iconSquare");async function ase(n,e,{config:{flowchart:t}}){const i=new Image;i.src=e?.img??"",await i.decode();const r=Number(i.naturalWidth.toString().replace("px","")),s=Number(i.naturalHeight.toString().replace("px",""));e.imageAspectRatio=r/s;const{labelStyles:o}=Lt(e);e.labelStyle=o;const a=t?.wrappingWidth;e.defaultWidth=t?.wrappingWidth;const l=Math.max(e.label?a??0:0,e?.assetWidth??r),c=e.constraint==="on"&&e?.assetHeight?e.assetHeight*e.imageAspectRatio:l,h=e.constraint==="on"?c/e.imageAspectRatio:e?.assetHeight??s;e.width=Math.max(c,a??0);const{shapeSvg:u,bbox:d,label:g}=await ti(n,e,"image-shape default"),p=e.pos==="t",b=-c/2,_=-h/2,w=e.label?8:0,y=St.svg(u),k=kt(e,{});e.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const L=y.rectangle(b,_,c,h,k),T=Math.max(c,d.width),N=h+d.height+w,D=y.rectangle(-T/2,-N/2,T,N,{...k,fill:"none",stroke:"none"}),O=u.insert(()=>L,":first-child"),B=u.insert(()=>D);if(e.img){const G=u.append("image");G.attr("href",e.img),G.attr("width",c),G.attr("height",h),G.attr("preserveAspectRatio","none"),G.attr("transform",`translate(${-c/2},${p?N/2-h:-N/2})`)}return g.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${p?-h/2-d.height/2-w/2:h/2-d.height/2+w/2})`),O.attr("transform",`translate(0,${p?d.height/2+w/2:-d.height/2-w/2})`),It(e,B),e.intersect=function(G){if(ze.info("iconSquare intersect",e,G),!e.label)return mt.rect(e,G);const H=e.x??0,q=e.y??0,X=e.height??0;let z=[];return p?z=[{x:H-d.width/2,y:q-X/2},{x:H+d.width/2,y:q-X/2},{x:H+d.width/2,y:q-X/2+d.height+w},{x:H+c/2,y:q-X/2+d.height+w},{x:H+c/2,y:q+X/2},{x:H-c/2,y:q+X/2},{x:H-c/2,y:q-X/2+d.height+w},{x:H-d.width/2,y:q-X/2+d.height+w}]:z=[{x:H-c/2,y:q-X/2},{x:H+c/2,y:q-X/2},{x:H+c/2,y:q-X/2+h},{x:H+d.width/2,y:q-X/2+h},{x:H+d.width/2/2,y:q+X/2},{x:H-d.width/2,y:q+X/2},{x:H-d.width/2,y:q-X/2+h},{x:H-c/2,y:q-X/2+h}],mt.polygon(e,z,G)},u}R(ase,"imageSquare");async function lse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s}=await ti(n,e,Gt(e)),o=Math.max(s.width+(e.padding??0)*2,e?.width??0),a=Math.max(s.height+(e.padding??0)*2,e?.height??0),l=[{x:0,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:-3*a/6,y:-a}];let c;const{cssStyles:h}=e;if(e.look==="handDrawn"){const u=St.svg(r),d=kt(e,{}),g=zi(l),p=u.path(g,d);c=r.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Bf(r,o,a,l);return i&&c.attr("style",i),e.width=o,e.height=a,It(e,c),e.intersect=function(u){return mt.polygon(e,l,u)},r}R(lse,"inv_trapezoid");async function T3(n,e,t){const{labelStyles:i,nodeStyles:r}=Lt(e);e.labelStyle=i;const{shapeSvg:s,bbox:o}=await ti(n,e,Gt(e)),a=Math.max(o.width+t.labelPaddingX*2,e?.width||0),l=Math.max(o.height+t.labelPaddingY*2,e?.height||0),c=-a/2,h=-l/2;let u,{rx:d,ry:g}=e;const{cssStyles:p}=e;if(t?.rx&&t.ry&&(d=t.rx,g=t.ry),e.look==="handDrawn"){const b=St.svg(s),_=kt(e,{}),w=d||g?b.path(Of(c,h,a,l,d||0),_):b.rectangle(c,h,a,l,_);u=s.insert(()=>w,":first-child"),u.attr("class","basic label-container").attr("style",vo(p))}else u=s.insert("rect",":first-child"),u.attr("class","basic label-container").attr("style",r).attr("rx",vo(d)).attr("ry",vo(g)).attr("x",c).attr("y",h).attr("width",a).attr("height",l);return It(e,u),e.calcIntersect=function(b,_){return mt.rect(b,_)},e.intersect=function(b){return mt.rect(e,b)},s}R(T3,"drawRect");async function cse(n,e){const{shapeSvg:t,bbox:i,label:r}=await ti(n,e,"label"),s=t.insert("rect",":first-child");return s.attr("width",.1).attr("height",.1),t.attr("class","label edgeLabel"),r.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),It(e,s),e.intersect=function(l){return mt.rect(e,l)},t}R(cse,"labelRect");async function hse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s}=await ti(n,e,Gt(e)),o=Math.max(s.width+(e.padding??0),e?.width??0),a=Math.max(s.height+(e.padding??0),e?.height??0),l=[{x:0,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:-(3*a)/6,y:-a}];let c;const{cssStyles:h}=e;if(e.look==="handDrawn"){const u=St.svg(r),d=kt(e,{}),g=zi(l),p=u.path(g,d);c=r.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Bf(r,o,a,l);return i&&c.attr("style",i),e.width=o,e.height=a,It(e,c),e.intersect=function(u){return mt.polygon(e,l,u)},r}R(hse,"lean_left");async function use(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s}=await ti(n,e,Gt(e)),o=Math.max(s.width+(e.padding??0),e?.width??0),a=Math.max(s.height+(e.padding??0),e?.height??0),l=[{x:-3*a/6,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:0,y:-a}];let c;const{cssStyles:h}=e;if(e.look==="handDrawn"){const u=St.svg(r),d=kt(e,{}),g=zi(l),p=u.path(g,d);c=r.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Bf(r,o,a,l);return i&&c.attr("style",i),e.width=o,e.height=a,It(e,c),e.intersect=function(u){return mt.polygon(e,l,u)},r}R(use,"lean_right");function dse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.label="",e.labelStyle=t;const r=n.insert("g").attr("class",Gt(e)).attr("id",e.domId??e.id),{cssStyles:s}=e,o=Math.max(35,e?.width??0),a=Math.max(35,e?.height??0),l=7,c=[{x:o,y:0},{x:0,y:a+l/2},{x:o-2*l,y:a+l/2},{x:0,y:2*a},{x:o,y:a-l/2},{x:2*l,y:a-l/2}],h=St.svg(r),u=kt(e,{});e.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const d=zi(c),g=h.path(d,u),p=r.insert(()=>g,":first-child");return s&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",s),i&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",i),p.attr("transform",`translate(-${o/2},${-a})`),It(e,p),e.intersect=function(b){return ze.info("lightningBolt intersect",e,b),mt.polygon(e,c,b)},r}R(dse,"lightningBolt");var tWe=R((n,e,t,i,r,s,o)=>[`M${n},${e+s}`,`a${r},${s} 0,0,0 ${t},0`,`a${r},${s} 0,0,0 ${-t},0`,`l0,${i}`,`a${r},${s} 0,0,0 ${t},0`,`l0,${-i}`,`M${n},${e+s+o}`,`a${r},${s} 0,0,0 ${t},0`].join(" "),"createCylinderPathD"),iWe=R((n,e,t,i,r,s,o)=>[`M${n},${e+s}`,`M${n+t},${e+s}`,`a${r},${s} 0,0,0 ${-t},0`,`l0,${i}`,`a${r},${s} 0,0,0 ${t},0`,`l0,${-i}`,`M${n},${e+s+o}`,`a${r},${s} 0,0,0 ${t},0`].join(" "),"createOuterCylinderPathD"),nWe=R((n,e,t,i,r,s)=>[`M${n-t/2},${-i/2}`,`a${r},${s} 0,0,0 ${t},0`].join(" "),"createInnerCylinderPathD");async function fse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,label:o}=await ti(n,e,Gt(e)),a=Math.max(s.width+(e.padding??0),e.width??0),l=a/2,c=l/(2.5+a/50),h=Math.max(s.height+c+(e.padding??0),e.height??0),u=h*.1;let d;const{cssStyles:g}=e;if(e.look==="handDrawn"){const p=St.svg(r),b=iWe(0,0,a,h,l,c,u),_=nWe(0,c,a,h,l,c),w=kt(e,{}),y=p.path(b,w),k=p.path(_,w);r.insert(()=>k,":first-child").attr("class","line"),d=r.insert(()=>y,":first-child"),d.attr("class","basic label-container"),g&&d.attr("style",g)}else{const p=tWe(0,0,a,h,l,c,u);d=r.insert("path",":first-child").attr("d",p).attr("class","basic label-container").attr("style",vo(g)).attr("style",i)}return d.attr("label-offset-y",c),d.attr("transform",`translate(${-a/2}, ${-(h/2+c)})`),It(e,d),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),e.intersect=function(p){const b=mt.rect(e,p),_=b.x-(e.x??0);if(l!=0&&(Math.abs(_)<(e.width??0)/2||Math.abs(_)==(e.width??0)/2&&Math.abs(b.y-(e.y??0))>(e.height??0)/2-c)){let w=c*c*(1-_*_/(l*l));w>0&&(w=Math.sqrt(w)),w=c-w,p.y-(e.y??0)>0&&(w=-w),b.y+=w}return b},r}R(fse,"linedCylinder");async function gse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,label:o}=await ti(n,e,Gt(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=l/4,h=l+c,{cssStyles:u}=e,d=St.svg(r),g=kt(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const p=[{x:-a/2-a/2*.1,y:-h/2},{x:-a/2-a/2*.1,y:h/2},...Lf(-a/2-a/2*.1,h/2,a/2+a/2*.1,h/2,c,.8),{x:a/2+a/2*.1,y:-h/2},{x:-a/2-a/2*.1,y:-h/2},{x:-a/2,y:-h/2},{x:-a/2,y:h/2*1.1},{x:-a/2,y:-h/2}],b=d.polygon(p.map(w=>[w.x,w.y]),g),_=r.insert(()=>b,":first-child");return _.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",u),i&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",i),_.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)+a/2*.1/2-(s.x-(s.left??0))},${-l/2+(e.padding??0)-c/2-(s.y-(s.top??0))})`),It(e,_),e.intersect=function(w){return mt.polygon(e,p,w)},r}R(gse,"linedWaveEdgedRect");async function mse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,label:o}=await ti(n,e,Gt(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=5,h=-a/2,u=-l/2,{cssStyles:d}=e,g=St.svg(r),p=kt(e,{}),b=[{x:h-c,y:u+c},{x:h-c,y:u+l+c},{x:h+a-c,y:u+l+c},{x:h+a-c,y:u+l},{x:h+a,y:u+l},{x:h+a,y:u+l-c},{x:h+a+c,y:u+l-c},{x:h+a+c,y:u-c},{x:h+c,y:u-c},{x:h+c,y:u},{x:h,y:u},{x:h,y:u+c}],_=[{x:h,y:u+c},{x:h+a-c,y:u+c},{x:h+a-c,y:u+l},{x:h+a,y:u+l},{x:h+a,y:u},{x:h,y:u}];e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const w=zi(b),y=g.path(w,p),k=zi(_),L=g.path(k,{...p,fill:"none"}),T=r.insert(()=>L,":first-child");return T.insert(()=>y,":first-child"),T.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",d),i&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",i),o.attr("transform",`translate(${-(s.width/2)-c-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),It(e,T),e.intersect=function(N){return mt.polygon(e,b,N)},r}R(mse,"multiRect");async function pse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,label:o}=await ti(n,e,Gt(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=l/4,h=l+c,u=-a/2,d=-h/2,g=5,{cssStyles:p}=e,b=Lf(u-g,d+h+g,u+a-g,d+h+g,c,.8),_=b?.[b.length-1],w=[{x:u-g,y:d+g},{x:u-g,y:d+h+g},...b,{x:u+a-g,y:_.y-g},{x:u+a,y:_.y-g},{x:u+a,y:_.y-2*g},{x:u+a+g,y:_.y-2*g},{x:u+a+g,y:d-g},{x:u+g,y:d-g},{x:u+g,y:d},{x:u,y:d},{x:u,y:d+g}],y=[{x:u,y:d+g},{x:u+a-g,y:d+g},{x:u+a-g,y:_.y-g},{x:u+a,y:_.y-g},{x:u+a,y:d},{x:u,y:d}],k=St.svg(r),L=kt(e,{});e.look!=="handDrawn"&&(L.roughness=0,L.fillStyle="solid");const T=zi(w),N=k.path(T,L),D=zi(y),O=k.path(D,L),B=r.insert(()=>N,":first-child");return B.insert(()=>O),B.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&B.selectAll("path").attr("style",p),i&&e.look!=="handDrawn"&&B.selectAll("path").attr("style",i),B.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-(s.width/2)-g-(s.x-(s.left??0))}, ${-(s.height/2)+g-c/2-(s.y-(s.top??0))})`),It(e,B),e.intersect=function(G){return mt.polygon(e,w,G)},r}R(pse,"multiWaveEdgedRectangle");async function bse(n,e,{config:{themeVariables:t}}){const{labelStyles:i,nodeStyles:r}=Lt(e);e.labelStyle=i,e.useHtmlLabels||bo().flowchart?.htmlLabels!==!1||(e.centerLabel=!0);const{shapeSvg:o,bbox:a,label:l}=await ti(n,e,Gt(e)),c=Math.max(a.width+(e.padding??0)*2,e?.width??0),h=Math.max(a.height+(e.padding??0)*2,e?.height??0),u=-c/2,d=-h/2,{cssStyles:g}=e,p=St.svg(o),b=kt(e,{fill:t.noteBkgColor,stroke:t.noteBorderColor});e.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const _=p.rectangle(u,d,c,h,b),w=o.insert(()=>_,":first-child");return w.attr("class","basic label-container"),g&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",g),r&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",r),l.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${-(a.height/2)-(a.y-(a.top??0))})`),It(e,w),e.intersect=function(y){return mt.rect(e,y)},o}R(bse,"note");var rWe=R((n,e,t)=>[`M${n+t/2},${e}`,`L${n+t},${e-t/2}`,`L${n+t/2},${e-t}`,`L${n},${e-t/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function _se(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s}=await ti(n,e,Gt(e)),o=s.width+e.padding,a=s.height+e.padding,l=o+a,c=.5,h=[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}];let u;const{cssStyles:d}=e;if(e.look==="handDrawn"){const g=St.svg(r),p=kt(e,{}),b=rWe(0,0,l),_=g.path(b,p);u=r.insert(()=>_,":first-child").attr("transform",`translate(${-l/2+c}, ${l/2})`),d&&u.attr("style",d)}else u=Bf(r,l,l,h),u.attr("transform",`translate(${-l/2+c}, ${l/2})`);return i&&u.attr("style",i),It(e,u),e.calcIntersect=function(g,p){const b=g.width,_=[{x:b/2,y:0},{x:b,y:-b/2},{x:b/2,y:-b},{x:0,y:-b/2}],w=mt.polygon(g,_,p);return{x:w.x-.5,y:w.y-.5}},e.intersect=function(g){return this.calcIntersect(e,g)},r}R(_se,"question");async function vse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,label:o}=await ti(n,e,Gt(e)),a=Math.max(s.width+(e.padding??0),e?.width??0),l=Math.max(s.height+(e.padding??0),e?.height??0),c=-a/2,h=-l/2,u=h/2,d=[{x:c+u,y:h},{x:c,y:0},{x:c+u,y:-h},{x:-c,y:-h},{x:-c,y:h}],{cssStyles:g}=e,p=St.svg(r),b=kt(e,{});e.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const _=zi(d),w=p.path(_,b),y=r.insert(()=>w,":first-child");return y.attr("class","basic label-container"),g&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",g),i&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",i),y.attr("transform",`translate(${-u/2},0)`),o.attr("transform",`translate(${-u/2-s.width/2-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),It(e,y),e.intersect=function(k){return mt.polygon(e,d,k)},r}R(vse,"rect_left_inv_arrow");async function wse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;let r;e.cssClasses?r="node "+e.cssClasses:r="node default";const s=n.insert("g").attr("class",r).attr("id",e.domId||e.id),o=s.insert("g"),a=s.insert("g").attr("class","label").attr("style",i),l=e.description,c=e.label,h=a.node().appendChild(await Qg(c,e.labelStyle,!0,!0));let u={width:0,height:0};if(vs(vn()?.flowchart?.htmlLabels)){const O=h.children[0],B=Ji(h);u=O.getBoundingClientRect(),B.attr("width",u.width),B.attr("height",u.height)}ze.info("Text 2",l);const d=l||[],g=h.getBBox(),p=a.node().appendChild(await Qg(d.join?d.join("<br/>"):d,e.labelStyle,!0,!0)),b=p.children[0],_=Ji(p);u=b.getBoundingClientRect(),_.attr("width",u.width),_.attr("height",u.height);const w=(e.padding||0)/2;Ji(p).attr("transform","translate( "+(u.width>g.width?0:(g.width-u.width)/2)+", "+(g.height+w+5)+")"),Ji(h).attr("transform","translate( "+(u.width<g.width?0:-(g.width-u.width)/2)+", 0)"),u=a.node().getBBox(),a.attr("transform","translate("+-u.width/2+", "+(-u.height/2-w+3)+")");const y=u.width+(e.padding||0),k=u.height+(e.padding||0),L=-u.width/2-w,T=-u.height/2-w;let N,D;if(e.look==="handDrawn"){const O=St.svg(s),B=kt(e,{}),G=O.path(Of(L,T,y,k,e.rx||0),B),H=O.line(-u.width/2-w,-u.height/2-w+g.height+w,u.width/2+w,-u.height/2-w+g.height+w,B);D=s.insert(()=>(ze.debug("Rough node insert CXC",G),H),":first-child"),N=s.insert(()=>(ze.debug("Rough node insert CXC",G),G),":first-child")}else N=o.insert("rect",":first-child"),D=o.insert("line"),N.attr("class","outer title-state").attr("style",i).attr("x",-u.width/2-w).attr("y",-u.height/2-w).attr("width",u.width+(e.padding||0)).attr("height",u.height+(e.padding||0)),D.attr("class","divider").attr("x1",-u.width/2-w).attr("x2",u.width/2+w).attr("y1",-u.height/2-w+g.height+w).attr("y2",-u.height/2-w+g.height+w);return It(e,N),e.intersect=function(O){return mt.rect(e,O)},s}R(wse,"rectWithTitle");function sv(n,e,t,i,r,s,o){const l=(n+t)/2,c=(e+i)/2,h=Math.atan2(i-e,t-n),u=(t-n)/2,d=(i-e)/2,g=u/r,p=d/s,b=Math.sqrt(g**2+p**2);if(b>1)throw new Error("The given radii are too small to create an arc between the points.");const _=Math.sqrt(1-b**2),w=l+_*s*Math.sin(h)*(o?-1:1),y=c-_*r*Math.cos(h)*(o?-1:1),k=Math.atan2((e-y)/s,(n-w)/r);let T=Math.atan2((i-y)/s,(t-w)/r)-k;o&&T<0&&(T+=2*Math.PI),!o&&T>0&&(T-=2*Math.PI);const N=[];for(let D=0;D<20;D++){const O=D/19,B=k+O*T,G=w+r*Math.cos(B),H=y+s*Math.sin(B);N.push({x:G,y:H})}return N}R(sv,"generateArcPoints");async function yse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s}=await ti(n,e,Gt(e)),o=e?.padding??0,a=e?.padding??0,l=(e?.width?e?.width:s.width)+o*2,c=(e?.height?e?.height:s.height)+a*2,h=e.radius||5,u=e.taper||5,{cssStyles:d}=e,g=St.svg(r),p=kt(e,{});e.stroke&&(p.stroke=e.stroke),e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const b=[{x:-l/2+u,y:-c/2},{x:l/2-u,y:-c/2},...sv(l/2-u,-c/2,l/2,-c/2+u,h,h,!0),{x:l/2,y:-c/2+u},{x:l/2,y:c/2-u},...sv(l/2,c/2-u,l/2-u,c/2,h,h,!0),{x:l/2-u,y:c/2},{x:-l/2+u,y:c/2},...sv(-l/2+u,c/2,-l/2,c/2-u,h,h,!0),{x:-l/2,y:c/2-u},{x:-l/2,y:-c/2+u},...sv(-l/2,-c/2+u,-l/2+u,-c/2,h,h,!0)],_=zi(b),w=g.path(_,p),y=r.insert(()=>w,":first-child");return y.attr("class","basic label-container outer-path"),d&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",d),i&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",i),It(e,y),e.intersect=function(k){return mt.polygon(e,b,k)},r}R(yse,"roundedRect");async function Cse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,label:o}=await ti(n,e,Gt(e)),a=e?.padding??0,l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=-s.width/2-a,u=-s.height/2-a,{cssStyles:d}=e,g=St.svg(r),p=kt(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const b=[{x:h,y:u},{x:h+l+8,y:u},{x:h+l+8,y:u+c},{x:h-8,y:u+c},{x:h-8,y:u},{x:h,y:u},{x:h,y:u+c}],_=g.polygon(b.map(y=>[y.x,y.y]),p),w=r.insert(()=>_,":first-child");return w.attr("class","basic label-container").attr("style",vo(d)),i&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",i),d&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",i),o.attr("transform",`translate(${-l/2+4+(e.padding??0)-(s.x-(s.left??0))},${-c/2+(e.padding??0)-(s.y-(s.top??0))})`),It(e,w),e.intersect=function(y){return mt.rect(e,y)},r}R(Cse,"shadedProcess");async function Sse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,label:o}=await ti(n,e,Gt(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=-a/2,h=-l/2,{cssStyles:u}=e,d=St.svg(r),g=kt(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const p=[{x:c,y:h},{x:c,y:h+l},{x:c+a,y:h+l},{x:c+a,y:h-l/2}],b=zi(p),_=d.path(b,g),w=r.insert(()=>_,":first-child");return w.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&w.selectChildren("path").attr("style",u),i&&e.look!=="handDrawn"&&w.selectChildren("path").attr("style",i),w.attr("transform",`translate(0, ${l/4})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(s.x-(s.left??0))}, ${-l/4+(e.padding??0)-(s.y-(s.top??0))})`),It(e,w),e.intersect=function(y){return mt.polygon(e,p,y)},r}R(Sse,"slopedRect");async function xse(n,e){const t={rx:0,ry:0,labelPaddingX:e.labelPaddingX??(e?.padding||0)*2,labelPaddingY:(e?.padding||0)*1};return T3(n,e,t)}R(xse,"squareRect");async function kse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s}=await ti(n,e,Gt(e)),o=s.height+e.padding,a=s.width+o/4+e.padding,l=o/2,{cssStyles:c}=e,h=St.svg(r),u=kt(e,{});e.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const d=[{x:-a/2+l,y:-o/2},{x:a/2-l,y:-o/2},...fy(-a/2+l,0,l,50,90,270),{x:a/2-l,y:o/2},...fy(a/2-l,0,l,50,270,450)],g=zi(d),p=h.path(g,u),b=r.insert(()=>p,":first-child");return b.attr("class","basic label-container outer-path"),c&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",c),i&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",i),It(e,b),e.intersect=function(_){return mt.polygon(e,d,_)},r}R(kse,"stadium");async function Lse(n,e){return T3(n,e,{rx:5,ry:5})}R(Lse,"state");function Tse(n,e,{config:{themeVariables:t}}){const{labelStyles:i,nodeStyles:r}=Lt(e);e.labelStyle=i;const{cssStyles:s}=e,{lineColor:o,stateBorder:a,nodeBorder:l}=t,c=n.insert("g").attr("class","node default").attr("id",e.domId||e.id),h=St.svg(c),u=kt(e,{});e.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const d=h.circle(0,0,14,{...u,stroke:o,strokeWidth:2}),g=a??l,p=h.circle(0,0,5,{...u,fill:g,stroke:g,strokeWidth:2,fillStyle:"solid"}),b=c.insert(()=>d,":first-child");return b.insert(()=>p),s&&b.selectAll("path").attr("style",s),r&&b.selectAll("path").attr("style",r),It(e,b),e.intersect=function(_){return mt.circle(e,7,_)},c}R(Tse,"stateEnd");function Dse(n,e,{config:{themeVariables:t}}){const{lineColor:i}=t,r=n.insert("g").attr("class","node default").attr("id",e.domId||e.id);let s;if(e.look==="handDrawn"){const a=St.svg(r).circle(0,0,14,vRe(i));s=r.insert(()=>a),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else s=r.insert("circle",":first-child"),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return It(e,s),e.intersect=function(o){return mt.circle(e,7,o)},r}R(Dse,"stateStart");async function Ese(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s}=await ti(n,e,Gt(e)),o=(e?.padding||0)/2,a=s.width+e.padding,l=s.height+e.padding,c=-s.width/2-o,h=-s.height/2-o,u=[{x:0,y:0},{x:a,y:0},{x:a,y:-l},{x:0,y:-l},{x:0,y:0},{x:-8,y:0},{x:a+8,y:0},{x:a+8,y:-l},{x:-8,y:-l},{x:-8,y:0}];if(e.look==="handDrawn"){const d=St.svg(r),g=kt(e,{}),p=d.rectangle(c-8,h,a+16,l,g),b=d.line(c,h,c,h+l,g),_=d.line(c+a,h,c+a,h+l,g);r.insert(()=>b,":first-child"),r.insert(()=>_,":first-child");const w=r.insert(()=>p,":first-child"),{cssStyles:y}=e;w.attr("class","basic label-container").attr("style",vo(y)),It(e,w)}else{const d=Bf(r,a,l,u);i&&d.attr("style",i),It(e,d)}return e.intersect=function(d){return mt.polygon(e,u,d)},r}R(Ese,"subroutine");async function Ise(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s}=await ti(n,e,Gt(e)),o=Math.max(s.width+(e.padding??0)*2,e?.width??0),a=Math.max(s.height+(e.padding??0)*2,e?.height??0),l=-o/2,c=-a/2,h=.2*a,u=.2*a,{cssStyles:d}=e,g=St.svg(r),p=kt(e,{}),b=[{x:l-h/2,y:c},{x:l+o+h/2,y:c},{x:l+o+h/2,y:c+a},{x:l-h/2,y:c+a}],_=[{x:l+o-h/2,y:c+a},{x:l+o+h/2,y:c+a},{x:l+o+h/2,y:c+a-u}];e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const w=zi(b),y=g.path(w,p),k=zi(_),L=g.path(k,{...p,fillStyle:"solid"}),T=r.insert(()=>L,":first-child");return T.insert(()=>y,":first-child"),T.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",d),i&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",i),It(e,T),e.intersect=function(N){return mt.polygon(e,b,N)},r}R(Ise,"taggedRect");async function Nse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,label:o}=await ti(n,e,Gt(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=l/4,h=.2*a,u=.2*l,d=l+c,{cssStyles:g}=e,p=St.svg(r),b=kt(e,{});e.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const _=[{x:-a/2-a/2*.1,y:d/2},...Lf(-a/2-a/2*.1,d/2,a/2+a/2*.1,d/2,c,.8),{x:a/2+a/2*.1,y:-d/2},{x:-a/2-a/2*.1,y:-d/2}],w=-a/2+a/2*.1,y=-d/2-u*.4,k=[{x:w+a-h,y:(y+l)*1.4},{x:w+a,y:y+l-u},{x:w+a,y:(y+l)*.9},...Lf(w+a,(y+l)*1.3,w+a-h,(y+l)*1.5,-l*.03,.5)],L=zi(_),T=p.path(L,b),N=zi(k),D=p.path(N,{...b,fillStyle:"solid"}),O=r.insert(()=>D,":first-child");return O.insert(()=>T,":first-child"),O.attr("class","basic label-container"),g&&e.look!=="handDrawn"&&O.selectAll("path").attr("style",g),i&&e.look!=="handDrawn"&&O.selectAll("path").attr("style",i),O.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(s.x-(s.left??0))},${-l/2+(e.padding??0)-c/2-(s.y-(s.top??0))})`),It(e,O),e.intersect=function(B){return mt.polygon(e,_,B)},r}R(Nse,"taggedWaveEdgedRectangle");async function Mse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s}=await ti(n,e,Gt(e)),o=Math.max(s.width+e.padding,e?.width||0),a=Math.max(s.height+e.padding,e?.height||0),l=-o/2,c=-a/2,h=r.insert("rect",":first-child");return h.attr("class","text").attr("style",i).attr("rx",0).attr("ry",0).attr("x",l).attr("y",c).attr("width",o).attr("height",a),It(e,h),e.intersect=function(u){return mt.rect(e,u)},r}R(Mse,"text");var sWe=R((n,e,t,i,r,s)=>`M${n},${e}
    a${r},${s} 0,0,1 0,${-i}
    l${t},0
    a${r},${s} 0,0,1 0,${i}
    M${t},${-i}
    a${r},${s} 0,0,0 0,${i}
    l${-t},0`,"createCylinderPathD"),oWe=R((n,e,t,i,r,s)=>[`M${n},${e}`,`M${n+t},${e}`,`a${r},${s} 0,0,0 0,${-i}`,`l${-t},0`,`a${r},${s} 0,0,0 0,${i}`,`l${t},0`].join(" "),"createOuterCylinderPathD"),aWe=R((n,e,t,i,r,s)=>[`M${n+t/2},${-i/2}`,`a${r},${s} 0,0,0 0,${i}`].join(" "),"createInnerCylinderPathD");async function Ase(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,label:o,halfPadding:a}=await ti(n,e,Gt(e)),l=e.look==="neo"?a*2:a,c=s.height+l,h=c/2,u=h/(2.5+c/50),d=s.width+u+l,{cssStyles:g}=e;let p;if(e.look==="handDrawn"){const b=St.svg(r),_=oWe(0,0,d,c,u,h),w=aWe(0,0,d,c,u,h),y=b.path(_,kt(e,{})),k=b.path(w,kt(e,{fill:"none"}));p=r.insert(()=>k,":first-child"),p=r.insert(()=>y,":first-child"),p.attr("class","basic label-container"),g&&p.attr("style",g)}else{const b=sWe(0,0,d,c,u,h);p=r.insert("path",":first-child").attr("d",b).attr("class","basic label-container").attr("style",vo(g)).attr("style",i),p.attr("class","basic label-container"),g&&p.selectAll("path").attr("style",g),i&&p.selectAll("path").attr("style",i)}return p.attr("label-offset-x",u),p.attr("transform",`translate(${-d/2}, ${c/2} )`),o.attr("transform",`translate(${-(s.width/2)-u-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),It(e,p),e.intersect=function(b){const _=mt.rect(e,b),w=_.y-(e.y??0);if(h!=0&&(Math.abs(w)<(e.height??0)/2||Math.abs(w)==(e.height??0)/2&&Math.abs(_.x-(e.x??0))>(e.width??0)/2-u)){let y=u*u*(1-w*w/(h*h));y!=0&&(y=Math.sqrt(Math.abs(y))),y=u-y,b.x-(e.x??0)>0&&(y=-y),_.x+=y}return _},r}R(Ase,"tiltedCylinder");async function Rse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s}=await ti(n,e,Gt(e)),o=s.width+e.padding,a=s.height+e.padding,l=[{x:-3*a/6,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:0,y:-a}];let c;const{cssStyles:h}=e;if(e.look==="handDrawn"){const u=St.svg(r),d=kt(e,{}),g=zi(l),p=u.path(g,d);c=r.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Bf(r,o,a,l);return i&&c.attr("style",i),e.width=o,e.height=a,It(e,c),e.intersect=function(u){return mt.polygon(e,l,u)},r}R(Rse,"trapezoid");async function Pse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s}=await ti(n,e,Gt(e)),o=60,a=20,l=Math.max(o,s.width+(e.padding??0)*2,e?.width??0),c=Math.max(a,s.height+(e.padding??0)*2,e?.height??0),{cssStyles:h}=e,u=St.svg(r),d=kt(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const g=[{x:-l/2*.8,y:-c/2},{x:l/2*.8,y:-c/2},{x:l/2,y:-c/2*.6},{x:l/2,y:c/2},{x:-l/2,y:c/2},{x:-l/2,y:-c/2*.6}],p=zi(g),b=u.path(p,d),_=r.insert(()=>b,":first-child");return _.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&_.selectChildren("path").attr("style",h),i&&e.look!=="handDrawn"&&_.selectChildren("path").attr("style",i),It(e,_),e.intersect=function(w){return mt.polygon(e,g,w)},r}R(Pse,"trapezoidalPentagon");async function Ose(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,label:o}=await ti(n,e,Gt(e)),a=vs(vn().flowchart?.htmlLabels),l=s.width+(e.padding??0),c=l+s.height,h=l+s.height,u=[{x:0,y:0},{x:h,y:0},{x:h/2,y:-c}],{cssStyles:d}=e,g=St.svg(r),p=kt(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const b=zi(u),_=g.path(b,p),w=r.insert(()=>_,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return d&&e.look!=="handDrawn"&&w.selectChildren("path").attr("style",d),i&&e.look!=="handDrawn"&&w.selectChildren("path").attr("style",i),e.width=l,e.height=c,It(e,w),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${c/2-(s.height+(e.padding??0)/(a?2:1)-(s.y-(s.top??0)))})`),e.intersect=function(y){return ze.info("Triangle intersect",e,u,y),mt.polygon(e,u,y)},r}R(Ose,"triangle");async function Bse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,label:o}=await ti(n,e,Gt(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=l/8,h=l+c,{cssStyles:u}=e,g=70-a,p=g>0?g/2:0,b=St.svg(r),_=kt(e,{});e.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");const w=[{x:-a/2-p,y:h/2},...Lf(-a/2-p,h/2,a/2+p,h/2,c,.8),{x:a/2+p,y:-h/2},{x:-a/2-p,y:-h/2}],y=zi(w),k=b.path(y,_),L=r.insert(()=>k,":first-child");return L.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&L.selectAll("path").attr("style",u),i&&e.look!=="handDrawn"&&L.selectAll("path").attr("style",i),L.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(s.x-(s.left??0))},${-l/2+(e.padding??0)-c-(s.y-(s.top??0))})`),It(e,L),e.intersect=function(T){return mt.polygon(e,w,T)},r}R(Bse,"waveEdgedRectangle");async function Fse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s}=await ti(n,e,Gt(e)),o=100,a=50,l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=l/c;let u=l,d=c;u>d*h?d=u/h:u=d*h,u=Math.max(u,o),d=Math.max(d,a);const g=Math.min(d*.2,d/4),p=d+g*2,{cssStyles:b}=e,_=St.svg(r),w=kt(e,{});e.look!=="handDrawn"&&(w.roughness=0,w.fillStyle="solid");const y=[{x:-u/2,y:p/2},...Lf(-u/2,p/2,u/2,p/2,g,1),{x:u/2,y:-p/2},...Lf(u/2,-p/2,-u/2,-p/2,g,-1)],k=zi(y),L=_.path(k,w),T=r.insert(()=>L,":first-child");return T.attr("class","basic label-container"),b&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",b),i&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",i),It(e,T),e.intersect=function(N){return mt.polygon(e,y,N)},r}R(Fse,"waveRectangle");async function Wse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,label:o}=await ti(n,e,Gt(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=5,h=-a/2,u=-l/2,{cssStyles:d}=e,g=St.svg(r),p=kt(e,{}),b=[{x:h-c,y:u-c},{x:h-c,y:u+l},{x:h+a,y:u+l},{x:h+a,y:u-c}],_=`M${h-c},${u-c} L${h+a},${u-c} L${h+a},${u+l} L${h-c},${u+l} L${h-c},${u-c}
                M${h-c},${u} L${h+a},${u}
                M${h},${u-c} L${h},${u+l}`;e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const w=g.path(_,p),y=r.insert(()=>w,":first-child");return y.attr("transform",`translate(${c/2}, ${c/2})`),y.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",d),i&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",i),o.attr("transform",`translate(${-(s.width/2)+c/2-(s.x-(s.left??0))}, ${-(s.height/2)+c/2-(s.y-(s.top??0))})`),It(e,y),e.intersect=function(k){return mt.polygon(e,b,k)},r}R(Wse,"windowPane");async function NO(n,e){const t=e;if(t.alias&&(e.label=t.alias),e.look==="handDrawn"){const{themeVariables:ge}=bo(),{background:Le}=ge,We={...e,id:e.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${Le}`]};await NO(n,We)}const i=bo();e.useHtmlLabels=i.htmlLabels;let r=i.er?.diagramPadding??10,s=i.er?.entityPadding??6;const{cssStyles:o}=e,{labelStyles:a,nodeStyles:l}=Lt(e);if(t.attributes.length===0&&e.label){const ge={rx:0,ry:0,labelPaddingX:r,labelPaddingY:r*1.5};Vu(e.label,i)+ge.labelPaddingX*2<i.er.minEntityWidth&&(e.width=i.er.minEntityWidth);const Le=await T3(n,e,ge);if(!vs(i.htmlLabels)){const We=Le.select("text"),Ie=We.node()?.getBBox();We.attr("transform",`translate(${-Ie.width/2}, 0)`)}return Le}i.htmlLabels||(r*=1.25,s*=1.25);let c=Gt(e);c||(c="node default");const h=n.insert("g").attr("class",c).attr("id",e.domId||e.id),u=await e0(h,e.label??"",i,0,0,["name"],a);u.height+=s;let d=0;const g=[],p=[];let b=0,_=0,w=0,y=0,k=!0,L=!0;for(const ge of t.attributes){const Le=await e0(h,ge.type,i,0,d,["attribute-type"],a);b=Math.max(b,Le.width+r);const We=await e0(h,ge.name,i,0,d,["attribute-name"],a);_=Math.max(_,We.width+r);const Ie=await e0(h,ge.keys.join(),i,0,d,["attribute-keys"],a);w=Math.max(w,Ie.width+r);const Ze=await e0(h,ge.comment,i,0,d,["attribute-comment"],a);y=Math.max(y,Ze.width+r);const ct=Math.max(Le.height,We.height,Ie.height,Ze.height)+s;p.push({yOffset:d,rowHeight:ct}),d+=ct}let T=4;w<=r&&(k=!1,w=0,T--),y<=r&&(L=!1,y=0,T--);const N=h.node().getBBox();if(u.width+r*2-(b+_+w+y)>0){const ge=u.width+r*2-(b+_+w+y);b+=ge/T,_+=ge/T,w>0&&(w+=ge/T),y>0&&(y+=ge/T)}const D=b+_+w+y,O=St.svg(h),B=kt(e,{});e.look!=="handDrawn"&&(B.roughness=0,B.fillStyle="solid");let G=0;p.length>0&&(G=p.reduce((ge,Le)=>ge+(Le?.rowHeight??0),0));const H=Math.max(N.width+r*2,e?.width||0,D),q=Math.max((G??0)+u.height,e?.height||0),X=-H/2,z=-q/2;h.selectAll("g:not(:first-child)").each((ge,Le,We)=>{const Ie=Ji(We[Le]),Ze=Ie.attr("transform");let ct=0,ot=0;if(Ze){const $t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(Ze);$t&&(ct=parseFloat($t[1]),ot=parseFloat($t[2]),Ie.attr("class").includes("attribute-name")?ct+=b:Ie.attr("class").includes("attribute-keys")?ct+=b+_:Ie.attr("class").includes("attribute-comment")&&(ct+=b+_+w))}Ie.attr("transform",`translate(${X+r/2+ct}, ${ot+z+u.height+s/2})`)}),h.select(".name").attr("transform","translate("+-u.width/2+", "+(z+s/2)+")");const Q=O.rectangle(X,z,H,q,B),te=h.insert(()=>Q,":first-child").attr("style",o.join("")),{themeVariables:se}=bo(),{rowEven:Y,rowOdd:ae,nodeBorder:fe}=se;g.push(0);for(const[ge,Le]of p.entries()){const Ie=(ge+1)%2===0&&Le.yOffset!==0,Ze=O.rectangle(X,u.height+z+Le?.yOffset,H,Le?.rowHeight,{...B,fill:Ie?Y:ae,stroke:fe});h.insert(()=>Ze,"g.label").attr("style",o.join("")).attr("class",`row-rect-${Ie?"even":"odd"}`)}let J=O.line(X,u.height+z,H+X,u.height+z,B);h.insert(()=>J).attr("class","divider"),J=O.line(b+X,u.height+z,b+X,q+z,B),h.insert(()=>J).attr("class","divider"),k&&(J=O.line(b+_+X,u.height+z,b+_+X,q+z,B),h.insert(()=>J).attr("class","divider")),L&&(J=O.line(b+_+w+X,u.height+z,b+_+w+X,q+z,B),h.insert(()=>J).attr("class","divider"));for(const ge of g)J=O.line(X,u.height+z+ge,H+X,u.height+z+ge,B),h.insert(()=>J).attr("class","divider");if(It(e,te),l&&e.look!=="handDrawn"){const Le=l.split(";")?.filter(We=>We.includes("stroke"))?.map(We=>`${We}`).join("; ");h.selectAll("path").attr("style",Le??""),h.selectAll(".row-rect-even path").attr("style",l)}return e.intersect=function(ge){return mt.rect(e,ge)},h}R(NO,"erBox");async function e0(n,e,t,i=0,r=0,s=[],o=""){const a=n.insert("g").attr("class",`label ${s.join(" ")}`).attr("transform",`translate(${i}, ${r})`).attr("style",o);e!==dq(e)&&(e=dq(e),e=e.replaceAll("<","&lt;").replaceAll(">","&gt;"));const l=a.node().appendChild(await Pf(a,e,{width:Vu(e,t)+100,style:o,useHtmlLabels:t.htmlLabels},t));if(e.includes("&lt;")||e.includes("&gt;")){let h=l.children[0];for(h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");h.childNodes[0];)h=h.childNodes[0],h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let c=l.getBBox();if(vs(t.htmlLabels)){const h=l.children[0];h.style.textAlign="start";const u=Ji(l);c=h.getBoundingClientRect(),u.attr("width",c.width),u.attr("height",c.height)}return c}R(e0,"addText");async function zse(n,e,t,i,r=t.class.padding??12){const s=i?0:3,o=n.insert("g").attr("class",Gt(e)).attr("id",e.domId||e.id);let a=null,l=null,c=null,h=null,u=0,d=0,g=0;if(a=o.insert("g").attr("class","annotation-group text"),e.annotations.length>0){const y=e.annotations[0];await ov(a,{text:`«${y}»`},0),u=a.node().getBBox().height}l=o.insert("g").attr("class","label-group text"),await ov(l,e,0,["font-weight: bolder"]);const p=l.node().getBBox();d=p.height,c=o.insert("g").attr("class","members-group text");let b=0;for(const y of e.members){const k=await ov(c,y,b,[y.parseClassifier()]);b+=k+s}g=c.node().getBBox().height,g<=0&&(g=r/2),h=o.insert("g").attr("class","methods-group text");let _=0;for(const y of e.methods){const k=await ov(h,y,_,[y.parseClassifier()]);_+=k+s}let w=o.node().getBBox();if(a!==null){const y=a.node().getBBox();a.attr("transform",`translate(${-y.width/2})`)}return l.attr("transform",`translate(${-p.width/2}, ${u})`),w=o.node().getBBox(),c.attr("transform",`translate(0, ${u+d+r*2})`),w=o.node().getBBox(),h.attr("transform",`translate(0, ${u+d+(g?g+r*4:r*2)})`),w=o.node().getBBox(),{shapeSvg:o,bbox:w}}R(zse,"textHelper");async function ov(n,e,t,i=[]){const r=n.insert("g").attr("class","label").attr("style",i.join("; ")),s=bo();let o="useHtmlLabels"in e?e.useHtmlLabels:vs(s.htmlLabels)??!0,a="";"text"in e?a=e.text:a=e.label,!o&&a.startsWith("\\")&&(a=a.substring(1)),U1(a)&&(o=!0);const l=await Pf(r,HP(cp(a)),{width:Vu(a,s)+50,classes:"markdown-node-label",useHtmlLabels:o},s);let c,h=1;if(o){const u=l.children[0],d=Ji(l);h=u.innerHTML.split("<br>").length,u.innerHTML.includes("</math>")&&(h+=u.innerHTML.split("<mrow>").length-1);const g=u.getElementsByTagName("img");if(g){const p=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...g].map(b=>new Promise(_=>{function w(){if(b.style.display="flex",b.style.flexDirection="column",p){const y=s.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,L=parseInt(y,10)*5+"px";b.style.minWidth=L,b.style.maxWidth=L}else b.style.width="100%";_(b)}R(w,"setupImage"),setTimeout(()=>{b.complete&&w()}),b.addEventListener("error",w),b.addEventListener("load",w)})))}c=u.getBoundingClientRect(),d.attr("width",c.width),d.attr("height",c.height)}else{i.includes("font-weight: bolder")&&Ji(l).selectAll("tspan").attr("font-weight",""),h=l.children.length;const u=l.children[0];(l.textContent===""||l.textContent.includes("&gt"))&&(u.textContent=a[0]+a.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),a[1]===" "&&(u.textContent=u.textContent[0]+" "+u.textContent.substring(1))),u.textContent==="undefined"&&(u.textContent=""),c=l.getBBox()}return r.attr("transform","translate(0,"+(-c.height/(2*h)+t)+")"),c.height}R(ov,"addText");async function Hse(n,e){const t=vn(),i=t.class.padding??12,r=i,s=e.useHtmlLabels??vs(t.htmlLabels)??!0,o=e;o.annotations=o.annotations??[],o.members=o.members??[],o.methods=o.methods??[];const{shapeSvg:a,bbox:l}=await zse(n,e,t,s,r),{labelStyles:c,nodeStyles:h}=Lt(e);e.labelStyle=c,e.cssStyles=o.styles||"";const u=o.styles?.join(";")||h||"";e.cssStyles||(e.cssStyles=u.replaceAll("!important","").split(";"));const d=o.members.length===0&&o.methods.length===0&&!t.class?.hideEmptyMembersBox,g=St.svg(a),p=kt(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const b=l.width;let _=l.height;o.members.length===0&&o.methods.length===0?_+=r:o.members.length>0&&o.methods.length===0&&(_+=r*2);const w=-b/2,y=-_/2,k=g.rectangle(w-i,y-i-(d?i:o.members.length===0&&o.methods.length===0?-i/2:0),b+2*i,_+2*i+(d?i*2:o.members.length===0&&o.methods.length===0?-i:0),p),L=a.insert(()=>k,":first-child");L.attr("class","basic label-container");const T=L.node().getBBox();a.selectAll(".text").each((B,G,H)=>{const q=Ji(H[G]),X=q.attr("transform");let z=0;if(X){const Y=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(X);Y&&(z=parseFloat(Y[2]))}let Q=z+y+i-(d?i:o.members.length===0&&o.methods.length===0?-i/2:0);s||(Q-=4);let te=w;(q.attr("class").includes("label-group")||q.attr("class").includes("annotation-group"))&&(te=-q.node()?.getBBox().width/2||0,a.selectAll("text").each(function(se,Y,ae){window.getComputedStyle(ae[Y]).textAnchor==="middle"&&(te=0)})),q.attr("transform",`translate(${te}, ${Q})`)});const N=a.select(".annotation-group").node().getBBox().height-(d?i/2:0)||0,D=a.select(".label-group").node().getBBox().height-(d?i/2:0)||0,O=a.select(".members-group").node().getBBox().height-(d?i/2:0)||0;if(o.members.length>0||o.methods.length>0||d){const B=g.line(T.x,N+D+y+i,T.x+T.width,N+D+y+i,p);a.insert(()=>B).attr("class","divider").attr("style",u)}if(d||o.members.length>0||o.methods.length>0){const B=g.line(T.x,N+D+O+y+r*2+i,T.x+T.width,N+D+O+y+i+r*2,p);a.insert(()=>B).attr("class","divider").attr("style",u)}if(o.look!=="handDrawn"&&a.selectAll("path").attr("style",u),L.select(":nth-child(2)").attr("style",u),a.selectAll(".divider").select("path").attr("style",u),e.labelStyle?a.selectAll("span").attr("style",e.labelStyle):a.selectAll("span").attr("style",u),!s){const B=RegExp(/color\s*:\s*([^;]*)/),G=B.exec(u);if(G){const H=G[0].replace("color","fill");a.selectAll("tspan").attr("style",H)}else if(c){const H=B.exec(c);if(H){const q=H[0].replace("color","fill");a.selectAll("tspan").attr("style",q)}}}return It(e,L),e.intersect=function(B){return mt.rect(e,B)},a}R(Hse,"classBox");async function Vse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const r=e,s=e,o=20,a=20,l="verifyMethod"in e,c=Gt(e),h=n.insert("g").attr("class",c).attr("id",e.domId??e.id);let u;l?u=await Bc(h,`&lt;&lt;${r.type}&gt;&gt;`,0,e.labelStyle):u=await Bc(h,"&lt;&lt;Element&gt;&gt;",0,e.labelStyle);let d=u;const g=await Bc(h,r.name,d,e.labelStyle+"; font-weight: bold;");if(d+=g+a,l){const N=await Bc(h,`${r.requirementId?`ID: ${r.requirementId}`:""}`,d,e.labelStyle);d+=N;const D=await Bc(h,`${r.text?`Text: ${r.text}`:""}`,d,e.labelStyle);d+=D;const O=await Bc(h,`${r.risk?`Risk: ${r.risk}`:""}`,d,e.labelStyle);d+=O,await Bc(h,`${r.verifyMethod?`Verification: ${r.verifyMethod}`:""}`,d,e.labelStyle)}else{const N=await Bc(h,`${s.type?`Type: ${s.type}`:""}`,d,e.labelStyle);d+=N,await Bc(h,`${s.docRef?`Doc Ref: ${s.docRef}`:""}`,d,e.labelStyle)}const p=(h.node()?.getBBox().width??200)+o,b=(h.node()?.getBBox().height??200)+o,_=-p/2,w=-b/2,y=St.svg(h),k=kt(e,{});e.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const L=y.rectangle(_,w,p,b,k),T=h.insert(()=>L,":first-child");if(T.attr("class","basic label-container").attr("style",i),h.selectAll(".label").each((N,D,O)=>{const B=Ji(O[D]),G=B.attr("transform");let H=0,q=0;if(G){const te=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(G);te&&(H=parseFloat(te[1]),q=parseFloat(te[2]))}const X=q-b/2;let z=_+o/2;(D===0||D===1)&&(z=H),B.attr("transform",`translate(${z}, ${X+o})`)}),d>u+g+a){const N=y.line(_,w+u+g+a,_+p,w+u+g+a,k);h.insert(()=>N).attr("style",i)}return It(e,T),e.intersect=function(N){return mt.rect(e,N)},h}R(Vse,"requirementBox");async function Bc(n,e,t,i=""){if(e==="")return 0;const r=n.insert("g").attr("class","label").attr("style",i),s=vn(),o=s.htmlLabels??!0,a=await Pf(r,HP(cp(e)),{width:Vu(e,s)+50,classes:"markdown-node-label",useHtmlLabels:o,style:i},s);let l;if(o){const c=a.children[0],h=Ji(a);l=c.getBoundingClientRect(),h.attr("width",l.width),h.attr("height",l.height)}else{const c=a.children[0];for(const h of c.children)h.textContent=h.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),i&&h.setAttribute("style",i);l=a.getBBox(),l.height+=6}return r.attr("transform",`translate(${-l.width/2},${-l.height/2+t})`),l.height}R(Bc,"addText");var lWe=R(n=>{switch(n){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function $se(n,e,{config:t}){const{labelStyles:i,nodeStyles:r}=Lt(e);e.labelStyle=i||"";const s=10,o=e.width;e.width=(e.width??200)-10;const{shapeSvg:a,bbox:l,label:c}=await ti(n,e,Gt(e)),h=e.padding||10;let u="",d;"ticket"in e&&e.ticket&&t?.kanban?.ticketBaseUrl&&(u=t?.kanban?.ticketBaseUrl.replace("#TICKET#",e.ticket),d=a.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",u).attr("target","_blank"));const g={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1};let p,b;d?{label:p,bbox:b}=await kD(d,"ticket"in e&&e.ticket||"",g):{label:p,bbox:b}=await kD(a,"ticket"in e&&e.ticket||"",g);const{label:_,bbox:w}=await kD(a,"assigned"in e&&e.assigned||"",g);e.width=o;const y=10,k=e?.width||0,L=Math.max(b.height,w.height)/2,T=Math.max(l.height+y*2,e?.height||0)+L,N=-k/2,D=-T/2;c.attr("transform","translate("+(h-k/2)+", "+(-L-l.height/2)+")"),p.attr("transform","translate("+(h-k/2)+", "+(-L+l.height/2)+")"),_.attr("transform","translate("+(h+k/2-w.width-2*s)+", "+(-L+l.height/2)+")");let O;const{rx:B,ry:G}=e,{cssStyles:H}=e;if(e.look==="handDrawn"){const q=St.svg(a),X=kt(e,{}),z=B||G?q.path(Of(N,D,k,T,B||0),X):q.rectangle(N,D,k,T,X);O=a.insert(()=>z,":first-child"),O.attr("class","basic label-container").attr("style",H||null)}else{O=a.insert("rect",":first-child"),O.attr("class","basic label-container __APA__").attr("style",r).attr("rx",B??5).attr("ry",G??5).attr("x",N).attr("y",D).attr("width",k).attr("height",T);const q="priority"in e&&e.priority;if(q){const X=a.append("line"),z=N+2,Q=D+Math.floor((B??0)/2),te=D+T-Math.floor((B??0)/2);X.attr("x1",z).attr("y1",Q).attr("x2",z).attr("y2",te).attr("stroke-width","4").attr("stroke",lWe(q))}}return It(e,O),e.height=T,e.intersect=function(q){return mt.rect(e,q)},a}R($se,"kanbanItem");async function jse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,halfPadding:o,label:a}=await ti(n,e,Gt(e)),l=s.width+10*o,c=s.height+8*o,h=.15*l,{cssStyles:u}=e,d=s.width+20,g=s.height+20,p=Math.max(l,d),b=Math.max(c,g);a.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`);let _;const w=`M0 0 
    a${h},${h} 1 0,0 ${p*.25},${-1*b*.1}
    a${h},${h} 1 0,0 ${p*.25},0
    a${h},${h} 1 0,0 ${p*.25},0
    a${h},${h} 1 0,0 ${p*.25},${b*.1}

    a${h},${h} 1 0,0 ${p*.15},${b*.33}
    a${h*.8},${h*.8} 1 0,0 0,${b*.34}
    a${h},${h} 1 0,0 ${-1*p*.15},${b*.33}

    a${h},${h} 1 0,0 ${-1*p*.25},${b*.15}
    a${h},${h} 1 0,0 ${-1*p*.25},0
    a${h},${h} 1 0,0 ${-1*p*.25},0
    a${h},${h} 1 0,0 ${-1*p*.25},${-1*b*.15}

    a${h},${h} 1 0,0 ${-1*p*.1},${-1*b*.33}
    a${h*.8},${h*.8} 1 0,0 0,${-1*b*.34}
    a${h},${h} 1 0,0 ${p*.1},${-1*b*.33}
  H0 V0 Z`;if(e.look==="handDrawn"){const y=St.svg(r),k=kt(e,{}),L=y.path(w,k);_=r.insert(()=>L,":first-child"),_.attr("class","basic label-container").attr("style",vo(u))}else _=r.insert("path",":first-child").attr("class","basic label-container").attr("style",i).attr("d",w);return _.attr("transform",`translate(${-p/2}, ${-b/2})`),It(e,_),e.calcIntersect=function(y,k){return mt.rect(y,k)},e.intersect=function(y){return ze.info("Bang intersect",e,y),mt.rect(e,y)},r}R(jse,"bang");async function Use(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,halfPadding:o,label:a}=await ti(n,e,Gt(e)),l=s.width+2*o,c=s.height+2*o,h=.15*l,u=.25*l,d=.35*l,g=.2*l,{cssStyles:p}=e;let b;const _=`M0 0 
    a${h},${h} 0 0,1 ${l*.25},${-1*l*.1}
    a${d},${d} 1 0,1 ${l*.4},${-1*l*.1}
    a${u},${u} 1 0,1 ${l*.35},${l*.2}

    a${h},${h} 1 0,1 ${l*.15},${c*.35}
    a${g},${g} 1 0,1 ${-1*l*.15},${c*.65}

    a${u},${h} 1 0,1 ${-1*l*.25},${l*.15}
    a${d},${d} 1 0,1 ${-1*l*.5},0
    a${h},${h} 1 0,1 ${-1*l*.25},${-1*l*.15}

    a${h},${h} 1 0,1 ${-1*l*.1},${-1*c*.35}
    a${g},${g} 1 0,1 ${l*.1},${-1*c*.65}
  H0 V0 Z`;if(e.look==="handDrawn"){const w=St.svg(r),y=kt(e,{}),k=w.path(_,y);b=r.insert(()=>k,":first-child"),b.attr("class","basic label-container").attr("style",vo(p))}else b=r.insert("path",":first-child").attr("class","basic label-container").attr("style",i).attr("d",_);return a.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`),b.attr("transform",`translate(${-l/2}, ${-c/2})`),It(e,b),e.calcIntersect=function(w,y){return mt.rect(w,y)},e.intersect=function(w){return ze.info("Cloud intersect",e,w),mt.rect(e,w)},r}R(Use,"cloud");async function qse(n,e){const{labelStyles:t,nodeStyles:i}=Lt(e);e.labelStyle=t;const{shapeSvg:r,bbox:s,halfPadding:o,label:a}=await ti(n,e,Gt(e)),l=s.width+8*o,c=s.height+2*o,h=5,u=`
    M${-l/2} ${c/2-h}
    v${-c+2*h}
    q0,-${h} ${h},-${h}
    h${l-2*h}
    q${h},0 ${h},${h}
    v${c-2*h}
    q0,${h} -${h},${h}
    h${-l+2*h}
    q-${h},0 -${h},-${h}
    Z
  `,d=r.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+e.type).attr("style",i).attr("d",u);return r.append("line").attr("class","node-line-").attr("x1",-l/2).attr("y1",c/2).attr("x2",l/2).attr("y2",c/2),a.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`),r.append(()=>a.node()),It(e,d),e.calcIntersect=function(g,p){return mt.rect(g,p)},e.intersect=function(g){return mt.rect(e,g)},r}R(qse,"defaultMindmapNode");async function Gse(n,e){const t={padding:e.padding??0};return IO(n,e,t)}R(Gse,"mindmapCircle");var cWe=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:xse},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:yse},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:kse},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:Ese},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:Kre},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:IO},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:jse},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:Use},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:_se},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:tse},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:use},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:hse},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:Rse},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:lse},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:Zre},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:Mse},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:zre},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:Cse},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:Dse},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:Tse},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:Jre},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:ise},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:jre},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:Ure},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:qre},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:dse},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:Bse},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:ese},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:Ase},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:fse},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:Gre},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:Yre},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:Ose},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:Wse},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:Xre},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:Pse},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:Qre},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:Sse},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:pse},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:mse},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:Wre},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:$re},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:Nse},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:Ise},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:Fse},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:vse},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:gse}],hWe=R(()=>{const e=[...Object.entries({state:Lse,choice:Hre,note:bse,rectWithTitle:wse,labelRect:cse,iconSquare:ose,iconCircle:rse,icon:nse,iconRounded:sse,imageSquare:ase,anchor:Fre,kanbanItem:$se,mindmapCircle:Gse,defaultMindmapNode:qse,classBox:Hse,erBox:NO,requirementBox:Vse}),...cWe.flatMap(t=>[t.shortName,..."aliases"in t?t.aliases:[],..."internalAliases"in t?t.internalAliases:[]].map(r=>[r,t.handler]))];return Object.fromEntries(e)},"generateShapeMap"),Kse=hWe();function uWe(n){return n in Kse}R(uWe,"isValidShape");var D3=new Map;async function Yse(n,e,t){let i,r;e.shape==="rect"&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");const s=e.shape?Kse[e.shape]:void 0;if(!s)throw new Error(`No such shape: ${e.shape}. Please check your syntax.`);if(e.link){let o;t.config.securityLevel==="sandbox"?o="_top":e.linkTarget&&(o=e.linkTarget||"_blank"),i=n.insert("svg:a").attr("xlink:href",e.link).attr("target",o??null),r=await s(i,e,t)}else r=await s(n,e,t),i=r;return e.tooltip&&r.attr("title",e.tooltip),D3.set(e.id,i),e.haveCallback&&i.attr("class",i.attr("class")+" clickable"),i}R(Yse,"insertNode");var RUe=R((n,e)=>{D3.set(e.id,n)},"setNodeElem"),PUe=R(()=>{D3.clear()},"clear"),OUe=R(n=>{const e=D3.get(n.id);ze.trace("Transforming node",n.diff,n,"translate("+(n.x-n.width/2-5)+", "+n.width/2+")");const t=8,i=n.diff||0;return n.clusterNode?e.attr("transform","translate("+(n.x+i-n.width/2)+", "+(n.y-n.height/2-t)+")"):e.attr("transform","translate("+n.x+", "+n.y+")"),i},"positionNode"),dWe=R((n,e,t,i,r,s)=>{e.arrowTypeStart&&wG(n,"start",e.arrowTypeStart,t,i,r,s),e.arrowTypeEnd&&wG(n,"end",e.arrowTypeEnd,t,i,r,s)},"addEdgeMarkers"),fWe={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},wG=R((n,e,t,i,r,s,o)=>{const a=fWe[t];if(!a){ze.warn(`Unknown arrow type: ${t}`);return}const l=a.type,h=`${r}_${s}-${l}${e==="start"?"Start":"End"}`;if(o&&o.trim()!==""){const u=o.replace(/[^\dA-Za-z]/g,"_"),d=`${h}_${u}`;if(!document.getElementById(d)){const g=document.getElementById(h);if(g){const p=g.cloneNode(!0);p.id=d,p.querySelectorAll("path, circle, line").forEach(_=>{_.setAttribute("stroke",o),a.fill&&_.setAttribute("fill",o)}),g.parentNode?.appendChild(p)}}n.attr(`marker-${e}`,`url(${i}#${d})`)}else n.attr(`marker-${e}`,`url(${i}#${h})`)},"addEdgeMarker"),Y4=new Map,$s=new Map,BUe=R(()=>{Y4.clear(),$s.clear()},"clear"),LS=R(n=>n?n.reduce((t,i)=>t+";"+i,""):"","getLabelStyles"),gWe=R(async(n,e)=>{let t=vs(vn().flowchart.htmlLabels);const{labelStyles:i}=Lt(e);e.labelStyle=i;const r=await Pf(n,e.label,{style:e.labelStyle,useHtmlLabels:t,addSvgBackground:!0,isNode:!1});ze.info("abc82",e,e.labelType);const s=n.insert("g").attr("class","edgeLabel"),o=s.insert("g").attr("class","label").attr("data-id",e.id);o.node().appendChild(r);let a=r.getBBox();if(t){const c=r.children[0],h=Ji(r);a=c.getBoundingClientRect(),h.attr("width",a.width),h.attr("height",a.height)}o.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),Y4.set(e.id,s),e.width=a.width,e.height=a.height;let l;if(e.startLabelLeft){const c=await Qg(e.startLabelLeft,LS(e.labelStyle)),h=n.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");l=u.node().appendChild(c);const d=c.getBBox();u.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),$s.get(e.id)||$s.set(e.id,{}),$s.get(e.id).startLeft=h,av(l,e.startLabelLeft)}if(e.startLabelRight){const c=await Qg(e.startLabelRight,LS(e.labelStyle)),h=n.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");l=h.node().appendChild(c),u.node().appendChild(c);const d=c.getBBox();u.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),$s.get(e.id)||$s.set(e.id,{}),$s.get(e.id).startRight=h,av(l,e.startLabelRight)}if(e.endLabelLeft){const c=await Qg(e.endLabelLeft,LS(e.labelStyle)),h=n.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");l=u.node().appendChild(c);const d=c.getBBox();u.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),h.node().appendChild(c),$s.get(e.id)||$s.set(e.id,{}),$s.get(e.id).endLeft=h,av(l,e.endLabelLeft)}if(e.endLabelRight){const c=await Qg(e.endLabelRight,LS(e.labelStyle)),h=n.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");l=u.node().appendChild(c);const d=c.getBBox();u.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),h.node().appendChild(c),$s.get(e.id)||$s.set(e.id,{}),$s.get(e.id).endRight=h,av(l,e.endLabelRight)}return r},"insertEdgeLabel");function av(n,e){vn().flowchart.htmlLabels&&n&&(n.style.width=e.length*9+"px",n.style.height="12px")}R(av,"setTerminalWidth");var mWe=R((n,e)=>{ze.debug("Moving label abc88 ",n.id,n.label,Y4.get(n.id),e);let t=e.updatedPath?e.updatedPath:e.originalPath;const i=vn(),{subGraphTitleTotalMargin:r}=aO(i);if(n.label){const s=Y4.get(n.id);let o=n.x,a=n.y;if(t){const l=oc.calcLabelPosition(t);ze.debug("Moving label "+n.label+" from (",o,",",a,") to (",l.x,",",l.y,") abc88"),e.updatedPath&&(o=l.x,a=l.y)}s.attr("transform",`translate(${o}, ${a+r/2})`)}if(n.startLabelLeft){const s=$s.get(n.id).startLeft;let o=n.x,a=n.y;if(t){const l=oc.calcTerminalLabelPosition(n.arrowTypeStart?10:0,"start_left",t);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(n.startLabelRight){const s=$s.get(n.id).startRight;let o=n.x,a=n.y;if(t){const l=oc.calcTerminalLabelPosition(n.arrowTypeStart?10:0,"start_right",t);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(n.endLabelLeft){const s=$s.get(n.id).endLeft;let o=n.x,a=n.y;if(t){const l=oc.calcTerminalLabelPosition(n.arrowTypeEnd?10:0,"end_left",t);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(n.endLabelRight){const s=$s.get(n.id).endRight;let o=n.x,a=n.y;if(t){const l=oc.calcTerminalLabelPosition(n.arrowTypeEnd?10:0,"end_right",t);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}},"positionEdgeLabel"),pWe=R((n,e)=>{const t=n.x,i=n.y,r=Math.abs(e.x-t),s=Math.abs(e.y-i),o=n.width/2,a=n.height/2;return r>=o||s>=a},"outsideNode"),bWe=R((n,e,t)=>{ze.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(t)}
  node        : x:${n.x} y:${n.y} w:${n.width} h:${n.height}`);const i=n.x,r=n.y,s=Math.abs(i-t.x),o=n.width/2;let a=t.x<e.x?o-s:o+s;const l=n.height/2,c=Math.abs(e.y-t.y),h=Math.abs(e.x-t.x);if(Math.abs(r-e.y)*o>Math.abs(i-e.x)*l){let u=t.y<e.y?e.y-l-r:r-l-e.y;a=h*u/c;const d={x:t.x<e.x?t.x+a:t.x-h+a,y:t.y<e.y?t.y+c-u:t.y-c+u};return a===0&&(d.x=e.x,d.y=e.y),h===0&&(d.x=e.x),c===0&&(d.y=e.y),ze.debug(`abc89 top/bottom calc, Q ${c}, q ${u}, R ${h}, r ${a}`,d),d}else{t.x<e.x?a=e.x-o-i:a=i-o-e.x;let u=c*a/h,d=t.x<e.x?t.x+h-a:t.x-h+a,g=t.y<e.y?t.y+u:t.y-u;return ze.debug(`sides calc abc89, Q ${c}, q ${u}, R ${h}, r ${a}`,{_x:d,_y:g}),a===0&&(d=e.x,g=e.y),h===0&&(d=e.x),c===0&&(g=e.y),{x:d,y:g}}},"intersection"),yG=R((n,e)=>{ze.warn("abc88 cutPathAtIntersect",n,e);let t=[],i=n[0],r=!1;return n.forEach(s=>{if(ze.info("abc88 checking point",s,e),!pWe(e,s)&&!r){const o=bWe(e,i,s);ze.debug("abc88 inside",s,i,o),ze.debug("abc88 intersection",o,e);let a=!1;t.forEach(l=>{a=a||l.x===o.x&&l.y===o.y}),t.some(l=>l.x===o.x&&l.y===o.y)?ze.warn("abc88 no intersect",o,t):t.push(o),r=!0}else ze.warn("abc88 outside",s,i),i=s,r||t.push(s)}),ze.debug("returning points",t),t},"cutPathAtIntersect");function Zse(n){const e=[],t=[];for(let i=1;i<n.length-1;i++){const r=n[i-1],s=n[i],o=n[i+1];(r.x===s.x&&s.y===o.y&&Math.abs(s.x-o.x)>5&&Math.abs(s.y-r.y)>5||r.y===s.y&&s.x===o.x&&Math.abs(s.x-r.x)>5&&Math.abs(s.y-o.y)>5)&&(e.push(s),t.push(i))}return{cornerPoints:e,cornerPointPositions:t}}R(Zse,"extractCornerPoints");var CG=R(function(n,e,t){const i=e.x-n.x,r=e.y-n.y,s=Math.sqrt(i*i+r*r),o=t/s;return{x:e.x-o*i,y:e.y-o*r}},"findAdjacentPoint"),_We=R(function(n){const{cornerPointPositions:e}=Zse(n),t=[];for(let i=0;i<n.length;i++)if(e.includes(i)){const r=n[i-1],s=n[i+1],o=n[i],a=CG(r,o,5),l=CG(s,o,5),c=l.x-a.x,h=l.y-a.y;t.push(a);const u=Math.sqrt(2)*2;let d={x:o.x,y:o.y};if(Math.abs(s.x-r.x)>10&&Math.abs(s.y-r.y)>=10){ze.debug("Corner point fixing",Math.abs(s.x-r.x),Math.abs(s.y-r.y));const g=5;o.x===a.x?d={x:c<0?a.x-g+u:a.x+g-u,y:h<0?a.y-u:a.y+u}:d={x:c<0?a.x-u:a.x+u,y:h<0?a.y-g+u:a.y+g-u}}else ze.debug("Corner point skipping fixing",Math.abs(s.x-r.x),Math.abs(s.y-r.y));t.push(d,l)}else t.push(n[i]);return t},"fixCorners"),vWe=R((n,e,t)=>{const i=n-e-t,r=2,s=2,o=r+s,a=Math.floor(i/o),l=Array(a).fill(`${r} ${s}`).join(" ");return`0 ${e} ${l} ${t}`},"generateDashArray"),wWe=R(function(n,e,t,i,r,s,o,a=!1){const{handDrawnSeed:l}=vn();let c=e.points,h=!1;const u=r;var d=s;const g=[];for(const z in e.cssCompiledStyles)Tne(z)||g.push(e.cssCompiledStyles[z]);ze.debug("UIO intersect check",e.points,d.x,u.x),d.intersect&&u.intersect&&!a&&(c=c.slice(1,e.points.length-1),c.unshift(u.intersect(c[0])),ze.debug("Last point UIO",e.start,"-->",e.end,c[c.length-1],d,d.intersect(c[c.length-1])),c.push(d.intersect(c[c.length-1])));const p=btoa(JSON.stringify(c));e.toCluster&&(ze.info("to cluster abc88",t.get(e.toCluster)),c=yG(e.points,t.get(e.toCluster).node),h=!0),e.fromCluster&&(ze.debug("from cluster abc88",t.get(e.fromCluster),JSON.stringify(c,null,2)),c=yG(c.reverse(),t.get(e.fromCluster).node).reverse(),h=!0);let b=c.filter(z=>!Number.isNaN(z.y));b=_We(b);let _=ux;switch(_=L4,e.curve){case"linear":_=L4;break;case"basis":_=ux;break;case"cardinal":_=Nte;break;case"bumpX":_=Lte;break;case"bumpY":_=Tte;break;case"catmullRom":_=Ate;break;case"monotoneX":_=Wte;break;case"monotoneY":_=zte;break;case"natural":_=Vte;break;case"step":_=$te;break;case"stepAfter":_=Ute;break;case"stepBefore":_=jte;break;default:_=ux}const{x:w,y}=_Re(e),k=tAe().x(w).y(y).curve(_);let L;switch(e.thickness){case"normal":L="edge-thickness-normal";break;case"thick":L="edge-thickness-thick";break;case"invisible":L="edge-thickness-invisible";break;default:L="edge-thickness-normal"}switch(e.pattern){case"solid":L+=" edge-pattern-solid";break;case"dotted":L+=" edge-pattern-dotted";break;case"dashed":L+=" edge-pattern-dashed";break;default:L+=" edge-pattern-solid"}let T,N=e.curve==="rounded"?Xse(Qse(b,e),5):k(b);const D=Array.isArray(e.style)?e.style:[e.style];let O=D.find(z=>z?.startsWith("stroke:")),B=!1;if(e.look==="handDrawn"){const z=St.svg(n);Object.assign([],b);const Q=z.path(N,{roughness:.3,seed:l});L+=" transition",T=Ji(Q).select("path").attr("id",e.id).attr("class"," "+L+(e.classes?" "+e.classes:"")).attr("style",D?D.reduce((se,Y)=>se+";"+Y,""):"");let te=T.attr("d");T.attr("d",te),n.node().appendChild(T.node())}else{const z=g.join(";"),Q=D?D.reduce((ge,Le)=>ge+Le+";",""):"";let te="";e.animate&&(te=" edge-animation-fast"),e.animation&&(te=" edge-animation-"+e.animation);const se=(z?z+";"+Q+";":Q)+";"+(D?D.reduce((ge,Le)=>ge+";"+Le,""):"");T=n.append("path").attr("d",N).attr("id",e.id).attr("class"," "+L+(e.classes?" "+e.classes:"")+(te??"")).attr("style",se),O=se.match(/stroke:([^;]+)/)?.[1],B=e.animate===!0||!!e.animation||z.includes("animation");const Y=T.node(),ae=typeof Y.getTotalLength=="function"?Y.getTotalLength():0,fe=Wq[e.arrowTypeStart]||0,J=Wq[e.arrowTypeEnd]||0;if(e.look==="neo"&&!B){const Le=`stroke-dasharray: ${e.pattern==="dotted"||e.pattern==="dashed"?vWe(ae,fe,J):`0 ${fe} ${ae-fe-J} ${J}`}; stroke-dashoffset: 0;`;T.attr("style",Le+T.attr("style"))}}T.attr("data-edge",!0),T.attr("data-et","edge"),T.attr("data-id",e.id),T.attr("data-points",p),e.showPoints&&b.forEach(z=>{n.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",z.x).attr("cy",z.y)});let G="";(vn().flowchart.arrowMarkerAbsolute||vn().state.arrowMarkerAbsolute)&&(G=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,G=G.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),ze.info("arrowTypeStart",e.arrowTypeStart),ze.info("arrowTypeEnd",e.arrowTypeEnd),dWe(T,e,G,o,i,O);const H=Math.floor(c.length/2),q=c[H];oc.isLabelCoordinateInPath(q,T.attr("d"))||(h=!0);let X={};return h&&(X.updatedPath=c),X.originalPath=e.points,X},"insertEdge");function Xse(n,e){if(n.length<2)return"";let t="";const i=n.length,r=1e-5;for(let s=0;s<i;s++){const o=n[s],a=n[s-1],l=n[s+1];if(s===0)t+=`M${o.x},${o.y}`;else if(s===i-1)t+=`L${o.x},${o.y}`;else{const c=o.x-a.x,h=o.y-a.y,u=l.x-o.x,d=l.y-o.y,g=Math.hypot(c,h),p=Math.hypot(u,d);if(g<r||p<r){t+=`L${o.x},${o.y}`;continue}const b=c/g,_=h/g,w=u/p,y=d/p,k=b*w+_*y,L=Math.max(-1,Math.min(1,k)),T=Math.acos(L);if(T<r||Math.abs(Math.PI-T)<r){t+=`L${o.x},${o.y}`;continue}const N=Math.min(e/Math.sin(T/2),g/2,p/2),D=o.x-b*N,O=o.y-_*N,B=o.x+w*N,G=o.y+y*N;t+=`L${D},${O}`,t+=`Q${o.x},${o.y} ${B},${G}`}}return t}R(Xse,"generateRoundedPath");function bM(n,e){if(!n||!e)return{angle:0,deltaX:0,deltaY:0};const t=e.x-n.x,i=e.y-n.y;return{angle:Math.atan2(i,t),deltaX:t,deltaY:i}}R(bM,"calculateDeltaAndAngle");function Qse(n,e){const t=n.map(r=>({...r}));if(n.length>=2&&co[e.arrowTypeStart]){const r=co[e.arrowTypeStart],s=n[0],o=n[1],{angle:a}=bM(s,o),l=r*Math.cos(a),c=r*Math.sin(a);t[0].x=s.x+l,t[0].y=s.y+c}const i=n.length;if(i>=2&&co[e.arrowTypeEnd]){const r=co[e.arrowTypeEnd],s=n[i-1],o=n[i-2],{angle:a}=bM(o,s),l=r*Math.cos(a),c=r*Math.sin(a);t[i-1].x=s.x-l,t[i-1].y=s.y-c}return t}R(Qse,"applyMarkerOffsetsToPoints");var yWe=R((n,e,t,i)=>{e.forEach(r=>{BWe[r](n,t,i)})},"insertMarkers"),CWe=R((n,e,t)=>{ze.trace("Making markers for ",t),n.append("defs").append("marker").attr("id",t+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),n.append("defs").append("marker").attr("id",t+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),SWe=R((n,e,t)=>{n.append("defs").append("marker").attr("id",t+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),n.append("defs").append("marker").attr("id",t+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),xWe=R((n,e,t)=>{n.append("defs").append("marker").attr("id",t+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),n.append("defs").append("marker").attr("id",t+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),kWe=R((n,e,t)=>{n.append("defs").append("marker").attr("id",t+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),n.append("defs").append("marker").attr("id",t+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),LWe=R((n,e,t)=>{n.append("defs").append("marker").attr("id",t+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),n.append("defs").append("marker").attr("id",t+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),TWe=R((n,e,t)=>{n.append("marker").attr("id",t+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),n.append("marker").attr("id",t+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),DWe=R((n,e,t)=>{n.append("marker").attr("id",t+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),n.append("marker").attr("id",t+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),EWe=R((n,e,t)=>{n.append("marker").attr("id",t+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),n.append("marker").attr("id",t+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),IWe=R((n,e,t)=>{n.append("defs").append("marker").attr("id",t+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),NWe=R((n,e,t)=>{n.append("defs").append("marker").attr("id",t+"_"+e+"-onlyOneStart").attr("class","marker onlyOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),n.append("defs").append("marker").attr("id",t+"_"+e+"-onlyOneEnd").attr("class","marker onlyOne "+e).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),MWe=R((n,e,t)=>{const i=n.append("defs").append("marker").attr("id",t+"_"+e+"-zeroOrOneStart").attr("class","marker zeroOrOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),i.append("path").attr("d","M9,0 L9,18");const r=n.append("defs").append("marker").attr("id",t+"_"+e+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+e).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),r.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),AWe=R((n,e,t)=>{n.append("defs").append("marker").attr("id",t+"_"+e+"-oneOrMoreStart").attr("class","marker oneOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),n.append("defs").append("marker").attr("id",t+"_"+e+"-oneOrMoreEnd").attr("class","marker oneOrMore "+e).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),RWe=R((n,e,t)=>{const i=n.append("defs").append("marker").attr("id",t+"_"+e+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),i.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const r=n.append("defs").append("marker").attr("id",t+"_"+e+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+e).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),r.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),PWe=R((n,e,t)=>{n.append("defs").append("marker").attr("id",t+"_"+e+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),OWe=R((n,e,t)=>{const i=n.append("defs").append("marker").attr("id",t+"_"+e+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");i.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),i.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),i.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),BWe={extension:CWe,composition:SWe,aggregation:xWe,dependency:kWe,lollipop:LWe,point:TWe,circle:DWe,cross:EWe,barb:IWe,only_one:NWe,zero_or_one:MWe,one_or_more:AWe,zero_or_more:RWe,requirement_arrow:PWe,requirement_contains:OWe},FWe=yWe,WWe={common:mb,getConfig:bo,insertCluster:GFe,insertEdge:wWe,insertEdgeLabel:gWe,insertMarkers:FWe,insertNode:Yse,interpolateToCurve:dO,labelHelper:ti,log:ze,positionEdgeLabel:mWe},gy={},Jse=R(n=>{for(const e of n)gy[e.name]=e},"registerLayoutLoaders"),zWe=R(()=>{Jse([{name:"dagre",loader:R(async()=>await fn(()=>import("./dagre-6UL2VRFP-Dsg8uJVc.js"),__vite__mapDeps([0,1,2,3,4,5])),"loader")},{name:"cose-bilkent",loader:R(async()=>await fn(()=>import("./cose-bilkent-S5V4N54A-Dy9Uvf0B.js"),__vite__mapDeps([6,7])),"loader")}])},"registerDefaultLayoutLoaders");zWe();var FUe=R(async(n,e)=>{if(!(n.layoutAlgorithm in gy))throw new Error(`Unknown layout algorithm: ${n.layoutAlgorithm}`);const t=gy[n.layoutAlgorithm];return(await t.loader()).render(n,e,WWe,{algorithm:t.algorithm})},"render"),WUe=R((n="",{fallback:e="dagre"}={})=>{if(n in gy)return n;if(e in gy)return ze.warn(`Layout algorithm ${n} is not registered. Using ${e} as fallback.`),e;throw new Error(`Both layout algorithms ${n} and ${e} are not registered.`)},"getRegisteredLayoutAlgorithm"),eoe="comm",toe="rule",ioe="decl",HWe="@import",VWe="@namespace",$We="@keyframes",jWe="@layer",noe=Math.abs,MO=String.fromCharCode;function roe(n){return n.trim()}function px(n,e,t){return n.replace(e,t)}function UWe(n,e,t){return n.indexOf(e,t)}function l1(n,e){return n.charCodeAt(e)|0}function Z1(n,e,t){return n.slice(e,t)}function qc(n){return n.length}function qWe(n){return n.length}function TS(n,e){return e.push(n),n}var E3=1,X1=1,soe=0,Nl=0,Jr=0,wb="";function AO(n,e,t,i,r,s,o,a){return{value:n,root:e,parent:t,type:i,props:r,children:s,line:E3,column:X1,length:o,return:"",siblings:a}}function GWe(){return Jr}function KWe(){return Jr=Nl>0?l1(wb,--Nl):0,X1--,Jr===10&&(X1=1,E3--),Jr}function dc(){return Jr=Nl<soe?l1(wb,Nl++):0,X1++,Jr===10&&(X1=1,E3++),Jr}function Jd(){return l1(wb,Nl)}function bx(){return Nl}function I3(n,e){return Z1(wb,n,e)}function my(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function YWe(n){return E3=X1=1,soe=qc(wb=n),Nl=0,[]}function ZWe(n){return wb="",n}function LD(n){return roe(I3(Nl-1,_M(n===91?n+2:n===40?n+1:n)))}function XWe(n){for(;(Jr=Jd())&&Jr<33;)dc();return my(n)>2||my(Jr)>3?"":" "}function QWe(n,e){for(;--e&&dc()&&!(Jr<48||Jr>102||Jr>57&&Jr<65||Jr>70&&Jr<97););return I3(n,bx()+(e<6&&Jd()==32&&dc()==32))}function _M(n){for(;dc();)switch(Jr){case n:return Nl;case 34:case 39:n!==34&&n!==39&&_M(Jr);break;case 40:n===41&&_M(n);break;case 92:dc();break}return Nl}function JWe(n,e){for(;dc()&&n+Jr!==57;)if(n+Jr===84&&Jd()===47)break;return"/*"+I3(e,Nl-1)+"*"+MO(n===47?n:dc())}function eze(n){for(;!my(Jd());)dc();return I3(n,Nl)}function tze(n){return ZWe(_x("",null,null,null,[""],n=YWe(n),0,[0],n))}function _x(n,e,t,i,r,s,o,a,l){for(var c=0,h=0,u=o,d=0,g=0,p=0,b=1,_=1,w=1,y=0,k="",L=r,T=s,N=i,D=k;_;)switch(p=y,y=dc()){case 40:if(p!=108&&l1(D,u-1)==58){UWe(D+=px(LD(y),"&","&\f"),"&\f",noe(c?a[c-1]:0))!=-1&&(w=-1);break}case 34:case 39:case 91:D+=LD(y);break;case 9:case 10:case 13:case 32:D+=XWe(p);break;case 92:D+=QWe(bx()-1,7);continue;case 47:switch(Jd()){case 42:case 47:TS(ize(JWe(dc(),bx()),e,t,l),l),(my(p||1)==5||my(Jd()||1)==5)&&qc(D)&&Z1(D,-1,void 0)!==" "&&(D+=" ");break;default:D+="/"}break;case 123*b:a[c++]=qc(D)*w;case 125*b:case 59:case 0:switch(y){case 0:case 125:_=0;case 59+h:w==-1&&(D=px(D,/\f/g,"")),g>0&&(qc(D)-u||b===0&&p===47)&&TS(g>32?xG(D+";",i,t,u-1,l):xG(px(D," ","")+";",i,t,u-2,l),l);break;case 59:D+=";";default:if(TS(N=SG(D,e,t,c,h,r,a,k,L=[],T=[],u,s),s),y===123)if(h===0)_x(D,e,N,N,L,s,u,a,T);else{switch(d){case 99:if(l1(D,3)===110)break;case 108:if(l1(D,2)===97)break;default:h=0;case 100:case 109:case 115:}h?_x(n,N,N,i&&TS(SG(n,N,N,0,0,r,a,k,r,L=[],u,T),T),r,T,u,a,i?L:T):_x(D,N,N,N,[""],T,0,a,T)}}c=h=g=0,b=w=1,k=D="",u=o;break;case 58:u=1+qc(D),g=p;default:if(b<1){if(y==123)--b;else if(y==125&&b++==0&&KWe()==125)continue}switch(D+=MO(y),y*b){case 38:w=h>0?1:(D+="\f",-1);break;case 44:a[c++]=(qc(D)-1)*w,w=1;break;case 64:Jd()===45&&(D+=LD(dc())),d=Jd(),h=u=qc(k=D+=eze(bx())),y++;break;case 45:p===45&&qc(D)==2&&(b=0)}}return s}function SG(n,e,t,i,r,s,o,a,l,c,h,u){for(var d=r-1,g=r===0?s:[""],p=qWe(g),b=0,_=0,w=0;b<i;++b)for(var y=0,k=Z1(n,d+1,d=noe(_=o[b])),L=n;y<p;++y)(L=roe(_>0?g[y]+" "+k:px(k,/&\f/g,g[y])))&&(l[w++]=L);return AO(n,e,t,r===0?toe:a,l,c,h,u)}function ize(n,e,t,i){return AO(n,e,t,eoe,MO(GWe()),Z1(n,2,-2),0,i)}function xG(n,e,t,i,r){return AO(n,e,t,ioe,Z1(n,0,i),Z1(n,i+1,-1),i,r)}function vM(n,e){for(var t="",i=0;i<n.length;i++)t+=e(n[i],i,n,e)||"";return t}function nze(n,e,t,i){switch(n.type){case jWe:if(n.children.length)break;case HWe:case VWe:case ioe:return n.return=n.return||n.value;case eoe:return"";case $We:return n.return=n.value+"{"+vM(n.children,i)+"}";case toe:if(!qc(n.value=n.props.join(",")))return""}return qc(t=vM(n.children,i))?n.return=n.value+"{"+t+"}":""}var rze=Nne(Object.keys,Object),sze=Object.prototype,oze=sze.hasOwnProperty;function aze(n){if(!v3(n))return rze(n);var e=[];for(var t in Object(n))oze.call(n,t)&&t!="constructor"&&e.push(t);return e}var wM=lp(Sh,"DataView"),yM=lp(Sh,"Promise"),CM=lp(Sh,"Set"),SM=lp(Sh,"WeakMap"),kG="[object Map]",lze="[object Object]",LG="[object Promise]",TG="[object Set]",DG="[object WeakMap]",EG="[object DataView]",cze=ap(wM),hze=ap(dy),uze=ap(yM),dze=ap(CM),fze=ap(SM),vg=bb;(wM&&vg(new wM(new ArrayBuffer(1)))!=EG||dy&&vg(new dy)!=kG||yM&&vg(yM.resolve())!=LG||CM&&vg(new CM)!=TG||SM&&vg(new SM)!=DG)&&(vg=function(n){var e=bb(n),t=e==lze?n.constructor:void 0,i=t?ap(t):"";if(i)switch(i){case cze:return EG;case hze:return kG;case uze:return LG;case dze:return TG;case fze:return DG}return e});var gze="[object Map]",mze="[object Set]",pze=Object.prototype,bze=pze.hasOwnProperty;function IG(n){if(n==null)return!0;if(w3(n)&&(W4(n)||typeof n=="string"||typeof n.splice=="function"||hO(n)||uO(n)||F4(n)))return!n.length;var e=vg(n);if(e==gze||e==mze)return!n.size;if(v3(n))return!aze(n).length;for(var t in n)if(bze.call(n,t))return!1;return!0}var ooe="c4",_ze=R(n=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(n),"detector"),vze=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./c4Diagram-YG6GDRKO-B44pgAMZ.js");return{diagram:e}},__vite__mapDeps([8,9]));return{id:ooe,diagram:n}},"loader"),wze={id:ooe,detector:_ze,loader:vze},yze=wze,aoe="flowchart",Cze=R((n,e)=>e?.flowchart?.defaultRenderer==="dagre-wrapper"||e?.flowchart?.defaultRenderer==="elk"?!1:/^\s*graph/.test(n),"detector"),Sze=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./flowDiagram-NV44I4VS-B2L4_VHy.js");return{diagram:e}},__vite__mapDeps([10,11,12,13,14]));return{id:aoe,diagram:n}},"loader"),xze={id:aoe,detector:Cze,loader:Sze},kze=xze,loe="flowchart-v2",Lze=R((n,e)=>e?.flowchart?.defaultRenderer==="dagre-d3"?!1:(e?.flowchart?.defaultRenderer==="elk"&&(e.layout="elk"),/^\s*graph/.test(n)&&e?.flowchart?.defaultRenderer==="dagre-wrapper"?!0:/^\s*flowchart/.test(n)),"detector"),Tze=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./flowDiagram-NV44I4VS-B2L4_VHy.js");return{diagram:e}},__vite__mapDeps([10,11,12,13,14]));return{id:loe,diagram:n}},"loader"),Dze={id:loe,detector:Lze,loader:Tze},Eze=Dze,coe="er",Ize=R(n=>/^\s*erDiagram/.test(n),"detector"),Nze=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./erDiagram-Q2GNP2WA-DVExqMHI.js");return{diagram:e}},__vite__mapDeps([15,12,13,14]));return{id:coe,diagram:n}},"loader"),Mze={id:coe,detector:Ize,loader:Nze},Aze=Mze,hoe="gitGraph",Rze=R(n=>/^\s*gitGraph/.test(n),"detector"),Pze=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./gitGraphDiagram-NY62KEGX-BlDN5ExZ.js");return{diagram:e}},__vite__mapDeps([16,17,18,19,2,4,5]));return{id:hoe,diagram:n}},"loader"),Oze={id:hoe,detector:Rze,loader:Pze},Bze=Oze,uoe="gantt",Fze=R(n=>/^\s*gantt/.test(n),"detector"),Wze=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./ganttDiagram-LVOFAZNH-DSTV9fnp.js");return{diagram:e}},__vite__mapDeps([20,21,22,23]));return{id:uoe,diagram:n}},"loader"),zze={id:uoe,detector:Fze,loader:Wze},Hze=zze,doe="info",Vze=R(n=>/^\s*info/.test(n),"detector"),$ze=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./infoDiagram-F6ZHWCRC-B3f_s5eP.js");return{diagram:e}},__vite__mapDeps([24,19,2,4,5]));return{id:doe,diagram:n}},"loader"),jze={id:doe,detector:Vze,loader:$ze},foe="pie",Uze=R(n=>/^\s*pie/.test(n),"detector"),qze=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./pieDiagram-ADFJNKIX-kfr74Dse.js");return{diagram:e}},__vite__mapDeps([25,17,19,2,4,5,26,27,22]));return{id:foe,diagram:n}},"loader"),Gze={id:foe,detector:Uze,loader:qze},goe="quadrantChart",Kze=R(n=>/^\s*quadrantChart/.test(n),"detector"),Yze=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./quadrantDiagram-AYHSOK5B-DiOm-VWt.js");return{diagram:e}},__vite__mapDeps([28,21,22,23]));return{id:goe,diagram:n}},"loader"),Zze={id:goe,detector:Kze,loader:Yze},Xze=Zze,moe="xychart",Qze=R(n=>/^\s*xychart(-beta)?/.test(n),"detector"),Jze=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./xychartDiagram-PRI3JC2R-CLqah65X.js");return{diagram:e}},__vite__mapDeps([29,22,27,21,23]));return{id:moe,diagram:n}},"loader"),eHe={id:moe,detector:Qze,loader:Jze},tHe=eHe,poe="requirement",iHe=R(n=>/^\s*requirement(Diagram)?/.test(n),"detector"),nHe=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./requirementDiagram-UZGBJVZJ-DJY9qHx_.js");return{diagram:e}},__vite__mapDeps([30,12,13]));return{id:poe,diagram:n}},"loader"),rHe={id:poe,detector:iHe,loader:nHe},sHe=rHe,boe="sequence",oHe=R(n=>/^\s*sequenceDiagram/.test(n),"detector"),aHe=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./sequenceDiagram-WL72ISMW-BvZRWlqs.js");return{diagram:e}},__vite__mapDeps([31,9,18]));return{id:boe,diagram:n}},"loader"),lHe={id:boe,detector:oHe,loader:aHe},cHe=lHe,_oe="class",hHe=R((n,e)=>e?.class?.defaultRenderer==="dagre-wrapper"?!1:/^\s*classDiagram/.test(n),"detector"),uHe=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./classDiagram-2ON5EDUG-Trut4UnC.js");return{diagram:e}},__vite__mapDeps([32,33,11,12,13]));return{id:_oe,diagram:n}},"loader"),dHe={id:_oe,detector:hHe,loader:uHe},fHe=dHe,voe="classDiagram",gHe=R((n,e)=>/^\s*classDiagram/.test(n)&&e?.class?.defaultRenderer==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(n),"detector"),mHe=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./classDiagram-v2-WZHVMYZB-Trut4UnC.js");return{diagram:e}},__vite__mapDeps([34,33,11,12,13]));return{id:voe,diagram:n}},"loader"),pHe={id:voe,detector:gHe,loader:mHe},bHe=pHe,woe="state",_He=R((n,e)=>e?.state?.defaultRenderer==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(n),"detector"),vHe=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./stateDiagram-FKZM4ZOC-DqYPSmei.js");return{diagram:e}},__vite__mapDeps([35,36,12,13,1,2,3,4]));return{id:woe,diagram:n}},"loader"),wHe={id:woe,detector:_He,loader:vHe},yHe=wHe,yoe="stateDiagram",CHe=R((n,e)=>!!(/^\s*stateDiagram-v2/.test(n)||/^\s*stateDiagram/.test(n)&&e?.state?.defaultRenderer==="dagre-wrapper"),"detector"),SHe=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./stateDiagram-v2-4FDKWEC3-3n8pXzal.js");return{diagram:e}},__vite__mapDeps([37,36,12,13]));return{id:yoe,diagram:n}},"loader"),xHe={id:yoe,detector:CHe,loader:SHe},kHe=xHe,Coe="journey",LHe=R(n=>/^\s*journey/.test(n),"detector"),THe=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./journeyDiagram-XKPGCS4Q-Cz7hhH7B.js");return{diagram:e}},__vite__mapDeps([38,9,11,26]));return{id:Coe,diagram:n}},"loader"),DHe={id:Coe,detector:LHe,loader:THe},EHe=DHe,IHe=R((n,e,t)=>{ze.debug(`rendering svg for syntax error
`);const i=hAe(e),r=i.append("g");i.attr("viewBox","0 0 2412 512"),Yee(i,100,512,!0),r.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),r.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),r.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),r.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),r.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),r.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),r.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),r.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${t}`)},"draw"),Soe={draw:IHe},NHe=Soe,MHe={db:{},renderer:Soe,parser:{parse:R(()=>{},"parse")}},AHe=MHe,xoe="flowchart-elk",RHe=R((n,e={})=>/^\s*flowchart-elk/.test(n)||/^\s*(flowchart|graph)/.test(n)&&e?.flowchart?.defaultRenderer==="elk"?(e.layout="elk",!0):!1,"detector"),PHe=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./flowDiagram-NV44I4VS-B2L4_VHy.js");return{diagram:e}},__vite__mapDeps([10,11,12,13,14]));return{id:xoe,diagram:n}},"loader"),OHe={id:xoe,detector:RHe,loader:PHe},BHe=OHe,koe="timeline",FHe=R(n=>/^\s*timeline/.test(n),"detector"),WHe=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./timeline-definition-IT6M3QCI-C2Zs-UYu.js");return{diagram:e}},__vite__mapDeps([39,26]));return{id:koe,diagram:n}},"loader"),zHe={id:koe,detector:FHe,loader:WHe},HHe=zHe,Loe="mindmap",VHe=R(n=>/^\s*mindmap/.test(n),"detector"),$He=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./mindmap-definition-VGOIOE7T-ButaXwcy.js");return{diagram:e}},__vite__mapDeps([40,12,13]));return{id:Loe,diagram:n}},"loader"),jHe={id:Loe,detector:VHe,loader:$He},UHe=jHe,Toe="kanban",qHe=R(n=>/^\s*kanban/.test(n),"detector"),GHe=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./kanban-definition-3W4ZIXB7-CGPshJnN.js");return{diagram:e}},__vite__mapDeps([41,11]));return{id:Toe,diagram:n}},"loader"),KHe={id:Toe,detector:qHe,loader:GHe},YHe=KHe,Doe="sankey",ZHe=R(n=>/^\s*sankey(-beta)?/.test(n),"detector"),XHe=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./sankeyDiagram-TZEHDZUN-cVz2lquE.js");return{diagram:e}},__vite__mapDeps([42,27,22]));return{id:Doe,diagram:n}},"loader"),QHe={id:Doe,detector:ZHe,loader:XHe},JHe=QHe,Eoe="packet",eVe=R(n=>/^\s*packet(-beta)?/.test(n),"detector"),tVe=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./diagram-S2PKOQOG-BHQPmPYJ.js");return{diagram:e}},__vite__mapDeps([43,17,19,2,4,5]));return{id:Eoe,diagram:n}},"loader"),iVe={id:Eoe,detector:eVe,loader:tVe},Ioe="radar",nVe=R(n=>/^\s*radar-beta/.test(n),"detector"),rVe=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./diagram-QEK2KX5R-DkC_UF7N.js");return{diagram:e}},__vite__mapDeps([44,17,19,2,4,5]));return{id:Ioe,diagram:n}},"loader"),sVe={id:Ioe,detector:nVe,loader:rVe},Noe="block",oVe=R(n=>/^\s*block(-beta)?/.test(n),"detector"),aVe=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./blockDiagram-VD42YOAC-HrhBsL45.js");return{diagram:e}},__vite__mapDeps([45,11,5,2,1,14]));return{id:Noe,diagram:n}},"loader"),lVe={id:Noe,detector:oVe,loader:aVe},cVe=lVe,Moe="architecture",hVe=R(n=>/^\s*architecture/.test(n),"detector"),uVe=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./architectureDiagram-VXUJARFQ-DU91e2LL.js");return{diagram:e}},__vite__mapDeps([46,17,19,2,4,5,7]));return{id:Moe,diagram:n}},"loader"),dVe={id:Moe,detector:hVe,loader:uVe},fVe=dVe,Aoe="treemap",gVe=R(n=>/^\s*treemap/.test(n),"detector"),mVe=R(async()=>{const{diagram:n}=await fn(async()=>{const{diagram:e}=await import("./diagram-PSM6KHXK-D0pvIhSd.js");return{diagram:e}},__vite__mapDeps([47,13,17,19,2,4,5,23,27,22]));return{id:Aoe,diagram:n}},"loader"),pVe={id:Aoe,detector:gVe,loader:mVe},NG=!1,N3=R(()=>{NG||(NG=!0,v4("error",AHe,n=>n.toLowerCase().trim()==="error"),v4("---",{db:{clear:R(()=>{},"clear")},styles:{},renderer:{draw:R(()=>{},"draw")},parser:{parse:R(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:R(()=>null,"init")},n=>n.toLowerCase().trimStart().startsWith("---")),IN(BHe,UHe,fVe),IN(yze,YHe,bHe,fHe,Aze,Hze,jze,Gze,sHe,cHe,Eze,kze,HHe,Bze,kHe,yHe,EHe,Xze,JHe,iVe,tHe,cVe,sVe,pVe))},"addDiagrams"),bVe=R(async()=>{ze.debug("Loading registered diagrams");const e=(await Promise.allSettled(Object.entries(Rm).map(async([t,{detector:i,loader:r}])=>{if(r)try{RN(t)}catch{try{const{diagram:s,id:o}=await r();v4(o,s,i)}catch(s){throw ze.error(`Failed to load external diagram with key ${t}. Removing from detectors.`),delete Rm[t],s}}}))).filter(t=>t.status==="rejected");if(e.length>0){ze.error(`Failed to load ${e.length} external diagrams`);for(const t of e)ze.error(t);throw new Error(`Failed to load ${e.length} external diagrams`)}},"loadRegisteredDiagrams"),_Ve="graphics-document document";function Roe(n,e){n.attr("role",_Ve),e!==""&&n.attr("aria-roledescription",e)}R(Roe,"setA11yDiagramInfo");function Poe(n,e,t,i){if(n.insert!==void 0){if(t){const r=`chart-desc-${i}`;n.attr("aria-describedby",r),n.insert("desc",":first-child").attr("id",r).text(t)}if(e){const r=`chart-title-${i}`;n.attr("aria-labelledby",r),n.insert("title",":first-child").attr("id",r).text(e)}}}R(Poe,"addSVGa11yTitleDescription");var _m,xM=(_m=class{constructor(e,t,i,r,s){this.type=e,this.text=t,this.db=i,this.parser=r,this.renderer=s}static async fromText(e,t={}){const i=bo(),r=PP(e,i);e=pBe(e)+`
`;try{RN(r)}catch{const c=z8e(r);if(!c)throw new Bee(`Diagram ${r} not found.`);const{id:h,diagram:u}=await c();v4(h,u)}const{db:s,parser:o,renderer:a,init:l}=RN(r);return o.parser&&(o.parser.yy=s),s.clear?.(),l?.(i),t.title&&s.setDiagramTitle?.(t.title),await o.parse(e),new _m(r,e,s,o,a)}async render(e,t){await this.renderer.draw(this.text,e,t,this)}getParser(){return this.parser}getType(){return this.type}},R(_m,"Diagram"),_m),MG=[],vVe=R(()=>{MG.forEach(n=>{n()}),MG=[]},"attachFunctions"),wVe=R(n=>n.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function Ooe(n){const e=n.match(Oee);if(!e)return{text:n,metadata:{}};let t=bRe(e[1],{schema:pRe})??{};t=typeof t=="object"&&!Array.isArray(t)?t:{};const i={};return t.displayMode&&(i.displayMode=t.displayMode.toString()),t.title&&(i.title=t.title.toString()),t.config&&(i.config=t.config),{text:n.slice(e[0].length),metadata:i}}R(Ooe,"extractFrontMatter");var yVe=R(n=>n.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(e,t,i)=>"<"+t+i.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),CVe=R(n=>{const{text:e,metadata:t}=Ooe(n),{displayMode:i,title:r,config:s={}}=t;return i&&(s.gantt||(s.gantt={}),s.gantt.displayMode=i),{title:r,config:s,text:e}},"processFrontmatter"),SVe=R(n=>{const e=oc.detectInit(n)??{},t=oc.detectDirective(n,"wrap");return Array.isArray(t)?e.wrap=t.some(({type:i})=>i==="wrap"):t?.type==="wrap"&&(e.wrap=!0),{text:nBe(n),directive:e}},"processDirectives");function RO(n){const e=yVe(n),t=CVe(e),i=SVe(t.text),r=bO(t.config,i.directive);return n=wVe(i.text),{code:n,title:t.title,config:r}}R(RO,"preprocessDiagram");function Boe(n){const e=new TextEncoder().encode(n),t=Array.from(e,i=>String.fromCodePoint(i)).join("");return btoa(t)}R(Boe,"toBase64");var xVe=5e4,kVe="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",LVe="sandbox",TVe="loose",DVe="http://www.w3.org/2000/svg",EVe="http://www.w3.org/1999/xlink",IVe="http://www.w3.org/1999/xhtml",NVe="100%",MVe="100%",AVe="border:0;margin:0;",RVe="margin:0",PVe="allow-top-navigation-by-user-activation allow-popups",OVe='The "iframe" tag is not supported by your browser.',BVe=["foreignobject"],FVe=["dominant-baseline"];function PO(n){const e=RO(n);return b4(),i9e(e.config??{}),e}R(PO,"processAndSetConfigs");async function Foe(n,e){N3();try{const{code:t,config:i}=PO(n);return{diagramType:(await zoe(t)).type,config:i}}catch(t){if(e?.suppressErrors)return!1;throw t}}R(Foe,"parse");var AG=R((n,e,t=[])=>`
.${n} ${e} { ${t.join(" !important; ")} !important; }`,"cssImportantStyles"),WVe=R((n,e=new Map)=>{let t="";if(n.themeCSS!==void 0&&(t+=`
${n.themeCSS}`),n.fontFamily!==void 0&&(t+=`
:root { --mermaid-font-family: ${n.fontFamily}}`),n.altFontFamily!==void 0&&(t+=`
:root { --mermaid-alt-font-family: ${n.altFontFamily}}`),e instanceof Map){const o=n.htmlLabels??n.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];e.forEach(a=>{IG(a.styles)||o.forEach(l=>{t+=AG(a.id,l,a.styles)}),IG(a.textStyles)||(t+=AG(a.id,"tspan",(a?.textStyles||[]).map(l=>l.replace("color","fill"))))})}return t},"createCssStyles"),zVe=R((n,e,t,i)=>{const r=WVe(n,t),s=C9e(e,r,n.themeVariables);return vM(tze(`${i}{${s}}`),nze)},"createUserStyles"),HVe=R((n="",e,t)=>{let i=n;return!t&&!e&&(i=i.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),i=cp(i),i=i.replace(/<br>/g,"<br/>"),i},"cleanUpSvgCode"),VVe=R((n="",e)=>{const t=e?.viewBox?.baseVal?.height?e.viewBox.baseVal.height+"px":MVe,i=Boe(`<body style="${RVe}">${n}</body>`);return`<iframe style="width:${NVe};height:${t};${AVe}" src="data:text/html;charset=UTF-8;base64,${i}" sandbox="${PVe}">
  ${OVe}
</iframe>`},"putIntoIFrame"),RG=R((n,e,t,i,r)=>{const s=n.append("div");s.attr("id",t),i&&s.attr("style",i);const o=s.append("svg").attr("id",e).attr("width","100%").attr("xmlns",DVe);return r&&o.attr("xmlns:xlink",r),o.append("g"),n},"appendDivSvgG");function kM(n,e){return n.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}R(kM,"sandboxedIframe");var $Ve=R((n,e,t,i)=>{n.getElementById(e)?.remove(),n.getElementById(t)?.remove(),n.getElementById(i)?.remove()},"removeExistingElements"),jVe=R(async function(n,e,t){N3();const i=PO(e);e=i.code;const r=bo();ze.debug(r),e.length>(r?.maxTextSize??xVe)&&(e=kVe);const s="#"+n,o="i"+n,a="#"+o,l="d"+n,c="#"+l,h=R(()=>{const X=Ji(d?a:c).node();X&&"remove"in X&&X.remove()},"removeTempElements");let u=Ji("body");const d=r.securityLevel===LVe,g=r.securityLevel===TVe,p=r.fontFamily;if(t!==void 0){if(t&&(t.innerHTML=""),d){const q=kM(Ji(t),o);u=Ji(q.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=Ji(t);RG(u,n,l,`font-family: ${p}`,EVe)}else{if($Ve(document,n,l,o),d){const q=kM(Ji("body"),o);u=Ji(q.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=Ji("body");RG(u,n,l)}let b,_;try{b=await xM.fromText(e,{title:i.title})}catch(q){if(r.suppressErrorRendering)throw h(),q;b=await xM.fromText("error"),_=q}const w=u.select(c).node(),y=b.type,k=w.firstChild,L=k.firstChild,T=b.renderer.getClasses?.(e,b),N=zVe(r,y,T,s),D=document.createElement("style");D.innerHTML=N,k.insertBefore(D,L);try{await b.renderer.draw(e,n,eq.version,b)}catch(q){throw r.suppressErrorRendering?h():NHe.draw(e,n,eq.version),q}const O=u.select(`${c} svg`),B=b.db.getAccTitle?.(),G=b.db.getAccDescription?.();Hoe(y,O,B,G),u.select(`[id="${n}"]`).selectAll("foreignobject > *").attr("xmlns",IVe);let H=u.select(c).node().innerHTML;if(ze.debug("config.arrowMarkerAbsolute",r.arrowMarkerAbsolute),H=HVe(H,d,vs(r.arrowMarkerAbsolute)),d){const q=u.select(c+" svg").node();H=VVe(H,q)}else g||(H=$1.sanitize(H,{ADD_TAGS:BVe,ADD_ATTR:FVe,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(vVe(),_)throw _;return h(),{diagramType:y,svg:H,bindFunctions:b.db.bindFunctions}},"render");function Woe(n={}){const e=gs({},n);e?.fontFamily&&!e.themeVariables?.fontFamily&&(e.themeVariables||(e.themeVariables={}),e.themeVariables.fontFamily=e.fontFamily),e9e(e),e?.theme&&e.theme in Mu?e.themeVariables=Mu[e.theme].getThemeVariables(e.themeVariables):e&&(e.themeVariables=Mu.default.getThemeVariables(e.themeVariables));const t=typeof e=="object"?J8e(e):Vee();RP(t.logLevel),N3()}R(Woe,"initialize");var zoe=R((n,e={})=>{const{code:t}=RO(n);return xM.fromText(t,e)},"getDiagramFromText");function Hoe(n,e,t,i){Roe(e,n),Poe(e,t,i,e.attr("id"))}R(Hoe,"addA11yInfo");var zm=Object.freeze({render:jVe,parse:Foe,getDiagramFromText:zoe,initialize:Woe,getConfig:bo,setConfig:$ee,getSiteConfig:Vee,updateSiteConfig:t9e,reset:R(()=>{b4()},"reset"),globalReset:R(()=>{b4(j1)},"globalReset"),defaultConfig:j1});RP(bo().logLevel);b4(bo());var UVe=R((n,e,t)=>{ze.warn(n),pO(n)?(t&&t(n.str,n.hash),e.push({...n,message:n.str,error:n})):(t&&t(n),n instanceof Error&&e.push({str:n.message,message:n.message,hash:n.name,error:n}))},"handleError"),Voe=R(async function(n={querySelector:".mermaid"}){try{await qVe(n)}catch(e){if(pO(e)&&ze.error(e.str),$u.parseError&&$u.parseError(e),!n.suppressErrors)throw ze.error("Use the suppressErrors option to suppress these errors"),e}},"run"),qVe=R(async function({postRenderCallback:n,querySelector:e,nodes:t}={querySelector:".mermaid"}){const i=zm.getConfig();ze.debug(`${n?"":"No "}Callback function found`);let r;if(t)r=t;else if(e)r=document.querySelectorAll(e);else throw new Error("Nodes and querySelector are both undefined");ze.debug(`Found ${r.length} diagrams`),i?.startOnLoad!==void 0&&(ze.debug("Start On Load: "+i?.startOnLoad),zm.updateSiteConfig({startOnLoad:i?.startOnLoad}));const s=new oc.InitIDGenerator(i.deterministicIds,i.deterministicIDSeed);let o;const a=[];for(const l of Array.from(r)){if(ze.info("Rendering diagram: "+l.id),l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const c=`mermaid-${s.next()}`;o=l.innerHTML,o=cre(oc.entityDecode(o)).trim().replace(/<br\s*\/?>/gi,"<br/>");const h=oc.detectInit(o);h&&ze.debug("Detected early reinit: ",h);try{const{svg:u,bindFunctions:d}=await qoe(c,o,l);l.innerHTML=u,n&&await n(c),d&&d(l)}catch(u){UVe(u,a,$u.parseError)}}if(a.length>0)throw a[0]},"runThrowsErrors"),$oe=R(function(n){zm.initialize(n)},"initialize"),GVe=R(async function(n,e,t){ze.warn("mermaid.init is deprecated. Please use run instead."),n&&$oe(n);const i={postRenderCallback:t,querySelector:".mermaid"};typeof e=="string"?i.querySelector=e:e&&(e instanceof HTMLElement?i.nodes=[e]:i.nodes=e),await Voe(i)},"init"),KVe=R(async(n,{lazyLoad:e=!0}={})=>{N3(),IN(...n),e===!1&&await bVe()},"registerExternalDiagrams"),joe=R(function(){if($u.startOnLoad){const{startOnLoad:n}=zm.getConfig();n&&$u.run().catch(e=>ze.error("Mermaid failed to initialize",e))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",joe,!1);var YVe=R(function(n){$u.parseError=n},"setParseErrorHandler"),Z4=[],TD=!1,Uoe=R(async()=>{if(!TD){for(TD=!0;Z4.length>0;){const n=Z4.shift();if(n)try{await n()}catch(e){ze.error("Error executing queue",e)}}TD=!1}},"executeQueue"),ZVe=R(async(n,e)=>new Promise((t,i)=>{const r=R(()=>new Promise((s,o)=>{zm.parse(n,e).then(a=>{s(a),t(a)},a=>{ze.error("Error parsing",a),$u.parseError?.(a),o(a),i(a)})}),"performCall");Z4.push(r),Uoe().catch(i)}),"parse"),qoe=R((n,e,t)=>new Promise((i,r)=>{const s=R(()=>new Promise((o,a)=>{zm.render(n,e,t).then(l=>{o(l),i(l)},l=>{ze.error("Error parsing",l),$u.parseError?.(l),a(l),r(l)})}),"performCall");Z4.push(s),Uoe().catch(r)}),"render"),XVe=R(()=>Object.keys(Rm).map(n=>({id:n})),"getRegisteredDiagramsMetadata"),$u={startOnLoad:!0,mermaidAPI:zm,parse:ZVe,render:qoe,init:GVe,run:Voe,registerExternalDiagrams:KVe,registerLayoutLoaders:Jse,initialize:$oe,parseError:void 0,contentLoaded:joe,setParseErrorHandler:YVe,detectType:PP,registerIconPacks:wFe,getRegisteredDiagramsMetadata:XVe},QVe=$u;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */function Yp({children:n}){return Pe.useEffect(()=>{QVe.initialize({securityLevel:"loose",theme:"dark"})},[]),S.jsx("pre",{className:"mermaid",children:n})}function PG(n){const e={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",...n.components};return S.jsxs(S.Fragment,{children:[S.jsx(e.h2,{children:"Grammatik"}),`
`,S.jsxs(e.p,{children:["Wir haben das bereits im letzten Kapitel angeschaut, eine ",S.jsx(e.strong,{children:"Grammatik"})," für eine ",S.jsx(e.strong,{children:"Computersprache"})," gibt uns die Regeln an, wie wir diese Sprache interpretieren müssen. Die Grammatik ist also die Grundlage für die Syntax von einer ",S.jsx(e.strong,{children:"Computersprache"}),"."]}),`
`,S.jsxs(e.p,{children:["Eine Grammatik besteht immer aus mehreren Komponenten. Ein Komponente ist das ",S.jsx(e.strong,{children:"Alphabet"})," der Sprache. Das ",S.jsx(e.strong,{children:"Alphabet"})," gibt an, welche Zeichen in der ",S.jsx(e.strong,{children:"Sprache"})," verwendet werden können. Wir haben bereits 3 ",S.jsx(e.strong,{children:"Alphabete"})," kennengelernt, jeweils für das ",S.jsx(e.strong,{children:"Binär-"}),", ",S.jsx(e.strong,{children:"Dezimal-"})," und ",S.jsx(e.strong,{children:"Hexadezimalsystem"}),". Ein ",S.jsx(e.strong,{children:"Alphabet"})," können wir jeweils so angeben:"]}),`
`,S.jsx(rc,{children:String.raw`\begin{align*}
\Sigma_\mathrm{Bin} &= \{0, 1\}\\
\Sigma_\mathrm{Dec} &= \{0, 1, 2, 3, 4, 5, 6, 7, 8, 9\} \\
\Sigma_\mathrm{Hex} &= \{0, 1, 2, 3, 4, 5, 6, 7, 8, 9, A, B, C, D, E, F\}
\end{align*}`}),`
`,S.jsxs(e.p,{children:["Wir können nun beliebig viele von diesen ",S.jsx(e.strong,{children:"Terminalsymbolen"})," aneinander hängen, und wir bekommen stehts ein Wort, das für diese Sprache gültig ist. Wenn wir hier von Wörtern sprechen, dann meinen wir damit einfach eine Zeichenfolge, die für diese Sprache gültig ist."]}),`
`,S.jsxs(JU,{classes:"full-width content-grid",children:[S.jsx(e.h2,{children:"Sprache einschränken"}),S.jsxs(e.p,{children:["Meistens möchten wir nicht mit der ganzen Sprache arbeiten, sondern nur mit einer Untermenge. Das haben wir bereits gesehen, als wir mit Binärzahlen und auch im Hexadezimalsystem gearbeitet haben. Im Hexadezimalsystem, haben wir gesagt, dass und nur 2-stellige Zahlen interessieren. Wenn wir eine solche Einschränkung auf die Sprache machen, dann müssen wir dafür eine Grammatik definieren. Die Grammatik wird in mehreren Regeln definiert. Diese Regeln können wir mit ",S.jsx(e.strong,{children:"Syntaxdiagrammen"})," beschreiben. Dazu machen wir gleich ein Beispiel für 2-stellige Hexadezimalzahlen:"]}),S.jsx(e.p,{children:S.jsx(e.strong,{children:"Hexzahl:"})}),S.jsx(Yp,{children:String.raw`
  ---
  config:
    theme: 'dark'
  ---
  graph LR
    A[Start] --> D(0) --> B[Ziffer] --> C[End]
    A --> E[Ziffer] --> F[Ziffer] --> C
  `}),S.jsx(e.p,{children:S.jsx(e.strong,{children:"Ziffer:"})}),S.jsx(Yp,{children:String.raw`
  ---
  config:
    theme: 'dark'
  ---
  graph LR
    A[Start] --> 0(0) --> C[End]
    A --> 1(1) --> C
    A --> 2(2) --> C
    A --> 3(3) --> C
    A --> 4(4) --> C
    A --> 5(5) --> C
    A --> 6(6) --> C
    A --> 7(7) --> C
    A --> 8(8) --> C
    A --> 9(9) --> C
    A --> Z(A) --> C
    A --> B(B) --> C
    A --> G(C) --> C
    A --> D(D) --> C
    A --> E(E) --> C
    A --> F(F) --> C
  `}),S.jsxs(e.p,{children:["Von einer Grammatik muss so lange eine Regel angewendet werden, bis nur noch ",S.jsx(e.strong,{children:"Terminalsymbole"})," im Wort vorkommen. Wenn wir also mit der Regel ",S.jsx(e.code,{children:"Hexzahl"})," starten, dann bauen wir uns zum Beispiel das Wort ",S.jsx(e.code,{children:"0{Ziffer}"}),". Dann müssen wir noch dir Regel für ",S.jsx(e.code,{children:"Ziffer"})," anwenden, und landen dann zum Beispiel bei ",S.jsx(e.code,{children:"0D"}),". Das ist eine gültige 2-stellige Hexadezimalzahl. Wir können jeweils die Grammatik dafür verwenden, um herauszufinden, ob ein Wort gültig ist."]})]}),`
`,S.jsx(e.h2,{children:"Einfache Rechnungen"}),`
`,S.jsx(e.p,{children:"Wir können auch eine Grammatik für einfache Rechnungen definieren. Dafür müssen wir nur Zahlen erstellen können, diese mit verschiedenen Zeichen kombinieren und schön können wir einfache Addition und Subtraktion machen. Schauen wir uns dafür die folgende Grammatik an, mit dem erweiterten Alphabet."}),`
`,S.jsx(rc,{children:String.raw`\Sigma_{\mathrm{Calc}} = \{0, 1, 2, 3, 4, 5, 6, 7, 8, 9, +, -, =\}`}),`
`,S.jsxs(e.p,{children:["Dazu können wir die folgenden ",S.jsx(e.strong,{children:"Syntaxdiagramme"})," aufzeichnen."]}),`
`,S.jsxs(e.p,{children:[S.jsx(e.strong,{children:"Rechnung"}),":"]}),`
`,S.jsx(Yp,{children:String.raw`
graph LR
A[Start] --> Z[Zahl] --> O[Operation] --> Z2[Zahl] --> G(=) --> Z3[Zahl] --> E[End]
Z2 --> O
`}),`
`,S.jsxs(e.p,{children:[S.jsx(e.strong,{children:"Zahl"}),":"]}),`
`,S.jsx(Yp,{children:String.raw`
---
config:
theme: 'dark'
---
graph LR
A[Start] --> Z[Ziffer] -->Z
Z --> E[End]
`}),`
`,S.jsxs(e.p,{children:[S.jsx(e.strong,{children:"Operation"}),":"]}),`
`,S.jsx(Yp,{children:String.raw`
graph LR
A[Start] --> P[+] -->E[End]
A --> M[-] --> E
`}),`
`,S.jsx(e.p,{children:S.jsx(e.strong,{children:"Ziffer:"})}),`
`,S.jsx(Yp,{children:String.raw`
---
config:
theme: 'dark'
---
graph LR
A[Start] --> 0(0) --> C[End]
A --> 1(1) --> C
A --> 2(2) --> C
A --> 3(3) --> C
A --> 4(4) --> C
A --> 5(5) --> C
A --> 6(6) --> C
A --> 7(7) --> C
A --> 8(8) --> C
A --> 9(9) --> C
`}),`
`,S.jsxs(e.p,{children:["Mit dieser Grammatik können wir alle Additionen und Subtraktionen darstellen. Ob diese dann richtig gerechnet werden, kann die Grammatik nicht entscheiden. Aber dank der Grammatik können wir eine Rechnung in der Form ",S.jsx(Ft,{children:String.raw`12 + 4 - 10 = 6`})," auslesen, und zwar so das wir die einzelnen Teile erhalten. Wir können aus der Rechnung also einen ",S.jsx(e.strong,{children:"Syntaxbaum"})," erstellen. Diesen können wir dann berechnen und prüfen ob die Rechnung korrekt ist. Dafür brauchen wir dann aber ein weiteres Programm, das rechnen kann."]}),`
`,S.jsxs(JU,{classes:"exercise",children:[S.jsx(e.h2,{children:"Aufgaben"}),S.jsxs(e.ol,{children:[`
`,S.jsxs(e.li,{children:["Prüfen Sie ob die obere Grammatik auch mit folgender Rechnung funktioniert: ",S.jsx(Ft,{children:"2 - 4 = -2"}),". Falls nicht, passen Sie die Syntaxdiagramme so an, dass es funktioniert."]}),`
`,S.jsxs(e.li,{children:["Erweitern Sie das obere Beispiel, dass auch ",S.jsx(e.code,{children:"*"})," und ",S.jsx(e.code,{children:"/"})," unterstützt wird."]}),`
`,S.jsxs(e.li,{children:["Schauen Sie sich nochmals die Sprache ",S.jsx(e.code,{children:"Markdown"})," an. Verwenden Sie dazu den folgenden ",S.jsx("a",{href:"/gym-inf/obsidian-intro.md",target:"_blank",children:"Link"}),". Geben Sie eine Grammatik für eine minimale Version von ",S.jsx(e.code,{children:"Markdown"})," an. Die Grammatik soll folgende Dinge erkennen können: Abschnitte, Title, Listen, Links."]}),`
`,S.jsx(e.li,{children:"Entwickeln Sie eine eigene Grammatik um die Struktur von Textdokumenten zu beschreiben. Tauschen Sie Ihre Grammatik mit jemandem aus, und geben Sie ein Feedback dazu."}),`
`]})]})]})}function JVe(n={}){const{wrapper:e}=n.components||{};return e?S.jsx(e,{...n,children:S.jsx(PG,{...n})}):PG(n)}function OG(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...n.components};return S.jsxs(S.Fragment,{children:[S.jsx(e.h2,{children:"Notwendige Programme Installieren"}),`
`,S.jsx(e.p,{children:`Um mit dem Computer vernünftig arbeiten zu können, brauchen wir einige
Programme, die Sie zuerst installieren müssen. Sie finden hier eine Liste mit
allen Programmen die Sie verwenden werden. Weiter unten finden Sie eine kurze
Beschreibung zu alle den Programmen.`}),`
`,S.jsxs(e.ul,{children:[`
`,S.jsx(e.li,{children:S.jsx(e.a,{href:"https://code.visualstudio.com/download",children:"VSCode"})}),`
`,S.jsx(e.li,{children:S.jsx(e.a,{href:"https://git-scm.com/downloads",children:"Git"})}),`
`,S.jsxs(e.li,{children:[S.jsx(e.a,{href:"https://nodejs.org/en/download",children:"NodeJS"}),` (Hier müssen Sie das Binary
herunterladen, das finden Sie unterhalb von dem Skript).`]}),`
`,S.jsxs(e.li,{children:[S.jsx(e.a,{href:"https://www.docker.com/products/docker-desktop/",children:"Docker-Desktop"}),` (Das wird
nicht unbedingt benötigt, kann vieles aber einfacher machen, dafür auch
langsamer).`]}),`
`]}),`
`,S.jsxs(e.p,{children:["Bei ",S.jsx(e.code,{children:"NodeJS"})," und ",S.jsx(e.code,{children:"Docker-Desktop"}),` können Sie eigentlich auswählen, welches Sie
installieren möchten. Denn durch `,S.jsx(e.code,{children:"Docker-Desktop"})," kann man ",S.jsx(e.code,{children:"NodeJS"}),` automatisch
laufen lassen, allerdings ist das ein wenig langsamer. Am besten versuchen Sie
beides zu installieren, dann sind Sie flexibel.`]}),`
`,S.jsx(e.h2,{children:"Github-Account"}),`
`,S.jsxs(e.p,{children:[`Sie werden alle Materialien über Github-Classrooms erhalten und abgeben,
deshalb ist es wichtig das Sie auch einen Github-Account haben. Erstellen Sie
diesen `,S.jsx(e.a,{href:"https://github.com/signup",children:"hier"}),"."]}),`
`,S.jsx(e.p,{children:`Verwenden Sie für diesen Account am besten Ihre Schulemail. Den Benutzernamen
können Sie wählen wie Sie möchten. Sie können Ihre e-Nummer dafür verwenden,
oder auch etwas das für Sie einfacher zum merken ist.`}),`
`,S.jsx(e.h2,{children:"Erklärung zu den Programmen"}),`
`,S.jsx(e.p,{children:"Hier finden Sie eine kurze Erklärung was die einzelnen Programme machen."}),`
`,S.jsx(e.h3,{children:"VSCode"}),`
`,S.jsx(e.p,{children:`Das ist Ihr Editor. In der Informatik ist der Editor und vor allem Ihr Umgang
damit das wichtigste überhaupt. Mit dem Editor bearbeiten Sie Text und Code, er
ist also Ihr Werkzeug um Ihre Ideen direkt umzusetzen und anzupassen. In all
den Informatiklektionen die Sie haben, sollten Sie immer auf einen guten Umgang
mit dem Editor achten. Dazu kommt dann aber noch mehr in den einzelnen
Lektionen.`}),`
`,S.jsx(e.h3,{children:"Git"}),`
`,S.jsxs(e.p,{children:[S.jsx(e.code,{children:"Git"}),` ist ein Werkzeug zur Versionierung von Software oder Projekten im
allgemeinen. `,S.jsx(e.code,{children:"Git"})," ist nicht das gleiche wie ",S.jsx(e.code,{children:"Github"}),". ",S.jsx(e.code,{children:"Github"}),` ist ein
Onlinedienst von Microsoft, der es ermöglicht `,S.jsx(e.code,{children:"Git"}),`-Projekte einfach
miteinander zu tauschen.`]}),`
`,S.jsxs(e.p,{children:[`Versionierung klingt für Sie wahrscheinlich noch sehr unnötig und kompliziert,
es ist aber sehr praktisch, und wenn Sie sich ein klein wenig damit
auseinandersetzen, auch sehr einfach. `,S.jsx(e.code,{children:"Git"}),` macht Ihnen keine automatische
Versionierung wie Sie das vielleicht schon von `,S.jsx(e.code,{children:"Word"})," oder ",S.jsx(e.code,{children:"OneNote"}),` kennen,
sondern Sie müssen explizit sagen, wann es eine neue Version ist. Damit liegt
die Kontrolle über die Versionierung bei Ihnen, und Sie können einfach zu
funktionierenden Versionen zurück springen, wenn Sie was gemacht haben, das
nicht funktioniert. Aber auch zu dem Werkzeug kommt später noch mehr.`]}),`
`,S.jsx(e.h3,{children:"NodeJS"}),`
`,S.jsxs(e.p,{children:[S.jsx(e.code,{children:"NodeJS"})," oder kurz auch einfach nur ",S.jsx(e.code,{children:"node"}),`, ist ein Programm das es Ihnen
ermöglicht, `,S.jsx(e.code,{children:"Javascript"}),`-Code auf dem eigene Computer auszuführen. Wir brauchen
das Programm also, damit wir unsere eigenen Programme schreiben und ausführen
können. `,S.jsx(e.code,{children:"Node"})," kann Ihnen ausserdem noch weitere ",S.jsx(e.code,{children:"Javascript"}),`-Programme
installieren, die Ihr eigenes Programm unterstützen und erweitern, so müssen
wir nicht alles komplett neu programmieren. Auch zu diesem Programm kommt
später noch mehr.`]}),`
`,S.jsx(e.h3,{children:"Docker-Desktop"}),`
`,S.jsxs(e.p,{children:[S.jsx(e.code,{children:"Docker"}),` ist ein Programm, das Ihnen einen Container auf dem Computer ausführen
kann. Ein Container ist ein eigenes Modul, welches unabhängig vom Rest Ihres
Betriebssystems arbeiten kann. Mit so einem Container können wir also das
benötigte `,S.jsx(e.code,{children:"NodeJS"}),` ausführen. Container sind sehr praktisch weil wir dann alle
das genau gleiche Setup verwenden können. Wir haben also alle die gleiche
Version von `,S.jsx(e.code,{children:"Node"}),` und lassen es auf dem gleichen Betriebssystem laufen. So
können Unterschiede und Komplikationen die auf Mac, Windows oder Linux
auftreten minimiert werden.`]}),`
`,S.jsxs(e.p,{children:["Wenn Sie ",S.jsx(e.code,{children:"Node"})," zum laufen bekommen, dann brauchen Sie ",S.jsx(e.code,{children:"Docker"}),` nicht
unbedingt, aber wie schon erwähnt, macht es Dinge einfacher, weil dann alle das
gleiche Setup haben. Allerdings lauft alles ein wenig langsamer, was Sie dann
auch merken werden.`]}),`
`,S.jsxs(jo,{title:"Installation testen",children:[S.jsxs(e.p,{children:[`Wenn Sie alles installiert haben, dann möchten Sie die Installation sicherlich
auch testen. Dafür können Sie VSCode öffnen und ein neues Repository von Github
klonen, und eine erste eigene Version erstellen. Dafür drücken Sie die folgende
Tastenkombination: `,S.jsx(e.code,{children:"Shift + Ctrl + P"})," und suchen nach dem Befehl: ",S.jsx(e.code,{children:"Git: Clone"}),`.
Drücken Sie auf `,S.jsx(e.code,{children:"Enter"}),` um den Befehl auszuführen und fügen Sie die folgende
`,S.jsx(e.code,{children:"URL"})," ein:"]}),S.jsx(e.pre,{children:S.jsx(e.code,{className:"language-text",children:`https://github.com/gymmu/00-demo.git
`})}),S.jsxs(e.p,{children:["Bestätigen Sie das wieder mit ",S.jsx(e.code,{children:"Enter"}),` und legen Sie das neue Repository auf
Ihrem `,S.jsx(e.code,{children:"Desktop"})," ab."]}),S.jsx(e.p,{children:`Wenn das Repository erfolgreich geklont werden konnte, und Sie haben alles
richtig installiert, dann können Sie mit folgendem Befehl das ganze zum laufen
bringen:`}),S.jsx(e.pre,{children:S.jsx(e.code,{className:"language-bash",children:`npm run dev
`})})]})]})}function e$e(n={}){const{wrapper:e}=n.components||{};return e?S.jsx(e,{...n,children:S.jsx(OG,{...n})}):OG(n)}function BG(n){const e={h2:"h2",p:"p",...n.components};return S.jsxs(S.Fragment,{children:[S.jsx(e.h2,{children:"FMS Theorie"}),`
`,S.jsx(e.p,{children:"Theorie für die FMS."})]})}function t$e(n={}){const{wrapper:e}=n.components||{};return e?S.jsx(e,{...n,children:S.jsx(BG,{...n})}):BG(n)}function OO({url:n}){return S.jsx("center",{children:S.jsx("iframe",{width:"560",height:"315",src:`https://www.youtube.com/embed/${n}`,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})})}function FG(n){const e={a:"a",code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...n.components};return S.jsxs(S.Fragment,{children:[S.jsx(e.h2,{children:"Obsidian"}),`
`,S.jsx(e.p,{children:`Obsidian ist eine App die uns dabei Hilft unser Wissen zu verwalten. Man kann
es auch als Notizapp bezeichnen. Obsidian macht aber noch mehr als nur Notizen
zu speichern, es verwaltet diese auch, und setzt Notizen zueinander in
Verbindung. Das ist einer der zentralen Elemente von Obsidian.`}),`
`,S.jsx(e.p,{children:"Weitere praktische Eigenschaften von Obsidian sind:"}),`
`,S.jsxs(e.ul,{children:[`
`,S.jsxs(e.li,{children:["Es verwendet ",S.jsx(e.code,{children:"Markdown"})," als Syntax für die Notizen"]}),`
`,S.jsx(e.li,{children:"Alle Dateien gehören dem Benutzer"}),`
`,S.jsx(e.li,{children:"Alle Notizen können auch ohne Obsidian gelesen und geändert werden"}),`
`,S.jsxs(e.li,{children:["Das ",S.jsx(e.code,{children:"Markdown"})," wird schnell und schön dargestellt"]}),`
`,S.jsx(e.li,{children:"Viele Erweiterungen können installiert werden"}),`
`]}),`
`,S.jsx(e.p,{children:`Wir werden aber nicht alle davon verwenden, wir möchten damit vor allem lernen
wie wir unsere Gedanken als Text aufschreiben und verwalten können.`}),`
`,S.jsx(e.h2,{children:"Gedanken als Text"}),`
`,S.jsx(e.p,{children:`Wieso ist das wichtig? Dank KI bzw. LLMs ist Text wichtiger den je. Dieser Text
sollte aber nicht in merkwürdigen Dateiformaten weggesperrt sein, sondern
möglichst nahe an reinem Text, damit die KI alles schnell und einfach lesen
kann, und den Kontext behalten kann. Mit KI können wir dann unsere Gedanken
zusammenfassen, reflektieren oder sogar eine Unterhaltung damit führen. Wir
werden KI aber erst später einsetzen, wichtig ist für jetzt nur, dass wir
unsere Notizen schnell und übersichtlich bearbeiten können.`}),`
`,S.jsx(e.h2,{children:"Einstieg"}),`
`,S.jsxs(e.p,{children:[`Hier finden Sie ein kurzes Video, das Ihnen erklärt wie Obsidian grundlegend
funktioniert. Dafür müssen Sie Obsidian aber zuerst von hier installieren:
`,S.jsx(e.a,{href:"https://obsidian.md/download",children:"Obsidian"}),"."]}),`
`,S.jsx(OO,{url:"WuOj1PkDQPs"})]})}function i$e(n={}){const{wrapper:e}=n.components||{};return e?S.jsx(e,{...n,children:S.jsx(FG,{...n})}):FG(n)}function WG(n){const e={a:"a",h2:"h2",p:"p",...n.components};return S.jsxs(S.Fragment,{children:[S.jsx(e.h2,{children:"Markdown in Obsidian"}),`
`,S.jsxs(e.p,{children:[`Eine Startdatei die fast alles zeigt das man mit Markdown in Obsidian machen
kann, können Sie hier finden: `,S.jsx(e.a,{href:"/gym-inf/obsidian-intro.md",children:"Start-Datei"})]})]})}function n$e(n={}){const{wrapper:e}=n.components||{};return e?S.jsx(e,{...n,children:S.jsx(WG,{...n})}):WG(n)}function r$e(){const n={grid:{width:"50%",minWidth:"360px",marginInline:"auto",display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},cell:{textAlign:"center",border:"1px solid #eee",paddingBlock:"0.5em",margin:0},header:{fontWeight:"600"}};return S.jsxs("div",{style:n.grid,children:[S.jsx("span",{style:{...n.cell,...n.header},children:"Byte"}),S.jsx("span",{style:{...n.cell,...n.header},children:"Zeichen"}),S.jsx("pre",{style:{...n.cell},children:"0110 0001"}),S.jsx("pre",{style:{...n.cell},children:"a"}),S.jsx("pre",{style:{...n.cell},children:"0110 0010"}),S.jsx("pre",{style:{...n.cell},children:"b"}),S.jsx("pre",{style:{...n.cell},children:"0110 0011"}),S.jsx("pre",{style:{...n.cell},children:"c"}),S.jsx("pre",{style:{...n.cell},children:"0011 0000"}),S.jsx("pre",{style:{...n.cell},children:"0"}),S.jsx("pre",{style:{...n.cell},children:"0011 0001"}),S.jsx("pre",{style:{...n.cell},children:"1"}),S.jsx("pre",{style:{...n.cell},children:"0011 0010"}),S.jsx("pre",{style:{...n.cell},children:"2"}),S.jsx("pre",{style:{...n.cell},children:"0010 0000"}),S.jsx("pre",{style:{...n.cell},children:"SPACE"}),S.jsx("pre",{style:{...n.cell},children:"0100 0001"}),S.jsx("pre",{style:{...n.cell},children:"A"}),S.jsx("pre",{style:{...n.cell},children:"0100 0010"}),S.jsx("pre",{style:{...n.cell},children:"B"}),S.jsx("pre",{style:{...n.cell},children:"0100 0011"}),S.jsx("pre",{style:{...n.cell},children:"C"})]})}function BO({src:n,alt:e,imgStyle:t={},containerStyle:i={}}){return S.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",...i},children:S.jsx("img",{style:{...t},src:n,alt:e})})}function zG(n){const e={code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...n.components};return S.jsxs(S.Fragment,{children:[S.jsx(e.h2,{children:"Computer Hardware"}),`
`,S.jsxs(e.p,{children:[`Ein Computer besteht aus vielen einzelnen Komponenten. Einige wenige davon
können Sie sehen, wie zum Beispiel den Bildschirm oder die Tastatur. Dies sind
aber eigentlich keine Komponenten von einem Computer, sondern periphere Geräte
die den Umgang mit dem Computer einfacher machen. Der eigentliche `,S.jsx(e.strong,{children:"Computer"}),`
ist die Recheneinheit die im Zentrum des Computers steht, daher auch der Name
Computer. Dieser kommt vom Wort `,S.jsx(e.code,{children:"compute"})," was so viel bedeutet wie ",S.jsx(e.code,{children:"berechnen"}),`.
In der deutschen Sprache verwendet man manchmal auch das Wort `,S.jsx(e.code,{children:"Rechner"}),` wenn
man über den `,S.jsx(e.strong,{children:"Computer"}),` spricht. Es ist ganz wichtig das wir dies immer im
Hinterkopf behalten, der `,S.jsx(e.strong,{children:"Computer"}),` ist nur eine sehr fortgeschrittene
Rechenmaschine in seinem Kern. Für diese Funktionalität braucht ein
`,S.jsx(e.strong,{children:"Computer"})," die folgenden Komponenten:"]}),`
`,S.jsxs(e.ul,{children:[`
`,S.jsxs(e.li,{children:[S.jsx(e.strong,{children:"CPU"}),": Zentrale Recheneinheit"]}),`
`,S.jsxs(e.li,{children:[S.jsx(e.strong,{children:"RAM"}),": Arbeitsspeicher"]}),`
`,S.jsxs(e.li,{children:[S.jsx(e.strong,{children:"Festplatte"}),": Langzeitspeicher"]}),`
`]}),`
`,S.jsxs(e.p,{children:[`Diese Komponenten werden wir uns zusammen anschauen und verstehen wofür diese
gebraucht werden. Aber zuerst müssen wir verstehen was denn ein `,S.jsx(e.strong,{children:"Computer"}),`
eigentlich genau `,S.jsx(e.em,{children:"berechnet"}),"."]}),`
`,S.jsx(e.h3,{children:"Bits und Bytes"}),`
`,S.jsxs(e.p,{children:["Da der ",S.jsx(e.strong,{children:"Computer"}),` ein elektronisches Gerät ist, kann er auch nur auf
elektronischen Komponenten arbeiten. Die einzige mögliche Speichereinheit die
wir haben, ist ein `,S.jsx(e.code,{children:"Bit"}),". Ein ",S.jsx(e.code,{children:"Bit"}),` kann entweder geladen oder nicht geladen
sein. So wie bei einer Lampe, diese kann entweder eingeschaltet oder
ausgeschaltet sein. Eine Dimmfunktion gibt es nicht, da die Speicherzelle sonst
nicht zuverlässig ausgelesen werden kann. Ein `,S.jsx(e.code,{children:"Bit"}),` kann also die folgenden
beiden Werte annehmen `,S.jsx(e.code,{children:"0"})," oder ",S.jsx(e.code,{children:"1"}),`. Ein Computer arbeitet also immer auf diesen
`,S.jsx(e.code,{children:"Bits"}),". Er kann ein ",S.jsx(e.code,{children:"Bit"})," auslesen oder setzen."]}),`
`,S.jsxs(e.p,{children:["Mit nur einem ",S.jsx(e.code,{children:"Bit"}),` können wir nur sehr wenig Informationen speichern,
eigentlich nur die Zahlen `,S.jsx(e.code,{children:"0"})," und ",S.jsx(e.code,{children:"1"}),`, oder wenn wir diese als Wahrheitswerte
interpretieren möchten, können wir die Informationen `,S.jsx(e.code,{children:"true"})," und ",S.jsx(e.code,{children:"false"}),`
speichern. Mit nur einem `,S.jsx(e.code,{children:"Bit"}),` kommen wir also nicht sehr weit. Damit wir mit
mehr Informationen arbeiten können, nehmen wir einfach mehrere `,S.jsx(e.code,{children:"Bits"}),` zusammen.
Man hat beschlossen dass es am besten ist gleich 8 `,S.jsx(e.code,{children:"Bits"}),` zusammen zu nehmen,
das gibt uns dann 1 `,S.jsx(e.code,{children:"Byte"}),". Im Speicher würde ein ",S.jsx(e.code,{children:"Byte"})," dann so aussehen:"]}),`
`,S.jsx(e.pre,{children:S.jsx(e.code,{className:"language-text",children:`1001 0011
`})}),`
`,S.jsxs(e.p,{children:["Mit diesem ",S.jsx(e.code,{children:"Byte"}),` können wir bereits $2^8$ Informationen darstellen, also $256$
unterschiedliche Dinge. Damit können wir schon mal alle Ziffern und das ganze
Alphabet mit noch Sonderzeichen abdecken. Dafür müssen wir das aber definieren.
Also immer wenn wir das folgende `,S.jsx(e.code,{children:"Byte"})," haben, möchten wir dies als ",S.jsx(e.code,{children:"a"}),`
interpretieren, so wie in dieser Tabelle:`]}),`
`,S.jsx(r$e,{}),`
`,S.jsxs(e.p,{children:["Der ",S.jsx(e.strong,{children:"Computer"})," rechnet also immer mit ",S.jsx(e.code,{children:"Bits"}),` und damit wir mehr Informationen
verwenden können, müssen wir mehrere `,S.jsx(e.code,{children:"Bits"})," zu einem ",S.jsx(e.code,{children:"Byte"}),` zusammenschliessen
und dieses `,S.jsx(e.code,{children:"Byte"}),` müssen wir dann interpretieren, so wie es in der Tabelle
gemacht wird.`]}),`
`,S.jsxs(jo,{title:"Hardware Komponenten",children:[S.jsxs(e.p,{children:[`Wir haben uns weiter oben 3 Hardware Komponenten angeschaut. Was genau
haben diese jetzt aber mit dem Computer zu tun? Und wieso müssen wir zuerst
diese `,S.jsx(e.code,{children:"Bits"})," und ",S.jsx(e.code,{children:"Bytes"})," verstehen?"]}),S.jsxs(e.p,{children:[`Zum Glück müssen Sie das alles nicht im Detail verstehen, wir können uns
hier also einfach anschauen was die einzelnen Dinge machen. Starten wir mit
dem schwierigsten. Was genau macht die `,S.jsx(e.strong,{children:"CPU"}),"?"]}),S.jsxs(e.p,{children:["Eine ",S.jsx(e.strong,{children:"CPU"})," ist die logische Recheneinheit des Computers. Die ",S.jsx(e.strong,{children:"CPU"}),`
liest ein kleines Stück des Speichers ein, und formt diesen dann um. Das
passiert alles über logische Schaltkreise in der `,S.jsx(e.strong,{children:"CPU"}),`. Möchten wir dem
Computer zum Beispiel sagen das wir ein grosses `,S.jsx(e.code,{children:"A"})," in ein kleines ",S.jsx(e.code,{children:"a"}),`
umwandeln möchten, dann liest der Computer den Speicher an der Stelle aus
wo das `,S.jsx(e.code,{children:"A"})," stand, und schreibt neu das entsprechende ",S.jsx(e.code,{children:"Byte"})," für ",S.jsx(e.code,{children:"a"}),"."]}),S.jsx(e.pre,{children:S.jsx(e.code,{children:`0110 0001  -->  0100 0001
`})}),S.jsxs(e.p,{children:["Die ",S.jsx(e.strong,{children:"CPU"})," liest also immer einige ",S.jsx(e.code,{children:"Bytes"}),` gleichzeitig ein, und schreibt
dann neue `,S.jsx(e.code,{children:"Bytes"}),". Wie die ",S.jsx(e.strong,{children:"CPU"}),` aber zu dem Resultat kommt, schauen wir
uns nicht genauer an, das würde zu viel Zeit brauchen und ist nicht
unbedingt hilfreich.`]})]}),`
`,S.jsxs(e.h2,{children:["Alles in ",S.jsx(e.code,{children:"0"})," und ",S.jsx(e.code,{children:"1"})]}),`
`,S.jsxs(e.p,{children:["Um die Funktionsweise eines ",S.jsx(e.strong,{children:"Computers"}),` zu verstehen, und zu verstehen was
überhaupt möglich ist, müssen Sie sich immer ganz klar machen, die Grundlage
für alles was auf dem `,S.jsx(e.strong,{children:"Computer"})," passiert, sind die ",S.jsx(e.code,{children:"0"})," und die ",S.jsx(e.code,{children:"1"}),`, mehr
gibt es da nicht. Wenn wir also Daten auf dem `,S.jsx(e.strong,{children:"Computer"}),` speichern, dann ist
dies einfach eine Abfolge von `,S.jsx(e.code,{children:"Bits"}),`. Schauen wir uns ein Bild auf dem
Bildschirm an, dann ist dieses Bild im Speicher einfach eine Reihe von `,S.jsx(e.code,{children:"Bits"}),`.
Wo dieses Bild beginnt und wo es aufhört im Speicher ist ebenfalls in `,S.jsx(e.code,{children:"Bits"}),` im
Speicher abgelegt.`]}),`
`,S.jsxs(e.p,{children:["Wenn wir auf dem ",S.jsx(e.strong,{children:"Computer"}),` eine Taste drücken, dann wird ein Signal aus
mehreren `,S.jsx(e.code,{children:"Bits"})," (genau ein ",S.jsx(e.code,{children:"Byte"}),") an die ",S.jsx(e.strong,{children:"CPU"}),` geschickt, das führt dann
dazu dass genau dieses `,S.jsx(e.code,{children:"Byte"}),` im Speicherblock hinzugefügt wird, und so
entsteht ein Text auf dem `,S.jsx(e.strong,{children:"Computer"}),"."]}),`
`,S.jsxs(e.p,{children:[`Die Anzeige die Sie auf dem Bildschirm sehen, ist einfach ein Teil des
Speichers, der genau sagt welches Pixel welche Farbe haben soll. Ändert sich
nun die Farbe von so einem Pixel, dann ist es weil die `,S.jsx(e.strong,{children:"CPU"})," die ",S.jsx(e.code,{children:"Bits"}),` im
Speicherbereich für den Bildschirm geändert hat.`]}),`
`,S.jsxs(e.p,{children:["Wenn Sie Daten über das Netzwerk schicken, machen Sie das auch in ",S.jsx(e.code,{children:"Bits"}),`. Das
übertragen von Daten ist im Prinzip recht einfach. Sie legen fest wie viele
Signale in der Sekunde übertragen werden können. Wenn Sie nun einen `,S.jsx(e.code,{children:"1"}),`
schicken möchten, machen Sie den Strom so lange an wie Sie `,S.jsx(e.code,{children:"1"}),`-en schicken, und
lassen den Strom ab, wenn Sie `,S.jsx(e.code,{children:"0"}),`-en schicken. Nehmen Sie an Sie können 1
Signal in der Sekunde schicken. Möchten Sie nun eine `,S.jsx(e.code,{children:"a"}),` verschicken, dann
machen Sie folgendes:`]}),`
`,S.jsxs(e.ul,{children:[`
`,S.jsx(e.li,{children:"1s kein Strom"}),`
`,S.jsx(e.li,{children:"2s Strom"}),`
`,S.jsx(e.li,{children:"4s kein Strom"}),`
`,S.jsx(e.li,{children:"1s Strom"}),`
`]}),`
`,S.jsxs(e.p,{children:["Wenn Sie das auf der anderen Seite auslesen, und pro Sekunde ein ",S.jsx(e.code,{children:"Bit"}),`
auslesen, erhalten Sie das folgende `,S.jsx(e.code,{children:"Byte"})," am Ende: ",S.jsx(e.code,{children:"0110 0001"}),"."]}),`
`,S.jsxs(jo,{title:"Stromausfall",children:[S.jsxs(e.p,{children:["Was passiert wenn der Strom ausfällt? Dazu müssen wir ",S.jsx(e.strong,{children:"RAM"}),`-Speicher und
`,S.jsx(e.strong,{children:"Festplatten"}),`-Speicher unterscheiden. Beides sind Speichermedien um eine
Reihe von `,S.jsx(e.code,{children:"Bytes"})," zu speichern. Das eine ist sehr schnell ",S.jsx(e.strong,{children:"RAM"}),` das
andere sehr langsam `,S.jsx(e.strong,{children:"Festplatte"}),". Damit der ",S.jsx(e.strong,{children:"Computer"}),` effizient
arbeiten kann, arbeitet dieser also immer mit `,S.jsx(e.strong,{children:"RAM"}),`, daher auch der Name
`,S.jsx(e.strong,{children:"Arbeitsspeicher"}),"."]}),S.jsxs(e.p,{children:[S.jsx(e.strong,{children:"RAM"}),` besteht aus ganz vielen kleinen Kondesatoren, diese können geladen
oder nicht geladen sein, also jeweils ein `,S.jsx(e.code,{children:"Bit"}),`. Damit diese aber geladen
sind, braucht es Strom, sonst geht die Ladung ganz schnell weg. Somit
braucht es also eine andere Lösung für den permanenten Speicher. Also eine
`,S.jsx(e.strong,{children:"Festplatte"}),"."]}),S.jsxs(e.p,{children:["Auf einer ",S.jsx(e.strong,{children:"Festplatte"}),` werden die Daten magnetisch in die einzelnen
Zellen geschrieben. So braucht es keinen Strom um die Daten zu erhalten.
Das ganze ist aber sehr viel langsamer und eignet sich somit nicht für
direkte Berechnungen.`]})]}),`
`,S.jsx(e.h2,{children:"Vom Speicher zur CPU"}),`
`,S.jsxs(e.p,{children:["Damit wir überhaupt etwas arbeiten können auf dem ",S.jsx(e.strong,{children:"Computer"}),` müssen die Daten
immer zuerst von der `,S.jsx(e.strong,{children:"Festplatte"})," gelesen werden. Von der ",S.jsx(e.strong,{children:"Festplatte"}),`
werden die Daten ins `,S.jsx(e.strong,{children:"RAM"})," geladen, darauf kann dann die ",S.jsx(e.strong,{children:"CPU"}),` ihre
logischen Operationen durchführen.`]}),`
`,S.jsxs(e.p,{children:["Damit ein ",S.jsx(e.strong,{children:"Computer"}),` aber auch wirklich das macht was er soll, und auch nicht
immer das gleiche, braucht es neben den `,S.jsx(e.em,{children:"Daten"})," auch noch ",S.jsx(e.em,{children:"Instruktionen"}),`. Das
sind die Maschinenbefehle, die der `,S.jsx(e.strong,{children:"CPU"})," sagen, wie die ",S.jsx(e.em,{children:"Daten"}),` verarbeitet
werden. Aus unserer Sicht müssen wir das nicht weiter Unterscheiden, denn auch
diese `,S.jsx(e.em,{children:"Instruktionen"})," sind einfach nur als ",S.jsx(e.code,{children:"Bits"})," im Speicher abgelegt."]}),`
`,S.jsx(e.h2,{children:"ASCII-Tabelle"}),`
`,S.jsxs(e.p,{children:["Die vollständige Tabelle wie wir auf dem ",S.jsx(e.strong,{children:"Computer"})," jedes ",S.jsx(e.code,{children:"Byte"}),`
interpretieren ist in `,S.jsx(e.code,{children:"ASCII"}),`-Standard festgelegt. Die Tabelle dazu finden Sie
hier.`]}),`
`,S.jsx(BO,{src:"https://www.asciitable.com/asciifull.gif"})]})}function s$e(n={}){const{wrapper:e}=n.components||{};return e?S.jsx(e,{...n,children:S.jsx(zG,{...n})}):zG(n)}const o$e="_wrapper_1ku6b_1",a$e="_tip_1ku6b_6",HG={wrapper:o$e,tip:a$e};function Sd({tip:n,children:e}){return S.jsxs("div",{className:HG.wrapper,children:[S.jsx("div",{className:HG.tip,children:n}),e]})}function VG(n){const e={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...n.components};return S.jsxs(S.Fragment,{children:[S.jsx(e.h2,{children:"Binärsystem"}),`
`,S.jsxs(e.p,{children:[`Das Binärsystem ist eines von vielen Zahlensystem. Es ist besonders in der
Informatik sehr verbreitet, da die Grundeinheit des Computers das `,S.jsx(e.code,{children:"Bit"}),` ist,
und somit nur 2 Werte annehmen kann. Für uns scheint das Binärsystem auf den
ersten Blick sehr unintuitiv und kompliziert, da wir uns das Dezimalsystem
gewohnt sind. Die Beherrschung des Binärsystems ist vor allem auch wichtig, um
den folgenden Witz zu verstehen.`]}),`
`,S.jsx(e.pre,{children:S.jsx(e.code,{className:"language-text",children:`Es gitb nur 10 Arten von Menschen, diejenigen die das Binärsystem verstehen und
die anderen.
`})}),`
`,S.jsx(e.h2,{children:"Dezimalsystem"}),`
`,S.jsx(e.p,{children:`Bevor wir uns das Binärsystem aber genauer anschauen, versuchen wir zu
verstehen, wie Zahlensysteme generell funktionieren. Dafür schauen wir und das
Dezimalsystem genauer an, da Sie dieses schon kennen.`}),`
`,S.jsxs(e.p,{children:["Die Zahl ",S.jsx(Ft,{children:"273"}),` im Dezimalsystem, hat einen klaren Wert für Sie,
genau wie die Zahl `,S.jsx(Ft,{children:"721."}),` Für Sie ist auch absolut klar dass
`,S.jsx(Ft,{children:"273 < 721"}),` ist. Dazu müssen Sie nicht mal die ganze Zahl anschauen,
es reicht völlig wenn Sie auf die hunderter Stelle schauen. Aber was genau ist
denn die hunderter Stelle?`]}),`
`,S.jsx(e.p,{children:`Um den Wert einer mehrstelligen Zahl zu erhalten, wenden wir eigentlich immer
einen Trick an. Im Dezimalsystem haben wir diese Stellen sogar benannt. Der
Trick sieht dann wie folgt aus:`}),`
`,S.jsx(rc,{children:String.raw`273 = 2 \cdot 100 + 7 \cdot 10 + 3 \cdot 1`}),`
`,S.jsxs(e.p,{children:[`So können wir den Wert der Zahl ganz einfach berechnen. Da es aber aufwendig
ist, die Zahl immer so aufzuschreiben, schreibt man die Zahl in der Kurzform,
so wie sie auf der linken Seite steht, also `,S.jsx(Ft,{children:"273"}),`. Wir können die
Regel mit der Summe die wir oben verwendet haben, aber noch allgemeiner
schreiben. Wenn wir das machen, dann sollten wir danach jedes beliebige
Zahlensystem verstehen, oder zumindest den Wert der Zahl im Dezimalsystem
berechnen können. Die Regel sieht wie folgt aus:`]}),`
`,S.jsx(rc,{children:String.raw`273 = 2 \cdot 10^2 + 7 \cdot 10^1 + 3 \cdot 10^0`}),`
`,S.jsxs(e.p,{children:["Beginnen wir bei ",S.jsx(Ft,{children:"0"}),` zu zählen, so wie es in der Informatik üblich
ist, dann können wir den Wert einer Stelle immer mit
`,S.jsx(Ft,{children:String.raw`\mathrm{Basis}^\mathrm{Stelle}`}),` darstellen. So kommen
wir auf den Wert der Stelle, also `,S.jsx(Ft,{children:"10^0"}),` für die Einerstelle,
`,S.jsx(Ft,{children:"10^1"})," für die Zehnerstelle, ",S.jsx(Ft,{children:"10^2"}),` für die
Hunderterstelle und so weiter.`]}),`
`,S.jsxs(e.p,{children:[`Der Wert an der jeweiligen Stelle, wird dann mit der Ziffer angegeben. Also die
Zahl `,S.jsx(Ft,{children:"273"})," hat an der Hunderterstelle den folgenden Wert:"]}),`
`,S.jsx(rc,{children:String.raw`2 \cdot 10^2`}),`
`,S.jsx(e.p,{children:"Die gleichen Regeln lassen sich nun auf alle anderen Zahlensysteme anwenden."}),`
`,S.jsx(e.h2,{children:"Ziffern im Binärsystem"}),`
`,S.jsxs(e.p,{children:["Das Binärsystem hat nur 2 Ziffern, die ",S.jsx(Ft,{children:"0"})," und die ",S.jsx(Ft,{children:"1"}),`.
Sie können also Zahlen nur mit diesen beiden Ziffern schreiben, wie zum
Beispiel die Zahl `,S.jsx(Ft,{children:String.raw`10_{\mathrm{Bin}}`}),`. Oftmals
schreiben wir dafür auch `,S.jsx(e.code,{children:"0b10"}),`, wenn es einfacher ist. Das zweite ist auch die
Schreibweise die in der Informatik verbreitet ist, das erste wird mehr in der
Mathematik verwendet.`]}),`
`,S.jsx(e.p,{children:`Aber was hat diese Zahl nun für einen Wert? Das können wir mit der Regel von
oben ganze einfach ausrechnen:`}),`
`,S.jsx(rc,{children:String.raw`1 \cdot 2^1 + 0 \cdot 2^0 = 2_\mathrm{Dec}`}),`
`,S.jsx(e.p,{children:`Genau das Schema können Sie bei allen Binärzahlen anwenden, dann erhalten Sie
immer der Wert im Dezimalsystem.`}),`
`,S.jsxs(jo,{title:"Aufgabe: Von Binär zu Dezimal",children:[S.jsx(e.p,{children:"Bestimmen Sie den Dezimalwert der folgenden Binärzahlen."}),S.jsxs(e.ul,{children:[`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Sd,{tip:"4",children:S.jsx(e.code,{children:"0b0100"})}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Sd,{tip:"10",children:S.jsx(e.code,{children:"0b1010"})}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Sd,{tip:"1",children:S.jsx(e.code,{children:"0b0001"})}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Sd,{tip:"15",children:S.jsx(e.code,{children:"0b1111"})}),`
`]}),`
`]}),S.jsx(e.p,{children:"Bestimmen Sie auch den Wert von diesen grösseren Binärzahlen"}),S.jsxs(e.ul,{children:[`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Sd,{tip:"75",children:S.jsx(e.code,{children:"0b1000 1011"})}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Sd,{tip:"24",children:S.jsx(e.code,{children:"0b0001 1000"})}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Sd,{tip:"255",children:S.jsx(e.code,{children:"0b1111 1111"})}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Sd,{tip:"240",children:S.jsx(e.code,{children:"0b1111 0000"})}),`
`]}),`
`]}),S.jsxs(e.p,{children:["Die grösste Zahl mit 8 Stellen ist also die Zahl ",S.jsx(e.code,{children:"0b1111 1111"}),`, mit dem
Wert 255. Das ist genau ein `,S.jsx(e.code,{children:"Byte"})," wo alle ",S.jsx(e.code,{children:"Bits"})," auf ",S.jsx(e.code,{children:"1"}),` gesetzt wurden.
Daraus können Sie ablesen das Sie mit einem `,S.jsx(e.code,{children:"Byte"}),` genau 256 Informationen
darstellen können, also die Zahlen von 0 bis 255.`]})]}),`
`,S.jsx(e.h2,{children:"Von der Dezimalzahl zur Binärzahl"}),`
`,S.jsx(e.p,{children:`Dieser Weg wird deutlich weniger oft gebraucht, dennoch schauen wir es kurz an.
Wenn Sie eine Dezimalzahl in eine Binärzahl umwandeln möchten, können Sie mit
einem ganz einfachen Algorithmus vorgehen. Dabei schreiben wir die Binärzahl
von hinten nach vorne.`}),`
`,S.jsxs(e.p,{children:["Nehmen wir als Beispiel die Zahl ",S.jsx(Ft,{children:String.raw`43_\mathrm{Dec}`}),`.
Nun dividieren wir diese Zahl durch 2, und wir notieren den Rest. Wenn es einen
Rest gibt, dann schreiben wir eine `,S.jsx(Ft,{children:"1"}),`. Wenn es keinen Rest gibt,
dann schreiben wir an der Stelle eine `,S.jsx(Ft,{children:"0"}),`. Dann rechnen wir mit dem
Ergebnis weiter, lassen den Rest aber weg. Das machen wir bis wir bei
`,S.jsx(Ft,{children:"0"})," angekommen sind."]}),`
`,S.jsx(rc,{children:String.raw`
  \begin{align*}
  43 : 2 = 21.5 &\Rightarrow \text{0er-Stelle} \Rightarrow 0.5 \cdot 2 = 1 \\
  21 : 2 = 10.5 &\Rightarrow \text{1er-Stelle} \Rightarrow 0.5 \cdot 2 = 1 \\
  10 : 2 = 5 &\Rightarrow \text{2er-Stelle} \Rightarrow 0.0 \cdot 2 = 0 \\
  5 : 2 = 2.5 &\Rightarrow \text{3er-Stelle} \Rightarrow 0.5 \cdot 2 = 1 \\
  2 : 2 = 1 &\Rightarrow \text{4er-Stelle} \Rightarrow 0.0 \cdot 2 = 0 \\
  1 : 2 = 0.5 &\Rightarrow \text{5er-Stelle} \Rightarrow 0.5 \cdot 2 = 1
  \end{align*}
`}),`
`,S.jsxs(e.p,{children:[`Wir erhalten damit also die folgende Binärzahl:
`,S.jsx(Ft,{children:String.raw`101011_\mathrm{Bin}`}),"."]})]})}function l$e(n={}){const{wrapper:e}=n.components||{};return e?S.jsx(e,{...n,children:S.jsx(VG,{...n})}):VG(n)}var DD={},$G;function c$e(){return $G||($G=1,function(n){(function(e){var t=function(o,a){return new i(o,a).toString()},i=function(o,a){const l=this,c=8;switch(typeof Buffer<"u"&&(o=Buffer.isBuffer(o)&&o||typeof o=="string"&&Buffer.from(o)||o&&o.constructor===Array&&Buffer.from(o)||Buffer.alloc(0)),o=o||[],a=a||{},l.buffer=o,l.bytes_per_line=parseInt(a.width)||16,l.numbering=a.numbering=="none"?"none":"hex_bytes",l.bytes_per_group=2,a.format){case"none":l.bytes_per_group=0;break;case"twos":l.bytes_per_group=1;break;case"eights":l.bytes_per_group=4;break;case"sixteens":l.bytes_per_group=8;break}switch(l.littleEndian=a.littleEndian||!1,l.radix=a.radix||16,l.caps=a.caps=="upper"?"upper":"lower",l.annotate=a.annotate=="none"?"none":"ascii",l.prefix=a.prefix||"",l.indent=a.indent||0,l.html=a.html||!1,l.offset=a.offset||0,l.length=a.length||-1,l.extendedChs=a.extendedChs||!1,l.display_offset=a.display_offset||0,l.offset&&l.offset<l.buffer.length&&(l.buffer=l.buffer.slice(l.offset)),l.length!==-1&&l.length<=l.buffer.length&&(l.buffer=l.buffer.slice(0,l.length)),l.prefix=(l.html?"&nbsp;":" ").repeat(l.indent)+l.prefix,l.hex_line_length=r(l.bytes_per_group,l.radix)*l.bytes_per_line/Math.max(l.bytes_per_group,1),l.bytes_per_group){case 8:case 4:case 2:l.hex_line_length+=Math.floor(l.bytes_per_line/l.bytes_per_group);break;case 1:l.hex_line_length+=l.bytes_per_line+3;break;case 0:l.hex_line_length+=2;break}l.bytes_per_group=Math.min(l.bytes_per_group,l.bytes_per_line),this.toString=function(){var w="",y=l.offset+l.display_offset,k=!1;l.html&&(w+=`<div class='hexy'>
`);for(var L=0;L<l.buffer.length;L+=l.bytes_per_line){const N=Math.min(L+l.bytes_per_line,l.buffer.length),D=l.buffer.slice(L,N);if(l.html&&(w+="<div class='"+u(y,c,16)+(k?"  odd":" even")+"'>",k=!k),w+=l.prefix,l.numbering==="hex_bytes"&&(w+=u(y,c,16)+": "),w+=h(D,l.bytes_per_line,l.bytes_per_group,l.radix,l.littleEndian),l.annotate==="ascii"){var T="";switch(D.constructor){case Array:T=String.fromCharCode.apply(l,D);break;case Uint8Array:D.forEach(O=>T+=String.fromCharCode(O));break;default:T=D.toString("latin1")}w+=" "+(l.html?_(T):b(T))}w+=l.html?`</div>
`:`
`,y+=l.bytes_per_line}return l.html&&(w+=`</div>
`),w};var h=function(w,y,k,L,T){var N="";const D=k==0?"":" ",O=r(k,L),B=(y-w.length)*(k==0?O:(O+1)/k);k==0&&(k=1);const G=T?k-1:0,H=T?-1:k,q=T?-1:1;for(var X=0;X<w.length/k;++X){for(var z=k<4?0:BigInt(0),Q=G;Q!=H;Q+=q){const Y=X*k+Q;if(Y>=w.length)break;k<4?z=z*256+((w.constructor==String?w.codePointAt(Y):w[Y])&255):z=BigInt(z)*BigInt(256)+BigInt((w.constructor==String?w.codePointAt(Y):w[Y])&255)}const se=z.toString(L);for(var te=0;te<O-se.length;te++)N+="0";N+=se,N+=D,l.caps==="upper"&&(N=N.toUpperCase())}return w.length<y&&(N+=(l.html?"&nbsp;":" ").repeat(B)),N=d(N,l.hex_line_length),N},u=function(w,y,k){const L=w.toString(k);return"0".repeat(y-L.length)+L},d=function(w,y){const k=y-w.length-1;return k>0&&(w+=(l.html?"&nbsp;":" ").repeat(k)),w};const g=/[^\x20-\x7f]/g,p=/[\x00-\x1f]/g;var b=function(w){return w.replace(l.extendedChs?p:g,".")},_=function(w){return w=w.replace(/&/g,"&amp;"),w=w.replace(/</g,"&lt;"),w=w.replace(/>/g,"&gt;"),l.extendedChs?(w=w.replace(/\'/g,"&apos;"),w=w.replace(/\"/g,"&quot;"),w=w.replace(g,function(y){return y=y.codePointAt(0),"&#x"+y.toString(16)+";"})):w=w.replace(g,"."),w}};i.VERSION="0.3.4";var r=function(o,a){var l=2;switch(o==0&&(o=1),a){case 2:l=o*8;break;case 8:switch(o){case 1:l=3;break;case 2:l=6;break;case 4:l=11;break;case 8:l=22;break}break;case 10:switch(o){case 1:l=3;break;case 2:l=6;break;case 4:l=10;break;case 8:l=20;break}break;case 16:l=2*o;break}return l},s;s=n,s.hexy=t,s.Hexy=i,s.maxnumberlen=r})()}(DD)),DD}var h$e=c$e();function u$e(){const[n,e]=Pe.useState("Hello World!"),[t,i]=Pe.useState({width:4,numbering:"none",format:"twos",radix:16}),r=Pe.useRef(null),s=a=>{i(l=>({...l,radix:a}))},o=a=>{e(a)};return S.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[S.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"1rem"},children:[S.jsx("button",{onClick:()=>s(2),children:"Binary"}),S.jsx("button",{onClick:()=>s(8),children:"Octal"}),S.jsx("button",{onClick:()=>s(10),children:"Decimal"}),S.jsx("button",{onClick:()=>s(16),children:"Hexadecimal"})]}),S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",gap:"1em"},children:[S.jsx(Uy,{language:"json",value:n,height:"300px",theme:"vs-dark",onChange:o}),S.jsx("pre",{ref:r,style:{border:"1px solid black",width:"320px",height:"300px",marginRight:"1em",overflowY:"scroll"},children:h$e.hexy(n,t)})]})]})}function jG(n){const e={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...n.components};return S.jsxs(S.Fragment,{children:[S.jsx(e.h2,{children:"Hexadezimalsystem"}),`
`,S.jsxs(e.p,{children:[`Neben dem Dezimal- und dem Binärzahlensystem, gibt es noch weitere
Zahlensysteme, wie zum Beispiel das Hexadezimalsystem. Das Hexadezimalsystem
ist in der Informatik sehr praktisch, da man ein `,S.jsx(e.code,{children:"Byte"}),` immer mit genau 2
Stellen darstellen kann. Man braucht also deutlich weniger Platz wie beim
Binärsystem und das ganze wird viel einfacher zu lesen. Sie denken nun
wahrscheinlich; wieso denn nicht direkt das Dezimalsystem, das wäre ja am
einfachsten zum lesen. Das mag so sein, aber das Dezimalsystem geht mit einem
`,S.jsx(e.code,{children:"Byte"})," nicht gut auf. Denn ein ",S.jsx(e.code,{children:"Byte"})," kann die Zahlen ",S.jsx(Ft,{children:"0"}),` bis
`,S.jsx(Ft,{children:"255"}),` darstellen. Das bedeutet wir brauchen 3 Stellen für das
Dezimalsystem, und können gut `,S.jsx(Ft,{children:String.raw`\frac{3}{4}`}),` der Werte
nicht verwenden. Weitere Gründe sind das umrechnen in das Binärsystem, das über
das Hexadezimalsystem einfacher ist. Aber was genau ist jetzt das
Hexadezimalsystem?`]}),`
`,S.jsxs(jo,{title:"16er-System",children:[S.jsxs(e.p,{children:["Das Hexadezimalsystem ist das Zahlensystem mit der Basis 16, was von ",S.jsx(e.code,{children:"hexa     := 6"})," und ",S.jsx(e.code,{children:"dezimal := 10"}),`, kommt. Ansonsten funktioniert es genau gleich
wie die anderen Zahlensysteme, wir können also den Wert von einer
Hexadezimalzahl ganz einfach im Dezimalsystem berechnen.`]}),S.jsx(rc,{children:String.raw`
      92_{\mathrm{Hex}} = 9 \cdot 16^1 + 2 \cdot 16^0 = 146
  `}),S.jsxs(e.p,{children:["Die Zahl ist ja bereits sehr gross mit einer ",S.jsx(Ft,{children:"9"}),` an der ersten
Stelle, aber noch weit weg von der `,S.jsx(Ft,{children:"255"}),`. Wie können wir denn
noch grössere Zahlen machen?`]})]}),`
`,S.jsx(e.h3,{children:"Ziffern erweitern"}),`
`,S.jsxs(e.p,{children:["Im Binärsystem hatten wir nur die ",S.jsx(Ft,{children:"0"})," und ",S.jsx(Ft,{children:"1"}),` als Ziffern
gebraucht. Im Dezimalsystem brauchen wir alle Ziffern die wir kennen. Nun
brauchen wir aber 16 Ziffern, da wir sonst nicht alle Werte darstellen können.
Deshalb müssen wir die Ziffern einfach erweitern. Das machen wir indem wir das
Alphabet zur Hilfe nehmen. Unsere Ziffern gehen also von `,S.jsx(Ft,{children:"0"}),` bis
`,S.jsx(Ft,{children:String.raw`\mathrm{F}`}),", und haben die folgenden Werte:"]}),`
`,S.jsxs(e.ul,{children:[`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`0 \rightarrow 0`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`1 \rightarrow 1`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`2 \rightarrow 2`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`3 \rightarrow 3`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`4 \rightarrow 4`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`5 \rightarrow 5`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`6 \rightarrow 6`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`7 \rightarrow 7`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`8 \rightarrow 8`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`9 \rightarrow 9`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`\mathrm{A} \rightarrow 10`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`\mathrm{B} \rightarrow 11`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`\mathrm{C} \rightarrow 12`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`\mathrm{D} \rightarrow 13`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`\mathrm{E} \rightarrow 14`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`\mathrm{F} \rightarrow 15`}),`
`]}),`
`]}),`
`,S.jsx(e.p,{children:"Nun können wir also den grössten Wert einer 2-stelligen Hexzahl berechnen:"}),`
`,S.jsx(rc,{children:String.raw`
  \mathrm{FF}_\mathrm{Hex} = 15 \cdot 16^1 + 15 \cdot 16^0 = 240 + 15 = 255 
`}),`
`,S.jsxs(e.p,{children:["Das ist unglaublich praktisch für uns, denn so können wir ein ",S.jsx(e.code,{children:"Byte"}),` mit immer
genau 2 Stellen einer Hexzahl angeben. Das ist einer der Gründe weshalb das
Hexadezimalsystem in der Informatik gern verwendet wurde und immer noch wird.`]}),`
`,S.jsxs(jo,{title:"Aufgabe: Werte im Dezimalsystem berechnen",children:[S.jsx(e.p,{children:"Berechnen Sie die folgenden Werte im Dezimalsystem:"}),S.jsxs(e.ul,{children:[`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`62_\mathrm{Hex}`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`\mathrm{F0}_\mathrm{Hex}`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`\mathrm{0F}_\mathrm{Hex}`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`\mathrm{AB}_\mathrm{Hex}`}),`
`]}),`
`]})]}),`
`,S.jsx(e.h3,{children:"Von Dezimal zu Hex"}),`
`,S.jsxs(e.p,{children:[`Auch beim Hexadezimalsystem kann es vorkommen das wir eine Zahl vom
Dezimalsystem ins Hexadezimalsystem bringen müssen. Auch das geht recht
einfach, wir dividieren die Hexzahl durch 16 und der Rest ergibt die nächste
Stelle. Wenn das Resultat grösser als 16 ist, dann wiederholen wir den Vorgang
bis es nicht mehr möglich ist. Oder anders formuliert, wir schauen welche
Stellen aktiv sind. Wir möchten dafür die Zahl
`,S.jsx(Ft,{children:String.raw`6754_\mathrm{Dec}`}),` in eine Hexzahl umwandeln. Wir
dividieren also immer durch 16 und schauen uns den Rest an.`]}),`
`,S.jsx(rc,{children:String.raw`
  \begin{align*}
  6754 : 16 = 422.125 &\Rightarrow \text{0er-Stelle} \Rightarrow 0.125 \cdot 16 = 2 \\
  422 : 16 = 26.375 &\Rightarrow \text{1er-Stelle} \Rightarrow 0.375 \cdot 16 = 6 \\
  26 : 16 = 1.625 &\Rightarrow \text{2er-Stelle} \Rightarrow 0.625 \cdot 16 = 10 \\
  1 : 16 = 0.0625 &\Rightarrow \text{3er-Stelle} \Rightarrow 0.0625 \cdot 16 = 1 \\
  \end{align*}
`}),`
`,S.jsxs(e.p,{children:[`Dann können wir die Zahl einfach an den Stellen ablesen. Wir müssen nur noch
die Ziffern ersetzen, falls eine Stelle einen Wert von 10 oder mehr hat. Hier
ergibt sich also die Zahl
`,S.jsx(Ft,{children:String.raw`\mathrm{1A62}_\mathrm{Hex}`}),`. Somit können wir also in
beide Richtungen umrechnen.`]}),`
`,S.jsxs(jo,{title:"Aufgabe: Umrechnen ins Hexadezimalsystem",children:[S.jsx(e.p,{children:"Bestimmen Sie die Werte der folgenden Zahlen im Hexadezimalsystem:"}),S.jsxs(e.ul,{children:[`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`\mathrm{16}_\mathrm{Dec}`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`\mathrm{162}_\mathrm{Dec}`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`\mathrm{240}_\mathrm{Dec}`}),`
`]}),`
`,S.jsxs(e.li,{children:[`
`,S.jsx(Ft,{children:String.raw`\mathrm{255}_\mathrm{Dec}`}),`
`]}),`
`]})]}),`
`,S.jsx(e.h3,{children:"Warum das Hexadezimalsystem?"}),`
`,S.jsxs(e.p,{children:[`Auf modernen Computern wird das Hexadezimalsystem nicht mehr explizit
verwendet, denn es ist für uns unintuitiv und mühsam zum rechnen. Auf modernen
Computern gibt es so viele Schichten, die alles für Sie abstrahieren, das Sie
fast gar nicht in Berührung mit den `,S.jsx(e.code,{children:"Bits"})," und ",S.jsx(e.code,{children:"Bytes"}),` kommen. Bei der
Entstehung der Computer, war das noch ganz anders. In den Anfangszeiten wurde
noch direkt mit `,S.jsx(e.code,{children:"Bytes"})," gearbeitet. Da ein ",S.jsx(e.code,{children:"Byte"}),` aber 8 Stellen hat, und nur
aus `,S.jsx(e.code,{children:"0"})," und ",S.jsx(e.code,{children:"1"}),` besteht, passieren da recht schnell Fehler. Deshalb ist das
Hexadezimalsystem besser, denn man kann die Zahlen kompakter darstellen (nur 2
Stellen) und es wird auch übersichtlicher und einfacher zu merken.`]}),`
`,S.jsxs(e.p,{children:[`Heute finden Sie noch sehr oft Überreste vom Hexadezimalsystem im Umgang mit
dem Computer. Eine ganz normale Textdatei auf dem Computer ist immer nur im
ASCII-Code gespeichert, diese Datei lässt sich dann `,S.jsx(e.code,{children:"Byte"})," für ",S.jsx(e.code,{children:"Byte"}),` im
Hexadezimalcode lesen und mit Hilfe der ASCII-Tabelle direkt übersetzen. Das
folgende Beispiel zeigt wie so eine Datei aussehen könnte. Auf der rechten
Seite haben Sie den Inhalt der Datei, so wie wir als Menschen das ganze gerne
lesen würden, und auf der rechten Seite, finden Sie die Datei im
Hexadezimalformat.`]}),`
`,S.jsx(u$e,{}),`
`,S.jsx(e.h3,{children:"Farben und Hexadezimalsystem"}),`
`,S.jsxs(e.p,{children:[`Das Hexadezimalsystem ist auch bei den Farben sehr verbreitet, oder war es
früher einmal. Wenn Sie auf dem Computer eine Farbe darstellen möchten, also
auf dem Bildschirm, dann können Sie jede beliebige Farbe erzeugen, indem Sie
das Licht von 3 Grundfarben mischen, und zwar von `,S.jsx(e.code,{children:"rot"}),", ",S.jsx(e.code,{children:"grün"})," und ",S.jsx(e.code,{children:"blau"}),`. Die
Intensität der einzelnen Farben, können Sie jeweils von 0 bis 255 abstufen. So
brauchen Sie genau 1 `,S.jsx(e.code,{children:"Byte"})," für jeden Farbkanal, also 3 ",S.jsx(e.code,{children:"Bytes"}),` pro Pixel. Die
Farben werden dann immer so angegeben: `,S.jsx(e.code,{children:"#FF0037"}),`. Das wäre eine Farbe mit sehr
viel `,S.jsx(e.code,{children:"rot"}),", kein ",S.jsx(e.code,{children:"grün"})," und ein klein wenig ",S.jsx(e.code,{children:"blau"}),"."]})]})}function d$e(n={}){const{wrapper:e}=n.components||{};return e?S.jsx(e,{...n,children:S.jsx(jG,{...n})}):jG(n)}const f$e="/gym-inf/assets/notentabelle-6xgMTh6X.png";function UG(n){const e={a:"a",code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...n.components};return S.jsxs(S.Fragment,{children:[S.jsx(e.h2,{children:"Excel"}),`
`,S.jsxs(e.p,{children:[S.jsx(e.code,{children:"Excel"})," ist ein Werkzeug für die Tabellenkalkulation. ",S.jsx(e.code,{children:"Excel"}),` ist das Produkt
von Microsoft und ist in der Industrie und sonst so weit verbreitet, das man
`,S.jsx(e.code,{children:"Excel"}),` gerne als synonym für Tabellenkalkulation verwendet. Es gibt aber noch
viele andere Werkzeuge, mit denen man die gleichen Aufgaben lösen kann. Diese
Werkzeuge sind aber untereinander oftmals nicht ganz kompatibel. Auch innerhalb
der gleichen Anwendung ist nicht immer alles kompatibel. Gerade bei Excel gibt
es so viele verschiedene Versionen, da kann es schon mal passieren, das etwas
plötzlich nicht mehr funktioniert. Daher ist es für uns wichtig, das wir alle
die gleiche Version verwenden, oder so gleich wie möglich. Damit dies auch
sicher der Fall ist, werden wir alles im Webbrowser machen. Wenn Sie das Risiko
eingehen möchten und das ganze in der Desktop-App machen möchten, können Sie
dies gerne machen, es könnten aber unerwartet Probleme auftreten und es wird
nicht alles gleich aussehen. Und Sie wissen nicht unbedingt wo Ihre Daten
gespeichert werden. Wenn wir über den Browser arbeiten, dann sollte alles auf
Ihrem Schulaccount liegen, und Sie können Dateien einfach teilen bzw. abgeben.`]}),`
`,S.jsx(e.h2,{children:"Tabellenkalkulation"}),`
`,S.jsxs(e.p,{children:[`Was aber ist Tabellenkalkulation. Das ist sehr schwer genau zu definieren, im
Prinzip alles was mit der Verarbeitung von Daten in einer Tabelle zu tun hat.
Aber auch das führen von Listen, das Darstellen von Stundenplänen oder das
Berechnen Ihrer Zeugnisnoten können Sie mit einer Tabellenkalkulation lösen.
Nicht immer ist die Tabellenkalkulation das beste Werkzeug. Zum Beispiel
sollten Daten nur in einer Tabelle gespeichert werden, die Auswertung sollte
dann professionell mit einer Programmiersprache wie `,S.jsx(e.code,{children:"Python"}),` gemacht werden.
Dies ist für die meisten Benutzer aber zu viel, deshalb können einfache
Datenauswertungen auch in einer Tabellenkalkulation gemacht werden.`]}),`
`,S.jsx(e.p,{children:`Die Tabellenkalkulation ist ein sehr mächtiges Werkzeug, und kann wie bereits
erwähnt unterschiedliche Aufgaben lösen. Meistens gibt es eine bessere Lösung,
aber die Tabellenkalkulation ist oft die einfachste, die jede Person schnell
zum laufen bringen kann. Wir möchten uns hier einige Anwendungsfälle einer
Tabellenkalkulation anschauen. Dabei hinterfragen wir aber jedesmal ob es nicht
besser wäre, eine eigene App dafür zu haben, oder ob es andere Werkzeuge dafür
gibt. Denn Tabellenkalkulation wird in der Industrie viel zu viel eingesetzt,
auch wenn dies gar nicht nötig wäre.`}),`
`,S.jsxs(jo,{title:"Beispiel: Notentabelle",children:[S.jsxs(e.p,{children:[`Sie haben sicher bereits Ihre eigene Methode wie Sie Ihre Zeugnisnoten
ausrechnen. Oder Sie rechnen es garnicht aus und schauen die Noten einfach
im Schulnetz nach. Hier möchten wir uns aber ein Beispiel für eine solche
Notentabelle anschauen, und die einfachsten Features von `,S.jsx(e.code,{children:"Excel"}),`
kennenlernen.`]}),S.jsx(e.p,{children:"Hier sehen Sie das Endresultat, wie diese Tabelle dann aussehen könnte."}),S.jsx(BO,{src:f$e,imgStyle:{width:"80%"}}),S.jsx(e.p,{children:`Im Video weiter unten, können Sie die wichtigsten Teile von dieser Tabelle
Schritt-für-Schritt mitarbeiten.`})]}),`
`,S.jsx(e.h2,{children:"Videoanleitung"}),`
`,S.jsxs(e.p,{children:[`Hier finden Sie eine Anleitung wie man mit Excel umgehen kann und eine erste
Tabelle erstellen kann. Damit Sie dem Video auch folgen können, müssen Sie sich
zuerst noch bei Ihrer Schul-Onedrive anmelden: `,S.jsx(e.a,{href:"https://sblch-my.sharepoint.com/my",children:"https://sblch-my.sharepoint.com/my"})]}),`
`,S.jsx(OO,{url:"wNUOuEa7fYc"}),`
`,S.jsx(e.h2,{children:"Weitere Befehle"}),`
`,S.jsxs(e.p,{children:[S.jsx(e.code,{children:"Excel"}),` hat eine riesige Palette an Funktionen und Befehlen die Sie verwenden
können. Im Video wurden nicht alle gezeigt die in der ursprünglichen Tabelle
verwendet wurden.`]}),`
`,S.jsx(e.p,{children:`Versuchen Sie die fehlenden Zellen aus dem Video mit den folgenden Befehlen zu
ergänzen:`}),`
`,S.jsxs(e.ul,{children:[`
`,S.jsx(e.li,{children:S.jsx(e.code,{children:"=SUMMEWENN(...)"})}),`
`,S.jsx(e.li,{children:S.jsx(e.code,{children:"=ZÄHLENWENN(...)"})}),`
`]}),`
`,S.jsx(e.h2,{children:"Gelerntes Abspeichern"}),`
`,S.jsxs(e.p,{children:[`Wenn Sie fertig sind mit dieser Tabelle und Sie diese für sich selbst angepasst
haben, dann halten Sie das gelernte in irgend einer Form fest. Am besten machen
Sie das mit `,S.jsx(e.a,{href:"https://obsidian.md",children:"Obsidian"}),` oder einem anderen Werkzeug das Sie
bereits kennen. Sie können auch in der Tabelle selber Notizen machen, ihr
Wissen wird dann einfach auf verschiedene Tabellen verteilt sein und somit wird
es für Sie schwer alles wieder zu finden.`]})]})}function g$e(n={}){const{wrapper:e}=n.components||{};return e?S.jsx(e,{...n,children:S.jsx(UG,{...n})}):UG(n)}const m$e="/gym-inf/assets/excel-spielplan-D1jE9aU3.png";function qG(n){const e={a:"a",code:"code",h2:"h2",p:"p",strong:"strong",...n.components};return S.jsxs(S.Fragment,{children:[S.jsx(e.h2,{children:"Zusammenarbeiten in Excel"}),`
`,S.jsxs(e.p,{children:[`Wie im letzten Kapitel bereits angekündigt, kann Excel für alle möglichen Tasks
verwendet werden. Oftmals auch für Dinge, für die es ursprünglich nicht gemacht
wurde. Dank der Entwicklung von `,S.jsx(e.strong,{children:"Google Spreadsheets"}),`, was nur im Browser und
über die `,S.jsx(e.strong,{children:"Google Drive"}),` verfügbar ist, hat auch Excel nachziehen müssen, und
eine Vollversion des Programms im Browser zur Verfügung zu stellen. Damit sind
die Tage in denen man Excel-Sheets per Email verschickt hat, und niemand mehr
weiss welches die aktuelle Version ist, endlich vorbei. Zusätzlich können die
Sheets sogar gleichzeitig bearbeitet werden, und ermöglichen ganz neue Tasks,
die ursprünglich nicht vorgesehen waren. Wenn sich jeder an einfache Regeln
hält, dann können wir zum Beispiel einen Doodle ganz leicht über Excel
koordinieren, wir müssen nur jedem Bearbeiter einen Link schicken, der das
Sheet enthält. So können auch Personen die nicht in der gleichen Organisation
sind, oder keinen `,S.jsx(e.strong,{children:"Google Account"}),` haben, auf das Sheet zugreifen und
Änderungen einfügen. Wir müssen nicht mehr eine eigene Applikation dafür
erstellen.`]}),`
`,S.jsxs(jo,{title:"Beispiel: Spielplansitzung",children:[S.jsxs(e.p,{children:[`Im regionalen Volleyball war es seit Jahren so, dass man sich für die
Spielplansitzung vor Ort trifft, und dann in 30 Minuten alle Spiele der
Saison abmacht. Das hat oft dazu geführt das es überschneidungen gab, oder
es unnötig kompliziert wurde. Oftmals gab es sogar richtig schlechte
Spielpläne, je nach dem welche Teams die Spiele zuerst abgemacht haben. Mit
Covid brauchte es eine neue Lösung für das Problem, denn eine Sitzung mit
allen Teamverantwortlichen in einer Aula war nicht mehr möglich. Das
gleiche Format einfach nur digital mit Zoom und Breakout-Rooms zu machen,
erschien auch nicht sehr attraktiv, da die gleichen Probleme wie oben
bereits erwähnt, erhalten bleiben. Auf so kurze Zeit eine Applikation zu
entwerfen war auch nicht möglich, daher wurde das ganze mit geteilten
`,S.jsx(e.strong,{children:"Excel Sheets"}),` gelöst. Wie das ganze aussehen könnte, sehen Sie in dem
folgenden Bild.`]}),S.jsx(BO,{src:m$e,imgStyle:{width:"80%"}}),S.jsx(e.p,{children:`Im Video weiter unten, können Sie die wichtigsten Teile von dieser Tabelle
Schritt-für-Schritt mitarbeiten.`})]}),`
`,S.jsx(e.h2,{children:"Videoanleitung"}),`
`,S.jsxs(e.p,{children:[`Hier finden Sie den Link zum Onedrive-Ordner der Schule, damit können Sie alles
direkt im Browser mit dem Video mitarbeiten:
`,S.jsx(e.a,{href:"https://sblch-my.sharepoint.com/my",children:"https://sblch-my.sharepoint.com/my"})]}),`
`,S.jsx(OO,{url:"HuOC_rlxte4"}),`
`,S.jsxs(jo,{title:"Aufgabe: Sheet verbessern",children:[S.jsx(e.p,{children:`Finden Sie Möglichkeiten das Sheet weiter zu verbessern. Fügen Sie die
Teamnummer in die Tabelle mit ein. Zeigen Sie Überschneidungen an, wenn am
gleichen Tag ein Spiel abgemacht wird. Markieren Sie eine Zelle in
hellgrau, wenn das Auswärtsteam an dem Datum bereits ein Spiel abgemacht
hat. Markieren Sie alle Zellen mit dunkelgrau, wenn das Auswärtsteam am
gleichen Tag ein Heimspiel anbieten würde.`}),S.jsxs(e.p,{children:[`Sie können auch eigene Verbesserungen einbringen. Versuchen Sie dabei mit
zusätzlichen Tabellen und den Befehlen `,S.jsx(e.code,{children:"XVERGLEICH(...)"}),", ",S.jsx(e.code,{children:"INDEX(...)"}),`,
`,S.jsx(e.code,{children:"FILTER(...)"})," und ",S.jsx(e.code,{children:"SVERWEIS(...)"})," zu arbeiten."]})]})]})}function p$e(n={}){const{wrapper:e}=n.components||{};return e?S.jsx(e,{...n,children:S.jsx(qG,{...n})}):qG(n)}const b$e=()=>che([{path:"/",element:S.jsx(Xhe,{}),children:[{path:"/",element:S.jsx(Qhe,{})},{path:"obsidian",element:S.jsx(i$e,{})},{path:"obsidian-md",element:S.jsx(n$e,{})},{path:"colors",element:S.jsx(rDe,{})},{path:"information",element:S.jsx(sDe,{})},{path:"sprachen",element:S.jsx(s8e,{})},{path:"grammar",element:S.jsx(JVe,{})},{path:"praktikum/install",element:S.jsx(e$e,{})},{path:"fms-theorie",element:S.jsx(t$e,{})},{path:"fms/hardware",element:S.jsx(s$e,{})},{path:"fms/binary",element:S.jsx(l$e,{})},{path:"fms/hex",element:S.jsx(d$e,{})},{path:"fms/excel",element:S.jsx(g$e,{})},{path:"fms/excel-spielplan",element:S.jsx(p$e,{})},{path:"*",element:S.jsxs("div",{children:["Leider wurde hier keine Webseite gefunden. Gehe zurück zum"," ",S.jsx(qL,{to:"/",children:"Start"})]})}]}],{basename:"/gym-inf/"});function _$e(){const n=b$e();return n?S.jsx(_he,{router:n}):S.jsx("div",{children:"Loading..."})}Fle.createRoot(document.getElementById("root")).render(S.jsx(_$e,{}));export{Zee as $,$v as A,h8e as B,N9e as C,bO as D,bo as E,Hee as F,lBe as G,hAe as H,eq as I,pRe as J,q8e as K,U1 as L,fUe as M,y3 as N,u9e as O,OP as P,dq as Q,tAe as R,ux as S,aBe as T,Zy as U,v9e as V,Yy as W,Ct as X,Ht as Y,JOe as Z,R as _,k9e as a,Tne as a$,XMe as a0,Mq as a1,Nq as a2,xUe as a3,vUe as a4,CUe as a5,yUe as a6,bUe as a7,Gp as a8,YP as a9,YOe as aA,HPe as aB,VOe as aC,lO as aD,IG as aE,CFe as aF,QMe as aG,dUe as aH,$L as aI,nC as aJ,wFe as aK,vFe as aL,UP as aM,Md as aN,kq as aO,NNe as aP,sy as aQ,op as aR,ZOe as aS,Wne as aT,p3 as aU,w3 as aV,W4 as aW,Hne as aX,Fne as aY,LOe as aZ,Lt as a_,SUe as aa,_Ue as ab,LUe as ac,kUe as ad,wUe as ae,GFe as af,Yse as ag,OUe as ah,_Re as ai,vs as aj,Pf as ak,aO as al,yre as am,cp as an,Gne as ao,ci as ap,dh as aq,FWe as ar,PUe as as,BUe as at,AUe as au,It as av,RUe as aw,wWe as ax,mWe as ay,gWe as az,x9e as b,ya as b0,xNe as b1,jP as b2,hte as b3,Qy as b4,fte as b5,pUe as b6,c8e as b7,KOe as b8,HOe as b9,CM as bA,XOe as bB,v3 as bC,fn as bD,DPe as ba,cO as bb,COe as bc,QOe as bd,tC as be,bb as bf,O4 as bg,AOe as bh,aze as bi,eC as bj,F4 as bk,TOe as bl,Mne as bm,NPe as bn,MPe as bo,vg as bp,Qq as bq,APe as br,hO as bs,IPe as bt,OPe as bu,_b as bv,Rf as bw,Gq as bx,uO as by,Rne as bz,vn as c,Ji as d,Yee as e,gs as f,T9e as g,Vu as h,Il as i,xRe as j,mb as k,ze as l,Yne as m,gUe as n,WUe as o,D9e as p,E9e as q,FUe as r,L9e as s,bRe as t,oc as u,uWe as v,uBe as w,TUe as x,S9e as y,mUe as z};
