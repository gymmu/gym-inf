import{c as Ee,r as I,R as Z,j as O}from"./index-cIQnBFSb.js";var ut={exports:{}};/*!
 * matter-js 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(a,h){(function(F,d){a.exports=d()})(Ee,function(){return function(w){var F={};function d(e){if(F[e])return F[e].exports;var u=F[e]={i:e,l:!1,exports:{}};return w[e].call(u.exports,u,u.exports,d),u.l=!0,u.exports}return d.m=w,d.c=F,d.d=function(e,u,o){d.o(e,u)||Object.defineProperty(e,u,{enumerable:!0,get:o})},d.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(e,u){if(u&1&&(e=d(e)),u&8||u&4&&typeof e=="object"&&e&&e.__esModule)return e;var o=Object.create(null);if(d.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),u&2&&typeof e!="string")for(var n in e)d.d(o,n,(function(f){return e[f]}).bind(null,n));return o},d.n=function(e){var u=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(u,"a",u),u},d.o=function(e,u){return Object.prototype.hasOwnProperty.call(e,u)},d.p="",d(d.s=20)}([function(w,F){var d={};w.exports=d,function(){d._baseDelta=1e3/60,d._nextId=0,d._seed=0,d._nowStartTime=+new Date,d._warnedOnce={},d._decomp=null,d.extend=function(u,o){var n,f;typeof o=="boolean"?(n=2,f=o):(n=1,f=!0);for(var r=n;r<arguments.length;r++){var v=arguments[r];if(v)for(var l in v)f&&v[l]&&v[l].constructor===Object&&(!u[l]||u[l].constructor===Object)?(u[l]=u[l]||{},d.extend(u[l],f,v[l])):u[l]=v[l]}return u},d.clone=function(u,o){return d.extend({},o,u)},d.keys=function(u){if(Object.keys)return Object.keys(u);var o=[];for(var n in u)o.push(n);return o},d.values=function(u){var o=[];if(Object.keys){for(var n=Object.keys(u),f=0;f<n.length;f++)o.push(u[n[f]]);return o}for(var r in u)o.push(u[r]);return o},d.get=function(u,o,n,f){o=o.split(".").slice(n,f);for(var r=0;r<o.length;r+=1)u=u[o[r]];return u},d.set=function(u,o,n,f,r){var v=o.split(".").slice(f,r);return d.get(u,o,0,-1)[v[v.length-1]]=n,n},d.shuffle=function(u){for(var o=u.length-1;o>0;o--){var n=Math.floor(d.random()*(o+1)),f=u[o];u[o]=u[n],u[n]=f}return u},d.choose=function(u){return u[Math.floor(d.random()*u.length)]},d.isElement=function(u){return typeof HTMLElement<"u"?u instanceof HTMLElement:!!(u&&u.nodeType&&u.nodeName)},d.isArray=function(u){return Object.prototype.toString.call(u)==="[object Array]"},d.isFunction=function(u){return typeof u=="function"},d.isPlainObject=function(u){return typeof u=="object"&&u.constructor===Object},d.isString=function(u){return toString.call(u)==="[object String]"},d.clamp=function(u,o,n){return u<o?o:u>n?n:u},d.sign=function(u){return u<0?-1:1},d.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-d._nowStartTime},d.random=function(u,o){return u=typeof u<"u"?u:0,o=typeof o<"u"?o:1,u+e()*(o-u)};var e=function(){return d._seed=(d._seed*9301+49297)%233280,d._seed/233280};d.colorToNumber=function(u){return u=u.replace("#",""),u.length==3&&(u=u.charAt(0)+u.charAt(0)+u.charAt(1)+u.charAt(1)+u.charAt(2)+u.charAt(2)),parseInt(u,16)},d.logLevel=1,d.log=function(){console&&d.logLevel>0&&d.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.info=function(){console&&d.logLevel>0&&d.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.warn=function(){console&&d.logLevel>0&&d.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.warnOnce=function(){var u=Array.prototype.slice.call(arguments).join(" ");d._warnedOnce[u]||(d.warn(u),d._warnedOnce[u]=!0)},d.deprecated=function(u,o,n){u[o]=d.chain(function(){d.warnOnce("ðŸ”… deprecated ðŸ”…",n)},u[o])},d.nextId=function(){return d._nextId++},d.indexOf=function(u,o){if(u.indexOf)return u.indexOf(o);for(var n=0;n<u.length;n++)if(u[n]===o)return n;return-1},d.map=function(u,o){if(u.map)return u.map(o);for(var n=[],f=0;f<u.length;f+=1)n.push(o(u[f]));return n},d.topologicalSort=function(u){var o=[],n=[],f=[];for(var r in u)!n[r]&&!f[r]&&d._topologicalSort(r,n,f,u,o);return o},d._topologicalSort=function(u,o,n,f,r){var v=f[u]||[];n[u]=!0;for(var l=0;l<v.length;l+=1){var t=v[l];n[t]||o[t]||d._topologicalSort(t,o,n,f,r)}n[u]=!1,o[u]=!0,r.push(u)},d.chain=function(){for(var u=[],o=0;o<arguments.length;o+=1){var n=arguments[o];n._chained?u.push.apply(u,n._chained):u.push(n)}var f=function(){for(var r,v=new Array(arguments.length),l=0,t=arguments.length;l<t;l++)v[l]=arguments[l];for(l=0;l<u.length;l+=1){var i=u[l].apply(r,v);typeof i<"u"&&(r=i)}return r};return f._chained=u,f},d.chainPathBefore=function(u,o,n){return d.set(u,o,d.chain(n,d.get(u,o)))},d.chainPathAfter=function(u,o,n){return d.set(u,o,d.chain(d.get(u,o),n))},d.setDecomp=function(u){d._decomp=u},d.getDecomp=function(){var u=d._decomp;try{!u&&typeof window<"u"&&(u=window.decomp),!u&&typeof Ee<"u"&&(u=Ee.decomp)}catch{u=null}return u}}()},function(w,F){var d={};w.exports=d,function(){d.create=function(e){var u={min:{x:0,y:0},max:{x:0,y:0}};return e&&d.update(u,e),u},d.update=function(e,u,o){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var n=0;n<u.length;n++){var f=u[n];f.x>e.max.x&&(e.max.x=f.x),f.x<e.min.x&&(e.min.x=f.x),f.y>e.max.y&&(e.max.y=f.y),f.y<e.min.y&&(e.min.y=f.y)}o&&(o.x>0?e.max.x+=o.x:e.min.x+=o.x,o.y>0?e.max.y+=o.y:e.min.y+=o.y)},d.contains=function(e,u){return u.x>=e.min.x&&u.x<=e.max.x&&u.y>=e.min.y&&u.y<=e.max.y},d.overlaps=function(e,u){return e.min.x<=u.max.x&&e.max.x>=u.min.x&&e.max.y>=u.min.y&&e.min.y<=u.max.y},d.translate=function(e,u){e.min.x+=u.x,e.max.x+=u.x,e.min.y+=u.y,e.max.y+=u.y},d.shift=function(e,u){var o=e.max.x-e.min.x,n=e.max.y-e.min.y;e.min.x=u.x,e.max.x=u.x+o,e.min.y=u.y,e.max.y=u.y+n}}()},function(w,F){var d={};w.exports=d,function(){d.create=function(e,u){return{x:e||0,y:u||0}},d.clone=function(e){return{x:e.x,y:e.y}},d.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},d.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},d.rotate=function(e,u,o){var n=Math.cos(u),f=Math.sin(u);o||(o={});var r=e.x*n-e.y*f;return o.y=e.x*f+e.y*n,o.x=r,o},d.rotateAbout=function(e,u,o,n){var f=Math.cos(u),r=Math.sin(u);n||(n={});var v=o.x+((e.x-o.x)*f-(e.y-o.y)*r);return n.y=o.y+((e.x-o.x)*r+(e.y-o.y)*f),n.x=v,n},d.normalise=function(e){var u=d.magnitude(e);return u===0?{x:0,y:0}:{x:e.x/u,y:e.y/u}},d.dot=function(e,u){return e.x*u.x+e.y*u.y},d.cross=function(e,u){return e.x*u.y-e.y*u.x},d.cross3=function(e,u,o){return(u.x-e.x)*(o.y-e.y)-(u.y-e.y)*(o.x-e.x)},d.add=function(e,u,o){return o||(o={}),o.x=e.x+u.x,o.y=e.y+u.y,o},d.sub=function(e,u,o){return o||(o={}),o.x=e.x-u.x,o.y=e.y-u.y,o},d.mult=function(e,u){return{x:e.x*u,y:e.y*u}},d.div=function(e,u){return{x:e.x/u,y:e.y/u}},d.perp=function(e,u){return u=u===!0?-1:1,{x:u*-e.y,y:u*e.x}},d.neg=function(e){return{x:-e.x,y:-e.y}},d.angle=function(e,u){return Math.atan2(u.y-e.y,u.x-e.x)},d._temp=[d.create(),d.create(),d.create(),d.create(),d.create(),d.create()]}()},function(w,F,d){var e={};w.exports=e;var u=d(2),o=d(0);(function(){e.create=function(n,f){for(var r=[],v=0;v<n.length;v++){var l=n[v],t={x:l.x,y:l.y,index:v,body:f,isInternal:!1};r.push(t)}return r},e.fromPath=function(n,f){var r=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,v=[];return n.replace(r,function(l,t,i){v.push({x:parseFloat(t),y:parseFloat(i)})}),e.create(v,f)},e.centre=function(n){for(var f=e.area(n,!0),r={x:0,y:0},v,l,t,i=0;i<n.length;i++)t=(i+1)%n.length,v=u.cross(n[i],n[t]),l=u.mult(u.add(n[i],n[t]),v),r=u.add(r,l);return u.div(r,6*f)},e.mean=function(n){for(var f={x:0,y:0},r=0;r<n.length;r++)f.x+=n[r].x,f.y+=n[r].y;return u.div(f,n.length)},e.area=function(n,f){for(var r=0,v=n.length-1,l=0;l<n.length;l++)r+=(n[v].x-n[l].x)*(n[v].y+n[l].y),v=l;return f?r/2:Math.abs(r)/2},e.inertia=function(n,f){for(var r=0,v=0,l=n,t,i,s=0;s<l.length;s++)i=(s+1)%l.length,t=Math.abs(u.cross(l[i],l[s])),r+=t*(u.dot(l[i],l[i])+u.dot(l[i],l[s])+u.dot(l[s],l[s])),v+=t;return f/6*(r/v)},e.translate=function(n,f,r){r=typeof r<"u"?r:1;var v=n.length,l=f.x*r,t=f.y*r,i;for(i=0;i<v;i++)n[i].x+=l,n[i].y+=t;return n},e.rotate=function(n,f,r){if(f!==0){var v=Math.cos(f),l=Math.sin(f),t=r.x,i=r.y,s=n.length,m,y,S,T;for(T=0;T<s;T++)m=n[T],y=m.x-t,S=m.y-i,m.x=t+(y*v-S*l),m.y=i+(y*l+S*v);return n}},e.contains=function(n,f){for(var r=f.x,v=f.y,l=n.length,t=n[l-1],i,s=0;s<l;s++){if(i=n[s],(r-t.x)*(i.y-t.y)+(v-t.y)*(t.x-i.x)>0)return!1;t=i}return!0},e.scale=function(n,f,r,v){if(f===1&&r===1)return n;v=v||e.centre(n);for(var l,t,i=0;i<n.length;i++)l=n[i],t=u.sub(l,v),n[i].x=v.x+t.x*f,n[i].y=v.y+t.y*r;return n},e.chamfer=function(n,f,r,v,l){typeof f=="number"?f=[f]:f=f||[8],r=typeof r<"u"?r:-1,v=v||2,l=l||14;for(var t=[],i=0;i<n.length;i++){var s=n[i-1>=0?i-1:n.length-1],m=n[i],y=n[(i+1)%n.length],S=f[i<f.length?i:f.length-1];if(S===0){t.push(m);continue}var T=u.normalise({x:m.y-s.y,y:s.x-m.x}),b=u.normalise({x:y.y-m.y,y:m.x-y.x}),c=Math.sqrt(2*Math.pow(S,2)),p=u.mult(o.clone(T),S),C=u.normalise(u.mult(u.add(T,b),.5)),g=u.sub(m,u.mult(C,c)),E=r;r===-1&&(E=Math.pow(S,.32)*1.75),E=o.clamp(E,v,l),E%2===1&&(E+=1);for(var x=Math.acos(u.dot(T,b)),P=x/E,M=0;M<E;M++)t.push(u.add(u.rotate(p,P*M),g))}return t},e.clockwiseSort=function(n){var f=e.mean(n);return n.sort(function(r,v){return u.angle(f,r)-u.angle(f,v)}),n},e.isConvex=function(n){var f=0,r=n.length,v,l,t,i;if(r<3)return null;for(v=0;v<r;v++)if(l=(v+1)%r,t=(v+2)%r,i=(n[l].x-n[v].x)*(n[t].y-n[l].y),i-=(n[l].y-n[v].y)*(n[t].x-n[l].x),i<0?f|=1:i>0&&(f|=2),f===3)return!1;return f!==0?!0:null},e.hull=function(n){var f=[],r=[],v,l;for(n=n.slice(0),n.sort(function(t,i){var s=t.x-i.x;return s!==0?s:t.y-i.y}),l=0;l<n.length;l+=1){for(v=n[l];r.length>=2&&u.cross3(r[r.length-2],r[r.length-1],v)<=0;)r.pop();r.push(v)}for(l=n.length-1;l>=0;l-=1){for(v=n[l];f.length>=2&&u.cross3(f[f.length-2],f[f.length-1],v)<=0;)f.pop();f.push(v)}return f.pop(),r.pop(),f.concat(r)}})()},function(w,F,d){var e={};w.exports=e;var u=d(3),o=d(2),n=d(7),f=d(0),r=d(1),v=d(11);(function(){e._timeCorrection=!0,e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e._baseDelta=1e3/60,e.create=function(t){var i={id:f.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:u.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},s=f.extend(i,t);return l(s,t),s},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var l=function(t,i){i=i||{},e.set(t,{bounds:t.bounds||r.create(t.vertices),positionPrev:t.positionPrev||o.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),u.rotate(t.vertices,t.angle,t.position),v.rotate(t.axes,t.angle),r.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:i.axes||t.axes,area:i.area||t.area,mass:i.mass||t.mass,inertia:i.inertia||t.inertia});var s=t.isStatic?"#14151f":f.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),m=t.isStatic?"#555":"#ccc",y=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||s,t.render.strokeStyle=t.render.strokeStyle||m,t.render.lineWidth=t.render.lineWidth||y,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,i,s){var m;typeof i=="string"&&(m=i,i={},i[m]=s);for(m in i)if(Object.prototype.hasOwnProperty.call(i,m))switch(s=i[m],m){case"isStatic":e.setStatic(t,s);break;case"isSleeping":n.set(t,s);break;case"mass":e.setMass(t,s);break;case"density":e.setDensity(t,s);break;case"inertia":e.setInertia(t,s);break;case"vertices":e.setVertices(t,s);break;case"position":e.setPosition(t,s);break;case"angle":e.setAngle(t,s);break;case"velocity":e.setVelocity(t,s);break;case"angularVelocity":e.setAngularVelocity(t,s);break;case"speed":e.setSpeed(t,s);break;case"angularSpeed":e.setAngularSpeed(t,s);break;case"parts":e.setParts(t,s);break;case"centre":e.setCentre(t,s);break;default:t[m]=s}},e.setStatic=function(t,i){for(var s=0;s<t.parts.length;s++){var m=t.parts[s];i?(m.isStatic||(m._original={restitution:m.restitution,friction:m.friction,mass:m.mass,inertia:m.inertia,density:m.density,inverseMass:m.inverseMass,inverseInertia:m.inverseInertia}),m.restitution=0,m.friction=1,m.mass=m.inertia=m.density=1/0,m.inverseMass=m.inverseInertia=0,m.positionPrev.x=m.position.x,m.positionPrev.y=m.position.y,m.anglePrev=m.angle,m.angularVelocity=0,m.speed=0,m.angularSpeed=0,m.motion=0):m._original&&(m.restitution=m._original.restitution,m.friction=m._original.friction,m.mass=m._original.mass,m.inertia=m._original.inertia,m.density=m._original.density,m.inverseMass=m._original.inverseMass,m.inverseInertia=m._original.inverseInertia,m._original=null),m.isStatic=i}},e.setMass=function(t,i){var s=t.inertia/(t.mass/6);t.inertia=s*(i/6),t.inverseInertia=1/t.inertia,t.mass=i,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,i){e.setMass(t,i*t.area),t.density=i},e.setInertia=function(t,i){t.inertia=i,t.inverseInertia=1/t.inertia},e.setVertices=function(t,i){i[0].body===t?t.vertices=i:t.vertices=u.create(i,t),t.axes=v.fromVertices(t.vertices),t.area=u.area(t.vertices),e.setMass(t,t.density*t.area);var s=u.centre(t.vertices);u.translate(t.vertices,s,-1),e.setInertia(t,e._inertiaScale*u.inertia(t.vertices,t.mass)),u.translate(t.vertices,t.position),r.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,i,s){var m;for(i=i.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,m=0;m<i.length;m++){var y=i[m];y!==t&&(y.parent=t,t.parts.push(y))}if(t.parts.length!==1){if(s=typeof s<"u"?s:!0,s){var S=[];for(m=0;m<i.length;m++)S=S.concat(i[m].vertices);u.clockwiseSort(S);var T=u.hull(S),b=u.centre(T);e.setVertices(t,T),u.translate(t.vertices,b)}var c=e._totalProperties(t);t.area=c.area,t.parent=t,t.position.x=c.centre.x,t.position.y=c.centre.y,t.positionPrev.x=c.centre.x,t.positionPrev.y=c.centre.y,e.setMass(t,c.mass),e.setInertia(t,c.inertia),e.setPosition(t,c.centre)}},e.setCentre=function(t,i,s){s?(t.positionPrev.x+=i.x,t.positionPrev.y+=i.y,t.position.x+=i.x,t.position.y+=i.y):(t.positionPrev.x=i.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=i.y-(t.position.y-t.positionPrev.y),t.position.x=i.x,t.position.y=i.y)},e.setPosition=function(t,i,s){var m=o.sub(i,t.position);s?(t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.velocity.x=m.x,t.velocity.y=m.y,t.speed=o.magnitude(m)):(t.positionPrev.x+=m.x,t.positionPrev.y+=m.y);for(var y=0;y<t.parts.length;y++){var S=t.parts[y];S.position.x+=m.x,S.position.y+=m.y,u.translate(S.vertices,m),r.update(S.bounds,S.vertices,t.velocity)}},e.setAngle=function(t,i,s){var m=i-t.angle;s?(t.anglePrev=t.angle,t.angularVelocity=m,t.angularSpeed=Math.abs(m)):t.anglePrev+=m;for(var y=0;y<t.parts.length;y++){var S=t.parts[y];S.angle+=m,u.rotate(S.vertices,m,t.position),v.rotate(S.axes,m),r.update(S.bounds,S.vertices,t.velocity),y>0&&o.rotateAbout(S.position,m,t.position,S.position)}},e.setVelocity=function(t,i){var s=t.deltaTime/e._baseDelta;t.positionPrev.x=t.position.x-i.x*s,t.positionPrev.y=t.position.y-i.y*s,t.velocity.x=(t.position.x-t.positionPrev.x)/s,t.velocity.y=(t.position.y-t.positionPrev.y)/s,t.speed=o.magnitude(t.velocity)},e.getVelocity=function(t){var i=e._baseDelta/t.deltaTime;return{x:(t.position.x-t.positionPrev.x)*i,y:(t.position.y-t.positionPrev.y)*i}},e.getSpeed=function(t){return o.magnitude(e.getVelocity(t))},e.setSpeed=function(t,i){e.setVelocity(t,o.mult(o.normalise(e.getVelocity(t)),i))},e.setAngularVelocity=function(t,i){var s=t.deltaTime/e._baseDelta;t.anglePrev=t.angle-i*s,t.angularVelocity=(t.angle-t.anglePrev)/s,t.angularSpeed=Math.abs(t.angularVelocity)},e.getAngularVelocity=function(t){return(t.angle-t.anglePrev)*e._baseDelta/t.deltaTime},e.getAngularSpeed=function(t){return Math.abs(e.getAngularVelocity(t))},e.setAngularSpeed=function(t,i){e.setAngularVelocity(t,f.sign(e.getAngularVelocity(t))*i)},e.translate=function(t,i,s){e.setPosition(t,o.add(t.position,i),s)},e.rotate=function(t,i,s,m){if(!s)e.setAngle(t,t.angle+i,m);else{var y=Math.cos(i),S=Math.sin(i),T=t.position.x-s.x,b=t.position.y-s.y;e.setPosition(t,{x:s.x+(T*y-b*S),y:s.y+(T*S+b*y)},m),e.setAngle(t,t.angle+i,m)}},e.scale=function(t,i,s,m){var y=0,S=0;m=m||t.position;for(var T=0;T<t.parts.length;T++){var b=t.parts[T];u.scale(b.vertices,i,s,m),b.axes=v.fromVertices(b.vertices),b.area=u.area(b.vertices),e.setMass(b,t.density*b.area),u.translate(b.vertices,{x:-b.position.x,y:-b.position.y}),e.setInertia(b,e._inertiaScale*u.inertia(b.vertices,b.mass)),u.translate(b.vertices,{x:b.position.x,y:b.position.y}),T>0&&(y+=b.area,S+=b.inertia),b.position.x=m.x+(b.position.x-m.x)*i,b.position.y=m.y+(b.position.y-m.y)*s,r.update(b.bounds,b.vertices,t.velocity)}t.parts.length>1&&(t.area=y,t.isStatic||(e.setMass(t,t.density*y),e.setInertia(t,S))),t.circleRadius&&(i===s?t.circleRadius*=i:t.circleRadius=null)},e.update=function(t,i){i=(typeof i<"u"?i:1e3/60)*t.timeScale;var s=i*i,m=e._timeCorrection?i/(t.deltaTime||i):1,y=1-t.frictionAir*(i/f._baseDelta),S=(t.position.x-t.positionPrev.x)*m,T=(t.position.y-t.positionPrev.y)*m;t.velocity.x=S*y+t.force.x/t.mass*s,t.velocity.y=T*y+t.force.y/t.mass*s,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.deltaTime=i,t.angularVelocity=(t.angle-t.anglePrev)*y*m+t.torque/t.inertia*s,t.anglePrev=t.angle,t.angle+=t.angularVelocity;for(var b=0;b<t.parts.length;b++){var c=t.parts[b];u.translate(c.vertices,t.velocity),b>0&&(c.position.x+=t.velocity.x,c.position.y+=t.velocity.y),t.angularVelocity!==0&&(u.rotate(c.vertices,t.angularVelocity,t.position),v.rotate(c.axes,t.angularVelocity),b>0&&o.rotateAbout(c.position,t.angularVelocity,t.position,c.position)),r.update(c.bounds,c.vertices,t.velocity)}},e.updateVelocities=function(t){var i=e._baseDelta/t.deltaTime,s=t.velocity;s.x=(t.position.x-t.positionPrev.x)*i,s.y=(t.position.y-t.positionPrev.y)*i,t.speed=Math.sqrt(s.x*s.x+s.y*s.y),t.angularVelocity=(t.angle-t.anglePrev)*i,t.angularSpeed=Math.abs(t.angularVelocity)},e.applyForce=function(t,i,s){var m={x:i.x-t.position.x,y:i.y-t.position.y};t.force.x+=s.x,t.force.y+=s.y,t.torque+=m.x*s.y-m.y*s.x},e._totalProperties=function(t){for(var i={mass:0,area:0,inertia:0,centre:{x:0,y:0}},s=t.parts.length===1?0:1;s<t.parts.length;s++){var m=t.parts[s],y=m.mass!==1/0?m.mass:1;i.mass+=y,i.area+=m.area,i.inertia+=m.inertia,i.centre=o.add(i.centre,o.mult(m.position,y))}return i.centre=o.div(i.centre,i.mass),i}})()},function(w,F,d){var e={};w.exports=e;var u=d(0);(function(){e.on=function(o,n,f){for(var r=n.split(" "),v,l=0;l<r.length;l++)v=r[l],o.events=o.events||{},o.events[v]=o.events[v]||[],o.events[v].push(f);return f},e.off=function(o,n,f){if(!n){o.events={};return}typeof n=="function"&&(f=n,n=u.keys(o.events).join(" "));for(var r=n.split(" "),v=0;v<r.length;v++){var l=o.events[r[v]],t=[];if(f&&l)for(var i=0;i<l.length;i++)l[i]!==f&&t.push(l[i]);o.events[r[v]]=t}},e.trigger=function(o,n,f){var r,v,l,t,i=o.events;if(i&&u.keys(i).length>0){f||(f={}),r=n.split(" ");for(var s=0;s<r.length;s++)if(v=r[s],l=i[v],l){t=u.clone(f,!1),t.name=v,t.source=o;for(var m=0;m<l.length;m++)l[m].apply(o,[t])}}}})()},function(w,F,d){var e={};w.exports=e;var u=d(5),o=d(0),n=d(1),f=d(4);(function(){e.create=function(r){return o.extend({id:o.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},r)},e.setModified=function(r,v,l,t){if(r.isModified=v,v&&r.cache&&(r.cache.allBodies=null,r.cache.allConstraints=null,r.cache.allComposites=null),l&&r.parent&&e.setModified(r.parent,v,l,t),t)for(var i=0;i<r.composites.length;i++){var s=r.composites[i];e.setModified(s,v,l,t)}},e.add=function(r,v){var l=[].concat(v);u.trigger(r,"beforeAdd",{object:v});for(var t=0;t<l.length;t++){var i=l[t];switch(i.type){case"body":if(i.parent!==i){o.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(r,i);break;case"constraint":e.addConstraint(r,i);break;case"composite":e.addComposite(r,i);break;case"mouseConstraint":e.addConstraint(r,i.constraint);break}}return u.trigger(r,"afterAdd",{object:v}),r},e.remove=function(r,v,l){var t=[].concat(v);u.trigger(r,"beforeRemove",{object:v});for(var i=0;i<t.length;i++){var s=t[i];switch(s.type){case"body":e.removeBody(r,s,l);break;case"constraint":e.removeConstraint(r,s,l);break;case"composite":e.removeComposite(r,s,l);break;case"mouseConstraint":e.removeConstraint(r,s.constraint);break}}return u.trigger(r,"afterRemove",{object:v}),r},e.addComposite=function(r,v){return r.composites.push(v),v.parent=r,e.setModified(r,!0,!0,!1),r},e.removeComposite=function(r,v,l){var t=o.indexOf(r.composites,v);if(t!==-1){var i=e.allBodies(v);e.removeCompositeAt(r,t);for(var s=0;s<i.length;s++)i[s].sleepCounter=0}if(l)for(var s=0;s<r.composites.length;s++)e.removeComposite(r.composites[s],v,!0);return r},e.removeCompositeAt=function(r,v){return r.composites.splice(v,1),e.setModified(r,!0,!0,!1),r},e.addBody=function(r,v){return r.bodies.push(v),e.setModified(r,!0,!0,!1),r},e.removeBody=function(r,v,l){var t=o.indexOf(r.bodies,v);if(t!==-1&&(e.removeBodyAt(r,t),v.sleepCounter=0),l)for(var i=0;i<r.composites.length;i++)e.removeBody(r.composites[i],v,!0);return r},e.removeBodyAt=function(r,v){return r.bodies.splice(v,1),e.setModified(r,!0,!0,!1),r},e.addConstraint=function(r,v){return r.constraints.push(v),e.setModified(r,!0,!0,!1),r},e.removeConstraint=function(r,v,l){var t=o.indexOf(r.constraints,v);if(t!==-1&&e.removeConstraintAt(r,t),l)for(var i=0;i<r.composites.length;i++)e.removeConstraint(r.composites[i],v,!0);return r},e.removeConstraintAt=function(r,v){return r.constraints.splice(v,1),e.setModified(r,!0,!0,!1),r},e.clear=function(r,v,l){if(l)for(var t=0;t<r.composites.length;t++)e.clear(r.composites[t],v,!0);return v?r.bodies=r.bodies.filter(function(i){return i.isStatic}):r.bodies.length=0,r.constraints.length=0,r.composites.length=0,e.setModified(r,!0,!0,!1),r},e.allBodies=function(r){if(r.cache&&r.cache.allBodies)return r.cache.allBodies;for(var v=[].concat(r.bodies),l=0;l<r.composites.length;l++)v=v.concat(e.allBodies(r.composites[l]));return r.cache&&(r.cache.allBodies=v),v},e.allConstraints=function(r){if(r.cache&&r.cache.allConstraints)return r.cache.allConstraints;for(var v=[].concat(r.constraints),l=0;l<r.composites.length;l++)v=v.concat(e.allConstraints(r.composites[l]));return r.cache&&(r.cache.allConstraints=v),v},e.allComposites=function(r){if(r.cache&&r.cache.allComposites)return r.cache.allComposites;for(var v=[].concat(r.composites),l=0;l<r.composites.length;l++)v=v.concat(e.allComposites(r.composites[l]));return r.cache&&(r.cache.allComposites=v),v},e.get=function(r,v,l){var t,i;switch(l){case"body":t=e.allBodies(r);break;case"constraint":t=e.allConstraints(r);break;case"composite":t=e.allComposites(r).concat(r);break}return t?(i=t.filter(function(s){return s.id.toString()===v.toString()}),i.length===0?null:i[0]):null},e.move=function(r,v,l){return e.remove(r,v),e.add(l,v),r},e.rebase=function(r){for(var v=e.allBodies(r).concat(e.allConstraints(r)).concat(e.allComposites(r)),l=0;l<v.length;l++)v[l].id=o.nextId();return r},e.translate=function(r,v,l){for(var t=l?e.allBodies(r):r.bodies,i=0;i<t.length;i++)f.translate(t[i],v);return r},e.rotate=function(r,v,l,t){for(var i=Math.cos(v),s=Math.sin(v),m=t?e.allBodies(r):r.bodies,y=0;y<m.length;y++){var S=m[y],T=S.position.x-l.x,b=S.position.y-l.y;f.setPosition(S,{x:l.x+(T*i-b*s),y:l.y+(T*s+b*i)}),f.rotate(S,v)}return r},e.scale=function(r,v,l,t,i){for(var s=i?e.allBodies(r):r.bodies,m=0;m<s.length;m++){var y=s[m],S=y.position.x-t.x,T=y.position.y-t.y;f.setPosition(y,{x:t.x+S*v,y:t.y+T*l}),f.scale(y,v,l)}return r},e.bounds=function(r){for(var v=e.allBodies(r),l=[],t=0;t<v.length;t+=1){var i=v[t];l.push(i.bounds.min,i.bounds.max)}return n.create(l)}})()},function(w,F,d){var e={};w.exports=e;var u=d(4),o=d(5),n=d(0);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(f,r){for(var v=r/n._baseDelta,l=e._motionSleepThreshold,t=0;t<f.length;t++){var i=f[t],s=u.getSpeed(i),m=u.getAngularSpeed(i),y=s*s+m*m;if(i.force.x!==0||i.force.y!==0){e.set(i,!1);continue}var S=Math.min(i.motion,y),T=Math.max(i.motion,y);i.motion=e._minBias*S+(1-e._minBias)*T,i.sleepThreshold>0&&i.motion<l?(i.sleepCounter+=1,i.sleepCounter>=i.sleepThreshold/v&&e.set(i,!0)):i.sleepCounter>0&&(i.sleepCounter-=1)}},e.afterCollisions=function(f){for(var r=e._motionSleepThreshold,v=0;v<f.length;v++){var l=f[v];if(l.isActive){var t=l.collision,i=t.bodyA.parent,s=t.bodyB.parent;if(!(i.isSleeping&&s.isSleeping||i.isStatic||s.isStatic)&&(i.isSleeping||s.isSleeping)){var m=i.isSleeping&&!i.isStatic?i:s,y=m===i?s:i;!m.isStatic&&y.motion>r&&e.set(m,!1)}}}},e.set=function(f,r){var v=f.isSleeping;r?(f.isSleeping=!0,f.sleepCounter=f.sleepThreshold,f.positionImpulse.x=0,f.positionImpulse.y=0,f.positionPrev.x=f.position.x,f.positionPrev.y=f.position.y,f.anglePrev=f.angle,f.speed=0,f.angularSpeed=0,f.motion=0,v||o.trigger(f,"sleepStart")):(f.isSleeping=!1,f.sleepCounter=0,v&&o.trigger(f,"sleepEnd"))}})()},function(w,F,d){var e={};w.exports=e;var u=d(3),o=d(9);(function(){var n=[],f={overlap:0,axis:null},r={overlap:0,axis:null};e.create=function(v,l){return{pair:null,collided:!1,bodyA:v,bodyB:l,parentA:v.parent,parentB:l.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},e.collides=function(v,l,t){if(e._overlapAxes(f,v.vertices,l.vertices,v.axes),f.overlap<=0||(e._overlapAxes(r,l.vertices,v.vertices,l.axes),r.overlap<=0))return null;var i=t&&t.table[o.id(v,l)],s;i?s=i.collision:(s=e.create(v,l),s.collided=!0,s.bodyA=v.id<l.id?v:l,s.bodyB=v.id<l.id?l:v,s.parentA=s.bodyA.parent,s.parentB=s.bodyB.parent),v=s.bodyA,l=s.bodyB;var m;f.overlap<r.overlap?m=f:m=r;var y=s.normal,S=s.tangent,T=s.penetration,b=s.supports,c=m.overlap,p=m.axis,C=p.x,g=p.y,E=l.position.x-v.position.x,x=l.position.y-v.position.y;C*E+g*x>=0&&(C=-C,g=-g),y.x=C,y.y=g,S.x=-g,S.y=C,T.x=C*c,T.y=g*c,s.depth=c;var P=e._findSupports(v,l,y,1),M=0;if(u.contains(v.vertices,P[0])&&(b[M++]=P[0]),u.contains(v.vertices,P[1])&&(b[M++]=P[1]),M<2){var R=e._findSupports(l,v,y,-1);u.contains(l.vertices,R[0])&&(b[M++]=R[0]),M<2&&u.contains(l.vertices,R[1])&&(b[M++]=R[1])}return M===0&&(b[M++]=P[0]),s.supportCount=M,s},e._overlapAxes=function(v,l,t,i){var s=l.length,m=t.length,y=l[0].x,S=l[0].y,T=t[0].x,b=t[0].y,c=i.length,p=Number.MAX_VALUE,C=0,g,E,x,P,M,R;for(M=0;M<c;M++){var A=i[M],k=A.x,B=A.y,L=y*k+S*B,D=T*k+b*B,N=L,W=D;for(R=1;R<s;R+=1)P=l[R].x*k+l[R].y*B,P>N?N=P:P<L&&(L=P);for(R=1;R<m;R+=1)P=t[R].x*k+t[R].y*B,P>W?W=P:P<D&&(D=P);if(E=N-D,x=W-L,g=E<x?E:x,g<p&&(p=g,C=M,g<=0))break}v.axis=i[C],v.overlap=p},e._findSupports=function(v,l,t,i){var s=l.vertices,m=s.length,y=v.position.x,S=v.position.y,T=t.x*i,b=t.y*i,c=s[0],p=c,C=T*(y-p.x)+b*(S-p.y),g,E,x;for(x=1;x<m;x+=1)p=s[x],E=T*(y-p.x)+b*(S-p.y),E<C&&(C=E,c=p);return g=s[(m+c.index-1)%m],C=T*(y-g.x)+b*(S-g.y),p=s[(c.index+1)%m],T*(y-p.x)+b*(S-p.y)<C?(n[0]=c,n[1]=p,n):(n[0]=c,n[1]=g,n)}})()},function(w,F,d){var e={};w.exports=e;var u=d(16);(function(){e.create=function(o,n){var f=o.bodyA,r=o.bodyB,v={id:e.id(f,r),bodyA:f,bodyB:r,collision:o,contacts:[u.create(),u.create()],contactCount:0,separation:0,isActive:!0,isSensor:f.isSensor||r.isSensor,timeCreated:n,timeUpdated:n,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(v,o,n),v},e.update=function(o,n,f){var r=n.supports,v=n.supportCount,l=o.contacts,t=n.parentA,i=n.parentB;o.isActive=!0,o.timeUpdated=f,o.collision=n,o.separation=n.depth,o.inverseMass=t.inverseMass+i.inverseMass,o.friction=t.friction<i.friction?t.friction:i.friction,o.frictionStatic=t.frictionStatic>i.frictionStatic?t.frictionStatic:i.frictionStatic,o.restitution=t.restitution>i.restitution?t.restitution:i.restitution,o.slop=t.slop>i.slop?t.slop:i.slop,o.contactCount=v,n.pair=o;var s=r[0],m=l[0],y=r[1],S=l[1];(S.vertex===s||m.vertex===y)&&(l[1]=m,l[0]=m=S,S=l[1]),m.vertex=s,S.vertex=y},e.setActive=function(o,n,f){n?(o.isActive=!0,o.timeUpdated=f):(o.isActive=!1,o.contactCount=0)},e.id=function(o,n){return o.id<n.id?o.id.toString(36)+":"+n.id.toString(36):n.id.toString(36)+":"+o.id.toString(36)}})()},function(w,F,d){var e={};w.exports=e;var u=d(3),o=d(2),n=d(7),f=d(1),r=d(11),v=d(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(l){var t=l;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var i=t.bodyA?o.add(t.bodyA.position,t.pointA):t.pointA,s=t.bodyB?o.add(t.bodyB.position,t.pointB):t.pointB,m=o.magnitude(o.sub(i,s));t.length=typeof t.length<"u"?t.length:m,t.id=t.id||v.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var y={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(y.type="pin",y.anchors=!1):t.stiffness<.9&&(y.type="spring"),t.render=v.extend(y,t.render),t},e.preSolveAll=function(l){for(var t=0;t<l.length;t+=1){var i=l[t],s=i.constraintImpulse;i.isStatic||s.x===0&&s.y===0&&s.angle===0||(i.position.x+=s.x,i.position.y+=s.y,i.angle+=s.angle)}},e.solveAll=function(l,t){for(var i=v.clamp(t/v._baseDelta,0,1),s=0;s<l.length;s+=1){var m=l[s],y=!m.bodyA||m.bodyA&&m.bodyA.isStatic,S=!m.bodyB||m.bodyB&&m.bodyB.isStatic;(y||S)&&e.solve(l[s],i)}for(s=0;s<l.length;s+=1)m=l[s],y=!m.bodyA||m.bodyA&&m.bodyA.isStatic,S=!m.bodyB||m.bodyB&&m.bodyB.isStatic,!y&&!S&&e.solve(l[s],i)},e.solve=function(l,t){var i=l.bodyA,s=l.bodyB,m=l.pointA,y=l.pointB;if(!(!i&&!s)){i&&!i.isStatic&&(o.rotate(m,i.angle-l.angleA,m),l.angleA=i.angle),s&&!s.isStatic&&(o.rotate(y,s.angle-l.angleB,y),l.angleB=s.angle);var S=m,T=y;if(i&&(S=o.add(i.position,m)),s&&(T=o.add(s.position,y)),!(!S||!T)){var b=o.sub(S,T),c=o.magnitude(b);c<e._minLength&&(c=e._minLength);var p=(c-l.length)/c,C=l.stiffness>=1||l.length===0,g=C?l.stiffness*t:l.stiffness*t*t,E=l.damping*t,x=o.mult(b,p*g),P=(i?i.inverseMass:0)+(s?s.inverseMass:0),M=(i?i.inverseInertia:0)+(s?s.inverseInertia:0),R=P+M,A,k,B,L,D;if(E>0){var N=o.create();B=o.div(b,c),D=o.sub(s&&o.sub(s.position,s.positionPrev)||N,i&&o.sub(i.position,i.positionPrev)||N),L=o.dot(B,D)}i&&!i.isStatic&&(k=i.inverseMass/P,i.constraintImpulse.x-=x.x*k,i.constraintImpulse.y-=x.y*k,i.position.x-=x.x*k,i.position.y-=x.y*k,E>0&&(i.positionPrev.x-=E*B.x*L*k,i.positionPrev.y-=E*B.y*L*k),A=o.cross(m,x)/R*e._torqueDampen*i.inverseInertia*(1-l.angularStiffness),i.constraintImpulse.angle-=A,i.angle-=A),s&&!s.isStatic&&(k=s.inverseMass/P,s.constraintImpulse.x+=x.x*k,s.constraintImpulse.y+=x.y*k,s.position.x+=x.x*k,s.position.y+=x.y*k,E>0&&(s.positionPrev.x+=E*B.x*L*k,s.positionPrev.y+=E*B.y*L*k),A=o.cross(y,x)/R*e._torqueDampen*s.inverseInertia*(1-l.angularStiffness),s.constraintImpulse.angle+=A,s.angle+=A)}}},e.postSolveAll=function(l){for(var t=0;t<l.length;t++){var i=l[t],s=i.constraintImpulse;if(!(i.isStatic||s.x===0&&s.y===0&&s.angle===0)){n.set(i,!1);for(var m=0;m<i.parts.length;m++){var y=i.parts[m];u.translate(y.vertices,s),m>0&&(y.position.x+=s.x,y.position.y+=s.y),s.angle!==0&&(u.rotate(y.vertices,s.angle,i.position),r.rotate(y.axes,s.angle),m>0&&o.rotateAbout(y.position,s.angle,i.position,y.position)),f.update(y.bounds,y.vertices,i.velocity)}s.angle*=e._warming,s.x*=e._warming,s.y*=e._warming}}},e.pointAWorld=function(l){return{x:(l.bodyA?l.bodyA.position.x:0)+(l.pointA?l.pointA.x:0),y:(l.bodyA?l.bodyA.position.y:0)+(l.pointA?l.pointA.y:0)}},e.pointBWorld=function(l){return{x:(l.bodyB?l.bodyB.position.x:0)+(l.pointB?l.pointB.x:0),y:(l.bodyB?l.bodyB.position.y:0)+(l.pointB?l.pointB.y:0)}},e.currentLength=function(l){var t=(l.bodyA?l.bodyA.position.x:0)+(l.pointA?l.pointA.x:0),i=(l.bodyA?l.bodyA.position.y:0)+(l.pointA?l.pointA.y:0),s=(l.bodyB?l.bodyB.position.x:0)+(l.pointB?l.pointB.x:0),m=(l.bodyB?l.bodyB.position.y:0)+(l.pointB?l.pointB.y:0),y=t-s,S=i-m;return Math.sqrt(y*y+S*S)}})()},function(w,F,d){var e={};w.exports=e;var u=d(2),o=d(0);(function(){e.fromVertices=function(n){for(var f={},r=0;r<n.length;r++){var v=(r+1)%n.length,l=u.normalise({x:n[v].y-n[r].y,y:n[r].x-n[v].x}),t=l.y===0?1/0:l.x/l.y;t=t.toFixed(3).toString(),f[t]=l}return o.values(f)},e.rotate=function(n,f){if(f!==0)for(var r=Math.cos(f),v=Math.sin(f),l=0;l<n.length;l++){var t=n[l],i;i=t.x*r-t.y*v,t.y=t.x*v+t.y*r,t.x=i}}})()},function(w,F,d){var e={};w.exports=e;var u=d(3),o=d(0),n=d(4),f=d(1),r=d(2);(function(){e.rectangle=function(v,l,t,i,s){s=s||{};var m={label:"Rectangle Body",position:{x:v,y:l},vertices:u.fromPath("L 0 0 L "+t+" 0 L "+t+" "+i+" L 0 "+i)};if(s.chamfer){var y=s.chamfer;m.vertices=u.chamfer(m.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete s.chamfer}return n.create(o.extend({},m,s))},e.trapezoid=function(v,l,t,i,s,m){m=m||{},s>=1&&o.warn("Bodies.trapezoid: slope parameter must be < 1."),s*=.5;var y=(1-s*2)*t,S=t*s,T=S+y,b=T+S,c;s<.5?c="L 0 0 L "+S+" "+-i+" L "+T+" "+-i+" L "+b+" 0":c="L 0 0 L "+T+" "+-i+" L "+b+" 0";var p={label:"Trapezoid Body",position:{x:v,y:l},vertices:u.fromPath(c)};if(m.chamfer){var C=m.chamfer;p.vertices=u.chamfer(p.vertices,C.radius,C.quality,C.qualityMin,C.qualityMax),delete m.chamfer}return n.create(o.extend({},p,m))},e.circle=function(v,l,t,i,s){i=i||{};var m={label:"Circle Body",circleRadius:t};s=s||25;var y=Math.ceil(Math.max(10,Math.min(s,t)));return y%2===1&&(y+=1),e.polygon(v,l,y,t,o.extend({},m,i))},e.polygon=function(v,l,t,i,s){if(s=s||{},t<3)return e.circle(v,l,i,s);for(var m=2*Math.PI/t,y="",S=m*.5,T=0;T<t;T+=1){var b=S+T*m,c=Math.cos(b)*i,p=Math.sin(b)*i;y+="L "+c.toFixed(3)+" "+p.toFixed(3)+" "}var C={label:"Polygon Body",position:{x:v,y:l},vertices:u.fromPath(y)};if(s.chamfer){var g=s.chamfer;C.vertices=u.chamfer(C.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete s.chamfer}return n.create(o.extend({},C,s))},e.fromVertices=function(v,l,t,i,s,m,y,S){var T=o.getDecomp(),b,c,p,C,g,E,x,P,M,R,A;for(b=!!(T&&T.quickDecomp),i=i||{},p=[],s=typeof s<"u"?s:!1,m=typeof m<"u"?m:.01,y=typeof y<"u"?y:10,S=typeof S<"u"?S:.01,o.isArray(t[0])||(t=[t]),R=0;R<t.length;R+=1)if(E=t[R],C=u.isConvex(E),g=!C,g&&!b&&o.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),C||!b)C?E=u.clockwiseSort(E):E=u.hull(E),p.push({position:{x:v,y:l},vertices:E});else{var k=E.map(function(V){return[V.x,V.y]});T.makeCCW(k),m!==!1&&T.removeCollinearPoints(k,m),S!==!1&&T.removeDuplicatePoints&&T.removeDuplicatePoints(k,S);var B=T.quickDecomp(k);for(x=0;x<B.length;x++){var L=B[x],D=L.map(function(V){return{x:V[0],y:V[1]}});y>0&&u.area(D)<y||p.push({position:u.centre(D),vertices:D})}}for(x=0;x<p.length;x++)p[x]=n.create(o.extend(p[x],i));if(s){var N=5;for(x=0;x<p.length;x++){var W=p[x];for(P=x+1;P<p.length;P++){var U=p[P];if(f.overlaps(W.bounds,U.bounds)){var H=W.vertices,j=U.vertices;for(M=0;M<W.vertices.length;M++)for(A=0;A<U.vertices.length;A++){var Q=r.magnitudeSquared(r.sub(H[(M+1)%H.length],j[A])),$=r.magnitudeSquared(r.sub(H[M],j[(A+1)%j.length]));Q<N&&$<N&&(H[M].isInternal=!0,j[A].isInternal=!0)}}}}}return p.length>1?(c=n.create(o.extend({parts:p.slice(0)},i)),n.setPosition(c,{x:v,y:l}),c):p[0]}})()},function(w,F,d){var e={};w.exports=e;var u=d(0),o=d(8);(function(){e.create=function(n){var f={bodies:[],collisions:[],pairs:null};return u.extend(f,n)},e.setBodies=function(n,f){n.bodies=f.slice(0)},e.clear=function(n){n.bodies=[],n.collisions=[]},e.collisions=function(n){var f=n.pairs,r=n.bodies,v=r.length,l=e.canCollide,t=o.collides,i=n.collisions,s=0,m,y;for(r.sort(e._compareBoundsX),m=0;m<v;m++){var S=r[m],T=S.bounds,b=S.bounds.max.x,c=S.bounds.max.y,p=S.bounds.min.y,C=S.isStatic||S.isSleeping,g=S.parts.length,E=g===1;for(y=m+1;y<v;y++){var x=r[y],P=x.bounds;if(P.min.x>b)break;if(!(c<P.min.y||p>P.max.y)&&!(C&&(x.isStatic||x.isSleeping))&&l(S.collisionFilter,x.collisionFilter)){var M=x.parts.length;if(E&&M===1){var R=t(S,x,f);R&&(i[s++]=R)}else for(var A=g>1?1:0,k=M>1?1:0,B=A;B<g;B++)for(var L=S.parts[B],T=L.bounds,D=k;D<M;D++){var N=x.parts[D],P=N.bounds;if(!(T.min.x>P.max.x||T.max.x<P.min.x||T.max.y<P.min.y||T.min.y>P.max.y)){var R=t(L,N,f);R&&(i[s++]=R)}}}}}return i.length!==s&&(i.length=s),i},e.canCollide=function(n,f){return n.group===f.group&&n.group!==0?n.group>0:(n.mask&f.category)!==0&&(f.mask&n.category)!==0},e._compareBoundsX=function(n,f){return n.bounds.min.x-f.bounds.min.x}})()},function(w,F,d){var e={};w.exports=e;var u=d(0);(function(){e.create=function(o){var n={};return o||u.log("Mouse.create: element was undefined, defaulting to document.body","warn"),n.element=o||document.body,n.absolute={x:0,y:0},n.position={x:0,y:0},n.mousedownPosition={x:0,y:0},n.mouseupPosition={x:0,y:0},n.offset={x:0,y:0},n.scale={x:1,y:1},n.wheelDelta=0,n.button=-1,n.pixelRatio=parseInt(n.element.getAttribute("data-pixel-ratio"),10)||1,n.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},n.mousemove=function(f){var r=e._getRelativeMousePosition(f,n.element,n.pixelRatio),v=f.changedTouches;v&&(n.button=0,f.preventDefault()),n.absolute.x=r.x,n.absolute.y=r.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.sourceEvents.mousemove=f},n.mousedown=function(f){var r=e._getRelativeMousePosition(f,n.element,n.pixelRatio),v=f.changedTouches;v?(n.button=0,f.preventDefault()):n.button=f.button,n.absolute.x=r.x,n.absolute.y=r.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mousedownPosition.x=n.position.x,n.mousedownPosition.y=n.position.y,n.sourceEvents.mousedown=f},n.mouseup=function(f){var r=e._getRelativeMousePosition(f,n.element,n.pixelRatio),v=f.changedTouches;v&&f.preventDefault(),n.button=-1,n.absolute.x=r.x,n.absolute.y=r.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mouseupPosition.x=n.position.x,n.mouseupPosition.y=n.position.y,n.sourceEvents.mouseup=f},n.mousewheel=function(f){n.wheelDelta=Math.max(-1,Math.min(1,f.wheelDelta||-f.detail)),f.preventDefault(),n.sourceEvents.mousewheel=f},e.setElement(n,n.element),n},e.setElement=function(o,n){o.element=n,n.addEventListener("mousemove",o.mousemove,{passive:!0}),n.addEventListener("mousedown",o.mousedown,{passive:!0}),n.addEventListener("mouseup",o.mouseup,{passive:!0}),n.addEventListener("wheel",o.mousewheel,{passive:!1}),n.addEventListener("touchmove",o.mousemove,{passive:!1}),n.addEventListener("touchstart",o.mousedown,{passive:!1}),n.addEventListener("touchend",o.mouseup,{passive:!1})},e.clearSourceEvents=function(o){o.sourceEvents.mousemove=null,o.sourceEvents.mousedown=null,o.sourceEvents.mouseup=null,o.sourceEvents.mousewheel=null,o.wheelDelta=0},e.setOffset=function(o,n){o.offset.x=n.x,o.offset.y=n.y,o.position.x=o.absolute.x*o.scale.x+o.offset.x,o.position.y=o.absolute.y*o.scale.y+o.offset.y},e.setScale=function(o,n){o.scale.x=n.x,o.scale.y=n.y,o.position.x=o.absolute.x*o.scale.x+o.offset.x,o.position.y=o.absolute.y*o.scale.y+o.offset.y},e._getRelativeMousePosition=function(o,n,f){var r=n.getBoundingClientRect(),v=document.documentElement||document.body.parentNode||document.body,l=window.pageXOffset!==void 0?window.pageXOffset:v.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:v.scrollTop,i=o.changedTouches,s,m;return i?(s=i[0].pageX-r.left-l,m=i[0].pageY-r.top-t):(s=o.pageX-r.left-l,m=o.pageY-r.top-t),{x:s/(n.clientWidth/(n.width||n.clientWidth)*f),y:m/(n.clientHeight/(n.height||n.clientHeight)*f)}}})()},function(w,F,d){var e={};w.exports=e;var u=d(0);(function(){e._registry={},e.register=function(o){if(e.isPlugin(o)||u.warn("Plugin.register:",e.toString(o),"does not implement all required fields."),o.name in e._registry){var n=e._registry[o.name],f=e.versionParse(o.version).number,r=e.versionParse(n.version).number;f>r?(u.warn("Plugin.register:",e.toString(n),"was upgraded to",e.toString(o)),e._registry[o.name]=o):f<r?u.warn("Plugin.register:",e.toString(n),"can not be downgraded to",e.toString(o)):o!==n&&u.warn("Plugin.register:",e.toString(o),"is already registered to different plugin object")}else e._registry[o.name]=o;return o},e.resolve=function(o){return e._registry[e.dependencyParse(o).name]},e.toString=function(o){return typeof o=="string"?o:(o.name||"anonymous")+"@"+(o.version||o.range||"0.0.0")},e.isPlugin=function(o){return o&&o.name&&o.version&&o.install},e.isUsed=function(o,n){return o.used.indexOf(n)>-1},e.isFor=function(o,n){var f=o.for&&e.dependencyParse(o.for);return!o.for||n.name===f.name&&e.versionSatisfies(n.version,f.range)},e.use=function(o,n){if(o.uses=(o.uses||[]).concat(n||[]),o.uses.length===0){u.warn("Plugin.use:",e.toString(o),"does not specify any dependencies to install.");return}for(var f=e.dependencies(o),r=u.topologicalSort(f),v=[],l=0;l<r.length;l+=1)if(r[l]!==o.name){var t=e.resolve(r[l]);if(!t){v.push("âŒ "+r[l]);continue}e.isUsed(o,t.name)||(e.isFor(t,o)||(u.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(o)+"."),t._warned=!0),t.install?t.install(o):(u.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(v.push("ðŸ”¶ "+e.toString(t)),delete t._warned):v.push("âœ… "+e.toString(t)),o.used.push(t.name))}v.length>0&&u.info(v.join("  "))},e.dependencies=function(o,n){var f=e.dependencyParse(o),r=f.name;if(n=n||{},!(r in n)){o=e.resolve(o)||o,n[r]=u.map(o.uses||[],function(l){e.isPlugin(l)&&e.register(l);var t=e.dependencyParse(l),i=e.resolve(l);return i&&!e.versionSatisfies(i.version,t.range)?(u.warn("Plugin.dependencies:",e.toString(i),"does not satisfy",e.toString(t),"used by",e.toString(f)+"."),i._warned=!0,o._warned=!0):i||(u.warn("Plugin.dependencies:",e.toString(l),"used by",e.toString(f),"could not be resolved."),o._warned=!0),t.name});for(var v=0;v<n[r].length;v+=1)e.dependencies(n[r][v],n);return n}},e.dependencyParse=function(o){if(u.isString(o)){var n=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return n.test(o)||u.warn("Plugin.dependencyParse:",o,"is not a valid dependency string."),{name:o.split("@")[0],range:o.split("@")[1]||"*"}}return{name:o.name,range:o.range||o.version}},e.versionParse=function(o){var n=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;n.test(o)||u.warn("Plugin.versionParse:",o,"is not a valid version or range.");var f=n.exec(o),r=Number(f[4]),v=Number(f[5]),l=Number(f[6]);return{isRange:!!(f[1]||f[2]),version:f[3],range:o,operator:f[1]||f[2]||"",major:r,minor:v,patch:l,parts:[r,v,l],prerelease:f[7],number:r*1e8+v*1e4+l}},e.versionSatisfies=function(o,n){n=n||"*";var f=e.versionParse(n),r=e.versionParse(o);if(f.isRange){if(f.operator==="*"||o==="*")return!0;if(f.operator===">")return r.number>f.number;if(f.operator===">=")return r.number>=f.number;if(f.operator==="~")return r.major===f.major&&r.minor===f.minor&&r.patch>=f.patch;if(f.operator==="^")return f.major>0?r.major===f.major&&r.number>=f.number:f.minor>0?r.minor===f.minor&&r.patch>=f.patch:r.patch===f.patch}return o===n||o==="*"}})()},function(w,F){var d={};w.exports=d,function(){d.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(w,F,d){var e={};w.exports=e;var u=d(7),o=d(18),n=d(13),f=d(19),r=d(5),v=d(6),l=d(10),t=d(0),i=d(4);(function(){e._deltaMax=1e3/60,e.create=function(s){s=s||{};var m={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},y=t.extend(m,s);return y.world=s.world||v.create({label:"World"}),y.pairs=s.pairs||f.create(),y.detector=s.detector||n.create(),y.detector.pairs=y.pairs,y.grid={buckets:[]},y.world.gravity=y.gravity,y.broadphase=y.grid,y.metrics={},y},e.update=function(s,m){var y=t.now(),S=s.world,T=s.detector,b=s.pairs,c=s.timing,p=c.timestamp,C;m>e._deltaMax&&t.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",e._deltaMax.toFixed(3),"ms."),m=typeof m<"u"?m:t._baseDelta,m*=c.timeScale,c.timestamp+=m,c.lastDelta=m;var g={timestamp:c.timestamp,delta:m};r.trigger(s,"beforeUpdate",g);var E=v.allBodies(S),x=v.allConstraints(S);for(S.isModified&&(n.setBodies(T,E),v.setModified(S,!1,!1,!0)),s.enableSleeping&&u.update(E,m),e._bodiesApplyGravity(E,s.gravity),m>0&&e._bodiesUpdate(E,m),r.trigger(s,"beforeSolve",g),l.preSolveAll(E),C=0;C<s.constraintIterations;C++)l.solveAll(x,m);l.postSolveAll(E);var P=n.collisions(T);f.update(b,P,p),s.enableSleeping&&u.afterCollisions(b.list),b.collisionStart.length>0&&r.trigger(s,"collisionStart",{pairs:b.collisionStart,timestamp:c.timestamp,delta:m});var M=t.clamp(20/s.positionIterations,0,1);for(o.preSolvePosition(b.list),C=0;C<s.positionIterations;C++)o.solvePosition(b.list,m,M);for(o.postSolvePosition(E),l.preSolveAll(E),C=0;C<s.constraintIterations;C++)l.solveAll(x,m);for(l.postSolveAll(E),o.preSolveVelocity(b.list),C=0;C<s.velocityIterations;C++)o.solveVelocity(b.list,m);return e._bodiesUpdateVelocities(E),b.collisionActive.length>0&&r.trigger(s,"collisionActive",{pairs:b.collisionActive,timestamp:c.timestamp,delta:m}),b.collisionEnd.length>0&&r.trigger(s,"collisionEnd",{pairs:b.collisionEnd,timestamp:c.timestamp,delta:m}),e._bodiesClearForces(E),r.trigger(s,"afterUpdate",g),s.timing.lastElapsed=t.now()-y,s},e.merge=function(s,m){if(t.extend(s,m),m.world){s.world=m.world,e.clear(s);for(var y=v.allBodies(s.world),S=0;S<y.length;S++){var T=y[S];u.set(T,!1),T.id=t.nextId()}}},e.clear=function(s){f.clear(s.pairs),n.clear(s.detector)},e._bodiesClearForces=function(s){for(var m=s.length,y=0;y<m;y++){var S=s[y];S.force.x=0,S.force.y=0,S.torque=0}},e._bodiesApplyGravity=function(s,m){var y=typeof m.scale<"u"?m.scale:.001,S=s.length;if(!(m.x===0&&m.y===0||y===0))for(var T=0;T<S;T++){var b=s[T];b.isStatic||b.isSleeping||(b.force.y+=b.mass*m.y*y,b.force.x+=b.mass*m.x*y)}},e._bodiesUpdate=function(s,m){for(var y=s.length,S=0;S<y;S++){var T=s[S];T.isStatic||T.isSleeping||i.update(T,m)}},e._bodiesUpdateVelocities=function(s){for(var m=s.length,y=0;y<m;y++)i.updateVelocities(s[y])}})()},function(w,F,d){var e={};w.exports=e;var u=d(3),o=d(0),n=d(1);(function(){e._restingThresh=2,e._restingThreshTangent=Math.sqrt(6),e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e._frictionMaxStatic=Number.MAX_VALUE,e.preSolvePosition=function(f){var r,v,l,t=f.length;for(r=0;r<t;r++)v=f[r],v.isActive&&(l=v.contactCount,v.collision.parentA.totalContacts+=l,v.collision.parentB.totalContacts+=l)},e.solvePosition=function(f,r,v){var l,t,i,s,m,y,S,T,b=e._positionDampen*(v||1),c=o.clamp(r/o._baseDelta,0,1),p=f.length;for(l=0;l<p;l++)t=f[l],!(!t.isActive||t.isSensor)&&(i=t.collision,s=i.parentA,m=i.parentB,y=i.normal,t.separation=i.depth+y.x*(m.positionImpulse.x-s.positionImpulse.x)+y.y*(m.positionImpulse.y-s.positionImpulse.y));for(l=0;l<p;l++)t=f[l],!(!t.isActive||t.isSensor)&&(i=t.collision,s=i.parentA,m=i.parentB,y=i.normal,T=t.separation-t.slop*c,(s.isStatic||m.isStatic)&&(T*=2),s.isStatic||s.isSleeping||(S=b/s.totalContacts,s.positionImpulse.x+=y.x*T*S,s.positionImpulse.y+=y.y*T*S),m.isStatic||m.isSleeping||(S=b/m.totalContacts,m.positionImpulse.x-=y.x*T*S,m.positionImpulse.y-=y.y*T*S))},e.postSolvePosition=function(f){for(var r=e._positionWarming,v=f.length,l=u.translate,t=n.update,i=0;i<v;i++){var s=f[i],m=s.positionImpulse,y=m.x,S=m.y,T=s.velocity;if(s.totalContacts=0,y!==0||S!==0){for(var b=0;b<s.parts.length;b++){var c=s.parts[b];l(c.vertices,m),t(c.bounds,c.vertices,T),c.position.x+=y,c.position.y+=S}s.positionPrev.x+=y,s.positionPrev.y+=S,y*T.x+S*T.y<0?(m.x=0,m.y=0):(m.x*=r,m.y*=r)}}},e.preSolveVelocity=function(f){var r=f.length,v,l;for(v=0;v<r;v++){var t=f[v];if(!(!t.isActive||t.isSensor)){var i=t.contacts,s=t.contactCount,m=t.collision,y=m.parentA,S=m.parentB,T=m.normal,b=m.tangent;for(l=0;l<s;l++){var c=i[l],p=c.vertex,C=c.normalImpulse,g=c.tangentImpulse;if(C!==0||g!==0){var E=T.x*C+b.x*g,x=T.y*C+b.y*g;y.isStatic||y.isSleeping||(y.positionPrev.x+=E*y.inverseMass,y.positionPrev.y+=x*y.inverseMass,y.anglePrev+=y.inverseInertia*((p.x-y.position.x)*x-(p.y-y.position.y)*E)),S.isStatic||S.isSleeping||(S.positionPrev.x-=E*S.inverseMass,S.positionPrev.y-=x*S.inverseMass,S.anglePrev-=S.inverseInertia*((p.x-S.position.x)*x-(p.y-S.position.y)*E))}}}}},e.solveVelocity=function(f,r){var v=r/o._baseDelta,l=v*v,t=l*v,i=-e._restingThresh*v,s=e._restingThreshTangent,m=e._frictionNormalMultiplier*v,y=e._frictionMaxStatic,S=f.length,T,b,c,p;for(c=0;c<S;c++){var C=f[c];if(!(!C.isActive||C.isSensor)){var g=C.collision,E=g.parentA,x=g.parentB,P=g.normal.x,M=g.normal.y,R=g.tangent.x,A=g.tangent.y,k=C.inverseMass,B=C.friction*C.frictionStatic*m,L=C.contacts,D=C.contactCount,N=1/D,W=E.position.x-E.positionPrev.x,U=E.position.y-E.positionPrev.y,H=E.angle-E.anglePrev,j=x.position.x-x.positionPrev.x,Q=x.position.y-x.positionPrev.y,$=x.angle-x.anglePrev;for(p=0;p<D;p++){var V=L[p],z=V.vertex,G=z.x-E.position.x,ae=z.y-E.position.y,q=z.x-x.position.x,_=z.y-x.position.y,K=W-ae*H,Ht=U+G*H,Wt=j-_*$,Ut=Q+q*$,Ue=K-Wt,Ge=Ht-Ut,Ce=P*Ue+M*Ge,ee=R*Ue+A*Ge,je=C.separation+Ce,Pe=Math.min(je,1);Pe=je<0?0:Pe;var ze=Pe*B;ee<-ze||ee>ze?(b=ee>0?ee:-ee,T=C.friction*(ee>0?1:-1)*t,T<-b?T=-b:T>b&&(T=b)):(T=ee,b=y);var Ye=G*M-ae*P,Ke=q*M-_*P,Je=N/(k+E.inverseInertia*Ye*Ye+x.inverseInertia*Ke*Ke),ce=(1+C.restitution)*Ce*Je;if(T*=Je,Ce<i)V.normalImpulse=0;else{var Gt=V.normalImpulse;V.normalImpulse+=ce,V.normalImpulse>0&&(V.normalImpulse=0),ce=V.normalImpulse-Gt}if(ee<-s||ee>s)V.tangentImpulse=0;else{var jt=V.tangentImpulse;V.tangentImpulse+=T,V.tangentImpulse<-b&&(V.tangentImpulse=-b),V.tangentImpulse>b&&(V.tangentImpulse=b),T=V.tangentImpulse-jt}var de=P*ce+R*T,me=M*ce+A*T;E.isStatic||E.isSleeping||(E.positionPrev.x+=de*E.inverseMass,E.positionPrev.y+=me*E.inverseMass,E.anglePrev+=(G*me-ae*de)*E.inverseInertia),x.isStatic||x.isSleeping||(x.positionPrev.x-=de*x.inverseMass,x.positionPrev.y-=me*x.inverseMass,x.anglePrev-=(q*me-_*de)*x.inverseInertia)}}}}})()},function(w,F,d){var e={};w.exports=e;var u=d(9),o=d(0);(function(){e.create=function(n){return o.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},n)},e.update=function(n,f,r){var v=u.update,l=u.create,t=u.setActive,i=n.table,s=n.list,m=s.length,y=m,S=n.collisionStart,T=n.collisionEnd,b=n.collisionActive,c=f.length,p=0,C=0,g=0,E,x,P;for(P=0;P<c;P++)E=f[P],x=E.pair,x?(x.isActive&&(b[g++]=x),v(x,E,r)):(x=l(E,r),i[x.id]=x,S[p++]=x,s[y++]=x);for(y=0,m=s.length,P=0;P<m;P++)x=s[P],x.timeUpdated>=r?s[y++]=x:(t(x,!1,r),x.collision.bodyA.sleepCounter>0&&x.collision.bodyB.sleepCounter>0?s[y++]=x:(T[C++]=x,delete i[x.id]));s.length!==y&&(s.length=y),S.length!==p&&(S.length=p),T.length!==C&&(T.length=C),b.length!==g&&(b.length=g)},e.clear=function(n){return n.table={},n.list.length=0,n.collisionStart.length=0,n.collisionActive.length=0,n.collisionEnd.length=0,n}})()},function(w,F,d){var e=w.exports=d(21);e.Axes=d(11),e.Bodies=d(12),e.Body=d(4),e.Bounds=d(1),e.Collision=d(8),e.Common=d(0),e.Composite=d(6),e.Composites=d(22),e.Constraint=d(10),e.Contact=d(16),e.Detector=d(13),e.Engine=d(17),e.Events=d(5),e.Grid=d(23),e.Mouse=d(14),e.MouseConstraint=d(24),e.Pair=d(9),e.Pairs=d(19),e.Plugin=d(15),e.Query=d(25),e.Render=d(26),e.Resolver=d(18),e.Runner=d(27),e.SAT=d(28),e.Sleeping=d(7),e.Svg=d(29),e.Vector=d(2),e.Vertices=d(3),e.World=d(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run âž¤ use Matter.Runner.run(engine) instead")},function(w,F,d){var e={};w.exports=e;var u=d(15),o=d(0);(function(){e.name="matter-js",e.version="0.20.0",e.uses=[],e.used=[],e.use=function(){u.use(e,Array.prototype.slice.call(arguments))},e.before=function(n,f){return n=n.replace(/^Matter./,""),o.chainPathBefore(e,n,f)},e.after=function(n,f){return n=n.replace(/^Matter./,""),o.chainPathAfter(e,n,f)}})()},function(w,F,d){var e={};w.exports=e;var u=d(6),o=d(10),n=d(0),f=d(4),r=d(12),v=n.deprecated;(function(){e.stack=function(l,t,i,s,m,y,S){for(var T=u.create({label:"Stack"}),b=l,c=t,p,C=0,g=0;g<s;g++){for(var E=0,x=0;x<i;x++){var P=S(b,c,x,g,p,C);if(P){var M=P.bounds.max.y-P.bounds.min.y,R=P.bounds.max.x-P.bounds.min.x;M>E&&(E=M),f.translate(P,{x:R*.5,y:M*.5}),b=P.bounds.max.x+m,u.addBody(T,P),p=P,C+=1}else b+=m}c+=E+y,b=l}return T},e.chain=function(l,t,i,s,m,y){for(var S=l.bodies,T=1;T<S.length;T++){var b=S[T-1],c=S[T],p=b.bounds.max.y-b.bounds.min.y,C=b.bounds.max.x-b.bounds.min.x,g=c.bounds.max.y-c.bounds.min.y,E=c.bounds.max.x-c.bounds.min.x,x={bodyA:b,pointA:{x:C*t,y:p*i},bodyB:c,pointB:{x:E*s,y:g*m}},P=n.extend(x,y);u.addConstraint(l,o.create(P))}return l.label+=" Chain",l},e.mesh=function(l,t,i,s,m){var y=l.bodies,S,T,b,c,p;for(S=0;S<i;S++){for(T=1;T<t;T++)b=y[T-1+S*t],c=y[T+S*t],u.addConstraint(l,o.create(n.extend({bodyA:b,bodyB:c},m)));if(S>0)for(T=0;T<t;T++)b=y[T+(S-1)*t],c=y[T+S*t],u.addConstraint(l,o.create(n.extend({bodyA:b,bodyB:c},m))),s&&T>0&&(p=y[T-1+(S-1)*t],u.addConstraint(l,o.create(n.extend({bodyA:p,bodyB:c},m)))),s&&T<t-1&&(p=y[T+1+(S-1)*t],u.addConstraint(l,o.create(n.extend({bodyA:p,bodyB:c},m))))}return l.label+=" Mesh",l},e.pyramid=function(l,t,i,s,m,y,S){return e.stack(l,t,i,s,m,y,function(T,b,c,p,C,g){var E=Math.min(s,Math.ceil(i/2)),x=C?C.bounds.max.x-C.bounds.min.x:0;if(!(p>E)){p=E-p;var P=p,M=i-1-p;if(!(c<P||c>M)){g===1&&f.translate(C,{x:(c+(i%2===1?1:-1))*x,y:0});var R=C?c*x:0;return S(l+R+c*m,b,c,p,C,g)}}})},e.newtonsCradle=function(l,t,i,s,m){for(var y=u.create({label:"Newtons Cradle"}),S=0;S<i;S++){var T=1.9,b=r.circle(l+S*(s*T),t+m,s,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),c=o.create({pointA:{x:l+S*(s*T),y:t},bodyB:b});u.addBody(y,b),u.addConstraint(y,c)}return y},v(e,"newtonsCradle","Composites.newtonsCradle âž¤ moved to newtonsCradle example"),e.car=function(l,t,i,s,m){var y=f.nextGroup(!0),S=20,T=-i*.5+S,b=i*.5-S,c=0,p=u.create({label:"Car"}),C=r.rectangle(l,t,i,s,{collisionFilter:{group:y},chamfer:{radius:s*.5},density:2e-4}),g=r.circle(l+T,t+c,m,{collisionFilter:{group:y},friction:.8}),E=r.circle(l+b,t+c,m,{collisionFilter:{group:y},friction:.8}),x=o.create({bodyB:C,pointB:{x:T,y:c},bodyA:g,stiffness:1,length:0}),P=o.create({bodyB:C,pointB:{x:b,y:c},bodyA:E,stiffness:1,length:0});return u.addBody(p,C),u.addBody(p,g),u.addBody(p,E),u.addConstraint(p,x),u.addConstraint(p,P),p},v(e,"car","Composites.car âž¤ moved to car example"),e.softBody=function(l,t,i,s,m,y,S,T,b,c){b=n.extend({inertia:1/0},b),c=n.extend({stiffness:.2,render:{type:"line",anchors:!1}},c);var p=e.stack(l,t,i,s,m,y,function(C,g){return r.circle(C,g,T,b)});return e.mesh(p,i,s,S,c),p.label="Soft Body",p},v(e,"softBody","Composites.softBody âž¤ moved to softBody and cloth examples")})()},function(w,F,d){var e={};w.exports=e;var u=d(9),o=d(0),n=o.deprecated;(function(){e.create=function(f){var r={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(r,f)},e.update=function(f,r,v,l){var t,i,s,m=v.world,y=f.buckets,S,T,b=!1;for(t=0;t<r.length;t++){var c=r[t];if(!(c.isSleeping&&!l)&&!(m.bounds&&(c.bounds.max.x<m.bounds.min.x||c.bounds.min.x>m.bounds.max.x||c.bounds.max.y<m.bounds.min.y||c.bounds.min.y>m.bounds.max.y))){var p=e._getRegion(f,c);if(!c.region||p.id!==c.region.id||l){(!c.region||l)&&(c.region=p);var C=e._regionUnion(p,c.region);for(i=C.startCol;i<=C.endCol;i++)for(s=C.startRow;s<=C.endRow;s++){T=e._getBucketId(i,s),S=y[T];var g=i>=p.startCol&&i<=p.endCol&&s>=p.startRow&&s<=p.endRow,E=i>=c.region.startCol&&i<=c.region.endCol&&s>=c.region.startRow&&s<=c.region.endRow;!g&&E&&E&&S&&e._bucketRemoveBody(f,S,c),(c.region===p||g&&!E||l)&&(S||(S=e._createBucket(y,T)),e._bucketAddBody(f,S,c))}c.region=p,b=!0}}}b&&(f.pairsList=e._createActivePairsList(f))},n(e,"update","Grid.update âž¤ replaced by Matter.Detector"),e.clear=function(f){f.buckets={},f.pairs={},f.pairsList=[]},n(e,"clear","Grid.clear âž¤ replaced by Matter.Detector"),e._regionUnion=function(f,r){var v=Math.min(f.startCol,r.startCol),l=Math.max(f.endCol,r.endCol),t=Math.min(f.startRow,r.startRow),i=Math.max(f.endRow,r.endRow);return e._createRegion(v,l,t,i)},e._getRegion=function(f,r){var v=r.bounds,l=Math.floor(v.min.x/f.bucketWidth),t=Math.floor(v.max.x/f.bucketWidth),i=Math.floor(v.min.y/f.bucketHeight),s=Math.floor(v.max.y/f.bucketHeight);return e._createRegion(l,t,i,s)},e._createRegion=function(f,r,v,l){return{id:f+","+r+","+v+","+l,startCol:f,endCol:r,startRow:v,endRow:l}},e._getBucketId=function(f,r){return"C"+f+"R"+r},e._createBucket=function(f,r){var v=f[r]=[];return v},e._bucketAddBody=function(f,r,v){var l=f.pairs,t=u.id,i=r.length,s;for(s=0;s<i;s++){var m=r[s];if(!(v.id===m.id||v.isStatic&&m.isStatic)){var y=t(v,m),S=l[y];S?S[2]+=1:l[y]=[v,m,1]}}r.push(v)},e._bucketRemoveBody=function(f,r,v){var l=f.pairs,t=u.id,i;r.splice(o.indexOf(r,v),1);var s=r.length;for(i=0;i<s;i++){var m=l[t(v,r[i])];m&&(m[2]-=1)}},e._createActivePairsList=function(f){var r,v=f.pairs,l=o.keys(v),t=l.length,i=[],s;for(s=0;s<t;s++)r=v[l[s]],r[2]>0?i.push(r):delete v[l[s]];return i}})()},function(w,F,d){var e={};w.exports=e;var u=d(3),o=d(7),n=d(14),f=d(5),r=d(13),v=d(10),l=d(6),t=d(0),i=d(1);(function(){e.create=function(s,m){var y=(s?s.mouse:null)||(m?m.mouse:null);y||(s&&s.render&&s.render.canvas?y=n.create(s.render.canvas):m&&m.element?y=n.create(m.element):(y=n.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var S=v.create({label:"Mouse Constraint",pointA:y.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),T={type:"mouseConstraint",mouse:y,element:null,body:null,constraint:S,collisionFilter:{category:1,mask:4294967295,group:0}},b=t.extend(T,m);return f.on(s,"beforeUpdate",function(){var c=l.allBodies(s.world);e.update(b,c),e._triggerEvents(b)}),b},e.update=function(s,m){var y=s.mouse,S=s.constraint,T=s.body;if(y.button===0){if(S.bodyB)o.set(S.bodyB,!1),S.pointA=y.position;else for(var b=0;b<m.length;b++)if(T=m[b],i.contains(T.bounds,y.position)&&r.canCollide(T.collisionFilter,s.collisionFilter))for(var c=T.parts.length>1?1:0;c<T.parts.length;c++){var p=T.parts[c];if(u.contains(p.vertices,y.position)){S.pointA=y.position,S.bodyB=s.body=T,S.pointB={x:y.position.x-T.position.x,y:y.position.y-T.position.y},S.angleB=T.angle,o.set(T,!1),f.trigger(s,"startdrag",{mouse:y,body:T});break}}}else S.bodyB=s.body=null,S.pointB=null,T&&f.trigger(s,"enddrag",{mouse:y,body:T})},e._triggerEvents=function(s){var m=s.mouse,y=m.sourceEvents;y.mousemove&&f.trigger(s,"mousemove",{mouse:m}),y.mousedown&&f.trigger(s,"mousedown",{mouse:m}),y.mouseup&&f.trigger(s,"mouseup",{mouse:m}),n.clearSourceEvents(m)}})()},function(w,F,d){var e={};w.exports=e;var u=d(2),o=d(8),n=d(1),f=d(12),r=d(3);(function(){e.collides=function(v,l){for(var t=[],i=l.length,s=v.bounds,m=o.collides,y=n.overlaps,S=0;S<i;S++){var T=l[S],b=T.parts.length,c=b===1?0:1;if(y(T.bounds,s))for(var p=c;p<b;p++){var C=T.parts[p];if(y(C.bounds,s)){var g=m(C,v);if(g){t.push(g);break}}}}return t},e.ray=function(v,l,t,i){i=i||1e-100;for(var s=u.angle(l,t),m=u.magnitude(u.sub(l,t)),y=(t.x+l.x)*.5,S=(t.y+l.y)*.5,T=f.rectangle(y,S,m,i,{angle:s}),b=e.collides(T,v),c=0;c<b.length;c+=1){var p=b[c];p.body=p.bodyB=p.bodyA}return b},e.region=function(v,l,t){for(var i=[],s=0;s<v.length;s++){var m=v[s],y=n.overlaps(m.bounds,l);(y&&!t||!y&&t)&&i.push(m)}return i},e.point=function(v,l){for(var t=[],i=0;i<v.length;i++){var s=v[i];if(n.contains(s.bounds,l))for(var m=s.parts.length===1?0:1;m<s.parts.length;m++){var y=s.parts[m];if(n.contains(y.bounds,l)&&r.contains(y.vertices,l)){t.push(s);break}}}return t}})()},function(w,F,d){var e={};w.exports=e;var u=d(4),o=d(0),n=d(6),f=d(1),r=d(5),v=d(2),l=d(14);(function(){var t,i;typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(c){window.setTimeout(function(){c(o.now())},1e3/60)},i=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(c){var p={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!c.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},C=o.extend(p,c);return C.canvas&&(C.canvas.width=C.options.width||C.canvas.width,C.canvas.height=C.options.height||C.canvas.height),C.mouse=c.mouse,C.engine=c.engine,C.canvas=C.canvas||y(C.options.width,C.options.height),C.context=C.canvas.getContext("2d"),C.textures={},C.bounds=C.bounds||{min:{x:0,y:0},max:{x:C.canvas.width,y:C.canvas.height}},C.controller=e,C.options.showBroadphase=!1,C.options.pixelRatio!==1&&e.setPixelRatio(C,C.options.pixelRatio),o.isElement(C.element)&&C.element.appendChild(C.canvas),C},e.run=function(c){(function p(C){c.frameRequestId=t(p),s(c,C),e.world(c,C),c.context.setTransform(c.options.pixelRatio,0,0,c.options.pixelRatio,0,0),(c.options.showStats||c.options.showDebug)&&e.stats(c,c.context,C),(c.options.showPerformance||c.options.showDebug)&&e.performance(c,c.context,C),c.context.setTransform(1,0,0,1,0,0)})()},e.stop=function(c){i(c.frameRequestId)},e.setPixelRatio=function(c,p){var C=c.options,g=c.canvas;p==="auto"&&(p=S(g)),C.pixelRatio=p,g.setAttribute("data-pixel-ratio",p),g.width=C.width*p,g.height=C.height*p,g.style.width=C.width+"px",g.style.height=C.height+"px"},e.setSize=function(c,p,C){c.options.width=p,c.options.height=C,c.bounds.max.x=c.bounds.min.x+p,c.bounds.max.y=c.bounds.min.y+C,c.options.pixelRatio!==1?e.setPixelRatio(c,c.options.pixelRatio):(c.canvas.width=p,c.canvas.height=C)},e.lookAt=function(c,p,C,g){g=typeof g<"u"?g:!0,p=o.isArray(p)?p:[p],C=C||{x:0,y:0};for(var E={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},x=0;x<p.length;x+=1){var P=p[x],M=P.bounds?P.bounds.min:P.min||P.position||P,R=P.bounds?P.bounds.max:P.max||P.position||P;M&&R&&(M.x<E.min.x&&(E.min.x=M.x),R.x>E.max.x&&(E.max.x=R.x),M.y<E.min.y&&(E.min.y=M.y),R.y>E.max.y&&(E.max.y=R.y))}var A=E.max.x-E.min.x+2*C.x,k=E.max.y-E.min.y+2*C.y,B=c.canvas.height,L=c.canvas.width,D=L/B,N=A/k,W=1,U=1;N>D?U=N/D:W=D/N,c.options.hasBounds=!0,c.bounds.min.x=E.min.x,c.bounds.max.x=E.min.x+A*W,c.bounds.min.y=E.min.y,c.bounds.max.y=E.min.y+k*U,g&&(c.bounds.min.x+=A*.5-A*W*.5,c.bounds.max.x+=A*.5-A*W*.5,c.bounds.min.y+=k*.5-k*U*.5,c.bounds.max.y+=k*.5-k*U*.5),c.bounds.min.x-=C.x,c.bounds.max.x-=C.x,c.bounds.min.y-=C.y,c.bounds.max.y-=C.y,c.mouse&&(l.setScale(c.mouse,{x:(c.bounds.max.x-c.bounds.min.x)/c.canvas.width,y:(c.bounds.max.y-c.bounds.min.y)/c.canvas.height}),l.setOffset(c.mouse,c.bounds.min))},e.startViewTransform=function(c){var p=c.bounds.max.x-c.bounds.min.x,C=c.bounds.max.y-c.bounds.min.y,g=p/c.options.width,E=C/c.options.height;c.context.setTransform(c.options.pixelRatio/g,0,0,c.options.pixelRatio/E,0,0),c.context.translate(-c.bounds.min.x,-c.bounds.min.y)},e.endViewTransform=function(c){c.context.setTransform(c.options.pixelRatio,0,0,c.options.pixelRatio,0,0)},e.world=function(c,p){var C=o.now(),g=c.engine,E=g.world,x=c.canvas,P=c.context,M=c.options,R=c.timing,A=n.allBodies(E),k=n.allConstraints(E),B=M.wireframes?M.wireframeBackground:M.background,L=[],D=[],N,W={timestamp:g.timing.timestamp};if(r.trigger(c,"beforeRender",W),c.currentBackground!==B&&b(c,B),P.globalCompositeOperation="source-in",P.fillStyle="transparent",P.fillRect(0,0,x.width,x.height),P.globalCompositeOperation="source-over",M.hasBounds){for(N=0;N<A.length;N++){var U=A[N];f.overlaps(U.bounds,c.bounds)&&L.push(U)}for(N=0;N<k.length;N++){var H=k[N],j=H.bodyA,Q=H.bodyB,$=H.pointA,V=H.pointB;j&&($=v.add(j.position,H.pointA)),Q&&(V=v.add(Q.position,H.pointB)),!(!$||!V)&&(f.contains(c.bounds,$)||f.contains(c.bounds,V))&&D.push(H)}e.startViewTransform(c),c.mouse&&(l.setScale(c.mouse,{x:(c.bounds.max.x-c.bounds.min.x)/c.options.width,y:(c.bounds.max.y-c.bounds.min.y)/c.options.height}),l.setOffset(c.mouse,c.bounds.min))}else D=k,L=A,c.options.pixelRatio!==1&&c.context.setTransform(c.options.pixelRatio,0,0,c.options.pixelRatio,0,0);!M.wireframes||g.enableSleeping&&M.showSleeping?e.bodies(c,L,P):(M.showConvexHulls&&e.bodyConvexHulls(c,L,P),e.bodyWireframes(c,L,P)),M.showBounds&&e.bodyBounds(c,L,P),(M.showAxes||M.showAngleIndicator)&&e.bodyAxes(c,L,P),M.showPositions&&e.bodyPositions(c,L,P),M.showVelocity&&e.bodyVelocity(c,L,P),M.showIds&&e.bodyIds(c,L,P),M.showSeparations&&e.separations(c,g.pairs.list,P),M.showCollisions&&e.collisions(c,g.pairs.list,P),M.showVertexNumbers&&e.vertexNumbers(c,L,P),M.showMousePosition&&e.mousePosition(c,c.mouse,P),e.constraints(D,P),M.hasBounds&&e.endViewTransform(c),r.trigger(c,"afterRender",W),R.lastElapsed=o.now()-C},e.stats=function(c,p,C){for(var g=c.engine,E=g.world,x=n.allBodies(E),P=0,M=55,R=44,A=0,k=0,B=0;B<x.length;B+=1)P+=x[B].parts.length;var L={Part:P,Body:x.length,Cons:n.allConstraints(E).length,Comp:n.allComposites(E).length,Pair:g.pairs.list.length};p.fillStyle="#0e0f19",p.fillRect(A,k,M*5.5,R),p.font="12px Arial",p.textBaseline="top",p.textAlign="right";for(var D in L){var N=L[D];p.fillStyle="#aaa",p.fillText(D,A+M,k+8),p.fillStyle="#eee",p.fillText(N,A+M,k+26),A+=M}},e.performance=function(c,p){var C=c.engine,g=c.timing,E=g.deltaHistory,x=g.elapsedHistory,P=g.timestampElapsedHistory,M=g.engineDeltaHistory,R=g.engineUpdatesHistory,A=g.engineElapsedHistory,k=C.timing.lastUpdatesPerFrame,B=C.timing.lastDelta,L=m(E),D=m(x),N=m(M),W=m(R),U=m(A),H=m(P),j=H/L||0,Q=Math.round(L/B),$=1e3/L||0,V=4,z=12,G=60,ae=34,q=10,_=69;p.fillStyle="#0e0f19",p.fillRect(0,50,z*5+G*6+22,ae),e.status(p,q,_,G,V,E.length,Math.round($)+" fps",$/e._goodFps,function(K){return E[K]/L-1}),e.status(p,q+z+G,_,G,V,M.length,B.toFixed(2)+" dt",e._goodDelta/B,function(K){return M[K]/N-1}),e.status(p,q+(z+G)*2,_,G,V,R.length,k+" upf",Math.pow(o.clamp(W/Q||1,0,1),4),function(K){return R[K]/W-1}),e.status(p,q+(z+G)*3,_,G,V,A.length,U.toFixed(2)+" ut",1-k*U/e._goodFps,function(K){return A[K]/U-1}),e.status(p,q+(z+G)*4,_,G,V,x.length,D.toFixed(2)+" rt",1-D/e._goodFps,function(K){return x[K]/D-1}),e.status(p,q+(z+G)*5,_,G,V,P.length,j.toFixed(2)+" x",j*j*j,function(K){return(P[K]/E[K]/j||0)-1})},e.status=function(c,p,C,g,E,x,P,M,R){c.strokeStyle="#888",c.fillStyle="#444",c.lineWidth=1,c.fillRect(p,C+7,g,1),c.beginPath(),c.moveTo(p,C+7-E*o.clamp(.4*R(0),-2,2));for(var A=0;A<g;A+=1)c.lineTo(p+A,C+7-(A<x?E*o.clamp(.4*R(A),-2,2):0));c.stroke(),c.fillStyle="hsl("+o.clamp(25+95*M,0,120)+",100%,60%)",c.fillRect(p,C-7,4,4),c.font="12px Arial",c.textBaseline="middle",c.textAlign="right",c.fillStyle="#eee",c.fillText(P,p+g,C-5)},e.constraints=function(c,p){for(var C=p,g=0;g<c.length;g++){var E=c[g];if(!(!E.render.visible||!E.pointA||!E.pointB)){var x=E.bodyA,P=E.bodyB,M,R;if(x?M=v.add(x.position,E.pointA):M=E.pointA,E.render.type==="pin")C.beginPath(),C.arc(M.x,M.y,3,0,2*Math.PI),C.closePath();else{if(P?R=v.add(P.position,E.pointB):R=E.pointB,C.beginPath(),C.moveTo(M.x,M.y),E.render.type==="spring")for(var A=v.sub(R,M),k=v.perp(v.normalise(A)),B=Math.ceil(o.clamp(E.length/5,12,20)),L,D=1;D<B;D+=1)L=D%2===0?1:-1,C.lineTo(M.x+A.x*(D/B)+k.x*L*4,M.y+A.y*(D/B)+k.y*L*4);C.lineTo(R.x,R.y)}E.render.lineWidth&&(C.lineWidth=E.render.lineWidth,C.strokeStyle=E.render.strokeStyle,C.stroke()),E.render.anchors&&(C.fillStyle=E.render.strokeStyle,C.beginPath(),C.arc(M.x,M.y,3,0,2*Math.PI),C.arc(R.x,R.y,3,0,2*Math.PI),C.closePath(),C.fill())}}},e.bodies=function(c,p,C){var g=C;c.engine;var E=c.options,x=E.showInternalEdges||!E.wireframes,P,M,R,A;for(R=0;R<p.length;R++)if(P=p[R],!!P.render.visible){for(A=P.parts.length>1?1:0;A<P.parts.length;A++)if(M=P.parts[A],!!M.render.visible){if(E.showSleeping&&P.isSleeping?g.globalAlpha=.5*M.render.opacity:M.render.opacity!==1&&(g.globalAlpha=M.render.opacity),M.render.sprite&&M.render.sprite.texture&&!E.wireframes){var k=M.render.sprite,B=T(c,k.texture);g.translate(M.position.x,M.position.y),g.rotate(M.angle),g.drawImage(B,B.width*-k.xOffset*k.xScale,B.height*-k.yOffset*k.yScale,B.width*k.xScale,B.height*k.yScale),g.rotate(-M.angle),g.translate(-M.position.x,-M.position.y)}else{if(M.circleRadius)g.beginPath(),g.arc(M.position.x,M.position.y,M.circleRadius,0,2*Math.PI);else{g.beginPath(),g.moveTo(M.vertices[0].x,M.vertices[0].y);for(var L=1;L<M.vertices.length;L++)!M.vertices[L-1].isInternal||x?g.lineTo(M.vertices[L].x,M.vertices[L].y):g.moveTo(M.vertices[L].x,M.vertices[L].y),M.vertices[L].isInternal&&!x&&g.moveTo(M.vertices[(L+1)%M.vertices.length].x,M.vertices[(L+1)%M.vertices.length].y);g.lineTo(M.vertices[0].x,M.vertices[0].y),g.closePath()}E.wireframes?(g.lineWidth=1,g.strokeStyle=c.options.wireframeStrokeStyle,g.stroke()):(g.fillStyle=M.render.fillStyle,M.render.lineWidth&&(g.lineWidth=M.render.lineWidth,g.strokeStyle=M.render.strokeStyle,g.stroke()),g.fill())}g.globalAlpha=1}}},e.bodyWireframes=function(c,p,C){var g=C,E=c.options.showInternalEdges,x,P,M,R,A;for(g.beginPath(),M=0;M<p.length;M++)if(x=p[M],!!x.render.visible)for(A=x.parts.length>1?1:0;A<x.parts.length;A++){for(P=x.parts[A],g.moveTo(P.vertices[0].x,P.vertices[0].y),R=1;R<P.vertices.length;R++)!P.vertices[R-1].isInternal||E?g.lineTo(P.vertices[R].x,P.vertices[R].y):g.moveTo(P.vertices[R].x,P.vertices[R].y),P.vertices[R].isInternal&&!E&&g.moveTo(P.vertices[(R+1)%P.vertices.length].x,P.vertices[(R+1)%P.vertices.length].y);g.lineTo(P.vertices[0].x,P.vertices[0].y)}g.lineWidth=1,g.strokeStyle=c.options.wireframeStrokeStyle,g.stroke()},e.bodyConvexHulls=function(c,p,C){var g=C,E,x,P;for(g.beginPath(),x=0;x<p.length;x++)if(E=p[x],!(!E.render.visible||E.parts.length===1)){for(g.moveTo(E.vertices[0].x,E.vertices[0].y),P=1;P<E.vertices.length;P++)g.lineTo(E.vertices[P].x,E.vertices[P].y);g.lineTo(E.vertices[0].x,E.vertices[0].y)}g.lineWidth=1,g.strokeStyle="rgba(255,255,255,0.2)",g.stroke()},e.vertexNumbers=function(c,p,C){var g=C,E,x,P;for(E=0;E<p.length;E++){var M=p[E].parts;for(P=M.length>1?1:0;P<M.length;P++){var R=M[P];for(x=0;x<R.vertices.length;x++)g.fillStyle="rgba(255,255,255,0.2)",g.fillText(E+"_"+x,R.position.x+(R.vertices[x].x-R.position.x)*.8,R.position.y+(R.vertices[x].y-R.position.y)*.8)}}},e.mousePosition=function(c,p,C){var g=C;g.fillStyle="rgba(255,255,255,0.8)",g.fillText(p.position.x+"  "+p.position.y,p.position.x+5,p.position.y-5)},e.bodyBounds=function(c,p,C){var g=C;c.engine;var E=c.options;g.beginPath();for(var x=0;x<p.length;x++){var P=p[x];if(P.render.visible)for(var M=p[x].parts,R=M.length>1?1:0;R<M.length;R++){var A=M[R];g.rect(A.bounds.min.x,A.bounds.min.y,A.bounds.max.x-A.bounds.min.x,A.bounds.max.y-A.bounds.min.y)}}E.wireframes?g.strokeStyle="rgba(255,255,255,0.08)":g.strokeStyle="rgba(0,0,0,0.1)",g.lineWidth=1,g.stroke()},e.bodyAxes=function(c,p,C){var g=C;c.engine;var E=c.options,x,P,M,R;for(g.beginPath(),P=0;P<p.length;P++){var A=p[P],k=A.parts;if(A.render.visible)if(E.showAxes)for(M=k.length>1?1:0;M<k.length;M++)for(x=k[M],R=0;R<x.axes.length;R++){var B=x.axes[R];g.moveTo(x.position.x,x.position.y),g.lineTo(x.position.x+B.x*20,x.position.y+B.y*20)}else for(M=k.length>1?1:0;M<k.length;M++)for(x=k[M],R=0;R<x.axes.length;R++)g.moveTo(x.position.x,x.position.y),g.lineTo((x.vertices[0].x+x.vertices[x.vertices.length-1].x)/2,(x.vertices[0].y+x.vertices[x.vertices.length-1].y)/2)}E.wireframes?(g.strokeStyle="indianred",g.lineWidth=1):(g.strokeStyle="rgba(255, 255, 255, 0.4)",g.globalCompositeOperation="overlay",g.lineWidth=2),g.stroke(),g.globalCompositeOperation="source-over"},e.bodyPositions=function(c,p,C){var g=C;c.engine;var E=c.options,x,P,M,R;for(g.beginPath(),M=0;M<p.length;M++)if(x=p[M],!!x.render.visible)for(R=0;R<x.parts.length;R++)P=x.parts[R],g.arc(P.position.x,P.position.y,3,0,2*Math.PI,!1),g.closePath();for(E.wireframes?g.fillStyle="indianred":g.fillStyle="rgba(0,0,0,0.5)",g.fill(),g.beginPath(),M=0;M<p.length;M++)x=p[M],x.render.visible&&(g.arc(x.positionPrev.x,x.positionPrev.y,2,0,2*Math.PI,!1),g.closePath());g.fillStyle="rgba(255,165,0,0.8)",g.fill()},e.bodyVelocity=function(c,p,C){var g=C;g.beginPath();for(var E=0;E<p.length;E++){var x=p[E];if(x.render.visible){var P=u.getVelocity(x);g.moveTo(x.position.x,x.position.y),g.lineTo(x.position.x+P.x,x.position.y+P.y)}}g.lineWidth=3,g.strokeStyle="cornflowerblue",g.stroke()},e.bodyIds=function(c,p,C){var g=C,E,x;for(E=0;E<p.length;E++)if(p[E].render.visible){var P=p[E].parts;for(x=P.length>1?1:0;x<P.length;x++){var M=P[x];g.font="12px Arial",g.fillStyle="rgba(255,255,255,0.5)",g.fillText(M.id,M.position.x+10,M.position.y-10)}}},e.collisions=function(c,p,C){var g=C,E=c.options,x,P,M,R;for(g.beginPath(),M=0;M<p.length;M++)if(x=p[M],!!x.isActive)for(P=x.collision,R=0;R<x.contactCount;R++){var A=x.contacts[R],k=A.vertex;g.rect(k.x-1.5,k.y-1.5,3.5,3.5)}for(E.wireframes?g.fillStyle="rgba(255,255,255,0.7)":g.fillStyle="orange",g.fill(),g.beginPath(),M=0;M<p.length;M++)if(x=p[M],!!x.isActive&&(P=x.collision,x.contactCount>0)){var B=x.contacts[0].vertex.x,L=x.contacts[0].vertex.y;x.contactCount===2&&(B=(x.contacts[0].vertex.x+x.contacts[1].vertex.x)/2,L=(x.contacts[0].vertex.y+x.contacts[1].vertex.y)/2),P.bodyB===P.supports[0].body||P.bodyA.isStatic===!0?g.moveTo(B-P.normal.x*8,L-P.normal.y*8):g.moveTo(B+P.normal.x*8,L+P.normal.y*8),g.lineTo(B,L)}E.wireframes?g.strokeStyle="rgba(255,165,0,0.7)":g.strokeStyle="orange",g.lineWidth=1,g.stroke()},e.separations=function(c,p,C){var g=C,E=c.options,x,P,M,R,A;for(g.beginPath(),A=0;A<p.length;A++)if(x=p[A],!!x.isActive){P=x.collision,M=P.bodyA,R=P.bodyB;var k=1;!R.isStatic&&!M.isStatic&&(k=.5),R.isStatic&&(k=0),g.moveTo(R.position.x,R.position.y),g.lineTo(R.position.x-P.penetration.x*k,R.position.y-P.penetration.y*k),k=1,!R.isStatic&&!M.isStatic&&(k=.5),M.isStatic&&(k=0),g.moveTo(M.position.x,M.position.y),g.lineTo(M.position.x+P.penetration.x*k,M.position.y+P.penetration.y*k)}E.wireframes?g.strokeStyle="rgba(255,165,0,0.5)":g.strokeStyle="orange",g.stroke()},e.inspector=function(c,p){c.engine;var C=c.selected,g=c.render,E=g.options,x;if(E.hasBounds){var P=g.bounds.max.x-g.bounds.min.x,M=g.bounds.max.y-g.bounds.min.y,R=P/g.options.width,A=M/g.options.height;p.scale(1/R,1/A),p.translate(-g.bounds.min.x,-g.bounds.min.y)}for(var k=0;k<C.length;k++){var B=C[k].data;switch(p.translate(.5,.5),p.lineWidth=1,p.strokeStyle="rgba(255,165,0,0.9)",p.setLineDash([1,2]),B.type){case"body":x=B.bounds,p.beginPath(),p.rect(Math.floor(x.min.x-3),Math.floor(x.min.y-3),Math.floor(x.max.x-x.min.x+6),Math.floor(x.max.y-x.min.y+6)),p.closePath(),p.stroke();break;case"constraint":var L=B.pointA;B.bodyA&&(L=B.pointB),p.beginPath(),p.arc(L.x,L.y,10,0,2*Math.PI),p.closePath(),p.stroke();break}p.setLineDash([]),p.translate(-.5,-.5)}c.selectStart!==null&&(p.translate(.5,.5),p.lineWidth=1,p.strokeStyle="rgba(255,165,0,0.6)",p.fillStyle="rgba(255,165,0,0.1)",x=c.selectBounds,p.beginPath(),p.rect(Math.floor(x.min.x),Math.floor(x.min.y),Math.floor(x.max.x-x.min.x),Math.floor(x.max.y-x.min.y)),p.closePath(),p.stroke(),p.fill(),p.translate(-.5,-.5)),E.hasBounds&&p.setTransform(1,0,0,1,0,0)};var s=function(c,p){var C=c.engine,g=c.timing,E=g.historySize,x=C.timing.timestamp;g.delta=p-g.lastTime||e._goodDelta,g.lastTime=p,g.timestampElapsed=x-g.lastTimestamp||0,g.lastTimestamp=x,g.deltaHistory.unshift(g.delta),g.deltaHistory.length=Math.min(g.deltaHistory.length,E),g.engineDeltaHistory.unshift(C.timing.lastDelta),g.engineDeltaHistory.length=Math.min(g.engineDeltaHistory.length,E),g.timestampElapsedHistory.unshift(g.timestampElapsed),g.timestampElapsedHistory.length=Math.min(g.timestampElapsedHistory.length,E),g.engineUpdatesHistory.unshift(C.timing.lastUpdatesPerFrame),g.engineUpdatesHistory.length=Math.min(g.engineUpdatesHistory.length,E),g.engineElapsedHistory.unshift(C.timing.lastElapsed),g.engineElapsedHistory.length=Math.min(g.engineElapsedHistory.length,E),g.elapsedHistory.unshift(g.lastElapsed),g.elapsedHistory.length=Math.min(g.elapsedHistory.length,E)},m=function(c){for(var p=0,C=0;C<c.length;C+=1)p+=c[C];return p/c.length||0},y=function(c,p){var C=document.createElement("canvas");return C.width=c,C.height=p,C.oncontextmenu=function(){return!1},C.onselectstart=function(){return!1},C},S=function(c){var p=c.getContext("2d"),C=window.devicePixelRatio||1,g=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1;return C/g},T=function(c,p){var C=c.textures[p];return C||(C=c.textures[p]=new Image,C.src=p,C)},b=function(c,p){var C=p;/(jpg|gif|png)$/.test(p)&&(C="url("+p+")"),c.canvas.style.background=C,c.canvas.style.backgroundSize="contain",c.currentBackground=p}})()},function(w,F,d){var e={};w.exports=e;var u=d(5),o=d(17),n=d(0);(function(){e._maxFrameDelta=1e3/15,e._frameDeltaFallback=1e3/60,e._timeBufferMargin=1.5,e._elapsedNextEstimate=1,e._smoothingLowerBound=.1,e._smoothingUpperBound=.9,e.create=function(r){var v={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},l=n.extend(v,r);return l.fps=0,l},e.run=function(r,v){return r.timeBuffer=e._frameDeltaFallback,function l(t){r.frameRequestId=e._onNextFrame(r,l),t&&r.enabled&&e.tick(r,v,t)}(),r},e.tick=function(r,v,l){var t=n.now(),i=r.delta,s=0,m=l-r.timeLastTick;if((!m||!r.timeLastTick||m>Math.max(e._maxFrameDelta,r.maxFrameTime))&&(m=r.frameDelta||e._frameDeltaFallback),r.frameDeltaSmoothing){r.frameDeltaHistory.push(m),r.frameDeltaHistory=r.frameDeltaHistory.slice(-r.frameDeltaHistorySize);var y=r.frameDeltaHistory.slice(0).sort(),S=r.frameDeltaHistory.slice(y.length*e._smoothingLowerBound,y.length*e._smoothingUpperBound),T=f(S);m=T||m}r.frameDeltaSnapping&&(m=1e3/Math.round(1e3/m)),r.frameDelta=m,r.timeLastTick=l,r.timeBuffer+=r.frameDelta,r.timeBuffer=n.clamp(r.timeBuffer,0,r.frameDelta+i*e._timeBufferMargin),r.lastUpdatesDeferred=0;var b=r.maxUpdates||Math.ceil(r.maxFrameTime/i),c={timestamp:v.timing.timestamp};u.trigger(r,"beforeTick",c),u.trigger(r,"tick",c);for(var p=n.now();i>0&&r.timeBuffer>=i*e._timeBufferMargin;){u.trigger(r,"beforeUpdate",c),o.update(v,i),u.trigger(r,"afterUpdate",c),r.timeBuffer-=i,s+=1;var C=n.now()-t,g=n.now()-p,E=C+e._elapsedNextEstimate*g/s;if(s>=b||E>r.maxFrameTime){r.lastUpdatesDeferred=Math.round(Math.max(0,r.timeBuffer/i-e._timeBufferMargin));break}}v.timing.lastUpdatesPerFrame=s,u.trigger(r,"afterTick",c),r.frameDeltaHistory.length>=100&&(r.lastUpdatesDeferred&&Math.round(r.frameDelta/i)>b?n.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):r.lastUpdatesDeferred&&n.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof r.isFixed<"u"&&n.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(r.deltaMin||r.deltaMax)&&n.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),r.fps!==0&&n.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},e.stop=function(r){e._cancelNextFrame(r)},e._onNextFrame=function(r,v){if(typeof window<"u"&&window.requestAnimationFrame)r.frameRequestId=window.requestAnimationFrame(v);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return r.frameRequestId},e._cancelNextFrame=function(r){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(r.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var f=function(r){for(var v=0,l=r.length,t=0;t<l;t+=1)v+=r[t];return v/l||0}})()},function(w,F,d){var e={};w.exports=e;var u=d(8),o=d(0),n=o.deprecated;(function(){e.collides=function(f,r){return u.collides(f,r)},n(e,"collides","SAT.collides âž¤ replaced by Collision.collides")})()},function(w,F,d){var e={};w.exports=e,d(1);var u=d(0);(function(){e.pathToVertices=function(o,n){typeof window<"u"&&!("SVGPathSeg"in window)&&u.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var f,r,v,l,t,i,s,m,y,S,T=[],b,c,p=0,C=0,g=0;n=n||15;var E=function(P,M,R){var A=R%2===1&&R>1;if(!y||P!=y.x||M!=y.y){y&&A?(b=y.x,c=y.y):(b=0,c=0);var k={x:b+P,y:c+M};(A||!y)&&(y=k),T.push(k),C=b+P,g=c+M}},x=function(P){var M=P.pathSegTypeAsLetter.toUpperCase();if(M!=="Z"){switch(M){case"M":case"L":case"T":case"C":case"S":case"Q":C=P.x,g=P.y;break;case"H":C=P.x;break;case"V":g=P.y;break}E(C,g,P.pathSegType)}};for(e._svgPathToAbsolute(o),v=o.getTotalLength(),i=[],f=0;f<o.pathSegList.numberOfItems;f+=1)i.push(o.pathSegList.getItem(f));for(s=i.concat();p<v;){if(S=o.getPathSegAtLength(p),t=i[S],t!=m){for(;s.length&&s[0]!=t;)x(s.shift());m=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":l=o.getPointAtLength(p),E(l.x,l.y,0);break}p+=n}for(f=0,r=s.length;f<r;++f)x(s[f]);return T},e._svgPathToAbsolute=function(o){for(var n,f,r,v,l,t,i=o.pathSegList,s=0,m=0,y=i.numberOfItems,S=0;S<y;++S){var T=i.getItem(S),b=T.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(b))"x"in T&&(s=T.x),"y"in T&&(m=T.y);else switch("x1"in T&&(r=s+T.x1),"x2"in T&&(l=s+T.x2),"y1"in T&&(v=m+T.y1),"y2"in T&&(t=m+T.y2),"x"in T&&(s+=T.x),"y"in T&&(m+=T.y),b){case"m":i.replaceItem(o.createSVGPathSegMovetoAbs(s,m),S);break;case"l":i.replaceItem(o.createSVGPathSegLinetoAbs(s,m),S);break;case"h":i.replaceItem(o.createSVGPathSegLinetoHorizontalAbs(s),S);break;case"v":i.replaceItem(o.createSVGPathSegLinetoVerticalAbs(m),S);break;case"c":i.replaceItem(o.createSVGPathSegCurvetoCubicAbs(s,m,r,v,l,t),S);break;case"s":i.replaceItem(o.createSVGPathSegCurvetoCubicSmoothAbs(s,m,l,t),S);break;case"q":i.replaceItem(o.createSVGPathSegCurvetoQuadraticAbs(s,m,r,v),S);break;case"t":i.replaceItem(o.createSVGPathSegCurvetoQuadraticSmoothAbs(s,m),S);break;case"a":i.replaceItem(o.createSVGPathSegArcAbs(s,m,T.r1,T.r2,T.angle,T.largeArcFlag,T.sweepFlag),S);break;case"z":case"Z":s=n,m=f;break}(b=="M"||b=="m")&&(n=s,f=m)}}})()},function(w,F,d){var e={};w.exports=e;var u=d(6);d(0),function(){e.create=u.create,e.add=u.add,e.remove=u.remove,e.clear=u.clear,e.addComposite=u.addComposite,e.addBody=u.addBody,e.addConstraint=u.addConstraint}()}])})})(ut);var zt=ut.exports,Yt=Object.defineProperty,ft=(a,h)=>{for(var w in h)Yt(a,w,{get:h[w],enumerable:!0,configurable:!0,set:F=>h[w]=()=>F})};if(typeof I.createContext!="function"){const a=['Remotion requires React.createContext, but it is "undefined".','If you are in a React Server Component, turn it into a client component by adding "use client" at the top of the file.',"","Before:",'  import {useCurrentFrame} from "remotion";',"","After:",'  "use client";','  import {useCurrentFrame} from "remotion";'];throw new Error(a.join(`
`))}function Qe(){return["NOD","E_EN","V"].join("")}var Ze=()=>["e","nv"].join(""),J=()=>{const a=typeof window<"u"&&window.remotion_isPlayer,h=typeof window<"u"&&typeof window.process<"u"&&typeof window.process.env<"u"&&(window.process[Ze()][Qe()]==="test"||window.process[Ze()][Qe()]==="production"&&typeof window<"u"&&typeof window.remotion_puppeteerTimeout<"u");return{isStudio:typeof window<"u"&&window.remotion_isStudio,isRendering:h,isPlayer:a}},Kt=Z.createElement,ct=[],Jt=()=>{if(!J().isStudio)return;const a=new Proxy(Kt,{apply(h,w,F){if(ct.includes(F[0])){const[d,e,...u]=F,o={...e??{},stack:new Error().stack};return Reflect.apply(h,w,[d,o,...u])}return Reflect.apply(h,w,F)}});Z.createElement=a},xe=a=>{ct.push(a),Jt()},Qt=I.createContext(!1),Zt=()=>I.useContext(Qt);function dt(a){return!!a}var ve="4.0.229",Xt=()=>{if(typeof globalThis>"u")return;const a=globalThis.remotion_imported||typeof window<"u"&&window.remotion_imported;if(a){if(a===ve)return;throw new TypeError(`ðŸš¨ Multiple versions of Remotion detected: ${[ve,typeof a=="string"?a:"an older version"].filter(dt).join(" and ")}. This will cause things to break in an unexpected way.
Check that all your Remotion packages are on the same version. If your dependencies depend on Remotion, make them peer dependencies. You can also run \`npx remotion versions\` from your terminal to see which versions are mismatching.`)}globalThis.remotion_imported=ve,typeof window<"u"&&(window.remotion_imported=ve)},qt=(a,h)=>{const{style:w,...F}=a,d=I.useMemo(()=>({position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",...w}),[w]);return O.jsx("div",{ref:h,style:d,...F})},_t=I.forwardRef(qt),X=I.createContext(null),mt=Z.createContext({registerSequence:()=>{throw new Error("SequenceManagerContext not initialized")},unregisterSequence:()=>{throw new Error("SequenceManagerContext not initialized")},sequences:[]}),ke=Z.createContext({hidden:{},setHidden:()=>{throw new Error("SequenceVisibilityToggle not initialized")}}),en=I.createContext({getNonce:()=>0,fastRefreshes:0}),vt=()=>{const a=I.useContext(en),[h,w]=I.useState(()=>a.getNonce()),F=I.useRef(a);return I.useEffect(()=>{F.current!==a&&(F.current=a,w(a.getNonce))},[a]),h},tn={};ft(tn,{useTimelineSetFrame:()=>yn,useTimelinePosition:()=>oe,usePlayingState:()=>De,persistCurrentFrame:()=>gn,getInitialFrameState:()=>xn,getFrameForComposition:()=>xt,TimelineContext:()=>te,SetTimelineContext:()=>Be});var pt=I.createContext({compositions:[],registerComposition:()=>{},unregisterComposition:()=>{},registerFolder:()=>{},unregisterFolder:()=>{},setCurrentCompositionMetadata:()=>{},updateCompositionDefaultProps:()=>{},folders:[],currentCompositionMetadata:null,canvasContent:null,setCanvasContent:()=>{}}),nn=I.createContext({props:{},updateProps:()=>{throw new Error("Not implemented")},resetUnsaved:()=>{throw new Error("Not implemented")}});Z.createRef();var rn={"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";"},Xe={},on=a=>{Xe[a]||(console.warn(a),Xe[a]=!0)},an=a=>{for(const h of Object.keys(rn))if(a.includes(h))return{containsHex:!0,hexCode:h};return{containsHex:!1}},Fe=a=>a.startsWith("/")?Fe(a.substring(1)):a,sn=a=>{if(typeof window<"u"&&window.remotion_staticBase){if(a.startsWith(window.remotion_staticBase))throw new Error(`The value "${a}" is already prefixed with the static base ${window.remotion_staticBase}. You don't need to call staticFile() on it.`);return`${window.remotion_staticBase}/${Fe(a)}`}return`/${Fe(a)}`},ln=a=>a.split("/").map(d=>encodeURIComponent(d)).join("/"),un=a=>{if(a===null)throw new TypeError("null was passed to staticFile()");if(typeof a>"u")throw new TypeError("undefined was passed to staticFile()");if(a.startsWith("http://")||a.startsWith("https://"))throw new TypeError(`staticFile() does not support remote URLs - got "${a}". Instead, pass the URL without wrapping it in staticFile(). See: https://remotion.dev/docs/staticfile-remote-urls`);if(a.startsWith("..")||a.startsWith("./"))throw new TypeError(`staticFile() does not support relative paths - got "${a}". Instead, pass the name of a file that is inside the public/ folder. See: https://remotion.dev/docs/staticfile-relative-paths`);if(a.startsWith("/Users")||a.startsWith("/home")||a.startsWith("/tmp")||a.startsWith("/etc")||a.startsWith("/opt")||a.startsWith("/var")||a.startsWith("C:")||a.startsWith("D:")||a.startsWith("E:"))throw new TypeError(`staticFile() does not support absolute paths - got "${a}". Instead, pass the name of a file that is inside the public/ folder. See: https://remotion.dev/docs/staticfile-relative-paths`);if(a.startsWith("public/"))throw new TypeError(`Do not include the public/ prefix when using staticFile() - got "${a}". See: https://remotion.dev/docs/staticfile-relative-paths`);const h=an(a);h.containsHex&&on(`WARNING: You seem to pass an already encoded path (path contains ${h.hexCode}). Since Remotion 4.0, the encoding is done by staticFile() itself. You may want to remove a encodeURIComponent() wrapping.`);const w=ln(a),F=sn(w);return F.startsWith("/")?F:`/${F}`},qe="remotion-date:",_e="remotion-file:",fn=a=>JSON.parse(a,(h,w)=>typeof w=="string"&&w.startsWith(qe)?new Date(w.replace(qe,"")):typeof w=="string"&&w.startsWith(_e)?un(w.replace(_e,"")):w),et=!1,cn=()=>{et||(et=!0,console.warn("Called `getInputProps()` on the server. This function is not available server-side and has returned an empty object."),console.warn("To hide this warning, don't call this function on the server:"),console.warn("  typeof window === 'undefined' ? {} : getInputProps()"))},dn=()=>{if(typeof window>"u")return cn(),{};if(J().isPlayer)throw new Error("You cannot call `getInputProps()` from a <Player>. Instead, the props are available as React props from component that you passed as `component` prop.");const a=window.remotion_inputProps;return a?fn(a):{}};function tt(a,h,w){if(typeof a!="number")throw new Error(`The "${h}" prop ${w} must be a number, but you passed a value of type ${typeof a}`);if(isNaN(a))throw new TypeError(`The "${h}" prop ${w} must not be NaN, but is NaN.`);if(!Number.isFinite(a))throw new TypeError(`The "${h}" prop ${w} must be finite, but is ${a}.`);if(a%1!==0)throw new TypeError(`The "${h}" prop ${w} must be an integer, but is ${a}.`);if(a<=0)throw new TypeError(`The "${h}" prop ${w} must be positive, but got ${a}.`)}function ht(a,h){const{allowFloats:w,component:F}=h;if(typeof a>"u")throw new Error(`The "durationInFrames" prop ${F} is missing.`);if(typeof a!="number")throw new Error(`The "durationInFrames" prop ${F} must be a number, but you passed a value of type ${typeof a}`);if(a<=0)throw new TypeError(`The "durationInFrames" prop ${F} must be positive, but got ${a}.`);if(!w&&a%1!==0)throw new TypeError(`The "durationInFrames" prop ${F} must be an integer, but got ${a}.`);if(!Number.isFinite(a))throw new TypeError(`The "durationInFrames" prop ${F} must be finite, but got ${a}.`)}function mn(a,h,w){if(typeof a!="number")throw new Error(`"fps" must be a number, but you passed a value of type ${typeof a} ${h}`);if(!Number.isFinite(a))throw new Error(`"fps" must be a finite, but you passed ${a} ${h}`);if(isNaN(a))throw new Error(`"fps" must not be NaN, but got ${a} ${h}`);if(a<=0)throw new TypeError(`"fps" must be positive, but got ${a} ${h}`)}var vn=I.createContext(null);I.createRef();var pn=a=>!!a.calculateMetadata,hn=a=>{const h=I.useContext(vn),{props:w}=I.useContext(nn),{compositions:F,canvasContent:d,currentCompositionMetadata:e}=I.useContext(pt),u=(d==null?void 0:d.type)==="composition"?d.compositionId:null,o=a??u,n=F.find(r=>r.id===o),f=I.useMemo(()=>n?w[n.id]??{}:{},[w,n]);return I.useMemo(()=>n?e?{type:"success",result:{...e,id:n.id,props:e.props,defaultProps:n.defaultProps??{},defaultCodec:e.defaultCodec}}:pn(n)?h[n.id]?h[n.id]:null:(ht(n.durationInFrames,{allowFloats:!1,component:`in <Composition id="${n.id}">`}),mn(n.fps,`in <Composition id="${n.id}">`),tt(n.width,"width",`in <Composition id="${n.id}">`),tt(n.height,"height",`in <Composition id="${n.id}">`),{type:"success",result:{width:n.width,height:n.height,fps:n.fps,id:n.id,durationInFrames:n.durationInFrames,defaultProps:n.defaultProps??{},props:{...n.defaultProps??{},...f??{},...typeof window>"u"||J().isPlayer?{}:dn()??{}},defaultCodec:null}}):null,[n,h,e,f])},gt=()=>{const{canvasContent:a,compositions:h,currentCompositionMetadata:w}=I.useContext(pt),F=h.find(e=>(a==null?void 0:a.type)==="composition"&&e.id===a.compositionId),d=hn((F==null?void 0:F.id)??null);return I.useMemo(()=>!d||d.type==="error"||d.type==="loading"||!F?null:{...d.result,defaultProps:F.defaultProps??{},id:F.id,...w??{},component:F.component},[w,d,F])},te=I.createContext({frame:{},playing:!1,playbackRate:1,rootId:"",imperativePlaying:{current:!1},setPlaybackRate:()=>{throw new Error("default")},audioAndVideoTags:{current:[]}}),Be=I.createContext({setFrame:()=>{throw new Error("default")},setPlaying:()=>{throw new Error("default")}}),Le=()=>"remotion.time-all",gn=a=>{localStorage.setItem(Le(),JSON.stringify(a))},xn=()=>{const a=localStorage.getItem(Le())??"{}";return JSON.parse(a)},xt=a=>{const h=localStorage.getItem(Le())??"{}",w=JSON.parse(h);return w[a]!==void 0?Number(w[a]):typeof window>"u"?0:window.remotion_initialFrame??0},oe=()=>{const a=gt(),h=I.useContext(te);if(!a)return typeof window>"u"?0:window.remotion_initialFrame??0;const w=h.frame[a.id]??(J().isPlayer?0:xt(a.id));return Math.min(a.durationInFrames-1,w)},yn=()=>{const{setFrame:a}=I.useContext(Be);return a},De=()=>{const{playing:a,imperativePlaying:h}=I.useContext(te),{setPlaying:w}=I.useContext(Be);return I.useMemo(()=>[a,w,h],[h,a,w])},yt=I.createContext(!1),wt=()=>{const a=I.useContext(X),h=(a==null?void 0:a.width)??null,w=(a==null?void 0:a.height)??null,F=(a==null?void 0:a.durationInFrames)??null,d=gt();return I.useMemo(()=>{if(!d)return null;const{id:e,durationInFrames:u,fps:o,height:n,width:f,defaultProps:r,props:v,defaultCodec:l}=d;return{id:e,width:h??f,height:w??n,fps:o,durationInFrames:F??u,defaultProps:r,props:v,defaultCodec:l}},[F,w,h,d])},ne=()=>{const a=wt(),h=I.useContext(yt),w=Zt();if(!a)throw typeof window<"u"&&window.remotion_isPlayer||w?new Error(["No video config found. Likely reasons:","- You are probably calling useVideoConfig() from outside the component passed to <Player />. See https://www.remotion.dev/docs/player/examples for how to set up the Player correctly.","- You have multiple versions of Remotion installed which causes the React context to get lost."].join("-")):new Error("No video config found. You are probably calling useVideoConfig() from a component which has not been registered as a <Composition />. See https://www.remotion.dev/docs/the-fundamentals#defining-compositions for more information.");if(!h)throw new Error("Called useVideoConfig() outside a Remotion composition.");return a},re=()=>{if(!I.useContext(yt))throw J().isPlayer?new Error("useCurrentFrame can only be called inside a component that was passed to <Player>. See: https://www.remotion.dev/docs/player/examples"):new Error("useCurrentFrame() can only be called inside a component that was registered as a composition. See https://www.remotion.dev/docs/the-fundamentals#defining-compositions");const h=oe(),w=I.useContext(X),F=w?w.cumulatedFrom+w.relativeFrom:0;return h-F},wn=({frame:a,children:h,active:w=!0})=>{const F=re(),d=ne();if(typeof a>"u")throw new Error("The <Freeze /> component requires a 'frame' prop, but none was passed.");if(typeof a!="number")throw new Error(`The 'frame' prop of <Freeze /> must be a number, but is of type ${typeof a}`);if(Number.isNaN(a))throw new Error("The 'frame' prop of <Freeze /> must be a real number, but it is NaN.");if(!Number.isFinite(a))throw new Error(`The 'frame' prop of <Freeze /> must be a finite number, but it is ${a}.`);const e=I.useMemo(()=>{if(typeof w=="boolean")return w;if(typeof w=="function")return w(F)},[w,F]),u=I.useContext(te),o=I.useContext(X),n=(o==null?void 0:o.relativeFrom)??0,f=I.useMemo(()=>e?{...u,playing:!1,imperativePlaying:{current:!1},frame:{[d.id]:a+n}}:u,[e,u,d.id,a,n]);return O.jsx(te.Provider,{value:f,children:h})},Sn=({from:a=0,durationInFrames:h=1/0,children:w,name:F,height:d,width:e,showInTimeline:u=!0,_remotionInternalLoopDisplay:o,_remotionInternalStack:n,_remotionInternalPremountDisplay:f,...r},v)=>{const{layout:l="absolute-fill"}=r,[t]=I.useState(()=>String(Math.random())),i=I.useContext(X),{rootId:s}=I.useContext(te),m=i?i.cumulatedFrom+i.relativeFrom:0,y=vt();if(l!=="absolute-fill"&&l!=="none")throw new TypeError(`The layout prop of <Sequence /> expects either "absolute-fill" or "none", but you passed: ${l}`);if(l==="none"&&typeof r.style<"u")throw new TypeError('If layout="none", you may not pass a style.');if(typeof h!="number")throw new TypeError(`You passed to durationInFrames an argument of type ${typeof h}, but it must be a number.`);if(h<=0)throw new TypeError(`durationInFrames must be positive, but got ${h}`);if(typeof a!="number")throw new TypeError(`You passed to the "from" props of your <Sequence> an argument of type ${typeof a}, but it must be a number.`);if(!Number.isFinite(a))throw new TypeError(`The "from" prop of a sequence must be finite, but got ${a}.`);const S=oe(),T=ne(),b=i?Math.min(i.durationInFrames-a,h):h,c=Math.max(0,Math.min(T.durationInFrames-a,b)),{registerSequence:p,unregisterSequence:C}=I.useContext(mt),{hidden:g}=I.useContext(ke),E=I.useMemo(()=>(i==null?void 0:i.premounting)??!!r._remotionInternalIsPremounting,[r._remotionInternalIsPremounting,i==null?void 0:i.premounting]),x=I.useMemo(()=>({cumulatedFrom:m,relativeFrom:a,durationInFrames:c,parentFrom:(i==null?void 0:i.relativeFrom)??0,id:t,height:d??(i==null?void 0:i.height)??null,width:e??(i==null?void 0:i.width)??null,premounting:E}),[m,a,c,i,t,d,e,E]),P=I.useMemo(()=>F??"",[F]);I.useEffect(()=>{if(J().isStudio)return p({from:a,duration:c,id:t,displayName:P,parent:(i==null?void 0:i.id)??null,type:"sequence",rootId:s,showInTimeline:u,nonce:y,loopDisplay:o,stack:n??null,premountDisplay:f??null}),()=>{C(t)}},[h,t,F,p,P,C,i==null?void 0:i.id,c,s,a,u,y,o,n,f]);const M=Math.ceil(m+a+h-1),R=S<m+a||S>M?null:w,A=r.layout==="none"?void 0:r.style,k=I.useMemo(()=>({flexDirection:void 0,...e?{width:e}:{},...d?{height:d}:{},...A??{}}),[d,A,e]);if(v!==null&&l==="none")throw new TypeError('It is not supported to pass both a `ref` and `layout="none"` to <Sequence />.');return g[t]??!1?null:O.jsx(X.Provider,{value:x,children:R===null?null:r.layout==="none"?R:O.jsx(_t,{ref:v,style:k,className:r.className,children:R})})},Cn=I.forwardRef(Sn),Pn=(a,h)=>{const w=re();if(a.layout==="none")throw new Error('`<Sequence>` with `premountFor` prop does not support layout="none"');const{style:F,from:d=0,premountFor:e=0,...u}=a,o=w<d&&w>=d-e,n=I.useMemo(()=>({...F,opacity:o?0:1,pointerEvents:o?"none":(F==null?void 0:F.pointerEvents)??void 0}),[o,F]);return O.jsx(wn,{frame:d,active:o,children:O.jsx(le,{ref:h,from:d,style:n,_remotionInternalPremountDisplay:e,_remotionInternalIsPremounting:o,...u})})},En=I.forwardRef(Pn),Tn=(a,h)=>a.layout!=="none"&&a.premountFor&&!J().isRendering?O.jsx(En,{...a,ref:h}):O.jsx(Cn,{...a,ref:h}),le=I.forwardRef(Tn),St=I.createContext({registerRenderAsset:()=>{},unregisterRenderAsset:()=>{},renderAssets:[]}),ie=a=>typeof window>"u"?a:new URL(a,window.origin).href,Ct=({endAt:a,mediaDuration:h,playbackRate:w,startFrom:F})=>{let d=h;typeof a<"u"&&(d=a),typeof F<"u"&&(d-=F);const e=d/w;return Math.floor(e)};function Ne(a){let h;throw Mn(a)?(h=a,h.stack||(h.stack=new Error(h.message).stack)):typeof a=="string"?h=Error(a):h=Error("Rendering was cancelled"),window.remotion_cancelledError=h.stack,h}var Mn=a=>a instanceof Error?!0:!(a===null||typeof a!="object"||!("stack"in a)||typeof a.stack!="string"||!("message"in a)||typeof a.message!="string"),Pt=I.createContext(null),Fn=()=>Z.useContext(Pt),ye=({durationInFrames:a,times:h=1/0,children:w,name:F,...d})=>{const e=re(),{durationInFrames:u}=ne();if(ht(a,{component:"of the <Loop /> component",allowFloats:!0}),typeof h!="number")throw new TypeError(`You passed to "times" an argument of type ${typeof h}, but it must be a number.`);if(h!==1/0&&h%1!==0)throw new TypeError(`The "times" prop of a loop must be an integer, but got ${h}.`);if(h<0)throw new TypeError(`The "times" prop of a loop must be at least 0, but got ${h}`);const o=Math.ceil(u/a),n=Math.min(o,h),f=d.layout==="none"?void 0:d.style,r=a*(n-1),l=Math.floor(e/a)*a,t=Math.min(l,r),i=I.useMemo(()=>({numberOfTimes:n,startOffset:-t,durationInFrames:a}),[n,a,t]),s=I.useMemo(()=>({iteration:Math.floor(e/a),durationInFrames:a}),[e,a]);return O.jsx(Pt.Provider,{value:s,children:O.jsx(le,{durationInFrames:a,from:t,name:F??"<Loop>",_remotionInternalLoopDisplay:i,layout:d.layout,style:f,children:w})})};ye.useLoop=Fn;var bn=I.createContext({}),ue=a=>I.useContext(bn)[a]??a,Et=(a,h)=>{if(typeof a.volume!="number"&&typeof a.volume!="function"&&typeof a.volume<"u")throw new TypeError(`You have passed a volume of type ${typeof a.volume} to your <${h} /> component. Volume must be a number or a function with the signature '(frame: number) => number' undefined.`);if(typeof a.volume=="number"&&a.volume<0)throw new TypeError(`You have passed a volume below 0 to your <${h} /> component. Volume must be between 0 and 1`);if(typeof a.playbackRate!="number"&&typeof a.playbackRate<"u")throw new TypeError(`You have passed a playbackRate of type ${typeof a.playbackRate} to your <${h} /> component. Playback rate must a real number or undefined.`);if(typeof a.playbackRate=="number"&&(isNaN(a.playbackRate)||!Number.isFinite(a.playbackRate)||a.playbackRate<=0))throw new TypeError(`You have passed a playbackRate of ${a.playbackRate} to your <${h} /> component. Playback rate must be a real number above 0.`)},Tt=(a,h)=>{if(typeof a<"u"){if(typeof a!="number")throw new TypeError(`type of startFrom prop must be a number, instead got type ${typeof a}.`);if(isNaN(a)||a===1/0)throw new TypeError("startFrom prop can not be NaN or Infinity.");if(a<0)throw new TypeError(`startFrom must be greater than equal to 0 instead got ${a}.`)}if(typeof h<"u"){if(typeof h!="number")throw new TypeError(`type of endAt prop must be a number, instead got type ${typeof h}.`);if(isNaN(h))throw new TypeError("endAt prop can not be NaN.");if(h<=0)throw new TypeError(`endAt must be a positive number, instead got ${h}.`)}if(h<a)throw new TypeError("endAt prop must be greater than startFrom prop.")},Mt=I.createContext({durations:{},setDurations:()=>{throw new Error("context missing")}});function nt(a){let h=a+1831565813;return h=Math.imul(h^h>>>15,h|1),h^=h+Math.imul(h^h>>>7,h|61),((h^h>>>14)>>>0)/4294967296}function In(a){let h=0,w=0,F=0;for(h=0;h<a.length;h++)w=a.charCodeAt(h),F=(F<<5)-F+w,F|=0;return F}var Ve=(a,h)=>{if(a===null)return Math.random();if(typeof a=="string")return nt(In(a));if(typeof a=="number")return nt(a*1e10);throw new Error("random() argument must be a number or a string")},we=()=>{const a=I.useContext(X);return Math.min(0,(a==null?void 0:a.relativeFrom)??0)},Se=a=>{const h=ye.useLoop(),w=re(),F=we();return a==="repeat"||h===null?w+F:w+F+h.durationInFrames*h.iteration},Rn=a=>{if(/data:|blob:/.test(a.substring(0,5)))return"Data URL";const h=a.split("/").map(w=>w.split("\\")).flat(1);return h[h.length-1]},be=(a,h,w)=>{const{current:F}=a;if(!F)return;const d=F.play();d.catch&&d.catch(e=>{if(F&&!e.message.includes("request was interrupted by a call to pause")&&!e.message.includes("The operation was aborted.")&&!e.message.includes("The fetching process for the media resource was aborted by the user agent")&&!e.message.includes("request was interrupted by a new load request")&&!e.message.includes("because the media was removed from the document")&&!(e.message.includes("user didn't interact with the document")&&F.muted)&&(console.log(`Could not play ${h} due to following error: `,e),!F.muted)){if(w){w();return}console.log("The video will be muted and we'll retry playing it."),h==="video"&&J().isPlayer&&console.log("Use onAutoPlayError() to handle this error yourself."),F.muted=!0,F.play()}})},fe=({frame:a,volume:h,mediaVolume:w=1,allowAmplificationDuringRender:F})=>{const d=F?1/0:1;if(typeof h=="number")return Math.min(d,h*w);if(typeof h>"u")return Number(w);const e=h(a)*w;if(typeof e!="number")throw new TypeError(`You passed in a a function to the volume prop but it did not return a number but a value of type ${typeof e} for frame ${a}`);if(Number.isNaN(e))throw new TypeError(`You passed in a function to the volume prop but it returned NaN for frame ${a}.`);if(!Number.isFinite(e))throw new TypeError(`You passed in a function to the volume prop but it returned a non-finite number for frame ${a}.`);return Math.max(0,Math.min(d,e))},rt={},An=a=>{rt[a]||(console.warn(a),rt[a]=!0)},Ft=({volume:a,mediaVolume:h,mediaRef:w,src:F,mediaType:d,playbackRate:e,displayName:u,id:o,stack:n,showInTimeline:f,premountDisplay:r,onAutoPlayError:v})=>{const l=ne(),{rootId:t,audioAndVideoTags:i}=I.useContext(te),s=I.useContext(X),m=s?s.relativeFrom+s.cumulatedFrom:0,[y]=De(),S=we(),{registerSequence:T,unregisterSequence:b}=I.useContext(mt),[c]=I.useState(()=>a),p=vt(),C=s?Math.min(s.durationInFrames,l.durationInFrames):l.durationInFrames,g=typeof a=="function",E=I.useMemo(()=>typeof a=="number"?a:new Array(Math.floor(Math.max(0,C+S))).fill(!0).map((x,P)=>fe({frame:P+S,volume:a,mediaVolume:h,allowAmplificationDuringRender:!1})).join(","),[C,S,a,h]);I.useEffect(()=>{typeof a=="number"&&a!==c&&An(`Remotion: The ${d} with src ${F} has changed it's volume. Prefer the callback syntax for setting volume to get better timeline display: https://www.remotion.dev/docs/using-audio/#controlling-volume`)},[c,d,F,a]),I.useEffect(()=>{var x,P;if(w.current){if(!F)throw new Error("No src passed");if(!(!J().isStudio&&((P=(x=window.process)==null?void 0:x.env)==null?void 0:P.NODE_ENV)!=="test")&&f)return T({type:d,src:F,id:o,duration:C,from:0,parent:(s==null?void 0:s.id)??null,displayName:u??Rn(F),rootId:t,volume:E,showInTimeline:!0,nonce:p,startMediaFrom:0-S,doesVolumeChange:g,loopDisplay:void 0,playbackRate:e,stack:n,premountDisplay:r}),()=>{b(o)}}},[m,C,o,s,F,T,t,b,l,E,g,p,w,d,S,e,u,n,f,r]),I.useEffect(()=>{const x={id:o,play:()=>{if(y)return be(w,d,v)}};return i.current.push(x),()=>{i.current=i.current.filter(P=>P.id!==o)}},[i,o,w,d,v,y])},bt=Z.createContext(null),kn=a=>{const[h,w]=I.useState(a.buffering.current);return I.useEffect(()=>{const F=()=>{w(!0)},d=()=>{w(!1)};return a.listenForBuffering(F),a.listenForResume(d),()=>{a.listenForBuffering(()=>{}),a.listenForResume(()=>{})}},[a]),h},$e=()=>{const a=I.useContext(bt),h=a?a.addBlock:null;return I.useMemo(()=>({delayPlayback:()=>{if(!h)throw new Error("Tried to enable the buffering state, but a Remotion context was not found. This API can only be called in a component that was passed to the Remotion Player or a <Composition>. Or you might have experienced a version mismatch - run `npx remotion versions` and ensure all packages have the same version. This error is thrown by the buffer state https://remotion.dev/docs/player/buffer-state");const{unblock:w}=h({id:String(Math.random())});return{unblock:w}}}),[h])},Bn=({mediaRef:a,mediaType:h,onVariableFpsVideoDetected:w,pauseWhenBuffering:F})=>{const d=I.useRef(!1),{delayPlayback:e}=$e(),u=I.useCallback(o=>{if(h!=="video"||!F)return;const n=a.current;if(!n||!n.requestVideoFrameCallback)return;d.current=!0;const f=e(),r=()=>{f.unblock(),n.removeEventListener("ended",r,{once:!0}),n.removeEventListener("pause",r,{once:!0}),d.current=!1},v=()=>{r()};n.requestVideoFrameCallback((l,t)=>{Math.abs(t.mediaTime-o)>.5&&w(),r()}),n.addEventListener("ended",v,{once:!0}),n.addEventListener("pause",v,{once:!0}),n.addEventListener("canplay",v,{once:!0})},[e,a,h,w,F]);return I.useMemo(()=>({isBuffering:()=>d.current,bufferUntilFirstFrame:u}),[u])},Ln=({element:a,shouldBuffer:h,isPremounting:w})=>{const F=$e(),[d,e]=I.useState(!1);return I.useEffect(()=>{let u=[];const{current:o}=a;if(!o||!h||w)return;const n=()=>{u.forEach(v=>v()),u=[],e(!1)},f=()=>{e(!0);const{unblock:v}=F.delayPlayback(),l=()=>{n(),r()},t=()=>{n(),r()};o.addEventListener("canplay",l,{once:!0}),u.push(()=>{o.removeEventListener("canplay",l)}),o.addEventListener("error",t,{once:!0}),u.push(()=>{o.removeEventListener("error",t)}),u.push(()=>{v()})},r=()=>{o.readyState<o.HAVE_FUTURE_DATA?(f(),navigator.userAgent.includes("Firefox/")||o.load()):(o.addEventListener("waiting",f),u.push(()=>{o.removeEventListener("waiting",f)}))};return r(),()=>{n()}},[F,a,w,h]),d},Dn=({mediaRef:a,mediaType:h,lastSeek:w,onVariableFpsVideoDetected:F})=>{const d=I.useRef(null);return I.useEffect(()=>{const{current:e}=a;if(e)d.current=e.currentTime;else{d.current=null;return}if(h!=="video"){d.current=null;return}const u=e;if(!u.requestVideoFrameCallback)return;let o=()=>{};const n=()=>{if(!u)return;const f=u.requestVideoFrameCallback((r,v)=>{if(d.current!==null){const l=Math.abs(d.current-v.mediaTime),t=Math.abs(w.current===null?1/0:v.mediaTime-w.current);l>.5&&t>.5&&v.mediaTime>d.current&&F()}d.current=v.mediaTime,n()});o=()=>{u.cancelVideoFrameCallback(f),o=()=>{}}};return n(),()=>{o()}},[w,a,h,F]),d};function Nn(a,h,w,F){const{extrapolateLeft:d,extrapolateRight:e,easing:u}=F;let o=a;const[n,f]=h,[r,v]=w;if(o<n){if(d==="identity")return o;if(d==="clamp")o=n;else if(d==="wrap"){const l=f-n;o=((o-n)%l+l)%l+n}}if(o>f){if(e==="identity")return o;if(e==="clamp")o=f;else if(e==="wrap"){const l=f-n;o=((o-n)%l+l)%l+n}}return r===v?r:(o=(o-n)/(f-n),o=u(o),o=o*(v-r)+r,o)}function Vn(a,h){let w;for(w=1;w<h.length-1&&!(h[w]>=a);++w);return w-1}function $n(a){for(let h=1;h<a.length;++h)if(!(a[h]>a[h-1]))throw new Error(`inputRange must be strictly monotonically increasing but got [${a.join(",")}]`)}function it(a,h){if(h.length<2)throw new Error(a+" must have at least 2 elements");for(const w of h){if(typeof w!="number")throw new Error(`${a} must contain only numbers`);if(!Number.isFinite(w))throw new Error(`${a} must contain only finite numbers, but got [${h.join(",")}]`)}}function On(a,h,w,F){if(typeof a>"u")throw new Error("input can not be undefined");if(typeof h>"u")throw new Error("inputRange can not be undefined");if(typeof w>"u")throw new Error("outputRange can not be undefined");if(h.length!==w.length)throw new Error("inputRange ("+h.length+") and outputRange ("+w.length+") must have the same length");it("inputRange",h),it("outputRange",w),$n(h);const d=n=>n;let e="extend",u="extend";if(typeof a!="number")throw new TypeError("Cannot interpolate an input which is not a number");const o=Vn(a,h);return Nn(a,[h[o],h[o+1]],[w[o],w[o+1]],{easing:d,extrapolateLeft:e,extrapolateRight:u})}var Hn=({frame:a,playbackRate:h,startFrom:w})=>On(a,[-1,w,w+1],[-1,w,w+h]),It=({fps:a,frame:h,playbackRate:w,startFrom:F})=>{const d=Hn({frame:h,playbackRate:w,startFrom:F}),e=1e3/a;return d*e/1e3},Rt=(a,h)=>Math.round(a/h*100)/100,Oe=()=>{if(typeof window>"u")return!1;const a=/iP(ad|od|hone)/i.test(window.navigator.userAgent),h=/AppleWebKit/.test(window.navigator.userAgent);return a&&h},Wn=a=>Oe()&&a.startsWith("blob:"),Ie=({actualFrom:a,fps:h})=>Rt(Math.max(0,-a),h),Re=({duration:a,fps:h})=>Rt(a,h),Un=({actualSrc:a,actualFrom:h,duration:w,fps:F})=>{if(Wn(a)||a.startsWith("data:")||!!new URL(a,(typeof window>"u"?null:window.location.href)??"http://localhost:3000").hash||!Number.isFinite(h))return a;const e=`${a}#t=${Ie({actualFrom:h,fps:F})}`;return Number.isFinite(w)?`${e},${Re({duration:w,fps:F})}`:e},Gn=({prevStartFrom:a,newStartFrom:h,prevDuration:w,newDuration:F,fps:d})=>{const e=Ie({actualFrom:a,fps:d}),u=Ie({actualFrom:h,fps:d}),o=Re({duration:w,fps:d}),n=Re({duration:F,fps:d});return!(u<e||n>o)},jn=({actualSrc:a,actualFrom:h,duration:w,fps:F})=>{const d=I.useRef(h),e=I.useRef(w),u=I.useRef(a);return(!Gn({prevStartFrom:d.current,newStartFrom:h,prevDuration:e.current,newDuration:w,fps:F})||a!==u.current)&&(d.current=h,e.current=w,u.current=a),Un({actualSrc:u.current,actualFrom:d.current,duration:e.current,fps:F})},ot={},zn=(a,h)=>{if(a===null||a.seekable.length===0||a.seekable.length>1||ot[a.src])return;const w={start:a.seekable.start(0),end:a.seekable.end(0)};if(w.start===0&&w.end===0){const F=[`The media ${a.src} cannot be seeked. This could be one of few reasons:`,"1) The media resource was replaced while the video is playing but it was not loaded yet.","2) The media does not support seeking.","3) The media was loaded with security headers prventing it from being included.","Please see https://remotion.dev/docs/non-seekable-media for assistance."].join(`
`);if(h==="console-error")console.error(F);else if(h==="console-warning")console.warn(`The media ${a.src} does not support seeking. The video will render fine, but may not play correctly in the Remotion Studio and in the <Player>. See https://remotion.dev/docs/non-seekable-media for an explanation.`);else throw new Error(F);ot[a.src]=!0}},He=.45,Te=(a,h)=>{if(!a.current)return;const w=Oe()?Number(h.toFixed(1)):h;a.current.currentTime=w},At=({mediaRef:a,src:h,mediaType:w,playbackRate:F,onlyWarnForMediaSeekingError:d,acceptableTimeshift:e,pauseWhenBuffering:u,isPremounting:o,debugSeeking:n,onAutoPlayError:f})=>{const{playbackRate:r}=I.useContext(te),v=re(),l=oe(),[t]=De(),i=I.useContext(bt),{fps:s}=ne(),m=we(),y=I.useRef(null),S=I.useRef(null);if(!i)throw new Error("useMediaPlayback must be used inside a <BufferingContext>");const T=I.useRef({}),b=I.useCallback(()=>{h&&(n&&console.log(`Detected ${h} as a variable FPS video. Disabling buffering while seeking.`),T.current[h]=!0)},[n,h]),c=Dn({mediaRef:a,mediaType:w,lastSeek:S,onVariableFpsVideoDetected:b}),p=It({frame:v,playbackRate:F,startFrom:-m,fps:s}),C=Ln({element:a,shouldBuffer:u,isPremounting:o}),{bufferUntilFirstFrame:g,isBuffering:E}=Bn({mediaRef:a,mediaType:w,onVariableFpsVideoDetected:b,pauseWhenBuffering:u}),x=F*r,P=(()=>{var R;return(R=a.current)!=null&&R.duration?Math.min(a.current.duration,e??He):e})(),M=kn(i);I.useEffect(()=>{var A,k;if(!t){(A=a.current)==null||A.pause();return}const R=C||E();M&&!R&&((k=a.current)==null||k.pause())},[E,C,M,a,t]),I.useEffect(()=>{const R=w==="audio"?"<Audio>":"<Video>";if(!a.current)throw new Error(`No ${w} ref found`);if(!h)throw new Error(`No 'src' attribute was passed to the ${R} element.`);const A=Math.max(0,x);a.current.playbackRate!==A&&(a.current.playbackRate=A);const{duration:k}=a.current,B=!Number.isNaN(k)&&Number.isFinite(k)?Math.min(k,p):p,L=a.current.currentTime,D=c.current??null,N=T.current[h],W=Math.abs(B-L),U=D?Math.abs(B-D):null,H=U&&!N?U:W;if(n&&console.log({mediaTagTime:L,rvcTime:D,shouldBeTime:B,state:a.current.readyState,playing:!a.current.paused,isVariableFpsVideo:N}),H>P&&y.current!==B){n&&console.log("Seeking",{shouldBeTime:B,isTime:L,rvcTime:D,timeShift:H,isVariableFpsVideo:N}),Te(a,B),S.current=B,y.current=B,t&&!N&&(x>0&&g(B),a.current.paused&&be(a,w,f)),d||zn(a.current,d?"console-warning":"console-error");return}const j=t?.15:1e-5,Q=Math.abs(a.current.currentTime-B)>j,$=C||E(),V=i.buffering.current&&!$;if(!t||V){Q&&(Te(a,B),S.current=B);return}(a.current.paused&&!a.current.ended||l===0)&&(Q&&(Te(a,B),S.current=B),be(a,w,f),N||x>0&&g(B))},[l,P,g,i.buffering,c,n,p,E,C,a,w,d,x,t,h,f])},kt=a=>{const[h,w]=I.useState(1);return I.useEffect(()=>{const F=a.current;if(!F)return;const d=()=>{w(F.volume)};return F.addEventListener("volumechange",d),()=>F.removeEventListener("volumechange",d)},[a]),I.useEffect(()=>{const F=a.current;F&&F.volume!==h&&w(F.volume)},[h,a]),h},Yn=1e-5,We=(a,h)=>Math.abs(a-h)<Yn,Bt=({volumePropFrame:a,actualVolume:h,volume:w,mediaVolume:F,mediaRef:d})=>{I.useEffect(()=>{const e=fe({frame:a,volume:w,mediaVolume:F,allowAmplificationDuringRender:!1});!We(e,h)&&d.current&&(d.current.volume=e)},[h,a,d,w,F])},Lt=I.createContext({mediaMuted:!1,mediaVolume:1}),Dt=I.createContext({setMediaMuted:()=>{throw new Error("default")},setMediaVolume:()=>{throw new Error("default")}}),Nt=()=>{const{mediaVolume:a}=I.useContext(Lt),{setMediaVolume:h}=I.useContext(Dt);return I.useMemo(()=>[a,h],[a,h])},Vt=()=>{const{mediaMuted:a}=I.useContext(Lt),{setMediaMuted:h}=I.useContext(Dt);return I.useMemo(()=>[a,h],[a,h])},$t=I.createContext(null),Kn=(a,h)=>{const w=I.useContext($t),[F]=I.useState(()=>w&&w.numberOfAudioTags>0?w.registerAudio(a,h):{el:Z.createRef(),id:Math.random(),props:a,audioId:h}),d=Z.useInsertionEffect??Z.useLayoutEffect;return typeof document<"u"&&(d(()=>{w&&w.numberOfAudioTags>0&&w.updateAudio({id:F.id,aud:a,audioId:h})},[a,w,F.id,h]),d(()=>()=>{w&&w.numberOfAudioTags>0&&w.unregisterAudio(F.id)},[w,F.id])),F},Jn=(a,h)=>{const[w]=I.useState(a.shouldPreMountAudioTags);if(a.shouldPreMountAudioTags!==w)throw new Error("Cannot change the behavior for pre-mounting audio tags dynamically.");const{volume:F,muted:d,playbackRate:e,shouldPreMountAudioTags:u,src:o,onDuration:n,acceptableTimeShiftInSeconds:f,_remotionInternalNeedsDurationCalculation:r,_remotionInternalNativeLoopPassed:v,_remotionInternalStack:l,_remotionDebugSeeking:t,allowAmplificationDuringRender:i,name:s,pauseWhenBuffering:m,showInTimeline:y,loopVolumeCurveBehavior:S,stack:T,...b}=a,[c]=Nt(),[p]=Vt(),C=Se(S??"repeat"),{hidden:g}=I.useContext(ke);if(!o)throw new TypeError("No 'src' was passed to <Audio>.");const E=ue(o),x=I.useContext(X),[P]=I.useState(()=>String(Math.random())),M=g[P]??!1,R=fe({frame:C,volume:F,mediaVolume:c,allowAmplificationDuringRender:!1}),A=I.useMemo(()=>({muted:d||p||M||R<=0,src:E,loop:v,...b}),[v,M,p,d,b,E,R]),k=I.useMemo(()=>`audio-${Ve(o??"")}-${x==null?void 0:x.relativeFrom}-${x==null?void 0:x.cumulatedFrom}-${x==null?void 0:x.durationInFrames}-muted:${a.muted}-loop:${a.loop}`,[o,x==null?void 0:x.relativeFrom,x==null?void 0:x.cumulatedFrom,x==null?void 0:x.durationInFrames,a.muted,a.loop]),B=Kn(A,k).el,L=kt(B);Bt({volumePropFrame:C,actualVolume:L,volume:F,mediaVolume:c,mediaRef:B}),Ft({volume:F,mediaVolume:c,mediaRef:B,src:o,mediaType:"audio",playbackRate:e??1,displayName:s??null,id:P,stack:l,showInTimeline:y,premountDisplay:null,onAutoPlayError:null}),At({mediaRef:B,src:o,mediaType:"audio",playbackRate:e??1,onlyWarnForMediaSeekingError:!1,acceptableTimeshift:f??He,isPremounting:!!(x!=null&&x.premounting),pauseWhenBuffering:m,debugSeeking:t,onAutoPlayError:null}),I.useImperativeHandle(h,()=>B.current,[B]);const D=I.useRef();return D.current=n,I.useEffect(()=>{var U;const{current:N}=B;if(!N)return;if(N.duration){(U=D.current)==null||U.call(D,N.src,N.duration);return}const W=()=>{var H;(H=D.current)==null||H.call(D,N.src,N.duration)};return N.addEventListener("loadedmetadata",W),()=>{N.removeEventListener("loadedmetadata",W)}},[B,o]),w?null:O.jsx("audio",{ref:B,preload:"metadata",...A})},Qn=I.forwardRef(Jn);typeof window<"u"&&(window.remotion_renderReady=!1);var pe=[];typeof window<"u"&&(window.remotion_delayRenderTimeouts={});var Zn="The delayRender was called:",Xn="Retries left: ",qn="- Rendering the frame will be retried.",at=3e4,se=(a,h)=>{var d;if(typeof a!="string"&&typeof a<"u")throw new Error("The label parameter of delayRender() must be a string or undefined, got: "+JSON.stringify(a));const w=Math.random();pe.push(w);const F=((d=Error().stack)==null?void 0:d.replace(/^Error/g,""))??"";if(J().isRendering){const e=((h==null?void 0:h.timeoutInMilliseconds)??(typeof window>"u"?at:window.remotion_puppeteerTimeout??at))-2e3;if(typeof window<"u"){const u=((h==null?void 0:h.retries)??0)-(window.remotion_attempt-1);window.remotion_delayRenderTimeouts[w]={label:a??null,timeout:setTimeout(()=>{const o=["A delayRender()",a?`"${a}"`:null,`was called but not cleared after ${e}ms. See https://remotion.dev/docs/timeout for help.`,u>0?Xn+u:null,u>0?qn:null,Zn,F].filter(dt).join(" ");Ne(Error(o))},e)}}}return typeof window<"u"&&(window.remotion_renderReady=!1),w},Y=a=>{if(typeof a>"u")throw new TypeError("The continueRender() method must be called with a parameter that is the return value of delayRender(). No value was passed.");if(typeof a!="number")throw new TypeError("The parameter passed into continueRender() must be the return value of delayRender() which is a number. Got: "+JSON.stringify(a));pe=pe.filter(h=>h===a?(J().isRendering&&(clearTimeout(window.remotion_delayRenderTimeouts[a].timeout),delete window.remotion_delayRenderTimeouts[a]),!1):!0),pe.length===0&&typeof window<"u"&&(window.remotion_renderReady=!0)},_n=(a,h)=>{const w=I.useRef(null),{volume:F,playbackRate:d,allowAmplificationDuringRender:e,onDuration:u,toneFrequency:o,_remotionInternalNeedsDurationCalculation:n,_remotionInternalNativeLoopPassed:f,acceptableTimeShiftInSeconds:r,name:v,onError:l,delayRenderRetries:t,delayRenderTimeoutInMilliseconds:i,loopVolumeCurveBehavior:s,pauseWhenBuffering:m,...y}=a,S=oe(),T=Se(s??"repeat"),b=re(),c=I.useContext(X),{registerRenderAsset:p,unregisterRenderAsset:C}=I.useContext(St),g=I.useMemo(()=>`audio-${Ve(a.src??"")}-${c==null?void 0:c.relativeFrom}-${c==null?void 0:c.cumulatedFrom}-${c==null?void 0:c.durationInFrames}`,[a.src,c==null?void 0:c.relativeFrom,c==null?void 0:c.cumulatedFrom,c==null?void 0:c.durationInFrames]),E=fe({volume:F,frame:T,mediaVolume:1,allowAmplificationDuringRender:e??!1});I.useImperativeHandle(h,()=>w.current,[]),I.useEffect(()=>{if(!a.src)throw new Error("No src passed");if(window.remotion_audioEnabled&&!a.muted&&!(E<=0))return p({type:"audio",src:ie(a.src),id:g,frame:S,volume:E,mediaFrame:b,playbackRate:a.playbackRate??1,allowAmplificationDuringRender:e??!1,toneFrequency:o??null,audioStartFrame:Math.max(0,-((c==null?void 0:c.relativeFrom)??0))}),()=>C(g)},[a.muted,a.src,p,S,g,C,E,T,b,d,a.playbackRate,e,o,c==null?void 0:c.relativeFrom]);const{src:x}=a,P=h||n;return I.useLayoutEffect(()=>{var k,B;if(((B=(k=window.process)==null?void 0:k.env)==null?void 0:B.NODE_ENV)==="test"||!P)return;const M=se("Loading <Audio> duration with src="+x,{retries:t??void 0,timeoutInMilliseconds:i??void 0}),{current:R}=w,A=()=>{R!=null&&R.duration&&u(R.src,R.duration),Y(M)};return R!=null&&R.duration?(u(R.src,R.duration),Y(M)):R==null||R.addEventListener("loadedmetadata",A,{once:!0}),()=>{R==null||R.removeEventListener("loadedmetadata",A),Y(M)}},[x,u,P,t,i]),P?O.jsx("audio",{ref:w,...y}):null},er=I.forwardRef(_n),tr=(a,h)=>{const w=I.useContext($t),{startFrom:F,endAt:d,name:e,stack:u,pauseWhenBuffering:o,showInTimeline:n,_remotionDebugSeeking:f,...r}=a,{loop:v,...l}=a,{fps:t}=ne(),i=J(),{durations:s,setDurations:m}=I.useContext(Mt);if(typeof a.src!="string")throw new TypeError(`The \`<Audio>\` tag requires a string for \`src\`, but got ${JSON.stringify(a.src)} instead.`);const y=ue(a.src),S=I.useCallback(c=>{console.log(c.currentTarget.error);const p=`Could not play audio with src ${y}: ${c.currentTarget.error}. See https://remotion.dev/docs/media-playback-error for help.`;v?Ne(new Error(p)):console.warn(p)},[v,y]),T=I.useCallback((c,p)=>{m({type:"got-duration",durationInSeconds:p,src:c})},[m]),b=s[ie(y)]??s[ie(a.src)];if(v&&b!==void 0){if(!Number.isFinite(b))return O.jsx(he,{...l,ref:h,_remotionInternalNativeLoopPassed:!0});const c=b*t;return O.jsx(ye,{layout:"none",durationInFrames:Ct({endAt:d,mediaDuration:c,playbackRate:a.playbackRate??1,startFrom:F}),children:O.jsx(he,{...l,ref:h,_remotionInternalNativeLoopPassed:!0})})}if(typeof F<"u"||typeof d<"u"){Tt(F,d);const c=F??0,p=d??1/0;return O.jsx(le,{layout:"none",from:0-c,showInTimeline:!1,durationInFrames:p,name:e,children:O.jsx(he,{_remotionInternalNeedsDurationCalculation:!!v,pauseWhenBuffering:o??!1,...r,ref:h})})}return Et(a,"Audio"),i.isRendering?O.jsx(er,{onDuration:T,...a,ref:h,onError:S,_remotionInternalNeedsDurationCalculation:!!v}):O.jsx(Qn,{_remotionInternalNativeLoopPassed:a._remotionInternalNativeLoopPassed??!1,_remotionDebugSeeking:f??!1,_remotionInternalStack:u??null,shouldPreMountAudioTags:w!==null&&w.numberOfAudioTags>0,...a,ref:h,onError:S,onDuration:T,pauseWhenBuffering:o??!1,_remotionInternalNeedsDurationCalculation:!!v,showInTimeline:n??!0})},he=I.forwardRef(tr);xe(he);I.createContext({folderName:null,parentName:null});Z.createRef();var nr=({onLoad:a,onError:h,delayRenderRetries:w,delayRenderTimeoutInMilliseconds:F,...d},e)=>{const[u]=I.useState(()=>se(`Loading <IFrame> with source ${d.src}`,{retries:w??void 0,timeoutInMilliseconds:F??void 0})),o=I.useCallback(f=>{Y(u),a==null||a(f)},[u,a]),n=I.useCallback(f=>{Y(u),h?h(f):console.error("Error loading iframe:",f,"Handle the event using the onError() prop to make this message disappear.")},[u,h]);return O.jsx("iframe",{...d,ref:e,onError:n,onLoad:o})};I.forwardRef(nr);function rr(a){return 1e3*2**(a-1)}var ir=({onError:a,maxRetries:h=2,src:w,pauseWhenLoading:F,delayRenderRetries:d,delayRenderTimeoutInMilliseconds:e,onImageFrame:u,...o},n)=>{const f=I.useRef(null),r=I.useRef({}),{delayPlayback:v}=$e(),l=I.useContext(X);if(!w)throw new Error('No "src" prop was passed to <Img>.');I.useImperativeHandle(n,()=>f.current,[]);const t=ue(w),i=I.useCallback(m=>{if(!f.current)return;const y=f.current.src;setTimeout(()=>{var T;if(!f.current)return;const S=(T=f.current)==null?void 0:T.src;S===y&&(f.current.removeAttribute("src"),f.current.setAttribute("src",S))},m)},[]),s=I.useCallback(m=>{var y,S,T,b,c,p,C;if(r.current){if(r.current[(y=f.current)==null?void 0:y.src]=(r.current[(S=f.current)==null?void 0:S.src]??0)+1,a&&(r.current[(T=f.current)==null?void 0:T.src]??0)>h){a(m);return}if((r.current[(b=f.current)==null?void 0:b.src]??0)<=h){const g=rr(r.current[(c=f.current)==null?void 0:c.src]??0);console.warn(`Could not load image with source ${(p=f.current)==null?void 0:p.src}, retrying again in ${g}ms`),i(g);return}Ne("Error loading image with src: "+((C=f.current)==null?void 0:C.src))}},[h,a,i]);if(typeof window<"u"){const m=!!(l!=null&&l.premounting);I.useLayoutEffect(()=>{var C,g;if(((g=(C=window.process)==null?void 0:C.env)==null?void 0:g.NODE_ENV)==="test"){f.current&&(f.current.src=t);return}const y=se("Loading <Img> with src="+t,{retries:d??void 0,timeoutInMilliseconds:e??void 0}),S=F&&!m?v().unblock:()=>{},{current:T}=f;let b=!1;const c=()=>{var E,x,P;b||((r.current[(E=f.current)==null?void 0:E.src]??0)>0&&(delete r.current[(x=f.current)==null?void 0:x.src],console.info(`Retry successful - ${(P=f.current)==null?void 0:P.src} is now loaded`)),T&&(T.src=t,u==null||u(T)),S(),Y(y))},p=new Image;return p.src=t,p.decode().then(c).catch(E=>{console.warn(E),p.complete?c():p.addEventListener("load",c)}),()=>{b=!0,p.removeEventListener("load",c),S(),Y(y)}},[t,v,d,e,F,m,u])}return O.jsx("img",{...o,ref:f,onError:s})};I.forwardRef(ir);var or={};ft(or,{makeDefaultPreviewCSS:()=>sr,injectCSS:()=>ar,OFFTHREAD_VIDEO_CLASS_NAME:()=>Ae});var st={},ar=a=>{if(typeof document>"u"||st[a])return;const h=document.head||document.getElementsByTagName("head")[0],w=document.createElement("style");w.appendChild(document.createTextNode(a)),h.prepend(w),st[a]=!0},Ae="__remotion_offthreadvideo",sr=(a,h)=>a?`
    ${a} * {
      box-sizing: border-box;
    }
    ${a} *:-webkit-full-screen {
      width: 100%;
      height: 100%;
    }
    ${a} .${Ae} {
      object-fit: contain;
    }
  `:`
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
	    background-color: ${h};
    }
    .${Ae} {
      object-fit: contain;
    }
    `;Z.createContext(null);I.createContext({setSize:()=>{},size:{size:"auto",translation:{x:0,y:0}}});var Ot=I.createContext(!1),lr=({children:a})=>O.jsx(Ot.Provider,{value:!1,children:a}),ur=()=>{if(!Z.useContext(Ot))throw new Error("This component must be inside a <Series /> component.")},fr=({children:a},h)=>(ur(),O.jsx(lr,{children:a})),cr=I.forwardRef(fr);xe(cr);var dr=({ref:a,onVideoFrame:h})=>{I.useEffect(()=>{const{current:w}=a;if(!w||!h)return;let F=0;const d=()=>{a.current&&(h(a.current),F=a.current.requestVideoFrameCallback(d))};return d(),()=>{w.cancelVideoFrameCallback(F)}},[h,a])},mr=(a,h)=>{const w=I.useRef(null),{volume:F,muted:d,playbackRate:e,onlyWarnForMediaSeekingError:u,src:o,onDuration:n,acceptableTimeShift:f,acceptableTimeShiftInSeconds:r,toneFrequency:v,name:l,_remotionInternalNativeLoopPassed:t,_remotionInternalStack:i,_remotionDebugSeeking:s,style:m,pauseWhenBuffering:y,showInTimeline:S,loopVolumeCurveBehavior:T,onError:b,onAutoPlayError:c,onVideoFrame:p,crossOrigin:C,...g}=a,E=Se(T??"repeat"),{fps:x,durationInFrames:P}=ne(),M=I.useContext(X),{hidden:R}=I.useContext(ke),[A]=I.useState(()=>String(Math.random())),k=R[A]??!1;if(typeof f<"u")throw new Error("acceptableTimeShift has been removed. Use acceptableTimeShiftInSeconds instead.");const B=kt(w),[L]=Nt(),[D]=Vt();Ft({mediaRef:w,volume:F,mediaVolume:L,mediaType:"video",src:o,playbackRate:a.playbackRate??1,displayName:l??null,id:A,stack:i,showInTimeline:S,premountDisplay:null,onAutoPlayError:c??null}),Bt({volumePropFrame:E,actualVolume:B,volume:F,mediaVolume:L,mediaRef:w}),At({mediaRef:w,src:o,mediaType:"video",playbackRate:a.playbackRate??1,onlyWarnForMediaSeekingError:u,acceptableTimeshift:r??He,isPremounting:!!(M!=null&&M.premounting),pauseWhenBuffering:y,debugSeeking:s,onAutoPlayError:c??null});const N=M?M.relativeFrom:0,W=M?Math.min(M.durationInFrames,P):P,U=jn({actualSrc:ue(o),actualFrom:N,duration:W,fps:x});I.useImperativeHandle(h,()=>w.current,[]),I.useEffect(()=>{const{current:$}=w;if(!$)return;const V=()=>{var z;if($.error){if(console.error("Error occurred in video",$==null?void 0:$.error),b){const G=new Error(`Code ${$.error.code}: ${$.error.message}`);b(G);return}throw new Error(`The browser threw an error while playing the video ${o}: Code ${$.error.code} - ${(z=$==null?void 0:$.error)==null?void 0:z.message}. See https://remotion.dev/docs/media-playback-error for help. Pass an onError() prop to handle the error.`)}else{if(b){const G=new Error(`The browser threw an error while playing the video ${o}`);b(G);return}throw new Error("The browser threw an error while playing the video")}};return $.addEventListener("error",V,{once:!0}),()=>{$.removeEventListener("error",V)}},[b,o]);const H=I.useRef();H.current=n,dr({ref:w,onVideoFrame:p}),I.useEffect(()=>{var z;const{current:$}=w;if(!$)return;if($.duration){(z=H.current)==null||z.call(H,o,$.duration);return}const V=()=>{var G;(G=H.current)==null||G.call(H,o,$.duration)};return $.addEventListener("loadedmetadata",V),()=>{$.removeEventListener("loadedmetadata",V)}},[o]),I.useEffect(()=>{const{current:$}=w;$&&(Oe()?$.preload="metadata":$.preload="auto")},[]);const j=I.useMemo(()=>({...m,opacity:k?0:(m==null?void 0:m.opacity)??1}),[k,m]),Q=C??(p?"anonymous":void 0);return O.jsx("video",{ref:w,muted:d||D,playsInline:!0,src:U,loop:t,style:j,disableRemotePlayback:!0,crossOrigin:Q,...g})},vr=I.forwardRef(mr),lt=a=>Math.round(a*1e5)/1e5,Me=(a,h)=>{if(We(a.currentTime,h))return{wait:Promise.resolve(h),cancel:()=>{}};a.currentTime=h;let w,F=null;const d=new Promise(u=>{w=a.requestVideoFrameCallback((o,n)=>{const f=n.expectedDisplayTime-o;if(f<=0){u(n.mediaTime);return}setTimeout(()=>{u(n.mediaTime)},f+150)})}),e=new Promise(u=>{const o=()=>{u()};a.addEventListener("seeked",o,{once:!0}),F=()=>{a.removeEventListener("seeked",o)}});return{wait:Promise.all([d,e]).then(([u])=>u),cancel:()=>{F==null||F(),a.cancelVideoFrameCallback(w)}}},pr=(a,h,w)=>{const F=1/w/2;let d=()=>{};return Number.isFinite(a.duration)&&a.currentTime>=a.duration&&h>=a.duration?{prom:Promise.resolve(),cancel:()=>{}}:{prom:new Promise((u,o)=>{const n=Me(a,h+F);n.wait.then(f=>{if(Math.abs(h-f)<=F)return u();const v=h>f?1:-1,l=Me(a,f+F*v);d=l.cancel,l.wait.then(t=>{const i=Math.abs(h-t);if(lt(i)<=lt(F))return u();const s=Me(a,h+F);return d=s.cancel,s.wait.then(()=>{u()}).catch(m=>{o(m)})}).catch(t=>{o(t)})}),d=n.cancel}),cancel:()=>{d()}}},hr=({onError:a,volume:h,allowAmplificationDuringRender:w,playbackRate:F,onDuration:d,toneFrequency:e,name:u,acceptableTimeShiftInSeconds:o,delayRenderRetries:n,delayRenderTimeoutInMilliseconds:f,loopVolumeCurveBehavior:r,...v},l)=>{const t=oe(),i=re(),s=Se(r??"repeat"),m=wt(),y=I.useRef(null),S=I.useContext(X),T=we(),b=J(),{registerRenderAsset:c,unregisterRenderAsset:p}=I.useContext(St),C=I.useMemo(()=>`video-${Ve(v.src??"")}-${S==null?void 0:S.cumulatedFrom}-${S==null?void 0:S.relativeFrom}-${S==null?void 0:S.durationInFrames}`,[v.src,S==null?void 0:S.cumulatedFrom,S==null?void 0:S.relativeFrom,S==null?void 0:S.durationInFrames]);if(!m)throw new Error("No video config found");const g=fe({volume:h,frame:s,mediaVolume:1,allowAmplificationDuringRender:w??!1});I.useEffect(()=>{if(!v.src)throw new Error("No src passed");if(!v.muted&&!(g<=0)&&window.remotion_audioEnabled)return c({type:"video",src:ie(v.src),id:C,frame:t,volume:g,mediaFrame:i,playbackRate:F??1,allowAmplificationDuringRender:w??!1,toneFrequency:e??null,audioStartFrame:Math.max(0,-((S==null?void 0:S.relativeFrom)??0))}),()=>p(C)},[v.muted,v.src,c,C,p,g,i,t,F,w,e,S==null?void 0:S.relativeFrom]),I.useImperativeHandle(l,()=>y.current,[]),I.useEffect(()=>{var B,L;if(!window.remotion_videoEnabled)return;const{current:x}=y;if(!x)return;const P=It({frame:i,playbackRate:F||1,startFrom:-T,fps:m.fps}),M=se(`Rendering <Video /> with src="${v.src}" at time ${P}`,{retries:n??void 0,timeoutInMilliseconds:f??void 0});if(((L=(B=window.process)==null?void 0:B.env)==null?void 0:L.NODE_ENV)==="test"){Y(M);return}if(We(x.currentTime,P)){if(x.readyState>=2){Y(M);return}const D=()=>{Y(M)};return x.addEventListener("loadeddata",D,{once:!0}),()=>{x.removeEventListener("loadeddata",D)}}const R=()=>{Y(M)},A=pr(x,P,m.fps);A.prom.then(()=>{Y(M)}),x.addEventListener("ended",R,{once:!0});const k=()=>{var D;if(x!=null&&x.error){if(console.error("Error occurred in video",x==null?void 0:x.error),a)return;throw new Error(`The browser threw an error while playing the video ${v.src}: Code ${x.error.code} - ${(D=x==null?void 0:x.error)==null?void 0:D.message}. See https://remotion.dev/docs/media-playback-error for help. Pass an onError() prop to handle the error.`)}else throw new Error("The browser threw an error")};return x.addEventListener("error",k,{once:!0}),()=>{A.cancel(),x.removeEventListener("ended",R),x.removeEventListener("error",k),Y(M)}},[s,v.src,F,m.fps,i,T,a,n,f]);const{src:E}=v;return b.isRendering&&I.useLayoutEffect(()=>{var R,A;if(((A=(R=window.process)==null?void 0:R.env)==null?void 0:A.NODE_ENV)==="test")return;const x=se("Loading <Video> duration with src="+E,{retries:n??void 0,timeoutInMilliseconds:f??void 0}),{current:P}=y,M=()=>{P!=null&&P.duration&&d(E,P.duration),Y(x)};return P!=null&&P.duration?(d(E,P.duration),Y(x)):P==null||P.addEventListener("loadedmetadata",M,{once:!0}),()=>{P==null||P.removeEventListener("loadedmetadata",M),Y(x)}},[E,d,n,f]),O.jsx("video",{ref:y,disableRemotePlayback:!0,...v})},gr=I.forwardRef(hr),xr=(a,h)=>{const{startFrom:w,endAt:F,name:d,pauseWhenBuffering:e,stack:u,_remotionInternalNativeLoopPassed:o,showInTimeline:n,onAutoPlayError:f,...r}=a,{loop:v,_remotionDebugSeeking:l,...t}=a,{fps:i}=ne(),s=J(),{durations:m,setDurations:y}=I.useContext(Mt);if(typeof h=="string")throw new Error("string refs are not supported");if(typeof a.src!="string")throw new TypeError(`The \`<Video>\` tag requires a string for \`src\`, but got ${JSON.stringify(a.src)} instead.`);const S=ue(a.src),T=I.useCallback((p,C)=>{y({type:"got-duration",durationInSeconds:C,src:p})},[y]),b=I.useCallback(()=>{},[]),c=m[ie(S)]??m[ie(a.src)];if(v&&c!==void 0){if(!Number.isFinite(c))return O.jsx(ge,{...t,ref:h,_remotionInternalNativeLoopPassed:!0});const p=c*i;return O.jsx(ye,{durationInFrames:Ct({endAt:F,mediaDuration:p,playbackRate:a.playbackRate??1,startFrom:w}),layout:"none",name:d,children:O.jsx(ge,{...t,ref:h,_remotionInternalNativeLoopPassed:!0})})}if(typeof w<"u"||typeof F<"u"){Tt(w,F);const p=w??0,C=F??1/0;return O.jsx(le,{layout:"none",from:0-p,showInTimeline:!1,durationInFrames:C,name:d,children:O.jsx(ge,{pauseWhenBuffering:e??!1,...r,ref:h})})}return Et(a,"Video"),s.isRendering?O.jsx(gr,{onDuration:T,onVideoFrame:b??null,...r,ref:h}):O.jsx(vr,{onlyWarnForMediaSeekingError:!1,...r,ref:h,onVideoFrame:null,pauseWhenBuffering:e??!1,onDuration:T,_remotionInternalStack:u??null,_remotionInternalNativeLoopPassed:o??!1,_remotionDebugSeeking:l??!1,showInTimeline:n??!0,onAutoPlayError:f??void 0})},ge=I.forwardRef(xr);xe(ge);Xt();var yr={},wr=new Proxy(yr,{get(a,h){return h==="Bundling"||h==="Rendering"||h==="Log"||h==="Puppeteer"||h==="Output"?wr:()=>{console.warn("âš ï¸  The CLI configuration has been extracted from Remotion Core."),console.warn("Update the import from the config file:"),console.warn(),console.warn("- Delete:"),console.warn('import {Config} from "remotion";'),console.warn("+ Replace:"),console.warn('import {Config} from "@remotion/cli/config";'),console.warn(),console.warn("For more information, see https://www.remotion.dev/docs/4-0-migration."),process.exit(1)}}});xe(le);zt.Engine.create();
